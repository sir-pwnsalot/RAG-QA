const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C3FxZ4wa.js","assets/vite-D9Bl2idj.js","assets/WatchlistSelections-DPlK4SYK.js","assets/vendors-DjjIY8ZQ.js","assets/i18n-C055ss6D.js","assets/icons-DO5PjO-d.js","assets/platform-BkRpJmFP.js","assets/AppDownloadQR-zqcSXPEM.js","assets/emoji-picker-react.esm-D57JeT_8.js","assets/FileUploadModal-CTeo0dh0.js","assets/SourcesTable-AUT08CrS.js","assets/FilesTableHeader-DF-x3Qn-.js","assets/CometDownloadInstructionsModal-CTcft6S-.js","assets/CollectionCreateEditModal-Dk4KSM0X.js","assets/getMaybeTranslatedCollectionTitle-C2mn75Fm.js","assets/CollectionSelectModal-BwBjpA7t.js","assets/OnboardingModal-OE_Lq1D5.js","assets/MarkdownRenderer-CsluIYGJ.js","assets/index-DO43kW8X.js","assets/MarkdownStreamer-C4yMDc2X.js","assets/useHandleClickPricing-Rg3lropy.js","assets/useReferralCode-C7G-F5ZB.js","assets/PlatformOptions-C_iCgFhT.js","assets/CombinedPaywall-B0DQAc7E.js","assets/StudentReferralsContent-DMYZhxmY.js","assets/CanonicalPattern-B18fyHK5.js","assets/useStudentReferralRewards-Nl3A2kO8.js","assets/PurchaseConfirmationToast-DWxyOw4C.js","assets/use-unmount-effect-q29IWlui.js","assets/CompanyDataPrivacyModal-C4d78CBj.js","assets/SpaceVideoModal-BhJwwgCx.js","assets/PricingTableModal-Bu7sWvLp.js","assets/FreeTrialModal-B4pWUjsf.js","assets/MapModal-C3DXUNwI.js","assets/PerplexityMap-TZMVspL7.js","assets/PulsingDot-CjV3fcOR.js","assets/InputPaymentModal-DdLHZRHv.js","assets/useStripePromise-C4YUthXe.js","assets/ShoppingPaymentModal-BN3JyxO6.js","assets/useCreateFirmlyCart-D9Y_BxM8.js","assets/DiscountTag-CgLajVFs.js","assets/ShoppingOptionRow-Bb9mDpYp.js","assets/useStripeAppearance-DF-UWLlc.js","assets/useCreateSetupIntentAndCheckoutSession-CNDjbIbp.js","assets/EntityItemImageCarousel-CHox-vGK.js","assets/Carousel-aOoT5w7A.js","assets/embla-carousel-react.esm-Cd4NT6DO.js","assets/ShoppingPaymentBillingBox-DhPGsL3j.js","assets/ShoppingOnboardingModal-BBKD9BTh.js","assets/PurchaseDetailsModal-DiiNIQaL.js","assets/PurchaseStatus-jI6a4eyD.js","assets/ReservationDetailsModal-BIzARzZb.js","assets/utils-CkZppYKb.js","assets/StatusIcon-BLMVpMS-.js","assets/util-TkwrISu2.js","assets/SpaceSettingsModal-CZSD5uR9.js","assets/UsernameModal-D9J-8aI_.js","assets/FullNameModal-CeXsJ436.js","assets/KeyboardShortcutEditorModal-BNSIIWaJ.js","assets/VoiceToVoiceModal-D06NJJGX.js","assets/constants-WAKW4jqh.js","assets/SearchStepsAssetsModal-B88ufDUh.js","assets/GeneratedVideoCard-BDY9qH33.js","assets/CodeFileContentRenderer-D1Jxxz3C.js","assets/XlsxViewer-DePRPrdy.js","assets/PDFViewerCore-Dn74JhVn.js","assets/MemoryListModal-DyYThlz0.js","assets/MemoryList-Bn5Wd6wi.js","assets/MemoryDetailModal-Dlj9Z5c0.js","assets/HotelRoomDetailsModal-3sNiqqx4.js","assets/MaybeAdjustedPrice-BUw5F__l.js","assets/ImagePagedCarousel-CQ_k5IWO.js","assets/PaymentModal-9pcXmDH1.js","assets/ProReferralModal-C_juUQRd.js","assets/MeetingDefaultsModal-DsB-P81Q.js","assets/AvailabilityModal-CUegg-Ps.js","assets/ComboBox-CytoDF3C.js","assets/ProMessageModal-CzfyiMC9.js","assets/MemorySearchHistoryIntroModal-CNQdA6FM.js","assets/SubSuccessModal-CZzRq2oD.js","assets/PerksList-e02Bg2UB.js","assets/ReferralErrorModal-DCpyaTFz.js","assets/ReferralSuccessModal-3hSUygZ_.js","assets/IncentiveProModal-BdYn6wqQ.js","assets/StudentReferralsModal-BX9JD3_Q.js","assets/SheerIDModal-DRUX72pn.js","assets/BraintreeSubscriptionModal-DZJ37-j3.js","assets/RestaurantBookingModal-skHf0r3t.js","assets/SheerIdRedirectModal-9yQQaHL9.js","assets/EnterprisePremiumSecureUpgradeModal-Cv6V-we_.js","assets/useOrgPremiumSecureFeatures-CEdz7Dk3.js","assets/ShortcutModal-L3f8QJT0.js","assets/PlatformOptionsModal-C69hvre9.js","assets/SharepointSiteModal-DXKc864X.js","assets/MCPServerModal-6DgVCPS5.js","assets/MemberSetTierModal-ZJ7Kv6cR.js","assets/MCPServiceToolsModal-CBnPIM40.js","assets/index-DKFDMv2a.js","assets/DebugStreamSideEffects-Ba9XSdJZ.js","assets/DebugDisplay-DP_DANe3.js","assets/_restricted/restricted-feature-debug-D3x5lJcJ.js","assets/RenderToolbar-BKBpNXu7.js","assets/DebugModeActivator-DwQjrCFo.js","assets/LexicalHistoryPlugin.prod-B_L1vLOK.js","assets/OnChangePlugin-CXowRJeK.js","assets/LexicalEditorRefPlugin.prod-DQb6250Q.js","assets/AutoLinkPlugin-DuYcql8C.js","assets/LinkPlugin-Djn8lFwl.js","assets/LexicalMarkdownShortcutPlugin.prod-8pofusBH.js","assets/WelcomeOverlay-F-MRv5jC.js","assets/SideCanvasViewer-s_W823mC.js","assets/useVersioningChain-CB_elU1T.js","assets/AssetsMode-DzEG0nDj.js","assets/ShoppingDetailsModal-OKhzrrGu.js","assets/ShoppingWidget-DSJMgUKX.js","assets/EntityItemReviewSummary-DagYJXDl.js","assets/ThreadEntryVideo-CJNvRUs_.js","assets/useSponsoredImpressionTracking-BcF_vAUs.js","assets/useViewportDwellObserver-HIaoyUPe.js","assets/CitationTrendingList-CR2G8kF5.js","assets/useNewFileViewer-4SVds58y.js","assets/useIsShoppingtryOnEnabled-C6OgAqV7.js","assets/ShopifyPurchaseModal-DeJl9V63.js","assets/ShopifyPurchaseModalMobile-CAgreVGr.js","assets/ShoppingViewMoreModal-zZ9hbsaI.js","assets/useSearchForAdditionalProducts-B6z3d2V5.js","assets/ShoppingOverviewItem-BlXqSB1S.js","assets/SplitModal-B10ptTGu.js","assets/qrcode-DzQwd33t.js","assets/index-DVIXI4Xq.js","assets/CharityWidget-CuygT3U1.js","assets/BrandPopoverContent-BWAazDhZ.js","assets/cdn-B8XnoTtL.js","assets/abap-xXO2ZNBr.js","assets/abnf-Cpr-RfZc.js","assets/actionscript-7IoedjRX.js","assets/ada-DvJpapMr.js","assets/agda-CXQhj6q_.js","assets/al-Dn94UNn4.js","assets/antlr4-D_WJe1oO.js","assets/apacheconf-BxdI37fF.js","assets/apex-DSxd3UGl.js","assets/sql-CJATM1Qp.js","assets/apl-BhX0_fkh.js","assets/applescript-mDtPbSw7.js","assets/aql-CCmuoNOQ.js","assets/arduino-BOTCtVXt.js","assets/cpp-PR_WB-PF.js","assets/c-kgVuzdLE.js","assets/arff-LHIGEhob.js","assets/asciidoc-DUL3t6uM.js","assets/asm6502-B_69y3yN.js","assets/asmatmel-LW8Eoafy.js","assets/aspnet-3TSffHQD.js","assets/csharp-Cd5Udg29.js","assets/autohotkey-DDP9Pz17.js","assets/autoit-B6rX58wf.js","assets/avisynth-Dm_4mu0N.js","assets/avro-idl-UlEGCRi0.js","assets/bash-BDr8_71o.js","assets/bash-CefCgV5_.js","assets/basic-BBt5kyDw.js","assets/basic-DBS9NaGG.js","assets/batch-Cj3BSbMY.js","assets/bbcode-DpxtQw0_.js","assets/bicep-CmgEE0U9.js","assets/birb-Dars3CuK.js","assets/bison-DX1VDlfk.js","assets/bnf-B6-zmMw4.js","assets/brainfuck-EZxQTWZ8.js","assets/brightscript-MwC7Espe.js","assets/bro-JV1z53-B.js","assets/bsl-Cd53xDCy.js","assets/c-CxGDiPNH.js","assets/cfscript-B9mkrBpQ.js","assets/chaiscript-Dof1nfTW.js","assets/cil-Bn3Q2E1W.js","assets/clike-DDqLwGhR.js","assets/clike-B5tY_8Hg.js","assets/clojure-C8Cgr9xq.js","assets/cmake-BO229LM_.js","assets/cobol-ncmGEesi.js","assets/coffeescript-D_XUmKs0.js","assets/concurnas-TfeVZMOZ.js","assets/coq-B5z9RsQ6.js","assets/cpp-Chcfrze0.js","assets/crystal-Dynhbd61.js","assets/ruby-DYsn9XfW.js","assets/csharp-BhqpJkpq.js","assets/cshtml-BWGfxKn4.js","assets/csp-BoPMW3Ei.js","assets/css-extras-Hsmrym8x.js","assets/css-DY8FYVYE.js","assets/css-CF9HHZb0.js","assets/csv-C7m4DnSA.js","assets/cypher-l75AB8hd.js","assets/d-CDO8utOJ.js","assets/dart-PPmz7K9W.js","assets/dataweave-DSq9Bs2g.js","assets/dax-Ql7iF31E.js","assets/dhall-D8AlcFmH.js","assets/diff-DxjKD27r.js","assets/django-DdNzo2Lw.js","assets/markup-templating-BxAVv-bL.js","assets/dns-zone-file-CPg1_KvB.js","assets/docker-CVuCFm8y.js","assets/dot-Cv30q0-0.js","assets/ebnf-D4d3p3sx.js","assets/editorconfig-svCLfWhT.js","assets/eiffel-DhOhlUP9.js","assets/ejs-CuszUXEo.js","assets/elixir-CZtOXY6s.js","assets/elm-BcYqZUmH.js","assets/erb-D4Jx3m2Q.js","assets/erlang-Bs9TEZ3l.js","assets/etlua-C0lc7-1S.js","assets/lua-DER4jxlW.js","assets/excel-formula-CzIhBLjN.js","assets/factor-WaebLdn4.js","assets/false-ShlVddT_.js","assets/firestore-security-rules-4moqVYWI.js","assets/flow-CXLXbYk5.js","assets/fortran-BND3_knE.js","assets/fsharp-BFha84XY.js","assets/ftl-GB7jbcGS.js","assets/gap-Dpz_lRLC.js","assets/gcode-C7ldqsmu.js","assets/gdscript-B9Bfhib1.js","assets/gedcom-btzlAVde.js","assets/gherkin-DXkOYSMV.js","assets/git-Bi1kQND6.js","assets/glsl-BYO0fWe4.js","assets/gml-Dcj75dEM.js","assets/gn-C5jCMEGg.js","assets/go-module-DS88Hgar.js","assets/go-Bb8GlO4U.js","assets/graphql-BqELzFSN.js","assets/groovy-CZHQRD2T.js","assets/haml-D4Cu9GWy.js","assets/handlebars-C4Zm0IB3.js","assets/haskell-qrj8ifSK.js","assets/haskell-Ds42Eazu.js","assets/haxe-ChRoPNLt.js","assets/hcl-DW5WNCe3.js","assets/hlsl-BedTSN1F.js","assets/hoon-BwAkIC7V.js","assets/hpkp-KfxxGNng.js","assets/hsts-BSN3uVd1.js","assets/http-FRE2So_Y.js","assets/ichigojam-68yjR9qP.js","assets/icon-DMVM2VVb.js","assets/icu-message-format-D6wK9nFS.js","assets/idris-DVPeRJob.js","assets/iecst-CVU0L1v2.js","assets/ignore-CWbAeMHy.js","assets/inform7-D7YCc5AS.js","assets/ini-DTjpb4oT.js","assets/io-DyJVvRKM.js","assets/j-B1KsJ8Lh.js","assets/java-C8KDVoMm.js","assets/java-BxMbkJZ_.js","assets/javadoc-Be5z3uxJ.js","assets/javadoclike-myFApC35.js","assets/javadoclike-AcPh5e5A.js","assets/javascript-C1hWj-gL.js","assets/javascript-D8vYUPHd.js","assets/javastacktrace-l5DDWqnd.js","assets/jexl-CPewgw8R.js","assets/jolie-oDW4xHAj.js","assets/jq-DCybKO55.js","assets/js-extras-Dt3p3jFp.js","assets/js-templates-C36cwUgG.js","assets/jsdoc-D9b2eQCX.js","assets/typescript-CVO-8GEc.js","assets/json-DxuiKECE.js","assets/json-BESjz4hO.js","assets/json5-xjq_y-Ab.js","assets/jsonp-O-R2QEUD.js","assets/jsstacktrace-AwxS9N4y.js","assets/jsx-oDQJXXbV.js","assets/jsx-CWP8P1mH.js","assets/julia-CSbapaXD.js","assets/keepalived-QNLh4sKY.js","assets/keyman-Dekq-H3g.js","assets/kotlin-luLWldVW.js","assets/kumir-gJ2eR1Bt.js","assets/kusto-B8-0f2WS.js","assets/latex-naZEwrIf.js","assets/latte-CuYvwG6d.js","assets/php-DWsP2mkx.js","assets/less-IPZUooSX.js","assets/lilypond-Ca27w2l1.js","assets/scheme-Cscf027c.js","assets/liquid-CqfwnlE8.js","assets/lisp-DS6a9sOI.js","assets/livescript-BtvwBPLA.js","assets/llvm-DJuz_f_4.js","assets/log-vpDuJ6s7.js","assets/lolcode-D7zlseNY.js","assets/lua-CrdnDpZs.js","assets/magma-CXc54FID.js","assets/makefile-TgER5D3-.js","assets/markdown-BBUfvsG3.js","assets/markup-templating-DkjQpHey.js","assets/markup-DvUfpNsN.js","assets/markup-BONeskWm.js","assets/matlab-D8KyOrZZ.js","assets/maxscript-BLMZLNdj.js","assets/mel-Ck2zZU6-.js","assets/mermaid-BbVwv4sI.js","assets/mizar-C5pIb6PU.js","assets/mongodb-BP-_FLZQ.js","assets/monkey-CJMClX9N.js","assets/moonscript-B3F4_gd_.js","assets/n1ql-DEwy8oY_.js","assets/n4js-DosTxUWO.js","assets/nand2tetris-hdl-BaEjoK_-.js","assets/naniscript-CwUM2gJ6.js","assets/nasm-BBm4hQNa.js","assets/neon-D7ky2QYE.js","assets/nevod-ytlw2XDY.js","assets/nginx-BAoSqL21.js","assets/nim-vhNCNa0d.js","assets/nix-UkDV490L.js","assets/nsis-CB_gSgbd.js","assets/objectivec-COnIeXKs.js","assets/ocaml-p7XlZdCt.js","assets/opencl-DpkpHOKT.js","assets/openqasm-BUO-RrFI.js","assets/oz-BKi7Vu9u.js","assets/parigp-Q2v1bPZv.js","assets/parser-CuIfV_M8.js","assets/pascal-BiB8a1yc.js","assets/pascaligo-Bbe6k1sN.js","assets/pcaxis-Cjwjh94y.js","assets/peoplecode-hzUErX2R.js","assets/perl-B1D9cLJK.js","assets/php-extras-CZ7KxjqE.js","assets/php-Dk7MEIvs.js","assets/phpdoc-FxciP3cA.js","assets/plsql-DvVXY7wu.js","assets/powerquery-Btcc8rhQ.js","assets/powershell-AWIxkKNB.js","assets/processing-B76ABtt6.js","assets/prolog-BkajrflI.js","assets/promql-NkmAc1R6.js","assets/properties-Xjh-xSf6.js","assets/protobuf-BI4CAp9r.js","assets/psl-aZe3ORrd.js","assets/pug-CoMAP1Jj.js","assets/puppet-D22HavK3.js","assets/pure-BCQxrhr5.js","assets/purebasic-CS3SBoo5.js","assets/purescript-kPZQhZXw.js","assets/python-dI9O2OOO.js","assets/q-BM_OsTRZ.js","assets/qml-6uNzUUZ_.js","assets/qore-CT2dtVvu.js","assets/qsharp-CUW6Vzvu.js","assets/r-CxoAQyfy.js","assets/racket-Ce6iEwSg.js","assets/reason-C3OtRNQn.js","assets/regex-24inC6Mm.js","assets/rego-DIGNi3rm.js","assets/renpy-2_7A_zWP.js","assets/rest-DhkPHUyy.js","assets/rip-NrUmeF-B.js","assets/roboconf-BemhCpww.js","assets/robotframework-53wxIqzy.js","assets/ruby-C6pGL11I.js","assets/rust-BHPZBpz7.js","assets/sas-yB8mv_pf.js","assets/sass-DgOtzGEh.js","assets/scala-c85IbDKx.js","assets/scheme-DujsssZ_.js","assets/scss-N9CyGJ1A.js","assets/shell-session-CfJU-2jh.js","assets/smali-7KK8MopY.js","assets/smalltalk-DJTW1rgy.js","assets/smarty-CswuHGTf.js","assets/sml-4a7AgiKJ.js","assets/solidity-DEN_xXGX.js","assets/solution-file-DWy8oS52.js","assets/soy-BX0S4Ybl.js","assets/sparql-B-dncyn2.js","assets/turtle-Ro1R6Je7.js","assets/splunk-spl-BL9M6RFD.js","assets/sqf-B-w3EaXj.js","assets/sql-CSwhl0T2.js","assets/squirrel-C5_0fEts.js","assets/stan-BkKsrDj5.js","assets/stylus-2Q_1bI5O.js","assets/swift-d0VCk99T.js","assets/systemd-B69haCtV.js","assets/t4-cs-CLTzhrWu.js","assets/t4-templating-B5EzSFYT.js","assets/t4-templating-CInlPI0-.js","assets/t4-vb-CEKPTSWr.js","assets/vbnet-BhrUc4aD.js","assets/tap-3j2EobdJ.js","assets/yaml-pHjxJgpq.js","assets/tcl-zimK4Rb-.js","assets/textile-7onSDWIs.js","assets/toml-B0WKHIUt.js","assets/tremor-DTcir1gV.js","assets/tsx-C2pKQQQ0.js","assets/tt2-C4s6UOud.js","assets/turtle-BYwbX2lo.js","assets/twig-DALNrbqc.js","assets/typescript-hEHsyI9-.js","assets/typoscript-C_RZnLUi.js","assets/unrealscript-DO0UKSEs.js","assets/uorazor-Cw2oyUim.js","assets/uri-Cla3Mizl.js","assets/v-BsukdtQB.js","assets/vala-C185s0T4.js","assets/vbnet-CJSJpYVN.js","assets/velocity-CyQirldx.js","assets/verilog-DM4rVBaH.js","assets/vhdl-B2ul-nke.js","assets/vim-D2bsD5Qn.js","assets/visual-basic-DNYvyv_b.js","assets/warpscript-DjoJn5rp.js","assets/wasm-BbdpnjqR.js","assets/web-idl-BniNXYF8.js","assets/wiki-mlk-5nnD.js","assets/wolfram-qZAo5rwv.js","assets/wren-BqEZDn1c.js","assets/xeora-Cnf6lXKg.js","assets/xml-doc-Bt7GfDs3.js","assets/xojo-DJ-XOrAn.js","assets/xquery-DijxsTGH.js","assets/yaml-uyIc--AI.js","assets/yang-BSK0EYb5.js","assets/zig-C5U7OOzb.js","assets/core-Ce8M0wN-.js","assets/SidePDFViewer-B5YbfGnf.js","assets/ConnectorAuthorizationPrompt-H3imkGok.js","assets/AgentWorkflow-CMd6Fsr5.js","assets/MarkdownResponse-CzGOwR0V.js","assets/ThreadEntryFooter-DPz9z03G.js","assets/StructuredAnswerInlineBlock-CA8IfsE4.js","assets/PlaceInlineCard-CLTu-DuM.js","assets/MapboxURLs-4yEd9e3N.js","assets/CardCarouselV2-BJA8hN8H.js","assets/useGenerateShoppingReviewSummary-DJzo0szO.js","assets/ImagesModePreview-CvcF2-Lw.js","assets/utils-DNsIrOnd.js","assets/CanonicalContainer-DGyELvQN.js","assets/CanonicalPatternBackground-CgzXPkFx.js","assets/WithSidebar-D1TrzQfu.js","assets/QueryComponents-hCaCyOg9.js","assets/NotFound-CjnFC7ri.js","assets/BigNumber-Bp7dfb0c.js","assets/TimeAgoTooltip-CTv5YbEU.js","assets/ReportModal-CrYmJBfx.js","assets/CopyOutputButton-DlqgBkvd.js","assets/Related-DbYA41vP.js","assets/RelatedPrompts-D8ChMIHn.js","assets/RelatedQueryList-CmwR7O79.js","assets/index-COfrs7rm.js","assets/StudyModeRelated-BylQO8Mi.js","assets/MapsPreview-CO2l2kUx.js","assets/ThreadContentResponse-BaU1Sbt7.js","assets/SourcesModePreview-LCuixOgo.js","assets/AnswerComparisonModal-Bh_Zo0nj.js","assets/MobileCitationList-DbMIxeF4.js","assets/ThreadEntryDebugTiming-BD-HGjEB.js","assets/ShoppingMode-CxRLV8JA.js","assets/ShoppingFeaturedWidget-D2ouLm7L.js","assets/ModesNullState-BUt-ZZhw.js","assets/HotelsMode-DnFXsbB3.js","assets/GuestInput-CEw7DcVt.js","assets/SharedAnswerModeMap-BfZX2hST.js","assets/JobsMode-wJb8Ejiu.js","assets/VideosMode-DImIj5qd.js","assets/useMediaSearch-Dbmw1YoW.js","assets/ImagesMode-G6vTo158.js","assets/ImageGeneratorLoader-CEupGnVb.js","assets/MapsMode-BFWYyUDf.js","assets/TasksMode-iwrBL9on.js","assets/index-_bzOyYaE.js","assets/search-loading-component-_KenQFHt.js","assets/CometZenMode-CcVoyzyg.js","assets/index.module-BbBR7qJ_.js","assets/TryAssistantPage-C9vU3qc3.js","assets/library-DnsNf7SU.js","assets/useScrollPositionPersistence-Ct5XrgCF.js","assets/ArticleListItem-_Sy7HcYH.js","assets/index-Cvs8qDjp.js","assets/useSpacesBookmarking-BBJgMpzW.js","assets/templates-B4FqYPKw.js","assets/slug-CljoOgNj.js","assets/useOrgUsers-BPY8b2ZA.js","assets/slug-Dl1ZEOHX.js","assets/DiscoverTrending-Cm9aVuMR.js","assets/loading-BuwWhB9l.js","assets/academic-Bjiaqr98.js","assets/VerticalSearchContainer-DqiRKXSk.js","assets/VerticalLandingWrapper-Dko0NRl4.js","assets/shopping-BsFm1-UV.js","assets/hotels-Bt45R3YS.js","assets/not-found-DYPgJ0TV.js","assets/perplexify_me-DDOcnP0w.js","assets/travel-BLqTdBXT.js","assets/discover-BaR-nVtt.js","assets/TaskStarterCards-DzBDYxSb.js","assets/index-D4qic6nx.js","assets/F1Header-CY8q92c4.js","assets/MonthTabs-DmSBGK6K.js","assets/SportsTournamentOdds-B0YAWVZo.js","assets/SportsCanonicalContainer-B2vx6plN.js","assets/events-h2EPfGks.js","assets/index-CrOUUpwb.js","assets/common--tSZGIz-.js","assets/MultiTeamSchedule-BzDqTaDD.js","assets/SportsConferenceList-B-_P3XXS.js","assets/SingleTeamEventRow-D_CJlC_Y.js","assets/TeamPicker-D2Y60SON.js","assets/BaseSportsBracket-BOc_SJr-.js","assets/SportsBracket-emH8u-CH.js","assets/SportsTeamStandings-DPewP51n.js","assets/stats-CKKNinx8.js","assets/events-sqDoawBr.js","assets/EventLiveOdds-Cal0zDFZ.js","assets/utils-D9sRnw5Z.js","assets/NBAGameLeadersStats-DERFWiYK.js","assets/SportsGameRelatedGames-8s9dHrRt.js","assets/SportsInjuryReport-DmSlJ44l.js","assets/player-C8EgX8V7.js","assets/SportsMultiTeamSeasonLeadersStats-DsPDG8WU.js","assets/NBASportsTeamSeasonComparison-C8IJrW1v.js","assets/SportsTeamSeasonComparison-JWGEuStd.js","assets/SportsDataTableComparison-B2_LelIR.js","assets/SportsTeamGameComparison-Bw_lXfPY.js","assets/teams-CdBujW6N.js","assets/SportsBlazeVideoHighlights-CkEml3uf.js","assets/players-DUGpuHqa.js","assets/RelatedPlayers-BMrZHBOV.js","assets/index-SDJSS5Eo.js","assets/events-vYWzj6Go.js","assets/teams-BP6Xbk5R.js","assets/players-DtzaPPSU.js","assets/index-B6Coe75L.js","assets/tournament-wJHx76f5.js","assets/events-Dj-zyFSi.js","assets/EventV2LiveOdds-CLCx1HnQ.js","assets/index-DI6n71oF.js","assets/MLBEventSchedule-DhxXuPbG.js","assets/scheduleUtils-BD4W-1Eg.js","assets/events-CfiFBEsE.js","assets/CricketMatchStats--pWe2l7o.js","assets/events-dapD1vw8.js","assets/useShowIccCricketVariation-qC7KZAh6.js","assets/index-DlzPM7oX.js","assets/index-pGVge10T.js","assets/index-CI7-Fkqe.js","assets/GolfHeader-88eWd39K.js","assets/TennisLeagueSchedule-Dx6ldgvz.js","assets/events-BHjAI97v.js","assets/index-CC4087ms.js","assets/events-CHds-O7h.js","assets/events-B47FQ1tL.js","assets/index-wb2KTbjd.js","assets/index-CdX6x_O9.js","assets/TennisHeader-BK2FJ8iH.js","assets/useTennis2025Variation-D40PCytF.js","assets/events-CyB00bX-.js","assets/TennisTournamentBracket-M9TNLmR3.js","assets/tournaments-yWAyKOPj.js","assets/sub-router-DJwXP3Tl.js","assets/WhatsHappeningHorizontal-sCWG1oC1.js","assets/index-CpGf05zN.js","assets/details-Cs8PnoiR.js","assets/group-CQSrvqjK.js","assets/settingsAccess-BpP8X9eK.js","assets/ProtectedSettingsPageGate-MfknLZsX.js","assets/useAPIAdmin-Csjj2DC9.js","assets/apiPortalQueries-rQOWy-Lq.js","assets/APIPortalBillingBanner-DQdbomDW.js","assets/constants-BHbsVMes.js","assets/CreateAPIGroupModal-CT025aQK.js","assets/members-BbaYJrXY.js","assets/MembersTablePagination-C0Yv_8Le.js","assets/billing-DVqsvIQV.js","assets/keys-CNXk06Tz.js","assets/limits-CssHM6Qp.js","assets/files-CHCy1A8g.js","assets/files-repo-Ca4HcOg8.js","assets/index-GBgvdJ8y.js","assets/pro-perks-CVzQ0SFe.js","assets/utils-C2I1YWmy.js","assets/pro-perks-detail-B9xdd7t_.js","assets/index-DeWJZdWQ.js","assets/access-B5BoFEw9.js","assets/index-CLzdOmCn.js","assets/useOrgMutations-6SyInHfb.js","assets/useEnterprisePremiumSecureEnabled-0pTEw32T.js","assets/useIsThreadRetentionEnabled-BC3bFwh4.js","assets/members-Cqr7wKx1.js","assets/insights-CtAOx0Qx.js","assets/user-access-MEy7W1Ck.js","assets/permissions-DY-VbuRF.js","assets/files-B2wiMC3Y.js","assets/FileData-B8vHimLk.js","assets/connectors-DHzo61gn.js","assets/purchases-YkY6Gy1k.js","assets/useMutationState-2dNaCtQj.js","assets/reservations-CaSjEHBu.js","assets/index-VG3BxYxN.js","assets/TaskListItem-BMZ5hU-V.js","assets/task-0iT-ri6r.js","assets/shortcuts-CI6O-Eb8.js","assets/site-instructions-C3Zy19fE.js","assets/preferences-Dix5Q8Zh.js","assets/personalize-Foe_vCUF.js","assets/assistant-DHtm5gVa.js","assets/memories-CvjJYj_R.js","assets/notifications-AnffnZaQ.js","assets/files-BkQcq_Hc.js","assets/connectors-UJDAld29.js","assets/index-CzMowGXG.js","assets/ask-input-DWAAb92R.js","assets/playground-DWEW0o3f.js"])))=>i.map(i=>d[i]);
import{g as jn,s as Zt,l as ne,S as Re,a as tie,r as Wt,u as Nt,b as jt,c as gt,L as Ge,P as cb,d as dRe,e as lm,f as ui,h as Uc,i as fRe,j as nie,k as jl,R as Dr,F as UI,m as rie,n as mRe,t as pRe,o as Zi,p as hRe,q as Bs,v as gRe,w as yRe,x as vRe,y as Ex,z as ia,A as Kh,B as BI,C as w7,D as sie,$ as Br,E as xRe,G as bRe,H as _Re,I as wRe,J as CRe,K as SRe,M as ERe,N as ye,O as PM,Q as MRe,T as kRe,U as TRe,V as NRe,W as jRe,X as ARe,Y as IRe,Z as RRe,_ as PRe,a0 as AH,a1 as IH,a2 as ORe,a3 as aie,a4 as OM,a5 as LRe,a6 as DRe,a7 as FRe,a8 as URe,a9 as qc,aa as LM,ab as C7,ac as S7,ad as BRe,ae as Bc,af as VRe,ag as QT,ah as pp}from"./platform-BkRpJmFP.js";import{r as f,e as Qg,k as $Re,l as as,R as I,j as o,f as B,i as Us,$ as E7,m as oie,n as kn,_ as vr,b as M7,c as Ze,a as k7,p as WRe,o as pi,q as HRe,t as iie,u as $s,v as lie,w as cie,x as zRe,y as RH,z as Xg,A as GRe,B as uie,C as ub,D as Rv,E as PH,F as Mo,G as f2,H as qRe}from"./vendors-DjjIY8ZQ.js";import{T as ce,I as Sr,a as Dn,b as VI,c as Rt,d as T7,e as DM,f as N7,g as KRe,h as Rs,i as Mx,j as eo,k as yu,l as db,m as YRe,n as Pv,o as QRe,p as die,q as XRe,r as ZRe,s as Kn,t as fb,u as fie,v as cm,w as FM,x as vd,y as j7,z as xd,A as ao,B as JRe,C as ePe,D as tPe,E as nPe,F as rPe,G as sPe,H as aPe,J as mie,K as pie,L as A7,M as oPe,N as iPe,O as lPe,P as UM,Q as cPe,R as uPe,S as hie,U as dPe,V as fPe,W as gie,X as mPe,Y as pPe,Z as hPe,_ as gPe,$ as OH,a0 as yPe,a1 as vPe,a2 as BM,a3 as I7,a4 as R7,a5 as xPe,a6 as yie,a7 as bPe,a8 as ar,a9 as Dd,aa as um,ab as _Pe,ac as wPe,ad as vu,ae as vie,af as Vm,ag as CPe,ah as SPe,ai as EPe,aj as P7,ak as MPe,al as O7,am as $I,an as m2,ao as mb,ap as $m,aq as dm,ar as VM,as as kPe,at as TPe,au as NPe,av as pb,aw as vo,ax as xie,ay as jPe,az as APe,aA as IPe,aB as RPe,aC as PPe,aD as OPe,aE as LPe,aF as DPe,aG as FPe,aH as UPe,aI as bie,aJ as BPe,aK as L7,aL as VPe,aM as $Pe,aN as WPe,aO as D7,aP as p2,aQ as _ie,aR as wie,aS as Cie,aT as Sie,aU as HPe,aV as Eie,aW as eu,aX as Mie,aY as zPe,aZ as Kc,a_ as Zg,a$ as kx,b0 as kie,b1 as Ov,b2 as Tie,b3 as F7,b4 as GPe,b5 as WI,b6 as qPe,b7 as U7,b8 as Nie,b9 as KPe,ba as pS,bb as YPe,bc as B7,bd as $M,be as QPe,bf as XPe,bg as jie,bh as Aie,bi as V7,bj as HI,bk as Jg,bl as ZPe,bm as Iie,bn as hb,bo as JPe,bp as gb,bq as e8e,br as Rie,bs as Io,bt as yb,bu as $7,bv as od,bw as t8e,bx as WM,by as n8e,bz as Pie,bA as Oie,bB as r8e,bC as W7,bD as s8e,bE as a8e,bF as o8e,bG as Lie,bH as i8e,bI as Die,bJ as LH,bK as DH,bL as l8e,bM as c8e,bN as XT,bO as u8e,bP as d8e,bQ as f8e,bR as Fie,bS as H7,bT as Uie,bU as Bie,bV as Vie,bW as h2,bX as FH,bY as $ie,bZ as m8e,b_ as p8e,b$ as UH,c0 as h8e,c1 as g8e,c2 as y8e,c3 as v8e,c4 as x8e,c5 as b8e,c6 as _8e,c7 as w8e,c8 as C8e,c9 as S8e,ca as E8e,cb as M8e,cc as k8e,cd as T8e,ce as N8e,cf as BH,cg as VH,ch as j8e,ci as vb,cj as A8e,ck as Wie,cl as Wm,cm as Hie,cn as I8e,co as R8e,cp as P8e,cq as O8e,cr as L8e,cs as D8e,ct as F8e,cu as U8e,cv as zI,cw as $H,cx as B8e,cy as V8e,cz as $8e,cA as W8e,cB as H8e,cC as zie,cD as z8e,cE as G8e,cF as GI,cG as Gie,cH as q8e,cI as K8e,cJ as qie,cK as Y8e,cL as Q8e,cM as X8e,cN as Z8e,cO as Kie,cP as J8e,cQ as e9e,cR as t9e,cS as n9e,cT as Tx,cU as r9e,cV as s9e,cW as a9e,cX as Yie,cY as o9e,cZ as qI,c_ as i9e,c$ as WH,d0 as ZT,d1 as l9e,d2 as HM,d3 as c9e,d4 as u9e,d5 as d9e,d6 as f9e,d7 as zM,d8 as GM,d9 as m9e,da as p9e,db as h9e,dc as ey,dd as g9e,de as Qie,df as ka,dg as y9e,dh as v9e,di as Xie,dj as Zie,dk as Jie,dl as ele,dm as z7,dn as tle,dp as nle,dq as x9e,dr as b9e,ds as HH,dt as KI,du as _9e,dv as G7,dw as Yh,dx as xb,dy as qM,dz as w9e,dA as C9e,dB as rle,dC as S9e,dD as zH,dE as E9e,dF as M9e,dG as k9e,dH as sle,dI as T9e,dJ as q7,dK as N9e,dL as j9e,dM as A9e,dN as I9e,dO as ale,dP as R9e,dQ as P9e,dR as O9e,dS as L9e,dT as D9e,dU as F9e,dV as GH,dW as K7,dX as U9e,dY as B9e,dZ as V9e,d_ as ole,d$ as $9e,e0 as W9e,e1 as H9e,e2 as z9e,e3 as ile,e4 as G9e,e5 as lle,e6 as cle,e7 as q9e,e8 as K9e,e9 as qH,ea as ule,eb as Y9e,ec as Q9e,ed as X9e,ee as Z9e,ef as KH,eg as YH,eh as QH,ei as JT,ej as YI,ek as QI,el as e4,em as t4,en as XH,eo as Rf,ep as J9e,eq as eOe,er as tOe,es as dle,et as nOe,eu as KM,ev as rOe,ew as sOe,ex as aOe,ey as oOe,ez as iOe,eA as lOe,eB as cOe,eC as uOe,eD as Y7,eE as fle,eF as dOe,eG as fOe,eH as mOe,eI as pOe,eJ as hOe,eK as gOe,eL as yOe,eM as mle,eN as vOe,eO as xOe,eP as bOe,eQ as _Oe,eR as ZH,eS as wOe,eT as JH,eU as ez,eV as COe,eW as SOe,eX as EOe,eY as ww,eZ as tz,e_ as MOe,e$ as kOe,f0 as TOe,f1 as NOe,f2 as jOe,f3 as AOe,f4 as IOe,f5 as ple,f6 as ROe,f7 as POe,f8 as hle,f9 as gle,fa as OOe,fb as LOe,fc as yle,fd as DOe,fe as FOe,ff as UOe}from"./icons-DO5PjO-d.js";import{u as Z,m as BOe,d as ot,M as pe,a as ee,c as VOe,F as XI,I as $Oe,b as WOe,e as ZI,f as vle,g as n4}from"./i18n-C055ss6D.js";import{_ as K,c as ko,a as Bo,g as ty}from"./vite-D9Bl2idj.js";function HOe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const zOe=["grey","teal","brown","maroon","red","orange","gold","yellow","green","blue","purple"],xle=e=>{if(!e)return null;try{const n=JSON.parse(e)?.name;if(n&&zOe.includes(n))return n}catch{}return null};function GOe(){const e=jn("colorSchemeTheme"),t=jn("colorScheme"),n=xle(e);n&&(document.documentElement.dataset.theme=n),t&&(document.documentElement.dataset.colorScheme=t)}GOe();var qOe={};const nz="/rest/event/analytics",g2="pplx.visitor-id",JI="pplx.session-id",Nx="pplx.trackingAllowed",KOe="http://default-analytics-service:8000",YOe=()=>qOe.ANALYTICS_SERVICE_URL||KOe,QOe=365;function XOe(){try{jn(g2)||Zt(g2,crypto.randomUUID(),{expires:QOe})}catch{}try{jn(JI)||Zt(JI,crypto.randomUUID())}catch{}}XOe();const ZOe=["Europe/Vienna","Europe/Brussels","Europe/Sofia","Europe/Zagreb","Asia/Famagusta","Asia/Nicosia","Europe/Prague","Europe/Copenhagen","Europe/Tallinn","Europe/Helsinki","Europe/Paris","Europe/Berlin","Europe/Busingen","Europe/Athens","Europe/Budapest","Europe/Dublin","Europe/Rome","Europe/Riga","Europe/Vilnius","Europe/Luxembourg","Europe/Malta","Europe/Amsterdam","Europe/Warsaw","Atlantic/Azores","Atlantic/Madeira","Europe/Lisbon","Europe/Bucharest","Europe/Bratislava","Europe/Ljubljana","Africa/Ceuta","Atlantic/Canary","Europe/Madrid","Europe/Stockholm"];function rz(){try{const e=Intl.DateTimeFormat().resolvedOptions().timeZone;return ZOe.includes(e)||e.includes("Europe")}catch(e){return ne.warn("Error detecting user timezone:",e),!0}}function ble(){const[e,t]=f.useState(!1),[n,r]=f.useState(!1),[s,a]=f.useState(!1);f.useEffect(()=>{const l=c=>{c?.detail?.consent==="ALLOW"?t(!0):t(!1)};return window.addEventListener("consentChange",l),()=>{window.removeEventListener("consentChange",l)}},[]),f.useEffect(()=>{if(!rz()){t(!0),r(!0);return}jn(Nx)==="true"&&t(!0),r(!0)},[]),f.useEffect(()=>{!jn(Nx)&&rz()&&a(!0)},[]);const i=()=>{a(!1)};return f.useMemo(()=>({hasConsent:e,checkedConsent:n,showCookieConsentPopup:s,closeCookieConsentPopup:i}),[n,e,s])}var r4={},s4={exports:{}},sz;function YM(){return sz||(sz=1,function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(s4)),s4.exports}var a4={exports:{}},az;function bb(){return az||(az=1,function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(a4)),a4.exports}var o4={exports:{}},oz;function JOe(){return oz||(oz=1,function(e){var t=bb().default;function n(){e.exports=n=function(){return s},e.exports.__esModule=!0,e.exports.default=e.exports;var r,s={},a=Object.prototype,i=a.hasOwnProperty,l=Object.defineProperty||function(U,V,$){U[V]=$.value},c=typeof Symbol=="function"?Symbol:{},u=c.iterator||"@@iterator",d=c.asyncIterator||"@@asyncIterator",m=c.toStringTag||"@@toStringTag";function p(U,V,$){return Object.defineProperty(U,V,{value:$,enumerable:!0,configurable:!0,writable:!0}),U[V]}try{p({},"")}catch{p=function($,z,Q){return $[z]=Q}}function h(U,V,$,z){var Q=V&&V.prototype instanceof w?V:w,Y=Object.create(Q.prototype),W=new j(z||[]);return l(Y,"_invoke",{value:L(U,$,W)}),Y}function g(U,V,$){try{return{type:"normal",arg:U.call(V,$)}}catch(z){return{type:"throw",arg:z}}}s.wrap=h;var y="suspendedStart",v="suspendedYield",x="executing",b="completed",_={};function w(){}function C(){}function S(){}var E={};p(E,u,function(){return this});var M=Object.getPrototypeOf,k=M&&M(M(F([])));k&&k!==a&&i.call(k,u)&&(E=k);var A=S.prototype=w.prototype=Object.create(E);function R(U){["next","throw","return"].forEach(function(V){p(U,V,function($){return this._invoke(V,$)})})}function O(U,V){function $(Q,Y,W,X){var G=g(U[Q],U,Y);if(G.type!=="throw"){var J=G.arg,q=J.value;return q&&t(q)=="object"&&i.call(q,"__await")?V.resolve(q.__await).then(function(te){$("next",te,W,X)},function(te){$("throw",te,W,X)}):V.resolve(q).then(function(te){J.value=te,W(J)},function(te){return $("throw",te,W,X)})}X(G.arg)}var z;l(this,"_invoke",{value:function(Y,W){function X(){return new V(function(G,J){$(Y,W,G,J)})}return z=z?z.then(X,X):X()}})}function L(U,V,$){var z=y;return function(Q,Y){if(z===x)throw Error("Generator is already running");if(z===b){if(Q==="throw")throw Y;return{value:r,done:!0}}for($.method=Q,$.arg=Y;;){var W=$.delegate;if(W){var X=P(W,$);if(X){if(X===_)continue;return X}}if($.method==="next")$.sent=$._sent=$.arg;else if($.method==="throw"){if(z===y)throw z=b,$.arg;$.dispatchException($.arg)}else $.method==="return"&&$.abrupt("return",$.arg);z=x;var G=g(U,V,$);if(G.type==="normal"){if(z=$.done?b:v,G.arg===_)continue;return{value:G.arg,done:$.done}}G.type==="throw"&&(z=b,$.method="throw",$.arg=G.arg)}}}function P(U,V){var $=V.method,z=U.iterator[$];if(z===r)return V.delegate=null,$==="throw"&&U.iterator.return&&(V.method="return",V.arg=r,P(U,V),V.method==="throw")||$!=="return"&&(V.method="throw",V.arg=new TypeError("The iterator does not provide a '"+$+"' method")),_;var Q=g(z,U.iterator,V.arg);if(Q.type==="throw")return V.method="throw",V.arg=Q.arg,V.delegate=null,_;var Y=Q.arg;return Y?Y.done?(V[U.resultName]=Y.value,V.next=U.nextLoc,V.method!=="return"&&(V.method="next",V.arg=r),V.delegate=null,_):Y:(V.method="throw",V.arg=new TypeError("iterator result is not an object"),V.delegate=null,_)}function N(U){var V={tryLoc:U[0]};1 in U&&(V.catchLoc=U[1]),2 in U&&(V.finallyLoc=U[2],V.afterLoc=U[3]),this.tryEntries.push(V)}function T(U){var V=U.completion||{};V.type="normal",delete V.arg,U.completion=V}function j(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(N,this),this.reset(!0)}function F(U){if(U||U===""){var V=U[u];if(V)return V.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var $=-1,z=function Q(){for(;++$<U.length;)if(i.call(U,$))return Q.value=U[$],Q.done=!1,Q;return Q.value=r,Q.done=!0,Q};return z.next=z}}throw new TypeError(t(U)+" is not iterable")}return C.prototype=S,l(A,"constructor",{value:S,configurable:!0}),l(S,"constructor",{value:C,configurable:!0}),C.displayName=p(S,m,"GeneratorFunction"),s.isGeneratorFunction=function(U){var V=typeof U=="function"&&U.constructor;return!!V&&(V===C||(V.displayName||V.name)==="GeneratorFunction")},s.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,S):(U.__proto__=S,p(U,m,"GeneratorFunction")),U.prototype=Object.create(A),U},s.awrap=function(U){return{__await:U}},R(O.prototype),p(O.prototype,d,function(){return this}),s.AsyncIterator=O,s.async=function(U,V,$,z,Q){Q===void 0&&(Q=Promise);var Y=new O(h(U,V,$,z),Q);return s.isGeneratorFunction(V)?Y:Y.next().then(function(W){return W.done?W.value:Y.next()})},R(A),p(A,m,"Generator"),p(A,u,function(){return this}),p(A,"toString",function(){return"[object Generator]"}),s.keys=function(U){var V=Object(U),$=[];for(var z in V)$.push(z);return $.reverse(),function Q(){for(;$.length;){var Y=$.pop();if(Y in V)return Q.value=Y,Q.done=!1,Q}return Q.done=!0,Q}},s.values=F,j.prototype={constructor:j,reset:function(V){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(T),!V)for(var $ in this)$.charAt(0)==="t"&&i.call(this,$)&&!isNaN(+$.slice(1))&&(this[$]=r)},stop:function(){this.done=!0;var V=this.tryEntries[0].completion;if(V.type==="throw")throw V.arg;return this.rval},dispatchException:function(V){if(this.done)throw V;var $=this;function z(J,q){return W.type="throw",W.arg=V,$.next=J,q&&($.method="next",$.arg=r),!!q}for(var Q=this.tryEntries.length-1;Q>=0;--Q){var Y=this.tryEntries[Q],W=Y.completion;if(Y.tryLoc==="root")return z("end");if(Y.tryLoc<=this.prev){var X=i.call(Y,"catchLoc"),G=i.call(Y,"finallyLoc");if(X&&G){if(this.prev<Y.catchLoc)return z(Y.catchLoc,!0);if(this.prev<Y.finallyLoc)return z(Y.finallyLoc)}else if(X){if(this.prev<Y.catchLoc)return z(Y.catchLoc,!0)}else{if(!G)throw Error("try statement without catch or finally");if(this.prev<Y.finallyLoc)return z(Y.finallyLoc)}}}},abrupt:function(V,$){for(var z=this.tryEntries.length-1;z>=0;--z){var Q=this.tryEntries[z];if(Q.tryLoc<=this.prev&&i.call(Q,"finallyLoc")&&this.prev<Q.finallyLoc){var Y=Q;break}}Y&&(V==="break"||V==="continue")&&Y.tryLoc<=$&&$<=Y.finallyLoc&&(Y=null);var W=Y?Y.completion:{};return W.type=V,W.arg=$,Y?(this.method="next",this.next=Y.finallyLoc,_):this.complete(W)},complete:function(V,$){if(V.type==="throw")throw V.arg;return V.type==="break"||V.type==="continue"?this.next=V.arg:V.type==="return"?(this.rval=this.arg=V.arg,this.method="return",this.next="end"):V.type==="normal"&&$&&(this.next=$),_},finish:function(V){for(var $=this.tryEntries.length-1;$>=0;--$){var z=this.tryEntries[$];if(z.finallyLoc===V)return this.complete(z.completion,z.afterLoc),T(z),_}},catch:function(V){for(var $=this.tryEntries.length-1;$>=0;--$){var z=this.tryEntries[$];if(z.tryLoc===V){var Q=z.completion;if(Q.type==="throw"){var Y=Q.arg;T(z)}return Y}}throw Error("illegal catch attempt")},delegateYield:function(V,$,z){return this.delegate={iterator:F(V),resultName:$,nextLoc:z},this.method==="next"&&(this.arg=r),_}},s}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(o4)),o4.exports}var i4,iz;function QM(){if(iz)return i4;iz=1;var e=JOe()();i4=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return i4}var l4={exports:{}},c4={exports:{}},u4={exports:{}},lz;function e7e(){return lz||(lz=1,function(e){var t=bb().default;function n(r,s){if(t(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var i=a.call(r,s||"default");if(t(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(u4)),u4.exports}var cz;function _le(){return cz||(cz=1,function(e){var t=bb().default,n=e7e();function r(s){var a=n(s,"string");return t(a)=="symbol"?a:a+""}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(c4)),c4.exports}var uz;function XM(){return uz||(uz=1,function(e){var t=_le();function n(r,s,a){return(s=t(s))in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(l4)),l4.exports}var d4={exports:{}},dz;function ZM(){return dz||(dz=1,function(e){function t(r,s,a,i,l,c,u){try{var d=r[c](u),m=d.value}catch(p){return void a(p)}d.done?s(m):Promise.resolve(m).then(i,l)}function n(r){return function(){var s=this,a=arguments;return new Promise(function(i,l){var c=r.apply(s,a);function u(m){t(c,i,l,u,d,"next",m)}function d(m){t(c,i,l,u,d,"throw",m)}u(void 0)})}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(d4)),d4.exports}var f4={exports:{}},m4={exports:{}},fz;function t7e(){return fz||(fz=1,function(e){function t(n){if(Array.isArray(n))return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(m4)),m4.exports}var p4={exports:{}},mz;function n7e(){return mz||(mz=1,function(e){function t(n,r){var s=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(s!=null){var a,i,l,c,u=[],d=!0,m=!1;try{if(l=(s=s.call(n)).next,r===0){if(Object(s)!==s)return;d=!1}else for(;!(d=(a=l.call(s)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(p){m=!0,i=p}finally{try{if(!d&&s.return!=null&&(c=s.return(),Object(c)!==c))return}finally{if(m)throw i}}return u}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(p4)),p4.exports}var h4={exports:{}},g4={exports:{}},pz;function r7e(){return pz||(pz=1,function(e){function t(n,r){(r==null||r>n.length)&&(r=n.length);for(var s=0,a=Array(r);s<r;s++)a[s]=n[s];return a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(g4)),g4.exports}var hz;function s7e(){return hz||(hz=1,function(e){var t=r7e();function n(r,s){if(r){if(typeof r=="string")return t(r,s);var a={}.toString.call(r).slice(8,-1);return a==="Object"&&r.constructor&&(a=r.constructor.name),a==="Map"||a==="Set"?Array.from(r):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(r,s):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(h4)),h4.exports}var y4={exports:{}},gz;function a7e(){return gz||(gz=1,function(e){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(y4)),y4.exports}var yz;function o7e(){return yz||(yz=1,function(e){var t=t7e(),n=n7e(),r=s7e(),s=a7e();function a(i,l){return t(i)||n(i,l)||r(i,l)||s()}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(f4)),f4.exports}var cf={},er={},v4={exports:{}},vz;function i7e(){return vz||(vz=1,function(e){function t(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(v4)),v4.exports}var x4={exports:{}},xz;function l7e(){return xz||(xz=1,function(e){var t=_le();function n(s,a){for(var i=0;i<a.length;i++){var l=a[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(s,t(l.key),l)}}function r(s,a,i){return a&&n(s.prototype,a),i&&n(s,i),Object.defineProperty(s,"prototype",{writable:!1}),s}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(x4)),x4.exports}var b4={exports:{}},_4={exports:{}},bz;function c7e(){return bz||(bz=1,function(e){function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(_4)),_4.exports}var _z;function u7e(){return _z||(_z=1,function(e){var t=bb().default,n=c7e();function r(s,a){if(a&&(t(a)=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(s)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(b4)),b4.exports}var w4={exports:{}},wz;function wle(){return wz||(wz=1,function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(w4)),w4.exports}var C4={exports:{}},S4={exports:{}},Cz;function Q7(){return Cz||(Cz=1,function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(S4)),S4.exports}var Sz;function d7e(){return Sz||(Sz=1,function(e){var t=Q7();function n(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&t(r,s)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(C4)),C4.exports}var E4={exports:{}},M4={exports:{}},Ez;function f7e(){return Ez||(Ez=1,function(e){function t(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(M4)),M4.exports}var k4={exports:{}},T4={exports:{}},Mz;function m7e(){return Mz||(Mz=1,function(e){function t(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e.exports=t=function(){return!!n},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(T4)),T4.exports}var kz;function p7e(){return kz||(kz=1,function(e){var t=m7e(),n=Q7();function r(s,a,i){if(t())return Reflect.construct.apply(null,arguments);var l=[null];l.push.apply(l,a);var c=new(s.bind.apply(s,l));return i&&n(c,i.prototype),c}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(k4)),k4.exports}var Tz;function h7e(){return Tz||(Tz=1,function(e){var t=wle(),n=Q7(),r=f7e(),s=p7e();function a(i){var l=typeof Map=="function"?new Map:void 0;return e.exports=a=function(u){if(u===null||!r(u))return u;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(l!==void 0){if(l.has(u))return l.get(u);l.set(u,d)}function d(){return s(u,arguments,t(this).constructor)}return d.prototype=Object.create(u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),n(d,u)},e.exports.__esModule=!0,e.exports.default=e.exports,a(i)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(E4)),E4.exports}var Nz;function g7e(){if(Nz)return er;Nz=1;var e=YM();Object.defineProperty(er,"__esModule",{value:!0}),er.UnsupportedStrategy=er.UnknownError=er.OAuthCallbackError=er.MissingSecret=er.MissingAuthorize=er.MissingAdapterMethods=er.MissingAdapter=er.MissingAPIRoute=er.InvalidCallbackUrl=er.AccountNotLinkedError=void 0,er.adapterErrorHandler=v,er.capitalize=g,er.eventsErrorHandler=y,er.upperSnake=h;var t=e(QM()),n=e(ZM()),r=e(XM()),s=e(i7e()),a=e(l7e()),i=e(u7e()),l=e(wle()),c=e(d7e()),u=e(h7e());function d(x,b,_){return b=(0,l.default)(b),(0,i.default)(x,m()?Reflect.construct(b,_||[],(0,l.default)(x).constructor):b.apply(x,_))}function m(){try{var x=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m=function(){return!!x})()}var p=er.UnknownError=function(x){function b(_){var w,C;return(0,s.default)(this,b),C=d(this,b,[(w=_?.message)!==null&&w!==void 0?w:_]),C.name="UnknownError",C.code=_.code,_ instanceof Error&&(C.stack=_.stack),C}return(0,c.default)(b,x),(0,a.default)(b,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}])}((0,u.default)(Error));er.OAuthCallbackError=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","OAuthCallbackError"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),er.AccountNotLinkedError=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","AccountNotLinkedError"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),er.MissingAPIRoute=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAPIRouteError"),(0,r.default)(_,"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),er.MissingSecret=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","MissingSecretError"),(0,r.default)(_,"code","NO_SECRET"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),er.MissingAuthorize=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAuthorizeError"),(0,r.default)(_,"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),er.MissingAdapter=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAdapterError"),(0,r.default)(_,"code","EMAIL_REQUIRES_ADAPTER_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),er.MissingAdapterMethods=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAdapterMethodsError"),(0,r.default)(_,"code","MISSING_ADAPTER_METHODS_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),er.UnsupportedStrategy=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","UnsupportedStrategyError"),(0,r.default)(_,"code","CALLBACK_CREDENTIALS_JWT_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),er.InvalidCallbackUrl=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","InvalidCallbackUrl"),(0,r.default)(_,"code","INVALID_CALLBACK_URL_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p);function h(x){return x.replace(/([A-Z])/g,"_$1").toUpperCase()}function g(x){return"".concat(x[0].toUpperCase()).concat(x.slice(1))}function y(x,b){return Object.keys(x).reduce(function(_,w){return _[w]=(0,n.default)(t.default.mark(function C(){var S,E=arguments;return t.default.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.prev=0,S=x[w],k.next=4,S.apply(void 0,E);case 4:return k.abrupt("return",k.sent);case 7:k.prev=7,k.t0=k.catch(0),b.error("".concat(h(w),"_EVENT_ERROR"),k.t0);case 10:case"end":return k.stop()}},C,null,[[0,7]])})),_},{})}function v(x,b){if(x)return Object.keys(x).reduce(function(_,w){return _[w]=(0,n.default)(t.default.mark(function C(){var S,E,M,k,A,R=arguments;return t.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:for(L.prev=0,S=R.length,E=new Array(S),M=0;M<S;M++)E[M]=R[M];return b.debug("adapter_".concat(w),{args:E}),k=x[w],L.next=6,k.apply(void 0,E);case 6:return L.abrupt("return",L.sent);case 9:throw L.prev=9,L.t0=L.catch(0),b.error("adapter_error_".concat(w),L.t0),A=new p(L.t0),A.name="".concat(g(w),"Error"),A;case 15:case"end":return L.stop()}},C,null,[[0,9]])})),_},{})}return er}var jz;function y7e(){if(jz)return cf;jz=1;var e=YM();Object.defineProperty(cf,"__esModule",{value:!0}),cf.default=void 0,cf.proxyLogger=m,cf.setLogger=d;var t=e(QM()),n=e(XM()),r=e(ZM()),s=g7e();function a(p,h){var g=Object.keys(p);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(p);h&&(y=y.filter(function(v){return Object.getOwnPropertyDescriptor(p,v).enumerable})),g.push.apply(g,y)}return g}function i(p){for(var h=1;h<arguments.length;h++){var g=arguments[h]!=null?arguments[h]:{};h%2?a(Object(g),!0).forEach(function(y){(0,n.default)(p,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):a(Object(g)).forEach(function(y){Object.defineProperty(p,y,Object.getOwnPropertyDescriptor(g,y))})}return p}function l(p){if(p instanceof Error&&!(p instanceof s.UnknownError))return{message:p.message,stack:p.stack,name:p.name};if(c(p)){var h;p.error=l(p.error),p.message=(h=p.message)!==null&&h!==void 0?h:p.error.message}return p}function c(p){return!!(p!=null&&p.error)}var u={error:function(h,g){g=l(g),console.error("[next-auth][error][".concat(h,"]"),`
https://next-auth.js.org/errors#`.concat(h.toLowerCase()),g.message,g)},warn:function(h){console.warn("[next-auth][warn][".concat(h,"]"),`
https://next-auth.js.org/warnings#`.concat(h.toLowerCase()))},debug:function(h,g){console.log("[next-auth][debug][".concat(h,"]"),g)}};function d(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments.length>1?arguments[1]:void 0;h||(u.debug=function(){}),p.error&&(u.error=p.error),p.warn&&(u.warn=p.warn),p.debug&&(u.debug=p.debug)}cf.default=u;function m(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u,h=arguments.length>1?arguments[1]:void 0;try{if(typeof window>"u")return p;var g={},y=function(b){g[b]=function(){var _=(0,r.default)(t.default.mark(function w(C,S){var E,M;return t.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(u[b](C,S),b==="error"&&(S=l(S)),S.client=!0,E="".concat(h,"/_log"),M=new URLSearchParams(i({level:b,code:C},S)),!navigator.sendBeacon){A.next=8;break}return A.abrupt("return",navigator.sendBeacon(E,M));case 8:return A.next=10,fetch(E,{method:"POST",body:M,keepalive:!0});case 10:return A.abrupt("return",A.sent);case 11:case"end":return A.stop()}},w)}));return function(w,C){return _.apply(this,arguments)}}()};for(var v in p)y(v);return g}catch{return u}}return cf}var Cw={},Az;function v7e(){if(Az)return Cw;Az=1,Object.defineProperty(Cw,"__esModule",{value:!0}),Cw.default=e;function e(t){var n;const r=new URL("http://localhost:3000/api/auth");t&&!t.startsWith("http")&&(t=`https://${t}`);const s=new URL((n=t)!==null&&n!==void 0?n:r),a=(s.pathname==="/"?r.pathname:s.pathname).replace(/\/$/,""),i=`${s.origin}${a}`;return{origin:s.origin,host:s.host,path:a,base:i,toString:()=>i}}return Cw}var uf={},Iz;function x7e(){if(Iz)return uf;Iz=1;var e=YM();Object.defineProperty(uf,"__esModule",{value:!0}),uf.BroadcastChannel=m,uf.apiBaseUrl=u,uf.fetchData=l,uf.now=d;var t=e(QM()),n=e(XM()),r=e(ZM());function s(p,h){var g=Object.keys(p);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(p);h&&(y=y.filter(function(v){return Object.getOwnPropertyDescriptor(p,v).enumerable})),g.push.apply(g,y)}return g}function a(p){for(var h=1;h<arguments.length;h++){var g=arguments[h]!=null?arguments[h]:{};h%2?s(Object(g),!0).forEach(function(y){(0,n.default)(p,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):s(Object(g)).forEach(function(y){Object.defineProperty(p,y,Object.getOwnPropertyDescriptor(g,y))})}return p}var i=3;function l(p,h,g){return c.apply(this,arguments)}function c(){return c=(0,r.default)(t.default.mark(function p(h,g,y){var v,x,b,_,w,C,S,E,M,k,A=arguments;return t.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:v=A.length>3&&A[3]!==void 0?A[3]:{},x=v.ctx,b=v.req,_=b===void 0?x?.req:b,w="".concat(u(g),"/").concat(h),C=0;case 3:if(!(C<i)){O.next=28;break}return O.prev=4,E={headers:a({"Content-Type":"application/json"},_!=null&&(S=_.headers)!==null&&S!==void 0&&S.cookie?{cookie:_.headers.cookie}:{})},_!=null&&_.body&&(E.body=JSON.stringify(_.body),E.method="POST"),O.next=9,fetch(w,E);case 9:return M=O.sent,O.next=12,M.json();case 12:if(k=O.sent,M.ok){O.next=15;break}throw k;case 15:return O.abrupt("return",Object.keys(k).length>0?k:null);case 18:if(O.prev=18,O.t0=O.catch(4),C++,C!==i){O.next=24;break}throw y.error("CLIENT_FETCH_ERROR",{error:O.t0,url:w}),O.t0;case 24:return O.next=26,new Promise(function(L){return setTimeout(L,Math.pow(2,C)*100)});case 26:O.next=3;break;case 28:return O.abrupt("return",null);case 29:case"end":return O.stop()}},p,null,[[4,18]])})),c.apply(this,arguments)}function u(p){return typeof window>"u"?"".concat(p.baseUrlServer).concat(p.basePathServer):p.basePath}function d(){return Math.floor(Date.now()/1e3)}function m(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"nextauth.message";return{receive:function(g){var y=function(x){var b;if(x.key===p){var _=JSON.parse((b=x.newValue)!==null&&b!==void 0?b:"{}");_?.event!=="session"||!(_!=null&&_.data)||g(_)}};return window.addEventListener("storage",y),function(){return window.removeEventListener("storage",y)}},post:function(g){if(!(typeof window>"u"))try{localStorage.setItem(p,JSON.stringify(a(a({},g),{},{timestamp:d()})))}catch{}}}}return uf}var N4={},Rz;function b7e(){return Rz||(Rz=1,Object.defineProperty(N4,"__esModule",{value:!0})),N4}var Pz;function _7e(){return Pz||(Pz=1,function(e){var t={},n=YM(),r=bb();Object.defineProperty(e,"__esModule",{value:!0});var s={SessionContext:!0,useSession:!0,getSession:!0,getCsrfToken:!0,getProviders:!0,signIn:!0,signOut:!0,SessionProvider:!0};e.SessionContext=void 0,e.SessionProvider=Y,e.getCsrfToken=T,e.getProviders=F,e.getSession=P,e.signIn=V,e.signOut=z,e.useSession=L;var a=n(QM()),i=n(XM()),l=n(ZM()),c=n(o7e()),u=C(Qg()),d=C(y7e()),m=n(v7e()),p=x7e(),h=$Re(),g=b7e();Object.keys(g).forEach(function(W){W==="default"||W==="__esModule"||Object.prototype.hasOwnProperty.call(s,W)||W in e&&e[W]===g[W]||Object.defineProperty(e,W,{enumerable:!0,get:function(){return g[W]}})});var y,v,x,b,_;function w(W){if(typeof WeakMap!="function")return null;var X=new WeakMap,G=new WeakMap;return(w=function(q){return q?G:X})(W)}function C(W,X){if(W&&W.__esModule)return W;if(W===null||r(W)!="object"&&typeof W!="function")return{default:W};var G=w(X);if(G&&G.has(W))return G.get(W);var J={__proto__:null},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in W)if(te!=="default"&&{}.hasOwnProperty.call(W,te)){var re=q?Object.getOwnPropertyDescriptor(W,te):null;re&&(re.get||re.set)?Object.defineProperty(J,te,re):J[te]=W[te]}return J.default=W,G&&G.set(W,J),J}function S(W,X){var G=Object.keys(W);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(W);X&&(J=J.filter(function(q){return Object.getOwnPropertyDescriptor(W,q).enumerable})),G.push.apply(G,J)}return G}function E(W){for(var X=1;X<arguments.length;X++){var G=arguments[X]!=null?arguments[X]:{};X%2?S(Object(G),!0).forEach(function(J){(0,i.default)(W,J,G[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(G)):S(Object(G)).forEach(function(J){Object.defineProperty(W,J,Object.getOwnPropertyDescriptor(G,J))})}return W}var M={baseUrl:(0,m.default)((y=t.NEXTAUTH_URL)!==null&&y!==void 0?y:t.VERCEL_URL).origin,basePath:(0,m.default)(t.NEXTAUTH_URL).path,baseUrlServer:(0,m.default)((v=(x=t.NEXTAUTH_URL_INTERNAL)!==null&&x!==void 0?x:t.NEXTAUTH_URL)!==null&&v!==void 0?v:t.VERCEL_URL).origin,basePathServer:(0,m.default)((b=t.NEXTAUTH_URL_INTERNAL)!==null&&b!==void 0?b:t.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:function(){}},k=(0,p.BroadcastChannel)(),A=(0,d.proxyLogger)(d.default,M.basePath);function R(){var W=u.useState(typeof navigator<"u"?navigator.onLine:!1),X=(0,c.default)(W,2),G=X[0],J=X[1],q=function(){return J(!0)},te=function(){return J(!1)};return u.useEffect(function(){return window.addEventListener("online",q),window.addEventListener("offline",te),function(){window.removeEventListener("online",q),window.removeEventListener("offline",te)}},[]),G}var O=e.SessionContext=(_=u.createContext)===null||_===void 0?void 0:_.call(u,void 0);function L(W){if(!O)throw new Error("React Context is unavailable in Server Components");var X=u.useContext(O),G=W??{},J=G.required,q=G.onUnauthenticated,te=J&&X.status==="unauthenticated";return u.useEffect(function(){if(te){var re="/api/auth/signin?".concat(new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href}));q?q():window.location.href=re}},[te,q]),te?{data:X.data,update:X.update,status:"loading"}:X}function P(W){return N.apply(this,arguments)}function N(){return N=(0,l.default)(a.default.mark(function W(X){var G,J;return a.default.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,(0,p.fetchData)("session",M,A,X);case 2:return J=te.sent,(!((G=X?.broadcast)!==null&&G!==void 0)||G)&&k.post({event:"session",data:{trigger:"getSession"}}),te.abrupt("return",J);case 5:case"end":return te.stop()}},W)})),N.apply(this,arguments)}function T(W){return j.apply(this,arguments)}function j(){return j=(0,l.default)(a.default.mark(function W(X){var G;return a.default.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,p.fetchData)("csrf",M,A,X);case 2:return G=q.sent,q.abrupt("return",G?.csrfToken);case 4:case"end":return q.stop()}},W)})),j.apply(this,arguments)}function F(){return U.apply(this,arguments)}function U(){return U=(0,l.default)(a.default.mark(function W(){return a.default.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,p.fetchData)("providers",M,A);case 2:return G.abrupt("return",G.sent);case 3:case"end":return G.stop()}},W)})),U.apply(this,arguments)}function V(W,X,G){return $.apply(this,arguments)}function $(){return $=(0,l.default)(a.default.mark(function W(X,G,J){var q,te,re,ae,fe,de,ve,_e,Se,be,me,Ae,Ee,je,Me,Ye,at;return a.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return q=G??{},te=q.callbackUrl,re=te===void 0?window.location.href:te,ae=q.redirect,fe=ae===void 0?!0:ae,de=(0,p.apiBaseUrl)(M),ke.next=4,F();case 4:if(ve=ke.sent,ve){ke.next=8;break}return window.location.href="".concat(de,"/error"),ke.abrupt("return");case 8:if(!(!X||!(X in ve))){ke.next=11;break}return window.location.href="".concat(de,"/signin?").concat(new URLSearchParams({callbackUrl:re})),ke.abrupt("return");case 11:return _e=ve[X].type==="credentials",Se=ve[X].type==="email",be=_e||Se,me="".concat(de,"/").concat(_e?"callback":"signin","/").concat(X),Ae="".concat(me).concat(J?"?".concat(new URLSearchParams(J)):""),ke.t0=fetch,ke.t1=Ae,ke.t2={"Content-Type":"application/x-www-form-urlencoded"},ke.t3=URLSearchParams,ke.t4=E,ke.t5=E({},G),ke.t6={},ke.next=25,T();case 25:return ke.t7=ke.sent,ke.t8=re,ke.t9={csrfToken:ke.t7,callbackUrl:ke.t8,json:!0},ke.t10=(0,ke.t4)(ke.t5,ke.t6,ke.t9),ke.t11=new ke.t3(ke.t10),ke.t12={method:"post",headers:ke.t2,body:ke.t11},ke.next=33,(0,ke.t0)(ke.t1,ke.t12);case 33:return Ee=ke.sent,ke.next=36,Ee.json();case 36:if(je=ke.sent,!(fe||!be)){ke.next=42;break}return Ye=(Me=je.url)!==null&&Me!==void 0?Me:re,window.location.href=Ye,Ye.includes("#")&&window.location.reload(),ke.abrupt("return");case 42:if(at=new URL(je.url).searchParams.get("error"),!Ee.ok){ke.next=46;break}return ke.next=46,k.post({event:"session",data:{trigger:"signin"}}),M._getSession({event:"storage"});case 46:return ke.abrupt("return",{error:at,status:Ee.status,ok:Ee.ok,url:at?null:je.url});case 47:case"end":return ke.stop()}},W)})),$.apply(this,arguments)}function z(W){return Q.apply(this,arguments)}function Q(){return Q=(0,l.default)(a.default.mark(function W(X){var G,J,q,te,re,ae,fe,de,ve,_e;return a.default.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return J=X??{},q=J.callbackUrl,te=q===void 0?window.location.href:q,re=(0,p.apiBaseUrl)(M),be.t0={"Content-Type":"application/x-www-form-urlencoded"},be.t1=URLSearchParams,be.next=6,T();case 6:return be.t2=be.sent,be.t3=te,be.t4={csrfToken:be.t2,callbackUrl:be.t3,json:!0},be.t5=new be.t1(be.t4),ae={method:"post",headers:be.t0,body:be.t5},be.next=13,fetch("".concat(re,"/signout"),ae);case 13:return fe=be.sent,be.next=16,fe.json();case 16:if(de=be.sent,k.post({event:"session",data:{trigger:"signout"}}),!(!((G=X?.redirect)!==null&&G!==void 0)||G)){be.next=23;break}return _e=(ve=de.url)!==null&&ve!==void 0?ve:te,window.location.href=_e,_e.includes("#")&&window.location.reload(),be.abrupt("return");case 23:return be.next=25,M._getSession({event:"storage"});case 25:return be.abrupt("return",de);case 26:case"end":return be.stop()}},W)})),Q.apply(this,arguments)}function Y(W){if(!O)throw new Error("React Context is unavailable in Server Components");var X=W.children,G=W.basePath,J=W.refetchInterval,q=W.refetchWhenOffline;G&&(M.basePath=G);var te=W.session!==void 0;M._lastSync=te?(0,p.now)():0;var re=u.useState(function(){return te&&(M._session=W.session),W.session}),ae=(0,c.default)(re,2),fe=ae[0],de=ae[1],ve=u.useState(!te),_e=(0,c.default)(ve,2),Se=_e[0],be=_e[1];u.useEffect(function(){return M._getSession=(0,l.default)(a.default.mark(function je(){var Me,Ye,at,it=arguments;return a.default.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:if(Me=it.length>0&&it[0]!==void 0?it[0]:{},Ye=Me.event,Ue.prev=1,at=Ye==="storage",!(at||M._session===void 0)){Ue.next=10;break}return M._lastSync=(0,p.now)(),Ue.next=7,P({broadcast:!at});case 7:return M._session=Ue.sent,de(M._session),Ue.abrupt("return");case 10:if(!(!Ye||M._session===null||(0,p.now)()<M._lastSync)){Ue.next=12;break}return Ue.abrupt("return");case 12:return M._lastSync=(0,p.now)(),Ue.next=15,P();case 15:M._session=Ue.sent,de(M._session),Ue.next=22;break;case 19:Ue.prev=19,Ue.t0=Ue.catch(1),A.error("CLIENT_SESSION_ERROR",Ue.t0);case 22:return Ue.prev=22,be(!1),Ue.finish(22);case 25:case"end":return Ue.stop()}},je,null,[[1,19,22,25]])})),M._getSession(),function(){M._lastSync=0,M._session=void 0,M._getSession=function(){}}},[]),u.useEffect(function(){var je=k.receive(function(){return M._getSession({event:"storage"})});return function(){return je()}},[]),u.useEffect(function(){var je=W.refetchOnWindowFocus,Me=je===void 0?!0:je,Ye=function(){Me&&document.visibilityState==="visible"&&M._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",Ye,!1),function(){return document.removeEventListener("visibilitychange",Ye,!1)}},[W.refetchOnWindowFocus]);var me=R(),Ae=q!==!1||me;u.useEffect(function(){if(J&&Ae){var je=setInterval(function(){M._session&&M._getSession({event:"poll"})},J*1e3);return function(){return clearInterval(je)}}},[J,Ae]);var Ee=u.useMemo(function(){return{data:fe,status:Se?"loading":fe?"authenticated":"unauthenticated",update:function(Me){return(0,l.default)(a.default.mark(function Ye(){var at;return a.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(!(Se||!fe)){ke.next=2;break}return ke.abrupt("return");case 2:return be(!0),ke.t0=p.fetchData,ke.t1=M,ke.t2=A,ke.next=8,T();case 8:return ke.t3=ke.sent,ke.t4=Me,ke.t5={csrfToken:ke.t3,data:ke.t4},ke.t6={body:ke.t5},ke.t7={req:ke.t6},ke.next=15,(0,ke.t0)("session",ke.t1,ke.t2,ke.t7);case 15:return at=ke.sent,be(!1),at&&(de(at),k.post({event:"session",data:{trigger:"getSession"}})),ke.abrupt("return",at);case 19:case"end":return ke.stop()}},Ye)}))()}}},[fe,Se]);return(0,h.jsx)(O.Provider,{value:Ee,children:X})}}(r4)),r4}var _b=_7e();const X7="pplx-next-auth-session";let Sw=null;const w7e=()=>{try{const e=Re.getItem(X7);return e?JSON.parse(e):null}catch{return null}},eR=e=>{e&&Re.setItem(X7,JSON.stringify(e))},C7e=()=>{Re.removeItem(X7)},S7e=(e=!1)=>{Sw??=_b.getSession().then(n=>(eR(n),n)).catch(n=>{throw eR(null),n}).finally(()=>{Sw=null});const t=w7e();return t&&(e||new Date(t.expires)>new Date)?{cachedSession:t,sessionFetchPromise:Sw}:{cachedSession:null,sessionFetchPromise:Sw}},Et=()=>{const{data:e,status:t,update:n}=_b.useSession(),[r,s]=f.useState(e),a=f.useCallback(async()=>{const i=await n();return s(l=>as(i?.user,l?.user)?l:i),i},[n]);return f.useEffect(()=>{t!=="loading"&&(s(i=>as(e?.user,i?.user)?i:e),e?eR(e):C7e())},[e,t]),f.useMemo(()=>({session:r,update:a,status:t}),[r,a,t])};function Cle(){const{session:e}=Et(),t=["pplx-dev@example.com","pplx-dev-pro@example.com","pplx-dev-enterprise@example.com","fe-test-user@example.com"],n=e?.user?.email??"none";return n.endsWith("@perplexity.ai")||t.includes(n)}function rt(){const{session:e}=Et(),t=e!==null&&typeof e<"u";return f.useEffect(()=>{t&&tie()},[t]),t}function E7e(){if(typeof window>"u")return!1;const e=window;return!!(e?.webkit?.messageHandlers?.pplx?.postMessage||e?.Android?.pplx?.postMessage)}function JM({type:e,data:t}){if(typeof window>"u")return!1;const n=window,r={type:e,data:t};return n?.webkit?.messageHandlers?.pplx?.postMessage?(n.webkit.messageHandlers.pplx.postMessage(r),!0):n?.Android?.pplx?.postMessage?(n.Android.pplx.postMessage(r),!0):!1}function M7e({query:e}){return JM({type:"pplx.ask",data:{query:e}})}function Sle(e,t){const n=e.split(".").map(Number),r=t.split(".").map(Number);for(let s=0;s<3;s++){const a=n[s],i=r[s];if(a===void 0||i===void 0)return 0;if(a>i)return 1;if(a<i)return-1}return 0}function k7e(e,t){try{return!e||!t?!0:Sle(e,t)===-1}catch(n){return ne.error("Error comparing canonical page semver",{e:n}),!0}}function TXt(e,t,n){try{if(!e||!t)return!1;const r=n[t];return r?Sle(e,r)>=0:!0}catch(r){return ne.error("Error comparing canonical page semver",{e:r}),!1}}const Ele=Wt("CanonicalPageContext",{inApp:!1,preferredColorScheme:null,deviceId:null,appVersion:null,isIOS:!1,isAndroid:!1,client:null}),T7e=I.memo(({children:e,inApp:t})=>{const n=Nt(),r=jt(),s=n?.get("mobile.deviceId")||null,a=n?.get("mobile.appVersion")||null,i=n?.get("mobile.preferredColorScheme")||null,l=n?.get("mobile.client")||null,c=l==="ios",u=l==="android";return f.useEffect(()=>{if(!r?.startsWith("/app")||!n)return;const d=["mobile.","version"],m=new URL(window.location.href.replace("/app",""));m.searchParams.forEach((p,h)=>{d.includes(h)&&m.searchParams.delete(h)}),m.searchParams.set("referrer","canonical"),JM({type:"pplx.url.share",data:{url:m.href}})},[r,n]),o.jsx(Ele.Provider,{value:{inApp:t,preferredColorScheme:i,deviceId:s,appVersion:a,isIOS:c,isAndroid:u,client:l},children:e})});T7e.displayName="CanonicalPageProvider";function Vo(){return f.useContext(Ele)}const jx=f.createContext({});function wb(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}const Z7=typeof window<"u",e5=Z7?f.useLayoutEffect:f.useEffect,t5=f.createContext(null);function J7(e,t){e.indexOf(t)===-1&&e.push(t)}function Cb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const tu=(e,t,n)=>n>t?t:n<e?e:n;let eL=()=>{};const nu={},Mle=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function kle(e){return typeof e=="object"&&e!==null}const Tle=e=>/^0[^.\s]+$/u.test(e);function tL(e){let t;return()=>(t===void 0&&(t=e()),t)}const ii=e=>e,N7e=(e,t)=>n=>t(e(n)),Sb=(...e)=>e.reduce(N7e),Qh=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class nL{constructor(){this.subscriptions=[]}add(t){return J7(this.subscriptions,t),()=>Cb(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Oi=e=>e*1e3,Al=e=>e/1e3;function Nle(e,t){return t?e*(1e3/t):0}const j7e=(e,t,n)=>{const r=t-e;return((n-e)%r+r)%r+e},jle=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,A7e=1e-7,I7e=12;function R7e(e,t,n,r,s){let a,i,l=0;do i=t+(n-t)/2,a=jle(i,r,s)-e,a>0?n=i:t=i;while(Math.abs(a)>A7e&&++l<I7e);return i}function oo(e,t,n,r){if(e===t&&n===r)return ii;const s=a=>R7e(a,0,1,e,n);return a=>a===0||a===1?a:jle(s(a),t,r)}const Ale=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ile=e=>t=>1-e(1-t),Rle=oo(.33,1.53,.69,.99),rL=Ile(Rle),Ple=Ale(rL),sL=e=>(e*=2)<1?.5*rL(e):.5*(2-Math.pow(2,-10*(e-1))),aL=e=>1-Math.sin(Math.acos(e)),Ole=Ile(aL),Lle=Ale(aL),Dle=oo(.42,0,1,1),la=oo(0,0,.58,1),Ya=oo(.42,0,.58,1),Fle=e=>Array.isArray(e)&&typeof e[0]!="number";function Ule(e,t){return Fle(e)?e[j7e(0,e.length,t)]:e}const Ble=e=>Array.isArray(e)&&typeof e[0]=="number",P7e={linear:ii,easeIn:Dle,easeInOut:Ya,easeOut:la,circIn:aL,circInOut:Lle,circOut:Ole,backIn:rL,backInOut:Ple,backOut:Rle,anticipate:sL},O7e=e=>typeof e=="string",Oz=e=>{if(Ble(e)){eL(e.length===4);const[t,n,r,s]=e;return oo(t,n,r,s)}else if(O7e(e))return P7e[e];return e},Ew=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function L7e(e,t){let n=new Set,r=new Set,s=!1,a=!1;const i=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){i.has(d)&&(u.schedule(d),e()),d(l)}const u={schedule:(d,m=!1,p=!1)=>{const g=p&&s?n:r;return m&&i.add(d),g.has(d)||g.add(d),d},cancel:d=>{r.delete(d),i.delete(d)},process:d=>{if(l=d,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,a&&(a=!1,u.process(d))}};return u}const D7e=40;function Vle(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,i=Ew.reduce((_,w)=>(_[w]=L7e(a),_),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:m,preRender:p,render:h,postRender:g}=i,y=()=>{const _=nu.useManualTiming?s.timestamp:performance.now();n=!1,nu.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(_-s.timestamp,D7e),1)),s.timestamp=_,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),m.process(s),p.process(s),h.process(s),g.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(y))},v=()=>{n=!0,r=!0,s.isProcessing||e(y)};return{schedule:Ew.reduce((_,w)=>{const C=i[w];return _[w]=(S,E=!1,M=!1)=>(n||v(),C.schedule(S,E,M)),_},{}),cancel:_=>{for(let w=0;w<Ew.length;w++)i[Ew[w]].cancel(_)},state:s,steps:i}}const{schedule:sr,cancel:ru,state:As,steps:j4}=Vle(typeof requestAnimationFrame<"u"?requestAnimationFrame:ii,!0);let hS;function F7e(){hS=void 0}const Qa={now:()=>(hS===void 0&&Qa.set(As.isProcessing||nu.useManualTiming?As.timestamp:performance.now()),hS),set:e=>{hS=e,queueMicrotask(F7e)}},$le=e=>t=>typeof t=="string"&&t.startsWith(e),oL=$le("--"),U7e=$le("var(--"),iL=e=>U7e(e)?B7e.test(e.split("/*")[0].trim()):!1,B7e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ny={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ax={...ny,transform:e=>tu(0,1,e)},Mw={...ny,default:1},Lv=e=>Math.round(e*1e5)/1e5,lL=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function V7e(e){return e==null}const $7e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,cL=(e,t)=>n=>!!(typeof n=="string"&&$7e.test(n)&&n.startsWith(e)||t&&!V7e(n)&&Object.prototype.hasOwnProperty.call(n,t)),Wle=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,a,i,l]=r.match(lL);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(i),alpha:l!==void 0?parseFloat(l):1}},W7e=e=>tu(0,255,e),A4={...ny,transform:e=>Math.round(W7e(e))},Ff={test:cL("rgb","red"),parse:Wle("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+A4.transform(e)+", "+A4.transform(t)+", "+A4.transform(n)+", "+Lv(Ax.transform(r))+")"};function H7e(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const tR={test:cL("#"),parse:H7e,transform:Ff.transform},Eb=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Bu=Eb("deg"),Il=Eb("%"),Lt=Eb("px"),z7e=Eb("vh"),G7e=Eb("vw"),Lz={...Il,parse:e=>Il.parse(e)/100,transform:e=>Il.transform(e*100)},Jp={test:cL("hsl","hue"),parse:Wle("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Il.transform(Lv(t))+", "+Il.transform(Lv(n))+", "+Lv(Ax.transform(r))+")"},Gr={test:e=>Ff.test(e)||tR.test(e)||Jp.test(e),parse:e=>Ff.test(e)?Ff.parse(e):Jp.test(e)?Jp.parse(e):tR.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ff.transform(e):Jp.transform(e),getAnimatableNone:e=>{const t=Gr.parse(e);return t.alpha=0,Gr.transform(t)}},q7e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function K7e(e){return isNaN(e)&&typeof e=="string"&&(e.match(lL)?.length||0)+(e.match(q7e)?.length||0)>0}const Hle="number",zle="color",Y7e="var",Q7e="var(",Dz="${}",X7e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ix(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const l=t.replace(X7e,c=>(Gr.test(c)?(r.color.push(a),s.push(zle),n.push(Gr.parse(c))):c.startsWith(Q7e)?(r.var.push(a),s.push(Y7e),n.push(c)):(r.number.push(a),s.push(Hle),n.push(parseFloat(c))),++a,Dz)).split(Dz);return{values:n,split:l,indexes:r,types:s}}function Gle(e){return Ix(e).values}function qle(e){const{split:t,types:n}=Ix(e),r=t.length;return s=>{let a="";for(let i=0;i<r;i++)if(a+=t[i],s[i]!==void 0){const l=n[i];l===Hle?a+=Lv(s[i]):l===zle?a+=Gr.transform(s[i]):a+=s[i]}return a}}const Z7e=e=>typeof e=="number"?0:Gr.test(e)?Gr.getAnimatableNone(e):e;function J7e(e){const t=Gle(e);return qle(e)(t.map(Z7e))}const bd={test:K7e,parse:Gle,createTransformer:qle,getAnimatableNone:J7e};function I4(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function eLe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,a=0,i=0;if(!t)s=a=i=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;s=I4(c,l,e+1/3),a=I4(c,l,e),i=I4(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:r}}function y2(e,t){return n=>n>0?t:e}const wr=(e,t,n)=>e+(t-e)*n,R4=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},tLe=[tR,Ff,Jp],nLe=e=>tLe.find(t=>t.test(e));function Fz(e){const t=nLe(e);if(!t)return!1;let n=t.parse(e);return t===Jp&&(n=eLe(n)),n}const Uz=(e,t)=>{const n=Fz(e),r=Fz(t);if(!n||!r)return y2(e,t);const s={...n};return a=>(s.red=R4(n.red,r.red,a),s.green=R4(n.green,r.green,a),s.blue=R4(n.blue,r.blue,a),s.alpha=wr(n.alpha,r.alpha,a),Ff.transform(s))},nR=new Set(["none","hidden"]);function rLe(e,t){return nR.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function sLe(e,t){return n=>wr(e,t,n)}function uL(e){return typeof e=="number"?sLe:typeof e=="string"?iL(e)?y2:Gr.test(e)?Uz:iLe:Array.isArray(e)?Kle:typeof e=="object"?Gr.test(e)?Uz:aLe:y2}function Kle(e,t){const n=[...e],r=n.length,s=e.map((a,i)=>uL(a)(a,t[i]));return a=>{for(let i=0;i<r;i++)n[i]=s[i](a);return n}}function aLe(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=uL(e[s])(e[s],t[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function oLe(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][r[a]],l=e.values[i]??0;n[s]=l,r[a]++}return n}const iLe=(e,t)=>{const n=bd.createTransformer(t),r=Ix(e),s=Ix(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?nR.has(e)&&!s.values.length||nR.has(t)&&!r.values.length?rLe(e,t):Sb(Kle(oLe(r,s),s.values),n):y2(e,t)};function Yle(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?wr(e,t,n):uL(e)(e,t)}const lLe=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>sr.update(t,n),stop:()=>ru(t),now:()=>As.isProcessing?As.timestamp:Qa.now()}},Qle=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let a=0;a<s;a++)r+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},v2=2e4;function dL(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<v2;)t+=n,r=e.next(t);return t>=v2?1/0:t}function Xle(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(dL(r),v2);return{type:"keyframes",ease:a=>r.next(s*a).value/t,duration:Al(s)}}const cLe=5;function Zle(e,t,n){const r=Math.max(t-cLe,0);return Nle(n-e(r),t-r)}const jr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Bz=.001;function uLe({duration:e=jr.duration,bounce:t=jr.bounce,velocity:n=jr.velocity,mass:r=jr.mass}){let s,a,i=1-t;i=tu(jr.minDamping,jr.maxDamping,i),e=tu(jr.minDuration,jr.maxDuration,Al(e)),i<1?(s=u=>{const d=u*i,m=d*e,p=d-n,h=rR(u,i),g=Math.exp(-m);return Bz-p/h*g},a=u=>{const m=u*i*e,p=m*n+n,h=Math.pow(i,2)*Math.pow(u,2)*e,g=Math.exp(-m),y=rR(Math.pow(u,2),i);return(-s(u)+Bz>0?-1:1)*((p-h)*g)/y}):(s=u=>{const d=Math.exp(-u*e),m=(u-n)*e+1;return-.001+d*m},a=u=>{const d=Math.exp(-u*e),m=(n-u)*(e*e);return d*m});const l=5/e,c=fLe(s,a,l);if(e=Oi(e),isNaN(c))return{stiffness:jr.stiffness,damping:jr.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:i*2*Math.sqrt(r*u),duration:e}}}const dLe=12;function fLe(e,t,n){let r=n;for(let s=1;s<dLe;s++)r=r-e(r)/t(r);return r}function rR(e,t){return e*Math.sqrt(1-t*t)}const mLe=["duration","bounce"],pLe=["stiffness","damping","mass"];function Vz(e,t){return t.some(n=>e[n]!==void 0)}function hLe(e){let t={velocity:jr.velocity,stiffness:jr.stiffness,damping:jr.damping,mass:jr.mass,isResolvedFromDuration:!1,...e};if(!Vz(e,pLe)&&Vz(e,mLe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*tu(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:jr.mass,stiffness:s,damping:a}}else{const n=uLe(e);t={...t,...n,mass:jr.mass},t.isResolvedFromDuration=!0}return t}function Rx(e=jr.visualDuration,t=jr.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:m,velocity:p,isResolvedFromDuration:h}=hLe({...n,velocity:-Al(n.velocity||0)}),g=p||0,y=u/(2*Math.sqrt(c*d)),v=i-a,x=Al(Math.sqrt(c/d)),b=Math.abs(v)<5;r||(r=b?jr.restSpeed.granular:jr.restSpeed.default),s||(s=b?jr.restDelta.granular:jr.restDelta.default);let _;if(y<1){const C=rR(x,y);_=S=>{const E=Math.exp(-y*x*S);return i-E*((g+y*x*v)/C*Math.sin(C*S)+v*Math.cos(C*S))}}else if(y===1)_=C=>i-Math.exp(-x*C)*(v+(g+x*v)*C);else{const C=x*Math.sqrt(y*y-1);_=S=>{const E=Math.exp(-y*x*S),M=Math.min(C*S,300);return i-E*((g+y*x*v)*Math.sinh(M)+C*v*Math.cosh(M))/C}}const w={calculatedDuration:h&&m||null,next:C=>{const S=_(C);if(h)l.done=C>=m;else{let E=C===0?g:0;y<1&&(E=C===0?Oi(g):Zle(_,C,S));const M=Math.abs(E)<=r,k=Math.abs(i-S)<=s;l.done=M&&k}return l.value=l.done?i:S,l},toString:()=>{const C=Math.min(dL(w),v2),S=Qle(E=>w.next(C*E).value,C,30);return C+"ms "+S},toTransition:()=>{}};return w}Rx.applyToOptions=e=>{const t=Xle(e,100,Rx);return e.ease=t.ease,e.duration=Oi(t.duration),e.type="keyframes",e};function sR({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:l,max:c,restDelta:u=.5,restSpeed:d}){const m=e[0],p={done:!1,value:m},h=M=>l!==void 0&&M<l||c!==void 0&&M>c,g=M=>l===void 0?c:c===void 0||Math.abs(l-M)<Math.abs(c-M)?l:c;let y=n*t;const v=m+y,x=i===void 0?v:i(v);x!==v&&(y=x-m);const b=M=>-y*Math.exp(-M/r),_=M=>x+b(M),w=M=>{const k=b(M),A=_(M);p.done=Math.abs(k)<=u,p.value=p.done?x:A};let C,S;const E=M=>{h(p.value)&&(C=M,S=Rx({keyframes:[p.value,g(p.value)],velocity:Zle(_,M,p.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return E(0),{calculatedDuration:null,next:M=>{let k=!1;return!S&&C===void 0&&(k=!0,w(M),E(M)),C!==void 0&&M>=C?S.next(M-C):(!k&&w(M),p)}}}function gLe(e,t,n){const r=[],s=n||nu.mix||Yle,a=e.length-1;for(let i=0;i<a;i++){let l=s(e[i],e[i+1]);if(t){const c=Array.isArray(t)?t[i]||ii:t;l=Sb(c,l)}r.push(l)}return r}function Jle(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(eL(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=gLe(t,r,s),c=l.length,u=d=>{if(i&&d<e[0])return t[0];let m=0;if(c>1)for(;m<e.length-2&&!(d<e[m+1]);m++);const p=Qh(e[m],e[m+1],d);return l[m](p)};return n?d=>u(tu(e[0],e[a-1],d)):u}function ece(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Qh(0,t,r);e.push(wr(n,1,s))}}function tce(e){const t=[0];return ece(t,e.length-1),t}function yLe(e,t){return e.map(n=>n*t)}function vLe(e,t){return e.map(()=>t||Ya).splice(0,e.length-1)}function Dv({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=Fle(r)?r.map(Oz):Oz(r),a={done:!1,value:t[0]},i=yLe(n&&n.length===t.length?n:tce(t),e),l=Jle(i,t,{ease:Array.isArray(s)?s:vLe(t,s)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}const xLe=e=>e!==null;function fL(e,{repeat:t,repeatType:n="loop"},r,s=1){const a=e.filter(xLe),l=s<0||t&&n!=="loop"&&t%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const bLe={decay:sR,inertia:sR,tween:Dv,keyframes:Dv,spring:Rx};function nce(e){typeof e.type=="string"&&(e.type=bLe[e.type])}class mL{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const _Le=e=>e/100;class n5 extends mL{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Qa.now()&&this.tick(Qa.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;nce(t);const{type:n=Dv,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=t;let{keyframes:l}=t;const c=n||Dv;c!==Dv&&typeof l[0]!="number"&&(this.mixKeyframes=Sb(_Le,Yle(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=dL(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:m,repeatType:p,repeatDelay:h,type:g,onUpdate:y,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const x=this.currentTime-u*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let _=this.currentTime,w=r;if(m){const M=Math.min(this.currentTime,s)/l;let k=Math.floor(M),A=M%1;!A&&M>=1&&(A=1),A===1&&k--,k=Math.min(k,m+1),!!(k%2)&&(p==="reverse"?(A=1-A,h&&(A-=h/l)):p==="mirror"&&(w=i)),_=tu(0,1,A)*l}const C=b?{done:!1,value:d[0]}:w.next(_);a&&(C.value=a(C.value));let{done:S}=C;!b&&c!==null&&(S=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return E&&g!==sR&&(C.value=fL(d,this.options,v,this.speed)),y&&y(C.value),E&&this.finish(),C}then(t,n){return this.finished.then(t,n)}get duration(){return Al(this.calculatedDuration)}get time(){return Al(this.currentTime)}set time(t){t=Oi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Qa.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Al(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=lLe,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Qa.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function wLe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Uf=e=>e*180/Math.PI,aR=e=>{const t=Uf(Math.atan2(e[1],e[0]));return oR(t)},CLe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:aR,rotateZ:aR,skewX:e=>Uf(Math.atan(e[1])),skewY:e=>Uf(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},oR=e=>(e=e%360,e<0&&(e+=360),e),$z=aR,Wz=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Hz=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),SLe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Wz,scaleY:Hz,scale:e=>(Wz(e)+Hz(e))/2,rotateX:e=>oR(Uf(Math.atan2(e[6],e[5]))),rotateY:e=>oR(Uf(Math.atan2(-e[2],e[0]))),rotateZ:$z,rotate:$z,skewX:e=>Uf(Math.atan(e[4])),skewY:e=>Uf(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function iR(e){return e.includes("scale")?1:0}function lR(e,t){if(!e||e==="none")return iR(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=SLe,s=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=CLe,s=l}if(!s)return iR(t);const a=r[t],i=s[1].split(",").map(MLe);return typeof a=="function"?a(i):i[a]}const ELe=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return lR(n,t)};function MLe(e){return parseFloat(e.trim())}const ry=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sy=new Set(ry),zz=e=>e===ny||e===Lt,kLe=new Set(["x","y","z"]),TLe=ry.filter(e=>!kLe.has(e));function NLe(e){const t=[];return TLe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Yf={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>lR(t,"x"),y:(e,{transform:t})=>lR(t,"y")};Yf.translateX=Yf.x;Yf.translateY=Yf.y;const Qf=new Set;let cR=!1,uR=!1,dR=!1;function rce(){if(uR){const e=Array.from(Qf).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=NLe(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,i])=>{r.getValue(a)?.set(i)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}uR=!1,cR=!1,Qf.forEach(e=>e.complete(dR)),Qf.clear()}function sce(){Qf.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(uR=!0)})}function jLe(){dR=!0,sce(),rce(),dR=!1}class pL{constructor(t,n,r,s,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(Qf.add(this),cR||(cR=!0,sr.read(sce),sr.resolveKeyframes(rce))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const a=s?.get(),i=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const l=r.readValue(n,i);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=i),s&&a===void 0&&s.set(t[0])}wLe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Qf.delete(this)}cancel(){this.state==="scheduled"&&(Qf.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const ALe=e=>e.startsWith("--");function ILe(e,t,n){ALe(t)?e.style.setProperty(t,n):e.style[t]=n}const RLe=tL(()=>window.ScrollTimeline!==void 0),PLe={};function OLe(e,t){const n=tL(e);return()=>PLe[t]??n()}const ace=OLe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cv=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Gz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cv([0,.65,.55,1]),circOut:cv([.55,0,1,.45]),backIn:cv([.31,.01,.66,-.59]),backOut:cv([.33,1.53,.69,.99])};function oce(e,t){if(e)return typeof e=="function"?ace()?Qle(e,t):"ease-out":Ble(e)?cv(e):Array.isArray(e)?e.map(n=>oce(n,t)||Gz.easeOut):Gz[e]}function LLe(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:n};c&&(d.offset=c);const m=oce(l,s);Array.isArray(m)&&(d.easing=m);const p={delay:r,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),e.animate(d,p)}function hL(e){return typeof e=="function"&&"applyToOptions"in e}function DLe({type:e,...t}){return hL(e)&&ace()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class FLe extends mL{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!a,this.allowFlatten=i,this.options=t,eL(typeof t.type!="string");const u=DLe(t);this.animation=LLe(n,r,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=fL(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):ILe(n,r,d),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Al(Number(t))}get time(){return Al(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Oi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&RLe()?(this.animation.timeline=t,ii):n(this)}}const ice={anticipate:sL,backInOut:Ple,circInOut:Lle};function ULe(e){return e in ice}function BLe(e){typeof e.ease=="string"&&ULe(e.ease)&&(e.ease=ice[e.ease])}const qz=10;class VLe extends FLe{constructor(t){BLe(t),nce(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...i}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new n5({...i,autoplay:!1}),c=Oi(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-qz).value,l.sample(c).value,qz),l.stop()}}const Kz=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(bd.test(e)||e==="0")&&!e.startsWith("url("));function $Le(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function WLe(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],i=Kz(s,t),l=Kz(a,t);return!i||!l?!1:$Le(e)||(n==="spring"||hL(n))&&r}function fR(e){e.duration=0,e.type}const HLe=new Set(["opacity","clipPath","filter","transform"]),zLe=tL(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function GLe(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:a,type:i}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return zLe()&&n&&HLe.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&a!==0&&i!=="inertia"}const qLe=40;class KLe extends mL{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",keyframes:l,name:c,motionValue:u,element:d,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Qa.now();const p={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:i,name:c,motionValue:u,element:d,...m},h=d?.KeyframeResolver||pL;this.keyframeResolver=new h(l,(g,y,v)=>this.onKeyframesResolved(g,y,p,!v),c,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:a,type:i,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Qa.now(),WLe(t,a,i,l)||((nu.instantAnimations||!c)&&d?.(fL(t,r,n)),t[0]=t[t.length-1],fR(r),r.repeat=0);const p={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>qLe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},h=!u&&GLe(p)?new VLe({...p,element:p.motionValue.owner.current}):new n5(p);h.finished.then(()=>this.notifyFinished()).catch(ii),this.pendingTimeline&&(this.stopTimeline=h.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=h}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),jLe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}class YLe{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t){const n=this.animations.map(r=>r.attachTimeline(t));return()=>{n.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class QLe extends YLe{then(t,n){return this.finished.finally(t).then(()=>{})}}const XLe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ZLe(e){const t=XLe.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function lce(e,t,n=1){const[r,s]=ZLe(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const i=a.trim();return Mle(i)?parseFloat(i):i}return iL(s)?lce(s,t,n+1):s}function gL(e,t){return e?.[t]??e?.default??e}const cce=new Set(["width","height","top","left","right","bottom",...ry]),JLe={test:e=>e==="auto",parse:e=>e},uce=e=>t=>t.test(e),dce=[ny,Lt,Il,Bu,G7e,z7e,JLe],Yz=e=>dce.find(uce(e));function eDe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Tle(e):!0}const tDe=new Set(["brightness","contrast","saturate","opacity"]);function nDe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(lL)||[];if(!r)return e;const s=n.replace(r,"");let a=tDe.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const rDe=/\b([a-z-]*)\(.*?\)/gu,mR={...bd,getAnimatableNone:e=>{const t=e.match(rDe);return t?t.map(nDe).join(" "):e}},Qz={...ny,transform:Math.round},sDe={rotate:Bu,rotateX:Bu,rotateY:Bu,rotateZ:Bu,scale:Mw,scaleX:Mw,scaleY:Mw,scaleZ:Mw,skew:Bu,skewX:Bu,skewY:Bu,distance:Lt,translateX:Lt,translateY:Lt,translateZ:Lt,x:Lt,y:Lt,z:Lt,perspective:Lt,transformPerspective:Lt,opacity:Ax,originX:Lz,originY:Lz,originZ:Lt},yL={borderWidth:Lt,borderTopWidth:Lt,borderRightWidth:Lt,borderBottomWidth:Lt,borderLeftWidth:Lt,borderRadius:Lt,radius:Lt,borderTopLeftRadius:Lt,borderTopRightRadius:Lt,borderBottomRightRadius:Lt,borderBottomLeftRadius:Lt,width:Lt,maxWidth:Lt,height:Lt,maxHeight:Lt,top:Lt,right:Lt,bottom:Lt,left:Lt,padding:Lt,paddingTop:Lt,paddingRight:Lt,paddingBottom:Lt,paddingLeft:Lt,margin:Lt,marginTop:Lt,marginRight:Lt,marginBottom:Lt,marginLeft:Lt,backgroundPositionX:Lt,backgroundPositionY:Lt,...sDe,zIndex:Qz,fillOpacity:Ax,strokeOpacity:Ax,numOctaves:Qz},aDe={...yL,color:Gr,backgroundColor:Gr,outlineColor:Gr,fill:Gr,stroke:Gr,borderColor:Gr,borderTopColor:Gr,borderRightColor:Gr,borderBottomColor:Gr,borderLeftColor:Gr,filter:mR,WebkitFilter:mR},fce=e=>aDe[e];function mce(e,t){let n=fce(e);return n!==mR&&(n=bd),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const oDe=new Set(["auto","none","0"]);function iDe(e,t,n){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!oDe.has(a)&&Ix(a).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=mce(n,s)}class lDe extends pL{constructor(t,n,r,s,a){super(t,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),iL(u))){const d=lce(u,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!cce.has(r)||t.length!==2)return;const[s,a]=t,i=Yz(s),l=Yz(a);if(i!==l)if(zz(i)&&zz(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else Yf[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||eDe(t[s]))&&r.push(s);r.length&&iDe(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yf[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,i=r[a];r[a]=Yf[n](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function vL(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;t&&(r=t.current);const s=n?.[e]??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const pce=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function hce(e){return kle(e)&&"offsetHeight"in e}const Xz=30,cDe=e=>!isNaN(parseFloat(e)),Fv={current:void 0};class uDe{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=Qa.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Qa.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=cDe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new nL);const r=this.events[t].add(n);return t==="change"?()=>{r(),sr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return Fv.current&&Fv.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=Qa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Xz)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Xz);return Nle(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fm(e,t){return new uDe(e,t)}const{schedule:xL}=Vle(queueMicrotask,!1),Ei={x:!1,y:!1};function gce(){return Ei.x||Ei.y}function dDe(e){return e==="x"||e==="y"?Ei[e]?null:(Ei[e]=!0,()=>{Ei[e]=!1}):Ei.x||Ei.y?null:(Ei.x=Ei.y=!0,()=>{Ei.x=Ei.y=!1})}function yce(e,t){const n=vL(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function Zz(e){return!(e.pointerType==="touch"||gce())}function fDe(e,t,n={}){const[r,s,a]=yce(e,n),i=l=>{if(!Zz(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=m=>{Zz(m)&&(u(m),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return r.forEach(l=>{l.addEventListener("pointerenter",i,s)}),a}const vce=(e,t)=>t?e===t?!0:vce(e,t.parentElement):!1,bL=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,mDe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function pDe(e){return mDe.has(e.tagName)||e.tabIndex!==-1}const gS=new WeakSet;function Jz(e){return t=>{t.key==="Enter"&&e(t)}}function P4(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const hDe=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Jz(()=>{if(gS.has(n))return;P4(n,"down");const s=Jz(()=>{P4(n,"up")}),a=()=>P4(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function eG(e){return bL(e)&&!gce()}function gDe(e,t,n={}){const[r,s,a]=yce(e,n),i=l=>{const c=l.currentTarget;if(!eG(l))return;gS.add(c);const u=t(c,l),d=(h,g)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",p),gS.has(c)&&gS.delete(c),eG(h)&&typeof u=="function"&&u(h,{success:g})},m=h=>{d(h,c===window||c===document||n.useGlobalTarget||vce(c,h.target))},p=h=>{d(h,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",p,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",i,s),hce(l)&&(l.addEventListener("focus",u=>hDe(u,s)),!pDe(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function _L(e){return kle(e)&&"ownerSVGElement"in e}function xce(e){return _L(e)&&e.tagName==="svg"}function yDe(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],s=e[1+n],a=e[2+n],i=e[3+n],l=Jle(s,a,i);return t?l(r):l}const Yr=e=>!!(e&&e.getVelocity);function vDe(e,t,n){const r=e.get();let s=null,a=r,i;const l=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,c=()=>{s&&(s.stop(),s=null)},u=()=>{c(),s=new n5({keyframes:[nG(e.get()),nG(a)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:i})};if(e.attach((d,m)=>(a=d,i=p=>m(tG(p,l)),sr.postRender(u),e.get()),c),Yr(t)){const d=t.on("change",p=>e.set(tG(p,l))),m=e.on("destroy",d);return()=>{d(),m()}}return c}function tG(e,t){return t?e+t:e}function nG(e){return typeof e=="number"?e:parseFloat(e)}const xDe=[...dce,Gr,bd],bDe=e=>xDe.find(uce(e)),Mb=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class _De extends f.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=hce(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function wDe({children:e,isPresent:t,anchorX:n,root:r}){const s=f.useId(),a=f.useRef(null),i=f.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=f.useContext(Mb);return f.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:m,right:p}=i.current;if(t||!a.current||!c||!u)return;const h=n==="left"?`left: ${m}`:`right: ${p}`;a.current.dataset.motionPopId=s;const g=document.createElement("style");l&&(g.nonce=l);const y=r??document.head;return y.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${h}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.contains(g)&&y.removeChild(g)}},[t]),o.jsx(_De,{isPresent:t,childRef:a,sizeRef:i,children:f.cloneElement(e,{ref:a})})}const CDe=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:i,anchorX:l,root:c})=>{const u=wb(SDe),d=f.useId();let m=!0,p=f.useMemo(()=>(m=!1,{id:d,initial:t,isPresent:n,custom:s,onExitComplete:h=>{u.set(h,!0);for(const g of u.values())if(!g)return;r&&r()},register:h=>(u.set(h,!1),()=>u.delete(h))}),[n,u,r]);return a&&m&&(p={...p}),f.useMemo(()=>{u.forEach((h,g)=>u.set(g,!1))},[n]),f.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),i==="popLayout"&&(e=o.jsx(wDe,{isPresent:n,anchorX:l,root:c,children:e})),o.jsx(t5.Provider,{value:p,children:e})};function SDe(){return new Map}function bce(e=!0){const t=f.useContext(t5);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,a=f.useId();f.useEffect(()=>{if(e)return s(a)},[e]);const i=f.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,i]:[!0]}const kw=e=>e.key||"";function rG(e){const t=[];return f.Children.forEach(e,n=>{f.isValidElement(n)&&t.push(n)}),t}const Ke=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:l="left",root:c})=>{const[u,d]=bce(i),m=f.useMemo(()=>rG(e),[e]),p=i&&!u?[]:m.map(kw),h=f.useRef(!0),g=f.useRef(m),y=wb(()=>new Map),[v,x]=f.useState(m),[b,_]=f.useState(m);e5(()=>{h.current=!1,g.current=m;for(let S=0;S<b.length;S++){const E=kw(b[S]);p.includes(E)?y.delete(E):y.get(E)!==!0&&y.set(E,!1)}},[b,p.length,p.join("-")]);const w=[];if(m!==v){let S=[...m];for(let E=0;E<b.length;E++){const M=b[E],k=kw(M);p.includes(k)||(S.splice(E,0,M),w.push(M))}return a==="wait"&&w.length&&(S=w),_(rG(S)),x(m),null}const{forceRender:C}=f.useContext(jx);return o.jsx(o.Fragment,{children:b.map(S=>{const E=kw(S),M=i&&!u?!1:m===b||p.includes(E),k=()=>{if(y.has(E))y.set(E,!0);else return;let A=!0;y.forEach(R=>{R||(A=!1)}),A&&(C?.(),_(g.current),i&&d?.(),r&&r())};return o.jsx(CDe,{isPresent:M,initial:!h.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:c,onExitComplete:M?void 0:k,anchorX:l,children:S},E)})})},EDe=f.createContext(null);function MDe(){const e=f.useRef(!1);return e5(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function kDe(){const e=MDe(),[t,n]=f.useState(0),r=f.useCallback(()=>{e.current&&n(t+1)},[t]);return[f.useCallback(()=>sr.postRender(r),[r]),t]}const TDe=e=>!e.isLayoutDirty&&e.willUpdate(!1);function sG(){const e=new Set,t=new WeakMap,n=()=>e.forEach(TDe);return{add:r=>{e.add(r),t.set(r,r.addEventListener("willUpdate",n))},remove:r=>{e.delete(r);const s=t.get(r);s&&(s(),t.delete(r)),n()},dirty:n}}const _ce=e=>e===!0,NDe=e=>_ce(e===!0)||e==="id",rc=({children:e,id:t,inherit:n=!0})=>{const r=f.useContext(jx),s=f.useContext(EDe),[a,i]=kDe(),l=f.useRef(null),c=r.id||s;l.current===null&&(NDe(n)&&c&&(t=t?c+"-"+t:c),l.current={id:t,group:_ce(n)&&r.group||sG()});const u=f.useMemo(()=>({...l.current,forceRender:a}),[i]);return o.jsx(jx.Provider,{value:u,children:e})},wce=f.createContext({strict:!1}),aG={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xh={};for(const e in aG)Xh[e]={isEnabled:t=>aG[e].some(n=>!!t[n])};function jDe(e){for(const t in e)Xh[t]={...Xh[t],...e[t]}}const ADe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function x2(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||ADe.has(e)}let Cce=e=>!x2(e);function IDe(e){typeof e=="function"&&(Cce=t=>t.startsWith("on")?!x2(t):e(t))}try{IDe(require("@emotion/is-prop-valid").default)}catch{}function RDe(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(Cce(s)||n===!0&&x2(s)||!t&&!x2(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const r5=f.createContext({});function s5(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Px(e){return typeof e=="string"||Array.isArray(e)}const wL=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],CL=["initial",...wL];function a5(e){return s5(e.animate)||CL.some(t=>Px(e[t]))}function Sce(e){return!!(a5(e)||e.variants)}function PDe(e,t){if(a5(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Px(n)?n:void 0,animate:Px(r)?r:void 0}}return e.inherit!==!1?t:{}}function ODe(e){const{initial:t,animate:n}=PDe(e,f.useContext(r5));return f.useMemo(()=>({initial:t,animate:n}),[oG(t),oG(n)])}function oG(e){return Array.isArray(e)?e.join(" "):e}const Ox={};function LDe(e){for(const t in e)Ox[t]=e[t],oL(t)&&(Ox[t].isCSSVariable=!0)}function Ece(e,{layout:t,layoutId:n}){return sy.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Ox[e]||e==="opacity")}const DDe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},FDe=ry.length;function UDe(e,t,n){let r="",s=!0;for(let a=0;a<FDe;a++){const i=ry[a],l=e[i];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(i.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=pce(l,yL[i]);if(!c){s=!1;const d=DDe[i]||i;r+=`${d}(${u}) `}n&&(t[i]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function SL(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let i=!1,l=!1;for(const c in t){const u=t[c];if(sy.has(c)){i=!0;continue}else if(oL(c)){s[c]=u;continue}else{const d=pce(u,yL[c]);c.startsWith("origin")?(l=!0,a[c]=d):r[c]=d}}if(t.transform||(i||n?r.transform=UDe(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${u} ${d}`}}const EL=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Mce(e,t,n){for(const r in t)!Yr(t[r])&&!Ece(r,n)&&(e[r]=t[r])}function BDe({transformTemplate:e},t){return f.useMemo(()=>{const n=EL();return SL(n,t,e),Object.assign({},n.vars,n.style)},[t])}function VDe(e,t){const n=e.style||{},r={};return Mce(r,n,e),Object.assign(r,BDe(e,t)),r}function $De(e,t){const n={},r=VDe(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const WDe={offset:"stroke-dashoffset",array:"stroke-dasharray"},HDe={offset:"strokeDashoffset",array:"strokeDasharray"};function zDe(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?WDe:HDe;e[a.offset]=Lt.transform(-r);const i=Lt.transform(t),l=Lt.transform(n);e[a.array]=`${i} ${l}`}function kce(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...l},c,u,d){if(SL(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p}=e;m.transform&&(p.transform=m.transform,delete m.transform),(p.transform||m.transformOrigin)&&(p.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),p.transform&&(p.transformBox=d?.transformBox??"fill-box",delete m.transformBox),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),s!==void 0&&zDe(m,s,a,i,!1)}const Tce=()=>({...EL(),attrs:{}}),Nce=e=>typeof e=="string"&&e.toLowerCase()==="svg";function GDe(e,t,n,r){const s=f.useMemo(()=>{const a=Tce();return kce(a,t,Nce(r),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};Mce(a,e.style,e),s.style={...a,...s.style}}return s}const qDe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ML(e){return typeof e!="string"||e.includes("-")?!1:!!(qDe.indexOf(e)>-1||/[A-Z]/u.test(e))}function KDe(e,t,n,{latestValues:r},s,a=!1){const l=(ML(e)?GDe:$De)(t,r,s,e),c=RDe(t,typeof e=="string",a),u=e!==f.Fragment?{...c,...l,ref:n}:{},{children:d}=t,m=f.useMemo(()=>Yr(d)?d.get():d,[d]);return f.createElement(e,{...u,children:m})}function iG(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function kL(e,t,n,r){if(typeof t=="function"){const[s,a]=iG(r);t=t(n!==void 0?n:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=iG(r);t=t(n!==void 0?n:e.custom,s,a)}return t}function yS(e){return Yr(e)?e.get():e}function YDe({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:QDe(n,r,s,e),renderState:t()}}function QDe(e,t,n,r){const s={},a=r(e,{});for(const p in a)s[p]=yS(a[p]);let{initial:i,animate:l}=e;const c=a5(e),u=Sce(e);t&&u&&!c&&e.inherit!==!1&&(i===void 0&&(i=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||i===!1;const m=d?l:i;if(m&&typeof m!="boolean"&&!s5(m)){const p=Array.isArray(m)?m:[m];for(let h=0;h<p.length;h++){const g=kL(e,p[h]);if(g){const{transitionEnd:y,transition:v,...x}=g;for(const b in x){let _=x[b];if(Array.isArray(_)){const w=d?_.length-1:0;_=_[w]}_!==null&&(s[b]=_)}for(const b in y)s[b]=y[b]}}}return s}const jce=e=>(t,n)=>{const r=f.useContext(r5),s=f.useContext(t5),a=()=>YDe(e,t,r,s);return n?a():wb(a)};function TL(e,t,n){const{style:r}=e,s={};for(const a in r)(Yr(r[a])||t.style&&Yr(t.style[a])||Ece(a,e)||n?.getValue(a)?.liveStyle!==void 0)&&(s[a]=r[a]);return s}const XDe=jce({scrapeMotionValuesFromProps:TL,createRenderState:EL});function Ace(e,t,n){const r=TL(e,t,n);for(const s in e)if(Yr(e[s])||Yr(t[s])){const a=ry.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}const ZDe=jce({scrapeMotionValuesFromProps:Ace,createRenderState:Tce}),JDe=Symbol.for("motionComponentSymbol");function eh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function eFe(e,t,n){return f.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):eh(n)&&(n.current=r))},[t])}const NL=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),tFe="framerAppearId",Ice="data-"+NL(tFe),Rce=f.createContext({});function nFe(e,t,n,r,s){const{visualElement:a}=f.useContext(r5),i=f.useContext(wce),l=f.useContext(t5),c=f.useContext(Mb).reducedMotion,u=f.useRef(null);r=r||i.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:a,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,m=f.useContext(Rce);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&rFe(u.current,n,s,m);const p=f.useRef(!1);f.useInsertionEffect(()=>{d&&p.current&&d.update(n,l)});const h=n[Ice],g=f.useRef(!!h&&!window.MotionHandoffIsComplete?.(h)&&window.MotionHasOptimisedAnimation?.(h));return e5(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),g.current&&d.animationState&&d.animationState.animateChanges())}),f.useEffect(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(h)}),g.current=!1),d.enteringChildren=void 0)}),d}function rFe(e,t,n,r){const{layoutId:s,layout:a,drag:i,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Pce(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||l&&eh(l),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function Pce(e){if(e)return e.options.allowProjection!==!1?e.projection:Pce(e.parent)}function O4(e,{forwardMotionProps:t=!1}={},n,r){n&&jDe(n);const s=ML(e)?ZDe:XDe;function a(l,c){let u;const d={...f.useContext(Mb),...l,layoutId:sFe(l)},{isStatic:m}=d,p=ODe(l),h=s(l,m);if(!m&&Z7){aFe();const g=oFe(d);u=g.MeasureLayout,p.visualElement=nFe(e,h,d,r,g.ProjectionNode)}return o.jsxs(r5.Provider,{value:p,children:[u&&p.visualElement?o.jsx(u,{visualElement:p.visualElement,...d}):null,KDe(e,l,eFe(h,p.visualElement,c),h,m,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const i=f.forwardRef(a);return i[JDe]=e,i}function sFe({layoutId:e}){const t=f.useContext(jx).id;return t&&e!==void 0?t+"-"+e:e}function aFe(e,t){f.useContext(wce).strict}function oFe(e){const{drag:t,layout:n}=Xh;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function iFe(e,t){if(typeof Proxy>"u")return O4;const n=new Map,r=(a,i)=>O4(a,i,e,t),s=(a,i)=>r(a,i);return new Proxy(s,{get:(a,i)=>i==="create"?r:(n.has(i)||n.set(i,O4(i,void 0,e,t)),n.get(i))})}function Oce({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function lFe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function cFe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function L4(e){return e===void 0||e===1}function pR({scale:e,scaleX:t,scaleY:n}){return!L4(e)||!L4(t)||!L4(n)}function Mf(e){return pR(e)||Lce(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Lce(e){return lG(e.x)||lG(e.y)}function lG(e){return e&&e!=="0%"}function b2(e,t,n){const r=e-n,s=t*r;return n+s}function cG(e,t,n,r,s){return s!==void 0&&(e=b2(e,s,r)),b2(e,n,r)+t}function hR(e,t=0,n=1,r,s){e.min=cG(e.min,t,n,r,s),e.max=cG(e.max,t,n,r,s)}function Dce(e,{x:t,y:n}){hR(e.x,t.translate,t.scale,t.originPoint),hR(e.y,n.translate,n.scale,n.originPoint)}const uG=.999999999999,dG=1.0000000000001;function uFe(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let a,i;for(let l=0;l<s;l++){a=n[l],i=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&nh(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Dce(e,i)),r&&Mf(a.latestValues)&&nh(e,a.latestValues))}t.x<dG&&t.x>uG&&(t.x=1),t.y<dG&&t.y>uG&&(t.y=1)}function th(e,t){e.min=e.min+t,e.max=e.max+t}function fG(e,t,n,r,s=.5){const a=wr(e.min,e.max,s);hR(e,t,n,a,r)}function nh(e,t){fG(e.x,t.x,t.scaleX,t.scale,t.originX),fG(e.y,t.y,t.scaleY,t.scale,t.originY)}function Fce(e,t){return Oce(cFe(e.getBoundingClientRect(),t))}function dFe(e,t,n){const r=Fce(e,n),{scroll:s}=t;return s&&(th(r.x,s.offset.x),th(r.y,s.offset.y)),r}const mG=()=>({translate:0,scale:1,origin:0,originPoint:0}),rh=()=>({x:mG(),y:mG()}),pG=()=>({min:0,max:0}),Nr=()=>({x:pG(),y:pG()}),_2={current:null},jL={current:!1};function Uce(){if(jL.current=!0,!!Z7)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>_2.current=e.matches;e.addEventListener("change",t),t()}else _2.current=!1}const Lx=new WeakMap;function fFe(e,t,n){for(const r in t){const s=t[r],a=n[r];if(Yr(s))e.addValue(r,s);else if(Yr(a))e.addValue(r,fm(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const i=e.getValue(r);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=e.getStaticValue(r);e.addValue(r,fm(i!==void 0?i:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const hG=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Bce{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=pL,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Qa.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,sr.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=i;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=a5(n),this.isVariantNode=Sce(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in m){const h=m[p];c[p]!==void 0&&Yr(h)&&h.set(c[p])}}mount(t){this.current=t,Lx.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),jL.current||Uce(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_2.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ru(this.notifyUpdate),ru(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=sy.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&sr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Xh){const n=Xh[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<hG.length;r++){const s=hG[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=t[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=fFe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=fm(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Mle(r)||Tle(r))?r=parseFloat(r):!bDe(r)&&bd.test(n)&&(r=mce(t,n)),this.setBaseTarget(t,Yr(r)?r.get():r)),Yr(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=kL(this.props,n,this.presenceContext?.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Yr(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new nL),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){xL.render(this.render)}}class Vce extends Bce{constructor(){super(...arguments),this.KeyframeResolver=lDe}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Yr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function $ce(e,{style:t,vars:n},r,s){const a=e.style;let i;for(i in t)a[i]=t[i];s?.applyProjectionStyles(a,r);for(i in n)a.setProperty(i,n[i])}function mFe(e){return window.getComputedStyle(e)}class Wce extends Vce{constructor(){super(...arguments),this.type="html",this.renderInstance=$ce}readValueFromInstance(t,n){if(sy.has(n))return this.projection?.isProjecting?iR(n):ELe(t,n);{const r=mFe(t),s=(oL(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Fce(t,n)}build(t,n,r){SL(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return TL(t,n,r)}}const Hce=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pFe(e,t,n,r){$ce(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Hce.has(s)?s:NL(s),t.attrs[s])}class zce extends Vce{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nr}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(sy.has(n)){const r=fce(n);return r&&r.default||0}return n=Hce.has(n)?n:NL(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Ace(t,n,r)}build(t,n,r){kce(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){pFe(t,n,r,s)}mount(t){this.isSVGTag=Nce(t.tagName),super.mount(t)}}const hFe=(e,t)=>ML(e)?new zce(t):new Wce(t,{allowProjection:e!==f.Fragment});function xh(e,t,n){const r=e.getProps();return kL(r,t,n!==void 0?n:r.custom,e)}const gR=e=>Array.isArray(e);function gFe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,fm(n))}function yFe(e){return gR(e)?e[e.length-1]||0:e}function vFe(e,t){const n=xh(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const i in a){const l=yFe(a[i]);gFe(e,i,l)}}function xFe(e){return!!(Yr(e)&&e.add)}function yR(e,t){const n=e.getValue("willChange");if(xFe(n))return n.add(t);if(!n&&nu.WillChange){const r=new nu.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Gce(e){return e.props[Ice]}const bFe=e=>e!==null;function _Fe(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(bFe),a=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[a]}const wFe={type:"spring",stiffness:500,damping:25,restSpeed:10},CFe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),SFe={type:"keyframes",duration:.8},EFe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},MFe=(e,{keyframes:t})=>t.length>2?SFe:sy.has(e)?e.startsWith("scale")?CFe(t[1]):wFe:EFe;function kFe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const AL=(e,t,n,r={},s,a)=>i=>{const l=gL(r,e)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Oi(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:p=>{t.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{i(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:s};kFe(l)||Object.assign(d,MFe(e,d)),d.duration&&(d.duration=Oi(d.duration)),d.repeatDelay&&(d.repeatDelay=Oi(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let m=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(fR(d),d.delay===0&&(m=!0)),(nu.instantAnimations||nu.skipAnimations)&&(m=!0,fR(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,m&&!a&&t.get()!==void 0){const p=_Fe(d.keyframes,l);if(p!==void 0){sr.update(()=>{d.onUpdate(p),d.onComplete()});return}}return l.isSync?new n5(d):new KLe(d)};function TFe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function IL(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...l}=t;r&&(a=r);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const m=e.getValue(d,e.latestValues[d]??null),p=l[d];if(p===void 0||u&&TFe(u,d))continue;const h={delay:n,...gL(a||{},d)},g=m.get();if(g!==void 0&&!m.isAnimating&&!Array.isArray(p)&&p===g&&!h.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const x=Gce(e);if(x){const b=window.MotionHandoffAnimation(x,d,sr);b!==null&&(h.startTime=b,y=!0)}}yR(e,d),m.start(AL(d,m,p,e.shouldReduceMotion&&cce.has(d)?{type:!1}:h,e,y));const v=m.animation;v&&c.push(v)}return i&&Promise.all(c).then(()=>{sr.update(()=>{i&&vFe(e,i)})}),c}function qce(e,t,n,r=0,s=1){const a=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),i=e.size,l=(i-1)*r;return typeof n=="function"?n(a,i):s===1?a*r:l-a*r}function vR(e,t,n={}){const r=xh(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(IL(e,r,n)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:m}=s;return NFe(e,t,c,u,d,m,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[a,i]:[i,a];return c().then(()=>u())}else return Promise.all([a(),i(n.delay)])}function NFe(e,t,n=0,r=0,s=0,a=1,i){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(vR(c,t,{...i,delay:n+(typeof r=="function"?0:r)+qce(e.variantChildren,c,r,s,a)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function jFe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(a=>vR(e,a,n));r=Promise.all(s)}else if(typeof t=="string")r=vR(e,t,n);else{const s=typeof t=="function"?xh(e,t,n.custom):t;r=Promise.all(IL(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Kce(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const AFe=CL.length;function Yce(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Yce(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<AFe;n++){const r=CL[n],s=e.props[r];(Px(s)||s===!1)&&(t[r]=s)}return t}const IFe=[...wL].reverse(),RFe=wL.length;function PFe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>jFe(e,n,r)))}function OFe(e){let t=PFe(e),n=gG(),r=!0;const s=c=>(u,d)=>{const m=xh(e,d,c==="exit"?e.presenceContext?.custom:void 0);if(m){const{transition:p,transitionEnd:h,...g}=m;u={...u,...g,...h}}return u};function a(c){t=c(e)}function i(c){const{props:u}=e,d=Yce(e.parent)||{},m=[],p=new Set;let h={},g=1/0;for(let v=0;v<RFe;v++){const x=IFe[v],b=n[x],_=u[x]!==void 0?u[x]:d[x],w=Px(_),C=x===c?b.isActive:null;C===!1&&(g=v);let S=_===d[x]&&_!==u[x]&&w;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...h},!b.isActive&&C===null||!_&&!b.prevProp||s5(_)||typeof _=="boolean")continue;const E=LFe(b.prevProp,_);let M=E||x===c&&b.isActive&&!S&&w||v>g&&w,k=!1;const A=Array.isArray(_)?_:[_];let R=A.reduce(s(x),{});C===!1&&(R={});const{prevResolvedValues:O={}}=b,L={...O,...R},P=j=>{M=!0,p.has(j)&&(k=!0,p.delete(j)),b.needsAnimating[j]=!0;const F=e.getValue(j);F&&(F.liveStyle=!1)};for(const j in L){const F=R[j],U=O[j];if(h.hasOwnProperty(j))continue;let V=!1;gR(F)&&gR(U)?V=!Kce(F,U):V=F!==U,V?F!=null?P(j):p.add(j):F!==void 0&&p.has(j)?P(j):b.protectedKeys[j]=!0}b.prevProp=_,b.prevResolvedValues=R,b.isActive&&(h={...h,...R}),r&&e.blockInitialAnimation&&(M=!1);const N=S&&E;M&&(!N||k)&&m.push(...A.map(j=>{const F={type:x};if(typeof j=="string"&&r&&!N&&e.manuallyAnimateOnMount&&e.parent){const{parent:U}=e,V=xh(U,j);if(U.enteringChildren&&V){const{delayChildren:$}=V.transition||{};F.delay=qce(U.enteringChildren,e,$)}}return{animation:j,options:F}}))}if(p.size){const v={};if(typeof u.initial!="boolean"){const x=xh(e,Array.isArray(u.initial)?u.initial[0]:u.initial);x&&x.transition&&(v.transition=x.transition)}p.forEach(x=>{const b=e.getBaseTarget(x),_=e.getValue(x);_&&(_.liveStyle=!0),v[x]=b??null}),m.push({animation:v})}let y=!!m.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(m):Promise.resolve()}function l(c,u){if(n[c].isActive===u)return Promise.resolve();e.variantChildren?.forEach(m=>m.animationState?.setActive(c,u)),n[c].isActive=u;const d=i(c);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:i,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=gG(),r=!0}}}function LFe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Kce(t,e):!1}function df(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gG(){return{animate:df(!0),whileInView:df(),whileHover:df(),whileTap:df(),whileDrag:df(),whileFocus:df(),exit:df()}}class Fd{constructor(t){this.isMounted=!1,this.node=t}update(){}}class DFe extends Fd{constructor(t){super(t),t.animationState||(t.animationState=OFe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();s5(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let FFe=0;class UFe extends Fd{constructor(){super(...arguments),this.id=FFe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const BFe={animation:{Feature:DFe},exit:{Feature:UFe}};function Dx(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function kb(e){return{point:{x:e.pageX,y:e.pageY}}}const VFe=e=>t=>bL(t)&&e(t,kb(t));function Uv(e,t,n,r){return Dx(e,t,VFe(n),r)}const Qce=1e-4,$Fe=1-Qce,WFe=1+Qce,Xce=.01,HFe=0-Xce,zFe=0+Xce;function Sa(e){return e.max-e.min}function GFe(e,t,n){return Math.abs(e-t)<=n}function yG(e,t,n,r=.5){e.origin=r,e.originPoint=wr(t.min,t.max,e.origin),e.scale=Sa(n)/Sa(t),e.translate=wr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=$Fe&&e.scale<=WFe||isNaN(e.scale))&&(e.scale=1),(e.translate>=HFe&&e.translate<=zFe||isNaN(e.translate))&&(e.translate=0)}function Bv(e,t,n,r){yG(e.x,t.x,n.x,r?r.originX:void 0),yG(e.y,t.y,n.y,r?r.originY:void 0)}function vG(e,t,n){e.min=n.min+t.min,e.max=e.min+Sa(t)}function qFe(e,t,n){vG(e.x,t.x,n.x),vG(e.y,t.y,n.y)}function xG(e,t,n){e.min=t.min-n.min,e.max=e.min+Sa(t)}function Vv(e,t,n){xG(e.x,t.x,n.x),xG(e.y,t.y,n.y)}function Qo(e){return[e("x"),e("y")]}const Zce=({current:e})=>e?e.ownerDocument.defaultView:null,bG=(e,t)=>Math.abs(e-t);function KFe(e,t){const n=bG(e.x,t.x),r=bG(e.y,t.y);return Math.sqrt(n**2+r**2)}class Jce{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=F4(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,g=KFe(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!h&&!g)return;const{point:y}=p,{timestamp:v}=As;this.history.push({...y,timestamp:v});const{onStart:x,onMove:b}=this.handlers;h||(x&&x(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,p)},this.handlePointerMove=(p,h)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=D4(h,this.transformPagePoint),sr.update(this.updatePoint,!0)},this.handlePointerUp=(p,h)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=F4(p.type==="pointercancel"?this.lastMoveEventInfo:D4(h,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,x),y&&y(p,x)},!bL(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=i,this.contextWindow=s||window;const l=kb(t),c=D4(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=As;this.history=[{...u,timestamp:d}];const{onSessionStart:m}=n;m&&m(t,F4(c,this.history)),this.removeListeners=Sb(Uv(this.contextWindow,"pointermove",this.handlePointerMove),Uv(this.contextWindow,"pointerup",this.handlePointerUp),Uv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ru(this.updatePoint)}}function D4(e,t){return t?{point:t(e.point)}:e}function _G(e,t){return{x:e.x-t.x,y:e.y-t.y}}function F4({point:e},t){return{point:e,delta:_G(e,eue(t)),offset:_G(e,YFe(t)),velocity:QFe(t,.1)}}function YFe(e){return e[0]}function eue(e){return e[e.length-1]}function QFe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=eue(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Oi(t)));)n--;if(!r)return{x:0,y:0};const a=Al(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function XFe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?wr(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?wr(n,e,r.max):Math.min(e,n)),e}function wG(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function ZFe(e,{top:t,left:n,bottom:r,right:s}){return{x:wG(e.x,n,s),y:wG(e.y,t,r)}}function CG(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function JFe(e,t){return{x:CG(e.x,t.x),y:CG(e.y,t.y)}}function eUe(e,t){let n=.5;const r=Sa(e),s=Sa(t);return s>r?n=Qh(t.min,t.max-r,e.min):r>s&&(n=Qh(e.min,e.max-s,t.min)),tu(0,1,n)}function tUe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const xR=.35;function nUe(e=xR){return e===!1?e=0:e===!0&&(e=xR),{x:SG(e,"left","right"),y:SG(e,"top","bottom")}}function SG(e,t,n){return{min:EG(e,t),max:EG(e,n)}}function EG(e,t){return typeof e=="number"?e:e[t]||0}const rUe=new WeakMap;class sUe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(kb(m).point)},i=(m,p)=>{const{drag:h,dragPropagation:g,onDragStart:y}=this.getProps();if(h&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=dDe(h),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qo(x=>{let b=this.getAxisMotionValue(x).get()||0;if(Il.test(b)){const{projection:_}=this.visualElement;if(_&&_.layout){const w=_.layout.layoutBox[x];w&&(b=Sa(w)*(parseFloat(b)/100))}}this.originPoint[x]=b}),y&&sr.postRender(()=>y(m,p)),yR(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},l=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p;const{dragPropagation:h,dragDirectionLock:g,onDirectionLock:y,onDrag:v}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:x}=p;if(g&&this.currentDirection===null){this.currentDirection=aUe(x),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",p.point,x),this.updateAxis("y",p.point,x),this.visualElement.render(),v&&v(m,p)},c=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p,this.stop(m,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Qo(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Jce(t,{onSessionStart:a,onStart:i,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:Zce(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:l}=this.getProps();l&&sr.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Tw(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(i=XFe(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&eh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=ZFe(r.layoutBox,t):this.constraints=!1,this.elastic=nUe(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Qo(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=tUe(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!eh(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=dFe(r,s.root,this.visualElement.getTransformPagePoint());let i=JFe(s.layout.layoutBox,a);if(n){const l=n(lFe(i));this.hasMutatedConstraints=!!l,l&&(i=Oce(l))}return i}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Qo(d=>{if(!Tw(d,n,this.currentDirection))return;let m=c&&c[d]||{};i&&(m={min:0,max:0});const p=s?200:1e6,h=s?40:1e7,g={type:"inertia",velocity:r?t[d]:0,bounceStiffness:p,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return yR(this.visualElement,t),r.start(AL(t,r,0,n,this.visualElement,!1))}stopAnimation(){Qo(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Qo(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Qo(n=>{const{drag:r}=this.getProps();if(!Tw(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:i,max:l}=s.layout.layoutBox[n];a.set(t[n]-wr(i,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!eh(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Qo(i=>{const l=this.getAxisMotionValue(i);if(l&&this.constraints!==!1){const c=l.get();s[i]=eUe({min:c,max:c},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Qo(i=>{if(!Tw(i,t,null))return;const l=this.getAxisMotionValue(i),{min:c,max:u}=this.constraints[i];l.set(wr(c,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;rUe.set(this.visualElement,this);const t=this.visualElement.current,n=Uv(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();eh(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),sr.read(r);const i=Dx(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Qo(d=>{const m=this.getAxisMotionValue(d);m&&(this.originPoint[d]+=c[d].translate,m.set(m.get()+c[d].translate))}),this.visualElement.render())});return()=>{i(),n(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=xR,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:l}}}function Tw(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function aUe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class oUe extends Fd{constructor(t){super(t),this.removeGroupControls=ii,this.removeListeners=ii,this.controls=new sUe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ii}unmount(){this.removeGroupControls(),this.removeListeners()}}const MG=e=>(t,n)=>{e&&sr.postRender(()=>e(t,n))};class iUe extends Fd{constructor(){super(...arguments),this.removePointerDownListener=ii}onPointerDown(t){this.session=new Jce(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Zce(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:MG(t),onStart:MG(n),onMove:r,onEnd:(a,i)=>{delete this.session,s&&sr.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=Uv(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const vS={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kG(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const v0={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Lt.test(e))e=parseFloat(e);else return e;const n=kG(e,t.target.x),r=kG(e,t.target.y);return`${n}% ${r}%`}},lUe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=bd.parse(e);if(s.length>5)return r;const a=bd.createTransformer(e),i=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;s[0+i]/=l,s[1+i]/=c;const u=wr(l,c,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};let U4=!1;class cUe extends f.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=t;LDe(uUe),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),U4&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),vS.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:i}=r;return i&&(i.isPresent=a,U4=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==a?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||sr.postRender(()=>{const l=i.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),xL.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;U4=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function tue(e){const[t,n]=bce(),r=f.useContext(jx);return o.jsx(cUe,{...e,layoutGroup:r,switchLayoutGroup:f.useContext(Rce),isPresent:t,safeToRemove:n})}const uUe={borderRadius:{...v0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:v0,borderTopRightRadius:v0,borderBottomLeftRadius:v0,borderBottomRightRadius:v0,boxShadow:lUe};function nue(e,t,n){const r=Yr(e)?e:fm(e);return r.start(AL("",r,t,n)),r.animation}const dUe=(e,t)=>e.depth-t.depth;class fUe{constructor(){this.children=[],this.isDirty=!1}add(t){J7(this.children,t),this.isDirty=!0}remove(t){Cb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(dUe),this.isDirty=!1,this.children.forEach(t)}}function mUe(e,t){const n=Qa.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(ru(r),e(a-t))};return sr.setup(r,!0),()=>ru(r)}const rue=["TopLeft","TopRight","BottomLeft","BottomRight"],pUe=rue.length,TG=e=>typeof e=="string"?parseFloat(e):e,NG=e=>typeof e=="number"||Lt.test(e);function hUe(e,t,n,r,s,a){s?(e.opacity=wr(0,n.opacity??1,gUe(r)),e.opacityExit=wr(t.opacity??1,0,yUe(r))):a&&(e.opacity=wr(t.opacity??1,n.opacity??1,r));for(let i=0;i<pUe;i++){const l=`border${rue[i]}Radius`;let c=jG(t,l),u=jG(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||NG(c)===NG(u)?(e[l]=Math.max(wr(TG(c),TG(u),r),0),(Il.test(u)||Il.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=wr(t.rotate||0,n.rotate||0,r))}function jG(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const gUe=sue(0,.5,Ole),yUe=sue(.5,.95,ii);function sue(e,t,n){return r=>r<e?0:r>t?1:n(Qh(e,t,r))}function AG(e,t){e.min=t.min,e.max=t.max}function Go(e,t){AG(e.x,t.x),AG(e.y,t.y)}function IG(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function RG(e,t,n,r,s){return e-=t,e=b2(e,1/n,r),s!==void 0&&(e=b2(e,1/s,r)),e}function vUe(e,t=0,n=1,r=.5,s,a=e,i=e){if(Il.test(t)&&(t=parseFloat(t),t=wr(i.min,i.max,t/100)-i.min),typeof t!="number")return;let l=wr(a.min,a.max,r);e===a&&(l-=t),e.min=RG(e.min,t,n,l,s),e.max=RG(e.max,t,n,l,s)}function PG(e,t,[n,r,s],a,i){vUe(e,t[n],t[r],t[s],t.scale,a,i)}const xUe=["x","scaleX","originX"],bUe=["y","scaleY","originY"];function OG(e,t,n,r){PG(e.x,t,xUe,n?n.x:void 0,r?r.x:void 0),PG(e.y,t,bUe,n?n.y:void 0,r?r.y:void 0)}function LG(e){return e.translate===0&&e.scale===1}function aue(e){return LG(e.x)&&LG(e.y)}function DG(e,t){return e.min===t.min&&e.max===t.max}function _Ue(e,t){return DG(e.x,t.x)&&DG(e.y,t.y)}function FG(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function oue(e,t){return FG(e.x,t.x)&&FG(e.y,t.y)}function UG(e){return Sa(e.x)/Sa(e.y)}function BG(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class wUe{constructor(){this.members=[]}add(t){J7(this.members,t),t.scheduleRender()}remove(t){if(Cb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function CUe(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=n?.z||0;if((s||a||i)&&(r=`translate3d(${s}px, ${a}px, ${i}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:m,rotateY:p,skewX:h,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),m&&(r+=`rotateX(${m}deg) `),p&&(r+=`rotateY(${p}deg) `),h&&(r+=`skewX(${h}deg) `),g&&(r+=`skewY(${g}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const B4=["","X","Y","Z"],SUe=1e3;let EUe=0;function V4(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function iue(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Gce(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",sr,!(s||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&iue(r)}function lue({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(i={},l=t?.()){this.id=EUe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(TUe),this.nodes.forEach(IUe),this.nodes.forEach(RUe),this.nodes.forEach(NUe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new fUe)}addEventListener(i,l){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new nL),this.eventHandlers.get(i).add(l)}notifyListeners(i,...l){const c=this.eventHandlers.get(i);c&&c.notify(...l)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=_L(i)&&!xce(i),this.instance=i;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,m=0;const p=()=>this.root.updateBlockedByResize=!1;sr.read(()=>{m=window.innerWidth}),e(i,()=>{const h=window.innerWidth;h!==m&&(m=h,this.root.updateBlockedByResize=!0,d&&d(),d=mUe(p,250),vS.hasAnimatedSinceResize&&(vS.hasAnimatedSinceResize=!1,this.nodes.forEach(WG)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:p,layout:h})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||FUe,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),x=!this.targetLayout||!oue(this.targetLayout,h),b=!m&&p;if(this.options.layoutRoot||this.resumeFrom||b||m&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...gL(g,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(d,b)}else m||WG(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=h})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ru(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PUe),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&iue(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const m=this.path[d];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(VG);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach($G);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(AUe),this.nodes.forEach(MUe),this.nodes.forEach(kUe)):this.nodes.forEach($G),this.clearAllSnapshots();const l=Qa.now();As.delta=tu(0,1e3/60,l-As.timestamp),As.timestamp=l,As.isProcessing=!0,j4.update.process(As),j4.preRender.process(As),j4.render.process(As),As.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xL.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(jUe),this.sharedNodes.forEach(OUe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,sr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){sr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Sa(this.snapshot.measuredBox.x)&&!Sa(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!aue(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&this.instance&&(l||Mf(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return i&&(c=this.removeTransform(c)),UUe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return Nr();const l=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(BUe))){const{scroll:u}=this.root;u&&(th(l.x,u.offset.x),th(l.y,u.offset.y))}return l}removeElementScroll(i){const l=Nr();if(Go(l,i),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:m}=u;u!==this.root&&d&&m.layoutScroll&&(d.wasRoot&&Go(l,i),th(l.x,d.offset.x),th(l.y,d.offset.y))}return l}applyTransform(i,l=!1){const c=Nr();Go(c,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&nh(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Mf(d.latestValues)&&nh(c,d.latestValues)}return Mf(this.latestValues)&&nh(c,this.latestValues),c}removeTransform(i){const l=Nr();Go(l,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Mf(u.latestValues))continue;pR(u.latestValues)&&u.updateSnapshot();const d=Nr(),m=u.measurePageBox();Go(d,m),OG(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Mf(this.latestValues)&&OG(l,this.latestValues),l}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==As.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=As.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nr(),this.relativeTargetOrigin=Nr(),Vv(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Go(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Nr(),this.targetWithTransforms=Nr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),qFe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Go(this.target,this.layout.layoutBox),Dce(this.target,this.targetDelta)):Go(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nr(),this.relativeTargetOrigin=Nr(),Vv(this.relativeTargetOrigin,this.target,p.target),Go(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||pR(this.parent.latestValues)||Lce(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const i=this.getLead(),l=!!this.resumingFrom||this!==i;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===As.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Go(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;uFe(this.layoutCorrected,this.treeScale,this.path,l),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=Nr());const{target:h}=i;if(!h){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(IG(this.prevProjectionDelta.x,this.projectionDelta.x),IG(this.prevProjectionDelta.y,this.projectionDelta.y)),Bv(this.projectionDelta,this.layoutCorrected,h,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!BG(this.projectionDelta.x,this.prevProjectionDelta.x)||!BG(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rh(),this.projectionDelta=rh(),this.projectionDeltaWithTransform=rh()}setAnimationOrigin(i,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},m=rh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=Nr(),h=c?c.source:void 0,g=this.layout?this.layout.source:void 0,y=h!==g,v=this.getStack(),x=!v||v.members.length<=1,b=!!(y&&!x&&this.options.crossfade===!0&&!this.path.some(DUe));this.animationProgress=0;let _;this.mixTargetDelta=w=>{const C=w/1e3;HG(m.x,i.x,C),HG(m.y,i.y,C),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Vv(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),LUe(this.relativeTarget,this.relativeTargetOrigin,p,C),_&&_Ue(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Nr()),Go(_,this.relativeTarget)),y&&(this.animationValues=d,hUe(d,u,this.latestValues,C,b,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ru(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=sr.update(()=>{vS.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=fm(0)),this.currentAnimation=nue(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),i.onUpdate&&i.onUpdate(l)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(SUe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=i;if(!(!l||!c||!u)){if(this!==i&&this.layout&&u&&cue(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Nr();const m=Sa(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+m;const p=Sa(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+p}Go(l,c),nh(l,d),Bv(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(i,l){this.sharedNodes.has(i)||this.sharedNodes.set(i,new wUe),this.sharedNodes.get(i).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let l=!1;const{latestValues:c}=i;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&V4("z",i,u,this.animationValues);for(let d=0;d<B4.length;d++)V4(`rotate${B4[d]}`,i,u,this.animationValues),V4(`skew${B4[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}applyProjectionStyles(i,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=yS(l?.pointerEvents)||"",i.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=yS(l?.pointerEvents)||""),this.hasProjected&&!Mf(this.latestValues)&&(i.transform=c?c({},""):"none",this.hasProjected=!1);return}i.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let m=CUe(this.projectionDeltaWithTransform,this.treeScale,d);c&&(m=c(d,m)),i.transform=m;const{x:p,y:h}=this.projectionDelta;i.transformOrigin=`${p.origin*100}% ${h.origin*100}% 0`,u.animationValues?i.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:i.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in Ox){if(d[g]===void 0)continue;const{correct:y,applyTo:v,isCSSVariable:x}=Ox[g],b=m==="none"?d[g]:y(d[g],u);if(v){const _=v.length;for(let w=0;w<_;w++)i[v[w]]=b}else x?this.options.visualElement.renderState.vars[g]=b:i[g]=b}this.options.layoutId&&(i.pointerEvents=u===this?yS(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(VG),this.root.sharedNodes.clear()}}}function MUe(e){e.updateLayout()}function kUe(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?Qo(d=>{const m=a?t.measuredBox[d]:t.layoutBox[d],p=Sa(m);m.min=n[d].min,m.max=m.min+p}):cue(s,t.layoutBox,n)&&Qo(d=>{const m=a?t.measuredBox[d]:t.layoutBox[d],p=Sa(n[d]);m.max=m.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+p)});const i=rh();Bv(i,n,t.layoutBox);const l=rh();a?Bv(l,e.applyTransform(r,!0),t.measuredBox):Bv(l,n,t.layoutBox);const c=!aue(i);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:p}=d;if(m&&p){const h=Nr();Vv(h,t.layoutBox,m.layoutBox);const g=Nr();Vv(g,n,p.layoutBox),oue(h,g)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=h,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:i,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function TUe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function NUe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function jUe(e){e.clearSnapshot()}function VG(e){e.clearMeasurements()}function $G(e){e.isLayoutDirty=!1}function AUe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function WG(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function IUe(e){e.resolveTargetDelta()}function RUe(e){e.calcProjection()}function PUe(e){e.resetSkewAndRotation()}function OUe(e){e.removeLeadSnapshot()}function HG(e,t,n){e.translate=wr(t.translate,0,n),e.scale=wr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function zG(e,t,n,r){e.min=wr(t.min,n.min,r),e.max=wr(t.max,n.max,r)}function LUe(e,t,n,r){zG(e.x,t.x,n.x,r),zG(e.y,t.y,n.y,r)}function DUe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const FUe={duration:.45,ease:[.4,0,.1,1]},GG=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),qG=GG("applewebkit/")&&!GG("chrome/")?Math.round:ii;function KG(e){e.min=qG(e.min),e.max=qG(e.max)}function UUe(e){KG(e.x),KG(e.y)}function cue(e,t,n){return e==="position"||e==="preserve-aspect"&&!GFe(UG(t),UG(n),.2)}function BUe(e){return e!==e.root&&e.scroll?.wasRoot}const VUe=lue({attachResizeListener:(e,t)=>Dx(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$4={current:void 0},uue=lue({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!$4.current){const e=new VUe({});e.mount(window),e.setOptions({layoutScroll:!0}),$4.current=e}return $4.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),$Ue={pan:{Feature:iUe},drag:{Feature:oUe,ProjectionNode:uue,MeasureLayout:tue}};function YG(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&sr.postRender(()=>a(t,kb(t)))}class WUe extends Fd{mount(){const{current:t}=this.node;t&&(this.unmount=fDe(t,(n,r)=>(YG(this.node,r,"Start"),s=>YG(this.node,s,"End"))))}unmount(){}}class HUe extends Fd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Sb(Dx(this.node.current,"focus",()=>this.onFocus()),Dx(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function QG(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&sr.postRender(()=>a(t,kb(t)))}class zUe extends Fd{mount(){const{current:t}=this.node;t&&(this.unmount=gDe(t,(n,r)=>(QG(this.node,r,"Start"),(s,{success:a})=>QG(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const bR=new WeakMap,W4=new WeakMap,GUe=e=>{const t=bR.get(e.target);t&&t(e)},qUe=e=>{e.forEach(GUe)};function KUe({root:e,...t}){const n=e||document;W4.has(n)||W4.set(n,{});const r=W4.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(qUe,{root:e,...t})),r[s]}function YUe(e,t,n){const r=KUe(t);return bR.set(e,n),r.observe(e),()=>{bR.delete(e),r.unobserve(e)}}const QUe={some:0,all:1};class XUe extends Fd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=t,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:QUe[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:m}=this.node.getProps(),p=u?d:m;p&&p(c)};return YUe(this.node.current,i,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(ZUe(t,n))&&this.startObserver()}unmount(){}}function ZUe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const JUe={inView:{Feature:XUe},tap:{Feature:zUe},focus:{Feature:HUe},hover:{Feature:WUe}},eBe={layout:{ProjectionNode:uue,MeasureLayout:tue}},tBe={...BFe,...JUe,...$Ue,...eBe},ge=iFe(tBe,hFe);function $v(e){const t=wb(()=>fm(e)),{isStatic:n}=f.useContext(Mb);if(n){const[,r]=f.useState(e);f.useEffect(()=>t.on("change",r),[])}return t}function due(e,t){const n=$v(t()),r=()=>n.set(t());return r(),e5(()=>{const s=()=>sr.preRender(r,!1,!0),a=e.map(i=>i.on("change",s));return()=>{a.forEach(i=>i()),ru(r)}}),n}function nBe(e){Fv.current=[],e();const t=due(Fv.current,e);return Fv.current=void 0,t}function kf(e,t,n,r){if(typeof e=="function")return nBe(e);const s=typeof t=="function"?t:yDe(t,n,r);return Array.isArray(e)?XG(e,s):XG([e],([a])=>s(a))}function XG(e,t){const n=wb(()=>[]);return due(e,()=>{n.length=0;const r=e.length;for(let s=0;s<r;s++)n[s]=e[s].get();return t(n)})}function hp(e,t={}){const{isStatic:n}=f.useContext(Mb),r=()=>Yr(e)?e.get():e;if(n)return kf(r);const s=$v(r());return f.useInsertionEffect(()=>vDe(s,e,t),[s,JSON.stringify(t)]),s}function Tb(){!jL.current&&Uce();const[e]=f.useState(_2.current);return e}function RL(e){return typeof e=="object"&&!Array.isArray(e)}function fue(e,t,n,r){return typeof e=="string"&&RL(t)?vL(e,n,r):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function rBe(e,t,n){return e*(t+1)}function ZG(e,t,n,r){return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:t.startsWith("<")?Math.max(0,n+parseFloat(t.slice(1))):r.get(t)??e}function sBe(e,t,n){for(let r=0;r<e.length;r++){const s=e[r];s.at>t&&s.at<n&&(Cb(e,s),r--)}}function aBe(e,t,n,r,s,a){sBe(e,s,a);for(let i=0;i<t.length;i++)e.push({value:t[i],at:wr(s,a,r[i]),easing:Ule(n,i)})}function oBe(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function iBe(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const lBe="easeInOut";function cBe(e,{defaultTransition:t={},...n}={},r,s){const a=t.duration||.3,i=new Map,l=new Map,c={},u=new Map;let d=0,m=0,p=0;for(let h=0;h<e.length;h++){const g=e[h];if(typeof g=="string"){u.set(g,m);continue}else if(!Array.isArray(g)){u.set(g.name,ZG(m,g.at,d,u));continue}let[y,v,x={}]=g;x.at!==void 0&&(m=ZG(m,x.at,d,u));let b=0;const _=(w,C,S,E=0,M=0)=>{const k=uBe(w),{delay:A=0,times:R=tce(k),type:O="keyframes",repeat:L,repeatType:P,repeatDelay:N=0,...T}=C;let{ease:j=t.ease||"easeOut",duration:F}=C;const U=typeof A=="function"?A(E,M):A,V=k.length,$=hL(O)?O:s?.[O||"keyframes"];if(V<=2&&$){let W=100;if(V===2&&mBe(k)){const J=k[1]-k[0];W=Math.abs(J)}const X={...T};F!==void 0&&(X.duration=Oi(F));const G=Xle(X,W,$);j=G.ease,F=G.duration}F??(F=a);const z=m+U;R.length===1&&R[0]===0&&(R[1]=1);const Q=R.length-k.length;if(Q>0&&ece(R,Q),k.length===1&&k.unshift(null),L){F=rBe(F,L);const W=[...k],X=[...R];j=Array.isArray(j)?[...j]:[j];const G=[...j];for(let J=0;J<L;J++){k.push(...W);for(let q=0;q<W.length;q++)R.push(X[q]+(J+1)),j.push(q===0?"linear":Ule(G,q-1))}oBe(R,L)}const Y=z+F;aBe(S,k,j,R,z,Y),b=Math.max(U+F,b),p=Math.max(Y,p)};if(Yr(y)){const w=JG(y,l);_(v,x,eq("default",w))}else{const w=fue(y,v,r,c),C=w.length;for(let S=0;S<C;S++){v=v,x=x;const E=w[S],M=JG(E,l);for(const k in v)_(v[k],dBe(x,k),eq(k,M),S,C)}}d=m,m+=b}return l.forEach((h,g)=>{for(const y in h){const v=h[y];v.sort(iBe);const x=[],b=[],_=[];for(let C=0;C<v.length;C++){const{at:S,value:E,easing:M}=v[C];x.push(E),b.push(Qh(0,p,S)),_.push(M||"easeOut")}b[0]!==0&&(b.unshift(0),x.unshift(x[0]),_.unshift(lBe)),b[b.length-1]!==1&&(b.push(1),x.push(null)),i.has(g)||i.set(g,{keyframes:{},transition:{}});const w=i.get(g);w.keyframes[y]=x,w.transition[y]={...t,duration:p,ease:_,times:b,...n}}}),i}function JG(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function eq(e,t){return t[e]||(t[e]=[]),t[e]}function uBe(e){return Array.isArray(e)?e:[e]}function dBe(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const fBe=e=>typeof e=="number",mBe=e=>e.every(fBe);function pBe(e,t){return e in t}class hBe extends Bce{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,n){if(pBe(n,t)){const r=t[n];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(t,n){delete n.output[t]}measureInstanceViewportBox(){return Nr()}build(t,n){Object.assign(t.output,n)}renderInstance(t,{output:n}){Object.assign(t,n)}sortInstanceNodePosition(){return 0}}function gBe(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=_L(e)&&!xce(e)?new zce(t):new Wce(t);n.mount(e),Lx.set(e,n)}function yBe(e){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new hBe(t);n.mount(e),Lx.set(e,n)}function vBe(e,t){return Yr(e)||typeof e=="number"||typeof e=="string"&&!RL(t)}function mue(e,t,n,r){const s=[];if(vBe(e,t))s.push(nue(e,RL(t)&&t.default||t,n&&(n.default||n)));else{const a=fue(e,t,r),i=a.length;for(let l=0;l<i;l++){const c=a[l],u=c instanceof Element?gBe:yBe;Lx.has(c)||u(c);const d=Lx.get(c),m={...n};"delay"in m&&typeof m.delay=="function"&&(m.delay=m.delay(l,i)),s.push(...IL(d,{...t,transition:m},{}))}}return s}function xBe(e,t,n){const r=[];return cBe(e,t,n,{spring:Rx}).forEach(({keyframes:a,transition:i},l)=>{r.push(...mue(l,a,i))}),r}function bBe(e){return Array.isArray(e)&&e.some(Array.isArray)}function _Be(e){function t(n,r,s){let a=[];bBe(n)?a=xBe(n,r,e):a=mue(n,r,s,e);const i=new QLe(a);return e&&(e.animations.push(i),i.finished.then(()=>{Cb(e.animations,i)})),i}return t}const tq=_Be(),wBe={some:0,all:1};function CBe(e,t,{root:n,margin:r,amount:s="some"}={}){const a=vL(e),i=new WeakMap,l=u=>{u.forEach(d=>{const m=i.get(d.target);if(d.isIntersecting!==!!m)if(d.isIntersecting){const p=t(d.target,d);typeof p=="function"?i.set(d.target,p):c.unobserve(d.target)}else typeof m=="function"&&(m(d),i.delete(d.target))})},c=new IntersectionObserver(l,{root:n,rootMargin:r,threshold:typeof s=="number"?s:wBe[s]});return a.forEach(u=>c.observe(u)),()=>c.disconnect()}function SBe(e,{root:t,margin:n,amount:r,once:s=!1,initial:a=!1}={}){const[i,l]=f.useState(a);return f.useEffect(()=>{if(!e.current||s&&i)return;const c=()=>(l(!0),s?void 0:()=>l(!1)),u={root:t&&t.current||void 0,margin:n,amount:r};return CBe(e.current,c,u)},[t,e,n,s,r]),i}const EBe=()=>{const{base:e}=gt(),t=jt();return t===(e||"/")||t?.startsWith("/search")},MBe={micro:"font-sans text-2xs font-normal",tiny:"font-sans text-xs font-medium",tinyRegular:"font-sans text-xs font-normal",tinyBold:"font-sans text-xs font-bold",extraSmall:"font-sans text-[13px]",small:"font-sans text-sm",smallBold:"font-sans text-sm font-medium leading-[1.125rem]",smallExtraBold:"font-sans text-sm font-extrabold leading-[1.125rem]",base:"font-sans text-base",baseSemi:"font-sans text-base font-medium",tinyMono:"font-mono text-2xs md:text-xs",smallMono:"font-mono text-sm",smallCaps:"text-2xs md:text-xs tracking-wide font-mono leading-none uppercase","section-title":"font-display text-lg font-medium","page-title":"font-display font-medium text-2xl",display:"font-display text-4xl lg:text-[2.8rem] !leading-[1.2]","entry-title":"font-display text-pretty text-xl lg:text-3xl font-medium","entry-title-100":"font-display text-pretty text-xl lg:text-3xl font-medium","entry-title-200":"font-display text-lg lg:text-xl font-medium","entry-title-300":"font-sans text-pretty font-medium"},kBe={default:"text-foreground",defaultInverted:"text-inverse",light:"text-quiet ",ultraLight:"text-quietest",red:"text-caution",yellow:"text-yellow-600 dark:text-yellow-400",super:"text-super",white:"text-white",positive:"text-positive",negative:"text-negative",max:"text-max"},TBe=(e,t,n)=>t||(e==="page-title"?"h1":e==="entry-title"?"h2":n?"span":"div"),NBe=(e,t,n,r,s)=>{const a=MBe[e],i=kBe[t];return B(s,a,i,n?"text-center block":"",r?"hover:text-super":"","selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super")},D=I.memo(({children:e,variant:t="base",color:n="default",textCenter:r,className:s,inline:a,superHover:i,testId:l,as:c,ref:u,...d})=>{const m=f.useMemo(()=>TBe(t,c,a),[t,c,a]),p=f.useMemo(()=>NBe(t,n,r,i,s),[s,n,r,t,i]);return I.createElement(m,{className:p,"data-testid":l,ref:u,...d},e)});D.displayName="TextBlock";const Kt={tiny:"tiny",small:"small",regular:"regular",large:"large",xl:"xl",none:"none"};var Oe;(function(e){e.RETRY_BUTTON="retryButton",e.PRO_PAGE="proPage",e.SHARE_DROPDOWN="shareDropdown",e.PRICING_TABLE="pricingTable",e.TRY_COPILOT="tryCopilot",e.TRY_RESEARCH="tryResearch",e.TRY_LABS="tryLabs",e.PRO_HOVER_CARD_BUTTON="proHoverCardButton",e.PRO_REASONING_SELECTOR="proReasoningSelector",e.LIBRARY_PAGE="libraryPage",e.SPACES_PAGE="spacesPage",e.SPACES_LANDING="spacesLanding",e.SPACES_TEMPLATES="spacesTemplates",e.DISCOVER_TOPICS="discoverTopics",e.COLLECTIONS="collections",e.SPACES="spaces",e.THREAD_SOCIAL="threadSocial",e.MOBILE_SIGNUP="mobileSignup",e.RELATED_QUERIES="relatedQueries",e.FILE_UPLOAD="fileUpload",e.SPACES_FILE_UPLOAD="spacesFileUpload",e.TRY_PRO="tryPro",e.HOMEPAGE_FREE_PLAN_UPSELL="homepageFreePlanUpsell",e.LOGIN_BUTTON="loginButton",e.SIGNUP_BUTTON="signupButton",e.LOGIN_BUTTON_HEADER="loginButtonHeader",e.SIGNUP_BUTTON_HEADER="signupButtonHeader",e.FLOATING_SIGNUP="floatingSignup",e.SIDEBAR_LOGIN_AD="sidebarLoginAd",e.SIDEBAR_PRO_UPSELL="sidebarProUpsell",e.SIDE_TEXT_PRO_UPSELL="sideTextProUpsell",e.VISITOR_GATE="visitorGate",e.SHARED_THREAD_LOGIN_GATE="sharedThreadLoginGate",e.SHARED_THREAD_INSTALL_GATE="sharedThreadInstallGate",e.REQUEST_ACCESS_LOGIN_GATE="requestAccessLoginGate",e.GENERATE_IMAGE="generateImage",e.PPLX_API_PAGE="pplxApiPage",e.FILES_PAGE="filesPage",e.PURCHASES_PAGE="purchasesPage",e.GOOGLE_ONETAP_HOME="oneTapHome",e.GOOGLE_ONETAP_THREAD="oneTapThread",e.GOOGLE_ONETAP_PAGE="oneTapPage",e.GOOGLE_ONETAP_DISCOVER="oneTapDiscover",e.GOOGLE_ONETAP_UNKNOWN="oneTap",e.ONBOARDING="onboarding",e.EMAIL_ASSISTANT_ONBOARDING="emailAssistantOnboarding",e.NEXTAUTH_SIGNIN_PAGE="nextauthSignInPage",e.DISCOUNT_CODE_BANNER="discountCodeBanner",e.PARTNER_CODE="partnerCode",e.ARTICLE_NEW="articleNew",e.THREAD_TO_ARTICLE="threadToArticle",e.ORG_CREATE="orgCreate",e.ORG_PANEL="orgPanel",e.LOSS_AVERSION_MODAL="lossAversionModal",e.NEW_THREAD_BUTTON="newThreadButton",e.NEW_THREAD_SHORTCUT="newThreadShortcut",e.DISCOVER_BUTTON="discoverButton",e.THREAD_BOOKMARK_BUTTON="threadBookmarkButton",e.PAGE_BOOKMARK_BUTTON="pageBookmarkButton",e.DISCOVER_FEED_BOOKMARK_BUTTON="discoverFeedBookmarkButton",e.BACK_TO_SCHOOL="backToSchool",e.WELCOME_BACK="welcomeBack",e.LEFT_HAND_NAV="leftHandNav",e.SETTINGS="settings",e.PRO_FEATURE_LIMIT_BANNER="proFeatureLimitBanner",e.BUY_WITH_PRO_BUTTON="buyWithProButton",e.FINANCE_WATCHLIST="financeWatchlist",e.DOWNLOAD_COMET="downloadComet",e.GROW_COMET="growComet",e.GROW_COMET_STUDENTS="growCometStudents",e.GROW_COMET_STUDENTS_COUNTRY="growCometStudentsCountry",e.PARTNER_COMET="partnerComet",e.COMET_ONBOARDING="cometOnboarding",e.PROMO_REDEMPTION="promoRedemption",e.CONNECTORS_PAGE="connectorsPage",e.MARKETING_LANDING_PAGE="marketingLandingPage",e.FINANCE_TRANSCRIPT="financeTranscript",e.FINANCE_RESEARCH="financeResearch",e.LJJ_LANDING_PAGE="ljjLandingPage",e.STUDENT_REFERRAL_LANDING_PAGE="studentReferralLandingPage",e.VOICE_TO_VOICE_BUTTON="voiceToVoiceButton",e.PRO_PERKS="proPerks",e.REFERRAL_PAGE="referralPage",e.HOTEL_BOOKING_PAGE="hotelBookingPage",e.SOURCES_VIEW_MORE="sourcesViewMore",e.SPORTS_WATCHLIST="sportsWatchlist",e.IMAGE_GENERATION_IN_THREAD="imageGenerationInThread",e.AUTO_UPGRADE_TO_PRO="autoUpgradeToPro",e.UNSPECIFIED_GENERALIZED_UPSELL="unspecifiedGeneralizedUpsell",e.MILESTONE_ACHIEVED="milestoneAchieved",e.PRO_PERKS_PARTNER_PAGE="proPerksPartnerPage",e.STUDENT_LANDING_PAGE="studentLandingPage",e.TASKS_PAGE="tasksPage",e.MAX_URL_PAYWALL="maxUrlPaywall",e.MODEL_SELECTOR="modelSelector",e.DISCOVER_FEED_LIKE_BUTTON="discoverFeedLikeButton",e.DISCOVER_FEED_DISLIKE_BUTTON="discoverFeedDislikeButton",e.DISCOVER_FEED_TASK_WIDGET="discoverFeedTaskWidget",e.SIDEBAR_BOTTOM_POPOVER="sidebarBottomPopover",e.HOME_SIDEBAR="homeSidebar",e.WHATSAPP_LINK="whatsappLink",e.UPGRADE_MODAL="upgradeModal",e.MAX_PAGE="maxPage",e.COMET_INVITE="cometInvite",e.LOGIN_FOR_COMET_AGENT_QUERIES_IN_THREAD="loginForCometAgentQueriesInThread",e.COMET_AGENT_QUERIES_RATE_LIMITED_IN_THREAD="cometAgentQueriesRateLimitedInThread",e.PRO_UPGRADE_IN_SIDE_HOMEPAGE="proUpgradeInSideHomepage",e.MISSING_OUT_ON_PRO_IN_THREAD="missingOutOnProInThread",e.VIDEO_GENERATION_IN_THREAD="videoGenerationInThread",e.STUDENT_VERIFICATION_UPSELL="studentVerificationUpsell",e.STUDENT_VERIFICATION_PAGE="studentVerificationPage",e.TRY_ASSISTANT_BUTTON="tryAssistantButton",e.COMET_NTP="cometNTP",e.EMAIL_ASSISTANT_GATE="emailAssistantGate",e.ENTERPRISE_BILLING_BANNER="enterpriseBillingBanner",e.ENTERPRISE_MAX_UPSELL="enterpriseMaxUpsell"})(Oe||(Oe={}));var bt;(function(e){e[e.OWNER_ONLY=0]="OWNER_ONLY",e[e.PRIVATE_READ=1]="PRIVATE_READ",e[e.PUBLIC_READ=2]="PUBLIC_READ",e[e.PUBLIC_PUBLISHED=3]="PUBLIC_PUBLISHED",e[e.ORG_READ=4]="ORG_READ",e[e.COLLECTION_READ=5]="COLLECTION_READ"})(bt||(bt={}));const jBe={[Kt.tiny]:"xs",[Kt.small]:"sm",[Kt.regular]:"base",[Kt.large]:"lg",[Kt.xl]:"xl",[Kt.none]:"base"},Wv=I.memo(({icon:e,showClicked:t=!1,buttonSize:n,iconClassName:r})=>o.jsx(ce,{icon:t?Sr:e,size:jBe[n]||"base",className:r}));Wv.displayName="BaseIcon";const $r=I.memo(({size:e=16,className:t,...n})=>o.jsx("div",{className:B("p-two aspect-square shrink-0 animate-spin rounded-full",t),style:{width:e,backgroundImage:"conic-gradient(from 270deg, transparent 0%, currentColor 99%)",mask:`radial-gradient(transparent 0%, transparent ${e/2-2}px, black ${e/2-2}px, black) center center`},...n}));$r.displayName="Spinner";function Ft(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e?.(s),n===!1||!s.defaultPrevented)return t?.(s)}}function nq(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function pue(...e){return t=>{let n=!1;const r=e.map(s=>{const a=nq(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():nq(e[s],null)}}}}function Vn(...e){return f.useCallback(pue(...e),e)}function ABe(e,t){const n=f.createContext(t),r=a=>{const{children:i,...l}=a,c=f.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:i})};r.displayName=e+"Provider";function s(a){const i=f.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,s]}function co(e,t=[]){let n=[];function r(a,i){const l=f.createContext(i),c=n.length;n=[...n,i];const u=m=>{const{scope:p,children:h,...g}=m,y=p?.[e]?.[c]||l,v=f.useMemo(()=>g,Object.values(g));return o.jsx(y.Provider,{value:v,children:h})};u.displayName=a+"Provider";function d(m,p){const h=p?.[e]?.[c]||l,g=f.useContext(h);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=n.map(i=>f.createContext(i));return function(l){const c=l?.[e]||a;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,IBe(s,...t)]}function IBe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=r.reduce((l,{useScope:c,scopeName:u})=>{const m=c(a)[`__scope${u}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function Fx(e){const t=RBe(e),n=f.forwardRef((r,s)=>{const{children:a,...i}=r,l=f.Children.toArray(a),c=l.find(OBe);if(c){const u=c.props.children,d=l.map(m=>m===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:m);return o.jsx(t,{...i,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return o.jsx(t,{...i,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}function RBe(e){const t=f.forwardRef((n,r)=>{const{children:s,...a}=n;if(f.isValidElement(s)){const i=DBe(s),l=LBe(a,s.props);return s.type!==f.Fragment&&(l.ref=r?pue(r,i):i),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var hue=Symbol("radix.slottable");function PBe(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=hue,t}function OBe(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===hue}function LBe(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function DBe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var FBe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],dn=FBe.reduce((e,t)=>{const n=Fx(`Primitive.${t}`),r=f.forwardRef((s,a)=>{const{asChild:i,...l}=s,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function UBe(e,t){e&&Us.flushSync(()=>e.dispatchEvent(t))}function Ka(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>t.current?.(...n),[])}function BBe(e,t=globalThis?.document){const n=Ka(e);f.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var VBe="DismissableLayer",_R="dismissableLayer.update",$Be="dismissableLayer.pointerDownOutside",WBe="dismissableLayer.focusOutside",rq,gue=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Nb=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=e,u=f.useContext(gue),[d,m]=f.useState(null),p=d?.ownerDocument??globalThis?.document,[,h]=f.useState({}),g=Vn(t,E=>m(E)),y=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(v),b=d?y.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,w=b>=x,C=GBe(E=>{const M=E.target,k=[...u.branches].some(A=>A.contains(M));!w||k||(s?.(E),i?.(E),E.defaultPrevented||l?.())},p),S=qBe(E=>{const M=E.target;[...u.branches].some(A=>A.contains(M))||(a?.(E),i?.(E),E.defaultPrevented||l?.())},p);return BBe(E=>{b===u.layers.size-1&&(r?.(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},p),f.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(rq=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),sq(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=rq)}},[d,p,n,u]),f.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),sq())},[d,u]),f.useEffect(()=>{const E=()=>h({});return document.addEventListener(_R,E),()=>document.removeEventListener(_R,E)},[]),o.jsx(dn.div,{...c,ref:g,style:{pointerEvents:_?w?"auto":"none":void 0,...e.style},onFocusCapture:Ft(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Ft(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Ft(e.onPointerDownCapture,C.onPointerDownCapture)})});Nb.displayName=VBe;var HBe="DismissableLayerBranch",zBe=f.forwardRef((e,t)=>{const n=f.useContext(gue),r=f.useRef(null),s=Vn(t,r);return f.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(dn.div,{...e,ref:s})});zBe.displayName=HBe;function GBe(e,t=globalThis?.document){const n=Ka(e),r=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){yue($Be,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function qBe(e,t=globalThis?.document){const n=Ka(e),r=f.useRef(!1);return f.useEffect(()=>{const s=a=>{a.target&&!r.current&&yue(WBe,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function sq(){const e=new CustomEvent(_R);document.dispatchEvent(e)}function yue(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?UBe(s,a):s.dispatchEvent(a)}var su=globalThis?.document?f.useLayoutEffect:()=>{},KBe=E7[" useId ".trim().toString()]||(()=>{}),YBe=0;function bh(e){const[t,n]=f.useState(KBe());return su(()=>{n(r=>r??String(YBe++))},[e]),t?`radix-${t}`:""}const QBe=["top","right","bottom","left"],Bi=Math.min,ta=Math.max,w2=Math.round,Nw=Math.floor,Rl=e=>({x:e,y:e}),XBe={left:"right",right:"left",bottom:"top",top:"bottom"},ZBe={start:"end",end:"start"};function wR(e,t,n){return ta(e,Bi(t,n))}function Wl(e,t){return typeof e=="function"?e(t):e}function Vi(e){return e.split("-")[0]}function ay(e){return e.split("-")[1]}function PL(e){return e==="x"?"y":"x"}function OL(e){return e==="y"?"height":"width"}function au(e){return["top","bottom"].includes(Vi(e))?"y":"x"}function LL(e){return PL(au(e))}function JBe(e,t,n){n===void 0&&(n=!1);const r=ay(e),s=LL(e),a=OL(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=C2(i)),[i,C2(i)]}function eVe(e){const t=C2(e);return[CR(e),t,CR(t)]}function CR(e){return e.replace(/start|end/g,t=>ZBe[t])}function tVe(e,t,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?a:i;default:return[]}}function nVe(e,t,n,r){const s=ay(e);let a=tVe(Vi(e),n==="start",r);return s&&(a=a.map(i=>i+"-"+s),t&&(a=a.concat(a.map(CR)))),a}function C2(e){return e.replace(/left|right|bottom|top/g,t=>XBe[t])}function rVe(e){return{top:0,right:0,bottom:0,left:0,...e}}function DL(e){return typeof e!="number"?rVe(e):{top:e,right:e,bottom:e,left:e}}function Zh(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function aq(e,t,n){let{reference:r,floating:s}=e;const a=au(t),i=LL(t),l=OL(i),c=Vi(t),u=a==="y",d=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let h;switch(c){case"top":h={x:d,y:r.y-s.height};break;case"bottom":h={x:d,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:m};break;case"left":h={x:r.x-s.width,y:m};break;default:h={x:r.x,y:r.y}}switch(ay(t)){case"start":h[i]-=p*(n&&u?-1:1);break;case"end":h[i]+=p*(n&&u?-1:1);break}return h}const sVe=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:i}=n,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:m}=aq(u,r,c),p=r,h={},g=0;for(let y=0;y<l.length;y++){const{name:v,fn:x}=l[y],{x:b,y:_,data:w,reset:C}=await x({x:d,y:m,initialPlacement:r,placement:p,strategy:s,middlewareData:h,rects:u,platform:i,elements:{reference:e,floating:t}});d=b??d,m=_??m,h={...h,[v]:{...h[v],...w}},C&&g<=50&&(g++,typeof C=="object"&&(C.placement&&(p=C.placement),C.rects&&(u=C.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):C.rects),{x:d,y:m}=aq(u,p,c)),y=-1)}return{x:d,y:m,placement:p,strategy:s,middlewareData:h}};async function Ux(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:p=!1,padding:h=0}=Wl(t,e),g=DL(h),v=l[p?m==="floating"?"reference":"floating":m],x=Zh(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(v)))==null||n?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),b=m==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),w=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},C=Zh(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:_,strategy:c}):b);return{top:(x.top-C.top+g.top)/w.y,bottom:(C.bottom-x.bottom+g.bottom)/w.y,left:(x.left-C.left+g.left)/w.x,right:(C.right-x.right+g.right)/w.x}}const aVe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=Wl(e,t)||{};if(u==null)return{};const m=DL(d),p={x:n,y:r},h=LL(s),g=OL(h),y=await i.getDimensions(u),v=h==="y",x=v?"top":"left",b=v?"bottom":"right",_=v?"clientHeight":"clientWidth",w=a.reference[g]+a.reference[h]-p[h]-a.floating[g],C=p[h]-a.reference[h],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let E=S?S[_]:0;(!E||!await(i.isElement==null?void 0:i.isElement(S)))&&(E=l.floating[_]||a.floating[g]);const M=w/2-C/2,k=E/2-y[g]/2-1,A=Bi(m[x],k),R=Bi(m[b],k),O=A,L=E-y[g]-R,P=E/2-y[g]/2+M,N=wR(O,P,L),T=!c.arrow&&ay(s)!=null&&P!==N&&a.reference[g]/2-(P<O?A:R)-y[g]/2<0,j=T?P<O?P-O:P-L:0;return{[h]:p[h]+j,data:{[h]:N,centerOffset:P-N-j,...T&&{alignmentOffset:j}},reset:T}}}),oVe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...v}=Wl(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const x=Vi(s),b=au(l),_=Vi(l)===l,w=await(c.isRTL==null?void 0:c.isRTL(u.floating)),C=p||(_||!y?[C2(l)]:eVe(l)),S=g!=="none";!p&&S&&C.push(...nVe(l,y,g,w));const E=[l,...C],M=await Ux(t,v),k=[];let A=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&k.push(M[x]),m){const P=JBe(s,i,w);k.push(M[P[0]],M[P[1]])}if(A=[...A,{placement:s,overflows:k}],!k.every(P=>P<=0)){var R,O;const P=(((R=a.flip)==null?void 0:R.index)||0)+1,N=E[P];if(N)return{data:{index:P,overflows:A},reset:{placement:N}};let T=(O=A.filter(j=>j.overflows[0]<=0).sort((j,F)=>j.overflows[1]-F.overflows[1])[0])==null?void 0:O.placement;if(!T)switch(h){case"bestFit":{var L;const j=(L=A.filter(F=>{if(S){const U=au(F.placement);return U===b||U==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(U=>U>0).reduce((U,V)=>U+V,0)]).sort((F,U)=>F[1]-U[1])[0])==null?void 0:L[0];j&&(T=j);break}case"initialPlacement":T=l;break}if(s!==T)return{reset:{placement:T}}}return{}}}};function oq(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function iq(e){return QBe.some(t=>e[t]>=0)}const iVe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Wl(e,t);switch(r){case"referenceHidden":{const a=await Ux(t,{...s,elementContext:"reference"}),i=oq(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:iq(i)}}}case"escaped":{const a=await Ux(t,{...s,altBoundary:!0}),i=oq(a,n.floating);return{data:{escapedOffsets:i,escaped:iq(i)}}}default:return{}}}}};function vue(e){const t=Bi(...e.map(a=>a.left)),n=Bi(...e.map(a=>a.top)),r=ta(...e.map(a=>a.right)),s=ta(...e.map(a=>a.bottom));return{x:t,y:n,width:r-t,height:s-n}}function lVe(e){const t=e.slice().sort((s,a)=>s.y-a.y),n=[];let r=null;for(let s=0;s<t.length;s++){const a=t[s];!r||a.y-r.y>r.height/2?n.push([a]):n[n.length-1].push(a),r=a}return n.map(s=>Zh(vue(s)))}const cVe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:a,strategy:i}=t,{padding:l=2,x:c,y:u}=Wl(e,t),d=Array.from(await(a.getClientRects==null?void 0:a.getClientRects(r.reference))||[]),m=lVe(d),p=Zh(vue(d)),h=DL(l);function g(){if(m.length===2&&m[0].left>m[1].right&&c!=null&&u!=null)return m.find(v=>c>v.left-h.left&&c<v.right+h.right&&u>v.top-h.top&&u<v.bottom+h.bottom)||p;if(m.length>=2){if(au(n)==="y"){const A=m[0],R=m[m.length-1],O=Vi(n)==="top",L=A.top,P=R.bottom,N=O?A.left:R.left,T=O?A.right:R.right,j=T-N,F=P-L;return{top:L,bottom:P,left:N,right:T,width:j,height:F,x:N,y:L}}const v=Vi(n)==="left",x=ta(...m.map(A=>A.right)),b=Bi(...m.map(A=>A.left)),_=m.filter(A=>v?A.left===b:A.right===x),w=_[0].top,C=_[_.length-1].bottom,S=b,E=x,M=E-S,k=C-w;return{top:w,bottom:C,left:S,right:E,width:M,height:k,x:S,y:w}}return p}const y=await a.getElementRects({reference:{getBoundingClientRect:g},floating:r.floating,strategy:i});return s.reference.x!==y.reference.x||s.reference.y!==y.reference.y||s.reference.width!==y.reference.width||s.reference.height!==y.reference.height?{reset:{rects:y}}:{}}}};async function uVe(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=Vi(n),l=ay(n),c=au(n)==="y",u=["left","top"].includes(i)?-1:1,d=a&&c?-1:1,m=Wl(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:g}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof g=="number"&&(h=l==="end"?g*-1:g),c?{x:h*d,y:p*u}:{x:p*u,y:h*d}}const dVe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:i,middlewareData:l}=t,c=await uVe(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:i}}}}},fVe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:v=>{let{x,y:b}=v;return{x,y:b}}},...c}=Wl(e,t),u={x:n,y:r},d=await Ux(t,c),m=au(Vi(s)),p=PL(m);let h=u[p],g=u[m];if(a){const v=p==="y"?"top":"left",x=p==="y"?"bottom":"right",b=h+d[v],_=h-d[x];h=wR(b,h,_)}if(i){const v=m==="y"?"top":"left",x=m==="y"?"bottom":"right",b=g+d[v],_=g-d[x];g=wR(b,g,_)}const y=l.fn({...t,[p]:h,[m]:g});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:a,[m]:i}}}}}},mVe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Wl(e,t),d={x:n,y:r},m=au(s),p=PL(m);let h=d[p],g=d[m];const y=Wl(l,t),v=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const _=p==="y"?"height":"width",w=a.reference[p]-a.floating[_]+v.mainAxis,C=a.reference[p]+a.reference[_]-v.mainAxis;h<w?h=w:h>C&&(h=C)}if(u){var x,b;const _=p==="y"?"width":"height",w=["top","left"].includes(Vi(s)),C=a.reference[m]-a.floating[_]+(w&&((x=i.offset)==null?void 0:x[m])||0)+(w?0:v.crossAxis),S=a.reference[m]+a.reference[_]+(w?0:((b=i.offset)==null?void 0:b[m])||0)-(w?v.crossAxis:0);g<C?g=C:g>S&&(g=S)}return{[p]:h,[m]:g}}}},pVe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:i,elements:l}=t,{apply:c=()=>{},...u}=Wl(e,t),d=await Ux(t,u),m=Vi(s),p=ay(s),h=au(s)==="y",{width:g,height:y}=a.floating;let v,x;m==="top"||m==="bottom"?(v=m,x=p===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(x=m,v=p==="end"?"top":"bottom");const b=y-d.top-d.bottom,_=g-d.left-d.right,w=Bi(y-d[v],b),C=Bi(g-d[x],_),S=!t.middlewareData.shift;let E=w,M=C;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(M=_),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=b),S&&!p){const A=ta(d.left,0),R=ta(d.right,0),O=ta(d.top,0),L=ta(d.bottom,0);h?M=g-2*(A!==0||R!==0?A+R:ta(d.left,d.right)):E=y-2*(O!==0||L!==0?O+L:ta(d.top,d.bottom))}await c({...t,availableWidth:M,availableHeight:E});const k=await i.getDimensions(l.floating);return g!==k.width||y!==k.height?{reset:{rects:!0}}:{}}}};function o5(){return typeof window<"u"}function oy(e){return xue(e)?(e.nodeName||"").toLowerCase():"#document"}function Ao(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function sc(e){var t;return(t=(xue(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function xue(e){return o5()?e instanceof Node||e instanceof Ao(e).Node:!1}function Ea(e){return o5()?e instanceof Element||e instanceof Ao(e).Element:!1}function Hl(e){return o5()?e instanceof HTMLElement||e instanceof Ao(e).HTMLElement:!1}function lq(e){return!o5()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ao(e).ShadowRoot}function jb(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=di(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function hVe(e){return["table","td","th"].includes(oy(e))}function i5(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function FL(e){const t=UL(),n=Ea(e)?di(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function gVe(e){let t=_d(e);for(;Hl(t)&&!Jh(t);){if(FL(t))return t;if(i5(t))return null;t=_d(t)}return null}function UL(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Jh(e){return["html","body","#document"].includes(oy(e))}function di(e){return Ao(e).getComputedStyle(e)}function l5(e){return Ea(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function _d(e){if(oy(e)==="html")return e;const t=e.assignedSlot||e.parentNode||lq(e)&&e.host||sc(e);return lq(t)?t.host:t}function bue(e){const t=_d(e);return Jh(t)?e.ownerDocument?e.ownerDocument.body:e.body:Hl(t)&&jb(t)?t:bue(t)}function Bx(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=bue(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),i=Ao(s);if(a){const l=SR(i);return t.concat(i,i.visualViewport||[],jb(s)?s:[],l&&n?Bx(l):[])}return t.concat(s,Bx(s,[],n))}function SR(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function _ue(e){const t=di(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Hl(e),a=s?e.offsetWidth:n,i=s?e.offsetHeight:r,l=w2(n)!==a||w2(r)!==i;return l&&(n=a,r=i),{width:n,height:r,$:l}}function BL(e){return Ea(e)?e:e.contextElement}function _h(e){const t=BL(e);if(!Hl(t))return Rl(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=_ue(t);let i=(a?w2(n.width):n.width)/r,l=(a?w2(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const yVe=Rl(0);function wue(e){const t=Ao(e);return!UL()||!t.visualViewport?yVe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function vVe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ao(e)?!1:t}function mm(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=BL(e);let i=Rl(1);t&&(r?Ea(r)&&(i=_h(r)):i=_h(e));const l=vVe(a,n,r)?wue(a):Rl(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,d=s.width/i.x,m=s.height/i.y;if(a){const p=Ao(a),h=r&&Ea(r)?Ao(r):r;let g=p,y=SR(g);for(;y&&r&&h!==g;){const v=_h(y),x=y.getBoundingClientRect(),b=di(y),_=x.left+(y.clientLeft+parseFloat(b.paddingLeft))*v.x,w=x.top+(y.clientTop+parseFloat(b.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,m*=v.y,c+=_,u+=w,g=Ao(y),y=SR(g)}}return Zh({width:d,height:m,x:c,y:u})}function VL(e,t){const n=l5(e).scrollLeft;return t?t.left+n:mm(sc(e)).left+n}function Cue(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:VL(e,r)),a=r.top+t.scrollTop;return{x:s,y:a}}function xVe(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",i=sc(r),l=t?i5(t.floating):!1;if(r===i||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=Rl(1);const d=Rl(0),m=Hl(r);if((m||!m&&!a)&&((oy(r)!=="body"||jb(i))&&(c=l5(r)),Hl(r))){const h=mm(r);u=_h(r),d.x=h.x+r.clientLeft,d.y=h.y+r.clientTop}const p=i&&!m&&!a?Cue(i,c,!0):Rl(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-c.scrollTop*u.y+d.y+p.y}}function bVe(e){return Array.from(e.getClientRects())}function _Ve(e){const t=sc(e),n=l5(e),r=e.ownerDocument.body,s=ta(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=ta(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+VL(e);const l=-n.scrollTop;return di(r).direction==="rtl"&&(i+=ta(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:i,y:l}}function wVe(e,t){const n=Ao(e),r=sc(e),s=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,l=0,c=0;if(s){a=s.width,i=s.height;const u=UL();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:i,x:l,y:c}}function CVe(e,t){const n=mm(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=Hl(e)?_h(e):Rl(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:i,height:l,x:c,y:u}}function cq(e,t,n){let r;if(t==="viewport")r=wVe(e,n);else if(t==="document")r=_Ve(sc(e));else if(Ea(t))r=CVe(t,n);else{const s=wue(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Zh(r)}function Sue(e,t){const n=_d(e);return n===t||!Ea(n)||Jh(n)?!1:di(n).position==="fixed"||Sue(n,t)}function SVe(e,t){const n=t.get(e);if(n)return n;let r=Bx(e,[],!1).filter(l=>Ea(l)&&oy(l)!=="body"),s=null;const a=di(e).position==="fixed";let i=a?_d(e):e;for(;Ea(i)&&!Jh(i);){const l=di(i),c=FL(i);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||jb(i)&&!c&&Sue(e,i))?r=r.filter(d=>d!==i):s=l,i=_d(i)}return t.set(e,r),r}function EVe(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?i5(t)?[]:SVe(t,this._c):[].concat(n),r],l=i[0],c=i.reduce((u,d)=>{const m=cq(t,d,s);return u.top=ta(m.top,u.top),u.right=Bi(m.right,u.right),u.bottom=Bi(m.bottom,u.bottom),u.left=ta(m.left,u.left),u},cq(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function MVe(e){const{width:t,height:n}=_ue(e);return{width:t,height:n}}function kVe(e,t,n){const r=Hl(t),s=sc(t),a=n==="fixed",i=mm(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Rl(0);if(r||!r&&!a)if((oy(t)!=="body"||jb(s))&&(l=l5(t)),r){const p=mm(t,!0,a,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&(c.x=VL(s));const u=s&&!r&&!a?Cue(s,l):Rl(0),d=i.left+l.scrollLeft-c.x-u.x,m=i.top+l.scrollTop-c.y-u.y;return{x:d,y:m,width:i.width,height:i.height}}function H4(e){return di(e).position==="static"}function uq(e,t){if(!Hl(e)||di(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return sc(e)===n&&(n=n.ownerDocument.body),n}function Eue(e,t){const n=Ao(e);if(i5(e))return n;if(!Hl(e)){let s=_d(e);for(;s&&!Jh(s);){if(Ea(s)&&!H4(s))return s;s=_d(s)}return n}let r=uq(e,t);for(;r&&hVe(r)&&H4(r);)r=uq(r,t);return r&&Jh(r)&&H4(r)&&!FL(r)?n:r||gVe(e)||n}const TVe=async function(e){const t=this.getOffsetParent||Eue,n=this.getDimensions,r=await n(e.floating);return{reference:kVe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function NVe(e){return di(e).direction==="rtl"}const jVe={convertOffsetParentRelativeRectToViewportRelativeRect:xVe,getDocumentElement:sc,getClippingRect:EVe,getOffsetParent:Eue,getElementRects:TVe,getClientRects:bVe,getDimensions:MVe,getScale:_h,isElement:Ea,isRTL:NVe};function Mue(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function AVe(e,t){let n=null,r;const s=sc(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:d,top:m,width:p,height:h}=u;if(l||t(),!p||!h)return;const g=Nw(m),y=Nw(s.clientWidth-(d+p)),v=Nw(s.clientHeight-(m+h)),x=Nw(d),_={rootMargin:-g+"px "+-y+"px "+-v+"px "+-x+"px",threshold:ta(0,Bi(1,c))||1};let w=!0;function C(S){const E=S[0].intersectionRatio;if(E!==c){if(!w)return i();E?i(!1,E):r=setTimeout(()=>{i(!1,1e-7)},1e3)}E===1&&!Mue(u,e.getBoundingClientRect())&&i(),w=!1}try{n=new IntersectionObserver(C,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,_)}n.observe(e)}return i(!0),a}function kue(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=BL(e),d=s||a?[...u?Bx(u):[],...Bx(t)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),a&&x.addEventListener("resize",n)});const m=u&&l?AVe(u,n):null;let p=-1,h=null;i&&(h=new ResizeObserver(x=>{let[b]=x;b&&b.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),u&&!c&&h.observe(u),h.observe(t));let g,y=c?mm(e):null;c&&v();function v(){const x=mm(e);y&&!Mue(y,x)&&n(),y=x,g=requestAnimationFrame(v)}return n(),()=>{var x;d.forEach(b=>{s&&b.removeEventListener("scroll",n),a&&b.removeEventListener("resize",n)}),m?.(),(x=h)==null||x.disconnect(),h=null,c&&cancelAnimationFrame(g)}}const IVe=dVe,RVe=fVe,PVe=oVe,OVe=pVe,LVe=iVe,dq=aVe,jXt=cVe,DVe=mVe,FVe=(e,t,n)=>{const r=new Map,s={platform:jVe,...n},a={...s.platform,_c:r};return sVe(e,t,{...s,platform:a})};var xS=typeof document<"u"?f.useLayoutEffect:f.useEffect;function S2(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!S2(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!S2(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Tue(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function fq(e,t){const n=Tue(e);return Math.round(t*n)/n}function z4(e){const t=f.useRef(e);return xS(()=>{t.current=e}),t}function Nue(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,m]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=f.useState(r);S2(p,r)||h(r);const[g,y]=f.useState(null),[v,x]=f.useState(null),b=f.useCallback(F=>{F!==S.current&&(S.current=F,y(F))},[]),_=f.useCallback(F=>{F!==E.current&&(E.current=F,x(F))},[]),w=a||g,C=i||v,S=f.useRef(null),E=f.useRef(null),M=f.useRef(d),k=c!=null,A=z4(c),R=z4(s),O=z4(u),L=f.useCallback(()=>{if(!S.current||!E.current)return;const F={placement:t,strategy:n,middleware:p};R.current&&(F.platform=R.current),FVe(S.current,E.current,F).then(U=>{const V={...U,isPositioned:O.current!==!1};P.current&&!S2(M.current,V)&&(M.current=V,Us.flushSync(()=>{m(V)}))})},[p,t,n,R,O]);xS(()=>{u===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,m(F=>({...F,isPositioned:!1})))},[u]);const P=f.useRef(!1);xS(()=>(P.current=!0,()=>{P.current=!1}),[]),xS(()=>{if(w&&(S.current=w),C&&(E.current=C),w&&C){if(A.current)return A.current(w,C,L);L()}},[w,C,L,A,k]);const N=f.useMemo(()=>({reference:S,floating:E,setReference:b,setFloating:_}),[b,_]),T=f.useMemo(()=>({reference:w,floating:C}),[w,C]),j=f.useMemo(()=>{const F={position:n,left:0,top:0};if(!T.floating)return F;const U=fq(T.floating,d.x),V=fq(T.floating,d.y);return l?{...F,transform:"translate("+U+"px, "+V+"px)",...Tue(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:V}},[n,l,T.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:L,refs:N,elements:T,floatingStyles:j}),[d,L,N,T,j])}const UVe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?dq({element:r.current,padding:s}).fn(n):{}:r?dq({element:r,padding:s}).fn(n):{}}}},$L=(e,t)=>({...IVe(e),options:[e,t]}),jue=(e,t)=>({...RVe(e),options:[e,t]}),Aue=(e,t)=>({...DVe(e),options:[e,t]}),Iue=(e,t)=>({...PVe(e),options:[e,t]}),Rue=(e,t)=>({...OVe(e),options:[e,t]}),BVe=(e,t)=>({...LVe(e),options:[e,t]}),Pue=(e,t)=>({...UVe(e),options:[e,t]});var VVe="Arrow",Oue=f.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return o.jsx(dn.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});Oue.displayName=VVe;var $Ve=Oue;function c5(e){const[t,n]=f.useState(void 0);return su(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var WL="Popper",[Lue,iy]=co(WL),[WVe,Due]=Lue(WL),Fue=e=>{const{__scopePopper:t,children:n}=e,[r,s]=f.useState(null);return o.jsx(WVe,{scope:t,anchor:r,onAnchorChange:s,children:n})};Fue.displayName=WL;var Uue="PopperAnchor",Bue=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=Due(Uue,n),i=f.useRef(null),l=Vn(t,i),c=f.useRef(null);return f.useEffect(()=>{const u=c.current;c.current=r?.current||i.current,u!==c.current&&a.onAnchorChange(c.current)}),r?null:o.jsx(dn.div,{...s,ref:l})});Bue.displayName=Uue;var HL="PopperContent",[HVe,zVe]=Lue(HL),Vue=f.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:h="optimized",onPlaced:g,...y}=e,v=Due(HL,n),[x,b]=f.useState(null),_=Vn(t,G=>b(G)),[w,C]=f.useState(null),S=c5(w),E=S?.width??0,M=S?.height??0,k=r+(a!=="center"?"-"+a:""),A=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},R=Array.isArray(u)?u:[u],O=R.length>0,L={padding:A,boundary:R.filter(qVe),altBoundary:O},{refs:P,floatingStyles:N,placement:T,isPositioned:j,middlewareData:F}=Nue({strategy:"fixed",placement:k,whileElementsMounted:(...G)=>kue(...G,{animationFrame:h==="always"}),elements:{reference:v.anchor},middleware:[$L({mainAxis:s+M,alignmentAxis:i}),c&&jue({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Aue():void 0,...L}),c&&Iue({...L}),Rue({...L,apply:({elements:G,rects:J,availableWidth:q,availableHeight:te})=>{const{width:re,height:ae}=J.reference,fe=G.floating.style;fe.setProperty("--radix-popper-available-width",`${q}px`),fe.setProperty("--radix-popper-available-height",`${te}px`),fe.setProperty("--radix-popper-anchor-width",`${re}px`),fe.setProperty("--radix-popper-anchor-height",`${ae}px`)}}),w&&Pue({element:w,padding:l}),KVe({arrowWidth:E,arrowHeight:M}),p&&BVe({strategy:"referenceHidden",...L})]}),[U,V]=Hue(T),$=Ka(g);su(()=>{j&&$?.()},[j,$]);const z=F.arrow?.x,Q=F.arrow?.y,Y=F.arrow?.centerOffset!==0,[W,X]=f.useState();return su(()=>{x&&X(window.getComputedStyle(x).zIndex)},[x]),o.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...N,transform:j?N.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[F.transformOrigin?.x,F.transformOrigin?.y].join(" "),...F.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(HVe,{scope:n,placedSide:U,onArrowChange:C,arrowX:z,arrowY:Q,shouldHideArrow:Y,children:o.jsx(dn.div,{"data-side":U,"data-align":V,...y,ref:_,style:{...y.style,animation:j?void 0:"none"}})})})});Vue.displayName=HL;var $ue="PopperArrow",GVe={top:"bottom",right:"left",bottom:"top",left:"right"},Wue=f.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,a=zVe($ue,r),i=GVe[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx($Ve,{...s,ref:n,style:{...s.style,display:"block"}})})});Wue.displayName=$ue;function qVe(e){return e!==null}var KVe=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:s}=t,i=s.arrow?.centerOffset!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,d]=Hue(n),m={start:"0%",center:"50%",end:"100%"}[d],p=(s.arrow?.x??0)+l/2,h=(s.arrow?.y??0)+c/2;let g="",y="";return u==="bottom"?(g=i?m:`${p}px`,y=`${-c}px`):u==="top"?(g=i?m:`${p}px`,y=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,y=i?m:`${h}px`):u==="left"&&(g=`${r.floating.width+c}px`,y=i?m:`${h}px`),{data:{x:g,y}}}});function Hue(e){const[t,n="center"]=e.split("-");return[t,n]}var zL=Fue,u5=Bue,GL=Vue,qL=Wue,YVe="Portal",Ab=f.forwardRef((e,t)=>{const{container:n,...r}=e,[s,a]=f.useState(!1);su(()=>a(!0),[]);const i=n||s&&globalThis?.document?.body;return i?oie.createPortal(o.jsx(dn.div,{...r,ref:t}),i):null});Ab.displayName=YVe;function QVe(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var da=e=>{const{present:t,children:n}=e,r=XVe(t),s=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),a=Vn(r.ref,ZVe(s));return typeof n=="function"||r.isPresent?f.cloneElement(s,{ref:a}):null};da.displayName="Presence";function XVe(e){const[t,n]=f.useState(),r=f.useRef(null),s=f.useRef(e),a=f.useRef("none"),i=e?"mounted":"unmounted",[l,c]=QVe(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=jw(r.current);a.current=l==="mounted"?u:"none"},[l]),su(()=>{const u=r.current,d=s.current;if(d!==e){const p=a.current,h=jw(u);e?c("MOUNT"):h==="none"||u?.display==="none"?c("UNMOUNT"):c(d&&p!==h?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),su(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,m=h=>{const y=jw(r.current).includes(CSS.escape(h.animationName));if(h.target===t&&y&&(c("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},p=h=>{h.target===t&&(a.current=jw(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function jw(e){return e?.animationName||"none"}function ZVe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var JVe=E7[" useInsertionEffect ".trim().toString()]||su;function Ji({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,a,i]=e$e({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const d=f.useRef(e!==void 0);f.useEffect(()=>{const m=d.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=f.useCallback(d=>{if(l){const m=t$e(d)?d(e):d;m!==e&&i.current?.(m)}else a(d)},[l,e,a,i]);return[c,u]}function e$e({defaultProp:e,onChange:t}){const[n,r]=f.useState(e),s=f.useRef(n),a=f.useRef(t);return JVe(()=>{a.current=t},[t]),f.useEffect(()=>{s.current!==n&&(a.current?.(n),s.current=n)},[n,s]),[n,r,a]}function t$e(e){return typeof e=="function"}var n$e=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),r$e="VisuallyHidden",Ib=f.forwardRef((e,t)=>o.jsx(dn.span,{...e,ref:t,style:{...n$e,...e.style}}));Ib.displayName=r$e;var KL=Ib,[d5,AXt]=co("Tooltip",[iy]),f5=iy(),zue="TooltipProvider",s$e=700,ER="tooltip.open",[a$e,YL]=d5(zue),QL=e=>{const{__scopeTooltip:t,delayDuration:n=s$e,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,i=f.useRef(!0),l=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(a$e,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:f.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};QL.displayName=zue;var Vx="Tooltip",[o$e,Rb]=d5(Vx),Gue=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:a,disableHoverableContent:i,delayDuration:l}=e,c=YL(Vx,e.__scopeTooltip),u=f5(t),[d,m]=f.useState(null),p=bh(),h=f.useRef(0),g=i??c.disableHoverableContent,y=l??c.delayDuration,v=f.useRef(!1),[x,b]=Ji({prop:r,defaultProp:s??!1,onChange:E=>{E?(c.onOpen(),document.dispatchEvent(new CustomEvent(ER))):c.onClose(),a?.(E)},caller:Vx}),_=f.useMemo(()=>x?v.current?"delayed-open":"instant-open":"closed",[x]),w=f.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v.current=!1,b(!0)},[b]),C=f.useCallback(()=>{window.clearTimeout(h.current),h.current=0,b(!1)},[b]),S=f.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{v.current=!0,b(!0),h.current=0},y)},[y,b]);return f.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),o.jsx(zL,{...u,children:o.jsx(o$e,{scope:t,contentId:p,open:x,stateAttribute:_,trigger:d,onTriggerChange:m,onTriggerEnter:f.useCallback(()=>{c.isOpenDelayedRef.current?S():w()},[c.isOpenDelayedRef,S,w]),onTriggerLeave:f.useCallback(()=>{g?C():(window.clearTimeout(h.current),h.current=0)},[C,g]),onOpen:w,onClose:C,disableHoverableContent:g,children:n})})};Gue.displayName=Vx;var MR="TooltipTrigger",XL=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Rb(MR,n),a=YL(MR,n),i=f5(n),l=f.useRef(null),c=Vn(t,l,s.onTriggerChange),u=f.useRef(!1),d=f.useRef(!1),m=f.useCallback(()=>u.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),o.jsx(u5,{asChild:!0,...i,children:o.jsx(dn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Ft(e.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ft(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Ft(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Ft(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:Ft(e.onBlur,s.onClose),onClick:Ft(e.onClick,s.onClose)})})});XL.displayName=MR;var ZL="TooltipPortal",[i$e,l$e]=d5(ZL,{forceMount:void 0}),JL=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:s}=e,a=Rb(ZL,t);return o.jsx(i$e,{scope:t,forceMount:n,children:o.jsx(da,{present:n||a.open,children:o.jsx(Ab,{asChild:!0,container:s,children:r})})})};JL.displayName=ZL;var eg="TooltipContent",eD=f.forwardRef((e,t)=>{const n=l$e(eg,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,i=Rb(eg,e.__scopeTooltip);return o.jsx(da,{present:r||i.open,children:i.disableHoverableContent?o.jsx(que,{side:s,...a,ref:t}):o.jsx(c$e,{side:s,...a,ref:t})})}),c$e=f.forwardRef((e,t)=>{const n=Rb(eg,e.__scopeTooltip),r=YL(eg,e.__scopeTooltip),s=f.useRef(null),a=Vn(t,s),[i,l]=f.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:m}=r,p=f.useCallback(()=>{l(null),m(!1)},[m]),h=f.useCallback((g,y)=>{const v=g.currentTarget,x={x:g.clientX,y:g.clientY},b=m$e(x,v.getBoundingClientRect()),_=p$e(x,b),w=h$e(y.getBoundingClientRect()),C=y$e([..._,...w]);l(C),m(!0)},[m]);return f.useEffect(()=>()=>p(),[p]),f.useEffect(()=>{if(c&&d){const g=v=>h(v,d),y=v=>h(v,c);return c.addEventListener("pointerleave",g),d.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",y)}}},[c,d,h,p]),f.useEffect(()=>{if(i){const g=y=>{const v=y.target,x={x:y.clientX,y:y.clientY},b=c?.contains(v)||d?.contains(v),_=!g$e(x,i);b?p():_&&(p(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,d,i,u,p]),o.jsx(que,{...e,ref:a})}),[u$e,d$e]=d5(Vx,{isInside:!1}),f$e=PBe("TooltipContent"),que=f.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:i,...l}=e,c=Rb(eg,n),u=f5(n),{onClose:d}=c;return f.useEffect(()=>(document.addEventListener(ER,d),()=>document.removeEventListener(ER,d)),[d]),f.useEffect(()=>{if(c.trigger){const m=p=>{p.target?.contains(c.trigger)&&d()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,d]),o.jsx(Nb,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:m=>m.preventDefault(),onDismiss:d,children:o.jsxs(GL,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(f$e,{children:r}),o.jsx(u$e,{scope:n,isInside:!0,children:o.jsx(KL,{id:c.contentId,role:"tooltip",children:s||r})})]})})});eD.displayName=eg;var Kue="TooltipArrow",E2=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=f5(n);return d$e(Kue,n).isInside?null:o.jsx(qL,{...s,...r,ref:t})});E2.displayName=Kue;function m$e(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function p$e(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function h$e(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function g$e(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],u=l.x,d=l.y,m=c.x,p=c.y;d>r!=p>r&&n<(m-u)*(r-d)/(p-d)+u&&(s=!s)}return s}function y$e(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),v$e(t)}function v$e(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var x$e=QL,Yue=Gue,b$e=XL,_$e=JL,w$e=eD,C$e=E2;const Que=new Proxy(Object.freeze([]),{set(){throw new Error("Cannot modify default array")}}),ue=Que,Xue=new Proxy(Object.freeze({}),{set(){throw new Error("Cannot modify default object")}}),Zue=I.memo(({className:e,textClassName:t,text:n,shortcut:r=ue,...s})=>o.jsxs("div",{className:B("gap-x-sm bg-dark dark:border-subtler flex max-w-[280px] items-center rounded-md px-2 py-1.5 shadow-sm dark:border",e),...s,children:[typeof n=="string"?o.jsx(D,{variant:"tiny",color:"white",className:t,children:n}):n,r.length>0&&o.jsx("div",{className:"gap-xs flex",children:r.map(a=>o.jsx(D,{variant:"smallCaps",className:"border-subtlest bg-subtle px-xs py-two min-w-6 rounded border text-center shadow-sm",children:o.jsx("span",{className:"text-light",children:a})},a))})]}));Zue.displayName="TooltipBody";const bn=I.memo(({tooltipText:e,tooltipLayout:t="top",children:n,keyboardShortcut:r,showTooltip:s=!0,className:a="",asChild:i=!1,testId:l,offset:c=8,closeOnClick:u=!0,bodyClassName:d,bodyTextClassName:m,arrowClassName:p,open:h,onClickOutsideTooltip:g,onOpenChange:y,delayDuration:v,childrenClassName:x})=>s?o.jsxs(Yue,{open:h,onOpenChange:y,delayDuration:v,children:[o.jsx(_$e,{children:o.jsxs(w$e,{side:t,sideOffset:c,className:B(t==="bottom"&&"data-[state=closed]:animate-slideUpAndFadeOut data-[state=delayed-open]:animate-slideDownAndFadeIn",t==="top"&&"data-[state=closed]:animate-slideDownAndFadeOut data-[state=delayed-open]:animate-slideUpAndFadeIn",t==="left"&&"data-[state=closed]:animate-slideRightAndFadeOut data-[state=delayed-open]:animate-slideLeftAndFadeIn",t==="right"&&"data-[state=closed]:animate-slideLeftAndFadeOut data-[state=delayed-open]:animate-slideRightAndFadeIn",a),onPointerDownOutside:u?g:_=>{_.preventDefault()},children:[o.jsx(Zue,{text:e,shortcut:r,"data-test-id":l,className:d,textClassName:m}),p&&o.jsx(C$e,{width:12,height:6,className:B("overflow-hidden translate-y-[-2px] [clip-path:inset(1px_1px_0px_1px)] fill-[oklch(var(--dark-background-base-color))] dark:stroke-[1.5px] dark:stroke-subtler",p)})]})}),o.jsx(b$e,{asChild:i,className:x,onClick:u?g:_=>{_.preventDefault()},children:n})]}):o.jsx(o.Fragment,{children:n}));bn.displayName="TooltipWrapper";const S$e=2e3,E$e=1e3,mq={[Kt.tiny]:{height:"h-6",text:"text-xs",padding:"px-2",iconWrapperSize:"size-3.5",baselineShift:"-mb-px"},[Kt.small]:{height:"h-8",text:"text-sm",padding:"px-2.5",iconWrapperSize:"size-4",baselineShift:"-mb-px"},[Kt.regular]:{height:"h-10",text:"text-base",padding:"px-3",iconWrapperSize:"size-5",baselineShift:"mb-[-2px]"},[Kt.large]:{height:"h-14",text:"text-lg",padding:"px-5",iconWrapperSize:"size-7",baselineShift:"mb-[-3px]"}},Jue=e=>mq[e]||mq[Kt.regular],pq=({children:e,buttonSize:t=Kt.regular})=>o.jsx("div",{className:B("flex shrink-0 items-center justify-center",Jue(t).iconWrapperSize),children:e}),tD=f.memo(e=>{const{text:t,textClassName:n="",size:r=Kt.regular,disabled:s=!1,fullWidth:a,fullWidthMobile:i,layout:l="center",type:c="button",noWrap:u=!0,onClick:d=kn,onMouseDown:m,href:p,target:h,extraCSS:g,icon:y,iconClassName:v,pill:x=!1,noRounded:b=!1,toolTip:_,keyboardShortcut:w,tooltipLayout:C="top",tooltipProps:S,badge:E,chevron:M,isLoading:k,loadingVariant:A="spin",leadingComponent:R,trailingComponent:O,maxWidth:L,chevronIcon:P=Dn,clickFeedback:N=!1,debounce:T=!1,testId:j,ariaLabel:F,variant:U,autoFocus:V,noPadding:$=!1,ref:z,...Q}=e,[Y,W]=f.useState(!1),[X,G]=f.useState(!1),[J,q]=f.useState(s),te=f.useMemo(()=>Jue(r),[r]);f.useEffect(()=>{q(T&&X||s)},[T,X,s]);const re=Ae=>{(!T||!X)&&(G(!0),setTimeout(()=>G(!1),E$e),d(Ae)),N&&(W(!0),setTimeout(()=>W(!1),S$e))},ae=!!t,fe=f.useMemo(()=>B(g,"font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium",{"justify-center text-center items-center":l==="center","justify-start":l==="left","rounded-none":b,"rounded-lg":!x&&!b,"rounded-full":x&&!b,"cursor-default opacity-50":J,"cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center":!J,"whitespace-nowrap":u,"break-words":!u,"flex w-full":a,"inline-flex":!a&&!i,"flex w-full md:inline-flex md:w-auto":i,[te.text]:!0,[te.height]:!0,[te.padding]:ae,[x?"aspect-square":"aspect-[9/8]"]:!ae&&!M&&!E&&!(y&&R)}),[E,te,M,J,g,a,i,ae,y,l,R,b,u,x]),de=f.useMemo(()=>B("flex items-center min-w-0 gap-two",{"flex-col":l==="stacked","justify-center":l==="center","justify-left":l==="left","justify-between":l==="split","w-full":a,"gap-sm":l==="stacked"}),[a,l]),ve=f.useMemo(()=>l==="stacked"||r===Kt.regular&&!ae||r===Kt.large&&ae?16:14,[l,r,ae]),_e=o.jsxs("div",{className:de,style:{maxWidth:L},children:[R&&o.jsx("div",{children:R}),k&&o.jsx(pq,{buttonSize:r,children:A==="spin"?o.jsx($r,{size:ve}):A==="pulse"?o.jsx("div",{className:B("relative flex items-center justify-center",U==="primary"?"text-inverse":"text-super"),children:o.jsxs("div",{className:"relative scale-[0.8]",children:[o.jsx(Wv,{icon:VI,buttonSize:r}),o.jsx(Wv,{icon:VI,buttonSize:r,iconClassName:"duration-1200 absolute inset-0 animate-ping"})]})}):null}),!k&&y&&o.jsx(pq,{buttonSize:r,children:o.jsx(Wv,{icon:y,showClicked:Y,buttonSize:r,iconClassName:v})}),t&&o.jsx("div",{className:B("relative truncate text-center",{"px-1":!$,"leading-loose":l!=="stacked","leading-none":l==="stacked"},te.baselineShift,n),children:t}),E&&o.jsxs("span",{children:["  ",E]}),M&&o.jsx(ce,{size:"xs",icon:P,className:"shrink-0 opacity-50"}),O]});let Se;y&&!t&&_&&(Se=_);const be=f.useMemo(()=>({WebkitTapHighlightColor:"transparent"}),[]);let me;return p!==void 0?me=o.jsx(Ge,{"data-testid":j,role:"button","aria-label":F??Se,href:p,className:fe,target:h,onClick:d,onMouseDown:m,style:be,...Q,ref:z,children:_e}):me=o.jsx("button",{"data-testid":j,"aria-label":F??Se,type:c,disabled:J,onClick:re,onMouseDown:m,className:fe,...Q,ref:z,children:_e}),w||_?o.jsx(bn,{tooltipText:_??"",keyboardShortcut:w,tooltipLayout:C,...S,asChild:!0,children:me}):me});tD.displayName="ButtonBase";const Te=f.memo(({variant:e="common",noPadding:t,noXPadding:n,extraCSS:r,...s})=>{const a=f.useMemo(()=>B("focus-visible:bg-subtle",{"!p-0 !h-auto hover:!bg-transparent":t},{"!px-0 hover:!bg-transparent":n},{super:"hover:bg-subtle text-super dark:hover:bg-subtle",primary:"hover:bg-subtle text-foreground dark:hover:bg-subtle",common:"hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle",positive:"text-quiet  hover:bg-subtle hover:text-super",positiveSelected:"text-super hover:bg-subtle hover:text-super",negative:"text-quiet hover:bg-subtle hover:text-caution",negativeSelected:"text-caution dark:text-caution hover:bg-subtle hover:text-caution",noBackground:"text-quiet hover:text-foreground",noHover:"text-quiet  cursor-default",subtle:"text-foreground bg-subtle"}[e],r),[r,e,t,n]);return o.jsx(tD,{testId:s.testId,extraCSS:a,...s})});Te.displayName="TextButton";const M$e=f.createContext(null),G4={didCatch:!1,error:null};let k$e=class extends f.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=G4}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var n,r,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:a,reason:"imperative-api"}),this.setState(G4)}}componentDidCatch(t,n){var r,s;(r=(s=this.props).onError)===null||r===void 0||r.call(s,t,n)}componentDidUpdate(t,n){const{didCatch:r}=this.state,{resetKeys:s}=this.props;if(r&&n.error!==null&&T$e(t.resetKeys,s)){var a,i;(a=(i=this.props).onReset)===null||a===void 0||a.call(i,{next:s,prev:t.resetKeys,reason:"keys"}),this.setState(G4)}}render(){const{children:t,fallbackRender:n,FallbackComponent:r,fallback:s}=this.props,{didCatch:a,error:i}=this.state;let l=t;if(a){const c={error:i,resetErrorBoundary:this.resetErrorBoundary};if(f.isValidElement(s))l=s;else if(typeof n=="function")l=n(c);else if(r)l=f.createElement(r,c);else throw i}return f.createElement(M$e.Provider,{value:{didCatch:a,error:i,resetErrorBoundary:this.resetErrorBoundary}},l)}};function T$e(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((n,r)=>!Object.is(n,t[r]))}const m5={transparent:"transparent",subtle:"subtle",subtler:"subtler",background:"background"},N$e="border-subtlest ring-subtlest divide-subtlest",H=I.memo(({variant:e=m5.transparent,className:t,onClick:n,onMouseOver:r,onMouseLeave:s,children:a,id:i,bgHover:l,style:c,testId:u,as:d="div",ref:m,noBorder:p,...h})=>{const g=I.useMemo(()=>{const y={transparent:"bg-transparent",super:"bg-super",superBorder:"border border-super",superLight:"bg-super/10",subtle:"bg-subtle",subtler:"bg-subtler",red:"bg-caution",background:"bg-base",underlay:"bg-underlay",offsetLoading:"bg-subtlest animate-pulse",textColor:"bg-inverse",orange:"bg-attention",raised:"bg-raised dark:bg-offset",raisedOffset:"bg-raisedOffset",max:"bg-max",maxBorder:"border border-max"},v={subtle:"md:hover:bg-subtle",subtler:"md:hover:bg-subtler",raisedOffset:"md:hover:bg-raisedOffset",transparent:"md:hover:bg-transparent",super:"md:hover:bg-super"};return B(t,!p&&e!=="maxBorder"&&e!=="superBorder"&&N$e,l?"transition duration-normal":"",y[e]||y.transparent,l&&v[l]||"")},[l,t,e,p]);return I.createElement(d,{id:i,ref:m,className:g,onClick:n,onMouseOver:r,onMouseLeave:s,style:c,"data-testid":u,...h},a)});H.displayName="Box";const he=f.memo(e=>{const{variant:t="common",disabled:n,extraCSS:r,...s}=e,{buttonClass:a}=f.useMemo(()=>{const i={disabled:"bg-inverse/15 text-quiet",primary:"bg-super text-inverse hover:opacity-80",primaryGhost:"border border-super/20 bg-super/10 hover:bg-super/20 hover:border-super/30 text-super",common:"bg-subtle text-foreground md:hover:text-quiet",border:"border border-subtler text-quiet md:hover:border-subtle md:hover:text-quiet hover:bg-subtler bg-base",inverted:"bg-inverse text-inverse hover:opacity-80",rejecter:"border border-subtlest text-caution dark:hover:text-foreground hover:bg-caution/30 hover:border-caution/20 bg-base",rejected:"bg-caution hover:opacity-50 text-white",orange:"bg-attention text-white hover:opacity-50",maxGold:"bg-max dark:text-inverse hover:opacity-80"},l=n?i.disabled:i[t];return{buttonClass:B(l,r)}},[t,n,r]);return o.jsx(tD,{extraCSS:a,disabled:n,variant:t,...s})});he.displayName="Button";class j$e extends cb{name="ReactRenderingError"}function p5(e){ne.info("Reloading window",{reason:e,url:window.location.href}),window.location.reload()}const A$e=()=>p5("Error boundary"),I$e=({resetErrorBoundary:e})=>{const{$t:t}=Z(),n=f.useCallback(()=>{e()},[e]);return o.jsx(H,{variant:"background",className:"overflow-hidden rounded-xl",children:o.jsxs(H,{variant:"subtler",className:"px-md flex w-full items-center justify-between py-3",children:[o.jsx(D,{variant:"smallBold",children:t({defaultMessage:"Something went wrong.",id:"iuY8kxCDQT"})}),o.jsx(he,{size:"tiny",text:t({defaultMessage:"Retry",id:"62nsdyMyIO"}),type:"button",onClick:n})]})})},ede=I.memo(()=>null);ede.displayName="NullFallback";const R$e=/load(.*?)chunk/i,Or=I.memo(({fallback:e=I$e,children:t,onError:n,code:r="REACT_RENDERING_ERROR"})=>{const s=f.useCallback((a,i)=>{n?.(a,i);let l;if(a instanceof cb)l=a;else{let c=r;R$e.test(a?.message??"")&&(c="CHUNK_LOADING_ERROR"),l=new j$e(c,{message:a.message,cause:a})}l.stack=i.componentStack||void 0,ne.error(l)},[n,r]);return o.jsx(k$e,{FallbackComponent:e||ede,onError:s,onReset:A$e,children:t})});Or.displayName="ErrorBoundary";const tde=({shouldShow:e,imageSrc:t,imageAlt:n,title:r,description:s,primaryAction:a,onDismiss:i,iconXDismiss:l})=>{const c=EBe();return!e||!c?null:o.jsx(Or,{fallback:null,children:o.jsxs(ge.div,{className:"p-sm m-md ring-subtlest dark:ring-subtler bg-base gap-md fixed bottom-0 right-0 hidden max-w-[320px] grid-cols-1 rounded-xl shadow-md ring-1 md:grid",initial:{opacity:0,y:0},animate:{opacity:1,y:0},transition:{duration:.5},children:[t&&o.jsx("img",{src:t,alt:n,className:"bg-subtle size-full rounded-lg object-cover",style:{aspectRatio:"528/240"}}),l&&o.jsx("div",{className:"right-md top-md absolute",children:o.jsx(Te,{size:"small",icon:Rt,onClick:i,noPadding:!0,iconClassName:t?"text-white":void 0,"data-testid":"floating-card-upsell-dismiss"})}),o.jsxs("div",{className:B("px-sm",{"pt-sm":!t}),children:[o.jsx(D,{variant:"smallBold",className:"mb-xs pr-md",children:r}),o.jsx(D,{variant:"tinyRegular",color:"light",className:"whitespace-pre-line leading-snug",children:s})]}),o.jsxs("div",{className:B("px-sm pb-sm gap-xs flex flex-row",t?"ml-auto":"mr-auto"),children:[!l&&o.jsx(Te,{variant:"common",size:"small",onClick:i,text:"Dismiss"}),a]})]})})};var ly=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},pm=typeof window>"u"||"Deno"in globalThis;function Zo(){}function P$e(e,t){return typeof e=="function"?e(t):e}function kR(e){return typeof e=="number"&&e>=0&&e!==1/0}function nde(e,t){return Math.max(e+(t||0)-Date.now(),0)}function wh(e,t){return typeof e=="function"?e(t):e}function Ni(e,t){return typeof e=="function"?e(t):e}function hq(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:i,stale:l}=e;if(i){if(r){if(t.queryHash!==nD(i,t.options))return!1}else if(!$x(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function gq(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(hm(t.options.mutationKey)!==hm(a))return!1}else if(!$x(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function nD(e,t){return(t?.queryKeyHashFn||hm)(e)}function hm(e){return JSON.stringify(e,(t,n)=>TR(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function $x(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!$x(e[n],t[n])):!1}function rde(e,t){if(e===t)return e;const n=yq(e)&&yq(t);if(n||TR(e)&&TR(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),i=a.length,l=n?[]:{};let c=0;for(let u=0;u<i;u++){const d=n?u:a[u];(!n&&r.includes(d)||n)&&e[d]===void 0&&t[d]===void 0?(l[d]=void 0,c++):(l[d]=rde(e[d],t[d]),l[d]===e[d]&&e[d]!==void 0&&c++)}return s===i&&c===s?e:l}return t}function M2(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function yq(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function TR(e){if(!vq(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!vq(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function vq(e){return Object.prototype.toString.call(e)==="[object Object]"}function O$e(e){return new Promise(t=>{setTimeout(t,e)})}function NR(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?rde(e,t):t}function Ud(e){return e}function L$e(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function D$e(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var sde=Symbol(),ade=(e,t)=>!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===sde?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn,F$e=class extends ly{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!pm&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},rD=new F$e,U$e=class extends ly{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!pm&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},k2=new U$e;function B$e(e){return Math.min(1e3*2**e,3e4)}function ode(e){return(e??"online")==="online"?k2.isOnline():!0}var ide=class{constructor(e){this.revert=e?.revert,this.silent=e?.silent}};function q4(e){return e instanceof ide}function lde(e){let t=!1,n=0,r=!1,s,a,i;const l=new Promise((x,b)=>{a=x,i=b}),c=x=>{r||(g(new ide(x)),e.abort?.())},u=()=>{t=!0},d=()=>{t=!1},m=()=>rD.isFocused()&&(e.networkMode==="always"||k2.isOnline())&&e.canRun(),p=()=>ode(e.networkMode)&&e.canRun(),h=x=>{r||(r=!0,e.onSuccess?.(x),s?.(),a(x))},g=x=>{r||(r=!0,e.onError?.(x),s?.(),i(x))},y=()=>new Promise(x=>{s=b=>{(r||m())&&x(b)},e.onPause?.()}).then(()=>{s=void 0,r||e.onContinue?.()}),v=()=>{if(r)return;let x;const b=n===0?e.initialPromise:void 0;try{x=b??e.fn()}catch(_){x=Promise.reject(_)}Promise.resolve(x).then(h).catch(_=>{if(r)return;const w=e.retry??(pm?0:3),C=e.retryDelay??B$e,S=typeof C=="function"?C(n,_):C,E=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,_);if(t||!E){g(_);return}n++,e.onFail?.(n,_),O$e(S).then(()=>m()?void 0:y()).then(()=>{t?g(_):v()})})};return{promise:l,cancel:c,continue:()=>(s?.(),l),cancelRetry:u,continueRetry:d,canStart:p,start:()=>(p()?v():y().then(v),l)}}function V$e(){let e=[],t=0,n=p=>{p()},r=p=>{p()},s=p=>setTimeout(p,0);const a=p=>{s=p},i=p=>{let h;t++;try{h=p()}finally{t--,t||u()}return h},l=p=>{t?e.push(p):s(()=>{n(p)})},c=p=>(...h)=>{l(()=>{p(...h)})},u=()=>{const p=e;e=[],p.length&&s(()=>{r(()=>{p.forEach(h=>{n(h)})})})};return{batch:i,batchCalls:c,schedule:l,setNotifyFunction:p=>{n=p},setBatchNotifyFunction:p=>{r=p},setScheduler:a}}var is=V$e(),cde=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),kR(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(pm?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},$$e=class extends cde{#e;#t;#r;#n;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=e.state||W$e(this.options),this.state=this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const n=NR(this.state.data,e,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(Zo).catch(Zo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Ni(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!nde(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#a?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(e,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},s=()=>{const l=ade(this.options,t),c={queryKey:this.queryKey,meta:this.meta};return r(c),this.#a=!1,this.options.persister?this.options.persister(l,c,this):l(c)},a={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};r(a),this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#s({type:"fetch",meta:a.fetchOptions?.meta});const i=l=>{q4(l)&&l.silent||this.#s({type:"error",error:l}),q4(l)||(this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.#n=lde({initialPromise:t?.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:l=>{if(l===void 0){i(new Error(`${this.queryHash} data is undefined`));return}this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:i,onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}),this.#n.start()}#s(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ude(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return q4(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),is.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function ude(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ode(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function W$e(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var dde=class extends ly{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const r=t.queryKey,s=t.queryHash??nD(r,t);let a=this.get(s);return a||(a=new $$e({cache:this,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){is.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>hq(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>hq(e,n)):t}notify(e){is.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){is.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){is.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},H$e=class extends cde{#e;#t;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||fde(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){this.#r=lde({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(r,s)=>{this.#n({type:"failed",failureCount:r,error:s})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const t=this.state.status==="pending",n=!this.#r.canStart();try{if(!t){this.#n({type:"pending",variables:e,isPaused:n}),await this.#t.config.onMutate?.(e,this);const s=await this.options.onMutate?.(e);s!==this.state.context&&this.#n({type:"pending",context:s,variables:e,isPaused:n})}const r=await this.#r.start();return await this.#t.config.onSuccess?.(r,e,this.state.context,this),await this.options.onSuccess?.(r,e,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,e,this.state.context),this.#n({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,e,this.state.context,this),await this.options.onError?.(r,e,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,e,this.state.context),r}finally{this.#n({type:"error",error:r})}}finally{this.#t.runNext(this)}}#n(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),is.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function fde(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var mde=class extends ly{constructor(e={}){super(),this.config=e,this.#e=new Map,this.#t=Date.now()}#e;#t;build(e,t,n){const r=new H$e({mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){const t=Aw(e),n=this.#e.get(t)??[];n.push(e),this.#e.set(t,n),this.notify({type:"added",mutation:e})}remove(e){const t=Aw(e);if(this.#e.has(t)){const n=this.#e.get(t)?.filter(r=>r!==e);n&&(n.length===0?this.#e.delete(t):this.#e.set(t,n))}this.notify({type:"removed",mutation:e})}canRun(e){const t=this.#e.get(Aw(e))?.find(n=>n.state.status==="pending");return!t||t===e}runNext(e){return this.#e.get(Aw(e))?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve()}clear(){is.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...this.#e.values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(n=>gq(t,n))}findAll(e={}){return this.getAll().filter(t=>gq(e,t))}notify(e){is.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return is.batch(()=>Promise.all(e.map(t=>t.continue().catch(Zo))))}};function Aw(e){return e.options.scope?.id??String(e.mutationId)}function jR(e){return{onFetch:(t,n)=>{const r=async()=>{const s=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],l=t.state.data?.pageParams||[],c={pages:[],pageParams:[]};let u=!1;const d=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},m=ade(t.options,t.fetchOptions),p=async(g,y,v)=>{if(u)return Promise.reject();if(y==null&&g.pages.length)return Promise.resolve(g);const x={queryKey:t.queryKey,pageParam:y,direction:v?"backward":"forward",meta:t.options.meta};d(x);const b=await m(x),{maxPages:_}=t.options,w=v?D$e:L$e;return{pages:w(g.pages,b,_),pageParams:w(g.pageParams,y,_)}};let h;if(a&&i.length){const g=a==="backward",y=g?pde:AR,v={pages:i,pageParams:l},x=y(s,v);h=await p(v,x,g)}else{h=await p(c,l[0]??s.initialPageParam);const g=e??i.length;for(let y=1;y<g;y++){const v=AR(s,h);h=await p(h,v)}}return h};t.options.persister?t.fetchFn=()=>t.options.persister?.(r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=r}}}function AR(e,{pages:t,pageParams:n}){const r=t.length-1;return e.getNextPageParam(t[r],t,n[r],n)}function pde(e,{pages:t,pageParams:n}){return e.getPreviousPageParam?.(t[0],t,n[0],n)}function z$e(e,t){return t?AR(e,t)!=null:!1}function G$e(e,t){return!t||!e.getPreviousPageParam?!1:pde(e,t)!=null}var q$e=class{#e;#t;#r;#n;#o;#a;#s;#i;constructor(e={}){this.#e=e.queryCache||new dde,this.#t=e.mutationCache||new mde,this.#r=e.defaultOptions||{},this.#n=new Map,this.#o=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#s=rD.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=k2.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#s?.(),this.#s=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=this.#e.build(this,n);return e.revalidateIfStale&&r.isStaleByTime(wh(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=this.#e.get(r.queryHash)?.state.data,i=P$e(t,a);if(i!==void 0)return this.#e.build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return is.batch(()=>this.#e.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;is.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e,r={type:"active",...e};return is.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=is.batch(()=>this.#e.findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Zo).catch(Zo)}invalidateQueries(e={},t={}){return is.batch(()=>{if(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:t?.cancelRefetch??!0},r=is.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Zo)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Zo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(wh(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Zo).catch(Zo)}fetchInfiniteQuery(e){return e.behavior=jR(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Zo).catch(Zo)}resumePausedMutations(){return k2.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(hm(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()];let n={};return t.forEach(r=>{$x(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){this.#o.set(hm(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#o.values()];let n={};return t.forEach(r=>{$x(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=nD(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===sde&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},hde=class extends ly{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#n=void 0;#o;#a;#s;#i;#f;#m;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),xq(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return IR(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return IR(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#b(),this.#t.removeObserver(this)}setOptions(e,t){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ni(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),n._defaulted&&!M2(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const s=this.hasListeners();s&&bq(this.#t,r,this.options,n)&&this.#d(),this.updateResult(t),s&&(this.#t!==r||Ni(this.options.enabled,this.#t)!==Ni(n.enabled,this.#t)||wh(this.options.staleTime,this.#t)!==wh(n.staleTime,this.#t))&&this.#h();const a=this.#g();s&&(this.#t!==r||Ni(this.options.enabled,this.#t)!==Ni(n.enabled,this.#t)||a!==this.#l)&&this.#y(a)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return Y$e(this,n)&&(this.#n=n,this.#a=this.options,this.#o=this.#t.state),n}getCurrentResult(){return this.#n}trackResult(e,t){const n={};return Object.keys(e).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),t?.(r),e[r])})}),n}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#d(e){this.#_();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Zo)),t}#h(){this.#x();const e=wh(this.options.staleTime,this.#t);if(pm||this.#n.isStale||!kR(e))return;const n=nde(this.#n.dataUpdatedAt,e)+1;this.#c=setTimeout(()=>{this.#n.isStale||this.updateResult()},n)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#b(),this.#l=e,!(pm||Ni(this.options.enabled,this.#t)===!1||!kR(this.#l)||this.#l===0)&&(this.#u=setInterval(()=>{(this.options.refetchIntervalInBackground||rD.isFocused())&&this.#d()},this.#l))}#v(){this.#h(),this.#y(this.#g())}#x(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#b(){this.#u&&(clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const n=this.#t,r=this.options,s=this.#n,a=this.#o,i=this.#a,c=e!==n?e.state:this.#r,{state:u}=e;let d={...u},m=!1,p;if(t._optimisticResults){const S=this.hasListeners(),E=!S&&xq(e,t),M=S&&bq(e,n,t,r);(E||M)&&(d={...d,...ude(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:h,errorUpdatedAt:g,status:y}=d;if(t.select&&d.data!==void 0)if(s&&d.data===a?.data&&t.select===this.#i)p=this.#f;else try{this.#i=t.select,p=t.select(d.data),p=NR(s?.data,p,t),this.#f=p,this.#s=null}catch(S){this.#s=S}else p=d.data;if(t.placeholderData!==void 0&&p===void 0&&y==="pending"){let S;if(s?.isPlaceholderData&&t.placeholderData===i?.placeholderData)S=s.data;else if(S=typeof t.placeholderData=="function"?t.placeholderData(this.#m?.state.data,this.#m):t.placeholderData,t.select&&S!==void 0)try{S=t.select(S),this.#s=null}catch(E){this.#s=E}S!==void 0&&(y="success",p=NR(s?.data,S,t),m=!0)}this.#s&&(h=this.#s,p=this.#f,g=Date.now(),y="error");const v=d.fetchStatus==="fetching",x=y==="pending",b=y==="error",_=x&&v,w=p!==void 0;return{status:y,fetchStatus:d.fetchStatus,isPending:x,isSuccess:y==="success",isError:b,isInitialLoading:_,isLoading:_,data:p,dataUpdatedAt:d.dataUpdatedAt,error:h,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!x,isLoadingError:b&&!w,isPaused:d.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:b&&w,isStale:sD(e,t),refetch:this.refetch}}updateResult(e){const t=this.#n,n=this.createResult(this.#t,this.options);if(this.#o=this.#t.state,this.#a=this.options,this.#o.data!==void 0&&(this.#m=this.#t),M2(n,t))return;this.#n=n;const r={},s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!this.#p.size)return!0;const l=new Set(i??this.#p);return this.options.throwOnError&&l.add("error"),Object.keys(this.#n).some(c=>{const u=c;return this.#n[u]!==t[u]&&l.has(u)})};e?.listeners!==!1&&s()&&(r.listeners=!0),this.#w({...r,...e})}#_(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#w(e){is.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function K$e(e,t){return Ni(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function xq(e,t){return K$e(e,t)||e.state.data!==void 0&&IR(e,t,t.refetchOnMount)}function IR(e,t,n){if(Ni(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&sD(e,t)}return!1}function bq(e,t,n,r){return(e!==t||Ni(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&sD(e,n)}function sD(e,t){return Ni(t.enabled,e)!==!1&&e.isStaleByTime(wh(t.staleTime,e))}function Y$e(e,t){return!M2(e.getCurrentResult(),t)}var Q$e=class extends hde{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:jR()},t)}getOptimisticResult(e){return e.behavior=jR(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:n}=e,r=super.createResult(e,t),{isFetching:s,isRefetching:a,isError:i,isRefetchError:l}=r,c=n.fetchMeta?.fetchMore?.direction,u=i&&c==="forward",d=s&&c==="forward",m=i&&c==="backward",p=s&&c==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:z$e(t,n.data),hasPreviousPage:G$e(t,n.data),isFetchNextPageError:u,isFetchingNextPage:d,isFetchPreviousPageError:m,isFetchingPreviousPage:p,isRefetchError:l&&!u&&!m,isRefetching:a&&!d&&!p}}},X$e=class extends ly{#e;#t=void 0;#r;#n;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),M2(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),n?.mutationKey&&this.options.mutationKey&&hm(n.mutationKey)!==hm(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#o(),this.#a(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#o(),this.#a()}mutate(t,n){return this.#n=n,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#o(){const t=this.#r?.state??fde();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){is.batch(()=>{if(this.#n&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;t?.type==="success"?(this.#n.onSuccess?.(t.data,n,r),this.#n.onSettled?.(t.data,null,n,r)):t?.type==="error"&&(this.#n.onError?.(t.error,n,r),this.#n.onSettled?.(void 0,t.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},gde=f.createContext(void 0),ht=e=>{const t=f.useContext(gde);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Z$e=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(gde.Provider,{value:e,children:t})),yde=f.createContext(!1),J$e=()=>f.useContext(yde);yde.Provider;function eWe(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var tWe=f.createContext(eWe()),nWe=()=>f.useContext(tWe);function vde(e,t){return typeof e=="function"?e(...t):!!e}function rWe(){}var sWe=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},aWe=e=>{f.useEffect(()=>{e.clearReset()},[e])},oWe=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&vde(n,[e.error,r]),iWe=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},lWe=(e,t)=>e?.suspense&&t.isPending,cWe=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function xde(e,t,n){const r=ht(),s=J$e(),a=nWe(),i=r.defaultQueryOptions(e);r.getDefaultOptions().queries?._experimental_beforeQuery?.(i),i._optimisticResults=s?"isRestoring":"optimistic",iWe(i),sWe(i,a),aWe(a);const[l]=f.useState(()=>new t(r,i)),c=l.getOptimisticResult(i);if(f.useSyncExternalStore(f.useCallback(u=>{const d=s?()=>{}:l.subscribe(is.batchCalls(u));return l.updateResult(),d},[l,s]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),f.useEffect(()=>{l.setOptions(i,{listeners:!1})},[i,l]),lWe(i,c))throw cWe(i,l,a);if(oWe({result:c,errorResetBoundary:a,throwOnError:i.throwOnError,query:r.getQueryCache().get(i.queryHash)}))throw c.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(i,c),i.notifyOnChangeProps?c:l.trackResult(c)}function We(e,t){return xde(e,hde)}function vt(e,t){const n=ht(),[r]=f.useState(()=>new X$e(n,e));f.useEffect(()=>{r.setOptions(e)},[r,e]);const s=f.useSyncExternalStore(f.useCallback(i=>r.subscribe(is.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=f.useCallback((i,l)=>{r.mutate(i,l).catch(rWe)},[r]);if(s.error&&vde(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}function xu(e,t){return xde(e,Q$e)}const uWe={pro:"pro",max:"max"},dWe=e=>Object.keys(uWe).includes(e);function _t(){const{session:e}=Et(),t=e?.user?.subscription_status??"none",n=t==="active"||t==="trialing"||t==="white_glove_past_due",r=e?.user?.subscription_tier,s=dWe(r)?r:void 0,a=n&&(s==="pro"||!s),i=n&&s==="max",l=a||i,c=n?e?.user?.subscription_source:"none",u=n&&c==="enterprise",d=u&&(s==="pro"||!s),m=u&&s==="max";return f.useMemo(()=>({isPro:a,isMax:i,hasAccessToProFeatures:l,hasActiveSubscription:n,subscriptionSource:c,subscriptionStatus:t,subscriptionTier:s,isEnterprise:u,isEnterprisePro:d,isEnterpriseMax:m}),[l,i,a,n,c,t,s,u,d,m])}let gp;const bde=new URL("/ws",dRe());bde.protocol="wss:";async function _de(){return gp||(gp=new Promise(e=>{const t=new WebSocket(bde);t.addEventListener("error",()=>{try{t.close()}finally{gp=void 0}}),t.addEventListener("close",()=>{gp=void 0}),t.addEventListener("open",()=>{e(t)})}),gp)}const wd="en-US",h5={"ar-SA":{characterOrder:"rtl",displayName:" (  )",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-ar-SA-Deftpnwy.js");return{default:e}},[])).default},"bn-BD":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-bn-BD-CXV-Mhqp.js");return{default:e}},[])).default},"cs-CZ":{characterOrder:"ltr",displayName:"etina (esko)",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-cs-CZ-Xuls3crL.js");return{default:e}},[])).default},"de-DE":{characterOrder:"ltr",displayName:"Deutsch (Deutschland)",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-de-DE-BZJqf4zD.js");return{default:e}},[])).default},"el-GR":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-el-GR-HK9xhDK9.js");return{default:e}},[])).default},"en-US":{characterOrder:"ltr",displayName:"American English",translations:async()=>Promise.resolve({})},"es-ES":{characterOrder:"ltr",displayName:"espaol de Espaa",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-es-ES-BeMoyVUb.js");return{default:e}},[])).default},"fr-FR":{characterOrder:"ltr",displayName:"franais (France)",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-fr-FR-CpaODzeN.js");return{default:e}},[])).default},"hi-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-hi-IN-D_jQ7qUL.js");return{default:e}},[])).default},"hr-HR":{characterOrder:"ltr",displayName:"hrvatski (Hrvatska)",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-hr-HR-qA_AvnzR.js");return{default:e}},[])).default},"hu-HU":{characterOrder:"ltr",displayName:"magyar (Magyarorszg)",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-hu-HU-QYDwDnIF.js");return{default:e}},[])).default},"id-ID":{characterOrder:"ltr",displayName:"Indonesia (Indonesia)",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-id-ID-CCq_Z27n.js");return{default:e}},[])).default},"it-IT":{characterOrder:"ltr",displayName:"italiano (Italia)",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-it-IT-DEBCwckY.js");return{default:e}},[])).default},"ja-JP":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-ja-JP-B3u_5n5J.js");return{default:e}},[])).default},"kn-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-kn-IN-CLnq1jzp.js");return{default:e}},[])).default},"ko-KR":{characterOrder:"ltr",displayName:"()",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-ko-KR-L5eqQn5F.js");return{default:e}},[])).default},"ml-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-ml-IN-C2LNK1PG.js");return{default:e}},[])).default},"mr-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-mr-IN-MocVrEbn.js");return{default:e}},[])).default},"nl-NL":{characterOrder:"ltr",displayName:"Nederlands (Nederland)",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-nl-NL-ClhAhemx.js");return{default:e}},[])).default},"pl-PL":{characterOrder:"ltr",displayName:"polski (Polska)",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-pl-PL-Cxf_Fts-.js");return{default:e}},[])).default},"pt-BR":{characterOrder:"ltr",displayName:"portugus (Brasil)",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-pt-BR-BH_wVreK.js");return{default:e}},[])).default},"pt-PT":{characterOrder:"ltr",displayName:"portugus europeu",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-pt-PT-BTBexPYB.js");return{default:e}},[])).default},"ro-RO":{characterOrder:"ltr",displayName:"romn (Romnia)",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-ro-RO-BHj7NuLq.js");return{default:e}},[])).default},"ru-RU":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-ru-RU-PTylPj52.js");return{default:e}},[])).default},"sk-SK":{characterOrder:"ltr",displayName:"slovenina (Slovensko)",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-sk-SK-PA_ngZ5U.js");return{default:e}},[])).default},"sr-Cyrl-ME":{characterOrder:"ltr",displayName:" (,  )",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-sr-Cyrl-ME-C9DNgLbl.js");return{default:e}},[])).default},"ta-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-ta-IN-BysM6B4U.js");return{default:e}},[])).default},"te-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-te-IN-b-PfHihD.js");return{default:e}},[])).default},"uk-UA":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-uk-UA-COCs98lb.js");return{default:e}},[])).default},"zh-CN":{characterOrder:"ltr",displayName:"",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-zh-CN-DvevPyRn.js");return{default:e}},[])).default},"zh-TW":{characterOrder:"ltr",displayName:"",translations:async()=>(await K(async()=>{const{default:e}=await import("./translations-zh-TW-CKDBx_OT.js");return{default:e}},[])).default}},wde="pplx.chosen-locale",aD=new Intl.DateTimeFormat().resolvedOptions().timeZone,bS=Object.keys(h5),fWe=Object.entries(h5).map(([e,t])=>({locale:e,label:t.displayName,characterOrder:t.characterOrder})),Cde=(e,t=bS)=>{try{return BOe(e,t,wd)}catch{return wd}};async function mWe(e=wd){const t=Cde(Array.isArray(e)?e:[e]);if(t===wd)return Promise.resolve({matchedLocale:t,translations:{}});const n=await h5[t].translations()??{};return Promise.resolve({matchedLocale:t,translations:n})}function Sde(e){return h5[e]?.characterOrder??"ltr"}function id(){const t=[new URL(globalThis.location.href).searchParams.get("locale"),jn(wde),globalThis.navigator.language].filter(n=>!!n);return Cde(t)}function pWe(){lm(wde)}var hWe={};function gWe(){return typeof window>"u"||window.location.hostname.includes("localhost")?new URL(nz,YOe()):new URL(nz,window.location.origin)}const yWe=gWe();function Ede(e){return navigator.sendBeacon(yWe,new Blob([JSON.stringify(e)],{type:"application/json; charset=UTF-8"}))}function Mde(){const e={};try{navigator.hardwareConcurrency&&(e.hardwareConcurrency=navigator.hardwareConcurrency);const t=new Float32Array(1),n=new Uint8Array(t.buffer);t[0]=1/0,t[0]=t[0]-t[0];const r=n[3];r&&(e.architecture=r),globalThis.screen.colorDepth&&(e.colorDepth=globalThis.screen.colorDepth),globalThis.screen.width&&globalThis.screen.height&&(e.screenSize=`${globalThis.screen.width}x${globalThis.screen.height}`)}catch{}return e}const vWe=Mde(),xWe=768,bWe=`(max-width: ${xWe}px)`;function _We(){return typeof window>"u"?!1:window.matchMedia(bWe).matches}function wWe(){if(typeof document>"u")return!1;const e=jn("comet_browser");if(!e)return!1;try{const t=JSON.parse(e);return!!(t?.android_version||t?.ios_version)}catch{return!1}}function CWe(){return wWe()?"comet_mobile":_We()?"mweb":"web"}const SWe=(e={},t)=>{const n=Date.now(),r=CWe(),s={...e,isStandaloneApp:!1,timestamp:n,isBrowserExtension:!1,timeZone:aD,isPro:t?.user?.subscription_status&&t?.user?.subscription_status!=="none",userId:t?.user?.id,deviceInfo:vWe,isPerplexityBrowser:jn("comet_browser")!==void 0,web_platform:r},a=globalThis.location.pathname+globalThis.location.search,i=!!getComputedStyle(document.documentElement).getPropertyValue("--arc-palette-title"),l=Mde(),c=jn(g2),u=jn(JI);let d;return s.internalReferrer?d=s.internalReferrer:d=document.referrer,(globalThis.matchMedia("(display-mode: standalone)").matches||globalThis.matchMedia("(display-mode: minimal-ui)").matches||globalThis.navigator?.standalone)&&(s.isStandaloneApp=!0),{eventData:s,pathnameAndParams:a,visitorId:c,isArcBrowser:i,sessionId:u,deviceInfo:l,referrer:d}};function kde(e){const{name:t,data:n,session:r,source:s}=e,{eventData:a,visitorId:i,sessionId:l,pathnameAndParams:c,deviceInfo:u,referrer:d,isArcBrowser:m}=SWe(n,r);return c.startsWith("/search/render")?void 0:(hWe.NEXT_PUBLIC_EVENT_DEBUG_PRINT&&ne.log(`[trackEvent] ${t}: `,a),{event_name:t,event_data:a,visitor_id:i??"",session_id:l??"",url:c,referrer:d,language:id(),screen:g5(),hostname:globalThis.location.hostname,device_info:u,is_arc_browser:m,source:s})}function Li(e){const t=kde(e);t&&(Ede(t)||(ui("web.browser.analytics.send_event_failed"),_de().then(n=>{n.send(JSON.stringify(t))})))}function EWe(e){const t=e.map(n=>kde(n)).filter(n=>n!==void 0);t.length!==0&&(Ede(t)||(ui("web.browser.analytics.send_event_failed"),_de().then(n=>{n.send(JSON.stringify(t))})))}function g5(){return`${globalThis.screen.width}x${globalThis.screen.height}`}const _q=Object.freeze({});function to(){return typeof window<"u"?window.__PPL_CONFIG__??_q:_q}const Tde=Wt("WebPlatformContext",{env:{isPublicDNS:!1,isLocalhost:!1,isPplxDev:!1,isPreview:!1,isStaging:!1,isBeta:!1,isTesting:!1,isAskDev:!1,isDevBox:!1,isNamedDevDomain:!1,isProduction:!1,isSandbox:!1,isDevDeployment:!1,envHasDevLogins:!1,deployName:""},device:{isChrome:!1,isMobile:!1,isAndroid:!1,isIOS:!1,isMacOS:!1,isFirefox:!1,isMobileSafari:!1,isWindowsOS:!1,isWindowsApp:!1,isMetaBrowser:!1,isSamsungBrowser:!1,userAgent:""}}),At=()=>{const e=f.useContext(Tde);if(!e)throw new Error("useWebPlatform must be used within WebPlatformContext");return e},Hv={default:{termsOfService:"https://www.perplexity.ai/hub/legal/terms-of-service",enterpriseTermsOfService:"https://www.perplexity.ai/hub/legal/enterprise-terms-of-service",privacyPolicy:"https://www.perplexity.ai/hub/legal/privacy-policy"},"ja-JP":{termsOfService:"https://www.perplexity.ai/ja/hub/legal/terms-of-service",privacyPolicy:"https://www.perplexity.ai/ja/hub/legal/privacy-policy"}},Bf=4e4,Nde=2e3,wq=4e3,Cq=50,Sq=1e3,PXt=1500,OXt=500,LXt=100,MWe=10,DXt=10,kWe=5e3,TWe=50,Eq=10,Mq=1024*1024,jde=3,Ade=500,Ch="https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png",ac="2.18",Ide="default",FXt="mweb",oD="entropy",NWe="browser_ios",jWe="browser_android",y5="windowsapp",UXt="ios",BXt="android",VXt="autodetect",kq=["audio/midi","audio/x-midi","application/zip","application/x-tar","application/x-bzip","application/vnd.rar"],iD=[".bash",".bat",".c",".coffee",".conf",".config",".cpp",".cs",".css",".csv",".cxx",".dart",".diff",".doc",".docx",".fish",".go",".h",".hpp",".htm",".html",".in",".ini",".ipynb",".java",".js",".json",".jsx",".ksh",".kt",".kts",".latex",".less",".log",".lua",".m",".markdown",".md",".pdf",".php",".pl",".pm",".pptx",".py",".r",".R",".rb",".rmd",".rs",".scala",".sh",".sql",".swift",".t",".tex",".text",".toml",".ts",".tsx",".txt",".xlsx",".xml",".yaml",".yml",".zsh"],AWe=iD.join(","),Rde=[".jpeg",".jpg",".jpe",".jp2",".png",".gif",".bmp",".tiff",".tif",".svg",".webp",".ico",".avif",".heic",".heif"],Pde=[".mp3",".wav",".aiff",".ogg",".flac",".mp4",".mpeg",".mov",".avi",".flv",".mpg",".webm",".wmv",".3gp"],IWe=Rde.join(","),Ode=[...iD,...Rde],RWe=Ode.join(","),PWe=[...iD,...Pde],OWe=PWe.join(","),LWe=[...Ode,...Pde],DWe=LWe.join(","),$Xt="",WXt=bt.PUBLIC_READ,Lde=bt.PRIVATE_READ,T2=bt.PRIVATE_READ,HXt="https://chrome.google.com/webstore/detail/perplexity-ai-search/bnaffjbjpgiagpondjlnneblepbdchol",zXt="https://pplx.ai/mac",GXt="https://www.perplexity.ai/comet",Tq="onboarding",Nq="uninstall_default_search_extension",FWe="edu_referral_code",UWe="utm_source",BWe="backtoschool",VWe="backtoschool_usc",$We="backtoschool_cal",WWe="iitm",HWe="krstudents",oc="login-source",jq="login-new",zWe="model_id",Aq="max",lD=5,GWe="/static/images/back-to-school-splash.png",qWe="back-to-school",qXt="/static/images/search-like-never-before-square.jpg",KXt="search-like-never-before",YXt="/static/images/file-search-upsell-demo.png",QXt="file-search-upsell-demo",KWe="/static/images/sidebar-upsell-bg-light.svg",YWe="/static/images/sidebar-upsell-bg-dark.svg",Iq="App Promo Background",XXt="Perplexity",v5="/static/images/data-connectors/factset/factset-avatar.svg",Pb="FactSet",ZXt="perplexity@factset.com",x5="/static/images/data-connectors/crunchbase/crunchbase-avatar.svg",b5="Crunchbase",ou="/static/images/data-connectors/wiley/wiley-avatar.svg",_5="Wiley",Wx="Wiley (MCP)",w5="/static/images/data-connectors/cbinsights/cbinsights-avatar.svg",Hx="CB Insights",C5="/static/images/data-connectors/pitchbook/pitchbook-avatar.svg",zx="PitchBook",S5="/static/images/data-connectors/statista/statista-avatar.svg",Gx="Statista",cD="Finance",JXt="/static/images/data-connectors/finance/finance-avatar.svg",E5="/static/images/data-connectors/google/google-drive-avatar.svg",QWe="/static/images/data-connectors/google/gmail-avatar.svg",XWe="Gmail",tg="Google Drive",M5="/static/images/data-connectors/google/gcal-gmail-avatar.svg",qx="Gmail with Calendar",ZWe="Microsoft",k5="/static/images/data-connectors/microsoft/onedrive-avatar.svg",Cd="OneDrive",T5="/static/images/data-connectors/microsoft/sharepoint-avatar.svg",Sd="SharePoint",uD="/static/images/data-connectors/dropbox/dropbox-avatar.svg",iu="Dropbox",N5="/static/images/data-connectors/box/box-avatar.svg",ng="Box",Ob="/static/images/data-connectors/notion/notion-avatar.svg",rg="Notion",Kx="/static/images/data-connectors/linear/linear-avatar.svg",Vf="Linear",Yx="/static/images/data-connectors/slack/slack-avatar.svg",Qx="Slack (deprecated)",Xx="Slack",j5="/static/images/data-connectors/github/github-avatar.svg",Zx="GitHub",Jx="/static/images/data-connectors/asana/asana-avatar.svg",Sl="Asana",A5="/static/images/data-connectors/atlassian/atlassian-avatar.svg",e1="Atlassian",dD="/static/images/data-connectors/jira/jira-avatar.svg",t1="Jira",fD="/static/images/data-connectors/confluence/confluence-avatar.svg",n1="Confluence",mD="/static/images/data-connectors/microsoft/teams-avatar.svg",r1="Microsoft Teams",eZt="/static/images/data-connectors/whatsapp/whatsapp-avatar.svg",JWe="/static/images/data-connectors/sidebar-connectors-ad-upsell.png",tZt="https://r2cdn.perplexity.ai/hotels/hotel-pro-banner.jpg",nZt="Save on hotel bookings with Perplexity Pro",Dde="submit-query",sh="search-model-change",Gu="source-selection-change",N2="windows-app",Rq=N2,eHe="If4YwAeizGHdB3eOhX2JxYcjeCgy0N9c",s1=`${N2}/ask/input`,rZt="https://dl.todesktop.com/25020447d4kq915",K4="pplx.windowsApp.microphonePermission",Pq={silenceThreshold:30,silenceDuration:5e3},RR="pplx.upload-privacy-accepted",Fde=["answer_modes","media_items","knowledge_cards","inline_entity_cards","place_widgets","finance_widgets","sports_widgets","shopping_widgets","generic_fallback_widgets","jobs_widgets","search_result_widgets","clarification_responses","inline_images","inline_assets","inline_finance_widgets","placeholder_cards","diff_blocks","inline_knowledge_cards","entity_group_v2","refinement_filters","canvas_mode","maps_preview"],Oq=["google_drive","onedrive","sharepoint","dropbox","box","notion"],tHe=["google_drive","onedrive","sharepoint","dropbox","box"],sg="Outlook",Ude="/static/images/data-connectors/microsoft/outlook-avatar.svg",nHe="org-upgrade-in-progress";let Lq=0;const pD=1e6;class x0{eventTime=-1;setOnce(){return this.eventTime==-1?(this.eventTime=Date.now(),!0):!1}timeSinceTimestamp(t){return this.eventTime===-1||t==null?-1:this.eventTime<t?(ne.log(`TimeMarker.timeSinceTimestamp found inconsistency: mytime ${this.eventTime}, old: ${t}`),-1):this.eventTime-t}timeBeforeTimestamp(t){return this.eventTime===-1||t==null?-1:this.eventTime>t?(ne.log(`TimeMarker.timeBeforeTimestamp found inconsistency: mytime ${this.eventTime}, next: ${t}`),-1):t-this.eventTime}wasSet(){return this.eventTime!=-1}}const rHe={firstServerResponseReceived:!1,firstLLMTokenReceived:!1,isPerplexityBrowser:!1},el=new Map,sHe=(e,{hasLLMToken:t,hasSearchResults:n,hasSources:r},s)=>{aHe(e,s),oHe(e,t,s),iHe(e,n),lHe(e,r)},aHe=(e,t)=>{const n=el.get(e);if(!n||n.firstServerResponseReceived||!n.submitTimestamp||!n.startFirstServerResponseMarker?.setOnce())return;n.firstServerResponseReceived=!0;const{queryStr:r,isFollowup:s,queryParams:a}=n,i=Vde(e);i>0&&Li({name:"query first server response",data:{startFirstServerResponseElapsed:i,queryStr:r,isFollowup:s,mode:a?.mode??"unknown",isPerplexityBrowser:n.isPerplexityBrowser},session:t??void 0})},oHe=(e,t,n)=>{const r=el.get(e);if(!r||r.firstLLMTokenReceived||!t||!r.startLLMTokenMarker?.setOnce())return;r.firstLLMTokenReceived=!0;const{queryStr:s,isFollowup:a,queryParams:i}=r,l=$de(e);l>0&&Li({name:"query first llm token",data:{startLLMTokenElapsed:l,queryStr:s,isFollowup:a,mode:i?.mode??"unknown",isPerplexityBrowser:r.isPerplexityBrowser},session:n??void 0})},iHe=(e,t)=>{const n=el.get(e);if(n){if(!t)return}else return;n.firstSearchResultsMarker?.setOnce()},lHe=(e,t)=>{const n=el.get(e);if(n){if(!t)return}else return;n.firstSourcesMarker?.setOnce()},sZt=e=>{const t=el.get(e);t&&t.firstSourcesRenderMarker?.setOnce()},cHe=(e,t,n,r)=>{r=r??"unknown",Uc("web.frontend.start_stream_elapsed",{startTime:e,duration:t*pD,isFollowup:n,mode:r})},uHe=(e,t,n,r)=>{r=r??"unknown",Uc("web.frontend.start_llm_token_elapsed",{startTime:e,duration:t*pD,isFollowup:n,mode:r})},dHe=(e,t,n,r)=>{r=r??"unknown",Uc("web.frontend.first_search_result_elapsed",{startTime:e,duration:t*pD,isFollowup:n,mode:r})},fHe=({latencies:e,isMobile:t})=>{ui("web.frontend.autosuggest_latency",{latencies:e,isMobile:t})},Y4=(e,t)=>e?y5:t??void 0,Dq=(e,{session:t,source:n,name:r})=>{const s=el.get(e);s&&(s.endStreamTimestamp||(s.endStreamTimestamp=Date.now(),Li({name:r,data:s,session:t??void 0,source:n})))},Bde=(e,t,n,r,s)=>{const a=el.get(e);if(!a)return;a.finalizedTimestamp=Date.now();let i=-1;a.submitTimestamp&&(i=a.finalizedTimestamp-a.submitTimestamp);const l=Vde(e);l>0&&cHe(a.submitTimestamp??0,l,a.isFollowup??!1,a?.queryParams?.mode);const c=pHe(e);c>0&&dHe(a.submitTimestamp??0,c,a.isFollowup??!1,a?.queryParams?.mode);const u=$de(e);u>0&&uHe(a.submitTimestamp??0,u,a.isFollowup??!1,a?.queryParams?.mode);let d=-1;a.endStreamTimestamp&&a.startFirstServerResponseMarker&&(d=a.startFirstServerResponseMarker.timeBeforeTimestamp(a.endStreamTimestamp));const m={...a,totalElapsed:i,startStreamElapsed:l,startFirstServerResponseElapsed:l,startLLMTokenElapsed:u,totalStreamingElapsed:d,submissionResult:t,entryUUID:n?.backend_uuid,displayModel:n?.display_model,stepType:n?.step_type,isPerplexityBrowser:a.isPerplexityBrowser,source:void 0};Li({name:`${t} response`,data:m,session:r??void 0,source:void 0})},aZt=(e,t,n,r)=>{Bde(e,"FAILED",t,n)},oZt=(e,t,n,r)=>{Bde(e,"SUCCESSFUL",t,n)},mHe=(e,{name:t,queryStr:n,queryParams:r,isFollowup:s,frontendUUID:a,isPerplexityBrowser:i,session:l,browserVersion:c,source:u,connectors:d,mentions:m})=>{Lq+=1;const p={...rHe};p.submissionType=t,p.submitTimestamp=Date.now(),p.queryStr=n,p.queryParams=r,p.frontendUUID=a,p.submissionCount=Lq,p.isFollowup=s,p.startFirstServerResponseMarker=new x0,p.startLLMTokenMarker=new x0,p.firstSearchResultsMarker=new x0,p.firstSourcesMarker=new x0,p.firstSourcesRenderMarker=new x0,p.isPerplexityBrowser=i,p.browserVersion=c,p.enabledConnectors=d?.enabled,p.disabledConnectors=d?.disabled;const h=m?.filter(v=>v.type==="tab")??[];p.attachedTabsDomains=[...new Set(h.map(v=>new URL(v.url).host))],p.attachedTabsCount=h.length;const g=m?.filter(v=>v.type==="space")??[];p.mentionedSpacesCount=g.length;const y=m?.filter(v=>v.type==="shortcut")??[];p.mentionedShortcutsCount=y.length,el.set(e,p),Li({name:"submit query",data:p,session:l??void 0,source:u})},Vde=e=>{const t=el.get(e);let n=-1;return t&&(n=t.startFirstServerResponseMarker?.timeSinceTimestamp(t.submitTimestamp)??-1),n},$de=e=>{const t=el.get(e);let n=-1;return t&&(n=t.startLLMTokenMarker?.timeSinceTimestamp(t.submitTimestamp)??-1),n},pHe=e=>{const t=el.get(e);let n=-1;return t&&(n=t.firstSearchResultsMarker?.timeSinceTimestamp(t.submitTimestamp)??-1),n};var Fq;(function(e){e.FLASHCARD="FLASHCARD",e.QUIZ="QUIZ"})(Fq||(Fq={}));const Ne=()=>{const{session:e}=Et(),{device:{isWindowsApp:t}}=At(),n=f.useRef(new Set),r=f.useCallback((l,c={})=>{const u=to(),d=t?y5:u.erp??void 0;Li({name:l,data:c,source:d,session:e??void 0})},[t,e]),s=f.useCallback(l=>{const c=l.map(({name:u,data:d})=>({name:u,data:d,session:e??void 0}));EWe(c)},[e]),a=f.useCallback((l,c)=>{Li({name:l,data:c,session:e??void 0})},[e]),i=f.useCallback((l,c={})=>{n.current.has(l)||(n.current.add(l),Li({name:l,data:c,session:e??void 0}))},[e]);return f.useMemo(()=>({trackEvent:r,trackEventTyped:a,trackEventOnce:i,trackEventBatch:s}),[r,s,a,i])};class Ce extends cb{name="ApiClientsError"}const hHe=/\{[^{}]+\}/g,gHe=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function yHe(){return Math.random().toString(36).slice(2,11)}function vHe(e){let{baseUrl:t="",Request:n=globalThis.Request,fetch:r=globalThis.fetch,querySerializer:s,bodySerializer:a,headers:i,requestInitExt:l=void 0,...c}={...e};l=gHe()?l:void 0,t=Bq(t);const u=[];async function d(m,p){const{baseUrl:h,fetch:g=r,Request:y=n,headers:v,params:x={},parseAs:b="json",querySerializer:_,bodySerializer:w=a??bHe,body:C,...S}=p||{};h&&(t=Bq(h));let E=typeof s=="function"?s:Uq(s);_&&(E=typeof _=="function"?_:Uq({...typeof s=="object"?s:{},..._}));const M=C===void 0?void 0:w(C),k=M===void 0||M instanceof FormData?{}:{"Content-Type":"application/json"},A={redirect:"follow",...c,...S,body:M,headers:wHe(k,i,v,x.header)};let R,O,L=new n(_He(m,{baseUrl:t,params:x,querySerializer:E}),A),P;for(const T in S)T in L||(L[T]=S[T]);if(u.length){R=yHe(),O=Object.freeze({baseUrl:t,fetch:g,parseAs:b,querySerializer:E,bodySerializer:w});for(const T of u)if(T&&typeof T=="object"&&typeof T.onRequest=="function"){const j=await T.onRequest({request:L,schemaPath:m,params:x,options:O,id:R});if(j)if(j instanceof n)L=j;else if(j instanceof Response){P=j;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!P){try{P=await g(L,l)}catch(T){let j=T;if(u.length)for(let F=u.length-1;F>=0;F--){const U=u[F];if(U&&typeof U=="object"&&typeof U.onError=="function"){const V=await U.onError({request:L,error:j,schemaPath:m,params:x,options:O,id:R});if(V){if(V instanceof Response){j=void 0,P=V;break}if(V instanceof Error){j=V;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(j)throw j}if(u.length)for(let T=u.length-1;T>=0;T--){const j=u[T];if(j&&typeof j=="object"&&typeof j.onResponse=="function"){const F=await j.onResponse({request:L,response:P,schemaPath:m,params:x,options:O,id:R});if(F){if(!(F instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");P=F}}}}if(P.status===204||P.headers.get("Content-Length")==="0")return P.ok?{data:void 0,response:P}:{error:void 0,response:P};if(P.ok)return b==="stream"?{data:P.body,response:P}:{data:await P[b](),response:P};let N=await P.text();try{N=JSON.parse(N)}catch{}return{error:N,response:P}}return{request(m,p,h){return d(p,{...h,method:m.toUpperCase()})},GET(m,p){return d(m,{...p,method:"GET"})},PUT(m,p){return d(m,{...p,method:"PUT"})},POST(m,p){return d(m,{...p,method:"POST"})},DELETE(m,p){return d(m,{...p,method:"DELETE"})},OPTIONS(m,p){return d(m,{...p,method:"OPTIONS"})},HEAD(m,p){return d(m,{...p,method:"HEAD"})},PATCH(m,p){return d(m,{...p,method:"PATCH"})},TRACE(m,p){return d(m,{...p,method:"TRACE"})},use(...m){for(const p of m)if(p){if(typeof p!="object"||!("onRequest"in p||"onResponse"in p||"onError"in p))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");u.push(p)}},eject(...m){for(const p of m){const h=u.indexOf(p);h!==-1&&u.splice(h,1)}}}}function I5(e,t,n){if(t==null)return"";if(typeof t=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${e}=${n?.allowReserved===!0?t:encodeURIComponent(t)}`}function Wde(e,t,n){if(!t||typeof t!="object")return"";const r=[],s={simple:",",label:".",matrix:";"}[n.style]||"&";if(n.style!=="deepObject"&&n.explode===!1){for(const l in t)r.push(l,n.allowReserved===!0?t[l]:encodeURIComponent(t[l]));const i=r.join(",");switch(n.style){case"form":return`${e}=${i}`;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return i}}for(const i in t){const l=n.style==="deepObject"?`${e}[${i}]`:i;r.push(I5(l,t[i],n))}const a=r.join(s);return n.style==="label"||n.style==="matrix"?`${s}${a}`:a}function Hde(e,t,n){if(!Array.isArray(t))return"";if(n.explode===!1){const a={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",i=(n.allowReserved===!0?t:t.map(l=>encodeURIComponent(l))).join(a);switch(n.style){case"simple":return i;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return`${e}=${i}`}}const r={simple:",",label:".",matrix:";"}[n.style]||"&",s=[];for(const a of t)n.style==="simple"||n.style==="label"?s.push(n.allowReserved===!0?a:encodeURIComponent(a)):s.push(I5(e,a,n));return n.style==="label"||n.style==="matrix"?`${r}${s.join(r)}`:s.join(r)}function Uq(e){return function(n){const r=[];if(n&&typeof n=="object")for(const s in n){const a=n[s];if(a!=null){if(Array.isArray(a)){if(a.length===0)continue;r.push(Hde(s,a,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if(typeof a=="object"){r.push(Wde(s,a,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}r.push(I5(s,a,e))}}return r.join("&")}}function xHe(e,t){let n=e;for(const r of e.match(hHe)??[]){let s=r.substring(1,r.length-1),a=!1,i="simple";if(s.endsWith("*")&&(a=!0,s=s.substring(0,s.length-1)),s.startsWith(".")?(i="label",s=s.substring(1)):s.startsWith(";")&&(i="matrix",s=s.substring(1)),!t||t[s]===void 0||t[s]===null)continue;const l=t[s];if(Array.isArray(l)){n=n.replace(r,Hde(s,l,{style:i,explode:a}));continue}if(typeof l=="object"){n=n.replace(r,Wde(s,l,{style:i,explode:a}));continue}if(i==="matrix"){n=n.replace(r,`;${I5(s,l)}`);continue}n=n.replace(r,i==="label"?`.${encodeURIComponent(l)}`:encodeURIComponent(l))}return n}function bHe(e){return e instanceof FormData?e:JSON.stringify(e)}function _He(e,t){let n=`${t.baseUrl}${e}`;t.params?.path&&(n=xHe(n,t.params.path));let r=t.querySerializer(t.params.query??{});return r.startsWith("?")&&(r=r.substring(1)),r&&(n+=`?${r}`),n}function wHe(...e){const t=new Headers;for(const n of e){if(!n||typeof n!="object")continue;const r=n instanceof Headers?n.entries():Object.entries(n);for(const[s,a]of r)if(a===null)t.delete(s);else if(Array.isArray(a))for(const i of a)t.append(s,i);else a!==void 0&&t.set(s,a)}return t}function Bq(e){return e.endsWith("/")?e.substring(0,e.length-1):e}function CHe(e){return vHe(e)}const ff="X-Perplexity-Request-Reason",SHe=()=>{const e=CHe({baseUrl:`https://${crypto.randomUUID()}.com`,fetch:async t=>{const n=new URL(t.url),r=n.pathname,s=n.searchParams,a=await t.text(),i=t.headers.get(ff)??"typedRestAsyncClient";return nie({urlPath:s.size>0?`${r}?${s.toString()}`:r,method:t.method,body:a||void 0,headers:t.headers,timeoutMs:t.timeoutMs,numRetries:t.numRetries,backOffTime:t.backOffTime,reason:i,baseUrlOverride:t.baseUrlOverride,includeCredentials:t.includeCredentials})}});return{...e,GET:(t,n,r)=>e.GET(t,{...r||{},headers:{...r?.headers||{},[ff]:n}}),POST:(t,n,r)=>e.POST(t,{...r||{},headers:{...r?.headers||{},[ff]:n}}),PUT:(t,n,r)=>e.PUT(t,{...r||{},headers:{...r?.headers||{},[ff]:n}}),PATCH:(t,n,r)=>e.PATCH(t,{...r||{},headers:{...r?.headers||{},[ff]:n}}),DELETE:(t,n,r)=>e.DELETE(t,{...r||{},headers:{...r?.headers||{},[ff]:n}}),SSE:(t,n,{path:r,...s})=>(r&&Object.entries(r).forEach(([a,i])=>{t=t.replace(`{${a}}`,i)}),fRe({url:t,...s||{},headers:{...s?.headers||{},[ff]:n}}))}},se=SHe(),Ut={DEFAULT:1200,LOW:2500,MEDIUM:5e3,HIGH:1e4,VERY_HIGH:3e4,EXTREMELY_HIGH:9e4,NONE:0},bu=2,Pe=e=>{const t=e?.productionMs??Ut.DEFAULT;e?.devMs??Ut.HIGH;const n=e?.clientSideMs??Ut.MEDIUM;return typeof window<"u"?n:t},Sh={COPILOT:"COPILOT",ARTICLE:"ARTICLE"},EHe={IN_PROGRESS:"IN_PROGRESS"},Iw={SELECTED:"SELECTED",REVIEWED:"REVIEWED",REVIEWING:"REVIEWING",UNSORTED:"UNSORTED"},yp={CLICK:"CLICK",FILL:"FILL",SEARCH:"SEARCH",NAVIGATE:"NAVIGATE",SCROLL_PAGE:"SCROLL_PAGE",WAIT:"WAIT"},PR={DOWN:"DOWN"},Q4={HISTORY:"HISTORY",OPEN_TABS:"OPEN_TABS",RECENTLY_CLOSED_TABS:"RECENTLY_CLOSED_TABS"},j2={LOGIN:"LOGIN",DOWNLOAD_COMET:"DOWNLOAD_COMET",CREATE_SHORTCUT:"CREATE_SHORTCUT",UPGRADE_TO_ENTERPRISE:"UPGRADE_TO_ENTERPRISE"},Ic={IN_THREAD:"IN_THREAD",SIDEBAR:"SIDEBAR",MODAL:"MODAL",IN_THREAD_BOTTOM:"IN_THREAD_BOTTOM",IN_THREAD_INPUT:"IN_THREAD_INPUT",SIDE_CARD:"SIDE_CARD",COMET_NTP_BANNER:"COMET_NTP_BANNER"},Ua={PRO_UPGRADE:"PRO_UPGRADE",SIGN_UP_OR_LOGIN:"SIGN_UP_OR_LOGIN",REWRITE_ANSWER:"REWRITE_ANSWER",PERMALINK:"PERMALINK",CONNECTOR:"CONNECTOR",THREAD_TO_SPACE:"THREAD_TO_SPACE",SET_DEFAULT_BROWSER:"SET_DEFAULT_BROWSER",COMET_DOWNLOAD:"COMET_DOWNLOAD",IMAGE_ANNOUNCEMENT_MODAL:"IMAGE_ANNOUNCEMENT_MODAL",MERGE_AUTH_CONNECTOR:"MERGE_AUTH_CONNECTOR",SHORTCUT_MODAL:"SHORTCUT_MODAL",OPEN_SHEERID_MODAL:"OPEN_SHEERID_MODAL"},Rw={PRIMARY_COLOR:"PRIMARY_COLOR",SECONDARY_COLOR:"SECONDARY_COLOR",MAX_COLOR:"MAX_COLOR",INVERTED:"INVERTED"},Bt={CODE_ASSET:"CODE_ASSET",CHART:"CHART",CODE_FILE:"CODE_FILE",APP:"APP",GENERATED_IMAGE:"GENERATED_IMAGE",GENERATED_VIDEO:"GENERATED_VIDEO",PDF_FILE:"PDF_FILE",SLIDES:"SLIDES",DOCX_FILE:"DOCX_FILE",XLSX_FILE:"XLSX_FILE"},MHe={MCP_SERVER_TYPE_LOCAL:"MCP_SERVER_TYPE_LOCAL"},iZt={PENDING:"PENDING"},X4={BROWSER_HISTORY:"BROWSER_HISTORY",OPEN_TAB:"OPEN_TAB",RECENTLY_CLOSED_TAB:"RECENTLY_CLOSED_TAB"},qn={PENDING:"PENDING",COMPLETED:"COMPLETED",FAILED:"FAILED",STAGED:"STAGED",RESUMING:"RESUMING",BLOCKED:"BLOCKED"},ag={NONE:"NONE",INCOGNITO:"INCOGNITO"},lZt={FULL:"FULL",STREAMING:"STREAMING"},Mc={IN_PROGRESS:"IN_PROGRESS",DONE:"DONE"},Vq={FINANCE:"FINANCE"},cZt={CALENDAR_EVENT:"CALENDAR_EVENT",PLACE_CARD:"PLACE_CARD",SHOPPING_CARD:"SHOPPING_CARD",CALENDAR_ACTION:"CALENDAR_ACTION",MOVIE_TV_CARD:"MOVIE_TV_CARD"},Ii={SELECTION_STATUS_UNSPECIFIED:"SELECTION_STATUS_UNSPECIFIED",UNSELECTED:"UNSELECTED",SELECTED:"SELECTED",TIE:"TIE"},mn={HOTELS:"HOTELS",SHOPPING:"SHOPPING",JOBS:"JOBS",IMAGE:"IMAGE",VIDEO:"VIDEO",SOURCES:"SOURCES",MAPS:"MAPS",ASSETS:"ASSETS",APPS:"APPS",TASKS:"TASKS",SEARCH:"SEARCH",CHAT:"CHAT"},kHe=async({entryUUID:e,params:t,reason:n})=>{try{return(await se.POST("/rest/entry/should-show-feedback/{entry_uuid}",n,{params:{path:{entry_uuid:e}},body:t,timeoutMs:Pe({productionMs:500,devMs:1e3,clientSideMs:1e3}),numRetries:0})).data?.should_show_feedback??!1}catch(r){return ne.error("Failed to check if should show feedback",r),!1}},THe=async({reason:e,lastEventTimestamp:t})=>(await se.GET("/rest/entry/creation-events",e,{params:{query:{last_event_timestamp_us:t}},timeoutMs:Ut.EXTREMELY_HIGH,numRetries:1})).data?.events.map(s=>({contextUUID:s.context_uuid,entryUUID:s.entry_uuid,isPersonalIntent:s.is_personal_intent,cometIsMissionControl:s.comet_is_mission_control,timestamp:s.timestamp_us}))||[],NHe=({callback:e,reason:t})=>{let s,a=!0,i=null;return(async()=>{for(;a;)try{const c=await THe({reason:t,lastEventTimestamp:s});if(c.length>0&&(s=Math.max(...c.map(u=>u.timestamp)),await e(c)),!a)break;await new Promise(u=>{i=setTimeout(u,500)})}catch(c){if(ne.error("Failed to poll for entry creation events",c),!a)break;await new Promise(u=>{i=setTimeout(u,2e3)})}})(),()=>{a=!1,i&&(clearTimeout(i),i=null)}},a1=async({slugOrUUID:e,headers:t,options:n,numRetries:r=0,reason:s})=>{const a="getThreadByUUID";if(!e||e==="undefined"||e==="new"){ne.log(`Tried to ${a} with bad slugOrUUID: ${e}`);return}const i=n?.withParentInfo??!1,l=n?.version??ac,c=n?.source??Ide,u=n?.limit??0,d=n?.offset??0,m=n?.fromFirst??!1,p=n?.supportedBlockUseCases??[],h=n?.cursor??null;try{const g=await se.GET("/rest/thread/{entry_uuid_or_slug}",s,{params:{path:{entry_uuid_or_slug:e},query:{with_parent_info:i,with_schematized_response:!0,version:l,source:c,limit:u,offset:d,from_first:m,supported_block_use_cases:p,cursor:h}},timeoutMs:Ut.HIGH,numRetries:r,headers:t});if(!g.response.ok||!g.data||g.error)throw g.error?new Error(`Failed to ${a} for ${e}`,{cause:g.error.detail}):new Error(`Failed to ${a} for ${e}`);return g.data}catch(g){throw ne.error("Failed to get thread by uuid",g),g}},uZt=async({entryUUID:e,selectedText:t,beforeContext:n,afterContext:r,callback:s,reason:a})=>{await se.SSE("/rest/sse/check-sources",a,{params:{entry_uuid_or_slug:e,selected_text:t,before_context:n,after_context:r},handlers:{message:i=>s(i)}})},dZt=async({entryUUID:e,answerHelpful:t,detailedFeedback:n,reason:r})=>{try{const{error:s}=await se.POST("/rest/entry/feedback/{entry_uuid}",r,{params:{path:{entry_uuid:e}},body:{answer_helpful:t??!1,feedback:n},timeoutMs:Pe({productionMs:5e3}),numRetries:1});if(s)throw new Ce("API_CLIENTS_ERROR",{cause:s})}catch(s){ne.error(s)}},fZt=async({entryUUID:e,params:t,reason:n})=>{if(e)try{const{error:r}=await se.POST("/rest/entry/label-entry/{entry_uuid}",n,{params:{path:{entry_uuid:e}},body:t,timeoutMs:Pe({productionMs:5e3}),numRetries:1});if(r)throw new Ce("API_CLIENTS_ERROR",{cause:r})}catch(r){ne.error(r)}},mZt=async({entry_uuid:e,format:t,reason:n})=>{const{data:r,error:s}=await se.POST("/rest/entry/export",n,{body:{entry_uuid:e,format:t},timeoutMs:Pe({productionMs:6e3}),numRetries:1});if(s)throw new Ce("API_CLIENTS_ERROR",{cause:s});return r},jHe=async({slugOrUUID:e,reason:t})=>{const{error:n}=await se.POST("/rest/thread/request-access/{entry_uuid_or_slug}",t,{params:{path:{entry_uuid_or_slug:e}}});if(n)throw new Ce("API_CLIENTS_ERROR",{cause:n})},lu=async({entryUUID:e,reason:t})=>{try{const{error:n}=await se.POST("/rest/sse/perplexity_terminate",t,{headers:{"content-type":"application/json"},body:{entry_uuid:e},timeoutMs:Pe({productionMs:5e3}),numRetries:1});return!n}catch(n){return ne.error("Failed to terminate entry",n),!1}},AHe=async({entryUUID:e,reason:t})=>{try{await se.POST("/rest/sse/perplexity_skip_search",t,{headers:{"content-type":"application/json"},body:{entry_uuid:e}})}catch(n){ne.error("Failed to skip search",n)}},IHe=async({entryUUID:e,clarification:t,reason:n})=>{try{await se.POST("/rest/sse/perplexity_clarifying_answer",n,{headers:{"content-type":"application/json"},body:{entry_uuid:e,clarification:t},timeoutMs:Pe({productionMs:5e3}),numRetries:0})}catch(r){ne.error("Failed to give clarifying answer",r)}},RHe=async({entryUUID:e,reason:t})=>{try{return(await se.POST("/rest/entry/should-show-recruitment-banner/{entry_uuid}",t,{params:{path:{entry_uuid:e}},body:void 0,timeoutMs:Pe({productionMs:500,devMs:1e3,clientSideMs:1e3}),numRetries:0})).data?.should_show_recruitment_banner??!1}catch(n){return ne.error("Failed to check if should show recruitment banner",n),!1}},o1=async({contextUUID:e,stepUUID:t,result:n,reason:r})=>{try{const{data:s,error:a}=await se.POST("/rest/sse/pro_search_step_result",r,{body:{context_uuid:e,step_uuid:t,result:n},timeoutMs:Pe({productionMs:5e3}),numRetries:0});if(a)throw new Ce("API_CLIENTS_ERROR",{cause:a});return s?.status==="completed"?s.should_resume:!1}catch(s){ne.error(s)}return!1},PHe=async({entryUUID:e,params:t,siblingUUID:n,reason:r})=>{const{error:s}=await se.POST("/rest/entry/set-entry-selection/{entry_uuid}",r,{params:{path:{entry_uuid:e}},body:{selection_status:t,sibling_uuid:n},timeoutMs:Pe({productionMs:5e3}),numRetries:1});if(s)throw new Ce("API_CLIENTS_ERROR",{cause:s})},zde=I.memo(({lineColor:e,width:t,fillColor:n,...r})=>{const s=B("h-auto group",t),a=B(e,"transition-all duration-300");return o.jsx("div",{className:s,...r,children:o.jsxs("svg",{viewBox:"0 0 400 91",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M196.978 27.8931H200.033V34.1872H196.079C192.979 34.1872 190.669 34.9333 189.14 36.4254C187.615 37.9176 186.85 40.3662 186.85 43.7711V64.401H180.606V28.0333H186.85V33.8367C186.85 34.1622 187.014 34.3274 187.337 34.3274C187.52 34.3274 187.659 34.2823 187.754 34.1872C187.848 34.0921 187.938 33.9068 188.032 33.6264C189.234 29.8058 192.219 27.8931 196.983 27.8931H196.978ZM237.763 35.6894C239.402 38.6036 240.227 42.1137 240.227 46.2146C240.227 50.3156 239.407 53.8257 237.763 56.7399C236.119 59.6541 233.993 61.8323 231.38 63.2794C228.767 64.7265 225.956 65.4476 222.951 65.4476C217.03 65.4476 212.868 63.0691 210.464 58.3122C210.28 57.9417 210.046 57.7514 209.768 57.7514C209.49 57.7514 209.351 57.8916 209.351 58.172V77.6853H203.107V28.0333H209.351V34.2573C209.351 34.5377 209.49 34.6779 209.768 34.6779C210.046 34.6779 210.275 34.4926 210.464 34.1171C212.868 29.3602 217.03 26.9817 222.951 26.9817C225.956 26.9817 228.767 27.7028 231.38 29.1499C233.993 30.597 236.119 32.7751 237.763 35.6894ZM233.983 46.2146C233.983 41.9234 232.841 38.5786 230.551 36.1801C228.261 33.7816 225.246 32.5799 221.496 32.5799C217.745 32.5799 214.73 33.7816 212.44 36.1801C210.151 38.5836 209.311 41.9284 209.311 46.2146C209.311 50.5009 210.151 53.8507 212.44 56.2492C214.73 58.6527 217.75 59.8494 221.496 59.8494C225.241 59.8494 228.261 58.6477 230.551 56.2492C232.841 53.8507 233.983 50.5009 233.983 46.2146ZM134.595 35.7445C136.235 38.6587 137.059 42.1688 137.059 46.2697C137.059 50.3707 136.24 53.8808 134.595 56.795C132.951 59.7092 130.825 61.8874 128.213 63.3345C125.6 64.7816 122.788 65.5026 119.783 65.5026C113.863 65.5026 109.7 63.1242 107.296 58.3673C107.112 57.9967 106.879 57.8065 106.601 57.8065C106.322 57.8065 106.183 57.9467 106.183 58.2271V77.7404H99.9446V28.0883H106.188V34.3124C106.188 34.5928 106.327 34.733 106.606 34.733C106.884 34.733 107.112 34.5477 107.301 34.1722C109.705 29.4153 113.867 27.0368 119.788 27.0368C122.793 27.0368 125.605 27.7579 128.218 29.205C130.83 30.6521 132.956 32.8302 134.6 35.7445H134.595ZM130.815 46.2697C130.815 41.9785 129.673 38.6336 127.383 36.2352C125.093 33.8367 122.078 32.6349 118.328 32.6349C114.578 32.6349 111.563 33.8367 109.273 36.2352C106.983 38.6387 106.144 41.9835 106.144 46.2697C106.144 50.5559 106.983 53.9058 109.273 56.3043C111.563 58.7078 114.578 59.9045 118.328 59.9045C122.078 59.9045 125.093 58.7028 127.383 56.3043C129.673 53.9058 130.815 50.5559 130.815 46.2697ZM169.112 52.8543H175.703C174.824 56.2592 173.031 59.2085 170.329 61.7021C167.622 64.1957 163.748 65.4425 158.706 65.4425C154.911 65.4425 151.573 64.6614 148.682 63.0991C145.791 61.5369 143.561 59.3137 141.986 56.4195C140.412 53.5303 139.627 50.1253 139.627 46.2096C139.627 42.294 140.392 38.889 141.917 35.9998C143.442 33.1106 145.583 30.8824 148.335 29.3201C151.086 27.7579 154.31 26.9767 158.011 26.9767C161.711 26.9767 164.776 27.7479 167.344 29.2851C169.912 30.8223 171.829 32.8653 173.101 35.404C174.372 37.9477 175.008 40.7317 175.008 43.7611V47.9572H146.219C146.447 51.5925 147.664 54.4867 149.859 56.6298C152.055 58.7729 155.005 59.8494 158.706 59.8494C161.711 59.8494 164.016 59.2335 165.61 57.9967C167.205 56.7599 168.372 55.0475 169.112 52.8543ZM146.288 42.7146H168.074C168.074 39.545 167.264 37.0614 165.645 35.2638C164.026 33.4712 161.483 32.5699 158.015 32.5699C154.777 32.5699 152.129 33.4461 150.073 35.1937C148.017 36.9412 146.755 39.4498 146.293 42.7096L146.288 42.7146ZM245.169 64.396H251.413V14.043H245.169V64.401V64.396ZM331.801 24.0625H339.093V16.1911H331.801V24.0625ZM357.526 58.9782C356.393 59.0933 355.708 59.1534 355.479 59.1534C355.156 59.1534 354.898 59.0583 354.714 58.873C354.531 58.6877 354.436 58.4324 354.436 58.1019C354.436 57.8716 354.496 57.1806 354.61 56.0389C354.724 54.8972 354.784 53.1347 354.784 50.7612V33.361H363.69L361.937 28.0333H354.789V18.2391H348.545V28.0283H341.755V33.356H348.545V52.5038C348.545 56.5146 349.519 59.4989 351.461 61.4568C353.403 63.4146 356.363 64.396 360.342 64.396H365.2V58.8029H362.771C360.412 58.8029 358.663 58.863 357.531 58.9782H357.526ZM394.059 28.0283L383.723 58.5425C383.583 58.9181 383.365 59.4088 382.655 59.4088C381.944 59.4088 381.726 58.9181 381.587 58.5425L371.25 28.0283H364.882L376.853 64.396H381.085C381.363 64.396 381.572 64.4211 381.711 64.4661C381.85 64.5112 381.964 64.6264 382.059 64.8166C382.242 65.097 382.217 65.5177 381.989 66.0735L380.047 71.3862C379.769 72.0872 379.237 72.4377 378.452 72.4377C378.174 72.4377 377.529 72.3776 376.51 72.2624C375.492 72.1473 374.176 72.0872 372.556 72.0872H367.49V77.6803H374.151C378.035 77.6803 380.375 77.0143 382.386 75.6874C384.398 74.3605 385.958 72.0171 387.07 68.6572L400 29.4203V28.0233H394.059V28.0283ZM311.406 41.5979L301.626 28.0283H294.756V29.4253L306.478 45.1631L292.188 62.999V64.396H299.197L310.576 49.7798L321.191 64.396H327.922V62.999L315.504 46.2146L328.965 29.5004V28.0333H321.956L311.411 41.603L311.406 41.5979ZM332.467 64.396H338.71V28.0333H332.467V64.401V64.396ZM292.471 52.8543C291.592 56.2592 289.799 59.2085 287.097 61.7021C284.39 64.1957 280.515 65.4425 275.474 65.4425C271.679 65.4425 268.341 64.6614 265.45 63.0991C262.559 61.5369 260.329 59.3137 258.754 56.4195C257.18 53.5303 256.395 50.1253 256.395 46.2096C256.395 42.294 257.16 38.889 258.685 35.9998C260.21 33.1106 262.35 30.8824 265.102 29.3201C267.854 27.7579 271.078 26.9767 274.778 26.9767C278.479 26.9767 281.543 27.7479 284.111 29.2851C286.679 30.8223 288.597 32.8653 289.868 35.404C291.14 37.9477 291.776 40.7317 291.776 43.7611V47.9572H262.986C263.215 51.5925 264.432 54.4867 266.627 56.6298C268.823 58.7729 271.773 59.8494 275.474 59.8494C278.479 59.8494 280.783 59.2335 282.378 57.9967C283.972 56.7599 285.14 55.0475 285.88 52.8543H292.471ZM263.056 42.7146H284.842C284.842 39.545 284.032 37.0614 282.413 35.2638C280.793 33.4712 278.25 32.5699 274.783 32.5699C271.545 32.5699 268.897 33.4461 266.841 35.1937C264.784 36.9412 263.523 39.4498 263.061 42.7096L263.056 42.7146Z",className:n}),o.jsx("path",{d:"M38.6936 29.9832L12.8633 5.88983V29.9832H38.6936Z M39.5005 29.9832L65.3308 5.88983V29.9832H39.5005Z M38.7227 2L38.7227 90.2534 M64.5246 53.7584L38.6943 30.0068V62.9404L64.5246 85.9724V53.7584Z M12.8924 53.7584L38.7227 30.0068V62.9404L12.8924 85.9724V53.7584Z M2.28711 29.9832V64.4236H12.8863V53.7348L38.7226 29.9832H2.28711Z M38.6943 30.3L64.5246 54.0515V64.7403H75.2872V30.3L38.6943 30.3Z",className:a,strokeWidth:"4.30504",strokeMiterlimit:"10"})]})})});zde.displayName="Full";const Gde=I.memo(({width:e,fillColor:t,...n})=>{const r=B("h-auto group",e,{});return o.jsx("div",{className:r,...n,children:o.jsxs("svg",{viewBox:"0 0 1456 187",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M311.555 34.9571C330.01 34.9571 344.672 45.7532 344.672 65.084C344.672 84.4148 330.01 95.3568 311.555 95.3568H279.094V140H265.817V34.9571H311.555ZM279.094 84.0501H309.585C322.643 84.0501 331.396 77.1931 331.396 65.157C331.396 53.0478 322.643 46.2638 309.585 46.2638H279.094V84.0501ZM353.444 102.797C353.444 77.7037 367.669 63.9169 390.209 63.9169C412.823 63.9169 425.151 77.8496 425.151 99.5877V105.934H365.918C366.137 121.399 375.255 131.465 390.209 131.465C404.434 131.465 410.926 123.587 412.093 116.73H423.619V118.918C421.868 128.037 413.187 141.751 390.355 141.751C367.815 141.751 353.444 127.964 353.444 102.797ZM366.064 95.8674H412.896C412.75 83.2477 405.09 74.1294 390.136 74.1294C375.474 74.1294 367.085 83.3936 366.064 95.8674ZM447.732 65.6676H460.133V76.1719H461.3C464.218 69.8985 469.908 65.4487 483.257 65.4487H500.691V76.3907H483.549C467.501 76.3907 460.571 84.7795 460.571 101.849V140H447.732V65.6676ZM517.092 169.179V65.6676H529.638V75.8801H530.805C536.349 67.3453 545.322 63.9898 555.826 63.9898C575.157 63.9898 589.965 77.1202 589.965 102.87C589.965 128.547 575.157 141.678 555.826 141.678C545.541 141.678 536.641 138.395 531.097 130.152H529.93V169.179H517.092ZM529.492 102.87C529.492 120.888 539.121 131.028 553.2 131.028C567.425 131.028 576.981 120.888 576.981 102.87C576.981 84.7795 567.425 74.64 553.2 74.64C539.121 74.64 529.492 84.7795 529.492 102.87ZM637.266 34.9571V129.642H651.272V140H605.899V129.642H624.428V45.2426H610.276V34.9571H637.266ZM665.9 102.797C665.9 77.7037 680.125 63.9169 702.665 63.9169C725.278 63.9169 737.606 77.8496 737.606 99.5877V105.934H678.374C678.593 121.399 687.711 131.465 702.665 131.465C716.89 131.465 723.382 123.587 724.549 116.73H736.074V118.918C734.324 128.037 725.643 141.751 702.811 141.751C680.27 141.751 665.9 127.964 665.9 102.797ZM678.52 95.8674H725.351C725.205 83.2477 717.546 74.1294 702.592 74.1294C687.93 74.1294 679.541 83.3936 678.52 95.8674ZM752.566 65.6676H765.696L786.851 93.3143H788.018L810.85 65.6676H823.762V67.856L795.313 102.36L822.522 137.812V140H809.391L787.289 111.186H786.121L762.414 140H749.502V137.812L778.827 102.214L752.566 67.856V65.6676ZM871.43 65.6676V129.642H885.436V140H840.063V129.642H858.591V75.953H844.44V65.6676H871.43ZM857.205 52.9749V38.8962H872.087V52.9749H857.205ZM896.344 65.6676H919.613V43.8566H932.452V65.6676H962.068V76.0989H932.452V127.745L933.619 128.912H961.849V140H938.725C926.543 140 919.613 133.945 919.613 121.836V76.0989H896.344V65.6676ZM973.245 65.6676H986.302L1010.01 124.681H1011.18L1034.81 65.6676H1047.5V67.856L1004.76 169.179H991.992V166.99L1003.66 139.927L973.245 67.856V65.6676ZM1116.67 34.9571H1130.09V128.256H1189.03V140H1116.67V34.9571ZM1205.12 86.3114C1206.66 72.5245 1218.55 63.9169 1237.95 63.9169C1257.21 63.9169 1268.59 72.5245 1268.59 91.0529V140H1256.62V129.787H1255.46C1252.25 135.477 1244.66 141.605 1229.05 141.605C1212.78 141.605 1201.55 133.508 1201.55 119.648C1201.55 104.913 1212.78 98.4205 1227.96 96.5239L1256.19 93.0225V90.3235C1256.19 78.725 1249.84 74.1294 1237.66 74.1294C1225.4 74.1294 1218.18 78.725 1217.16 88.4998H1205.12V86.3114ZM1214.31 119.064C1214.31 126.797 1220.88 131.246 1231.17 131.246C1244.88 131.246 1256.19 123.952 1256.19 107.539V102.943L1230.51 106.299C1220.52 107.612 1214.31 111.259 1214.31 119.064ZM1291.61 34.9571H1304.44V75.5153H1305.61C1311.16 67.1995 1320.06 63.9898 1330.34 63.9898C1349.67 63.9898 1364.48 77.1202 1364.48 102.87C1364.48 128.547 1349.67 141.678 1330.34 141.678C1319.84 141.678 1310.86 138.322 1305.32 129.787H1304.15V140H1291.61V34.9571ZM1304.01 102.87C1304.01 120.888 1313.64 131.028 1327.71 131.028C1341.94 131.028 1351.49 120.888 1351.49 102.87C1351.49 84.7795 1341.94 74.64 1327.71 74.64C1313.64 74.64 1304.01 84.7795 1304.01 102.87ZM1381.07 85.1443C1381.07 71.941 1392.52 63.9898 1411.78 63.9898C1431.18 63.9898 1443 71.941 1444.17 86.0926V88.281H1432.42C1431.91 77.9955 1423.74 74.1294 1411.85 74.1294C1400.04 74.1294 1393.4 77.9226 1393.4 84.8525C1393.4 91.7824 1399.09 94.4085 1407.19 95.3568L1419.95 96.9616C1434.98 98.7853 1445.41 105.132 1445.41 118.773C1445.41 132.487 1434.54 141.678 1413.9 141.678C1393.25 141.678 1380.34 132.559 1379.39 119.064V116.876H1391.36C1392.09 126.943 1401.28 131.538 1413.9 131.538C1426.59 131.538 1433.01 126.87 1433.01 119.429C1433.01 112.134 1426.95 108.852 1417.18 107.612L1404.41 106.007C1390.41 104.329 1381.07 98.2017 1381.07 85.1443Z",className:t}),o.jsx("path",{d:"M59.4967 39.8367C30.9654 39.8367 7.83624 62.9671 7.83624 91.5C7.83624 120.033 30.9654 143.163 59.4967 143.163C83.9985 143.163 104.516 126.105 109.823 103.216H117.84C112.399 130.466 88.3457 151 59.4967 151C26.6376 151 0 124.361 0 91.5C0 58.639 26.6376 32 59.4967 32C91.0393 32 116.849 56.5473 118.866 87.5817H155.879L123.292 54.9276L128.838 49.3918L161.428 82.0483L161.387 35.9218L169.223 35.9149L169.264 82.0641L201.87 49.3918L207.416 54.9276L174.829 87.5817H221V95.4183H174.771L207.416 128.131L201.87 133.667L169.281 101.011L169.321 147.157L161.485 147.163L161.444 100.993L128.838 133.667L123.292 128.131L155.937 95.4183H129.748V95.3791H84.6892V95.4183H59.495V87.5817H111.011C109.008 60.8792 86.7098 39.8367 59.4967 39.8367Z",className:t})]})})});Gde.displayName="Labs";const qde=I.memo(({lineColor:e,width:t,...n})=>{const r=B("h-auto group ",t);return o.jsx("div",{className:r,...n,children:o.jsx("svg",{viewBox:"0 0 101 116",stroke:"none",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{className:e,d:"M86.4325 6.53418L50.4634 36.9696H86.4325V6.53418Z M50.4625 36.9696L17.2603 6.53418V36.9696H50.4625Z M50.4634 1L50.4634 114.441 M83.6656 70.172L50.4634 36.9697V79.3026L83.6656 108.908V70.172Z M17.2603 70.172L50.4625 36.9697V78.4497L17.2603 108.908V70.172Z M3.42627 36.9697V81.2394H17.2605V70.172L50.4628 36.9697H3.42627Z M50.4634 36.9697L83.6656 70.172V81.2394H97.4999V36.9697L50.4634 36.9697Z",strokeWidth:"5.53371",strokeMiterlimit:"10"})})})});qde.displayName="Mark";const R5=I.memo(({width:e="w-10",sizeVariant:t="regular",fillColor:n="fill-super",svgClassName:r,...s})=>{const a=B("h-auto group",e);return o.jsx("div",{className:a,...s,children:t==="small"?o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1102.02 529.46",className:r,children:[o.jsx("path",{className:n,d:"M1068.23,126.49c-23.5-41.68-58.35-75.11-100.77-96.67C928.5,10.04,884.37,0,836.29,0H66.16C29.56,0-.08,29.71,0,66.3l1,463.16h109.72V107.9h78.16v24.37c0,2.66,3.19,3.99,5.1,2.13,20.89-20.25,50.62-30.5,88.64-30.5,26.8,0,51.2,6.11,72.52,18.17,21.44,12.13,38.59,30.51,50.96,54.66h0c12.27,23.95,18.49,53.6,18.49,88.14s-6.22,63.91-18.49,87.85c-12.37,24.14-29.52,42.53-50.96,54.66-21.33,12.06-45.73,18.17-72.52,18.17-16.55,0-55.7-2.68-87.27-25.54-1.98-1.43-4.75-.01-4.75,2.43v127.02h645.68c48.09,0,92.22-10.03,131.18-29.83,42.41-21.55,77.26-54.98,100.78-96.69,22.41-39.76,33.78-86.22,33.78-138.07s-11.37-98.6-33.79-138.39ZM650.3,177.46h-33.53c-23.25,0-40.37,6.1-50.86,18.14-10.7,12.27-16.12,32.09-16.12,58.91v164.71h-79.89V107.9h77.01v20.91c0,2.68,3.28,4.04,5.13,2.11,4.56-4.76,9.87-8.79,15.89-12.06,11.94-6.49,28.27-9.77,48.55-9.77h33.81v68.37ZM967.21,352.21c-13.66,24.23-33.03,42.83-57.56,55.29-24.32,12.36-52.71,18.62-84.38,18.62s-60.35-6.27-84.67-18.62c-24.54-12.46-43.9-31.07-57.56-55.29-13.58-24.09-20.47-53.47-20.47-87.34s6.89-63.54,20.47-87.63c13.65-24.22,33.02-42.82,57.56-55.29,24.33-12.36,52.81-18.62,84.67-18.62s60.06,6.27,84.38,18.62c24.53,12.47,43.9,31.07,57.56,55.29,13.58,24.1,20.47,53.58,20.47,87.63s-6.89,63.25-20.47,87.34Z"}),o.jsx("path",{className:n,d:"M868.46,179.51c-12.16-7.28-26.7-10.97-43.2-10.97s-31.32,3.69-43.48,10.97c-12.07,7.23-21.57,18.05-28.23,32.16-6.79,14.4-10.23,32.3-10.23,53.2s3.45,38.57,10.24,53.07c6.66,14.2,16.19,25.06,28.35,32.28,12.26,7.29,26.85,10.98,43.36,10.98s31.04-3.69,43.2-10.97c12.07-7.23,21.56-18.09,28.22-32.29,6.79-14.5,10.24-32.35,10.24-53.07s-3.45-38.57-10.24-53.07c-6.66-14.2-16.15-25.07-28.22-32.29Z"}),o.jsx("path",{className:n,d:"M221.1,351.54c12.26,7.29,26.85,10.98,43.36,10.98s31.04-3.69,43.2-10.97c12.07-7.23,21.56-18.09,28.22-32.29,6.79-14.5,10.24-32.35,10.24-53.07s-3.45-38.57-10.24-53.07c-6.66-14.2-16.15-25.06-28.22-32.29-12.16-7.28-26.7-10.97-43.19-10.97s-31.32,3.69-43.48,10.97c-12.07,7.23-21.57,18.05-28.23,32.16-6.79,14.4-10.23,32.3-10.23,53.2s3.45,38.57,10.24,53.07c6.66,14.2,16.19,25.06,28.35,32.28Z"})]}):o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 804.75 382.36",children:[o.jsx("path",{className:n,d:"M558.95,126.72c-27.44,27.72-27.17,101.45,0,129.38,25.44,28.65,83.99,28.94,109.2,0h0c13.9-14.68,20.94-38.51,20.94-64.92,0-26.44-7.04-50.1-20.98-64.5-25.23-29.51-83.73-29.21-109.17.04Z"}),o.jsx("path",{className:n,d:"M780.18,91.05l-.13-.24c-16.48-29.44-40.65-53.13-69.89-68.52l-.17-.09c-27.73-14.73-58.76-22.2-92.21-22.2H30.68C14.13,0,.71,13.4.68,29.94l-.68,352.42h61.16V69.44h51.68v20.46c0,2.11,2.57,3.13,4.03,1.6,47.58-52.18,144.58-36.94,178.65,27.45,11.54,19.66,17.39,43.96,17.39,72.23,1.63,73.04-48.06,131.68-120.25,131.21-32.37,0-57.81-12.59-75.79-31.52-1.45-1.53-4.03-.51-4.03,1.6v89.9h504.93c33.45,0,64.43-7.45,92.09-22.14l.17-.09c29.33-15.43,53.53-39.13,69.99-68.53l.14-.25c16.31-28.74,24.58-62.44,24.58-100.17s-8.27-71.4-24.57-100.13ZM479.99,118.23c-23.81.5-56.08-3.74-72.26,13-8.74,8.61-13.17,23.4-13.17,43.96v140.34h-51.67V69.44h51.67v20.46c0,2.35,3.08,3.22,4.32,1.22,5.01-8.06,10.34-13.58,16.12-16.74,9.81-5.62,23.28-8.48,40.05-8.48h24.94v52.31ZM613.77,322.39c-75.99.52-128.52-54.09-127-131.21,0-27.33,5.53-51.14,16.45-70.78,43.24-80.65,177.73-80.74,220.65-.03,11.22,19.65,16.91,43.48,16.91,70.8,1.27,76.58-51.1,131.74-127,131.21Z"}),o.jsx("path",{className:n,d:"M240.29,256.1h0c13.9-14.68,20.94-38.51,20.94-64.92,0-26.44-7.04-50.1-20.98-64.5-25.23-29.51-83.73-29.21-109.17.04-27.44,27.72-27.18,101.45,0,129.38,25.44,28.65,83.99,28.94,109.2,0Z"})]})})});R5.displayName="Pro";const Kde=I.memo(({width:e,fillColor:t,isPro:n,isMax:r,isEnterprise:s,...a})=>{const i=B("h-auto group",e,{"":n});return s&&n?o.jsx("div",{className:i,...a,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 797 82",children:[o.jsx("path",{className:"fill-super",d:"M602.964 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM684.483 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM655.961 28.046c-2.103-3.728-4.814-6.52-8.15-8.37-3.336-1.85-6.922-2.774-10.757-2.774-7.558 0-12.872 3.044-15.94 9.134-.239.482-.529.718-.887.718-.357 0-.534-.184-.534-.54v-7.968h-7.968v63.552h7.968V56.82c0-.363.182-.54.534-.54.352 0 .653.24.887.718 3.068 6.089 8.382 9.134 15.94 9.134 3.835 0 7.421-.925 10.757-2.775 3.336-1.85 6.052-4.64 8.15-8.369 2.096-3.728 3.142-8.221 3.142-13.471s-1.051-9.743-3.142-13.471Zm-9.202 26.315c-2.92 3.068-6.773 4.608-11.558 4.608-4.784 0-8.637-1.527-11.559-4.608-2.921-3.073-3.994-7.358-3.994-12.844s1.068-9.772 3.994-12.845c2.922-3.067 6.768-4.607 11.559-4.607 4.791 0 8.638 1.534 11.558 4.607 2.922 3.073 4.382 7.353 4.382 12.845 0 5.491-1.46 9.776-4.382 12.844ZM567.986 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.035 1.585-4.978 2.372-8.815 2.372-4.722 0-8.49-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.068-5.859-7.347-7.83-3.274-1.964-7.189-2.953-11.911-2.953-4.721 0-8.836 1-12.349 3-3.511 1.998-6.244 4.847-8.188 8.547-1.944 3.7-2.921 8.053-2.921 13.069 0 5.015 1 9.369 3.012 13.069 2.013 3.704 4.86 6.549 8.548 8.548 3.688 2 7.95 2.998 12.791 2.998 6.438 0 11.383-1.59 14.837-4.785 3.45-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.626-2.24 6.007-3.36 10.138-3.36 4.427 0 7.672 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.591-4.176 2.199-7.388 4.824-9.622ZM443.533 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.293-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.807-7.44-2.431-10.697-1.626-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953-4.722 0-8.837 1-12.349 3-3.512 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015.999 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.791 2.998 6.439 0 11.383-1.59 14.838-4.785 3.449-3.188 5.739-6.962 6.858-11.322h-8.41l-.002.002Zm-24.572-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.74 3.447 2.069 2.297 3.103 5.48 3.103 9.536h-27.806c.591-4.176 2.2-7.388 4.825-9.622ZM788.588 50.015l-.005-.012c-.95 2.81-2.438 4.998-4.473 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953s-8.836 1-12.349 3c-3.511 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015 1 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.792 2.998 6.438 0 11.382-1.59 14.837-4.785 3.449-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.59-4.176 2.199-7.388 4.824-9.622ZM520.476 57.857c-1.447.15-2.323.224-2.61.224-.411 0-.747-.12-.978-.362-.235-.236-.358-.563-.358-.988 0-.293.076-1.178.227-2.642.141-1.459.221-3.716.221-6.756V25.062h11.099v-6.819h-11.095V5.708h-7.964v12.53h-8.669v6.819h8.669v24.505c0 5.136 1.244 8.957 3.719 11.46 2.478 2.506 6.257 3.763 11.34 3.763h6.198v-7.158h-3.102c-3.011 0-5.242.075-6.689.225l-.008.006v-.001ZM701.809 3.087H692.5v10.076h9.309V3.087ZM701.319 18.245h-7.972v46.543h7.972V18.245ZM498.872 36.41V64.8h-7.861V37.72c0-8.299-4.281-12.665-12.229-12.665-8.997 0-13.976 5.415-13.976 16.16V64.8h-7.861V19.379h7.861v5.065c0 .438.174.612.611.612.438 0 .874-.7.962-.786 3.057-4.104 7.773-6.202 14.15-6.202 11.443 0 18.344 6.726 18.344 18.343h-.001ZM747.71 33.002h-8.503c-.448-5.997-4.654-8.95-12.531-8.95-6.803 0-10.742 2.953-10.742 6.98 0 3.491 2.328 4.566 8.504 5.909l8.503 1.79c9.22 1.88 14.322 4.834 14.322 12.621 0 8.593-7.886 14.77-19.701 14.77-14.232 0-19.979-6.982-21.501-17.455h8.504c1.163 6.892 4.526 10.294 13.387 10.294 7.787 0 11.255-3.223 11.255-7.161 0-2.595-1.432-3.85-3.849-4.565-1.164-.359-3.223-.806-5.998-1.432l-8.503-1.79c-8.235-1.7-12.978-5.282-12.978-12.801 0-4.386 1.79-7.877 5.37-10.473 3.581-2.596 8.235-3.85 13.873-3.85 11.637 0 20.23 6.356 20.588 16.112v.002Z"}),o.jsx("path",{className:t,d:"M125.928 17.801h3.916v8.087h-5.069c-3.971 0-6.932.957-8.896 2.878-1.952 1.914-2.932 5.064-2.932 9.442v26.516h-8V17.985h8v7.458c0 .421.211.628.622.628.234 0 .41-.058.536-.178.126-.122.233-.358.359-.722 1.54-4.909 5.37-7.366 11.469-7.366h-.005V17.8v.001Zm53.217 10.02c2.099 3.742 3.155 8.254 3.155 13.526 0 5.271-1.051 9.783-3.155 13.526-2.106 3.744-4.834 6.547-8.184 8.404-3.35 1.858-6.95 2.786-10.801 2.786-7.589 0-12.925-3.057-16.006-9.172-.234-.479-.536-.721-.89-.721-.353 0-.536.179-.536.543v25.08h-8.001V17.98h8.001v8c0 .358.176.543.536.543.36 0 .65-.236.89-.721 3.081-6.114 8.417-9.172 16.006-9.172 3.851 0 7.451.929 10.801 2.786 3.35 1.858 6.072 4.66 8.184 8.404Zm-4.84 13.526c0-5.514-1.466-9.812-4.4-12.897-2.932-3.087-6.795-4.627-11.605-4.627-4.811 0-8.673 1.545-11.607 4.627-2.938 3.085-4.01 7.388-4.01 12.897 0 5.508 1.077 9.811 4.01 12.897 2.934 3.092 6.801 4.627 11.607 4.627 4.805 0 8.673-1.546 11.605-4.627 2.934-3.08 4.4-7.389 4.4-12.897ZM44.411 27.889c2.1 3.743 3.155 8.255 3.155 13.526 0 5.272-1.05 9.784-3.155 13.527-2.106 3.743-4.833 6.548-8.182 8.404-3.35 1.857-6.95 2.786-10.801 2.786-7.59 0-12.925-3.057-16.006-9.172-.233-.48-.536-.721-.89-.721s-.536.178-.536.541v25.08H0V18.05h8v8c0 .357.176.542.536.542.36 0 .65-.237.89-.722 3.081-6.113 8.416-9.171 16.005-9.171 3.853 0 7.452.928 10.802 2.786 3.35 1.857 6.07 4.66 8.182 8.403h-.006l.002.002Zm-4.846 13.526c0-5.514-1.466-9.811-4.398-12.897-2.934-3.08-6.802-4.627-11.607-4.627-4.806 0-8.673 1.546-11.606 4.627-2.932 3.092-4.011 7.39-4.011 12.897 0 5.508 1.079 9.812 4.011 12.899 2.933 3.092 6.796 4.625 11.606 4.625s8.673-1.545 11.607-4.625c2.932-3.08 4.398-7.39 4.398-12.899Zm51.243 8.462h8.445c-1.124 4.378-3.423 8.167-6.887 11.37-3.47 3.206-8.433 4.805-14.898 4.805-4.861 0-9.14-1.004-12.844-3.012-3.703-2.008-6.562-4.862-8.582-8.582-2.02-3.715-3.025-8.087-3.025-13.123s.982-9.408 2.932-13.123c1.953-3.714 4.697-6.576 8.223-8.582 3.527-2.008 7.658-3.011 12.4-3.011s8.673.992 11.959 2.964c3.292 1.978 5.746 4.604 7.378 7.863 1.632 3.27 2.441 6.847 2.441 10.74v5.394H61.454c.29 4.672 1.855 8.393 4.667 11.144 2.814 2.758 6.596 4.136 11.34 4.136 3.85 0 6.806-.79 8.85-2.382 2.042-1.592 3.537-3.79 4.49-6.61l.006.012.001-.003ZM61.29 36.847h27.92c0-4.072-1.04-7.268-3.115-9.575-2.077-2.302-5.336-3.46-9.781-3.46-4.149 0-7.544 1.123-10.18 3.373-2.636 2.244-4.25 5.47-4.844 9.662Zm127.463 27.867h8.006V0h-8.006v64.719-.005Zm112.513-51.839h9.348V2.758h-9.348v10.117Zm34.515 44.876c-1.453.15-2.333.226-2.621.226-.412 0-.75-.12-.982-.364-.236-.237-.359-.565-.359-.992 0-.294.076-1.183.228-2.653.141-1.465.221-3.732.221-6.784V24.823h11.412l-2.249-6.847h-9.159V5.387h-7.997v12.581h-8.704v6.847h8.704v24.607c0 5.156 1.25 8.993 3.735 11.507 2.488 2.515 6.283 3.778 11.386 3.778h6.224V57.52h-3.115c-3.023 0-5.263.075-6.716.225l-.008.006Zm48.361-39.783-13.25 39.224c-.175.484-.457 1.114-1.361 1.114-.904 0-1.193-.628-1.373-1.114l-13.249-39.217h-8.159l15.344 46.74h5.427c.352 0 .623.035.805.092.177.058.324.207.445.45.232.357.203.9-.092 1.614l-2.489 6.83c-.358.9-1.038 1.35-2.041 1.35-.359 0-1.186-.075-2.489-.225-1.306-.15-2.989-.224-5.065-.224h-6.494v7.186h8.535c4.981 0 7.977-.854 10.557-2.56 2.58-1.708 4.576-4.72 6.001-9.033l16.572-50.425v-1.8l-7.614.006-.01-.007ZM274.187 35.41l-12.538-17.437h-8.803v1.794l15.023 20.223-18.318 22.923v1.794h8.982l14.584-18.787 13.604 18.787h8.628v-1.794L279.428 41.34l17.258-21.48v-1.887h-8.983L274.191 35.41h-.004Zm27.93 29.304h8.005V17.98h-8.005v46.739-.005Zm-52.675-14.837c-1.13 4.378-3.421 8.167-6.884 11.37-3.472 3.206-8.435 4.805-14.901 4.805-4.86 0-9.141-1.004-12.844-3.012-3.71-2.008-6.561-4.862-8.582-8.582-2.014-3.715-3.019-8.087-3.019-13.123s.982-9.408 2.934-13.123c1.958-3.714 4.697-6.576 8.224-8.582 3.523-2.008 7.655-3.011 12.403-3.011 4.749 0 8.673.992 11.965 2.964 3.287 1.978 5.748 4.604 7.378 7.863 1.633 3.27 2.443 6.847 2.443 10.74v5.394h-36.9c.296 4.672 1.852 8.393 4.668 11.144 2.812 2.758 6.595 4.136 11.337 4.136 3.851 0 6.808-.79 8.85-2.382 2.041-1.592 3.537-3.79 4.484-6.61h8.45l-.006.012v-.003Zm-37.761-13.03H239.6c0-4.072-1.038-7.268-3.108-9.575-2.08-2.302-5.335-3.46-9.782-3.46-4.15 0-7.543 1.123-10.18 3.373-2.636 2.244-4.255 5.47-4.843 9.662h-.006Z"})]})}):s&&r?o.jsx("div",{className:i,...a,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 797 82",children:[o.jsx("path",{className:"fill-max",d:"M602.964 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM684.483 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM655.961 28.046c-2.103-3.728-4.814-6.52-8.15-8.37-3.336-1.85-6.922-2.774-10.757-2.774-7.558 0-12.872 3.044-15.94 9.134-.239.482-.529.718-.887.718-.357 0-.534-.184-.534-.54v-7.968h-7.968v63.552h7.968V56.82c0-.363.182-.54.534-.54.352 0 .653.24.887.718 3.068 6.089 8.382 9.134 15.94 9.134 3.835 0 7.421-.925 10.757-2.775 3.336-1.85 6.052-4.64 8.15-8.369 2.096-3.728 3.142-8.221 3.142-13.471s-1.051-9.743-3.142-13.471Zm-9.202 26.315c-2.92 3.068-6.773 4.608-11.558 4.608-4.784 0-8.637-1.527-11.559-4.608-2.921-3.073-3.994-7.358-3.994-12.844s1.068-9.772 3.994-12.845c2.922-3.067 6.768-4.607 11.559-4.607 4.791 0 8.638 1.534 11.558 4.607 2.922 3.073 4.382 7.353 4.382 12.845 0 5.491-1.46 9.776-4.382 12.844ZM567.986 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.035 1.585-4.978 2.372-8.815 2.372-4.722 0-8.49-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.068-5.859-7.347-7.83-3.274-1.964-7.189-2.953-11.911-2.953-4.721 0-8.836 1-12.349 3-3.511 1.998-6.244 4.847-8.188 8.547-1.944 3.7-2.921 8.053-2.921 13.069 0 5.015 1 9.369 3.012 13.069 2.013 3.704 4.86 6.549 8.548 8.548 3.688 2 7.95 2.998 12.791 2.998 6.438 0 11.383-1.59 14.837-4.785 3.45-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.626-2.24 6.007-3.36 10.138-3.36 4.427 0 7.672 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.591-4.176 2.199-7.388 4.824-9.622ZM443.533 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.293-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.807-7.44-2.431-10.697-1.626-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953-4.722 0-8.837 1-12.349 3-3.512 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015.999 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.791 2.998 6.439 0 11.383-1.59 14.838-4.785 3.449-3.188 5.739-6.962 6.858-11.322h-8.41l-.002.002Zm-24.572-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.74 3.447 2.069 2.297 3.103 5.48 3.103 9.536h-27.806c.591-4.176 2.2-7.388 4.825-9.622ZM788.588 50.015l-.005-.012c-.95 2.81-2.438 4.998-4.473 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953s-8.836 1-12.349 3c-3.511 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015 1 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.792 2.998 6.438 0 11.382-1.59 14.837-4.785 3.449-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.59-4.176 2.199-7.388 4.824-9.622ZM520.476 57.857c-1.447.15-2.323.224-2.61.224-.411 0-.747-.12-.978-.362-.235-.236-.358-.563-.358-.988 0-.293.076-1.178.227-2.642.141-1.459.221-3.716.221-6.756V25.062h11.099v-6.819h-11.095V5.708h-7.964v12.53h-8.669v6.819h8.669v24.505c0 5.136 1.244 8.957 3.719 11.46 2.478 2.506 6.257 3.763 11.34 3.763h6.198v-7.158h-3.102c-3.011 0-5.242.075-6.689.225l-.008.006v-.001ZM701.809 3.087H692.5v10.076h9.309V3.087ZM701.319 18.245h-7.972v46.543h7.972V18.245ZM498.872 36.41V64.8h-7.861V37.72c0-8.299-4.281-12.665-12.229-12.665-8.997 0-13.976 5.415-13.976 16.16V64.8h-7.861V19.379h7.861v5.065c0 .438.174.612.611.612.438 0 .874-.7.962-.786 3.057-4.104 7.773-6.202 14.15-6.202 11.443 0 18.344 6.726 18.344 18.343h-.001ZM747.71 33.002h-8.503c-.448-5.997-4.654-8.95-12.531-8.95-6.803 0-10.742 2.953-10.742 6.98 0 3.491 2.328 4.566 8.504 5.909l8.503 1.79c9.22 1.88 14.322 4.834 14.322 12.621 0 8.593-7.886 14.77-19.701 14.77-14.232 0-19.979-6.982-21.501-17.455h8.504c1.163 6.892 4.526 10.294 13.387 10.294 7.787 0 11.255-3.223 11.255-7.161 0-2.595-1.432-3.85-3.849-4.565-1.164-.359-3.223-.806-5.998-1.432l-8.503-1.79c-8.235-1.7-12.978-5.282-12.978-12.801 0-4.386 1.79-7.877 5.37-10.473 3.581-2.596 8.235-3.85 13.873-3.85 11.637 0 20.23 6.356 20.588 16.112v.002Z"}),o.jsx("path",{className:t,d:"M125.928 17.801h3.916v8.087h-5.069c-3.971 0-6.932.957-8.896 2.878-1.952 1.914-2.932 5.064-2.932 9.442v26.516h-8V17.985h8v7.458c0 .421.211.628.622.628.234 0 .41-.058.536-.178.126-.122.233-.358.359-.722 1.54-4.909 5.37-7.366 11.469-7.366h-.005V17.8v.001Zm53.217 10.02c2.099 3.742 3.155 8.254 3.155 13.526 0 5.271-1.051 9.783-3.155 13.526-2.106 3.744-4.834 6.547-8.184 8.404-3.35 1.858-6.95 2.786-10.801 2.786-7.589 0-12.925-3.057-16.006-9.172-.234-.479-.536-.721-.89-.721-.353 0-.536.179-.536.543v25.08h-8.001V17.98h8.001v8c0 .358.176.543.536.543.36 0 .65-.236.89-.721 3.081-6.114 8.417-9.172 16.006-9.172 3.851 0 7.451.929 10.801 2.786 3.35 1.858 6.072 4.66 8.184 8.404Zm-4.84 13.526c0-5.514-1.466-9.812-4.4-12.897-2.932-3.087-6.795-4.627-11.605-4.627-4.811 0-8.673 1.545-11.607 4.627-2.938 3.085-4.01 7.388-4.01 12.897 0 5.508 1.077 9.811 4.01 12.897 2.934 3.092 6.801 4.627 11.607 4.627 4.805 0 8.673-1.546 11.605-4.627 2.934-3.08 4.4-7.389 4.4-12.897ZM44.411 27.889c2.1 3.743 3.155 8.255 3.155 13.526 0 5.272-1.05 9.784-3.155 13.527-2.106 3.743-4.833 6.548-8.182 8.404-3.35 1.857-6.95 2.786-10.801 2.786-7.59 0-12.925-3.057-16.006-9.172-.233-.48-.536-.721-.89-.721s-.536.178-.536.541v25.08H0V18.05h8v8c0 .357.176.542.536.542.36 0 .65-.237.89-.722 3.081-6.113 8.416-9.171 16.005-9.171 3.853 0 7.452.928 10.802 2.786 3.35 1.857 6.07 4.66 8.182 8.403h-.006l.002.002Zm-4.846 13.526c0-5.514-1.466-9.811-4.398-12.897-2.934-3.08-6.802-4.627-11.607-4.627-4.806 0-8.673 1.546-11.606 4.627-2.932 3.092-4.011 7.39-4.011 12.897 0 5.508 1.079 9.812 4.011 12.899 2.933 3.092 6.796 4.625 11.606 4.625s8.673-1.545 11.607-4.625c2.932-3.08 4.398-7.39 4.398-12.899Zm51.243 8.462h8.445c-1.124 4.378-3.423 8.167-6.887 11.37-3.47 3.206-8.433 4.805-14.898 4.805-4.861 0-9.14-1.004-12.844-3.012-3.703-2.008-6.562-4.862-8.582-8.582-2.02-3.715-3.025-8.087-3.025-13.123s.982-9.408 2.932-13.123c1.953-3.714 4.697-6.576 8.223-8.582 3.527-2.008 7.658-3.011 12.4-3.011s8.673.992 11.959 2.964c3.292 1.978 5.746 4.604 7.378 7.863 1.632 3.27 2.441 6.847 2.441 10.74v5.394H61.454c.29 4.672 1.855 8.393 4.667 11.144 2.814 2.758 6.596 4.136 11.34 4.136 3.85 0 6.806-.79 8.85-2.382 2.042-1.592 3.537-3.79 4.49-6.61l.006.012.001-.003ZM61.29 36.847h27.92c0-4.072-1.04-7.268-3.115-9.575-2.077-2.302-5.336-3.46-9.781-3.46-4.149 0-7.544 1.123-10.18 3.373-2.636 2.244-4.25 5.47-4.844 9.662Zm127.463 27.867h8.006V0h-8.006v64.719-.005Zm112.513-51.839h9.348V2.758h-9.348v10.117Zm34.515 44.876c-1.453.15-2.333.226-2.621.226-.412 0-.75-.12-.982-.364-.236-.237-.359-.565-.359-.992 0-.294.076-1.183.228-2.653.141-1.465.221-3.732.221-6.784V24.823h11.412l-2.249-6.847h-9.159V5.387h-7.997v12.581h-8.704v6.847h8.704v24.607c0 5.156 1.25 8.993 3.735 11.507 2.488 2.515 6.283 3.778 11.386 3.778h6.224V57.52h-3.115c-3.023 0-5.263.075-6.716.225l-.008.006Zm48.361-39.783-13.25 39.224c-.175.484-.457 1.114-1.361 1.114-.904 0-1.193-.628-1.373-1.114l-13.249-39.217h-8.159l15.344 46.74h5.427c.352 0 .623.035.805.092.177.058.324.207.445.45.232.357.203.9-.092 1.614l-2.489 6.83c-.358.9-1.038 1.35-2.041 1.35-.359 0-1.186-.075-2.489-.225-1.306-.15-2.989-.224-5.065-.224h-6.494v7.186h8.535c4.981 0 7.977-.854 10.557-2.56 2.58-1.708 4.576-4.72 6.001-9.033l16.572-50.425v-1.8l-7.614.006-.01-.007ZM274.187 35.41l-12.538-17.437h-8.803v1.794l15.023 20.223-18.318 22.923v1.794h8.982l14.584-18.787 13.604 18.787h8.628v-1.794L279.428 41.34l17.258-21.48v-1.887h-8.983L274.191 35.41h-.004Zm27.93 29.304h8.005V17.98h-8.005v46.739-.005Zm-52.675-14.837c-1.13 4.378-3.421 8.167-6.884 11.37-3.472 3.206-8.435 4.805-14.901 4.805-4.86 0-9.141-1.004-12.844-3.012-3.71-2.008-6.561-4.862-8.582-8.582-2.014-3.715-3.019-8.087-3.019-13.123s.982-9.408 2.934-13.123c1.958-3.714 4.697-6.576 8.224-8.582 3.523-2.008 7.655-3.011 12.403-3.011 4.749 0 8.673.992 11.965 2.964 3.287 1.978 5.748 4.604 7.378 7.863 1.633 3.27 2.443 6.847 2.443 10.74v5.394h-36.9c.296 4.672 1.852 8.393 4.668 11.144 2.812 2.758 6.595 4.136 11.337 4.136 3.851 0 6.808-.79 8.85-2.382 2.041-1.592 3.537-3.79 4.484-6.61h8.45l-.006.012v-.003Zm-37.761-13.03H239.6c0-4.072-1.038-7.268-3.108-9.575-2.08-2.302-5.335-3.46-9.782-3.46-4.15 0-7.543 1.123-10.18 3.373-2.636 2.244-4.255 5.47-4.843 9.662h-.006Z"})]})}):n?o.jsx("div",{className:i,...a,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 3913.07 632",children:[o.jsx("path",{className:t,d:"M972.21,137.43h30.23v62.43h-39.13c-30.66,0-53.52,7.39-68.68,22.22-15.07,14.78-22.64,39.1-22.64,72.9v204.71h-61.76V138.85h61.76v57.58c0,3.25,1.63,4.85,4.8,4.85,1.81,0,3.17-.45,4.14-1.38.97-.94,1.8-2.76,2.77-5.57,11.89-37.9,41.46-56.87,88.55-56.87h-.04v-.04ZM1383.06,214.78c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.32,50.54-63.18,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.81-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.19v193.63h-61.77V138.81h61.77v61.77c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.73,0,57.53,7.17,83.39,21.51,25.86,14.34,46.88,35.98,63.18,64.88ZM1345.7,319.21c0-42.57-11.32-75.75-33.97-99.57-22.64-23.83-52.46-35.72-89.6-35.72s-66.96,11.93-89.61,35.72c-22.68,23.82-30.96,57.04-30.96,99.57s8.32,75.75,30.96,99.57c22.65,23.87,52.51,35.72,89.61,35.72s66.96-11.93,89.6-35.72c22.65-23.78,33.97-57.04,33.97-99.57ZM342.87,215.31c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.31,50.55-63.17,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.8-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.18v193.63H0V139.34h61.76v61.76c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.74,0,57.53,7.17,83.39,21.51,25.86,14.34,46.87,35.98,63.17,64.88h-.05ZM305.46,319.74c0-42.57-11.32-75.75-33.96-99.57-22.65-23.78-52.51-35.72-89.61-35.72s-66.96,11.93-89.6,35.72c-22.64,23.87-30.97,57.05-30.97,99.57s8.33,75.75,30.97,99.58c22.64,23.87,52.47,35.71,89.6,35.71s66.96-11.93,89.61-35.71c22.64-23.78,33.96-57.05,33.96-99.58ZM701.07,385.07h65.2c-8.68,33.8-26.43,63.05-53.17,87.77-26.79,24.76-65.11,37.1-115.02,37.1-37.53,0-70.57-7.75-99.16-23.25-28.59-15.5-50.66-37.54-66.26-66.26-15.59-28.68-23.35-62.43-23.35-101.31s7.58-72.63,22.64-101.31c15.07-28.68,36.26-50.77,63.48-66.26,27.23-15.5,59.12-23.25,95.73-23.25s66.96,7.66,92.33,22.89c25.42,15.27,44.36,35.54,56.96,60.7,12.6,25.25,18.85,52.86,18.85,82.92v41.64h-284.85c2.24,36.07,14.32,64.8,36.03,86.04,21.72,21.29,50.92,31.93,87.54,31.93,29.73,0,52.55-6.1,68.33-18.39,15.77-12.29,27.31-29.26,34.67-51.03l.04.09ZM473.18,284.47h215.55c0-31.44-8.02-56.11-24.05-73.92-16.03-17.77-41.19-26.72-75.51-26.72-32.03,0-58.24,8.68-78.59,26.05-20.35,17.32-32.82,42.22-37.4,74.59ZM1457.24,499.61h61.81V0h-61.81v499.65-.04ZM2325.88,99.4h72.17V21.24h-72.17v78.15ZM2592.35,445.86c-11.22,1.16-18.01,1.74-20.24,1.74-3.18,0-5.79-.93-7.58-2.81-1.82-1.83-2.77-4.36-2.77-7.66,0-2.27.59-9.13,1.76-20.48,1.09-11.31,1.71-28.81,1.71-52.37v-172.65h88.1l-17.36-52.86h-70.71V41.59h-61.74v97.13h-67.2v52.86h67.2v189.97c0,39.81,9.65,69.43,28.83,88.84,19.21,19.42,48.51,29.17,87.91,29.17h48.05v-55.49h-24.05c-23.34,0-40.63.58-51.85,1.74l-.06.05ZM2965.71,138.76l-102.29,302.77c-1.35,3.74-3.53,8.6-10.51,8.6s-9.21-4.85-10.6-8.6l-102.29-302.77h-62.99l118.46,360.85h41.9c2.72,0,4.81.27,6.22.71,1.36.45,2.5,1.6,3.43,3.47,1.79,2.76,1.57,6.95-.71,12.47l-19.21,52.73c-2.77,6.95-8.02,10.42-15.76,10.42-2.77,0-9.16-.58-19.22-1.74-10.08-1.16-23.07-1.73-39.1-1.73h-50.14v55.48h65.9c38.45,0,61.58-6.59,81.5-19.77,19.92-13.18,35.33-36.43,46.33-69.73l127.94-389.3v-13.85h-58.86ZM2116.82,273.38l-96.8-134.62h-67.96v13.85l115.98,156.13-141.42,176.97v13.85h69.35l112.59-145.04,105.03,145.04h66.61v-13.85l-122.92-166.55,133.24-165.84v-14.56h-69.35l-104.32,134.62h-.03ZM2332.45,499.61h61.8V138.81h-61.8v360.84-.04ZM1925.78,385.07c-8.72,33.8-26.41,63.05-53.15,87.77-26.8,24.76-65.12,37.1-115.04,37.1-37.52,0-70.57-7.75-99.16-23.25-28.64-15.5-50.65-37.54-66.25-66.26-15.55-28.68-23.31-62.43-23.31-101.31s7.58-72.63,22.65-101.31c15.12-28.68,36.26-50.77,63.49-66.26,27.2-15.5,59.1-23.25,95.76-23.25s66.96,7.66,92.37,22.89c25.38,15.27,44.38,35.54,56.96,60.7,12.61,25.25,18.86,52.86,18.86,82.92v41.64h-284.88c2.29,36.07,14.3,64.8,36.04,86.04,21.71,21.29,50.92,31.93,87.53,31.93,29.73,0,52.56-6.1,68.32-18.39,15.76-12.29,27.31-29.26,34.62-51.03h65.24l-.05.09ZM1634.25,284.47h215.55c0-31.44-8.02-56.11-24-73.92-16.06-17.77-41.19-26.72-75.52-26.72-32.04,0-58.23,8.68-78.59,26.05-20.35,17.32-32.85,42.22-37.39,74.59h-.05Z"}),o.jsxs("g",{children:[o.jsx("path",{className:"fill-super",d:"M3355.84,188.2c-34.07-64.39-131.07-79.63-178.65-27.45-1.45,1.53-4.03.51-4.03-1.6v-20.46s-51.68,0-51.68,0v360.92h51.68v-137.9c0-2.11,2.57-3.13,4.03-1.6,17.98,18.93,43.42,31.52,75.79,31.52,72.2.47,121.88-58.16,120.25-131.21,0-28.27-5.85-52.57-17.39-72.23ZM3321.56,260.43c0,26.4-7.05,50.24-20.94,64.92h0c-25.21,28.94-83.76,28.65-109.2,0-27.18-27.93-27.44-101.65,0-129.38,25.44-29.25,83.94-29.55,109.17-.04,13.94,14.4,20.97,38.06,20.98,64.5Z"}),o.jsx("path",{className:"fill-super",d:"M3678.1,499.61h-438.05v-48.22h438.05c33.41,0,64.39-7.45,92.07-22.16,29.4-15.46,53.58-39.15,70.02-68.56l.08-.14c16.31-28.72,24.58-62.4,24.58-100.11s-8.26-71.36-24.56-100.07l-.08-.13c-16.46-29.43-40.64-53.13-69.93-68.54-27.79-14.76-58.78-22.22-92.19-22.22h-555.91V21.24h555.91c41.39,0,79.99,9.36,114.73,27.81,37.45,19.7,68.41,49.99,89.43,87.55,20.45,36.05,30.82,77.7,30.82,123.82s-10.38,87.81-30.84,123.86c-21,37.53-51.96,67.81-89.53,87.57-34.63,18.4-73.22,27.75-114.61,27.75Z"}),o.jsx("path",{className:"fill-super",d:"M3784.19,189.62c-42.92-80.72-177.41-80.62-220.65.03-10.91,19.63-16.45,43.44-16.45,70.78-1.52,77.12,51.01,131.73,127,131.21,75.9.53,128.27-54.63,127-131.21,0-27.33-5.69-51.15-16.91-70.8ZM3749.42,260.43c0,26.4-7.05,50.24-20.94,64.92h0c-25.21,28.94-83.76,28.65-109.2,0-27.17-27.93-27.44-101.65,0-129.38,25.44-29.25,83.94-29.55,109.17-.04,13.94,14.4,20.97,38.06,20.98,64.5Z"}),o.jsx("path",{className:"fill-super",d:"M3515.38,135.16c-16.77,0-30.24,2.85-40.05,8.48-5.78,3.15-11.11,8.68-16.12,16.74-1.24,2-4.32,1.13-4.32-1.22v-20.46s-51.67,0-51.67,0v246.1h51.67v-140.34c0-20.57,4.43-35.36,13.17-43.97,16.17-16.75,48.45-12.5,72.26-13v-52.31h-24.94Z"})]})]})}):r?o.jsx("div",{className:i,...a,children:o.jsxs("svg",{viewBox:"0 0 485 74",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{className:t,d:"M972.21,137.43h30.23v62.43h-39.13c-30.66,0-53.52,7.39-68.68,22.22-15.07,14.78-22.64,39.1-22.64,72.9v204.71h-61.76V138.85h61.76v57.58c0,3.25,1.63,4.85,4.8,4.85,1.81,0,3.17-.45,4.14-1.38.97-.94,1.8-2.76,2.77-5.57,11.89-37.9,41.46-56.87,88.55-56.87h-.04v-.04ZM1383.06,214.78c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.32,50.54-63.18,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.81-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.19v193.63h-61.77V138.81h61.77v61.77c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.73,0,57.53,7.17,83.39,21.51,25.86,14.34,46.88,35.98,63.18,64.88ZM1345.7,319.21c0-42.57-11.32-75.75-33.97-99.57-22.64-23.83-52.46-35.72-89.6-35.72s-66.96,11.93-89.61,35.72c-22.68,23.82-30.96,57.04-30.96,99.57s8.32,75.75,30.96,99.57c22.65,23.87,52.51,35.72,89.61,35.72s66.96-11.93,89.6-35.72c22.65-23.78,33.97-57.04,33.97-99.57ZM342.87,215.31c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.31,50.55-63.17,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.8-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.18v193.63H0V139.34h61.76v61.76c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.74,0,57.53,7.17,83.39,21.51,25.86,14.34,46.87,35.98,63.17,64.88h-.05ZM305.46,319.74c0-42.57-11.32-75.75-33.96-99.57-22.65-23.78-52.51-35.72-89.61-35.72s-66.96,11.93-89.6,35.72c-22.64,23.87-30.97,57.05-30.97,99.57s8.33,75.75,30.97,99.58c22.64,23.87,52.47,35.71,89.6,35.71s66.96-11.93,89.61-35.71c22.64-23.78,33.96-57.05,33.96-99.58ZM701.07,385.07h65.2c-8.68,33.8-26.43,63.05-53.17,87.77-26.79,24.76-65.11,37.1-115.02,37.1-37.53,0-70.57-7.75-99.16-23.25-28.59-15.5-50.66-37.54-66.26-66.26-15.59-28.68-23.35-62.43-23.35-101.31s7.58-72.63,22.64-101.31c15.07-28.68,36.26-50.77,63.48-66.26,27.23-15.5,59.12-23.25,95.73-23.25s66.96,7.66,92.33,22.89c25.42,15.27,44.36,35.54,56.96,60.7,12.6,25.25,18.85,52.86,18.85,82.92v41.64h-284.85c2.24,36.07,14.32,64.8,36.03,86.04,21.72,21.29,50.92,31.93,87.54,31.93,29.73,0,52.55-6.1,68.33-18.39,15.77-12.29,27.31-29.26,34.67-51.03l.04.09ZM473.18,284.47h215.55c0-31.44-8.02-56.11-24.05-73.92-16.03-17.77-41.19-26.72-75.51-26.72-32.03,0-58.24,8.68-78.59,26.05-20.35,17.32-32.82,42.22-37.4,74.59ZM1457.24,499.61h61.81V0h-61.81v499.65-.04ZM2325.88,99.4h72.17V21.24h-72.17v78.15ZM2592.35,445.86c-11.22,1.16-18.01,1.74-20.24,1.74-3.18,0-5.79-.93-7.58-2.81-1.82-1.83-2.77-4.36-2.77-7.66,0-2.27.59-9.13,1.76-20.48,1.09-11.31,1.71-28.81,1.71-52.37v-172.65h88.1l-17.36-52.86h-70.71V41.59h-61.74v97.13h-67.2v52.86h67.2v189.97c0,39.81,9.65,69.43,28.83,88.84,19.21,19.42,48.51,29.17,87.91,29.17h48.05v-55.49h-24.05c-23.34,0-40.63.58-51.85,1.74l-.06.05ZM2965.71,138.76l-102.29,302.77c-1.35,3.74-3.53,8.6-10.51,8.6s-9.21-4.85-10.6-8.6l-102.29-302.77h-62.99l118.46,360.85h41.9c2.72,0,4.81.27,6.22.71,1.36.45,2.5,1.6,3.43,3.47,1.79,2.76,1.57,6.95-.71,12.47l-19.21,52.73c-2.77,6.95-8.02,10.42-15.76,10.42-2.77,0-9.16-.58-19.22-1.74-10.08-1.16-23.07-1.73-39.1-1.73h-50.14v55.48h65.9c38.45,0,61.58-6.59,81.5-19.77,19.92-13.18,35.33-36.43,46.33-69.73l127.94-389.3v-13.85h-58.86ZM2116.82,273.38l-96.8-134.62h-67.96v13.85l115.98,156.13-141.42,176.97v13.85h69.35l112.59-145.04,105.03,145.04h66.61v-13.85l-122.92-166.55,133.24-165.84v-14.56h-69.35l-104.32,134.62h-.03ZM2332.45,499.61h61.8V138.81h-61.8v360.84-.04ZM1925.78,385.07c-8.72,33.8-26.41,63.05-53.15,87.77-26.8,24.76-65.12,37.1-115.04,37.1-37.52,0-70.57-7.75-99.16-23.25-28.64-15.5-50.65-37.54-66.25-66.26-15.55-28.68-23.31-62.43-23.31-101.31s7.58-72.63,22.65-101.31c15.12-28.68,36.26-50.77,63.49-66.26,27.2-15.5,59.1-23.25,95.76-23.25s66.96,7.66,92.37,22.89c25.38,15.27,44.38,35.54,56.96,60.7,12.61,25.25,18.86,52.86,18.86,82.92v41.64h-284.88c2.29,36.07,14.3,64.8,36.04,86.04,21.71,21.29,50.92,31.93,87.53,31.93,29.73,0,52.56-6.1,68.32-18.39,15.76-12.29,27.31-29.26,34.62-51.03h65.24l-.05.09ZM1634.25,284.47h215.55c0-31.44-8.02-56.11-24-73.92-16.06-17.77-41.19-26.72-75.52-26.72-32.04,0-58.23,8.68-78.59,26.05-20.35,17.32-32.85,42.22-37.39,74.59h-.05Z"}),o.jsx("path",{d:"M113.78 16.0915H117.318V23.4013H112.739C109.15 23.4013 106.475 24.2666 104.701 26.003C102.937 27.7336 102.051 30.5812 102.051 34.5388V58.508H94.8233V16.2578H102.051V22.9997C102.051 23.3803 102.242 23.5676 102.613 23.5676C102.825 23.5676 102.984 23.5149 103.098 23.406C103.211 23.2959 103.308 23.0828 103.422 22.7538C104.813 18.3162 108.274 16.095 113.785 16.095H113.78V16.0903V16.0915ZM161.863 25.1483C163.76 28.5322 164.714 32.6103 164.714 37.3759C164.714 42.1414 163.765 46.2196 161.863 49.6034C159.96 52.9873 157.495 55.5211 154.469 57.2001C151.443 58.8792 148.189 59.7187 144.71 59.7187C137.853 59.7187 133.032 56.9554 130.248 51.4277C130.036 50.9944 129.763 50.7755 129.444 50.7755C129.124 50.7755 128.959 50.9371 128.959 51.2661V73.9379H121.73V16.2531H128.959V23.4856C128.959 23.8088 129.119 23.9762 129.444 23.9762C129.769 23.9762 130.031 23.762 130.248 23.324C133.032 17.7975 137.853 15.033 144.71 15.033C148.189 15.033 151.443 15.8725 154.469 17.5516C157.495 19.2306 159.955 21.7644 161.863 25.1483ZM157.491 37.3759C157.491 32.3914 156.166 28.5064 153.515 25.7173C150.866 22.9271 147.376 21.5349 143.029 21.5349C138.682 21.5349 135.193 22.9318 132.542 25.7173C129.887 28.5064 128.918 32.3961 128.918 37.3759C128.918 42.3556 129.892 46.2453 132.542 49.0344C135.193 51.8293 138.687 53.2168 143.029 53.2168C147.371 53.2168 150.866 51.8199 153.515 49.0344C156.166 46.25 157.491 42.3556 157.491 37.3759ZM40.127 25.2103C42.0241 28.5942 42.9779 32.6724 42.9779 37.4379C42.9779 42.2034 42.0287 46.2816 40.127 49.6655C38.224 53.0493 35.7605 55.5843 32.734 57.2622C29.7076 58.9412 26.454 59.7808 22.9747 59.7808C16.1177 59.7808 11.2972 57.0175 8.51295 51.4897C8.30229 51.0565 8.02844 50.8375 7.70894 50.8375C7.38944 50.8375 7.22442 50.9991 7.22442 51.327V73.9988H0V16.3151H7.22793V23.5465C7.22793 23.8697 7.3871 24.0371 7.71245 24.0371C8.0378 24.0371 8.29995 23.8228 8.51646 23.3849C11.3007 17.8584 16.1212 15.0939 22.9782 15.0939C26.4587 15.0939 29.7111 15.9334 32.7375 17.6125C35.764 19.2915 38.2228 21.8253 40.1305 25.2092H40.1246L40.127 25.2103ZM35.7488 37.4379C35.7488 32.4534 34.424 28.5684 31.7743 25.7794C29.1236 22.995 25.629 21.597 21.2871 21.597C16.9451 21.597 13.4506 22.9939 10.8009 25.7794C8.15132 28.5743 7.17644 32.4593 7.17644 37.4379C7.17644 42.4165 8.15132 46.3074 10.8009 49.0976C13.4506 51.8925 16.9416 53.2788 21.2871 53.2788C25.6325 53.2788 29.1236 51.882 31.7743 49.0976C34.424 46.3132 35.7488 42.4177 35.7488 37.4379ZM82.048 45.0873H89.6786C88.6627 49.0449 86.5854 52.4697 83.4559 55.3642C80.3206 58.2633 75.8359 59.7082 69.9949 59.7082C65.6026 59.7082 61.7359 58.8007 58.3899 56.9859C55.0439 55.171 52.461 52.5903 50.6353 49.2276C48.8108 45.8695 47.9026 41.9177 47.9026 37.3653C47.9026 32.8129 48.7897 28.8612 50.5522 25.5031C52.3159 22.145 54.7958 19.5585 57.9815 17.7448C61.1683 15.9299 64.9004 15.0225 69.185 15.0225C73.4695 15.0225 77.0215 15.9194 79.9906 17.7026C82.9656 19.4906 85.1822 21.864 86.6568 24.8099C88.1314 27.7664 88.8628 30.9992 88.8628 34.5189V39.3945H55.5261C55.7883 43.6178 57.202 46.9818 59.7428 49.4688C62.2847 51.9616 65.7021 53.2074 69.9878 53.2074C73.4672 53.2074 76.1379 52.4932 77.9847 51.0541C79.8303 49.6151 81.1808 47.6281 82.0422 45.0791L82.0469 45.0896L82.048 45.0873ZM55.3775 33.3082H80.6039C80.6039 29.6269 79.6653 26.7384 77.7892 24.653C75.9132 22.5723 72.9686 21.5244 68.9521 21.5244C65.2035 21.5244 62.1361 22.5407 59.7545 24.5746C57.3729 26.6025 55.9135 29.518 55.3775 33.3082ZM170.545 58.4986H177.778V0H170.545V58.5033V58.4986ZM272.204 11.6386H280.65V2.49282H272.204V11.6386ZM303.389 52.2051C302.076 52.3409 301.282 52.4089 301.021 52.4089C300.649 52.4089 300.343 52.3 300.134 52.0798C299.921 51.8656 299.809 51.5693 299.809 51.1829C299.809 50.9171 299.878 50.1139 300.015 48.785C300.143 47.4607 300.216 45.4116 300.216 42.653V22.4377H310.526L308.494 16.2484H300.219V4.86971H292.993V16.2425H285.129V22.4318H292.993V44.6752C292.993 49.3365 294.123 52.8046 296.367 55.0773C298.616 57.3512 302.045 58.4928 306.656 58.4928H312.279V51.9955H309.465C306.733 51.9955 304.71 52.0634 303.396 52.1993L303.389 52.2051ZM347.085 16.2425L335.113 51.6993C334.955 52.1372 334.7 52.7063 333.883 52.7063C333.067 52.7063 332.806 52.1384 332.643 51.6993L320.672 16.2484H313.3L327.163 58.4998H332.067C332.385 58.4998 332.63 58.5314 332.795 58.5829C332.954 58.6356 333.088 58.7703 333.196 58.9892C333.406 59.3124 333.38 59.803 333.113 60.4493L330.865 66.6234C330.541 67.4372 329.927 67.8435 329.021 67.8435C328.697 67.8435 327.949 67.7756 326.771 67.6397C325.592 67.5039 324.071 67.4372 322.195 67.4372H316.327V73.9333H324.04C328.54 73.9333 331.247 73.1616 333.578 71.6184C335.909 70.0752 337.713 67.3529 339 63.4538L353.973 17.8712V16.2437L347.094 16.2496L347.085 16.2437V16.2425ZM247.737 32.0097L236.408 16.2472H228.455V17.8689L242.028 36.1499L225.477 56.8711V58.4928H233.594L246.77 41.5103L259.062 58.4928H266.858V56.8711L252.472 37.37L268.065 17.952V16.2472H259.949L247.74 32.0097H247.737ZM272.973 58.4986H280.205V16.2531H272.973V58.5033V58.4986ZM225.379 45.0873C224.358 49.0449 222.288 52.4697 219.159 55.3642C216.022 58.2633 211.538 59.7082 205.695 59.7082C201.304 59.7082 197.436 58.8007 194.09 56.9859C190.739 55.171 188.163 52.5903 186.337 49.2276C184.517 45.8695 183.609 41.9177 183.609 37.3653C183.609 32.8129 184.496 28.8612 186.26 25.5031C188.029 22.145 190.503 19.5585 193.69 17.7448C196.873 15.9299 200.607 15.0225 204.897 15.0225C209.188 15.0225 212.734 15.9194 215.707 17.7026C218.678 19.4906 220.901 21.864 222.374 24.8099C223.849 27.7664 224.581 30.9992 224.581 34.5189V39.3945H191.241C191.509 43.6178 192.914 46.9818 195.458 49.4688C197.999 51.9616 201.418 53.2074 205.702 53.2074C209.182 53.2074 211.854 52.4932 213.698 51.0541C215.542 49.6151 216.894 47.6281 217.75 45.0791H225.385L225.379 45.0896V45.0873ZM191.261 33.3082H216.487C216.487 29.6269 215.548 26.7384 213.678 24.653C211.799 22.5723 208.858 21.5244 204.84 21.5244C201.09 21.5244 198.025 22.5407 195.642 24.5746C193.261 26.6025 191.798 29.518 191.266 33.3082H191.261Z",className:t}),o.jsxs("g",{children:[o.jsx("path",{d:"M369.705 16.0751V19.7517H370.279C371.485 17.7413 373.552 15.3866 379.007 15.3866C384.461 15.3866 386.93 18.2588 387.906 20.7282H388.48C389.915 18.1429 392.499 15.3866 398.241 15.3866C403.982 15.3866 408.345 18.5457 408.345 25.2666V45.3133H403.293V25.612C403.293 21.7633 401.169 19.4086 397.035 19.4086C392.385 19.4086 389.112 22.2234 389.112 28.0825V45.3145H384.06V25.6131C384.06 21.7644 381.936 19.4098 377.802 19.4098C373.151 19.4098 369.879 22.2246 369.879 28.0837V45.3156H364.827V16.0786H369.707L369.705 16.0751Z",className:"fill-max"}),o.jsx("path",{d:"M412.837 24.5758C413.813 19.1194 418.693 15.3855 425.985 15.3855C433.276 15.3855 438.328 19.1194 438.328 26.2419V45.3121H433.448V41.0045H432.873C431.61 43.0722 428.797 45.9444 422.711 45.9444C416.626 45.9444 412.032 42.7854 412.032 37.5585C412.032 32.3317 416.452 29.5169 422.423 28.9432L433.332 27.9093V26.1283C433.332 21.3605 430.518 19.178 425.869 19.178C421.219 19.178 418.232 21.3605 417.716 25.4387H412.836V24.5769L412.837 24.5758ZM423.573 42.1519C428.912 42.1519 433.333 39.0502 433.333 32.4441V31.6397L423.114 32.6162C419.324 32.9605 417.085 34.3971 417.085 37.3267C417.085 40.2563 419.612 42.1519 423.573 42.1519Z",className:"fill-max"}),o.jsx("path",{d:"M456.8 2.49283C461.595 2.49283 466.06 3.61337 470.071 5.74672C474.452 8.0522 477.928 11.4606 480.394 15.8725C482.786 20.0889 483.999 24.9855 483.999 30.4255C483.999 35.8654 482.786 40.7632 480.394 44.9796C479.086 47.319 477.492 49.3739 475.629 51.1349C474.431 52.2672 473.125 53.2788 471.71 54.1617L468.776 50.4617L455.493 33.7133H455.001L445.815 45.3156H440.418V44.4539L451.985 30.3037L440.418 16.1536V15.2918H445.815L455.001 26.8941H455.493L464.679 15.2918H470.075V16.1536L458.509 30.3037L472.647 47.5052C474.071 46.1142 475.295 44.5054 476.312 42.6858L476.32 42.6718C478.31 39.1685 479.319 35.0481 479.319 30.4255C479.319 25.8028 478.31 21.6837 476.321 18.1792L476.313 18.1651C474.297 14.5541 471.46 11.7686 467.883 9.88697C464.547 8.11308 460.821 7.21618 456.8 7.21618H364.861V2.49283H456.8Z",className:"fill-max"}),o.jsx("path",{d:"M462.359 55.5562L460.611 53.3526C459.374 53.5399 458.103 53.6348 456.8 53.6348H364.861V58.3183H456.8C459.252 58.3183 461.616 58.0326 463.877 57.4706L462.358 55.5562H462.359Z",className:"fill-max"})]})]})}):o.jsx("div",{className:i,...a,children:o.jsx("svg",{viewBox:"0 0 962 202",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M310.846 43.922H320.632V63.8822H307.966C298.037 63.8822 290.638 66.2483 285.737 70.9803C280.852 75.7123 278.401 83.4772 278.401 94.2751V159.698H258.4V44.3666H278.401V62.7707C278.401 63.8028 278.926 64.3269 279.961 64.3269C280.549 64.3269 280.995 64.1839 281.297 63.8822C281.6 63.5805 281.886 62.993 282.188 62.1038C286.039 49.9879 295.602 43.922 310.862 43.922H310.846ZM441.502 68.646C446.753 77.8877 449.395 89.0191 449.395 102.024C449.395 115.029 446.769 126.161 441.502 135.402C436.235 144.644 429.425 151.552 421.055 156.141C412.685 160.73 403.679 163.016 394.052 163.016C375.084 163.016 361.75 155.474 354.048 140.388C353.459 139.213 352.712 138.61 351.82 138.61C350.929 138.61 350.484 139.055 350.484 139.944V201.825H330.482V44.3666H350.484V64.1045C350.484 64.9938 350.929 65.4384 351.82 65.4384C352.712 65.4384 353.444 64.8509 354.048 63.6599C361.75 48.5746 375.084 41.032 394.052 41.032C403.679 41.032 412.685 43.3186 421.055 47.9077C429.425 52.4968 436.235 59.4043 441.502 68.646ZM429.393 102.024C429.393 88.4157 425.733 77.8083 418.397 70.2022C411.062 62.596 401.403 58.785 389.389 58.785C377.376 58.785 367.717 62.596 360.381 70.2022C353.046 77.8242 350.357 88.4316 350.357 102.024C350.357 115.617 353.046 126.24 360.381 133.846C367.717 141.468 377.392 145.263 389.389 145.263C401.387 145.263 411.062 141.452 418.397 133.846C425.733 126.24 429.393 115.617 429.393 102.024ZM111.004 68.8207C116.255 78.0624 118.897 89.1938 118.897 102.199C118.897 115.204 116.271 126.335 111.004 135.577C105.737 144.819 98.9266 151.726 90.5568 156.315C82.1869 160.904 73.1806 163.191 63.5536 163.191C44.5862 163.191 31.2517 155.648 23.5502 140.563C22.9614 139.388 22.2135 138.785 21.3225 138.785C20.4314 138.785 19.9858 139.229 19.9858 140.119V202H0V44.5413H20.0017V64.2792C20.0017 65.1685 20.4473 65.6131 21.3384 65.6131C22.2295 65.6131 22.9614 65.0256 23.5661 63.8346C31.2676 48.7493 44.6021 41.2067 63.5696 41.2067C73.1965 41.2067 82.2028 43.4933 90.5727 48.0824C98.9426 52.6715 105.753 59.579 111.02 68.8207H111.004ZM98.8948 102.199C98.8948 88.5904 95.235 77.983 87.8994 70.3769C80.5639 62.7707 70.9051 58.9597 58.8913 58.9597C46.8776 58.9597 37.2188 62.7707 29.8833 70.3769C22.5477 77.9989 19.8585 88.6062 19.8585 102.199C19.8585 115.792 22.5477 126.415 29.8833 134.021C37.2188 141.643 46.8776 145.438 58.8913 145.438C70.9051 145.438 80.5639 141.627 87.8994 134.021C95.235 126.415 98.8948 115.792 98.8948 102.199ZM221.578 123.08H242.694C239.878 133.878 234.133 143.231 225.477 151.139C216.805 159.047 204.393 163.001 188.242 163.001C176.085 163.001 165.392 160.523 156.131 155.569C146.87 150.615 139.726 143.564 134.682 134.386C129.637 125.224 127.123 114.426 127.123 102.008C127.123 89.5908 129.574 78.7929 134.459 69.6305C139.344 60.4682 146.202 53.4019 155.017 48.4476C163.833 43.4933 174.16 41.0161 186.015 41.0161C197.869 41.0161 207.687 43.4615 215.914 48.3365C224.14 53.2114 230.283 59.6901 234.356 67.7409C238.43 75.8076 240.466 84.6364 240.466 94.2434V107.55H148.239C148.971 119.079 152.869 128.257 159.902 135.053C166.936 141.849 176.388 145.263 188.242 145.263C197.869 145.263 205.252 143.31 210.36 139.388C215.468 135.466 219.208 130.035 221.578 123.08ZM148.462 90.9246H218.253C218.253 80.873 215.659 72.9969 210.472 67.2963C205.284 61.6115 197.137 58.7532 186.03 58.7532C175.656 58.7532 167.174 61.5321 160.587 67.074C153.999 72.6158 149.957 80.5713 148.477 90.9087L148.462 90.9246ZM465.227 159.682H485.229V0H465.227V159.698V159.682ZM742.753 31.7744H766.113V6.8122H742.753V31.7744ZM825.163 142.5C821.535 142.866 819.339 143.056 818.607 143.056C817.573 143.056 816.745 142.755 816.157 142.167C815.568 141.579 815.266 140.77 815.266 139.722C815.266 138.991 815.457 136.8 815.823 133.179C816.189 129.559 816.379 123.969 816.379 116.443V61.2622H844.91L839.293 44.3666H816.395V13.3068H796.394V44.3508H774.642V61.2463H796.394V121.969C796.394 134.688 799.512 144.152 805.734 150.361C811.956 156.569 821.44 159.682 834.185 159.682H849.748V141.945H841.966C834.408 141.945 828.807 142.135 825.179 142.5H825.163ZM942.198 44.3508L909.084 141.119C908.639 142.31 907.939 143.866 905.663 143.866C903.388 143.866 902.688 142.31 902.242 141.119L869.129 44.3508H848.729L887.078 159.682H900.635C901.526 159.682 902.194 159.761 902.64 159.904C903.086 160.047 903.451 160.412 903.754 161.016C904.343 161.905 904.263 163.239 903.531 165.001L897.309 181.849C896.418 184.072 894.716 185.184 892.201 185.184C891.31 185.184 889.242 184.993 885.98 184.628C882.718 184.263 878.501 184.072 873.314 184.072H857.083V201.809H878.421C890.865 201.809 898.359 199.698 904.804 195.49C911.248 191.281 916.245 183.85 919.809 173.195L961.229 48.7652V44.3349H942.198V44.3508ZM677.418 87.3835L646.086 44.3508H624.08V48.7811L661.633 98.6896L615.853 155.251V159.682H638.305L674.76 113.33L708.765 159.682H730.326V155.251L690.545 102.024L733.667 49.0193V44.3666H711.215L677.433 87.3994L677.418 87.3835ZM744.886 159.682H764.887V44.3666H744.886V159.698V159.682ZM616.76 123.08C613.943 133.878 608.199 143.231 599.543 151.139C590.871 159.047 578.459 163.001 562.308 163.001C550.151 163.001 539.458 160.523 530.197 155.569C520.936 150.615 513.792 143.564 508.747 134.386C503.703 125.224 501.189 114.426 501.189 102.008C501.189 89.5908 503.64 78.7929 508.525 69.6305C513.41 60.4682 520.268 53.4019 529.083 48.4476C537.899 43.4933 548.226 41.0161 560.08 41.0161C571.935 41.0161 581.753 43.4615 589.98 48.3365C598.206 53.2114 604.348 59.6901 608.422 67.7409C612.495 75.8076 614.532 84.6364 614.532 94.2434V107.55H522.305C523.037 119.079 526.935 128.257 533.968 135.053C541.002 141.849 550.453 145.263 562.308 145.263C571.935 145.263 579.318 143.31 584.426 139.388C589.534 135.466 593.273 130.035 595.644 123.08H616.76ZM522.527 90.9246H592.319C592.319 80.873 589.725 72.9969 584.538 67.2963C579.35 61.6115 571.203 58.7532 560.096 58.7532C549.721 58.7532 541.24 61.5321 534.653 67.074C528.065 72.6158 524.023 80.5713 522.543 90.9087L522.527 90.9246Z",className:t})})})});Kde.displayName="Word";const OHe={tiny:"w-4 md:w-6",small:"",md:"w-10","md-large":"w-20",large:"w-24",xl:"w-36"},LHe="w-6 md:w-8",Na=I.memo(({size:e="large",includeEffects:t=!1,isPro:n=!1,isMax:r=!1,isEnterprise:s=!1,variant:a="full",color:i="foreground",...l})=>{let c="w-28 md:w-[140px]";e==="tiny"?c="w-14 md:w-16":e==="small"?c="w-24":e==="large"?c="w-40 md:w-52":e==="xl"&&(c=s?"w-72":"w-64");const u=OHe?.[e]||LHe;let d="w-6";e==="large"?d="w-12":e==="md-large"?d="w-8":e==="xl"&&(d="w-36");const m=B("",{"stroke-foreground":i==="foreground","stroke-quiet":i==="quiet","stroke-super":i==="super"||i==="mixed","stroke-caution":i==="caution","stroke-light":i==="white","stroke-inverse":i==="background","group-hover:stroke-super transition-colors duration-300":t}),p=B(" block",{"fill-foreground":i==="foreground"||i==="mixed","fill-quiet":i==="quiet","fill-super":i==="super","fill-caution":i==="caution","fill-light":i==="white","fill-inverse":i==="background","group-hover:fill-super transition-colors duration-300":t});return a==="pro"?o.jsx(R5,{width:d,fillColor:p,...l}):a==="mark"?o.jsx("div",{className:B({"transition-all duration-300 ease-in-out hover:scale-105":t}),children:o.jsx(qde,{lineColor:m,width:u,...l})}):a==="text"?o.jsx(Kde,{fillColor:p,width:c,isPro:n,isMax:r,isEnterprise:s,...l}):a==="full"?o.jsx(zde,{fillColor:p,lineColor:m,width:c,...l}):a==="labs"?o.jsx(Gde,{width:c,fillColor:p,...l}):null});Na.displayName="Logo";const P5=I.memo(({onClick:e,testId:t="close-button",size:n="small",variant:r="common",className:s="right-sm top-sm absolute",ariaLabel:a="Close"})=>o.jsx("div",{className:s,children:o.jsx(Te,{testId:t,variant:r,pill:!0,size:n,onClick:e,icon:Rt,ariaLabel:a})}));P5.displayName="CloseButton";var Z4="focusScope.autoFocusOnMount",J4="focusScope.autoFocusOnUnmount",$q={bubbles:!1,cancelable:!0},DHe="FocusScope",hD=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[l,c]=f.useState(null),u=Ka(s),d=Ka(a),m=f.useRef(null),p=Vn(t,y=>c(y)),h=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let y=function(_){if(h.paused||!l)return;const w=_.target;l.contains(w)?m.current=w:Vu(m.current,{select:!0})},v=function(_){if(h.paused||!l)return;const w=_.relatedTarget;w!==null&&(l.contains(w)||Vu(m.current,{select:!0}))},x=function(_){if(document.activeElement===document.body)for(const C of _)C.removedNodes.length>0&&Vu(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",v);const b=new MutationObserver(x);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",v),b.disconnect()}}},[r,l,h.paused]),f.useEffect(()=>{if(l){Hq.add(h);const y=document.activeElement;if(!l.contains(y)){const x=new CustomEvent(Z4,$q);l.addEventListener(Z4,u),l.dispatchEvent(x),x.defaultPrevented||(FHe(WHe(Yde(l)),{select:!0}),document.activeElement===y&&Vu(l))}return()=>{l.removeEventListener(Z4,u),setTimeout(()=>{const x=new CustomEvent(J4,$q);l.addEventListener(J4,d),l.dispatchEvent(x),x.defaultPrevented||Vu(y??document.body,{select:!0}),l.removeEventListener(J4,d),Hq.remove(h)},0)}}},[l,u,d,h]);const g=f.useCallback(y=>{if(!n&&!r||h.paused)return;const v=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,x=document.activeElement;if(v&&x){const b=y.currentTarget,[_,w]=UHe(b);_&&w?!y.shiftKey&&x===w?(y.preventDefault(),n&&Vu(_,{select:!0})):y.shiftKey&&x===_&&(y.preventDefault(),n&&Vu(w,{select:!0})):x===b&&y.preventDefault()}},[n,r,h.paused]);return o.jsx(dn.div,{tabIndex:-1,...i,ref:p,onKeyDown:g})});hD.displayName=DHe;function FHe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Vu(r,{select:t}),document.activeElement!==n)return}function UHe(e){const t=Yde(e),n=Wq(t,e),r=Wq(t.reverse(),e);return[n,r]}function Yde(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Wq(e,t){for(const n of e)if(!BHe(n,{upTo:t}))return n}function BHe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function VHe(e){return e instanceof HTMLInputElement&&"select"in e}function Vu(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&VHe(e)&&t&&e.select()}}var Hq=$He();function $He(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=zq(e,t),e.unshift(t)},remove(t){e=zq(e,t),e[0]?.resume()}}}function zq(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function WHe(e){return e.filter(t=>t.tagName!=="A")}var eN=0;function Qde(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Gq()),document.body.insertAdjacentElement("beforeend",e[1]??Gq()),eN++,()=>{eN===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),eN--}},[])}function Gq(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var zv="right-scroll-bar-position",Gv="width-before-scroll-bar",HHe="with-scroll-bars-hidden",zHe="--removed-body-scroll-bar-size";function tN(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function GHe(e,t){var n=f.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var qHe=typeof window<"u"?f.useLayoutEffect:f.useEffect,qq=new WeakMap;function Xde(e,t){var n=GHe(null,function(r){return e.forEach(function(s){return tN(s,r)})});return qHe(function(){var r=qq.get(n);if(r){var s=new Set(r),a=new Set(e),i=n.current;s.forEach(function(l){a.has(l)||tN(l,null)}),a.forEach(function(l){s.has(l)||tN(l,i)})}qq.set(n,e)},[e]),n}function KHe(e){return e}function YHe(e,t){t===void 0&&(t=KHe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,r);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(a),i=n}var c=function(){var d=i;i=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),n}}}};return s}function Zde(e){e===void 0&&(e={});var t=YHe(null);return t.options=vr({async:!0,ssr:!1},e),t}var Jde=function(e){var t=e.sideCar,n=M7(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,vr({},n))};Jde.isSideCarExport=!0;function efe(e,t){return e.useMedium(t),Jde}var tfe=Zde(),nN=function(){},O5=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:nN,onWheelCapture:nN,onTouchMoveCapture:nN}),s=r[0],a=r[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,m=e.shards,p=e.sideCar,h=e.noIsolation,g=e.inert,y=e.allowPinchZoom,v=e.as,x=v===void 0?"div":v,b=e.gapMode,_=M7(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,C=Xde([n,t]),S=vr(vr({},_),s);return f.createElement(f.Fragment,null,d&&f.createElement(w,{sideCar:tfe,removeScrollBar:u,shards:m,noIsolation:h,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:b}),i?f.cloneElement(f.Children.only(l),vr(vr({},S),{ref:C})):f.createElement(x,vr({},S,{className:c,ref:C}),l))});O5.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};O5.classNames={fullWidth:Gv,zeroRight:zv};var QHe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function XHe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=QHe();return t&&e.setAttribute("nonce",t),e}function ZHe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function JHe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var eze=function(){var e=0,t=null;return{add:function(n){e==0&&(t=XHe())&&(ZHe(t,n),JHe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},tze=function(){var e=eze();return function(t,n){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},gD=function(){var e=tze(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},nze={left:0,top:0,right:0,gap:0},rN=function(e){return parseInt(e||"",10)||0},rze=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[rN(n),rN(r),rN(s)]},sze=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return nze;var t=rze(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},aze=gD(),Eh="data-scroll-locked",oze=function(e,t,n,r){var s=e.left,a=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(HHe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Eh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zv,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Gv,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(zv," .").concat(zv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Gv," .").concat(Gv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Eh,`] {
    `).concat(zHe,": ").concat(l,`px;
  }
`)},Kq=function(){var e=parseInt(document.body.getAttribute(Eh)||"0",10);return isFinite(e)?e:0},ize=function(){f.useEffect(function(){return document.body.setAttribute(Eh,(Kq()+1).toString()),function(){var e=Kq()-1;e<=0?document.body.removeAttribute(Eh):document.body.setAttribute(Eh,e.toString())}},[])},nfe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;ize();var a=f.useMemo(function(){return sze(s)},[s]);return f.createElement(aze,{styles:oze(a,!t,s,n?"":"!important")})},OR=!1;if(typeof window<"u")try{var Pw=Object.defineProperty({},"passive",{get:function(){return OR=!0,!0}});window.addEventListener("test",Pw,Pw),window.removeEventListener("test",Pw,Pw)}catch{OR=!1}var vp=OR?{passive:!1}:!1,lze=function(e){return e.tagName==="TEXTAREA"},rfe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!lze(e)&&n[t]==="visible")},cze=function(e){return rfe(e,"overflowY")},uze=function(e){return rfe(e,"overflowX")},Yq=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=sfe(e,r);if(s){var a=afe(e,r),i=a[1],l=a[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},dze=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},fze=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},sfe=function(e,t){return e==="v"?cze(t):uze(t)},afe=function(e,t){return e==="v"?dze(t):fze(t)},mze=function(e,t){return e==="h"&&t==="rtl"?-1:1},pze=function(e,t,n,r,s){var a=mze(e,window.getComputedStyle(t).direction),i=a*r,l=n.target,c=t.contains(l),u=!1,d=i>0,m=0,p=0;do{var h=afe(e,l),g=h[0],y=h[1],v=h[2],x=y-v-a*g;(g||x)&&sfe(e,l)&&(m+=x,p+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(m)<1||!d&&Math.abs(p)<1)&&(u=!0),u},Ow=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Qq=function(e){return[e.deltaX,e.deltaY]},Xq=function(e){return e&&"current"in e?e.current:e},hze=function(e,t){return e[0]===t[0]&&e[1]===t[1]},gze=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},yze=0,xp=[];function vze(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),s=f.useState(yze++)[0],a=f.useState(gD)[0],i=f.useRef(e);f.useEffect(function(){i.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var y=Ze([e.lockRef.current],(e.shards||[]).map(Xq),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!i.current.allowPinchZoom;var x=Ow(y),b=n.current,_="deltaX"in y?y.deltaX:b[0]-x[0],w="deltaY"in y?y.deltaY:b[1]-x[1],C,S=y.target,E=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in y&&E==="h"&&S.type==="range")return!1;var M=Yq(E,S);if(!M)return!0;if(M?C=E:(C=E==="v"?"h":"v",M=Yq(E,S)),!M)return!1;if(!r.current&&"changedTouches"in y&&(_||w)&&(r.current=C),!C)return!0;var k=r.current||C;return pze(k,v,y,k==="h"?_:w)},[]),c=f.useCallback(function(y){var v=y;if(!(!xp.length||xp[xp.length-1]!==a)){var x="deltaY"in v?Qq(v):Ow(v),b=t.current.filter(function(C){return C.name===v.type&&(C.target===v.target||v.target===C.shadowParent)&&hze(C.delta,x)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var _=(i.current.shards||[]).map(Xq).filter(Boolean).filter(function(C){return C.contains(v.target)}),w=_.length>0?l(v,_[0]):!i.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),u=f.useCallback(function(y,v,x,b){var _={name:y,delta:v,target:x,should:b,shadowParent:xze(x)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),d=f.useCallback(function(y){n.current=Ow(y),r.current=void 0},[]),m=f.useCallback(function(y){u(y.type,Qq(y),y.target,l(y,e.lockRef.current))},[]),p=f.useCallback(function(y){u(y.type,Ow(y),y.target,l(y,e.lockRef.current))},[]);f.useEffect(function(){return xp.push(a),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,vp),document.addEventListener("touchmove",c,vp),document.addEventListener("touchstart",d,vp),function(){xp=xp.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,vp),document.removeEventListener("touchmove",c,vp),document.removeEventListener("touchstart",d,vp)}},[]);var h=e.removeScrollBar,g=e.inert;return f.createElement(f.Fragment,null,g?f.createElement(a,{styles:gze(s)}):null,h?f.createElement(nfe,{gapMode:e.gapMode}):null)}function xze(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const bze=efe(tfe,vze);var yD=f.forwardRef(function(e,t){return f.createElement(O5,vr({},e,{ref:t,sideCar:bze}))});yD.classNames=O5.classNames;var _ze=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},bp=new WeakMap,Lw=new WeakMap,Dw={},sN=0,ofe=function(e){return e&&(e.host||ofe(e.parentNode))},wze=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=ofe(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Cze=function(e,t,n,r){var s=wze(t,Array.isArray(e)?e:[e]);Dw[n]||(Dw[n]=new WeakMap);var a=Dw[n],i=[],l=new Set,c=new Set(s),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};s.forEach(u);var d=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(p){if(l.has(p))d(p);else try{var h=p.getAttribute(r),g=h!==null&&h!=="false",y=(bp.get(p)||0)+1,v=(a.get(p)||0)+1;bp.set(p,y),a.set(p,v),i.push(p),y===1&&g&&Lw.set(p,!0),v===1&&p.setAttribute(n,"true"),g||p.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return d(t),l.clear(),sN++,function(){i.forEach(function(m){var p=bp.get(m)-1,h=a.get(m)-1;bp.set(m,p),a.set(m,h),p||(Lw.has(m)||m.removeAttribute(r),Lw.delete(m)),h||m.removeAttribute(n)}),sN--,sN||(bp=new WeakMap,bp=new WeakMap,Lw=new WeakMap,Dw={})}},ife=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=_ze(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),Cze(r,s,n,"aria-hidden")):function(){return null}},L5="Dialog",[lfe,pZt]=co(L5),[Sze,tl]=lfe(L5),vD=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,l=f.useRef(null),c=f.useRef(null),[u,d]=Ji({prop:r,defaultProp:s??!1,onChange:a,caller:L5});return o.jsx(Sze,{scope:t,triggerRef:l,contentRef:c,contentId:bh(),titleId:bh(),descriptionId:bh(),open:u,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(m=>!m),[d]),modal:i,children:n})};vD.displayName=L5;var cfe="DialogTrigger",ufe=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=tl(cfe,n),a=Vn(t,s.triggerRef);return o.jsx(dn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ED(s.open),...r,ref:a,onClick:Ft(e.onClick,s.onOpenToggle)})});ufe.displayName=cfe;var xD="DialogPortal",[Eze,dfe]=lfe(xD,{forceMount:void 0}),bD=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=tl(xD,t);return o.jsx(Eze,{scope:t,forceMount:n,children:f.Children.map(r,i=>o.jsx(da,{present:n||a.open,children:o.jsx(Ab,{asChild:!0,container:s,children:i})}))})};bD.displayName=xD;var A2="DialogOverlay",_D=f.forwardRef((e,t)=>{const n=dfe(A2,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=tl(A2,e.__scopeDialog);return a.modal?o.jsx(da,{present:r||a.open,children:o.jsx(kze,{...s,ref:t})}):null});_D.displayName=A2;var Mze=Fx("DialogOverlay.RemoveScroll"),kze=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=tl(A2,n);return o.jsx(yD,{as:Mze,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(dn.div,{"data-state":ED(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),gm="DialogContent",wD=f.forwardRef((e,t)=>{const n=dfe(gm,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=tl(gm,e.__scopeDialog);return o.jsx(da,{present:r||a.open,children:a.modal?o.jsx(Tze,{...s,ref:t}):o.jsx(Nze,{...s,ref:t})})});wD.displayName=gm;var Tze=f.forwardRef((e,t)=>{const n=tl(gm,e.__scopeDialog),r=f.useRef(null),s=Vn(t,n.contentRef,r);return f.useEffect(()=>{const a=r.current;if(a)return ife(a)},[]),o.jsx(ffe,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ft(e.onCloseAutoFocus,a=>{a.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Ft(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:Ft(e.onFocusOutside,a=>a.preventDefault())})}),Nze=f.forwardRef((e,t)=>{const n=tl(gm,e.__scopeDialog),r=f.useRef(!1),s=f.useRef(!1);return o.jsx(ffe,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;n.triggerRef.current?.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),ffe=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=e,l=tl(gm,n),c=f.useRef(null),u=Vn(t,c);return Qde(),o.jsxs(o.Fragment,{children:[o.jsx(hD,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(Nb,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ED(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(jze,{titleId:l.titleId}),o.jsx(Ize,{contentRef:c,descriptionId:l.descriptionId})]})]})}),CD="DialogTitle",SD=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=tl(CD,n);return o.jsx(dn.h2,{id:s.titleId,...r,ref:t})});SD.displayName=CD;var mfe="DialogDescription",pfe=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=tl(mfe,n);return o.jsx(dn.p,{id:s.descriptionId,...r,ref:t})});pfe.displayName=mfe;var hfe="DialogClose",gfe=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=tl(hfe,n);return o.jsx(dn.button,{type:"button",...r,ref:t,onClick:Ft(e.onClick,()=>s.onOpenChange(!1))})});gfe.displayName=hfe;function ED(e){return e?"open":"closed"}var yfe="DialogTitleWarning",[hZt,vfe]=ABe(yfe,{contentName:gm,titleName:CD,docsSlug:"dialog"}),jze=({titleId:e})=>{const t=vfe(yfe),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Aze="DialogDescriptionWarning",Ize=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${vfe(Aze).contentName}}.`;return f.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},MD=vD,Rze=ufe,kD=bD,xfe=_D,D5=wD,F5=SD,TD=pfe,Pze=gfe;const ND=I.memo(e=>{const{children:t,trigger:n,...r}=e;return o.jsxs(MD,{...r,children:[n&&o.jsx(Rze,{asChild:!0,children:n}),o.jsx(Ke,{children:r.open&&o.jsx(kD,{forceMount:!0,children:t})})]})});ND.displayName="ControlledDialog";function Oze(e){const[t,n]=f.useState(!1),[r,s]=f.useState(!1),a=f.useMemo(()=>e?.isEnabled??!0,[e?.isEnabled]),i=f.useMemo(()=>a&&!t&&!r,[a,t,r]);return f.useMemo(()=>({canShow:i,handleConfirm(){n(!1),s(!0),e?.onConfirm()},handleCancel(){n(!1),s(!1)},isShowing:t,show(){n(!0)}}),[i,t,e])}const bfe=Wt("ConfirmCloseModalContext",{canShow:!1,handleCancel(){},handleConfirm(){},isShowing:!1,show(){}}),_fe=I.memo(function(t){const{children:n,trigger:r,value:s}=t;return o.jsx(bfe.Provider,{value:s,children:o.jsx(ND,{onOpenChange:s.handleCancel,open:s.isShowing,trigger:r,children:n})})});_fe.displayName="ConfirmCloseModalDialog";function Lze(){const e=f.useContext(bfe);if(!e)throw new Error("useConfirmCloseModalContext() used outside of provider.");return e}var wfe=Zde(),aN=function(){},U5=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:aN,onWheelCapture:aN,onTouchMoveCapture:aN}),s=r[0],a=r[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,m=e.shards,p=e.sideCar,h=e.noIsolation,g=e.inert,y=e.allowPinchZoom,v=e.as,x=v===void 0?"div":v,b=e.gapMode,_=M7(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,C=Xde([n,t]),S=vr(vr({},_),s);return f.createElement(f.Fragment,null,d&&f.createElement(w,{sideCar:wfe,removeScrollBar:u,shards:m,noIsolation:h,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:b}),i?f.cloneElement(f.Children.only(l),vr(vr({},S),{ref:C})):f.createElement(x,vr({},S,{className:c,ref:C}),l))});U5.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};U5.classNames={fullWidth:Gv,zeroRight:zv};var LR=!1;if(typeof window<"u")try{var Fw=Object.defineProperty({},"passive",{get:function(){return LR=!0,!0}});window.addEventListener("test",Fw,Fw),window.removeEventListener("test",Fw,Fw)}catch{LR=!1}var _p=LR?{passive:!1}:!1,Dze=function(e){return e.tagName==="TEXTAREA"},Cfe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Dze(e)&&n[t]==="visible")},Fze=function(e){return Cfe(e,"overflowY")},Uze=function(e){return Cfe(e,"overflowX")},Zq=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Sfe(e,r);if(s){var a=Efe(e,r),i=a[1],l=a[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Bze=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Vze=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Sfe=function(e,t){return e==="v"?Fze(t):Uze(t)},Efe=function(e,t){return e==="v"?Bze(t):Vze(t)},$ze=function(e,t){return e==="h"&&t==="rtl"?-1:1},Wze=function(e,t,n,r,s){var a=$ze(e,window.getComputedStyle(t).direction),i=a*r,l=n.target,c=t.contains(l),u=!1,d=i>0,m=0,p=0;do{var h=Efe(e,l),g=h[0],y=h[1],v=h[2],x=y-v-a*g;(g||x)&&Sfe(e,l)&&(m+=x,p+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(m)<1||!d&&Math.abs(p)<1)&&(u=!0),u},Uw=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Jq=function(e){return[e.deltaX,e.deltaY]},eK=function(e){return e&&"current"in e?e.current:e},Hze=function(e,t){return e[0]===t[0]&&e[1]===t[1]},zze=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Gze=0,wp=[];function qze(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),s=f.useState(Gze++)[0],a=f.useState(gD)[0],i=f.useRef(e);f.useEffect(function(){i.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var y=Ze([e.lockRef.current],(e.shards||[]).map(eK),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!i.current.allowPinchZoom;var x=Uw(y),b=n.current,_="deltaX"in y?y.deltaX:b[0]-x[0],w="deltaY"in y?y.deltaY:b[1]-x[1],C,S=y.target,E=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in y&&E==="h"&&S.type==="range")return!1;var M=Zq(E,S);if(!M)return!0;if(M?C=E:(C=E==="v"?"h":"v",M=Zq(E,S)),!M)return!1;if(!r.current&&"changedTouches"in y&&(_||w)&&(r.current=C),!C)return!0;var k=r.current||C;return Wze(k,v,y,k==="h"?_:w)},[]),c=f.useCallback(function(y){var v=y;if(!(!wp.length||wp[wp.length-1]!==a)){var x="deltaY"in v?Jq(v):Uw(v),b=t.current.filter(function(C){return C.name===v.type&&(C.target===v.target||v.target===C.shadowParent)&&Hze(C.delta,x)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var _=(i.current.shards||[]).map(eK).filter(Boolean).filter(function(C){return C.contains(v.target)}),w=_.length>0?l(v,_[0]):!i.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),u=f.useCallback(function(y,v,x,b){var _={name:y,delta:v,target:x,should:b,shadowParent:Kze(x)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),d=f.useCallback(function(y){n.current=Uw(y),r.current=void 0},[]),m=f.useCallback(function(y){u(y.type,Jq(y),y.target,l(y,e.lockRef.current))},[]),p=f.useCallback(function(y){u(y.type,Uw(y),y.target,l(y,e.lockRef.current))},[]);f.useEffect(function(){return wp.push(a),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,_p),document.addEventListener("touchmove",c,_p),document.addEventListener("touchstart",d,_p),function(){wp=wp.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,_p),document.removeEventListener("touchmove",c,_p),document.removeEventListener("touchstart",d,_p)}},[]);var h=e.removeScrollBar,g=e.inert;return f.createElement(f.Fragment,null,g?f.createElement(a,{styles:zze(s)}):null,h?f.createElement(nfe,{gapMode:e.gapMode}):null)}function Kze(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Yze=efe(wfe,qze);var jD=f.forwardRef(function(e,t){return f.createElement(U5,vr({},e,{ref:t,sideCar:Yze}))});jD.classNames=U5.classNames;const Bd=I.memo(({children:e,portalTarget:t})=>{const[n,r]=f.useState(!1);return f.useEffect(()=>(r(!0),()=>r(!1)),[]),n?Us.createPortal(e,t||document.body):null});Bd.displayName="Portal";const Qze=250,cy=I.memo(({animationClassName:e,children:t,isOpen:n=!1,transparent:r=!1,canOutsideClickClose:s=!0,onBeforeClose:a,onClose:i,onIsClosing:l,childVariant:c="default",center:u=!0,shouldClose:d=!1,disableAnimation:m=!1,testId:p,removeScroll:h=!0,shards:g=[],delayClose:y=!0,variant:v="default",portalTarget:x,includeBlur:b=!0,forceColorScheme:_})=>{const w=f.useRef(null),C=f.useRef(null),S=f.useRef(null),[E,M]=f.useState(!1),k=f.useRef(!1),A=f.useCallback(j=>{E||a?.()===!1||(y?(M(!0),l?.(),setTimeout(()=>{i?.(j),M(!1)},Qze)):(M(!0),i?.(j),M(!1)))},[E,a,y,l,i]);f.useEffect(()=>{d&&!E&&A("closed")},[d,E,A]);const R=f.useCallback(j=>{r&&!s?j.stopPropagation():j.target===w.current&&A("backdrop")},[r,s,A]),O=f.useCallback(j=>{const F=j.target;if(F instanceof Element){if(C.current===F||C.current?.contains(F))return;const U=F.closest('[data-type="portal"]');if(U&&U!==S.current&&!r)return}M(!1),A("clickaway")},[A,r]);f.useEffect(()=>{if(n&&r&&s)return document.addEventListener("click",O),()=>{document.removeEventListener("click",O)}},[n,r,O,s]);const L=f.useCallback(j=>{j.key==="Escape"&&A("escape")},[A]);f.useEffect(()=>(n&&document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L)}),[n,L]);const P=f.useMemo(()=>B("duration-200 fill-mode-both",{"animate-in fade-in zoom-in-[0.98] ease-in":["default","large","small","hide-chrome","full-sheet"].includes(c),"zoom-out-[0.98] fade-out animate-out ease-out":["default","hide-chrome","full-sheet","large","small"].includes(c)&&E,"fixed bottom-0 left-0":c==="bottom-left-sheet","fixed top-0 right-0 left-0":c==="side-sheet","fixed bottom-0 left-0 right-0":c==="bottom-sheet"},e),[e,c,E]),N=B("items-stretch md:items-center",{"fill-mode-both fixed inset-0":!r,"bg-backdrop/70":v==="default"||v==="default-less-blur","bg-lightbox/95":v==="lightbox","animate-in fade-in ease-outExpo duration-200":!E&&!m,"animate-out fade-out ease-inExpo duration-200":E&&!m},{"backdrop-blur-md":b&&v==="lightbox","backdrop-blur-sm":b&&v==="default","backdrop-blur-[0.5px]":b&&v==="default-less-blur"}),T=f.useMemo(()=>n?o.jsxs(jD,{removeScrollBar:!1,enabled:h,allowPinchZoom:!0,shards:g,children:[o.jsx("div",{className:N}),o.jsx("div",{ref:w,onPointerDown:j=>{k.current=j.target===w.current},onPointerUp:j=>{k.current&&R(j),k.current=!1},className:B({"fixed inset-0 overflow-y-auto":!r,"flex items-center justify-center":u}),"data-test-id":p,children:o.jsx("div",{ref:C,className:P,children:t})})]}):null,[n,t,r,u,p,R,P,C,w,h,g,N]);return o.jsx(Bd,{portalTarget:x,children:o.jsx("div",{ref:S,"data-type":"portal","data-color-scheme":_,children:T})})});cy.displayName="Overlay";const Mfe=Wt("ModalInternalContext",{canOutsideClickClose:!0}),en=I.memo(({title:e,subtitle:t,subtitleClassname:n,centerTitle:r,children:s,actionList:a=ue,variant:i="default",onClose:l,noPadding:c=!1,onIsClosing:u,titleContent:d,footerContent:m,icon:p,overlayVariant:h,titleLeadingButtonProps:g,confirmOnClose:y,titleTextVariant:v="page-title",headerClassname:x,closeButtonClassname:b="right-0 top-sm absolute",footerClassname:_,renderCloseButton:w=!0,fixedTitle:C,modalClassname:S,modalContentClassname:E,modalElementProps:M,includeBlur:k=!0,isOpen:A,ref:R,wrapperClassname:O,forceColorScheme:L,...P})=>{const N=f.useRef(null),T=f.useRef(null),j=f.useRef(null),F=f.useRef(null),[U,V]=f.useState(!1),[$,z]=f.useState(!1),[Q,Y]=f.useState(!1);f.useEffect(()=>{A&&!Q?Y(!0):!A&&Q&&!U&&V(!0)},[A,Q,U]);const W=f.useMemo(()=>!!y,[y]),X=Oze({isEnabled:W,onConfirm(){z(!0),V(!0)}}),G=f.useMemo(()=>B(S,"bg-base shadow-md overflow-y-auto scrollbar-subtle fill-mode-both",{"md:rounded-xl md:min-w-[600px] max-w-screen-sm shadow-md dark:border dark:border-subtlest relative h-full max-h-[100vh] md:max-h-[95vh] overflow-auto md:w-full":i==="default","min-h-0 max-h-[70vh] rounded-t-xl bottom-0 left-0 right-0 flex flex-col":i==="bottom-left-sheet","w-screen md:h-screen h-[100dvh] flex flex-col":i==="full-sheet","w-screen min-h-[60dvh] md:min-h-[60vh] shadow-overlay max-h-[96dvh] md:max-h-[96vh] flex flex-col fixed bottom-0 left-0 right-0":i==="bottom-sheet","h-screen w-[40vw] min-w-[500px] shadow-overlay top-0 right-0 fixed flex flex-col":i==="side-sheet","animate-in slide-in-from-right ease-outExpo":i==="side-sheet"&&!$,"animate-out slide-out-to-right ease-inExpo":i==="side-sheet"&&$,"animate-in slide-in-from-bottom ease-in":["bottom-left-sheet","bottom-sheet"].includes(i)&&!$,"animate-out slide-out-to-bottom ease-out":["bottom-left-sheet","bottom-sheet"].includes(i)&&$,"max-h-[100vh] w-[90vw] rounded-l-xl flex flex-col":i==="wide","h-[95vh] w-[95vw] rounded-xl flex flex-col":i==="full","md:rounded-lg md:min-w-[600px] max-w-screen-lg shadow-md relative overflow-auto max-h-[100vh]":i==="large","md:rounded-lg md:min-w-[500px] max-w-screen-lg shadow-md relative overflow-auto max-h-[100vh]":i==="medium","md:rounded-lg md:max-w-[440px] shadow-md relative overflow-auto max-h-[100vh]":i==="small","md:rounded-lg md:max-w-[350px] shadow-md relative overflow-auto max-h-[100vh]":i==="thin"}),[i,$,S]),J=f.useMemo(()=>B("grow flex flex-col justify-center shrink-0",{"md:pt-md":e===void 0&&!d,"md:pb-lg":a?.length===0,"p-sm":!c,"p-0":c},E),[a?.length,c,e,E,d]),q=f.useMemo(()=>a.map((_e,Se)=>f.createElement(kfe,{..._e,idx:Se,key:Se,confirmCloseModal:X})),[a,X]);f.useImperativeHandle(R,()=>({scrollContainerRef:N,headerRef:T,contentRef:j,footerRef:F}),[N,T,F]);const te=f.useCallback(()=>{u?.(),z(!0)},[u]),re=f.useCallback(_e=>{z(!1),V(!1),Y(!1),l?.(_e)},[l]),ae=f.useCallback(()=>{if(X?.canShow){X.show();return}V(!0)},[X]),fe=f.useCallback(()=>X?.canShow?(X.show(),!1):!0,[X]),{canOutsideClickClose:de}=f.useContext(Mfe),ve=f.useMemo(()=>o.jsxs(o.Fragment,{children:[o.jsx("div",{children:i==="hide-chrome"?o.jsx("div",{children:s}):o.jsxs(ge.div,{animate:{scale:X.isShowing?.955:1},className:G,transition:{duration:.2},ref:N,...M,children:[o.jsx("div",{className:"right-sm top-sm fixed z-[23] md:absolute"}),o.jsxs(H,{className:B(O,"px-md pb-md flex min-h-0 w-screen grow flex-col md:w-[unset] md:grow-[unset]",{"h-full":!C,"h-auto !grow":C}),children:[o.jsxs(H,{variant:"background",className:B(x,"pt-md sticky top-0 z-[22] w-full shrink-0",{"text-center":r,"h-10":!e&&!d}),ref:T,children:[o.jsxs("div",{className:"p-sm flex items-center gap-1.5",children:[g&&o.jsx(Te,{extraCSS:"-ml-sm",...g,size:"small",variant:"common"}),p&&o.jsx(ce,{icon:p,className:"text-foreground -ml-xs -translate-y-two",size:"xl"}),e&&o.jsx(D,{variant:v,className:B("line-clamp-3 text-pretty",v,{"pt-lg grow":r,"mr-lg":!r}),children:e}),!e&&d,w&&o.jsx(P5,{onClick:ae,testId:"close-modal",className:b})]}),t&&o.jsx(D,{variant:"base",color:"light",className:B("mt-xs p-sm line-clamp-3 text-pretty",n),children:t})]}),s&&o.jsx("div",{className:J,ref:j,children:s}),(q?.length>0||m)&&o.jsxs(H,{variant:"background",className:B("gap-x-sm p-sm pt-lg bottom-0 z-10 flex items-center",{"justify-end":!m},{"justify-between":m},{sticky:!0},_),ref:F,children:[m&&o.jsx("div",{className:"flex-1",children:m}),q]})]})]})}),W&&o.jsx(_fe,{value:X,children:y})]}),[q,r,s,b,X,y,J,C,_,m,ae,x,p,W,G,M,w,t,n,e,d,g,v,i,O]);return o.jsx(cy,{forceColorScheme:L,includeBlur:k,childVariant:i,shouldClose:U,onBeforeClose:fe,onIsClosing:te,onClose:re,variant:h,isOpen:Q,canOutsideClickClose:de,...P,children:ve})});en.displayName="Modal";const kfe=I.memo(({idx:e,text:t,onClick:n,variant:r,disabled:s,isLoading:a,testId:i,icon:l,shouldShowConfirmDialog:c,buttonClassname:u,tooltipText:d,confirmCloseModal:m})=>{const p=f.useCallback(y=>{if(y.stopPropagation(),r&&c&&m.canShow){m.show();return}n?.()},[m,n,c,r]),h={key:e,text:t,disabled:s,isLoading:a,testId:i,chevronIcon:l,extraCSS:u},g=f.createElement(he,{fullWidthMobile:!0,variant:r||void 0,...h,onClick:p,key:h.key});return d?o.jsx(bn,{tooltipText:d,tooltipLayout:"top",children:g}):g});kfe.displayName="ButtonFactory";const Tfe={keyProp:0,message:null,variant:"success",description:void 0,isVisible:!1,ctaText:void 0,ctaOnClick:void 0,openToast:()=>{},closeToast:()=>{},deprecatedOpenToast:()=>{}},Nfe=Wt("ToastStateContext",Tfe),jfe=I.memo(({children:e})=>{const[t,n]=f.useState(Tfe),r=f.useCallback(({message:l,variant:c,timeout:u,description:d,ctaText:m,ctaOnClick:p,iconOverride:h,position:g="top"})=>{n(y=>({...y,message:l,variant:c,timeout:u,description:d,ctaText:m,ctaOnClick:p,iconOverride:h,position:g??"top",isVisible:!0,keyProp:(y.keyProp||0)+1}))},[]),s=f.useCallback((l,c,u,d,m,p,h,g)=>{r({message:l,variant:c,timeout:u,description:d,ctaText:m,ctaOnClick:p,iconOverride:h,position:g??"top"})},[r]),a=f.useCallback(()=>{n(l=>({...l,isVisible:!1}))},[]),i=f.useMemo(()=>({...t,openToast:r,closeToast:a,deprecatedOpenToast:s}),[t,r,a,s]);return o.jsx(Nfe.Provider,{value:i,children:e})});jfe.displayName="ToastStateProvider";const gn=()=>{const e=f.useContext(Nfe);if(!e)throw new Error("useToastState must be used within ToastContext");return e},Afe=I.memo(({isOpen:e,onClose:t,uuidOrSlug:n})=>{const r="request-access-modal",{$t:s}=Z(),{deprecatedOpenToast:a}=gn(),{trackEvent:i}=Ne();f.useEffect(()=>{i("thread access modal viewed",{uuidOrSlug:n})},[i,n]);const l=f.useCallback(u=>{i("thread access modal requested",{uuidOrSlug:n}),jHe({slugOrUUID:n,reason:r}).then(()=>{t(),a(s({defaultMessage:"Access request sent",id:"STvLV+qKiH"}),"success",3)})},[n,s,t,a,i]),c=f.useCallback(()=>l(n),[l,n]);return o.jsx(en,{isOpen:e,onClose:t,variant:"thin",children:o.jsx(H,{className:"px-md mx-auto text-center",children:o.jsxs("div",{className:"gap-y-md flex flex-col",children:[o.jsx("div",{className:"mb-lg flex justify-center",children:o.jsx(Na,{variant:"full",size:"large",color:"foreground"})}),o.jsxs("div",{className:"mx-auto max-w-sm",children:[o.jsx(D,{variant:"section-title",className:"-mt-md",children:s({defaultMessage:"This answer is private",id:"cA+GFbHP/s"})}),o.jsx(D,{variant:"base",color:"light",className:"-mb-md",children:s({defaultMessage:"You can access this page if the owner accepts your request.",id:"SOJ/6nzOoc"})})]}),o.jsxs("div",{className:"mt-lg mb-md mx-auto flex w-full max-w-sm flex-col gap-y-2",children:[o.jsx(he,{variant:"primary",text:s({defaultMessage:"Request access",id:"vkHRp5q6Wi"}),onClick:c}),o.jsx(he,{variant:"common",text:s({defaultMessage:"Back to Perplexity",id:"r89PhWwooe"}),onClick:t,textClassName:"font-normal"})]})]})})})});Afe.displayName="RequestAccessModal";var ct;(function(e){e.SCHEDULED="scheduled",e.PRICE_ALERT="priceAlert",e.SHORTCUT="shortcut"})(ct||(ct={}));var Vr;(function(e){e.TARGET_PRICE="targetPrice",e.MOVEMENT_AMOUNT="movementAmount"})(Vr||(Vr={}));const DR=1e9,Ife=ot({STOCK_PRICE_TARGET:{defaultMessage:"Price Target",id:"GkDb3edsv4"},STOCK_PRICE_MOVEMENT:{defaultMessage:"Price Movement",id:"nccbHgYn+f"}});function gZt(e){return e in Ife}function Xze(e,t){return t.formatMessage(Ife[e])}function Zze(e,t){const{event_entity:n,event_type:r,value_upper_bound:s,value_lower_bound:a}=e;let i="";return r==="STOCK_PRICE_TARGET"?a!=null?i=t.formatMessage({defaultMessage:"goes below ${value}",id:"RKgpKR3E99"},{value:a}):s!=null?i=t.formatMessage({defaultMessage:"goes above ${value}",id:"8eV5ClXcpi"},{value:s}):i=t.formatMessage({defaultMessage:"price target",id:"vnTdzDaohg"}):r==="STOCK_PRICE_MOVEMENT"?a!=null?i=t.formatMessage({defaultMessage:"drops {percent}%+",id:"Vl3IJiE9mt"},{percent:Math.abs(a)}):s!=null?i=t.formatMessage({defaultMessage:"rises {percent}%+",id:"EK4T00JAfI"},{percent:s}):i=t.formatMessage({defaultMessage:"price movement",id:"Pcu8sUjesQ"}):i=t.formatMessage({defaultMessage:"event triggers",id:"LpIhmla5ty"}),{kind:n,friendly:i,isRecurring:!1}}function ja(e){"@babel/helpers - typeof";return ja=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ja(e)}function hr(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function dt(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Mt(e){dt(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||ja(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Ds(e,t){dt(2,arguments);var n=Mt(e),r=hr(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function $i(e,t){dt(2,arguments);var n=Mt(e),r=hr(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var s=n.getDate(),a=new Date(n.getTime());a.setMonth(n.getMonth()+r+1,0);var i=a.getDate();return s>=i?a:(n.setFullYear(a.getFullYear(),a.getMonth(),s),n)}function b0(e,t){if(dt(2,arguments),!t||ja(t)!=="object")return new Date(NaN);var n=t.years?hr(t.years):0,r=t.months?hr(t.months):0,s=t.weeks?hr(t.weeks):0,a=t.days?hr(t.days):0,i=t.hours?hr(t.hours):0,l=t.minutes?hr(t.minutes):0,c=t.seconds?hr(t.seconds):0,u=Mt(e),d=r||n?$i(u,r+n*12):u,m=a||s?Ds(d,a+s*7):d,p=l+i*60,h=c+p*60,g=h*1e3,y=new Date(m.getTime()+g);return y}function Jze(e,t){dt(2,arguments);var n=Mt(e).getTime(),r=hr(t);return new Date(n+r)}var eGe={};function Vd(){return eGe}function zl(e,t){var n,r,s,a,i,l,c,u;dt(1,arguments);var d=Vd(),m=hr((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=Mt(e),h=p.getDay(),g=(h<m?7:0)+h-m;return p.setDate(p.getDate()-g),p.setHours(0,0,0,0),p}function ym(e){return dt(1,arguments),zl(e,{weekStartsOn:1})}function tGe(e){dt(1,arguments);var t=Mt(e),n=t.getFullYear(),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var s=ym(r),a=new Date(0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);var i=ym(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function nGe(e){dt(1,arguments);var t=tGe(e),n=new Date(0);n.setFullYear(t,0,4),n.setHours(0,0,0,0);var r=ym(n);return r}function i1(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Ed(e){dt(1,arguments);var t=Mt(e);return t.setHours(0,0,0,0),t}var rGe=864e5;function El(e,t){dt(2,arguments);var n=Ed(e),r=Ed(t),s=n.getTime()-i1(n),a=r.getTime()-i1(r);return Math.round((s-a)/rGe)}function I2(e,t){dt(2,arguments);var n=hr(t),r=n*7;return Ds(e,r)}function sGe(e,t){dt(2,arguments);var n=hr(t);return $i(e,n*12)}function aGe(e){dt(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(ja(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var n;return t.forEach(function(r){var s=Mt(r);(n===void 0||n<s||isNaN(Number(s)))&&(n=s)}),n||new Date(NaN)}function oGe(e){dt(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(ja(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var n;return t.forEach(function(r){var s=Mt(r);(n===void 0||n>s||isNaN(s.getDate()))&&(n=s)}),n||new Date(NaN)}function Mh(e,t){dt(2,arguments);var n=Mt(e),r=Mt(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}var Rfe=6e4,iGe=36e5,lGe=1e3;function Fs(e,t){dt(2,arguments);var n=Ed(e),r=Ed(t);return n.getTime()===r.getTime()}function AD(e){return dt(1,arguments),e instanceof Date||ja(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function cGe(e){if(dt(1,arguments),!AD(e)&&typeof e!="number")return!1;var t=Mt(e);return!isNaN(Number(t))}function og(e,t){dt(2,arguments);var n=Mt(e),r=Mt(t),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}var uGe=6048e5;function dGe(e,t,n){dt(2,arguments);var r=zl(e,n),s=zl(t,n),a=r.getTime()-i1(r),i=s.getTime()-i1(s);return Math.round((a-i)/uGe)}function fGe(e,t){dt(2,arguments);var n=Mt(e),r=Mt(t);return n.getFullYear()-r.getFullYear()}function tK(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function mGe(e,t){dt(2,arguments);var n=Mt(e),r=Mt(t),s=tK(n,r),a=Math.abs(El(n,r));n.setDate(n.getDate()-s*a);var i=+(tK(n,r)===-s),l=s*(a-i);return l===0?0:l}function ID(e,t){return dt(2,arguments),Mt(e).getTime()-Mt(t).getTime()}var pGe={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},hGe="trunc";function RD(e){return pGe[hGe]}function gGe(e,t,n){dt(2,arguments);var r=ID(e,t)/iGe;return RD()(r)}function yGe(e,t,n){dt(2,arguments);var r=ID(e,t)/Rfe;return RD()(r)}function vGe(e){dt(1,arguments);var t=Mt(e);return t.setHours(23,59,59,999),t}function B5(e){dt(1,arguments);var t=Mt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function xGe(e){dt(1,arguments);var t=Mt(e);return vGe(t).getTime()===B5(t).getTime()}function bGe(e,t){dt(2,arguments);var n=Mt(e),r=Mt(t),s=Mh(n,r),a=Math.abs(og(n,r)),i;if(a<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);var l=Mh(n,r)===-s;xGe(Mt(e))&&a===1&&Mh(e,r)===1&&(l=!1),i=s*(a-Number(l))}return i===0?0:i}function _Ge(e,t,n){dt(2,arguments);var r=ID(e,t)/1e3;return RD()(r)}function wGe(e,t){dt(2,arguments);var n=Mt(e),r=Mt(t),s=Mh(n,r),a=Math.abs(fGe(n,r));n.setFullYear(1584),r.setFullYear(1584);var i=Mh(n,r)===-s,l=s*(a-Number(i));return l===0?0:l}function no(e){dt(1,arguments);var t=Mt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function CGe(e){dt(1,arguments);var t=Mt(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function PD(e,t){var n,r,s,a,i,l,c,u;dt(1,arguments);var d=Vd(),m=hr((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=Mt(e),h=p.getDay(),g=(h<m?-7:0)+6-(h-m);return p.setDate(p.getDate()+g),p.setHours(23,59,59,999),p}function Pfe(e){return dt(1,arguments),PD(e,{weekStartsOn:1})}function SGe(e,t){dt(2,arguments);var n=hr(t);return Jze(e,-n)}var EGe=864e5;function MGe(e){dt(1,arguments);var t=Mt(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),s=n-r;return Math.floor(s/EGe)+1}function R2(e){dt(1,arguments);var t=1,n=Mt(e),r=n.getUTCDay(),s=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function Ofe(e){dt(1,arguments);var t=Mt(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=R2(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var i=R2(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function kGe(e){dt(1,arguments);var t=Ofe(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=R2(n);return r}var TGe=6048e5;function NGe(e){dt(1,arguments);var t=Mt(e),n=R2(t).getTime()-kGe(t).getTime();return Math.round(n/TGe)+1}function P2(e,t){var n,r,s,a,i,l,c,u;dt(1,arguments);var d=Vd(),m=hr((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=Mt(e),h=p.getUTCDay(),g=(h<m?7:0)+h-m;return p.setUTCDate(p.getUTCDate()-g),p.setUTCHours(0,0,0,0),p}function Lfe(e,t){var n,r,s,a,i,l,c,u;dt(1,arguments);var d=Mt(e),m=d.getUTCFullYear(),p=Vd(),h=hr((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(c=p.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(m+1,0,h),g.setUTCHours(0,0,0,0);var y=P2(g,t),v=new Date(0);v.setUTCFullYear(m,0,h),v.setUTCHours(0,0,0,0);var x=P2(v,t);return d.getTime()>=y.getTime()?m+1:d.getTime()>=x.getTime()?m:m-1}function jGe(e,t){var n,r,s,a,i,l,c,u;dt(1,arguments);var d=Vd(),m=hr((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=Lfe(e,t),h=new Date(0);h.setUTCFullYear(p,0,m),h.setUTCHours(0,0,0,0);var g=P2(h,t);return g}var AGe=6048e5;function IGe(e,t){dt(1,arguments);var n=Mt(e),r=P2(n,t).getTime()-jGe(n,t).getTime();return Math.round(r/AGe)+1}function Gn(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var Pu={y:function(t,n){var r=t.getUTCFullYear(),s=r>0?r:1-r;return Gn(n==="yy"?s%100:s,n.length)},M:function(t,n){var r=t.getUTCMonth();return n==="M"?String(r+1):Gn(r+1,2)},d:function(t,n){return Gn(t.getUTCDate(),n.length)},a:function(t,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,n){return Gn(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Gn(t.getUTCHours(),n.length)},m:function(t,n){return Gn(t.getUTCMinutes(),n.length)},s:function(t,n){return Gn(t.getUTCSeconds(),n.length)},S:function(t,n){var r=n.length,s=t.getUTCMilliseconds(),a=Math.floor(s*Math.pow(10,r-3));return Gn(a,n.length)}},Cp={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},RGe={G:function(t,n,r){var s=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,n,r){if(n==="yo"){var s=t.getUTCFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return Pu.y(t,n)},Y:function(t,n,r,s){var a=Lfe(t,s),i=a>0?a:1-a;if(n==="YY"){var l=i%100;return Gn(l,2)}return n==="Yo"?r.ordinalNumber(i,{unit:"year"}):Gn(i,n.length)},R:function(t,n){var r=Ofe(t);return Gn(r,n.length)},u:function(t,n){var r=t.getUTCFullYear();return Gn(r,n.length)},Q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Gn(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Gn(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,n,r){var s=t.getUTCMonth();switch(n){case"M":case"MM":return Pu.M(t,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,n,r){var s=t.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return Gn(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,n,r,s){var a=IGe(t,s);return n==="wo"?r.ordinalNumber(a,{unit:"week"}):Gn(a,n.length)},I:function(t,n,r){var s=NGe(t);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):Gn(s,n.length)},d:function(t,n,r){return n==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):Pu.d(t,n)},D:function(t,n,r){var s=MGe(t);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Gn(s,n.length)},E:function(t,n,r){var s=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,n,r,s){var a=t.getUTCDay(),i=(a-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(i);case"ee":return Gn(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,n,r,s){var a=t.getUTCDay(),i=(a-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(i);case"cc":return Gn(i,n.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,n,r){var s=t.getUTCDay(),a=s===0?7:s;switch(n){case"i":return String(a);case"ii":return Gn(a,n.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,n,r){var s=t.getUTCHours(),a=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,n,r){var s=t.getUTCHours(),a;switch(s===12?a=Cp.noon:s===0?a=Cp.midnight:a=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,n,r){var s=t.getUTCHours(),a;switch(s>=17?a=Cp.evening:s>=12?a=Cp.afternoon:s>=4?a=Cp.morning:a=Cp.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,n,r){if(n==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return Pu.h(t,n)},H:function(t,n,r){return n==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Pu.H(t,n)},K:function(t,n,r){var s=t.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Gn(s,n.length)},k:function(t,n,r){var s=t.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):Gn(s,n.length)},m:function(t,n,r){return n==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Pu.m(t,n)},s:function(t,n,r){return n==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Pu.s(t,n)},S:function(t,n){return Pu.S(t,n)},X:function(t,n,r,s){var a=s._originalDate||t,i=a.getTimezoneOffset();if(i===0)return"Z";switch(n){case"X":return rK(i);case"XXXX":case"XX":return Tf(i);case"XXXXX":case"XXX":default:return Tf(i,":")}},x:function(t,n,r,s){var a=s._originalDate||t,i=a.getTimezoneOffset();switch(n){case"x":return rK(i);case"xxxx":case"xx":return Tf(i);case"xxxxx":case"xxx":default:return Tf(i,":")}},O:function(t,n,r,s){var a=s._originalDate||t,i=a.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+nK(i,":");case"OOOO":default:return"GMT"+Tf(i,":")}},z:function(t,n,r,s){var a=s._originalDate||t,i=a.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+nK(i,":");case"zzzz":default:return"GMT"+Tf(i,":")}},t:function(t,n,r,s){var a=s._originalDate||t,i=Math.floor(a.getTime()/1e3);return Gn(i,n.length)},T:function(t,n,r,s){var a=s._originalDate||t,i=a.getTime();return Gn(i,n.length)}};function nK(e,t){var n=e>0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),a=r%60;if(a===0)return n+String(s);var i=t;return n+String(s)+i+Gn(a,2)}function rK(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Gn(Math.abs(e)/60,2)}return Tf(e,t)}function Tf(e,t){var n=t||"",r=e>0?"-":"+",s=Math.abs(e),a=Gn(Math.floor(s/60),2),i=Gn(s%60,2);return r+a+n+i}var sK=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Dfe=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},PGe=function(t,n){var r=t.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return sK(t,n);var i;switch(s){case"P":i=n.dateTime({width:"short"});break;case"PP":i=n.dateTime({width:"medium"});break;case"PPP":i=n.dateTime({width:"long"});break;case"PPPP":default:i=n.dateTime({width:"full"});break}return i.replace("{{date}}",sK(s,n)).replace("{{time}}",Dfe(a,n))},OGe={p:Dfe,P:PGe},LGe=["D","DD"],DGe=["YY","YYYY"];function FGe(e){return LGe.indexOf(e)!==-1}function UGe(e){return DGe.indexOf(e)!==-1}function aK(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var BGe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},VGe=function(t,n,r){var s,a=BGe[t];return typeof a=="string"?s=a:n===1?s=a.one:s=a.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function oN(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var $Ge={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},WGe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},HGe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zGe={date:oN({formats:$Ge,defaultWidth:"full"}),time:oN({formats:WGe,defaultWidth:"full"}),dateTime:oN({formats:HGe,defaultWidth:"full"})},GGe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qGe=function(t,n,r,s){return GGe[t]};function _0(e){return function(t,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,i=n!=null&&n.width?String(n.width):a;s=e.formattingValues[i]||e.formattingValues[a]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return s[u]}}var KGe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},YGe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},QGe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},XGe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ZGe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},JGe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eqe=function(t,n){var r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},tqe={ordinalNumber:eqe,era:_0({values:KGe,defaultWidth:"wide"}),quarter:_0({values:YGe,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:_0({values:QGe,defaultWidth:"wide"}),day:_0({values:XGe,defaultWidth:"wide"}),dayPeriod:_0({values:ZGe,defaultWidth:"wide",formattingValues:JGe,defaultFormattingWidth:"wide"})};function w0(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;var i=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?rqe(l,function(m){return m.test(i)}):nqe(l,function(m){return m.test(i)}),u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(i.length);return{value:u,rest:d}}}function nqe(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function rqe(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function sqe(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var s=r[0],a=t.match(e.parsePattern);if(!a)return null;var i=e.valueCallback?e.valueCallback(a[0]):a[0];i=n.valueCallback?n.valueCallback(i):i;var l=t.slice(s.length);return{value:i,rest:l}}}var aqe=/^(\d+)(th|st|nd|rd)?/i,oqe=/\d+/i,iqe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},lqe={any:[/^b/i,/^(a|c)/i]},cqe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},uqe={any:[/1/i,/2/i,/3/i,/4/i]},dqe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fqe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mqe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pqe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},hqe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gqe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yqe={ordinalNumber:sqe({matchPattern:aqe,parsePattern:oqe,valueCallback:function(t){return parseInt(t,10)}}),era:w0({matchPatterns:iqe,defaultMatchWidth:"wide",parsePatterns:lqe,defaultParseWidth:"any"}),quarter:w0({matchPatterns:cqe,defaultMatchWidth:"wide",parsePatterns:uqe,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:w0({matchPatterns:dqe,defaultMatchWidth:"wide",parsePatterns:fqe,defaultParseWidth:"any"}),day:w0({matchPatterns:mqe,defaultMatchWidth:"wide",parsePatterns:pqe,defaultParseWidth:"any"}),dayPeriod:w0({matchPatterns:hqe,defaultMatchWidth:"any",parsePatterns:gqe,defaultParseWidth:"any"})},Ffe={code:"en-US",formatDistance:VGe,formatLong:zGe,formatRelative:qGe,localize:tqe,match:yqe,options:{weekStartsOn:0,firstWeekContainsDate:1}},vqe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xqe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bqe=/^'([^]*?)'?$/,_qe=/''/g,wqe=/[a-zA-Z]/;function _u(e,t,n){var r,s,a,i,l,c,u,d,m,p,h,g,y,v,x,b,_,w;dt(2,arguments);var C=String(t),S=Vd(),E=(r=(s=n?.locale)!==null&&s!==void 0?s:S.locale)!==null&&r!==void 0?r:Ffe,M=hr((a=(i=(l=(c=n?.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(u=n.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&l!==void 0?l:S.firstWeekContainsDate)!==null&&i!==void 0?i:(m=S.locale)===null||m===void 0||(p=m.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=hr((h=(g=(y=(v=n?.weekStartsOn)!==null&&v!==void 0?v:n==null||(x=n.locale)===null||x===void 0||(b=x.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&y!==void 0?y:S.weekStartsOn)!==null&&g!==void 0?g:(_=S.locale)===null||_===void 0||(w=_.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&h!==void 0?h:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var A=Mt(e);if(!cGe(A))throw new RangeError("Invalid time value");var R=i1(A),O=SGe(A,R),L={firstWeekContainsDate:M,weekStartsOn:k,locale:E,_originalDate:A},P=C.match(xqe).map(function(N){var T=N[0];if(T==="p"||T==="P"){var j=OGe[T];return j(N,E.formatLong)}return N}).join("").match(vqe).map(function(N){if(N==="''")return"'";var T=N[0];if(T==="'")return Cqe(N);var j=RGe[T];if(j)return!(n!=null&&n.useAdditionalWeekYearTokens)&&UGe(N)&&aK(N,t,String(e)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&FGe(N)&&aK(N,t,String(e)),j(O,N,E.localize,L);if(T.match(wqe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return N}).join("");return P}function Cqe(e){var t=e.match(bqe);return t?t[1].replace(_qe,"'"):e}function Sqe(e){dt(1,arguments);var t=Mt(e),n=t.getFullYear(),r=t.getMonth(),s=new Date(0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}var Eqe=6048e5;function Mqe(e){dt(1,arguments);var t=Mt(e),n=ym(t).getTime()-nGe(t).getTime();return Math.round(n/Eqe)+1}function kqe(e){dt(1,arguments);var t=Mt(e),n=t.getTime();return n}function Tqe(e){return dt(1,arguments),Math.floor(kqe(e)/1e3)}function Nqe(e,t){var n,r,s,a,i,l,c,u;dt(1,arguments);var d=Mt(e),m=d.getFullYear(),p=Vd(),h=hr((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(c=p.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setFullYear(m+1,0,h),g.setHours(0,0,0,0);var y=zl(g,t),v=new Date(0);v.setFullYear(m,0,h),v.setHours(0,0,0,0);var x=zl(v,t);return d.getTime()>=y.getTime()?m+1:d.getTime()>=x.getTime()?m:m-1}function jqe(e,t){var n,r,s,a,i,l,c,u;dt(1,arguments);var d=Vd(),m=hr((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=Nqe(e,t),h=new Date(0);h.setFullYear(p,0,m),h.setHours(0,0,0,0);var g=zl(h,t);return g}var Aqe=6048e5;function Iqe(e,t){dt(1,arguments);var n=Mt(e),r=zl(n,t).getTime()-jqe(n,t).getTime();return Math.round(r/Aqe)+1}function Rqe(e){dt(1,arguments);var t=Mt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function Pqe(e,t){return dt(1,arguments),dGe(Rqe(e),no(e),t)+1}function Oqe(e){dt(1,arguments);var t=Mt(e.start),n=Mt(e.end);if(isNaN(t.getTime()))throw new RangeError("Start Date is invalid");if(isNaN(n.getTime()))throw new RangeError("End Date is invalid");var r={};r.years=Math.abs(wGe(n,t));var s=Mh(n,t),a=b0(t,{years:s*r.years});r.months=Math.abs(bGe(n,a));var i=b0(a,{months:s*r.months});r.days=Math.abs(mGe(n,i));var l=b0(i,{days:s*r.days});r.hours=Math.abs(gGe(n,l));var c=b0(l,{hours:s*r.hours});r.minutes=Math.abs(yGe(n,c));var u=b0(c,{minutes:s*r.minutes});return r.seconds=Math.abs(_Ge(n,u)),r}function Ufe(e,t){dt(2,arguments);var n=Mt(e),r=Mt(t);return n.getTime()>r.getTime()}function Bfe(e,t){dt(2,arguments);var n=Mt(e),r=Mt(t);return n.getTime()<r.getTime()}function FR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Lqe(e,t){if(e){if(typeof e=="string")return FR(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FR(e,t):void 0}}function Dqe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UR(e,t){return UR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},UR(e,t)}function Fqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UR(e,t)}function O2(e){return O2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},O2(e)}function Uqe(e,t){if(t&&(ja(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dqe(e)}function Bqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vqe(e,t){if(ja(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ja(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vfe(e){var t=Vqe(e,"string");return ja(t)=="symbol"?t:t+""}function oK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vfe(r.key),r)}}function $qe(e,t,n){return t&&oK(e.prototype,t),n&&oK(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function kc(e,t,n){return(t=Vfe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OD(e,t){dt(2,arguments);var n=Mt(e),r=Mt(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function $fe(e,t){dt(2,arguments);var n=Mt(e),r=Mt(t);return n.getFullYear()===r.getFullYear()}function Wqe(e){return dt(1,arguments),$fe(e,Date.now())}function LD(e){return dt(1,arguments),Fs(e,Date.now())}function Hqe(e){return dt(1,arguments),Fs(e,Ds(Date.now(),1))}function BR(e,t){dt(2,arguments);var n=hr(t);return Ds(e,-n)}function zqe(e){return dt(1,arguments),Fs(e,BR(Date.now(),1))}function Gqe(e){return dt(1,arguments),Math.floor(e*Rfe)}function qqe(e){return dt(1,arguments),e*lGe}function iN(e,t){dt(2,arguments);var n=Mt(e),r=hr(t),s=n.getFullYear(),a=n.getDate(),i=new Date(0);i.setFullYear(s,r,15),i.setHours(0,0,0,0);var l=Sqe(i);return n.setMonth(r,Math.min(a,l)),n}function iK(e,t){dt(2,arguments);var n=Mt(e),r=hr(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}var le;(function(e){e.DEFAULT="turbo",e.PPLX_PRO_UPGRADED="pplx_pro_upgraded",e.PRO="pplx_pro",e.SONAR="experimental",e.GPT_4o="gpt4o",e.GPT_4_1="gpt41",e.GPT_5="gpt5",e.CLAUDE_2="claude2",e.GEMINI_2_FLASH="gemini2flash",e.GROK="grok",e.PPLX_REASONING="pplx_reasoning",e.CLAUDE_3_7_SONNET_THINKING="claude37sonnetthinking",e.O4_MINI="o4mini",e.O3_PRO="o3pro",e.GPT_5_THINKING="gpt5_thinking",e.CLAUDE_4_0_OPUS="claude40opus",e.CLAUDE_4_1_OPUS="claude41opus",e.CLAUDE_4_0_OPUS_THINKING="claude40opusthinking",e.CLAUDE_4_1_OPUS_THINKING="claude41opusthinking",e.CLAUDE_4_5_SONNET="claude45sonnet",e.CLAUDE_4_5_SONNET_THINKING="claude45sonnetthinking",e.GROK_4="grok4",e.GROK_4_NON_THINKING="grok4nonthinking",e.PPLX_SONAR_INTERNAL_TESTING="pplx_sonar_internal_testing",e.PPLX_SONAR_INTERNAL_TESTING_V2="pplx_sonar_internal_testing_v2",e.ALPHA="pplx_alpha",e.O3_RESEARCH="o3_research",e.O3_PRO_RESEARCH="o3pro_research",e.CLAUDE40SONNET_RESEARCH="claude40sonnet_research",e.CLAUDE40SONNETTHINKING_RESEARCH="claude40sonnetthinking_research",e.CLAUDE40OPUS_RESEARCH="claude40opus_research",e.CLAUDE40OPUSTHINKING_RESEARCH="claude40opusthinking_research",e.BETA="pplx_beta",e.O3_LABS="o3_labs",e.O3_PRO_LABS="o3pro_labs",e.CLAUDE40SONNETTHINKING_LABS="claude40sonnetthinking_labs",e.CLAUDE40OPUSTHINKING_LABS="claude40opusthinking_labs",e.STUDY="pplx_study"})(le||(le={}));var Ks;(function(e){e.GPT_4="gpt4",e.CLAUDE_3_OPUS="claude3opus",e.CLAUDE_3_5_HAIKU="claude35haiku",e.GEMINI="gemini",e.LLAMA_X_LARGE="llama_x_large",e.MISTRAL="mistral",e.GROK2="grok2",e.COPILOT="copilot",e.O3_MINI="o3mini",e.CLAUDE_OMBRE_EAP="claude_ombre_eap",e.CLAUDE_LACE_EAP="claude_lace_eap",e.R1="r1",e.GAMMA="pplx_gamma",e.O3="o3"})(Ks||(Ks={}));var ie;(function(e){e.SEARCH="search",e.RESEARCH="research",e.STUDIO="studio",e.STUDY="study"})(ie||(ie={}));var On;(function(e){e.PRO="pro",e.MAX="max"})(On||(On={}));const io={[le.DEFAULT]:ie.SEARCH,[le.PPLX_PRO_UPGRADED]:ie.SEARCH,[le.PRO]:ie.SEARCH,[le.SONAR]:ie.SEARCH,[le.CLAUDE_2]:ie.SEARCH,[le.CLAUDE_4_5_SONNET]:ie.SEARCH,[le.CLAUDE_4_5_SONNET_THINKING]:ie.SEARCH,[le.GPT_4o]:ie.SEARCH,[le.GPT_4_1]:ie.SEARCH,[le.GPT_5]:ie.SEARCH,[le.GEMINI_2_FLASH]:ie.SEARCH,[le.GROK]:ie.SEARCH,[le.PPLX_REASONING]:ie.SEARCH,[le.O3_PRO]:ie.SEARCH,[le.CLAUDE_3_7_SONNET_THINKING]:ie.SEARCH,[le.CLAUDE_4_0_OPUS]:ie.SEARCH,[le.CLAUDE_4_0_OPUS_THINKING]:ie.SEARCH,[le.CLAUDE_4_1_OPUS]:ie.SEARCH,[le.CLAUDE_4_1_OPUS_THINKING]:ie.SEARCH,[le.GROK_4]:ie.SEARCH,[le.GROK_4_NON_THINKING]:ie.SEARCH,[le.GPT_5_THINKING]:ie.SEARCH,[le.PPLX_SONAR_INTERNAL_TESTING]:ie.SEARCH,[le.PPLX_SONAR_INTERNAL_TESTING_V2]:ie.SEARCH,[le.ALPHA]:ie.RESEARCH,[le.O4_MINI]:ie.RESEARCH,[le.O3_RESEARCH]:ie.RESEARCH,[le.O3_PRO_RESEARCH]:ie.RESEARCH,[le.CLAUDE40SONNET_RESEARCH]:ie.RESEARCH,[le.CLAUDE40SONNETTHINKING_RESEARCH]:ie.RESEARCH,[le.CLAUDE40OPUS_RESEARCH]:ie.RESEARCH,[le.CLAUDE40OPUSTHINKING_RESEARCH]:ie.RESEARCH,[le.BETA]:ie.STUDIO,[le.O3_LABS]:ie.STUDIO,[le.O3_PRO_LABS]:ie.STUDIO,[le.CLAUDE40SONNETTHINKING_LABS]:ie.STUDIO,[le.CLAUDE40OPUSTHINKING_LABS]:ie.STUDIO,[le.STUDY]:ie.STUDY},DD=e=>io[e]||ie.SEARCH,ig={[ie.SEARCH]:KRe,[ie.RESEARCH]:N7,[ie.STUDIO]:DM,[ie.STUDY]:T7},Kqe=e=>ig[e],Wfe=e=>Kqe(DD(e)),Yqe={...ig,[ie.SEARCH]:Rs},Qqe={auto:{model:le.DEFAULT,mode:ie.SEARCH},reasoning:{model:le.PPLX_REASONING,mode:ie.SEARCH},deep_research:{model:le.ALPHA,mode:ie.RESEARCH}},Hfe=e=>typeof e=="string"&&e in io,FD=e=>Hfe(e)?e:void 0,lK=Object.values(ie),zfe=[{search_model:le.SONAR,has_new_tag:!1,subscription_tier:On.PRO},{search_model:le.CLAUDE_4_5_SONNET,has_new_tag:!0,subscription_tier:On.PRO},{search_model:le.CLAUDE_4_5_SONNET_THINKING,has_new_tag:!0,is_reasoning_model:!0,subscription_tier:On.PRO},{search_model:le.CLAUDE_4_1_OPUS_THINKING,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:On.MAX},{search_model:le.GEMINI_2_FLASH,has_new_tag:!1,subscription_tier:On.PRO},{search_model:le.GPT_5,has_new_tag:!1,subscription_tier:On.PRO},{search_model:le.GPT_5_THINKING,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:On.PRO},{search_model:le.O3_PRO,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:On.MAX},{search_model:le.GROK_4,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:On.PRO}];function Gt(e){throw new Error(e)}var VR=["MO","TU","WE","TH","FR","SA","SU"],ba=function(){function e(t,n){if(n===0)throw new Error("Can't create weekday with n == 0");this.weekday=t,this.n=n}return e.fromStr=function(t){return new e(VR.indexOf(t))},e.prototype.nth=function(t){return this.n===t?this:new e(this.weekday,t)},e.prototype.equals=function(t){return this.weekday===t.weekday&&this.n===t.n},e.prototype.toString=function(){var t=VR[this.weekday];return this.n&&(t=(this.n>0?"+":"")+String(this.n)+t),t},e.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},e}(),zr=function(e){return e!=null},fl=function(e){return typeof e=="number"},cK=function(e){return typeof e=="string"&&VR.includes(e)},To=Array.isArray,ic=function(e,t){t===void 0&&(t=e),arguments.length===1&&(t=e,e=0);for(var n=[],r=e;r<t;r++)n.push(r);return n},An=function(e,t){var n=0,r=[];if(To(e))for(;n<t;n++)r[n]=[].concat(e);else for(;n<t;n++)r[n]=e;return r},Xqe=function(e){return To(e)?e:[e]};function Sp(e,t,n){n===void 0&&(n=" ");var r=String(e);return t=t>>0,r.length>t?String(r):(t=t-r.length,t>n.length&&(n+=An(n,t/n.length)),n.slice(0,t)+String(r))}var Zqe=function(e,t,n){var r=e.split(t);return n?r.slice(0,n).concat([r.slice(n).join(t)]):r},ti=function(e,t){var n=e%t;return n*t<0?n+t:n},lN=function(e,t){return{div:Math.floor(e/t),mod:ti(e,t)}},vl=function(e){return!zr(e)||e.length===0},vs=function(e){return!vl(e)},rr=function(e,t){return vs(e)&&e.indexOf(t)!==-1},vm=function(e,t,n,r,s,a){return r===void 0&&(r=0),s===void 0&&(s=0),a===void 0&&(a=0),new Date(Date.UTC(e,t-1,n,r,s,a))},Jqe=[31,28,31,30,31,30,31,31,30,31,30,31],Gfe=1e3*60*60*24,qfe=9999,Kfe=vm(1970,1,1),eKe=[6,0,1,2,3,4,5],qv=function(e){return e%4===0&&e%100!==0||e%400===0},Yfe=function(e){return e instanceof Date},uv=function(e){return Yfe(e)&&!isNaN(e.getTime())},tKe=function(e,t){var n=e.getTime(),r=t.getTime(),s=n-r;return Math.round(s/Gfe)},$R=function(e){return tKe(e,Kfe)},Qfe=function(e){return new Date(Kfe.getTime()+e*Gfe)},nKe=function(e){var t=e.getUTCMonth();return t===1&&qv(e.getUTCFullYear())?29:Jqe[t]},lg=function(e){return eKe[e.getUTCDay()]},uK=function(e,t){var n=vm(e,t+1,1);return[lg(n),nKe(n)]},Xfe=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},WR=function(e){var t=new Date(e.getTime());return t},dK=function(e){for(var t=[],n=0;n<e.length;n++)t.push(WR(e[n]));return t},l1=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},UD=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[Sp(n.getUTCFullYear().toString(),4,"0"),Sp(n.getUTCMonth()+1,2,"0"),Sp(n.getUTCDate(),2,"0"),"T",Sp(n.getUTCHours(),2,"0"),Sp(n.getUTCMinutes(),2,"0"),Sp(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},BD=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))},fK=function(e,t){var n=e.toLocaleString("sv-SE",{timeZone:t});return n.replace(" ","T")+"Z"},rKe=function(e,t){var n=Intl.DateTimeFormat().resolvedOptions().timeZone,r=new Date(fK(e,n)),s=new Date(fK(e,t??"UTC")),a=s.getTime()-r.getTime();return new Date(e.getTime()-a)},ah=function(){function e(t,n){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=t,this.args=n,t==="between"?(this.maxDate=n.inc?n.before:new Date(n.before.getTime()-1),this.minDate=n.inc?n.after:new Date(n.after.getTime()+1)):t==="before"?this.maxDate=n.inc?n.dt:new Date(n.dt.getTime()-1):t==="after"&&(this.minDate=n.inc?n.dt:new Date(n.dt.getTime()+1))}return e.prototype.accept=function(t){++this.total;var n=this.minDate&&t<this.minDate,r=this.maxDate&&t>this.maxDate;if(this.method==="between"){if(n)return!0;if(r)return!1}else if(this.method==="before"){if(r)return!1}else if(this.method==="after")return n?!0:(this.add(t),!1);return this.add(t)},e.prototype.add=function(t){return this._result.push(t),!0},e.prototype.getValue=function(){var t=this._result;switch(this.method){case"all":case"between":return t;case"before":case"after":default:return t.length?t[t.length-1]:null}},e.prototype.clone=function(){return new e(this.method,this.args)},e}(),mK=function(e){k7(t,e);function t(n,r,s){var a=e.call(this,n,r)||this;return a.iterator=s,a}return t.prototype.add=function(n){return this.iterator(n,this._result.length)?(this._result.push(n),!0):!1},t}(ah),L2={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},pK=function(e,t){return e.indexOf(t)!==-1},sKe=function(e){return e.toString()},aKe=function(e,t,n){return"".concat(t," ").concat(n,", ").concat(e)},wu=function(){function e(t,n,r,s){if(n===void 0&&(n=sKe),r===void 0&&(r=L2),s===void 0&&(s=aKe),this.text=[],this.language=r||L2,this.gettext=n,this.dateFormatter=s,this.rrule=t,this.options=t.options,this.origOptions=t.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),i=[].concat(this.options.bynmonthday);a.sort(function(d,m){return d-m}),i.sort(function(d,m){return m-d}),this.bymonthday=a.concat(i),this.bymonthday.length||(this.bymonthday=null)}if(zr(this.origOptions.byweekday)){var l=To(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],c=String(l);this.byweekday={allWeeks:l.filter(function(d){return!d.n}),someWeeks:l.filter(function(d){return!!d.n}),isWeekdays:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")===-1&&c.indexOf("SU")===-1,isEveryDay:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")!==-1&&c.indexOf("SU")!==-1};var u=function(d,m){return d.weekday-m.weekday};this.byweekday.allWeeks.sort(u),this.byweekday.someWeeks.sort(u),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return e.isFullyConvertible=function(t){var n=!0;if(!(t.options.freq in e.IMPLEMENTED)||t.origOptions.until&&t.origOptions.count)return!1;for(var r in t.origOptions){if(pK(["dtstart","tzid","wkst","freq"],r))return!0;if(!pK(e.IMPLEMENTED[t.options.freq],r))return!1}return n},e.prototype.isFullyConvertible=function(){return e.isFullyConvertible(this.rrule)},e.prototype.toString=function(){var t=this.gettext;if(!(this.options.freq in e.IMPLEMENTED))return t("RRule error: Unable to fully convert this rrule to text");if(this.text=[t("every")],this[pt.FREQUENCIES[this.options.freq]](),this.options.until){this.add(t("until"));var n=this.options.until;this.add(this.dateFormatter(n.getUTCFullYear(),this.language.monthNames[n.getUTCMonth()],n.getUTCDate()))}else this.options.count&&this.add(t("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?t("times"):t("time"));return this.isFullyConvertible()||this.add(t("(~ approximate)")),this.text.join("")},e.prototype.HOURLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("hours"):t("hour"))},e.prototype.MINUTELY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("minutes"):t("minute"))},e.prototype.DAILY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(this.plural(this.options.interval)?t("days"):t("day")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},e.prototype.WEEKLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?t("weeks"):t("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(t("on")).add(t("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?t("days"):t("day")):(this.options.interval===1&&this.add(t("week")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},e.prototype.MONTHLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(t("months")),this.plural(this.options.interval)&&this.add(t("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("months"):t("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(t("on")).add(t("weekdays")):this.byweekday&&this._byweekday()},e.prototype.YEARLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(t("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("years"):t("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(t("on the")).add(this.list(this.options.byyearday,this.nth,t("and"))).add(t("day")),this.options.byweekno&&this.add(t("in")).add(this.plural(this.options.byweekno.length)?t("weeks"):t("week")).add(this.list(this.options.byweekno,void 0,t("and")))},e.prototype._bymonthday=function(){var t=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,t("or"))).add(t("the")).add(this.list(this.bymonthday,this.nth,t("or"))):this.add(t("on the")).add(this.list(this.bymonthday,this.nth,t("and")))},e.prototype._byweekday=function(){var t=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(t("and")),this.add(t("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,t("and"))))},e.prototype._byhour=function(){var t=this.gettext;this.add(t("at")).add(this.list(this.origOptions.byhour,void 0,t("and")))},e.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},e.prototype.nth=function(t){t=parseInt(t.toString(),10);var n,r=this.gettext;if(t===-1)return r("last");var s=Math.abs(t);switch(s){case 1:case 21:case 31:n=s+r("st");break;case 2:case 22:n=s+r("nd");break;case 3:case 23:n=s+r("rd");break;default:n=s+r("th")}return t<0?n+" "+r("last"):n},e.prototype.monthtext=function(t){return this.language.monthNames[t-1]},e.prototype.weekdaytext=function(t){var n=fl(t)?(t+1)%7:t.getJsWeekday();return(t.n?this.nth(t.n)+" ":"")+this.language.dayNames[n]},e.prototype.plural=function(t){return t%100!==1},e.prototype.add=function(t){return this.text.push(" "),this.text.push(t),this},e.prototype.list=function(t,n,r,s){var a=this;s===void 0&&(s=","),To(t)||(t=[t]);var i=function(c,u,d){for(var m="",p=0;p<c.length;p++)p!==0&&(p===c.length-1?m+=" "+d+" ":m+=u+" "),m+=c[p];return m};n=n||function(c){return c.toString()};var l=function(c){return n&&n.call(a,c)};return r?i(t.map(l),s,r):t.map(l).join(s+" ")},e}(),oKe=function(){function e(t){this.done=!0,this.rules=t}return e.prototype.start=function(t){return this.text=t,this.done=!1,this.nextSymbol()},e.prototype.isDone=function(){return this.done&&this.symbol===null},e.prototype.nextSymbol=function(){var t,n;this.symbol=null,this.value=null;do{if(this.done)return!1;var r=void 0;t=null;for(var s in this.rules){r=this.rules[s];var a=r.exec(this.text);a&&(t===null||a[0].length>t[0].length)&&(t=a,n=s)}if(t!=null&&(this.text=this.text.substr(t[0].length),this.text===""&&(this.done=!0)),t==null){this.done=!0,this.symbol=null,this.value=null;return}}while(n==="SKIP");return this.symbol=n,this.value=t,!0},e.prototype.accept=function(t){if(this.symbol===t){if(this.value){var n=this.value;return this.nextSymbol(),n}return this.nextSymbol(),!0}return!1},e.prototype.acceptNumber=function(){return this.accept("number")},e.prototype.expect=function(t){if(this.accept(t))return!0;throw new Error("expected "+t+" but found "+this.symbol)},e}();function Zfe(e,t){t===void 0&&(t=L2);var n={},r=new oKe(t.tokens);if(!r.start(e))return null;return s(),n;function s(){r.expect("every");var p=r.acceptNumber();if(p&&(n.interval=parseInt(p[0],10)),r.isDone())throw new Error("Unexpected end");switch(r.symbol){case"day(s)":n.freq=pt.DAILY,r.nextSymbol()&&(i(),m());break;case"weekday(s)":n.freq=pt.WEEKLY,n.byweekday=[pt.MO,pt.TU,pt.WE,pt.TH,pt.FR],r.nextSymbol(),i(),m();break;case"week(s)":n.freq=pt.WEEKLY,r.nextSymbol()&&(a(),i(),m());break;case"hour(s)":n.freq=pt.HOURLY,r.nextSymbol()&&(a(),m());break;case"minute(s)":n.freq=pt.MINUTELY,r.nextSymbol()&&(a(),m());break;case"month(s)":n.freq=pt.MONTHLY,r.nextSymbol()&&(a(),m());break;case"year(s)":n.freq=pt.YEARLY,r.nextSymbol()&&(a(),m());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":n.freq=pt.WEEKLY;var h=r.symbol.substr(0,2).toUpperCase();if(n.byweekday=[pt[h]],!r.nextSymbol())return;for(;r.accept("comma");){if(r.isDone())throw new Error("Unexpected end");var g=c();if(!g)throw new Error("Unexpected symbol "+r.symbol+", expected weekday");n.byweekday.push(pt[g]),r.nextSymbol()}i(),d(),m();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(n.freq=pt.YEARLY,n.bymonth=[l()],!r.nextSymbol())return;for(;r.accept("comma");){if(r.isDone())throw new Error("Unexpected end");var y=l();if(!y)throw new Error("Unexpected symbol "+r.symbol+", expected month");n.bymonth.push(y),r.nextSymbol()}a(),m();break;default:throw new Error("Unknown symbol")}}function a(){var p=r.accept("on"),h=r.accept("the");if(p||h)do{var g=u(),y=c(),v=l();if(g)y?(r.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(pt[y].nth(g))):(n.bymonthday||(n.bymonthday=[]),n.bymonthday.push(g),r.accept("day(s)"));else if(y)r.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(pt[y]);else if(r.symbol==="weekday(s)")r.nextSymbol(),n.byweekday||(n.byweekday=[pt.MO,pt.TU,pt.WE,pt.TH,pt.FR]);else if(r.symbol==="week(s)"){r.nextSymbol();var x=r.acceptNumber();if(!x)throw new Error("Unexpected symbol "+r.symbol+", expected week number");for(n.byweekno=[parseInt(x[0],10)];r.accept("comma");){if(x=r.acceptNumber(),!x)throw new Error("Unexpected symbol "+r.symbol+"; expected monthday");n.byweekno.push(parseInt(x[0],10))}}else if(v)r.nextSymbol(),n.bymonth||(n.bymonth=[]),n.bymonth.push(v);else return}while(r.accept("comma")||r.accept("the")||r.accept("on"))}function i(){var p=r.accept("at");if(p)do{var h=r.acceptNumber();if(!h)throw new Error("Unexpected symbol "+r.symbol+", expected hour");for(n.byhour=[parseInt(h[0],10)];r.accept("comma");){if(h=r.acceptNumber(),!h)throw new Error("Unexpected symbol "+r.symbol+"; expected hour");n.byhour.push(parseInt(h[0],10))}}while(r.accept("comma")||r.accept("at"))}function l(){switch(r.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function c(){switch(r.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return r.symbol.substr(0,2).toUpperCase();default:return!1}}function u(){switch(r.symbol){case"last":return r.nextSymbol(),-1;case"first":return r.nextSymbol(),1;case"second":return r.nextSymbol(),r.accept("last")?-2:2;case"third":return r.nextSymbol(),r.accept("last")?-3:3;case"nth":var p=parseInt(r.value[1],10);if(p<-366||p>366)throw new Error("Nth out of range: "+p);return r.nextSymbol(),r.accept("last")?-p:p;default:return!1}}function d(){r.accept("on"),r.accept("the");var p=u();if(p)for(n.bymonthday=[p],r.nextSymbol();r.accept("comma");){if(p=u(),!p)throw new Error("Unexpected symbol "+r.symbol+"; expected monthday");n.bymonthday.push(p),r.nextSymbol()}}function m(){if(r.symbol==="until"){var p=Date.parse(r.text);if(!p)throw new Error("Cannot parse until date:"+r.text);n.until=new Date(p)}else r.accept("for")&&(n.count=parseInt(r.value[0],10),r.expect("number"))}}var In;(function(e){e[e.YEARLY=0]="YEARLY",e[e.MONTHLY=1]="MONTHLY",e[e.WEEKLY=2]="WEEKLY",e[e.DAILY=3]="DAILY",e[e.HOURLY=4]="HOURLY",e[e.MINUTELY=5]="MINUTELY",e[e.SECONDLY=6]="SECONDLY"})(In||(In={}));function VD(e){return e<In.HOURLY}var iKe=function(e,t){return t===void 0&&(t=L2),new pt(Zfe(e,t)||void 0)},uy=["count","until","interval","byweekday","bymonthday","bymonth"];wu.IMPLEMENTED=[];wu.IMPLEMENTED[In.HOURLY]=uy;wu.IMPLEMENTED[In.MINUTELY]=uy;wu.IMPLEMENTED[In.DAILY]=["byhour"].concat(uy);wu.IMPLEMENTED[In.WEEKLY]=uy;wu.IMPLEMENTED[In.MONTHLY]=uy;wu.IMPLEMENTED[In.YEARLY]=["byweekno","byyearday"].concat(uy);var lKe=function(e,t,n,r){return new wu(e,t,n,r).toString()},cKe=wu.isFullyConvertible,D2=function(){function e(t,n,r,s){this.hour=t,this.minute=n,this.second=r,this.millisecond=s||0}return e.prototype.getHours=function(){return this.hour},e.prototype.getMinutes=function(){return this.minute},e.prototype.getSeconds=function(){return this.second},e.prototype.getMilliseconds=function(){return this.millisecond},e.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},e}(),uKe=function(e){k7(t,e);function t(n,r,s,a,i,l,c){var u=e.call(this,a,i,l,c)||this;return u.year=n,u.month=r,u.day=s,u}return t.fromDate=function(n){return new this(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.valueOf()%1e3)},t.prototype.getWeekday=function(){return lg(new Date(this.getTime()))},t.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},t.prototype.getDay=function(){return this.day},t.prototype.getMonth=function(){return this.month},t.prototype.getYear=function(){return this.year},t.prototype.addYears=function(n){this.year+=n},t.prototype.addMonths=function(n){if(this.month+=n,this.month>12){var r=Math.floor(this.month/12),s=ti(this.month,12);this.month=s,this.year+=r,this.month===0&&(this.month=12,--this.year)}},t.prototype.addWeekly=function(n,r){r>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-r))+n*7:this.day+=-(this.getWeekday()-r)+n*7,this.fixDay()},t.prototype.addDaily=function(n){this.day+=n,this.fixDay()},t.prototype.addHours=function(n,r,s){for(r&&(this.hour+=Math.floor((23-this.hour)/n)*n);;){this.hour+=n;var a=lN(this.hour,24),i=a.div,l=a.mod;if(i&&(this.hour=l,this.addDaily(i)),vl(s)||rr(s,this.hour))break}},t.prototype.addMinutes=function(n,r,s,a){for(r&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/n)*n);;){this.minute+=n;var i=lN(this.minute,60),l=i.div,c=i.mod;if(l&&(this.minute=c,this.addHours(l,!1,s)),(vl(s)||rr(s,this.hour))&&(vl(a)||rr(a,this.minute)))break}},t.prototype.addSeconds=function(n,r,s,a,i){for(r&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/n)*n);;){this.second+=n;var l=lN(this.second,60),c=l.div,u=l.mod;if(c&&(this.second=u,this.addMinutes(c,!1,s,a)),(vl(s)||rr(s,this.hour))&&(vl(a)||rr(a,this.minute))&&(vl(i)||rr(i,this.second)))break}},t.prototype.fixDay=function(){if(!(this.day<=28)){var n=uK(this.year,this.month-1)[1];if(!(this.day<=n))for(;this.day>n;){if(this.day-=n,++this.month,this.month===13&&(this.month=1,++this.year,this.year>qfe))return;n=uK(this.year,this.month-1)[1]}}},t.prototype.add=function(n,r){var s=n.freq,a=n.interval,i=n.wkst,l=n.byhour,c=n.byminute,u=n.bysecond;switch(s){case In.YEARLY:return this.addYears(a);case In.MONTHLY:return this.addMonths(a);case In.WEEKLY:return this.addWeekly(a,i);case In.DAILY:return this.addDaily(a);case In.HOURLY:return this.addHours(a,r,l);case In.MINUTELY:return this.addMinutes(a,r,l,c);case In.SECONDLY:return this.addSeconds(a,r,l,c,u)}},t}(D2);function Jfe(e){for(var t=[],n=Object.keys(e),r=0,s=n;r<s.length;r++){var a=s[r];rr(BKe,a)||t.push(a),Yfe(e[a])&&!uv(e[a])&&t.push(a)}if(t.length)throw new Error("Invalid options: "+t.join(", "));return vr({},e)}function dKe(e){var t=vr(vr({},$D),Jfe(e));if(zr(t.byeaster)&&(t.freq=pt.YEARLY),!(zr(t.freq)&&pt.FREQUENCIES[t.freq]))throw new Error("Invalid frequency: ".concat(t.freq," ").concat(e.freq));if(t.dtstart||(t.dtstart=new Date(new Date().setMilliseconds(0))),zr(t.wkst)?fl(t.wkst)||(t.wkst=t.wkst.weekday):t.wkst=pt.MO.weekday,zr(t.bysetpos)){fl(t.bysetpos)&&(t.bysetpos=[t.bysetpos]);for(var n=0;n<t.bysetpos.length;n++){var r=t.bysetpos[n];if(r===0||!(r>=-366&&r<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(t.byweekno||vs(t.byweekno)||vs(t.byyearday)||t.bymonthday||vs(t.bymonthday)||zr(t.byweekday)||zr(t.byeaster)))switch(t.freq){case pt.YEARLY:t.bymonth||(t.bymonth=t.dtstart.getUTCMonth()+1),t.bymonthday=t.dtstart.getUTCDate();break;case pt.MONTHLY:t.bymonthday=t.dtstart.getUTCDate();break;case pt.WEEKLY:t.byweekday=[lg(t.dtstart)];break}if(zr(t.bymonth)&&!To(t.bymonth)&&(t.bymonth=[t.bymonth]),zr(t.byyearday)&&!To(t.byyearday)&&fl(t.byyearday)&&(t.byyearday=[t.byyearday]),!zr(t.bymonthday))t.bymonthday=[],t.bynmonthday=[];else if(To(t.bymonthday)){for(var s=[],a=[],n=0;n<t.bymonthday.length;n++){var r=t.bymonthday[n];r>0?s.push(r):r<0&&a.push(r)}t.bymonthday=s,t.bynmonthday=a}else t.bymonthday<0?(t.bynmonthday=[t.bymonthday],t.bymonthday=[]):(t.bynmonthday=[],t.bymonthday=[t.bymonthday]);if(zr(t.byweekno)&&!To(t.byweekno)&&(t.byweekno=[t.byweekno]),!zr(t.byweekday))t.bynweekday=null;else if(fl(t.byweekday))t.byweekday=[t.byweekday],t.bynweekday=null;else if(cK(t.byweekday))t.byweekday=[ba.fromStr(t.byweekday).weekday],t.bynweekday=null;else if(t.byweekday instanceof ba)!t.byweekday.n||t.freq>pt.MONTHLY?(t.byweekday=[t.byweekday.weekday],t.bynweekday=null):(t.bynweekday=[[t.byweekday.weekday,t.byweekday.n]],t.byweekday=null);else{for(var i=[],l=[],n=0;n<t.byweekday.length;n++){var c=t.byweekday[n];if(fl(c)){i.push(c);continue}else if(cK(c)){i.push(ba.fromStr(c).weekday);continue}!c.n||t.freq>pt.MONTHLY?i.push(c.weekday):l.push([c.weekday,c.n])}t.byweekday=vs(i)?i:null,t.bynweekday=vs(l)?l:null}return zr(t.byhour)?fl(t.byhour)&&(t.byhour=[t.byhour]):t.byhour=t.freq<pt.HOURLY?[t.dtstart.getUTCHours()]:null,zr(t.byminute)?fl(t.byminute)&&(t.byminute=[t.byminute]):t.byminute=t.freq<pt.MINUTELY?[t.dtstart.getUTCMinutes()]:null,zr(t.bysecond)?fl(t.bysecond)&&(t.bysecond=[t.bysecond]):t.bysecond=t.freq<pt.SECONDLY?[t.dtstart.getUTCSeconds()]:null,{parsedOptions:t}}function fKe(e){var t=e.dtstart.getTime()%1e3;if(!VD(e.freq))return[];var n=[];return e.byhour.forEach(function(r){e.byminute.forEach(function(s){e.bysecond.forEach(function(a){n.push(new D2(r,s,a,t))})})}),n}function HR(e){var t=e.split(`
`).map(mKe).filter(function(n){return n!==null});return vr(vr({},t[0]),t[1])}function F2(e){var t={},n=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(e);if(!n)return t;var r=n[1],s=n[2];return r&&(t.tzid=r),t.dtstart=BD(s),t}function mKe(e){if(e=e.replace(/^\s+|\s+$/,""),!e.length)return null;var t=/^([A-Z]+?)[:;]/.exec(e.toUpperCase());if(!t)return hK(e);var n=t[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return hK(e);case"DTSTART":return F2(e);default:throw new Error("Unsupported RFC prop ".concat(n," in ").concat(e))}}function hK(e){var t=e.replace(/^RRULE:/i,""),n=F2(t),r=e.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return r.forEach(function(s){var a=s.split("="),i=a[0],l=a[1];switch(i.toUpperCase()){case"FREQ":n.freq=In[l.toUpperCase()];break;case"WKST":n.wkst=ki[l.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var c=pKe(l),u=i.toLowerCase();n[u]=c;break;case"BYWEEKDAY":case"BYDAY":n.byweekday=hKe(l);break;case"DTSTART":case"TZID":var d=F2(e);n.tzid=d.tzid,n.dtstart=d.dtstart;break;case"UNTIL":n.until=BD(l);break;case"BYEASTER":n.byeaster=Number(l);break;default:throw new Error("Unknown RRULE property '"+i+"'")}}),n}function pKe(e){if(e.indexOf(",")!==-1){var t=e.split(",");return t.map(gK)}return gK(e)}function gK(e){return/^[+-]?\d+$/.test(e)?Number(e):e}function hKe(e){var t=e.split(",");return t.map(function(n){if(n.length===2)return ki[n];var r=n.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!r||r.length<3)throw new SyntaxError("Invalid weekday string: ".concat(n));var s=Number(r[1]),a=r[2],i=ki[a].weekday;return new ba(i,s)})}var U2=function(){function e(t,n){if(isNaN(t.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=t,this.tzid=n}return Object.defineProperty(e.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var t=UD(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(t):";TZID=".concat(this.tzid,":").concat(t)},e.prototype.getTime=function(){return this.date.getTime()},e.prototype.rezonedDate=function(){return this.isUTC?this.date:rKe(this.date,this.tzid)},e}();function zR(e){for(var t=[],n="",r=Object.keys(e),s=Object.keys($D),a=0;a<r.length;a++)if(r[a]!=="tzid"&&rr(s,r[a])){var i=r[a].toUpperCase(),l=e[r[a]],c="";if(!(!zr(l)||To(l)&&!l.length)){switch(i){case"FREQ":c=pt.FREQUENCIES[e.freq];break;case"WKST":fl(l)?c=new ba(l).toString():c=l.toString();break;case"BYWEEKDAY":i="BYDAY",c=Xqe(l).map(function(h){return h instanceof ba?h:To(h)?new ba(h[0],h[1]):new ba(h)}).toString();break;case"DTSTART":n=gKe(l,e.tzid);break;case"UNTIL":c=UD(l,!e.tzid);break;default:if(To(l)){for(var u=[],d=0;d<l.length;d++)u[d]=String(l[d]);c=u.toString()}else c=String(l)}c&&t.push([i,c])}}var m=t.map(function(h){var g=h[0],y=h[1];return"".concat(g,"=").concat(y.toString())}).join(";"),p="";return m!==""&&(p="RRULE:".concat(m)),[n,p].filter(function(h){return!!h}).join(`
`)}function gKe(e,t){return e?"DTSTART"+new U2(new Date(e),t).toString():""}function yKe(e,t){return Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every(function(n,r){return n.getTime()===t[r].getTime()}):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():e===t}var vKe=function(){function e(){this.all=!1,this.before=[],this.after=[],this.between=[]}return e.prototype._cacheAdd=function(t,n,r){n&&(n=n instanceof Date?WR(n):dK(n)),t==="all"?this.all=n:(r._value=n,this[t].push(r))},e.prototype._cacheGet=function(t,n){var r=!1,s=n?Object.keys(n):[],a=function(d){for(var m=0;m<s.length;m++){var p=s[m];if(!yKe(n[p],d[p]))return!0}return!1},i=this[t];if(t==="all")r=this.all;else if(To(i))for(var l=0;l<i.length;l++){var c=i[l];if(!(s.length&&a(c))){r=c._value;break}}if(!r&&this.all){for(var u=new ah(t,n),l=0;l<this.all.length&&u.accept(this.all[l]);l++);r=u.getValue(),this._cacheAdd(t,r,n)}return To(r)?dK(r):r instanceof Date?WR(r):r},e}(),xKe=Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze([],An(1,31),!0),An(2,28),!0),An(3,31),!0),An(4,30),!0),An(5,31),!0),An(6,30),!0),An(7,31),!0),An(8,31),!0),An(9,30),!0),An(10,31),!0),An(11,30),!0),An(12,31),!0),An(1,7),!0),bKe=Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze([],An(1,31),!0),An(2,29),!0),An(3,31),!0),An(4,30),!0),An(5,31),!0),An(6,30),!0),An(7,31),!0),An(8,31),!0),An(9,30),!0),An(10,31),!0),An(11,30),!0),An(12,31),!0),An(1,7),!0),_Ke=ic(1,29),wKe=ic(1,30),Qu=ic(1,31),Qs=ic(1,32),CKe=Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze([],Qs,!0),wKe,!0),Qs,!0),Qu,!0),Qs,!0),Qu,!0),Qs,!0),Qs,!0),Qu,!0),Qs,!0),Qu,!0),Qs,!0),Qs.slice(0,7),!0),SKe=Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze([],Qs,!0),_Ke,!0),Qs,!0),Qu,!0),Qs,!0),Qu,!0),Qs,!0),Qs,!0),Qu,!0),Qs,!0),Qu,!0),Qs,!0),Qs.slice(0,7),!0),EKe=ic(-28,0),MKe=ic(-29,0),Xu=ic(-30,0),Xs=ic(-31,0),kKe=Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze([],Xs,!0),MKe,!0),Xs,!0),Xu,!0),Xs,!0),Xu,!0),Xs,!0),Xs,!0),Xu,!0),Xs,!0),Xu,!0),Xs,!0),Xs.slice(0,7),!0),TKe=Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze([],Xs,!0),EKe,!0),Xs,!0),Xu,!0),Xs,!0),Xu,!0),Xs,!0),Xs,!0),Xu,!0),Xs,!0),Xu,!0),Xs,!0),Xs.slice(0,7),!0),NKe=[0,31,60,91,121,152,182,213,244,274,305,335,366],jKe=[0,31,59,90,120,151,181,212,243,273,304,334,365],yK=function(){for(var e=[],t=0;t<55;t++)e=e.concat(ic(7));return e}();function AKe(e,t){var n=vm(e,1,1),r=qv(e)?366:365,s=qv(e+1)?366:365,a=$R(n),i=lg(n),l=vr(vr({yearlen:r,nextyearlen:s,yearordinal:a,yearweekday:i},IKe(e)),{wnomask:null});if(vl(t.byweekno))return l;l.wnomask=An(0,r+7);var c,u,d=c=ti(7-i+t.wkst,7);d>=4?(d=0,u=l.yearlen+ti(i-t.wkst,7)):u=r-d;for(var m=Math.floor(u/7),p=ti(u,7),h=Math.floor(m+p/4),g=0;g<t.byweekno.length;g++){var y=t.byweekno[g];if(y<0&&(y+=h+1),y>0&&y<=h){var v=void 0;y>1?(v=d+(y-1)*7,d!==c&&(v-=7-c)):v=d;for(var x=0;x<7&&(l.wnomask[v]=1,v++,l.wdaymask[v]!==t.wkst);x++);}}if(rr(t.byweekno,1)){var v=d+h*7;if(d!==c&&(v-=7-c),v<r)for(var g=0;g<7&&(l.wnomask[v]=1,v+=1,l.wdaymask[v]!==t.wkst);g++);}if(d){var b=void 0;if(rr(t.byweekno,-1))b=-1;else{var _=lg(vm(e-1,1,1)),w=ti(7-_.valueOf()+t.wkst,7),C=qv(e-1)?366:365,S=void 0;w>=4?(w=0,S=C+ti(_-t.wkst,7)):S=r-d,b=Math.floor(52+ti(S,7)/4)}if(rr(t.byweekno,b))for(var v=0;v<d;v++)l.wnomask[v]=1}return l}function IKe(e){var t=qv(e)?366:365,n=vm(e,1,1),r=lg(n);return t===365?{mmask:xKe,mdaymask:SKe,nmdaymask:TKe,wdaymask:yK.slice(r),mrange:jKe}:{mmask:bKe,mdaymask:CKe,nmdaymask:kKe,wdaymask:yK.slice(r),mrange:NKe}}function RKe(e,t,n,r,s,a){var i={lastyear:e,lastmonth:t,nwdaymask:[]},l=[];if(a.freq===pt.YEARLY)if(vl(a.bymonth))l=[[0,n]];else for(var c=0;c<a.bymonth.length;c++)t=a.bymonth[c],l.push(r.slice(t-1,t+1));else a.freq===pt.MONTHLY&&(l=[r.slice(t-1,t+1)]);if(vl(l))return i;i.nwdaymask=An(0,n);for(var c=0;c<l.length;c++)for(var u=l[c],d=u[0],m=u[1]-1,p=0;p<a.bynweekday.length;p++){var h=void 0,g=a.bynweekday[p],y=g[0],v=g[1];v<0?(h=m+(v+1)*7,h-=ti(s[h]-y,7)):(h=d+(v-1)*7,h+=ti(7-s[h]+y,7)),d<=h&&h<=m&&(i.nwdaymask[h]=1)}return i}function PKe(e,t){t===void 0&&(t=0);var n=e%19,r=Math.floor(e/100),s=e%100,a=Math.floor(r/4),i=r%4,l=Math.floor((r+8)/25),c=Math.floor((r-l+1)/3),u=Math.floor(19*n+r-a-c+15)%30,d=Math.floor(s/4),m=s%4,p=Math.floor(32+2*i+2*d-u-m)%7,h=Math.floor((n+11*u+22*p)/451),g=Math.floor((u+p-7*h+114)/31),y=(u+p-7*h+114)%31+1,v=Date.UTC(e,g-1,y+t),x=Date.UTC(e,0,1);return[Math.ceil((v-x)/(1e3*60*60*24))]}var OKe=function(){function e(t){this.options=t}return e.prototype.rebuild=function(t,n){var r=this.options;if(t!==this.lastyear&&(this.yearinfo=AKe(t,r)),vs(r.bynweekday)&&(n!==this.lastmonth||t!==this.lastyear)){var s=this.yearinfo,a=s.yearlen,i=s.mrange,l=s.wdaymask;this.monthinfo=RKe(t,n,a,i,l,r)}zr(r.byeaster)&&(this.eastermask=PKe(t,r.byeaster))},Object.defineProperty(e.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),e.prototype.ydayset=function(){return[ic(this.yearlen),0,this.yearlen]},e.prototype.mdayset=function(t,n){for(var r=this.mrange[n-1],s=this.mrange[n],a=An(null,this.yearlen),i=r;i<s;i++)a[i]=i;return[a,r,s]},e.prototype.wdayset=function(t,n,r){for(var s=An(null,this.yearlen+7),a=$R(vm(t,n,r))-this.yearordinal,i=a,l=0;l<7&&(s[a]=a,++a,this.wdaymask[a]!==this.options.wkst);l++);return[s,i,a]},e.prototype.ddayset=function(t,n,r){var s=An(null,this.yearlen),a=$R(vm(t,n,r))-this.yearordinal;return s[a]=a,[s,a,a+1]},e.prototype.htimeset=function(t,n,r,s){var a=this,i=[];return this.options.byminute.forEach(function(l){i=i.concat(a.mtimeset(t,l,r,s))}),l1(i),i},e.prototype.mtimeset=function(t,n,r,s){var a=this.options.bysecond.map(function(i){return new D2(t,n,i,s)});return l1(a),a},e.prototype.stimeset=function(t,n,r,s){return[new D2(t,n,r,s)]},e.prototype.getdayset=function(t){switch(t){case In.YEARLY:return this.ydayset.bind(this);case In.MONTHLY:return this.mdayset.bind(this);case In.WEEKLY:return this.wdayset.bind(this);case In.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},e.prototype.gettimeset=function(t){switch(t){case In.HOURLY:return this.htimeset.bind(this);case In.MINUTELY:return this.mtimeset.bind(this);case In.SECONDLY:return this.stimeset.bind(this)}},e}();function LKe(e,t,n,r,s,a){for(var i=[],l=0;l<e.length;l++){var c=void 0,u=void 0,d=e[l];d<0?(c=Math.floor(d/t.length),u=ti(d,t.length)):(c=Math.floor((d-1)/t.length),u=ti(d-1,t.length));for(var m=[],p=n;p<r;p++){var h=a[p];zr(h)&&m.push(h)}var g=void 0;c<0?g=m.slice(c)[0]:g=m[c];var y=t[u],v=Qfe(s.yearordinal+g),x=Xfe(v,y);rr(i,x)||i.push(x)}return l1(i),i}function eme(e,t){var n=t.dtstart,r=t.freq,s=t.interval,a=t.until,i=t.bysetpos,l=t.count;if(l===0||s===0)return gc(e);var c=uKe.fromDate(n),u=new OKe(t);u.rebuild(c.year,c.month);for(var d=UKe(u,c,t);;){var m=u.getdayset(r)(c.year,c.month,c.day),p=m[0],h=m[1],g=m[2],y=FKe(p,h,g,u,t);if(vs(i))for(var v=LKe(i,d,h,g,u,p),x=0;x<v.length;x++){var b=v[x];if(a&&b>a)return gc(e);if(b>=n){var _=vK(b,t);if(!e.accept(_)||l&&(--l,!l))return gc(e)}}else for(var x=h;x<g;x++){var w=p[x];if(zr(w))for(var C=Qfe(u.yearordinal+w),S=0;S<d.length;S++){var E=d[S],b=Xfe(C,E);if(a&&b>a)return gc(e);if(b>=n){var _=vK(b,t);if(!e.accept(_)||l&&(--l,!l))return gc(e)}}}if(t.interval===0||(c.add(t,y),c.year>qfe))return gc(e);VD(r)||(d=u.gettimeset(r)(c.hour,c.minute,c.second,0)),u.rebuild(c.year,c.month)}}function DKe(e,t,n){var r=n.bymonth,s=n.byweekno,a=n.byweekday,i=n.byeaster,l=n.bymonthday,c=n.bynmonthday,u=n.byyearday;return vs(r)&&!rr(r,e.mmask[t])||vs(s)&&!e.wnomask[t]||vs(a)&&!rr(a,e.wdaymask[t])||vs(e.nwdaymask)&&!e.nwdaymask[t]||i!==null&&!rr(e.eastermask,t)||(vs(l)||vs(c))&&!rr(l,e.mdaymask[t])&&!rr(c,e.nmdaymask[t])||vs(u)&&(t<e.yearlen&&!rr(u,t+1)&&!rr(u,-e.yearlen+t)||t>=e.yearlen&&!rr(u,t+1-e.yearlen)&&!rr(u,-e.nextyearlen+t-e.yearlen))}function vK(e,t){return new U2(e,t.tzid).rezonedDate()}function gc(e){return e.getValue()}function FKe(e,t,n,r,s){for(var a=!1,i=t;i<n;i++){var l=e[i];a=DKe(r,l,s),a&&(e[l]=null)}return a}function UKe(e,t,n){var r=n.freq,s=n.byhour,a=n.byminute,i=n.bysecond;return VD(r)?fKe(n):r>=pt.HOURLY&&vs(s)&&!rr(s,t.hour)||r>=pt.MINUTELY&&vs(a)&&!rr(a,t.minute)||r>=pt.SECONDLY&&vs(i)&&!rr(i,t.second)?[]:e.gettimeset(r)(t.hour,t.minute,t.second,t.millisecond)}var ki={MO:new ba(0),TU:new ba(1),WE:new ba(2),TH:new ba(3),FR:new ba(4),SA:new ba(5),SU:new ba(6)},$D={freq:In.YEARLY,dtstart:null,interval:1,wkst:ki.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},BKe=Object.keys($D),pt=function(){function e(t,n){t===void 0&&(t={}),n===void 0&&(n=!1),this._cache=n?null:new vKe,this.origOptions=Jfe(t);var r=dKe(t).parsedOptions;this.options=r}return e.parseText=function(t,n){return Zfe(t,n)},e.fromText=function(t,n){return iKe(t,n)},e.fromString=function(t){return new e(e.parseString(t)||void 0)},e.prototype._iter=function(t){return eme(t,this.options)},e.prototype._cacheGet=function(t,n){return this._cache?this._cache._cacheGet(t,n):!1},e.prototype._cacheAdd=function(t,n,r){if(this._cache)return this._cache._cacheAdd(t,n,r)},e.prototype.all=function(t){if(t)return this._iter(new mK("all",{},t));var n=this._cacheGet("all");return n===!1&&(n=this._iter(new ah("all",{})),this._cacheAdd("all",n)),n},e.prototype.between=function(t,n,r,s){if(r===void 0&&(r=!1),!uv(t)||!uv(n))throw new Error("Invalid date passed in to RRule.between");var a={before:n,after:t,inc:r};if(s)return this._iter(new mK("between",a,s));var i=this._cacheGet("between",a);return i===!1&&(i=this._iter(new ah("between",a)),this._cacheAdd("between",i,a)),i},e.prototype.before=function(t,n){if(n===void 0&&(n=!1),!uv(t))throw new Error("Invalid date passed in to RRule.before");var r={dt:t,inc:n},s=this._cacheGet("before",r);return s===!1&&(s=this._iter(new ah("before",r)),this._cacheAdd("before",s,r)),s},e.prototype.after=function(t,n){if(n===void 0&&(n=!1),!uv(t))throw new Error("Invalid date passed in to RRule.after");var r={dt:t,inc:n},s=this._cacheGet("after",r);return s===!1&&(s=this._iter(new ah("after",r)),this._cacheAdd("after",s,r)),s},e.prototype.count=function(){return this.all().length},e.prototype.toString=function(){return zR(this.origOptions)},e.prototype.toText=function(t,n,r){return lKe(this,t,n,r)},e.prototype.isFullyConvertibleToText=function(){return cKe(this)},e.prototype.clone=function(){return new e(this.origOptions)},e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],e.YEARLY=In.YEARLY,e.MONTHLY=In.MONTHLY,e.WEEKLY=In.WEEKLY,e.DAILY=In.DAILY,e.HOURLY=In.HOURLY,e.MINUTELY=In.MINUTELY,e.SECONDLY=In.SECONDLY,e.MO=ki.MO,e.TU=ki.TU,e.WE=ki.WE,e.TH=ki.TH,e.FR=ki.FR,e.SA=ki.SA,e.SU=ki.SU,e.parseString=HR,e.optionsToString=zR,e}();function VKe(e,t,n,r,s,a){var i={},l=e.accept;function c(p,h){n.forEach(function(g){g.between(p,h,!0).forEach(function(y){i[Number(y)]=!0})})}s.forEach(function(p){var h=new U2(p,a).rezonedDate();i[Number(h)]=!0}),e.accept=function(p){var h=Number(p);return isNaN(h)?l.call(this,p):!i[h]&&(c(new Date(h-1),new Date(h+1)),!i[h])?(i[h]=!0,l.call(this,p)):!0},e.method==="between"&&(c(e.args.after,e.args.before),e.accept=function(p){var h=Number(p);return i[h]?!0:(i[h]=!0,l.call(this,p))});for(var u=0;u<r.length;u++){var d=new U2(r[u],a).rezonedDate();if(!e.accept(new Date(d.getTime())))break}t.forEach(function(p){eme(e,p.options)});var m=e._result;switch(l1(m),e.method){case"all":case"between":return m;case"before":return m.length&&m[m.length-1]||null;case"after":default:return m.length&&m[0]||null}}var xK={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function $Ke(e,t){var n=[],r=[],s=[],a=[],i=F2(e),l=i.dtstart,c=i.tzid,u=qKe(e,t.unfold);return u.forEach(function(d){var m;if(d){var p=GKe(d),h=p.name,g=p.parms,y=p.value;switch(h.toUpperCase()){case"RRULE":if(g.length)throw new Error("unsupported RRULE parm: ".concat(g.join(",")));n.push(HR(d));break;case"RDATE":var v=(m=/RDATE(?:;TZID=([^:=]+))?/i.exec(d))!==null&&m!==void 0?m:[],x=v[1];x&&!c&&(c=x),r=r.concat(_K(y,g));break;case"EXRULE":if(g.length)throw new Error("unsupported EXRULE parm: ".concat(g.join(",")));s.push(HR(y));break;case"EXDATE":a=a.concat(_K(y,g));break;case"DTSTART":break;default:throw new Error("unsupported property: "+h)}}}),{dtstart:l,tzid:c,rrulevals:n,rdatevals:r,exrulevals:s,exdatevals:a}}function WKe(e,t){var n=$Ke(e,t),r=n.rrulevals,s=n.rdatevals,a=n.exrulevals,i=n.exdatevals,l=n.dtstart,c=n.tzid,u=t.cache===!1;if(t.compatible&&(t.forceset=!0,t.unfold=!0),t.forceset||r.length>1||s.length||a.length||i.length){var d=new YKe(u);return d.dtstart(l),d.tzid(c||void 0),r.forEach(function(p){d.rrule(new pt(cN(p,l,c),u))}),s.forEach(function(p){d.rdate(p)}),a.forEach(function(p){d.exrule(new pt(cN(p,l,c),u))}),i.forEach(function(p){d.exdate(p)}),t.compatible&&t.dtstart&&d.rdate(l),d}var m=r[0]||{};return new pt(cN(m,m.dtstart||t.dtstart||l,m.tzid||t.tzid||c),u)}function bK(e,t){return t===void 0&&(t={}),WKe(e,HKe(t))}function cN(e,t,n){return vr(vr({},e),{dtstart:t,tzid:n})}function HKe(e){var t=[],n=Object.keys(e),r=Object.keys(xK);if(n.forEach(function(s){rr(r,s)||t.push(s)}),t.length)throw new Error("Invalid options: "+t.join(", "));return vr(vr({},xK),e)}function zKe(e){if(e.indexOf(":")===-1)return{name:"RRULE",value:e};var t=Zqe(e,":",1),n=t[0],r=t[1];return{name:n,value:r}}function GKe(e){var t=zKe(e),n=t.name,r=t.value,s=n.split(";");if(!s)throw new Error("empty property name");return{name:s[0].toUpperCase(),parms:s.slice(1),value:r}}function qKe(e,t){if(t===void 0&&(t=!1),e=e&&e.trim(),!e)throw new Error("Invalid empty string");if(!t)return e.split(/\s/);for(var n=e.split(`
`),r=0;r<n.length;){var s=n[r]=n[r].replace(/\s+$/g,"");s?r>0&&s[0]===" "?(n[r-1]+=s.slice(1),n.splice(r,1)):r+=1:n.splice(r,1)}return n}function KKe(e){e.forEach(function(t){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(t))throw new Error("unsupported RDATE/EXDATE parm: "+t)})}function _K(e,t){return KKe(t),e.split(",").map(function(n){return BD(n)})}function wK(e){var t=this;return function(n){if(n!==void 0&&(t["_".concat(e)]=n),t["_".concat(e)]!==void 0)return t["_".concat(e)];for(var r=0;r<t._rrule.length;r++){var s=t._rrule[r].origOptions[e];if(s)return s}}}var YKe=function(e){k7(t,e);function t(n){n===void 0&&(n=!1);var r=e.call(this,{},n)||this;return r.dtstart=wK.apply(r,["dtstart"]),r.tzid=wK.apply(r,["tzid"]),r._rrule=[],r._rdate=[],r._exrule=[],r._exdate=[],r}return t.prototype._iter=function(n){return VKe(n,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},t.prototype.rrule=function(n){CK(n,this._rrule)},t.prototype.exrule=function(n){CK(n,this._exrule)},t.prototype.rdate=function(n){SK(n,this._rdate)},t.prototype.exdate=function(n){SK(n,this._exdate)},t.prototype.rrules=function(){return this._rrule.map(function(n){return bK(n.toString())})},t.prototype.exrules=function(){return this._exrule.map(function(n){return bK(n.toString())})},t.prototype.rdates=function(){return this._rdate.map(function(n){return new Date(n.getTime())})},t.prototype.exdates=function(){return this._exdate.map(function(n){return new Date(n.getTime())})},t.prototype.valueOf=function(){var n=[];return!this._rrule.length&&this._dtstart&&(n=n.concat(zR({dtstart:this._dtstart}))),this._rrule.forEach(function(r){n=n.concat(r.toString().split(`
`))}),this._exrule.forEach(function(r){n=n.concat(r.toString().split(`
`).map(function(s){return s.replace(/^RRULE:/,"EXRULE:")}).filter(function(s){return!/^DTSTART/.test(s)}))}),this._rdate.length&&n.push(EK("RDATE",this._rdate,this.tzid())),this._exdate.length&&n.push(EK("EXDATE",this._exdate,this.tzid())),n},t.prototype.toString=function(){return this.valueOf().join(`
`)},t.prototype.clone=function(){var n=new t(!!this._cache);return this._rrule.forEach(function(r){return n.rrule(r.clone())}),this._exrule.forEach(function(r){return n.exrule(r.clone())}),this._rdate.forEach(function(r){return n.rdate(new Date(r.getTime()))}),this._exdate.forEach(function(r){return n.exdate(new Date(r.getTime()))}),n},t}(pt);function CK(e,t){if(!(e instanceof pt))throw new TypeError(String(e)+" is not RRule instance");rr(t.map(String),String(e))||t.push(e)}function SK(e,t){if(!(e instanceof Date))throw new TypeError(String(e)+" is not Date instance");rr(t.map(Number),Number(e))||(t.push(e),l1(t))}function EK(e,t,n){var r=!n||n.toUpperCase()==="UTC",s=r?"".concat(e,":"):"".concat(e,";TZID=").concat(n,":"),a=t.map(function(i){return UD(i.valueOf(),r)}).join(",");return"".concat(s).concat(a)}const QKe=e=>{switch(e.kind){case"ONCE":return new Date(e.year,e.month,e.day,e.hour,e.minute);case"DAILY":return new Date(2e3,0,1,e.hour,e.minute);case"WEEKLY":return new Date(2e3,0,2+e.dayOfWeek,e.hour,e.minute);case"MONTHLY":return new Date(2e3,0,e.day,e.hour,e.minute);case"YEARLY":return new Date(2e3,e.month,e.day,e.hour,e.minute);case"WEEKDAYS":return new Date(2e3,0,1,e.hour,e.minute)}};function WD(e,t){const n=new Date;switch(e.kind){case"ONCE":{const r=new Date(e.year,e.month,e.day,e.hour,e.minute);return r>n?r:n}case"DAILY":return new pt({freq:pt.DAILY,dtstart:new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.hour,e.minute),byhour:e.hour,byminute:e.minute}).after(n)||n;case"WEEKLY":{const r=e.dayOfWeek===0?pt.SU:e.dayOfWeek-1;return new pt({freq:pt.WEEKLY,dtstart:new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.hour,e.minute),byweekday:r,byhour:e.hour,byminute:e.minute}).after(n)||n}case"MONTHLY":return new pt({freq:pt.MONTHLY,dtstart:new Date(n.getFullYear(),n.getMonth(),1,e.hour,e.minute),bymonthday:e.day,byhour:e.hour,byminute:e.minute}).after(n)||n;case"YEARLY":return new pt({freq:pt.YEARLY,dtstart:new Date(n.getFullYear(),0,1,e.hour,e.minute),bymonth:e.month+1,bymonthday:e.day,byhour:e.hour,byminute:e.minute}).after(n)||n;case"WEEKDAYS":return new pt({freq:pt.WEEKLY,dtstart:new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.hour,e.minute),byweekday:[pt.MO,pt.TU,pt.WE,pt.TH,pt.FR],byhour:e.hour,byminute:e.minute}).after(n)||n;default:return n}}function XKe(e,t){const n=QKe(e);switch(e.kind){case"ONCE":return t.formatDate(n,{dateStyle:"medium",timeStyle:"short"});case"DAILY":return t.formatTime(n,{timeStyle:"short"});case"WEEKLY":return t.formatDate(n,{weekday:"short",hour:"numeric",minute:"numeric"});case"MONTHLY":return t.formatMessage({defaultMessage:"Day {day}, {time}",id:"grA/MDsLjr"},{day:n.getDate().toString(),time:t.formatTime(n,{timeStyle:"short"})});case"YEARLY":return t.formatDate(n,{hour:"numeric",minute:"numeric",day:"numeric",month:"short"});case"WEEKDAYS":return t.formatTime(n,{timeStyle:"short"})}}const Ep=ot({kindOnce:{defaultMessage:"Once",id:"DqTQOpG2Me"},kindDaily:{defaultMessage:"Daily",id:"zxvhnETmn2"},kindWeekly:{defaultMessage:"Weekly",id:"/clOBUs/wZ"},kindWeekdays:{defaultMessage:"Every weekday",id:"8Hjql2wdJG"},kindMonthly:{defaultMessage:"Monthly",id:"wYsv4ZHu+B"},kindYearly:{defaultMessage:"Yearly",id:"dqD39hnoA/"}}),ZKe={ONCE:Ep.kindOnce,DAILY:Ep.kindDaily,WEEKLY:Ep.kindWeekly,MONTHLY:Ep.kindMonthly,YEARLY:Ep.kindYearly,WEEKDAYS:Ep.kindWeekdays};function js(){const e=new Date;return e.setHours(e.getHours()+1,e.getMinutes(),0,0),{kind:"ONCE",minute:e.getMinutes(),hour:e.getHours(),day:e.getDate(),month:e.getMonth(),year:e.getFullYear(),dayOfWeek:e.getDay()}}function JKe(e="",t=le.PRO,n=["web"]){return{title:"",prompt:e,schedule:js(),searchModel:t,sources:n,expiryDate:void 0,defaultExpiryDate:nme(t)}}function eYe(e,t){return t.formatMessage(ZKe[e])}const tYe=()=>Intl.DateTimeFormat().resolvedOptions().timeZone;function nYe(e){switch(e.kind){case"ONCE":return new Date(e.year,e.month,e.day,e.hour,e.minute);default:return new Date}}function rYe(e){switch(e.kind){case"ONCE":return"FREQ=DAILY;COUNT=1";case"DAILY":return`FREQ=DAILY;BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"WEEKLY":return`FREQ=WEEKLY;BYDAY=${["SU","MO","TU","WE","TH","FR","SA"][e.dayOfWeek]};BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"MONTHLY":return`FREQ=MONTHLY;BYMONTHDAY=${e.day};BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"YEARLY":return`FREQ=YEARLY;BYMONTH=${e.month+1};BYMONTHDAY=${e.day};BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"WEEKDAYS":return`FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;BYHOUR=${e.hour};BYMINUTE=${e.minute}`}}function Kv(e){const t=nYe(e);return{start_at:_u(t,"yyyy-MM-dd'T'HH:mm:ss"),rrule:rYe(e),tzid:tYe()}}function tme(e){if(!(e===null||!e))return _u(e,"yyyy-MM-dd'T'HH:mm:ss")}function B2(e){const t=new Date(e.start_at),n={kind:"ONCE",minute:t.getMinutes(),hour:t.getHours(),day:t.getDate(),month:t.getMonth(),year:t.getFullYear(),dayOfWeek:t.getDay()};if(e.rrule.includes("FREQ=DAILY;COUNT=1"))return n;const r=pt.parseString(e.rrule),s=d=>Array.isArray(d)?d[0]:d,a=s(r.byhour),i=s(r.byminute),l=s(r.bymonth),c=s(r.bymonthday),u=s(r.byweekday);switch(r.freq){case pt.DAILY:return a===void 0||i===void 0?(ne.error("DAILY schedule missing required BYHOUR or BYMINUTE parameter"),{...n}):{...n,kind:"DAILY",hour:a,minute:i};case pt.WEEKLY:{if(u===void 0||a===void 0||i===void 0)return ne.error("WEEKLY schedule missing required parameters"),{...n};if(Array.isArray(r.byweekday)&&r.byweekday.length===5)return{...n,kind:"WEEKDAYS",hour:a,minute:i};const d=u.weekday===6?0:u.weekday+1;return{...n,kind:"WEEKLY",dayOfWeek:d,hour:a,minute:i}}case pt.MONTHLY:return c===void 0||a===void 0||i===void 0?(ne.error("MONTHLY schedule missing required BYMONTHDAY parameter"),{...n}):{...n,kind:"MONTHLY",day:c,hour:a,minute:i};case pt.YEARLY:return l===void 0||c===void 0||a===void 0||i===void 0?(ne.error("YEARLY schedule missing required BYMONTH parameter"),{...n}):{...n,kind:"YEARLY",month:l-1,day:c,hour:a,minute:i}}return ne.error("Invalid task schedule"),{...n}}function sYe({expiryDate:e,schedule:t,defaultExpiryDate:n}){return e===null||!e||!t?e:WD(t)>e?n??null:e}function aYe(e,t){return(e===le.BETA||e===le.ALPHA)&&(t.kind==="DAILY"||t.kind==="WEEKLY"||t.kind==="WEEKDAYS")}function nme(e,t){if(!(!t||!aYe(e,t))&&(e===le.BETA||e===le.ALPHA)){const n=WD(t);return(s=>{switch(s){case"DAILY":return Ds(n,14);case"WEEKLY":return I2(n,14);case"WEEKDAYS":return Ds(n,21);case"ONCE":case"MONTHLY":case"YEARLY":return;default:Gt(s)}})(t.kind)}}const $d={should_send_email:!0,should_send_in_app:!0,should_send_push:!0},rme=e=>({id:e.task_id,type:oYe(e),createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),expiryDate:e.end_at?new Date(e.end_at):void 0,title:e.task_name,prompt:e.task_data.task_prompt,status:e.status,nextRun:new Date(e.next_trigger_intended_time),scheduleInfo:{start_at:e.start_at,rrule:e.trigger_condition_schedule,tzid:e.tzid},subscription:e.event_subscription,searchModel:e.task_data?.task_params?.model_preference||"pplx_pro",sources:e.task_data?.task_params?.sources||["web"],notificationSettings:e.notification_settings||$d}),oYe=e=>{switch(e.scheduler_type){case"EVENT_PUSH":return"ALERT";case"POLL":return"SCHEDULE";case"SHORTCUT":return"SHORTCUT";default:return null}};function iYe({intl:e,triggerType:t}){switch(t){case ct.SCHEDULED:return e.formatMessage({defaultMessage:"Scheduled task",id:"dG8VrMkuAT"});case ct.PRICE_ALERT:return e.formatMessage({defaultMessage:"Price alert",id:"XMapyUiPpV"});case ct.SHORTCUT:return e.formatMessage({defaultMessage:"Shortcut",id:"tceWOrncgz"});default:Gt(t)}}function lYe({intl:e,triggerType:t,actionPerformed:n}){const r=cYe({intl:e,actionPerformed:n});switch(t){case ct.SCHEDULED:return e.formatMessage({defaultMessage:"Task has been {actionDisplayName}",id:"dztI4FIBBf"},{actionDisplayName:r});case ct.PRICE_ALERT:return e.formatMessage({defaultMessage:"Price alert has been {actionDisplayName}",id:"ApBHuTxt1D"},{actionDisplayName:r});case ct.SHORTCUT:return e.formatMessage({defaultMessage:"Shortcut has been {actionDisplayName}",id:"oprPa0O7KY"},{actionDisplayName:r});default:Gt(t)}}function cYe({intl:e,actionPerformed:t}){switch(t){case"created":return e.formatMessage({defaultMessage:"created",id:"lr7wlbGcN2"});case"updated":return e.formatMessage({defaultMessage:"updated",id:"fM7xZh2bri"});case"paused":return e.formatMessage({defaultMessage:"paused",id:"onIpArq3j6"});case"resumed":return e.formatMessage({defaultMessage:"resumed",id:"NUz1enNtoA"});case"deleted":return e.formatMessage({defaultMessage:"deleted",id:"GBLHN+CxXe"});case"copied":return e.formatMessage({defaultMessage:"copied",id:"JZWZSAD5l1"});case"skipped":return e.formatMessage({defaultMessage:"skipped",id:"yrhXAwV22L"});default:Gt(t)}}const uYe=1e9,MK=-1e9;function sme(e){return{trigger:{type:ct.SCHEDULED,schedule:e.schedule},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources??Lb()},status:"ACTIVE",notificationSettings:$d}}function ame({selectedTask:e}){if(!e||e.type===null)return null;switch(e.type){case"SCHEDULE":return{id:e.id,trigger:{type:ct.SCHEDULED,schedule:B2(e.scheduleInfo),expiryDate:e.expiryDate},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status,notificationSettings:e.notificationSettings??$d};case"ALERT":switch(e.subscription?.event_type){case"STOCK_PRICE_TARGET":return{id:e.id,trigger:{type:ct.PRICE_ALERT,alertType:Vr.TARGET_PRICE,price:(e.subscription.value_lower_bound??MK)<0?e.subscription.value_upper_bound??uYe:e.subscription.value_lower_bound??MK,currency:"usd",symbol:e.subscription.event_entity??""},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status};case"STOCK_PRICE_MOVEMENT":return{id:e.id,trigger:{type:ct.PRICE_ALERT,alertType:Vr.MOVEMENT_AMOUNT,percentageDecimalLowerBound:(e.subscription.value_lower_bound??0)/100,percentageDecimalUpperBound:(e.subscription.value_upper_bound??0)/100,symbol:e.subscription.event_entity??""},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status};default:throw new Error("Unhandled subscription.event_type: "+e.subscription?.event_type)}case"SHORTCUT":return{id:e.id,trigger:{type:ct.SHORTCUT,shortcut:e.title},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status};default:Gt(e.type)}}function V5(e=!0){return{trigger:{type:ct.SCHEDULED,schedule:js()},query:{searchModel:e?le.PRO:le.DEFAULT,prompt:"",sources:Lb()},status:"ACTIVE",notificationSettings:$d}}function ome({symbol:e=""}={symbol:""}){return{trigger:{type:ct.PRICE_ALERT,alertType:Vr.TARGET_PRICE,price:0,currency:"usd",symbol:e},query:{prompt:"",searchModel:le.PRO,sources:Lb()},status:"ACTIVE"}}function HD(e){if(e.trigger.type!==ct.SCHEDULED)return e;const t=nme(e.query.searchModel,e.trigger.schedule),n=sYe({expiryDate:e.trigger.expiryDate,schedule:e.trigger.schedule,defaultExpiryDate:t});return e.id?{...e,trigger:{...e.trigger,expiryDate:n}}:{...e,trigger:{...e.trigger,schedule:{...e.trigger.schedule},expiryDate:n,defaultExpiryDate:t}}}function Lb(){return["web"]}function yZt({intl:e,type:t,symbol:n}){return`${n}  ${Xze(t,e)}`}function vZt({intl:e,type:t,upperBound:n,lowerBound:r,currency:s="USD"}){const{$t:a}=e,i=l=>l!=null&&l!==-1&&Math.abs(l)!==DR;switch(t){case"STOCK_PRICE_TARGET":{if(i(r))return a({defaultMessage:"Price below {price}",id:"a0pUAk88Od"},{price:r.toLocaleString(e.locale,{style:"currency",currency:s,trailingZeroDisplay:"stripIfInteger"})});if(i(n))return a({defaultMessage:"Price above {price}",id:"t+Mcn2lglF"},{price:n.toLocaleString(e.locale,{style:"currency",currency:s,trailingZeroDisplay:"stripIfInteger"})});break}case"STOCK_PRICE_MOVEMENT":{const l=i(r),c=i(n);if(l&&c)return a({defaultMessage:"Price moves {percentage}%+",id:"RevB4+v84e"},{percentage:Math.abs(n)});if(c)return a({defaultMessage:"Price rises {percentage}%+",id:"9reloFrZNr"},{percentage:n});if(l)return a({defaultMessage:"Price drops {percentage}%+",id:"RWgd7UywB3"},{percentage:Math.abs(r)});break}default:Gt(t)}return""}const dYe=async(e,t,n,r)=>await fYe({headers:{},reason:"Report Bug",bugText:e,url:t,email:n,category:r}),fYe=async({headers:e,reason:t,bugText:n,url:r,email:s,category:a})=>{try{const i=await se.POST("/webhooks/slack-web-debugger/web",t,{body:{bug_text:n,url:r,email:s??"",category:a??""},headers:e,timeoutMs:1e4});return i.data?i.data:null}catch(i){return ne.error("Failed to make bug report request",i),null}},mYe=e=>{if(!e.includes("/sidecar/"))return e;const t=new URL(e);return t.searchParams.delete("erp"),t.pathname=t.pathname.replace("/sidecar",""),t.toString()},ime=20,xm="list_ask_threads",pYe=10,lme=async({paginationParams:e,timeoutMs:t,ascending:n=!1,reason:r})=>{const s=await se.POST("/rest/thread/list_ask_threads",r,{timeoutMs:t,body:{limit:ime,ascending:n,...e}});if(s.error||!s.data)throw new Error(s.error?.detail?.toString()||"Failed to get user threads");return s.data},cme=async({thread_uuid:e,format:t,filename:n,reason:r})=>{const s=await se.POST("/rest/thread/export",r,{body:{thread_uuid:e,format:t,filename:n},timeoutMs:Pe({productionMs:Ut.VERY_HIGH,clientSideMs:Ut.VERY_HIGH,devMs:Ut.VERY_HIGH})});if(s.error)throw new Error(s.error.detail?.toString()||"Failed to export thread");return s.data},$5=async(e,t)=>{try{await se.PUT("/rest/thread/{entry_uuid_or_slug}","remove-thread-expiry",{params:{path:{entry_uuid_or_slug:e}},body:{expired:!1}}),t?.()}catch{throw new Error("Failed to remove thread expiry")}},hYe=({slugOrUUID:e})=>{const t=f.useCallback(async()=>{e&&await $5(e)},[e]);return f.useMemo(()=>({handleRemoveExpiry:t}),[t])},ume="rwTokenStorage",kK=20,c1=e=>{const t=JSON.stringify(e);try{Re.setItem(ume,t)}catch(n){ne.warn("Could not put rw token storage"),ne.warn(n)}},zD=()=>{let e=null;try{e=Re.getItem(ume)}catch(t){ne.warn("Could not access local storage"),ne.warn(t)}if(!e)return c1({}),{};try{return JSON.parse(e)??{}}catch(t){ne.warn("Could not deserialize rw token storage"),ne.warn(t);const n={};return c1({}),n}},gYe=(e,t)=>{if(!e||!t)return;let n=zD(),r=Object.keys(n);if(r.length>=kK){const s=r[Math.floor(Math.random()*r.length)];s&&delete n[s]}r=Object.keys(n),r.length>kK+5&&(ne.warn("Too many rw tokens stored; resetting"),n={}),n[e]=t,c1(n)},yYe=e=>e?zD()[e]:void 0,dme=e=>{const t=e.context_uuid;if(!t)return;const n=yYe(t);if(n)return n;const r=e?.read_write_token;if(r)return gYe(t,r),r},xZt=e=>{if(!e)return;const t=zD();delete t[e],c1(t)},bZt=()=>{c1({})},vYe=e=>e?.context_uuid??void 0,xYe=e=>e?.frontend_context_uuid??void 0,bYe=e=>e?.thread_title??"",_Ye=e=>e?.query_str??void 0,wYe=e=>e?.search_focus??void 0,CYe=e=>e.sources?.sources??void 0,SYe=e=>e?.author_id??void 0,EYe=e=>e?.author_username??void 0,MYe=e=>e?.author_image??void 0,kYe=e=>{if(e.parent_info)return e.parent_info},TYe=e=>e?.mode??null,NYe=e=>e?.personalized??void 0,jYe=e=>e?.collection_info??void 0,AYe=e=>e?.bookmark_state??void 0,IYe=e=>e?.thread_access??void 0,RYe=e=>e?.thread_url_slug??void 0,PYe=e=>e?.updated_datetime??void 0,OYe=e=>e?.expiry_time??null,LYe=e=>e?.privacy_state??void 0;function u1(e,t){const n={};for(const r of e){const s=t(r);Object.prototype.hasOwnProperty.call(n,s)?n[s].push(r):Object.defineProperty(n,s,{value:[r],configurable:!0,enumerable:!0,writable:!0})}return n}const bl={web:"web",scholar:"scholar",social:"social",edgar:"edgar",org:"org",my_files:"my_files",crunchbase:"crunchbase",factset:"factset",google_drive:"google_drive",onedrive:"onedrive",sharepoint:"sharepoint",wiley:"wiley",dropbox:"dropbox",box:"box",notion:"notion",notion_mcp:"notion_mcp",outlook:"outlook",linear:"linear",linear_alt:"linear_alt",slack:"slack",github_mcp_direct:"github_mcp_direct",asana_mcp_direct:"asana_mcp_direct",asana_mcp_merge:"asana_mcp_merge",atlassian_mcp_direct:"atlassian_mcp_direct",slack_direct:"slack_direct",jira_mcp_merge:"jira_mcp_merge",confluence_mcp_merge:"confluence_mcp_merge",microsoft_teams_mcp_merge:"microsoft_teams_mcp_merge",wiley_mcp_cashmere:"wiley_mcp_cashmere",cbinsights_mcp_cashmere:"cbinsights_mcp_cashmere",pitchbook_mcp_cashmere:"pitchbook_mcp_cashmere",statista_mcp_cashmere:"statista_mcp_cashmere",space:"space",gcal:"gcal",sports:"sports"},DYe=Object.values(bl),FYe=["linear","linear_alt","slack","notion_mcp","github_mcp_direct","asana_mcp_direct","asana_mcp_merge","atlassian_mcp_direct","slack_direct","jira_mcp_merge","confluence_mcp_merge","microsoft_teams_mcp_merge","wiley_mcp_cashmere","cbinsights_mcp_cashmere","pitchbook_mcp_cashmere","statista_mcp_cashmere"],dy=e=>DYe.includes(e),V2=e=>Array.isArray(e)?e.filter(dy):[],UYe=e=>Array.isArray(e)?e.filter(dy).filter(t=>FYe.includes(t)):[],fme=e=>e?.entity_group_type!=="CALENDAR_ACTION"&&!!e?.entities?.length,mme=e=>{const t=!!e?.gauge_familiarity_card_block?.question,n=!!e?.multiple_choice_quiz_card_block?.questions?.length,r=!!e?.flash_card_section_block;return t||n||r};class un{static hasAnswer(t,n){const r=!!(t.chunks&&t.chunks.length>0),s=!!(t.answer&&t.answer.length>0),a=!!t.structured_answer_blocks?.some(u=>u.markdown_block?.chunks?.length||u.entity_list_block?.chunks?.length),i=!!t.structured_answer_blocks?.some(u=>mme(u.inline_entity_block)),l=!!t.structured_answer_blocks?.some(u=>u.markdown_block?.answer?.length||u.entity_list_block?.text?.length||fme(u.entity_group_block)),c=!!t.structured_answer_blocks?.some(u=>u.inline_entity_block?.media_block?.generated_media_items?.some(d=>d.status==="COMPLETED"))&&n;return r||s||a||l||c||i}static isPerplexityMessage(t){return t?.blocks!==void 0}static isPerplexityArticleSection(t){return t?.message!==void 0}static isArticleSection(t){return t?.article_info!==void 0}static mergePlaceBlocks(t){const n=t.filter(i=>!!i);if(!n.length)return;const[r,...s]=n;return Object.assign({},r,...s.map(i=>({review_summary:i.review_summary})))}static mergeMediaBlocks(t){const n=t.filter(s=>!!s);return n.length?{media_items:n.flatMap(s=>s?.media_items||[]),generated_media_items:n[n.length-1].generated_media_items||[],progress:n[n.length-1].progress}:void 0}static mergeShoppingBlocks(t){const n=t.filter(i=>!!i);if(!n.length)return;const[r,...s]=n;return Object.assign({},r,...s.map(i=>({review_summary:i.review_summary})))}static mergeEntityListItems(t){const n=u1(t,s=>s.index),r=[];return Object.values(n).forEach(s=>{const a=s[0];r.push({title:a.title,text:s.map(({text:i})=>i).join(""),chunks:s.flatMap(i=>i.chunks),chunk_starting_offset:0,index:a.index,awaiting_backfill:s.reduce((i,l)=>l.awaiting_backfill??i,!1),place_block:un.mergePlaceBlocks(s.map(i=>i.place_block)),shopping_block:un.mergeShoppingBlocks(s.map(i=>i.shopping_block))})}),r}static parseStructuredAnswerBlocks(t){if(!this.isPerplexityMessage(t)||!t.structured_answer_block_usages?.length)return null;const n=u1(t.blocks,s=>s.intended_usage),r=[];return t.structured_answer_block_usages.forEach(s=>{const a=n[s];if(!a)return;const{markdownBlocks:i,placeBlocks:l,mediaBlocks:c,shoppingPreviewBlocks:u,entityListBlocks:d,jobsPreviewBlocks:m,hotelsPreviewBlocks:p,placesPreviewBlocks:h,knowledgeCardsBlocks:g,calendarEventBlocks:y,entityGroupBlocks:v,entityGroupV2Blocks:x,assetsPreviewBlocks:b,assetsInlineBlocks:_,shoppingBlocks:w,proPerkOfferBlocks:C,placeholderBlocks:S,financeInlineBlocks:E,gaugeFamiliarityCardBlocks:M,multipleChoiceQuizCardBlocks:k,flashCardSectionBlocks:A}=a.reduce((R,O)=>(O.markdown_block?R.markdownBlocks.push(O.markdown_block):O.inline_entity_block?.place_block?R.placeBlocks.push(O.inline_entity_block.place_block):O.inline_entity_block?.media_block?R.mediaBlocks.push(O.inline_entity_block.media_block):O.inline_entity_block?.shopping_preview_block?R.shoppingPreviewBlocks.push(O.inline_entity_block.shopping_preview_block):O.entity_list_block?R.entityListBlocks.push(O.entity_list_block):O.inline_entity_block?.jobs_preview_block?R.jobsPreviewBlocks.push(O.inline_entity_block.jobs_preview_block):O.inline_entity_block?.hotels_preview_block?R.hotelsPreviewBlocks.push(O.inline_entity_block.hotels_preview_block):O.inline_entity_block?.places_preview_block?R.placesPreviewBlocks.push(O.inline_entity_block.places_preview_block):O.inline_entity_block?.knowledge_card_block?R.knowledgeCardsBlocks.push(O.inline_entity_block.knowledge_card_block):O.inline_entity_block?.calendar_event_block?R.calendarEventBlocks.push(O.inline_entity_block.calendar_event_block):O.entity_group_block?R.entityGroupBlocks.push(O.entity_group_block):O.entity_group_v2_block?R.entityGroupV2Blocks.push(O.entity_group_v2_block):O.inline_entity_block?.assets_preview_block?R.assetsPreviewBlocks.push(O.inline_entity_block.assets_preview_block):O.inline_entity_block?.assets_inline_block?R.assetsInlineBlocks.push(O.inline_entity_block.assets_inline_block):O.inline_entity_block?.shopping_block?R.shoppingBlocks.push(O.inline_entity_block?.shopping_block):O.pro_perk_offer_block?R.proPerkOfferBlocks.push(O.pro_perk_offer_block):O.inline_entity_block?.finance_inline_block?R.financeInlineBlocks.push(O.inline_entity_block.finance_inline_block):O.inline_entity_block?.placeholder_block?R.placeholderBlocks.push(O.inline_entity_block?.placeholder_block):O.inline_entity_block?.gauge_familiarity_card_block?R.gaugeFamiliarityCardBlocks.push(O.inline_entity_block.gauge_familiarity_card_block):O.inline_entity_block?.multiple_choice_quiz_card_block?R.multipleChoiceQuizCardBlocks.push(O.inline_entity_block.multiple_choice_quiz_card_block):O.inline_entity_block?.flash_card_section_block&&R.flashCardSectionBlocks.push(O.inline_entity_block.flash_card_section_block),R),{markdownBlocks:[],placeBlocks:[],mediaBlocks:[],shoppingPreviewBlocks:[],entityListBlocks:[],jobsPreviewBlocks:[],hotelsPreviewBlocks:[],placesPreviewBlocks:[],knowledgeCardsBlocks:[],calendarEventBlocks:[],entityGroupBlocks:[],entityGroupV2Blocks:[],assetsPreviewBlocks:[],assetsInlineBlocks:[],shoppingBlocks:[],proPerkOfferBlocks:[],placeholderBlocks:[],financeInlineBlocks:[],gaugeFamiliarityCardBlocks:[],multipleChoiceQuizCardBlocks:[],flashCardSectionBlocks:[]});if(i.length){const R=i[i.length-1];r.push({intended_usage:s,markdown_block:{answer:i.map(O=>O.answer).join(""),chunks:i.flatMap(O=>O.chunks),chunk_starting_offset:0,progress:R.progress,media_items:i.flatMap(O=>O.media_items||[]),inline_token_annotations:i.flatMap(O=>O.inline_token_annotations||[])}})}if(u.length&&r.push({intended_usage:s,inline_entity_block:{shopping_preview_block:u[u.length-1]}}),m.length&&r.push({intended_usage:s,inline_entity_block:{jobs_preview_block:m[m.length-1]}}),p.length&&r.push({intended_usage:s,inline_entity_block:{hotels_preview_block:p[p.length-1]}}),h.length&&r.push({intended_usage:s,inline_entity_block:{places_preview_block:h[h.length-1]}}),l.length&&r.push({intended_usage:s,inline_entity_block:{place_block:un.mergePlaceBlocks(l)}}),c.length&&r.push({intended_usage:s,inline_entity_block:{media_block:un.mergeMediaBlocks(c)}}),d.length&&r.push({intended_usage:s,entity_list_block:{text:d.map(({text:R})=>R).join(""),chunks:d.flatMap(R=>R.chunks),chunk_starting_offset:0,entities:un.mergeEntityListItems(d.flatMap(R=>R.entities))}}),g.length&&r.push({intended_usage:s,inline_entity_block:{knowledge_card_block:g[g.length-1]}}),y.length&&r.push({intended_usage:s,inline_entity_block:{calendar_event_block:y[y.length-1]}}),v.length&&r.push({intended_usage:s,entity_group_block:{entities:v[v.length-1].entities,entity_group_type:v[v.length-1].entity_group_type}}),x.length){const R=x[x.length-1];r.push({intended_usage:s,entity_group_v2_block:R})}b.length&&r.push({intended_usage:s,inline_entity_block:{assets_preview_block:b[b.length-1]}}),_.length&&r.push({intended_usage:s,inline_entity_block:{assets_inline_block:_[_.length-1]}}),w.length&&r.push({intended_usage:s,inline_entity_block:{shopping_block:this.mergeShoppingBlocks(w)}}),C.length&&r.push({intended_usage:s,pro_perk_offer_block:C[C.length-1]}),E.length&&r.push({intended_usage:s,inline_entity_block:{finance_inline_block:E[E.length-1]}}),S.length&&r.push({intended_usage:s,inline_entity_block:{placeholder_block:S[S.length-1]}}),M.length&&r.push({intended_usage:s,inline_entity_block:{gauge_familiarity_card_block:M[M.length-1]}}),k.length&&r.push({intended_usage:s,inline_entity_block:{multiple_choice_quiz_card_block:k[k.length-1]}}),A.length&&r.push({intended_usage:s,inline_entity_block:{flash_card_section_block:A[A.length-1]}})}),r}static parseAskTextField(t){if(!this.isPerplexityMessage(t))return this.legacyParseBackendOutputStr(t.text);if(!t.blocks?.length)return null;const n={answer:""};n.structured_answer_blocks=un.parseStructuredAnswerBlocks(t);const r=t.blocks?.filter(a=>a.intended_usage==="ask_text"&&a.markdown_block).map(a=>a.markdown_block);if(r.length>0){const a=r.flatMap(i=>i.chunks);n.chunks=a,n.answer=a.join("")}const s=t.blocks?.filter(a=>a.intended_usage==="web_results"&&a.web_result_block).flatMap(a=>a.web_result_block.web_results);return s.length>0&&(n.web_results=s),n}static legacyParseBackendOutputStr(t){let n=null;try{if(n=JSON.parse(t??""),Array.isArray(n)){const r=n[n.length-1];r.step_type=="FINAL"&&r?.content?.answer!=null&&(n=JSON.parse(r.content.answer))}}catch{return null}return n}static isStatusPending(t){return t.status?.toLowerCase()===qn.PENDING.toLowerCase()}static isStatusBlocked(t){return t.status?.toLowerCase()===qn.BLOCKED.toLowerCase()}static isStatusFailed(t){return t.status?.toLowerCase()===qn.FAILED.toLowerCase()}static isStatusCompleted(t){return t.status?.toLowerCase()===qn.COMPLETED.toLowerCase()}static isCopilotMode(t){return t.mode?.toLowerCase()===Sh.COPILOT.toLowerCase()}static isArticleMode(t){return this.isPerplexityMessage(t)?t?.mode===Sh.ARTICLE:this.isPerplexityArticleSection(t)?t?.message?.mode===Sh.ARTICLE:t?.mode==="article"}static isSourceListType(t){return Array.isArray(t)&&t.every(n=>Object.values(bl).includes(n))}static hasUnspecifiedSelectionStatus(t){return t?.selection_status===Ii.SELECTION_STATUS_UNSPECIFIED}static hasMultipleSiblingEntries(t,n){return n?t.filter(s=>s.side_by_side_metadata?.sibling_uuid===n).length>1:!1}static extractClarifyingQuestion(t){if(!t?.length)return null;const n=[];return t.forEach(r=>{if(r.intended_usage==="clarification_responses"&&r?.clarification_responses_block){const s=r.clarification_responses_block?.responses;if(s?.length>0&&s[0]){const a=s[0];a?.input_hint?.hint&&n.push(a.input_hint.hint)}}}),n[0]??null}static extractClarificationResponses(t){if(!t?.length)return null;const n=[];return t.forEach(r=>{r.intended_usage==="pro_search_steps"&&r.plan_block?.steps&&r.plan_block.steps.forEach(s=>{s.clarifying_questions_output_content?.clarification&&n.push(s.clarifying_questions_output_content.clarification)})}),n}}var $2;(function(e){e[e.NONE=0]="NONE",e[e.READER=1]="READER",e[e.WRITER=2]="WRITER",e[e.EDITOR=5]="EDITOR",e[e.ADMIN=3]="ADMIN",e[e.OWNER=4]="OWNER",e[e.OWNER_DEFAULT_BOOKMARKS=6]="OWNER_DEFAULT_BOOKMARKS",e[e.INVITED_READER=11]="INVITED_READER",e[e.INVITED_WRITER=12]="INVITED_WRITER",e[e.INVITED_EDITOR=15]="INVITED_EDITOR",e[e.INVITED_ADMIN=13]="INVITED_ADMIN"})($2||($2={}));function BYe(e){return e>=$2.WRITER&&e<$2.INVITED_READER}const pme="CLIENT_SEARCH_PLACEHOLDER",VYe=({rawQuery:e,fork:t,existingEntryUUID:n,existingUuid:r,collection:s,isRelatedQuery:a,newFrontendContextUUID:i,existingFrontendContextUUID:l,submitFromArticleOverride:c,isNavSuggestionsDisabled:u,isCopilot:d,newAttachments:m,firstResultFrontendContextUUID:p,isPersonalized:h,forceNew:g,finalSources:y,finalRecency:v,uuid:x,threadMetadataTitle:b,threadMetadataThreadUrlSlug:_,modelPreferenceSubmit:w,querySource:C,side_by_side_metadata:S})=>{const E=e.trim(),M=d?JSON.stringify([{step_type:"INITIAL_QUERY",content:{query:""},uuid:""}]):m.length>0?JSON.stringify({web_results:m.map(R=>({url:R,is_attachment:!0}))}):null,k=t?{title:c?.article_info?.title??b,url_slug:(c&&"thread_url_slug"in c?c.thread_url_slug:void 0)??_,mode:((c&&"mode"in c?c.mode:void 0)??p)?.toUpperCase()}:void 0,A=s&&BYe(s.user_permission)?s:void 0;return{parent_info:void 0,plan:void 0,summary:void 0,form:void 0,reasoning_plan:void 0,status:"PENDING",final:!1,query_str:E,query_source:C,backend_uuid:g?"":n??"",bookmark_state:s?"BOOKMARKED":"NOT_BOOKMARKED",context_uuid:"",frontend_context_uuid:l??i??"",uuid:r??x,frontend_uuid:r??x,...t?{parent_info:k}:{},author_username:void 0,author_image:void 0,search_focus:y.length===0?"writing":"internet",search_recency_filter:v??void 0,sources:{sources:y},num_sources_display:void 0,personalized:h,attachments:m,blocks:[],social_info:{like_count:0,view_count:0,fork_count:0,user_likes:!1},mode:d?"COPILOT":"CONCISE",text:M??void 0,collection_info:A,is_related_query_result:a??!1,related_queries:[],media_items:[],widget_data:[],widget_intents:[],knowledge_cards:[],sponsored_results:[],expect_sponsored_results:!1,related_query_items:[],sources_list:[],answer_modes:[],is_nav_suggestions_disabled:u,structured_answer_block_usages:[],display_model:w,model_preference:w,side_by_side_metadata:S}},GD="DEFAULT_SEARCH_PLACEHOLDER",$Ye=(e={})=>{const t=e.uuid??e.frontend_uuid??crypto.randomUUID();return{status:"PENDING",parent_info:void 0,query_str:"",backend_uuid:GD,author_username:void 0,author_image:void 0,search_focus:"internet",display_model:"turbo",personalized:!1,attachments:[],social_info:{like_count:0,view_count:0,fork_count:0,user_likes:!1},text:void 0,collection_info:void 0,image_completions:[],is_related_query_result:!1,final:!1,sources:{sources:["web"]},should_index:!1,updated_datetime:new Date().toISOString(),thread_access:0,thread_url_slug:"",expiry_time:void 0,privacy_state:void 0,context_uuid:"",related_queries:[],media_items:[],widget_data:[],blocks:[],message_mode:"MESSAGE_MODE_UNSPECIFIED",widget_intents:[],knowledge_cards:[],sponsored_results:[],plan:void 0,reasoning_plan:void 0,summary:void 0,form:void 0,sources_list:[],related_query_items:[],answer_modes:[],structured_answer_block_usages:[],...e,frontend_context_uuid:e.frontend_context_uuid??crypto.randomUUID(),frontend_uuid:t,uuid:t,attachment_processing_progress:[]}};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var WYe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)s.hasOwnProperty(a)&&(r[a]=s[a])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),HYe=Object.prototype.hasOwnProperty;function GR(e,t){return HYe.call(e,t)}function qR(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var s in e)GR(e,s)&&r.push(s);return r}function No(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function KR(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Nf(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function hme(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function YR(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(YR(e[t]))return!0}else if(typeof e=="object"){for(var r=qR(e),s=r.length,a=0;a<s;a++)if(YR(e[r[a]]))return!0}}return!1}function TK(e,t){var n=[e];for(var r in t){var s=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof s<"u"&&n.push(r+": "+s)}return n.join(`
`)}var gme=function(e){WYe(t,e);function t(n,r,s,a,i){var l=this.constructor,c=e.call(this,TK(n,{name:r,index:s,operation:a,tree:i}))||this;return c.name=r,c.index=s,c.operation=a,c.tree=i,Object.setPrototypeOf(c,l.prototype),c.message=TK(n,{name:r,index:s,operation:a,tree:i}),c}return t}(Error),Ar=gme,zYe=No,oh={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=W2(n,this.path);r&&(r=No(r));var s=Xf(n,{op:"remove",path:this.from}).removed;return Xf(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=W2(n,this.from);return Xf(n,{op:"add",path:this.path,value:No(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:d1(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},GYe={add:function(e,t,n){return KR(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:oh.move,copy:oh.copy,test:oh.test,_get:oh._get};function W2(e,t){if(t=="")return e;var n={op:"_get",path:t};return Xf(e,n),n.value}function Xf(e,t,n,r,s,a){if(n===void 0&&(n=!1),r===void 0&&(r=!0),s===void 0&&(s=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):H2(t,0)),t.path===""){var i={newDocument:e};if(t.op==="add")return i.newDocument=t.value,i;if(t.op==="replace")return i.newDocument=t.value,i.removed=e,i;if(t.op==="move"||t.op==="copy")return i.newDocument=W2(e,t.from),t.op==="move"&&(i.removed=e),i;if(t.op==="test"){if(i.test=d1(e,t.value),i.test===!1)throw new Ar("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return i.newDocument=e,i}else{if(t.op==="remove")return i.removed=e,i.newDocument=null,i;if(t.op==="_get")return t.value=e,i;if(n)throw new Ar("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return i}}else{r||(e=No(e));var l=t.path||"",c=l.split("/"),u=e,d=1,m=c.length,p=void 0,h=void 0,g=void 0;for(typeof n=="function"?g=n:g=H2;;){if(h=c[d],h&&h.indexOf("~")!=-1&&(h=hme(h)),s&&(h=="__proto__"||h=="prototype"&&d>0&&c[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(u[h]===void 0?p=c.slice(0,d).join("/"):d==m-1&&(p=t.path),p!==void 0&&g(t,0,e,p)),d++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!KR(h))throw new Ar("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);KR(h)&&(h=~~h)}if(d>=m){if(n&&t.op==="add"&&h>u.length)throw new Ar("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var i=GYe[t.op].call(t,u,h,e);if(i.test===!1)throw new Ar("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return i}}else if(d>=m){var i=oh[t.op].call(t,u,h,e);if(i.test===!1)throw new Ar("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return i}if(u=u[h],n&&d<m&&(!u||typeof u!="object"))throw new Ar("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function W5(e,t,n,r,s){if(r===void 0&&(r=!0),s===void 0&&(s=!0),n&&!Array.isArray(t))throw new Ar("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=No(e));for(var a=new Array(t.length),i=0,l=t.length;i<l;i++)a[i]=Xf(e,t[i],n,!0,s,i),e=a[i].newDocument;return a.newDocument=e,a}function qYe(e,t,n){var r=Xf(e,t);if(r.test===!1)throw new Ar("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function H2(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ar("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(oh[e.op]){if(typeof e.path!="string")throw new Ar("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ar('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ar("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ar("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&YR(e.value))throw new Ar("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var s=e.path.split("/").length,a=r.split("/").length;if(s!==a+1&&s!==a)throw new Ar("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ar("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var i={op:"_get",path:e.from,value:void 0},l=yme([i],n);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ar("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ar("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function yme(e,t,n){try{if(!Array.isArray(e))throw new Ar("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)W5(No(t),No(e),n||!0);else{n=n||H2;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(s){if(s instanceof Ar)return s;throw s}}function d1(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),s,a,i;if(n&&r){if(a=e.length,a!=t.length)return!1;for(s=a;s--!==0;)if(!d1(e[s],t[s]))return!1;return!0}if(n!=r)return!1;var l=Object.keys(e);if(a=l.length,a!==Object.keys(t).length)return!1;for(s=a;s--!==0;)if(!t.hasOwnProperty(l[s]))return!1;for(s=a;s--!==0;)if(i=l[s],!d1(e[i],t[i]))return!1;return!0}return e!==e&&t!==t}const KYe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ar,_areEquals:d1,applyOperation:Xf,applyPatch:W5,applyReducer:qYe,deepClone:zYe,getValueByPointer:W2,validate:yme,validator:H2},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var qD=new WeakMap,YYe=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),QYe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function XYe(e){return qD.get(e)}function ZYe(e,t){return e.observers.get(t)}function JYe(e,t){e.observers.delete(t.callback)}function eQe(e,t){t.unobserve()}function tQe(e,t){var n=[],r,s=XYe(e);if(!s)s=new YYe(e),qD.set(e,s);else{var a=ZYe(s,t);r=a&&a.observer}if(r)return r;if(r={},s.value=No(e),t){r.callback=t,r.next=null;var i=function(){QR(r)},l=function(){clearTimeout(r.next),r.next=setTimeout(i)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return r.patches=n,r.object=e,r.unobserve=function(){QR(r),clearTimeout(r.next),JYe(s,r),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},s.observers.set(t,new QYe(t,r)),r}function QR(e,t){t===void 0&&(t=!1);var n=qD.get(e.object);KD(n.value,e.object,e.patches,"",t),e.patches.length&&W5(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function KD(e,t,n,r,s){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=qR(t),i=qR(e),l=!1,c=i.length-1;c>=0;c--){var u=i[c],d=e[u];if(GR(t,u)&&!(t[u]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var m=t[u];typeof d=="object"&&d!=null&&typeof m=="object"&&m!=null&&Array.isArray(d)===Array.isArray(m)?KD(d,m,n,r+"/"+Nf(u),s):d!==m&&(s&&n.push({op:"test",path:r+"/"+Nf(u),value:No(d)}),n.push({op:"replace",path:r+"/"+Nf(u),value:No(m)}))}else Array.isArray(e)===Array.isArray(t)?(s&&n.push({op:"test",path:r+"/"+Nf(u),value:No(d)}),n.push({op:"remove",path:r+"/"+Nf(u)}),l=!0):(s&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!l&&a.length==i.length))for(var c=0;c<a.length;c++){var u=a[c];!GR(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Nf(u),value:No(t[u])})}}}function nQe(e,t,n){n===void 0&&(n=!1);var r=[];return KD(e,t,r,"",n),r}const rQe=Object.freeze(Object.defineProperty({__proto__:null,compare:nQe,generate:QR,observe:tQe,unobserve:eQe},Symbol.toStringTag,{value:"Module"}));Object.assign({},KYe,rQe,{JsonPatchError:gme,deepClone:No,escapePathComponent:Nf,unescapePathComponent:hme});function sQe(e,t){const n=new Map(e.map(r=>[r.intended_usage,r]));for(const r of t)if(r.diff_block){const s=r.diff_block.field,a=n.get(r.intended_usage)?.[s]??{},i=W5(a,r.diff_block.patches,!1,!1).newDocument;n.set(r.intended_usage,{intended_usage:r.intended_usage,[s]:i})}else n.set(r.intended_usage,r);return Array.from(n.values())}let vme=()=>({emit(e,...t){for(let n=this.events[e]||[],r=0,s=n.length;r<s;r++)n[r](...t)},events:{},on(e,t){return(this.events[e]||=[]).push(t),()=>{this.events[e]=this.events[e]?.filter(n=>t!==n)}}});const rs=vme();function aQe(e,t){return e.reduce((n,r)=>r(n),t)}const oQe=e=>e&&WRe(e,t=>t!=null);function XR(e){return e?!e.resume_entry_uuid:!1}function iQe(e,t){const n={minuteCount:0,hourCount:0,minuteWindow:Math.floor(Date.now()/6e4),hourWindow:Math.floor(Date.now()/36e5)};return async(...r)=>{const s=Date.now(),a=Math.floor(s/(60*1e3)),i=Math.floor(s/(60*60*1e3));return a!==n.minuteWindow&&(n.minuteCount=0,n.minuteWindow=a),i!==n.hourWindow&&(n.hourCount=0,n.hourWindow=i),n.minuteCount>=t.perMinute?{allowed:!1}:n.hourCount>=t.perHour?{allowed:!1}:(n.minuteCount++,n.hourCount++,{allowed:!0,result:await e(...r)})}}const lQe=Symbol(),xme=Symbol(),dv="a",bme="f",NK="p",_me="c",wme="t",Cme="h",_S="w",Sme="o",Eme="k";let cQe=(e,t)=>new Proxy(e,t);const ZR=Object.getPrototypeOf,jK=new WeakMap,uQe=e=>e&&(jK.has(e)?jK.get(e):ZR(e)===Object.prototype||ZR(e)===Array.prototype),AK=e=>typeof e=="object"&&e!==null,dQe=e=>Object.values(Object.getOwnPropertyDescriptors(e)).some(t=>!t.configurable&&!t.writable),fQe=e=>{if(Array.isArray(e))return Array.from(e);const t=Object.getOwnPropertyDescriptors(e);return Object.values(t).forEach(n=>{n.configurable=!0}),Object.create(ZR(e),t)},mQe=(e,t)=>{const n={[bme]:t};let r=!1;const s=(l,c)=>{if(!r){let u=n[dv].get(e);if(u||(u={},n[dv].set(e,u)),l===_S)u[_S]=!0;else{let d=u[l];d||(d=new Set,u[l]=d),d.add(c)}}},a=()=>{r=!0,n[dv].delete(e)},i={get(l,c){return c===xme?e:(s(Eme,c),kme(Reflect.get(l,c),n[dv],n[_me],n[wme]))},has(l,c){return c===lQe?(a(),!0):(s(Cme,c),Reflect.has(l,c))},getOwnPropertyDescriptor(l,c){return s(Sme,c),Reflect.getOwnPropertyDescriptor(l,c)},ownKeys(l){return s(_S),Reflect.ownKeys(l)}};return t&&(i.set=i.deleteProperty=()=>!1),[i,n]},Mme=e=>e[xme]||e,kme=(e,t,n,r)=>{if(!uQe(e))return e;let s=r&&r.get(e);if(!s){const c=Mme(e);dQe(c)?s=[c,fQe(c)]:s=[c],r?.set(e,s)}const[a,i]=s;let l=n&&n.get(a);return(!l||l[1][bme]!==!!i)&&(l=mQe(a,!!i),l[1][NK]=cQe(i||a,l[0]),n&&n.set(a,l)),l[1][dv]=t,l[1][_me]=n,l[1][wme]=r,l[1][NK]},pQe=(e,t)=>{const n=Reflect.ownKeys(e),r=Reflect.ownKeys(t);return n.length!==r.length||n.some((s,a)=>s!==r[a])},JR=(e,t,n,r,s=Object.is)=>{if(s(e,t))return!1;if(!AK(e)||!AK(t))return!0;const a=n.get(Mme(e));if(!a)return!0;if(r){if(r.get(e)===t)return!1;r.set(e,t)}let i=null;for(const l of a[Cme]||[])if(i=Reflect.has(e,l)!==Reflect.has(t,l),i)return i;if(a[_S]===!0){if(i=pQe(e,t),i)return i}else for(const l of a[Sme]||[]){const c=!!Reflect.getOwnPropertyDescriptor(e,l),u=!!Reflect.getOwnPropertyDescriptor(t,l);if(i=c!==u,i)return i}for(const l of a[Eme]||[])if(i=JR(e[l],t[l],n,r,s),i)return i;if(i===null)throw new Error("invalid used");return i},hQe=e=>()=>{const[,n]=f.useReducer(u=>u+1,0),r=f.useMemo(()=>new WeakMap,[]),s=f.useRef(),a=f.useRef();f.useEffect(()=>{s.current!==a.current&&JR(s.current,a.current,r,new WeakMap)&&(s.current=a.current,n())});const i=f.useCallback(u=>(a.current=u,s.current&&s.current!==u&&!JR(s.current,u,r,new WeakMap)?s.current:(s.current=u,u)),[r]),l=e(i),c=f.useMemo(()=>new WeakMap,[]);return kme(l,r,c)};function Db(e){const t=Wt(e,null),{useSelector:n,useStore:r,useTrackedState:s}=Tme(t,e);return{Context:t,useSelector:n,useStore:r,useTrackedState:s}}function Tme(e,t){const n=()=>{const a=I.useContext(e);if(!a)throw new Error(`This hook must be used within ${t}.Provider`);return a},r=a=>n()(a),s=hQe(r);return{useSelector:r,useStore:n,useTrackedState:s}}const fy=(e,t)=>{const n=Wt(e,null),r=l=>{const[c]=I.useState(()=>l.initialValue?t(l?.initialValue):t(void 0));return o.jsx(n.Provider,{value:c,children:l.children})},{useSelector:s,useStore:a,useTrackedState:i}=Tme(n,e);return{useSelector:s,useStore:a,useTrackedState:i,Context:n,Provider:r}},gQe="2.18",eP=Object.freeze([]);function kh(e,t){return t?e.streams[t]:void 0}function YD(e,t){const n=Object.values(e.streams),r=n.length;for(let s=r-1;s>=0;s--){const a=n[s];if(a.entryId===t&&e.activeStreams.includes(a.id.description))return a}}function yQe(e,t){const n=Object.values(e.streams),r=n.length;for(let s=r-1;s>=0;s--){const a=n[s];if(a.threadId===t&&e.activeStreams.includes(a.id.description))return a}}const Nme=50,vQe=100,IK=1e3;function uN(e,t,n){const r=aQe(e.middlewares,n);if(!r)return{newState:e};const s=kh(e,t);if(!s||!e.activeStreams.includes(t))return{newState:e};const a=r.context_uuid,i=r.backend_uuid,l=r.uuid,u=!!!(s.entryId&&s.isReconnect&&e.erroredStreams[s.entryId])&&(!s.threadId||!s.entryId);if(i===GD||i===pme)return{newState:{streams:{...e.streams,[t]:{...s,placeholderChunk:r}}}};if(r.status===qn.PENDING&&r.blocks?.length===0||r.status===qn.RESUMING)return{newState:{...tP(e,r,{isFirstMessage:u,placeholderChunk:s.placeholderChunk,streamId:s.id.description}),streams:{...e.streams,[t]:{...s,threadId:r.context_uuid,entryId:i,extraEntryId:l,placeholderChunk:r}}},ingested:r};if(!a||!i)return{newState:e};let d=s;return u&&(d={...s,threadId:a,entryId:i,extraEntryId:l}),{newState:{...tP(e,r,{isFirstMessage:u,placeholderChunk:s.placeholderChunk,streamId:s.id.description}),streams:{...e.streams,[t]:d}},ingested:r}}function tP(e,t,{isFirstMessage:n,placeholderChunk:r,streamId:s}){const a=t.context_uuid,i=t.backend_uuid,l=Array.from(e.threads),c={...e.entries};if(l.length>=vQe){const m=l.shift();if(m)for(const p of m.entryIds)delete c[p]}const u=l.findIndex(m=>m.id===a),d=l[u];if(d?d.entryIds.includes(i)||(l[u]={...d,entryIds:[...d.entryIds,i]}):l.push({id:a,entryIds:[i]}),t.status===qn.COMPLETED)c[i]=t;else if(t.blocks){let m=c[i];m&&m.uuid!==t.uuid?m=r:m||(m=r);const p=m?.frontend_context_uuid??t.frontend_context_uuid??s,h=m?.frontend_uuid??t.frontend_uuid??s,g=m?.query_str??t.query_str,y=m?.connector_auth_info!=null&&!("connector_auth_info"in t)&&!n,v={...m??{},...t,frontend_context_uuid:p,frontend_uuid:h,query_str:g,...y&&{connector_auth_info:void 0},blocks:sQe(n?eP:m?.blocks??eP,t.blocks)};c[i]=v}return{threads:l,entries:c}}function xQe(e,t,n){ne.error("Error in reading stream",n);const r=kh(e,t);if(!r)return e;const s=r?.entryId;if(!s)return e;const a={...e.entries[s],status:qn.FAILED},{promise:i,abortController:l,...c}=r;return{erroredStreams:{...e.erroredStreams,[s]:{...c,code:n instanceof UI?n.code:void 0}},entries:{...e.entries,[s]:a}}}const RK=Object.freeze([oQe]);function bQe(e,t){const n=kh(e,t);if(!n)return;const r=e.threads.find(s=>s.id===n.threadId);rs.emit("completed",{stream:n,thread:(r?.entryIds.map(s=>e.entries[s])??eP).filter(s=>s!=null),message:n.entryId?e.entries[n.entryId]:void 0})}const _Qe=(e,t)=>({threads:[],entries:{},activeStreams:[],erroredStreams:{},middlewares:RK,streamTimers:{},streams:{},actions:{abortStream:n=>{e(r=>{let s=r.activeStreams;const a=kh(r,n);if(a){try{a.abortController?.abort("Forced abort")}catch(i){ne.error("Failed to abort stream",i)}finally{s=s.filter(i=>i!==n)}return{activeStreams:s,streams:{...r.streams,[n]:{...a,promise:null,abortController:null}}}}return r},void 0,"abortStream")},getEntryById:n=>t().entries[n],createStream:n=>t().actions.createBackwardsCompatibleStream(n,{reason:"create-stream",timer:jl(void 0,{nowFromTimeOrigin:performance.now()})}).id,retryStream:n=>{const r=t().entries[n];if(!r)return;const s=t().erroredStreams[n];if(!s)return;const a=s.placeholderChunk?.query_str;if(a){if(e(i=>{const{entries:l,threads:c}=i,{[n]:u,...d}=l,m=Array.from(c),p=c.findIndex(h=>h.entryIds.includes(n));return p===-1?i:(m.splice(p,1,{id:m[p].id,entryIds:m[p].entryIds}),{threads:m,entries:d})}),!XR(s.params))throw new Error("Stream params are not SubmitParams so cannot retry");return t().actions.createBackwardsCompatibleStream({query_str:a,params:{...s.params,existing_entry_uuid:n,query_source:"retry",frontend_context_uuid:r.frontend_context_uuid}},{placeholderChunk:s.placeholderChunk,timer:jl(void 0,{nowFromTimeOrigin:performance.now()}),reason:"retry-stream"})}},reconnectStream:n=>{const r=YD(t(),n);if(r&&r.promise&&r.abortController&&!r.abortController.signal.aborted)return r.id;const s=t().entries[n],a=s?.cursor,i=t().actions.createBackwardsCompatibleStream({query_str:"",params:{resume_entry_uuid:n,cursor:a}},{isReconnect:!0,timer:jl(void 0,{nowFromTimeOrigin:performance.now()}),reason:"reconnect-stream"});return e(l=>uN(l,i.id.description,{...s,status:qn.PENDING}).newState,void 0,"ingestPlaceholderChunk"),i.id},createBackwardsCompatibleStream:(n,{isReconnect:r,placeholderChunk:s,onFinalResponse:a,onFirstMessageReceived:i,timer:l,reason:c})=>{const u=Array.from(t().activeStreams),d={...t().streams};if(u.length>=Nme)try{const x=u.shift();x&&(d[x]?.abortController?.abort(),d[x]={...d[x],promise:null,abortController:null})}catch(x){ne.error("Failed to abort stream",x)}const m=n.params?.frontend_uuid??crypto.randomUUID(),p=new AbortController,h={id:{description:m},promise:Promise.resolve(),abortController:p,isReconnect:r,entryId:n.params?.resume_entry_uuid,params:n.params,timer:l},g={message:async x=>{const b=kh(t(),m);let _=!1;b?.threadId||(_=!0,i?.(x)),e(w=>{const{newState:C,ingested:S}=uN(w,m,x);if(S?.status===qn.COMPLETED&&a?.(S),S?.status===qn.FAILED&&b&&b.entryId){const{promise:E,abortController:M,...k}=b;return{...C,erroredStreams:{...w.erroredStreams,[b.entryId]:k}}}return C},void 0,"ingest"),b&&rs.emit("progress",{stream:b,message:t().entries[x.backend_uuid]??x,isFirstMessage:_})}},y=n.params?.query_source==="default_search",v={[Dr]:m};return ne.info("Starting stream",{request_id:m}),h.promise=(r?se.SSE("/rest/sse/perplexity_ask/reconnect/{resume_entry_uuid}",c,{path:{resume_entry_uuid:n.params?.resume_entry_uuid??""},params:{cursor:n.params?.cursor},signal:p.signal,handlers:g,headers:v}):se.SSE("/rest/sse/perplexity_ask",c,{params:{...n,params:{...n.params,version:gQe}},signal:p.signal,handlers:g,metrics:{omnisearch:y},timer:l,headers:v})).then(()=>bQe(t(),m),x=>{const b=t(),_=kh(b,m);_&&(e(w=>xQe(w,m,x),void 0,"handleStreamError"),rs.emit("error",{stream:_,error:x}))}).finally(()=>{e(({activeStreams:x,streams:b})=>({streams:{...b,[m]:{...b[m],promise:null,abortController:null}},activeStreams:x.filter(_=>_!==m)}),void 0,"cleanupBackwardsCompatibleStream")}),u.push(m),e({activeStreams:u,streams:{...d,[m]:h}},void 0,"createBackwardsCompatibleStream"),rs.emit("created",{stream:h,query:n.query_str,params:n.params}),h.abortController?.signal.addEventListener("abort",()=>{rs.emit("aborted",{stream:h})}),s&&e(x=>uN(x,m,s).newState,void 0,"ingestPlaceholderChunk"),h},setMiddlewares:n=>{e(()=>({middlewares:[...RK,...n]}))}}}),QD=fy("StreamStateContext",()=>pi()(HRe(iie(_Qe),{name:"StreamStore"}))),bm=QD.useSelector,jme=QD.useStore,wQe=()=>{const e=jme(),t=f.useMemo(()=>iQe(e.getState().actions.reconnectStream,{perMinute:20,perHour:120}),[e]);return f.useEffect(()=>{function n(){const i=e.getState(),l=new Set(i.activeStreams),c=new Set(Object.values(i.streams).filter(u=>l.has(u.id.description)).map(u=>u.entryId));Object.values(i.entries).forEach(u=>{u?.reconnectable&&l.size<Nme&&!c.has(u?.backend_uuid)&&t(u.backend_uuid)})}n();let r=setInterval(n,IK);function s(){clearInterval(r),n(),r=setInterval(n,IK)}function a(){clearInterval(r)}return window.addEventListener("online",s,!0),window.addEventListener("offline",a,!0),()=>{clearInterval(r),window.removeEventListener("online",s,!0),window.removeEventListener("offline",a,!0)}},[t,e]),null},Ame=I.memo(({children:e})=>o.jsxs(QD.Provider,{children:[o.jsx(wQe,{}),e]}));Ame.displayName="StreamStateProvider";const _Zt=()=>bm(e=>e.actions.getEntryById),CQe=()=>bm(e=>e.actions.createBackwardsCompatibleStream),XD=()=>bm(e=>e.actions.reconnectStream),SQe=()=>bm(e=>e.actions.retryStream),EQe=()=>{const e=bm(t=>t.entries);return f.useCallback(t=>t?e[t]?.status===qn.COMPLETED:!1,[e])},Ime=e=>{const t=bm(s=>s.activeStreams),n=bm(s=>s.streams),r=Object.values(n).find(s=>s.id.description===e);return!!(r&&t.includes(r?.id.description))},uo=()=>jme(),Rme=()=>{const e=uo();return f.useCallback(n=>{for(const r of n){if(e.getState().entries[r.backend_uuid])continue;const a=!r.reconnectable;e.setState(i=>tP(i,{...r,status:a?r.status===qn.BLOCKED?qn.BLOCKED:qn.COMPLETED:qn.PENDING,final:a,final_sse_message:a},{streamId:r.frontend_uuid??crypto.randomUUID()}),void 0,"ingestInitialEntries")}},[e])},Pme=()=>{const e=uo();return f.useCallback((t,n)=>{t&&e.setState(r=>{const s=r.entries[t],a=YD(r,t);if(a&&a.promise&&a.abortController&&!a.abortController.signal.aborted&&ne.error("Attempting to mutate entries while stream is active"),!s||!n)return r;const i=n(s);return i?{...r,entries:{...r.entries,[t]:i}}:r},void 0,"mutateEntry")},[e])},MQe=()=>{const e=uo();return f.useCallback((t,n,{terminateStream:r=!0}={})=>{t&&e.setState(s=>{if(!t)return s;yQe(s,t)&&r&&ne.error("Attempting to mutate entries while stream is active");const i=s.threads.findIndex(p=>p.id===t);if(i===-1)return s;const l=s.threads[i];if(!l)return s;const u=l.entryIds.map(p=>s.entries[p]).filter(p=>p!=null),d=n?.(u);if(!d)return s;const m=Array.from(s.threads);return m.splice(i,1,{...l,entryIds:d.map(p=>p.backend_uuid)}),{...s,entries:{...s.entries,...d.reduce((p,h)=>(p[h.backend_uuid]=h,p),{})},threads:m}},void 0,"mutateEntries")},[e])};function wZt(e){const t=uo();return YD(t.getState(),e)}function kQe(e){const t=uo(),n=Object.values(t.getState().erroredStreams),r=n.length;for(let s=r-1;s>=0;s--){const a=n[s];if(a.entryId===e)return a}}const Ome=I.memo(({middlewares:e})=>{const t=uo();return f.useLayoutEffect(()=>{t.getState().actions.setMiddlewares(e)},[e,t]),null});Ome.displayName="MiddlewareRegistry";function Lme(){const e=uo();return f.useCallback(t=>e.getState().streams[t]?.timer,[e])}function Dme(){const e=uo();return f.useCallback(()=>e.getState().activeStreams.length>0,[e])}const wS=e=>e?{author_id:SYe(e),author_image:MYe(e),author_username:EYe(e),bookmarkState:AYe(e),collection:jYe(e),contextUUID:vYe(e),expiry_time:OYe(e)??void 0,first_query:_Ye(e),focus:wYe(e),frontendContextUUID:xYe(e),mode:TYe(e)??void 0,parent_info:kYe(e)??void 0,personalized:NYe(e)??void 0,privacy_state:LYe(e)??void 0,rwToken:dme({backend_uuid:e.backend_uuid,read_write_token:e.read_write_token,context_uuid:e.context_uuid}),sources:CYe(e)??void 0,text_completed:!1,thread_access:IYe(e)??void 0,thread_url_slug:RYe(e),title:bYe(e),updated_datetime:PYe(e)}:Xue,nP=e=>({forkCount:e?.fork_count??0,likeCount:e?.like_count??0,viewCount:e?.view_count??0,userLikes:e?.user_likes??!1}),Fme={fork_count:0,like_count:0,view_count:0,user_likes:!1};function C0({entries:e,threads:t,streams:n},r,s){const a=r?n[r]:void 0;if(a&&a.threadId&&(s=a.threadId),s){const i=t.find(l=>l.id===s);if(i){const l=i.entryIds.map(c=>e[c]).filter(c=>c!=null);return a&&!a.entryId&&a.placeholderChunk&&l.push(a.placeholderChunk),{results:l,currentStreamId:r,currentThreadId:s}}}return{results:a?.placeholderChunk?[a.placeholderChunk]:[],currentStreamId:r,currentThreadId:s}}const TQe=({streamStore:e})=>{const t=pi()((r,s)=>({results:[],resultsLength:0,firstResult:void 0,lastResult:void 0,inFlight:!1,inFlightLatest:!1,inFlightEntry:void 0,isReadOnly:!1,socialStats:{forkCount:0,likeCount:0,viewCount:0,userLikes:!1},actions:{setResults:a=>{const i=a[0],l=nP(i?.social_info??Fme),c={inFlight:a.some(u=>un.isStatusPending(u)),inFlightLatest:a.length>0&&un.isStatusPending(a[a.length-1]),inFlightEntry:a.find(u=>un.isStatusPending(u))};r({results:a,firstResult:i,lastResult:a[a.length-1],inFlight:c.inFlight,inFlightLatest:c.inFlightLatest,inFlightEntry:c.inFlightEntry,socialStats:l,resultsLength:a.length},void 0)},setCurrentStreamId:a=>{const i=s(),l=C0(e.getState(),a,i.currentThreadId);i.actions.setResults(l.results),r({currentStreamId:l.currentStreamId,currentThreadId:l.currentThreadId},void 0)},clearCurrentStreamId:()=>{r({currentStreamId:void 0},void 0);const a=s(),i=C0(e.getState(),void 0,a.currentThreadId);a.actions.setResults(i.results),r({currentStreamId:i.currentStreamId,currentThreadId:i.currentThreadId},void 0)},setCurrentThreadId:a=>{r({currentThreadId:a},void 0);const i=s(),l=i.currentStreamId,c=Object.values(e.getState().streams).find(d=>d.threadId===a);c?c.id.description!==l&&i.actions.setCurrentStreamId(c.id.description):i.actions.clearCurrentStreamId();const u=C0(e.getState(),s().currentStreamId,a);i.actions.setResults(u.results),r({currentStreamId:u.currentStreamId,currentThreadId:u.currentThreadId},void 0)},clearCurrentThreadId:()=>{r({currentThreadId:void 0},void 0);const a=s(),i=C0(e.getState(),a.currentStreamId,void 0);a.actions.setResults(i.results),r({currentStreamId:i.currentStreamId,currentThreadId:i.currentThreadId},void 0)}}})),n=e.subscribe(({entries:r,threads:s,streams:a})=>C0({entries:r,threads:s,streams:a},t.getState().currentStreamId,t.getState().currentThreadId),r=>{t.getState().actions.setResults(r.results),t.setState({currentStreamId:r.currentStreamId,currentThreadId:r.currentThreadId},void 0)});return{store:t,clearSubscriptions:()=>{n()}}},{Context:NQe,useStore:jQe,useSelector:AQe,useTrackedState:IQe}=Db("ResultsContext"),RQe=AQe,Vt=IQe,PQe=({children:e})=>{const t=uo(),[{store:n,clearSubscriptions:r}]=f.useState(()=>TQe({streamStore:t}));return f.useEffect(()=>r,[r]),o.jsx(NQe.Provider,{value:n,children:e})},OQe=()=>{const{firstResult:e}=Vt();return f.useMemo(()=>wS(e),[e])};function LQe(e){return e.results.find(t=>un.isStatusPending(t))}const DQe=e=>We({queryKey:["navigationResults",e],queryFn:()=>Promise.resolve({}),enabled:!1}),H5=()=>{const e=jQe(),t=MQe();return f.useCallback(n=>{const r=e.getState().currentThreadId;t(r,n)},[t,e])};function hi(){const{firstResult:{backend_uuid:e,context_uuid:t,read_write_token:n}={}}=Vt();return f.useMemo(()=>dme({context_uuid:t,read_write_token:n}),[t,n,e])}const pn=["list_user_collections",{}],Vc="list_collection_threads",Ou="__temp__";async function FQe({contextUUID:e,updatedAccess:t,rwToken:n,callback:r,reason:s}){try{const i=await(await se.POST("/rest/thread/update_thread_access",s,{body:{context_uuid:e??"",updated_access:t,read_write_token:n??""}}))?.data;r?.(i?.access)}catch(a){ne.error(a),r?.(a)}}var S0={},PK;function UQe(){if(PK)return S0;PK=1,Object.defineProperty(S0,"__esModule",{value:!0}),S0.parse=i,S0.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function i(p,h){const g=new a,y=p.length;if(y<2)return g;const v=h?.decode||d;let x=0;do{const b=p.indexOf("=",x);if(b===-1)break;const _=p.indexOf(";",x),w=_===-1?y:_;if(b>w){x=p.lastIndexOf(";",b-1)+1;continue}const C=l(p,x,b),S=c(p,b,C),E=p.slice(C,S);if(g[E]===void 0){let M=l(p,b+1,w),k=c(p,w,M);const A=v(p.slice(M,k));g[E]=A}x=w+1}while(x<y);return g}function l(p,h,g){do{const y=p.charCodeAt(h);if(y!==32&&y!==9)return h}while(++h<g);return g}function c(p,h,g){for(;h>g;){const y=p.charCodeAt(--h);if(y!==32&&y!==9)return h+1}return g}function u(p,h,g){const y=g?.encode||encodeURIComponent;if(!e.test(p))throw new TypeError(`argument name is invalid: ${p}`);const v=y(h);if(!t.test(v))throw new TypeError(`argument val is invalid: ${h}`);let x=p+"="+v;if(!g)return x;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);x+="; Max-Age="+g.maxAge}if(g.domain){if(!n.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);x+="; Domain="+g.domain}if(g.path){if(!r.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);x+="; Path="+g.path}if(g.expires){if(!m(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);x+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(x+="; HttpOnly"),g.secure&&(x+="; Secure"),g.partitioned&&(x+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":x+="; Priority=Low";break;case"medium":x+="; Priority=Medium";break;case"high":x+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"none":x+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return x}function d(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function m(p){return s.call(p)==="[object Date]"}return S0}UQe();var dN={};const BQe=(e,t)=>{try{let n=new URL("https://www.perplexity.ai");return typeof window>"u"?t&&dN.NEXTAUTH_UNSAFE_TRUST_HOST_HEADERS?n=new URL(`https://${t}`):dN.NEXTAUTH_URL&&(n=new URL(dN.NEXTAUTH_URL)):n=new URL(window.location.href),new URL(e,n).hostname===n.hostname}catch(n){return ne.warn(n),!1}},VQe=({redirect:e,hostname:t})=>{const n=typeof e=="string"?e:e?.[0];return!n||typeof n!="string"?"/":BQe(n,t)?n:"/"},ZD="pplx.chosen-locale",z2="pplx.is-incognito",Ume="pplx.is-discover-interest-box-dismissed",Bme="pplx.is-enterprise-ad-dismissed",rP="pplx.la-status",$Qe="pplx.visitor-id",Vme="pplx.mweb-splash-page-dismissed",$me="pplx.is-autosuggest-disabled",Wme="pplx.homepage-widgets-disabled",Hme="pplx.source-selection-v3",zme="pplx.sports-ios-notification-cta",OK="pplx.prefers-metric",Gme="pplx.welcome-back-gate-impressions",qme="pplx.share-gate-impressions",Kme="pplx.sidebar-connectors-ad-dismissed",Yme="pplx.is-student-referral-banner-dismissed",Qme="pplx.is-student-space-upsell-dismissed",Xme="pplx.student-space-upsell-impressions",Zme="pplx.default-search-session",Jme="pplx.utm-source",epe="pplx.pt",tpe="pplx.personal-search-badge-seen",npe="pplx.tasks-settings-seen",sP="pplx.search-mode",rpe="pplx.search-models-v4",spe="pplx.max-assistant-mode-enabled",Fr=400,WQe=7;function fN(...e){z5("[email_signin_flow] ",...e)}function z5(...e){const t=new Date().toISOString();ne.log(`[${t}] `,...e)}function ape(...e){const t=new Date().toISOString();ne.warn(`[${t}] `,...e)}const HQe=e=>{Zt(ZD,e,{expires:Fr})},zQe=()=>jn(ZD),GQe=()=>{lm(ZD)},qQe=e=>{Zt(z2,String(e),{})},KQe=(e,t)=>{Zt(Vme,String(e),{expires:t})},YQe=e=>{Zt(Ume,String(e),{expires:Fr})},QQe=e=>{Zt(rP,e,{})},XQe=e=>{Zt(Bme,String(e),{expires:Fr})},ZQe=e=>{Zt($me,String(e),{expires:Fr})},JQe=e=>{Zt(Wme,String(e),{expires:Fr})},eXe=e=>{Zt(Gme,String(e),{expires:Fr})},tXe=e=>{Zt(qme,String(e),{expires:Fr})},nXe=e=>{Zt(zme,String(e),{expires:Fr})},mN=(e,t)=>{const n=`${Hme}-${t}`;Zt(n,JSON.stringify(e),{expires:WQe})},rXe=e=>{const t=`${Hme}-${e}`,n=jn(t);return n?JSON.parse(n):null},sXe=()=>!(jn(Nx)??!0),Fb=()=>jn($Qe)??null,aXe=e=>{Zt(Kme,String(e),{expires:Fr})},oXe=()=>jn("pplx.has-discovered-space-mentions")==="true",iXe=()=>{Zt("pplx.has-discovered-space-mentions","true",{expires:Fr})},lXe=e=>{Zt(Yme,String(e),{expires:4})},cXe=e=>{Zt(Qme,String(e),{expires:Fr})},uXe=e=>{Zt(Xme,String(e),{expires:Fr})},ope=()=>rie().queryCount>30,JD=()=>{const e=jn(tpe);if(!e)return{sidebar:!1,settingsSidebar:!1,personalize:!1};try{return JSON.parse(e)}catch{return{sidebar:!1,settingsSidebar:!1,personalize:!1}}},dXe=(e,t)=>{const r={...JD(),[e]:t};Zt(tpe,JSON.stringify(r),{expires:Fr})},fXe=()=>jn(npe)==="true",mXe=e=>{Zt(npe,String(e),{expires:Fr})},pXe=e=>{Zt(Zme,e)},hXe=()=>jn(Zme),gXe=e=>{Zt(Jme,e)},yXe=()=>jn(Jme),vXe=()=>jn(epe),xXe=e=>{Zt(epe,e)},CZt=async({reason:e})=>{const{data:t,error:n}=await se.GET("/rest/enterprise/previous-subscription",e,{timeoutMs:Pe({productionMs:2e3})});if(n)throw new Ce("API_CLIENTS_ERROR",{cause:n,details:{reason:e}});return t},bXe=async({source:e,locale:t,headers:n,reason:r})=>{try{const{data:s,error:a}=await se.POST("/rest/enterprise/customer-portal",r,{body:{origin:e,locale:t},timeoutMs:7500,headers:{...n,"Content-Type":"application/json"}});if(a)throw new Ce("API_CLIENTS_ERROR",{cause:a,details:{reason:r}});if(s.status!=="success")throw new Ce("API_CLIENTS_ERROR",{cause:a,details:{reason:r}});return s.url}catch(s){return ne.error(s),null}},_Xe=async({interval:e,subscriptionTier:t,origin:n,locale:r,reason:s})=>{const a=g5(),i=Fb();try{const{data:l,error:c}=await se.POST("/rest/enterprise/checkout-session",s,{body:{referral_code:null,discount_code:null,origin:n,tier:e,locale:r,visitor_id:i,subscription_tier:t},timeoutMs:3500,headers:{...a?{"Screen-Dimensions":a}:{}}});if(c)throw new Ce("API_CLIENTS_ERROR",{cause:c,details:{reason:s}});return l}catch(l){return ne.error(l),null}},wXe=async({interval:e,subscriptionTier:t,origin:n,locale:r,collectionMethod:s,billingAddress:a,reason:i})=>{const l=g5();try{const{data:c,error:u}=await se.POST("/rest/enterprise/subscription",i,{body:{collection_method:s,origin:n,locale:r,subscription_interval:e,subscription_tier:t,billing_address:a},timeoutMs:1e4,headers:{...l?{"Screen-Dimensions":l}:{}}});if(u)throw new Ce("API_CLIENTS_ERROR",{cause:u,details:{reason:i}});return c}catch(c){return ne.error(c),null}};var LK;(function(e){e.ON_PLATFORM="on_platform",e.OFF_PLATFORM="off_platform"})(LK||(LK={}));const G5=async({headers:e,reason:t})=>{const n={organization:void 0,org_user:void 0,is_in_organization:!1,pending_invitation:null};try{const{data:r,error:s}=await se.GET("/rest/enterprise/user/organization",t,{headers:e,timeoutMs:Pe({productionMs:2e3}),numRetries:1});if(s)throw new Ce("API_CLIENTS_ERROR",{cause:s,details:{reason:t}});return r.status!=="success",r}catch(r){return ne.error(r),n}},ipe=async({email:e,headers:t,reason:n})=>{if(!e)throw new Error("No email");const r=e.split("@"),s=r.length>=2?r[r.length-1]:null;if(!s)throw new Error(`No domain extracted from ${e}`);return CXe({domain:s,headers:t,reason:n})},CXe=async({domain:e,headers:t,reason:n})=>{try{const{data:r,error:s}=await se.GET("/rest/enterprise/organization/domain/{domain}",n,{headers:t,timeoutMs:3e3,numRetries:1,params:{path:{domain:e}},reason:n});if(s)throw new Ce("API_CLIENTS_ERROR",{cause:s,details:{reason:n}});if(r?.status!=="success")throw new Error("Failed to get organization from domain");return r?.organization??null}catch(r){return ne.error(`Failed to get organization from domain for ${e}`,r),null}},SZt=async({headers:e,query:t,reason:n})=>{try{const r=t?.["user-limit"]??2e4,s=t?.["user-offset"]??0,a=t?.["invite-limit"]??2e4,i=t?.["invite-offset"]??0,{data:l,error:c}=await se.GET("/rest/enterprise/user/organization/users",n,{params:{query:{"user-limit":r,"user-offset":s,"invite-limit":a,"invite-offset":i}},headers:e,timeoutMs:Pe({productionMs:2e3,clientSideMs:1e4}),numRetries:1});if(c)throw new Ce("API_CLIENTS_ERROR",{cause:c,details:{reason:n}});if(l.status!=="success")throw new Ce("API_CLIENTS_ERROR",{cause:c,details:{reason:n}});return{userList:l?.user_list??[],hasNextUserPage:l?.has_next_user_page??!1,totalUsers:l?.total_users??0,inviteList:l?.invite_list??[],hasNextInvitePage:l?.has_next_invite_page??!1,totalInvites:l?.total_invites??0}}catch(r){return ne.error("Failed to get organization users",r),null}},SXe=20,EXe=1,EZt=async({page:e=EXe,limit:t=SXe,emailFilter:n,reason:r,headers:s})=>{const a=await se.GET("/rest/enterprise/user/organization/members",r,{params:{query:{page:e,limit:t,"email-filter":n??null}},timeoutMs:Pe({productionMs:5e3}),headers:s});if(a.error)throw a.error;return a.data},lpe=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await se.GET("/rest/enterprise/organization/subscription/refresh",t,{headers:e,timeoutMs:4e3});if(r)throw new Ce("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return{subscriptionStatus:n?.subscription_status??null}}catch(n){return ne.error(n),null}},MZt=async({reason:e})=>{try{const{data:t,error:n}=await se.GET("/rest/enterprise/user/organization/seat-info",e,{timeoutMs:2e3});if(n)throw new Ce("API_CLIENTS_ERROR",{cause:n,details:{reason:e}});return t}catch(t){return ne.error(t),null}};async function kZt({orgUuid:e,headers:t,reason:n,prefersDark:r}){const s=await se.GET("/rest/enterprise/organization/{org_uuid}/insights/embed-url",n,{params:{path:{org_uuid:e},query:{prefersDark:r}},headers:t,timeoutMs:Pe({productionMs:5e3}),numRetries:1});if(s.error){ne.error("Failed to fetch Omni insights embed URL",{url:`/rest/enterprise/organization/${e}/insights/embed-url`,error:s.error,status:s.response.status,statusText:s.response.statusText});return}return s.data}const TZt=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await se.GET("/rest/enterprise/organization/premium-secure-eligibility",t,{headers:e,timeoutMs:Pe({productionMs:2e3}),numRetries:1});if(r)throw new Ce("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return n}catch(n){return ne.error(n),null}},NZt=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await se.POST("/rest/enterprise/organization/premium-secure-billing-update",t,{headers:{...e,"Content-Type":"application/json"},timeoutMs:Pe({productionMs:2e3}),numRetries:1});if(r)throw new Ce("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return n}catch(n){return ne.error(n),null}},jZt=async({headers:e,reason:t})=>{try{const n=await se.GET("/rest/enterprise/organization/subscription-info",t,{headers:e,timeoutMs:Pe({productionMs:2e3}),numRetries:1});if(n.error)throw n.error;return n.data}catch(n){return ne.error("Failed to get org subscription info",n),null}},cpe=async({uuid:e,success:t,reason:n})=>{try{if((await se.POST("/rest/sse/perplexity_connector_auth_response",n,{body:{result:{tool_uuid:e,success:t}},backOffTime:100,numRetries:1,headers:{"Content-Type":"application/json"}})).data?.status!=="success")throw new Error("Failed to post perplexity connector auth response");return!0}catch(r){return ne.error("Failed to post perplexity connector auth response",r),!1}},AZt=async({domainUuid:e,enabled:t,reason:n})=>{const{data:r,error:s}=await se.PUT("/rest/enterprise/organization/domains/{domain_uuid}/jit-provisioning",n,{params:{path:{domain_uuid:e}},body:{enabled:t},timeoutMs:Pe({productionMs:2e3}),headers:{"Content-Type":"application/json"}});if(s)throw new Ce("API_CLIENTS_ERROR",{cause:s,details:{reason:n,domainUuid:e,enabled:t}});return r},IZt=e=>["get_prices",{subscription_tier:e}],q5=()=>["get_user_settings",{}],RZt=()=>["get_user_site_instructions",{}],aP=()=>["get_user_profile",{}],MXe=()=>["get_user_promotions",{}],kXe=()=>["get_government_origin",{}],TXe=e=>["get_special_profile",{profile_name:e}],NXe=()=>["get_homepage_upsells",{}],jXe=()=>["get_ntp_upsells",{}],PZt=e=>["get_related_pages",{uuid:e}],Tc=(e="you")=>["list_feed",{topic:e}],upe=()=>["discover_topics",{}],my=()=>["userOrgData",{}],eF=e=>["get_collection",{collection_slug:e.slice(-22)}],OZt=()=>["shoppingOrders",{}],G2=()=>["userTryOnPhoto",{}],mf=()=>["shoppingTryOnBackgroundGeneration"],pN=e=>["productTryOn",{productImageUrl:e}],q2="getOrganizationUsers",LZt=e=>e?[q2,{query:e}]:[q2],DZt=e=>e?[q2,"members",e]:[q2,"members"],AXe=e=>["get_thread_by_uuid",{uuid:e}],IXe=e=>["get_article_by_uuid",{uuid:e}],FZt=e=>["get_article_by_slug",{slug:e}],hN=()=>["customer_shopping_info",{}],tF=e=>["articleResults",{frontend_context_uuid:e}],DK=e=>["article-slug",e],RXe=(e,t=!1)=>[t?"list_file_directory_infinite":"list_file_directory",e.file_repository_type,e.owner_id],K5=(e,t,n,r=0,s,a=!1)=>[...RXe({file_repository_type:e,owner_id:t},a),n,...a?[]:[r],s],dpe="connector-files",fpe="connector-files-infinite",mpe=(e,t=!1)=>[t?fpe:dpe,e],PXe=e=>["get_sharepoint_sites_infinite",e??{}],UZt=()=>["get_filters",{}],nF=e=>e?["memories",e]:["memories"],BZt=(e={})=>["hotelBookings",e],VZt=e=>["pro_perks_codes",e],$Zt=()=>["pro_perks"],WZt=()=>["customer_billing_info",{}],HZt=()=>["travel-tile-data"],rF=(e,t)=>["file_exists",e,...t?[t]:[]],Bw=e=>["download-image-url",...e?[e]:[]],zZt=()=>["notifications-preferences"],Vp=e=>["entry-feedback",e],sF=e=>["user-task",e],CS=e=>["user-tasks",...e?[e]:[]],OXe=()=>["academic-tile-data"],LXe=()=>["academic-primer-queries"],DXe=()=>["check-edu-institution"],fv=()=>["list_spaces_mentions"],FXe=()=>["upgrade-subscription-preview"],UXe=()=>["subscription-changes"],BXe=()=>["task_shortcuts_mentions"],GZt=e=>["task_shortcuts_copy",e],VXe=e=>["task_shortcuts_paste",e],Ku=()=>["app-notifications"],$Xe=()=>[...Ku(),"unread-count"],qZt=()=>["braintree-subscription-details"],ppe="get_repository_upload_states",WXe=e=>[ppe,e],KZt=()=>["get_seat_info"],hpe="space-file-errors",HXe=e=>[hpe,e],zXe={orgUser:void 0,organization:void 0,isEnterprise:!1,pendingInvitation:null,refetch:kn,isLoading:!1,isInitialLoading:!1,isSuccess:!1};function _n({shouldRefetchOnMount:e=!0,reason:t}){const n=rt(),{data:r,refetch:s,fetchStatus:a,isLoading:i,isSuccess:l}=We({enabled:n,queryKey:my(),queryFn:()=>G5({reason:t}),placeholderData:zXe,refetchOnMount:e});return f.useMemo(()=>({orgUser:r?.org_user,isAdmin:r?.org_user?.role==="ADMIN",organization:r?.organization,isEnterprise:r?.is_in_organization??!1,pendingInvitation:r?.pending_invitation??null,refetch:s,isLoading:a==="fetching",isInitialLoading:i,isSuccess:l}),[r?.is_in_organization,r?.org_user,r?.organization,r?.pending_invitation,a,i,l,s])}function Y5({shouldRefetchOnMount:e=!0,reason:t}){const n=rt(),{data:r,isFetching:s}=We({enabled:n,queryKey:my(),queryFn:()=>G5({reason:t}),refetchOnMount:e});return f.useMemo(()=>({isEnterprise:r?.is_in_organization??!1,isFetching:s}),[r?.is_in_organization,s])}function GXe({reason:e}){const t=rt(),n=f.useRef(void 0),{data:r,status:s}=We({enabled:t,queryKey:my(),queryFn:()=>G5({reason:e})}),a=f.useMemo(()=>s==="success"&&r?.organization?.uuid?(n.current=r.organization.uuid,r.organization.uuid):n.current??void 0,[r,s]);return f.useMemo(()=>({uuid:a}),[a])}const gpe=({currentAccessLevel:e,onClick:t,isCollection:n,isPage:r,spaceIsOrgPinned:s=!1,addOrgPinnedSpace:a,deleteOrgPinnedSpace:i,reason:l,hideLabels:c=!1,isCollectionOwner:u=!1})=>{const{$t:d}=Z(),m=Z(),{device:{isIOS:p,isAndroid:h}}=At(),{isEnterprise:g,organization:y}=_n({reason:l}),{firstResult:{collection_info:v,sources:{sources:x}={}}={}}=Vt(),b=n?y?.settings?.public_collection_sharing_allowed??!0:r?y?.settings?.public_page_sharing_allowed??!0:y?.settings?.public_thread_sharing_allowed??!0,_=x?.includes(bl.factset),w=f.useMemo(()=>n&&u?[{label:m.formatMessage({defaultMessage:"Share via link",id:"oJFaPCNcIw"}),text:m.formatMessage({defaultMessage:"Link share",id:"5CBpesC8V9"}),onClick:()=>i?.(),active:!s},{label:m.formatMessage({defaultMessage:"Pinned for everyone in org",id:"BCLJqQMHbj"}),text:m.formatMessage({defaultMessage:"Pinned",id:"fWZYP5U4xZ"}),onClick:()=>a?.(),active:s}]:void 0,[a,i,m,n,u,s]),C=f.useMemo(()=>[{label:c?void 0:"",text:d({defaultMessage:"Owner Only",id:"RUPRkBML7X"}),icon:Mx,show:!1,accessLevel:bt.OWNER_ONLY},{label:c?void 0:d({defaultMessage:"Only the author can view",id:"ZKx/MMPXAk"}),text:d(n?{defaultMessage:"Only invited members",id:"mm5vL8ueCo"}:{defaultMessage:"Private",id:"viXE3205/2"}),icon:Mx,show:!r,onClick:()=>t(bt.PRIVATE_READ),active:e===bt.PRIVATE_READ,accessLevel:bt.PRIVATE_READ,testId:"access-level-private"},{label:c?void 0:d({defaultMessage:"Anyone in your Space can view",id:"8i8H9TisQU"}),text:d({defaultMessage:"Space",id:"0ah2udCSKF"}),icon:eo,onClick:()=>t(bt.COLLECTION_READ),active:e===bt.COLLECTION_READ,show:!n&&!r&&!!v?.uuid,accessLevel:bt.COLLECTION_READ,testId:"access-level-space"},{label:c?void 0:d({defaultMessage:"Anyone in your organization can view",id:"T2yBpbP3mu"}),text:d({defaultMessage:"Anyone in my org with the link",id:"ah50gEdYbM"}),icon:yu,onClick:()=>t(bt.ORG_READ),active:e===bt.ORG_READ,show:g&&(!r||b),accessLevel:bt.ORG_READ,testId:"access-level-org",subMenu:w},{label:c?void 0:d({defaultMessage:"Anyone with the link",id:"KL1VgUyLuG"}),text:d({defaultMessage:"Anyone with the link",id:"KL1VgUyLuG"}),icon:p?db:h?YRe:Pv,onClick:()=>t(bt.PUBLIC_READ),active:e===bt.PUBLIC_READ,show:b&&!_,accessLevel:bt.PUBLIC_READ,testId:"access-level-public"}],[d,v?.uuid,e,_,c,h,n,g,p,r,t,b,w]),S=C.find(E=>E.accessLevel===e)||null;return f.useMemo(()=>({accessLevelMenuItems:C,selectedAccessMenuItem:S}),[C,S])},YZt=e=>e?[bt.ORG_READ,bt.PUBLIC_READ,bt.PUBLIC_PUBLISHED].includes(e):!1,qXe=e=>e?[bt.OWNER_ONLY,bt.PRIVATE_READ].includes(e):!0,ype=e=>e?[bt.PUBLIC_READ,bt.PUBLIC_PUBLISHED,bt.ORG_READ,bt.COLLECTION_READ].includes(e):!1,KXe=e=>e?[bt.PUBLIC_READ,bt.PUBLIC_PUBLISHED].includes(e):!1,YXe=e=>{switch(e){case bt.PUBLIC_PUBLISHED:case bt.PUBLIC_READ:return Pv;case bt.COLLECTION_READ:return eo;case bt.ORG_READ:return yu;case bt.PRIVATE_READ:case bt.OWNER_ONLY:return Mx;default:return null}},FK=e=>{switch(e){case bt.PUBLIC_READ:case bt.PUBLIC_PUBLISHED:return"public";case bt.ORG_READ:return"organization";case bt.COLLECTION_READ:return"collection";case bt.PRIVATE_READ:case bt.OWNER_ONLY:return"private";default:return"private"}};function aF({threadAccess:e,contextUUID:t,rwToken:n,collectionSlug:r,reason:s}){const{trackEvent:a}=Ne(),i=rt(),l=ht(),c=H5(),u=ype(e),d=f.useCallback((h,g)=>{!t||!n||!i||e===h||FQe({contextUUID:t,updatedAccess:h,rwToken:n,reason:s,callback:y=>{if(y===h){if(c(v=>{if(v)return v.map(x=>({...x,thread_access:y}))}),e&&a("thread privacy changed",{oldPrivacy:FK(e),newPrivacy:FK(y),contextUUID:t}),r){const v=[Vc,{collection_slug:r.slice(-22)}];l.invalidateQueries({queryKey:v})}g?.(y)}}})},[t,n,e,i,c,a,r,l,s]),m=f.useCallback(h=>{!i||u||(a("click share thread to space"),d(bt.COLLECTION_READ,h))},[i,u,d,a]),p=f.useCallback(h=>{!i||!u||(a("click make thread private"),d(bt.PRIVATE_READ,h))},[i,u,d,a]);return f.useMemo(()=>({isShareable:u,currentAccess:e,onShareThreadToSpace:m,onMakeThreadPrivate:p,handleAccessChange:d}),[u,d,p,m,e])}function f1(){return f1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f1.apply(null,arguments)}function vpe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var QXe=f.useLayoutEffect,XXe=function(t){var n=I.useRef(t);return QXe(function(){n.current=t}),n},UK=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},ZXe=function(t,n){var r=I.useRef();return I.useCallback(function(s){t.current=s,r.current&&UK(r.current,null),r.current=n,n&&UK(n,s)},[n])},BK={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},JXe=function(t){Object.keys(BK).forEach(function(n){t.style.setProperty(n,BK[n],"important")})},VK=JXe,ha=null,$K=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function eZe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),ha||(ha=document.createElement("textarea"),ha.setAttribute("tabindex","-1"),ha.setAttribute("aria-hidden","true"),VK(ha)),ha.parentNode===null&&document.body.appendChild(ha);var s=e.paddingSize,a=e.borderSize,i=e.sizingStyle,l=i.boxSizing;Object.keys(i).forEach(function(p){var h=p;ha.style[h]=i[h]}),VK(ha),ha.value=t;var c=$K(ha,e);ha.value=t,c=$K(ha,e),ha.value="x";var u=ha.scrollHeight-s,d=u*n;l==="border-box"&&(d=d+s+a),c=Math.max(d,c);var m=u*r;return l==="border-box"&&(m=m+s+a),c=Math.min(m,c),[c,u]}var WK=function(){},tZe=function(t,n){return t.reduce(function(r,s){return r[s]=n[s],r},{})},nZe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],rZe=!!document.documentElement.currentStyle,sZe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=tZe(nZe,n),s=r.boxSizing;if(s==="")return null;rZe&&s==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var a=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),i=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:a,borderSize:i}},aZe=sZe;function oF(e,t,n){var r=XXe(n);f.useLayoutEffect(function(){var s=function(i){return r.current(i)};if(e)return e.addEventListener(t,s),function(){return e.removeEventListener(t,s)}},[])}var oZe=function(t,n){oF(document.body,"reset",function(r){t.current.form===r.target&&n(r)})},iZe=function(t){oF(window,"resize",t)},lZe=function(t){oF(document.fonts,"loadingdone",t)},cZe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],uZe=function(t,n){var r=t.cacheMeasurements,s=t.maxRows,a=t.minRows,i=t.onChange,l=i===void 0?WK:i,c=t.onHeightChange,u=c===void 0?WK:c,d=vpe(t,cZe),m=d.value!==void 0,p=f.useRef(null),h=ZXe(p,n),g=f.useRef(0),y=f.useRef(),v=function(){var _=p.current,w=r&&y.current?y.current:aZe(_);if(w){y.current=w;var C=eZe(w,_.value||_.placeholder||"x",a,s),S=C[0],E=C[1];g.current!==S&&(g.current=S,_.style.setProperty("height",S+"px","important"),u(S,{rowHeight:E}))}},x=function(_){m||v(),l(_)};return f.useLayoutEffect(v),oZe(p,function(){if(!m){var b=p.current,_=b.value;requestAnimationFrame(function(){_!==b.value&&v()})}}),iZe(v),lZe(v),f.createElement("textarea",f1({},d,{onChange:x,ref:h}))},xpe=f.forwardRef(uZe);const bpe=I.memo(({text:e})=>o.jsx(D,{variant:"tiny",children:o.jsx("span",{className:"text-caution",children:e})}));bpe.displayName="FormError";const Ub=I.memo(({label:e,subtitle:t,errorText:n,isOptional:r=!1,withMargin:s=!0,optionalLabel:a="optional",testId:i})=>e||n||t?o.jsxs("div",{className:B({"mb-sm":s}),"data-test-id":i,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[(e||t)&&o.jsx("label",{htmlFor:e,children:o.jsx("div",{className:"gap-y-xs flex flex-col",children:e&&o.jsxs("div",{className:"gap-x-xs flex",children:[o.jsx(D,{variant:"smallBold",className:"select-none",children:e}),r&&o.jsx(D,{variant:"small",color:"light",children:`(${a})`})]})})}),n&&o.jsx(bpe,{text:n})]}),t&&o.jsx(D,{variant:"small",color:"light",children:t})]}):null);Ub.displayName="FormItemHeader";function py(e){const t=f.useRef(void 0);return f.useEffect(()=>{t.current=e},[e]),t.current}class ra{static isEnterKey(t){return t.code==="Enter"||t.key==="Enter"||t.keyCode===13}static isEnterKeyWithoutShift(t){return this.isEnterKey(t)&&!t.shiftKey}static isArrowDown(t){return t.key==="ArrowDown"}static isArrowUp(t){return t.key==="ArrowUp"}static isEscapeKey(t){return t.key==="Escape"}static isTabKey(t){return t.key==="Tab"}static isOnlySlashKey(t){return t.key==="/"&&!t.metaKey&&!t.ctrlKey&&!t.altKey}static isCtrlOrCmdJ(t){return(t.metaKey||t.ctrlKey)&&t.key==="j"}}const m1=(e,t)=>{if(ra.isEnterKeyWithoutShift(e)){if(t.isComposing||e.keyCode===229){e.preventDefault();return}if(t.isMobileUserAgent||t.allowEnterNewlines)return;e.preventDefault()}t.onKeyDown?.(e)},iF=e=>{e(!0)},lF=e=>{setTimeout(()=>{e(!1)},0)};var Zf;(function(e){e.INLINE="inline",e.LABEL="label"})(Zf||(Zf={}));const dZe=({onClear:e})=>o.jsx(Te,{icon:Rt,pill:!0,onClick:e,size:Kt.small}),fZe=["email","tel"],Pr=I.memo(({type:e,className:t,wrapperClassName:n,value:r,name:s,maxLength:a,errorText:i,errorPlacement:l=Zf.INLINE,disabled:c=!1,required:u=!1,autoFocus:d=!1,placeholder:m="",rightItems:p=ue,onChange:h,onClear:g,onBlur:y,onFocus:v,onPaste:x,onKeyDown:b,isLoading:_,inlineEditBlock:w,label:C,subtitle:S,isOptional:E,isMobileUserAgent:M,labelMargin:k=!0,testId:A,variant:R,pill:O=!0,disable1pass:L,ClearIcon:P=dZe,enterKeyHint:N,size:T,ref:j,colorVariant:F="default",min:U,max:V,spellCheck:$})=>{const z=py(c),Q=f.useRef(null),[Y,W]=f.useState(!1),[X,G]=f.useState(!1),J=f.useRef(Y);J.current=Y,f.useEffect(()=>{!M&&d&&Q.current?.focus()},[M,Q,d]),f.useEffect(()=>{z!==c&&!c&&!M&&d&&setTimeout(()=>{Q.current?.focus()},200)});const q=f.useMemo(()=>B({"border-r mr-sm pr-xs border-subtler":p.length!=0}),[p.length]),te=f.useMemo(()=>{const Ee=(()=>{switch(F){case"default":return"bg-base dark:bg-subtler";case"subtle":return"bg-subtle";default:Gt(F)}})(),je=B("w-full outline-none focus:outline-none focus:ring-subtler font-sans flex items-center","text-foreground caret-super selection:bg-super/50 dark:selection:bg-super/10 dark:selection:text-super",Ee,"border border-subtler  focus:ring-1 placeholder-quieter","duration-200 transition-all",{"ring-subtler ring-1":Y,"rounded-t-[32px] rounded-b-[32px]":O,"rounded-lg":!O},t),Me=B({"py-xs px-sm text-xs placeholder:text-xs":T==="xs","py-sm px-sm text-sm placeholder:text-sm":T==="sm","py-lg px-xl text-lg placeholder:text-base":T==="lg","pl-[40px]":e==="search","!font-mono md:text-base":R==="monospace","!text-3xl !placeholder:text-3xl !font-medium":R==="page-title","py-sm md:text-sm px-md placeholder:text-sm":!T&&!R}),Ye=B({"pr-xs":p.length===0&&T==="xs","pr-sm":p.length===0&&T==="sm","pr-md":p.length===0&&!T,"pr-lg":p.length===0&&T==="lg","pr-[49px] md:pr-[59px]":p.length===1,"pr-[128px] md:pr-[138px]":p.length===2});return B(je,Me,Ye)},[Y,O,t,T,e,R,p.length,F]),re=!!i,ae=!re&&!!a&&!!r&&r.length>a,fe=f.useMemo(()=>e==="search"?o.jsx("div",{className:"absolute left-3 flex items-center rounded-l-lg",children:o.jsx(D,{color:"light",children:o.jsx(ce,{icon:Rs})})}):null,[e]),de=f.useMemo(()=>{const Ee=l===Zf.INLINE&&re;return o.jsxs("div",{className:B("right-sm gap-sm absolute flex items-center rounded-full"),children:[_?o.jsx(D,{color:"light",className:"mr-xs",children:o.jsx($r,{})}):null,Ee&&o.jsx(H,{className:"mr-sm",children:o.jsx(D,{color:"red",variant:"tiny",children:i})}),ae&&o.jsx(H,{className:"mr-sm",children:a&&r&&o.jsx(D,{color:"red",variant:"tiny",children:a-r.length})}),g&&o.jsx("div",{className:q,children:o.jsx(P,{onClear:g,inputValue:r})}),p.map((je,Me)=>o.jsx(he,{...je.buttonProps,size:je.buttonProps.size,disabled:je.buttonProps.disabled||re||ae,pill:!0},Me))]})},[l,re,_,i,ae,a,r,g,q,P,p]),ve=f.useCallback(()=>{if(Q.current){const Ee=Q.current.value.length;Q.current.focus();try{Q.current.setSelectionRange(Ee,Ee)}catch{}}},[]),_e=f.useCallback(Ee=>{v?.(Ee.nativeEvent),W(!0)},[v]),Se=f.useCallback(Ee=>{y?.(Ee.nativeEvent),W(!1)},[y]);f.useImperativeHandle(j,()=>{const Ee=Q.current;return Ee.focusAtEnd=ve,Ee.isFocused=()=>J.current,Ee.inLine=()=>!0,Ee.append=je=>{Q.current&&(Q.current.value+=je)},Ee.scrollToEnd=()=>{Q.current&&(Q.current.scrollTop=Q.current.scrollHeight)},Ee.trim=()=>{Q.current&&(Q.current.value=Q.current.value.trim())},Ee.element=()=>Q.current,Ee},[ve]),f.useEffect(()=>{d&&!M&&ve()},[d,ve,M]);const be=f.useCallback(Ee=>{h?.(Ee.target.value)},[h]),me=f.useCallback(Ee=>{m1(Ee.nativeEvent,{isMobileUserAgent:M,isComposing:X,onKeyDown:b})},[b,M,X]),Ae=l===Zf.LABEL?i:void 0;return o.jsxs("div",{className:n,children:[o.jsx(Ub,{label:C,subtitle:S,isOptional:E,errorText:Ae,withMargin:k}),o.jsx("div",{className:"rounded-full",children:o.jsxs("div",{className:"relative flex items-center",children:[o.jsx("input",{type:e,ref:Q,autoFocus:d,placeholder:m,disabled:c,value:r,required:u,name:s??C,onChange:be,onKeyDown:me,onCompositionStart:()=>iF(G),onCompositionEnd:()=>lF(G),onBlur:Se,onFocus:_e,onPaste:x,className:te,autoComplete:fZe.includes(e??"")?e:"off","data-test-id":A,"data-1p-ignore":L,enterKeyHint:N,min:U,max:V,spellCheck:$,maxLength:a}),fe,de]})}),w&&o.jsx("div",{className:"mt-sm flex justify-end",children:w})]})});Pr.displayName="Input";function cF(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Q5="Switch",[mZe,QZt]=co(Q5),[pZe,hZe]=mZe(Q5),_pe=f.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:i,disabled:l,value:c="on",onCheckedChange:u,form:d,...m}=e,[p,h]=f.useState(null),g=Vn(t,_=>h(_)),y=f.useRef(!1),v=p?d||!!p.closest("form"):!0,[x,b]=Ji({prop:s,defaultProp:a??!1,onChange:u,caller:Q5});return o.jsxs(pZe,{scope:n,checked:x,disabled:l,children:[o.jsx(dn.button,{type:"button",role:"switch","aria-checked":x,"aria-required":i,"data-state":Epe(x),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:g,onClick:Ft(e.onClick,_=>{b(w=>!w),v&&(y.current=_.isPropagationStopped(),y.current||_.stopPropagation())})}),v&&o.jsx(Spe,{control:p,bubbles:!y.current,name:r,value:c,checked:x,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});_pe.displayName=Q5;var wpe="SwitchThumb",Cpe=f.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=hZe(wpe,n);return o.jsx(dn.span,{"data-state":Epe(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});Cpe.displayName=wpe;var gZe="SwitchBubbleInput",Spe=f.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const i=f.useRef(null),l=Vn(i,a),c=cF(n),u=c5(t);return f.useEffect(()=>{const d=i.current;if(!d)return;const m=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&h){const g=new Event("click",{bubbles:r});h.call(d,n),d.dispatchEvent(g)}},[c,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Spe.displayName=gZe;function Epe(e){return e?"checked":"unchecked"}var yZe=_pe,vZe=Cpe;const Ro=f.memo(({active:e=!1,disabled:t,id:n,text:r,testId:s,onChange:a,size:i="default",switchProps:l,ref:c,...u})=>{const d=B("rounded-full relative bg-base dark:bg-inverse dark:text-foreground",i==="default"?"size-4":"size-2.5","before:content-[''] before:duration-150 dark:before:shadow-md before:absolute before:inset-0 before:rounded-full before:bg-base before:dark:bg-white",{"before:opacity-20":t}),m=B("flex rounded-full duration-150 shadow-inset-xs",i==="default"?"w-9  p-three":"w-5 h-3.5 p-0.5","data-[state=checked]:justify-end","data-[state=checked]:bg-super dark:data-[state=checked]:bg-super/85","data-[state=unchecked]:bg-inverse/45 dark:data-[state=unchecked]:bg-inverse/20",{"opacity-50":t});return o.jsxs("div",{className:B("group/switch gap-sm flex cursor-default items-center",{"cursor-pointer":!t}),"data-testid":s,ref:c,...u,children:[o.jsx(yZe,{asChild:!0,checked:e,onCheckedChange:t?void 0:a,id:n,disabled:t,className:"group/switch gap-sm flex items-center","data-testid":s,style:{WebkitTapHighlightColor:"transparent"},...l,children:o.jsx(ge.button,{className:m,layout:!0,layoutRoot:!0,children:o.jsx(vZe,{asChild:!0,children:o.jsx(ge.div,{className:d,layout:"position",transition:{layout:{type:"spring",duration:.2,bounce:.3}}})})})}),r&&o.jsx(D,{variant:"smallBold",className:B("mr-sm whitespace-nowrap duration-150",{"cursor-pointer":!t},{"group-hover/switch:text-foreground":!e&&!t}),htmlFor:n,as:"label",color:e?"super":"light",children:r})]})});Ro.displayName="Switch";const xZe=({wrapperClassName:e,variant:t="default",size:n="default",errorText:r,className:s,value:a,maxLength:i,errorMessage:l,disabled:c=!1,hasShadow:u=!1,autoFocus:d=!1,placeholder:m="",rightItems:p=ue,onChange:h,onClear:g,onClick:y,onBlur:v,onFocus:x,onKeyDown:b,onPaste:_,isLoading:w,inlineEditBlock:C,label:S,subtitle:E,isOptional:M,minRows:k,isMobileUserAgent:A,allowEnterNewlines:R=!1,testId:O,textAreaClassname:L,ref:P})=>{const N=py(c),T=f.useRef(null),[j,F]=f.useState(!1),[U,V]=f.useState(!1),$=f.useRef(j);$.current=j,f.useEffect(()=>{!A&&d&&T.current?.focus()},[A,T,d]),f.useEffect(()=>{N!==c&&!c&&!A&&d&&setTimeout(()=>{T.current?.focus()},200)});const z=f.useMemo(()=>B({"border-r mr-sm pr-xs border-subtler":p.length!=0}),[p.length]),Q=B("overflow-auto max-h-[50vh] outline-none w-full flex items-center","text-foreground font-sans resize-none","bg-transparent placeholder-quieter","caret-super selection:bg-super/50 dark:selection:bg-super/10 dark:selection:text-super",L),Y=f.useMemo(()=>{const be=(()=>{switch(t){case"subtle":return"bg-subtle";case"default":return"bg-base dark:bg-subtler";default:Gt(t)}})(),me=B("w-full focus:ring-subtler flex items-center",be,"border border-subtler  focus:ring-1 rounded-md","duration-200 transition-all",{"ring-subtler ring-1":j,"shadow-sm":u},s),Ae=B({"py-sm text-sm px-md":n==="default","text-base p-md pb-xl":n==="large"}),Ee=B({"pr-md":p.length===0});return B(me,Ae,Ee)},[j,u,s,n,p.length,t]),W=l!==void 0,X=!W&&!!i&&!!a&&a.length>i,G=f.useMemo(()=>o.jsxs("div",{className:"right-sm gap-sm mb-xs pb-xs absolute bottom-0 flex items-center rounded-full",children:[w?o.jsx(D,{color:"light",children:o.jsx(ce,{icon:QRe,className:"aspect-square animate-spin"})}):null,W&&o.jsx(H,{className:"mr-sm",children:o.jsx(D,{color:"red",variant:"tiny",children:l})}),X&&o.jsx(H,{className:"mr-sm",children:i&&a&&o.jsx(D,{color:"red",variant:"tiny",children:i-a.length})}),g!==void o.jsx("div",{className:z,children:o.jsx(Te,{icon:Rt,pill:!0,onClick:g,size:Kt.small})}),p.map((be,me)=>be.type=="toggleButton"?o.jsx(Ro,{...be.buttonProps,disabled:be.buttonProps.disableOverride?!1:be.buttonProps.disabled||W||X},me):o.jsx(he,{...be.buttonProps,size:Kt.small,disabled:be.buttonProps.disabled||W||X,pill:!0},me))]}),[l,w,i,g,p,a,z,W,X]),J=f.useCallback(()=>{if(T.current){const be=T.current.value.length;T.current.focus(),T.current.setSelectionRange(be,be)}},[]),q=f.useCallback(be=>{if(!T?.current)return!0;const me=T.current,{selectionStart:Ae,selectionEnd:Ee,value:je}=me;if(Ae!==Ee)return!1;const Me=document.createElement("div"),Ye=window.getComputedStyle(me);Me.style.position="absolute",Me.style.visibility="hidden",Me.style.whiteSpace=Ye.whiteSpace,Me.style.wordWrap=Ye.wordWrap,Me.style.font=Ye.font,Me.style.padding=Ye.padding,Me.style.border=Ye.border,Me.style.width=me.offsetWidth+"px",Me.style.lineHeight=Ye.lineHeight,document.body.appendChild(Me);try{const at=parseInt(Ye.lineHeight)||24,it=je.substring(0,Ae);Me.textContent=it;const ke=Me.offsetHeight;return be==="first"?ke<=at:(Me.textContent=je,Me.offsetHeight-ke<at)}finally{document.body.removeChild(Me)}},[]),te=f.useCallback(be=>{x?.(be.nativeEvent),F(!0)},[x]),re=f.useCallback(be=>{v?.(be.nativeEvent),F(!1)},[v]),ae=f.useCallback(be=>{y?.(be.nativeEvent)},[y]),fe=f.useCallback(be=>{h?.(be.target.value)},[h]),de=f.useCallback(be=>{m1(be.nativeEvent,{isMobileUserAgent:A,isComposing:U,allowEnterNewlines:R,onKeyDown:b})},[b,U,A,R]),ve=f.useCallback(()=>iF(V),[V]),_e=f.useCallback(()=>lF(V),[V]),Se=f.useCallback(be=>{_?.(be.nativeEvent)},[_]);return f.useImperativeHandle(P,()=>{const be=T.current;return be.focusAtEnd=J,be.inLine=q,be.isFocused=()=>$.current,be.append=me=>{T.current&&(T.current.value+=me)},be.scrollToEnd=()=>{T.current&&(T.current.scrollTop=T.current.scrollHeight)},be.trim=()=>{T.current&&(T.current.value=T.current.value.trim())},be},[J,q]),f.useEffect(()=>{d&&!A&&J()},[d,J,A]),o.jsxs("div",{"data-test-id":O,children:[o.jsx(Ub,{label:S,subtitle:E,isOptional:M,errorText:r}),o.jsx("div",{className:B("rounded-3xl",e),children:o.jsxs("div",{className:"relative flex items-center",children:[o.jsx("div",{className:Y,children:o.jsx(xpe,{ref:T,autoFocus:d,placeholder:m,disabled:c,minRows:k,value:a,onClick:ae,onChange:fe,name:S,onKeyDown:de,onBlur:re,onCompositionStart:ve,onCompositionEnd:_e,onFocus:te,onPaste:Se,className:Q,autoComplete:"off","data-testid":O})}),o.jsx("div",{className:"absolute bottom-0 m-px flex justify-between rounded-b-md px-[6px]",style:{width:"calc(100% - 2px)"},children:G})]})}),C&&o.jsx("div",{className:"mt-sm flex justify-end",children:C})]})},Aa=I.memo(xZe),bZe=new Set(["super","textColor","max","orange"]),_Ze=new Set(["red"]),wZe=e=>bZe.has(e)?"defaultInverted":_Ze.has(e)?"white":e==="maxBorder"?"max":e==="superBorder"?"super":"default",Mpe=I.memo(({text:e,variant:t="super",boxProps:n,textProps:r})=>{const s=wZe(t);return o.jsx(H,{variant:t,...n,className:B("px-xs rounded-badge -mt-px box-border inline-flex",n?.className),children:o.jsx(D,{variant:"tiny",className:"leading-4",color:s,inline:!0,...r,children:e})})});Mpe.displayName="Badge";const CZe=768,kpe=`(max-width: ${CZe}px)`;function HK(){return typeof window>"u"?!1:window.matchMedia(kpe).matches}function fa(e={}){const t=jt(),{device:{isWindowsApp:n}}=At(),r=f.useMemo(()=>!!(n&&t?.includes(s1)),[n,t]),{evaluateOnInit:s=!1}=e,a=Tpe(),i=SZe(),[l,c]=f.useState(()=>a||i?!0:s?HK():!1);return f.useEffect(()=>{if(typeof window>"u")return;const u=window.matchMedia(kpe);function d(){c(u.matches)}return u.addEventListener("change",d),()=>{u.removeEventListener("change",d)}},[a]),f.useEffect(()=>{s||c(HK())},[s]),l&&!r}function Tpe(e=!1){const{device:{isMobile:t}}=At();return t??e}function SZe(e=!1){const{device:{isAndroid:t}}=At();return t??e}function xe(e={}){const t=jt(),{device:{isWindowsApp:n}}=At(),r=fa(e),s=f.useMemo(()=>!!(n&&t?.includes(s1)),[n,t]),a=f.useMemo(()=>r&&!s,[r,s]),i=Tpe();return f.useMemo(()=>({isMobileStyle:a,isMobileUserAgent:i}),[a,i])}const hy=I.memo(({children:e,className:t,disabled:n,onClick:r,onMouseDown:s,onMouseEnter:a,onMouseMove:i,testId:l,rounded:c,href:u,focused:d,disableHoverStyles:m=!1,target:p="_blank",tooltipText:h,tooltipLayout:g="right",tooltipDelayDuration:y,active:v=!1,role:x="menuitem"})=>{const b=f.useRef(null),_=fa(),w=o.jsx("div",{className:B("duration-quick relative select-none rounded-lg transition-all","px-sm py-1.5 md:h-full",{"hover:bg-subtler cursor-pointer":!n&&!m,"cursor-pointer":!n&&m,rounded:c,"bg-subtler":d}),children:e}),C=B("group/item md:h-full",t);f.useEffect(()=>{b.current&&d&&b.current.scrollIntoView({behavior:"instant",block:"nearest"})},[d]);const S=x==="menuitemradio"||x==="menuitemcheckbox"?v?"true":"false":void 0;return u&&!n?o.jsx(Ge,{href:u,target:p,className:C,onClick:r,"data-testid":l,children:w}):o.jsx(bn,{tooltipText:h,showTooltip:!_&&!!h,tooltipLayout:g,delayDuration:y,offset:12,asChild:!0,children:o.jsx("div",{role:x,"aria-checked":S,ref:b,"data-testid":l,className:C,onClick:n?void 0:r,onMouseDown:n?void 0:s,onMouseEnter:n?void 0:a,onMouseMove:n?void 0:i,children:w})})});hy.displayName="MenuItemWrapper";const EZe=({icon:e,avatar:t,destructive:n})=>{if(t)return t;if(!e)return null;const r=B({"!text-caution":n},"opacity-90");return o.jsx(ce,{icon:e,className:r,size:"sm"})},MZe=/\bgap(-[xy])?-/,kZe={[Kt.small]:"extraSmall",[Kt.tiny]:"tiny"},gy=I.memo(({customDescriptionNode:e,customTextNode:t,text:n,description:r,icon:s,avatar:a,label:i,badge:l,link:c,onLinkClick:u,size:d=Kt.small,color:m="default",badgeVariant:p="super",destructive:h,leftElement:g,rightElement:y,bottomElement:v,textTrailingElement:x,className:b="",preserveLeftIconSpace:_=!1,textClassName:w})=>{const C=s||a;return o.jsxs("div",{className:B("flex",b,MZe.test(b)?"":"gap-sm"),children:[(C||_)&&o.jsx("div",{className:"flex",children:o.jsx(D,{color:m,className:"pt-two flex size-5 justify-center leading-none",children:!_||C?o.jsx(EZe,{icon:s,avatar:a,destructive:h}):null})}),g,o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex flex-col gap-y-0.5",children:[t||o.jsxs(D,{variant:kZe[d]??"baseSemi",color:m,className:B("flex items-center gap-x-1.5",{"!text-caution":h}),children:[o.jsx("span",{className:w,children:n}),x,l&&o.jsx(Mpe,{text:l,variant:p})]}),e||r&&o.jsx(D,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:r}),c&&o.jsx(D,{variant:"tinyRegular",color:"super",onClick:u,children:c}),v]}),i&&o.jsx(D,{className:"mt-one whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:i})]}),y]})});gy.displayName="BaseMenuItem";const uF=I.memo(e=>{const{active:t,show:n=!0,className:r,rounded:s,color:a="default",badgeVariant:i="super",disabled:l,href:c,onClick:u,onMouseDown:d,onMouseEnter:m,onMouseMove:p,testId:h,rightElement:g,focused:y,preserveRightElementSpace:v=!0,disableHoverStyles:x=!1,target:b,tooltipText:_,tooltipLayout:w,tooltipDelayDuration:C,role:S}=e;if(!n)return null;let E=a;l?E="ultraLight":t&&(E="super");const M=g??o.jsx(D,{color:t?"super":E,className:"size-5",children:o.jsx(ce,{icon:Sr,size:"sm",className:t?"opacity-100":"opacity-0","aria-hidden":!t})});return o.jsx(hy,{className:r,disabled:l,onClick:u,onMouseDown:d,onMouseEnter:m,onMouseMove:p,testId:h,rounded:s,href:c,focused:y,disableHoverStyles:x,target:b,tooltipText:_,tooltipLayout:w,tooltipDelayDuration:C,role:S,active:t,children:o.jsx(gy,{...e,color:E,badgeVariant:i,rightElement:v?M:g})})});uF.displayName="DefaultMenuItem";const Npe=I.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,selected:d,active:m,disableHoverStyles:p=!1,tooltipText:h,tooltipLayout:g,tooltipDelayDuration:y,iconVariant:v="checkbox",disableActiveStyles:x=!1}=e;let b=r;s?b="ultraLight":(m||d)&&!x&&(b="super");const _=f.useMemo(()=>v==="check"?o.jsx(D,{color:d&&!x?"super":b,className:"size-5",children:o.jsx(ce,{icon:Sr,size:"sm",className:d?"opacity-100":"opacity-0","aria-hidden":!d})}):o.jsx(D,{color:d&&!x?"super":b,children:o.jsx(ce,{icon:d?die:XRe,size:"sm"})}),[b,d,v,x]);return o.jsx(hy,{className:t,disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,rounded:n,disableHoverStyles:p,tooltipText:h,tooltipLayout:g,tooltipDelayDuration:y,children:o.jsx(gy,{...e,color:b,rightElement:_})})});Npe.displayName="MultiSelectMenuItem";const dF=I.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,selected:d,active:m,rightElement:p,disableHoverStyles:h=!1,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:v}=e;let x=r;s?x="ultraLight":(m||d)&&(x="super");const b=f.useMemo(()=>o.jsxs("div",{className:"gap-x-sm flex items-start pt-0.5",children:[p,o.jsx(Ro,{active:d,disabled:s,size:"small"})]}),[s,p,d]);return o.jsx(hy,{className:t,disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,rounded:n,disableHoverStyles:h,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:v,children:o.jsx(gy,{...e,color:x,rightElement:b})})});dF.displayName="ToggleMenuItem";const jpe=I.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,selected:d,active:m,showIconLeft:p=!1,disableHoverStyles:h=!1,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:v}=e;let x=r;(m||d)&&(x="super");const b=o.jsx(D,{color:d?x:"ultraLight",className:B("flex pt-0.5 leading-none",{"opacity-50":s}),children:o.jsx(ce,{icon:d?VI:ZRe,size:"sm"})});return o.jsx(hy,{className:t,disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,rounded:n,disableHoverStyles:h,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:v,children:o.jsx(gy,{...e,rightElement:p?void 0:b,leftElement:p?b:void 0})})});jpe.displayName="RadioMenuItem";const Ape=I.memo(e=>{const{text:t,show:n,className:r}=e;return n?o.jsxs(o.Fragment,{children:[o.jsx(H,{className:B("sm:mx-sm my-sm border-b first:hidden",r)}),t&&o.jsx(H,{variant:"background",className:"sm:mx-sm mt-xs mb-sm pr-sm",children:o.jsx(D,{className:"w-max",variant:"tinyMono",color:"light",children:t})})]}):null});Ape.displayName="MenuItemSeparator";const Ipe=I.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onMouseDown:a,onMouseEnter:i,onMouseMove:l,testId:c,submenu:u,active:d,disableHoverStyles:m=!1,isSubmenuOpen:p,onSubmenuOpen:h,onSubmenuClose:g,menuWidth:y="200px"}=e;let v=r;s?v="ultraLight":d&&(v="super");const x=f.useMemo(()=>o.jsx(D,{color:"light",children:o.jsx(ce,{icon:Kn,size:"sm"})}),[]),b=f.useMemo(()=>({className:"min-w-0",style:{width:y}}),[y]),_=f.useMemo(()=>({hasInteractiveContent:!0}),[]);return o.jsx(Jt,{isOpen:p,items:u,placement:"right-end",onOpen:h,onClose:g,isMobileStyle:!1,hoverOpen:!0,boxProps:b,popoverProps:_,children:o.jsx(hy,{className:t,disabled:s,onMouseDown:a,onMouseEnter:i,onMouseMove:l,testId:c,rounded:n,disableHoverStyles:m,children:o.jsx(gy,{...e,color:v,rightElement:x})})})});Ipe.displayName="NestedMenuItem";const Yc=I.memo(e=>{switch(e.type){case"default":{const{type:t,...n}=e;return o.jsx(uF,{...n,role:n.role||"menuitem"})}case"multiSelect":{const{type:t,...n}=e;return o.jsx(Npe,{...n,role:"menuitemcheckbox"})}case"toggle":{const{type:t,...n}=e;return o.jsx(dF,{...n,role:"menuitemcheckbox"})}case"radio":{const{type:t,...n}=e;return o.jsx(jpe,{...n,role:"menuitemradio"})}case"separator":{const{type:t,...n}=e;return o.jsx(Ape,{...n})}case"nested":{const{type:t,...n}=e;return o.jsx(Ipe,{...n})}case"custom":return o.jsx(o.Fragment,{children:e.children})}});Yc.displayName="MenuItem";var TZe=f.createContext(void 0);function X5(e){const t=f.useContext(TZe);return e||t||"ltr"}function NZe(e,[t,n]){return Math.min(n,Math.max(t,e))}function jZe(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var fF="ScrollArea",[Rpe,XZt]=co(fF),[AZe,gi]=Rpe(fF),Ppe=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...i}=e,[l,c]=f.useState(null),[u,d]=f.useState(null),[m,p]=f.useState(null),[h,g]=f.useState(null),[y,v]=f.useState(null),[x,b]=f.useState(0),[_,w]=f.useState(0),[C,S]=f.useState(!1),[E,M]=f.useState(!1),k=Vn(t,R=>c(R)),A=X5(s);return o.jsx(AZe,{scope:n,type:r,dir:A,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:m,onContentChange:p,scrollbarX:h,onScrollbarXChange:g,scrollbarXEnabled:C,onScrollbarXEnabledChange:S,scrollbarY:y,onScrollbarYChange:v,scrollbarYEnabled:E,onScrollbarYEnabledChange:M,onCornerWidthChange:b,onCornerHeightChange:w,children:o.jsx(dn.div,{dir:A,...i,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})})});Ppe.displayName=fF;var Ope="ScrollAreaViewport",Lpe=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=e,i=gi(Ope,n),l=f.useRef(null),c=Vn(t,l,i.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(dn.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Lpe.displayName=Ope;var lc="ScrollAreaScrollbar",Dpe=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=gi(lc,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=s,l=e.orientation==="horizontal";return f.useEffect(()=>(l?a(!0):i(!0),()=>{l?a(!1):i(!1)}),[l,a,i]),s.type==="hover"?o.jsx(IZe,{...r,ref:t,forceMount:n}):s.type==="scroll"?o.jsx(RZe,{...r,ref:t,forceMount:n}):s.type==="auto"?o.jsx(Fpe,{...r,ref:t,forceMount:n}):s.type==="always"?o.jsx(mF,{...r,ref:t}):null});Dpe.displayName=lc;var IZe=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=gi(lc,e.__scopeScrollArea),[a,i]=f.useState(!1);return f.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},d=()=>{c=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(da,{present:n||a,children:o.jsx(Fpe,{"data-state":a?"visible":"hidden",...r,ref:t})})}),RZe=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=gi(lc,e.__scopeScrollArea),a=e.orientation==="horizontal",i=J5(()=>c("SCROLL_END"),100),[l,c]=jZe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),f.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let m=u[d];const p=()=>{const h=u[d];m!==h&&(c("SCROLL"),i()),m=h};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,a,c,i]),o.jsx(da,{present:n||l!=="hidden",children:o.jsx(mF,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ft(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ft(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Fpe=f.forwardRef((e,t)=>{const n=gi(lc,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,i]=f.useState(!1),l=e.orientation==="horizontal",c=J5(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?u:d)}},10);return cg(n.viewport,c),cg(n.content,c),o.jsx(da,{present:r||a,children:o.jsx(mF,{"data-state":a?"visible":"hidden",...s,ref:t})})}),mF=f.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=gi(lc,e.__scopeScrollArea),a=f.useRef(null),i=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=$pe(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:p=>i.current=p};function m(p,h){return BZe(p,i.current,l,h)}return n==="horizontal"?o.jsx(PZe,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollLeft,h=zK(p,l,s.dir);a.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=m(p,s.dir))}}):n==="vertical"?o.jsx(OZe,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollTop,h=zK(p,l);a.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=m(p))}}):null}),PZe=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=gi(lc,e.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Vn(t,c,a.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(Bpe,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Z5(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,m)=>{if(a.viewport){const p=a.viewport.scrollLeft+d.deltaX;e.onWheelScroll(p),Hpe(p,m)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Y2(i.paddingLeft),paddingEnd:Y2(i.paddingRight)}})}})}),OZe=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=gi(lc,e.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Vn(t,c,a.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(Bpe,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Z5(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,m)=>{if(a.viewport){const p=a.viewport.scrollTop+d.deltaY;e.onWheelScroll(p),Hpe(p,m)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Y2(i.paddingTop),paddingEnd:Y2(i.paddingBottom)}})}})}),[LZe,Upe]=Rpe(lc),Bpe=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:m,...p}=e,h=gi(lc,n),[g,y]=f.useState(null),v=Vn(t,k=>y(k)),x=f.useRef(null),b=f.useRef(""),_=h.viewport,w=r.content-r.viewport,C=Ka(d),S=Ka(c),E=J5(m,10);function M(k){if(x.current){const A=k.clientX-x.current.left,R=k.clientY-x.current.top;u({x:A,y:R})}}return f.useEffect(()=>{const k=A=>{const R=A.target;g?.contains(R)&&C(A,w)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[_,g,w,C]),f.useEffect(S,[r,S]),cg(g,E),cg(h.content,E),o.jsx(LZe,{scope:n,scrollbar:g,hasThumb:s,onThumbChange:Ka(a),onThumbPointerUp:Ka(i),onThumbPositionChange:S,onThumbPointerDown:Ka(l),children:o.jsx(dn.div,{...p,ref:v,style:{position:"absolute",...p.style},onPointerDown:Ft(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),x.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),M(k))}),onPointerMove:Ft(e.onPointerMove,M),onPointerUp:Ft(e.onPointerUp,k=>{const A=k.target;A.hasPointerCapture(k.pointerId)&&A.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=b.current,h.viewport&&(h.viewport.style.scrollBehavior=""),x.current=null})})})}),K2="ScrollAreaThumb",Vpe=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Upe(K2,e.__scopeScrollArea);return o.jsx(da,{present:n||s.hasThumb,children:o.jsx(DZe,{ref:t,...r})})}),DZe=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=gi(K2,n),i=Upe(K2,n),{onThumbPositionChange:l}=i,c=Vn(t,m=>i.onThumbChange(m)),u=f.useRef(void 0),d=J5(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const m=a.viewport;if(m){const p=()=>{if(d(),!u.current){const h=VZe(m,l);u.current=h,l()}};return l(),m.addEventListener("scroll",p),()=>m.removeEventListener("scroll",p)}},[a.viewport,d,l]),o.jsx(dn.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ft(e.onPointerDownCapture,m=>{const h=m.target.getBoundingClientRect(),g=m.clientX-h.left,y=m.clientY-h.top;i.onThumbPointerDown({x:g,y})}),onPointerUp:Ft(e.onPointerUp,i.onThumbPointerUp)})});Vpe.displayName=K2;var pF="ScrollAreaCorner",FZe=f.forwardRef((e,t)=>{const n=gi(pF,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(UZe,{...e,ref:t}):null});FZe.displayName=pF;var UZe=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=gi(pF,n),[a,i]=f.useState(0),[l,c]=f.useState(0),u=!!(a&&l);return cg(s.scrollbarX,()=>{const d=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(d),c(d)}),cg(s.scrollbarY,()=>{const d=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(d),i(d)}),u?o.jsx(dn.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Y2(e){return e?parseInt(e,10):0}function $pe(e,t){const n=e/t;return isNaN(n)?0:n}function Z5(e){const t=$pe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function BZe(e,t,n,r="ltr"){const s=Z5(n),a=s/2,i=t||a,l=s-i,c=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,m=r==="ltr"?[0,d]:[d*-1,0];return Wpe([c,u],m)(e)}function zK(e,t,n="ltr"){const r=Z5(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,i=t.content-t.viewport,l=a-r,c=n==="ltr"?[0,i]:[i*-1,0],u=NZe(e,c);return Wpe([0,i],[0,l])(u)}function Wpe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Hpe(e,t){return e>0&&e<t}var VZe=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,l=n.top!==a.top;(i||l)&&t(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function J5(e,t){const n=Ka(e),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function cg(e,t){const n=Ka(t);su(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var $Ze=Ppe,WZe=Lpe,GK=Dpe,qK=Vpe;const Wi=I.memo(({children:e,orientation:t="vertical",showScrollIndicator:n=!0,thumbClassName:r="",className:s,viewportRef:a,viewportClassName:i,showIndicatorOnHover:l=!0,onScroll:c})=>{const d="before:content-[''] before:absolute before:top-[50%] before:left-[50%] before:translate-x-[-50%] before:translate-y-[-50%] before:w-[100%] before:h-[100%] before:min-w-[10px] before:min-h-[10px]"+" rounded-full bg-subtle duration-quick relative",m=B("flex flex-col p-px duration-150",{"data-[state=visible]:opacity-100":n,"pointer-events-none":!n,"opacity-0":l,"opacity-100":!l});return o.jsxs($Ze,{className:B("w-full overflow-hidden",s),children:[o.jsx(WZe,{className:B("size-full",i),ref:a,onScroll:c,children:e}),["vertical","both"].includes(t)&&o.jsx(GK,{forceMount:!0,orientation:"vertical",className:m,children:o.jsx(qK,{className:`!w-[5px] ${d} ${r}`})}),["horizontal","both"].includes(t)&&o.jsx(GK,{forceMount:!0,orientation:"horizontal",className:m,children:o.jsx(qK,{className:`!h-[5px] ${d} ${r}`})})]})}),ZZt=(e,t=10,n=250)=>{const[r,s]=f.useState(!0),[a,i]=f.useState(!1);return f.useEffect(()=>{const l=$s(()=>{if(e.current){const u=e.current.scrollLeft,d=e.current.scrollWidth,m=e.current.clientWidth,p=d-m;s(u<=t),i(u>=p-t)}},n,{leading:!0}),c=e.current;return c?.addEventListener("scroll",l),l(),()=>{c?.removeEventListener("scroll",l)}},[e,t,n]),f.useMemo(()=>({isScrolledToLeft:r,isScrolledToRight:a}),[r,a])},HZe=I.memo(({scrollRef:e,buttonProps:t,children:n,className:r})=>{const s=f.useCallback(()=>{e.current?.scrollTo({left:e.current?.scrollLeft-e.current?.scrollWidth/3,behavior:"smooth"})},[e]),a=f.useCallback(()=>{e.current?.scrollTo({left:e.current?.scrollLeft+e.current?.scrollWidth/3,behavior:"smooth"})},[e]);return o.jsxs(H,{className:r,children:[o.jsx(Te,{pill:!0,icon:fb,onClick:s,...t}),n,o.jsx(Te,{pill:!0,icon:Kn,onClick:a,...t})]})});HZe.displayName="ScrollAreaArrows";Wi.displayName="ScrollArea";const Md=I.memo(({items:e,grid:t,cols:n=1,disableScrollArea:r=!1,menuItemClassName:s="",disableHoverStyles:a=!1})=>{const i=f.useMemo(()=>t&&n>1?{display:"grid",gridTemplateColumns:`repeat(${n}, minmax(0, 1fr))`,gap:"1px"}:void 0,[t,n]),l=({children:c})=>i?o.jsx("div",{role:"menu",style:i,children:c}):r?o.jsx("div",{role:"menu",className:"p-xs flex flex-col gap-px",children:c}):o.jsx(Wi,{showIndicatorOnHover:!1,className:"p-xs",children:o.jsx("div",{role:"menu",className:"flex flex-col gap-px",children:c})});return o.jsx(l,{children:e.map((c,u)=>c.type==="separator"?o.jsx(Yc,{...c},u):o.jsx(Yc,{className:s,disableHoverStyles:a,...c},u))})});Md.displayName="Menu";const zpe={...E7},zZe=zpe.useInsertionEffect,GZe=zZe||(e=>e());function qZe(e){const t=f.useRef(()=>{});return GZe(()=>{t.current=e}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}var Q2=typeof document<"u"?f.useLayoutEffect:f.useEffect;function oP(){return oP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oP.apply(this,arguments)}let KK=!1,KZe=0;const YK=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+KZe++;function YZe(){const[e,t]=f.useState(()=>KK?YK():void 0);return Q2(()=>{e==null&&t(YK())},[]),f.useEffect(()=>{KK=!0},[]),e}const QZe=zpe.useId,Gpe=QZe||YZe,XZe=f.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:a,shift:i}},width:l=14,height:c=7,tipRadius:u=0,strokeWidth:d=0,staticOffset:m,stroke:p,d:h,style:{transform:g,...y}={},...v}=t,x=Gpe(),[b,_]=f.useState(!1);if(Q2(()=>{if(!s)return;di(s).direction==="rtl"&&_(!0)},[s]),!s)return null;const[w,C]=r.split("-"),S=w==="top"||w==="bottom";let E=m;(S&&i!=null&&i.x||!S&&i!=null&&i.y)&&(E=null);const M=d*2,k=M/2,A=l/2*(u/-8+1),R=c/2*u/4,O=!!h,L=E&&C==="end"?"bottom":"top";let P=E&&C==="end"?"right":"left";E&&b&&(P=C==="end"?"left":"right");const N=a?.x!=null?E||a.x:"",T=a?.y!=null?E||a.y:"",j=h||"M0,0"+(" H"+l)+(" L"+(l-A)+","+(c-R))+(" Q"+l/2+","+c+" "+A+","+(c-R))+" Z",F={top:O?"rotate(180deg)":"",left:O?"rotate(90deg)":"rotate(-90deg)",bottom:O?"":"rotate(180deg)",right:O?"rotate(-90deg)":"rotate(90deg)"}[w];return f.createElement("svg",oP({},v,{"aria-hidden":!0,ref:n,width:O?l:l+M,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[P]:N,[L]:T,[w]:S||O?"100%":"calc(100% - "+M/2+"px)",transform:[F,g].filter(U=>!!U).join(" "),...y}}),M>0&&f.createElement("path",{clipPath:"url(#"+x+")",fill:"none",stroke:p,strokeWidth:M+(h?0:1),d:j}),f.createElement("path",{stroke:M&&!h?v.fill:"none",d:j}),f.createElement("clipPath",{id:x},f.createElement("rect",{x:-k,y:k*(O?-1:1),width:l+M,height:l})))});function ZZe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(s=>s!==n))||[])}}}const JZe=f.createContext(null),eJe=f.createContext(null),tJe=()=>{var e;return((e=f.useContext(JZe))==null?void 0:e.id)||null},nJe=()=>f.useContext(eJe);function rJe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=Gpe(),a=f.useRef({}),[i]=f.useState(()=>ZZe()),l=tJe()!=null,[c,u]=f.useState(r.reference),d=qZe((h,g,y)=>{a.current.openEvent=h?g:void 0,i.emit("openchange",{open:h,event:g,reason:y,nested:l}),n?.(h,g,y)}),m=f.useMemo(()=>({setPositionReference:u}),[]),p=f.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return f.useMemo(()=>({dataRef:a,open:t,onOpenChange:d,elements:p,events:i,floatingId:s,refs:m}),[t,d,p,i,s,m])}function sJe(e){e===void 0&&(e={});const{nodeId:t}=e,n=rJe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[a,i]=f.useState(null),[l,c]=f.useState(null),d=s?.domReference||a,m=f.useRef(null),p=nJe();Q2(()=>{d&&(m.current=d)},[d]);const h=Nue({...e,elements:{...s,...l&&{reference:l}}}),g=f.useCallback(_=>{const w=Ea(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;c(w),h.refs.setReference(w)},[h.refs]),y=f.useCallback(_=>{(Ea(_)||_===null)&&(m.current=_,i(_)),(Ea(h.refs.reference.current)||h.refs.reference.current===null||_!==null&&!Ea(_))&&h.refs.setReference(_)},[h.refs]),v=f.useMemo(()=>({...h.refs,setReference:y,setPositionReference:g,domReference:m}),[h.refs,y,g]),x=f.useMemo(()=>({...h.elements,domReference:d}),[h.elements,d]),b=f.useMemo(()=>({...h,...r,refs:v,elements:x,nodeId:t}),[h,v,x,t,r]);return Q2(()=>{r.dataRef.current.floatingContext=b;const _=p?.nodesRef.current.find(w=>w.id===t);_&&(_.context=b)}),f.useMemo(()=>({...h,context:b,refs:v,elements:x}),[h,v,x,b])}class aJe{static detectOverflowOptions={padding:8};static offsetMiddleware=$L({mainAxis:4,crossAxis:0});static shiftMiddleware=jue({limiter:Aue(),...this.detectOverflowOptions});static flipMiddleware=Iue(this.detectOverflowOptions);static sizeMiddleware(t={matchTargetWidth:!1},n=!0){return Rue({...this.detectOverflowOptions,apply({availableHeight:r,rects:s,elements:a}){n&&(a.floating.style.maxHeight=`${r}px`),(t.matchTargetWidth??!0)&&(a.floating.style.width=`${s.reference.width}px`)}})}static defaultMiddleWare(t={avoidCollisions:!0,matchTargetWidth:!1}){const n=t.avoidCollisions??!0,r=t.avoidPositionCollisions!==void 0?t.avoidPositionCollisions:n,s=t.avoidSizeCollisions!==void 0?t.avoidSizeCollisions:n;return[this.offsetMiddleware,r&&this.shiftMiddleware,r&&this.flipMiddleware,this.sizeMiddleware({matchTargetWidth:t.matchTargetWidth},s)].filter(Boolean)}}const oJe=130,$o=I.memo(({content:e,contentClassName:t="",children:n,delayTime:r=200,isOpen:s,hoverOpen:a,placement:i="bottom-end",matchTargetWidth:l=!1,childrenClassName:c,testId:u,overlayProps:d,onOpen:m,onClose:p,disableAnimation:h,hasInteractiveContent:g=!1,avoidCollisions:y=!0,avoidPositionCollisions:v,avoidSizeCollisions:x,customFloatingUIOptions:b,disableShadow:_,floatingElementProps:w,arrowClassName:C,borderRadius:S="rounded-xl",sideOffset:E=4,forceDarkMode:M=!1})=>{const k=f.useRef(null),A=f.useMemo(()=>{const me=aJe.defaultMiddleWare({avoidCollisions:y,avoidPositionCollisions:v,avoidSizeCollisions:x,matchTargetWidth:l});return E!==4&&(me[0]=$L({mainAxis:E,crossAxis:0})),C&&me.push(Pue({element:k})),me},[y,v,x,l,C,E]),{refs:R,floatingStyles:O,placement:L,context:P}=sJe({strategy:"fixed",placement:i,middleware:A,whileElementsMounted:(...me)=>kue(...me),...b}),[N,T]=f.useState(!1),j=f.useRef(N),[F,U]=f.useState(!1),V=f.useRef(F),[$,z]=f.useState(!1),Q=s!==void 0,[Y,W]=f.useState(!1),X=f.useMemo(()=>Q?s:Y,[Q,s,Y]),G=f.useCallback(me=>{me.stopPropagation()},[]),J=f.useCallback(()=>{X||(m?.(),Q||W(!0))},[Q,X,m]),q=f.useCallback(()=>{z(me=>X&&!me?(p?.(),Q||W(!1),h?!1:(setTimeout(()=>{z(!1)},oJe),!0)):me)},[Q,X,p,h]),te=f.useCallback(()=>{X?q():J()},[q,J,X]),re=f.useCallback(()=>{setTimeout(()=>{!V.current&&!j.current&&q()},r)},[r,q,V,j]);f.useEffect(()=>{if(!a||!X||$)return;const me=setInterval(()=>{const Ae=R.reference.current,Ee=R.floating.current,je=Ae.matches(":hover"),Me=Ee.matches(":hover");!je&&j.current&&de(),!Me&&V.current&&_e(),!je&&!Me&&re()},250);return()=>clearInterval(me)},[$,X,re,a]);const ae=f.useCallback(()=>{setTimeout(()=>{if(Q&&p){p();return}q()},0)},[Q,p,q]),fe=f.useCallback(()=>{j.current=!0,T(!0),J()},[J]),de=f.useCallback(()=>{j.current=!1,T(!1),re()},[re]),ve=()=>{V.current=!0,U(!0)},_e=f.useCallback(()=>{V.current=!1,U(!1),re()},[re]),Se=f.useCallback(me=>{me.stopPropagation(),te()},[te]),be=f.useMemo(()=>({transform:"translateY(-1px)"}),[]);return o.jsxs(o.Fragment,{children:[o.jsx("span",{onMouseEnter:a?fe:void 0,onMouseLeave:a?de:void 0,ref:R.setReference,onMouseDown:G,onClick:a?void 0:Se,className:c,"data-test-id":u,children:n}),e?o.jsx(cy,{isOpen:X||$,onClose:ae,transparent:!0,childVariant:"clean",disableAnimation:h,delayClose:!1,...d,children:o.jsx("div",{className:"absolute inset-x-0 top-0","data-color-scheme":M?"dark":void 0,children:o.jsx("div",{className:"flex",ref:R.setFloating,onMouseEnter:a?ve:void 0,onMouseLeave:a?_e:void 0,onClick:me=>{g&&me.stopPropagation()},style:O,...w,children:o.jsxs(H,{variant:"background",className:B({"shadow-overlay":!_},"flex min-h-0 min-w-0","data-[placement=bottom-end]:origin-top-right data-[placement=bottom-start]:origin-top-left data-[placement=top-end]:origin-bottom-right data-[placement=top-start]:origin-bottom-left",{"duration-150":!h,"animate-out fade-out zoom-out-[0.97] ease-in":$&&!h,"p-xs animate-in fade-in zoom-in-[0.97] ease-out":!h},t,S),"data-placement":L,children:[e,C&&o.jsx(XZe,{ref:k,context:P,className:C,style:be})]})})})}):null]})});$o.displayName="Popover";const Jt=I.memo(({isOpen:e,hoverOpen:t=!1,children:n,items:r,placement:s,disabled:a=!1,grid:i,onOpen:l,title:c,onClose:u,isMobileStyle:d,boxProps:m,modalProps:p,popoverProps:h,cols:g=1,footer:y=null,menuItemClassName:v="",contentClassName:x="",wrapperClassName:b,header:_,alwaysShowChildren:w,size:C,showFooterOnMobile:S=!1})=>{const[E,M]=f.useState(!1),k=e!==void 0,A=k?e:E,R=f.useCallback(()=>{if(!A&&!a){const T=l?.()??!0;!k&&T&&M(!0)}},[a,k,l,A]),O=f.useCallback(()=>{A&&!a&&(u?.(),k||M(!1))},[a,k,u,A]),L=f.useMemo(()=>r.map(T=>({...T,size:C??(d?Kt.regular:void 0),onClick:j=>{!a&&"onClick"in T&&(T.onClick?.(j),T.type==="toggle"||T.type==="multiSelect"||O())}})),[a,O,r,C,d]),P=f.useMemo(()=>o.jsx(H,{className:B("flex max-h-[80vh] min-h-0 min-w-[160px] flex-col",{"max-w-[250px]":!i,"gap-two grid max-w-lg":i}),...m,children:o.jsxs("div",{className:"flex h-full flex-col",children:[_&&o.jsx(H,{className:"mb-sm mx-sm flex-shrink-0 border-b",children:_}),c&&o.jsx(H,{className:"mb-sm mx-sm flex-shrink-0 border-b",children:o.jsx(D,{variant:"smallBold",className:"py-sm mb-1",children:c})}),o.jsxs(Wi,{orientation:"vertical",showIndicatorOnHover:!1,className:"min-h-0 flex-1 overflow-auto",children:[o.jsx(Md,{items:L,grid:i,cols:g,menuItemClassName:v,disableScrollArea:!0}),y]})]})}),[m,g,y,i,_,L,v,c]);return r.every(T=>T.show===!1)?w?n:null:d?o.jsxs(o.Fragment,{children:[o.jsx(en,{variant:"bottom-left-sheet",actionList:ue,isOpen:A,onClose:O,footerContent:S&&y?y:void 0,footerClassname:S&&y?"!pt-0 pb-5 sticky bottom-0":void 0,wrapperClassname:S&&y?"!pb-0":void 0,...p,children:o.jsx(H,{className:"divide-y",children:o.jsx(Md,{items:L,grid:i,menuItemClassName:v})})}),o.jsx("span",{className:b,onClick:t?void 0:T=>{T.stopPropagation(),R()},children:n})]}):o.jsx($o,{...h,hoverOpen:t,isOpen:A,placement:s,onClose:O,onOpen:R,contentClassName:x,childrenClassName:b,content:P,hasInteractiveContent:!0,children:n})});Jt.displayName="DropDownMenu";const iJe=[{label:"Comet Assistant",value:"AGENT",description:"Use cases where Comet Assistant is acting on your behalf and does the wrong thing. For general Comet issues please use Comet Browser instead."},{label:"Comet Browser",value:"BROWSER",description:"General Comet UI/UX issues. For general Perplexity web issues please use Web instead."},{label:"Product",value:"PRODUCT",description:"General product features, UI/UX issues, or user experience problems"},{label:"AI",value:"AI",description:"Core AI model issues, accuracy problems, or response quality"},{label:"Enterprise",value:"ENTERPRISE",description:"Enterprise-specific features"},{label:"Platform",value:"PLATFORM",description:"Infrastructure, performance, or system-level issues"},{label:"Mobile",value:"MOBILE",description:"Mobile app functionality or design issues"},{label:"Search",value:"SEARCH",description:"Search functionality, results quality, or indexing problems"},{label:"Web",value:"WEB",description:"General Web UI/UX issues."}],lJe=({value:e,onSelect:t,options:n,placeholder:r="Select a category..."})=>{const a=n.find(c=>c.value===e)?.label||r,i=n.map(c=>({type:"default",text:c.label,tooltipText:c.description,onClick:()=>t(c.value),show:!0})),l={text:a,variant:"common",size:"small",trailingComponent:o.jsx(ce,{icon:Dn,size:"xs"}),extraCSS:"w-full justify-between border-subtler bg-base p-sm dark:border-subtle dark:bg-subtler"};return o.jsx(Jt,{items:i,isMobileStyle:!1,placement:"bottom-start",children:o.jsx(Te,{...l})})},cJe=({isOpen:e,onClose:t})=>{const[n,r]=f.useState(""),[s,a]=f.useState(""),[i,l]=f.useState(""),[c,u]=f.useState(!1),[d,m]=f.useState(null),{firstResult:{context_uuid:p,backend_uuid:h,expiry_time:g,collection_info:{slug:y}={}}={}}=Vt(),v=hi(),{handleAccessChange:x}=aF({contextUUID:p,rwToken:v,collectionSlug:y,reason:"Bug Report"}),{handleRemoveExpiry:b}=hYe({slugOrUUID:h}),_=async()=>{if(!n.trim()){m("Please describe the bug");return}u(!0),m(null);try{const C=mYe(window.location.href),S=await dYe(n,C,s,i);t(),S?.status==="success"&&S.linear_url&&window.open(S.linear_url,"_blank"),x(bt.PUBLIC_READ),g&&await b(),r(""),l("")}catch(C){ne.error("Failed to submit bug report",C),m("Failed to submit bug report. Please try again.")}finally{u(!1)}},w=()=>{r(""),l(""),a(""),m(null),t()};return o.jsx(en,{isOpen:e,onClose:w,title:"Report a Bug",variant:"large",actionList:[{text:"Cancel",onClick:w,variant:"common"},{text:c?"Submitting...":"Submit Bug Report",onClick:_,variant:"primary",disabled:c||!n.trim(),isLoading:c}],children:o.jsxs("div",{className:"space-y-md",children:[o.jsxs("div",{children:[o.jsx(D,{variant:"base",className:"mb-sm",children:"Category (optional)"}),o.jsx(lJe,{value:i,onSelect:l,options:iJe,placeholder:"Select a category..."})]}),o.jsxs("div",{children:[o.jsx(D,{variant:"base",className:"mb-sm",children:"Who should we assign this bug to? (optional)"}),o.jsx(Aa,{value:s,onChange:C=>a(C),placeholder:"Please provide the email address. E.g. johnny@perplexity.ai",className:"w-full",isMobileUserAgent:!1,isMobileStyle:!1,minRows:1})]}),o.jsxs("div",{children:[o.jsx(D,{variant:"base",className:"mb-sm",children:"Please describe the bug you encountered:"}),o.jsx(Aa,{value:n,onChange:C=>r(C),placeholder:"Describe what happened, steps to reproduce, and any other relevant details...",className:"w-full",isMobileUserAgent:!1,isMobileStyle:!1,minRows:1})]}),d&&o.jsx(D,{variant:"smallMono",color:"red",className:"text-sm",children:d})]})})};var zn;(function(e){e.MACOS="macos",e.WINDOWS="windows"})(zn||(zn={}));var br;(function(e){e.NEW_THREAD="NEW_THREAD",e.STOP_GENERATING="STOP_GENERATING",e.TOGGLE_INCOGNITO="TOGGLE_INCOGNITO",e.SHOW_SHORTCUTS="SHOW_SHORTCUTS",e.FOCUS_ASK_INPUT="FOCUS_ASK_INPUT",e.TOGGLE_DICTATION="TOGGLE_DICTATION",e.TOGGLE_V2V="TOGGLE_V2V"})(br||(br={}));const JZt="keyboard-shortcuts",qpe=(e,t,n=!1)=>[{type:br.NEW_THREAD,label:e.formatMessage({defaultMessage:"New Thread",id:"76XSxT3hV8"}),macos:["","K"],windows:t?["Ctrl","Shift","P"]:["Ctrl","I"],editable:!0,global:!0},{type:br.TOGGLE_V2V,label:e.formatMessage({defaultMessage:"Toggle Voice Mode",id:"ulahVrf1h4"}),macos:["","Shift","B"],windows:["Ctrl","Shift","B"],editable:!0,global:!0,requiresAuth:!0,windowsAppOnly:!0},{type:br.TOGGLE_DICTATION,label:e.formatMessage({defaultMessage:"Toggle Voice Dictation",id:"tWip/8rlIv"}),macos:["","D"],windows:["Ctrl","D"],editable:!1,windowsAppOnly:!0},{type:br.TOGGLE_INCOGNITO,label:e.formatMessage({defaultMessage:"Toggle Incognito",id:"YNMg3vd9IG"}),macos:["",";"],windows:["Ctrl",";"],editable:!1},{type:br.SHOW_SHORTCUTS,label:e.formatMessage({defaultMessage:"Show Shortcuts",id:"8o6rUVckYq"}),macos:["","/"],windows:["Ctrl","/"],editable:!1},{type:br.FOCUS_ASK_INPUT,label:e.formatMessage({defaultMessage:"Focus Ask Input",id:"RP5ybIk9wM"}),macos:["","J"],windows:["Ctrl","J"],editable:!1}].filter(s=>(!s.requiresAuth||n)&&(!s.windowsAppOnly||t)),uJe={Meta:"",Shift:"",ArrowUp:"",ArrowDown:"",ArrowLeft:"",ArrowRight:"",Enter:"",Period:".",Semicolon:";",Slash:"/",Escape:"Esc"},dJe={"":"Meta","":"Shift","":"ArrowUp","":"ArrowDown","":"ArrowLeft","":"ArrowRight","":"Enter"},fJe=(e,t=zn.MACOS)=>e==="Meta"?t===zn.WINDOWS?"Win":"":uJe[e]||e,QK=e=>e==="Win"?"Meta":dJe[e]||e,mJe=({label:e,keys:t})=>o.jsxs(D,{color:"light",className:"py-md flex place-content-between items-center",children:[o.jsx(D,{as:"dd",variant:"small",color:"light",className:"line-clamp-1 overflow-hidden text-clip",children:e}),o.jsx(H,{as:"dl",className:"space-x-two flex items-center",children:t.map(n=>o.jsx(H,{className:"px-xs flex h-5 min-w-5 items-center justify-center rounded border font-mono",children:n},n))})]}),Kpe=I.memo(({closeModal:e,isOpen:t})=>{const n=Z(),{device:{isMacOS:r,isWindowsApp:s}}=At(),a=rt(),i=r?zn.MACOS:zn.WINDOWS,l=f.useMemo(()=>qpe(n,s,a),[n,s,a]);return o.jsx(cy,{childVariant:"hide-chrome",isOpen:t,canOutsideClickClose:!0,onClose:e,children:o.jsx(H,{variant:"background",className:"relative w-[90vw] max-w-screen-sm overflow-hidden rounded-xl",children:o.jsxs(H,{variant:"subtler",className:"p-md inset-0",children:[o.jsx(D,{className:"mb-2",variant:"section-title",as:"h2",children:n.formatMessage({defaultMessage:"Keyboard Shortcuts",id:"nFkLBjIGMy"})}),o.jsx(H,{as:"dl",className:"divide-y",children:l.map(c=>o.jsx(mJe,{label:c.label,keys:c[i]},c.type))})]})})})});Kpe.displayName="KeyboardShortcutHelperModal";const pJe=async({reason:e})=>{try{const{data:t,error:n}=await se.GET("/rest/collections/list_recent",e);if(n)throw new Ce("API_CLIENTS_ERROR",{cause:n});return t.map(r=>({...r,link:r.link.replace(/^\/collections\//,"/spaces/")}))}catch(t){return ne.error("Failed to get recent collections.",t),ue}},hJe=async({headers:e={},params:t,reason:n})=>{const r=await se.GET("/rest/collections/list_user_collections",n,{params:{query:{limit:t.limit,offset:t.offset,version:ac}},timeoutMs:Pe(),headers:e});if(!r.response.ok||!r.data)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to list user collections",cause:r.error});return r.data},gJe=async({headers:e={},params:t,reason:n})=>{try{const{error:r,data:s}=await se.GET("/rest/collections/get_collection",n,{params:{query:t},headers:e,timeoutMs:Pe()});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get collection",cause:r});if(!s?.status||s?.status==="failed")throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get collection",cause:s});return s}catch(r){ne.error(r);return}},yJe=async({headers:e={},params:t,reason:n})=>{try{const{error:r}=await se.PUT("/rest/collections/{collection_uuid}/access",n,{params:{path:{collection_uuid:t.collection_uuid}},headers:e,body:{updated_access:t.updated_access},timeoutMs:Pe()});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to update collection access",cause:r})}catch(r){ne.error(r)}},eJt=async({headers:e={},params:t,reason:n})=>{try{const{error:r}=await se.POST("/rest/collections/{collection_uuid}/remove_user",n,{params:{path:{collection_uuid:t.collectionUUID}},body:{email:t.email},headers:e,timeoutMs:Pe()});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to remove user from collection",cause:r})}catch(r){ne.error(r)}},tJt=async({headers:e={},params:t,reason:n})=>{try{const{error:r,data:s}=await se.GET("/rest/collections/list_collection_threads",n,{params:{query:t},headers:e,timeoutMs:Pe()});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to list collection threads",cause:r});if(!s||!Array.isArray(s))throw new Ce("API_CLIENTS_ERROR",{message:"Failed to list collection threads",cause:s});return s}catch(r){return ne.error(r),[]}},nJt=async({reason:e})=>{try{const{error:t,data:n}=await se.GET("/rest/collections/invitations",e,{});if(t)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get invited collections",cause:t});return{collections:n.collections}}catch{return{collections:[]}}},Vw=async({params:e,reason:t})=>{try{const{error:n,data:r}=await se.POST("/rest/collections/upsert_thread_collection",t,{body:e});if(n)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to upsert thread collection",cause:n});if(!r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to upsert thread collection",cause:r});return r}catch{return}},rJt=async({params:e,reason:t})=>{try{const{error:n,data:r}=await se.POST("/rest/collections/invite_to_collection",t,{body:e,timeoutMs:Pe()});if(n)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to invite user to collection",cause:n});return r}catch{return}},XK=async({collectionUUID:e,entryUUID:t,reason:n})=>{try{const{error:r}=await se.DELETE("/rest/collections/remove_collection_thread",n,{params:{query:{collection_uuid:e,entry_uuid:t}}});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to remove thread from collection",cause:r})}catch{return}},cc=({collectionSlug:e,reason:t,enabled:n=!!e})=>{const r=async()=>e?await gJe({params:{collection_slug:e,version:ac},reason:t})??null:null,{data:s,isLoading:a}=We({enabled:n,queryKey:["get_collection",{collection_slug:e?.slice(-22)}],queryFn:r,placeholderData:Ud});return f.useMemo(()=>({collection:s??void 0,isLoading:a}),[s,a])},iP=async({request:e,reason:t})=>{const{fileRepositoryInfo:n,limit:r,offset:s,searchTerm:a,fileStates:i,email:l}=e;try{let c;i.includes("COMPLETE")?c={file_repository_info:n,limit:r,offset:s??0,search_term:a,file_states_in_filter:i}:c={file_repository_info:n,limit:r,offset:s??0,search_term:a,file_states_in_filter:i,email_in_filter:[l]};const{data:u,error:d}=await se.POST("/rest/file-repository/list-files",t,{headers:{"content-type":"application/json"},body:c,timeoutMs:Pe(),numRetries:1});if(d)throw new Ce("API_CLIENTS_ERROR",{cause:d});return{files:u?.files??[],numTotalFiles:u?.num_total_files??0}}catch(c){return ne.error(c),null}},vJe=async({request:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/file-repository/get-file-upload-urls",t,{body:e,timeoutMs:5e3,numRetries:1});if(r)throw new Error("Failed to get fileUploadUrl",{cause:r});return n},hF=async({request:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/files/list",t,{body:e,timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to get connector files",{cause:r});return n},xJe=async({request:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/files/delete",t,{body:e,timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to delete connector files",{cause:r});return n},bJe=async({request:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/files/resync",t,{body:e,timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to resync connector files",{cause:r});return n},_Je=async({request:e,reason:t})=>{try{const{data:n,error:r}=await se.POST("/rest/file-repository/uploads",t,{headers:{"content-type":"application/json"},body:e,timeoutMs:Pe(),numRetries:1});if(r)throw new Ce("API_CLIENTS_ERROR",{cause:r});return n??null}catch(n){return ne.error(n),null}};async function gF({request:e,reason:t}){return new Promise((n,r)=>{se.SSE("/rest/sse/index_files",t,{params:e,headers:{"content-type":"application/json",accept:"text/event-stream"},handlers:{message:s=>{s.status==="success"?n():r(new Error("Indexing failed"))}}}).catch(r)})}const Ype=({reason:e})=>{const t=ht();return vt({mutationFn:({fileUuids:n,fileRepoInfo:r})=>xJe({request:{file_repository_info:r,filters:{uuids:n,connection_ids:[],connection_types:[],file_types:[],ids:[],parent_uuids:[],remote_file_ids:[],root_files_only:!1,status:[],upload_ids:[]}},reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:["connector-files"]})}})},wJe=({fileRepoInfo:e,connectionTypes:t,status:n,searchKeyword:r,parentUuids:s,rootFilesOnly:a,cursor:i,pollingEnabled:l=!1,pageSize:c,fileTypes:u,reason:d})=>{const[m,p]=f.useState(!1),h=f.useMemo(()=>({file_repository_info:e,filters:{connection_types:t??ue,status:n??ue,search_keyword:r,parent_uuids:s??ue,root_files_only:a??!1,file_types:u??ue,connection_ids:ue,ids:ue,remote_file_ids:ue,uuids:ue,upload_ids:ue},pagination:{cursor:i,page_size:c??100},order_by:"updated",order_dir:"desc"}),[e,t,n,r,s,a,i,c,u]),g=We({queryKey:mpe(h),queryFn:()=>hF({request:h,reason:d}),refetchInterval:()=>l&&m?5e3:!1,staleTime:0,gcTime:0,enabled:e.file_repository_type!=="COLLECTION"||e.file_repository_type==="COLLECTION"&&!!e.owner_id});return f.useEffect(()=>{const y=g.data?.files.some(v=>v.status==="SYNCING"||v.status==="QUEUED")||!1;p(y)},[g.data]),g},CJe=({fileRepoInfo:e,connectionTypes:t,status:n,searchKeyword:r,parentUuids:s,rootFilesOnly:a,pageSize:i,fileTypes:l,reason:c})=>{const u={file_repository_info:e,filters:{connection_types:t??ue,status:n??ue,search_keyword:r,parent_uuids:s??ue,root_files_only:a??!1,file_types:l??ue,connection_ids:ue,ids:ue,remote_file_ids:ue,uuids:ue,upload_ids:ue},pagination:{page_size:i},order_by:"updated",order_dir:"desc"};return xu({enabled:e.file_repository_type==="USER"||e.file_repository_type==="COLLECTION"&&!!e.owner_id,initialPageParam:void 0,queryKey:mpe(u,!0),queryFn:({pageParam:d})=>hF({request:{...u,pagination:{cursor:d,page_size:i}},reason:c}),getNextPageParam:d=>d.next_cursor??void 0})},SJe=({reason:e})=>{const t=ht();return vt({mutationFn:({fileUuids:n,fileRepoInfo:r})=>bJe({request:{file_repository_info:r,filters:{uuids:n,connection_ids:[],connection_types:[],file_types:[],ids:[],parent_uuids:[],remote_file_ids:[],root_files_only:!1,status:[],upload_ids:[]}},reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:["connector-files"]})}})},Yv=e=>{switch(e){case"GOOGLE_DRIVE":return tg;case"ONEDRIVE":return Cd;case"SHAREPOINT":return Sd;case"DROPBOX":return iu;case"BOX":return ng;case"WILEY":return _5;case"GCAL":return qx;case"NOTION":case"NOTION_MCP":return rg;case"LINEAR":case"LINEAR_ALT":return Vf;case"SLACK":return Qx;case"SLACK_DIRECT":return Xx;case"GITHUB_MCP_DIRECT":return Zx;case"ASANA_MCP_DIRECT":return Sl;case"ASANA_MCP_MERGE":return Sl;case"ATLASSIAN_MCP_DIRECT":return e1;case"JIRA_MCP_MERGE":return t1;case"CONFLUENCE_MCP_MERGE":return n1;case"MICROSOFT_TEAMS_MCP_MERGE":return r1;case"OUTLOOK":return sg;case"FACTSET":return Pb;default:return""}};function sJt(e){if(e===0)return"0 bytes";const t=1024,n=["bytes","KB","MB","GB","TB"],r=Math.floor(Math.log(e)/Math.log(t));return Math.ceil(e/Math.pow(t,r))+" "+n[r]}const EJe=e=>{const t=e.file_metadata.file_type;return t==="FOLDER"||t==="DATABASE"||t==="WORKSPACE"||t==="PAGE"},MJe=e=>{const t=e.file_metadata.file_type;return t==="FOLDER"||t==="DATABASE"||t==="WORKSPACE"?fie:cm},bo=e=>{switch(e){case"GOOGLE_DRIVE":return E5;case"ONEDRIVE":return k5;case"SHAREPOINT":return T5;case"DROPBOX":return uD;case"BOX":return N5;case"GCAL":return M5;case"NOTION":case"NOTION_MCP":return Ob;case"OUTLOOK":return Ude;case"LINEAR":case"LINEAR_ALT":return Kx;case"SLACK":case"SLACK_DIRECT":return Yx;case"GITHUB_MCP_DIRECT":return j5;case"ASANA_MCP_DIRECT":case"ASANA_MCP_MERGE":return Jx;case"ATLASSIAN_MCP_DIRECT":return A5;case"JIRA_MCP_MERGE":return dD;case"CONFLUENCE_MCP_MERGE":return fD;case"MICROSOFT_TEAMS_MCP_MERGE":return mD;default:return null}},ai=e=>{switch(e){case"crunchbase":return x5;case"factset":return v5;case"wiley":return ou;case"google_drive":return E5;case"onedrive":return k5;case"sharepoint":return T5;case"gcal":return M5;case"dropbox":return uD;case"box":return N5;case"gmail":return QWe;case"notion":case"notion_mcp":return Ob;case"outlook":return Ude;case"linear":case"linear_alt":return Kx;case"slack":case"slack_direct":return Yx;case"github_mcp_direct":return j5;case"asana_mcp_direct":case"asana_mcp_merge":return Jx;case"atlassian_mcp_direct":return A5;case"jira_mcp_merge":return dD;case"confluence_mcp_merge":return fD;case"microsoft_teams_mcp_merge":return mD;case"wiley_mcp_cashmere":return ou;case"cbinsights_mcp_cashmere":return w5;case"pitchbook_mcp_cashmere":return C5;case"statista_mcp_cashmere":return S5;default:return null}},Zs=e=>{switch(e){case"crunchbase":return b5;case"factset":return Pb;case"google_drive":return tg;case"onedrive":return Cd;case"sharepoint":return Sd;case"gcal":return qx;case"dropbox":return iu;case"box":return ng;case"gmail":return XWe;case"notion":case"notion_mcp":return rg;case"outlook":return sg;case"linear":case"linear_alt":return Vf;case"slack":return Qx;case"slack_direct":return Xx;case"github_mcp_direct":return Zx;case"asana_mcp_direct":return Sl;case"asana_mcp_merge":return Sl;case"atlassian_mcp_direct":return e1;case"jira_mcp_merge":return t1;case"confluence_mcp_merge":return n1;case"microsoft_teams_mcp_merge":return r1;case"wiley_mcp_cashmere":return Wx;case"cbinsights_mcp_cashmere":return Hx;case"pitchbook_mcp_cashmere":return zx;case"statista_mcp_cashmere":return Gx;default:return e}},kJe=e=>{switch(e){case"GOOGLE_DRIVE":return tg;case"ONEDRIVE":return Cd;case"SHAREPOINT":return Sd;case"DROPBOX":return iu;case"BOX":return ng;case"NOTION":case"NOTION_MCP":return rg;case"LINEAR":case"LINEAR_ALT":return Vf;case"SLACK":return Qx;case"SLACK_DIRECT":return Xx;case"GITHUB_MCP_DIRECT":return Zx;case"ASANA_MCP_DIRECT":return Sl;case"ASANA_MCP_MERGE":return Sl;case"ATLASSIAN_MCP_DIRECT":return e1;case"JIRA_MCP_MERGE":return t1;case"CONFLUENCE_MCP_MERGE":return n1;case"MICROSOFT_TEAMS_MCP_MERGE":return r1;default:return""}},TJe=(e,t)=>new Date(e+"Z").toLocaleString(t,{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),NJe=(e,t)=>{switch(e){case"RECEIVED":case"QUEUED":case"RATE_LIMITED":return t.formatMessage({id:"Cnm0QAkWnp",defaultMessage:"Queued"});case"SYNCING":return t.formatMessage({id:"eOnwqs6QFY",defaultMessage:"Syncing"});case"SYNC_ERROR":return t.formatMessage({id:"N1cqoEe4CZ",defaultMessage:"Sync error"});case"EVALUATING_RESYNC":case"READY":return t.formatMessage({id:"IZFEUgrg25",defaultMessage:"Ready"})}},Qpe=(e,t)=>{if(t==="WILEY")return Yv(t);if(t||e.is_memory||e.is_conversation_history)return e.name&&e.name.trim()?e.name:void 0},Xpe=e=>e.isFile,Zpe=e=>e.isDirectory,jJe=async(e,t=MWe)=>{const n=[e],r=[];for(;n.length>0;){const s=n.pop();if(s){if(Xpe(s)){const a=await new Promise(i=>{s.file(i)});if(r.push(a),r.length>t)return r}else if(Zpe(s)){const a=s.createReader(),i=await new Promise(l=>a.readEntries(l));n.push(...i)}}}return r},li=I.memo(({blockCount:e,size:t=Kt.large,animateLines:n=!0,divider:r,noLines:s,noHeight:a,variant:i="subtler",className:l,...c})=>{const u="h-1 bg-inverse/70  rounded-full",d=f.useMemo(()=>{const m=[];for(let p=0;p<(e??1);p++)m.push(o.jsx(H,{variant:i,className:B("animate-pulse rounded-md",{"h-8":t===Kt.small,"h-10":t===Kt.regular,"h-[72px]":t===Kt.large,"h-32":t===Kt.xl,"h-6":t===Kt.tiny,"h-full":a}),children:o.jsx("div",{className:"gap-y-sm p-md flex h-full flex-col",children:!s&&o.jsxs(o.Fragment,{children:[o.jsx(ge.div,{initial:{width:n?0:"100%"},animate:{width:"100%"},transition:{duration:.8,delay:.2},className:u}),o.jsx(ge.div,{initial:{width:n?0:"100%"},animate:{width:"100%"},transition:{duration:.8,delay:.2},className:u}),o.jsx(ge.div,{initial:{width:n?0:"80%"},animate:{width:"80%"},transition:{duration:.8,delay:.2},className:u}),o.jsx(ge.div,{initial:{width:n?0:"20%"},animate:{width:"20%"},transition:{duration:.8,delay:.2},className:u})]})})},p));return m},[n,e,t,s,a,i]);return o.jsx(H,{className:B("h-full",{"divider gap-y-sm flex flex-col":r,"absolute top-0 w-full":a},l),...c,children:d})});li.displayName="TextBlockThrobber";var Tt;(function(e){e.GOOGLE_DRIVE="GOOGLE_DRIVE",e.ONEDRIVE="ONEDRIVE",e.SHAREPOINT="SHAREPOINT",e.DROPBOX="DROPBOX",e.BOX="BOX",e.WILEY="WILEY",e.GCAL="GCAL",e.GENERATED_IMAGE="GENERATED_IMAGE",e.GENERATED_VIDEO="GENERATED_VIDEO",e.NOTION="NOTION",e.NOTION_MCP="NOTION_MCP",e.OUTLOOK="OUTLOOK",e.LINEAR="LINEAR",e.LINEAR_ALT="LINEAR_ALT",e.SLACK="SLACK",e.GITHUB_MCP_DIRECT="GITHUB_MCP_DIRECT",e.ASANA_MCP_DIRECT="ASANA_MCP_DIRECT",e.ASANA_MCP_MERGE="ASANA_MCP_MERGE",e.ATLASSIAN_MCP_DIRECT="ATLASSIAN_MCP_DIRECT",e.LOCAL="LOCAL",e.SLACK_DIRECT="SLACK_DIRECT",e.JIRA_MCP_MERGE="JIRA_MCP_MERGE",e.CONFLUENCE_MCP_MERGE="CONFLUENCE_MCP_MERGE",e.MICROSOFT_TEAMS_MCP_MERGE="MICROSOFT_TEAMS_MCP_MERGE",e.FACTSET="FACTSET"})(Tt||(Tt={}));const Jpe=I.memo(({files:e,fileRepoInfo:t,isLoadingConnectorFiles:n,allowEditSources:r,onFolderClick:s})=>{const a="connectors-table-files",i=Z(),{locale:l}=Z(),{isMobileStyle:c}=xe(),{mutate:u}=Ype({reason:a}),{mutate:d}=SJe({reason:a}),m=f.useCallback(h=>{EJe(h)?s(h.uuid,h.name):h.connection_file_url&&window.open(h.connection_file_url,"_blank")},[s]),p=f.useCallback(h=>[{type:"default",text:i.formatMessage({defaultMessage:"View",id:"FgydNeoT78"}),icon:FM,onClick:g=>{g.stopPropagation(),h.connection_file_url&&window.open(h.connection_file_url,"_blank")},show:!!h.connection_file_url},{type:"default",text:i.formatMessage({defaultMessage:"Remove",id:"G/yZLul6P1"}),icon:vd,onClick:g=>{g.stopPropagation(),u({fileUuids:[h.uuid],fileRepoInfo:t})},show:r},{type:"default",text:i.formatMessage({defaultMessage:"Resync",id:"yr3UuWC6qt"}),icon:j7,onClick:g=>{g.stopPropagation(),d({fileUuids:[h.uuid],fileRepoInfo:t})},show:r&&h.connection_type!==Tt.LOCAL}],[i,r,u,d,t]);return n?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"py-sm",children:o.jsx("div",{className:"w-full",children:o.jsx(li,{variant:"subtle",size:"regular",blockCount:8,noLines:!0,divider:!0,className:"w-full"})})})}):o.jsx(o.Fragment,{children:e.map((h,g)=>o.jsx(I.Fragment,{children:o.jsxs("tr",{className:"border-subtler animate-in fade-in border-b align-middle duration-500",onClick:()=>m(h),children:[o.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:o.jsx(H,{className:"shrink-0",children:h.connection_type===Tt.LOCAL?o.jsx(ce,{icon:db,size:"lg"}):o.jsx("img",{src:bo(h.connection_type)??"",alt:h.name,width:24,height:24})})}),o.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:o.jsxs("div",{className:"gap-x-sm flex items-center",children:[o.jsx(D,{children:o.jsx(ce,{icon:MJe(h)})}),o.jsx(D,{variant:"small",color:"light",className:"truncate",children:h.name})]})}),o.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:o.jsx(D,{variant:"small",color:"light",className:"truncate",children:TJe(h.updated,l)})}),o.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:o.jsx(D,{variant:"small",color:h.status==="SYNC_ERROR"?"red":"light",className:"truncate",children:NJe(h.status,i)})}),o.jsx("td",{className:"py-sm",children:o.jsx("span",{className:"flex justify-end",children:o.jsx(Jt,{isMobileStyle:c,placement:"bottom-end",items:p(h),children:o.jsx(Te,{noPadding:!0,size:"small",icon:xd})})})})]})},g))})});Jpe.displayName="ConnectorsTableFiles";const _o=10,ZK=20,AJe=_o*41+46,ehe=I.memo(({files:e,fileRepoInfo:t,isLoadingConnectorFiles:n,allowEditSources:r,selectedFiles:s,currentPath:a,setSelectedFiles:i,setCurrentPath:l,handleFolderClick:c,handleResetSearch:u})=>{const d=Z(),m=f.useMemo(()=>I.memo(()=>{const p=f.useCallback(()=>{l([]),u()},[]);return a.length===0?null:o.jsxs("div",{className:"mb-md gap-x-xs flex items-center",children:[o.jsx(D,{variant:"tiny",color:a.length===0?void 0:"light",className:"cursor-pointer hover:underline",onClick:p,children:d.formatMessage({defaultMessage:"All",id:"zQvVDJ+j59"})}),a.map((h,g)=>o.jsx(the,{item:h,index:g,currentPathLength:a.length,handleResetSearch:u,setCurrentPath:l},h.uuid))]})}),[a,u,d,l]);return o.jsxs("div",{style:{minHeight:AJe},className:"px-sm pt-md flex flex-col",children:[o.jsx(m,{}),o.jsx("div",{className:"grow-0",children:o.jsxs("table",{className:"w-full table-fixed",children:[o.jsx("thead",{className:"border-subtler border-b",children:o.jsxs("tr",{children:[o.jsx("th",{className:"pb-sm w-[10%] text-left",children:o.jsx(D,{variant:"smallBold",children:d.formatMessage({defaultMessage:"Source",id:"aH4De2Y20k"})})}),o.jsx("th",{className:"pb-sm w-[45%] text-left",children:o.jsx(D,{variant:"smallBold",children:d.formatMessage({defaultMessage:"Name",id:"HAlOn1ZsuY"})})}),o.jsx("th",{className:"pb-sm w-1/4 text-left",children:o.jsx(D,{variant:"smallBold",children:d.formatMessage({defaultMessage:"Date",id:"P7PLVjLe4f"})})}),o.jsx("th",{className:"pb-sm w-1/5 text-left",children:o.jsx(D,{variant:"smallBold",children:d.formatMessage({defaultMessage:"Status",id:"tzMNF3jWoU"})})})]})}),o.jsx("tbody",{children:o.jsx(Jpe,{allowEditSources:r,files:e,fileRepoInfo:t,isLoadingConnectorFiles:n,selectedFiles:s,setSelectedFiles:i,onFolderClick:c})})]})}),!n&&e.length===0&&o.jsx("div",{className:"flex grow items-center justify-center",children:o.jsx(D,{color:"light",variant:"small",className:"text-center",children:d.formatMessage({defaultMessage:"Files that you sync will be found here",id:"uT32Xg01/F"})})})]})});ehe.displayName="ConnectorsTableContent";const the=I.memo(({item:e,index:t,currentPathLength:n,handleResetSearch:r,setCurrentPath:s})=>{const a=f.useCallback(()=>{s(i=>i.slice(0,t+1)),r()},[r,t,s]);return o.jsxs("div",{className:"gap-x-xs flex items-center",children:[o.jsx(D,{variant:"small",color:"light",children:"/"}),o.jsx(ce,{icon:fie}),o.jsx(D,{variant:"tiny",color:t===n-1?void 0:"light",className:"cursor-pointer hover:underline",onClick:a,children:e.name})]},e.uuid)});the.displayName="PathBlockFactory";function IJe(e,t,n=2){if(e==null)return"";const r=e.includes(".")?e.slice(e.lastIndexOf(".")):"",s=e.substring(0,e.length-r.length);return s.length>t?s.substring(0,t-r.length-3)+".".repeat(n)+r:s+r}const Bb=e=>{try{return(new URL(e).pathname.split("/").pop()||"").split(".").pop()?.toLowerCase()}catch{return e.split(".").pop()?.toLowerCase()}},nhe=e=>e.file.type.includes("image"),RJe=e=>e.file.type==="application/pdf",PJe=e=>e.file.type==="text/csv"||e.file.type=="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",OJe=e=>e.file.type==="text/plain"||e.file.type==="application/msword"||e.file.type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||e.file.type==="text/markdown",lP={txt:"text/plain",pdf:"application/pdf",jpeg:"image/jpeg",jpg:"image/jpeg",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",md:"text/markdown",png:"image/png",csv:"text/csv"},LJe=e=>{if(e<0)throw new Error("Number of bytes cannot be negative");const t=["B","KB","MB","GB"];let n=0,r=e;for(;r>=1e3&&n<t.length-1;)r/=1e3,n++;return`${r%1===0?r.toString():r.toFixed(1)} ${t[n]}`},yF=[".txt",".pdf",".docx",".pptx",".xlsx",".md",".csv"],vF=[".txt",".pdf",".jpg",".jpeg",".png",".docx",".pptx",".xlsx",".md",".csv"],xF=[".mp3",".wav",".aiff",".ogg",".flac",".mp4",".mpeg",".mov",".avi",".flv",".mpg",".webm",".wmv",".3gp"],JK=27,DJe=2e4;let gN=!1,yc=null;const FJe=()=>{const e=f.useRef(null),t=f.useRef(null);let n="";typeof window<"u"&&(window.location.hostname==="localhost"?n=`${window.location.protocol}//${window.location.hostname}:${window.location.port}/account/connectors`:n=`${window.location.protocol}//${window.location.hostname}/account/connectors`);const r=f.useCallback(u=>!!u&&u.length===36&&u.split("-").length===5,[]),s=f.useCallback((u,d,m,p,h)=>{if(!d&&u==="sharepoint"&&m){const g=m.match(/^https?:\/\/([^.]+)\.sharepoint\.com/i);if(g)return g[1]}if(!d&&u==="onedrive"&&r(h)&&p){const g=p.match(/@([^.]+)\./);if(g)return g[1]+"-my"}return d?u==="sharepoint"?d:d+"-my":null},[r]),a=f.useCallback(async(u,d)=>{d.success=!1;const m=s(u.connector,u.tenantName,u.webUrl,u.loginHint,u.accountIdentifier);d.tenant=m,yc||(yc=await(await K(()=>import("./index-C3FxZ4wa.js"),__vite__mapDeps([0,1]))).PublicClientApplication.createPublicClientApplication({auth:{authority:m?"https://login.microsoftonline.com/common":"https://login.microsoftonline.com/consumers",clientId:u.clientId,redirectUri:n},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!0}}));const p=m?[`https://${m}.sharepoint.com/.default`]:["OneDrive.ReadWrite"];d.scopes=p;const h={scopes:p,login_hint:u.loginHint,prompt:"select_account"};let g=null,y=yc.getActiveAccount();if(y||(y=yc.getAllAccounts().find(x=>x.username===u.loginHint)??null),d.hasActiveAccount=!!y?.username,y)try{yc.setActiveAccount(y),g=(await yc.acquireTokenSilent(h)).accessToken}catch(v){d.silentAcquisitionError=v instanceof Error?v.toString():v}if(!g&&!gN)try{gN=!0;const v=await yc.loginPopup(h);yc.setActiveAccount(v.account),g=(await yc.acquireTokenSilent(h)).accessToken}catch(v){d.interactiveAcquisitionError=v instanceof Error?v.toString():v}finally{gN=!1}else g||(d.interactiveAuthenticationSkipped=!0);if(g)return d.success=!0,d.accessTokenLength=g.length,g;throw Error("Access token not acquired")},[n,s]),i=f.useCallback(u=>{const d=s(u.connector,u.tenantName,u.webUrl,u.loginHint,u.accountIdentifier);let m=u.mode==="source"?yF:vF;m=u.isAudioVideoFilesEnabled?m.concat(xF):m;const p=u.connector==="sharepoint"?{recent:!0,oneDrive:!1,sharedLibraries:!0}:{recent:!0,oneDrive:!0,sharedLibraries:!1},h={sdk:"8.0",messaging:{origin:n,channelId:JK},authentication:{},entry:u.connector==="sharepoint"?{sharePoint:{}}:{oneDrive:{}},typesAndSources:{mode:u.mode==="attachment"?"files":"all",filters:m,pivots:p},selection:{mode:"multiple"}},g=new URLSearchParams({filePicker:JSON.stringify(h)});return u.webUrl?`${u.webUrl}/_layouts/15/FilePicker.aspx?${g}`:d?`https://${d}.sharepoint.com/_layouts/15/FilePicker.aspx?${g}`:`https://onedrive.live.com/picker?${g}`},[n,s]),l=f.useCallback(async u=>{const d=_=>{window.removeEventListener("message",h),t.current?.removeEventListener("message",p),t.current?.close(),e.current?.close(),_?u.onError?.(_):u.onCancel?.()},m=async(_,w)=>await new Promise((C,S)=>{const E=setTimeout(()=>{S(new Error("Request timed out"))},DJe);a(_,w).then(M=>{clearTimeout(E),C(M)}).catch(M=>{clearTimeout(E),S(M)})}),p=async _=>{const w={};switch(_.data.type){case"command":t.current?.postMessage({type:"acknowledge",id:_.data.id});const C=_.data.data;switch(C.command){case"authenticate":try{const S=await m(u,w);t.current?.postMessage({type:"result",id:_.data.id,data:{result:"token",token:S}})}catch(S){w.errorStep="authenticateCommand",w.error=S instanceof Error?S.toString():S,d(S)}finally{u.log?.(u.connectionType??u.connector.toUpperCase(),w)}break;case"pick":t.current?.postMessage({type:"result",id:_.data.id,data:{result:"success"}}),u.onPicked?.(C.items),d();break;case"close":d();break;default:d();break}break}},h=async _=>{if(_.source&&_.source===e.current){const w=_.data;w.type==="initialize"&&w.channelId===JK&&(t.current=_.ports[0],t.current.addEventListener("message",p),t.current.start(),t.current.postMessage({type:"activate"}))}};let g;const y={};try{g=await a(u,y)}catch(_){y.errorStep="initialization",y.error=_ instanceof Error?_.toString():_,d(_);return}finally{u.log?.(u.connectionType??u.connector.toUpperCase(),y)}const v=document.getElementById("microsoft-file-picker");if(!v){d();return}if(e.current=v.contentWindow,!e?.current){d();return}const x=e.current.document.createElement("form");x.setAttribute("action",i(u)),x.setAttribute("method","POST"),e.current.document.body.append(x);const b=e.current.document.createElement("input");b.setAttribute("type","hidden"),b.setAttribute("name","access_token"),b.setAttribute("value",g),x.appendChild(b),e.current.document.body.appendChild(x),x.submit(),window.addEventListener("message",h)},[a,i]),c=f.useCallback((u,d)=>{let m;if(u.parentReference.sharepointIds?.siteId&&d==="sharepoint"){const h={item_id:u.id,drive_id:u.parentReference.driveId,site_id:u.parentReference.sharepointIds.siteId};m=JSON.stringify(h)}else m=u.id;const p=Bb(u.name);return p?{id:m,name:u.name,sizeBytes:u.size,mimeType:lP[p]}:null},[]);return f.useMemo(()=>({openPicker:l,toPickerDocument:c}),[l,c])},cP="box-file-picker",UJe="0";let $w=null,eY=!1;const BJe=()=>$w||($w=new Promise((e,t)=>{const n=document.createElement("link");n.rel="stylesheet",n.href="https://cdn01.boxcdn.net/platform/elements/17.1.0/en-US/picker.css";const r=document.createElement("script");r.src="https://cdn01.boxcdn.net/platform/elements/17.1.0/en-US/picker.js",r.onload=()=>{if(!eY){const s=document.createElement("style");s.textContent=`
                .be .be-header input[type="search"] {
                    background: white;
                }

                .btn-content {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                }
            `,document.head.appendChild(s),eY=!0}e()},r.onerror=t,n.onload=()=>document.body.appendChild(r),document.head.appendChild(n)}),$w),rhe=({apiKey:e,mode:t,isAudioVideoFilesEnabled:n,onPicked:r,onCancel:s,onError:a})=>{const i=f.useRef(null),l=f.useCallback(async(u="file")=>{try{if(await BJe(),!document.getElementById(cP)){a?.("Attempted to open picker when container isn't ready");return}let m=t==="source"?yF:vF;m=n?m.concat(xF):m;const p=[...m,".gdocs",".gsheets",".gslides"];i.current&&(i.current.removeListener("choose",r),i.current.removeListener("cancel",s),i.current.hide(),i.current=null);let h;u==="folder"?h=new window.Box.FolderPicker:h=new window.Box.FilePicker,i.current=h,h.addListener("choose",r),h.addListener("cancel",s),h.show(UJe,e,{container:`#${cP}`,logoUrl:N5,extensions:p.join(","),canUpload:!1,canSetShareAccess:!1,canCreateNewFolder:!1,chooseButtonLabel:"Select",cancelButtonLabel:"Cancel"})}catch(d){a?.(d);return}},[e,a,t,s,r,n]),c=f.useCallback(()=>{i.current&&(i.current.removeListener("choose",r),i.current.removeListener("cancel",s),i.current.hide(),i.current=null)},[r,s]);return f.useMemo(()=>({openPicker:l,cleanupPicker:c}),[l,c])},bF=I.memo(({isOpen:e,onClose:t,cleanupPicker:n})=>(f.useEffect(()=>()=>{n()},[n]),o.jsx(en,{variant:"wide",isOpen:e,onClose:t,renderCloseButton:!0,children:o.jsx("div",{id:cP,style:{height:"800px"}})})));bF.displayName="BoxFilePickerModal";const aJt=async({backendUUID:e,title:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await se.PUT("/rest/article/section/title/{section_uuid}",r,{params:{path:{section_uuid:e}},body:{read_write_token:n,title:t},headers:{"content-type":"application/json"},numRetries:1});if(a)throw new Error("Error updating article section title",{cause:a});return s},oJt=async({backendUUID:e,heroOffset:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await se.PUT("/rest/article/section/hero_offset/{section_uuid}",r,{params:{path:{section_uuid:e}},body:{read_write_token:n,hero_offset:t},timeoutMs:Pe()});if(a)throw new Error("Error updating article section hero offset",{cause:a});return s},iJt=async({backendUUID:e,rwToken:t,reason:n})=>{if(!e||!t)return;const{data:r,error:s}=await se.DELETE("/rest/article/section/{section_uuid}",n,{params:{path:{section_uuid:e}},body:{read_write_token:t},timeoutMs:Pe()});if(s)throw new Error("Error deleting article section",{cause:s});return r},lJt=async({sections:e,rwToken:t,reason:n})=>{if(!t||e.length===0)return;const{data:r,error:s}=await se.PUT("/rest/article/sections/layout",n,{body:{read_write_token:t,sections:e},timeoutMs:Pe()});if(s)throw new Error("Error updating article sections layout",{cause:s});return r},cJt=async({sectionUUID:e,mediaItem:t,targetIndex:n,rwToken:r,isNewMediaItem:s=!1,reason:a})=>{if(!r)return;const{data:i,error:l}=await se.PUT("/rest/article/section/image/{section_uuid}",a,{params:{path:{section_uuid:e}},timeoutMs:5500,body:{read_write_token:r,media_item:t,target_index:n,new_media_item:s}});if(l)throw new Error("Error updating article section image",{cause:l});return i},uJt=async({sectionUUID:e,mediaItem:t,rwToken:n,isNewMediaItem:r,reason:s})=>{n&&await se.PUT("/rest/page/section/media/add/{section_uuid}",s,{params:{path:{section_uuid:e}},timeoutMs:Pe(),method:"PUT",body:{read_write_token:n,media_item:t,new_media_item:r}})},dJt=async({sectionUUID:e,image:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await se.POST("/rest/article/section/upload_image/{section_uuid}",r,{params:{path:{section_uuid:e}},timeoutMs:Pe(),method:"POST",body:{read_write_token:n,content_type:t.type},headers:{"content-type":"application/json"},numRetries:1});if(a)throw new Error("Failed to upload image to section media items",{cause:a});return s},fJt=async({sectionUUID:e,mediaItemImageUrl:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await se.PUT("/rest/article/section/media/remove/{section_uuid}",r,{params:{path:{section_uuid:e}},timeoutMs:Pe(),body:{read_write_token:n,media_item_image_url:t}});if(a)throw new Error("Error removing media item from section selected images",{cause:a});return s},mJt=async({sectionUUID:e,relativeMove:t,rwToken:n,articleSlug:r,reason:s})=>{if(!n||!r)return;const{data:a,error:i}=await se.PUT("/rest/article/reorder/{article_slug}",s,{params:{path:{article_slug:r}},timeoutMs:Pe(),method:"PUT",body:{read_write_token:n,section_uuid:e,relative_move:t}});if(i)throw new Error("Error reordering article section",{cause:i});return a},pJt=async({backendUUID:e,reason:t})=>{if(!e)return;const{data:n,error:r}=await se.POST("/rest/article/section/terminate",t,{body:{entry_uuid:e},timeoutMs:1500,method:"POST",numRetries:1});if(r)throw new Error("Error terminating article section streaming",{cause:r});return n},hJt=async({sectionUUID:e,mediaItem:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await se.PUT("/rest/article/section/add/media_item/{section_uuid}",r,{params:{path:{section_uuid:e}},body:{read_write_token:n,media_item:t}});if(a)throw new Error("Error adding article section media item",{cause:a});return s},VJe=async({entryUUIDs:e,rwToken:t,reason:n})=>{await se.DELETE("/rest/thread",n,{body:{entry_uuids:e,read_write_token:t??""}})},$Je=async({entryUUID:e,rwToken:t,callback:n,reason:r})=>{n?.(),await se.DELETE("/rest/thread/delete_thread_by_entry_uuid",r,{body:{entry_uuid:e,read_write_token:t??""}})},WJe=async({backendUUID:e,url:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await se.PUT("/rest/thread/entry/remove_widget",r,{timeoutMs:Pe(),body:{entry_uuid:e,read_write_token:n,url:t}});if(a)throw new Error("Error removing widget from entry",{cause:a});return s},gJt=async({backendUUID:e,rwToken:t,value:n,reason:r})=>{const{data:s,error:a}=await se.PUT("/rest/article/emphasize_sources/{section_uuid}",r,{params:{path:{section_uuid:e}},timeoutMs:Pe(),method:"PUT",body:{read_write_token:t,value:n}});if(a)throw new Error("Error toggling emphasize sources",{cause:a});return s},yJt=async({connectorName:e,apiKey:t,reason:n})=>{const{data:r,error:s}=await se.POST("/rest/connectors/store-api-key",n,{body:{api_key:t,connector_id:e}});if(s)throw new Error(`Failed to store ${e} API key`,{cause:s});return r},HJe=async({name:e,referrer:t,referrerId:n,redirectPath:r,unauthedRedirectPath:s,reason:a})=>{try{const{data:i,error:l}=e!=="factset"?await se.GET(`/rest/connectors/${e}/connect`,a,{timeoutMs:Pe(),numRetries:1,reason:a,params:{query:{referrer:t,referrer_id:n,redirect_path:r,unauthed_redirect_path:s}}}):await se.GET("/rest/connectors/factset/connect",a,{timeoutMs:Pe(),numRetries:1,reason:a});if(l)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to initiate OAuth flow",cause:l});return i.redirect_url??null}catch(i){return ne.error("Error fetching factset OAuth redirect URL:",i),null}},zJe=async({connectorName:e,reason:t})=>{const n=`disconnectConnector:${e}`;try{const{data:r,error:s}=await se.GET("/rest/connectors/{connector_id}/disconnect",t,{timeoutMs:Pe({productionMs:500}),numRetries:1,reason:t,params:{path:{connector_id:e}}});if(s)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to disconnect connector",cause:s});return r}catch(r){return ne.log(`Error in ${n}:`,r),null}},GJe=async({connectionUUID:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/connections/{uuid}/update",t,{params:{path:{uuid:e}},body:{disconnect:!0}});if(r)throw new Error("Failed to disconnect file connector",{cause:r});return n},qJe=async({connectionUUID:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/connections/{uuid}/delete",t,{params:{path:{uuid:e}}});if(r)throw new Error("Failed to disconnect file connector and delete files",{cause:r});return n},KJe=async({connectorName:e,fileIds:t,fileRepoInfo:n,folder_ids:r=ue,reason:s})=>{const{error:a,data:i}=e==="sharepoint"?await se.POST(`/rest/connectors/${e}/files`,s,{body:{file_ids:t,file_repository_info:n,drive_ids:r}}):await se.POST(`/rest/connectors/${e}/files`,s,{body:{file_ids:t,file_repository_info:n,folder_ids:r}});if(a)throw new Ce("API_CLIENTS_ERROR",{cause:a});return i},YJe=async({reason:e})=>{const{data:t,error:n}=await se.POST("/rest/connectors/box/picker",e);if(n)throw new Error("Failed to refresh box picker credentials",{cause:n});return t},QJe=async({connectionType:e,content:t,reason:n})=>{const{data:r,error:s}=await se.POST("/rest/connectors/picker/log",n,{body:{connection_type:e,content:t}});if(s)throw new Error("Failed log connector picker",{cause:s});return r},XJe=async({request:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/file-repository/delete-files",t,{body:e});if(r)throw new Error("Failed to delete files",{cause:r});return n};class _F extends Error{constructor(){super("Downloads are disabled"),this.name="DownloadsDisabledError"}}class wF extends Error{constructor(){super("PDF downloads are restricted"),this.name="PdfUntrustedOriginError"}}class CF extends Error{constructor(){super("This file belongs to a different organization"),this.name="UserNotInFileOrgError"}}const ZJe=async({request:e,reason:t})=>{const n=await se.POST("/rest/file-repository/download",t,{body:e,timeoutMs:2e3,numRetries:1});if(n.error){if(n.error.detail&&typeof n.error.detail=="object"&&"error_details"in n.error.detail){if(n.error.detail.error_details==="DOWNLOADS_DISABLED")throw new _F;if(n.error.detail.error_details==="PDF_UNTRUSTED_ORIGIN")throw new wF;if(n.error.detail.error_details==="USER_NOT_IN_FILE_ORG")throw new CF}throw new Ce("API_CLIENTS_ERROR",{message:"Failed to download file",cause:n.error})}return n.data},JJe=async({request:e,reason:t})=>{const n=await se.POST("/rest/file-repository/download-attachment",t,{body:e,timeoutMs:2e3,numRetries:1});if(n.error){if(n.error.detail&&typeof n.error.detail=="object"&&"error_details"in n.error.detail){if(n.error.detail.error_details==="DOWNLOADS_DISABLED")throw new _F;if(n.error.detail.error_details==="PDF_UNTRUSTED_ORIGIN")throw new wF;if(n.error.detail.error_details==="USER_NOT_IN_FILE_ORG")throw new CF}throw new Ce("API_CLIENTS_ERROR",{message:"Failed to download attachment",cause:n.error})}return n.data},vJt=async({seedDirectoryRequest:e,reason:t})=>{const{error:n}=await se.POST("/rest/file-repository/seed-examples",t,{body:e,timeoutMs:Pe(),numRetries:1});if(n)throw new Ce("API_CLIENTS_ERROR",{cause:n})},she=e=>{const{accessLevel:t,enableWebByDefault:n,...r}=e;return{...r,access:t,enable_web_by_default:n}},eet=async({collectionUuid:e,changes:t,reason:n})=>{const r=she(t),s=await se.POST("/rest/collections/edit_collection/{collection_uuid}",n,{params:{path:{collection_uuid:e}},body:r,timeoutMs:Pe()});if(!s.response.ok||!s.data)throw new Error("Failed to edit collection",{cause:s.error});const a=s.data,{access:i,...l}=a;return i!==void 0?{...l,accessLevel:i}:l},tY=async({params:e,reason:t})=>{const n=she(e);e.template_id&&(n.template_id=e.template_id);const r=await se.POST("/rest/collections/create_collection",t,{body:n,timeoutMs:Pe()});if(!r.response.ok||!r.data)throw new Error("Failed to create collection",{cause:r.error});return r.data},xJt=async({entryUUID:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/entry/convert-to-report/{entry_uuid}",t,{params:{path:{entry_uuid:e}},timeoutMs:Pe()});if(r)throw new Error("Failed to convert entry to report",{cause:r});return n},bJt=async({spaceUuid:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/spaces/{space_uuid}/subscription",t,{params:{path:{space_uuid:e}},timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to subscribe to space",{cause:r});return n},_Jt=async({spaceUuid:e,reason:t})=>{const{data:n,error:r}=await se.DELETE("/rest/spaces/{space_uuid}/subscription",t,{params:{path:{space_uuid:e}},timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to unsubscribe from space",{cause:r});return n},wJt=async({reason:e})=>{const{error:t}=await se.DELETE("/rest/user/delete-account",e);if(t)throw new Error("Failed to delete account",{cause:t})},tet=async({collectionUuid:e,reason:t})=>{const{error:n}=await se.DELETE("/rest/collections/delete_collection/{collection_uuid}",t,{params:{path:{collection_uuid:e}},timeoutMs:Pe(),numRetries:1});if(n)throw new Error("Failed to delete collection",{cause:n})},ahe=async({contextUUID:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/thread/mark_viewed/{context_uuid}",t,{params:{path:{context_uuid:e}},timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to mark thread as viewed",{cause:r});return n};function ohe({reason:e}){const t=ht();return vt({mutationFn:()=>YJe({reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:["get_user_settings"]})}})}function SF({reason:e,onConnectorFileUploadSuccess:t}){const n=ht(),{deprecatedOpenToast:r}=gn(),s=Z(),a=f.useRef(null);return f.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]),vt({mutationFn:async({connectorName:i,fileIds:l,fileRepoInfo:c,folder_ids:u})=>await KJe({connectorName:i,fileIds:l,fileRepoInfo:c,folder_ids:u,reason:e}),onSuccess:()=>{a.current=setTimeout(()=>{n.invalidateQueries({predicate:i=>i.queryKey[0]===dpe||i.queryKey[0]===fpe||i.queryKey[0]===ppe||i.queryKey[0]===hpe})},5e3),r(s.formatMessage({defaultMessage:"You'll receive an email when the sync is complete",id:"in8zoTTNmN"}),"success",5),t?.()}})}const net=({initialApiKey:e,expiresAtString:t,mode:n,isSpace:r=!1,fileRepoInfo:s,isAudioVideoFilesEnabled:a,reason:i})=>{const l=gt(),c=Z(),{deprecatedOpenToast:u}=gn(),{mutateAsync:d}=SF({reason:i}),{mutateAsync:m}=ohe({reason:i}),[p,h]=f.useState(!1),[g,y]=f.useState(""),[v,x]=f.useState("file"),b=f.useCallback(()=>h(!1),[]),_=f.useCallback(M=>{ne.error(`${ng} file picker failed to open: ${M}`),u(c.formatMessage({defaultMessage:"{formattedName} is not responding. Please try again later.",id:"oF/tZmXBik"},{formattedName:ng}),"error",5)},[c,u]),w=f.useCallback(M=>{const k=M.map(A=>A.id);d({connectorName:"box",fileIds:v=="file"?k:[],fileRepoInfo:r?s:void 0,folder_ids:v=="folder"?k:[]}),r||l.push(`/account/files?connector=box&uploadCount=${k.length}`),b()},[l,d,r,s,b,v]),{openPicker:C,cleanupPicker:S}=rhe({apiKey:g||e,mode:n,onPicked:w,onCancel:b,onError:_,isAudioVideoFilesEnabled:a}),E=f.useCallback(async(M="file")=>{if(t){const k=new Date(t);if(isNaN(k.getTime())){ne.error("Unparsable expiration timestamp from Box connector"),h(!0);return}if(k<new Date){const R=await m();y(R.api_key)}}h(!0),x(M)},[t,m]);return f.useEffect(()=>{p&&setTimeout(()=>{C(v)},100)},[p,C,v]),f.useMemo(()=>({isOpen:p,onOpen:E,onClose:b,cleanupPicker:S}),[S,p,b,E])},Nn="/account",pf="/org",ihe=()=>o.jsx("div",{className:"flex flex-1 items-center justify-end opacity-50",children:o.jsx(ce,{icon:ao,size:"sm"})}),Xt={Account:{show:!0,icon:JRe,href:`${Nn}/details`},ProPerks:{show:!0,icon:oPe,href:`${Nn}/pro-perks`},Preferences:{show:!0,icon:ePe,href:`${Nn}/preferences`},Personalize:{show:!0,icon:tPe,href:`${Nn}/personalize`},Assistant:{show:!0,icon:nPe,href:`${Nn}/assistant`},Connectors:{show:!0,icon:pie,href:`${Nn}/connectors`},Imports:{show:!0,icon:A7,href:`${Nn}/files`},Products:{show:!0,icon:iPe,href:`${Nn}/purchases`},API:{show:!0,icon:gPe,href:`${Nn}/api`},Enterprise:{show:!0,icon:UM,trailingComponent:o.jsx(ihe,{})},Reservations:{show:!0,icon:lPe,href:`${Nn}/reservations`},Notifications:{show:!0,icon:mie,href:`${Nn}/notifications`},Tasks:{show:!0,icon:aPe,href:`${Nn}/tasks`},Shortcuts:{show:!0,icon:rPe,href:`${Nn}/shortcuts`},SiteInstructions:{show:!0,icon:sPe,href:`${Nn}/site-instructions`}},Ba={Organization:{show:!0,icon:UM,href:`${Nn}${pf}/details`},Members:{show:!0,icon:mPe,href:`${Nn}${pf}/members`},"User access":{show:!0,icon:pPe,href:`${Nn}${pf}/user-access`},Permissions:{show:!0,icon:hPe,href:`${Nn}${pf}/permissions`},Insights:{show:!0,icon:hie,href:`${Nn}${pf}/insights`},"Org Connectors":{show:!0,icon:pie,href:`${Nn}${pf}/connectors`},"Org Imports":{show:!0,icon:A7,href:`${Nn}${pf}/files`}},Gs={APIGroup:{show:!0,icon:UM,href:`${Nn}/api/group`},APIMembers:{show:!0,icon:cPe,href:`${Nn}/api/members`},APIBilling:{show:!0,icon:uPe,href:`${Nn}/api/billing`},UsageMetrics:{show:!0,icon:hie,trailingComponent:o.jsx(ihe,{})},AccountLimits:{show:!0,icon:dPe,href:`${Nn}/api/limits`},APIKeys:{show:!0,icon:fPe,href:`${Nn}/api/keys`},APIFiles:{show:!0,icon:A7,href:`${Nn}/api/files`},APIPlayground:{show:!0,icon:gie,href:`${Nn}/api/playground/search`}},ret=()=>`${Nn}/details`,Cu=()=>Nn,lhe=({clientId:e})=>{const[t,n]=f.useState(!1);f.useEffect(()=>{if(!e)return;const s=document.createElement("script");return s.src="https://www.dropbox.com/static/api/2/dropins.js",s.id="dropboxjs",s.setAttribute("data-app-key",e),s.onload=()=>n(!0),s.onerror=()=>n(!1),document.body.appendChild(s),()=>{const a=document.getElementById("dropboxjs");a&&document.body.removeChild(a)}},[e]);const r=f.useCallback(s=>{if(!t)return;let a=s.mode==="source"?yF:vF;a=s.isAudioVideoFilesEnabled?a.concat(xF):a,window.Dropbox.choose({success:s.onPicked,error:i=>s.onError?.(i),multiselect:!0,extensions:a,folderselect:s.mode==="source"})},[t]);return f.useMemo(()=>({isReady:t,openPicker:r}),[t,r])},set=({clientId:e,isSpace:t=!1,fileRepoInfo:n,isAudioVideoFilesEnabled:r,reason:s})=>{const a=gt(),i=Z(),{deprecatedOpenToast:l}=gn(),{mutateAsync:c}=SF({reason:s}),{openPicker:u}=lhe({clientId:e}),d=Cu(),m=f.useCallback(g=>{const y=g.map(v=>v.id);c({connectorName:"dropbox",fileIds:y,fileRepoInfo:t?n:void 0}),t||a.push(`${d}/files?connector=dropbox&uploadCount=${y.length}`)},[a,c,t,n,d]),p=f.useCallback(g=>{ne.error("A Dropbox file picker error occured:",g),l(i.formatMessage({defaultMessage:"{formattedName} is not responding. Please try again later.",id:"oF/tZmXBik"},{formattedName:iu}),"error",5)},[i,l]),h=f.useCallback(g=>{u({mode:g,onPicked:m,onError:p,isAudioVideoFilesEnabled:r})},[u,m,p,r]);return f.useMemo(()=>({openPicker:h}),[h])};function aet({reason:e}){return vt({mutationFn:async({connectionType:t,content:n})=>{await QJe({connectionType:t,content:n,reason:e})}})}const che=({reason:e,mode:t})=>{const n=Z(),[r,s]=f.useState(!1),[a,i]=f.useState(null),{deprecatedOpenToast:l}=gn(),{openModal:c,closeModal:u}=xt(),{openPicker:d,toPickerDocument:m}=FJe(),{mutateAsync:p}=aet({reason:e}),h=f.useCallback(b=>{b.connector==="sharepoint"&&t==="attachment"?c("sharepointSiteModal",{onSelectSite:_=>{u(),b&&(s(!0),i({...b,webUrl:_}),d({...b,webUrl:_}))}}):(s(!0),i(b),b.connector==="onedrive"&&d(b))},[u,t,c,d]),g=f.useCallback(()=>{s(!1),i(null)},[s,i]),y=f.useCallback(b=>{ne.error("A Microsoft file picker error occured:",b),g(),l(n.formatMessage({defaultMessage:"{formattedName} is not responding. Please try again later.",id:"oF/tZmXBik"},{formattedName:ZWe}),"error",5)},[g,l,n]),v=f.useCallback((b,_)=>{p({connectionType:b,content:_})},[p]),x=f.useCallback(b=>{a&&(i({...a,webUrl:b}),d({...a,webUrl:b}))},[a,d]);return f.useMemo(()=>({onOpen:h,onClose:g,onError:y,onSelectSite:x,toPickerDocument:m,log:v,isOpen:r,options:a}),[r,v,g,y,h,x,a,m])},uhe=/(\[\d{1,3}\])/,oet=/(\[\d{1,3},\s*\{ts:.*\}\])/,e3=new RegExp(uhe.source+"|"+oet.source),CJt=(e,t)=>{if(e3.test(e))if(uhe.test(e)){const n=parseInt(e.substring(1,e.length-1))-1,r=t?.[n]??null;return r||void 0}else{const n=e.indexOf(","),r=parseInt(e.substring(1,n))-1,s=t?.[r]??null;if(!s)return;if(!s.url){ne.warn("[parseCitation] web_result has no url",{web_result:s});return}return s.url=iet(s.url,e),s}},iet=(e,t)=>{const n=e.split("&")[0],r=t.indexOf(":");if(r===-1)return n;const s=t.indexOf("}"),a=t.substring(r+1,s);return n+`&t=${a}`},dhe=e=>{const t=un.legacyParseBackendOutputStr(e);return t?t.answer.replace(e3,""):null};function cet(e,t){return e.startsWith("http")?e:t?`/discover/${t}/${e}`:`/page/${e}`}const uet=e=>{const t=e.mode==="article"?"/page":"/search";return{title:e.title??"",preview:dhe(e.first_answer),threadCount:e.query_count,lastUpdated:e.last_query_datetime,href:`${t}/${e.slug}`,rwToken:e.read_write_token,focus:e.search_focus??"internet",entryUUID:e.uuid,contextUUID:e.context_uuid,copilot:e.mode==="copilot",socialInfo:e.social_info,collectionUUID:e.collection?.uuid??null,authorImage:e.author_image??null,featuredImage:e?.featured_images?.[0]?.image??null,thumbnailImage:e?.featured_images?.[0]?.thumbnail??null,threadAccess:e.thread_access,collection:e.collection,mode:e.mode,expiry:e.expiry_time,source:e?.source??null,displayModel:e.display_model,slug:e.slug}},SJt=(e,t)=>({title:e.title??"",summary:e.summary??"",description:e.description??"",href:cet(e.slug,t),backendUUID:e.uuid,collectionUUID:e.collection?.uuid??null,authorImage:e.author_image??null,authorUsername:e.author_username??null,featuredImage:e?.featured_images?.[0]?.image??null,collection:e.collection,socialInfo:e.social_info,feedbackState:e.feedback_state,supportedFeedbacks:e.supported_feedbacks,accessLevel:e.access??e.thread_access,preview:e.description.replace(e3,""),offset:e.hero_offset,entryUUID:e.uuid,rwToken:e.read_write_token,lastUpdated:e.last_query_datetime,threadAccess:e.access,thumbnailImage:e?.featured_images?.[0]?.thumbnail??null,contextUUID:e.context_uuid,webResults:e.web_results_preview,feedUUID:e.feed_uuid}),EJt={gpt4_limit:"gpt4Limit",gpt4_total:"gpt4Total",opus_limit:"opusLimit",pages_limit:"pagesLimit",upload_limit:"uploadLimit",article_image_upload_limit:"articleImageUploadLimit",max_files_per_user:"maxFilesPerUser",max_files_per_repository:"maxFilesPerRepository",default_image_generation_model:"defaultImageGenerationModel",query_count:"queryCount",query_count_copilot:"queryCountCopilot",query_count_mobile:"queryCountMobile",has_ai_profile:"hasAiProfile",referral_code:"referralCode",referral_num_success:"referralNumSuccess",referral_num_coupons:"referralNumCoupons",disable_training:"disableTraining",is_sidebar_collapsed:"isSidebarCollapsed",is_sidebar_pinned:"isSidebarPinned",sidebar_hidden_hubs:"sidebarHiddenHubs",subscription_tier:"subscriptionTier",create_limit:"createLimit",notif_status:"notifStatus",email_status:"emailStatus",allow_article_creation:"allowArticleCreation",is_verified:"isVerified"};function det(e){return e||{connectors:[]}}const nY=e=>({hasLoadedSettings:!0,gpt4Limit:e?.gpt4_limit??0,gpt4Total:e?.gpt4_total??0,pplxAlphaLimit:e?.pplx_alpha_limit??0,pplxBetaLimit:e?.pplx_beta_limit??0,pagesLimit:e?.pages_limit??0,uploadLimit:e?.upload_limit,defaultImageGenerationModel:e?.default_image_generation_model??"default",articleImageUploadLimit:e?.article_image_upload_limit??0,maxFilesPerUser:e?.max_files_per_user??0,maxFilesPerRepository:e?.max_files_per_repository??0,queryCount:e?.query_count??0,queryCountCopilot:e?.query_count_copilot??0,queryCountMobile:e?.query_count_mobile??0,hasAiProfile:e?.has_ai_profile??!1,referralCode:e?.referral_code??"",referralNumSuccess:e?.referral_num_success??0,referralNumCoupons:e?.referral_num_coupons??0,disableTraining:e?.disable_training??!1,isSidebarCollapsed:e?.is_sidebar_collapsed??!1,isSidebarPinned:e?.is_sidebar_pinned??!1,sidebarHiddenHubs:e?.sidebar_hidden_hubs??[],subscriptionTier:e?.subscription_tier??e?.subscription_tier??"null",stripeStatus:e?.stripe_status??"none",revenuecatStatus:e?.revenuecat_status??"none",revenuecatSource:e?.revenuecat_source??"none",createLimit:e?.create_limit??0,notifStatus:e?.notif_status??"daily",emailStatus:e?.email_status??"daily",hasDataRetentionWarning:e?.has_data_retention_warning??!1,allowArticleCreation:e?.allow_article_creation??!1,isVerified:e?.is_verified??!1,connectors:det(e?.connectors),connectorLimits:e?.connector_limits??{global_file_count:void 0,repo_type_limits:{},max_file_size_mb:void 0,max_attachment_file_size_mb:void 0}});function fet(e,t){return e?e.place_widget_block&&t.place_widget_block?{...t,place_widget_block:{...e.place_widget_block,review_summary:t.place_widget_block.review_summary}}:e.shopping_widget_block&&t.shopping_widget_block?{...t,shopping_widget_block:{...e.shopping_widget_block,review_summary:t.shopping_widget_block.review_summary}}:t:t}var uP;(function(e){e.SAVE_PROFILE="save_profile",e.DELETE_PROFILE="delete_profile",e.TOGGLE_DISABLED="toggle_disabled"})(uP||(uP={}));const met=async({profileName:e,reason:t})=>{try{const{error:n,data:r}=await se.GET("/rest/auth/get_special_profile",t,{params:{query:{profile_name:e}},timeoutMs:1500,numRetries:1});if(n||!r)throw new Ce("API_CLIENTS_ERROR",{message:`Failed to get special profile ${e}`,cause:n});return{unlimitedProSearch:!!r.unlimited_pro_search,maxModelSelection:!!r.max_model_selection,unlimitedResearch:!!r.unlimited_research,fileUpload:!!r.file_upload}}catch(n){return ne.error(n),{unlimitedProSearch:!1,maxModelSelection:!1,unlimitedResearch:!1,fileUpload:!1}}},EF=async({reason:e})=>{try{const{error:t,data:n}=await se.GET("/rest/user/subscription/refresh",e,{timeoutMs:Pe(),headers:{"X-Perplexity-CSRF-Protection":"1"}});if(t)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to refresh subscription status",cause:t});return n}catch(t){return ne.error(t),null}},fhe={has_profile:!1,disabled:!1,bio:"",location:"",response_language:"",location_lng:"",location_lat:"",use_memory:!1,use_search_history:!1,language:""},pet=async({headers:e,reason:t})=>{try{const{error:n,data:r}=await se.GET("/rest/user/get_user_ai_profile",t,{timeoutMs:1500,numRetries:bu,headers:e});if(n||!r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get user profile",cause:n});return r}catch(n){return ne.error(n),fhe}},het=async({headers:e,reason:t})=>{try{const{error:n,data:r}=await se.GET("/rest/user/settings",t,{timeoutMs:1500,numRetries:bu,headers:e});if(n||!r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get user settings",cause:n});return nY(r)}catch(n){return ne.error(n),nY({})}},MJt=async({amount:e,headers:t,reason:n})=>{try{const{error:r,data:s}=await se.GET("/rest/shopping/user-discount-offer",n,{params:{query:{amount_micros:e}},headers:t});if(r||!s)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to fetch user discount offer",cause:r});return s}catch(r){return ne.error(r),{}}},kJt=async({action:e,location:t,response_language:n,bio:r,location_lat:s,location_lng:a,use_memory:i,use_search_history:l,reason:c})=>{const u={...t!==void 0&&{location:t},...n!==void 0&&{response_language:n},...r!==void 0&&{bio:r},...s!==void 0&&{location_lat:s},...a!==void 0&&{location_lng:a},...i!==void 0&&{use_memory:i},...l!==void 0&&{use_search_history:l},version:ac},{error:d,data:m}=await se.POST("/rest/user/save_user_ai_profile",c,{body:{action:e,updated_profile:u},timeoutMs:Pe(),numRetries:1});if(d)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to save user ai profile",cause:d});return m},rY=async({type:e,value:t,reason:n})=>{const r=e==="memory"?{use_memory:t}:{use_search_history:t},{error:s,data:a}=await se.POST("/rest/user/save_user_ai_profile",n,{timeoutMs:Pe(),numRetries:1,headers:{"content-type":"application/json"},body:{action:uP.SAVE_PROFILE,updated_profile:{...r,version:ac}}});if(s)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to update personal search settings",cause:s});return a},TJt=async({settings:e,reason:t})=>{const{error:n}=await se.PUT("/rest/user/save-settings",t,{body:{updated_settings:e},timeoutMs:Pe(),numRetries:1});if(n)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to save user settings",cause:n});return{status:"success"}},get=async({reason:e})=>{const{error:t,data:n}=await se.GET("/rest/user/previous-subscription",e,{timeoutMs:3e3,numRetries:1});if(t)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get user previous subscription",cause:t});return n},NJt=async({reason:e})=>{const{error:t,data:n}=await se.GET("/rest/user/carrier-billing-subscription",e,{timeoutMs:Pe({productionMs:2e3})});if(t)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to fetch carrier billing subscription status",cause:t});return n},yet=async({filters:e,skipToken:t,reason:n})=>{const{error:r,data:s}=await se.POST("/rest/connectors/sharepoint/sites",n,{body:{filters:e,skip_token:t},timeoutMs:Pe({productionMs:500}),numRetries:1});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to fetch sharepoint sites",cause:r});return{sites:s.sites,skipToken:s.skip_token}},jJt=async({orgId:e,reason:t,tokenName:n})=>{const{error:r,data:s}=await se.POST("/rest/pplx-api/v2/groups/{api_org_id}/api-keys",t,{params:{path:{api_org_id:e}},body:{token_name:n},timeoutMs:5e3});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to generate user api key v2",cause:r});return s},AJt=async({orgId:e,authToken:t,reason:n})=>{const{error:r,data:s}=await se.DELETE("/rest/pplx-api/v2/groups/{api_org_id}/api-keys",n,{params:{path:{api_org_id:e}},body:{auth_token:t},timeoutMs:5e3});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to delete user api key v2",cause:r});return s},vet=async({reason:e})=>{try{const{error:t,data:n}=await se.GET("/rest/auth/check_government_request_origin",e,{timeoutMs:1500,numRetries:bu});if(t||!n)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to check government origin",cause:t});return{isGovernmentRequestOrigin:n.is_government_request_origin}}catch(t){return ne.error(t),{isGovernmentRequestOrigin:!1}}},IJt=async({reason:e})=>{try{const{error:t,data:n}=await se.GET("/rest/user/site-instructions",e,{timeoutMs:1500,numRetries:bu});if(t||!n)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get user site instructions",cause:t});return n}catch(t){return ne.error(t),{site_instructions:{}}}},RJt=async({siteInstructions:e,reason:t})=>{const{error:n,data:r}=await se.PUT("/rest/user/site-instructions",t,{body:{site_instructions:e},timeoutMs:Pe(),numRetries:1});if(n||!r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to save user site instructions",cause:n});return r},PJt=async({site:e,reason:t})=>{const{error:n,data:r}=await se.POST("/rest/user/site-instructions/{site}/reset",t,{params:{path:{site:e}},timeoutMs:Pe(),numRetries:1});if(n||!r)throw new Ce("API_CLIENTS_ERROR",{message:`Failed to reset site instruction for ${e}`,cause:n});return r},xet=()=>{const e=jn("isCollapsed"),{device:{isWindowsApp:t}}=At();return e===null?t:e==="true"},ma=({enabled:e,reason:t,refetchOnMount:n})=>{const{locale:r}=Z(),s=r?{"accept-language":r}:{},a=async()=>het({headers:s,reason:t}),i=rt(),l=xet(),{data:c,refetch:u,isLoading:d,isStale:m}=We({enabled:i?typeof e>"u"?!0:e:!1,queryKey:q5(),queryFn:a,networkMode:"always",refetchOnMount:n});return f.useEffect(()=>{c&&mRe({queryCount:c.queryCount,queryCountCopilot:c.queryCountCopilot,queryCountMobile:c.queryCountMobile})},[c]),{...c?{...c,isSidebarCollapsed:l}:{hasLoadedSettings:!1,gpt4Limit:void 0,gpt4Total:void 0,pplxAlphaLimit:void 0,pplxBetaLimit:void 0,pagesLimit:0,uploadLimit:void 0,articleImageUploadLimit:0,defaultImageGenerationModel:"default",queryCount:void 0,queryCountCopilot:void 0,queryCountMobile:void 0,hasAiProfile:!1,referralCode:void 0,referralNumSuccess:void 0,referralNumCoupons:void 0,disableTraining:!1,defaultCopilot:!1,isSidebarCollapsed:l,subscriptionTier:void 0,stripeStatus:"none",revenuecatStatus:"none",revenuecatSource:"none",createLimit:0,notifStatus:void 0,emailStatus:void 0,hasDataRetentionWarning:!1,allowArticleCreation:!1,connectors:{connectors:ue},connectorLimits:{global_file_count:void 0,repo_type_limits:{},max_file_size_mb:void 0,max_attachment_file_size_mb:void 0}},refetch:u,isLoading:d,isStale:m}},Vb=({reason:e,enabled:t=!0})=>{const{connectors:n}=ma({reason:e,enabled:t}),r=f.useMemo(()=>(n?.connectors??[]).reduce((s,a)=>(s[a.name]=a,s),{}),[n]);return f.useMemo(()=>({connectorsMap:r}),[r])},MF=({reason:e})=>{const{connectors:t}=ma({reason:e}),{connectorsMap:n}=Vb({reason:e}),r=f.useMemo(()=>(t?.connectors??[]).filter(a=>(a.name==="google_drive"||a.name==="onedrive"||a.name==="sharepoint"||a.name==="dropbox"||a.name==="box")&&!n[a.name]?.connected),[n,t]),s=f.useMemo(()=>(t?.connectors??[]).filter(a=>!n[a.name]?.connected),[n,t]);return f.useMemo(()=>({disabledFileConnectors:r,disabledConnectors:s}),[s,r])};function Hi(e,t){ne.info("Redirecting window",{reason:t,url:window.location.href,redirect:pRe(e).toString()}),window.location.href=e}const t3=({reason:e})=>{const t=Nt(),n=t?.get("referrer"),r=t?.get("referrerId"),{$t:s}=Z(),{deprecatedOpenToast:a}=gn(),i=f.useCallback(async({connectorName:l,redirectPath:c,customReferrer:u,customReferrerId:d,unauthedRedirectPath:m})=>{const p=await HJe({name:l,referrer:u??n??void 0,referrerId:d??r??void 0,redirectPath:c??void 0,unauthedRedirectPath:m??void 0,reason:e});if(!p){a(s({defaultMessage:"Unable to start connection.",id:"SPIzcd/Xa2"}),"error",3);return}Hi(p,"File connector")},[e,n,r,s,a]);return f.useMemo(()=>({handleConnect:i}),[i])},kF=({mode:e})=>{const t=jt(),n=Zi(),{currentOpenedModal:r}=xt(),s=f.useMemo(()=>t?.startsWith("/collections")||t?.startsWith("/spaces")?r==="uploadFilesModal"?"space_sources":"space":t?.startsWith("/search")?"thread":t?.startsWith("/settings")?null:"ask",[t,r]),a=f.useMemo(()=>n===null?null:t?.startsWith("/collections")||t?.startsWith("/spaces")?n.slug?typeof n.slug=="string"?n.slug:n.slug[0]??null:null:t?.startsWith("/search")?t.split("/").pop()??null:t?.startsWith("/settings")?null:e??null,[t,n,e]),i=Cu(),l=f.useMemo(()=>{const c=`${i}/connectors`,u=new URLSearchParams;if(s){const d=Array.isArray(a)?a[0]:a;u.append("referrer",s),d&&u.append("referrerId",d)}return c+"?"+u.toString()},[s,a,i]);return f.useMemo(()=>({referrer:s,referrerId:a,redirectPath:l}),[l,s,a])},nl=({reason:e,collectionSlugOverride:t})=>{const n=jt(),r=Zi(),{firstResult:{collection_info:{uuid:s}={}}={}}=Vt(),a=n?.includes("/search/")&&!!s,i=t??(Array.isArray(r?.slug)?r.slug[0]:r?.slug),{collection:l}=cc({collectionSlug:i,reason:e}),c=f.useMemo(()=>{let u,d;return a?(u="COLLECTION",d=s??""):n?.includes("/collections")||n?.includes("/spaces")?(u="COLLECTION",d=l?.uuid||""):(u="ORG",d=""),{file_repository_type:u,owner_id:d}},[a,n,s,l?.uuid]);return f.useMemo(()=>({fileRepoInfo:c}),[c])},mhe=({fileRepositoryType:e,offset:t,searchTerm:n,ownerId:r,reason:s})=>{const{$t:a}=Z(),i=ht(),l=Zi(),{deprecatedOpenToast:c}=gn(),{isEnterprise:u}=_n({reason:s}),d=my(),m=K5(e,r,_o,t,n),p=rF(r),h=Array.isArray(l?.slug)?l.slug[0]:l?.slug,g=h?eF(h):void 0,y=e==="USER"||e==="ORG"||e==="COLLECTION"&&!!r;return{...vt({mutationFn:async x=>{if(!y){c(a({defaultMessage:"Unable to delete files.",id:"QYfmPDehhb"}),"error",3);return}return XJe({request:{file_uuids:x,file_repository_info:{file_repository_type:e,owner_id:r}},reason:s})},onMutate:async x=>{await i.cancelQueries({queryKey:m});const b=i.getQueryData(m);return b&&i.setQueryData(m,_=>({..._,completedFiles:_.completedFiles.filter(w=>!x.includes(w.file_uuid)),processingFiles:_.processingFiles.filter(w=>!x.includes(w.file_uuid)),failedFiles:_.failedFiles.filter(w=>!x.includes(w.file_uuid)),numTotalFiles:Math.max((_.numTotalFiles||0)-x.length,0)})),{previousData:b}},onSuccess:()=>{u&&i.invalidateQueries({queryKey:d}),i.invalidateQueries({queryKey:m}),h&&i.invalidateQueries({queryKey:g}),i.invalidateQueries({queryKey:p})},onError:(x,b,_)=>{_?.previousData&&i.setQueryData(m,_.previousData),c(a({defaultMessage:"Failed to delete file",id:"aJlra1/tgY"}),"error",3)}}),isDeleteEnabled:y}},bet=({fileRepoInfo:e,reason:t})=>{const n=ht(),r=Zi(),s=my(),a=Array.isArray(r?.slug)?r.slug[0]:r?.slug,i=a?eF(a):void 0,l=K5(e.file_repository_type,e.owner_id,_o,0,""),c=["list_file_directory",e.file_repository_type,e.owner_id];return vt({mutationFn:async u=>{await gF({request:{file_repository_info:e,file_index_params:[{file_s3_url:u.file_s3_url,file_size:u.size,filename:u.name,file_uuid:u.file_uuid,replace_existing:!0}]},reason:t})},onMutate:async u=>{await n.cancelQueries({queryKey:l});const d={...u,state:"PROCESSING",error:void 0};return n.setQueriesData({queryKey:l},m=>{if(!m)return m;const p=m.completedFiles.filter(y=>y.name!==d.name),h=m.failedFiles.filter(y=>y.file_uuid!==d.file_uuid),g=[...m.processingFiles||[],d];return{...m,completedFiles:p,processingFiles:g,failedFiles:h}}),d},onSettled:()=>{n.invalidateQueries({queryKey:c}),e.file_repository_type==="ORG"&&n.invalidateQueries({queryKey:s}),a&&n.invalidateQueries({queryKey:i})}})},sY=10,_et=async(e,t)=>{const s=new FormData;Object.entries(t.fields).forEach(([i,l])=>{s.append(i,l)}),s.append("file",e);let a=null;for(let i=0;i<1;i++)try{i>0&&await new Promise(c=>setTimeout(c,2e3));const l=await fetch(t.s3_bucket_url,{method:"POST",body:s});if(!l.ok)throw new Error(`HTTP error ${l.status}: ${l.statusText}`);return}catch(l){a=l instanceof Error?l:new Error(String(l))}throw new Error(`UPLOAD_FAILED after 1 attempts: ${a?.message||"Unknown error"}`)},phe=({fileRepoInfo:e,setTotalFilesUploading:t,replaceExisting:n,reason:r,onLocalFileUploadSuccess:s})=>{const{$t:a}=Z(),i=ht(),l=my(),c=Zi(),u=Array.isArray(c?.slug)?c.slug[0]:c?.slug,d=u?eF(u):void 0,{deprecatedOpenToast:m}=gn(),{session:p}=Et(),h=p?.user?.email??"",g=ma({reason:r}),y=["list_file_directory",e.file_repository_type,e.owner_id],v=["list_file_directory_infinite",e.file_repository_type,e.owner_id],x=e.file_repository_type==="USER"||e.file_repository_type==="ORG"||e.file_repository_type==="COLLECTION"&&!!e.owner_id;return{...vt({mutationFn:async _=>{if(!x){m(a({defaultMessage:"Unable to upload files.",id:"GrtfijFWiu"}),"error",3);return}t(_.length);for(let w=0;w<_.length;w+=sY){const C=_.slice(w,w+sY),S=await vJe({request:{file_upload_params:C.map(A=>({filename:A.name,content_type:A.type,file_size:A.size})),file_repository_info:e},reason:r}),E=S.limits_reached[0];if(E==="FILE_REPOSITORY_LIMIT_EXCEEDED"){const A=g.maxFilesPerRepository;m(a({defaultMessage:"You have reached the file limit of {limit} files per repository.",id:"J0uyf2gB1u"},{limit:A}),"error",3);break}else if(E==="USER_FILE_LIMIT_EXCEEDED"){const A=g.maxFilesPerUser;m(a({defaultMessage:"You've reached your total file limit of {limit} files across My Files and all Spaces. Delete some files or upgrade your plan to add more",id:"3CuAQ4xs/C"},{limit:A}),"error",3);break}const k=(await Promise.allSettled(S.file_url_params.map((A,R)=>A&&C[R]?{fileUploadUrlInfo:A,file:C[R]}:null).filter(A=>A!==null).map(async({fileUploadUrlInfo:A,file:R})=>{try{return await _et(R,A),{file_s3_url:A.s3_object_url,filename:R.name,file_size:R.size,file_uuid:A.file_uuid,replace_existing:n}}catch(O){throw m(a({defaultMessage:"Failed to upload file",id:"x2gE8tKhMn"}),"error",3),O}}))).filter(A=>A.status==="fulfilled").map(A=>A.value);if(k.length>0&&await gF({request:{file_repository_info:e,file_index_params:k},reason:r}),S.limits_reached.length>0)break}},onMutate:async _=>{await i.cancelQueries({queryKey:y});const w=i.getQueryData(y),C=_.map(S=>({name:S.name,file_s3_url:"",file_title:null,file_description:null,file_uuid:crypto.randomUUID(),uploadedBy:h,state:"PROCESSING",size:S.size,date:new Date().toLocaleString(),isOptimistic:!0}));return i.setQueriesData({queryKey:y},S=>S&&{...S,processingFiles:[...S.processingFiles||[],...C]}),{previousData:w,optimisticFiles:C,uploadedFilesCount:_.length}},onError:(_,w,C)=>{m(a({defaultMessage:"Failed to upload file",id:"x2gE8tKhMn"}),"error",3),C?.previousData&&i.setQueriesData({queryKey:y},C.previousData)},onSettled:()=>{i.invalidateQueries({queryKey:y}),i.invalidateQueries({queryKey:v}),i.invalidateQueries({queryKey:["connector-files"]}),i.invalidateQueries({queryKey:["connector-files-infinite"]}),e.file_repository_type==="ORG"&&i.invalidateQueries({queryKey:l}),u&&i.invalidateQueries({queryKey:d})},onSuccess:()=>{s?.()}}),isUploadEnabled:x}},hhe=({reason:e,onLocalFileUploadSuccess:t,collectionSlugOverride:n})=>{const r=ht(),{fileRepoInfo:s}=nl({reason:e,collectionSlugOverride:n}),[a,i]=f.useState(0),[l,c]=f.useState(""),[u,d]=f.useState(0),{mutate:m}=phe({fileRepoInfo:s,setTotalFilesUploading:d,reason:e,onLocalFileUploadSuccess:t}),{mutate:p}=mhe({fileRepositoryType:s.file_repository_type,offset:a,searchTerm:l,ownerId:s.owner_id,reason:e}),{mutate:h}=bet({fileRepoInfo:s,reason:e}),g=f.useCallback(b=>{p(b),u>0&&d(u-b.length)},[p,u]),y=f.useCallback(b=>{d(_=>_+1),h(b)},[h]),v=f.useCallback(b=>{r.setQueryData(["list_file_directory",s.file_repository_type,s.owner_id,_o,a,l],_=>({..._,processingFiles:[],failedFiles:[],numTotalFiles:Math.max(0,(_?.numTotalFiles??0)-b.length)})),p(b.map(_=>_.file_uuid))},[s.file_repository_type,s.owner_id,a,l,r,p]),x=f.useCallback(async b=>{const _=[],w=async C=>{if(C.isFile){const S=await new Promise(E=>C.file(E));S.type!==""&&_.push(S)}else if(C.isDirectory){const S=C.createReader(),E=await new Promise(M=>S.readEntries(M));await Promise.all(E.map(w))}};b instanceof FileList?Array.from(b).forEach(C=>_.push(C)):await Promise.all(Array.from(b).map(async C=>{if(C.kind==="file"){const S=C.webkitGetAsEntry();S&&await w(S)}})),_.length>0&&m(_)},[m]);return f.useMemo(()=>({offset:a,setOffset:i,searchTerm:l,setSearchTerm:c,totalFilesUploading:u,setTotalFilesUploading:d,handleRemoveFiles:g,handleReplaceExistingFile:y,handleClearAllFiles:v,handleFileSelect:x}),[v,x,g,y,a,l,u])};var yN={},vN={},Ww={},xN={},aY;function $b(){return aY||(aY=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BANDIT_ASSIGNMENT_SHARDS=e.MAX_EVENT_QUEUE_SIZE=e.NULL_SENTINEL=e.SESSION_ASSIGNMENT_CONFIG_LOADED=e.BANDIT_ENDPOINT=e.UFC_ENDPOINT=e.BASE_URL=e.DEFAULT_POLL_CONFIG_REQUEST_RETRIES=e.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES=e.POLL_JITTER_PCT=e.POLL_INTERVAL_MS=e.REQUEST_TIMEOUT_MILLIS=e.DEFAULT_REQUEST_TIMEOUT_MS=void 0,e.DEFAULT_REQUEST_TIMEOUT_MS=5e3,e.REQUEST_TIMEOUT_MILLIS=e.DEFAULT_REQUEST_TIMEOUT_MS,e.POLL_INTERVAL_MS=3e4,e.POLL_JITTER_PCT=.1,e.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES=1,e.DEFAULT_POLL_CONFIG_REQUEST_RETRIES=7,e.BASE_URL="https://fscdn.eppo.cloud/api",e.UFC_ENDPOINT="/flag-config/v1/config",e.BANDIT_ENDPOINT="/flag-config/v1/bandits",e.SESSION_ASSIGNMENT_CONFIG_LOADED="eppo-session-assignment-config-loaded",e.NULL_SENTINEL="EPPO_NULL",e.MAX_EVENT_QUEUE_SIZE=100,e.BANDIT_ASSIGNMENT_SHARDS=1e4}(xN)),xN}var oY;function ghe(){if(oY)return Ww;oY=1,Object.defineProperty(Ww,"__esModule",{value:!0});const e=$b();class t{constructor(r){var s;this.params=r,this.params.baseUrl=(s=r.baseUrl)!==null&&s!==void 0?s:e.BASE_URL}endpoint(r){var s;const a=new URL(this.params.baseUrl+r);return Object.entries((s=this.params.queryParams)!==null&&s!==void 0?s:{}).forEach(([i,l])=>a.searchParams.append(i,l)),a}ufcEndpoint(){return this.endpoint(e.UFC_ENDPOINT)}banditParametersEndpoint(){return this.endpoint(e.BANDIT_ENDPOINT)}}return Ww.default=t,Ww}var hf={},E0={exports:{}},bN,iY;function wet(){if(iY)return bN;iY=1;function e(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}bN=t;function t(n,r,s){var a=s&&s.stringify||e,i=1;if(typeof n=="object"&&n!==null){var l=r.length+i;if(l===1)return n;var c=new Array(l);c[0]=a(n);for(var u=1;u<l;u++)c[u]=a(r[u]);return c.join(" ")}if(typeof n!="string")return n;var d=r.length;if(d===0)return n;for(var m="",p=1-i,h=-1,g=n&&n.length||0,y=0;y<g;){if(n.charCodeAt(y)===37&&y+1<g){switch(h=h>-1?h:0,n.charCodeAt(y+1)){case 100:case 102:if(p>=d||r[p]==null)break;h<y&&(m+=n.slice(h,y)),m+=Number(r[p]),h=y+2,y++;break;case 105:if(p>=d||r[p]==null)break;h<y&&(m+=n.slice(h,y)),m+=Math.floor(Number(r[p])),h=y+2,y++;break;case 79:case 111:case 106:if(p>=d||r[p]===void 0)break;h<y&&(m+=n.slice(h,y));var v=typeof r[p];if(v==="string"){m+="'"+r[p]+"'",h=y+2,y++;break}if(v==="function"){m+=r[p].name||"<anonymous>",h=y+2,y++;break}m+=a(r[p]),h=y+2,y++;break;case 115:if(p>=d)break;h<y&&(m+=n.slice(h,y)),m+=String(r[p]),h=y+2,y++;break;case 37:h<y&&(m+=n.slice(h,y)),m+="%",h=y+2,y++,p--;break}++p}++y}return h===-1?n:(h<g&&(m+=n.slice(h)),m)}return bN}var lY;function Cet(){if(lY)return E0.exports;lY=1;const e=wet();E0.exports=d;const t=P().console||{},n={mapHttpRequest:E,mapHttpResponse:E,wrapRequestSerializer:M,wrapResponseSerializer:M,wrapErrorSerializer:M,req:E,res:E,err:C,errWithCause:C};function r(N,T){return N==="silent"?1/0:T.levels.values[N]}const s=Symbol("pino.logFuncs"),a=Symbol("pino.hierarchy"),i={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function l(N,T){const j={logger:T,parent:N[a]};T[a]=j}function c(N,T,j){const F={};T.forEach(U=>{F[U]=j[U]?j[U]:t[U]||t[i[U]||"log"]||k}),N[s]=F}function u(N,T){return Array.isArray(N)?N.filter(function(F){return F!=="!stdSerializers.err"}):N===!0?Object.keys(T):!1}function d(N){N=N||{},N.browser=N.browser||{};const T=N.browser.transmit;if(T&&typeof T.send!="function")throw Error("pino: transmit option must have a send function");const j=N.browser.write||t;N.browser.write&&(N.browser.asObject=!0);const F=N.serializers||{},U=u(N.browser.serialize,F);let V=N.browser.serialize;Array.isArray(N.browser.serialize)&&N.browser.serialize.indexOf("!stdSerializers.err")>-1&&(V=!1);const $=Object.keys(N.customLevels||{}),z=["error","fatal","warn","info","debug","trace"].concat($);typeof j=="function"&&z.forEach(function(te){j[te]=j}),(N.enabled===!1||N.browser.disabled)&&(N.level="silent");const Q=N.level||"info",Y=Object.create(j);Y.log||(Y.log=k),c(Y,z,j),l({},Y),Object.defineProperty(Y,"levelVal",{get:X}),Object.defineProperty(Y,"level",{get:G,set:J});const W={transmit:T,serialize:U,asObject:N.browser.asObject,formatters:N.browser.formatters,levels:z,timestamp:S(N)};Y.levels=m(N),Y.level=Q,Y.setMaxListeners=Y.getMaxListeners=Y.emit=Y.addListener=Y.on=Y.prependListener=Y.once=Y.prependOnceListener=Y.removeListener=Y.removeAllListeners=Y.listeners=Y.listenerCount=Y.eventNames=Y.write=Y.flush=k,Y.serializers=F,Y._serialize=U,Y._stdErrSerialize=V,Y.child=q,T&&(Y._logEvent=w());function X(){return r(this.level,this)}function G(){return this._level}function J(te){if(te!=="silent"&&!this.levels.values[te])throw Error("unknown level "+te);this._level=te,g(this,W,Y,"error"),g(this,W,Y,"fatal"),g(this,W,Y,"warn"),g(this,W,Y,"info"),g(this,W,Y,"debug"),g(this,W,Y,"trace"),$.forEach(re=>{g(this,W,Y,re)})}function q(te,re){if(!te)throw new Error("missing bindings for child Pino");re=re||{},U&&te.serializers&&(re.serializers=te.serializers);const ae=re.serializers;if(U&&ae){var fe=Object.assign({},F,ae),de=N.browser.serialize===!0?Object.keys(fe):U;delete te.serializers,b([te],de,fe,this._stdErrSerialize)}function ve(Se){this._childLevel=(Se._childLevel|0)+1,this.bindings=te,fe&&(this.serializers=fe,this._serialize=de),T&&(this._logEvent=w([].concat(Se._logEvent.bindings,te)))}ve.prototype=this;const _e=new ve(this);return l(this,_e),_e.level=this.level,_e}return Y}function m(N){const T=N.customLevels||{},j=Object.assign({},d.levels.values,T),F=Object.assign({},d.levels.labels,p(T));return{values:j,labels:F}}function p(N){const T={};return Object.keys(N).forEach(function(j){T[N[j]]=j}),T}d.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},d.stdSerializers=n,d.stdTimeFunctions=Object.assign({},{nullTime:A,epochTime:R,unixTime:O,isoTime:L});function h(N){const T=[];N.bindings&&T.push(N.bindings);let j=N[a];for(;j.parent;)j=j.parent,j.logger.bindings&&T.push(j.logger.bindings);return T.reverse()}function g(N,T,j,F){if(Object.defineProperty(N,F,{value:r(N.level,j)>r(F,j)?k:j[s][F],writable:!0,enumerable:!0,configurable:!0}),!T.transmit&&N[F]===k)return;N[F]=v(N,T,j,F);const U=h(N);U.length!==0&&(N[F]=y(U,N[F]))}function y(N,T){return function(){return T.apply(this,[...N,...arguments])}}function v(N,T,j,F){return function(U){return function(){const $=T.timestamp(),z=new Array(arguments.length),Q=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var Y=0;Y<z.length;Y++)z[Y]=arguments[Y];if(T.serialize&&!T.asObject&&b(z,this._serialize,this.serializers,this._stdErrSerialize),T.asObject||T.formatters?U.call(Q,x(this,F,z,$,T.formatters)):U.apply(Q,z),T.transmit){const W=T.transmit.level||N._level,X=j.levels.values[W],G=j.levels.values[F];if(G<X)return;_(this,{ts:$,methodLevel:F,methodValue:G,transmitValue:j.levels.values[T.transmit.level||N._level],send:T.transmit.send,val:r(N._level,j)},z)}}}(N[s][F])}function x(N,T,j,F,U={}){const{level:V=()=>N.levels.values[T],log:$=G=>G}=U;N._serialize&&b(j,N._serialize,N.serializers,N._stdErrSerialize);const z=j.slice();let Q=z[0];const Y={};F&&(Y.time=F),Y.level=V(T,N.levels.values[T]);let W=(N._childLevel|0)+1;if(W<1&&(W=1),Q!==null&&typeof Q=="object"){for(;W--&&typeof z[0]=="object";)Object.assign(Y,z.shift());Q=z.length?e(z.shift(),z):void 0}else typeof Q=="string"&&(Q=e(z.shift(),z));return Q!==void 0&&(Y.msg=Q),$(Y)}function b(N,T,j,F){for(const U in N)if(F&&N[U]instanceof Error)N[U]=d.stdSerializers.err(N[U]);else if(typeof N[U]=="object"&&!Array.isArray(N[U]))for(const V in N[U])T&&T.indexOf(V)>-1&&V in j&&(N[U][V]=j[V](N[U][V]))}function _(N,T,j){const F=T.send,U=T.ts,V=T.methodLevel,$=T.methodValue,z=T.val,Q=N._logEvent.bindings;b(j,N._serialize||Object.keys(N.serializers),N.serializers,N._stdErrSerialize===void 0?!0:N._stdErrSerialize),N._logEvent.ts=U,N._logEvent.messages=j.filter(function(Y){return Q.indexOf(Y)===-1}),N._logEvent.level.label=V,N._logEvent.level.value=$,F(V,N._logEvent,z),N._logEvent=w(Q)}function w(N){return{ts:0,messages:[],bindings:N||[],level:{label:"",value:0}}}function C(N){const T={type:N.constructor.name,msg:N.message,stack:N.stack};for(const j in N)T[j]===void 0&&(T[j]=N[j]);return T}function S(N){return typeof N.timestamp=="function"?N.timestamp:N.timestamp===!1?A:R}function E(){return{}}function M(N){return N}function k(){}function A(){return!1}function R(){return Date.now()}function O(){return Math.round(Date.now()/1e3)}function L(){return new Date(Date.now()).toISOString()}function P(){function N(T){return typeof T<"u"&&T}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return N(self)||N(window)||N(this)||{}}}return E0.exports.default=d,E0.exports.pino=d,E0.exports}var cY;function n3(){if(cY)return hf;cY=1,Object.defineProperty(hf,"__esModule",{value:!0}),hf.logger=hf.loggerPrefix=void 0;const e=Cet();return hf.loggerPrefix="[Eppo SDK]",hf.logger=(0,e.default)({level:"warn",browser:{disabled:!0}}),hf}var mo={},vc={},SS={exports:{}},Eet=SS.exports,uY;function Met(){return uY||(uY=1,function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:typeof window<"u"?window:typeof ko<"u"?ko:Eet,function(){var n="3.7.7",r=n,s=typeof Buffer=="function",a=typeof TextDecoder=="function"?new TextDecoder:void 0,i=typeof TextEncoder=="function"?new TextEncoder:void 0,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=Array.prototype.slice.call(l),u=function(W){var X={};return W.forEach(function(G,J){return X[G]=J}),X}(c),d=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,m=String.fromCharCode.bind(String),p=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(W){return new Uint8Array(Array.prototype.slice.call(W,0))},h=function(W){return W.replace(/=/g,"").replace(/[+\/]/g,function(X){return X=="+"?"-":"_"})},g=function(W){return W.replace(/[^A-Za-z0-9\+\/]/g,"")},y=function(W){for(var X,G,J,q,te="",re=W.length%3,ae=0;ae<W.length;){if((G=W.charCodeAt(ae++))>255||(J=W.charCodeAt(ae++))>255||(q=W.charCodeAt(ae++))>255)throw new TypeError("invalid character found");X=G<<16|J<<8|q,te+=c[X>>18&63]+c[X>>12&63]+c[X>>6&63]+c[X&63]}return re?te.slice(0,re-3)+"===".substring(re):te},v=typeof btoa=="function"?function(W){return btoa(W)}:s?function(W){return Buffer.from(W,"binary").toString("base64")}:y,x=s?function(W){return Buffer.from(W).toString("base64")}:function(W){for(var X=4096,G=[],J=0,q=W.length;J<q;J+=X)G.push(m.apply(null,W.subarray(J,J+X)));return v(G.join(""))},b=function(W,X){return X===void 0&&(X=!1),X?h(x(W)):x(W)},_=function(W){if(W.length<2){var X=W.charCodeAt(0);return X<128?W:X<2048?m(192|X>>>6)+m(128|X&63):m(224|X>>>12&15)+m(128|X>>>6&63)+m(128|X&63)}else{var X=65536+(W.charCodeAt(0)-55296)*1024+(W.charCodeAt(1)-56320);return m(240|X>>>18&7)+m(128|X>>>12&63)+m(128|X>>>6&63)+m(128|X&63)}},w=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,C=function(W){return W.replace(w,_)},S=s?function(W){return Buffer.from(W,"utf8").toString("base64")}:i?function(W){return x(i.encode(W))}:function(W){return v(C(W))},E=function(W,X){return X===void 0&&(X=!1),X?h(S(W)):S(W)},M=function(W){return E(W,!0)},k=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,A=function(W){switch(W.length){case 4:var X=(7&W.charCodeAt(0))<<18|(63&W.charCodeAt(1))<<12|(63&W.charCodeAt(2))<<6|63&W.charCodeAt(3),G=X-65536;return m((G>>>10)+55296)+m((G&1023)+56320);case 3:return m((15&W.charCodeAt(0))<<12|(63&W.charCodeAt(1))<<6|63&W.charCodeAt(2));default:return m((31&W.charCodeAt(0))<<6|63&W.charCodeAt(1))}},R=function(W){return W.replace(k,A)},O=function(W){if(W=W.replace(/\s+/g,""),!d.test(W))throw new TypeError("malformed base64.");W+="==".slice(2-(W.length&3));for(var X,G="",J,q,te=0;te<W.length;)X=u[W.charAt(te++)]<<18|u[W.charAt(te++)]<<12|(J=u[W.charAt(te++)])<<6|(q=u[W.charAt(te++)]),G+=J===64?m(X>>16&255):q===64?m(X>>16&255,X>>8&255):m(X>>16&255,X>>8&255,X&255);return G},L=typeof atob=="function"?function(W){return atob(g(W))}:s?function(W){return Buffer.from(W,"base64").toString("binary")}:O,P=s?function(W){return p(Buffer.from(W,"base64"))}:function(W){return p(L(W).split("").map(function(X){return X.charCodeAt(0)}))},N=function(W){return P(j(W))},T=s?function(W){return Buffer.from(W,"base64").toString("utf8")}:a?function(W){return a.decode(P(W))}:function(W){return R(L(W))},j=function(W){return g(W.replace(/[-_]/g,function(X){return X=="-"?"+":"/"}))},F=function(W){return T(j(W))},U=function(W){if(typeof W!="string")return!1;var X=W.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(X)||!/[^\s0-9a-zA-Z\-_]/.test(X)},V=function(W){return{value:W,enumerable:!1,writable:!0,configurable:!0}},$=function(){var W=function(X,G){return Object.defineProperty(String.prototype,X,V(G))};W("fromBase64",function(){return F(this)}),W("toBase64",function(X){return E(this,X)}),W("toBase64URI",function(){return E(this,!0)}),W("toBase64URL",function(){return E(this,!0)}),W("toUint8Array",function(){return N(this)})},z=function(){var W=function(X,G){return Object.defineProperty(Uint8Array.prototype,X,V(G))};W("toBase64",function(X){return b(this,X)}),W("toBase64URI",function(){return b(this,!0)}),W("toBase64URL",function(){return b(this,!0)})},Q=function(){$(),z()},Y={version:n,VERSION:r,atob:L,atobPolyfill:O,btoa:v,btoaPolyfill:y,fromBase64:F,toBase64:E,encode:E,encodeURI:M,encodeURL:M,utob:C,btou:R,decode:F,isValid:U,fromUint8Array:b,toUint8Array:N,extendString:$,extendUint8Array:z,extendBuiltins:Q};return Y.Base64={},Object.keys(Y).forEach(function(W){return Y.Base64[W]=Y[W]}),Y})}(SS)),SS.exports}var _N={exports:{}},wN={exports:{}},dY;function ket(){return dY||(dY=1,function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(n,r){return n<<r|n>>>32-r},rotr:function(n,r){return n<<32-r|n>>>r},endian:function(n){if(n.constructor==Number)return t.rotl(n,8)&16711935|t.rotl(n,24)&4278255360;for(var r=0;r<n.length;r++)n[r]=t.endian(n[r]);return n},randomBytes:function(n){for(var r=[];n>0;n--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(n){for(var r=[],s=0,a=0;s<n.length;s++,a+=8)r[a>>>5]|=n[s]<<24-a%32;return r},wordsToBytes:function(n){for(var r=[],s=0;s<n.length*32;s+=8)r.push(n[s>>>5]>>>24-s%32&255);return r},bytesToHex:function(n){for(var r=[],s=0;s<n.length;s++)r.push((n[s]>>>4).toString(16)),r.push((n[s]&15).toString(16));return r.join("")},hexToBytes:function(n){for(var r=[],s=0;s<n.length;s+=2)r.push(parseInt(n.substr(s,2),16));return r},bytesToBase64:function(n){for(var r=[],s=0;s<n.length;s+=3)for(var a=n[s]<<16|n[s+1]<<8|n[s+2],i=0;i<4;i++)s*8+i*6<=n.length*8?r.push(e.charAt(a>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],s=0,a=0;s<n.length;a=++s%4)a!=0&&r.push((e.indexOf(n.charAt(s-1))&Math.pow(2,-2*a+8)-1)<<a*2|e.indexOf(n.charAt(s))>>>6-a*2);return r}};wN.exports=t}()),wN.exports}var CN,fY;function mY(){if(fY)return CN;fY=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r)&255);return n},bytesToString:function(t){for(var n=[],r=0;r<t.length;r++)n.push(String.fromCharCode(t[r]));return n.join("")}}};return CN=e,CN}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var SN,pY;function Tet(){if(pY)return SN;pY=1,SN=function(n){return n!=null&&(e(n)||t(n)||!!n._isBuffer)};function e(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function t(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}return SN}var hY;function Net(){return hY||(hY=1,function(){var e=ket(),t=mY().utf8,n=Tet(),r=mY().bin,s=function(a,i){a.constructor==String?i&&i.encoding==="binary"?a=r.stringToBytes(a):a=t.stringToBytes(a):n(a)?a=Array.prototype.slice.call(a,0):!Array.isArray(a)&&a.constructor!==Uint8Array&&(a=a.toString());for(var l=e.bytesToWords(a),c=a.length*8,u=1732584193,d=-271733879,m=-1732584194,p=271733878,h=0;h<l.length;h++)l[h]=(l[h]<<8|l[h]>>>24)&16711935|(l[h]<<24|l[h]>>>8)&4278255360;l[c>>>5]|=128<<c%32,l[(c+64>>>9<<4)+14]=c;for(var g=s._ff,y=s._gg,v=s._hh,x=s._ii,h=0;h<l.length;h+=16){var b=u,_=d,w=m,C=p;u=g(u,d,m,p,l[h+0],7,-680876936),p=g(p,u,d,m,l[h+1],12,-389564586),m=g(m,p,u,d,l[h+2],17,606105819),d=g(d,m,p,u,l[h+3],22,-1044525330),u=g(u,d,m,p,l[h+4],7,-176418897),p=g(p,u,d,m,l[h+5],12,1200080426),m=g(m,p,u,d,l[h+6],17,-1473231341),d=g(d,m,p,u,l[h+7],22,-45705983),u=g(u,d,m,p,l[h+8],7,1770035416),p=g(p,u,d,m,l[h+9],12,-1958414417),m=g(m,p,u,d,l[h+10],17,-42063),d=g(d,m,p,u,l[h+11],22,-1990404162),u=g(u,d,m,p,l[h+12],7,1804603682),p=g(p,u,d,m,l[h+13],12,-40341101),m=g(m,p,u,d,l[h+14],17,-1502002290),d=g(d,m,p,u,l[h+15],22,1236535329),u=y(u,d,m,p,l[h+1],5,-165796510),p=y(p,u,d,m,l[h+6],9,-1069501632),m=y(m,p,u,d,l[h+11],14,643717713),d=y(d,m,p,u,l[h+0],20,-373897302),u=y(u,d,m,p,l[h+5],5,-701558691),p=y(p,u,d,m,l[h+10],9,38016083),m=y(m,p,u,d,l[h+15],14,-660478335),d=y(d,m,p,u,l[h+4],20,-405537848),u=y(u,d,m,p,l[h+9],5,568446438),p=y(p,u,d,m,l[h+14],9,-1019803690),m=y(m,p,u,d,l[h+3],14,-187363961),d=y(d,m,p,u,l[h+8],20,1163531501),u=y(u,d,m,p,l[h+13],5,-1444681467),p=y(p,u,d,m,l[h+2],9,-51403784),m=y(m,p,u,d,l[h+7],14,1735328473),d=y(d,m,p,u,l[h+12],20,-1926607734),u=v(u,d,m,p,l[h+5],4,-378558),p=v(p,u,d,m,l[h+8],11,-2022574463),m=v(m,p,u,d,l[h+11],16,1839030562),d=v(d,m,p,u,l[h+14],23,-35309556),u=v(u,d,m,p,l[h+1],4,-1530992060),p=v(p,u,d,m,l[h+4],11,1272893353),m=v(m,p,u,d,l[h+7],16,-155497632),d=v(d,m,p,u,l[h+10],23,-1094730640),u=v(u,d,m,p,l[h+13],4,681279174),p=v(p,u,d,m,l[h+0],11,-358537222),m=v(m,p,u,d,l[h+3],16,-722521979),d=v(d,m,p,u,l[h+6],23,76029189),u=v(u,d,m,p,l[h+9],4,-640364487),p=v(p,u,d,m,l[h+12],11,-421815835),m=v(m,p,u,d,l[h+15],16,530742520),d=v(d,m,p,u,l[h+2],23,-995338651),u=x(u,d,m,p,l[h+0],6,-198630844),p=x(p,u,d,m,l[h+7],10,1126891415),m=x(m,p,u,d,l[h+14],15,-1416354905),d=x(d,m,p,u,l[h+5],21,-57434055),u=x(u,d,m,p,l[h+12],6,1700485571),p=x(p,u,d,m,l[h+3],10,-1894986606),m=x(m,p,u,d,l[h+10],15,-1051523),d=x(d,m,p,u,l[h+1],21,-2054922799),u=x(u,d,m,p,l[h+8],6,1873313359),p=x(p,u,d,m,l[h+15],10,-30611744),m=x(m,p,u,d,l[h+6],15,-1560198380),d=x(d,m,p,u,l[h+13],21,1309151649),u=x(u,d,m,p,l[h+4],6,-145523070),p=x(p,u,d,m,l[h+11],10,-1120210379),m=x(m,p,u,d,l[h+2],15,718787259),d=x(d,m,p,u,l[h+9],21,-343485551),u=u+b>>>0,d=d+_>>>0,m=m+w>>>0,p=p+C>>>0}return e.endian([u,d,m,p])};s._ff=function(a,i,l,c,u,d,m){var p=a+(i&l|~i&c)+(u>>>0)+m;return(p<<d|p>>>32-d)+i},s._gg=function(a,i,l,c,u,d,m){var p=a+(i&c|l&~c)+(u>>>0)+m;return(p<<d|p>>>32-d)+i},s._hh=function(a,i,l,c,u,d,m){var p=a+(i^l^c)+(u>>>0)+m;return(p<<d|p>>>32-d)+i},s._ii=function(a,i,l,c,u,d,m){var p=a+(l^(i|~c))+(u>>>0)+m;return(p<<d|p>>>32-d)+i},s._blocksize=16,s._digestsize=16,_N.exports=function(a,i){if(a==null)throw new Error("Illegal argument "+a);var l=e.wordsToBytes(s(a,i));return i&&i.asBytes?l:i&&i.asString?r.bytesToString(l):e.bytesToHex(l)}}()),_N.exports}var gY;function yy(){if(gY)return vc;gY=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.decodeBase64=vc.encodeBase64=vc.getMD5Hash=void 0;const e=Met(),t=Net();function n(a){return t(a)}vc.getMD5Hash=n;function r(a){return e.btoaPolyfill(a)}vc.encodeBase64=r;function s(a){return e.atobPolyfill(a)}return vc.decodeBase64=s,vc}var M0={},yY;function jet(){if(yY)return M0;yY=1,Object.defineProperty(M0,"__esModule",{value:!0}),M0.LRUCache=void 0;class e{constructor(n){this.capacity=n,this.cache=new Map,this.size=this.cache.size}[Symbol.iterator](){return this.cache[Symbol.iterator]()}forEach(n,r){this.cache.forEach(n,r)}entries(){return this.cache.entries()}clear(){this.cache.clear()}delete(n){return this.cache.delete(n)}keys(){return this.cache.keys()}values(){return this.cache.values()}has(n){return this.cache.has(n)}get(n){if(!this.has(n))return;const r=this.cache.get(n);return r!==void 0&&(this.delete(n),this.cache.set(n,r)),r}set(n,r){if(this.capacity===0)return this;if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.capacity){const s=this.cache.keys().next().value;this.delete(s)}return this.cache.set(n,r),this}}return M0.LRUCache=e,M0}var vY;function yhe(){if(vY)return mo;vY=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.LRUInMemoryAssignmentCache=mo.NonExpiringInMemoryAssignmentCache=mo.AbstractAssignmentCache=mo.assignmentCacheValueToString=mo.assignmentCacheKeyToString=void 0;const e=yy(),t=jet();function n({subjectKey:l,flagKey:c}){return(0,e.getMD5Hash)([l,c].join(";"))}mo.assignmentCacheKeyToString=n;function r({allocationKey:l,variationKey:c}){return(0,e.getMD5Hash)([l,c].join(";"))}mo.assignmentCacheValueToString=r;class s{constructor(c){this.delegate=c}has(c){return this.get(c)===r(c)}get(c){return this.delegate.get(n(c))}set(c){this.delegate.set(n(c),r(c))}entries(){return this.delegate.entries()}}mo.AbstractAssignmentCache=s;class a extends s{constructor(c=new Map){super(c)}}mo.NonExpiringInMemoryAssignmentCache=a;class i extends s{constructor(c){super(new t.LRUCache(c))}}return mo.LRUInMemoryAssignmentCache=i,mo}var Lu={},k0={},xc={},xY;function vhe(){if(xY)return xc;xY=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.DeterministicSharder=xc.MD5Sharder=xc.Sharder=void 0;const e=yy();class t{}xc.Sharder=t;class n extends t{getShard(a,i){const l=(0,e.getMD5Hash)(a);return parseInt(l.slice(0,8),16)%i}}xc.MD5Sharder=n;class r extends t{constructor(a){super(),this.lookup=a}getShard(a,i){var l;return(l=this.lookup[a])!==null&&l!==void 0?l:0}}return xc.DeterministicSharder=r,xc}var bY;function Aet(){if(bY)return k0;bY=1,Object.defineProperty(k0,"__esModule",{value:!0}),k0.BanditEvaluator=void 0;const e=$b(),t=vhe();class n{constructor(){this.assignmentShards=e.BANDIT_ASSIGNMENT_SHARDS,this.sharder=new t.MD5Sharder}evaluateBandit(s,a,i,l,c){const u=this.scoreActions(i,l,c),d=this.weighActions(u,c.gamma,c.actionProbabilityFloor),m=this.selectAction(s,a,d),h=Object.values(u).reduce((g,y)=>y>g?y:g,-1/0)-u[m];return{flagKey:s,subjectKey:a,subjectAttributes:i,actionKey:m,actionAttributes:l[m],actionScore:u[m],actionWeight:d[m],gamma:c.gamma,optimalityGap:h}}scoreActions(s,a,i){const l={};return Object.entries(a).forEach(([c,u])=>{let d=i.defaultActionScore;const m=i.coefficients[c];m&&(d=m.intercept,d+=this.scoreNumericAttributes(m.subjectNumericCoefficients,s.numericAttributes),d+=this.scoreCategoricalAttributes(m.subjectCategoricalCoefficients,s.categoricalAttributes),d+=this.scoreNumericAttributes(m.actionNumericCoefficients,u.numericAttributes),d+=this.scoreCategoricalAttributes(m.actionCategoricalCoefficients,u.categoricalAttributes)),l[c]=d}),l}scoreNumericAttributes(s,a){return s.reduce((i,l)=>{const c=a[l.attributeKey];return typeof c=="number"&&isFinite(c)?i+=c*l.coefficient:i+=l.missingValueCoefficient,i},0)}scoreCategoricalAttributes(s,a){return s.reduce((i,l)=>{var c;const u=(c=a[l.attributeKey])===null||c===void 0?void 0:c.toString(),d=u&&l.valueCoefficients[u];return i+=typeof d=="number"?d:l.missingValueCoefficient,i},0)}weighActions(s,a,i){const l={},c=Object.entries(s);if(!c.length)return l;let u=null,d=null;if(c.forEach(([v,x])=>{(u===null||x>u)&&(u=x,d=v)}),u===null||d===null)throw new Error("Unable to find top score");const m=u,p=d,h=c.length,g=i/h;let y=0;return c.forEach(([v,x])=>{if(v===p)return;const b=1/(h+a*(m-x)),_=Math.max(b,g);y+=_,l[v]=_}),l[p]=Math.max(1-y,0),l}selectAction(s,a,i){const l=Object.entries(i).sort((p,h)=>{const g=this.sharder.getShard(`${s}-${a}-${p[0]}`,this.assignmentShards),y=this.sharder.getShard(`${s}-${a}-${h[0]}`,this.assignmentShards);let v=g-y;return v===0&&(v=p[0]<h[0]?-1:1),v}),u=this.sharder.getShard(`${s}-${a}`,this.assignmentShards)/this.assignmentShards;let d=0,m=null;for(const p of l)if(d+=p[1],d>u){m=p[0];break}if(m===null)throw new Error(`No bandit action selected for flag "${s}" and subject "${a}"`);return m}}return k0.BanditEvaluator=n,k0}var Hw={},_Y;function xhe(){if(_Y)return Hw;_Y=1,Object.defineProperty(Hw,"__esModule",{value:!0});class e{constructor(n,r,s,a){this.httpClient=n,this.flagConfigurationStore=r,this.banditVariationConfigurationStore=s,this.banditModelConfigurationStore=a}async fetchAndStoreConfigurations(){var n;const r=await this.httpClient.getUniversalFlagConfiguration();if(!r?.flags)return;await this.hydrateConfigurationStore(this.flagConfigurationStore,{entries:r.flags,environment:r.environment,createdAt:r.createdAt});const s=Object.keys((n=r.bandits)!==null&&n!==void 0?n:{}).length>0,a=!!(this.banditVariationConfigurationStore&&this.banditModelConfigurationStore);if(s&&a){const i=this.indexBanditVariationsByFlagKey(r.bandits);await this.hydrateConfigurationStore(this.banditVariationConfigurationStore,{entries:i,environment:r.environment,createdAt:r.createdAt});const l=await this.httpClient.getBanditParameters();if(l?.bandits){if(!this.banditModelConfigurationStore)throw new Error("Bandit parameters fetched but no bandit configuration store provided");await this.hydrateConfigurationStore(this.banditModelConfigurationStore,{entries:l.bandits,environment:r.environment,createdAt:r.createdAt})}}}async hydrateConfigurationStore(n,r){n&&await n.setEntries(r.entries)&&(n.setEnvironment(r.environment),n.setConfigFetchedAt(new Date().toISOString()),n.setConfigPublishedAt(r.createdAt))}indexBanditVariationsByFlagKey(n){const r={};return Object.values(n).forEach(s=>{s.forEach(a=>{let i=r[a.flagKey];i||(i=[],r[a.flagKey]=i),i.push(a)})}),r}}return Hw.default=e,Hw}var Ns={},EN={},wY;function Wb(){return wY||(wY=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VariationType=void 0,function(t){t.STRING="STRING",t.INTEGER="INTEGER",t.NUMERIC="NUMERIC",t.BOOLEAN="BOOLEAN",t.JSON="JSON"}(e.VariationType||(e.VariationType={}))}(EN)),EN}var CY;function Iet(){if(CY)return Ns;CY=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.decodeObject=Ns.decodeShard=Ns.decodeSplit=Ns.decodeAllocation=Ns.decodeValue=Ns.decodeVariations=Ns.decodeFlag=void 0;const e=Wb(),t=yy();function n(u){return Object.assign(Object.assign({},u),{variations:r(u.variations,u.variationType),allocations:u.allocations.map(a)})}Ns.decodeFlag=n;function r(u,d){return Object.fromEntries(Object.entries(u).map(([,m])=>{const p=(0,t.decodeBase64)(m.key);return[p,{key:p,value:s(m.value,d)}]}))}Ns.decodeVariations=r;function s(u,d){switch(d){case e.VariationType.INTEGER:case e.VariationType.NUMERIC:return Number((0,t.decodeBase64)(u));case e.VariationType.BOOLEAN:return(0,t.decodeBase64)(u)==="true";default:return(0,t.decodeBase64)(u)}}Ns.decodeValue=s;function a(u){return Object.assign(Object.assign({},u),{key:(0,t.decodeBase64)(u.key),splits:u.splits.map(i),startAt:u.startAt?new Date((0,t.decodeBase64)(u.startAt)).toISOString():void 0,endAt:u.endAt?new Date((0,t.decodeBase64)(u.endAt)).toISOString():void 0})}Ns.decodeAllocation=a;function i(u){return{extraLogging:u.extraLogging?c(u.extraLogging):void 0,variationKey:(0,t.decodeBase64)(u.variationKey),shards:u.shards.map(l)}}Ns.decodeSplit=i;function l(u){return Object.assign(Object.assign({},u),{salt:(0,t.decodeBase64)(u.salt)})}Ns.decodeShard=l;function c(u){return Object.fromEntries(Object.entries(u).map(([d,m])=>[(0,t.decodeBase64)(d),(0,t.decodeBase64)(m)]))}return Ns.decodeObject=c,Ns}var MN={},SY;function Ret(){return SY||(SY=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EppoValue=e.EppoValueType=void 0;const t=Wb(),n=yy();var r;(function(a){a[a.NullType=0]="NullType",a[a.BoolType=1]="BoolType",a[a.NumericType=2]="NumericType",a[a.StringType=3]="StringType",a[a.JSONType=4]="JSONType"})(r=e.EppoValueType||(e.EppoValueType={}));class s{constructor(i,l,c,u,d){this.valueType=i,this.boolValue=l,this.numericValue=c,this.stringValue=u,this.objectValue=d}static valueOf(i,l){if(i==null)return s.Null();switch(l){case t.VariationType.BOOLEAN:return s.Bool(i);case t.VariationType.NUMERIC:return s.Numeric(i);case t.VariationType.INTEGER:return s.Numeric(i);case t.VariationType.STRING:return s.String(i);case t.VariationType.JSON:return s.JSON(i);default:return s.String(i)}}toString(){var i,l,c;switch(this.valueType){case r.NullType:return"null";case r.BoolType:return this.boolValue?"true":"false";case r.NumericType:return this.numericValue?this.numericValue.toString():"0";case r.StringType:return(i=this.stringValue)!==null&&i!==void 0?i:"";case r.JSONType:try{return(l=JSON.stringify(this.objectValue))!==null&&l!==void 0?l:""}catch{return(c=this.stringValue)!==null&&c!==void 0?c:""}}}toHashedString(){const i=this.toString();return(0,n.getMD5Hash)(i)}static Bool(i){return new s(r.BoolType,i,void 0,void 0,void 0)}static Numeric(i){return new s(r.NumericType,void 0,i,void 0,void 0)}static String(i){return new s(r.StringType,void 0,void 0,i,void 0)}static JSON(i){return new s(r.JSONType,void 0,void 0,void 0,typeof i=="string"?JSON.parse(i):i)}static Null(){return new s(r.NullType,void 0,void 0,void 0,void 0)}}e.EppoValue=s}(MN)),MN}var po={},kN={},EY;function bhe(){return EY||(EY=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FlagEvaluationDetailsBuilder=e.AllocationEvaluationCode=e.flagEvaluationCodes=void 0;const t=Wb();e.flagEvaluationCodes=["MATCH","FLAG_UNRECOGNIZED_OR_DISABLED","TYPE_MISMATCH","ASSIGNMENT_ERROR","DEFAULT_ALLOCATION_NULL","NO_ACTIONS_SUPPLIED_FOR_BANDIT"];var n;(function(s){s.UNEVALUATED="UNEVALUATED",s.MATCH="MATCH",s.BEFORE_START_TIME="BEFORE_START_TIME",s.TRAFFIC_EXPOSURE_MISS="TRAFFIC_EXPOSURE_MISS",s.AFTER_END_TIME="AFTER_END_TIME",s.FAILING_RULE="FAILING_RULE"})(n=e.AllocationEvaluationCode||(e.AllocationEvaluationCode={}));class r{constructor(a,i,l,c){this.environmentName=a,this.allocations=i,this.configFetchedAt=l,this.configPublishedAt=c,this.variationKey=null,this.variationValue=null,this.matchedRule=null,this.matchedAllocation=null,this.unmatchedAllocations=[],this.unevaluatedAllocations=[],this.setNone=()=>(this.variationKey=null,this.variationValue=null,this.matchedRule=null,this.matchedAllocation=null,this.unmatchedAllocations=[],this.unevaluatedAllocations=this.allocations.map((u,d)=>({key:u.key,allocationEvaluationCode:n.UNEVALUATED,orderPosition:d+1})),this),this.setNoMatchFound=(u=[])=>(this.variationKey=null,this.variationValue=null,this.matchedAllocation=null,this.matchedRule=null,this.unmatchedAllocations=u,this.unevaluatedAllocations=[],this),this.setMatch=(u,d,m,p,h,g)=>{this.variationKey=d.key,this.variationValue=g===t.VariationType.JSON&&typeof d.value=="string"?JSON.parse(d.value):d.value,this.matchedRule=p,this.matchedAllocation={key:m.key,allocationEvaluationCode:n.MATCH,orderPosition:u+1},this.unmatchedAllocations=h;const y=u+1,v=y+1;return this.unevaluatedAllocations=this.allocations.slice(y).map((x,b)=>({key:x.key,allocationEvaluationCode:n.UNEVALUATED,orderPosition:v+b})),this},this.buildForNoneResult=(u,d)=>this.setNone().build(u,d),this.build=(u,d)=>({environmentName:this.environmentName,flagEvaluationCode:u,flagEvaluationDescription:d,variationKey:this.variationKey,variationValue:this.variationValue,banditKey:null,banditAction:null,configFetchedAt:this.configFetchedAt,configPublishedAt:this.configPublishedAt,matchedRule:this.matchedRule,matchedAllocation:this.matchedAllocation,unmatchedAllocations:this.unmatchedAllocations,unevaluatedAllocations:this.unevaluatedAllocations}),this.setNone()}}e.FlagEvaluationDetailsBuilder=r}(kN)),kN}var TN={},zw={exports:{}},NN,MY;function r3(){if(MY)return NN;MY=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,s=t-6;return NN={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},NN}var jN,kY;function s3(){if(kY)return jN;kY=1;var e={};return jN=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},jN}var TY;function Hb(){return TY||(TY=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=r3(),a=s3();t=e.exports={};const i=t.re=[],l=t.safeRe=[],c=t.src=[],u=t.safeSrc=[],d=t.t={};let m=0;const p="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",s],[p,r]],g=v=>{for(const[x,b]of h)v=v.split(`${x}*`).join(`${x}{0,${b}}`).split(`${x}+`).join(`${x}{1,${b}}`);return v},y=(v,x,b)=>{const _=g(x),w=m++;a(v,w,x),d[v]=w,c[w]=x,u[w]=_,i[w]=new RegExp(x,b?"g":void 0),l[w]=new RegExp(_,b?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),y("MAINVERSION",`(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASE",`(?:-(${c[d.PRERELEASEIDENTIFIER]}(?:\\.${c[d.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${c[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[d.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${p}+`),y("BUILD",`(?:\\+(${c[d.BUILDIDENTIFIER]}(?:\\.${c[d.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${c[d.MAINVERSION]}${c[d.PRERELEASE]}?${c[d.BUILD]}?`),y("FULL",`^${c[d.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${c[d.MAINVERSIONLOOSE]}${c[d.PRERELEASELOOSE]}?${c[d.BUILD]}?`),y("LOOSE",`^${c[d.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${c[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${c[d.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:${c[d.PRERELEASE]})?${c[d.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:${c[d.PRERELEASELOOSE]})?${c[d.BUILD]}?)?)?`),y("XRANGE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),y("COERCE",`${c[d.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",c[d.COERCEPLAIN]+`(?:${c[d.PRERELEASE]})?(?:${c[d.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",c[d.COERCE],!0),y("COERCERTLFULL",c[d.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${c[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",y("TILDE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${c[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",y("CARET",`^${c[d.LONECARET]}${c[d.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${c[d.LONECARET]}${c[d.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${c[d.GTLT]}\\s*(${c[d.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]}|${c[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${c[d.XRANGEPLAIN]})\\s+-\\s+(${c[d.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${c[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[d.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(zw,zw.exports)),zw.exports}var AN,NY;function TF(){if(NY)return AN;NY=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return AN=r=>r?typeof r!="object"?e:r:t,AN}var IN,jY;function _he(){if(jY)return IN;jY=1;const e=/^[0-9]+$/,t=(r,s)=>{const a=e.test(r),i=e.test(s);return a&&i&&(r=+r,s=+s),r===s?0:a&&!i?-1:i&&!a?1:r<s?-1:1};return IN={compareIdentifiers:t,rcompareIdentifiers:(r,s)=>t(s,r)},IN}var RN,AY;function Ia(){if(AY)return RN;AY=1;const e=s3(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=r3(),{safeRe:r,t:s}=Hb(),a=TF(),{compareIdentifiers:i}=_he();class l{constructor(u,d){if(d=a(d),u instanceof l){if(u.loose===!!d.loose&&u.includePrerelease===!!d.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const m=u.trim().match(d.loose?r[s.LOOSE]:r[s.FULL]);if(!m)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const h=+p;if(h>=0&&h<n)return h}return p}):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof l)){if(typeof u=="string"&&u===this.version)return 0;u=new l(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof l||(u=new l(u,this.options)),i(this.major,u.major)||i(this.minor,u.minor)||i(this.patch,u.patch)}comparePre(u){if(u instanceof l||(u=new l(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let d=0;do{const m=this.prerelease[d],p=u.prerelease[d];if(e("prerelease compare",d,m,p),m===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(m===void 0)return-1;if(m===p)continue;return i(m,p)}while(++d)}compareBuild(u){u instanceof l||(u=new l(u,this.options));let d=0;do{const m=this.build[d],p=u.build[d];if(e("build compare",d,m,p),m===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(m===void 0)return-1;if(m===p)continue;return i(m,p)}while(++d)}inc(u,d,m){if(u.startsWith("pre")){if(!d&&m===!1)throw new Error("invalid increment argument: identifier is empty");if(d){const p=`-${d}`.match(this.options.loose?r[s.PRERELEASELOOSE]:r[s.PRERELEASE]);if(!p||p[1]!==d)throw new Error(`invalid identifier: ${d}`)}}switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,m);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,m);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,m),this.inc("pre",d,m);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,m),this.inc("pre",d,m);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(m)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(d===this.prerelease.join(".")&&m===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(d){let h=[d,p];m===!1&&(h=[d]),i(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return RN=l,RN}var PN,IY;function vy(){if(IY)return PN;IY=1;const e=Ia();return PN=(n,r,s=!1)=>{if(n instanceof e)return n;try{return new e(n,r)}catch(a){if(!s)return null;throw a}},PN}var ON,RY;function Pet(){if(RY)return ON;RY=1;const e=vy();return ON=(n,r)=>{const s=e(n,r);return s?s.version:null},ON}var LN,PY;function Oet(){if(PY)return LN;PY=1;const e=vy();return LN=(n,r)=>{const s=e(n.trim().replace(/^[=v]+/,""),r);return s?s.version:null},LN}var DN,OY;function Let(){if(OY)return DN;OY=1;const e=Ia();return DN=(n,r,s,a,i)=>{typeof s=="string"&&(i=a,a=s,s=void 0);try{return new e(n instanceof e?n.version:n,s).inc(r,a,i).version}catch{return null}},DN}var FN,LY;function Det(){if(LY)return FN;LY=1;const e=vy();return FN=(n,r)=>{const s=e(n,null,!0),a=e(r,null,!0),i=s.compare(a);if(i===0)return null;const l=i>0,c=l?s:a,u=l?a:s,d=!!c.prerelease.length;if(!!u.prerelease.length&&!d){if(!u.patch&&!u.minor)return"major";if(u.compareMain(c)===0)return u.minor&&!u.patch?"minor":"patch"}const p=d?"pre":"";return s.major!==a.major?p+"major":s.minor!==a.minor?p+"minor":s.patch!==a.patch?p+"patch":"prerelease"},FN}var UN,DY;function Fet(){if(DY)return UN;DY=1;const e=Ia();return UN=(n,r)=>new e(n,r).major,UN}var BN,FY;function Uet(){if(FY)return BN;FY=1;const e=Ia();return BN=(n,r)=>new e(n,r).minor,BN}var VN,UY;function Bet(){if(UY)return VN;UY=1;const e=Ia();return VN=(n,r)=>new e(n,r).patch,VN}var $N,BY;function Vet(){if(BY)return $N;BY=1;const e=vy();return $N=(n,r)=>{const s=e(n,r);return s&&s.prerelease.length?s.prerelease:null},$N}var WN,VY;function rl(){if(VY)return WN;VY=1;const e=Ia();return WN=(n,r,s)=>new e(n,s).compare(new e(r,s)),WN}var HN,$Y;function $et(){if($Y)return HN;$Y=1;const e=rl();return HN=(n,r,s)=>e(r,n,s),HN}var zN,WY;function Wet(){if(WY)return zN;WY=1;const e=rl();return zN=(n,r)=>e(n,r,!0),zN}var GN,HY;function NF(){if(HY)return GN;HY=1;const e=Ia();return GN=(n,r,s)=>{const a=new e(n,s),i=new e(r,s);return a.compare(i)||a.compareBuild(i)},GN}var qN,zY;function Het(){if(zY)return qN;zY=1;const e=NF();return qN=(n,r)=>n.sort((s,a)=>e(s,a,r)),qN}var KN,GY;function zet(){if(GY)return KN;GY=1;const e=NF();return KN=(n,r)=>n.sort((s,a)=>e(a,s,r)),KN}var YN,qY;function a3(){if(qY)return YN;qY=1;const e=rl();return YN=(n,r,s)=>e(n,r,s)>0,YN}var QN,KY;function jF(){if(KY)return QN;KY=1;const e=rl();return QN=(n,r,s)=>e(n,r,s)<0,QN}var XN,YY;function whe(){if(YY)return XN;YY=1;const e=rl();return XN=(n,r,s)=>e(n,r,s)===0,XN}var ZN,QY;function Che(){if(QY)return ZN;QY=1;const e=rl();return ZN=(n,r,s)=>e(n,r,s)!==0,ZN}var JN,XY;function AF(){if(XY)return JN;XY=1;const e=rl();return JN=(n,r,s)=>e(n,r,s)>=0,JN}var ej,ZY;function IF(){if(ZY)return ej;ZY=1;const e=rl();return ej=(n,r,s)=>e(n,r,s)<=0,ej}var tj,JY;function She(){if(JY)return tj;JY=1;const e=whe(),t=Che(),n=a3(),r=AF(),s=jF(),a=IF();return tj=(l,c,u,d)=>{switch(c){case"===":return typeof l=="object"&&(l=l.version),typeof u=="object"&&(u=u.version),l===u;case"!==":return typeof l=="object"&&(l=l.version),typeof u=="object"&&(u=u.version),l!==u;case"":case"=":case"==":return e(l,u,d);case"!=":return t(l,u,d);case">":return n(l,u,d);case">=":return r(l,u,d);case"<":return s(l,u,d);case"<=":return a(l,u,d);default:throw new TypeError(`Invalid operator: ${c}`)}},tj}var nj,eQ;function Get(){if(eQ)return nj;eQ=1;const e=Ia(),t=vy(),{safeRe:n,t:r}=Hb();return nj=(a,i)=>{if(a instanceof e)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;i=i||{};let l=null;if(!i.rtl)l=a.match(i.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const h=i.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let g;for(;(g=h.exec(a))&&(!l||l.index+l[0].length!==a.length);)(!l||g.index+g[0].length!==l.index+l[0].length)&&(l=g),h.lastIndex=g.index+g[1].length+g[2].length;h.lastIndex=-1}if(l===null)return null;const c=l[2],u=l[3]||"0",d=l[4]||"0",m=i.includePrerelease&&l[5]?`-${l[5]}`:"",p=i.includePrerelease&&l[6]?`+${l[6]}`:"";return t(`${c}.${u}.${d}${m}${p}`,i)},nj}var rj,tQ;function qet(){if(tQ)return rj;tQ=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,r)}return this}}return rj=e,rj}var sj,nQ;function sl(){if(nQ)return sj;nQ=1;const e=/\s+/g;class t{constructor(N,T){if(T=s(T),N instanceof t)return N.loose===!!T.loose&&N.includePrerelease===!!T.includePrerelease?N:new t(N.raw,T);if(N instanceof a)return this.raw=N.value,this.set=[[N]],this.formatted=void 0,this;if(this.options=T,this.loose=!!T.loose,this.includePrerelease=!!T.includePrerelease,this.raw=N.trim().replace(e," "),this.set=this.raw.split("||").map(j=>this.parseRange(j.trim())).filter(j=>j.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const j=this.set[0];if(this.set=this.set.filter(F=>!y(F[0])),this.set.length===0)this.set=[j];else if(this.set.length>1){for(const F of this.set)if(F.length===1&&v(F[0])){this.set=[F];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let N=0;N<this.set.length;N++){N>0&&(this.formatted+="||");const T=this.set[N];for(let j=0;j<T.length;j++)j>0&&(this.formatted+=" "),this.formatted+=T[j].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(N){const j=((this.options.includePrerelease&&h)|(this.options.loose&&g))+":"+N,F=r.get(j);if(F)return F;const U=this.options.loose,V=U?c[u.HYPHENRANGELOOSE]:c[u.HYPHENRANGE];N=N.replace(V,O(this.options.includePrerelease)),i("hyphen replace",N),N=N.replace(c[u.COMPARATORTRIM],d),i("comparator trim",N),N=N.replace(c[u.TILDETRIM],m),i("tilde trim",N),N=N.replace(c[u.CARETTRIM],p),i("caret trim",N);let $=N.split(" ").map(W=>b(W,this.options)).join(" ").split(/\s+/).map(W=>R(W,this.options));U&&($=$.filter(W=>(i("loose invalid filter",W,this.options),!!W.match(c[u.COMPARATORLOOSE])))),i("range list",$);const z=new Map,Q=$.map(W=>new a(W,this.options));for(const W of Q){if(y(W))return[W];z.set(W.value,W)}z.size>1&&z.has("")&&z.delete("");const Y=[...z.values()];return r.set(j,Y),Y}intersects(N,T){if(!(N instanceof t))throw new TypeError("a Range is required");return this.set.some(j=>x(j,T)&&N.set.some(F=>x(F,T)&&j.every(U=>F.every(V=>U.intersects(V,T)))))}test(N){if(!N)return!1;if(typeof N=="string")try{N=new l(N,this.options)}catch{return!1}for(let T=0;T<this.set.length;T++)if(L(this.set[T],N,this.options))return!0;return!1}}sj=t;const n=qet(),r=new n,s=TF(),a=o3(),i=s3(),l=Ia(),{safeRe:c,t:u,comparatorTrimReplace:d,tildeTrimReplace:m,caretTrimReplace:p}=Hb(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:g}=r3(),y=P=>P.value==="<0.0.0-0",v=P=>P.value==="",x=(P,N)=>{let T=!0;const j=P.slice();let F=j.pop();for(;T&&j.length;)T=j.every(U=>F.intersects(U,N)),F=j.pop();return T},b=(P,N)=>(i("comp",P,N),P=S(P,N),i("caret",P),P=w(P,N),i("tildes",P),P=M(P,N),i("xrange",P),P=A(P,N),i("stars",P),P),_=P=>!P||P.toLowerCase()==="x"||P==="*",w=(P,N)=>P.trim().split(/\s+/).map(T=>C(T,N)).join(" "),C=(P,N)=>{const T=N.loose?c[u.TILDELOOSE]:c[u.TILDE];return P.replace(T,(j,F,U,V,$)=>{i("tilde",P,j,F,U,V,$);let z;return _(F)?z="":_(U)?z=`>=${F}.0.0 <${+F+1}.0.0-0`:_(V)?z=`>=${F}.${U}.0 <${F}.${+U+1}.0-0`:$?(i("replaceTilde pr",$),z=`>=${F}.${U}.${V}-${$} <${F}.${+U+1}.0-0`):z=`>=${F}.${U}.${V} <${F}.${+U+1}.0-0`,i("tilde return",z),z})},S=(P,N)=>P.trim().split(/\s+/).map(T=>E(T,N)).join(" "),E=(P,N)=>{i("caret",P,N);const T=N.loose?c[u.CARETLOOSE]:c[u.CARET],j=N.includePrerelease?"-0":"";return P.replace(T,(F,U,V,$,z)=>{i("caret",P,F,U,V,$,z);let Q;return _(U)?Q="":_(V)?Q=`>=${U}.0.0${j} <${+U+1}.0.0-0`:_($)?U==="0"?Q=`>=${U}.${V}.0${j} <${U}.${+V+1}.0-0`:Q=`>=${U}.${V}.0${j} <${+U+1}.0.0-0`:z?(i("replaceCaret pr",z),U==="0"?V==="0"?Q=`>=${U}.${V}.${$}-${z} <${U}.${V}.${+$+1}-0`:Q=`>=${U}.${V}.${$}-${z} <${U}.${+V+1}.0-0`:Q=`>=${U}.${V}.${$}-${z} <${+U+1}.0.0-0`):(i("no pr"),U==="0"?V==="0"?Q=`>=${U}.${V}.${$}${j} <${U}.${V}.${+$+1}-0`:Q=`>=${U}.${V}.${$}${j} <${U}.${+V+1}.0-0`:Q=`>=${U}.${V}.${$} <${+U+1}.0.0-0`),i("caret return",Q),Q})},M=(P,N)=>(i("replaceXRanges",P,N),P.split(/\s+/).map(T=>k(T,N)).join(" ")),k=(P,N)=>{P=P.trim();const T=N.loose?c[u.XRANGELOOSE]:c[u.XRANGE];return P.replace(T,(j,F,U,V,$,z)=>{i("xRange",P,j,F,U,V,$,z);const Q=_(U),Y=Q||_(V),W=Y||_($),X=W;return F==="="&&X&&(F=""),z=N.includePrerelease?"-0":"",Q?F===">"||F==="<"?j="<0.0.0-0":j="*":F&&X?(Y&&(V=0),$=0,F===">"?(F=">=",Y?(U=+U+1,V=0,$=0):(V=+V+1,$=0)):F==="<="&&(F="<",Y?U=+U+1:V=+V+1),F==="<"&&(z="-0"),j=`${F+U}.${V}.${$}${z}`):Y?j=`>=${U}.0.0${z} <${+U+1}.0.0-0`:W&&(j=`>=${U}.${V}.0${z} <${U}.${+V+1}.0-0`),i("xRange return",j),j})},A=(P,N)=>(i("replaceStars",P,N),P.trim().replace(c[u.STAR],"")),R=(P,N)=>(i("replaceGTE0",P,N),P.trim().replace(c[N.includePrerelease?u.GTE0PRE:u.GTE0],"")),O=P=>(N,T,j,F,U,V,$,z,Q,Y,W,X)=>(_(j)?T="":_(F)?T=`>=${j}.0.0${P?"-0":""}`:_(U)?T=`>=${j}.${F}.0${P?"-0":""}`:V?T=`>=${T}`:T=`>=${T}${P?"-0":""}`,_(Q)?z="":_(Y)?z=`<${+Q+1}.0.0-0`:_(W)?z=`<${Q}.${+Y+1}.0-0`:X?z=`<=${Q}.${Y}.${W}-${X}`:P?z=`<${Q}.${Y}.${+W+1}-0`:z=`<=${z}`,`${T} ${z}`.trim()),L=(P,N,T)=>{for(let j=0;j<P.length;j++)if(!P[j].test(N))return!1;if(N.prerelease.length&&!T.includePrerelease){for(let j=0;j<P.length;j++)if(i(P[j].semver),P[j].semver!==a.ANY&&P[j].semver.prerelease.length>0){const F=P[j].semver;if(F.major===N.major&&F.minor===N.minor&&F.patch===N.patch)return!0}return!1}return!0};return sj}var aj,rQ;function o3(){if(rQ)return aj;rQ=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,m){if(m=n(m),d instanceof t){if(d.loose===!!m.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),i("comparator",d,m),this.options=m,this.loose=!!m.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}parse(d){const m=this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR],p=d.match(m);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new l(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(i("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new l(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,m){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(d.value,m).test(this.value):d.operator===""?d.value===""?!0:new c(this.value,m).test(d.semver):(m=n(m),m.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,m)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,m)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}aj=t;const n=TF(),{safeRe:r,t:s}=Hb(),a=She(),i=s3(),l=Ia(),c=sl();return aj}var oj,sQ;function i3(){if(sQ)return oj;sQ=1;const e=sl();return oj=(n,r,s)=>{try{r=new e(r,s)}catch{return!1}return r.test(n)},oj}var ij,aQ;function Ket(){if(aQ)return ij;aQ=1;const e=sl();return ij=(n,r)=>new e(n,r).set.map(s=>s.map(a=>a.value).join(" ").trim().split(" ")),ij}var lj,oQ;function Yet(){if(oQ)return lj;oQ=1;const e=Ia(),t=sl();return lj=(r,s,a)=>{let i=null,l=null,c=null;try{c=new t(s,a)}catch{return null}return r.forEach(u=>{c.test(u)&&(!i||l.compare(u)===-1)&&(i=u,l=new e(i,a))}),i},lj}var cj,iQ;function Qet(){if(iQ)return cj;iQ=1;const e=Ia(),t=sl();return cj=(r,s,a)=>{let i=null,l=null,c=null;try{c=new t(s,a)}catch{return null}return r.forEach(u=>{c.test(u)&&(!i||l.compare(u)===1)&&(i=u,l=new e(i,a))}),i},cj}var uj,lQ;function Xet(){if(lQ)return uj;lQ=1;const e=Ia(),t=sl(),n=a3();return uj=(s,a)=>{s=new t(s,a);let i=new e("0.0.0");if(s.test(i)||(i=new e("0.0.0-0"),s.test(i)))return i;i=null;for(let l=0;l<s.set.length;++l){const c=s.set[l];let u=null;c.forEach(d=>{const m=new e(d.semver.version);switch(d.operator){case">":m.prerelease.length===0?m.patch++:m.prerelease.push(0),m.raw=m.format();case"":case">=":(!u||n(m,u))&&(u=m);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${d.operator}`)}}),u&&(!i||n(i,u))&&(i=u)}return i&&s.test(i)?i:null},uj}var dj,cQ;function Zet(){if(cQ)return dj;cQ=1;const e=sl();return dj=(n,r)=>{try{return new e(n,r).range||"*"}catch{return null}},dj}var fj,uQ;function RF(){if(uQ)return fj;uQ=1;const e=Ia(),t=o3(),{ANY:n}=t,r=sl(),s=i3(),a=a3(),i=jF(),l=IF(),c=AF();return fj=(d,m,p,h)=>{d=new e(d,h),m=new r(m,h);let g,y,v,x,b;switch(p){case">":g=a,y=l,v=i,x=">",b=">=";break;case"<":g=i,y=c,v=a,x="<",b="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(d,m,h))return!1;for(let _=0;_<m.set.length;++_){const w=m.set[_];let C=null,S=null;if(w.forEach(E=>{E.semver===n&&(E=new t(">=0.0.0")),C=C||E,S=S||E,g(E.semver,C.semver,h)?C=E:v(E.semver,S.semver,h)&&(S=E)}),C.operator===x||C.operator===b||(!S.operator||S.operator===x)&&y(d,S.semver))return!1;if(S.operator===b&&v(d,S.semver))return!1}return!0},fj}var mj,dQ;function Jet(){if(dQ)return mj;dQ=1;const e=RF();return mj=(n,r,s)=>e(n,r,">",s),mj}var pj,fQ;function ett(){if(fQ)return pj;fQ=1;const e=RF();return pj=(n,r,s)=>e(n,r,"<",s),pj}var hj,mQ;function ttt(){if(mQ)return hj;mQ=1;const e=sl();return hj=(n,r,s)=>(n=new e(n,s),r=new e(r,s),n.intersects(r,s)),hj}var gj,pQ;function ntt(){if(pQ)return gj;pQ=1;const e=i3(),t=rl();return gj=(n,r,s)=>{const a=[];let i=null,l=null;const c=n.sort((p,h)=>t(p,h,s));for(const p of c)e(p,r,s)?(l=p,i||(i=p)):(l&&a.push([i,l]),l=null,i=null);i&&a.push([i,null]);const u=[];for(const[p,h]of a)p===h?u.push(p):!h&&p===c[0]?u.push("*"):h?p===c[0]?u.push(`<=${h}`):u.push(`${p} - ${h}`):u.push(`>=${p}`);const d=u.join(" || "),m=typeof r.raw=="string"?r.raw:String(r);return d.length<m.length?d:r},gj}var yj,hQ;function rtt(){if(hQ)return yj;hQ=1;const e=sl(),t=o3(),{ANY:n}=t,r=i3(),s=rl(),a=(m,p,h={})=>{if(m===p)return!0;m=new e(m,h),p=new e(p,h);let g=!1;e:for(const y of m.set){for(const v of p.set){const x=c(y,v,h);if(g=g||x!==null,x)continue e}if(g)return!1}return!0},i=[new t(">=0.0.0-0")],l=[new t(">=0.0.0")],c=(m,p,h)=>{if(m===p)return!0;if(m.length===1&&m[0].semver===n){if(p.length===1&&p[0].semver===n)return!0;h.includePrerelease?m=i:m=l}if(p.length===1&&p[0].semver===n){if(h.includePrerelease)return!0;p=l}const g=new Set;let y,v;for(const M of m)M.operator===">"||M.operator===">="?y=u(y,M,h):M.operator==="<"||M.operator==="<="?v=d(v,M,h):g.add(M.semver);if(g.size>1)return null;let x;if(y&&v){if(x=s(y.semver,v.semver,h),x>0)return null;if(x===0&&(y.operator!==">="||v.operator!=="<="))return null}for(const M of g){if(y&&!r(M,String(y),h)||v&&!r(M,String(v),h))return null;for(const k of p)if(!r(M,String(k),h))return!1;return!0}let b,_,w,C,S=v&&!h.includePrerelease&&v.semver.prerelease.length?v.semver:!1,E=y&&!h.includePrerelease&&y.semver.prerelease.length?y.semver:!1;S&&S.prerelease.length===1&&v.operator==="<"&&S.prerelease[0]===0&&(S=!1);for(const M of p){if(C=C||M.operator===">"||M.operator===">=",w=w||M.operator==="<"||M.operator==="<=",y){if(E&&M.semver.prerelease&&M.semver.prerelease.length&&M.semver.major===E.major&&M.semver.minor===E.minor&&M.semver.patch===E.patch&&(E=!1),M.operator===">"||M.operator===">="){if(b=u(y,M,h),b===M&&b!==y)return!1}else if(y.operator===">="&&!r(y.semver,String(M),h))return!1}if(v){if(S&&M.semver.prerelease&&M.semver.prerelease.length&&M.semver.major===S.major&&M.semver.minor===S.minor&&M.semver.patch===S.patch&&(S=!1),M.operator==="<"||M.operator==="<="){if(_=d(v,M,h),_===M&&_!==v)return!1}else if(v.operator==="<="&&!r(v.semver,String(M),h))return!1}if(!M.operator&&(v||y)&&x!==0)return!1}return!(y&&w&&!v&&x!==0||v&&C&&!y&&x!==0||E||S)},u=(m,p,h)=>{if(!m)return p;const g=s(m.semver,p.semver,h);return g>0?m:g<0||p.operator===">"&&m.operator===">="?p:m},d=(m,p,h)=>{if(!m)return p;const g=s(m.semver,p.semver,h);return g<0?m:g>0||p.operator==="<"&&m.operator==="<="?p:m};return yj=a,yj}var vj,gQ;function stt(){if(gQ)return vj;gQ=1;const e=Hb(),t=r3(),n=Ia(),r=_he(),s=vy(),a=Pet(),i=Oet(),l=Let(),c=Det(),u=Fet(),d=Uet(),m=Bet(),p=Vet(),h=rl(),g=$et(),y=Wet(),v=NF(),x=Het(),b=zet(),_=a3(),w=jF(),C=whe(),S=Che(),E=AF(),M=IF(),k=She(),A=Get(),R=o3(),O=sl(),L=i3(),P=Ket(),N=Yet(),T=Qet(),j=Xet(),F=Zet(),U=RF(),V=Jet(),$=ett(),z=ttt(),Q=ntt(),Y=rtt();return vj={parse:s,valid:a,clean:i,inc:l,diff:c,major:u,minor:d,patch:m,prerelease:p,compare:h,rcompare:g,compareLoose:y,compareBuild:v,sort:x,rsort:b,gt:_,lt:w,eq:C,neq:S,gte:E,lte:M,cmp:k,coerce:A,Comparator:R,Range:O,satisfies:L,toComparators:P,maxSatisfying:N,minSatisfying:T,minVersion:j,validRange:F,outside:U,gtr:V,ltr:$,intersects:z,simplifyRange:Q,subset:Y,SemVer:n,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},vj}var yQ;function att(){return yQ||(yQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.matchesRule=e.ObfuscatedOperatorType=e.OperatorType=void 0;const t=stt(),n=yy();var r;(function(v){v.MATCHES="MATCHES",v.NOT_MATCHES="NOT_MATCHES",v.GTE="GTE",v.GT="GT",v.LTE="LTE",v.LT="LT",v.ONE_OF="ONE_OF",v.NOT_ONE_OF="NOT_ONE_OF",v.IS_NULL="IS_NULL"})(r=e.OperatorType||(e.OperatorType={}));var s;(function(v){v.MATCHES="05015086bdd8402218f6aad6528bef08",v.NOT_MATCHES="8323761667755378c3a78e0a6ed37a78",v.GTE="32d35312e8f24bc1669bd2b45c00d47c",v.GT="cd6a9bd2a175104eed40f0d33a8b4020",v.LTE="cc981ecc65ecf63ad1673cbec9c64198",v.LT="c562607189d77eb9dfb707464c1e7b0b",v.ONE_OF="27457ce369f2a74203396a35ef537c0b",v.NOT_ONE_OF="602f5ee0b6e84fe29f43ab48b9e1addf",v.IS_NULL="dbd9c38e0339e6c34bd48cafc59be388"})(s=e.ObfuscatedOperatorType||(e.ObfuscatedOperatorType={}));var a;(function(v){v.PLAIN_STRING="PLAIN_STRING",v.STRING_ARRAY="STRING_ARRAY",v.SEM_VER="SEM_VER",v.NUMERIC="NUMERIC"})(a||(a={}));function i(v,x,b){return!l(x,v.conditions,b).includes(!1)}e.matchesRule=i;function l(v,x,b){return x.map(_=>b?u(Object.entries(v).reduce((w,[C,S])=>Object.assign({[(0,n.getMD5Hash)(C)]:S},w),{}),_):c(v,_))}function c(v,x){const b=v[x.attribute],_=y(x.value);if(x.operator===r.IS_NULL)return x.value?b==null:b!=null;if(b!=null)switch(x.operator){case r.GTE:return _===a.SEM_VER?g(b,x.value,t.gte):h(b,x.value,(w,C)=>w>=C);case r.GT:return _===a.SEM_VER?g(b,x.value,t.gt):h(b,x.value,(w,C)=>w>C);case r.LTE:return _===a.SEM_VER?g(b,x.value,t.lte):h(b,x.value,(w,C)=>w<=C);case r.LT:return _===a.SEM_VER?g(b,x.value,t.lt):h(b,x.value,(w,C)=>w<C);case r.MATCHES:return new RegExp(x.value).test(b);case r.NOT_MATCHES:return!new RegExp(x.value).test(b);case r.ONE_OF:return d(b.toString(),x.value);case r.NOT_ONE_OF:return m(b.toString(),x.value)}return!1}function u(v,x){const b=v[x.attribute],_=y(b);if(x.operator===s.IS_NULL)return x.value===(0,n.getMD5Hash)("true")?b==null:b!=null;if(b!=null)switch(x.operator){case s.GTE:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(x.value),t.gte):h(b,Number((0,n.decodeBase64)(x.value)),(w,C)=>w>=C);case s.GT:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(x.value),t.gt):h(b,Number((0,n.decodeBase64)(x.value)),(w,C)=>w>C);case s.LTE:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(x.value),t.lte):h(b,Number((0,n.decodeBase64)(x.value)),(w,C)=>w<=C);case s.LT:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(x.value),t.lt):h(b,Number((0,n.decodeBase64)(x.value)),(w,C)=>w<C);case s.MATCHES:return new RegExp((0,n.decodeBase64)(x.value)).test(b);case s.NOT_MATCHES:return!new RegExp((0,n.decodeBase64)(x.value)).test(b);case s.ONE_OF:return d((0,n.getMD5Hash)(b.toString()),x.value);case s.NOT_ONE_OF:return m((0,n.getMD5Hash)(b.toString()),x.value)}return!1}function d(v,x){return p(v,x).length>0}function m(v,x){return p(v,x).length===0}function p(v,x){return x.filter(b=>b===v)}function h(v,x,b){return b(Number(v),Number(x))}function g(v,x,b){return!!(0,t.valid)(v)&&!!(0,t.valid)(x)&&b(v,x)}function y(v){return typeof v=="number"?a.NUMERIC:Array.isArray(v)?a.STRING_ARRAY:typeof v=="string"&&(0,t.valid)(v)?a.SEM_VER:isNaN(Number(v))?a.PLAIN_STRING:a.NUMERIC}}(TN)),TN}var vQ;function ott(){if(vQ)return po;vQ=1,Object.defineProperty(po,"__esModule",{value:!0}),po.matchesRules=po.noneResult=po.hashKey=po.isInShardRange=po.Evaluator=void 0;const e=bhe(),t=att(),n=vhe();class r{constructor(u){this.getMatchedEvaluationDetailsMessage=(d,m,p)=>{var h;const g=!!(!((h=d.rules)===null||h===void 0)&&h.length),y=d.splits.length>1,v=m.shards.length>1,x=y||v;return g&&x?`Supplied attributes match rules defined in allocation "${d.key}" and ${p} belongs to the range of traffic assigned to "${m.variationKey}".`:g&&!x?`Supplied attributes match rules defined in allocation "${d.key}".`:`${p} belongs to the range of traffic assigned to "${m.variationKey}" defined in allocation "${d.key}".`},this.sharder=u??new n.MD5Sharder}evaluateFlag(u,d,m,p,h,g){var y,v;const x=new e.FlagEvaluationDetailsBuilder(d.configEnvironment.name,u.allocations,d.configFetchedAt,d.configPublishedAt);if(!u.enabled)return i(u.key,m,p,x.buildForNoneResult("FLAG_UNRECOGNIZED_OR_DISABLED",`Unrecognized or disabled flag: ${u.key}`));const b=new Date,_=[];for(let w=0;w<u.allocations.length;w++){const C=u.allocations[w],S=k=>{_.push({key:C.key,allocationEvaluationCode:k,orderPosition:w+1})};if(C.startAt&&b<new Date(C.startAt)){S(e.AllocationEvaluationCode.BEFORE_START_TIME);continue}if(C.endAt&&b>new Date(C.endAt)){S(e.AllocationEvaluationCode.AFTER_END_TIME);continue}const{matched:E,matchedRule:M}=l((y=C?.rules)!==null&&y!==void 0?y:[],Object.assign({id:m},p),h);if(E){for(const k of C.splits)if(k.shards.every(A=>this.matchesShard(A,m,u.totalShards))){const A=u.variations[k.variationKey],R=x.setMatch(w,A,C,M,_,g).build("MATCH",this.getMatchedEvaluationDetailsMessage(C,k,m));return{flagKey:u.key,subjectKey:m,subjectAttributes:p,allocationKey:C.key,variation:A,extraLogging:(v=k.extraLogging)!==null&&v!==void 0?v:{},doLog:C.doLog,flagEvaluationDetails:R}}S(e.AllocationEvaluationCode.TRAFFIC_EXPOSURE_MISS)}else S(e.AllocationEvaluationCode.FAILING_RULE)}return i(u.key,m,p,x.setNoMatchFound(_).build("DEFAULT_ALLOCATION_NULL",'No allocations matched. Falling back to "Default Allocation", serving NULL'))}matchesShard(u,d,m){const p=this.sharder.getShard(a(u.salt,d),m);return u.ranges.some(h=>s(p,h))}}po.Evaluator=r;function s(c,u){return u.start<=c&&c<u.end}po.isInShardRange=s;function a(c,u){return`${c}-${u}`}po.hashKey=a;function i(c,u,d,m){return{flagKey:c,subjectKey:u,subjectAttributes:d,allocationKey:null,variation:null,extraLogging:{},doLog:!1,flagEvaluationDetails:m}}po.noneResult=i;function l(c,u,d){if(!c.length)return{matched:!0,matchedRule:null};let m=null;return c.some(h=>{const g=(0,t.matchesRule)(h,u,d);return g&&(m=h),g})?{matched:!0,matchedRule:m}:{matched:!1,matchedRule:null}}return po.matchesRules=l,po}var Mp={},xQ;function Ehe(){if(xQ)return Mp;xQ=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.HttpRequestError=void 0;class e extends Error{constructor(r,s,a){super(r),this.message=r,this.status=s,this.cause=a,a&&(this.cause=a)}}Mp.HttpRequestError=e;class t{constructor(r,s){this.apiEndpoints=r,this.timeout=s}async getUniversalFlagConfiguration(){const r=this.apiEndpoints.ufcEndpoint();return await this.rawGet(r)}async getBanditParameters(){const r=this.apiEndpoints.banditParametersEndpoint();return await this.rawGet(r)}async rawGet(r){try{const s=new AbortController,a=s.signal,i=setTimeout(()=>s.abort(),this.timeout),l=await fetch(r.toString(),{signal:a});if(clearTimeout(i),!l?.ok)throw new e("Failed to fetch data",l?.status);return await l.json()}catch(s){throw s.name==="AbortError"?new e("Request timed out",408,s):s instanceof e?s:new e("Network error",0,s)}}}return Mp.default=t,Mp}var Gw={},T0={},bQ;function itt(){if(bQ)return T0;bQ=1,Object.defineProperty(T0,"__esModule",{value:!0}),T0.waitForMs=void 0;async function e(t){await new Promise(n=>setTimeout(n,t))}return T0.waitForMs=e,T0}var _Q;function ltt(){if(_Q)return Gw;_Q=1,Object.defineProperty(Gw,"__esModule",{value:!0});const e=n3(),t=$b(),n=itt();function r(a,i,l){let c=!1,u=0,d=a,m=!1,p;const h=async()=>{var v;c=!1;let x=!1,b=l?.skipInitialPoll?0:1+((v=l?.maxStartRetries)!==null&&v!==void 0?v:t.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES),_=null;for(;!x&&b>0;)try{await i(),x=!0,m=!1,e.logger.info("Eppo SDK successfully requested initial configuration")}catch(C){if(m=!0,e.logger.warn(`Eppo SDK encountered an error with initial poll of configurations: ${C.message}`),--b>0){const S=s(a);e.logger.warn(`Eppo SDK will retry the initial poll again in ${S} ms (${b} attempts remaining)`),await(0,n.waitForMs)(S)}else l?.pollAfterFailedStart?e.logger.warn("Eppo SDK initial poll failed; will attempt regular polling"):(e.logger.error("Eppo SDK initial poll failed. Aborting polling"),g()),l?.errorOnFailedStart&&(_=C)}if(!c&&(x&&l?.pollAfterSuccessfulStart||!x&&l?.pollAfterFailedStart)?(e.logger.info(`Eppo SDK starting regularly polling every ${a} ms`),p=setTimeout(y,a)):e.logger.info("Eppo SDK will not poll for configuration updates"),_)throw e.logger.info("Eppo SDK rethrowing start error"),_},g=()=>{c||(c=!0,p&&clearTimeout(p),e.logger.info("Eppo SDK polling stopped"))};async function y(){var v;if(!c){try{await i(),u=0,d=a,m&&(m=!1,e.logger.info("Eppo SDK poll successful; resuming normal polling"))}catch(x){m=!0,e.logger.warn(`Eppo SDK encountered an error polling configurations: ${x.message}`);const b=1+((v=l?.maxPollRetries)!==null&&v!==void 0?v:t.DEFAULT_POLL_CONFIG_REQUEST_RETRIES);if(++u<b){const _=Math.pow(2,u),w=s(a);d=_*a+w,e.logger.warn(`Eppo SDK will try polling again in ${d} ms (${b-u} attempts remaining)`)}else e.logger.error(`Eppo SDK reached maximum of ${u} failed polling attempts. Stopping polling`),g()}setTimeout(y,d)}}return{start:h,stop:g}}Gw.default=r;function s(a){const i=a*t.POLL_JITTER_PCT/2,l=Math.max(Math.floor(Math.random()*a*t.POLL_JITTER_PCT/2),1);return i+l}return Gw}var gf={},wQ;function Mhe(){if(wQ)return gf;wQ=1,Object.defineProperty(gf,"__esModule",{value:!0}),gf.validateNotBlank=gf.InvalidArgumentError=void 0;class e extends Error{}gf.InvalidArgumentError=e;function t(n,r){if(n==null||n.length===0)throw new e(r)}return gf.validateNotBlank=t,gf}var N0={};const ctt="4.0.0",utt={version:ctt};var CQ;function dtt(){if(CQ)return N0;CQ=1,Object.defineProperty(N0,"__esModule",{value:!0}),N0.LIB_VERSION=void 0;const e=utt;return N0.LIB_VERSION=e.version,N0}var SQ;function ftt(){if(SQ)return Lu;SQ=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.checkValueTypeMatch=Lu.checkTypeMatch=void 0;const e=ghe(),t=n3(),n=Aet(),r=yhe(),s=xhe(),a=$b(),i=Iet(),l=Ret(),c=ott(),u=bhe(),d=Ehe(),m=Wb(),p=yy(),h=ltt(),g=Mhe(),y=dtt();class v{constructor(w,C,S,E,M=!1){this.flagConfigurationStore=w,this.banditVariationConfigurationStore=C,this.banditModelConfigurationStore=S,this.configurationRequestParameters=E,this.isObfuscated=M,this.queuedAssignmentEvents=[],this.queuedBanditEvents=[],this.isGracefulFailureMode=!0,this.evaluator=new c.Evaluator,this.banditEvaluator=new n.BanditEvaluator}setConfigurationRequestParameters(w){this.configurationRequestParameters=w}setFlagConfigurationStore(w){this.flagConfigurationStore=w}setBanditVariationConfigurationStore(w){this.banditVariationConfigurationStore=w}setBanditModelConfigurationStore(w){this.banditModelConfigurationStore=w}setIsObfuscated(w){this.isObfuscated=w}async fetchFlagConfigurations(){var w,C;if(!this.configurationRequestParameters)throw new Error("Eppo SDK unable to fetch flag configurations without configuration request parameters");if(this.requestPoller&&this.requestPoller.stop(),!await this.flagConfigurationStore.isExpired()){t.logger.info("[Eppo SDK] Configuration store is not expired. Skipping fetching flag configurations");return}const{apiKey:E,sdkName:M,sdkVersion:k,baseUrl:A,requestTimeoutMs:R=a.DEFAULT_REQUEST_TIMEOUT_MS,numInitialRequestRetries:O=a.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES,numPollRequestRetries:L=a.DEFAULT_POLL_CONFIG_REQUEST_RETRIES,pollAfterSuccessfulInitialization:P=!1,pollAfterFailedInitialization:N=!1,throwOnFailedInitialization:T=!1,skipInitialPoll:j=!1}=this.configurationRequestParameters,F=new e.default({baseUrl:A,queryParams:{apiKey:E,sdkName:M,sdkVersion:k}}),U=new d.default(F,R),V=new s.default(U,this.flagConfigurationStore,(w=this.banditVariationConfigurationStore)!==null&&w!==void 0?w:null,(C=this.banditModelConfigurationStore)!==null&&C!==void 0?C:null);this.requestPoller=(0,h.default)(a.POLL_INTERVAL_MS,V.fetchAndStoreConfigurations.bind(V),{maxStartRetries:O,maxPollRetries:L,pollAfterSuccessfulStart:P,pollAfterFailedStart:N,errorOnFailedStart:T,skipInitialPoll:j}),await this.requestPoller.start()}stopPolling(){this.requestPoller&&this.requestPoller.stop()}getStringAssignment(w,C,S,E){return this.getStringAssignmentDetails(w,C,S,E).variation}getStringAssignmentDetails(w,C,S,E){var M;const{eppoValue:k,flagEvaluationDetails:A}=this.getAssignmentVariation(w,C,S,l.EppoValue.String(E),m.VariationType.STRING);return{variation:(M=k.stringValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:A}}getBoolAssignment(w,C,S,E){return this.getBooleanAssignment(w,C,S,E)}getBooleanAssignment(w,C,S,E){return this.getBooleanAssignmentDetails(w,C,S,E).variation}getBooleanAssignmentDetails(w,C,S,E){var M;const{eppoValue:k,flagEvaluationDetails:A}=this.getAssignmentVariation(w,C,S,l.EppoValue.Bool(E),m.VariationType.BOOLEAN);return{variation:(M=k.boolValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:A}}getIntegerAssignment(w,C,S,E){return this.getIntegerAssignmentDetails(w,C,S,E).variation}getIntegerAssignmentDetails(w,C,S,E){var M;const{eppoValue:k,flagEvaluationDetails:A}=this.getAssignmentVariation(w,C,S,l.EppoValue.Numeric(E),m.VariationType.INTEGER);return{variation:(M=k.numericValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:A}}getNumericAssignment(w,C,S,E){return this.getNumericAssignmentDetails(w,C,S,E).variation}getNumericAssignmentDetails(w,C,S,E){var M;const{eppoValue:k,flagEvaluationDetails:A}=this.getAssignmentVariation(w,C,S,l.EppoValue.Numeric(E),m.VariationType.NUMERIC);return{variation:(M=k.numericValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:A}}getJSONAssignment(w,C,S,E){return this.getJSONAssignmentDetails(w,C,S,E).variation}getJSONAssignmentDetails(w,C,S,E){var M;const{eppoValue:k,flagEvaluationDetails:A}=this.getAssignmentVariation(w,C,S,l.EppoValue.JSON(E),m.VariationType.JSON);return{variation:(M=k.objectValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:A}}getBanditAction(w,C,S,E,M){const{variation:k,action:A}=this.getBanditActionDetails(w,C,S,E,M);return{variation:k,action:A}}getBanditActionDetails(w,C,S,E,M){var k,A,R;const O=this.flagEvaluationDetailsBuilder(w),L={variation:M,action:null};let P=M,N=null;try{const T=(k=this.banditVariationConfigurationStore)===null||k===void 0?void 0:k.get(w);if(T&&!Object.keys(E).length)return Object.assign(Object.assign({},L),{evaluationDetails:O.buildForNoneResult("NO_ACTIONS_SUPPLIED_FOR_BANDIT","No bandit actions passed for a flag known to have an active bandit")});const j=this.ensureNonContextualSubjectAttributes(S),{variation:F,evaluationDetails:U}=this.getStringAssignmentDetails(w,C,j,M);P=F;const V=(A=T?.find($=>$.variationValue===P))===null||A===void 0?void 0:A.key;if(V){const $=(R=this.banditModelConfigurationStore)===null||R===void 0?void 0:R.get(V);if(!$)throw new Error("No model parameters for bandit "+V);const z=$.modelData,Q=this.ensureContextualSubjectAttributes(S),Y=this.ensureActionsWithContextualAttributes(E),W=this.banditEvaluator.evaluateBandit(w,C,Q,Y,z);N=W.actionKey,U.banditAction=N,U.banditKey=V;const X={timestamp:new Date().toISOString(),featureFlag:w,bandit:V,subject:C,action:N,actionProbability:W.actionWeight,optimalityGap:W.optimalityGap,modelVersion:$.modelVersion,subjectNumericAttributes:Q.numericAttributes,subjectCategoricalAttributes:Q.categoricalAttributes,actionNumericAttributes:Y[N].numericAttributes,actionCategoricalAttributes:Y[N].categoricalAttributes,metaData:this.buildLoggerMetadata(),evaluationDetails:U};this.logBanditAction(X)}return{variation:P,action:N,evaluationDetails:U}}catch(T){if(t.logger.error("Error evaluating bandit action",T),!this.isGracefulFailureMode)throw T;return Object.assign(Object.assign({},L),{evaluationDetails:O.buildForNoneResult("ASSIGNMENT_ERROR",`Error evaluating bandit action: ${T.message}`)})}}ensureNonContextualSubjectAttributes(w){let C;if(this.isInstanceOfContextualAttributes(w)){const S=w;C=Object.assign(Object.assign({},S.numericAttributes),S.categoricalAttributes)}else C=w;return C}ensureContextualSubjectAttributes(w){let C;return this.isInstanceOfContextualAttributes(w)?C=w:C=this.deduceAttributeContext(w),C}ensureActionsWithContextualAttributes(w){let C={};return Array.isArray(w)?w.forEach(S=>{C[S]={numericAttributes:{},categoricalAttributes:{}}}):Object.values(w).every(this.isInstanceOfContextualAttributes)?C=w:Object.entries(w).forEach(([S,E])=>{C[S]=this.deduceAttributeContext(E)}),C}isInstanceOfContextualAttributes(w){return!!(typeof w=="object"&&w&&"numericAttributes"in w&&"categoricalAttributes"in w)}deduceAttributeContext(w){const C={numericAttributes:{},categoricalAttributes:{}};return Object.entries(w).forEach(([S,E])=>{typeof E=="number"&&isFinite(E)?C.numericAttributes[S]=E:C.categoricalAttributes[S]=E}),C}logBanditAction(w){if(!this.banditLogger){this.queuedBanditEvents.length<a.MAX_EVENT_QUEUE_SIZE&&this.queuedBanditEvents.push(w);return}try{this.banditLogger.logBanditAction(w)}catch(C){t.logger.warn("Error encountered logging bandit action",C)}}getAssignmentVariation(w,C,S,E,M){try{const k=this.getAssignmentDetail(w,C,S,M);return k.variation?{eppoValue:l.EppoValue.valueOf(k.variation.value,M),flagEvaluationDetails:k.flagEvaluationDetails}:{eppoValue:E,flagEvaluationDetails:k.flagEvaluationDetails}}catch(k){const A=this.rethrowIfNotGraceful(k,E),R=new u.FlagEvaluationDetailsBuilder("",[],"","").buildForNoneResult("ASSIGNMENT_ERROR",`Assignment Error: ${k.message}`);return{eppoValue:A,flagEvaluationDetails:R}}}rethrowIfNotGraceful(w,C){if(this.isGracefulFailureMode)return t.logger.error(`[Eppo SDK] Error getting assignment: ${w.message}`),C??l.EppoValue.Null();throw w}getAssignmentDetail(w,C,S={},E){(0,g.validateNotBlank)(C,"Invalid argument: subjectKey cannot be blank"),(0,g.validateNotBlank)(w,"Invalid argument: flagKey cannot be blank");const M=this.flagEvaluationDetailsBuilder(w),k=this.getConfigDetails(),A=this.getFlag(w);if(A===null){t.logger.warn(`[Eppo SDK] No assigned variation. Flag not found: ${w}`);const O=M.buildForNoneResult("FLAG_UNRECOGNIZED_OR_DISABLED",`Unrecognized or disabled flag: ${w}`);return(0,c.noneResult)(w,C,S,O)}if(!x(E,A.variationType))throw new TypeError(`Variation value does not have the correct type. Found: ${A.variationType} != ${E} for flag ${w}`);if(!A.enabled){t.logger.info(`[Eppo SDK] No assigned variation. Flag is disabled: ${w}`);const O=M.buildForNoneResult("FLAG_UNRECOGNIZED_OR_DISABLED",`Unrecognized or disabled flag: ${w}`);return(0,c.noneResult)(w,C,S,O)}const R=this.evaluator.evaluateFlag(A,k,C,S,this.isObfuscated,E);if(this.isObfuscated&&(R.flagKey=w),R?.variation&&!b(E,R.variation.value)){const{key:O,value:L}=R.variation,P=`Expected variation type ${E} does not match for variation '${O}' with value ${L}`,N=M.buildForNoneResult("TYPE_MISMATCH",P);return(0,c.noneResult)(w,C,S,N)}try{R?.doLog&&this.logAssignment(R)}catch(O){t.logger.error(`[Eppo SDK] Error logging assignment event: ${O}`)}return R}flagEvaluationDetailsBuilder(w){var C;const S=this.getFlag(w),E=this.getConfigDetails();return new u.FlagEvaluationDetailsBuilder(E.configEnvironment.name,(C=S?.allocations)!==null&&C!==void 0?C:[],E.configFetchedAt,E.configPublishedAt)}getConfigDetails(){var w,C,S;return{configFetchedAt:(w=this.flagConfigurationStore.getConfigFetchedAt())!==null&&w!==void 0?w:"",configPublishedAt:(C=this.flagConfigurationStore.getConfigPublishedAt())!==null&&C!==void 0?C:"",configEnvironment:(S=this.flagConfigurationStore.getEnvironment())!==null&&S!==void 0?S:{name:""}}}getFlag(w){return this.isObfuscated?this.getObfuscatedFlag(w):this.flagConfigurationStore.get(w)}getObfuscatedFlag(w){const C=this.flagConfigurationStore.get((0,p.getMD5Hash)(w));return C?(0,i.decodeFlag)(C):null}getFlagKeys(){return this.flagConfigurationStore.getKeys()}isInitialized(){return this.flagConfigurationStore.isInitialized()&&(!this.banditVariationConfigurationStore||this.banditVariationConfigurationStore.isInitialized())&&(!this.banditModelConfigurationStore||this.banditModelConfigurationStore.isInitialized())}setLogger(w){this.setAssignmentLogger(w)}setAssignmentLogger(w){var C;this.assignmentLogger=w,this.flushQueuedEvents(this.queuedAssignmentEvents,(C=this.assignmentLogger)===null||C===void 0?void 0:C.logAssignment)}setBanditLogger(w){var C;this.banditLogger=w,this.flushQueuedEvents(this.queuedBanditEvents,(C=this.banditLogger)===null||C===void 0?void 0:C.logBanditAction)}disableAssignmentCache(){this.assignmentCache=void 0}useNonExpiringInMemoryAssignmentCache(){this.assignmentCache=new r.NonExpiringInMemoryAssignmentCache}useLRUInMemoryAssignmentCache(w){this.assignmentCache=new r.LRUInMemoryAssignmentCache(w)}useCustomAssignmentCache(w){this.assignmentCache=w}setIsGracefulFailureMode(w){this.isGracefulFailureMode=w}getFlagConfigurations(){return this.flagConfigurationStore.entries()}flushQueuedEvents(w,C){const S=[...w];w.length=0,C&&S.forEach(E=>{try{C(E)}catch(M){t.logger.error(`[Eppo SDK] Error flushing event to logger: ${M.message}`)}})}logAssignment(w){var C,S,E,M,k;const{flagKey:A,subjectKey:R,allocationKey:O,subjectAttributes:L,variation:P}=w,N=Object.assign(Object.assign({},(C=w.extraLogging)!==null&&C!==void 0?C:{}),{allocation:O??null,experiment:O?`${A}-${O}`:null,featureFlag:A,variation:(S=P?.key)!==null&&S!==void 0?S:null,subject:R,timestamp:new Date().toISOString(),subjectAttributes:L,metaData:this.buildLoggerMetadata(),evaluationDetails:w.flagEvaluationDetails});if(!(P&&O&&(!((E=this.assignmentCache)===null||E===void 0)&&E.has({flagKey:A,subjectKey:R,allocationKey:O,variationKey:P.key})))){if(!this.assignmentLogger){this.queuedAssignmentEvents.length<a.MAX_EVENT_QUEUE_SIZE&&this.queuedAssignmentEvents.push(N);return}try{this.assignmentLogger.logAssignment(N),(M=this.assignmentCache)===null||M===void 0||M.set({flagKey:A,subjectKey:R,allocationKey:O??"__eppo_no_allocation",variationKey:(k=P?.key)!==null&&k!==void 0?k:"__eppo_no_variation"})}catch(T){t.logger.error(`[Eppo SDK] Error logging assignment event: ${T.message}`)}}}buildLoggerMetadata(){return{obfuscated:this.isObfuscated,sdkLanguage:"javascript",sdkLibVersion:y.LIB_VERSION}}}Lu.default=v;function x(_,w){return _===void 0||w===_}Lu.checkTypeMatch=x;function b(_,w){if(_==null)return!0;switch(_){case m.VariationType.STRING:return typeof w=="string";case m.VariationType.BOOLEAN:return typeof w=="boolean";case m.VariationType.INTEGER:return typeof w=="number"&&Number.isInteger(w);case m.VariationType.NUMERIC:return typeof w=="number";case m.VariationType.JSON:return typeof w=="string";default:return!1}}return Lu.checkValueTypeMatch=b,Lu}var j0={},EQ;function mtt(){if(EQ)return j0;EQ=1,Object.defineProperty(j0,"__esModule",{value:!0}),j0.HybridConfigurationStore=void 0;const e=n3();class t{constructor(r,s){this.servingStore=r,this.persistentStore=s,this.environment=null,this.configFetchedAt=null,this.configPublishedAt=null}async init(){if(!this.persistentStore)return;this.persistentStore.isInitialized()||e.logger.warn(`${e.loggerPrefix} Persistent store is not initialized from remote configuration. Serving assignments that may be stale.`);const r=await this.persistentStore.entries();this.servingStore.setEntries(r)}isInitialized(){var r,s;return this.servingStore.isInitialized()&&((s=(r=this.persistentStore)===null||r===void 0?void 0:r.isInitialized())!==null&&s!==void 0?s:!0)}async isExpired(){var r;const s=await((r=this.persistentStore)===null||r===void 0?void 0:r.isExpired());return s??!0}get(r){return this.servingStore.isInitialized()||e.logger.warn(`${e.loggerPrefix} getting a value from a ServingStore that is not initialized.`),this.servingStore.get(r)}entries(){return this.servingStore.entries()}getKeys(){return this.servingStore.getKeys()}async setEntries(r){return this.persistentStore&&await this.persistentStore.setEntries(r),this.servingStore.setEntries(r),!0}setEnvironment(r){this.environment=r}getEnvironment(){return this.environment}getConfigFetchedAt(){return this.configFetchedAt}setConfigFetchedAt(r){this.configFetchedAt=r}getConfigPublishedAt(){return this.configPublishedAt}setConfigPublishedAt(r){this.configPublishedAt=r}}return j0.HybridConfigurationStore=t,j0}var yf={},MQ;function ptt(){if(MQ)return yf;MQ=1,Object.defineProperty(yf,"__esModule",{value:!0}),yf.MemoryOnlyConfigurationStore=yf.MemoryStore=void 0;class e{constructor(){this.store={},this.initialized=!1}get(r){var s;return(s=this.store[r])!==null&&s!==void 0?s:null}entries(){return this.store}getKeys(){return Object.keys(this.store)}isInitialized(){return this.initialized}setEntries(r){this.store=Object.assign({},r),this.initialized=!0}}yf.MemoryStore=e;class t{constructor(){this.servingStore=new e,this.initialized=!1,this.configFetchedAt=null,this.configPublishedAt=null,this.environment=null}init(){return this.initialized=!0,Promise.resolve()}get(r){return this.servingStore.get(r)}entries(){return this.servingStore.entries()}getKeys(){return this.servingStore.getKeys()}async isExpired(){return!0}isInitialized(){return this.initialized}async setEntries(r){return this.servingStore.setEntries(r),this.initialized=!0,!0}getEnvironment(){return this.environment}setEnvironment(r){this.environment=r}getConfigFetchedAt(){return this.configFetchedAt}setConfigFetchedAt(r){this.configFetchedAt=r}getConfigPublishedAt(){return this.configPublishedAt}setConfigPublishedAt(r){this.configPublishedAt=r}}return yf.MemoryOnlyConfigurationStore=t,yf}var kQ;function xy(){return kQ||(kQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VariationType=e.assignmentCacheValueToString=e.assignmentCacheKeyToString=e.LRUInMemoryAssignmentCache=e.NonExpiringInMemoryAssignmentCache=e.MemoryOnlyConfigurationStore=e.HybridConfigurationStore=e.MemoryStore=e.validation=e.HttpClient=e.FlagConfigRequestor=e.ApiEndpoints=e.constants=e.EppoClient=e.AbstractAssignmentCache=e.applicationLogger=void 0;const t=ghe();e.ApiEndpoints=t.default;const n=n3();Object.defineProperty(e,"applicationLogger",{enumerable:!0,get:function(){return n.logger}});const r=yhe();Object.defineProperty(e,"AbstractAssignmentCache",{enumerable:!0,get:function(){return r.AbstractAssignmentCache}}),Object.defineProperty(e,"NonExpiringInMemoryAssignmentCache",{enumerable:!0,get:function(){return r.NonExpiringInMemoryAssignmentCache}}),Object.defineProperty(e,"LRUInMemoryAssignmentCache",{enumerable:!0,get:function(){return r.LRUInMemoryAssignmentCache}}),Object.defineProperty(e,"assignmentCacheKeyToString",{enumerable:!0,get:function(){return r.assignmentCacheKeyToString}}),Object.defineProperty(e,"assignmentCacheValueToString",{enumerable:!0,get:function(){return r.assignmentCacheValueToString}});const s=ftt();e.EppoClient=s.default;const a=xhe();e.FlagConfigRequestor=a.default;const i=mtt();Object.defineProperty(e,"HybridConfigurationStore",{enumerable:!0,get:function(){return i.HybridConfigurationStore}});const l=ptt();Object.defineProperty(e,"MemoryStore",{enumerable:!0,get:function(){return l.MemoryStore}}),Object.defineProperty(e,"MemoryOnlyConfigurationStore",{enumerable:!0,get:function(){return l.MemoryOnlyConfigurationStore}});const c=$b();e.constants=c;const u=Ehe();e.HttpClient=u.default;const d=Wb();Object.defineProperty(e,"VariationType",{enumerable:!0,get:function(){return d.VariationType}});const m=Mhe();e.validation=m}(vN)),vN}var A0={},ho={},qw={},TQ;function khe(){if(TQ)return qw;TQ=1,Object.defineProperty(qw,"__esModule",{value:!0});class e{constructor(n){this.storage=n}async has(n){return!!await this.get(n)}async get(n){var r;const s=await this.storage.get(n);return(r=s?.[n])!==null&&r!==void 0?r:void 0}async entries(){return await this.storage.get(null)}async set(n,r){await this.storage.set({[n]:r})}}return qw.default=e,qw}var I0={},vf={},NQ;function The(){return NQ||(NQ=1,Object.defineProperty(vf,"__esModule",{value:!0}),vf.META_KEY=vf.CONFIGURATION_KEY=void 0,vf.CONFIGURATION_KEY="eppo-configuration",vf.META_KEY="eppo-configuration-meta"),vf}var jQ;function Nhe(){if(jQ)return I0;jQ=1,Object.defineProperty(I0,"__esModule",{value:!0}),I0.ChromeStorageEngine=void 0;const e=The();class t{constructor(r,s){this.storageMap=r,this.getContentsJsonString=async()=>{const i=await this.storageMap.get(this.contentsKey);return i??null},this.getMetaJsonString=async()=>{const i=await this.storageMap.get(this.metaKey);return i??null},this.setContentsJsonString=async i=>{await this.storageMap.set(this.contentsKey,i)},this.setMetaJsonString=async i=>{await this.storageMap.set(this.metaKey,i)};const a=s?`-${s}`:"";this.contentsKey=e.CONFIGURATION_KEY+a,this.metaKey=e.META_KEY+a}}return I0.ChromeStorageEngine=t,I0}var R0={},AQ;function htt(){if(AQ)return R0;AQ=1,Object.defineProperty(R0,"__esModule",{value:!0}),R0.IsolatableHybridConfigurationStore=void 0;const e=xy();class t extends e.HybridConfigurationStore{constructor(r,s,a="always"){super(r,s),this.servingStoreUpdateStrategy=a}async setEntries(r){var s;this.persistentStore&&await this.persistentStore.setEntries(r);const a=!this.persistentStore||await this.persistentStore.isExpired(),i=!(!((s=this.servingStore.getKeys())===null||s===void 0)&&s.length),l=this.servingStoreUpdateStrategy==="always"||a&&this.servingStoreUpdateStrategy==="expired"||a&&i;return l&&this.servingStore.setEntries(r),l}}return R0.IsolatableHybridConfigurationStore=t,R0}var P0={},IQ;function gtt(){if(IQ)return P0;IQ=1,Object.defineProperty(P0,"__esModule",{value:!0}),P0.LocalStorageEngine=void 0;const e=The();class t{constructor(r,s){this.localStorage=r,this.getContentsJsonString=async()=>this.localStorage.getItem(this.contentsKey),this.getMetaJsonString=async()=>this.localStorage.getItem(this.metaKey),this.setContentsJsonString=async i=>{this.localStorage.setItem(this.contentsKey,i)},this.setMetaJsonString=async i=>{this.localStorage.setItem(this.metaKey,i)};const a=s?`-${s}`:"";this.contentsKey=e.CONFIGURATION_KEY+a,this.metaKey=e.META_KEY+a}}return P0.LocalStorageEngine=t,P0}var O0={},RQ;function ytt(){if(RQ)return O0;RQ=1,Object.defineProperty(O0,"__esModule",{value:!0}),O0.StringValuedAsyncStore=void 0;class e{constructor(n,r=0){this.storageEngine=n,this.cooldownSeconds=r,this.initialized=!1}isInitialized(){return this.initialized}async isExpired(){if(!this.cooldownSeconds)return!0;const n=await this.storageEngine.getMetaJsonString();let r=!0;if(n){const a=JSON.parse(n).lastUpdatedAtMs;r=!a||Date.now()-a>this.cooldownSeconds*1e3}return r}async entries(){const n=await this.storageEngine.getContentsJsonString();return n?JSON.parse(n):{}}async setEntries(n){await this.storageEngine.setContentsJsonString(JSON.stringify(n));const r={lastUpdatedAtMs:new Date().getTime()};await this.storageEngine.setMetaJsonString(JSON.stringify(r)),this.initialized=!0}}return O0.StringValuedAsyncStore=e,O0}var PQ;function PF(){if(PQ)return ho;PQ=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.localStorageIfAvailable=ho.hasWindowLocalStorage=ho.chromeStorageIfAvailable=ho.hasChromeStorage=ho.configurationStorageFactory=void 0;const e=xy(),t=khe(),n=Nhe(),r=htt(),s=gtt(),a=ytt();function i({maxAgeSeconds:m=0,servingStoreUpdateStrategy:p="always",hasChromeStorage:h=!1,hasWindowLocalStorage:g=!1,persistentStore:y=void 0,forceMemoryOnly:v=!1},{chromeStorage:x,windowLocalStorage:b,storageKeySuffix:_}={}){if(v)return new e.MemoryOnlyConfigurationStore;if(y)return new r.IsolatableHybridConfigurationStore(new e.MemoryStore,y,p);if(h&&x){const w=new n.ChromeStorageEngine(new t.default(x),_??"");return new r.IsolatableHybridConfigurationStore(new e.MemoryStore,new a.StringValuedAsyncStore(w,m),p)}else if(g&&b){const w=new s.LocalStorageEngine(b,_??"");return new r.IsolatableHybridConfigurationStore(new e.MemoryStore,new a.StringValuedAsyncStore(w,m),p)}return new e.MemoryOnlyConfigurationStore}ho.configurationStorageFactory=i;function l(){return typeof chrome<"u"&&!!chrome.storage}ho.hasChromeStorage=l;function c(){return l()?chrome.storage.local:void 0}ho.chromeStorageIfAvailable=c;function u(){try{return typeof window<"u"&&!!window.localStorage}catch{return!1}}ho.hasWindowLocalStorage=u;function d(){return u()?window.localStorage:void 0}return ho.localStorageIfAvailable=d,ho}var Kw={},OQ;function vtt(){if(OQ)return Kw;OQ=1,Object.defineProperty(Kw,"__esModule",{value:!0});const e=xy(),t=khe();class n{constructor(s){this.storage=new t.default(s)}set(s){this.storage.set((0,e.assignmentCacheKeyToString)(s),(0,e.assignmentCacheValueToString)(s))}has(s){throw new Error("This should never be called for ChromeStorageAssignmentCache, use getEntries() instead.")}async getEntries(){const s=await this.storage.entries();return Object.entries(s).map(([a,i])=>[a,i])}}return Kw.default=n,Kw}var Yw={},LQ;function jhe(){if(LQ)return Yw;LQ=1,Object.defineProperty(Yw,"__esModule",{value:!0});class e{constructor(n,r){this.servingStore=n,this.persistentStore=r}async init(){const n=await this.persistentStore.getEntries();n&&this.servingStore.setEntries(n)}set(n){this.servingStore.set(n),this.persistentStore.set(n)}has(n){return this.servingStore.has(n)}}return Yw.default=e,Yw}var L0={},DQ;function xtt(){if(DQ)return L0;DQ=1,Object.defineProperty(L0,"__esModule",{value:!0}),L0.LocalStorageAssignmentCache=void 0;const e=xy(),t=PF();class n extends e.AbstractAssignmentCache{constructor(a){super(new r(a))}setEntries(a){a.forEach(([i,l])=>{i&&l&&this.delegate.set(i,l)})}getEntries(){return Promise.resolve(Array.from(this.entries()))}}L0.LocalStorageAssignmentCache=n;class r{constructor(a){if(!(0,t.hasWindowLocalStorage)())throw new Error("LocalStorage is not available");const i=a?`-${a}`:"";this.localStorageKey=`eppo-assignment${i}`}clear(){this.getCache().clear()}delete(a){return this.getCache().delete(a)}forEach(a,i){this.getCache().forEach(a,i)}entries(){return this.getCache().entries()}keys(){return this.getCache().keys()}values(){return this.getCache().values()}[Symbol.iterator](){return this.getCache()[Symbol.iterator]()}has(a){return this.getCache().has(a)}get(a){var i;return(i=this.getCache().get(a))!==null&&i!==void 0?i:void 0}set(a,i){return this.setCache(this.getCache().set(a,i))}getCache(){const a=window.localStorage.getItem(this.localStorageKey);return a?new Map(JSON.parse(a)):new Map}setCache(a){return window.localStorage.setItem(this.localStorageKey,JSON.stringify(Array.from(a.entries()))),this}}return L0}var Qw={},FQ;function btt(){if(FQ)return Qw;FQ=1,Object.defineProperty(Qw,"__esModule",{value:!0});const e=xy();class t{constructor(){this.store=new Map,this.cache=new e.NonExpiringInMemoryAssignmentCache(this.store)}set(r){this.cache.set(r)}has(r){return this.cache.has(r)}setEntries(r){const{store:s}=this;r.forEach(([a,i])=>s.set(a,i))}getEntries(){return Promise.resolve(Array.from(this.cache.entries()))}}return Qw.default=t,Qw}var UQ;function _tt(){if(UQ)return A0;UQ=1,Object.defineProperty(A0,"__esModule",{value:!0}),A0.assignmentCacheFactory=void 0;const e=PF(),t=vtt(),n=jhe(),r=xtt(),s=btt();function a({forceMemoryOnly:i=!1,chromeStorage:l,storageKeySuffix:c}){const u=new s.default;if(i)return u;if(l){const d=new t.default(l);return new n.default(u,d)}else if((0,e.hasWindowLocalStorage)()){const d=new r.LocalStorageAssignmentCache(c);return new n.default(u,d)}else return u}return A0.assignmentCacheFactory=a,A0}var xf={};const wtt="3.4.0",Ctt={version:wtt};var BQ;function Stt(){if(BQ)return xf;BQ=1,Object.defineProperty(xf,"__esModule",{value:!0}),xf.sdkName=xf.sdkVersion=void 0;const e=Ctt;return xf.sdkVersion=e.version,xf.sdkName="js-client-sdk",xf}var VQ;function Ett(){return VQ||(VQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getConfigUrl=e.getInstance=e.init=e.offlineInit=e.buildStorageKeySuffix=e.EppoJSClient=e.ChromeStorageEngine=void 0;const t=xy(),n=_tt(),r=jhe(),s=PF(),a=Stt();var i=Nhe();Object.defineProperty(e,"ChromeStorageEngine",{enumerable:!0,get:function(){return i.ChromeStorageEngine}});const l=(0,s.configurationStorageFactory)({forceMemoryOnly:!0});class c extends t.EppoClient{getStringAssignment(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getStringAssignment(y,v,x,b)}getStringAssignmentDetails(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getStringAssignmentDetails(y,v,x,b)}getBoolAssignment(y,v,x,b){return this.getBooleanAssignment(y,v,x,b)}getBooleanAssignment(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getBooleanAssignment(y,v,x,b)}getBooleanAssignmentDetails(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getBooleanAssignmentDetails(y,v,x,b)}getIntegerAssignment(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getIntegerAssignment(y,v,x,b)}getIntegerAssignmentDetails(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getIntegerAssignmentDetails(y,v,x,b)}getNumericAssignment(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getNumericAssignment(y,v,x,b)}getNumericAssignmentDetails(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getNumericAssignmentDetails(y,v,x,b)}getJSONAssignment(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getJSONAssignment(y,v,x,b)}getJSONAssignmentDetails(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getJSONAssignmentDetails(y,v,x,b)}getBanditAction(y,v,x,b,_){return c.getAssignmentInitializationCheck(),super.getBanditAction(y,v,x,b,_)}getBanditActionDetails(y,v,x,b,_){return c.getAssignmentInitializationCheck(),super.getBanditActionDetails(y,v,x,b,_)}static getAssignmentInitializationCheck(){c.initialized||t.applicationLogger.warn("Eppo SDK assignment requested before init() completed")}}e.EppoJSClient=c,c.instance=new c(l,void 0,void 0,void 0,!0),c.initialized=!1;function u(g){return g.replace(/\W/g,"").substring(0,8)}e.buildStorageKeySuffix=u;function d(g){var y,v;const x=(y=g.isObfuscated)!==null&&y!==void 0?y:!1,b=(v=g.throwOnFailedInitialization)!==null&&v!==void 0?v:!0;try{const _=(0,s.configurationStorageFactory)({forceMemoryOnly:!0});_.setEntries(g.flagsConfiguration).catch(S=>t.applicationLogger.warn("Error setting flags for memory-only configuration store",S)),c.instance.setFlagConfigurationStore(_),c.instance.setIsObfuscated(x),g.assignmentLogger&&c.instance.setAssignmentLogger(g.assignmentLogger);const C=(0,n.assignmentCacheFactory)({storageKeySuffix:"offline",forceMemoryOnly:!0});c.instance.useCustomAssignmentCache(C)}catch(_){if(t.applicationLogger.warn("Eppo SDK encountered an error initializing, assignment calls will return the default value and not be logged"),b)throw _}return c.initialized=!0,c.instance}e.offlineInit=d;async function m(g){var y,v,x,b,_,w,C;t.validation.validateNotBlank(g.apiKey,"API key required");let S;const E=c.instance,{apiKey:M,persistentStore:k,baseUrl:A,maxCacheAgeSeconds:R,updateOnFetch:O}=g;try{E.stopPolling(),E.setAssignmentLogger(g.assignmentLogger),E.setIsObfuscated(!0);const L=u(M),P=(0,s.configurationStorageFactory)({maxAgeSeconds:R,servingStoreUpdateStrategy:O,persistentStore:k,hasChromeStorage:(0,s.hasChromeStorage)(),hasWindowLocalStorage:(0,s.hasWindowLocalStorage)()},{chromeStorage:(0,s.chromeStorageIfAvailable)(),windowLocalStorage:(0,s.localStorageIfAvailable)(),storageKeySuffix:L});E.setFlagConfigurationStore(P);const N=(0,n.assignmentCacheFactory)({chromeStorage:(0,s.chromeStorageIfAvailable)(),storageKeySuffix:L});N instanceof r.default&&await N.init(),E.useCustomAssignmentCache(N);const T={apiKey:M,sdkName:a.sdkName,sdkVersion:a.sdkVersion,baseUrl:A,requestTimeoutMs:(y=g.requestTimeoutMs)!==null&&y!==void 0?y:void 0,numInitialRequestRetries:(v=g.numInitialRequestRetries)!==null&&v!==void 0?v:void 0,numPollRequestRetries:(x=g.numPollRequestRetries)!==null&&x!==void 0?x:void 0,pollAfterSuccessfulInitialization:(b=g.pollAfterSuccessfulInitialization)!==null&&b!==void 0?b:!1,pollAfterFailedInitialization:(_=g.pollAfterFailedInitialization)!==null&&_!==void 0?_:!1,throwOnFailedInitialization:!0,skipInitialPoll:(w=g.skipInitialRequest)!==null&&w!==void 0?w:!1};E.setConfigurationRequestParameters(T);let j,F;const U=P.init().then(async()=>P.getKeys().length?await P.isExpired()&&!g.useExpiredCache?(t.applicationLogger.warn("Eppo SDK set not to use expired cached configuration"),j=new Error("Configuration store was expired"),""):"config store":(t.applicationLogger.warn("Eppo SDK cached configuration is empty"),j=new Error("Configuration store was empty"),"")).catch(z=>{t.applicationLogger.warn("Eppo SDK encountered an error initializing from the configuration store",z),j=z}),V=E.fetchFlagConfigurations().then(()=>"fetch").catch(z=>{t.applicationLogger.warn("Eppo SDK encountered an error initializing from fetching",z),F=z});let $=await Promise.race([U,V]);$||(j?$=await V:$=await U),$||(S=F)}catch(L){S=L}if(S&&(t.applicationLogger.warn("Eppo SDK was unable to initialize with a configuration, assignment calls will return the default value and not be logged"+(g.pollAfterFailedInitialization?" until an experiment configuration is successfully retrieved":"")),!((C=g.throwOnFailedInitialization)!==null&&C!==void 0)||C))throw S;return c.initialized=!0,E}e.init=m;function p(){return c.instance}e.getInstance=p;function h(g,y){const v={sdkName:a.sdkName,sdkVersion:a.sdkVersion,apiKey:g};return new t.ApiEndpoints({baseUrl:y,queryParams:v}).ufcEndpoint()}e.getConfigUrl=h}(yN)),yN}var Ahe=Ett();const Mtt=HOe({__proto__:null},[Ahe]);class Th extends cb{name="CometError"}const ktt="pplx.comet-device-id",Ttt="comet_browser";function Xa(){return!!Wo()}function OF(){const e=Wo();return!!(e?.android_version||e?.ios_version)}const Wo=lie(function(){const t=jn(Ttt);if(t)try{return{device_id:jn(ktt),...JSON.parse(t)}}catch{return}},()=>Math.floor(Date.now()/(6*1e4))),Ntt=(e,t="selected_by_user_text")=>e?`
<${t}>
<selection_timestamp>${new Date(e.timestamp).toLocaleString()}</selection_timestamp>
${e.text}
</${t}>`:"",jtt=(e,t,n,r)=>{if(!e)return[];const s=Ntt(t.userSelection),a=[];if(n.status==="fulfilled"){const i=n.value?.contents||(n.value?.content?[n.value.content]:[]);for(const{markdown:l="",url:c="",title:u="",og_meta:d={},id:m}of i)a.push({content:[l.slice(0,r-s.length)+s],url:c,title:u,content_type:"markdown",content_origin:"current_tab",og_title:d?.title,og_description:d?.description,tab_id:String(m)})}else a.push({content:[],url:t.sidecarSourceTab.url,title:t.sidecarSourceTab.title,tab_id:String(t.sidecarSourceTab.tabId),content_type:"markdown",content_origin:"current_tab"}),t.sidecarSourceTab.secondaryTab&&a.push({content:[],url:t.sidecarSourceTab.secondaryTab.url,title:t.sidecarSourceTab.secondaryTab.title,tab_id:String(t.sidecarSourceTab.secondaryTab.tabId),content_type:"markdown",content_origin:"current_tab"});return a},Att=(e,t,n)=>{const r=[];return e.forEach(s=>{const a=t.status==="fulfilled"&&t.value.contents?.find(i=>i.id===s.id);if(!a){r.push({tab_id:String(s.id),content:[],url:s.url,title:"",content_type:"markdown",content_origin:"open_tab"});return}r.push({tab_id:String(a.id),content:[(a.markdown??"").slice(0,n)],url:a.url??"",title:a.title??"",content_type:"markdown",content_origin:"open_tab",og_title:a.og_meta?.title,og_description:a.og_meta?.description})}),r},Itt=e=>e.map(({url:t,title:n,snippet:r,site_name:s,sitelinks:a})=>({url:t,title:n,snippet:r,is_navigational:!0,site_name:s??null,sitelinks:a?.map(({title:i,url:l,snippet:c})=>({title:i,url:l,snippet:c??null}))??null})),Ihe=async({clientPayloadCacheKey:e,cometBrowser:t,maxChars:n,includeSidecar:r,attachedTabs:s,reason:a,cometState:i,requestId:l,navigationResults:c=[]})=>{if(!t)return;const u=[],d=Wo(),m={contextType:"runtime",queryContextTimeMs:0,processContextTimeMs:0,getNavigationItemsTimeMs:null,filteredItemsCount:null,version:d.browser_version,mainExtVersion:d.agent_extension_version},p=jl({context_type:m?.contextType,browser_version:m?.version,main_ext_version:m?.mainExtVersion,content_type:m?.contentType});try{ne.info("fetching sidecar context",{request_id:l});const[h,g]=await Promise.allSettled([r?t.GetSidecarContext({key:e,request_id:l}):Promise.resolve(void 0),s.length?t.GetContent({key:e,pages:[...s],request_id:l}):Promise.resolve({contents:[]})]),y=jtt(r,i,h,n);if(u.push(...y),s.length){const x=Att(s,g,n);u.push(...x)}m.queryContextTimeMs=performance.now()-p.getStartTimeFromTimeOrigin(),ne.info("sending sidecar context",{request_id:l});const{error:v}=await se.POST("/rest/browser/client_payload",a,{backOffTime:100,numRetries:2,timeoutMs:Ut.HIGH,body:{client_payload_cache_key:e,client_context:u||[],...c.length>0&&{client_search_results:Itt(c)},metadata:m},headers:{[Dr]:l}});if(p.addTiming("browser.client_context.overall_time_ms"),v)throw new Ce("API_CLIENTS_ERROR",{details:{clientPayloadCacheKey:e},cause:v})}catch(h){ne.error("Error sending client payload for cache key ",e,h,{request_id:l})}},Rtt=async({url:e,cometBrowser:t,stepUuid:n,extraHeaders:r,reason:s})=>{const a=t.openTab({url:e});await Zu(a,n,r,s)},Ptt=async({cometBrowser:e,maxUrls:t=20})=>{if(e)try{const n=await e.getTopMostVisitedUrls({maxUrls:t},"get-top-most-urls-for-ntp");return n.is_success?n.mostVisitedUrls:void 0}catch(n){ne.error("Error fetching top most urls browser",n);return}},dP=async(e,t,n)=>{try{const{error:r}=await se.POST("/rest/browser/tool_failure",n,{body:{client_payload_cache_key:e.clientPayloadCacheKey,error_type:e.errorType,error_msg:e.errorMsg},backOffTime:100,numRetries:2,headers:t,timeoutMs:Ut.MEDIUM});if(r)throw new Ce("API_CLIENTS_ERROR",{details:{clientPayloadCacheKey:e.clientPayloadCacheKey},cause:r})}catch(r){ne.error("Error while sending a failure of tool",r,{request_id:t[Dr]})}},Zu=async(e,t,n,r)=>{try{const s=await e,{error:a}=await se.POST("/rest/browser/tool_result",r,{body:{client_payload_cache_key:t,payload:s},backOffTime:100,numRetries:2,headers:n,timeoutMs:Ut.MEDIUM});if(a)throw new Ce("API_CLIENTS_ERROR",{details:{clientPayloadCacheKey:t},cause:a})}catch(s){const i=s&&s.message||`sendToolResult error: ${s}`,l="errorType"in s?s:{errorType:"unhandled",errorMsg:i};return ne.error("Error while sending tool result",l.errorType,l.errorMsg,{request_id:n[Dr]}),dP({clientPayloadCacheKey:t,...l},n,r)}},fP={red:"red",maroon:"blue",orange:"cyan",teal:"green",grey:"grey",brown:"orange",green:"pink",gold:"purple",purple:"red",blue:"yellow"},$Q=Object.fromEntries(Object.entries(fP).map(([e,t])=>[t,e])),Rhe=e=>$Q[e]??$Q.grey;async function Ott(e,t,n,r,s){const a=Promise.allSettled(e.map(async i=>t.groupTabs({tabIds:i.tab_ids,collapsed:i.collapsed,color:fP[i.color]??fP.grey,groupId:i.group_id,title:i.title},n,r[Dr]))).then(i=>({groups:i.map(l=>{if(l.status=="fulfilled"&&l.value.is_success)return{...l.value.tabGroup,color:Rhe(l.value.tabGroup.color)}}).filter(l=>l!==void 0)}));await Zu(a,n,r,s)}async function Ltt(e,t,n,r,s){const a=t.closeTabs({tabIds:e.tab_ids},n,r[Dr]);await Zu(a,n,r,s)}async function Dtt(e,t,n,r,s){const a={[X4.OPEN_TAB]:Q4.OPEN_TABS,[X4.RECENTLY_CLOSED_TAB]:Q4.RECENTLY_CLOSED_TABS,[X4.BROWSER_HISTORY]:Q4.HISTORY},i=e.browser_content_sources.map(c=>a[c]).filter(Boolean),l=t.SearchBrowser({closed_tabs_max_results:e.max_results,history_max_results:e.max_results,open_tabs_max_results:e.max_results,request_id:r[Dr],key:n,queries:Array.isArray(e.queries)?[...e.queries]:[],sources:i,start_time:e.start_time?Date.now()-new Date(e.start_time).getTime():void 0,end_time:e.end_time?Date.now()-new Date(e.end_time).getTime():void 0});await Zu(l,n,r,s)}async function WQ({result:e,key:t,reason:n}){try{await se.POST("/rest/browser/initial_history_summary",n,{body:{key:t,data:e},backOffTime:100,numRetries:2,timeoutMs:Ut.MEDIUM,headers:{"Content-Type":"application/json"}})}catch(r){ne.error("Error sending client payload for cache key ",r)}}function Ftt({entropyBrowser:e,browserHistorySummaryNumDays:t,browserHistorySummaryMaxResults:n,reason:r}){const{addTiming:s}=jl(),a=crypto.randomUUID();return e.getInitialHistorySummary(a,t,n).then(i=>{s("web.frontend.comet_history_summary_v2"),WQ({result:i,key:a,reason:r})}).catch(()=>{WQ({result:{open_tabs_results:[],history_results:[],closed_tabs_results:[]},key:a,reason:r})}),a}const Utt=async({entropyBrowser:e,url:t})=>{const n=await e.getQuickActions("get-quick-actions-for-sidecar-suggests");return n.is_success?n.buttons.map(({prompt:r})=>({query:r,image:p1(t)})):[]},Btt=/^\w+:\/\//;let ES=null;const Vtt=()=>{if(!Xa()||ES!==null)return;const e=new Image;e.onerror=()=>{ES=!1,console.warn("[Comet] chrome://favicon/ is not supported. Using our backend as fallback.")},e.onload=()=>{ES=!0},e.src="chrome://favicon/"},p1=(e,t=64,n="3x")=>{if(!ES)return`https://www.perplexity.ai/rest/browser/favicon?url=${hRe(e)}`;const r=Btt.test(e)?e:`https://${e}`;let s;try{s=decodeURIComponent(r)}catch{s=r}const a=s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/'/g,"\\'").replace(/\s/g,"\\ ");return`chrome://favicon/size/${t}@${n}/${a}`},Phe=(e,t)=>t.dxt_name?e?.find(n=>n.name===t.dxt_name)?.manifest:void 0,ug=(e,t)=>t?[e,t].sort().join("-"):e.toString(),$tt=(e,t)=>t?[ug(e,t),e.toString(),t.toString()]:[e.toString()],Wtt={personal_search:!1,skip_search:!1,widget_type:"GENERAL",hide_nav:!1,image_generation:!1,time_widget:!1,hide_sources:!1,mhe_predictions:{skip_search:!1,image_generation_intent:!1,time_widget:!1,sports_intent:!1,places_search_intent:!1,shopping_intent:!1,movie_lists_intent:!1,image_preview:!1,video_preview:!1,nav_intent:!1,study_intent:!1,personal_search:!1,weather_widget:!1,finance_widget_gating:!1,calculator_widget:!1}},LF=600,Htt=async(e,t=LF)=>{const{data:n}=await se.POST("/rest/browser/classify","mobile_search_injection",{body:{query:e},timeoutMs:t});return n?.results};function DF(e,t){f.useEffect(()=>{if(typeof window>"u")return;const r=window.cookieStore;if(!r)return;const s=a=>{const i=a.deleted.find(c=>c.name===e),l=a.changed.find(c=>c.name===e);if(i||l){t(l??null);return}};return r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}},[e,t])}let Xw=[];class Ys{static PREFERRED_COLOR_SCHEME_COOKIE="colorScheme";static get userPreferredColorScheme(){return jn(this.PREFERRED_COLOR_SCHEME_COOKIE)}static set userPreferredColorScheme(t){Zt(this.PREFERRED_COLOR_SCHEME_COOKIE,t,{expires:400}),localStorage.setItem(this.PREFERRED_COLOR_SCHEME_COOKIE,t)}static removeUserPreferredColorScheme(){lm(this.PREFERRED_COLOR_SCHEME_COOKIE),localStorage.removeItem(this.PREFERRED_COLOR_SCHEME_COOKIE)}static get isSystemScheme(){return!this.userPreferredColorScheme}static addOverride(t){const n={scheme:t};return Xw.push(n),n}static removeOverride(t){Xw=Xw.filter(n=>n!==t)}static get colorScheme(){const t=Xw.at(-1);return t?t.scheme:this.isSystemScheme?typeof window>"u"?void 0:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":this.userPreferredColorScheme}}function ztt(e){f.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia("(prefers-color-scheme: dark)");function r(){e(Ys.colorScheme)}return n.addEventListener("change",r),()=>{n.removeEventListener("change",r)}},[e])}function Gtt(){return f.useCallback(e=>{if(typeof window>"u")return;const n=document.documentElement.dataset.colorScheme==="dark",r=Ys.colorScheme;if(e){document.documentElement.dataset.colorScheme=e;return}n&&r==="light"?document.documentElement.dataset.colorScheme="light":!n&&r==="dark"&&(document.documentElement.dataset.colorScheme="dark")},[])}const Ohe=Wt("ColorSchemeContext",null),Lhe=I.memo(function(t){const{children:n,userPreferredColorScheme:r}=t,[s,a]=f.useState(r?!1:Ys.isSystemScheme),[i,l]=f.useState(r??Ys.colorScheme),c=f.useCallback(y=>{Ys.userPreferredColorScheme=y,a(!1),l(y)},[]),u=f.useCallback(()=>{Ys.removeUserPreferredColorScheme(),a(!0),l(Ys.colorScheme)},[]),d=Gtt(),m=f.useCallback(y=>{s&&(l(y),d())},[s,d]);ztt(m);const p=f.useMemo(()=>$s(y=>{const v=!y&&Ys.isSystemScheme;a(v),!v&&(l(y?.value??Ys.colorScheme),d(y?.value))},100),[d]);DF(Ys.PREFERRED_COLOR_SCHEME_COOKIE,p),f.useEffect(()=>{Ys.isSystemScheme&&(document.documentElement.dataset.colorScheme=Ys.colorScheme),d()},[d]);const h=f.useCallback(y=>{const v=Ys.addOverride(y);return l(Ys.colorScheme),d(),v},[d]),g=f.useCallback(y=>{Ys.removeOverride(y),l(Ys.colorScheme),d()},[d]);return typeof document<"u"&&document.documentElement.dataset.colorScheme!==i&&(document.documentElement.dataset.colorScheme=i),o.jsx(Ohe.Provider,{value:{colorScheme:i,isSystemColorScheme:s,setSystemColorScheme:u,setUserPreferredColorScheme:c,addOverride:h,removeOverride:g},children:n})});Lhe.displayName="ColorSchemeProvider";function Wr(e){const t=f.useContext(Ohe);if(!t)throw new Error("Attempted to access ColorSchemeContext from useColorScheme() without adding <ColorSchemeProvider> to the tree.");const[n,r]=f.useState(!t.isSystemColorScheme);f.useEffect(()=>{e?.addSecondPass&&t.isSystemColorScheme&&!n&&r(!0)},[t.isSystemColorScheme,n,e?.addSecondPass]);const s={...t};return e?.addSecondPass&&(s.isColorSchemeReady=n),s}function qtt({flag:e,override:t,defaultValue:n,isServer:r=!1}){if(!t)return{shouldUseOverride:!1,value:null};try{if(typeof n=="boolean")return{shouldUseOverride:!0,value:t==="true"};if(typeof n=="number")return{shouldUseOverride:!0,value:Number(t)};if(typeof n=="object")try{return{shouldUseOverride:!0,value:JSON.parse(t)}}catch(s){return ne.warn(`[Eppo ${r?"Server ":""}Override]`,`Failed to parse JSON override for flag "${e}"`,{override:t,error:s}),{shouldUseOverride:!0,value:n}}return{shouldUseOverride:!0,value:t}}catch(s){return ne.error(`[Eppo ${r?"Server ":""}Override] Error:`,s),{shouldUseOverride:!0,value:n}}}let D0;async function Ktt({apiKey:e,logAssignment:t}){if(D0)return D0;const{init:n}=await K(async()=>{const{init:r}=await Promise.resolve().then(()=>Mtt);return{init:r}},void 0);try{return D0=n({apiKey:e,assignmentLogger:{logAssignment:t}}),await D0,ne.info("[Eppo Experiments] Primary key initialization successful"),D0}catch(r){throw ne.error("[Eppo Experiments] Primary key failed",r),r}}const Dhe="eppo_overrides",Fhe="eppo_overrides",Ytt=e=>e?e.endsWith("@perplexity.ai"):!1,Qtt=e=>{const t={};return e.forEach((n,r)=>{if(r.startsWith("eppo_")){const s=r.replace("eppo_","");t[s]=n??""}}),t},Xtt=e=>{let t=!0;const n=JSON.stringify(e);try{Zt(Fhe,n)}catch{t=!1}return t=Bs.setItem(Dhe,n),t},Ztt=(e,t,n)=>{if(typeof window>"u"||n&&!Ytt(e))return!1;const r=Qtt(t);return Object.keys(r).length===0?!1:Xtt(r)};function Jtt(){try{const e=jn(Fhe);if(e)return JSON.parse(e);const t=Bs.getItem(Dhe);return t?JSON.parse(t):{}}catch{return{}}}const ent=(e,t)=>{const n=f.useRef(void 0);as(n.current,t)||(n.current=t),f.useEffect(e,[n.current])},tnt={getEppoTypedVariation:function(){return Promise.resolve(void 0)},keysRequiringRerender:[],addKeyRequiringRerender:()=>null,removeKeyRequiringRerender:()=>null},FF=Wt("EppoExperimentsContext",tnt),nnt="experiment assignment",MS="failed_open_to_default_value",rnt=(e,t,n,r)=>s=>Li({name:nnt,data:{subjectType:s.subjectAttributes.subjectType,pagePropsHostname:r,colorScheme:n,isPerplexityBrowser:e,...s},session:t});function snt(e){const t=Ahe.buildStorageKeySuffix(e),n=["eppo-configuration-","eppo-configuration-meta-","eppo-assignment-"];Re.keys().filter(s=>s.startsWith("eppo-")).forEach(s=>{const a=s.split("-");if(a.length<2)return;const i=a[a.length-1],l=a.slice(0,-1).join("-")+"-";n.includes(l)&&i!==t&&(ne.warn("[Eppo Experiments] Cleaning up old Eppo key",{key:s,keySuffix:i,storageKeySuffix:t}),Re.removeItem(s))})}const ant=({children:e,hostname:t,session:n,cfCountry:r})=>{const s=!!n?.user,a=gRe(),i=yRe(),l=Xa(),[c,u]=f.useState([]),{env:{isProduction:d,isStaging:m,deployName:p},device:{isWindowsApp:h}}=At(),y=d||m?"a2yUBlJ1tebb5g2II8WD1CzbVUszCSk3.ZWg9bnhqMGc3LmUuZXBwby5jbG91ZCZjcz1ueGowZzc":"KphAz1VUxSQKAZxlw1PwMdZNRia-a4B3.ZWg9bnhqMGc3LmUuZXBwby5jbG91ZCZjcz1ueGowZzc",{colorScheme:v}=Wr(),x=f.useRef(void 0),b=Nt(),[_,w]=f.useState(!1),{locale:C}=Z(),{isMobileStyle:S}=xe(),E=f.useCallback(R=>{rnt(l,n,v,t)(R)},[n,l,v,t]);f.useEffect(()=>{if(_||!b)return;Ztt(n?.user?.email,b,d)&&w(!0)},[b,n?.user?.email,_,d]);const M=f.useCallback(async function(R,{flag:O,subjectType:L,stableId:P,defaultValue:N,extraAttributes:T}){if(L==="user_nextauth_id"&&!s)return N;const j=Wo()?.device_id??void 0;let F;if(P?F=P:L==="user_nextauth_id"?F=n?.user?.id:L==="visitor_id"?F=a??void 0:L==="session_id"?F=i??void 0:L==="context_uuid"?F=T?.context_uuid:L==="comet_device_id"&&(F=j),!F)return ne.error("[Eppo Experiments]","No subject key found",{flag:O,subject_type:L,is_user_logged_in:s,has_stable_id:!!P,has_session_user_id:!!n?.user?.id,has_visitor_id:!!a,has_session_id:!!i,has_context_uuid:!!T?.context_uuid,has_comet_device_id:!!j,execution_context:typeof window<"u"?"client":"server",document_ready_state:typeof document<"u"?document.readyState:"unknown",eppo_provider_result:MS}),N;const U=Jtt(),{shouldUseOverride:V,value:$}=qtt({flag:O,override:U[O],defaultValue:N});if(V)return $??N;if(!y)return ne.error("[Eppo Experiments]","No Eppo API key found",{flag:O,eppo_provider_result:MS}),N;x.current||(snt(y),x.current=Ktt({apiKey:y,logAssignment:E}));const z=await x.current;try{return R(z,O,F,{subjectType:L,visitorId:a??void 0,sessionId:i??void 0,userEmail:n?.user?.email??void 0,userId:n?.user?.id??void 0,appApiClient:vRe(S,h),cfCountry:r,locale:C,isComet:l,deployName:p,cometDeviceId:j,...rie(),...T??{}},N)}catch{return ne.error("[Eppo Experiments] Error calling eppoFn",{flag:O,subjectKey:F,eppo_provider_result:MS}),N}},[y,n?.user?.id,n?.user?.email,a,i,E,S,h,r,C,l,p,s]),k=f.useCallback(R=>{u(O=>O.includes(R)?O:[...O,R])},[]),A=R=>{u(O=>O.includes(R)?O.filter(L=>L!==R):O)};return o.jsx(FF.Provider,{value:{getEppoTypedVariation:M,keysRequiringRerender:c,addKeyRequiringRerender:k,removeKeyRequiringRerender:A},children:e})};function by(e,t){const n=f.useContext(FF);if(!n)throw new Error("useGetEppoJSONVariation must be used within EppoExperimentsContext");const{getEppoTypedVariation:r}=n,[s,a]=f.useState(!0),[i,l]=f.useState(void 0),[c,u]=f.useState(e.defaultValue),d=f.useRef(e),m=f.useCallback(async()=>{const{skip:p,...h}=d.current;try{return r(t,h)}catch(g){return ne.error("[Eppo Experiments]","Error calling getEppoTypedVariation",{flag:h.flag,error:g,eppo_provider_result:MS}),h.defaultValue}},[r,t]);return ent(()=>{d.current=e;const{skip:p,...h}=e;if(p){a(!1);return}a(!0),r(t,h).then(g=>u(g),l).finally(()=>a(!1))},[r,e]),{value:c,loading:s,error:i,fetchVariation:m}}const Uhe=(e,...t)=>e.getJSONAssignment(...t);function Su(e){return by(e,Uhe)}function ont(e,t){const n={...e,subjectType:"context_uuid",extraAttributes:{...e.extraAttributes,context_uuid:t}};return by(n,Uhe)}const int=(e,...t)=>e.getStringAssignment(...t);function zb(e){return by(e,int)}const lnt=(e,...t)=>e.getBooleanAssignment(...t);function It(e){return by(e,lnt)}const cnt=(e,...t)=>e.getNumericAssignment(...t);function unt(e){return by(e,cnt)}const dnt=(e,...t)=>e.getIntegerAssignment(...t);function Bhe(e){return by(e,dnt)}function Vhe(e){return Su({...e,subjectType:"visitor_id",skip:!1})}function Rr(e){return It({...e,subjectType:"visitor_id",skip:!1})}const Wd=()=>{const e=f.useContext(FF);if(!e)throw new Error("useEppoExperiments must be used within EppoExperimentsContext");return e};var ld;(function(e){e.MY_FILES="my-files",e.SOURCES="sources",e.MY_CONNECTORS="my-connectors",e.SPACES="spaces"})(ld||(ld={}));function UF({reason:e,feature:t}){const{isEnterprise:n}=_n({reason:e}),{hasAccessToProFeatures:r}=_t(),{value:s}=Rr({flag:"connectors-space-access-for-pro",defaultValue:!1});return n?!0:r?t===ld.MY_FILES?!1:t===ld.SPACES?s:t!==ld.SOURCES:!1}const $he=I.memo(({children:e,uploadSources:t,placement:n,isMobileStyle:r,isOpen:s=!1,onOpen:a,onClose:i})=>{const{$t:l}=Z(),c=f.useCallback(()=>{a?.()},[a]),u=f.useCallback(()=>{i?.()},[i]),d=f.useMemo(()=>o.jsx(H,{className:"w-[200px]",children:o.jsx(Md,{items:t})}),[t]);return r?o.jsxs(o.Fragment,{children:[o.jsx(en,{subtitle:l({defaultMessage:"Attach",id:"Ye0Clmvfec"}),subtitleClassname:"ml-sm mt-sm font-medium",variant:"bottom-left-sheet",isOpen:s,onClose:u,children:o.jsx(H,{className:"p-xs w-full",children:o.jsx(Md,{textColor:"light",items:t})})}),o.jsx("span",{onClick:c,children:e})]}):o.jsx($o,{isOpen:s,placement:n,onOpen:c,onClose:u,content:d,children:e})});$he.displayName="AttachDropdown";const fnt=({skip:e,filters:t,reason:n})=>{const r=xu({enabled:!0,initialPageParam:null,queryKey:PXe(t),queryFn:({pageParam:a})=>yet({filters:t,skipToken:a,reason:n}),getNextPageParam:a=>a&&a.sites.length?a.skipToken:void 0}),s=r.data?.pages.map(a=>a?.sites??[]).flat()??ue;return f.useMemo(()=>({...r,sites:s}),[r,s])},l3=(e,t,n)=>{f.useEffect(()=>{const r=new IntersectionObserver(a=>{a.forEach(i=>{i.isIntersecting&&t()})},n),s=e.current;return s&&r.observe(s),()=>{s&&r.unobserve(s)}},[e,t,n])},mnt=11,Whe=I.memo(({onNext:e,onCancel:t})=>{const n="sharepoint-site-selector",r=f.useRef(null),{$t:s}=Z(),a=s({defaultMessage:"Next",id:"9+DdtuCqLw"}),i=s({defaultMessage:"Cancel",id:"47FYwba+bI"}),[l,c]=f.useState(null),u=f.useCallback(k=>c(k.name!==l?.name?k:null),[l]),{isMobileUserAgent:d}=xe(),[m,p]=f.useState(!1),[h,g]=f.useState(""),[y,v]=f.useState(h),x=f.useCallback(k=>{c(null),g(k)},[g]),{fetchNextPage:b,hasNextPage:_,isFetchingNextPage:w,sites:C,isLoading:S}=fnt({skip:!1,filters:{search_term:y},reason:n}),E=f.useMemo(()=>$s(()=>{_&&!w&&b()},500),[_,w,b]);l3(r,E,{threshold:.5}),f.useEffect(()=>{!S&&y===""&&p(C.length>mnt)},[S,y,C]),f.useEffect(()=>{const k=setTimeout(()=>v(h),250);return()=>clearTimeout(k)},[h]);const M=f.useCallback(()=>e(l?.webUrl??""),[e,l?.webUrl]);return o.jsxs(H,{variant:"transparent",className:"px-md gap-y-sm grid sm:w-full md:w-[515px]",children:[m&&o.jsx(Pr,{type:"text",isMobileUserAgent:d,placeholder:s({defaultMessage:"Search sites",id:"Nxbc+cXNbW"}),value:h,className:"bg-subtle rounded-md border-none",onChange:x,pill:!1}),o.jsxs(H,{variant:"subtler",className:"gap-y-sm scrollbar-subtle p-sm mb-md h-56 flex-col overflow-y-scroll rounded-lg",children:[S&&o.jsx(li,{className:"gap-y-sm grid",blockCount:5,size:"small",noLines:!0}),C.length>0&&C.map((k,A)=>o.jsx(Hhe,{site:k,index:A,handleSelectSite:u,selectedSiteName:l?.name,sitesLength:C.length,lastSiteRef:r},A)),!S&&!w&&C.length===0&&o.jsx(D,{variant:"small",color:"light",textCenter:!0,children:s({defaultMessage:"No results",id:"jHJmjfxD4s"})}),w&&o.jsx(li,{blockCount:1,size:"small"})]}),o.jsxs(H,{className:"gap-x-md flex justify-end",children:[o.jsx(he,{variant:"common",text:i,onClick:t}),o.jsx(he,{variant:"primary",text:a,textClassName:"",disabled:l===null,onClick:M})]})]})});Whe.displayName="SharepointSiteSelector";const Hhe=I.memo(({site:e,index:t,handleSelectSite:n,selectedSiteName:r,sitesLength:s,lastSiteRef:a})=>{const i=f.useCallback(()=>n(e),[n,e]),l=f.useMemo(()=>o.jsx(ce,{icon:Sr,className:"text-super"}),[]);return o.jsx(Te,{ref:t===s-1?a:null,variant:"common",layout:"split",text:e.name,size:"small",onClick:i,extraCSS:"pl-sm",trailingComponent:r===e.name?l:null,textClassName:"!text-left w-5/6 text-foreground",fullWidth:!0})});Hhe.displayName="TextButtonFactory";const BF=I.memo(({isOpen:e,options:t,onClose:n,onSelectSite:r})=>{const{$t:s}=Z(),a=f.useMemo(()=>t?.connector==="sharepoint"&&!t.webUrl,[t?.connector,t?.webUrl]),i=f.useMemo(()=>{if(a)return o.jsx(D,{variant:"entry-title-200",className:"ml-md line-clamp-3 text-pretty",children:s({defaultMessage:"Select a site",id:"NLmDBthOaZ"})})},[s,a]);return o.jsxs(en,{variant:a?"medium":"wide",isOpen:e,onClose:n,renderCloseButton:!a,titleContent:i,children:[a&&o.jsx(Whe,{onNext:r,onCancel:n}),!a&&o.jsx("iframe",{id:"microsoft-file-picker",height:"800px"})]})});BF.displayName="MicrosoftFilePickerModal";const _y=({reason:e,enabled:t=!0})=>{const{connectors:n,isLoading:r,isStale:s,refetch:a}=ma({reason:e,enabled:t}),{connectorsMap:i}=Vb({reason:e,enabled:t}),l=f.useMemo(()=>(n?.connectors??[]).filter(d=>Oq.includes(d.name)&&i[d.name]&&i[d.name].connected),[i,n]),c=f.useMemo(()=>(n?.connectors??[]).filter(d=>!Oq.includes(d.name)&&i[d.name]&&i[d.name].connected),[i,n]),u=f.useMemo(()=>(n?.connectors??[]).filter(d=>i[d.name]&&i[d.name].connected),[i,n]);return f.useMemo(()=>({enabledFileConnectors:l,enabledNonFileConnectors:c,enabledConnectors:u,isConnectorsLoading:r,isConnectorsStale:s,refetchConnectors:a}),[u,l,c,r,s,a])},zhe=({reason:e,fileRepoInfo:t,enablePolling:n=!1,activePollingIntervalMs:r=5e3,passivePollingIntervalMs:s=6e4})=>{const a=WXe(t),{data:i}=We({queryKey:a,queryFn:()=>_Je({request:{file_repository_info:t},reason:e}),refetchInterval:l=>{if(!n)return!1;const{pending_files:c=0}=l.state.data?.summary??{};return c>0?r:s},staleTime:qqe(30)});return{total:i?.summary?.total_files??0,pending:i?.summary?.pending_files??0,errors:i?.summary?.error_files??0,uploads:i?.summary?.total_uploads??0}},Gb=(e,t)=>{const{value:n,loading:r}=It({flag:"file-manager-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Po={type:"spring",stiffness:700,damping:50},Gl=I.memo(({keyProp:e=0,message:t,variant:n,description:r,ctaText:s,ctaOnClick:a,closeOnCtaClick:i=!0,isVisible:l=!1,timeout:c,handleClick:u,handleClose:d,onTimeout:m=kn,position:p="top",iconOverride:h,...g})=>{const[y,v]=f.useState(l);f.useEffect(()=>{v(l)},[l]),f.useEffect(()=>{let w;return l&&c&&(w=setTimeout(()=>{v(!1),m()},c*1e3)),()=>{clearTimeout(w)}},[y,c,l,m]);const x=f.useCallback(()=>{v(!1),d?.()},[d]),b=f.useCallback(()=>{a?.(),i&&x()},[a,x,i]),_=f.useMemo(()=>{if(h)return h;switch(n){case"success":return vPe;case"error":return OH;case"refresh":return yPe;case"warning":return OH}},[h,n]);return o.jsx(Ke,{children:y&&o.jsx(Bd,{children:o.jsx(ge.div,{className:B(`right-toastHMargin erp-sidecar:top-[114px] fixed ${p==="top"?"top-toastVMargin":"bottom-toastVMargin"} z-30 flex items-center justify-center ${u?"cursor-pointer":""}`),initial:{opacity:0,x:6},animate:{opacity:1,x:0},exit:{opacity:0,x:6},transition:Po,...g,children:o.jsxs(H,{variant:"raised",className:B("gap-x-sm p-md shadow-overlay flex items-center rounded-lg",{"cursor-pointer":n==="refresh"}),onClick:u??kn,children:[o.jsx(H,{variant:"subtler",className:"p-sm dark:bg-subtle rounded-md",children:o.jsx(D,{variant:"smallBold",color:n==="error"?"red":n==="warning"?"yellow":"super",children:o.jsx(ce,{icon:_,size:"sm"})})}),o.jsxs(H,{className:"flex-1",children:[o.jsx(D,{variant:"small",color:"default",children:t}),r&&o.jsx(D,{variant:"tinyRegular",color:"light",children:r})]}),s&&a&&o.jsx(Te,{text:s,variant:"subtle",onClick:b,size:"small",extraCSS:"ml-xl"}),c===void 0&&o.jsx(Te,{variant:"primary",size:"tiny",icon:BM,onClick:x,extraCSS:"ml-sm",noPadding:!0})]})},e)})})});Gl.displayName="Toast";const Ghe=Wt("UploadProgressContext",null),qhe=()=>{const e=f.useContext(Ghe);if(!e)throw new Error("useUploadProgress must be used within an UploadProgressProvider");return e},Khe=I.memo(({children:e})=>{const[t,n]=f.useState([]),[r,s]=f.useState(!1),{variation:a}=Gb(!1),i=f.useCallback(p=>{n(h=>[...h,{id:h.length+1,fileRepoInfo:p.fileRepoInfo,collectionSlug:p.collectionSlug}])},[]),l=f.useCallback(p=>{n(h=>h.filter(g=>g.id!==p))},[]),c=f.useMemo(()=>({startMonitoring:i,setModalOpen:s}),[i,s]),u=a&&!r,d=t.at(-1),m=f.useCallback(()=>{d?.id&&l(d.id)},[d?.id,l]);return o.jsxs(Ghe.Provider,{value:c,children:[e,u&&d&&o.jsx(pnt,{fileRepoInfo:d.fileRepoInfo,collectionSlug:d.collectionSlug,onClose:m})]})});Khe.displayName="UploadProgressProvider";const pnt=({fileRepoInfo:e,collectionSlug:t,onClose:n})=>{const r="upload-progress-toast",{$t:s}=Z(),a=gt(),[i,l]=f.useState(!1),[c,u]=f.useState(0),[d,m]=f.useState(0),{total:p,errors:h,pending:g}=zhe({enablePolling:!i,activePollingIntervalMs:5e3,passivePollingIntervalMs:5e3,fileRepoInfo:e,reason:r});f.useEffect(()=>{p>c&&u(p),h>d&&m(h),p===0&&c>0&&l(!0)},[p,h,g,c,d]);const y=s({defaultMessage:"See files",id:"p+DFrrlLh2"}),v=f.useMemo(()=>{switch(e.file_repository_type){case"USER":return()=>a.push("/account/files");case"ORG":return()=>a.push("/account/org/files");case"COLLECTION":if(!t){Ex.error("Collection slug is not set",{fileRepoInfo:e});return}return()=>a.push(`/spaces/${t}?showUploadModal`);default:Ex.warn("Unsupported file repository type",{fileRepoInfo:e});return}},[e,a,t]);if(!c)return null;if(i){const w=s({defaultMessage:"{totalFiles, number} files synced",id:"9MS85urDwN"},{totalFiles:c}),C=s({defaultMessage:"Ready to search",id:"n813XUWD4Q"});return o.jsx(Gl,{message:w,description:C,variant:"success",iconOverride:I7,ctaText:y,ctaOnClick:v,isVisible:!0,handleClose:n})}const x=Math.round((c-g)/c*100),b=s({defaultMessage:"Syncing {totalFiles, number} files",id:"ho+SHGkjiL"},{totalFiles:c}),_=isNaN(x)?"":s({defaultMessage:"{percentage, number}% complete with {errors, number} errors",id:"EbZcfC1rW4"},{percentage:x,errors:h});return o.jsx(Gl,{message:b,description:_,variant:"success",iconOverride:j7,ctaText:y,ctaOnClick:v,closeOnCtaClick:!1,isVisible:!0,handleClose:n})},hnt=[".pdf",".txt",".csv",".xlsx",".docx",".pptx",".md",".json"].join(",");function gnt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function ynt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var vnt=typeof window<"u";function mP(e){if(e){if(e.tagName==="BODY")return e;if(e.tagName==="IFRAME"){var t=e.contentDocument;return t?t.body:null}else if(!e.offsetParent)return null}else return null;return mP(e.offsetParent)}function HQ(e){var t=e||window.event;return t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}var zQ=vnt&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),kp=new Map,GQ=typeof document=="object"?document:void 0,Zw=!1;const xnt=GQ?function(t,n){t===void 0&&(t=!0);var r=f.useRef(GQ.body);n=n||r;var s=function(i){var l=kp.get(i);l?kp.set(i,{counter:l.counter+1,initialOverflow:l.initialOverflow}):(kp.set(i,{counter:1,initialOverflow:i.style.overflow}),zQ?Zw||(gnt(document,"touchmove",HQ,{passive:!1}),Zw=!0):i.style.overflow="hidden")},a=function(i){var l=kp.get(i);l&&(l.counter===1?(kp.delete(i),zQ?(i.ontouchmove=null,Zw&&(ynt(document,"touchmove",HQ),Zw=!1)):i.style.overflow=l.initialOverflow):kp.set(i,{counter:l.counter-1,initialOverflow:l.initialOverflow}))};f.useEffect(function(){var i=mP(n.current);i&&(t?s(i):a(i))},[t,n.current]),f.useEffect(function(){var i=mP(n.current);if(i)return function(){a(i)}},[])}:function(t,n){},bnt=["https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly"].join(" "),_nt=["application/vnd.google-apps.file","application/vnd.google-apps.folder","application/vnd.google-apps.document","application/vnd.google-apps.presentation","application/vnd.google-apps.spreadsheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","application/pdf","text/csv","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/markdown"],wnt=["text/plain","application/pdf","text/csv","text/markdown","image/png","image/jpeg","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.google-apps.document","application/vnd.google-apps.presentation","application/vnd.google-apps.spreadsheet"],Cnt=["audio/mpeg","audio/wav","audio/aiff","audio/ogg","audio/flac","audio/mp3","video/mp4","video/mpeg","video/mov","video/avi","video/x-flv","video/mpg","video/webm","video/wmv","video/3gpp","video/quicktime"],Yhe=({clientId:e,apiKey:t,loginHint:n,isAudioVideoFilesEnabled:r,onError:s})=>{const[a,i]=f.useState(!1),[l,c]=f.useState(!1);xnt(l);const u=f.useCallback(()=>{s?.()},[s]);f.useEffect(()=>{const p=document.createElement("script");p.src="https://apis.google.com/js/api.js",p.id="google-drive-picker-gapi-script",p.onload=()=>{const h=document.createElement("script");h.src="https://accounts.google.com/gsi/client",h.id="google-drive-picker-gis-script",h.onload=()=>{window.gapi.load("picker",{callback:()=>i(!0),onerror:()=>{i(!1),u()}})},h.onerror=()=>{i(!1),u()},document.body.appendChild(h)},p.onerror=()=>{i(!1),u()},document.body.appendChild(p)},[u]);const d=f.useCallback((p,h)=>{const g=window.google?.picker,y=v=>{v.action===g.Action.PICKED?h.onPicked&&h.onPicked(v.docs??ue):(v.action===g.Action.CANCEL||v.action===g.Action.ERROR)&&(v.action===g.Action.CANCEL&&h.onCancel&&h.onCancel(),c(!1))};if(a&&g)try{const v=new g.DocsView().setIncludeFolders(!0).setSelectFolderEnabled(!0).setMode(g.DocsViewMode.LIST),x=new g.ViewGroup(v);let b=h.mode==="source"?_nt:wnt;b=r?b.concat(Cnt):b,new g.PickerBuilder().setSize(1051,650).addViewGroup(x).setSelectableMimeTypes(b.join(",")).enableFeature(g.Feature.MULTISELECT_ENABLED).setOAuthToken(p).setDeveloperKey(t).setCallback(y).build().setVisible(!0),c(!0)}catch{u()}},[a,t,u,r]),m=f.useCallback(p=>{window.google.accounts.oauth2.initTokenClient({client_id:e,login_hint:n,scope:bnt,prompt:"none",callback:g=>{if(g.error!==void 0)throw new Error(g.error);try{d(g.access_token,p)}catch(y){console.log(y)}}}).requestAccessToken()},[d,e,n]);return f.useMemo(()=>({openPicker:m,isReady:a}),[m,a])};function Snt(e){return e!==void 0&&"onClick"in e}function Ent(e){switch(e.name){case"notion":return Tt.NOTION;case"google_drive":return Tt.GOOGLE_DRIVE;case"onedrive":return Tt.ONEDRIVE;case"sharepoint":return Tt.SHAREPOINT;case"dropbox":return Tt.DROPBOX;case"box":return Tt.BOX;case"wiley":return Tt.WILEY;case"gcal":return Tt.GCAL;case"outlook":return Tt.OUTLOOK;case"edgar":case"linear":case"linear_alt":case"notion_mcp":case"factset":case"slack":case"github_mcp_direct":case"asana_mcp_direct":case"asana_mcp_merge":case"atlassian_mcp_direct":case"slack_direct":case"jira_mcp_merge":case"confluence_mcp_merge":case"microsoft_teams_mcp_merge":case"wiley_mcp_cashmere":case"cbinsights_mcp_cashmere":case"pitchbook_mcp_cashmere":case"statista_mcp_cashmere":case"crunchbase":return null;default:Gt(e.name)}}function qQ(e,t){const n=Ent(e);return!!(n&&t.includes(n))}const Qhe=I.memo(({repoFileLimitReached:e,addFilesTooltipMessage:t,isAudioVideoFilesEnabled:n,handleSourcesEdit:r,variant:s="primary",collectionSlugOverride:a,connectionTypes:i=HF})=>{const l="file-upload-selector",c=Z(),{variation:u}=Gb(!1),{$t:d}=Z(),{startMonitoring:m}=qhe(),{isMobileStyle:p}=xe(),[h,g]=f.useState(!1),{fileRepoInfo:y}=nl({reason:l,collectionSlugOverride:a}),v=y.file_repository_type==="COLLECTION",{mutateAsync:x}=SF({reason:l,onConnectorFileUploadSuccess:()=>{r?.(u?"files":"connectors")}}),b=f.useCallback((...me)=>{m({fileRepoInfo:y,collectionSlug:a}),x(...me)},[m,y,x,a]),_=f.useRef(null),{handleFileSelect:w}=hhe({reason:l,onLocalFileUploadSuccess:()=>{r?.(u?"files":"localFiles")}}),{referrer:C,referrerId:S}=kF({}),{connectorsMap:E}=Vb({reason:l}),{enabledFileConnectors:M}=_y({reason:l}),{disabledFileConnectors:k}=MF({reason:l}),{trackEvent:A}=Ne(),[R,O]=f.useState(!1),[L,P]=f.useState(!1),N=UF({reason:l,feature:ld.SPACES}),T=f.useCallback(me=>me.preventDefault(),[]),{onOpen:j,onClose:F,onError:U,options:V,onSelectSite:$,isOpen:z,log:Q}=che({reason:l,mode:"persistent"}),{openPicker:Y}=Yhe({clientId:E?.google_drive?.picker_credentials?.client_id??"",apiKey:E?.google_drive?.picker_credentials?.api_key??"",loginHint:E?.google_drive?.connection_display_name??"",isAudioVideoFilesEnabled:n}),W=f.useCallback((me,Ae)=>{if(Ae==="onedrive"){const Ee=me.map(je=>je.id);b({connectorName:"onedrive",fileIds:Ee,fileRepoInfo:v?y:void 0})}else if(Ae==="sharepoint"){const Ee=me.map(je=>({item_id:je.id??"",drive_id:je.parentReference.driveId??"",site_id:je.parentReference.sharepointIds?.siteId??""}));b({connectorName:"sharepoint",fileIds:Ee,fileRepoInfo:v?y:void 0})}F()},[b,F,v,y]),{openPicker:X}=set({clientId:E?.dropbox?.picker_credentials?.client_id??"",isSpace:v,fileRepoInfo:y,isAudioVideoFilesEnabled:n,reason:l}),{onOpen:G,isOpen:J,onClose:q,cleanupPicker:te}=net({initialApiKey:E?.box?.picker_credentials?.api_key??"",expiresAtString:E?.box?.picker_credentials?.expires_at??"",mode:"source",isSpace:v,fileRepoInfo:y,isAudioVideoFilesEnabled:n,reason:l}),re=f.useCallback((me,Ae="file")=>{if(A("attempt connector file upload",{connectorName:me}),me==="google_drive")Y({mode:"source",onPicked:async Ee=>{const je=Ee.map(Me=>Me.id);await b({connectorName:"google_drive",fileIds:je,fileRepoInfo:v?y:void 0})}});else if(me==="onedrive"||me==="sharepoint"){const Ee=E?.[me];j({mode:"source",connector:me,clientId:Ee?.picker_credentials?.client_id??"",tenantName:Ee?.picker_credentials?.tenant_name??"",loginHint:Ee?.connection_display_name??"",accountIdentifier:Ee?.picker_credentials?.account_identifier,onPicked:je=>W(je,me),onError:U,onCancel:F,log:Q,isAudioVideoFilesEnabled:n})}else me==="dropbox"?X("source"):me==="box"&&G(Ae)},[A,Y,j,E,y,v,F,U,W,b,X,G,Q,n]),{handleConnect:ae}=t3({reason:l}),fe=f.useCallback(me=>{me==="notion"&&(A("attempt connector authentication",{connectorName:me}),ae({connectorName:me}))},[A,ae]),de=(()=>{const me=[],Ae={type:"default",text:d({defaultMessage:"Local files",id:"xMmQ4F7z3A"}),icon:yie,onMouseDown:T,onClick:()=>{_.current?.click()}};if(i.includes(Tt.LOCAL)&&me.push(Ae),N){const Ee=M.filter(je=>qQ(je,i)).map(je=>{const Me=je.name;return Me==="box"?{type:"nested",text:Zs(Me)??"",avatar:o.jsx("img",{src:ai(Me)??"",alt:Zs(Me),width:20,height:20}),isSubmenuOpen:R,onSubmenuOpen:()=>O(!0),onSubmenuClose:()=>O(!1),onMouseDown:T,submenu:[{type:"default",text:c.formatMessage({defaultMessage:"Upload files",id:"2jjdVzJX0c"}),onMouseDown:T,onClick:()=>re("box","file")},{type:"default",text:c.formatMessage({defaultMessage:"Upload folders",id:"qMKglS/Epo"}),onMouseDown:T,onClick:()=>re("box","folder")}]}:Me==="notion"&&!v?{type:"default",text:Zs(Me)??"",avatar:o.jsx("img",{src:ai(Me)??"",alt:Zs(Me),width:20,height:20}),onMouseDown:T,onClick:()=>fe(Me)}:{type:"default",text:Zs(Me)??"",avatar:o.jsx("img",{src:ai(Me)??"",alt:Zs(Me),width:20,height:20}),onMouseDown:T,onClick:()=>re(Me)}}).filter(je=>je!==null);if(me.push(...Ee),k.length>0&&!p){const je=k.filter(Ye=>qQ(Ye,i)),Me={type:"nested",submenu:je.map(Ye=>({type:"default",size:"small",text:Zs(Ye.name),avatar:o.jsx("img",{src:ai(Ye.name)??"",alt:Zs(Ye.name),width:20,height:20}),rightElement:o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(ce,{icon:ao,size:"sm"})}),onClick:()=>ae({connectorName:Ye.name,customReferrer:C??void 0,customReferrerId:S??void 0})})),isSubmenuOpen:L,onSubmenuOpen:()=>P(!0),onSubmenuClose:()=>P(!1),text:d({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),icon:R7,onMouseDown:T};je.length>0&&me.push(Me)}}return me})(),ve=f.useCallback(()=>g(!1),[]),_e=f.useCallback(()=>{const me=de.at(0);if(de.length===1&&Snt(me)){me.onClick();return}g(!0)},[de]),Se=f.useMemo(()=>o.jsx(D,{color:"light",children:o.jsx(ce,{icon:xPe,size:"sm"})}),[]),be=f.useMemo(()=>o.jsx(D,{variant:"tiny",color:"light",children:c.formatMessage({defaultMessage:"Add files",id:"xrAjmQ72mN"})}),[c]);return o.jsxs(o.Fragment,{children:[o.jsx($he,{uploadSources:de,placement:"bottom-start",isMobileStyle:p,isOpen:h,onOpen:_e,onClose:ve,children:s==="primary"?o.jsx(he,{variant:"primary",size:"small",extraCSS:"py-[18px]",text:`+ ${c.formatMessage({defaultMessage:"Add files",id:"xrAjmQ72mN"})}`,disabled:e,toolTip:t}):o.jsx(Te,{size:"small",leadingComponent:Se,text:be,toolTip:t,testId:"add-files-button"})}),(E?.onedrive?.connected||E?.sharepoint?.connected)&&o.jsx(BF,{options:V,isOpen:z,onClose:F,onSelectSite:$}),E?.box?.connected&&o.jsx(bF,{isOpen:J,onClose:q,cleanupPicker:te}),o.jsx("input",{type:"file",ref:_,className:"hidden",onChange:me=>{me.target.files&&w(me.target.files)},onClick:me=>{me.target instanceof HTMLInputElement&&(me.target.value="")},multiple:!0,accept:hnt})]})});Qhe.displayName="FileUploadSelector";const Xhe=I.memo(({statusToFilter:e,handleSelectStatus:t})=>{const{isMobileStyle:n}=xe(),r=Z(),s={ALL:r.formatMessage({defaultMessage:"All",id:"zQvVDJ+j59"}),QUEUED:r.formatMessage({defaultMessage:"Queued",id:"Cnm0QAkWnp"}),SYNCING:r.formatMessage({defaultMessage:"Syncing",id:"eOnwqs6QFY"}),SYNC_ERROR:r.formatMessage({defaultMessage:"Sync error",id:"N1cqoEe4CZ"}),READY:r.formatMessage({defaultMessage:"Ready",id:"IZFEUgrg25"})},a=Object.entries(s).map(([i,l])=>({text:l,type:"default",selected:e===i,onClick:()=>t(i==="ALL"?null:i)}));return o.jsx(Jt,{isMobileStyle:n,placement:"bottom",items:a,children:o.jsx(he,{variant:"border",size:"small",extraCSS:"py-[18px]",text:e?s[e]:"Status",chevron:!0,chevronIcon:Dn})})});Xhe.displayName="StatusDropdown";const Zhe=I.memo(({allowEditSources:e,searchTerm:t,statusToFilter:n,selectedFiles:r,handleDeleteFiles:s,handleOnSearchValueChange:a,handleSelectStatus:i,isAudioVideoFilesEnabled:l,collectionSlugOverride:c,connectionTypes:u})=>{const{$t:d}=Z(),{isMobileUserAgent:m}=xe();return o.jsxs("div",{className:"mx-sm pt-md gap-sm flex flex-wrap items-center justify-between",children:[o.jsx(Pr,{type:"search",isMobileUserAgent:m,placeholder:d({defaultMessage:"Search files",id:"8xPuGUna7W"}),value:t,className:"bg-subtle rounded-md border-none",onChange:a,pill:!1}),o.jsxs("div",{className:"gap-x-sm flex",children:[r.length!==0&&o.jsx(Te,{variant:"primary",onClick:s,icon:vd,extraCSS:"h-[36px]"}),o.jsx(Xhe,{statusToFilter:n,handleSelectStatus:i}),e&&o.jsx(Qhe,{repoFileLimitReached:!1,isAudioVideoFilesEnabled:l,collectionSlugOverride:c,connectionTypes:u})]})]})});Zhe.displayName="ConnectorsTableHeader";var VF="Progress",$F=100,[Mnt,OJt]=co(VF),[knt,Tnt]=Mnt(VF),Jhe=f.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=Nnt,...i}=e;(s||s===0)&&!KQ(s)&&console.error(jnt(`${s}`,"Progress"));const l=KQ(s)?s:$F;r!==null&&!YQ(r,l)&&console.error(Ant(`${r}`,"Progress"));const c=YQ(r,l)?r:null,u=X2(c)?a(c,l):void 0;return o.jsx(knt,{scope:n,value:c,max:l,children:o.jsx(dn.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":X2(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":nge(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});Jhe.displayName=VF;var ege="ProgressIndicator",tge=f.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=Tnt(ege,n);return o.jsx(dn.div,{"data-state":nge(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});tge.displayName=ege;function Nnt(e,t){return`${Math.round(e/t*100)}%`}function nge(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function X2(e){return typeof e=="number"}function KQ(e){return X2(e)&&!isNaN(e)&&e>0}function YQ(e,t){return X2(e)&&!isNaN(e)&&e<=t&&e>=0}function jnt(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${$F}\`.`}function Ant(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${$F} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Int=Jhe,Rnt=tge;const QQ=(...e)=>e.filter(Boolean).join(" "),Pnt={default:"default"},rge=I.memo(e=>{const{indicatorClassName:t,indeterminate:n,className:r,value:s=0,max:a=100,variant:i=Pnt.default,ref:l,...c}=e,u=I.useMemo(()=>{const d={default:"bg-inverse",super:"bg-super"};return QQ("size-full transition-transform duration-300 ease-in-out",d[i]||d.default,n&&"animate-indeterminate",t)},[i,n,t]);return o.jsx(Int,{ref:l,className:QQ("bg-subtle relative h-1 w-full overflow-hidden rounded-[1px]",r),...c,children:o.jsx(Rnt,{className:u,style:{transform:`translateX(-${100-(s??0)/a*100}%)`}})})});rge.displayName="Progress";const sge=I.memo(({hasPreviousPage:e,hasNextPage:t,handlePrevPage:n,handleNextPage:r,shouldShowPlaceholder:s,fileRepoInfo:a})=>{const{$t:i}=Z(),l="border-subtler pt-md mx-sm flex translate-y-[1px] items-center justify-between";return s?o.jsx("div",{className:`${l} h-[42px]`}):o.jsx("div",{className:`${l} border-t`,children:o.jsxs("div",{className:"flex w-full justify-between",children:[o.jsx(Ont,{fileRepoInfo:a}),o.jsxs("div",{className:"gap-x-md flex",children:[o.jsx(Te,{text:i({defaultMessage:"Prev",id:"LYaNlLTdL2"}),size:"small",noPadding:!0,disabled:!e,onClick:n,icon:fb}),o.jsx(Te,{text:i({defaultMessage:"Next",id:"9+DdtuCqLw"}),size:"small",noPadding:!0,disabled:!t,onClick:r,icon:Kn})]})]})})});sge.displayName="SourcesTableCursorPagination";const Ont=({fileRepoInfo:e})=>{const t="upload-progress",{$t:n}=Z(),{variation:r}=Gb(!1),{pending:s,total:a}=zhe({enablePolling:!0,fileRepoInfo:e,reason:t}),i=a-s,l=n({defaultMessage:"Uploading {uploaded, number} of {total, number} files...",id:"XRDZYoRWzL"},{uploaded:i,total:a});return!r||s<=0?o.jsx("div",{}):o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(rge,{variant:"super",value:i,max:a,className:"h-2 w-48 rounded-full"}),o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(D,{color:"super",children:o.jsx($r,{size:14})}),o.jsx(D,{variant:"tiny",color:"default",children:l})]})]})};let F0=0;function Lnt(e,t,n=!1){const[r,s]=f.useState(!1),[a,i]=f.useState(!1),l=f.useCallback(g=>{g.preventDefault()},[]),c=f.useCallback(g=>{g?.dataTransfer?.types.includes("Files")&&(g.preventDefault(),s(!0),F0++)},[]),u=f.useCallback(g=>{g.preventDefault(),F0=Math.max(0,F0-1),F0===0&&s(!1)},[]),d=f.useCallback(g=>{g.preventDefault(),s(!1),i(!1),F0=0,!t&&n&&g.dataTransfer?.items.length&&e(g.dataTransfer.items)},[t,e,n]),m=f.useCallback(g=>{g?.dataTransfer?.types.includes("Files")&&(g.preventDefault(),i(!0))},[]),p=f.useCallback(g=>{g.preventDefault(),i(!1)},[]),h=f.useCallback(g=>{g.preventDefault(),s(!1),i(!1),!t&&!n&&g?.dataTransfer?.items.length>0&&e(g.dataTransfer.items)},[t,e,n]);return f.useEffect(()=>(document.addEventListener("dragover",l),document.addEventListener("dragenter",c),document.addEventListener("dragleave",u),document.addEventListener("drop",d),()=>{document.removeEventListener("dragover",l),document.removeEventListener("dragenter",c),document.removeEventListener("dragleave",u),document.removeEventListener("drop",d)}),[l,c,u,d]),f.useMemo(()=>({isDraggingFile:r,isFileOver:a,rootProps:{onDragOver:m,onDragLeave:p,onDrop:h}}),[p,m,h,r,a])}const WF=I.memo(({onDrop:e,disabled:t=!1,children:n,dropZoneClassName:r,dropLabel:s,dropIcon:a=bPe,allowDropAnywhere:i=!1,...l})=>{const{$t:c}=Z(),{isDraggingFile:u,isFileOver:d,rootProps:m}=Lnt(e,t,i),p=s??c(i?{defaultMessage:"Dropped files appear here.",id:"9WR4elgZix"}:{defaultMessage:"Drop your files here.",id:"llIM82nPs+"});return o.jsxs("div",{className:"relative",...m,...l,children:[u&&t?o.jsx(H,{className:B("border-subtler bg-subtler absolute inset-0 z-20 flex items-center justify-center rounded-2xl border-2 border-dashed",{"!border-caution":d},r?.(u,d)),children:o.jsxs(D,{color:"red",children:[o.jsx(ce,{icon:a,className:"mr-2"}),"Drop zone disabled"]})}):u?o.jsxs(o.Fragment,{children:[o.jsx(H,{variant:"background",className:"absolute inset-0 z-20 rounded-2xl opacity-80"}),o.jsx(H,{className:B("gap-x-sm animate-in fade-in border-subtler absolute inset-0 z-20 flex items-center justify-center rounded-2xl border-2 border-dashed transition-all duration-200",{"!border-super":d},r?.(u,d)),children:o.jsxs(D,{color:"super",children:[o.jsx(ce,{icon:a,className:"mr-2"}),p]})})]}):null,n]})});WF.displayName="DropZone";var sa;(function(e){e[e.NONE=0]="NONE",e[e.READER=1]="READER",e[e.WRITER=2]="WRITER",e[e.EDITOR=5]="EDITOR",e[e.ADMIN=3]="ADMIN",e[e.OWNER=4]="OWNER",e[e.OWNER_DEFAULT_BOOKMARKS=6]="OWNER_DEFAULT_BOOKMARKS",e[e.INVITED_READER=11]="INVITED_READER",e[e.INVITED_WRITER=12]="INVITED_WRITER",e[e.INVITED_EDITOR=15]="INVITED_EDITOR",e[e.INVITED_ADMIN=13]="INVITED_ADMIN"})(sa||(sa={}));function age(){return[sa.INVITED_READER,sa.INVITED_WRITER,sa.INVITED_EDITOR,sa.INVITED_ADMIN]}function Dnt(e){return e===sa.OWNER||e===sa.OWNER_DEFAULT_BOOKMARKS}function dg(e){return e===sa.OWNER_DEFAULT_BOOKMARKS}function oge(e){return e>=sa.WRITER&&e<sa.INVITED_READER}function Fnt(e){return e>=sa.READER&&e<sa.INVITED_READER}function Unt(e){return e==sa.READER||e==sa.INVITED_READER}function Bnt(e){return age().includes(e)}function LJt(e){if(e===void 0)return{ownerUser:void 0,contributorUsers:[],invitedUsers:[]};const t=e.owner_user,n=e.contributor_users,r=[],s=[],a=age();return n?.forEach(i=>{i.permission&&a.includes(i.permission)?r.push(i):s.push(i)}),{ownerUser:t,contributorUsers:s,invitedUsers:r}}var Jf;(function(e){e.PageAccessNotAllowed="pageAccessNotAllowed",e.ThreadAccessNotAllowed="threadAccessNotAllowed",e.InvalidThread="invalidThread",e.ThreadExpired="threadExpired",e.ThreadStreamError="threadStreamError",e.CollectionAccessNotAllowed="collectionAccessNotAllowed",e.SpaceAccessNotAllowed="spaceAccessNotAllowed",e.InvalidCollection="invalidCollection",e.SubscriptionAlreadyActive="subscriptionAlreadyActive",e.UnableToGrantAccess="unableToGrantAccess"})(Jf||(Jf={}));const Vnt="ENTRY_EXPIRED",XQ="VIEW_THREAD_NOT_ALLOWED",HF=[Tt.GOOGLE_DRIVE,Tt.ONEDRIVE,Tt.SHAREPOINT,Tt.DROPBOX,Tt.BOX,Tt.NOTION],$nt=e=>[...HF,...e],Wnt=I.memo(({fileRepoInfo:e,collectionSlugOverride:t,connectionTypes:n=HF})=>{const r="connectors-source-section",s=Zi(),a=t??(Array.isArray(s?.slug)?s.slug[0]:s?.slug),{collection:i}=cc({collectionSlug:a,reason:r}),l=i?oge(i.user_permission):!1,c=e.file_repository_type==="COLLECTION",u=f.useMemo(()=>({file_repository_type:"USER",owner_id:""}),[]),d=c?e:u,[m,p]=f.useState(""),[h,g]=f.useState(null),[y,v]=f.useState([]),[x,b]=f.useState(!1),[_,w]=f.useState([]),[C,S]=f.useState(null),[E,M]=f.useState([]),k=_.length>0?_[_.length-1]?.uuid:void 0,{mutate:A}=Ype({reason:r}),R=!1,L=m.trim().length>0?{parentUuids:[],rootFilesOnly:!1}:{parentUuids:k?[k]:[],rootFilesOnly:!k},{data:P,isLoading:N}=wJe({connectionTypes:n,status:h?[h]:[],pageSize:_o,searchKeyword:m,...L,cursor:C,pollingEnabled:!0,fileRepoInfo:d,reason:r}),{files:T,nextCursor:j}=f.useMemo(()=>({files:P?.files||[],nextCursor:P?.next_cursor}),[P]),F=!!j,U=E.length>0,V=c?l:!0,$=f.useCallback(()=>{p(""),g(null)},[]),z=f.useCallback(q=>{g(q)},[]),Q=f.useCallback(q=>{p(q)},[p]),Y=f.useCallback(()=>{A({fileUuids:y,fileRepoInfo:d}),v([]),b(!1)},[A,y,d]),W=f.useCallback(q=>{b(q),v(q?T.map(te=>te.uuid):[])},[T,v]),X=f.useCallback((q,te)=>{$(),w(re=>[...re,{uuid:q,name:te}])},[$]),G=f.useCallback(()=>{j&&(M(q=>[...q,C??""]),S(j))},[j,C]),J=f.useCallback(()=>{E.length>0&&M(q=>{const te=[...q],re=te.pop()??null;return S(re),te})},[E.length]);return f.useEffect(()=>{S(null),M([])},[m,h,k]),o.jsxs(WF,{onDrop:kn,disabled:!V,children:[o.jsx(Zhe,{allowEditSources:V,searchTerm:m,statusToFilter:h,selectedFiles:y,handleDeleteFiles:Y,handleOnSearchValueChange:Q,handleSelectStatus:z,isAudioVideoFilesEnabled:R,collectionSlugOverride:t,connectionTypes:n}),o.jsx(ehe,{files:T,fileRepoInfo:d,isLoadingConnectorFiles:N,allowEditSources:V,selectedFiles:y,currentPath:_,isHeaderCheckboxChecked:x,setSelectedFiles:v,setCurrentPath:w,handleSelectAll:W,handleFolderClick:X,handleResetSearch:$}),o.jsx(sge,{fileRepoInfo:d,hasPreviousPage:U,hasNextPage:F,handlePrevPage:J,handleNextPage:G,shouldShowPlaceholder:N||!T.length})]})});Wnt.displayName="ConnectorsSourceSection";function wy({reason:e,collectionSlugOverride:t}){const n=Zi(),r=t??(Array.isArray(n?.slug)?n.slug[0]:n?.slug),{collection:s}=cc({collectionSlug:r,reason:e}),a=s?Dnt(s.user_permission):!1,i=s?Bnt(s.user_permission):!1,l=s?Unt(s.user_permission):!1,c=s?Fnt(s.user_permission):!1,u=s?oge(s.user_permission):!1;return f.useMemo(()=>({isUserOwner:a,isUserInvited:i,isUserReader:l,isUserAtLeastReader:c,isUserAtLeastWriter:u}),[c,u,i,a,l])}const DJt=e=>e?.[0]?.article_info?.is_live;function FJt(e){return e.length==1&&e[0]?.article_info?.is_auto_generated}const zF=e=>e?.toLowerCase(),kS=e=>zF(e.status)==="pending",UJt=e=>zF(e.status)==="staged",BJt=e=>zF(e.status)==="completed",Hnt=e=>e.find(t=>kS(t)&&t.backend_uuid),znt=e=>!!(e&&ia(e)&&"blocks"in e[0]),VJt=e=>{const t=/##\s*([^\n]+)/,n=e.match(t);return n&&n.length>1&&n[1]?n[1].trim():e.trim()},Gnt=async({slugOrUUID:e,headers:t,reason:n})=>{const{data:r,error:s}=await se.GET("/rest/article/{article_uuid_or_slug}",n,{params:{path:{article_uuid_or_slug:e}},headers:t,timeoutMs:Pe({productionMs:3e3}),numRetries:1});if(s)throw new Ce("API_CLIENTS_ERROR",{cause:s});if(r.status!=="success")throw new Ce("API_CLIENTS_ERROR",{cause:r});return r.entries},$Jt=async({reason:e})=>{try{const{data:t,error:n}=await se.POST("/rest/user/sign-out-all",e,{headers:{"X-Perplexity-CSRF-Protection":"1"},numRetries:1,reason:e});if(n)throw new Ce("API_CLIENTS_ERROR",{cause:n});return t.status==="success"}catch{return!1}},WJt=async({articleUUID:e,reason:t})=>{const{data:n,error:r}=await se.GET("/rest/page/get_related_pages",t,{params:{query:{context_uuid:e}},numRetries:1});if(r)throw new Ce("API_CLIENTS_ERROR",{cause:r});if(n.status!=="success")throw new Ce("API_CLIENTS_ERROR",{cause:n});return n.related_pages},ZQ=e=>e[0]?.article_info?{title:e[0].article_info.title||"",summary:e[0].article_info.summary||"",suggested_sections:e[0].article_info.suggested_sections||[],audience:e[0].article_info.audience||"anyone",read_time:e[0].article_info.read_time,emphasize_sources:e[0].article_info.emphasize_sources??!1,num_sections:e.length,should_index:e[0].should_index??!1}:null,qnt={isBlocksApi:!1,article:[],heroSection:void 0,isLoading:!1,isPublished:!1,isOrgInternal:!1,inFlight:!1,inFlightLatest:!1,currentlyStreamingSection:void 0,socialStats:{forkCount:0,likeCount:0,viewCount:0,userLikes:!1},threadMetadata:{rwToken:void 0,contextUUID:void 0,frontendContextUUID:void 0,title:void 0,first_query:void 0,focus:void 0,author_id:void 0,author_username:void 0,author_image:void 0,parent_info:void 0,mode:void 0,personalized:!1,collection:void 0,thread_access:0,thread_url_slug:void 0,updated_datetime:void 0,expiry_time:void 0,privacy_state:ag.NONE},articleMetadata:{title:"",summary:"",suggested_sections:[],audience:"anyone",read_time:0,emphasize_sources:!1,num_sections:0,should_index:!1},articleMedia:[],articleWebResults:[],relatedPages:[],articleLocalState:{isEditModeEnabled:!1,setEditModeEnabled:()=>{},isCreating:!1,setIsCreating:()=>{},isTitleVisible:!0,setTitleVisible:()=>{},clickedImage:null,setClickedImage:()=>{},clickedImageIndex:0,isRewritingSection:!1,setRewritingSection:()=>{}},refetch:()=>{}},ige=Wt("ArticleResultsContext",qnt),Knt=I.memo(({relatedPages:e=ue,children:t,slug:n})=>{const r="article-results-provider",[s,a]=f.useState(!1),[i,l]=f.useState(!1),[c,u]=f.useState(null),[d,m]=f.useState(!0),[p,h]=f.useState(!1),{isEnterprise:g}=_n({reason:r}),y=ht(),x=Nt()?.get("newFrontendContextUUID"),[b,_]=f.useState(y.getQueryData(DK(n||"")));f.useEffect(()=>{if(x){_(x);return}const z=y.getQueryData(DK(n||""));_(z)},[x,y,n]);const{data:w,isLoading:C}=We({enabled:!!n&&n!=="new",queryKey:tF(b||""),queryFn:()=>Gnt({slugOrUUID:n,reason:r}),refetchOnMount:!0,placeholderData:Ud}),S=znt(w),E=f.useMemo(()=>{if(!w||S)return;const z=w[w.length-1];return{inFlight:w.some(kS),inFlightLatest:z&&kS(z)}},[w,S]),M=E?.inFlight??!1,k=E?.inFlightLatest??!1,A=f.useMemo(()=>{if(!(!w||S))return Hnt(w)},[w,S]),R=f.useMemo(()=>{if(!w||w.length===0)return null;const z=w[0];if(kS(z))return null;const Q=z.social_info;return nP(Q||Fme)},[w]),O=f.useMemo(()=>!w||w.length===0?wS():wS(w[0]),[w]),L=f.useMemo(()=>w?ZQ(w):null,[w]),P=f.useMemo(()=>{const z=[];return w?.forEach(Q=>{if(Q.article_info.layout==="media-only"){const W=(Q.article_info.user_selected_media_items??[])?.filter(X=>X.medium==="image");z.push(...W)}else{const Y=Q?.media_items??[],W=Q?.featured_images??[];Q.article_info.layout!=="text"&&(ia(W)&&W[0].medium==="image"?z.push(W[0]):ia(Y)&&Y[0].medium==="image"&&z.push(Y[0]))}}),z},[w]),N=f.useMemo(()=>{if(!c)return 0;const z=P.findIndex(Q=>Q?.image===c?.image);return z>-1?z:0},[c,P]),T=f.useMemo(()=>{const z=new Map;return!w||w.length===0?[]:(w?.forEach(Q=>{const Y=un.parseAskTextField(Q);Y?.web_results&&Y.web_results.forEach(W=>{z.has(W.url)?z.get(W.url).count+=1:z.set(W.url,{...W,count:1})})}),Array.from(z.values()).sort((Q,Y)=>Y.count-Q.count).map(Q=>({...Q,count:void 0})))},[w]),j={isEditModeEnabled:s,setEditModeEnabled:a,isTitleVisible:d,setTitleVisible:m,isCreating:i,setIsCreating:l,clickedImage:c,setClickedImage:u,clickedImageIndex:N,isRewritingSection:p,setRewritingSection:h},F=O??wS(),U=g&&!!F.collection&&F.thread_access===bt.COLLECTION_READ,V=!!g&&F.thread_access===bt.ORG_READ,$=U||V||F.thread_access===bt.PUBLIC_READ;return o.jsx(ige.Provider,{value:{isBlocksApi:S,article:w??[],isLoading:C,heroSection:w?.[0],lastSection:w?.[w.length-1],socialStats:R,isPublished:$,isOrgInternal:V,inFlight:M,inFlightLatest:k,currentlyStreamingSection:A,threadMetadata:F,articleMetadata:L??ZQ([]),articleLocalState:j,articleMedia:P,articleWebResults:T,relatedPages:e},children:t})});Knt.displayName="ArticleResultsProvider";const lge=()=>{const e=f.useContext(ige);if(!e)throw new Error("useArticleResults must be used within ArticleResultsContext");return e};function Ynt(e,t){return We({enabled:!!e,queryKey:TXe(e),queryFn:async()=>met({profileName:e,reason:t})})}const Qnt=({enabled:e,reason:t})=>{const n=async()=>vet({reason:t}),{data:r}=We({enabled:typeof e>"u"?!0:e,queryKey:kXe(),queryFn:n,networkMode:"always"});return r??{isGovernmentRequestOrigin:void 0}};function Zr(){const e=Qnt({enabled:!0,reason:"user-capabilities"}),t=e.isGovernmentRequestOrigin?"us_government_or_military":"",{data:n}=Ynt(t,"user-capabilities");return f.useMemo(()=>{const s=e.isGovernmentRequestOrigin,a={unlimitedProSearch:!!n?.unlimitedProSearch,maxModelSelection:!!n?.maxModelSelection,unlimitedResearch:!!n?.unlimitedResearch,fileUpload:!!n?.fileUpload};return{isGovernmentRequestOrigin:s,specialCapabilities:a}},[e.isGovernmentRequestOrigin,n])}const{Context:Xnt,useTrackedState:Znt}=Db("LocalUserSettingsContext"),Jnt=({trackEvent:e,initialLocalUserSettings:t})=>pi()(iie(n=>({...t,actions:{setIsSplashPageDismissed:(r,s)=>{KQe(r,s),n({isSplashPageDismissed:r})},setColorScheme:r=>{n({colorScheme:r})},setIsSidebarPinned:r=>{n({isSidebarPinned:r}),Zt("isSidebarPinned",String(r),{expires:Fr})},setSidebarHiddenHubs:r=>{n({sidebarHiddenHubs:r}),Zt("sidebarHiddenHubs",JSON.stringify(r),{expires:Fr})},setIsCollapsed:r=>{e("sidebar toggled",{is_collapsed:r}),Zt("isCollapsed",String(r),{expires:Fr}),n({isCollapsed:r})},setIsIncognito:async r=>{const s=await _b.getSession(),a=s!==null&&typeof s<"u";a&&tie(),a&&(qQe(r),n({isIncognitoLocal:r}))},setIsDiscoverInterestBoxDismissed:r=>{YQe(r),n({isDiscoverInterestBoxDismissed:r})},setIsEnterpriseAdDismissed:r=>{XQe(r),n({isEnterpriseAdDismissed:r})},setIsSuggestionsDisabled:r=>{e("auto suggestion setting toggled",{isEnabled:!r}),ZQe(r),n({isSuggestionsDisabled:r})},setIsHomepageWidgetsDisabled:r=>{e("homepage widgets setting toggled",{isEnabled:!r}),JQe(r),n({isHomepageWidgetsDisabled:r})},setIsSportsIosCtaDismissed:r=>{nXe(r),n({isSportsIosCtaDismissed:r})},setPreferredSearchMode(r){r?Zt(sP,r,{expires:Fr}):lm(sP),n({preferredSearchMode:r})},setIsMaxAssistantModeEnabled:r=>{e("max assistant mode toggled",{isEnabled:r}),Zt(spe,String(r),{expires:Fr}),n({isMaxAssistantMode:r})},setPreferredSearchModel(r,s){n(a=>{const{preferredSearchModels:i={}}=a;s?i[r]=s:r&&delete i[r];try{Zt(rpe,JSON.stringify(i),{expires:Fr})}catch{}finally{a.preferredSearchModels=i}return a})},setWelcomeBackGateImpressions:r=>{eXe(r),n({welcomeBackGateImpressions:r})},setShareGateImpressions:r=>{tXe(r),n({shareGateImpressions:r})},setIsSidebarConnectorsAdDismissed:r=>{aXe(r),n({isSidebarConnectorsAdDismissed:r})},setIsStudentReferralBannerDismissed:r=>{lXe(r),n({isStudentReferralBannerDismissed:r})},setIsStudentSpaceUpsellDismissed:r=>{cXe(r),n({isStudentSpaceUpsellDismissed:r})},setStudentSpaceUpsellImpressions:r=>{uXe(r),n({studentSpaceUpsellImpressions:r})}}}))),ert=({children:e,initialLocalUserSettings:t})=>{const{trackEvent:n}=Ne(),[r]=I.useState(()=>Jnt({trackEvent:n,initialLocalUserSettings:t}));return DF(z2,s=>{s&&r.setState({isIncognitoLocal:JSON.parse(s.value)})}),o.jsx(Xnt.Provider,{value:r,children:e})},hn=Znt,kd={DEFAULT:"DEFAULT",GOVERNMENT:"GOVERNMENT"},Ra=({reason:e})=>{const{organization:t}=_n({reason:e}),{isGovernmentRequestOrigin:n}=Zr(),r=t?.settings?.always_incognito,{isIncognitoLocal:s}=hn(),a=r||(s??n??!1),i=n?kd.GOVERNMENT:kd.DEFAULT;return{isIncognito:a,incognitoType:i}},$p="recentCollections",cge=({reason:e})=>{const{isIncognito:t}=Ra({reason:e}),{inFlightLatest:n}=Vt(),{session:r}=Et(),s=r?.user?.email,{data:a,refetch:i}=We({queryKey:[$p,s],queryFn:async()=>s?await pJe({reason:e}):ue,enabled:!t&&!!s,refetchOnMount:!1,refetchOnWindowFocus:!1,initialData:null});return f.useEffect(()=>{n||i({cancelRefetch:!1})},[n,i]),f.useMemo(()=>!s||t?{data:ue}:{data:a},[a,s,t])},HJt=async({collectionUUID:e,reason:t})=>{const n=await se.POST("/rest/spaces/bookmarks",t,{body:{collection_uuid:e},timeoutMs:Pe(),numRetries:0}),r=n.data;if(!n.response.ok||!r)throw new Error("Failed to create space bookmark");return r},zJt=async({query:e,reason:t})=>{const{data:n,error:r}=await se.GET("/rest/spaces/bookmarks",t,{params:{query:e}});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to list bookmarked spaces",cause:r});return n},uge=async({params:e,reason:t})=>{const n=await se.GET("/rest/spaces",t,{params:{query:{limit:e.limit,offset:e.offset,category:e.category,version:ac}},timeoutMs:Pe()});if(n.error)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to list spaces",cause:n.error});return n.data},trt=async({reason:e})=>{const t=await se.GET("/rest/spaces/mentions",e,{timeoutMs:Pe()});if(t.error)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to list at mention spaces",cause:t.error});return t.data},GJt=async({collectionUUID:e,reason:t})=>{const n=await se.POST("/rest/spaces/org/pins",t,{body:{collection_uuid:e},timeoutMs:Pe(),numRetries:0}),r=n.data;if(!n.response.ok||!r)throw new Error("Failed to create org pinned space");return r},qJt=async({query:e,reason:t})=>{const{data:n,error:r}=await se.GET("/rest/spaces/org/pins",t,{params:{query:e},timeoutMs:Pe()});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to list org pinned spaces",cause:r});return n},KJt=async({spaceUuid:e,reason:t})=>{const n=await se.GET("/rest/spaces/{space_uuid}/subscription",t,{params:{path:{space_uuid:e}},timeoutMs:Pe(),numRetries:1}),r=n.data;if(!n.response.ok||!r)throw new Error("Failed to get space subscription status");return r.subscribed},nrt=async({reason:e})=>{const t=await se.GET("/rest/collections/list_space_templates",e,{timeoutMs:Pe(),numRetries:1});if(t.error)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to list space templates",cause:t.error});return t.data},pP=10,JQ=["invited","private","shared","saved","organization"];function Wp(e){return["spaces","list",e]}function Hp(){return["spaces","list","all"]}const rrt=({reason:e})=>{const t=ht(),{data:n,isLoading:r}=We({queryKey:Hp(),queryFn:()=>uge({params:{offset:0,limit:pP,category:void 0},reason:e})});return f.useEffect(()=>{n&&(n.private_spaces&&t.setQueryData(Wp("private"),s=>({...s,pages:[n.private_spaces||[]],pageParams:[0]})),n.shared_spaces&&t.setQueryData(Wp("shared"),s=>({...s,pages:[n.shared_spaces||[]],pageParams:[0]})),n.saved_spaces&&t.setQueryData(Wp("saved"),s=>({...s,pages:[n.saved_spaces||[]],pageParams:[0]})),n.organization_spaces&&t.setQueryData(Wp("organization"),s=>({...s,pages:[n.organization_spaces||[]],pageParams:[0]})),n.invited_spaces&&t.setQueryData(Wp("invited"),s=>({...s,pages:[n.invited_spaces||[]],pageParams:[0]})))},[n,t]),f.useMemo(()=>({data:n,isLoading:r}),[n,r])},srt=({category:e,reason:t})=>xu({queryKey:Wp(e),queryFn:async({pageParam:n})=>{const r=await uge({params:{offset:n,limit:pP,category:e},reason:t});switch(e){case"private":return r.private_spaces;case"shared":return r.shared_spaces;case"saved":return r.saved_spaces;case"organization":return r.organization_spaces;case"invited":return r.invited_spaces;default:throw new Error("Invalid category")}},enabled:!1,getNextPageParam:(n,r,s)=>(s??0)+pP,initialPageParam:0}),GF={searchTerm:"",updateUserInput:e=>{}},dge=Wt("UserInputStateContext",GF),art=({children:e})=>{const[t,n]=f.useState(GF),r=a=>{n(i=>({...i,...a}))},s=f.useMemo(()=>({...t,updateUserInput:r}),[t.searchTerm]);return o.jsx(dge.Provider,{value:s,children:e})},qF=()=>{const e=f.useContext(dge);return e||GF},YJt=(e,t)=>e&&e[0]?.has_next_page?t.length+1:void 0,ort=(e,t)=>e.getQueryData(["results"])?.find(r=>r.frontend_context_uuid===t)?.collection_info,irt=(e,t)=>e.getQueryData(tF(t))?.find(r=>r.frontend_context_uuid===t)?.collection_info,lrt=(e,t,n)=>{e.setQueryData(tF(t),r=>r&&r.map(n))},crt=[bt.OWNER_ONLY,bt.PRIVATE_READ,bt.COLLECTION_READ],eX=(e,t,n,r,s)=>{const{entryUUID:a,frontendContextUUID:i,newCollectionUUID:l,newCollectionTitle:c,newCollectionEmoji:u,newCollectionSlug:d,newCollectionAccess:m,newCollectionUserPermission:p}=t,h={collection_info:{uuid:l,title:c,emoji:u,slug:d,access:m,user_permission:p},bookmark_state:"BOOKMARKED"};i&&(s(g=>g?g.map(y=>y.frontend_context_uuid===i?{...y,...h}:y):[]),e.setQueryData([r,{frontend_context_uuid:i}],g=>g?g.map(y=>y.frontend_context_uuid===i?{...y,...h}:y):[])),e.setQueryData(n,g=>{g=g||{pages:[],pageParams:[]};const y=g.pages.map(v=>v.map(x=>x.uuid===a?{...x,collection:{...x.collection,...h.collection_info}}:x));return{...g,pages:y}})},Cy=({reason:e})=>{const{searchTerm:t}=qF(),n=ht(),{isEnterprise:r}=_n({reason:e}),{threadMetadata:s}=lge(),a=hi(),i=jt();let l="results";const c=[xm,{search_term:t??""}],u=[xm,{search_term:t??""}];let d=c,m=AXe,p=ort;const h=H5();let g=f.useCallback((O,L,P)=>{h(N=>N&&N.map(P))},[h]);(i?.startsWith("/page")||i?.startsWith("/discover"))&&(l="articleResults",d=u,m=IXe,p=irt,g=lrt);const y=f.useCallback(O=>{const L=!a&&!s?.rwToken;!r||L||h(P=>{if(P)return P.map(N=>{let T=!1,j=bt.PRIVATE_READ;return O==="add"?(T=crt.includes(N.thread_access??null),j=un.isArticleMode(N)?bt.PRIVATE_READ:bt.COLLECTION_READ):(T=N.thread_access!==bt.COLLECTION_READ,j=bt.PRIVATE_READ),{...N,thread_access:T?N.thread_access:j}})})},[a,s?.rwToken,r,h]),{mutate:v}=vt({mutationFn:async({title:O,description:L,emoji:P,instructions:N,accessLevel:T,existingCollection:j,enableWebByDefault:F,closeModal:U})=>(U(),eet({collectionUuid:j.uuid,changes:{title:O,description:L,emoji:P,instructions:N,accessLevel:T,enableWebByDefault:F},reason:e})),onMutate:async O=>{const N=["get_collection",{collection_slug:O.existingCollection.slug.slice(-22)}];await n.cancelQueries({queryKey:N});const T=n.getQueryData(N);return n.setQueryData(N,j=>({...j,title:O.title,description:O.description,emoji:O.emoji,instructions:O.instructions,access:O.accessLevel,enable_web_by_default:O.enableWebByDefault})),{previousCollection:T}},onSettled:(O,L,P,N)=>{const j=["get_collection",{collection_slug:P.existingCollection.slug.slice(-22)}];L?n.setQueryData(j,N?.previousCollection):(n.setQueryData(j,F=>({...F,...O})),n.setQueryData(pn,F=>F?.pages?{...F,pages:F.pages.map(U=>U.map(V=>V.uuid===P.existingCollection.uuid?{...V,...O}:V))}:F),n.invalidateQueries({queryKey:Hp()}),n.invalidateQueries({queryKey:fv()}))}}),{mutate:x}=vt({mutationFn:async({accessLevel:O,collectionUuid:L})=>{await yJe({params:{collection_uuid:L,updated_access:O},reason:e})},onMutate:async O=>{const N=["get_collection",{collection_slug:O.collectionSlug.slice(-22)}];await n.cancelQueries({queryKey:N});const T=n.getQueryData(N);return n.setQueryData(N,j=>({...j,access:O.accessLevel})),{previousCollection:T}},onSettled:async(O,L,P,N)=>{if(L)n.setQueryData(pn,N?.previousCollection);else{const T=P.collectionSlug.slice(-22);await n.invalidateQueries({queryKey:["org_pinned_spaces_query_key"]}),await n.invalidateQueries({queryKey:["get_collection",{collection_slug:T}]}),n.invalidateQueries({queryKey:Hp()})}}}),{mutate:b}=vt({mutationFn:async({entryUUID:O,title:L,description:P,emoji:N,instructions:T,accessLevel:j,callback:F,frontendContextUUID:U})=>{const V=await tY({params:{title:L,description:P,emoji:N,instructions:T,accessLevel:j},reason:e});return await Vw({params:{new_collection_uuid:V.uuid,entry_uuid:O,return_collection:!1,return_thread:!1},reason:e}),F(V),y("add"),{title:L,description:P,emoji:N,instructions:T,accessLevel:j,newCollection:V}},onMutate:async({entryUUID:O,frontendContextUUID:L,...P})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:pn});const N=n.getQueryData(d),T=n.getQueryData(pn);n.setQueryData(pn,F=>{F=F||{pages:[],pageParams:[]};const U=(F&&F.pages&&F.pages[0])??[],$={...U?.length>0?U[0]:[],...P,uuid:Ou,thread_count:1};return{...F,pages:[[$,...U]]}}),n.setQueryData(d,F=>{F=F||{pages:[],pageParams:[]};const U=F.pages.map(V=>V.map($=>$.uuid===O?{...$,collection:{...$.collection,description:P.description,uuid:Ou,title:P.title,emoji:P.emoji}}:$));return{...F,pages:U}}),n.setQueryData(m(O),F=>{const U=F?.collection_info??{};return{...F,collection_info:{...U,uuid:Ou,description:P.description,title:P.title,emoji:P.emoji}}});let j=null;return L&&(j=p(n,L)??null,g(n,L,F=>F.frontend_context_uuid===L?{...F,collection_info:{...F.collection_info,uuid:Ou,title:P.title,emoji:P.emoji},bookmark_state:"BOOKMARKED"}:F)),{previousThreads:N,previousCollections:T,previousCollectionInfo:j}},onSettled:(O,L,P,N)=>{L?(n.setQueryData(d,N.previousThreads),n.setQueryData(pn,N.previousCollections),P.frontendContextUUID&&g(n,P.frontendContextUUID,T=>T.frontend_context_uuid===P.frontendContextUUID?{...T,collection_info:N?.previousCollectionInfo??null,bookmark_state:N?.previousCollectionInfo?"BOOKMARKED":"NOT_BOOKMARKED"}:T)):(n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:pn}),n.invalidateQueries({queryKey:[$p]}),n.invalidateQueries({queryKey:fv()}),n.invalidateQueries({queryKey:Hp()}),P.frontendContextUUID&&g(n,P.frontendContextUUID,T=>T.frontend_context_uuid===P.frontendContextUUID?{...T,collection_info:{...T.collection_info,uuid:O?.newCollection?.uuid,title:O?.newCollection?.title,emoji:O?.newCollection?.emoji,slug:O?.newCollection?.slug},bookmark_state:"BOOKMARKED"}:T))}}),{mutate:_}=vt({mutationFn:async({title:O,description:L,emoji:P,instructions:N,accessLevel:T,template_id:j,callback:F})=>{const U=await tY({params:{title:O,description:L,emoji:P,instructions:N,accessLevel:T,template_id:j},reason:e});return F(U),{collection:U}},onMutate:async({...O})=>{n.setQueryData(pn,L=>{L=L||{pages:[],pageParams:[]};const P=L.pages[0]||[],N={...P.length>0?P[0]:{},...O,uuid:Ou,thread_count:0};return{...L,pages:[[N,...P]]}})},onSuccess:async()=>{n.refetchQueries({queryKey:pn}),n.invalidateQueries({queryKey:[$p]}),n.invalidateQueries({queryKey:fv()}),n.invalidateQueries({queryKey:Hp()})}}),{mutate:w}=vt({mutationFn:async({entryUUID:O})=>{const L=await Vw({params:{entry_uuid:O,upsert_type:"bookmark",return_collection:!0,return_thread:!1},reason:e});return y("add"),L},onMutate:async({entryUUID:O,topic:L})=>{const P=n.getQueryData(Tc(L));let N;for(const T of P?.pages??[])for(const j of T.threads)if(j.uuid===O){N=j.collection;break}return n.setQueryData(Tc(L),T=>{if(T)return{pageParams:T.pageParams,pages:T.pages.map(j=>({...j,threads:j.threads.map(F=>({...F,collection:F.uuid===O?{uuid:Ou,title:"Bookmarks",emoji:"1f516",slug:Ou}:F.collection}))}))}}),{previousCollection:N}},onSettled:(O,L,P,N)=>{const{entryUUID:T,topic:j}=P;if(L||!O)N?.previousCollection&&n.setQueryData(Tc(j),F=>{if(F)return{pageParams:F.pageParams,pages:F.pages.map(U=>({...U,threads:U.threads.map(V=>({...V,collection:V.uuid===T?N.previousCollection:V.collection}))}))}});else{const{updated_collection:F}=O,{uuid:U,title:V,emoji:$,slug:z}=F;n.setQueryData(Tc(j),Q=>{if(Q)return{pageParams:Q.pageParams,pages:Q.pages.map(Y=>({...Y,threads:Y.threads.map(W=>({...W,collection:W.uuid===T?{uuid:U,title:V,emoji:$,slug:z}:W.collection}))}))}})}}}),{mutate:C}=vt({mutationFn:async({entryUUID:O,topic:L,oldCollectionUUID:P})=>(await XK({collectionUUID:P,entryUUID:O,reason:e}),{topic:L}),onMutate:async({entryUUID:O,topic:L})=>{const P=n.getQueryData(Tc(L));let N;for(const T of P?.pages??[])for(const j of T.threads)if(j.uuid===O){N=j.collection;break}return n.setQueryData(Tc(L),T=>{if(T)return{pageParams:T.pageParams,pages:T.pages.map(j=>({...j,threads:j.threads.map(F=>({...F,collection:F.uuid===O?void 0:F.collection}))}))}}),{previousCollection:N}},onSettled:(O,L,P,N)=>{const{entryUUID:T,topic:j}=P;L&&N?.previousCollection&&n.setQueryData(Tc(j),F=>{if(F)return{pageParams:F.pageParams,pages:F.pages.map(U=>({...U,threads:U.threads.map(V=>({...V,collection:V.uuid===T?N.previousCollection:V.collection}))}))}})}}),{mutate:S}=vt({mutationFn:async({entryUUID:O,frontendContextUUID:L})=>{const P=await Vw({params:{entry_uuid:O,upsert_type:"bookmark",return_collection:!0,return_thread:!1},reason:e});return y("add"),{response:P,entryUUID:O,frontendContextUUID:L}},onMutate:async({frontendContextUUID:O})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:pn}),h(L=>L&&L.map(P=>P.frontend_context_uuid===O?{...P,bookmark_state:"BOOKMARKED",collection_info:{uuid:null,title:"Bookmarks",emoji:"1f516",slug:null,access:null,user_permission:sa.OWNER_DEFAULT_BOOKMARKS}}:P))},onSettled:async(O,L)=>{if(!O||!O.response?.updated_collection)return;const P=O.response.updated_collection,N=O.entryUUID,T=O.frontendContextUUID,{uuid:j,title:F,emoji:U=null,slug:V,access:$,user_permission:z}=P;await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:pn}),eX(n,{entryUUID:N,frontendContextUUID:T,newCollectionUUID:j,newCollectionTitle:F,newCollectionEmoji:U,newCollectionSlug:V,newCollectionAccess:$,newCollectionUserPermission:z},d,l,h),n.invalidateQueries({queryKey:pn}),n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:["results"]}),n.invalidateQueries({queryKey:[l,{frontend_context_uuid:T}]})}}),{mutate:E}=vt({mutationFn:async({entryUUID:O,currentCollectionUUID:L,newCollectionTitle:P,newCollectionUUID:N,newCollectionSlug:T,newCollectionAccess:j,closeModal:F,callback:U})=>{if(N!==Ou)return F(),await Vw({params:{new_collection_uuid:N,entry_uuid:O,return_collection:!1,return_thread:!1},reason:e}),U?.(),y("add"),{entryUUID:O,currentCollectionUUID:L,newCollectionTitle:P,newCollectionUUID:N,newCollectionSlug:T,newCollectionAccess:j,closeModal:F}},onMutate:async({entryUUID:O,frontendContextUUID:L,currentCollectionUUID:P,newCollectionUUID:N,newCollectionTitle:T,newCollectionEmoji:j,newCollectionSlug:F,newCollectionAccess:U,newCollectionUserPermission:V})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:pn});const $=n.getQueryData(d),z=n.getQueryData(pn);return eX(n,{entryUUID:O,frontendContextUUID:L,newCollectionUUID:N,newCollectionTitle:T,newCollectionEmoji:j,newCollectionSlug:F,newCollectionAccess:U,newCollectionUserPermission:V},d,l,h),n.setQueryData(pn,Q=>{Q=Q||{pages:[],pageParams:[]};const Y=Q.pages.map(W=>W.map(X=>X.uuid===P?{...X,thread_count:X.thread_count-1}:X.uuid===N?{...X,thread_count:X.thread_count+1}:X));return{...Q,pages:Y}}),{previousThread:$,previousCollections:z}},onSettled:(O,L,P,N)=>{if(L)n.setQueryData(d,N.previousThread),n.setQueryData(pn,N.previousCollections);else{const j={collection_slug:P.existingCollectionSlug?.slice(-22)},F={collection_slug:P.newCollectionSlug.slice(-22)},U=[Vc,j],V=[Vc,F];n.invalidateQueries({queryKey:["get_collection",F]}),n.invalidateQueries({queryKey:U}),n.refetchQueries({queryKey:V}),n.refetchQueries({queryKey:m(P.entryUUID)}),n.invalidateQueries({queryKey:pn}),n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:["results"]}),n.invalidateQueries({queryKey:[l,{frontend_context_uuid:P.frontendContextUUID}]}),n.invalidateQueries({queryKey:[$p]})}}}),{mutate:M}=vt({mutationFn:async({entryUUID:O,oldCollectionUUID:L,callback:P})=>{if(L)return await XK({collectionUUID:L,entryUUID:O,reason:e}),P?.(),y("remove"),{entryUUID:O,oldCollectionUUID:L}},onMutate:async({entryUUID:O,oldCollectionUUID:L,frontendContextUUID:P,collectionSlug:N})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:pn});const T=n.getQueryData(d),j=n.getQueryData(pn);return P&&(h(F=>F?F.map(U=>U.frontend_context_uuid===P?{...U,collection_info:void 0,bookmark_state:"NOT_BOOKMARKED"}:U):[]),n.setQueryData([l,{frontend_context_uuid:P}],F=>F?F.map(U=>U.frontend_context_uuid===P?{...U,collection_info:null,bookmark_state:"NOT_BOOKMARKED"}:U):[])),n.setQueryData(d,F=>{F=F||{pages:[],pageParams:[]};const U=F.pages.map(V=>V.map($=>O===$.uuid&&$.collection?.uuid===L?{...$,collection:null}:$));return{...F,pages:U}}),n.setQueryData(pn,F=>{F=F||{pages:[],pageParams:[]};const U=F.pages.map(V=>V.map($=>$.uuid===L?{...$,thread_count:$.thread_count-1}:$));return n.setQueryData(m(O),V=>V&&Array.isArray(V.pages)?{...V,pages:V.pages.map($=>$.map(z=>z.uuid===O?{...z,collection_info:null}:z))}:{...V,collection_info:null}),{...F,pages:U}}),N&&n.setQueryData([Vc,{collection_slug:N.slice(-22)}],(F={pages:[],pageParams:[]})=>({...F,pages:F.pages.map(U=>U.filter(V=>V.uuid!==O))})),{previousThreads:T,previousCollections:j}},onSettled:(O,L,P,N)=>{if(L)n.setQueryData(d,N.previousThreads),n.setQueryData(pn,N.previousCollections);else if(n.invalidateQueries({queryKey:m(P.entryUUID)}),n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:pn}),n.invalidateQueries({queryKey:["results"]}),n.invalidateQueries({queryKey:[$p]}),n.invalidateQueries({queryKey:[l,{frontend_context_uuid:P.frontendContextUUID}]}),P.collectionSlug){const T={collection_slug:P.collectionSlug.slice(-22)},j=[Vc,T];n.invalidateQueries({queryKey:j}),n.invalidateQueries({queryKey:["get_collection",T]})}}}),{mutate:k}=vt({mutationFn:async O=>{await tet({collectionUuid:O,reason:e})},onSuccess:(O,L)=>{n.invalidateQueries({queryKey:pn}),n.invalidateQueries({queryKey:[$p]}),n.invalidateQueries({queryKey:fv()}),n.invalidateQueries({queryKey:Hp()}),n.setQueryData(pn,P=>!P||!P.pages?P:{...P,pages:P.pages.map(N=>N.filter(T=>T.uuid!==L))})}}),{mutate:A}=vt({mutationFn:async({collectionUuid:O,link:L,reason:P})=>{const{data:N,error:T}=await se.POST("/rest/collections/focused_web_config/links",P,{timeoutMs:Pe(),body:{collection_uuid:O,link:L},numRetries:1});if(T)throw new Ce("API_CLIENTS_ERROR",{cause:T,details:{reason:P}});return N},onSettled:(O,L,P,N)=>{n.invalidateQueries({queryKey:["get_collection",{collection_slug:P.collectionSlug.slice(-22)}]})}}),{mutate:R}=vt({mutationFn:async({collectionUuid:O,link:L,reason:P})=>{await se.DELETE("/rest/collections/focused_web_config/links",P,{body:{collection_uuid:O,link:L},timeoutMs:Pe(),numRetries:1})},onSettled:(O,L,P,N)=>{n.invalidateQueries({queryKey:["get_collection",{collection_slug:P.collectionSlug.slice(-22)}]})}});return f.useMemo(()=>({updateCollectionInfo:v,updateCollectionAccessLevel:x,createCollectionForThread:b,createCollection:_,bookmarkFromFeed:w,removeBookmarkFromFeed:C,firstTimeBookmark:S,swapThreadCollection:E,removeThreadFromCollection:M,deleteCollection:k,addLink:A,removeLink:R}),[A,w,b,_,k,S,C,R,M,E,x,v])},urt=({reason:e})=>We({queryKey:["list_space_templates"],queryFn:()=>nrt({reason:e})}),fge=({collectionSlug:e,reason:t})=>{const{data:n,isLoading:r}=urt({reason:t});return f.useMemo(()=>!n?.templates||!e?{templateSpace:void 0,isLoading:r}:{templateSpace:n.templates.find(s=>s.collection.slug===e),isLoading:r},[e,n?.templates,r])},QJt=({template:e,reason:t})=>{const n=gt(),{$t:r}=Z(),{trackEvent:s}=Ne(),{deprecatedOpenToast:a}=gn(),{createCollection:i,addLink:l}=Cy({reason:t}),{collection:c,tags:u}=e,d=f.useCallback(()=>{c&&(s("space template copied",{collectionSlug:c.slug??"",templateTitle:c?.title??"",tags:Array.from(u)}),i({...c,title:c.title??"",description:c.description??"",instructions:c.instructions??"",emoji:c.emoji??"",accessLevel:bt.PRIVATE_READ,callback:async m=>{c.focused_web_config?.link_configs&&await Promise.all(c.focused_web_config.link_configs.map(p=>l({collectionUuid:m.uuid,link:p.link??"",collectionSlug:m.slug,reason:t}))),n.push(`/spaces/${m.slug}`),a(r({defaultMessage:"Space is ready to customize",id:"AWqOucIdz5"}),"success",3)}}))},[n,c,u,i,a,r,s,l,t]);return f.useMemo(()=>({handleCopyTemplate:d}),[d])},mge=({reason:e,onSuccess:t})=>{const{$t:n}=Z(),{deprecatedOpenToast:r}=gn();return vt({mutationFn:async({file_url:s})=>(await ZJe({request:{file_url:s,view_mode:!1},reason:e})).file_url,onSuccess:(s,{tab_id:a})=>{t?t(s,a):window.open(s,"_blank"),r(n({defaultMessage:"Downloading file...",id:"/vA9NyIeJh"}),"success",3)},onError:s=>{s instanceof _F?r(n({defaultMessage:"Downloads are disabled for files in this organization.",id:"NfM+Ayxvc6"}),"error",8):s instanceof wF?r(n({defaultMessage:"PDF downloads are restricted",id:"aJYvzl3Lq5"}),"error",8):s instanceof CF?r(n({defaultMessage:"This file belongs to a different organization",id:"lo7Bg402Jd"}),"error",8):r(n({defaultMessage:"Failed to download file",id:"RIWlU8NdpC"}),"error",3)}})},Z2=async({fileRepositoryType:e,ownerId:t,limit:n,offset:r,searchTerm:s,email:a,reason:i})=>{const[l,c]=await Promise.all([iP({request:{fileRepositoryInfo:{file_repository_type:e,owner_id:t},limit:n,offset:r,searchTerm:s,fileStates:["COMPLETE"],email:a},reason:i}),iP({request:{fileRepositoryInfo:{file_repository_type:e,owner_id:t},limit:100,offset:0,searchTerm:"",fileStates:["PROCESSING","FAILED"],email:a},reason:i})]),u=d=>({name:d.filename,file_uuid:d.file_uuid,file_s3_url:d.file_s3_url??"",file_title:d.file_title,file_description:d.file_description,uploadedBy:d.uploaded_by,state:d.file_state,size:d.file_size??0,date:new Date(d.time_created).toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"}),error:d.error??void 0,isOptimistic:!1});if(l||c){const d=l?.files?.map(u)||[],m=c?.files?.map(u)||[];return{completedFiles:d,processingFiles:m.filter(p=>p.state==="PROCESSING"),failedFiles:m.filter(p=>p.state==="FAILED"),numTotalFiles:l?.numTotalFiles||0}}return{completedFiles:[],processingFiles:[],failedFiles:[],numTotalFiles:0}},drt=({fileRepositoryType:e,limit:t,offset:n,searchTerm:r,ownerId:s,reason:a})=>{const i=ht(),{session:l}=Et(),c=l?.user?.email??"",{isEnterprise:u}=_n({reason:a}),d=!!(e==="COLLECTION"&&s||e==="ORG"&&u),m=K5(e,s,t,n,r),p=We({queryKey:m,queryFn:()=>d?Z2({fileRepositoryType:e,ownerId:s,limit:t,offset:n,searchTerm:r,email:c,reason:a}):Promise.reject(),enabled:d,placeholderData:Ud,staleTime:5*60*1e3,gcTime:10*60*1e3});return f.useEffect(()=>{d&&(p.data?.numTotalFiles??0)>n+t&&i.prefetchQuery({queryKey:m,queryFn:()=>Z2({fileRepositoryType:e,ownerId:s,limit:t,offset:n+t,searchTerm:r,email:c,reason:a}),staleTime:5*60*1e3,gcTime:10*60*1e3})},[m,d,i,e,t,n,r,p.data?.numTotalFiles,c,s,a]),p},frt=({fileRepositoryType:e,limit:t,searchTerm:n,ownerId:r,reason:s})=>{const{session:a}=Et(),i=a?.user?.email??"",{isEnterprise:l}=_n({reason:s}),c=!!(e==="COLLECTION"&&r||e==="ORG"&&l),u=K5(e,r,t,void 0,n,!0);return xu({enabled:c,initialPageParam:0,queryKey:u,queryFn:({pageParam:m})=>!c||m===void 0?Promise.reject():Z2({fileRepositoryType:e,ownerId:r,limit:t,offset:m,searchTerm:n,email:i,reason:s}),getNextPageParam:(m,p)=>{const g=p.length*t+t;if(!(g>=m.numTotalFiles))return g}})},XJt=({fileRepoInfo:e,offset:t,setOffset:n,searchTerm:r,reason:s})=>{const a=e.file_repository_type,i=e.owner_id,{data:l,isLoading:c}=drt({fileRepositoryType:a,limit:_o,offset:t,searchTerm:r,ownerId:i,reason:s}),{completedFiles:u,processingFiles:d,failedFiles:m,totalFiles:p}=f.useMemo(()=>({completedFiles:l?.completedFiles||[],processingFiles:l?.processingFiles||[],failedFiles:l?.failedFiles||[],totalFiles:l?.numTotalFiles??0}),[l]),h=t>0,g=p>t+_o,y=Math.floor(t/_o)+1,v=Math.max(1,Math.ceil(p/_o)),x=f.useCallback(()=>{h&&n(Math.max(0,t-_o))},[h,t,n]),b=f.useCallback(()=>{g&&n(t+_o)},[g,t,n]);return f.useMemo(()=>({completedFiles:u,processingFiles:d,failedFiles:m,totalFiles:p,isLoadingFileDirectory:c,hasPreviousPage:h,hasNextPage:g,searchTerm:r,offset:t,currentPage:y,totalPages:v,setOffset:n,handlePrevPage:x,handleNextPage:b}),[u,y,m,b,x,g,h,c,t,d,r,n,p,v])},mrt=({fileRepoInfo:e,searchTerm:t,limit:n=_o,reason:r})=>{const s=e.file_repository_type,a=e.owner_id,{data:i,isLoading:l,hasNextPage:c,fetchNextPage:u}=frt({fileRepositoryType:s,limit:n,searchTerm:t,ownerId:a,reason:r}),{completedFiles:d,processingFiles:m,failedFiles:p,totalFiles:h}=f.useMemo(()=>{const g=i?i.pages[i.pages.length-1]:null;return{completedFiles:i?.pages.map(y=>y.completedFiles).flat()||[],processingFiles:i?.pages.map(y=>y.processingFiles).flat()||[],failedFiles:i?.pages.map(y=>y.failedFiles).flat()||[],totalFiles:g?.numTotalFiles??0}},[i]);return f.useMemo(()=>({completedFiles:d,processingFiles:m,failedFiles:p,totalFiles:h,isLoading:l,hasNextPage:c,searchTerm:t,fetchNextPage:u}),[d,p,u,c,l,m,t,h])},KF=({title:e,actionIcon:t=ar,onAction:n,testId:r,children:s})=>o.jsxs(H,{children:[o.jsxs("div",{className:"my-xs py-xs pl-sm flex items-center justify-between",children:[o.jsx(D,{variant:"smallBold",children:e}),n&&o.jsx(Te,{variant:"common",size:"small",icon:t,pill:!0,onClick:n,"data-testid":r})]}),s]}),prt=({reason:e,collectionSlug:t})=>{const{variation:n}=Gb(!1),{openModal:r}=xt(),{fileRepoInfo:s}=nl({reason:e,collectionSlugOverride:t}),{data:a}=We({queryKey:HXe(s),queryFn:()=>hF({reason:e,request:{file_repository_info:s,filters:{connection_ids:[],connection_types:[],parent_uuids:[],remote_file_ids:[],uuids:[],ids:[],file_types:[],upload_ids:[],status:["SYNC_ERROR"],root_files_only:!1,search_keyword:""},order_by:"created",order_dir:"asc",pagination:{page_size:0}}})}),i=f.useCallback(()=>{r("spaceUploadFilesModal",{initialTab:n?"files":"connectors",collectionSlug:t})},[t,r,n]),l=a?.total??0;return f.useMemo(()=>({errorCount:l,handleSeeDetails:i}),[l,i])},tX=ot({errorCount:{defaultMessage:"{errorCount, plural, one {# file failed to upload} other {# files failed to upload}}",id:"5s+s5GJuN7"},seeDetails:{defaultMessage:"See details",id:"RQfEXO7ZCr"}}),hrt=({collectionSlug:e})=>{const t="upload-error-banner",{$t:n}=Z(),{errorCount:r,handleSeeDetails:s}=prt({reason:t,collectionSlug:e});return r<=0?null:o.jsxs(H,{variant:"subtle",className:"px-sm py-xs flex items-baseline gap-2 rounded-md",children:[o.jsx(D,{color:"red",className:"self-center",children:o.jsx(ce,{icon:Dd,size:"md"})}),o.jsx(D,{variant:"small",color:"default",children:o.jsx(pe,{...tX.errorCount,values:{errorCount:r}})}),o.jsx("div",{className:"ml-auto",children:o.jsx(Te,{variant:"noBackground",size:"small",text:n(tX.seeDetails),onClick:s})})]})},_m=(e,t)=>{const n=t?.isOverlapping??!1,r=t?.stackDirection??"left";if(!e.length)return o.jsx(ce,{icon:um,size:"sm"});const s=Math.max(1,t?.maxVisuals??3),a=d=>{if(!(!n||d))switch(t?.size){case"sm":return"-0.25rem";case"md":return"-0.375rem";case"lg":return"-0.5rem";case"xl":return"-0.625rem";default:return}},i=()=>{const d=B("relative flex items-center justify-center",{"rounded-full":t?.shape==="circle"||!t?.shape,"rounded-none":t?.shape==="square","size-4":t?.size==="sm","size-5":t?.size==="md","size-6":t?.size==="lg","size-7":t?.size==="xl"});return!n||!e||e.length<=1?d:B(d,t?.overlappingClassName??"bg-base ring-subtlest",{"ring-1":t?.size==="sm"||t?.size==="md","ring-2":t?.size==="lg"||t?.size==="xl"})},l=(t?.showRemainderCount??!0)&&e.length>s,c=s===1&&e.length>1&&l?0:l?s-1:Math.min(s,e.length),u=e.slice(0,c).map((d,m)=>o.jsx("div",{className:i(),style:{zIndex:r==="left"?e.length-m-1:e.length+m,marginLeft:a(m===0)},children:d},m));return o.jsxs("div",{className:B("isolate",t?.containerClass??"my-xs flex items-center"),children:[o.jsxs("div",{className:t?.innerClassName??B("flex items-center",{"gap-2":!n}),children:[u,l&&o.jsx("div",{className:B(i(),{"mx-1":c===0}),style:{zIndex:r==="left"?-1:e.length+s,marginLeft:a(c===0)},children:o.jsxs(D,{variant:"tinyMono",color:"light",inline:!0,children:["+",e.length-c]})})]}),t?.rightText&&o.jsx("div",{className:"ml-2",children:t.rightText})]})},YF=I.memo(({width:e="w-14",fillColor:t="fill-max",svgClassName:n,...r})=>{const s=B("h-auto group",e);return o.jsx("div",{className:s,...r,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 99 36",className:n,children:[o.jsx("path",{className:t,d:"M50.0858 22.3525C50.0858 23.9034 51.4144 24.8675 53.5527 24.8675C55.1684 24.8675 56.5468 24.3911 57.5393 23.4903C58.5991 22.5277 59.1595 21.1074 59.1595 19.3821V19.3262L53.1962 19.956C51.1311 20.147 50.0858 20.9534 50.0858 22.3525Z"}),o.jsx("path",{className:t,d:"M96.7015 8.60077C95.1033 5.76707 92.7331 3.49361 89.8477 2.02806C87.198 0.682565 84.1956 0 80.925 0H4.46551C1.9767 0.000755049 -0.00527674 2.02051 1.0554e-05 4.5084V36H80.925C83.8489 36 86.556 35.4503 88.9904 34.3736L78.7837 21.1444H78.5571L72.8105 28.5922H67.2136V27.4883L75.0795 17.6697L67.2136 7.851V6.74712H72.8105L78.5571 14.1949H78.7837L84.5302 6.74712H90.1264V7.851L82.2612 17.6697L93.3728 31.5407C94.6878 30.3568 95.8171 28.9675 96.7023 27.3977C98.2266 24.6946 99 21.5355 99 18.0102C99 14.4849 98.2266 11.3054 96.7015 8.60077ZM40.5936 28.593H35.122V14.6268C35.122 13.5886 34.8214 12.7392 34.2518 12.1699C33.6612 11.5794 32.8009 11.2804 31.6951 11.2804C30.0009 11.2804 27.1586 11.926 27.1586 16.2517V28.593H21.687V14.6268C21.687 13.5886 21.3863 12.7392 20.8168 12.1699C20.2262 11.5794 19.3658 11.2804 18.26 11.2804C16.5658 11.2804 13.7228 11.926 13.7228 16.2517V28.593H8.29124V7.35569H13.5649V9.06814C13.5649 9.20934 13.7402 9.27276 13.8308 9.16479C14.25 8.66721 14.7236 8.2693 15.2788 7.94236C16.3883 7.29 17.8182 6.96005 19.5275 6.96005C21.2368 6.96005 22.8419 7.38212 24.0602 8.21418C24.9538 8.82426 25.5248 9.54835 25.8828 10.1554C25.938 10.2498 26.0739 10.2543 26.1358 10.1645C27.5997 8.0375 29.88 6.9608 32.9232 6.9608C35.1363 6.9608 37.0239 7.60184 38.3812 8.81445C39.8277 10.1063 40.5928 11.9932 40.5928 14.2704L40.5936 28.593ZM64.5518 28.593H59.2781V26.5407C59.2781 26.4033 59.1074 26.3361 59.016 26.4388C57.5076 28.1316 55.3406 28.9894 52.5625 28.9894C47.7344 28.9894 44.6149 26.5083 44.6149 22.6696C44.6149 20.7261 45.3718 19.1699 46.8658 18.0449C48.1733 17.0596 49.9838 16.4503 52.249 16.2321L59.1603 15.5148V14.8647C59.1603 12.2658 57.806 11.0033 55.0203 11.0033C53.1093 11.0033 50.6885 11.6119 50.366 14.5105L50.3282 14.8458H45.1097C45.1097 14.8458 45.0863 14.4154 45.1746 13.8129C45.7978 9.61102 49.7542 6.91927 55.0989 6.91927C60.93 6.91927 64.5525 10.0852 64.5525 15.181L64.5518 28.593Z"})]})})});YF.displayName="Max";const wt=I.memo(({size:e="medium",user:t,showEdit:n,onChange:r,anon:s,altText:a,defaultIcon:i=wPe,rounded:l=!0,showBackground:c=!0,showProBadge:u,showMaxBadge:d,className:m,proBadgeClassName:p,badgeProps:h})=>{const g=s?_Pe:i,y="65%",v=f.useCallback(()=>{const x=document.createElement("input");x.type="file",x.accept="image/*",x.onchange=b=>{const _=b.target.files?.[0];if(_){const w=new FileReader;w.onload=C=>{r&&r(C.target?.result)},w.readAsDataURL(_)}},x.click()},[r]);return o.jsx("div",{className:B("text-inverse relative",m),children:o.jsxs("div",{className:B("relative flex aspect-square shrink-0 items-center justify-center",c?"bg-subtler":"bg-transparent",{"rounded-full":l,"size-3":e==="tiny","size-4":e==="mini","size-5":e==="small","size-6":e==="base","size-8":e==="medium","size-10":e==="large","size-20":e==="xlarge","ring-super border-inverse border-2 ring-[1.5px]":u,"ring-max border-inverse border-2 ring-[1.5px]":d}),children:[h?.show&&o.jsx("div",{className:B("absolute right-0 top-0 size-3 -translate-y-1/4 translate-x-1/4 select-none rounded-full border-2",h?.className)}),t&&!s?o.jsx("img",{alt:a??"User avatar",className:B("size-full object-cover",{"rounded-full":l}),src:t}):o.jsx(D,{color:"light",className:"flex items-center justify-center",children:o.jsx(g,{width:y,height:y})}),n&&e!=="small"&&o.jsx("div",{className:"bg-base absolute -bottom-1 -right-2 rounded-full",children:o.jsx(he,{ariaLabel:"Edit avatar",variant:t?"common":"primary",size:e!=="xlarge"?"tiny":"small",pill:!0,icon:t?vu:ar,onClick:v})}),u&&o.jsx("div",{className:B("absolute top-full mt-[-6px] w-[24px] rounded-r-full bg-current p-[1.5px]",{"opacity-0":e==="small"},{"w-lg mt-[-10px]":e==="xlarge"},p),children:o.jsx(R5,{fillColor:"fill-super",width:"w-full",sizeVariant:"small"})}),d&&o.jsx("div",{className:B("absolute left-1/2 top-full mt-[-6px] flex w-[28px] -translate-x-1/2 items-center justify-center rounded-r-full bg-current p-[1.5px]",{"opacity-0":e==="small"},{"w-xl mt-[-10px]":e==="xlarge"}),children:o.jsx(YF,{width:"w-full"})})]})})});wt.displayName="Avatar";const grt=({totalLocalFiles:e,totalRepoFiles:t,isFileManagerUiRedesignEnabled:n})=>{const r=t-e;return n?"files":e===0&&r>0?"connectors":(e>0&&r===0||e>0&&r>0,"localFiles")},QF=I.memo(({icon:e,badge:t})=>{const n=f.useMemo(()=>t&&o.jsx(wt,{size:"tiny",showBackground:!1,rounded:!1,user:t}),[t]);return o.jsx(ce,{icon:e,size:18,stroke:2,color:"#64645F",badge:n})});QF.displayName="BadgedIconFactory";const pge=({collection:e,onSourcesEdit:t})=>{const n=Z(),r="files-section",{isUserInvited:s,isUserAtLeastWriter:a}=wy({collectionSlugOverride:e.slug,reason:r}),{variation:i}=Gb(!1),l=f.useRef(null),{fileRepoInfo:c}=nl({reason:r,collectionSlugOverride:e.slug}),{searchTerm:u}=hhe({reason:r}),{completedFiles:d,totalFiles:m,hasNextPage:p,fetchNextPage:h}=mrt({fileRepoInfo:c,searchTerm:u,limit:ZK,reason:r}),{data:g,hasNextPage:y,fetchNextPage:v}=CJe({connectionTypes:[Tt.GOOGLE_DRIVE,Tt.ONEDRIVE,Tt.SHAREPOINT,Tt.DROPBOX,Tt.BOX],status:["READY"],fileRepoInfo:c,pageSize:ZK,fileTypes:["FILE"],reason:r}),{connectorFiles:x,totalRepoFiles:b}=f.useMemo(()=>{const A=g?g.pages[g.pages.length-1]:null;return{connectorFiles:g?.pages.map(R=>R.files).flat()||[],totalRepoFiles:A?.files_in_repo??0}},[g]),_=f.useMemo(()=>$s(()=>{p?h():y&&v()},500),[p,h,y,v]);l3(l,_,{threshold:.5});const w=f.useCallback(()=>{if(!t)return;const A=grt({totalLocalFiles:m,totalRepoFiles:b,isFileManagerUiRedesignEnabled:i});t(A)},[t,m,b,i]),C=p||y,S=f.useCallback(()=>{const A=a?n.formatMessage({defaultMessage:"Upload or sync files to be used as sources in every search.",id:"yF+cGexY2F"}):n.formatMessage({defaultMessage:"No files included.",id:"wZ9qntul+a"});let R=null;if(a){const O=[o.jsx(wt,{user:E5,showBackground:!1,size:"small"},"gdrive"),o.jsx(wt,{user:k5,showBackground:!1,size:"small"},"onedrive"),o.jsx(wt,{user:T5,showBackground:!1,size:"small"},"sharepoint"),o.jsx(ce,{icon:db,size:"sm"},"upload")];R=_m(O,{isOverlapping:!0,maxVisuals:4,size:"xl",stackDirection:"right"})}return o.jsxs(H,{className:"px-sm py-md gap-y-xs flex flex-col items-center",children:[R&&o.jsx(H,{className:"mb-xs",children:R}),o.jsx(D,{variant:"small",color:"light",className:"text-center",children:A})]})},[n,a]),E=b===0,M=!s&&a,k=n.formatMessage({defaultMessage:"Files",id:"m4vqJl0/FT"});return o.jsx(KF,{title:b?`${k} (${b})`:k,onAction:M?w:void 0,testId:"space-context-files-add-button",children:E?S():o.jsxs("div",{className:"gap-y-sm flex flex-col",children:[o.jsx(hrt,{collectionSlug:e.slug}),o.jsxs("div",{children:[o.jsx(hge,{localFiles:d}),o.jsx(gge,{connectorFiles:x}),C&&o.jsx(li,{ref:l,size:"small",className:"my-xs"})]})]})})};pge.displayName="FilesSection";const hge=({localFiles:e})=>{const t="local-files-list",{mutate:n}=mge({reason:t}),r=f.useCallback(s=>s.file_s3_url?()=>n({file_url:s.file_s3_url}):null,[n]);return e.map((s,a)=>{const i=o.jsx(H,{className:"flex size-6 flex-none items-center justify-center",children:o.jsx(QF,{icon:cm,badge:null})}),l=r(s);return o.jsx(H,{children:l?o.jsx(Te,{variant:"positive",text:s.name,leadingComponent:i,onClick:l,textClassName:"font-sans font-normal text-sm",layout:"left",fullWidth:!0}):o.jsxs(H,{className:"pl-sm gap-x-xs flex w-full items-center py-[10px]",children:[i,o.jsx(D,{variant:"small",color:"light",className:"line-clamp-1 pl-px",children:s.name})]})},`local-${a}`)})};hge.displayName="LocalFilesList";const gge=({connectorFiles:e})=>{const t=f.useCallback(n=>()=>{n.connection_file_url&&window.open(n.connection_file_url,"_blank")},[]);return e.map((n,r)=>{const s=o.jsx(H,{className:"flex size-6 flex-none items-center justify-center",children:o.jsx(QF,{icon:vie,badge:bo(n.connection_type)})}),a=t(n);return o.jsx(H,{children:o.jsx(Te,{variant:"positive",text:n.name,leadingComponent:s,onClick:a,textClassName:"font-sans font-normal text-sm",layout:"left",fullWidth:!0})},`connector-${r}`)})};gge.displayName="ConnectorFilesList";const yrt=({collection:e,onEdit:t})=>{const n=Z(),r="instructions-section",{isUserInvited:s,isUserAtLeastWriter:a}=wy({collectionSlugOverride:e.slug,reason:r}),i=!s&&a,l=!e.instructions,c=f.useMemo(()=>{const u=n.formatMessage({defaultMessage:"Add instructions to format, scope, and add relevance to your search results.",id:"JnYU6ctsCn"});return o.jsx(H,{className:"px-sm py-md gap-y-xs flex flex-col items-center",children:o.jsx(D,{variant:"small",color:"light",className:"text-center",children:u})})},[n]);return o.jsx(KF,{title:n.formatMessage({defaultMessage:"Instructions",id:"sV2v5LjRpX"}),actionIcon:vu,onAction:i?t:void 0,testId:"space-context-instructions-edit-button",children:l?c:o.jsx(H,{className:"pl-sm gap-x-xs flex w-full items-center py-[10px]",children:o.jsx(D,{variant:"small",color:"light",className:"line-clamp-4 pl-px",children:e.instructions})})})},vrt=({collection:e,onSourcesEdit:t})=>{const n=Z(),r="links-section",{isUserInvited:s,isUserAtLeastWriter:a}=wy({collectionSlugOverride:e.slug,reason:r}),{focusedWebLinks:i,totalFocusedWebLinks:l}=f.useMemo(()=>{const h=e.focused_web_config?.link_configs??[];return{focusedWebLinks:h,totalFocusedWebLinks:h.length}},[e.focused_web_config?.link_configs]),c=f.useCallback(h=>()=>window.open(`https://${h.link}`,"_blank"),[]),u=f.useCallback(()=>{t&&t("links")},[t]),d=f.useCallback(()=>{const h=a?n.formatMessage({defaultMessage:"Add URLs to be used as sources in every search.",id:"FTItpgdarF"}):n.formatMessage({defaultMessage:"No links included.",id:"Qid6Kgk2jz"});return o.jsx(H,{className:"px-sm py-md gap-y-xs flex flex-col items-center",children:o.jsx(D,{variant:"small",color:"light",className:"text-center",children:h})})},[n,a]),m=l===0,p=!s&&a;return o.jsx(KF,{title:n.formatMessage({defaultMessage:"Links",id:"qCcwo3DU78"}),onAction:p?u:void 0,testId:"space-context-links-add-button",children:m?d():o.jsx(o.Fragment,{children:i.map((h,g)=>{const y=o.jsx(H,{className:"flex size-6 flex-none items-center justify-center",children:o.jsx(ce,{icon:Vm,size:18,stroke:2,color:"#64645F"})}),v=c(h);return o.jsx(H,{children:o.jsx(Te,{variant:"positive",text:h.link,leadingComponent:y,onClick:v,textClassName:"font-sans font-normal text-sm",layout:"left",fullWidth:!0})},g)})})})},yge=I.memo(({collectionSlug:e,handleSpaceEdit:t,handleSourcesEdit:n})=>{const r="space-context",{collection:s}=cc({collectionSlug:e,reason:r}),{isUserAtLeastWriter:a,isUserInvited:i,isUserReader:l}=wy({collectionSlugOverride:e,reason:r}),{templateSpace:c}=fge({collectionSlug:e??"",reason:r}),d=!i&&a||l&&!!c;return s?o.jsxs(H,{className:"hideScroll h-full flex-col overflow-y-auto",children:[d&&o.jsxs(o.Fragment,{children:[o.jsx(yrt,{collection:s,onEdit:t}),o.jsx("hr",{className:"my-sm"})]}),o.jsx(pge,{collection:s,onSourcesEdit:n}),o.jsx("hr",{className:"my-sm"}),o.jsx(vrt,{collection:s,onSourcesEdit:n})]}):null});yge.displayName="SpaceContext";const vge=I.memo(({closeModal:e,isOpen:t,collectionSlug:n})=>{const r="space-context-modal",s=Z(),{openModal:a}=xt(),{collection:i}=cc({collectionSlug:n,reason:r}),{isUserAtLeastWriter:l,isUserAtLeastReader:c}=wy({reason:r,collectionSlugOverride:n}),u=ht(),d=f.useCallback(()=>{if(n){const g=["get_collection",{collection_slug:n.slice(-22)}];u.invalidateQueries({queryKey:g})}e()},[e,n,u]),m=f.useCallback(()=>{i&&a("spaceSettings",{existingSpace:i})},[i,a]),p=f.useCallback(g=>{i&&a("spaceUploadFilesModal",{initialTab:g,collectionSlug:n})},[i,n,a]),h=f.useMemo(()=>o.jsx(D,{variant:"section-title",className:"px-sm",children:s.formatMessage({defaultMessage:"Context",id:"V2qutIKrxy"})}),[s]);return o.jsx(en,{variant:"side-sheet",isOpen:t,onClose:d,includeBlur:!1,titleContent:h,modalClassname:"!min-w-[365px] !w-[25vw]",closeButtonClassname:"right-sm absolute",fixedTitle:!0,children:o.jsx(yge,{collectionSlug:n,handleSpaceEdit:l?m:void 0,handleSourcesEdit:c?p:void 0})})});vge.displayName="SpaceContextModal";const xrt=({children:e,title:t,handleClose:n,experimentalImageDesign:r})=>{const{image:s,imageAlt:a}=r;return o.jsx(H,{variant:"background",className:"max-w-[400px] overflow-hidden rounded-xl md:flex md:max-w-[960px]",children:o.jsxs(H,{variant:"subtler",className:"inset-0 md:flex",children:[o.jsx("div",{className:"md:w-[55%]",children:o.jsx("img",{src:s,alt:a,className:"md:object-cover"})}),o.jsxs("div",{className:"p-lg md:p-xl relative flex flex-col md:w-[45%]",children:[o.jsx(P5,{testId:"close-modal",variant:"common",size:"small",onClick:n}),o.jsx("div",{className:"mb-lg grow",children:o.jsx(D,{color:"default",variant:"page-title",className:"font-editorial my-sm text-center text-[2rem] font-light leading-none tracking-tight",children:t})}),e]})]})})};let xge=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function brt(e,t){const n=nX(e),r=nX(t);return n.major>r.major?!0:n.major<r.major?!1:n.minor>r.minor?!0:n.minor<r.minor?!1:n.patch>r.patch?!0:!(n.patch<r.patch)}function nX(e){const[t,n,r]=e.split(".").map(Number);return{major:t,minor:n,patch:r}}function _rt(e){return brt(bge(),e)}function Qv(e,t){return _rt(t)?!0:(console.warn(`[todesktop-client] ${e} not called. ${e} was introduced in ${t}. You are running version ${bge()}.`),!1)}const bge=()=>typeof window.todesktop=="object"&&window.todesktop.desktopifyVersion,Qc=typeof window<"u"&&window.todesktop,wrt=e=>async(t,n)=>{const r=xge(),s=t==="*"?Object.keys(e):[t];for(const i of s){const l=e[i];Qc?.on(l,n,r)}const a=_ge(e);return async()=>a(t,n,r)},Crt=e=>async(t,n)=>{const r=xge(),s=t==="*"?Object.keys(e):[t];for(const i of s){const l=e[i];Qc?.on(l,n,r)}const a=_ge(e);return async()=>a(t,n,r)},_ge=e=>(t,n,r)=>{const s=t==="*"?Object.keys(e):[t];for(const a of s){const i=e[a];Qc?.off(i,n,r)}};function Srt(e,t){const n={package:{name:e,version:t},invoke:{version:"1.0.0"}};function r(i){const l={metadata:n,payload:{command:i}};return window.todesktop.invoke(l)}function s(i){const l={metadata:n,payload:{command:Object.assign(Object.assign({},i),{method:":new"})}};return window.todesktop.invoke(l)}function a(i){if(Qv("releaseMemory","4.6.0")){if(!i?.length){console.log("No memory references to release");return}return window.todesktop.releaseMemory(i)}}return{invoke:r,construct:s,releaseMemory:a}}const{invoke:ro,construct:wge}=Srt("client-core","1.0.0-dev"),Ert={openProtocolURL:"open-protocol-url"},Mrt=Crt(Ert);var xj;const bj=typeof window<"u"&&window.todesktop,krt=(e,t)=>{const n=async(a,i,{ref:l,preventDefault:c}={})=>{if(t&&!Qv(`${e} addEventListener`,t))return;const u=await ro({instanceRef:l,namespace:e,eventName:a,eventOptions:{preventDefault:c}});return window.todesktop.on(u,(d,...m)=>{if(Irt(m[0])){const[,...p]=m;return i(...p)}else return i(...m)}),()=>r(a,{eventId:u,ref:l})},r=async(a,...i)=>{const{eventId:l,ref:c}=i[0]||{};t&&!Qv(`${e} removeEventListener`,t)||(await ro({instanceRef:c,namespace:e,eventName:a,eventId:l}),window.todesktop.off(l))};return{removeAllListeners:async(a,{ref:i}={})=>{t&&!Qv(`${e} removeAllListeners`,t)||(await ro({instanceRef:i,namespace:e,method:"removeAllListeners",args:[a]}),window.todesktop.off(a))},on:n}};function Trt(e){console.warn(`[todesktop-client] ${e} is a legacy event and may be removed in future.
        Contact support or look through our typescript files to find a suitable replacement.`)}function Nrt(e,t){const n=e[0],r=n in t;return r&&Trt(n),r}const jrt=(e,t)=>Nrt(e,t),Art=(e,t)=>{const n=krt(t),r=(...s)=>jrt(s,e)?wrt(e)(...s):n.on(...s);return{removeAllListeners:n.removeAllListeners,on:r}};(xj=bj?.env)===null||xj===void 0||xj.NODE_ENV;const Irt=e=>Rrt(e)&&"preventDefault"in e&&"sender"in e,Rrt=e=>e===null?!1:typeof e=="function"||typeof e=="object";async function Prt(e,t){return window.todesktop.shortcut.register(e,t)}async function _j(e){return window.todesktop.shortcut.unregister(e)}async function Ort(e){return wge({namespace:"BrowserWindow",args:[e]})}async function Lrt({ref:e,viewRef:t}){return ro({instanceRef:e,namespace:"BrowserWindow",method:"setBrowserView",args:[t]})}async function Drt({ref:e}={}){return ro({instanceRef:e,namespace:"BrowserWindow",method:"getSize",args:[]})}async function XF({ref:e}={}){return ro({instanceRef:e,namespace:"BrowserWindow",method:"focus",args:[]})}async function hP({ref:e}={}){return ro({instanceRef:e,namespace:"BrowserWindow",method:"isVisible",args:[]})}async function Frt({ref:e}={}){return ro({instanceRef:e,namespace:"BrowserWindow",method:"hide",args:[]})}async function ZF({ref:e}={}){return ro({instanceRef:e,namespace:"BrowserWindow",method:"show",args:[]})}async function Urt({ref:e}={}){return await ro({instanceRef:e,namespace:"BrowserWindow",property:"webContents"})}async function Brt({ref:e}={},...t){return ro({instanceRef:e,namespace:"BrowserWindow",method:"setPosition",args:t})}const Vrt={enterFullscreen:"window.enter-full-screen",exitFullscreen:"window.leave-full-screen"},Cge=Art(Vrt,"BrowserWindow"),mv=Cge.on,gP=Cge.removeAllListeners;async function rX({id:e}){if(Qv(`${sX}:retrieve`,"4.18.0"))return window.todesktop[sX]({action:"retrieve",payload:{id:e}})}const sX="objectStore";async function J2(e){return window.todesktop.contents.openUrlInBrowser(e)}async function $rt(){return ro({namespace:"screen",method:"getCursorScreenPoint",args:[]})}async function Wrt(e){return ro({namespace:"screen",method:"getDisplayNearestPoint",args:[e]})}async function Hrt(e){return wge({namespace:"BrowserView",args:[e]})}async function zrt({ref:e},...t){return ro({instanceRef:e,namespace:"WebContents",method:"loadURL",args:t})}const Grt="pkce_verifier",qrt=5/(24*60),Krt=128,Yrt=e=>{const t=Math.ceil(e*.75),n=new Uint8Array(t);return crypto.getRandomValues(n),btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"").slice(0,e)},Qrt=async e=>{const n=new TextEncoder().encode(e);try{let r;typeof window<"u"&&window.crypto?.subtle?r=await window.crypto.subtle.digest("SHA-256",n):r=new TextEncoder().encode(e);const s=Array.from(new Uint8Array(r)),a=String.fromCharCode(...s);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(r){throw ne.error("Failed to generate code challenge: "+r),new Error("Failed to generate code challenge: "+r)}},Xrt=e=>{Zt(Grt,e,{secure:!0,sameSite:"Lax",expires:qrt,path:"/"})},aX=async()=>{const e=Yrt(Krt);return Xrt(e),Qrt(e)},wj={cacheName:{prefix:"pplx",suffix:"v2",runtime:"runtime"}},Zrt=[wj.cacheName.prefix,wj.cacheName.runtime,wj.cacheName.suffix].join("-");async function oX(){const e=to();if("serviceWorker"in navigator){const{Workbox:t}=await K(async()=>{const{Workbox:s}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:s}},[]),n=new URL("/service-worker.js",window.location.origin);e.version&&n.searchParams.set("v",e.version);const r=new t(n.toString());try{await r.register()}catch(s){ne.error("Error registering service worker",s)}}}async function Jrt(){"serviceWorker"in navigator&&await navigator.serviceWorker.getRegistrations().then(e=>Promise.all(e.map(t=>t.unregister())))}async function c3(){if("serviceWorker"in navigator){await caches.delete(Zrt);return}}const pv=async(...e)=>(await c3(),_b.signIn(...e)),est=async({email:e,reason:t})=>{let n=null;try{n=await ipe({email:e,reason:t})}catch(r){return ne.log(r),null}return n?.workos_org_id??null},tst=async({email:e,reason:t})=>{let n=null;try{n=await ipe({email:e,reason:t})}catch(r){return ne.log(r),null}return n?.force_sso??!1},nst=({email:e,onError:t,onClose:n,redirectUrl:r,reason:s})=>{const{$t:a}=Z(),{trackEvent:i}=Ne(),{device:{isWindowsApp:l}}=At(),c=gt(),{locale:u}=Z(),d=f.useMemo(()=>e.length>0&&e.includes("@")&&e.includes(".")&&e.indexOf("@")<e.lastIndexOf(".")&&e.indexOf("@")>0,[e]),m=f.useCallback(async y=>{i("login with third party clicked",{thirdParty:y});const v=window.location.origin;if(l){const x=await aX(),b=`${v}/auth/${N2}/${y}?code_challenge=${x}&desktopRedirect=${encodeURIComponent(r)}&client_id=${Rq}`;return J2(b),b}return await pv(y,{callbackUrl:r})},[i,r,l]),p=f.useCallback(async()=>{const y=await est({email:e,reason:s});if(!y){t(`SSO not available for email ${e}`);return}if(n(),l){const v=window.location.origin,x=await aX(),b=`${v}/auth/${N2}/workos?code_challenge=${x}&desktopRedirect=${r}&organization=${y}&login_hint=${e}&client_id=${Rq}`;J2(b);return}await pv("workos",{callbackUrl:r},{organization:y,login_hint:e})},[e,n,t,r,l,s]),h=f.useCallback(async()=>{const y=e?.toLowerCase();if(await tst({email:y,reason:s})){await p();return}const x=VQe({redirect:r});i("login with email clicked",{email:y});let b=`${x}#locale=${u}`;l&&(b=`${x}?windows-app-redirect-token=${eHe}#locale=${u}`);const _=await pv("email",{email:y,callbackUrl:b,redirect:!1,useNumericOtp:!0});if(_?.ok){fN(`email request POST successful for ${y}`);const w=encodeURIComponent(y),C=encodeURIComponent(x),S=`/auth/verify-request?email=${w}&redirectUrl=${C}`;c.push(S)}else if(_?.status===429)fN(`email sign in rate limited for ${y}`),c.push("/auth/email-rate-limited");else{const w=`email sign in generic error: ${y} Response(status=${_?.status}, error=${_?.error}, ok=${_?.ok}, url=${_?.url})`;fN(w),ne.error(new Error(w)),t(a({defaultMessage:"Something went wrong. Please try again.",id:"W/5hwrn09m"}))}},[e,r,c,i,u,p,t,a,l,s]),g=f.useCallback(async(y,v)=>{const x={callbackUrl:r};switch(y){case"basic":x.pro=!1;break;case"pro":x.pro=!0;break;case"enterpriseMember":x.enterprise_member=!0;break;case"enterpriseAdmin":x.enterprise_admin=!0;break;case"enterpriseBillingAdmin":x.enterprise_billing_admin=!0;break;case"script":x.script=!0;break;case"frontendTest":x.fe_test=!0;break;case"example.com":x.email_handle=v??"pplx-dev";break}return await pv("devlogin",x)},[r]);return f.useMemo(()=>({emailIsValid:d,handleThirdPartySignIn:m,handleMagicLinkEmailSignIn:h,handleSSOSignIn:p,handleDevSignIn:g}),[d,g,h,p,m])},eE=(e,t)=>e==="highlightPrimary"?t?"primary":"common":e==="highlightBackToSchool"?t?"orange":"common":"inverted",rst=({handleThirdPartySignIn:e,loginButtonsStyle:t})=>{const{$t:n}=Z();return o.jsx(he,{fullWidth:!0,leadingComponent:o.jsx(CPe,{className:"left-two relative -top-px",size:18}),extraCSS:"h-11",variant:eE(t,!1),text:n({defaultMessage:"Continue with {apple}",id:"Iy1YQBJ5Tk"},{apple:"Apple"}),onClick:()=>e("apple")})},sst=({onClick:e})=>{const{$t:t}=Z();return o.jsx(Te,{fullWidth:!0,variant:"noBackground",extraCSS:"border-none text-inverse",text:t({defaultMessage:"Close",id:"rbrahOGMC3"}),onClick:e})},ast=({autoFocus:e=!1,isSSO:t,email:n,emailInFlight:r,handleEmailClick:s,inputRef:a,handleKeyDown:i,setEmail:l,error:c,setError:u,placeholder:d,loginButtonsStyle:m})=>{const{$t:p}=Z(),{isMobileUserAgent:h}=xe(),g="regular",y="w-full h-11",v=B("h-11 border-none rounded-lg","!bg-subtle");return o.jsxs(H,{className:"space-y-xs",children:[o.jsx(Pr,{autoFocus:e,isMobileUserAgent:h,type:"email",name:"email",className:v,pill:!1,errorText:c,placeholder:d||p(t?{defaultMessage:"Enter your work email",id:"jAgre55Zsn"}:{defaultMessage:"Enter your email",id:"5MDGuMLnEB"}),value:n,onKeyDown:i,onChange:x=>{u(""),l(x)},ref:a,disabled:r,errorPlacement:Zf.LABEL}),o.jsx("div",{className:"flex justify-center",children:t?o.jsx(he,{chevron:!0,chevronIcon:Kn,size:g,text:p(t?{defaultMessage:"Continue with SSO",id:"qank7+0V6w"}:{defaultMessage:"Continue with email",id:"l6yCDglZqT"}),extraCSS:B(y,"mt-xs"),variant:eE(m,!0),onClick:s,isLoading:r,disabled:n===""||r}):o.jsx(he,{size:g,text:p({defaultMessage:"Continue with email",id:"l6yCDglZqT"}),onClick:s,isLoading:r,disabled:n===""||r,extraCSS:"w-full h-11 mt-xs",variant:eE(m,!0)})})]})},ost=({handleThirdPartySignIn:e,loginButtonsStyle:t})=>{const{$t:n}=Z();return o.jsx(he,{fullWidth:!0,leadingComponent:o.jsx(SPe,{size:18}),text:n({defaultMessage:"Continue with {google}",id:"Fc2NqN6N7A"},{google:"Google"}),onClick:()=>e("google"),extraCSS:"h-11",variant:eE(t,!0)})},ist=({internalItems:e,isMobileStyle:t})=>{const{$t:n}=Z();return o.jsx(H,{children:o.jsx(Jt,{items:e.map(r=>({type:"default",...r})),isMobileStyle:t,children:o.jsx(he,{icon:EPe,text:n({defaultMessage:"Internal Login",id:"waIOTqSbxu"}),chevron:!0,fullWidth:!0,variant:"rejected"})})})},lst=({onClick:e})=>{const{$t:t}=Z();return o.jsx(Te,{size:"tiny",variant:"noBackground",text:t({defaultMessage:"Single sign-on (SSO)",id:"TI79WvQ5kU"}),onClick:e})},Sge={SIDEBAR:"sidebar",LOGIN_MODAL:"login-modal"},ga={ANSWER_MODE_TABS_ROOT:"answer-mode-tabs",ANSWER_MODE_TABS:{ANSWER:e=>`answer-mode-tabs-tab-${e}`,SEARCH:"answer-mode-tabs-tab-search",RESEARCH:"answer-mode-tabs-tab-research",SHOPPING:"answer-mode-tabs-tab-shopping",ASSETS:"answer-mode-tabs-tab-assets",JOBS:"answer-mode-tabs-tab-jobs",HOTELS:"answer-mode-tabs-tab-hotels",PLACES:"answer-mode-tabs-tab-places",IMAGES:"answer-mode-tabs-tab-images",VIDEOS:"answer-mode-tabs-tab-videos",SOURCES:"answer-mode-tabs-tab-sources",APPS:"answer-mode-tabs-tab-apps",TASKS:"answer-mode-tabs-tab-tasks",CHAT:"answer-mode-tabs-tab-chat"},ANSWER_MODE_JOBS:{FILTERS_ROOT:"jobs-filters"},ANSWER_MODE_VIDEO:{VIDEO_PREVIEW:"jobs-video-preview"},ANSWER_MODE_IMAGE:{IMAGE_PREVIEW:"jobs-image-preview"},ANSWER_MODE_SHOPPING:{SHOPPING_ITEM:"shopping-item"},ANSWER_MODE_PLACES:{PLACE_ITEM:"place-item"},ANSWER_MODE_HOTELS:{HOTEL_ITEM:"hotel-item"}},cst=e=>e?.includes("Chrome")??!1,Ege=e=>(e?.includes("Mobile")&&!e?.includes("iPad"))??!1,ust=e=>e?.includes("Android")??!1,dst=e=>(e?.includes("iPhone")||e?.includes("iPad"))??!1,fst=e=>(e?.includes("Macintosh")||e?.includes("iPad"))??!1,mst=e=>e?.includes("Mobile Safari")??!1,pst=e=>e?.includes("Firefox")??!1,qb=e=>e?.includes("WindowsApp")??!1,hst=e=>e?.includes("Windows")??!1,gst=e=>e?.includes("FBAN")||e?.includes("FBAV")||e?.includes("Instagram"),yst=e=>e?.includes("SamsungBrowser")??!1,vst=e=>(e.includes("wv")||e.includes("version/"))??!1,xst=e=>/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e),bst=e=>vst(e)||xst(e),_st=({autoFocus:e,showInternal:t,disallowedMethods:n,className:r,email:s,setEmail:a,error:i,onClose:l,setError:c,handleEmailClick:u,handleKeyDown:d,emailInFlight:m,handleThirdPartySignIn:p,isSSO:h,setIsSSO:g,internalItems:y,envHasDevLogins:v,isMobileStyle:x,placeholder:b,showCloseButton:_,loginButtonsStyle:w})=>{const C=I.useRef(null),S=navigator.userAgent,E=!n?.includes("google")&&!bst(S),M=!n?.includes("apple"),k=!h&&!n?.includes("sso"),A=f.useMemo(()=>[...E?["google"]:[],...M?["apple"]:[],...t&&v?["internal"]:[]],[E,M,t,v]),R=f.useMemo(()=>({google:o.jsx(ost,{handleThirdPartySignIn:p,loginButtonsStyle:w}),apple:o.jsx(rst,{handleThirdPartySignIn:p,loginButtonsStyle:w}),internal:o.jsx(ist,{internalItems:y,isMobileStyle:x})}),[p,y,x,w]),O=f.useCallback(()=>{c(""),g(!0)},[c,g]);return o.jsxs("div",{className:r,"data-testid":Sge.LOGIN_MODAL,children:[h&&o.jsx("div",{className:"absolute left-0 top-0 z-40",children:o.jsx(Te,{size:"small",icon:P7,onClick:()=>{g(!1),c(void 0)}})}),o.jsxs("div",{className:"mx-auto max-w-sm",children:[!h&&o.jsxs(o.Fragment,{children:[A.length>0&&o.jsx("div",{className:"space-y-sm mx-auto w-[90%]",children:A.map(L=>o.jsx(I.Fragment,{children:R[L]},L))}),A.length>0&&o.jsx(H,{className:"mx-auto my-4 h-0 w-[90%] shrink-0 border-t"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"mx-auto w-[90%]",children:o.jsx(ast,{autoFocus:e||h,isSSO:h,email:s,emailInFlight:m,handleEmailClick:u,inputRef:C,handleKeyDown:d,setError:c,setEmail:a,error:i,placeholder:b,loginButtonsStyle:w})}),k&&o.jsx("div",{className:"mt-md flex justify-center",children:o.jsx(lst,{onClick:O})}),_&&o.jsxs(o.Fragment,{children:[o.jsx(H,{className:"my-4 h-0 w-full shrink-0"}),o.jsx(sst,{onClick:l})]})]})]})]})},Mge="comet-sidecar-threads-by-id",fn=()=>!!Wo(),JF=()=>{const e=Wo();return!!(e?.android_version||e?.ios_version)},u3=e=>!(e.defaultPrevented||!fn()||e.ctrlKey||e.metaKey),wst=e=>{const t=Re.getItem(Mge);if(t){const n=JSON.parse(t);for(const[r,{url:s,updatedAt:a}]of Object.entries(n))e.getState().actions.setSidecarUrlById(r,s,a)}},iX=e=>{const t=e.getState().sidecarUrlById,n={};t.forEach((r,s)=>{s!=="-1"&&(r.url==="/sidecar/"||r.url==="/sidecar"||(n[s]={url:r.url,updatedAt:r.updatedAt}))}),Re.setItem(Mge,JSON.stringify(n))},Cst=(e,t)=>{const n=e.getState().sidecarSourceTab,r=ug(n.tabId,n.secondaryTab?.tabId),s=e.getState().sidecarUrlById.get(r)?.url;!s||new URL(window.location.href).pathname===s||t.replace(s,"Sidecar thread restored from cache")},h1=({autoFocus:e=!1,onClose:t=kn,redirectUrl:n,showInternal:r,disallowedMethods:s,className:a,preEnteredEmail:i,placeholder:l,showCloseButton:c=!0,loginButtonsStyle:u="allInverted"})=>{const d="login-modal-inner",[m,p]=I.useState(i??""),[h,g]=I.useState(),[y,v]=I.useState(!1),{emailIsValid:x,handleThirdPartySignIn:b,handleMagicLinkEmailSignIn:_,handleSSOSignIn:w,handleDevSignIn:C}=nst({email:m,onClose:t,redirectUrl:n??"/",onError:g,reason:d}),{env:{envHasDevLogins:S}}=At(),{isMobileStyle:E}=xe(),{$t:M}=Z(),{getEppoTypedVariation:k}=Wd(),[A,R]=I.useState(!1),{closeModal:O}=xt(),L=f.useCallback(async()=>{if(!fn())return!1;try{if(await k((F,...U)=>F.getBooleanAssignment(...U),{flag:"comet-enterprise-login-block",defaultValue:!1,extraAttributes:{email:m},subjectType:"visitor_id"}))return g(M({defaultMessage:"Your organization has not approved you to use Comet with this account.",id:"Jz4Ffdr9RN"})),!0}catch(j){ne.warn("Failed to check comet enterprise login block:",j)}return!1},[m,k,M]),P=f.useCallback(async()=>{if(!x){g(M({defaultMessage:"Please enter a valid email address",id:"oLpv295HWX"}));return}if(!(y||await L())){if(v(!0),m.endsWith("@example.com")&&S&&!A){t(),await C("example.com",m.split("@")[0]),v(!1);return}A?await w():(await _(),await O()),v(!1)}},[x,y,m,S,A,L,M,t,C,w,_,O]),N=f.useCallback(j=>{ra.isEnterKeyWithoutShift(j)&&P()},[P]),T=[{icon:MPe,text:"Basic",onClick:()=>C("basic")},{icon:O7,text:"Pro",onClick:()=>C("pro")},{icon:yu,text:"Enterprise Member",onMouseDown:j=>j.preventDefault(),onClick:()=>C("enterpriseMember")},{icon:$I,text:"Enterprise Admin",onMouseDown:j=>j.preventDefault(),onClick:()=>C("enterpriseAdmin")},{icon:$I,text:"Enterprise Billing Admin",onMouseDown:j=>j.preventDefault(),onClick:()=>C("enterpriseBillingAdmin")},{icon:m2,text:"Script Default User",onClick:()=>C("script")},{icon:m2,text:"FE Test User",onClick:()=>C("frontendTest")}];return o.jsx(_st,{autoFocus:e,onClose:t,redirectUrl:n,showInternal:r,disallowedMethods:s,className:a,email:m,setEmail:p,handleEmailClick:P,handleKeyDown:N,error:h,setError:g,emailInFlight:y,setEmailInFlight:v,emailIsValid:x,handleThirdPartySignIn:b,isSSO:A,setIsSSO:R,handleDevSignIn:C,internalItems:T,envHasDevLogins:S,isMobileStyle:E,placeholder:l,showCloseButton:c,loginButtonsStyle:u})},eU=I.memo(({title:e,subtitle:t,subtitleClassname:n,centerTitle:r,children:s,actionList:a=ue,variant:i="centered-sheet",onClose:l,noPadding:c,onIsClosing:u,footerContent:d,overlayVariant:m,titleLeadingButtonProps:p,showCloseButton:h=!0,...g})=>{const[y,v]=f.useState(!1),[x,b]=f.useState(!1),_=f.useMemo(()=>B("shadow-md overflow-y-auto scrollbar-subtle fill-mode-both",{"bg-none dark:bg-none bg-backdrop/25 backdrop-blur-sm":i==="full-sheet-blurred","bg-gradient-to-t from-base from-45% to-transparent":i==="bottom-sheet-gradient","w-screen md:h-screen h-[100dvh] flex flex-col":i==="full-sheet-blurred"||i==="full-sheet","w-screen min-h-[60dvh] md:min-h-[60vh] max-h-[96dvh] md:max-h-[96vh] flex flex-col fixed bottom-0 left-0 right-0 bg-none dark:bg-none bg-backdrop/70 backdrop-blur-md":i==="bottom-sheet-blurred","flex items-center justify-end w-screen h-[100dvh] md:max-h-[96vh] flex flex-col fixed bottom-0 left-0 right-0":i==="bottom-sheet-gradient","animate-in slide-in-from-bottom ease-in":i==="bottom-sheet-blurred"&&!x,"animate-out slide-out-to-bottom ease-out":i==="bottom-sheet-blurred"&&x,"animate-in fade-in ease-in duration-300":i==="bottom-sheet-gradient"&&!x,"animate-out fade-out ease-out duration-300":i==="bottom-sheet-gradient"&&x,"bg-base":i==="full-sheet","bg-base rounded-lg md:min-w-[600px] max-w-screen-lg max-h-[100vh]":i==="centered-sheet","bg-base rounded-2xl max-w-[90dvw] max-h-[90dvh]":i==="inset-centered-sheet"}),[i,x]),w=f.useMemo(()=>B("p-md grow flex flex-col",{"justify-center":i!=="bottom-sheet-gradient","justify-end":i==="bottom-sheet-gradient","md:pt-lg":e===void 0,"md:pb-lg":a?.length===0,"px-0":c,"py-0":c}),[a?.length,c,e,i]),C=f.useMemo(()=>a.map(({text:R,onClick:O,variant:L,disabled:P,isLoading:N,testId:T,icon:j},F)=>{const U={key:F,text:R,chevron:j!==void 0,disabled:P,isLoading:N,onClick:O,testId:T,chevronIcon:j};return L?f.createElement(he,{fullWidthMobile:!0,variant:L,...U,key:U.key}):f.createElement(he,{fullWidthMobile:!0,...U,key:U.key})}),[a]),S=f.useCallback(()=>{u?.(),b(!0)},[b,u]),E=f.useCallback(()=>{b(!1),v(!1),l?.()},[b,v,l]),M=f.useCallback(()=>{b(!1),v(!1),l?.()},[v,b,l]),k=f.useMemo(()=>{switch(i){case"full-sheet-blurred":return"full-sheet";case"full-sheet":return"full-sheet";case"bottom-sheet-blurred":case"bottom-sheet-gradient":return"bottom-sheet";default:return"default"}},[i]),A=f.useMemo(()=>i==="bottom-sheet-blurred"||i==="bottom-sheet-gradient",[i]);return o.jsx(cy,{transparent:A,canOutsideClickClose:!0,childVariant:k,shouldClose:y,onIsClosing:S,onClose:E,variant:m,...g,children:o.jsx("div",{children:o.jsxs("div",{className:_,children:[o.jsx("div",{className:"right-sm top-sm fixed z-[23] md:absolute"}),o.jsxs(H,{className:B("flex h-full grow flex-col rounded-none md:w-[unset] md:grow-[unset]",i==="inset-centered-sheet"?"w-[90dvw]":"w-screen",{"border-t":i!=="bottom-sheet-gradient"}),children:[o.jsxs(H,{variant:"transparent",className:B("px-md py-sm md:py-md sticky top-0 z-[22] w-full shrink-0",{"border-b":e&&!r,"text-center":r,"h-8":!e&&h}),children:[o.jsxs("div",{className:"gap-sm md:gap-md flex items-center",children:[p&&o.jsx(Te,{extraCSS:"-ml-sm",...p,size:"small",variant:"common"}),e&&o.jsx(D,{variant:"page-title",className:B("line-clamp-1 md:line-clamp-2",{"pt-lg grow":r,"mr-lg":!r}),children:e}),!A&&i!=="full-sheet-blurred"&&h&&o.jsx(P5,{onClick:M,testId:"close-modal"})]}),t&&o.jsx(D,{variant:"base",color:"light",className:B("mt-xs line-clamp-3",n),children:t})]}),o.jsx("div",{className:w,children:s}),(C?.length>0||d)&&o.jsxs(H,{variant:"background",className:B("gap-x-sm p-sm pb-md md:pb-sm sticky bottom-0 z-10 flex items-center border-t",{"justify-end":!d},{"justify-between":d}),children:[d,C]})]})]})})})});eU.displayName="SheetModal";const yP=e=>{const t=Number(e);return isNaN(t)?(console.log(`formatNumber number failed on: ${e}`),"0"):t.toLocaleString("en-US")},lo=()=>crypto.randomUUID(),ZJt={status:"PENDING",uuid:lo()},kge=(e,t,n)=>{if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),s=Object.keys(t);return r.length==s.length&&r.every(a=>n?n(e[a],t[a]):e[a]===t[a])},tE=(e,t)=>{const n=new URL(e);return n.searchParams.delete("source"),n.searchParams.delete("s"),t&&(n.hash=t),n.searchParams.sort(),n.href};function Tge(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Sst(e,t){try{const n=new Date(e.replace(/-/g,"/")).toLocaleString(t,{weekday:"long",hour:"numeric",minute:"numeric",hour12:!0});return Tge(n)}catch(n){console.log(n)}return null}function tU(e,t,n="short"){const s=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(e.toLowerCase());if(s===-1)return"";const a=new Date,i=new Date(a.setDate(a.getDate()-a.getDay()+s)),l=Intl.DateTimeFormat(t,{weekday:n}).format(i);return Tge(l)}function Est(e){return e.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:12})}function d3(e,t,n){const r=new URL(e),s=r.searchParams;return s.set(t,n),r.search=s.toString(),r.toString()}const JJt=e=>{let t;if(typeof e=="string"){if(t=parseFloat(e),isNaN(t))throw new Error("Invalid input: not a number")}else if(typeof e=="number")t=e;else throw new Error("Invalid input: not a string or number");return t.toLocaleString("en-US")},Mst=/\[(\d{1,3})(,\s*\{ts:\d+\})?\]/g,kst=/(\n*^(("""+|'''+|```+)[A-Za-z0-9]*|#+ .*)$|^- |\*\*|\$\$|\||`|[-|]{3,})/gm;function Tst(e){return e.replace(Mst,"")}function Nst(e){return e.replace(kst,"")}function fg(e,t){const n=Tst(Nst(e)).trim();if(n.length<=t)return n;{const r=n.slice(0,t).trim(),s=r.lastIndexOf(" ");return s*2>t&&s<t-1?r.slice(0,s)+"...":r+"..."}}const Nge=I.memo(({pitchMessage:e,origin:t,isOpen:n,closeModal:r,closeCallback:s,experimentalImageDesign:a,sheetModalDesign:i,overrideRedirectUrl:l,disallowedMethods:c,loginButtonsStyle:u,renderCloseButton:d,preEnteredEmail:m,autoFocus:p=!0})=>{const{$t:h}=Z(),g=rt(),[y,v]=f.useState(""),{trackEvent:x}=Ne(),{isMobileStyle:b}=xe(),_=e?.title??h({defaultMessage:"Welcome",id:"PwaN2oE2pC"}),[w]=f.useState(!1),C=f.useCallback(()=>{r(),s?.()},[r,s]);return f.useEffect(()=>{n&&x("login modal opened",{origin:t})},[n,t,x]),f.useEffect(()=>{!g&&t&&v(d3(l??window.location.href,oc,t))},[g,t,l]),o.jsx(o.Fragment,{children:a?o.jsx(en,{isOpen:n,onClose:C,centerTitle:!!e,actionList:ue,variant:"hide-chrome",renderCloseButton:d,children:o.jsx(xrt,{title:_,handleClose:C,experimentalImageDesign:a,children:o.jsx(h1,{autoFocus:p,onClose:C,redirectUrl:y,disallowedMethods:c,loginButtonsStyle:u,showCloseButton:!1,preEnteredEmail:m})})}):o.jsx(eU,{isOpen:n,onClose:C,shouldClose:w,centerTitle:!!e,actionList:ue,variant:i,showCloseButton:d,children:o.jsxs("div",{onClick:S=>S.stopPropagation(),children:[o.jsxs("div",{className:"px-lg mx-auto max-w-sm md:max-w-lg",children:[o.jsx(D,{variant:"page-title",className:"font-editorial text-pretty text-center !font-light !leading-snug tracking-tight md:text-4xl",children:e?.title??o.jsx(pe,{defaultMessage:"Sign up below to <italic>unlock</italic> the full {br} potential of Perplexity",id:"exZDTeIaG0",values:{italic:S=>o.jsx("span",{className:"italic",children:S}),br:o.jsx("br",{})}})}),e?.subtitle&&o.jsx(D,{className:"mt-xs text-pretty text-center",children:e.subtitle}),o.jsx(D,{className:"mt-md text-pretty text-center",children:e?.description?e.description:o.jsx(pe,{defaultMessage:"By continuing, you agree to our {privacyPolicyLink}.",id:"cE5rUKm7fb",values:{privacyPolicyLink:o.jsx(Ge,{className:"underline",target:"_blank",href:"https://www.perplexity.ai/hub/legal/privacy-policy",children:o.jsx(pe,{defaultMessage:"privacy policy",id:"LIDXd2UwSl"})})}})}),o.jsx("div",{className:"mt-lg"})]}),o.jsx(h1,{autoFocus:p&&!b,onClose:C,redirectUrl:y,showInternal:!0,disallowedMethods:c,loginButtonsStyle:u,preEnteredEmail:m})]})})})});Nge.displayName="LoginModal";function jst(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vP(){return vP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vP.apply(this,arguments)}function lX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function cX(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lX(Object(n),!0).forEach(function(r){jst(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lX(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ast(e,t){if(e==null)return{};var n,r,s=function(i,l){if(i==null)return{};var c,u,d={},m=Object.keys(i);for(u=0;u<m.length;u++)c=m[u],l.indexOf(c)>=0||(d[c]=i[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function U0(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var s=[],a=!0,i=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done)&&(s.push(c.value),!r||s.length!==r);a=!0);}catch(d){i=!0,l=d}finally{try{a||u.return==null||u.return()}finally{if(i)throw l}}return s}}(e,t)||function(n,r){if(n){if(typeof n=="string")return uX(n,r);var s=Object.prototype.toString.call(n).slice(8,-1);if(s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set")return Array.from(n);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return uX(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function uX(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hv={},dX=function(e){var t=document.querySelector('script[src="'.concat(e,'"]'));if(t)return hv[e]={loading:!1,error:null,scriptEl:t}},fX=typeof window<"u"&&window.document!==void 0,mX=function(e){return e?.linkToken!==void 0},jge=function(e){var t=vP({},e),n=function(d){var m=d.src,p=d.checkForExisting,h=p!==void 0&&p,g=Ast(d,["src","checkForExisting"]),y=m?hv[m]:void 0;!y&&h&&m&&fX&&(y=dX(m));var v=U0(f.useState(y?y.loading:!!m),2),x=v[0],b=v[1],_=U0(f.useState(y?y.error:null),2),w=_[0],C=_[1],S=U0(f.useState(!1),2),E=S[0],M=S[1];return f.useEffect(function(){if(fX&&m&&!E&&!w){var k;!(y=hv[m])&&h&&(y=dX(m)),y?k=y.scriptEl:((k=document.createElement("script")).src=m,Object.keys(g).forEach(function(O){k[O]===void 0?k.setAttribute(O,g[O]):k[O]=g[O]}),y=hv[m]={loading:!0,error:null,scriptEl:k});var A=function(){y&&(y.loading=!1),b(!1),M(!0)},R=function(O){y&&(y.error=O),C(O)};return k.addEventListener("load",A),k.addEventListener("error",R),document.body.appendChild(k),function(){k.removeEventListener("load",A),k.removeEventListener("error",R),y&&y.loading&&(k.remove(),delete hv[m])}}},[m]),[x,w]}({src:"https://ah-cdn.merge.dev/initialize.js",checkForExisting:!0}),r=U0(n,2),s=r[0],a=r[1],i=U0(f.useState(!1),2),l=i[0],c=i[1],u=!(typeof window>"u")&&!!window.AgentHandlerLink&&!s&&!a&&mX(t);return f.useEffect(function(){u&&window.AgentHandlerLink&&mX(t)&&window.AgentHandlerLink.initialize(cX(cX({},t),{},{onReady:function(){return c(!0)}}))},[u,t]),{open:f.useCallback(function(){window.AgentHandlerLink&&window.AgentHandlerLink.openLink(t)},[t]),isReady:l,error:a}};function Ist({reason:e}){const t=ht(),n=q5();return vt({mutationKey:["publishArticleMutation"],mutationFn:async({connectorName:r,connectionUUID:s,deleteFiles:a})=>{let i;return s&&!a?i=await GJe({connectionUUID:s,reason:e}):s&&a?i=await qJe({connectionUUID:s,reason:e}):i=await zJe({connectorName:r,reason:e}),i},onSettled:async()=>{await t.refetchQueries({queryKey:n})},onMutate:async({connectorName:r,connectionUUID:s})=>{t.setQueryData(n,a=>{if(!a)return a;const i=a.connectors.connectors.map(l=>l.name===r&&(!s||l.connection_uuid===s)?{...l,connected:!1}:l);return{...a,connectors:{connectors:i}}})}})}const nU=()=>{const{$t:e}=Z(),t=gt(),{createCollection:n,createCollectionForThread:r}=Cy({reason:"create-new-space"}),s=f.useCallback(()=>{const i=e({defaultMessage:"New Space",id:"t5xj3BH/Ni"});n({title:i,description:"",emoji:"",instructions:"",accessLevel:T2,enableWebByDefault:!0,callback:l=>{t.push(`/spaces/${l.slug}`)}})},[n,e,t]),a=f.useCallback((i,l)=>{const c=e({defaultMessage:"New Space",id:"t5xj3BH/Ni"});r({title:c,description:"",emoji:"",instructions:"",accessLevel:T2,enableWebByDefault:!0,entryUUID:i,frontendContextUUID:l,callback:u=>{t.push(`/spaces/${u.slug}`)}})},[r,e,t]);return f.useMemo(()=>({handleCreateNewSpace:s,handleCreateNewSpaceForThread:a}),[s,a])};function rU(){const{value:e}=It({flag:"spaces-creation-redesign",subjectType:"user_nextauth_id",defaultValue:!1});return e}const Age=()=>{const{openModal:e}=xt(),{isMobileUserAgent:t}=xe(),n=JF(),r=f.useCallback(({origin:s,sheetModalVariant:a,closeCallback:i})=>{!t||n||e("installModal",{origin:s,sheetModalVariant:a,closeCallback:i})},[n,t,e]);return f.useMemo(()=>({openInstallUpsell:r}),[r])};var pX={};const ur=({enabled:e})=>{const{openModal:t}=xt(),{keysRequiringRerender:n,removeKeyRequiringRerender:r}=Wd(),{isMobileUserAgent:s}=xe(),a=rt(),{openInstallUpsell:i}=Age(),l=f.useCallback(({title:u,description:d,origin:m,image:p,imageAlt:h,closeCallback:g,loginButtonsStyle:y})=>{!e||a||pX.NEXT_PUBLIC_IS_SIDECAR_BUILD||t("loginModal",{pitchMessage:u?{title:u,description:d}:void 0,origin:m,experimentalImageDesign:{image:p,imageAlt:h},closeCallback:g,loginButtonsStyle:y})},[e,t,a]),c=f.useCallback(({title:u,description:d,origin:m,sheetModalVariant:p,closeCallback:h,overrideRedirectUrl:g,disallowedMethods:y,overrideMobileVariant:v=!1})=>{if(!e||a||pX.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;let x="full-sheet";(v||!s)&&p&&(x=p),t("loginModal",{pitchMessage:u?{title:u,description:d}:void 0,origin:m,sheetModalDesign:x,closeCallback:h,overrideRedirectUrl:g,disallowedMethods:y})},[e,s,t,a]);return f.useEffect(()=>{e&&(n.includes("visitor-gate")&&(s&&!Kh()?i({origin:Oe.VISITOR_GATE,sheetModalVariant:"inset-centered-sheet"}):c({origin:Oe.VISITOR_GATE,sheetModalVariant:"bottom-sheet-gradient"}),r("visitor-gate")),n.includes("visitor-gate-ii")&&(s&&!Kh()?i({origin:Oe.VISITOR_GATE,sheetModalVariant:"inset-centered-sheet"}):c({origin:Oe.VISITOR_GATE}),r("visitor-gate-ii")))},[e,c,n,r,s,i]),f.useMemo(()=>({openVisitorLoginUpsell:c,openVisitorLoginImageUpsell:l}),[l,c])};function Rst(e){const t=new Uint8Array(e);return Array.from(t).map(n=>n.toString(16).padStart(2,"0")).join("")}async function Pst(e){const n=new TextEncoder().encode(e);return await crypto.subtle.digest("SHA-256",n)}async function Ost(e){const t=await Pst(e);return Rst(t)}const Lst=async({reason:e})=>{try{const{data:t,error:n}=await se.POST("/rest/attribution/comet/session",e,{timeoutMs:Pe(),numRetries:1});if(n)throw n;return{success:t.success}}catch(t){return ne.error("Failed to start Comet session",t),{success:!1}}},Dst=async({eventName:e,reason:t})=>{try{const{data:n,error:r}=await se.POST("/rest/attribution/comet/event/{event_name}",t,{timeoutMs:Pe(),params:{path:{event_name:e}}});if(r)throw r;return{success:n?.success??!1}}catch(n){return ne.error("Failed to send Comet event",n),{success:!1}}},Ige=Wt("SingularAttributionContext",{sendQueryEventSingular:()=>Promise.resolve(),maybeSendNthQueryEventSingular:()=>Promise.resolve(),sendSubscribedEventSingular:()=>Promise.resolve(),sendSubscribedPayingEventSingular:()=>Promise.resolve(),sendAppDownloadClickedEventSingular:()=>Promise.resolve(),sendResurrectedActivationEventSingular:()=>Promise.resolve(),sendCometDownloadPageLoadEventSingular:()=>Promise.resolve(),sendCometDownloadPageSignInEventSingular:()=>Promise.resolve(),sendCometDownloadedEventSingular:()=>Promise.resolve(),sendCometDownloadButtonClickedEventSingular:()=>Promise.resolve(),sendCometWaitlistButtonClickedEventSingular:()=>Promise.resolve(),sendCometDownloadLinkEmailEventSingular:()=>Promise.resolve(),sendSubscribedMaxEventSingular:()=>Promise.resolve()}),hX={1:"activated",3:"true activated",5:"quality activated",10:"super activated"},gX={1:"first comet query",3:"third comet query"},Fst="ai.testing.perplexity",Ust="ai.perplexity",Rge=async(e,t)=>{if(!e)return null;const n=new Date;n.setMilliseconds(0);const r=`${e}-${n.toISOString()}-${t}`;return await Ost(r)},Bst=async({productId:e,visitorId:t,userId:n})=>{const{SingularConfig:r,singularSdk:s}=await K(async()=>{const{SingularConfig:c,singularSdk:u}=await import("./singular-sdk-CHVvA4e9.js").then(d=>d.s);return{SingularConfig:c,singularSdk:u}},[]),a=new r("perplexity_ai_039eb8fb","1e0179ca95965b57a3e91c1cf3049b64",e);n&&a.withCustomUserId(n),s.init(a);const i="initialized singular",l=await Rge(t,i);return s.event(i,{visitorId:t,eventId:l}),s},Vst=({children:e})=>{const{session:t}=Et(),n=jn(g2),{env:{isProduction:r,isStaging:s},device:{isMobile:a}}=At(),i=f.useRef([]),l=f.useRef([]),c=Nt(),[u,d]=f.useState(void 0);f.useEffect(()=>{const g=t?.user?.id,y=r||s?Ust:Fst;n&&Bst({userId:g,productId:y,visitorId:n}).then(v=>{!v||(d({sdk:v}),!g||!Xa())||BI()>1||Lst({reason:"comet attribution"})})},[r,s,t?.user?.id,n]);const m=f.useCallback(async(g,y)=>{if(!u){i.current.push({name:g,extraArguments:y});return}if(!n)return;const v=await Rge(n,g),x={...y,visitorId:n,eventId:v,isMobile:a};l.current.includes(g)||(u.sdk.event(g,x),l.current.push(g))},[u,n,a]),p=f.useCallback(async({isCometBrowser:g})=>{const y=w7(),v=BI(),x=sie();y&&hX[y]&&await m(hX[y]),v&&gX[v]&&await m(gX[v]),g&&x===1&&Dst({eventName:"activated",reason:"comet attribution"})},[m]),h=f.useCallback(async g=>{await m("user sign in",{isNewUser:g}),t?.user?.id&&u&&u.sdk.login(t.user.id)},[t?.user?.id,u,m]);return f.useEffect(()=>{u&&i.current.length>0&&(i.current.filter((y,v,x)=>v===x.findIndex(b=>b.name===y.name)).forEach(({name:y,extraArguments:v})=>{m(y,v)}),i.current=[])},[u,m]),f.useEffect(()=>{if(c?.get(oc)&&c?.get(jq)){const g=c?.get(jq)==="true";h(g),g?(m("new user sign in"),t?.user?.id&&u?.sdk.setMatchID(t.user.id)):m("existing user sign in"),Xa()&&m("comet user sign in")}},[c,h,m,t?.user?.id,u?.sdk]),o.jsx(Ige.Provider,{value:f.useMemo(()=>({sendQueryEventSingular:()=>m("query submitted"),maybeSendNthQueryEventSingular:p,sendSubscribedEventSingular:()=>m("user subscribed"),sendSubscribedPayingEventSingular:()=>m("user subscribed paying"),sendAppDownloadClickedEventSingular:g=>m("app download button clicked",{origin:g}),sendResurrectedActivationEventSingular:()=>m("resurrected activated"),sendCometDownloadPageLoadEventSingular:g=>m(`${g} page loaded`),sendCometDownloadPageSignInEventSingular:g=>m(`${g} page signed in`),sendCometDownloadedEventSingular:()=>m("download-comet comet downloaded"),sendCometDownloadButtonClickedEventSingular:g=>m(`${g} download button clicked`),sendCometWaitlistButtonClickedEventSingular:g=>m(`${g} waitlist button clicked`),sendCometDownloadLinkEmailEventSingular:g=>m(`${g} send download link`),sendSubscribedMaxEventSingular:()=>m("user subscribed max")}),[m,p]),children:e})},sU=()=>{const e=f.useContext(Ige);if(!e)throw new Error("useSingularAttribution must be used within SingularAttributionContext");return e},$st=(e,t)=>{const{fetchVariation:n}=zb({flag:"comet-download-success-message",defaultValue:e,extraAttributes:t,subjectType:"visitor_id",skip:!0});return f.useMemo(()=>({fetchVariation:n}),[n])};var Wst={};const Hst=e=>{e=e??"mac_arm64";const t={channel:"stable",platform:e};e.includes("win")&&(t.mini="1");const n=new URLSearchParams(t),r=new URL(Wst.NEXT_PUBLIC_COMET_DOWNLOAD_URL??"https://www.perplexity.ai/rest/browser/download");return r.search=n.toString(),r},Pge=async({reason:e})=>(await se.GET("/rest/browser/invites/",e,{headers:{"content-type":"application/json"},timeoutMs:Pe()})).data??null,yX=async({reason:e})=>(await se.POST("/rest/browser/invites/create",e,{timeoutMs:Ut.NONE,numRetries:1})).data,zst=async({reason:e,inviteCode:t,email:n})=>(await se.POST("/rest/browser/invites/send",e,{body:{recipient_email:n,invite_code:t},timeoutMs:Ut.MEDIUM,numRetries:1})).data,Gst=({isUnsupportedDevice:e,isWindows:t})=>{const{trackEvent:n}=Ne(),{sendCometDownloadedEventSingular:r,sendCometDownloadButtonClickedEventSingular:s}=sU(),{fetchVariation:a}=$st("control"),{deprecatedOpenToast:i}=gn(),{openModal:l}=xt(),{$t:c}=Z(),u=f.useCallback(async(h,g)=>{const y=h?"toast":await a();y==="toast"?i(c({defaultMessage:"Comet download started. Look for Comet in Downloads.",id:"cWKaRwkkE8"}),"success",5):y==="instructions-modal"&&l("cometDownloadInstructionsModal",{requestedPlatform:g})},[a,i,c,l]),d=f.useCallback(async(h,{upsellName:g,partnerCode:y,useToastForSuccess:v})=>{u(v,h),n("click download comet",{requestedPlatform:h,upsellName:g,installPartner:y}),r(),setTimeout(()=>Hi(Hst(h).href,"Comet download"),250)},[n,r,u]),m=f.useCallback(({upsellName:h,partnerCode:g,useToastForSuccess:y})=>{if(!e)return t?d("win_x64",{upsellName:h,partnerCode:g,useToastForSuccess:y}):d("mac_arm64",{upsellName:h,partnerCode:g,useToastForSuccess:y})},[d,t,e]),p=f.useCallback(({upsellName:h,partnerCode:g})=>{s("download-comet"),m({upsellName:h,partnerCode:g})},[s,m]);return{handleDownload:m,handleDownloadClick:p}},Ho=()=>{const e=rt(),{isMax:t}=_t(),{openModal:n}=xt();return f.useCallback(s=>{if(!e){ne.warn("User is not logged in, skipping paywall upsell",s);return}if(t){ne.warn("User is on Max tier, skipping paywall upsell",s);return}n("pricingModal",s)},[e,n,t])};var vX;(function(e){e.SPRING_2025="SPRING_2025",e.GIVE_1_MONTH_FREE="GIVE_1MO_GET_1MO"})(vX||(vX={}));const qst={EMAIL_ALREADY_REGISTERED:"Promo not valid for existing users",INVALID_REFERRAL_CODE:"Invalid referral code",UNKNOWN:"An unknown error occurred",EMAIL_RATE_LIMIT_EXCEEDED:"Too many emails sent to this address"},een=async({reason:e})=>{try{const{data:t,error:n}=await se.GET("/rest/academic/student-partner-config",e,{timeoutMs:Pe()});if(n)throw new Error("Failed to get student partner config");return{countryOffers:t.country_offers||{},countryNames:t.country_names||{},defaultMonths:t.default_months||1}}catch(t){return ne.error("Failed to get student partner config",t),{countryOffers:{BR:3,PH:3,MY:1,ID:1},countryNames:{BR:"Brazil",PH:"Philippines",MY:"Malaysia",ID:"Indonesia"},defaultMonths:1}}},Kst=async({email:e,reason:t})=>{try{const{data:n,error:r}=await se.GET("/rest/referrals/validate-email",t,{params:{query:{email:e}},timeoutMs:Pe()});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to validate referral email",cause:r});return{valid:n.is_valid,error:!1}}catch(n){return ne.error(n),{valid:!1,error:!0}}},ten=async({referralCode:e,reason:t})=>{try{const{data:n,error:r}=await se.GET("/rest/referrals/get-user-from-referral-code",t,{params:{query:{referral_code:e}}});if(r)throw new Error("Failed to get user from referral code");return n}catch(n){return ne.error("Failed to get user from referral code",n),{email:null,is_student:null,is_active:!1}}},nen=async({toEmail:e,referralType:t,reason:n})=>{try{const{error:r}=await se.POST("/rest/referrals/send-referral-email",n,{body:{to_email:e,referral_type:t},timeoutMs:8e4});return r?{success:!1,error:r.detail?.[0]?.msg||r.detail}:{success:!0,error:null}}catch(r){return ne.error("Failed to send referral email",r),{success:!1,error:qst.UNKNOWN}}},ren=async({headers:e,email:t,reason:n})=>{const{data:r,error:s}=await se.GET("/rest/referrals/",n,{headers:e,params:{query:{email:t}}});if(s)throw new Error("Failed to get user referral status");return r},Yst=async({verificationId:e,reason:t})=>{try{if(!e)throw new Error("Verification ID is required");const{data:n,error:r}=await se.GET("/rest/referrals/student-reward-details",t,{params:{query:{verification_id:e}},timeoutMs:Pe()});if(r)throw new Error("Failed to get student reward details");return n}catch(n){return ne.error("Failed to get student reward details",n),{months_awarded:1,reward_type:"default",organization:null,country_label:null}}},f3=({email:e,reason:t})=>{const{data:n,isLoading:r}=We({queryKey:["user_student",e,t],queryFn:()=>Kst({email:e,reason:t}),enabled:!!e});return f.useMemo(()=>({isStudent:n?.valid??null,loading:r}),[n?.valid,r])},Qst=(e,t)=>{const{value:n,loading:r}=It({flag:"maybe-student-domains-regex",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Xst=async({reason:e,headers:t})=>{try{return(await se.GET("/rest/landing-page/academic/tile-data",e,{timeoutMs:Ut.MEDIUM,headers:t})).data}catch(n){return ne.error("Failed to get academic tile data",n),null}},Zst=async({reason:e,headers:t})=>{try{return(await se.GET("/rest/landing-page/academic/primer-queries",e,{timeoutMs:Ut.MEDIUM,headers:t})).data}catch(n){return ne.error("Failed to get academic primer queries",n),null}},sen=({reason:e})=>We({queryKey:OXe(),queryFn:()=>Xst({reason:e})}),aen=({reason:e})=>We({queryKey:LXe(),queryFn:()=>Zst({reason:e})}),Jst=async({reason:e,headers:t})=>{try{return(await se.GET("/rest/academic/check-edu-institution",e,{timeoutMs:Ut.HIGH,headers:t})).data}catch(n){return ne.error("Failed to check institution",n),null}},eat=({reason:e})=>We({queryKey:DXe(),queryFn:()=>Jst({reason:e})}),Oge=({reason:e})=>{const{session:t}=Et(),n=t?.user?.email??"",{isStudent:r,loading:s}=f3({email:n,reason:e}),{variation:a,loading:i}=Qst(!1),{data:l,isLoading:c}=eat({reason:e});return f.useMemo(()=>c||i||s?{isLoading:!0,signals:{isVerifiedStudent:null,isPossibleStudentByEmail:null,isPossibleStudentByIP:null}}:{isLoading:!1,signals:{isVerifiedStudent:!!r,isPossibleStudentByEmail:!!a,isPossibleStudentByIP:!!l?.institution}},[c,i,s,a,r,l?.institution])},oen=["onboarding-pro","onboarding-mobile"],tat=({searchParams:e,cleanRedirect:t})=>{if(!e)return null;const r=e.get("redirect");let s=null;try{s=r&&new URL(r).searchParams.get(oc)}catch{return null}return s?s===Oe.GROW_COMET_STUDENTS_COUNTRY?Oe.GROW_COMET_STUDENTS_COUNTRY:s===Oe.GROW_COMET_STUDENTS?Oe.GROW_COMET_STUDENTS:null:null},nat=()=>{const e=Nt();return f.useMemo(()=>{const t=e?.get(oc),n=!!tat({searchParams:e,cleanRedirect:!1}),r=t===Oe.STUDENT_REFERRAL_LANDING_PAGE,s=t===Oe.STUDENT_LANDING_PAGE,a=t===Oe.GROW_COMET_STUDENTS_COUNTRY;return{loginSource:t,isFromStudentCometGrowth:n,isFromStudentCometGrowthCountry:a,isFromStudentReferral:r,isFromStudentLanding:s,isFromStudentFlow:n||r||s||a}},[e])},rat={currentStep:null,currentIndex:0,steps:[],handleNext:()=>null,handleComplete:()=>null,insertStep:()=>null,insertStepAndNavigate:()=>null,experimentVariationsMeta:{},setCurrentIndex:()=>null},Lge=Wt("MultiStepContext",rat),ien=({steps:e,experimentVariationsMeta:t,handleFinish:n,initialIndex:r=0,children:s})=>{const[a,i]=f.useState(r),[l,c]=f.useState(e),[u,d]=f.useState(null),[m,p]=f.useState(t),{trackEventTyped:h}=Ne();f.useEffect(()=>{c(e)},[e]),f.useEffect(()=>{p(t)},[t]),f.useEffect(()=>{l[a]!==void 0&&h("step visited",{step:l[a],experimentVariationsMeta:m})},[a,m,l,h]),f.useEffect(()=>{if(u!==null){if(i(u),d(null),l[a]===void 0||l[u]===void 0)return;h("step transition",{sourceStep:l[a],destinationStep:l[u],isFinish:!1,experimentVariationsMeta:m})}},[a,m,u,l,h]);const g=(_,w)=>{const C=[...l];C.splice(w,0,_),c(C)},y=(_,w)=>{g(_,w),d(w)},v=()=>{if(l.length)if(a===l.length-1){if(n?.(),l[a]===void 0)return;h("step transition",{sourceStep:l[a],isFinish:!0,experimentVariationsMeta:m})}else{if(i(a+1),l[a]===void 0||l[a+1]===void 0)return;h("step transition",{sourceStep:l[a],destinationStep:l[a+1],isFinish:!1,experimentVariationsMeta:m})}},x=()=>{n?.(),l[a]!==void 0&&h("step transition",{sourceStep:l[a],isFinish:!0,experimentVariationsMeta:m})},b=f.useMemo(()=>l[a],[a,l]);return o.jsx(Lge.Provider,{value:{currentStep:b,insertStep:g,insertStepAndNavigate:y,handleNext:v,handleComplete:x,currentIndex:a,steps:l,setCurrentIndex:i,experimentVariationsMeta:m},children:s})};function sat(){const e=f.useContext(Lge);if(!e)throw new Error("useMultiStep must be used within MultiStepContext");return e}const aat=(e,t)=>t.isFromStudentCometGrowthCountry?Oe.GROW_COMET_STUDENTS_COUNTRY:t.isFromStudentCometGrowth?Oe.GROW_COMET_STUDENTS:t.isFromStudentReferral?Oe.STUDENT_REFERRAL_LANDING_PAGE:t.isFromStudentLanding?Oe.STUDENT_LANDING_PAGE:e,oat=({origin:e,customCallbacks:t})=>{const{$t:n}=Z(),r=rt(),{trackEvent:s}=Ne(),{openVisitorLoginUpsell:a}=ur({enabled:!r}),{insertStepAndNavigate:i,currentIndex:l,handleComplete:c}=sat(),{openModal:u}=xt(),d=nat(),{signals:m,isLoading:p}=Oge({reason:"combined_paywall"}),h=f.useCallback(x=>{if(x){if(d.isFromStudentCometGrowth){c();return}typeof window<"u"&&window.location.pathname==="/onboarding"?(Bs.setItem("student_verification_id",x),i("onboarding-student-referrals",l+1)):setTimeout(()=>{u("studentReferrals",{verificationId:x})},150)}},[i,l,u,d,c]),g=f.useCallback(x=>{s("sheerid form redirect",{verificationLocationSource:aat(e,d),verificationRoleType:x}),u("sheerIdModal",{type:x,onSuccess:t?.onSuccess??h,onClose:t?.onClose})},[h,e,s,d,u,t]),y=f.useCallback(x=>{if(!r){a({title:n({defaultMessage:"Sign in to unlock Education Pro",id:"UNeU1Y4Zdu"}),origin:e,disallowedMethods:["apple"]});return}g(x)},[r,a,g,n,e]),v=d.isFromStudentFlow||!!m.isVerifiedStudent||!!m.isPossibleStudentByEmail||!!m.isPossibleStudentByIP;return{isLoading:!!p,isVerifiedStudent:!!m.isVerifiedStudent,handleStudentTierClick:y,handleVerificationSuccess:h,shouldDefaultToStudent:v,signals:m}},iat=(e,t)=>{const{value:n,loading:r}=Bhe({flag:"comet-mobile-classifier-timeout",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},lat=(e,t)=>{const{value:n,loading:r}=It({flag:"comet-sidecar-thread-per-tab",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},cat="npclhjbddhklpbnacpjloidibaggcgon",uat="entropy-agent-extension-main";function xX({onMessage:e,extensionId:t,name:n}){let r,s;const a=()=>{r&&clearTimeout(r),r=setTimeout(c,1e3)},i=()=>{ne.warn("Disconnected. Attempting to reconnect...",{extensionId:t}),a()},l=()=>{if(s){s.onMessage.removeListener(e),s.onDisconnect.removeListener(i),clearTimeout(r);try{s.disconnect()}catch{}s=void 0}};function c(){if(l(),typeof chrome>"u"||!chrome.runtime){Xa()&&(a(),ne.error("Comet browser is missing chrome.runtime"));return}try{s=chrome.runtime.connect(t,{name:n}),s.onMessage.addListener(e),s.onDisconnect.addListener(i)}catch(u){a(),ne.error("Failed to connect to extension",{err:u,extensionId:t})}}return Xa()&&(c(),Uc("web.frontend.comet_extension_connected",{extensionId:t,startTime:performance.timeOrigin,duration:performance.now()})),{sendMessage:u=>(!s&&Xa()&&ne.warn("Attempting to send message while main port is not connected",{extensionId:t}),dat(t,u)),sendMessageToPort:u=>{if(!Xa())return()=>{};s||ne.warn("Attempting to send message to port while main port is not connected",{extensionId:t});const d=chrome.runtime.connect(t,{name:`${n}_${crypto.randomUUID()}`});return d.postMessage(u),()=>{try{d.disconnect()}catch{}}}}}async function dat(e,t){return new Promise((n,r)=>{if(!Xa()){r(new Th("INVALID_BROWSER_ERROR"));return}if(typeof chrome>"u"||!chrome.runtime){r(new Th("MISSING_RUNTIME_ERROR"));return}chrome.runtime.sendMessage(e,t,s=>{if(chrome.runtime.lastError){r(new Th("RUNTIME_LAST_ERROR",{message:chrome.runtime.lastError.message,cause:chrome.runtime.lastError,details:{extensionId:e}}));return}n(s)})})}function fat(){const e="node";try{return{html:t(document.documentElement).innerHTML.trim(),url:window.location.href}}catch(h){return{html:"",url:window.location.href,error:h instanceof Error?h.message:"Unknown error while getting HTML"}}function t(h=document.body){const g=[h],y=n(h);if(!y)return console.error("Failed to process DOM. Fallback to original DOM"),h;const v=[y];for(;g.length>0;){const x=g.pop(),b=v.pop();if(!x||!b)break;x.childNodes.forEach(_=>{const w=n(_);w!==null&&(b.appendChild(w),v.push(w),g.push(_))})}return y}function n(h){if(!c(h))return null;const g=h.cloneNode();if(d(h)){if(l(h)){if(!h.hasAttribute(e)){const y=s();h.setAttribute(e,y),g.setAttribute(e,y)}r(h,g)}return a(g)}return g}function r(h,g){const y=["value"],v=["checked","disabled","hidden","readonly","required","selected"];for(const x of y)typeof h[x]<"u"&&g.setAttribute(x,h[x]);for(const x of v)typeof h[x]<"u"&&(h[x]?g.setAttribute(x,""):g.removeAttribute(x))}function s(){return globalThis.__idCounter||(globalThis.__idCounter=0),`${globalThis.__idCounter++}`}function a(h){const g=h.getAttributeNames();for(const y of g){if(y=="href"){const v=h.getAttribute(y)||"";v.startsWith("http:")||v.startsWith("https:")||h.removeAttribute(y);continue}if(y==="name"&&h.getAttribute(y).length>128){h.removeAttribute(y);continue}i(y)||h.removeAttribute(y)}return h}function i(h){return["alt","aria-checked","aria-description","aria-disabled","aria-expanded","aria-hidden","aria-label","aria-readonly","aria-required","aria-role","aria-selected","checked","content","default","disabled","name","placeholder","readonly","required","role","selected","title","type","value",e].includes(h)}function l(h){const g=["A","BUTTON","DETAILS","EMBED","INPUT","MENU","MENUITEM","OBJECT","SELECT","TEXTAREA","SUMMARY"],y=["button","menu","menuitem","link","checkbox","radio","slider","tab","tabpanel","textbox","combobox","grid","listbox","option","progressbar","scrollbar","searchbox","switch","tree","treeitem","spinbutton","tooltip"],v=["menu","menuitem","button"],x=["onclick","tabindex","autofocus"],b=h.tagName,_=h.getAttribute("role"),w=h.getAttribute("aria-role");return g.includes(b)||x.some(C=>h.hasAttribute(C))||_&&y.includes(_)||w&&v.includes(w)}function c(h){return d(h)?m(h)?!0:!p(h):u(h)}function u(h){return h.nodeType===Node.TEXT_NODE&&!!h.textContent?.trim()}function d(h){return h.nodeType===Node.ELEMENT_NODE}function m(h){const g=["HEAD","TITLE"],y=["description"];return g.includes(h.tagName)||h.tagName==="META"&&y.some(v=>h.getAttribute("name")===v)}function p(h){return h.hidden||h.getAttribute("aria-hidden")==="true"?!0:!(h.checkVisibility({contentVisibilityAuto:!0,opacityProperty:!0,visibilityProperty:!0})||h.computedStyleMap().get("display").value==="contents")}}function bX({selector:e,value:t,submit:n}){const r=document.querySelector(e);if(!r)return{success:!1,reason:"not found"};if(r.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),r instanceof HTMLElement&&r.focus(),r.tagName==="INPUT"||r.tagName==="TEXTAREA")r.value=t;else if(r instanceof HTMLElement&&r.isContentEditable)r.innerText=t;else return{success:!1,reason:"not editable"};if(r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0})),n){let s=null;"closest"in r&&(s=r.closest("form")),!s&&(r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement)&&(s=r.form),s?.requestSubmit?.()??s?.submit?.()}return{success:!0}}function mat({selector:e}){const t=document.querySelector(e);return t instanceof HTMLElement&&t.offsetParent!==null?(t.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),t.click(),{success:!0,outerHTML:t.outerHTML,text:t.innerText,tag:t.tagName}):{success:!1,reason:t?"invisible":"not found"}}function pat({scrollDirection:e}){const t=window.innerHeight,n=Math.round(t*4);return window.scrollBy({top:e===PR.DOWN?n:-n,left:0,behavior:"smooth"}),{scrolledBy:e===PR.DOWN?n:-n,scrollTop:window.scrollY}}function hat({url:e}){window.location.href=e}const gat=async(e,t)=>new vat(e,t).start();class yat{bridge;constructor(t){this.bridge=t}async GetPageState(t){const n=t.tab_id,r=await this.bridge.tabs_get({id:n}),{result:s}=await this.bridge.agent_execute_js({id:n,js:`(${fat.toString()})()`});return console.log("[agent] GetPageState content:",{result:s}),ne.log("[agent] GetPageState content:",{result:s}),{page_state:{html:s.html,title:r.tab?.title??"",url:r.tab?.url??"",screenshot:void 0}}}async RunActions(t){console.log("[agent] RunActions request:",t),ne.log("[agent] RunActions request:",t);for(const n of t.actions){const r=t.tab_id;if(n.type===yp.CLICK){const s=await this.executeJs(r,mat,{selector:n.selector??""});console.log("[agent] Click action result:",s),ne.log("[agent] Click action result:",s)}else n.type===yp.WAIT?await new Promise(s=>setTimeout(s,n.duration||1e3)):n.type===yp.SCROLL_PAGE?await this.executeJs(r,pat,{scrollDirection:n.scroll_direction??PR.DOWN}):n.type===yp.NAVIGATE?await this.executeJs(r,hat,{url:n.value??""}):n.type===yp.FILL?await this.executeJs(r,bX,{selector:n.selector??"",value:n.value??"",submit:!1}):n.type===yp.SEARCH?await this.executeJs(r,bX,{selector:n.selector??"",value:n.value??"",submit:!0}):(console.warn("[agent] Unknown action type:",n.type),ne.warn("[agent] Unknown action type:",n.type));await this.bridge.agent_wait_idle({id:r}),await new Promise(s=>setTimeout(s,500))}return this.GetPageState({tab_id:t.tab_id,capture_screenshot:t.capture_screenshot})}async ShowMessage(t){return console.log("[agent] ShowMessage request:",t),ne.log("[agent] ShowMessage request:",t),{}}async ReportTaskProgress(t){return console.log("[agent] ReportTaskProgress request:",t),ne.log("[agent] ReportTaskProgress request:",t),{}}async ReportTaskComplete(t){return console.log("[agent] ReportTaskComplete request:",t),ne.log("[agent] ReportTaskComplete request:",t),{}}async executeJs(t,n,...r){return(await this.bridge.agent_execute_js({id:t,js:`(${n.toString()})(${r.map(a=>JSON.stringify(a)).join(",")})`})).result}}class vat{payload;bridge;browserService;socket;constructor(t,n){this.payload=t,this.bridge=n,this.browserService=new yat(n)}async start(){ne.log("[agent] Starting agent task:",this.payload),console.log("[agent] Starting agent task:",this.payload);const t=performance.now();let n=()=>{},r=()=>{};const s=new Promise((c,u)=>{n=c,r=u}),a=this.payload.base_url+"/agent";this.socket=new WebSocket(a),this.socket.onopen=n,this.socket.onerror=r,this.socket.onmessage=this.handleRpcMessage.bind(this),await s;const{tab:i}=await this.bridge.tabs_create({url:this.payload.start_url,hidden:!1,agent:!0});await this.bridge.agent_wait_idle({id:i.id});const l=await this.browserService.GetPageState({tab_id:i.id,capture_screenshot:!1});return this.socket.send(JSON.stringify({start_agent:{page_state:l.page_state,tab_id:i.id,task:this.payload.task,task_uuid:this.payload.uuid,extra_headers:this.payload.extra_headers,extension_version:"0.0.1",vision:this.payload.vision,url:this.payload.start_url,client_start_time_ms:Math.round(performance.now()-t),attachments:this.payload.attachments,supported_features:[]}})),()=>{this.socket?.close(),this.bridge.tabs_close({id:i.id})}}async handleRpcMessage(t){const n=JSON.parse(t.data),r=n.request_id,s=a=>{this.socket?.readyState===WebSocket.OPEN?this.socket.send(JSON.stringify({rpc_response:a})):(console.warn("[agent] Socket is not open, cannot send response:",a),ne.warn("[agent] Socket is not open, cannot send response:",a))};try{if(!n.method||!(n.method in this.browserService))throw ne.error("[agent] Unknown method:",n.method),console.error("[agent] Unknown method:",n.method),new Error(`Unknown method: ${n.method}`);const a=n.request?JSON.parse(n.request):void 0,i=n.method,l=await this.browserService[i]({...a});s({request_id:r,response:JSON.stringify(l)})}catch(a){const i=JSON.stringify({status:"error",error:`${a}`});s({request_id:r,response:i}),ne.error("[agent] Error handling RPC message:",a,n),console.error("[agent] Error handling RPC message:",a,n)}}}class xat{requests=new Map;bridge;constructor(){this.bridge=new Proxy({},{get:(t,n)=>r=>{const s=crypto.randomUUID(),a={request_id:s,[n]:r??{}};return new Promise((i,l)=>{this.requests.set(s,c=>{"error"in c?l(new Error(String(c.error))):i(c)}),window.cometBridge?.postMessage(JSON.stringify(a))})}}),this.startListenMessages()}startListenMessages(){window.cometBridge&&(window.cometBridge.onmessage=t=>{const n=t.data;if(n)try{const r=JSON.parse(n),s=this.requests.get(r.request_id);s?(this.requests.delete(r.request_id),s(r)):(console.warn("No callback found for requestId",r.request_id,r),ne.warn("No callback found for requestId",r.request_id,r))}catch(r){console.warn("Failed to parse bridge response",n,r),ne.warn("Failed to parse bridge response",n,r)}})}}class _X{bridge;constructor(){this.bridge=new Proxy({},{get:(t,n)=>async r=>{const a={request_id:crypto.randomUUID(),[n]:r??{}},i=await window.webkit?.messageHandlers?.cometBridge?.postMessage(JSON.stringify(a));if(!i)throw new Error("No response from cometBridge");return JSON.parse(i)}})}}const gv="mcp_tools_settings_v1";function bat(){return pi((e,t)=>({platformInfo:void 0,sidecarSourceTab:{url:"/",title:"",tabId:-1,secondaryTab:null},screenshotToolEnabled:!0,sidecarUrlById:new Map,tasksState:{},navigationResults:{},classifierResults:{},omniboxInput:{},navigationMeta:{},taskScreenshots:{},userSelection:void 0,mcpStdioServers:void 0,mcpTools:void 0,mcpDisabledServers:void 0,installedDxts:void 0,taskTabs:void 0,mcpToolsSettings:void 0,pendingTasks:new Map,actions:{setPlatformInfo:n=>{e({platformInfo:n})},setSidecarUrlById:(n,r,s)=>{const a=t().sidecarUrlById;a.set(n,{url:r,updatedAt:s??Date.now()}),e({sidecarUrlById:a})},deleteSidecarUrlById:n=>{const r=t().sidecarUrlById;r.delete(n),e({sidecarUrlById:r})},setSourceTab:n=>{let r=!0;try{const s=new URL(n.url);r=!((s.protocol==="chrome:"||s.protocol==="comet:")&&s.hostname!=="newtab")}catch{}e({sidecarSourceTab:n,screenshotToolEnabled:r})},setLastOmniboxInput:(n,r)=>{e(s=>({omniboxInput:{...s.omniboxInput,[n]:r}}))},addNavigationResults:(n,{results:r,classifierResult:s,...a})=>{r?.length&&e(i=>{const l={navigationResults:{...i.navigationResults,[n]:r}};return s&&(l.classifierResults={...i.classifierResults,[n]:s}),a&&!i.navigationMeta[n]&&(l.navigationMeta={...i.navigationMeta,[n]:a}),l})},setTaskScreenshot:(n,r)=>{e(s=>({taskScreenshots:{...s.taskScreenshots,[n]:r}}))},setTaskState:(n,r)=>{e(s=>{const a={...s.tasksState};return r===void 0?delete a[n]:a[n]={is_paused:r},{tasksState:a}})},setUserSelection:n=>{e({userSelection:n})},clearUserSelection:()=>{e({userSelection:void 0})},setMcpStdioServers:n=>{e({mcpStdioServers:n})},setMcpTools:(n,r)=>{e(s=>({mcpTools:{...s.mcpTools,[n]:r}}))},removeMcpTools:n=>{e(r=>{const s={...r.mcpTools};return delete s[n],{mcpTools:s}})},setMcpDisabledServers:n=>{e({mcpDisabledServers:n}),Re.setItem("mcp_disabled_servers_v1",JSON.stringify(Array.from(n)))},setMcpToolsSettings:n=>{e({mcpToolsSettings:n}),Re.setItem(gv,JSON.stringify(n))},setMcpToolEnabled:(n,r,s)=>{e(a=>{const i=a.mcpToolsSettings||{},l={...i[n]||{}},c=l[r]??{enabled:!0,executePermissions:"always-ask"},u={...l,[r]:{...c,enabled:s}},d={...i,[n]:u};return Re.setItem(gv,JSON.stringify(d)),{mcpToolsSettings:d}})},setMcpToolExecutePermissions:(n,r,s)=>{e(a=>{const i=a.mcpToolsSettings||{},l={...i[n]||{}},c=l[r]??{enabled:!0,executePermissions:"always-ask"},u={...l,[r]:{...c,executePermissions:s}},d={...i,[n]:u};return Re.setItem(gv,JSON.stringify(d)),{mcpToolsSettings:d}})},renameMcpServerInToolsSettings:(n,r)=>{e(s=>{const a=s.mcpToolsSettings||{};if(!a[n]||n===r)return s;const i={...a},l=a[n];return i[r]={...l},delete i[n],Re.setItem(gv,JSON.stringify(i)),{mcpToolsSettings:i}})},setInstalledDxts:n=>{e({installedDxts:n})},setTaskTabs:n=>{e({taskTabs:n})},setPendingTask:(n,r)=>{e(s=>{const a=new Map(s.pendingTasks);return a.set(n,r),{pendingTasks:a}})},deletePendingTask:n=>{e(r=>{const s=new Map(r.pendingTasks);return s.delete(n),{pendingTasks:s}})},getPendingTask:n=>t().pendingTasks.get(n)}}))}const _at="mcjlamohcooanphmebaiigheeeoplihb",wat="streamId",Cat=Object.freeze([]);class Sat{tools;mobileProxy=new _X;isTestDebugMode=!1;platform="web";store=bat();mainExtension;agentExtension;taskTeardowns=new Map;emitter=vme();pendingServerRename;classifierApiTimeoutMs=LF;constructor(){const t=Wo();t?.android_version&&(this.platform="android"),t?.ios_version&&(this.platform="ios"),this.mainExtension=xX({onMessage:this.handleMessage,extensionId:_at,name:"entropy_client_context"}),this.agentExtension=xX({onMessage:this.handleAgentExtensionMessage,extensionId:cat,name:uat}),this.tools=Eat(this.agentExtension),this.platform==="web"?this.mainExtension.sendMessage({type:"INIT"}).then(n=>{n&&(this.isTestDebugMode=!!n.isTestDebugMode)},n=>{if(Xa())throw n}):this.mobileProxy=this.platform==="android"?new xat:new _X,Vtt()}getStore(){return this.store}setClassifierApiTimeoutMs(t){this.classifierApiTimeoutMs=t}async openNewTab(t){const n=new URL(t);n.searchParams.delete("erp"),n.pathname=n.pathname.replace("/sidecar",""),await this.openTab({url:n.toString(),request_id:"openNewTab",key:"openNewTab"})}_getNavigationResults(t){return this.store.getState().navigationResults[t]??Cat}async closeSideCar(){return this.send({type:"HIDE_SIDECAR"})}async openTab(t){if(this.platform!=="web"){const s=(await this.mobileProxy?.bridge.tabs_create({url:t.url,hidden:!1})).tab;return{is_success:!0,_metadata:{time:1},result:{tab_id:s.id,url:s.url,title:s.title,last_accessed:s.last_accessed}}}return{is_success:!0,result:(await this.tools.OpenTab({key:t.key??"unknown",request_id:t.request_id??"unknown",url:t.url,tab_id:t.tabId})).tab}}async fetchMobileSearchResults(t,n){const[r,s]=await Promise.all([this.mobileProxy.bridge.fetch_navigation_search_results({query:t,stream_id:n}),Htt(t,this.classifierApiTimeoutMs).catch(a=>(ne.error("Classifier API call failed, using defaults",{error:a,query:t,streamId:n}),Wtt))]);return{...r.nav_search_response,classifierResult:s}}async fetchNavigationResults(t,n){if(this.platform==="web"){const r=await this.send({type:"NAV_SEARCH",payload:{query:t,streamId:n}});if(!r.is_success)throw new Error("Failed to inject search results");return r}else return{...await this.fetchMobileSearchResults(t,n),_metadata:void 0}}async injectSearchResults(t,n,r={}){try{const s=jl(),a={streamId:n,...r};ui("web.frontend.comet_navigation_run_inject",a);const i=await this.fetchNavigationResults(t,n);if(this.store.getState().actions.addNavigationResults(n,i),this.platform!=="web"&&i.results?.length){const m=this.store.getState();Ihe({clientPayloadCacheKey:`nav-${n}`,cometBrowser:this,reason:"mobile_search_injection",navigationResults:i.results,maxChars:5e4,includeSidecar:!1,attachedTabs:[],cometState:m}).catch(p=>{ne.error("Failed to save mobile navigation results",{streamId:n,error:p})})}const c={type:i.type??"unknown",...a};s.addTiming("web.frontend.comet_navigation_search_results",c);const u=s.getAbsoluteStartTime(),d={...c,startTime:u};i.searchTime&&Uc("web.frontend.comet_navigation_search_time",{duration:i.searchTime,...d}),i.classifyTime&&Uc("web.frontend.comet_navigation_classify_time",{duration:i.classifyTime,...d}),i.networkingTime&&Uc("web.frontend.comet_navigation_networking_time",{duration:i.networkingTime,...d}),this.platform==="web"&&i._metadata?.time&&Uc("web.frontend.comet_navigation_extension_processing",{duration:i._metadata.time,...d})}catch(s){ne.error(new Th("NAV_RESULTS_INJECTION_FAILED",{details:{streamId:n},cause:s}))}}async getIsCometDefaultBrowser(t){try{const n=await this.send({type:"GET_IS_DEFAULT_BROWSER",key:t});return n.is_success?n.isDefault:null}catch{return null}}async setCometAsDefaultBrowser(t){return this.send({type:"SET_AS_DEFAULT_BROWSER",key:t})}async getDidSkipCookieImportOnboarding(t){const r=(await this.send({type:"GET_ONBOARDING_IMPORT_STATUS",key:t})).importStatus==="NOT_IMPORTED";return ne.info("[getDidSkipCookieImportOnboarding]",r),r}subscribeCometNavigate(t){const n=r=>{const s=new URL(r.detail.url);if(delete window.pplxNavIntentEvent,this.store.getState().actions.clearUserSelection(),ui("comet_navigate"),s.pathname==="/search"&&s.searchParams.has("q")&&(s.pathname="/search/new"),s.pathname==="/search/new"){const a=crypto.randomUUID(),i=r.detail.text||"",l=s.searchParams.get("q")??"";s.searchParams.set(wat,a),this.injectSearchResults(l,a,{omnisearch:!0}),this.store.getState().actions.setLastOmniboxInput(a,i)}t({url:s})};return window.pplxNavIntentEvent&&n(window.pplxNavIntentEvent),document.addEventListener("comet-navigate",n),()=>{document.removeEventListener("comet-navigate",n)}}subscribeToCometQuery(t){const n=r=>{const s=r.detail.query;delete window.pplxCometQuery,t(s,{source:r.detail.source})};return window.pplxCometQuery&&n(window.pplxCometQuery),document.addEventListener("comet-query",n),()=>{document.removeEventListener("comet-query",n)}}getLastOmniboxInput(t){return this.store.getState().omniboxInput[t]}async searchTabs(t){if(this.platform!=="web"){const{tabs:r}=await this.mobileProxy.bridge.tabs_query();return{is_success:!0,tabs:r.map(s=>({tabId:s.id,title:s.title??"",url:s.url,isCurrent:!1,lastAccess:s.last_accessed??0,snippet:""})),_metadata:{time:1}}}return{is_success:!0,tabs:(await this.tools.SearchBrowser({queries:[],sources:["OPEN_TABS"],key:t,history_max_results:0,open_tabs_max_results:500,closed_tabs_max_results:0,request_id:t})).open_tabs_results.map(r=>({...r,tabId:r.tab_id,lastAccess:r.last_accessed}))}}async ungroupTabs(t,n,r){return{is_success:!0,tabIds:(await this.tools.UngroupTabs({group_ids:t.groupIds,tab_ids:t.tabIds,key:n,request_id:r})).ungrouped_tabs.map(a=>({id:a.tab_id,error:a.error})),groupIds:t.groupIds.map(a=>({id:a}))}}showNotification(){this.send({type:"SHOW_NOTIFICATION"}).catch(()=>{})}sendThreadStatusToMobile(t){const{status:n,streamId:r,text:s}=t;this.mobileProxy.bridge.thread_status({type:n,text:s,stream_id:r}).catch(a=>{ne.error("Failed to send thread status to mobile bridge",a)})}sendVoiceStatusToMobile(t){const{status:n,text:r}=t;this.mobileProxy.bridge.voice_status({type:n,text:r}).catch(s=>{ne.error("Failed to send voice status to mobile bridge",s)})}subscribeToMobileCommands(t){const n=r=>{t?t(r.detail):r.detail.cmd==="stop"&&r.detail.subject==="thread"?this.emitter.emit("BROWSER_TASK_STOP"):ne.warn("[comet-mobile] Unknown mobile command",r.detail.cmd)};return document.addEventListener("comet-mobile-cmd",n),()=>{document.removeEventListener("comet-mobile-cmd",n)}}setTabProgress(t){this.send({type:"SET_TAB_PROGRESS",payload:t}).catch(()=>{})}async searchTabGroups(t,n,r){return{is_success:!0,results:(await this.tools.SearchTabGroups({queries:t.queries,request_id:r,key:n})).tab_groups.map(a=>({...a,color:a.color,tabs:a.tabs.map(i=>({...i,tabId:i.tab_id,isCurrent:i.is_current_tab??!1}))}))}}showFeedbackForm(){this.send({type:"SHOW_FEEDBACK_FORM"}).catch(()=>{})}subscribeScreenshotCaptured(t){return this.emitter.on("SCREENSHOT_CAPTURED",t)}handleAgentExtensionMessage=t=>{try{Br(t).with({type:"SCREENSHOT_CAPTURED"},async({payload:{screenshot:n}})=>{const s=await(await fetch(n)).blob(),a=new File([s],"screenshot.png",{type:s.type});ne.info("Screenshot captured"),this.emitter.emit("SCREENSHOT_CAPTURED",a)}).with({type:"BROWSER_TASK_PROGRESS_SCREENSHOT"},async({payload:{screenshot:n,taskUuid:r}})=>{this.store.getState().actions.setTaskScreenshot(r,`data:image/png;base64,${n}`)}).with({type:"BROWSER_TASK_PROGRESS"},({payload:{taskUuid:n,progress:r}})=>{const s=this.store.getState().actions.getPendingTask(n);s?.onProgress&&s.onProgress(r),this.emitter.emit("BROWSER_TASK_PROGRESS",n,r)}).with({type:"BROWSER_TASK_COMPLETE"},({payload:{taskUuid:n,result:r}})=>{const s=this.store.getState().actions.getPendingTask(n);s&&(this.store.getState().actions.deletePendingTask(n),s.resolve(r)),this.emitter.emit("BROWSER_TASK_COMPLETE",n,r)}).with({type:"BROWSER_TASK_STOP"},({payload:n})=>{ne.info("Browser task stopped"),this.emitter.emit("BROWSER_TASK_STOP",n.entryId)}).with({type:"BROWSER_TASK_PAUSE_RESUME_FRONTEND"},({payload:n})=>{ne.info("Browser task paused/resumed"),this.store.getState().actions.setTaskState(n.task_uuid,n.is_paused)}).with({type:"AGENT_TASK_FAILURE"},({payload:{taskUuid:n,extraHeaders:r,error:s}})=>{const a=this.store.getState().actions.getPendingTask(n);a&&(this.store.getState().actions.deletePendingTask(n),a.reject(new Error(s))),dP({clientPayloadCacheKey:n,errorType:s,errorMsg:"Agent task failure."},r,"CometAdapter").catch(i=>{ne.error("Error sending tool failure",i)})}).with({type:"USER_SELECTION_CAPTURED"},({payload:{selection:n}})=>{this.store.getState().actions.setUserSelection(n)}).with({type:"MOVE_THREAD_TO_SIDECAR"},({payload:{url:n,task_tab_ids:r}})=>{const s=new URL(n);s.pathname="/sidecar"+s.pathname;const a=s.toString();r.forEach(i=>{this.store.getState().actions.setSidecarUrlById(ug(i,void 0),s.pathname)}),document.dispatchEvent(new CustomEvent("comet-navigate",{detail:{url:a,text:""}}))}).with({type:"GET_TASK_TABS"},({payload:{tabs:n}})=>{this.store.getState().actions.setTaskTabs(n)}).with({type:"MCP_STDIO_SERVER_CHANGED"},({payload:{serverName:n,changes:r,server:s}})=>{this.handleMcpStdioServerChanged(n,r,s)}).otherwise(n=>{ne.log("Unknown message type",n)})}catch(n){ne.error("Error parsing entropy message",n)}};async fetchOpenedTabs(){const t=await this.searchTabs("fetch_opened_tabs");return t.is_success?t.tabs.filter(n=>(n.url.startsWith("https://")||n.url.startsWith("file://"))&&!n.isCurrent).sort((n,r)=>r.lastAccess-n.lastAccess):[]}async getPersonalSuggestions(t,n){return this.send({type:"GET_PERSONAL_SUGGESTIONS",payload:t,key:n})}async getTopMostVisitedUrls(t,n){return this.send({type:"GET_TOP_MOST_VISITED_URLS",payload:t,key:n})}getQuickActions(t){return this.send({type:"GET_QUICK_ACTIONS",key:t})}async getInitialHistorySummary(t,n,r){return this.SearchBrowser({queries:[],sources:["HISTORY"],key:"initial-history-summary",request_id:t,start_time:n*24*60*60*1e3,history_max_results:r,open_tabs_max_results:r,closed_tabs_max_results:r})}async getHistorySummary(t,n=[],r=14,s=20){return this.SearchBrowser({queries:n,sources:["HISTORY"],key:t,request_id:"",start_time:r*24*60*60*1e3,history_max_results:s,open_tabs_max_results:s,closed_tabs_max_results:s})}async GetContent(t){return this.platform!=="web"?{contents:(await Promise.allSettled(t.pages.map(async r=>r.id?(await this.mobileProxy.bridge.tabs_get_content({id:r.id})).tab_content:(await this.mobileProxy.bridge.tabs_get_url_content({url:r.url})).tab_content))).map(r=>r.status==="fulfilled"?r.value:void 0).filter(r=>r!==void 0).map(r=>({html:"",id:r.id,url:r.url,title:r.title??"",og_meta:r.og_meta??{},markdown:r.markdown??""}))}:this.tools.GetContent(t)}async GetVisibleTabScreenshot(t){return this.tools.GetVisibleTabScreenshot(t)}async SearchBrowser(t){if(this.platform!=="web"){const n=t.sources.includes("HISTORY")?Promise.allSettled((t.queries.length?t.queries:[""]).map(async i=>await this.mobileProxy.bridge.history_search({text:i,max_results:t.history_max_results,start_time:t.start_time,end_time:t.end_time}))):[],[{tabs:r},s]=await Promise.all([t.sources.includes("OPEN_TABS")?this.mobileProxy.bridge.tabs_query():{tabs:[]},n]),a=s.map(i=>i.status==="fulfilled"?i.value.history_items:[]).flat().map(i=>({title:i.title??"",url:i.url,last_accessed:i.last_visit_time??Date.now(),visit_count:i.visit_count??1}));return{closed_tabs_results:[],history_results:a,open_tabs_results:r.map(i=>({tab_id:i.id,title:i.title??"",url:i.url,last_accessed:i.last_accessed??0}))}}return this.tools.SearchBrowser(t)}async GetSidecarContext(t){return this.tools.GetSidecarContext(t)}async closeTabs(t,n,r){if(this.platform!=="web"){const{tabs:a}=await this.mobileProxy.bridge.tabs_query(),i=t.tabIds??[],l=a.filter(c=>i.includes(c.id));return l.forEach(c=>{this.mobileProxy.bridge.tabs_close({id:c.id})}),{is_success:!0,result:l.map(c=>({id:c.id,url:c.url,title:c.title??""}))}}return{is_success:!0,result:(await this.tools.CloseTabs({tab_ids:t.tabIds??[],key:n,request_id:r})).tabs.map(a=>({id:a.tab_id,...a}))}}async groupTabs(t,n,r){const s=await this.tools.GroupTabs({...t,tab_ids:t.tabIds,group_id:t.groupId,key:n,request_id:r});if(!s.tab_group)throw new Error("[GroupTabs] Tab group not found");return{is_success:!0,tabGroup:{id:s.tab_group.id,title:s.tab_group.title,collapsed:s.tab_group.collapsed??!1,color:s.tab_group.color}}}async maybeSendSearchResult(t,n,r){if(!this.isTestDebugMode||!t)return;const a=[...t.web_results??[],...t.extra_web_results??[]].map(i=>({name:i.name,snippet:i.snippet,url:i.url,isClientContext:!!i.is_client_context}));return this.send({type:"PERPLEXITY_SEARCH_RESULT",payload:{answer:t.answer,webResults:a,isPending:r,steps:n.map(i=>i.step_type)}})}submitTask(t,n){return new Promise((r,s)=>{const a=t.entryId,i=t.uuid;this.store.getState().actions.setPendingTask(i,{entryId:t.entryId,uuid:t.uuid,resolve:r,reject:s,onProgress:n});const l=this.taskTeardowns.get(a)??[];if(this.taskTeardowns.set(a,l),this.platform!=="web"){const c=gat(t,this.mobileProxy.bridge);l.push(()=>c.then(u=>{u(),this.store.getState().actions.setTaskState(t.uuid,void 0)})),r({message:"Mobile task started",success:!0});return}this.agentExtension.sendMessage(t).then(()=>{l.push(c=>{this.agentExtension.sendMessage({type:"CLEANUP_AGENT_TASKS",payload:{entryId:t.entryId,reason:c}})})}).catch(c=>{let u={};try{u=JSON.parse(t.extra_headers)}catch{}ne.error("[comet] Unhandled error while submitting task",c),dP({clientPayloadCacheKey:i,errorType:c,errorMsg:"Agent task start failure."},u,"CometAdapter").catch(d=>{ne.error("Error sending tool failure",d)})})})}async moveThreadToSidecar({activeTaskUuid:t,entryId:n,isMissionControl:r,reason:s}){try{return(await this.agentExtension.sendMessage({type:"MOVE_THREAD_TO_SIDECAR",payload:{active_task_uuid:t,is_mission_control:r,entry_id:n}})).success}catch(a){return ne.error(new Th("MOVE_THREAD_TO_SIDECAR_FAILED",{cause:a,message:`Failed to move thread to sidecar for ${s}`})),!1}}getTaskTabs(){this.agentExtension.sendMessage({type:"GET_TASK_TABS"})}async sendMissionControlStatus(t){await this.agentExtension.sendMessage({type:"MISSION_CONTROL_STATUS",payload:t})}async makeTaskVisible(t){const n=await this.agentExtension.sendMessage({type:"MAKE_TASK_VISIBLE",payload:{task_uuid:t}});if(n.tab_ids){const r=new URL(window.location.href).pathname;n.tab_ids.forEach(s=>{this.store.getState().actions.setSidecarUrlById(ug(s,void 0),r)})}}cleanupTasks(t,n){if(!t)return;const r=this.taskTeardowns.get(t);r&&(r.forEach(s=>s(n)),this.taskTeardowns.delete(t))}captureSourceTabScreenshotV2({sourceTabUrl:t=""}){this.agentExtension.sendMessage({type:"CAPTURE_SCREENSHOT_V2",payload:{tabId:void 0,sourceTabUrl:t}})}deactivateScreenshotTool(){this.agentExtension.sendMessage({type:"DEACTIVATE_SCREENSHOT_TOOL",payload:{tabId:void 0}})}subscribeToSidecarBrowserTaskStop(t){return this.emitter.on("BROWSER_TASK_STOP",t)}subscribeForceSubmitQuery(t){return this.emitter.on("FORCE_SUBMIT_QUERY",t)}subscribeQuickActionButtonFired(t){return this.emitter.on("QUICK_ACTION_BUTTON_FIRED",t)}getMcpTools(t){return this.sendToAgent({type:"GET_MCP_TOOLS",payload:{serverName:t}})}callMcpTool(t,n){return this.sendToAgent({type:"CALL_MCP_TOOL",payload:t,context:n})}getMcpStdioServers(){const t=this.sendToAgent({type:"GET_STDIO_MCP_SERVERS",payload:void 0});return t.then(n=>{this.getStore().getState().actions.setMcpStdioServers(n)}).catch(()=>{}),t}addMcpStdioServer(t){return this.sendToAgent({type:"ADD_STDIO_MCP_SERVER",payload:t})}async updateMcpStdioServer(t,n){return n.name&&n.name!==t?this.pendingServerRename={oldName:t,newName:n.name}:this.pendingServerRename=void 0,await this.removeMcpStdioServer(t,!0),this.addMcpStdioServer(n)}async removeMcpStdioServer(t,n){await this.sendToAgent({type:"REMOVE_STDIO_MCP_SERVER",payload:{name:t}}),this.clearStateAfterRemovingMcpServer(t,n)}installDxt(t){return this.sendToAgent({type:"INSTALL_DXT",payload:{url:t}})}async uninstallDxt(t){await this.sendToAgent({type:"UNINSTALL_DXT",payload:{name:t}}),this.clearStateAfterRemovingMcpServer(t)}getInstalledDxts(){const t=this.sendToAgent({type:"GET_INSTALLED_DXT"});return t.then(n=>{this.getStore().getState().actions.setInstalledDxts(n)}).catch(()=>{}),t}async refreshDxtAndMcpState(){await Promise.all([this.getMcpStdioServers(),this.getInstalledDxts()])}handleMcpStdioServerChanged(t,n,r){const s=this.getStore().getState(),a=s.mcpStdioServers??[],i=a.findIndex(c=>c.name===t);if(i===-1)return;const l=[...a];l[i]=r,s.actions.setMcpStdioServers(l)}async send(t){return this.mainExtension.sendMessage(t).then(n=>(n.is_success=!n.errorType,n))}async sendToAgent(t){return this.agentExtension.sendMessage(t).then(n=>{if(!n.success)throw new Error(n.error);return n.response})}handleMessage=t=>{try{Br(t).with({type:"UPDATE_SOURCE_TAB"},r=>{this.store.getState().actions.setSourceTab(r.payload),r.payload.url!==this.store.getState().sidecarSourceTab.url&&this.store.getState().actions.clearUserSelection()}).with({type:"FORCE_SUBMIT_QUERY"},r=>{this.isTestDebugMode&&this.emitter.emit("FORCE_SUBMIT_QUERY",r.payload)}).with({type:"QUICK_ACTION_BUTTON_FIRED"},()=>{this.emitter.emit("QUICK_ACTION_BUTTON_FIRED")}).with({type:"INIT"},r=>{this.isTestDebugMode=!!r.payload.isTestDebugMode,this.store.getState().actions.setPlatformInfo(r.payload.platform),this.store.getState().actions.setSourceTab({tabId:r.payload.sourceTabId??-1,url:r.payload.sourceTabUrl??"",title:r.payload.sourceTabTitle??"",secondaryTab:r.payload.sourceSecondaryTab??null})}).otherwise(r=>{ne.log("Unknown message type",r)})}catch(n){ne.error("Error parsing entropy message",n)}};clearStateAfterRemovingMcpServer(t,n){const r=this.getStore().getState(),s=r.mcpDisabledServers??new Set;if(s.has(t)){const i=new Set(s);i.delete(t),r.actions.setMcpDisabledServers(i)}if(n&&!this.pendingServerRename)return;if(this.pendingServerRename&&this.pendingServerRename.oldName===t){r.actions.renameMcpServerInToolsSettings(this.pendingServerRename.oldName,this.pendingServerRename.newName),this.pendingServerRename=void 0;return}const a=r.mcpToolsSettings??{};if(a[t]){const i={...a};delete i[t],r.actions.setMcpToolsSettings(i)}}}const Eat=e=>new Proxy({},{get(t,n){return r=>e.sendMessage({type:"CALL_TOOL",method:n,request:r}).then(({success:s,response:a})=>{if(!s)throw a;return a}).catch(s=>{throw ne.error("Error calling tool",s),"errorType"in s?s:{errorType:"unhandled",errorMsg:"Proxy error."}})}});var wX={};const hl=new Sat,{Provider:Mat,useTrackedState:kat}=fy("CometContext",()=>hl.getStore()),Dge=Wt("EntropyBrowserContext",void 0),Tat=({children:e})=>{const t=gt(),n=xRe(),r=fn(),{variation:s}=lat(!0),{variation:a,loading:i}=iat(LF);return f.useEffect(()=>{i||hl.setClassifierApiTimeoutMs(a)},[a,i]),f.useLayoutEffect(()=>{const l=to();l.erp&&(document.documentElement.dataset.erp=l.erp);const c=hl.subscribeCometNavigate(({url:h})=>{if(h.origin===window.location.origin&&h.pathname.startsWith(t.base)&&(h.pathname=h.pathname.replace(t.base,""),n(h.pathname))){const y=h.searchParams.toString(),v=`${h.pathname}${y?`?${y}`:""}`;t.push(v,void 0,"Comet navigate");return}if(wX.NEXT_PUBLIC_IS_SIDECAR_BUILD){ne.error("Invalid soft navigation in Sidecar",{url:h}),hl.openTab({url:h.toString()});return}const g=h.toString();window.location.href=g});if(!wX.NEXT_PUBLIC_IS_SIDECAR_BUILD||s===!1)return c;const u=hl.getStore(),d=setInterval(()=>{u.getState().sidecarUrlById.forEach((g,y)=>{g.updatedAt<Date.now()-1e3*60*60*24*7&&u.getState().actions.deleteSidecarUrlById(y)}),iX(u)},1e3*60*60*6);wst(u),Cst(u,t);let m=u.getState().sidecarSourceTab;const p=u.subscribe((h,g)=>{if(h.sidecarSourceTab===g.sidecarSourceTab)return;const y=h.sidecarSourceTab,v=ug(m.tabId,m.secondaryTab?.tabId),x=ug(y.tabId,y.secondaryTab?.tabId);if(x===v)return;const b=new URL(window.location.href).pathname;$tt(m.tabId,m.secondaryTab?.tabId).forEach(S=>{u.getState().actions.setSidecarUrlById(S,b)});const C=u.getState().sidecarUrlById.get(x)?.url??"/";m=y,C!==b&&(t.replace(C,"Sidecar source tab changed"),iX(u))});return()=>{clearInterval(d),c(),p()}},[t,n,s]),f.useEffect(()=>hl.subscribeToSidecarBrowserTaskStop(l=>{l&&(lu({entryUUID:l,reason:"terminate-from-comet-adapter"}),hl.cleanupTasks(l,"query_stopped"))}),[]),o.jsx(Mat,{children:o.jsxs(Dge.Provider,{value:hl,children:[e,r&&o.jsx(Nat,{})]})})};function Zn(e=!0){const t=f.useContext(Dge);if(!t&&e)throw new Error("useEntropyBrowser must be used inside EntropyBrowserProvider");return t}const Hr=kat,Nat=()=>{const e=Hr();return f.useEffect(()=>{hl.refreshDxtAndMcpState().catch(()=>{})},[]),f.useEffect(()=>{if(!e.mcpDisabledServers)try{const t=Re.getItem("mcp_disabled_servers_v1"),n=t?JSON.parse(t):[];e.actions.setMcpDisabledServers(new Set(n))}catch{e.actions.setMcpDisabledServers(new Set)}},[e.mcpDisabledServers,e.actions]),f.useEffect(()=>{if(!e.mcpToolsSettings)try{const t=Re.getItem(gv),n=t?JSON.parse(t):{};e.actions.setMcpToolsSettings(n)}catch{e.actions.setMcpToolsSettings({})}},[e.mcpToolsSettings,e.actions]),o.jsx(o.Fragment,{children:e.mcpStdioServers?.map(t=>o.jsx(jat,{server:t},t.name))})},jat=({server:e})=>{const t=Hr(),{data:n}=We({queryKey:["comet/mcp_tools",e.name],queryFn:async()=>(await hl.getMcpTools(e.name).catch(()=>[])).map(s=>({...s,mcp_server:e.name,mcp_server_type:MHe.MCP_SERVER_TYPE_LOCAL,app:e.name})),enabled:!!e.name});return f.useEffect(()=>{if(n)return t.actions.setMcpTools(e.name,n),()=>{t.actions.removeMcpTools(e.name)}},[n,t.actions,e.name]),null};function Aat(e){return e.blocks?.some(t=>t.intended_usage==="ask_text")??!1}function Iat(e,t,n=[]){return t===le.DEFAULT||n.length>0&&n[n.length-1]?.step_type==="FINAL"||e?.some(s=>s.markdown_block||s.entity_list_block||fme(s.entity_group_block)||mme(s.inline_entity_block))}function Ur(e){const t=e?.toLowerCase();return io[t]??ie.SEARCH}var Rat={};const Fge=()=>{const e=fn(),t=Zn(),n=f.useCallback(r=>{const s=!!r.last_backend_uuid,a=Ur(r.model_preference)===ie.RESEARCH||Ur(r.model_preference)===ie.STUDIO;return(r.sources?.some(l=>l==="web")??!0)&&e&&!s&&!Rat.NEXT_PUBLIC_IS_SIDECAR_BUILD&&!a&&!r.override_no_search},[e]);return f.useCallback((r,s,a)=>{!r||!n(s)||t.injectSearchResults(r,a)},[t,n])},Pat=["presentpicker"],Uge=e=>e?Pat.includes(e):!1;function Oat(e){const t=Nt(),n=rt(),{hasAccessToProFeatures:r}=_t(),{trackEvent:s}=Ne(),{actions:a,preferredSearchModels:i,preferredSearchMode:l}=hn(),{isMaxUpsellEnabled:c}=Eu(),u=t?.get("copilot"),d=t?.get("pro"),m=t?.get("utm_source"),p=u==="false"||d==="false",h=!p&&(u==="true"||d==="true"||Uge(m??void 0)),g=i[ie.SEARCH];g&&(io[g]!==ie.SEARCH?(i[ie.SEARCH]=le.PRO,a.setPreferredSearchModel(ie.SEARCH,le.PRO)):g===le.DEFAULT&&r&&a.setPreferredSearchModel(ie.SEARCH,void 0));const y=t?.get("model_id")==="pplx_alpha"?null:t?.get("model_id");let v;y&&(y==="deep_research"?v=le.ALPHA:Object.values(le).includes(y)&&(v=y));let x;return p?x=le.DEFAULT:v?x=v:h&&(x=le.PRO),x&&v&&v==x&&s("search mode utm",{mode:io[x]}),f.useMemo(()=>{let b=le.DEFAULT;if(!n)return b;if(x)return x;if(!c)return b=i[ie.SEARCH]??le.PRO,b;switch(l){case ie.RESEARCH:b=i[ie.RESEARCH]??le.ALPHA;break;case ie.STUDIO:b=i[ie.STUDIO]??le.BETA;break;case ie.SEARCH:default:b=i[ie.SEARCH]??le.PRO;break}return b},[n,c,x,l,i])}const Bge={isCopilot:!1,sources:["web"],gpt4Limit:0,gpt4Total:0,pplxAlphaLimit:0,pplxBetaLimit:0,uploadRateLimit:void 0,createLimit:0,recency:null,askInputReasoningMode:!1,askInputReasoningModelPreference:null,setAskInputReasoningMode:()=>{},setAskInputReasoningModelPreference:()=>{},setConfiguredModel(){},setSources:()=>{},setIsCopilot:()=>{},decrementCreateLimit:()=>{},setGPT4Limit:()=>{},setPplxAlphaLimit:()=>{},setPplxBetaLimit:()=>{},setRecency:()=>{},setUploadRateLimit:()=>{},configuredModel:le.DEFAULT,configuredSearchMode:ie.SEARCH,setConfiguredSearchMode(){}},Vge=Wt("ThreadConfigContext",Bge),Lat=({children:e,shouldFetchSettings:t})=>{const r=ma({enabled:t,reason:"thread-settings-provider"}),{organization:s}=_n({reason:"thread-settings-provider"}),a=hn(),{isMax:i}=_t();let l=a.preferredSearchMode;const c=l?Object.values(ie).includes(l):!1,{isMaxUpsellEnabled:u}=Eu();!u&&l!==ie.SEARCH&&(l=void 0,a.actions.setPreferredSearchMode(void 0));const d=Oat(),[m,p]=f.useState({...Bge,gpt4Limit:r.gpt4Limit,gpt4Total:r.gpt4Total,pplxAlphaLimit:r.pplxAlphaLimit,pplxBetaLimit:r.pplxBetaLimit,configuredModel:d,configuredSearchMode:io[d]??ie.SEARCH}),h=f.useCallback(k=>p(A=>({...A,configuredModel:k,configuredSearchMode:io[k]??A.configuredSearchMode})),[]),g=f.useCallback(()=>{h(le.DEFAULT),a.actions.setPreferredSearchMode(ie.SEARCH)},[h,a.actions]),y=f.useCallback(k=>{p(A=>({...A,sources:k}))},[]),v=f.useCallback(k=>{p(A=>({...A,recency:k}))},[]),x=f.useCallback(k=>{p(A=>({...A,askInputReasoningModelPreference:k,askInputReasoningMode:!!k}))},[]),b=f.useCallback(k=>{p(A=>({...A,askInputReasoningMode:k}))},[]);f.useEffect(()=>{r.createLimit!==null&&p(k=>({...k,createLimit:r.createLimit}))},[r.createLimit]),f.useEffect(()=>{r.uploadLimit!==null&&r.uploadLimit!==void 0&&p(k=>({...k,uploadRateLimit:r.uploadLimit}))},[r.uploadLimit]),f.useEffect(()=>{r.gpt4Limit!==null&&p(k=>({...k,gpt4Limit:r.gpt4Limit}))},[r.gpt4Limit]),f.useEffect(()=>{r.gpt4Total!==null&&p(k=>({...k,gpt4Total:r.gpt4Total}))},[r.gpt4Total]),f.useEffect(()=>{r.pplxAlphaLimit!==null&&p(k=>({...k,pplxAlphaLimit:r.pplxAlphaLimit}))},[r.pplxAlphaLimit]),f.useEffect(()=>{r.pplxBetaLimit!==null&&p(k=>({...k,pplxBetaLimit:r.pplxBetaLimit}))},[r.pplxBetaLimit]),f.useEffect(()=>{r.hasLoadedSettings&&((m.configuredModel!==le.DEFAULT&&r.gpt4Limit<=0||Ur(m.configuredModel)===ie.RESEARCH&&r.pplxAlphaLimit<=0&&!i||Ur(m.configuredModel)===ie.STUDIO&&r.pplxBetaLimit<=0&&!i)&&g(),(m.askInputReasoningMode||m.askInputReasoningModelPreference)&&r.gpt4Limit<=0&&g())},[g,r.gpt4Limit,r.pplxAlphaLimit,r.pplxBetaLimit,r.hasLoadedSettings,m.askInputReasoningMode,m.askInputReasoningModelPreference,m.configuredModel,i]),f.useEffect(()=>{const k=s?.settings?.disabled_model_preferences??[];c&&l&&k?.includes(l)&&g()},[c,s?.settings?.disabled_model_preferences,l,g,h]);const _=f.useCallback(()=>{const k=Math.max(m.createLimit-1,0);p(A=>({...A,createLimit:k}))},[m.createLimit]),w=f.useCallback((k=1)=>{if(m.uploadRateLimit==null)return;const A=Math.max(m.uploadRateLimit-k,0);p(R=>({...R,uploadRateLimit:A}))},[m.uploadRateLimit]),M={...m,setConfiguredModel:h,setSources:y,decrementCreateLimit:_,setUploadRateLimit:w,setGPT4Limit:k=>{p(A=>({...A,gpt4Limit:k}))},setPplxAlphaLimit:k=>{p(A=>({...A,pplxAlphaLimit:k}))},setPplxBetaLimit:k=>{p(A=>({...A,pplxBetaLimit:k}))},setRecency:v,askInputReasoningMode:m.askInputReasoningMode,isCopilot:m.configuredModel!==le.DEFAULT,setAskInputReasoningMode:b,setAskInputReasoningModelPreference:x,configuredSearchMode:m.configuredSearchMode,setConfiguredSearchMode:k=>{p(A=>({...A,configuredSearchMode:k}))}};return o.jsx(Vge.Provider,{value:M,children:e})},Jn=()=>{const e=f.useContext(Vge);if(!e)throw new Error("useThreadConfig must be used within ThreadSettingsContext");return e};function Sy(){const{isMax:e,isPro:t}=_t(),{isMaxUpsellEnabled:n}=Eu(),{gpt4Limit:r,pplxAlphaLimit:s,pplxBetaLimit:a}=Jn();return f.useMemo(()=>l=>{let c=!1;return l===ie.RESEARCH?c=Math.min(r,s)<=0:c=Math.min(r,a)<=0,n&&!e&&t&&c&&(l===ie.RESEARCH||l===ie.STUDIO)},[n,e,t,r,s,a])}function Eu(){const{isEnterprise:e}=_n({reason:"max-tier"}),{value:t,loading:n}=It({flag:"max-upsell",defaultValue:!1,subjectType:"visitor_id",extraAttributes:{isEnterprise:e??!1}});return f.useMemo(()=>({isMaxUpsellEnabled:e?!0:t,loading:n}),[t,n,e])}var Dat={};function Pa(){const{configuredModel:e,configuredSearchMode:t}=Jn();return f.useMemo(()=>t||(Dat.NEXT_PUBLIC_IS_SIDECAR_BUILD&&e===le.DEFAULT?ie.SEARCH:io[e]),[t,e])}const Fat=["ppl-ai-file-upload","ppl-ai-sandbox-file-upload","ppl-ai-experimental-file-upload"],$ge=e=>Fat.some(t=>e.url.includes(`${t}.s3.amazonaws.com/web/direct-files`));var xP;(function(e){e.token_limit_exceeded="token_limit_exceeded",e.parsing_error="parsing_error",e.unknown_error="unknown_error",e.unauthorized="unauthorized",e.no_data_received="no_data_received",e.file_type_not_supported="file_type_not_supported",e.image_failed_moderation="image_failed_moderation"})(xP||(xP={}));var Xv;(function(e){e.generic_upload_error="generic_upload_error",e.unsupported_type="unsupported_type",e.too_large="too_large",e.too_small="too_small",e.no_name="no_name",e.failed_moderation="failed_moderation",e.rate_limited="rate_limited",e.over_file_count="over_file_count",e.over_image_count="over_image_count"})(Xv||(Xv={}));const TS=e=>{if(Yb(e))return"application/pdf";const n=e.split("?")[0].split("#")[0].split(".").pop()?.toLowerCase();return n&&{png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",jpe:"image/jpeg",jp2:"image/jp2",gif:"image/gif",bmp:"image/bmp",tiff:"image/tiff",tif:"image/tiff",svg:"image/svg+xml",webp:"image/webp",ico:"image/x-icon",avif:"image/avif",heic:"image/heic",heif:"image/heif",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",txt:"text/plain",csv:"text/csv",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",md:"text/markdown"}[n]||"application/octet-stream"},Uat=e=>{const t=e.meta_data?.repo_type;return e.is_attachment&&!t&&!e.meta_data?.file_uuid},Bat=e=>{if(!e)return!1;try{return new URL(e).hostname.includes("s3.amazonaws.com")}catch{return!1}},ll=ot({token_limit_exceeded:{id:"cnFlyTXVDl",defaultMessage:"File {filename} exceeds the model's token limit."},parsing_error:{id:"RdRRX8+YG/",defaultMessage:"Failed to parse file {filename}."},file_type_not_supported:{id:"IaflMSTTq6",defaultMessage:"File type not supported for {filename}."},unknown_error:{id:"zhy7qBi3Eu",defaultMessage:"Unknown error for file {filename}."},unauthorized:{id:"6bOe+cTUhc",defaultMessage:"User not authorised to access file {filename}."},no_data_received:{id:"34PXW7VvKh",defaultMessage:"No data received for file {filename}."},generic_upload_error:{id:"xVFvYDY5wK",defaultMessage:"File upload failed"},unsupported_type:{id:"VUOyYEDS96",defaultMessage:"The file type you uploaded is not supported."},too_large:{id:"XBcIjOYq8V",defaultMessage:"File too large: {max} maximum."},too_small:{id:"ZUyiNCx0Aw",defaultMessage:"File too small."},no_name:{id:"IkAmckATMw",defaultMessage:"File name is required."},image_failed_moderation:{id:"YCCLnMQDPb",defaultMessage:"File {filename} failed moderation."},failed_moderation:{id:"hnN6c9ExET",defaultMessage:"File upload failed moderation."},rate_limited:{id:"el7NlqcDQZ",defaultMessage:"You have reached the daily upload limit for your plan."},over_file_count:{id:"2+5sg16GUy",defaultMessage:"You are allowed up to {maxNumFiles, plural, one {# file} other {# files}} at once."},over_image_count:{id:"FIudmpgA1s",defaultMessage:"You are allowed up to {maxNumImages, plural, one {# image} other {# images}} at once."}}),m3=e=>{if(e.startsWith("/rest/connectors/wiley/"))return"WILEY";if(e.includes("drive.google.com")||e.includes("connectors/google-drive")||e.includes("docs.google.com"))return"GOOGLE_DRIVE";if(e.includes("onedrive.live.com")||e.includes("1drv.ms")||e.includes("connectors/onedrive"))return"ONEDRIVE";if(e.includes(".sharepoint.com")||e.includes("connectors/sharepoint"))return"SHAREPOINT";if(e.includes("dropbox.com/preview")||e.includes("connectors/dropbox"))return"DROPBOX";if(e.includes("app.box.com/file")||e.includes("connectors/box"))return"BOX"},Wge=e=>!!(e?.meta_data?.connection_type&&e?.meta_data.connection_type!=="LOCAL")||e.is_attachment&&!!m3(e.url),Ey=e=>e.is_attachment&&($ge(e)||em(e.url)||Yb(e.url)),Hge=e=>e.trim().replace(/\/+$/,"").replace(/^(?:https?:\/\/)?(?:www\.)?/,""),len=e=>!!new RegExp("^((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,})(\\/[\\w\\-._~:/@!$&'()*+,;=%.]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e);function Ta(e){const t=/(?:https?:\/\/)?(?:www\.)?([a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*(?:\.[a-zA-Z]{2,})?|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::\d+)?/,n=e.match(t);return n&&n.length>0?n[1]||n[0]:"unknown"}function aU(e){const t=Ta(e);return t==="unknown"?"unknown":t.replace(/\.[^.]*$/,"")}function Kb(e){return e.includes("calendar.google.com")||e.includes("google.com/calendar")?"https://calendar.google.com":e.includes("mail.google.com")||e.includes("google.com/mail")?"https://mail.google.com":$at(e)?"www.perplexity.ai":Ta(e)}function cen(e){return e.startsWith("http://")||e.startsWith("https://")?e:`https://${e}`}function My(e){const t=["(?:youtube?\\.com\\/","(?:[^/\\n\\s]+\\/\\S+\\/","|(?:v|e(?:mbed)?)\\/","|\\S*?[?&]v=",")","|youtu\\.be\\/",")([a-zA-Z0-9_-]{11})"].join(""),n=new RegExp(t),r=e.match(n);if(r&&r[1].length==11)return r[1]}const uen=e=>e.indexOf("unsplash.com")>-1;function em(e){return e.startsWith("https://pplx-res.cloudinary.com/")||e.startsWith("https://api.cloudinary.com/v1_1/pplx/image/download")}function Yb(e){return e.startsWith("https://image-ppubs.uspto.gov/")}function den(e){return e.includes("code-interpreter-files.s3.amazonaws.com")||e.includes("pplx_code_interpreter")}function fen(e){return e.includes("user-gen-media-assets")}function bP(e){return e.replace(/\/s--[^/]+--\/v\d+\//,"/")}function oU(e){return!Ey(e)&&!!e.url&&!My(e.url)&&!em(e.url)&&!e.is_memory&&!e.is_conversation_history}const p3=e=>{try{const r=new URL(e).pathname.replace(/^\//,"").split("/"),s=r[r.length-1];return decodeURIComponent(s)}catch{return"File"}},Vat=e=>{const t=e,n=t.indexOf("/"),r=Math.max(23,n+16);return t.length>r?t.substring(0,r-1)+"":t},men=(e,t)=>`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent([e,t].filter(Boolean).join(", "))}`,pen=(e,t)=>`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent([e,t].filter(Boolean).join(", "))}`;function zge(e,t){let n=e;const r=e.match(/{([^}]+)}/g)||[];for(const s of r){const a=s.slice(1,-1);t[a]!==void 0?n=n.replace(s,t[a]):n=n.replace(s,"")}try{return new URL(n).toString()}catch{return n}}function hen(e){return e.includes("https://openai.com/index/image-generation-api/")}function $at(e){return e.startsWith("chrome://")||e.startsWith("chrome-extension://")||e.startsWith("browser-extension://")||e.startsWith("browser://")||e.startsWith("comet://")}const gen=e=>e.replace("comet://","chrome://"),Gge=e=>{if(!e)return null;try{return new URL(e)}catch{return null}},yen=async e=>{const t=[];return await Promise.all(e.map(async n=>{try{(await fetch(n,{method:"HEAD"})).ok&&t.push(n)}catch(r){console.debug(`URL ${n} is not reachable:`,r)}})),t},iU=e=>{try{const t=new URL(e);return["AWSAccessKeyId","Signature","Expires"].every(n=>t.searchParams.has(n))}catch{return!1}},_P=e=>{if(!e)return"";const t=e.indexOf("?");return(t===-1?e:e.substring(0,t)).replace(/\/+$/,"")},qge=e=>{try{return new URL(e).origin===window.location.origin}catch{return!1}};var CX={};const Wat=e=>{try{return new URL(e),!0}catch{return!1}},Hat=()=>{const e=Wo();return e?.ios_version?NWe:e?.android_version?jWe:oD},zat=({inPageOverride:e,dslQuery:t,existingEntryUUID:n,existingUuid:r,deletedUrls:s,redoSearch:a,collection:i,isRelatedQuery:l,isSponsored:c,relatedQueryUUID:u,inDomain:d,inPage:m,newFrontendContextUUID:p,promptSource:h,querySource:g,timeFromFirstType:y,utmSource:v,disableWidgets:x,isNavSuggestionsDisabled:b,entropyBrowser:_,clientPayloadUUID:w,isIncognito:C,sessionId:S,modelPreferenceSubmit:E,lastBackendUUID:M,deviceLocation:k,newAttachments:A,threadMetadataRwToken:R,forceNew:O,finalSources:L,finalRecency:P,mode:N,frontendUUID:T,isWindowsApp:j,browserHistorySummaryNumDays:F,mentions:U,reason:V,side_by_side_metadata:$,skipSearchEnabled:z,browserHistorySummaryMaxResults:Q,sidecarTabId:Y,sidecarUrl:W,sidecarTitle:X,sidecarSecondaryTabId:G,sidecarSecondaryUrl:J,sidecarSecondaryTitle:q,isFirstEntry:te,alwaysSearchOverride:re,overrideNoSearch:ae,cometMaxAssistantEnabled:fe,resumingQuery:de,resumeFromUuid:ve,cometIsMissionControl:_e,mcpTools:Se,refinementFiltersMetadata:be})=>{const me=k?{location_lat:k.latitude,location_lng:k.longitude,name:""}:null,Ae=Fb(),je=to().erp,Me=fn(),Ye=Me?{source:Hat(),client_payload_cache_key:w}:{},at=j?{source:y5}:{};let it=!1,ke="",Ue="";if(Me&&(it=!0,te&&(ke=Ftt({entropyBrowser:_,browserHistorySummaryNumDays:F,browserHistorySummaryMaxResults:Q,reason:V}),Ue=_.getLastOmniboxInput(T)??""),g==="default_search"&&(Wat(Ue)&&(it=!1,ne.info("[comet] Local search disabled due to URL input in omnibox",{lastOmniboxInput:Ue})),!Ue))){const St=Gge(document.referrer);(!St||St.origin!==location.origin||St.pathname!=="/.well-known/comet-omnibox-text"&&St.pathname!=="/b/try-assistant")&&(it=!1,ne.info("[comet] Local search disabled due to unsecure referer",{lastOmniboxInput:Ue,parsedReferrer:St}))}const Ot=g==="followup"?"followup-sidecar":"sidecar";let yt;return Me&&(yt=je==="sidecar"?{rendering_place:je,sidecar_tab_id:Y,sidecar_url:W,sidecar_title:X,sidecar_secondary_tab_id:G,sidecar_secondary_url:J,sidecar_secondary_title:q}:{rendering_place:je??"unknown"}),{last_backend_uuid:M??void 0,read_write_token:O?void 0:R,existing_entry_uuid:O?void 0:n,deleted_urls:s??void 0,attachments:A,language:id(),timezone:aD,in_page:e??m,in_domain:d,search_focus:L.length===0?"writing":"internet",sources:L,search_recency_filter:P,frontend_uuid:r??T,redo_search:a,mode:N,target_collection_uuid:i?.uuid,model_preference:E??void 0,is_related_query:l??!1,is_sponsored:c??!1,related_query_uuid:u,visitor_id:Ae??void 0,user_nextauth_id:S??void 0,frontend_context_uuid:p??void 0,prompt_source:h??void 0,query_source:CX.NEXT_PUBLIC_IS_SIDECAR_BUILD?Ot:g??"",browser_history_summary_key:ke||void 0,is_incognito:C,time_from_first_type:y??void 0,local_search_enabled:it,use_schematized_api:!0,send_back_text_in_streaming_api:!1,supported_block_use_cases:Fde,utm_source:v,client_coordinates:me,mentions:U,dsl_query:t,skip_search_enabled:z,is_nav_suggestions_disabled:b||!!CX.NEXT_PUBLIC_IS_SIDECAR_BUILD,...g==="followup"?{followup_source:"link"}:{},...Ye,...at,...x?{disable_widgets:x}:{},always_search_override:re??!1,override_no_search:ae??!1,comet_info:yt,...$&&{side_by_side_metadata:$},client_search_results_cache_key:Me&&T?`nav-${T}`:void 0,comet_max_assistant_enabled:fe,resuming_query:de,resume_from_uuid:ve,comet_is_mission_control:_e,mcp_tools:Se,refinement_filters_metadata:be}},Kge=()=>{const e=jt();return fn()&&e?.startsWith("/b/home")},Gat=["/?","/search","/discover"],qat=["/"],lU=e=>e?!qat.some(t=>e===t)&&!Gat.some(t=>e.startsWith(t)):!0,wP=()=>Bs.getItem("signUpBannerDismissed")!=="true",Kat=()=>Bs.setItem("signUpBannerDismissed","true"),Yat=()=>Bs.setItem("signUpBannerDismissed","reset"),Yge=I.memo(({portalTarget:e})=>{const{$t:t}=Z(),[n,r]=f.useState(!1),s=jt(),{trackEvent:a}=Ne(),{keysRequiringRerender:i,removeKeyRequiringRerender:l,addKeyRequiringRerender:c}=Wd(),u=Kge(),[d,m]=f.useState(""),p=f.useCallback(()=>{m(d3(window.location.href,oc,Oe.FLOATING_SIGNUP))},[]);if(f.useEffect(()=>{p()},[p]),f.useEffect(()=>{r(wP())},[]),f.useEffect(()=>{i.includes("floating-signup")&&(r(wP()),p()),l("floating-signup")},[l,i]),f.useEffect(()=>{n&&a("floating sign up shown",{})},[n,a]),lU(s)&&!u||!n)return null;const h=()=>{r(!1),Kat(),a("floating sign up dismissed",{}),c("sidebar-sign-in-button")};return o.jsx(Bd,{portalTarget:e??void 0,children:o.jsx("div",{className:"bottom-md right-md fixed hidden w-[300px] md:block",children:o.jsx(H,{variant:"background",className:B("px-md py-lg animate-in fade-in ring-subtle rounded-xl shadow-md ring-1 duration-300 ease-out"),children:o.jsxs("div",{children:[o.jsx("div",{className:"right-sm top-sm absolute",children:o.jsx(Te,{pill:!0,size:"small",icon:Rt,onClick:h,testId:"floating-signup-close-button"})}),o.jsx("div",{className:"pb-md flex justify-center",children:o.jsx(Na,{variant:"mark",color:"super",size:"small"})}),o.jsx(D,{variant:"baseSemi",className:"mb-xs text-center",children:t({defaultMessage:"Sign in or create an account",id:"eN8MTJfuKA"})}),o.jsx(D,{variant:"small",color:"light",className:"text-center",children:t({defaultMessage:"Unlock {proSearch} and History",id:"azC54WXvtr"},{proSearch:"Pro Search"})}),o.jsx("div",{className:"mt-md",children:o.jsx(h1,{onClose:h,redirectUrl:d,showCloseButton:!1,autoFocus:!1,loginButtonsStyle:"highlightPrimary"})})]})})})})});Yge.displayName="FloatingSignUp";const Qat=async({reason:e})=>{try{const{data:t,error:n}=await se.POST("/rest/incentives/comet-activation",e,{timeoutMs:Pe()});if(n)throw n;return t}catch(t){return ne.error("Failed to handle comet activation incentive",t),null}},Qge=async({eventName:e,isDeferred:t,clickId:n,reason:r})=>{try{const{data:s,error:a}=await se.POST("/rest/attribution/dub/lead",r,{timeoutMs:Pe(),body:{event_name:e,is_deferred:t,click_id:n}});if(a)throw a;return{success:s?.success??!1}}catch(s){return ne.error("Failed to save post install redirect",s),{success:!1}}},Xat=2,Zat=10,Jat=({response:e,isUserLoggedIn:t,submissionCount:n,session:r,queryCountMobile:s,isWindowsApp:a,addKeyRequiringRerender:i,setSubmissionCount:l,trackEvent:c,setShouldShowProductFeedback:u,setFeedbackEntryUUID:d,setShouldShowRecruitmentBanner:m,sendQueryEventSingular:p,maybeSendNthQueryEventSingular:h,recruitmentBannerEnabled:g,reason:y})=>{const v=fn();if(v&&bRe(t),e?.backend_uuid){const b=e.backend_uuid;kHe({entryUUID:e.backend_uuid,params:{query:e.query_str||"",sources:e.sources?.sources??[]},reason:y}).then(_=>{u(_),_&&c("query feedback shown",{entry_uuid:b})}),g&&RHe({entryUUID:b,reason:y}).then(_=>{m(_),_&&c("power user recruitment banner shown",{})}),d(b)}!t&&n===Xat-1&&(Yat(),i("floating-signup")),t&&r?.user?.id&&s===0&&n===Zat-1&&i("floating-mobile-download"),a?i("floating-milestone-refetch-legacy"):t&&i("floating-milestone-refetch"),l(n+1),p(),h({isCometBrowser:v});const x=sie();v&&x===1?(Qge({eventName:"activated",isDeferred:!1,clickId:null,reason:"comet attribution"}),Qat({reason:"comet activation incentive"}),c("first comet query finished",{})):v&&x===3&&c("third comet query finished",{})},Jw={startTime:-1,timer:jl()},Tp={startTime:-1,modules:new Set},ky=Wt("PerformanceContext",{markTTV:()=>{},addPageTiming:()=>{},getPageStartTime:()=>0,getPageTimer:()=>jl(),addPageTimingOnce:()=>{}});function eot({children:e}){const{startTimeFromTimeOriginRef:t}=gt(),{markTTV:n}=_Re(),r=f.useCallback(()=>(Jw.startTime!==t.current&&(Jw.startTime=t.current,Jw.timer=jl(void 0,{nowFromTimeOrigin:t.current})),Jw.timer),[t]),s=f.useMemo(()=>({markTTV:()=>n(t.current),addPageTiming:(a,i={})=>r().addTiming(a,i),addPageTimingOnce:(a,i={})=>r().addTimingOnce(a,i),getPageStartTime:()=>t.current,getPageTimer:r}),[n,t,r]);return o.jsx(ky.Provider,{value:s,children:e})}function tot(){const{markTTV:e}=f.useContext(ky);return e}function not(){const{addPageTiming:e}=f.useContext(ky);return e}function Xge(){const{getPageStartTime:e}=f.useContext(ky);return e}function rot(){const{getPageTimer:e}=f.useContext(ky);return e}const Zge=Wt("PagePerformanceContext",{markTTV:()=>{}});function Cj({children:e,modules:t}){const{markTTV:n,addPageTimingOnce:r,getPageStartTime:s}=f.useContext(ky),a=s(),i=f.useCallback(c=>{t.includes(c)&&(Tp.startTime!==a&&(Tp.startTime=a,Tp.modules=new Set),!Tp.modules.has(c)&&(r(`web.ttv.${c}`),Tp.modules.add(c),t.every(u=>Tp.modules.has(u))&&n()))},[r,a,t,n]),l=f.useMemo(()=>({markTTV:i}),[i]);return o.jsx(Zge.Provider,{value:l,children:e})}function sot(){const{markTTV:e}=f.useContext(Zge);return e}function ven(e={}){const t=tot();f.useEffect(()=>{e.skip||t()},[e.skip,t])}function Hm(e,t={}){const n=sot();f.useEffect(()=>{t.skip||n(e)},[n,e,t.skip])}const aot=({inPage:e})=>e?window.getSelection()?.toString():void 0;function oot(){const{value:e}=unt({flag:"client-context-max-chars",subjectType:"visitor_id",defaultValue:5e4});return e}function cU(){const{value:e}=Bhe({flag:"max-file-upload-count",subjectType:"user_nextauth_id",defaultValue:10});return e}const iot=({isFollowup:e,isInSameThread:t,sourcesOverride:n,firstResultSources:r,firstResultRecency:s,defaultSources:a,defaultRecency:i})=>n?{finalSources:n,finalRecency:i}:!e||!t?{finalSources:a,finalRecency:i}:{finalSources:Array.isArray(r)?r:[],finalRecency:s};var Sj,SX;function lot(){if(SX)return Sj;SX=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,l=parseInt,c=typeof ko=="object"&&ko&&ko.Object===Object&&ko,u=typeof self=="object"&&self&&self.Object===Object&&self,d=c||u||Function("return this")(),m=Object.prototype,p=m.toString,h=Math.max,g=Math.min,y=function(){return d.Date.now()};function v(C,S,E){var M,k,A,R,O,L,P=0,N=!1,T=!1,j=!0;if(typeof C!="function")throw new TypeError(e);S=w(S)||0,x(E)&&(N=!!E.leading,T="maxWait"in E,A=T?h(w(E.maxWait)||0,S):A,j="trailing"in E?!!E.trailing:j);function F(G){var J=M,q=k;return M=k=void 0,P=G,R=C.apply(q,J),R}function U(G){return P=G,O=setTimeout(z,S),N?F(G):R}function V(G){var J=G-L,q=G-P,te=S-J;return T?g(te,A-q):te}function $(G){var J=G-L,q=G-P;return L===void 0||J>=S||J<0||T&&q>=A}function z(){var G=y();if($(G))return Q(G);O=setTimeout(z,V(G))}function Q(G){return O=void 0,j&&M?F(G):(M=k=void 0,R)}function Y(){O!==void 0&&clearTimeout(O),P=0,M=L=k=O=void 0}function W(){return O===void 0?R:Q(y())}function X(){var G=y(),J=$(G);if(M=arguments,k=this,L=G,J){if(O===void 0)return U(L);if(T)return O=setTimeout(z,S),F(L)}return O===void 0&&(O=setTimeout(z,S)),R}return X.cancel=Y,X.flush=W,X}function x(C){var S=typeof C;return!!C&&(S=="object"||S=="function")}function b(C){return!!C&&typeof C=="object"}function _(C){return typeof C=="symbol"||b(C)&&p.call(C)==n}function w(C){if(typeof C=="number")return C;if(_(C))return t;if(x(C)){var S=typeof C.valueOf=="function"?C.valueOf():C;C=x(S)?S+"":S}if(typeof C!="string")return C===0?C:+C;C=C.replace(r,"");var E=a.test(C);return E||i.test(C)?l(C.slice(2),E?2:8):s.test(C)?t:+C}return Sj=v,Sj}var cot=lot();const EX=Bo(cot);var uU=typeof window<"u"?f.useLayoutEffect:f.useEffect;function g1(e,t,n,r){const s=f.useRef(t);uU(()=>{s.current=t},[t]),f.useEffect(()=>{const a=window;if(!(a&&a.addEventListener))return;const i=l=>{s.current(l)};return a.addEventListener(e,i,r),()=>{a.removeEventListener(e,i,r)}},[e,n,r])}function nE(e){const t=f.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return uU(()=>{t.current=e},[e]),f.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[t])}var Ej=typeof window>"u";function Ty(e,t,n={}){const{initializeWithValue:r=!0}=n,s=f.useCallback(p=>n.serializer?n.serializer(p):JSON.stringify(p),[n]),a=f.useCallback(p=>{if(n.deserializer)return n.deserializer(p);if(p==="undefined")return;const h=t instanceof Function?t():t;let g;try{g=JSON.parse(p)}catch(y){return console.error("Error parsing JSON:",y),h}return g},[n,t]),i=f.useCallback(()=>{const p=t instanceof Function?t():t;if(Ej)return p;try{const h=window.localStorage.getItem(e);return h?a(h):p}catch(h){return console.warn(`Error reading localStorage key ${e}:`,h),p}},[t,e,a]),[l,c]=f.useState(()=>r?i():t instanceof Function?t():t),u=nE(p=>{Ej&&console.warn(`Tried setting localStorage key ${e} even though environment is not a client`);try{const h=p instanceof Function?p(i()):p;window.localStorage.setItem(e,s(h)),c(h),window.dispatchEvent(new StorageEvent("local-storage",{key:e}))}catch(h){console.warn(`Error setting localStorage key ${e}:`,h)}}),d=nE(()=>{Ej&&console.warn(`Tried removing localStorage key ${e} even though environment is not a client`);const p=t instanceof Function?t():t;window.localStorage.removeItem(e),c(p),window.dispatchEvent(new StorageEvent("local-storage",{key:e}))});f.useEffect(()=>{c(i())},[e]);const m=f.useCallback(p=>{p.key&&p.key!==e||c(i())},[e,i]);return g1("storage",m),g1("local-storage",m),[l,u,d]}function Hd(e){const t=f.useRef(e);t.current=e,f.useEffect(()=>()=>{t.current()},[])}function uot(e,t=500,n){const r=f.useRef();Hd(()=>{r.current&&r.current.cancel()});const s=f.useMemo(()=>{const a=EX(e,t,n),i=(...l)=>a(...l);return i.cancel=()=>{a.cancel()},i.isPending=()=>!!r.current,i.flush=()=>a.flush(),i},[e,t,n]);return f.useEffect(()=>{r.current=EX(e,t,n)},[e,t,n]),s}function Jge({threshold:e=0,root:t=null,rootMargin:n="0%",freezeOnceVisible:r=!1,initialIsIntersecting:s=!1,onChange:a}={}){var i;const[l,c]=f.useState(null),[u,d]=f.useState(()=>({isIntersecting:s,entry:void 0})),m=f.useRef();m.current=a;const p=((i=u.entry)==null?void 0:i.isIntersecting)&&r;f.useEffect(()=>{if(!l||!("IntersectionObserver"in window)||p)return;const y=new IntersectionObserver(v=>{const x=Array.isArray(y.thresholds)?y.thresholds:[y.thresholds];v.forEach(b=>{const _=b.isIntersecting&&x.some(w=>b.intersectionRatio>=w);d({isIntersecting:_,entry:b}),m.current&&m.current(_,b)})},{threshold:e,root:t,rootMargin:n});return y.observe(l),()=>{y.disconnect()}},[l,JSON.stringify(e),t,n,p,r]);const h=f.useRef(null);f.useEffect(()=>{var y;!l&&((y=u.entry)!=null&&y.target)&&!r&&!p&&h.current!==u.entry.target&&(h.current=u.entry.target,d({isIntersecting:s,entry:void 0}))},[l,u.entry,r,p,s]);const g=[c,!!u.isIntersecting,u.entry];return g.ref=g[0],g.isIntersecting=g[1],g.entry=g[2],g}function eye(){const[e,t]=f.useState(!1);return f.useEffect(()=>{t(!0)},[]),e}function dot(){const e=f.useRef(!1);return f.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),f.useCallback(()=>e.current,[])}var MX={width:void 0,height:void 0};function fot(e){const{ref:t,box:n="content-box"}=e,[{width:r,height:s},a]=f.useState(MX),i=dot(),l=f.useRef({...MX}),c=f.useRef(void 0);return c.current=e.onResize,f.useEffect(()=>{if(!t.current||typeof window>"u"||!("ResizeObserver"in window))return;const u=new ResizeObserver(([d])=>{const m=n==="border-box"?"borderBoxSize":n==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",p=kX(d,m,"inlineSize"),h=kX(d,m,"blockSize");if(l.current.width!==p||l.current.height!==h){const y={width:p,height:h};l.current.width=p,l.current.height=h,c.current?c.current(y):i()&&a(y)}});return u.observe(t.current,{box:n}),()=>{u.disconnect()}},[n,t,i]),{width:r,height:s}}function kX(e,t,n){return e[t]?Array.isArray(e[t])?e[t][0][n]:e[t][n]:t==="contentBoxSize"?e.contentRect[n==="inlineSize"?"width":"height"]:void 0}var Mj=typeof window>"u";function dU(e,t,n={}){const{initializeWithValue:r=!0}=n,s=f.useCallback(p=>n.serializer?n.serializer(p):JSON.stringify(p),[n]),a=f.useCallback(p=>{if(n.deserializer)return n.deserializer(p);if(p==="undefined")return;const h=t instanceof Function?t():t;let g;try{g=JSON.parse(p)}catch(y){return console.error("Error parsing JSON:",y),h}return g},[n,t]),i=f.useCallback(()=>{const p=t instanceof Function?t():t;if(Mj)return p;try{const h=window.sessionStorage.getItem(e);return h?a(h):p}catch(h){return console.warn(`Error reading sessionStorage key ${e}:`,h),p}},[t,e,a]),[l,c]=f.useState(()=>r?i():t instanceof Function?t():t),u=nE(p=>{Mj&&console.warn(`Tried setting sessionStorage key ${e} even though environment is not a client`);try{const h=p instanceof Function?p(i()):p;window.sessionStorage.setItem(e,s(h)),c(h),window.dispatchEvent(new StorageEvent("session-storage",{key:e}))}catch(h){console.warn(`Error setting sessionStorage key ${e}:`,h)}}),d=nE(()=>{Mj&&console.warn(`Tried removing sessionStorage key ${e} even though environment is not a client`);const p=t instanceof Function?t():t;window.sessionStorage.removeItem(e),c(p),window.dispatchEvent(new StorageEvent("session-storage",{key:e}))});f.useEffect(()=>{c(i())},[e]);const m=f.useCallback(p=>{p.key&&p.key!==e||c(i())},[e,i]);return g1("storage",m),g1("session-storage",m),[l,u,d]}var mot=typeof window>"u";function pot(e={}){let{initializeWithValue:t=!0}=e;mot&&(t=!1);const[n,r]=f.useState(()=>t?{width:window.innerWidth,height:window.innerHeight}:{width:void 0,height:void 0}),s=uot(r,e.debounceDelay);function a(){(e.debounceDelay?s:r)({width:window.innerWidth,height:window.innerHeight})}return g1("resize",a),uU(()=>{a()},[]),n}const Ny=()=>{const[e,t]=Ty("deviceLocation",void 0),n=f.useCallback(a=>{t(a),a?(Zt("lat",a.latitude.toString()),Zt("long",a.longitude.toString())):(lm("lat"),lm("long"))},[t]),[r,s]=f.useState(void 0);return f.useEffect(()=>{if(!navigator.geolocation||!("permissions"in navigator))return;const a=()=>{navigator.geolocation.getCurrentPosition(i=>{n({latitude:i.coords.latitude,longitude:i.coords.longitude})},null,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};navigator.permissions.query({name:"geolocation"}).then(i=>{s(i.state),i.state==="granted"?a():n(void 0),i.addEventListener("change",()=>{s(i.state),i.state==="denied"?n(void 0):i.state==="granted"&&a()})}).catch(()=>{})},[n]),f.useMemo(()=>({location:e,permissionStatus:r,isPreciseLocationEnabled:r==="granted"&&!isNaN(e?.latitude??0)&&!isNaN(e?.longitude??0)}),[e,r])},Zv=/<q>(.*?)<\/q>/s,TX=(e,t)=>{if(!e||!t)return e;const n=e.trim(),r=n[n.length-1];return r&&!["!","?",".",":",";"].includes(r)?`${n}. ${t}`:`${n} ${t}`};function cu(e,t){if(!e)return{quote:null,actualQuery:null};if(!Zv.test(e)){const l=t?.join(" ").trim();return{quote:null,actualQuery:l?TX(e,l):e}}const s=e.match(Zv)?.[1]||null;let a=e.replace(Zv,"").trim();const i=t?.join(" ").trim();return i&&(a=TX(a,i)),{quote:s,actualQuery:a}}function hot(e,t){const n=t.trim();return n?Zv.test(e)?e.replace(Zv,`<q>${n}</q>`):e.length===0?n:`<q>${n}</q> ${e}`:e}class fU extends cb{name="PplxStreamError"}var kj={};const got={submitQuery:()=>{ne.error("submitQuery must be used within PerplexityQueryStateProvider")},handleBotStep:()=>{ne.error("handleBotStep must be used within PerplexityQueryStateProvider")},deleteLastResult:()=>{ne.error("deleteLastResult must be used within PerplexityQueryStateProvider")},shouldShowProductFeedback:!1,shouldShowRecruitmentBanner:!1,feedbackEntryUUID:null,quote:null,setQuote:()=>{},updateLocalStatePostStream:()=>{}},yot=3,vot=6,xot=2,tye=Wt("PplxQueryStateContext",got),bot=(e,t,n,r,s)=>{if(!(n&&!r)&&!(e&&!t))return r?r.backend_uuid:s},_ot=({children:e,shouldFetchSettings:t})=>{const n="perplexity-query-state-provider",r=gt(),{trackEvent:s}=Ne(),{session:a}=Et(),i=Zn(),{location:l}=Ny(),[c,u]=f.useState(null),{device:{isWindowsApp:d,isMobile:m,isSamsungBrowser:p}}=At(),h=Pa(),g=rot(),{isMaxAssistantMode:y}=hn(),{sources:v,recency:x,isCopilot:b,setAskInputReasoningMode:_,setAskInputReasoningModelPreference:w,configuredModel:C}=Jn(),{specialCapabilities:S}=Zr(),E=hi(),{firstResult:M,lastResult:k,actions:{setCurrentStreamId:A}}=Vt(),{hasAiProfile:R,queryCountMobile:O}=ma({enabled:t,reason:n}),[L,P]=f.useState(!1),[N,T]=f.useState(!1),[j,F]=f.useState(null),U=rt(),{addKeyRequiringRerender:V}=Wd(),{value:$}=It({flag:"skip-search-button",subjectType:"visitor_id",defaultValue:!1}),z=oot(),{isIncognito:Q}=Ra({reason:n}),[Y,W]=f.useState(0),{sendQueryEventSingular:X,maybeSendNthQueryEventSingular:G,sendResurrectedActivationEventSingular:J}=sU(),q=Hr(),te=CQe(),{value:re}=Rr({flag:"power-user-recruitment-banner",defaultValue:!1}),{isMaxUpsellEnabled:ae}=Eu(),{isMax:fe}=_t(),{value:{max_results:de,num_days:ve}}=Vhe({flag:"browser-history-summary-settings",defaultValue:{max_results:500,num_days:7}}),_e=cU(),Se=Fge(),be=f.useCallback(({rawQuery:je,dslQuery:Me,fork:Ye,inPageOverride:at,copilotOverride:it,existingEntryUUID:ke,existingUuid:Ue,deletedUrls:Ot,redoSearch:yt,attachments:St,collection:et,modelPreferenceOverride:He,isRelatedQuery:Be,isSponsored:ut,relatedQueryUUID:kt,inDomain:$t,inPage:tn,newFrontendContextUUID:nn,existingFrontendContextUUID:Cn,promptSource:Pn,querySource:Xe,sourcesOverride:Ve,submitFromArticleOverride:lt,timeFromFirstType:qt,utmSource:ln,disableWidgets:$n,isNavSuggestionsDisabled:we,deviceLocation:qe,shouldRedirectToBackendUUID:De,onThreadSlugReceived:tt,incognitoOverride:Qe,mentions:Pt=[],shouldUsePageStartTime:Sn,side_by_side_metadata:Fn,frontendUUID:cn=crypto.randomUUID(),alwaysSearchOverride:Lr,overrideNoSearch:Ts,resumingQuery:Iu,resumeFromUuid:fc,resumeFromPlaceholder:Ru,cometIsMissionControl:lp,maxAssistantEnabled:nf,refinementFiltersMetadata:cp})=>{if(je.trim().length===0&&!c){ne.error("Submit failed: empty query");return}const ft=Pt.filter(dr=>dr.type==="tab").map(dr=>({id:Number(dr.id),url:dr.url}));if(!U&&!p&&!S.unlimitedProSearch){const dr=Y+1;m&&!Kh()?dr%xot===1&&V("visitor-gate"):dr%vot===0?V("visitor-gate-ii"):dr%yot===0&&V("visitor-gate")}const kr=!!nn,pa=[...new Set([...St??[]])].slice(0,_e).filter(dr=>!Ot?.includes(dr)),il=fn()&&(!!kj.NEXT_PUBLIC_IS_SIDECAR_BUILD||!!ft?.length),sf=il?lo():void 0,m0=(it??b)||!!kj.NEXT_PUBLIC_IS_SIDECAR_BUILD||S.unlimitedProSearch,hw=m0?"copilot":"concise";let Fa=C??le.DEFAULT;Fa===le.DEFAULT&&S.unlimitedProSearch&&(Fa=le.PRO),(h===ie.RESEARCH||h===ie.STUDIO||h===ie.STUDY)&&(Fa=h===ie.RESEARCH?le.ALPHA:h===ie.STUDIO?le.BETA:le.STUDY,ae&&fe&&(Fa=C));const af=zfe.some(dr=>dr.is_reasoning_model&&dr.search_model===Fa);He?Fa=He:(_(af),af||w(null));const up=bot(kr,Ye??!1,M?.backend_uuid===ke,lt??null,k?.backend_uuid??null);wRe(),CRe(()=>{s("resurrected activated"),J()}),Ur(Fa)===ie.RESEARCH?SRe():Ur(Fa)===ie.STUDIO&&ERe();const mc=!!up,of=M?.frontend_context_uuid===Cn,p0=iot({isFollowup:mc,isInSameThread:of,sourcesOverride:Ve,firstResultSources:M?.sources?.sources,firstResultRecency:M?.search_recency_filter,defaultSources:v??[],defaultRecency:x??null}),{finalRecency:dp,finalSources:gw}=p0;let yw;q.mcpTools&&(yw=Object.entries(q.mcpTools).filter(([dr])=>!q.mcpDisabledServers?.has(dr)).flatMap(([dr,bw])=>{const hc=q.mcpToolsSettings?.[dr]??{};return bw.filter(lf=>{const _w=lf.tool?.name??lf.id??"",y0=hc[_w];return y0?y0.enabled!==!1:!0})}));const h0=aot({inPage:at??tn})||c,fp=(h0?hot(je,h0):je).trim();if(!fp){ne.error("Submit failed: empty query");return}const YT=ke==M?.backend_uuid||!up,pc=VYe({rawQuery:fp,fork:Ye,existingEntryUUID:ke,existingUuid:Ue,collection:et,isRelatedQuery:Be,newFrontendContextUUID:nn,existingFrontendContextUUID:Cn,submitFromArticleOverride:lt,isNavSuggestionsDisabled:we,isCopilot:m0,modelPreferenceSubmit:Fa,newAttachments:pa,firstResultFrontendContextUUID:M?.frontend_context_uuid,isPersonalized:R,forceNew:kr,querySource:Xe,lastResultBackendUUID:k?.backend_uuid,finalSources:gw,finalRecency:dp??void 0,uuid:cn,threadMetadataTitle:M?.thread_title,threadMetadataThreadUrlSlug:M?.thread_url_slug,side_by_side_metadata:Fn}),mp=zat({redoSearch:yt,collection:et,dslQuery:Me,isRelatedQuery:Be,isSponsored:ut,relatedQueryUUID:kt,inDomain:$t,inPage:tn,newFrontendContextUUID:nn,promptSource:Pn,querySource:Xe,timeFromFirstType:qt,utmSource:ln,disableWidgets:$n,isNavSuggestionsDisabled:we,isWindowsApp:d,isIncognito:Qe??Q,sessionId:a?.user?.id,modelPreferenceSubmit:Fa,clientPayloadUUID:sf,lastBackendUUID:up,deviceLocation:qe=qe??l,newAttachments:pa,threadMetadataRwToken:E,forceNew:kr,finalSources:gw,finalRecency:dp,mode:hw,frontendUUID:cn,entropyBrowser:i,existingEntryUUID:ke,deletedUrls:Ot,browserHistorySummaryNumDays:ve,mentions:Pt,side_by_side_metadata:Fn,reason:n,skipSearchEnabled:$,browserHistorySummaryMaxResults:de,sidecarTabId:q.sidecarSourceTab.tabId,sidecarTitle:q.sidecarSourceTab.title,sidecarUrl:q.sidecarSourceTab.url,sidecarSecondaryTabId:q.sidecarSourceTab.secondaryTab?.tabId,sidecarSecondaryUrl:q.sidecarSourceTab.secondaryTab?.url,sidecarSecondaryTitle:q.sidecarSourceTab.secondaryTab?.title,isFirstEntry:YT,alwaysSearchOverride:Lr,overrideNoSearch:Ts,cometMaxAssistantEnabled:nf||y,resumingQuery:Iu,resumeFromUuid:fc,cometIsMissionControl:lp,mcpTools:yw,refinementFiltersMetadata:cp});nn&&Se(fp,mp,mp.frontend_uuid),u(null);const vw={params:{...mp,version:ac},query_str:fp};function xw(dr){if(tt){if(un.isStatusFailed(dr))throw new fU("STREAM_FAILED_CHUNK_ERROR",{message:"failed status on first message"});if(!dr.thread_url_slug)throw new Error("thread_url_slug is required on first message");tt(dr.thread_url_slug)}De&&r.push(`/search/${dr.thread_url_slug}`)}const g0=te(vw,{onFirstMessageReceived:xw,placeholderChunk:Ru||{...pc,backend_uuid:ke||pme},timer:Sn?g():jl(void 0,{nowFromTimeOrigin:performance.now()}),reason:n});il&&sf&&Ihe({clientPayloadCacheKey:sf,cometBrowser:i,maxChars:z,attachedTabs:ft,includeSidecar:!!kj.NEXT_PUBLIC_IS_SIDECAR_BUILD,reason:n,cometState:q,requestId:g0.id.description}),A(g0.id.description)},[c,U,_e,b,C,h,k?.backend_uuid,M?.frontend_context_uuid,M?.sources?.sources,M?.search_recency_filter,M?.thread_title,M?.thread_url_slug,M?.backend_uuid,v,x,R,d,Q,a?.user,l,E,i,ve,$,de,q,te,g,A,Y,m,p,V,ae,fe,_,w,s,J,Se,z,r,y,S]),me=f.useCallback(je=>{Jat({response:je,isUserLoggedIn:U,submissionCount:Y,session:a??void 0,queryCountMobile:O,isWindowsApp:d,addKeyRequiringRerender:V,setSubmissionCount:W,setShouldShowProductFeedback:P,setShouldShowRecruitmentBanner:T,setFeedbackEntryUUID:F,trackEvent:s,sendQueryEventSingular:X,maybeSendNthQueryEventSingular:G,recruitmentBannerEnabled:re,reason:n})},[V,U,d,O,X,G,a,Y,s,re]),Ae=H5(),Ee=f.useCallback(async()=>{const je=k?.backend_uuid;!je||!E||(s("delete last result",{entryUUID:je}),await se.DELETE("/rest/entry/delete-ask-entry/{entry_uuid}",n,{params:{path:{entry_uuid:je}},body:{read_write_token:E}}),Ae(Me=>{if(!Me)return;const Ye=Me??[];if(Ye.length<1){r.push("/",void 0,"Delete last result");return}return Ye.slice(0,-1)}))},[k?.backend_uuid,E,s,Ae,r]);return o.jsx(tye.Provider,{value:{submitQuery:be,deleteLastResult:Ee,shouldShowProductFeedback:L,feedbackEntryUUID:j,quote:c,setQuote:u,shouldShowRecruitmentBanner:N,updateLocalStatePostStream:me},children:e})},Hs=()=>{const e=f.useContext(tye);if(!e)throw new Error("usePerplexityQueryState must be used within PerplexityQueryStateContext");return e},wot="/account/connectors",NX={GCAL_CONNECT:"gcal_connect",CONNECTOR_COMPLETE:"connector_complete"},Cot={UPSELL_CONNECTOR:"upsell-connector-channel"},xen="18334363285",h3=async(e,t)=>{try{const{error:n}=await se.POST("/rest/homepage-widgets/upsell/interacted","homepage upsell interaction tracking",{body:{upsell_name:e,upsell_instance_identifier:t||null},timeoutMs:Pe(),numRetries:1});n&&ne.error("Failed to mark upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}catch(n){ne.error("Error marking upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}},Sot=async(e,t)=>{try{const{error:n}=await se.POST("/rest/ntp/upsell/interacted","comet ntp upsell interaction tracking",{body:{upsell_name:e,upsell_instance_identifier:t||null},timeoutMs:Pe(),numRetries:1});n&&ne.error("Failed to mark NTP upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}catch(n){ne.error("Error marking NTP upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}},Eot=(e,t)=>e.filter(n=>n.name===t).map(n=>n.connection_uuid).filter(n=>n!=null),Mot=e=>({google_drive:"GOOGLE_DRIVE",onedrive:"ONEDRIVE",sharepoint:"SHAREPOINT",dropbox:"DROPBOX",box:"BOX",notion:"NOTION",notion_mcp:"NOTION_MCP",linear:"LINEAR",linear_alt:"LINEAR_ALT",wiley:"WILEY",gcal:"GCAL",outlook:"OUTLOOK",slack:"SLACK",github_mcp_direct:"GITHUB_MCP_DIRECT",asana_mcp_direct:"ASANA_MCP_DIRECT",asana_mcp_merge:"ASANA_MCP_MERGE",atlassian_mcp_direct:"ATLASSIAN_MCP_DIRECT",slack_direct:"SLACK_DIRECT",jira_mcp_merge:"JIRA_MCP_MERGE",confluence_mcp_merge:"CONFLUENCE_MCP_MERGE",microsoft_teams_mcp_merge:"MICROSOFT_TEAMS_MCP_MERGE",factset:"FACTSET",crunchbase:null,edgar:null,wiley_mcp_cashmere:null,cbinsights_mcp_cashmere:null,pitchbook_mcp_cashmere:null,statista_mcp_cashmere:null})[e]??null,kot=e=>e==="LINEAR"||e==="NOTION_MCP"||e==="LINEAR_ALT"||e==="SLACK"||e==="GITHUB_MCP_DIRECT"||e==="ASANA_MCP_DIRECT"||e==="ASANA_MCP_MERGE"||e==="ATLASSIAN_MCP_DIRECT"||e==="SLACK_DIRECT"||e==="JIRA_MCP_MERGE"||e==="CONFLUENCE_MCP_MERGE"||e==="MICROSOFT_TEAMS_MCP_MERGE",ben=e=>["gcal","outlook","factset","linear","linear_alt","notion_mcp","slack","github_mcp_direct","asana_mcp_direct","asana_mcp_merge","atlassian_mcp_direct","slack_direct","jira_mcp_merge","confluence_mcp_merge","microsoft_teams_mcp_merge","wiley_mcp_cashmere","cbinsights_mcp_cashmere","pitchbook_mcp_cashmere","statista_mcp_cashmere"].includes(e);var B0={};const Tot={logged_out_image_generation:Oe.IMAGE_GENERATION_IN_THREAD,logged_out_video_generation:Oe.VIDEO_GENERATION_IN_THREAD,subscription_upgrade_video_generation:Oe.VIDEO_GENERATION_IN_THREAD,missing_out_on_pro:Oe.MISSING_OUT_ON_PRO_IN_THREAD,auto_upgrade_to_pro:Oe.AUTO_UPGRADE_TO_PRO,pro_feature_limit_queries:Oe.PRO_FEATURE_LIMIT_BANNER,pro_feature_limit_files:Oe.PRO_FEATURE_LIMIT_BANNER,login_for_comet_agent_queries:Oe.LOGIN_FOR_COMET_AGENT_QUERIES_IN_THREAD,comet_agent_queries_rate_limited:Oe.COMET_AGENT_QUERIES_RATE_LIMITED_IN_THREAD,pro_upgrade:Oe.PRO_UPGRADE_IN_SIDE_HOMEPAGE,max_feature_limit_labs_queries:Oe.PRO_FEATURE_LIMIT_BANNER,enterprise_max_side:Oe.ENTERPRISE_MAX_UPSELL},Qb=(e,t,n)=>{const r=rt(),{openVisitorLoginUpsell:s}=ur({enabled:!r}),{trackEvent:a}=Ne(),{lastResult:i}=Vt(),{openModal:l}=xt(),c=fn(),u="?handle_upsell=true",{submitQuery:d}=Hs(),m=Zn(),{handleVerificationSuccess:p}=oat({origin:Oe.STUDENT_VERIFICATION_UPSELL}),h=B0.NEXT_PUBLIC_IS_SIDECAR_BUILD?"sidecar_thread":c?"search_results_page":void 0,{subscriptionTier:g}=_t(),{device:{isWindowsOS:y,isMacOS:v}}=At(),x=gt(),{handleConnect:b}=t3({reason:"upsell"}),{mutateAsync:_}=Ist({reason:"upsell"}),w=rU(),{handleCreateNewSpaceForThread:C}=nU(),{connectors:S}=ma({reason:"upsell"}),{handleDownloadClick:E}=Gst({isWindows:y,isUnsupportedDevice:!v&&!y}),M=Ho(),k=e?.cta_information?.merge_auth_token,A=e?.cta_information?.merge_auth_callback_uuid,R=U=>{if(U)try{return JSON.parse(U)}catch{return U}},{open:O,isReady:L}=jge({linkToken:R(k),onSuccess:()=>{A&&cpe({uuid:A,success:!0,reason:"Account successfully connected"}),x.push(window.location.pathname+u)}}),P=f.useCallback(async()=>{try{await m.setCometAsDefaultBrowser("set_default_browser")}catch{}},[m]);f.useEffect(()=>{if(!B0.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;const U=new BroadcastChannel(Cot.UPSELL_CONNECTOR);return U.onmessage=V=>{V.data.type===NX.CONNECTOR_COMPLETE&&(window.focus(),window.location.href=window.location.pathname+u)},()=>{U.close()}},[u]);const N=f.useCallback(()=>{if(e)switch(e.app_location){case Ic.MODAL:a("upsell modal opened",{entryUUID:i?.backend_uuid,upsellType:e.upsell_type,upsellName:e.name,cometSurface:h,subscriptionTier:g});break;case Ic.IN_THREAD:case Ic.IN_THREAD_BOTTOM:case Ic.IN_THREAD_INPUT:a("thread upsell banner clicked",{entryUUID:i?.backend_uuid,upsellType:e.upsell_type,upsellName:e.name,cometSurface:h,subscriptionTier:g});break;case Ic.SIDEBAR:case Ic.SIDE_CARD:a("side upsell clicked",{upsellType:e.upsell_type,upsellName:e.name,cometSurface:h});break}},[i,a,e,h,g]),T=f.useCallback(()=>{i?.query_str&&d({rawQuery:i.query_str,existingEntryUUID:i.backend_uuid,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:i.frontend_context_uuid,promptSource:"user",querySource:"rewrite-upsell",attachments:[],modelPreferenceOverride:e?.cta_information?.model_preference??"pplx_pro"})},[i,d,e]),j=f.useCallback(()=>{if(!e)return;const{permalink_new_tab:U,permalink:V}=e.cta_information??{};V&&(U?window.open(V,"_blank"):window.location.href=V)},[e]);return f.useCallback(()=>{if(!e)return;const U=e.cta===Ua.SHORTCUT_MODAL?e.cta_information?.recommended_shortcut?.name:void 0;h3(e.name,U),N();const V=Tot[e.name]??Oe.UNSPECIFIED_GENERALIZED_UPSELL;let $=i?.thread_url_slug?`/search/${i.thread_url_slug}${u}`:void 0;(window.location.pathname.startsWith("/b/mission-control")||window.location.pathname.startsWith("/b/assistants"))&&($=`/b/assistants${u}`);const Q=i?.thread_url_slug?`/search/${i.thread_url_slug}`:void 0;switch(e.cta){case Ua.SIGN_UP_OR_LOGIN:if(B0.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;s({title:e.title,description:e.description,origin:V});break;case Ua.PRO_UPGRADE:M({pitchMessage:e.cta_information?.upgrade_paywall_title?{title:e.cta_information.upgrade_paywall_title}:void 0,origin:V,defaultSegment:e.upsell_type===j2.UPGRADE_TO_ENTERPRISE?"business":void 0});break;case Ua.THREAD_TO_SPACE:{if(!i?.backend_uuid)return;w?C(i?.backend_uuid,i?.frontend_context_uuid):l("spaceCreateForThread",{entryUUID:i?.backend_uuid,frontendContextUUID:i?.frontend_context_uuid});break}case Ua.CONNECTOR:if(!B0.NEXT_PUBLIC_IS_SIDECAR_BUILD&&e.cta_information?.connector_type==="gcal"){const Y="gcal",W=Eot(S?.connectors??[],Y);for(const X of W)_({connectorName:Y,connectionUUID:X});b({connectorName:Y,redirectPath:$,unauthedRedirectPath:Q})}else B0.NEXT_PUBLIC_IS_SIDECAR_BUILD&&e.cta_information?.connector_type==="gcal"?window.open(`${window.location.origin}${wot}?connector_type=${NX.GCAL_CONNECT}`,"_blank"):ne.error("Unhandled upsell connector type",{connectorType:e.cta_information?.connector_type});break;case Ua.REWRITE_ANSWER:t&&i?.backend_uuid?lu({entryUUID:i?.backend_uuid,reason:"rewrite-upsell"}).catch(()=>{ne.error("Error terminating entry")}).finally(T):T();break;case Ua.PERMALINK:{j();break}case Ua.SET_DEFAULT_BROWSER:{P();break}case Ua.IMAGE_ANNOUNCEMENT_MODAL:{if(!e.image_asset||!e.image_asset_low_res||!e.button_text)return;let Y=e.cta;e.upsell_type===j2.DOWNLOAD_COMET&&(Y=Ua.COMET_DOWNLOAD),l("announcementImageModal",{imageUrlHd:e.image_asset,imageUrlLowRes:e.image_asset_low_res,title:e.title??"",description:e.description??"",upsellInformation:{...e,cta:Y}});break}case Ua.COMET_DOWNLOAD:{E({upsellName:e.name});break}case Ua.MERGE_AUTH_CONNECTOR:{k&&L&&O();break}case Ua.SHORTCUT_MODAL:{const Y=e.cta_information?.recommended_shortcut;l("taskShortcutModal",{source:"thread_upsell_create",onCreated:n?.hideUpsell,shortcut:Y?{title:Y.name,prompt:Y.prompt}:void 0});break}case Ua.OPEN_SHEERID_MODAL:{a("sheerid form redirect",{verificationLocationSource:Oe.STUDENT_VERIFICATION_UPSELL,verificationRoleType:"student"}),l("sheerIdModal",{onSuccess:p,type:"student"});break}}},[e,N,i?.thread_url_slug,i?.backend_uuid,i?.frontend_context_uuid,u,s,M,l,t,w,C,S?.connectors,b,_,T,j,P,E,p,k,L,O,n?.hideUpsell,a])},g3=I.memo(({upsellInformation:e,inFlight:t,position:n,onButtonClick:r,isLoading:s,textButtonIfSecondary:a=!1,hideUpsell:i,verticalLayout:l=!1})=>{const{$t:c}=Z(),u=Qb(e,t,{hideUpsell:i}),d=f.useCallback(()=>{r?.(),u()},[r,u]),m=f.useMemo(()=>{if(n==="router_steps")return"inverted";switch(e?.button_color){case Rw.MAX_COLOR:return"maxGold";case Rw.PRIMARY_COLOR:return"primary";case Rw.INVERTED:return"inverted";default:return"common"}},[e?.button_color,n]),p=f.useCallback(h=>{let g;e?.icon_reference==="labs"?g=o.jsx(ce,{icon:ar,size:"sm"}):e?.icon_reference==="comet_download"&&(g=o.jsx(mb,{size:16}));const y={size:h?"regular":"small",onClick:d,text:e?.button_text,leadingComponent:g,textClassName:h?"!text-sm":void 0,fullWidth:!0,isLoading:s};return a&&e?.button_color===Rw.SECONDARY_COLOR?o.jsx(Te,{...y,variant:"super",noPadding:!0}):o.jsx(he,{...y,variant:m})},[m,d,e?.button_color,e?.button_text,e?.icon_reference,a,s]);if(e?.cta_information?.secondary_permalink){const h=e.cta_information.secondary_permalink,g=e.cta_information.secondary_permalink_new_tab,y=o.jsx(Te,{text:c({defaultMessage:"Learn more",id:"TdTXXf940t"}),fullWidth:!0,variant:"super",textClassName:"!text-sm",noPadding:!0,onClick:()=>{g?window.open(h,"_blank"):Hi(h,"Learn more from upsell")}});return o.jsx("div",{className:`gap-md flex ${l?"flex-col":"flex-row"}`,children:l?o.jsxs(o.Fragment,{children:[p(!0),y]}):o.jsxs(o.Fragment,{children:[y,p(!0)]})})}return p(!1)});g3.displayName="UpsellButton";function Not({onClose:e,announcementImageModal:t}){const{imageUrlHd:n,imageUrlLowRes:r,title:s,description:a,upsellInformation:i}=t,[l,c]=f.useState(!1),[u,d]=f.useState(!1);return f.useEffect(()=>{const m=new Image;m.src=r,m.onload=()=>d(!0);const p=new Image;return p.src=n,p.onload=()=>c(!0),()=>{m.onload=null,p.onload=null}},[r,n]),o.jsx(en,{isOpen:!0,onClose:e,variant:"hide-chrome",actionList:ue,children:o.jsxs(H,{variant:"background",className:B("p-sm mx-auto flex w-[32rem] max-w-lg flex-col overflow-hidden rounded-xl transition-opacity duration-150 ease-in",{"opacity-100":u,"opacity-0":!u}),children:[o.jsxs("div",{className:"relative w-full overflow-hidden rounded-lg",children:[o.jsx("img",{src:r,alt:s,className:"w-full scale-[1.01] blur-[0.5px]"}),o.jsx("img",{src:n,alt:s,className:B("absolute inset-0 w-full transition-opacity duration-200 ease-out",{"opacity-100":l,"opacity-0":!l})})]}),o.jsxs("div",{className:"p-md gap-sm flex flex-col items-center text-center",children:[s&&o.jsx(D,{variant:"entry-title-200",children:s}),a&&o.jsx(D,{variant:"small",color:"light",className:"mb-sm px-1",children:a}),o.jsx("div",{className:"w-1/2",children:o.jsx(g3,{upsellInformation:i,hideUpsell:e,verticalLayout:!0})})]})]})})}function nye(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}const jot=({children:e,className:t,delimiter:n="",...r})=>{const s=I.Children.toArray(e),a=s.map((i,l)=>{if(I.isValidElement(i)&&i.type===rye){const c=i.props.id;return o.jsxs(I.Fragment,{children:[i,l!==s.length-1&&o.jsxs(D,{className:"inline-flex !text-inherit",children:[" ",n," "]})]},c)}return null});return o.jsx("div",{className:`gap-sm flex items-center ${t}`,...r,children:a})},rye=({children:e})=>o.jsx(o.Fragment,{children:e}),Pl=jot,gr=rye,Aot=1080;function Za(e){return typeof e=="string"?TS(e).startsWith("image/"):e.type.startsWith("image/")}const sye=(e,t=32)=>`https://www.google.com/s2/favicons?sz=${t}&domain=${e}`,Iot=(e,t,n)=>{const r=Math.min(e,t);if(r<=n)return{width:e,height:t};const s=n/r;return{width:Math.round(e*s),height:Math.round(t*s)}},Rot=(e,t=Aot,n=.98)=>new Promise((r,s)=>{if(!Za(e)){s(new Error("File is not an image."));return}const a=document.createElement("canvas"),i=a.getContext("2d",{alpha:!0,colorSpace:"srgb"}),l=new Image,c=URL.createObjectURL(e);if(!i){s(new Error("Could not get canvas context"));return}i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",l.onload=()=>{const u=Iot(l.width,l.height,t);a.width=u.width,a.height=u.height;const d="image/jpeg",m=n;i.fillStyle="#fff",i.fillRect(0,0,a.width,a.height),i.drawImage(l,0,0,u.width,u.height),a.toBlob(p=>{if(!p){s(new Error("Failed to create blob from canvas"));return}const g=e.name.replace(/\.[^/.]+$/,"")+".jpg",y=new File([p],g,{type:d});URL.revokeObjectURL(c),r(y)},d,m)},l.onerror=()=>{URL.revokeObjectURL(c),s(new Error("Failed to load image."))},l.src=c}),Pot={"my.apps.factset.com":"www.factset.com"},zi=I.memo(({domain:e,overrideIconUrl:t,size:n=16,hideBorder:r=!1,className:s,...a})=>{const i=Pot[e]||e,l=sye(i,128),c=f.useMemo(()=>t||l,[t,l]),[u,d]=f.useState(!0);f.useEffect(()=>{d(!0)},[c]);const m=f.useMemo(()=>({width:n,height:n}),[n]),p=f.useMemo(()=>({width:n*.7,height:n*.7}),[n]);return o.jsxs("div",{style:{width:n,height:n},className:B("relative shrink-0 overflow-hidden rounded-full",s),...a,children:[u?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:B("rounded-inherit absolute inset-0",!r&&"bg-white")}),o.jsx("img",{className:"relative block",src:c,alt:`${e} favicon`,width:n,height:n,onLoad:h=>{const g=h.target,y=t!==void 0||g.naturalWidth!==16||g.naturalHeight!==16;d(y||e!==i)},onError:()=>{d(!1)},style:{width:n,height:n}})]}):o.jsx(H,{variant:"subtler",style:m,className:"flex items-center justify-center",children:o.jsx(D,{color:"ultraLight",children:o.jsx(ce,{icon:$m,className:"relative block",style:p})})}),!r&&o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"})]})});zi.displayName="CitationFavicon";const Xo={PDF:"pdf",TXT:"txt",CSV:"csv",XLSX:"xlsx",DOCX:"docx",PPTX:"pptx",MARKDOWN:"md",JSON:"json",JPG:"jpg",JPEG:"jpeg",PNG:"png"},_en=e=>!!(Bb(e)===Xo.PDF||Yb(e)),Oot=e=>{const t=Bb(e);if(Yb(e))return dm;switch(t){case Xo.TXT:return vo;case Xo.MARKDOWN:return vo;case Xo.PDF:return dm;case Xo.XLSX:return pb;case Xo.CSV:return NPe;case Xo.DOCX:return TPe;case Xo.PPTX:return kPe;case Xo.JPG:case Xo.JPEG:case Xo.PNG:return VM;default:return cm}},Lot={[Tt.GOOGLE_DRIVE]:FPe,[Tt.ONEDRIVE]:DPe,[Tt.SHAREPOINT]:LPe,[Tt.DROPBOX]:OPe,[Tt.BOX]:PPe,[Tt.GENERATED_IMAGE]:RPe,[Tt.GENERATED_VIDEO]:IPe,[Tt.NOTION]:APe,[Tt.WILEY]:jPe,[Tt.LOCAL]:xie},mU=I.memo(({url:e,isConversationHistory:t,isMemory:n,isInlineAttachment:r,connectionType:s,isAttachment:a,isPatent:i,isClientContext:l})=>{const c=f.useMemo(()=>{const u=Kb(e),d=a?Oot(e):null;if(t)return o.jsx(ce,{icon:UPe,size:"xs"});if(i)return o.jsx(ce,{icon:bie,size:"xs"});if(n)return o.jsx(ce,{icon:BPe,size:"xs"});if(r)return o.jsx(ce,{icon:L7,size:"xs"});if(s){const m=Lot[s];return m?o.jsx(ce,{icon:m}):o.jsx(zi,{domain:u})}else return a?o.jsx(ce,{icon:d||xie,size:"xs"}):l?o.jsx(ce,{icon:VPe,size:"xs"}):o.jsx(zi,{domain:u})},[e,t,n,r,s,a,i,l]);return o.jsx("div",{className:"flex size-4 items-center justify-center",children:c})});mU.displayName="Icon";const pU=I.memo(({url:e,source:t,isAttachment:n,connectionType:r,isConversationHistory:s})=>{const a=Z(),i=f.useMemo(()=>{if(s)return a.formatMessage({defaultMessage:"library",id:"B7J+pmy9R5"});if(t!=null)return t;let l;return n?l=p3(e):r?l=Yv(r):l=Ta(e),l.replace(/\.[^.]*$/,"")},[e,t,n,r,s,a]);return o.jsx(o.Fragment,{children:i})});pU.displayName="Source";const aye=I.memo(({url:e,source:t,isAttachment:n,isClientContext:r,variant:s="small",color:a="default",truncate:i=!0,className:l,connectionType:c,isInlineAttachment:u,isMemory:d,isPatent:m,isConversationHistory:p,name:h,snippet:g,...y})=>o.jsxs(H,{className:"flex items-center gap-x-1.5",children:[o.jsx(D,{variant:s,className:"relative -mt-px flex-none",color:d||p?"light":a,children:o.jsx(mU,{url:e,isConversationHistory:p,isMemory:d,isInlineAttachment:u,connectionType:c,isAttachment:n,isPatent:m,isClientContext:r})}),h&&o.jsx(D,{variant:s,color:a,...y,className:B(l,"min-w-0 truncate"),children:h}),o.jsx(D,{variant:s,color:h?"light":a,className:B("line-clamp-1 min-w-0 grow break-all transition-all duration-300",{"max-w-[150px]":t!=null&&i},l),...y,children:o.jsx(pU,{url:e,source:t,isAttachment:n,connectionType:c,isMemory:d,isConversationHistory:p})})]}));aye.displayName="CitationDomainRoot";const Oo=Object.assign(aye,{Icon:mU,Source:pU}),Xb=I.memo(({isOpen:e,onClose:t,imgProps:n,alt:r,width:s,height:a,origin:i,onDownload:l,footer:c})=>{const{url:u,name:d,showCitation:m=!0}=i||{},p=fa(),h=f.useCallback(g=>{g.stopPropagation(),l?.()},[l]);return o.jsxs(en,{onClose:t,isOpen:e,variant:"hide-chrome",disableAnimation:!1,removeScroll:!p,modalClassname:"z-[100]",children:[o.jsx("div",{className:"flex h-screen w-screen place-content-center",onClick:t,children:o.jsxs("div",{className:B("gap-md p-md md:p-lg flex w-full flex-col",{"md:pb-md":m&&(u||l)}),children:[o.jsx("div",{className:"relative grow",children:o.jsx("div",{className:"absolute inset-0 size-full",children:o.jsx("img",{width:s,height:a,...n,alt:r,className:"size-full object-contain"})})}),m&&(u||l)?o.jsxs("div",{className:"gap-sm flex w-full flex-row justify-center",children:[u&&o.jsx(Ge,{href:u,target:"_blank",children:o.jsxs(H,{variant:"subtle",className:"gap-x-xs p-sm flex items-center rounded-full",children:[o.jsx(Oo,{url:u,source:d,isAttachment:!1}),o.jsx(D,{variant:"small",className:"pr-xs",children:o.jsx(ce,{icon:ao,size:"xs"})})]})}),l&&o.jsx(H,{as:"button",onClick:h,variant:"subtle",className:"gap-x-xs p-sm flex !aspect-square w-9 items-center justify-center rounded-full",children:o.jsx(ce,{icon:$Pe,size:"sm"})})]}):null,c]})}),o.jsx(he,{onClick:t,icon:BM,extraCSS:"!fixed top-md right-md shadow-sm",size:"small",pill:!0,ariaLabel:"Close"})]})});Xb.displayName="LightboxImage";const fs=I.memo(({src:e,lightboxSrc:t,alt:n,fadeIn:r,fallbackSrc:s,fallback:a,hasShadow:i=!1,includeLightBoxModal:l=!0,lightboxFooter:c,origin:u,draggable:d=!0,imageClassName:m,maskClassName:p,containerClassName:h,rounded:g="md",onClick:y,AIProps:v,authorName:x,authorUrl:b,onLoad:_,onFail:w,softBlockSaveImage:C=!1,imageRef:S,imageProps:E,testId:M,onDownload:k,...A})=>{const[R,O]=f.useState(!1),[L,P]=f.useState(!1),[N,T]=f.useState(!1),j=f.useRef(null),{isAI:F,AILabel:U}=v||{isAI:!1,AILabel:""},V=f.useCallback(()=>{O(!0),w?.()},[]),$=f.useCallback(()=>{P(!0),_?.()},[P,_]);f.useEffect(()=>{if(j.current){if(j.current.complete){$();return}j.current.src||(j.current.src=e)}},[e,$,j]);const z=B(m,"transition-all ease-in-out",{"opacity-100 duration-200 scale-100":L&&r,"opacity-0 scale-[0.98]":!L&&r,"hidden opacity-0":R&&!s,"max-h-[90vh]":l,"cursor-zoom-in hover:shadow-lg duration-200 ":l&&!N}),Q=f.useMemo(()=>({className:z,src:e,alt:n,onError:V,onClick:()=>T(!0),...E}),[n,z,E,V,e]),Y=f.useMemo(()=>({ref:j,onLoad:$,...Q}),[$,Q]),W=f.useMemo(()=>({...Q,src:t??e}),[t,Q,e]),X=f.useCallback(q=>{q.stopPropagation()},[]),G=o.jsxs(o.Fragment,{children:[o.jsx(D,{variant:"tiny",color:"white",className:"px-xs py-two h-5 rounded-md bg-black/60 opacity-0 transition-all group-hover:opacity-100",children:o.jsxs(Pl,{className:"gap-xs",children:[o.jsx(gr,{id:"authorName",children:x}),b?o.jsx(gr,{id:"authorDomain",children:Ta(b)}):null]})}),o.jsx("div",{className:"size-xs bg-black/60 opacity-0 transition-all group-hover:opacity-100"})]}),J=f.useCallback(()=>T(!1),[]);if(R){if(s&&j.current)j.current.src=s;else if(a!==void 0)return a}return o.jsxs(o.Fragment,{children:[o.jsx("div",{onClick:y,className:h,"data-testid":M,children:o.jsxs("div",{className:B("bg-subtler group relative size-full overflow-hidden",p,{"shadow-md":i&&L,"transition-all duration-200 ease-in-out hover:scale-[1.02] hover:shadow-lg":i,"rounded-sm":g==="sm","rounded-md":g==="md",rounded:g===!0}),children:[F&&o.jsxs("div",{className:"bottom-xs right-xs absolute z-10 flex items-center justify-center",children:[o.jsx("div",{children:o.jsx(D,{variant:"tiny",color:"white",className:"gap-x-two px-xs py-two flex h-5 items-center rounded-md bg-black/60 opacity-0 transition-all group-hover:opacity-100",children:o.jsx("span",{children:U})})}),o.jsx("div",{className:"size-xs bg-black/60 opacity-0 transition-all group-hover:opacity-100"}),o.jsx("div",{children:o.jsx(D,{variant:"tiny",color:"white",className:"gap-x-two p-two flex h-5 items-center rounded-md bg-black/60",children:o.jsx(ce,{icon:WPe,size:"xs"})})})]}),x&&(b?o.jsx(Ge,{href:b??"",target:"_blank",onClick:X,className:"bottom-xs right-xs absolute z-10 flex items-center justify-center",children:G}):o.jsx("div",{onClick:X,className:"bottom-xs right-xs absolute z-10 flex items-center justify-center",children:G})),C&&!F&&o.jsx("div",{className:"absolute inset-0",onClick:l?()=>T(!0):void 0}),o.jsx("img",{width:A.width,height:A.height,alt:n,...Y,ref:nye([S,j]),draggable:d})]})}),l&&o.jsx(Xb,{onClose:J,isOpen:N,imgProps:W,origin:u,width:A.width,height:A.height,alt:n,onDownload:k,footer:c})]})});fs.displayName="Image";const oye=I.memo(({isOpen:e,onClose:t,onCapture:n})=>{const r=f.useRef(null),s=f.useRef(null),a=f.useRef(null),[i,l]=f.useState(!1),[c,u]=f.useState(null),[d,m]=f.useState(null),p=f.useCallback(async()=>{try{a.current&&a.current.getTracks().forEach(w=>w.stop());const _=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"}});a.current=_,r.current&&(r.current.srcObject=_,l(!0),m(null))}catch{m("Unable to access camera. Please check your permissions."),l(!1)}},[]),h=f.useCallback(()=>{a.current&&(a.current.getTracks().forEach(_=>_.stop()),a.current=null,l(!1)),r.current&&(r.current.srcObject=null)},[]),g=f.useCallback(()=>{if(r.current&&s.current){const _=r.current,w=s.current,C=w.getContext("2d");if(C){w.width=_.videoWidth,w.height=_.videoHeight,C.drawImage(_,0,0,w.width,w.height);const S=w.toDataURL("image/jpeg",.95);u(S),h()}}},[h]),y=f.useCallback(()=>{u(null),p()},[p]),v=f.useCallback(()=>{m(null),p()},[p]),x=f.useCallback(()=>{h(),u(null),m(null),t()},[h,t]),b=f.useCallback(async()=>{if(c)try{const w=await(await fetch(c)).blob(),C=new File([w],"selfie.jpg",{type:"image/jpeg"});n(C),x()}catch{m("Failed to process the image. Please try again.")}},[c,n,x,m]);return f.useEffect(()=>(e&&!c&&!d&&p(),()=>{h()}),[e,c,d,p,h]),o.jsxs(en,{isOpen:e,onClose:x,title:"Take a Selfie",children:[o.jsx("div",{className:"p-lg",children:d?o.jsxs("div",{className:"gap-md flex h-[400px] flex-col items-center justify-center",children:[o.jsx(D,{variant:"base",color:"red",children:d}),o.jsx(he,{text:"Try again",variant:"primary",onClick:v})]}):c?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-subtler relative aspect-video overflow-hidden rounded-lg",children:o.jsx(fs,{src:c,alt:"Captured selfie",className:"size-full object-contain"})}),o.jsxs("div",{className:"mt-lg gap-sm flex justify-center",children:[o.jsx(he,{text:"Retake",variant:"border",onClick:y}),o.jsx(he,{text:"Use this photo",variant:"primary",onClick:b})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-subtler relative aspect-video overflow-hidden rounded-lg",children:[o.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"size-full object-contain"}),!i&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx(D,{variant:"small",color:"light",children:"Starting camera..."})})]}),o.jsxs("div",{className:"mt-md gap-xs flex flex-col items-center",children:[o.jsx(D,{variant:"small",color:"light",className:"text-center",children:"Position your face in the center of the frame"}),o.jsx(D,{variant:"tiny",color:"ultraLight",className:"text-center",children:"Make sure your face is well-lit and clearly visible"})]}),o.jsx("div",{className:"mt-lg flex justify-center",children:o.jsx(he,{text:"Take photo",icon:D7,variant:"primary",onClick:g,disabled:!i})})]})}),o.jsx("canvas",{ref:s,className:"hidden"})]})});oye.displayName="CameraCaptureModal";function jX(e,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}function ql({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const s=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,i]=f.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=f.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,d=f.useRef(!1);f.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[m,p,h]=f.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:b,top:_,width:w,height:C,bottom:S,right:E,x:M,y:k}=l.current.element.getBoundingClientRect(),A={left:b,top:_,width:w,height:C,bottom:S,right:E,x:M,y:k};l.current.element instanceof HTMLElement&&r&&(A.height=l.current.element.offsetHeight,A.width=l.current.element.offsetWidth),Object.freeze(A),d.current&&!Bot(l.current.lastBounds,A)&&i(l.current.lastBounds=A)};return[x,u?jX(x,u):x,c?jX(x,c):x]},[i,r,c,u]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",h,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function y(){l.current.element&&(l.current.resizeObserver=new s(h),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",h,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{h()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const v=x=>{!x||x===l.current.element||(g(),l.current.element=x,l.current.scrollContainers=iye(x),y())};return Fot(h,!!t),Dot(p),f.useEffect(()=>{g(),y()},[t,h,p]),f.useEffect(()=>g,[]),[v,a,m]}function Dot(e){f.useEffect(()=>{const t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function Fot(e,t){f.useEffect(()=>{if(t){const n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[e,t])}function iye(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:s}=window.getComputedStyle(e);return[n,r,s].some(a=>a==="auto"||a==="scroll")&&t.push(e),[...t,...iye(e.parentElement)]}const Uot=["x","y","top","bottom","left","right","width","height"],Bot=(e,t)=>Uot.every(n=>e[n]===t[n]),sn=I.memo(({children:e,header:t,fullBleed:n,roundedClass:r,shadow:s,fullBleedBorderClassname:a,...i})=>o.jsxs(o.Fragment,{children:[t,o.jsxs(H,{...i,variant:i.variant??"raised",className:B("relative",{border:!n&&!i.variant,[r||"rounded-xl"]:!i.variant,"shadow-[0_1px_2px_0_rgba(0,0,0,0.03)]":s},i.className),children:[n&&o.jsx("div",{className:B("rounded-inherit pointer-events-none absolute inset-0 z-[1] border border-[black]/5 dark:border-[white]/5",a)}),e]})]}));sn.displayName="CanonicalCard";const zp=async({request:e,reason:t})=>{const{error:n,data:r}=await se.POST("/rest/deeper-research/download-asset",t,{body:e,timeoutMs:2e3,numRetries:1});if(n)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to download file",cause:n});return r.file_url},Vot=async({request:e,reason:t})=>{const{error:n,data:r}=await se.POST("/rest/deeper-research/export-asset",t,{body:e,timeoutMs:6e4,numRetries:1,parseAs:"blob"});if(n)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to export asset",cause:n});return r},$ot=async({request:e,reason:t})=>{const{error:n,data:r}=await se.POST("/rest/deeper-research/export-all-assets",t,{body:e,timeoutMs:6e4,numRetries:1,parseAs:"blob"});if(n)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to export all assets",cause:n});return r},lye=({reason:e})=>{const{$t:t}=Z(),{deprecatedOpenToast:n}=gn(),r=f.useCallback(async i=>{try{const l=await zp({request:i,reason:e}),c=document.createElement("a");c.href=l,c.download=i.filename,document.body.appendChild(c),c.click(),document.body.removeChild(c),n(t({defaultMessage:"Downloading file...",id:"/vA9NyIeJh"}),"success",3)}catch(l){ne.error("Failed to download S3 asset",{error:l,request:i,errorMessage:l instanceof Error?l.message:"Unknown error"}),n(t({defaultMessage:"Failed to download file",id:"RIWlU8NdpC"}),"error",3)}},[e,t,n]),s=f.useCallback(async(i,l="media",c=document.body)=>{try{const u=await fetch(i,{mode:"cors",cache:"no-cache"});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const d=await u.blob(),m=URL.createObjectURL(d),p=document.createElement("a");p.href=m,p.download=l,c.appendChild(p),p.click(),c.removeChild(p),URL.revokeObjectURL(m);const h=l.toLowerCase().includes(".mp4")||l.toLowerCase().includes(".mov")||l.toLowerCase().includes(".avi")||d.type.startsWith("video/"),g=t(h?{defaultMessage:"Video downloaded",id:"WHvofOjBQO"}:{defaultMessage:"Image downloaded",id:"nS5vxnEXaW"});n(g,"success",3)}catch(u){const d=l.toLowerCase().includes(".mp4")||l.toLowerCase().includes(".mov")||l.toLowerCase().includes(".avi");ne.error("Failed to download media asset",{error:u,mediaUrl:i,errorMessage:u instanceof Error?u.message:"Unknown error",errorType:u instanceof TypeError&&u.message.includes("Failed to fetch")?"CORS":"Unknown"});const m=t(d?{defaultMessage:"Failed to download video",id:"g8uGrbPLMV"}:{defaultMessage:"Failed to download image",id:"YPAbL/7UuZ"});n(m,"error",3)}},[t,n]),a=f.useCallback(async(i,l="image.jpg",c=document.body)=>s(i,l,c),[s]);return f.useMemo(()=>({downloadS3Asset:r,downloadImageAsset:a,downloadMediaAsset:s}),[a,r,s])},hU=({assetType:e,entryUUID:t,answerMode:n,reason:r,skip:s})=>{const{trackEventOnce:a}=Ne();f.useEffect(()=>{s||a("generated asset viewed",{assetType:e,entryUUID:t,answerMode:n,reason:r})},[a,e,t,n,r,s])},cye=I.memo(({videoUrl:e,hideTimeline:t=!0,aspectRatio:n=16/9,className:r,onLoadedData:s,isGenerated:a=!1,entryUUID:i,autoPlay:l=!1,muted:c=!0})=>{const u=f.useRef(null),[d,m]=f.useState(!1),[p,h]=f.useState(c),[g,y]=f.useState(0),[v,x]=f.useState(!1),[b,_]=f.useState(!1),[w,C]=f.useState(!0),{trackEvent:S}=Ne();hU({assetType:Bt.GENERATED_VIDEO,entryUUID:i??"",answerMode:"search",reason:"video-player",skip:!a||!b}),f.useEffect(()=>{if(b&&u.current){const Y=u.current,W=Y.mozHasAudio||!!Y.webkitAudioDecodedByteCount||!!(Y.audioTracks&&Y.audioTracks.length);C(W)}},[b,u]);const E=f.useCallback(Y=>{Y.stopPropagation(),u.current&&(u.current.paused?u.current.play():u.current.pause(),m(!d))},[d]),M=f.useCallback(Y=>{Y.stopPropagation(),u.current&&(u.current.muted=!p,h(!p))},[p]),k=f.useCallback(Y=>{if(Y.stopPropagation(),u.current){const W=Y.currentTarget.getBoundingClientRect(),J=(Y.clientX-W.left)/W.width*u.current.duration;u.current.currentTime=J}},[]);f.useEffect(()=>{const Y=setInterval(()=>{if(!u.current)return;const W=u.current.currentTime,X=u.current.duration;y(W/X)},16);return()=>clearInterval(Y)},[]);const{$t:A}=Z(),[R,O]=f.useState(!1),L=f.useCallback(()=>O(!0),[]),P=f.useCallback(()=>O(!1),[]),{trackEventOnce:N}=Ne(),{deprecatedOpenToast:T}=gn(),{isMobileStyle:j}=xe(),{downloadMediaAsset:F}=lye({reason:"GeneratedVideoCard"}),U=f.useCallback(()=>{e&&(N("generated video reported",{video_url:e}),T(A({defaultMessage:"Video reported",id:"Ir50ThCD/C"}),"success",3))},[A,e,T,N]),V=f.useCallback(async Y=>{Y.stopPropagation(),e&&(await F(e,"video.mp4",document.body),a&&S("generated asset downloaded",{assetType:Bt.GENERATED_VIDEO,answerMode:"search",entryUUID:i??"",reason:"video-player"}))},[e,F,a,i,S]),$=f.useMemo(()=>[{type:"default",text:A({defaultMessage:"Report",id:"x5Tz6MZH82"}),icon:p2,onClick:U}],[A,U]),z=f.useCallback(Y=>{Y.stopPropagation(),u.current&&(u.current.requestFullscreen?u.current.requestFullscreen():u.current.webkitEnterFullscreen?u.current.webkitEnterFullscreen():u.current.mozRequestFullScreen?u.current.mozRequestFullScreen():u.current.msRequestFullscreen&&u.current.msRequestFullscreen())},[]),Q=f.useMemo(()=>({aspectRatio:n}),[n]);return o.jsx(sn,{fullBleed:!0,className:B("group relative w-full overflow-hidden",r),style:Q,children:o.jsxs("div",{className:"relative size-full overflow-hidden",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:[o.jsx("video",{ref:u,loop:!0,autoPlay:l,playsInline:!0,muted:p,className:B("size-full object-cover",{"opacity-0":!b}),onPlay:()=>m(!0),onPause:()=>m(!1),onClick:E,onLoadedData:()=>{_(!0),s?.()},src:e+"#t=0.001"}),o.jsx("div",{className:B("absolute inset-0 flex flex-col justify-end transition-opacity duration-200",v||R||!d?"opacity-100":"opacity-0",b?"":"pointer-events-none opacity-0"),onClick:E,children:o.jsxs("div",{className:B("p-md flex w-full flex-col bg-gradient-to-t from-black/60 to-transparent pb-0",t?"pb-md":"pb-0"),children:[o.jsxs("div",{className:"gap-md flex",children:[o.jsx(H,{as:"button",onClick:E,children:o.jsx(D,{color:"white",children:o.jsx(ce,{icon:d?_ie:wie})})}),o.jsx(bn,{showTooltip:a&&!w,tooltipLayout:"right",tooltipText:A({defaultMessage:"This video does not have audio.",id:"V7VF0Hgi7t"}),asChild:!0,children:o.jsx(H,{as:"button",onClick:w?M:Y=>Y.stopPropagation(),className:B({"opacity-50":!w}),children:o.jsx(D,{color:"white",children:o.jsx(ce,{icon:p?Cie:Sie})})})}),o.jsx(H,{as:"button",className:"ml-auto",onClick:V,children:o.jsx(D,{color:"white",children:o.jsx(ce,{icon:mb})})}),o.jsx(H,{as:"button",onClick:z,children:o.jsx(D,{color:"white",children:o.jsx(ce,{icon:HPe})})}),o.jsx(Jt,{isMobileStyle:j,items:$,onOpen:L,onClose:P,wrapperClassName:"flex",children:o.jsx(H,{as:"button",className:"size-[20px]",children:o.jsx(D,{color:"white",children:o.jsx(ce,{icon:Eie})})})})]}),!t&&o.jsx("div",{className:"py-md cursor-pointer",onClick:k,children:o.jsx("div",{className:"relative h-0.5 flex-1 shrink-0 cursor-pointer overflow-hidden rounded-full bg-white/30",children:o.jsx("div",{className:"absolute left-0 top-0 size-full bg-white",style:{transformOrigin:"left",transform:`scaleX(${g})`}})})})]})})]})})});cye.displayName="VideoPlayer";const uye=I.memo(({loading:e,size:t=30})=>{const[n,{width:r,height:s}]=ql(),[a,i]=f.useState(0),[l,c]=f.useState(0),u=oo(0,0,.58,1),d=oo(.19,1,.22,1);f.useEffect(()=>{if(r&&s){const g=Math.ceil(r/t),y=Math.ceil(s/t);i(g),c(y)}},[r,s,t]);function m(g,y){const v=Math.ceil(g),x=Math.floor(y);return Math.floor(Math.random()*(x-v)+v)}const h=r?((g,y)=>{let v=Math.floor(y/g);return v%2!==0&&(v=v-1),v=Math.max(2,v),y/v})(t,r):t;return o.jsx("div",{ref:n,style:{gridTemplateColumns:`repeat(auto-fill, ${h}px)`,gridTemplateRows:`repeat(auto-fill, ${h}px)`},className:B("pointer-events-none absolute inset-0 z-[5] grid size-full gap-0",{"bg-raised":a===0||l===0}),children:o.jsx(Ke,{children:[...Array(a*l)].map((g,y)=>e?o.jsx(ge.div,{animate:{opacity:[.9,0],transition:{repeat:1/0,duration:.5,delay:m(0,10)/10,repeatType:"mirror",ease:u}},exit:{opacity:0,transition:{duration:1,ease:d}},className:"bg-base relative",children:o.jsx("div",{className:"bg-raised inset-0 size-full"})},y):null)})})});uye.displayName="BlinkingGrid";const Wot="IMAGE_GEN_PLACEHOLDER",Hot="VIDEO_GEN_PLACEHOLDER",dye=I.memo(({sourceImage:e,media:t,generating:n,square:r=!1,type:s="image",onMediaLoad:a,entryUUID:i})=>{const l=oo(.19,1,.22,1),[c,u]=f.useState(void 0),[d,m]=f.useState(!1),[p,h]=f.useState(!n),[g,y]=f.useState(!0),[v,{width:x}]=ql();f.useEffect(()=>{const S=s==="video"?Hot:Wot;t&&t.name!==S&&u(t)},[t,s]),f.useEffect(()=>{g&&y(!1)},[g]),f.useEffect(()=>{n&&(m(!1),h(!1))},[n]),f.useEffect(()=>{if(d&&!n){const S=setTimeout(()=>{h(!0)},1e3);return()=>clearTimeout(S)}},[d,n]);const _=((S,E)=>{let M=Math.floor(E/S);return M%2!==0&&(M=M-1),M=Math.max(2,M),E/M})(30,x),w=f.useCallback(()=>{m(!0),a?.()},[a]),C=f.useMemo(()=>({url:c?.url,name:c?.name,showCitation:!1}),[c?.url,c?.name]);return o.jsx("div",{ref:v,className:"relative size-full shrink-0",children:_!==0?o.jsxs(o.Fragment,{children:[o.jsx(uye,{loading:!p,size:_}),o.jsx(ge.div,{className:"relative size-full",style:{maskSize:`${_}px ${_}px`,maskPosition:"top left",maskRepeat:"repeat"},initial:{maskImage:p?`radial-gradient(black ${_/5*4}px, transparent 0px)`:`radial-gradient(black ${_/5}px, transparent 0px)`},animate:{maskImage:p?`radial-gradient(black ${_/5*4}px, transparent 0px)`:`radial-gradient(black ${_/5}px, transparent 0px)`},transition:{duration:1,ease:l},children:o.jsx(sn,{className:B(`relative size-full overflow-hidden !rounded-md ${p?"cursor-pointer":""}`,{"!rounded-none":r}),fullBleed:!0,children:o.jsx(ge.div,{animate:{filter:!p&&e?"blur(20px) saturate(2)":"none"},transition:{duration:1,ease:l},className:"grid size-full",children:o.jsx("div",{className:"relative w-full bg-black/40 dark:bg-white/40",children:o.jsxs(Ke,{children:[(e?.startsWith("http")||e?.startsWith("blob"))&&!p&&o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1,ease:l},className:"absolute inset-0 size-full",children:o.jsx("img",{src:e,alt:"Source",className:"block size-full object-cover"})},"source"),c?.image?.startsWith("http")&&o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:p?1:0},exit:{opacity:0},transition:{duration:1,ease:l},className:"absolute inset-0 size-full",children:s==="image"?o.jsxs(o.Fragment,{children:[o.jsx(fs,{src:c.image||c.thumbnail,alt:c.name||"Generated Image",origin:C,includeLightBoxModal:!!p,maskClassName:B("!bg-transparent",{"!rounded-none":r}),imageClassName:"block w-full h-full max-h-[100%] object-contain !bg-transparent",containerClassName:"w-full h-full absolute inset-0 z-10 !bg-transparent",onLoad:w}),o.jsx("img",{src:c.image||c.thumbnail,alt:c.name||"Generated Image",className:"absolute inset-0 block size-full object-cover blur-[20px] saturate-150"})]}):o.jsx(cye,{videoUrl:c.image,isGenerated:!0,aspectRatio:11/6,onLoadedData:w,className:"absolute inset-0 block size-full !rounded-none object-cover",entryUUID:i})},"generated")]})})})})})]}):null})});dye.displayName="GeneratedMediaLoader";const fye=I.memo(({setViewState:e})=>{const{$t:t}=Z(),n=f.useCallback(()=>e("create_avatar"),[e]);return o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("div",{className:"mb-lg relative -mx-6 h-[600px] overflow-hidden rounded-lg",children:[o.jsx(fs,{src:"https://r2cdn.perplexity.ai/virtual-tryon-intro-avatars.png",alt:"Avatar preview",imageClassName:"h-full w-full object-cover object-top pointer-events-none bg-base",containerClassName:"flex-shrink-0",includeLightBoxModal:!1,className:"pointer-events-none"}),o.jsxs("div",{className:"from-base gap-md p-lg absolute inset-x-0 bottom-0 flex h-1/2 flex-col items-center justify-end bg-gradient-to-t from-35% to-transparent",children:[o.jsx("span",{className:"font-editorial text-3xl font-light",children:o.jsx(pe,{defaultMessage:"Skip the guesswork",id:"xUwopw2/ud"})}),o.jsx(D,{variant:"small",className:"max-w-[350px] text-pretty text-center",color:"light",children:o.jsx(pe,{defaultMessage:"Upload a photo, create your avatar, and explore how outfits look on your digital self.",id:"Mtc6VpYStx"})})]})]}),o.jsx("div",{className:"-mt-md flex justify-center",children:o.jsx(he,{text:t({defaultMessage:"Create your avatar",id:"pkptzIeNWN"}),variant:"primary",onClick:n})})]})});fye.displayName="IntroView";const mye=I.memo(({setViewState:e,uploadSelfie:t,setLocalPreviewUrl:n,isSelfieUploading:r})=>{const{$t:s}=Z(),[a,i]=f.useState(!1),l=f.useCallback(async m=>{const p=m.target.files?.[0];if(p){const h=URL.createObjectURL(p);n(h),await t(p)&&e("choose_body")}m.target.value=""},[t,n,e]),c=f.useCallback(async m=>{const p=URL.createObjectURL(m);n(p),await t(m)&&e("choose_body")},[t,n,e]),u=f.useCallback(()=>{i(!0)},[]),d=f.useCallback(()=>{i(!1)},[]);return o.jsxs("div",{className:"gap-lg -mb-sm -mt-md flex flex-col",children:[o.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[o.jsx(pye,{step:2,totalSteps:4}),o.jsx("span",{className:"font-editorial text-3xl font-light",children:o.jsx(pe,{defaultMessage:"Take a selfie",id:"0H3vV1IwP1"})}),o.jsx(D,{variant:"small",className:"max-w-[400px] text-pretty text-center",color:"light",children:o.jsx(pe,{defaultMessage:"To create a personalized avatar, please upload a well lit, front-facing selfie.",id:"2hp5WUjFRc"})})]}),o.jsxs("div",{className:"gap-sm grid grid-cols-2 grid-rows-4",children:[o.jsx(vye,{image:"https://r2cdn.perplexity.ai/virtual-tryon-selfie.png",title:s({defaultMessage:"Front facing selfie",id:"v5qKOPNOwM"}),description:s({defaultMessage:"Simple front facing photo is all we need.",id:"7sBIYn49Jb"}),className:"!col-start-1 !row-span-4 !row-start-1"}),o.jsx(yv,{title:s({defaultMessage:"Face fully visible",id:"I+I2q2Gn3a"}),icon:eu}),o.jsx(yv,{title:s({defaultMessage:"Looking Forward",id:"79tlG9DGSR"}),icon:FM}),o.jsx(yv,{title:s({defaultMessage:"Even natural light",id:"2OWeBoZV0d"}),icon:Mie}),o.jsx(yv,{title:s({defaultMessage:"No harsh shadows",id:"vXaeUswXsx"}),icon:zPe})]}),o.jsx("div",{className:"gap-sm flex justify-center",children:r?o.jsxs("div",{className:"px-md py-sm gap-sm bg-subtle flex items-center rounded-lg",children:[o.jsx($r,{}),o.jsx(D,{variant:"baseSemi",children:o.jsx(pe,{defaultMessage:"Uploading...",id:"JEsxDwhXPG"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"file",accept:"image/*",className:"absolute hidden",id:"shopping-try-on-file-input",onChange:l}),o.jsx(he,{text:s({defaultMessage:"Take a selfie",id:"0H3vV1IwP1"}),icon:D7,variant:"common",onClick:u}),o.jsxs("label",{htmlFor:"shopping-try-on-file-input",className:"px-md py-sm gap-sm bg-super active:ease-outExpo group flex origin-center transform-gpu cursor-pointer select-none flex-row items-center whitespace-nowrap rounded-lg duration-300 hover:opacity-80 active:scale-[0.97] active:duration-150",children:[o.jsx(D,{children:o.jsx(ce,{icon:db,size:"md",className:"text-white dark:text-black"})}),o.jsx(D,{variant:"baseSemi",color:"defaultInverted",children:o.jsx(pe,{defaultMessage:"Upload a selfie",id:"bODqv8TA31"})})]})]})}),o.jsx(oye,{isOpen:a,onClose:d,onCapture:c})]})});mye.displayName="CreateAvatarView";const pye=({step:e,totalSteps:t})=>{const n=e/t*100;return o.jsx(H,{className:"py-xs flex flex-row items-center justify-center rounded",children:o.jsx("div",{className:"bg-subtle w-xl h-xs relative overflow-hidden rounded-full",children:o.jsx("div",{className:"bg-dark h-full transition-all duration-300",style:{width:`${n}%`}})})})},hye=I.memo(({setViewState:e,generateDefaultAvatar:t,selfieUrl:n,uploadPhoto:r,generateCustomAvatar:s,setLocalPreviewUrl:a})=>{const{$t:i}=Z(),{trackEvent:l}=Ne(),[c,u]=f.useState("default"),[d,m]=f.useState(!1),p=f.useCallback(()=>{n&&(l("selfie provided"),e("generating_avatar"),t(n),l("avatar generated"))},[e,t,n,l]),h=f.useCallback(()=>{const b=document.getElementById("choose-body-file-input");b&&b.click()},[]),g=f.useCallback(()=>{c==="default"?p():h()},[c,p,h]),y=f.useCallback(()=>{u("default")},[]),v=f.useCallback(()=>{u("your")},[]),x=f.useCallback(async b=>{const _=b.target.files?.[0];if(_){if(!n)return;l("full body provided");const w=URL.createObjectURL(_);a(w);try{m(!0);const C=await r(_);C&&(e("generating_avatar"),s(n,C),l("avatar generated"))}finally{m(!1)}}b.target.value=""},[r,s,n,a,e,l]);return o.jsxs("div",{className:"gap-xl flex flex-col",children:[o.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[o.jsx(pye,{step:4,totalSteps:4}),o.jsx("span",{className:"font-editorial text-3xl font-light",children:o.jsx(pe,{defaultMessage:"Choose your avatar body",id:"+VyjlR/lAC"})}),o.jsx(D,{variant:"small",className:"max-w-[400px] text-pretty text-center",color:"light",children:o.jsx(pe,{defaultMessage:"You can continue with a default body or create a more personalized avatar with your body.",id:"cWLZ08Ydju"})})]}),o.jsxs("div",{className:"gap-md grid grid-cols-2",children:[o.jsx(AX,{onClick:y,title:i({defaultMessage:"Default body",id:"vO54ZADRPV"}),description:i({defaultMessage:"Uses a generic body shape, no photo needed",id:"ZuGM1SxB8y"}),selected:c==="default"}),o.jsx(AX,{onClick:v,title:i({defaultMessage:"Your body",id:"7ZKFrdUySm"}),description:i({defaultMessage:"Uses a full body photo to create a custom body",id:"ddPGzyfCV3"}),selected:c==="your"})]}),o.jsxs("div",{className:"flex justify-center",children:[o.jsx("input",{type:"file",accept:"image/*",className:"absolute hidden",id:"choose-body-file-input",onChange:x}),o.jsx(he,{text:i(d?{defaultMessage:"Uploading full body photo...",id:"Xg5+S5kxLh"}:c==="default"?{defaultMessage:"Continue with default",id:"zlYIh9m2kM"}:{defaultMessage:"Upload full body photo",id:"VD13bqnxFO"}),icon:c==="default"?eu:db,isLoading:d,disabled:d,variant:"primary",onClick:g})]})]})});hye.displayName="ChooseBodyView";const AX=({onClick:e,title:t,description:n,selected:r})=>o.jsxs(H,{className:B("gap-xs p-md !ring-super relative flex cursor-pointer flex-col rounded-xl border duration-150",r?"!border-transparent ring-2":"ring-0"),onClick:e,children:[o.jsx("div",{className:"mb-sm aspect-square overflow-hidden rounded-md",children:o.jsx(fs,{src:"/static/images/tryon/avatar_body.png",alt:"Default body",imageClassName:"size-full object-contain invert opacity-10",containerClassName:"size-full",maskClassName:"bg-transparent",includeLightBoxModal:!1,draggable:!1})}),o.jsx(D,{variant:"baseSemi",className:"text-center",children:t}),o.jsx(D,{variant:"small",className:"px-md text-pretty text-center",color:"light",children:n})]}),gye=I.memo(({status:e,onClose:t,onBack:n,resultUrl:r,saveAvatar:s,onSuccessfulOnboarding:a})=>{const{$t:i}=Z(),[l,c]=f.useState(!1),{trackEvent:u}=Ne(),d=f.useCallback(async()=>{u("avatar retry clicked"),n()},[u,n]),m=f.useCallback(async()=>{if(r&&e==="success"&&!l){c(!0);const p=await s(r);t(),c(!1),a(p)}else c(!1),t()},[t,r,e,s,a,l]);return o.jsxs("div",{className:"gap-lg flex flex-col",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(H,{className:B("gap-sm relative isolate flex flex-col overflow-hidden rounded-lg border"),children:r&&o.jsx(fs,{src:r,alt:"Your Avatar",imageClassName:"max-h-[500px] max-w-full object-contain",containerClassName:"flex justify-center",includeLightBoxModal:!1})})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(D,{variant:"page-title",className:"text-center",children:o.jsx(pe,{defaultMessage:"Your new virtual you",id:"LoEf9iMkXR"})}),o.jsx(D,{variant:"small",className:"text-center",color:"light",children:o.jsx(pe,{defaultMessage:"Your personalized avatar is ready",id:"MLiXNgEouW"})})]}),o.jsxs("div",{className:"gap-sm flex justify-center",children:[o.jsx(he,{text:i({defaultMessage:"Retry",id:"62nsdyMyIO"}),variant:"border",onClick:d,disabled:l}),o.jsx(he,{text:i({defaultMessage:"Start Shopping",id:"BRgXJINE++"}),variant:"primary",onClick:m,disabled:e!=="success"||l,isLoading:l})]})]})});gye.displayName="ConfirmAvatarView";const yye=I.memo(({localPreviewUrl:e,onClose:t})=>{const{$t:n}=Z(),r=f.useMemo(()=>{if(e)return{image:e,name:"Avatar Preview",status:EHe.IN_PROGRESS,type:"image",medium:"image",author_name:"PPLX",author_url:"https://pplx.ai",image_width:100,image_height:100,url:e,source:"pplx",thumbnail:e,dark_image_url:e,locations:[],thumbnail_height:100,thumbnail_width:100,sponsored_uuid:"",ad_content_uuid:"",modal_url:"",low_res_image:"",generated_media_metadata:void 0}},[e]);return o.jsxs("div",{className:"gap-lg flex flex-col",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx(D,{variant:"page-title",className:"text-center",children:o.jsx(pe,{defaultMessage:"Working on your avatar",id:"9nXG80mtI6"})}),o.jsx(D,{variant:"small",className:"text-center",color:"light",children:o.jsx(pe,{defaultMessage:"You can continue shopping while we create your virtual you. It shouldn't be long.",id:"Z5TNVvv3SP"})})]}),o.jsxs("div",{className:"gap-lg flex flex-col items-center",children:[o.jsx(H,{className:"gap-sm relative isolate flex aspect-[252/336] w-full max-w-[400px] flex-col overflow-hidden rounded-lg border",children:o.jsx(dye,{generating:!0,media:r})}),o.jsx(he,{text:n({defaultMessage:"Continue shopping",id:"Yywm0pqtZa"}),variant:"primary",onClick:t})]})]})});yye.displayName="GeneratingAvatarView";const yv=I.memo(({title:e,icon:t})=>o.jsx(H,{className:"gap-sm p-sm flex flex-col items-center justify-center rounded-lg border",children:o.jsxs(D,{variant:"smallBold",className:"gap-xs flex flex-row items-center",children:[o.jsx(ce,{icon:t,size:"md"}),e]})}));yv.displayName="InfoCell";const vye=I.memo(({image:e,title:t,className:n,description:r})=>o.jsxs(H,{className:B("gap-sm relative col-start-2 row-start-2 flex flex-col overflow-hidden rounded-lg border",n),children:[e&&o.jsx(fs,{src:e,alt:"Intro",imageClassName:"w-full object-cover object-top pointer-events-none max-h-[175px]",containerClassName:"flex-shrink-0",includeLightBoxModal:!1,className:"pointer-events-none"}),o.jsxs("div",{className:"from-base gap-xs p-md absolute inset-0 flex flex-col items-center justify-end bg-gradient-to-t from-5% to-transparent",children:[o.jsx(D,{variant:"smallBold",className:"flex items-end justify-center text-center",children:t}),r&&o.jsx(D,{variant:"tinyRegular",className:"text-pretty text-center leading-tight",color:"light",children:r})]})]}));vye.displayName="InstructionCell";async function zot({request:e,reason:t}){const{data:n,error:r}=await se.POST("/rest/shopping/generate-shopping-try-on",t,{body:e,timeoutMs:35e3,headers:{"content-type":"application/json"}});return r?{status:"error",image_url:""}:n}async function IX({request:e,reason:t}){const{data:n,error:r}=await se.POST("/rest/shopping/try-on-photo/generate-avatar",t,{body:e,timeoutMs:4e4,headers:{"content-type":"application/json"}});return r?{status:"error",image_url:""}:n}const Got=async({reason:e,try_on_photo_url:t})=>{try{const n=await se.PUT("/rest/shopping/try-on-photo/save",e,{body:{try_on_photo_url:t},timeoutMs:Pe()});return n.data?n.data:{status:"error",user_try_on_photo_url:""}}catch(n){return ne.error("Failed to save user try on photo",n),{status:"error",user_try_on_photo_url:""}}},qot=async({reason:e})=>{try{const t=await se.DELETE("/rest/shopping/try-on-photo/delete",e,{timeoutMs:Pe()});return t.data?t.data:{status:"error"}}catch(t){return ne.error("Failed to delete user try on photo",t),{status:"error"}}},gU=async({file:e,fileSource:t,forceImage:n,reason:r})=>{const s=await se.POST("/rest/uploads/create_upload_url",r,{body:{filename:e.name,content_type:e.type,source:t??"default",file_size:e.size,force_image:n??!1},timeoutMs:Ut.MEDIUM,retries:2});return s.data?s.data:null},Kot=async({remote_file_id:e,connection_type:t,source:n,reason:r})=>{const s=await se.POST("/rest/connectors/attachments/upload",r,{body:{remote_file_id:e,connection_type:t,source:n??"default"},timeoutMs:Ut.VERY_HIGH,retries:2});return s.data?s.data:null};async function Yot({request:e,reason:t}){return new Promise((n,r)=>{se.SSE("/rest/sse/attachment_processing/subscribe",t,{params:e,handlers:{message:s=>{n(s)}}}).catch(r)})}const xye=({reason:e,productImageUrl:t})=>{const{$t:n}=Z(),{deprecatedOpenToast:r}=gn(),{openModal:s,closeModal:a}=xt(),i=ht(),[l,c]=f.useState({status:"idle",error:null,resultUrl:null,selfieUrl:null});f.useEffect(()=>{if(t){const E=i.getQueryData(pN(t));E&&c(M=>({...M,resultUrl:E}))}},[t,i]);const u=f.useRef(!1),d=f.useCallback(()=>{c({status:"idle",error:null,resultUrl:null,selfieUrl:null})},[]),m=f.useCallback(E=>{c(M=>({...M,status:"error",error:E}))},[]),p=f.useCallback(async E=>{if(!E.type.startsWith("image/"))return m(n({defaultMessage:"Only image files are supported.",id:"f4sVsu2Ean"})),null;const M=10*1024*1024;if(E.size>M)return m(n({defaultMessage:"Image size exceeds 10MB limit.",id:"/lVoGk8eeX"})),null;try{c(L=>({...L,status:"uploading"}));const k=await gU({file:E,fileSource:"shopping_try_on",forceImage:!0,reason:e});if(!k?.fields||!k?.s3_bucket_url)throw k?.rate_limited?new Error("File upload failed due to rate limit."):new Error("Failed to get upload URL");const A=new FormData;Object.entries(k.fields).forEach(([L,P])=>{A.append(L,P)}),A.append("file",E);const R=await fetch(k.s3_bucket_url,{method:"POST",body:A});if(!R.ok)throw new Error("Failed to upload file");let O=null;try{const L=await R.json();L?.secure_url?O=L.secure_url:L?.eager?.[0]?.secure_url&&(O=L.eager[0].secure_url),O&&em(O)&&(O=bP(O))}catch{k.s3_object_url&&(O=k.s3_object_url)}if(!O)throw new Error("Failed to get image URL from upload response");return c(L=>({...L,status:"idle"})),O}catch(k){return m(k instanceof Error?k.message:n({defaultMessage:"Failed to upload image.",id:"+eCvtPyOJg"})),null}},[n,e,m]),h=f.useCallback(async E=>{const M=await p(E);return M&&c(k=>({...k,selfieUrl:M})),M},[p]),g=f.useCallback(()=>{s("shoppingTryOnOnboardingModal",{onSuccessfulOnboarding:E=>{i.setQueryData(G2(),{try_on_photo_url:E}),i.setQueryData(mf(),!1),r(n({defaultMessage:"Avatar updated successfully!",id:"tjpCN5PY48"}),"success",3)},onClose:()=>{a()}})},[s,a,i,r,n]),y=f.useCallback(async E=>{try{const{user_try_on_photo_url:M}=await Got({reason:e,try_on_photo_url:E});return M}catch(M){return r(n({defaultMessage:"Failed to save avatar. Please try again.",id:"Z5lnZQ5t8Q"}),"error",5),ne.error("Failed to save avatar",M),""}},[e,n,r]),v=f.useCallback(async()=>{try{await qot({reason:e})}catch(E){ne.error("Failed to delete avatar",E)}},[e]),x=f.useCallback(E=>{u.current=E},[]),b=f.useCallback(async E=>{const M=await y(E);i.setQueryData(G2(),{try_on_photo_url:M}),r(n({defaultMessage:"Your avatar has been generated! You can now try on clothes.",id:"moiCrokdKs"}),"success",10,"",n({defaultMessage:"Check it out",id:"IjqWGw+QT1"}),()=>{s("avatarManagementModal",{source:"toast",onRetry:g})})},[y,n,r,i,s,g]),_=f.useCallback(async E=>{try{c(k=>({...k,status:"processing",resultUrl:null,error:null})),i.setQueryData(mf(),!0);const M=await IX({request:{user_image_url:E},reason:e});if(M.status==="failed")throw i.setQueryData(mf(),!1),new Error("Failed to generate avatar");c(k=>({...k,status:"success",resultUrl:M.image_url})),u.current&&await b(M.image_url),i.setQueryData(mf(),!1)}catch(M){m(M instanceof Error?M.message:n({defaultMessage:"Failed to generate avatar.",id:"anPmJ/DLsx"}))}},[e,n,m,b,u,i]),w=f.useCallback(async(E,M)=>{try{c(A=>({...A,status:"processing",resultUrl:null,error:null})),i.setQueryData(mf(),!0);const k=await IX({request:{user_image_url:M,selfie_image_url:E},reason:e});if(k.status==="failed")throw i.setQueryData(mf(),!1),new Error("Failed to generate avatar");c(A=>({...A,status:"success",resultUrl:k.image_url})),u.current&&await b(k.image_url),i.setQueryData(mf(),!1)}catch(k){m(k instanceof Error?k.message:n({defaultMessage:"Failed to generate avatar.",id:"anPmJ/DLsx"}))}},[e,n,m,b,u,i]),C=f.useCallback(async(E,M)=>{try{c(A=>({...A,status:"processing",resultUrl:null,error:null}));const k=await zot({request:{image_url:E,product_image_url:M},reason:e});if(k.status==="error")throw new Error("Failed to generate try-on");c(A=>({...A,status:"success",resultUrl:k.image_url})),M&&i.setQueryData(pN(M),k.image_url)}catch(k){m(k instanceof Error?k.message:n({defaultMessage:"Failed to generate try-on.",id:"ptEP5MGDf6"}))}},[e,n,m,i]),S=f.useCallback(()=>{t&&i.removeQueries({queryKey:pN(t)}),c(E=>({...E,resultUrl:null}))},[t,i]);return f.useMemo(()=>({status:l.status,error:l.error,resultUrl:l.resultUrl,selfieUrl:l.selfieUrl,uploadPhoto:p,uploadSelfie:h,generateDefaultAvatar:_,generateCustomAvatar:w,tryOnProduct:C,saveAvatar:y,resetState:d,deleteAvatar:v,setShouldAutoSaveAvatar:x,clearCachedTryOn:S,handleRetry:g}),[l.status,l.error,l.resultUrl,l.selfieUrl,p,h,_,w,C,y,d,v,x,S,g])},bye=I.memo(({isOpen:e,onClose:t,onSuccessfulOnboarding:n})=>{const r="shopping-try-on-onboarding",{status:s,resultUrl:a,selfieUrl:i,uploadSelfie:l,generateDefaultAvatar:c,generateCustomAvatar:u,uploadPhoto:d,saveAvatar:m,resetState:p,setShouldAutoSaveAvatar:h}=xye({reason:r}),[g,y]=f.useState("intro"),[v,x]=f.useState(null),[b,_]=f.useState(null),w=f.useCallback(k=>{x(A=>(A&&A!==k&&URL.revokeObjectURL(A),k))},[]),C=f.useCallback(()=>{s==="processing"&&g==="generating_avatar"?h(!0):p(),y("intro"),_(null),t()},[t,p,s,g,h]);f.useEffect(()=>{!e&&v&&(URL.revokeObjectURL(v),x(null))},[e,v]),f.useEffect(()=>{g==="generating_avatar"&&(s==="success"&&a?y("confirm_avatar"):s==="error"&&(y("choose_body"),_(null)))},[g,s,a]);const S=f.useCallback(()=>y("create_avatar"),[]),E=f.useCallback(k=>(_("selfie"),l(k)),[l]),M=f.useCallback(k=>(_("body"),d(k)),[d]);return o.jsx(en,{isOpen:e,onClose:C,modalClassname:"light",children:o.jsxs("div",{className:"size-full",children:[g==="intro"&&o.jsx(fye,{setViewState:y}),g==="create_avatar"&&o.jsx(mye,{setViewState:y,uploadSelfie:E,setLocalPreviewUrl:w,isSelfieUploading:s==="uploading"&&b==="selfie"}),g==="choose_body"&&o.jsx(hye,{setViewState:y,generateDefaultAvatar:c,selfieUrl:i,uploadPhoto:M,generateCustomAvatar:u,setLocalPreviewUrl:w}),g==="generating_avatar"&&o.jsx(yye,{localPreviewUrl:v,onClose:C}),g==="confirm_avatar"&&o.jsx(gye,{status:s,onClose:C,onBack:S,resultUrl:a,saveAvatar:m,onSuccessfulOnboarding:n})]})})});bye.displayName="ShoppingTryOnOnboardingModal";const yU=fy("AskInputContext",()=>pi((e,t)=>({activeMenu:null,fileUploadUpsellTooltipOpen:!1,suggestions:ue,blankStateSuggestions:{[ie.SEARCH]:null,[ie.RESEARCH]:null,[ie.STUDIO]:null,[ie.STUDY]:null},showSuggestDropdown:!1,actions:{onActiveMenuChange:n=>{e({activeMenu:n})},setFileUploadUpsellTooltipOpen:n=>{e({fileUploadUpsellTooltipOpen:n})},setSuggestions:n=>{e({suggestions:n})},setBlankStateSuggestions:(n,r)=>{const s=t().blankStateSuggestions;e({blankStateSuggestions:{...s,[r]:n}})},setShowSuggestDropdown:n=>{e({showSuggestDropdown:n})}},inputRef:f.createRef()}))),Kl=yU.Provider,Qot=yU.useSelector,Xot=yU.useTrackedState,Lo=()=>Qot(e=>e.actions),Ws=Xot,vU=I.memo(()=>o.jsx("div",{className:"bg-base fixed inset-0 z-[999] flex h-screen w-screen items-center justify-center opacity-50"}));vU.displayName="VoiceToVoiceModalLoader";const xU=I.memo(function(t){const{className:n,children:r,result:s,trackEvent:a,...i}=t,l=B("group flex size-full cursor-pointer items-stretch",n);return oU(s)?o.jsx(Ge,{target:"_blank",rel:"noopener",className:l,href:s.url,...i,children:o.jsx("div",{className:"w-full",children:r})}):o.jsx(o.Fragment,{children:r})});xU.displayName="CitationCardLink";const bU=I.memo(({variant:e="medium",searchType:t})=>{const n=t==="memory",s=B("flex items-center justify-between w-full",e==="small"?"mb-0":"mb-2");return o.jsxs("div",{className:s,children:[o.jsxs(D,{className:"flex items-center gap-2",variant:"tiny",color:"light",children:[o.jsx(ce,{icon:n?Kc:Zg,size:"sm"}),n?o.jsx(pe,{defaultMessage:"Memory",id:"dVx3yznM2C"}):o.jsx(pe,{defaultMessage:"Library",id:"StcK672jB9"})]}),o.jsx(D,{variant:"tiny",color:"ultraLight",children:o.jsx(ce,{icon:kx,size:"sm"})})]})});bU.displayName="MemorySearchCitationCardTitle";const _ye=e=>e.is_scrubbed??!1,Zot=e=>y3(e)?_ye(e):!1,y3=e=>e.is_memory||e.is_conversation_history,Jot=e=>e.is_memory,Zb=e=>{const t=e.is_client_context,n=Zot(e);return t||n},wye=I.memo(function(t){const{$t:n}=Z(),{result:r,additionalMetadata:s,variant:a}=t,i=r.url,l=r.meta_data?.generated_file_description??r.snippet,c=r.meta_data?.generated_file_title??r.name,u=r?.is_client_context,d=!!r.meta_data?.connection_type,m=typeof r.meta_data?.quoteBeforeContext=="string"?r.meta_data?.quoteBeforeContext:"",p=typeof r.meta_data?.quoteEmphasisText=="string"?r.meta_data?.quoteEmphasisText:"",h=typeof r.meta_data?.quoteAfterContext=="string"?r.meta_data?.quoteAfterContext:"",g=m.length>0||p.length>0||h.length>0,y=a!=="grid"&&l&&g,v=r.meta_data?.repo_type,x=typeof r.meta_data?.wiley_book_uuid=="string",b=typeof r.meta_data?.domain_name=="string"?r.meta_data?.domain_name:void 0,_=Uat(r),w=()=>{if(d&&r.meta_data?.connection_type!==Tt.WILEY)return Yv(r.meta_data?.connection_type);if(r.is_attachment){if(v=="USER")return n({defaultMessage:"Local Files",id:"FBnEWaGOHR"});if(v=="ORG")return n({defaultMessage:"Org Files",id:"DaFSYzpM1Q"});if(v=="COLLECTION")return n({defaultMessage:"Files",id:"m4vqJl0/FT"});if(r?.meta_data?.patent_name)return r.meta_data.patent_name;if(!r?.meta_data?.file_uuid){const M=r?.file_metadata?.connector_type;if(M)return Yv(M);const k=m3(r.url);return k?Yv(k):n({defaultMessage:"Attachment",id:"eLCAEP8LHj"})}}return b},C=y3(r),S=r.is_memory,E=Zb(r);return o.jsxs("div",{className:B("gap-xs pointer-events-none relative flex h-full max-w-full select-none flex-col",{"px-sm pb-sm pt-sm w-full":a==="grid"},{"p-md":a!=="grid"}),children:[o.jsxs("div",{className:"flex w-full items-center justify-between",children:[C&&!E?o.jsx(bU,{variant:"small",searchType:S?"memory":"conversation-history"}):o.jsxs("div",{className:"space-x-xs flex",children:[s||null,o.jsx(Oo,{variant:"tiny",color:"light",url:i,isAttachment:r.is_attachment,connectionType:r.meta_data?.connection_type,source:w(),isInlineAttachment:_,isPatent:!!r?.meta_data?.patent_name})]}),o.jsxs("div",{children:[x&&o.jsx(D,{variant:"tiny",color:"super",children:o.jsx(ce,{size:"sm",icon:kie})}),u&&a==="grid"?o.jsx(D,{variant:"tiny",color:"super",children:o.jsx(ce,{size:"sm",icon:Ov})}):null]})]}),o.jsx(D,{variant:a==="grid"?"tiny":a==="list"?"small":"base",className:B("",{"":a==="grid","pr-1":a==="list"}),children:S&&!E?o.jsx(D,{variant:"tiny",className:"line-clamp-2 h-8",children:r?.snippet}):o.jsx("span",{className:"line-clamp-1 text-left md:line-clamp-2 md:h-8",children:c||o.jsx("div",{children:""})})}),c!==r.name?o.jsx(D,{variant:"small",color:"light",className:"line-clamp-1",children:r.name}):null,y&&o.jsxs(D,{variant:a==="list"?"tiny":"small",className:"mt-two border-super line-clamp-[8] border-l-4 pl-2 font-normal",children:[o.jsx("span",{children:m}),o.jsx("span",{className:"bg-super/30",children:p}),o.jsx("span",{children:h})]}),a!=="grid"&&l&&!g&&o.jsx(D,{variant:a==="list"?"tiny":"small",className:"mt-two line-clamp-1 font-normal md:line-clamp-4",children:l}),E&&a!=="grid"?o.jsxs(H,{className:"gap-xs pt-sm mt-xs flex items-center border-t",children:[o.jsx(D,{variant:"tiny",color:"super",children:o.jsx(ce,{size:"sm",icon:kx})}),o.jsx(D,{variant:"tiny",color:"super",children:o.jsx(pe,{defaultMessage:"Personal Search",id:"7+aLCEyqS2",description:"title"})})]}):null]})});wye.displayName="CitationDefaultCard";const Cye=I.memo(function(t){const{result:n,imageURL:r,citationNumber:s,useLightBoxModal:a=!0}=t,i=B(" w-full relative max-h-[76px]");return o.jsxs("div",{className:i,children:[o.jsx(fs,{includeLightBoxModal:a,alt:n.name,containerClassName:"w-full h-full p-xs",imageClassName:"object-cover object-center w-full h-full rounded-md",src:r}),s&&o.jsx(D,{className:"bottom-sm left-sm px-xs absolute z-[1] inline-flex rounded-sm bg-black/50",variant:"tiny",color:"white",children:s})]})});Cye.displayName="CitationImageCard";function v3(e){const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function NS(e){return!isNaN(new Date(e).getTime())}function eit(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function tit(e){const t=new Date;return t.setDate(t.getDate()-1),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Sye(e){const t=new Date;return t.setDate(t.getDate()+1),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function jy(e,t,n={numeric:"auto",style:"long"},r=1e3*60*60*24){if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return"";const a=s.getTime()-Date.now(),i=Math.abs(a);return i<=1e3?"":i<1e3*60?e.formatRelativeTime(Math.round(a/1e3),"second",n):i<1e3*60*60?e.formatRelativeTime(Math.round(a/(1e3*60)),"minute",n):i<r&&i<1e3*60*60*24?e.formatRelativeTime(Math.round(a/(1e3*60*60)),"hour",n):i<r&&i>=1e3*60*60*24?e.formatRelativeTime(Math.round(a/(1e3*60*60*24)),"day",n):e.formatDate(s,{month:"short",day:"numeric",year:"numeric"})}const x3=I.memo(e=>{const{children:t,timestamp:n,timestampProps:r,includeIcon:s=!0}=e,a=Z();if(!n)return null;const i=n?.endsWith("Z")?n:`${n}Z`;return o.jsxs(H,{className:"gap-x-xs flex",children:[s?o.jsx(D,{variant:"tiny",color:"super",children:o.jsx(ce,{icon:Tie,size:"xs"})}):null,o.jsxs(D,{variant:"tinyRegular",color:"light",...r,children:[t&&o.jsxs(o.Fragment,{children:[t," "]}),jy(a,i)]})]})});x3.displayName="CitationUpdatedAt";class nit extends Date{constructor(t){const n=t?new Date(t):new Date,r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds());super(r)}getTimezoneOffset(){return 0}}class b3{static isRecentlyTrending(t,n=432e5){return t.meta_data?.client!=="trending"?!1:new Date().getTime()-new nit(t.meta_data?.published_date).getTime()<n}static normalizeUrl(t){return t.replace(/\/$/,"")}static dedupWebResults(t,n,r=!1){if(!t)return[];if(r)return t.filter(a=>a.is_attachment);if(!n)return t;const s=new Set(n.map(a=>this.normalizeUrl(a.url)));return t.filter(a=>!s.has(this.normalizeUrl(a.url)))}}const Eye=I.memo(e=>{const{result:t,imageURL:n}=e,r=t.url,s=Z(),a=f.useMemo(()=>({color:"white"}),[]),i=f.useMemo(()=>o.jsx(x3,{recentlyUpdatedLabel:s.$t({defaultMessage:"just now",id:"I90sbWU03C"}),timestamp:t.meta_data?.published_date,timestampProps:a,includeIcon:!1,children:s.$t({defaultMessage:"Updated",id:"xrk6zgu9jU"})}),[s,t.meta_data?.published_date,a]);return o.jsxs("div",{className:B("p-sm gap-sm flex h-full max-h-[190px]"),children:[o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsxs("div",{className:"space-x-xs flex justify-between",children:[o.jsx(Oo,{variant:"tiny",color:"light",url:r,isAttachment:t.is_attachment}),b3.isRecentlyTrending(t)?o.jsx(bn,{tooltipText:i,children:o.jsx(Tie,{className:"text-super size-3.5"})}):null]}),o.jsx("div",{children:o.jsx(D,{variant:"tiny",className:"line-clamp-2",children:t.name})})]}),n?o.jsx("div",{className:"relative -my-1 -mr-1 size-[60px] shrink-0",children:o.jsx(fs,{includeLightBoxModal:!1,alt:t.name,containerClassName:"w-full h-full",imageClassName:"object-cover object-center w-full h-full  rounded-md",src:n})}):null]})});Eye.displayName="CitationTrendingCard";var Tj={exports:{}},Nj,RX;function rit(){if(RX)return Nj;RX=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Nj=e,Nj}var jj,PX;function sit(){if(PX)return jj;PX=1;var e=rit();function t(){}function n(){}return n.resetWarningCache=t,jj=function(){function r(i,l,c,u,d,m){if(m!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},jj}var OX;function _U(){return OX||(OX=1,Tj.exports=sit()()),Tj.exports}var ait=_U();const Le=Bo(ait);var Aj,LX;function oit(){return LX||(LX=1,Aj=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;for(s=r;s--!==0;){var i=a[s];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n}),Aj}var iit=oit();const lit=Bo(iit);var eC={exports:{}},Ij,DX;function cit(){if(DX)return Ij;DX=1;var e;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/return e=function(){var t={},n={};return t.on=function(r,s){var a={name:r,handler:s};return n[r]=n[r]||[],n[r].unshift(a),a},t.off=function(r){var s=n[r.name].indexOf(r);s!==-1&&n[r.name].splice(s,1)},t.trigger=function(r,s){var a=n[r],i;if(a)for(i=a.length;i--;)a[i].handler(s)},t},Ij=e,Ij}var tC={exports:{}},Rj,FX;function uit(){if(FX)return Rj;FX=1,Rj=function(s,a,i){var l=document.head||document.getElementsByTagName("head")[0],c=document.createElement("script");typeof a=="function"&&(i=a,a={}),a=a||{},i=i||function(){},c.type=a.type||"text/javascript",c.charset=a.charset||"utf8",c.async="async"in a?!!a.async:!0,c.src=s,a.attrs&&e(c,a.attrs),a.text&&(c.text=""+a.text);var u="onload"in c?t:n;u(c,i),c.onload||t(c,i),l.appendChild(c)};function e(r,s){for(var a in s)r.setAttribute(a,s[a])}function t(r,s){r.onload=function(){this.onerror=this.onload=null,s(null,r)},r.onerror=function(){this.onerror=this.onload=null,s(new Error("Failed to load "+this.src),r)}}function n(r,s){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,s(null,r))}}return Rj}var UX;function dit(){return UX||(UX=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=uit(),r=s(n);function s(a){return a&&a.__esModule?a:{default:a}}t.default=function(a){var i=new Promise(function(l){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){l(window.YT);return}else{var c=window.location.protocol==="http:"?"http:":"https:";(0,r.default)(c+"//www.youtube.com/iframe_api",function(d){d&&a.trigger("error",d)})}var u=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){u&&u(),l(window.YT)}});return i},e.exports=t.default}(tC,tC.exports)),tC.exports}var nC={exports:{}},rC={exports:{}},sC={exports:{}},Pj,BX;function fit(){if(BX)return Pj;BX=1;var e=1e3,t=e*60,n=t*60,r=n*24,s=r*365.25;Pj=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return a(u);if(m==="number"&&isNaN(u)===!1)return d.long?l(u):i(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function a(u){if(u=String(u),!(u.length>100)){var d=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(u);if(d){var m=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*t;case"seconds":case"second":case"secs":case"sec":case"s":return m*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function i(u){return u>=r?Math.round(u/r)+"d":u>=n?Math.round(u/n)+"h":u>=t?Math.round(u/t)+"m":u>=e?Math.round(u/e)+"s":u+"ms"}function l(u){return c(u,r,"day")||c(u,n,"hour")||c(u,t,"minute")||c(u,e,"second")||u+" ms"}function c(u,d,m){if(!(u<d))return u<d*1.5?Math.floor(u/d)+" "+m:Math.ceil(u/d)+" "+m+"s"}return Pj}var VX;function mit(){return VX||(VX=1,function(e,t){t=e.exports=s.debug=s.default=s,t.coerce=c,t.disable=i,t.enable=a,t.enabled=l,t.humanize=fit(),t.names=[],t.skips=[],t.formatters={};var n;function r(u){var d=0,m;for(m in u)d=(d<<5)-d+u.charCodeAt(m),d|=0;return t.colors[Math.abs(d)%t.colors.length]}function s(u){function d(){if(d.enabled){var m=d,p=+new Date,h=p-(n||p);m.diff=h,m.prev=n,m.curr=p,n=p;for(var g=new Array(arguments.length),y=0;y<g.length;y++)g[y]=arguments[y];g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");var v=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(b,_){if(b==="%%")return b;v++;var w=t.formatters[_];if(typeof w=="function"){var C=g[v];b=w.call(m,C),g.splice(v,1),v--}return b}),t.formatArgs.call(m,g);var x=d.log||t.log||console.log.bind(console);x.apply(m,g)}}return d.namespace=u,d.enabled=t.enabled(u),d.useColors=t.useColors(),d.color=r(u),typeof t.init=="function"&&t.init(d),d}function a(u){t.save(u),t.names=[],t.skips=[];for(var d=(typeof u=="string"?u:"").split(/[\s,]+/),m=d.length,p=0;p<m;p++)d[p]&&(u=d[p].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function i(){t.enable("")}function l(u){var d,m;for(d=0,m=t.skips.length;d<m;d++)if(t.skips[d].test(u))return!1;for(d=0,m=t.names.length;d<m;d++)if(t.names[d].test(u))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}}(sC,sC.exports)),sC.exports}var $X;function pit(){return $X||($X=1,function(e,t){var n={};t=e.exports=mit(),t.log=a,t.formatArgs=s,t.save=i,t.load=l,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(u){try{return JSON.stringify(u)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};function s(u){var d=this.useColors;if(u[0]=(d?"%c":"")+this.namespace+(d?" %c":" ")+u[0]+(d?"%c ":" ")+"+"+t.humanize(this.diff),!!d){var m="color: "+this.color;u.splice(1,0,m,"color: inherit");var p=0,h=0;u[0].replace(/%[a-zA-Z%]/g,function(g){g!=="%%"&&(p++,g==="%c"&&(h=p))}),u.splice(h,0,m)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(u){try{u==null?t.storage.removeItem("debug"):t.storage.debug=u}catch{}}function l(){var u;try{u=t.storage.debug}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=n.DEBUG),u}t.enable(l());function c(){try{return window.localStorage}catch{}}}(rC,rC.exports)),rC.exports}var aC={exports:{}},WX;function hit(){return WX||(WX=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default}(aC,aC.exports)),aC.exports}var oC={exports:{}},HX;function git(){return HX||(HX=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default}(oC,oC.exports)),oC.exports}var iC={exports:{}},lC={exports:{}},zX;function yit(){return zX||(zX=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default}(lC,lC.exports)),lC.exports}var GX;function vit(){return GX||(GX=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=yit(),r=s(n);function s(a){return a&&a.__esModule?a:{default:a}}t.default={pauseVideo:{acceptableStates:[r.default.ENDED,r.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[r.default.ENDED,r.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[r.default.ENDED,r.default.PLAYING,r.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default}(iC,iC.exports)),iC.exports}var qX;function xit(){return qX||(qX=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=pit(),r=d(n),s=hit(),a=d(s),i=git(),l=d(i),c=vit(),u=d(c);function d(h){return h&&h.__esModule?h:{default:h}}var m=(0,r.default)("youtube-player"),p={};p.proxyEvents=function(h){var g={},y=function(E){var M="on"+E.slice(0,1).toUpperCase()+E.slice(1);g[M]=function(k){m('event "%s"',M,k),h.trigger(E,k)}},v=!0,x=!1,b=void 0;try{for(var _=l.default[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var C=w.value;y(C)}}catch(S){x=!0,b=S}finally{try{!v&&_.return&&_.return()}finally{if(x)throw b}}return g},p.promisifyPlayer=function(h){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y={},v=function(M){g&&u.default[M]?y[M]=function(){for(var k=arguments.length,A=Array(k),R=0;R<k;R++)A[R]=arguments[R];return h.then(function(O){var L=u.default[M],P=O.getPlayerState(),N=O[M].apply(O,A);return L.stateChangeRequired||Array.isArray(L.acceptableStates)&&L.acceptableStates.indexOf(P)===-1?new Promise(function(T){var j=function F(){var U=O.getPlayerState(),V=void 0;typeof L.timeout=="number"&&(V=setTimeout(function(){O.removeEventListener("onStateChange",F),T()},L.timeout)),Array.isArray(L.acceptableStates)&&L.acceptableStates.indexOf(U)!==-1&&(O.removeEventListener("onStateChange",F),clearTimeout(V),T())};O.addEventListener("onStateChange",j)}).then(function(){return N}):N})}:y[M]=function(){for(var k=arguments.length,A=Array(k),R=0;R<k;R++)A[R]=arguments[R];return h.then(function(O){return O[M].apply(O,A)})}},x=!0,b=!1,_=void 0;try{for(var w=a.default[Symbol.iterator](),C;!(x=(C=w.next()).done);x=!0){var S=C.value;v(S)}}catch(E){b=!0,_=E}finally{try{!x&&w.return&&w.return()}finally{if(b)throw _}}return y},t.default=p,e.exports=t.default}(nC,nC.exports)),nC.exports}var KX;function bit(){return KX||(KX=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},r=cit(),s=u(r),a=dit(),i=u(a),l=xit(),c=u(l);function u(m){return m&&m.__esModule?m:{default:m}}var d=void 0;t.default=function(m){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,g=(0,s.default)();if(d||(d=(0,i.default)(g)),p.events)throw new Error("Event handlers cannot be overwritten.");if(typeof m=="string"&&!document.getElementById(m))throw new Error('Element "'+m+'" does not exist.');p.events=c.default.proxyEvents(g);var y=new Promise(function(x){if((typeof m>"u"?"undefined":n(m))==="object"&&m.playVideo instanceof Function){var b=m;x(b)}else d.then(function(_){var w=new _.Player(m,p);return g.on("ready",function(){x(w)}),null})}),v=c.default.promisifyPlayer(y,h);return v.on=g.on,v.off=g.off,v},e.exports=t.default}(eC,eC.exports)),eC.exports}var _it=bit();const wit=Bo(_it);var Cit=Object.defineProperty,Sit=Object.defineProperties,Eit=Object.getOwnPropertyDescriptors,YX=Object.getOwnPropertySymbols,Mit=Object.prototype.hasOwnProperty,kit=Object.prototype.propertyIsEnumerable,QX=(e,t,n)=>t in e?Cit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,CP=(e,t)=>{for(var n in t||(t={}))Mit.call(t,n)&&QX(e,n,t[n]);if(YX)for(var n of YX(t))kit.call(t,n)&&QX(e,n,t[n]);return e},SP=(e,t)=>Sit(e,Eit(t)),Tit=(e,t,n)=>new Promise((r,s)=>{var a=c=>{try{l(n.next(c))}catch(u){s(u)}},i=c=>{try{l(n.throw(c))}catch(u){s(u)}},l=c=>c.done?r(c.value):Promise.resolve(c.value).then(a,i);l((n=n.apply(e,t)).next())});function Nit(e,t){var n,r;if(e.videoId!==t.videoId)return!0;const s=((n=e.opts)==null?void 0:n.playerVars)||{},a=((r=t.opts)==null?void 0:r.playerVars)||{};return s.start!==a.start||s.end!==a.end}function XX(e={}){return SP(CP({},e),{height:0,width:0,playerVars:SP(CP({},e.playerVars),{autoplay:0,start:0,end:0})})}function jit(e,t){return e.videoId!==t.videoId||!lit(XX(e.opts),XX(t.opts))}function Ait(e,t){var n,r,s,a;return e.id!==t.id||e.className!==t.className||((n=e.opts)==null?void 0:n.width)!==((r=t.opts)==null?void 0:r.width)||((s=e.opts)==null?void 0:s.height)!==((a=t.opts)==null?void 0:a.height)||e.iframeClassName!==t.iframeClassName||e.title!==t.title}var Iit={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},Rit={videoId:Le.string,id:Le.string,className:Le.string,iframeClassName:Le.string,style:Le.object,title:Le.string,loading:Le.oneOf(["lazy","eager"]),opts:Le.objectOf(Le.any),onReady:Le.func,onError:Le.func,onPlay:Le.func,onPause:Le.func,onEnd:Le.func,onStateChange:Le.func,onPlaybackRateChange:Le.func,onPlaybackQualityChange:Le.func},jS=class extends I.Component{constructor(e){super(e),this.destroyPlayerPromise=void 0,this.onPlayerReady=t=>{var n,r;return(r=(n=this.props).onReady)==null?void 0:r.call(n,t)},this.onPlayerError=t=>{var n,r;return(r=(n=this.props).onError)==null?void 0:r.call(n,t)},this.onPlayerStateChange=t=>{var n,r,s,a,i,l,c,u;switch((r=(n=this.props).onStateChange)==null||r.call(n,t),t.data){case jS.PlayerState.ENDED:(a=(s=this.props).onEnd)==null||a.call(s,t);break;case jS.PlayerState.PLAYING:(l=(i=this.props).onPlay)==null||l.call(i,t);break;case jS.PlayerState.PAUSED:(u=(c=this.props).onPause)==null||u.call(c,t);break}},this.onPlayerPlaybackRateChange=t=>{var n,r;return(r=(n=this.props).onPlaybackRateChange)==null?void 0:r.call(n,t)},this.onPlayerPlaybackQualityChange=t=>{var n,r;return(r=(n=this.props).onPlaybackQualityChange)==null?void 0:r.call(n,t)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then(()=>this.destroyPlayerPromise=void 0),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if(typeof document>"u")return;if(this.destroyPlayerPromise){this.destroyPlayerPromise.then(this.createPlayer);return}const t=SP(CP({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=wit(this.container,t),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then(n=>{this.props.title&&n.setAttribute("title",this.props.title),this.props.loading&&n.setAttribute("loading",this.props.loading)})},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var t;(t=this.internalPlayer)==null||t.getIframe().then(n=>{this.props.id?n.setAttribute("id",this.props.id):n.removeAttribute("id"),this.props.iframeClassName?n.setAttribute("class",this.props.iframeClassName):n.removeAttribute("class"),this.props.opts&&this.props.opts.width?n.setAttribute("width",this.props.opts.width.toString()):n.removeAttribute("width"),this.props.opts&&this.props.opts.height?n.setAttribute("height",this.props.opts.height.toString()):n.removeAttribute("height"),this.props.title?n.setAttribute("title",this.props.title):n.setAttribute("title","YouTube video player"),this.props.loading?n.setAttribute("loading",this.props.loading):n.removeAttribute("loading")})},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var t,n,r,s;if(typeof this.props.videoId>"u"||this.props.videoId===null){(t=this.internalPlayer)==null||t.stopVideo();return}let a=!1;const i={videoId:this.props.videoId};if((n=this.props.opts)!=null&&n.playerVars&&(a=this.props.opts.playerVars.autoplay===1,"start"in this.props.opts.playerVars&&(i.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(i.endSeconds=this.props.opts.playerVars.end)),a){(r=this.internalPlayer)==null||r.loadVideoById(i);return}(s=this.internalPlayer)==null||s.cueVideoById(i)},this.refContainer=t=>{this.container=t},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(e){return Tit(this,null,function*(){Ait(e,this.props)&&this.updatePlayer(),jit(e,this.props)&&(yield this.resetPlayer()),Nit(e,this.props)&&this.updateVideo()})}componentWillUnmount(){this.destroyPlayer()}render(){return I.createElement("div",{className:this.props.className,style:this.props.style},I.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},_3=jS;_3.propTypes=Rit;_3.defaultProps=Iit;_3.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var ZX=_3;const JX={fadeIn:{opacity:1},fadeOut:{opacity:0}},Pit={width:"100%",height:"100%",playerVars:{autoplay:1,color:"white",playsinline:1}},Jb=I.memo(e=>{const{isOpen:t,name:n,setisOpen:r,url:s}=e,a=s?My(s):void 0,i=f.useRef(void 0),[l,c]=f.useState(!1),u=f.useCallback(p=>{i.current=p.target,c(!0)},[i]),d=f.useCallback(p=>{if(i.current)switch(p.key){case" ":{i.current.getPlayerState()===ZX.PlayerState.PLAYING?i.current.pauseVideo():i.current.playVideo();break}case"ArrowRight":{i.current.seekTo(i.current.getCurrentTime()+5,!0);break}case"ArrowLeft":{i.current.seekTo(i.current.getCurrentTime()-5,!0);break}}},[i]);f.useEffect(()=>(t?window.addEventListener("keydown",d):window.removeEventListener("keydown",d),()=>{window.removeEventListener("keydown",d)}),[d,t]);const m=f.useCallback(p=>{r(p)},[r]);return a?o.jsx(ND,{open:t,onOpenChange:m,children:o.jsx(xfe,{className:"z-10",asChild:!0,children:o.jsxs(ge.div,{className:"bg-backdrop dark fixed inset-0 flex items-center justify-center backdrop-blur-md",initial:"fadeOut",animate:"fadeIn",exit:"fadeOut",variants:JX,transition:{duration:.2},children:[o.jsx(Pze,{asChild:!0,children:o.jsx(he,{extraCSS:"!fixed top-md right-md shadow-sm",icon:Rt,pill:!0,size:"small",variant:"common"})}),o.jsxs(D5,{className:"grid outline-none","aria-describedby":void 0,children:[o.jsx(Ib,{children:o.jsx(F5,{children:n})}),o.jsxs(Ke,{children:[!l&&o.jsx(ge.div,{className:"grid place-items-center [grid-area:1/-1]",initial:"fadeOut",animate:"fadeIn",exit:"fadeOut",transition:{duration:.2},variants:JX,children:o.jsx($r,{size:24})},"youtube-player-loading"),o.jsx(ge.div,{className:B("aspect-video overflow-hidden rounded-2xl shadow-lg [grid-area:1/-1] *:size-full","w-[calc(100dvw-(2*var(--size-md)))] sm:w-[75vw]"),initial:{opacity:0},animate:{opacity:l?1:0},transition:{duration:.2},children:o.jsx(ZX,{onReady:u,opts:Pit,title:n,videoId:a})},"youtube-player-content")]})]})]},"youtube-player-overlay")})}):null});Jb.displayName="YoutubeVideoPlayer";const wU=I.memo(({result:e,idx:t,isSelected:n,testId:r,additionalMetadata:s,isTrendingLayout:a=!1,trackEvent:i,downloadCitation:l,getImageUrl:c,variant:u,isSidecar:d,onClick:m,useLightBoxModal:p=!0})=>{const h=e.meta_data?.file_uuid?"fileRepositoryFile":e.is_attachment?"fileAttachment":"sourceCard";f.useEffect(()=>{const L=setTimeout(()=>i?.("source card viewed",{citation_url:e.url,position:t,title:e.name,source:h}),100);return()=>clearTimeout(L)},[i,e.name,e.url,t,h]);const g=e.url,[y,v]=f.useState(()=>!e.is_memory&&iU(e.url)?e.url:null),[x,b]=f.useState(!1),_=f.useMemo(()=>g&&!d&&My(g),[g,d]),[w,C]=f.useState(!1),S=Wge(e),E=Za(e.url),M=!_&&!e.is_attachment&&!E,k=a&&e.meta_data?.client==="trending",A=f.useMemo(()=>k?o.jsx(Eye,{result:e,authors:e.meta_data?.authors,imageURL:e.meta_data?.images?.[0]}):E&&y?o.jsx(Cye,{result:e,imageURL:y,useLightBoxModal:p}):E&&!y?o.jsx(li,{blockCount:1,size:"large"}):o.jsx(wye,{result:e,variant:u,additionalMetadata:s,isSelected:n}),[k,E,y,e,p,u,s,n]),R=f.useCallback((L,P)=>{b(P),v(L)},[]),O=f.useRef(null);return f.useEffect(()=>{const L=new IntersectionObserver(N=>{N.forEach(T=>{T.isIntersecting&&E&&y===null&&!x&&c?.(e,R)})},{threshold:.1}),P=O.current;return P&&E&&L.observe(P),()=>{P&&E&&L.unobserve(P)}},[O,g,c,e,y,R,x,E]),o.jsxs(xU,{result:e,trackEvent:i,children:[o.jsx("div",{ref:O,onClick:L=>{const P=typeof e.meta_data?.quoteBeforeContext=="string"?e.meta_data?.quoteBeforeContext:"",N=typeof e.meta_data?.quoteEmphasisText=="string"?e.meta_data?.quoteEmphasisText:"",T=typeof e.meta_data?.quoteAfterContext=="string"?e.meta_data?.quoteAfterContext:"",j=P.length>0||N.length>0||T.length>0;_&&!w?C(!0):l&&!E&&!S?(L.preventDefault(),l(e)):m?.(L),i?.("click citation",{source:h,citation_url:g}),j&&i?.("click check sources citation",{source:h,citation_url:g,quoteBeforeContext:P,quoteEmphasisText:N,quoteAfterContext:T})},className:B("group relative flex w-full items-stretch",{"h-full":u==="grid","cursor-pointer":!!l||!!_||!!m}),"data-test-id":r,children:o.jsx(H,{variant:"subtler",bgHover:M||_?"subtle":void 0,className:B("flex w-full rounded-lg",{"bg-super/10 ring-super/80 hover:!bg-super/10 dark:bg-super/20 dark:ring-super/80 dark:hover:!bg-super/20 ring-1":n}),children:A},e.name)}),_&&g&&e.name&&o.jsx(Jb,{isOpen:w,name:e.name,url:g,setisOpen:C})]})});wU.displayName="CitationCard";const Oit=ye(async()=>{const{MarkSpinner:e}=await K(async()=>{const{MarkSpinner:t}=await Promise.resolve().then(()=>b5e);return{MarkSpinner:t}},void 0);return{default:e}}),Mye=I.memo(({entryUUID:e,frontendContextUUID:t,contextUUID:n,webResults:r,isOpen:s,onClose:a,extendedBeforeContext:i,beforeContext:l,selectedText:c,afterContext:u,state:d})=>{const{$t:m}=Z(),{isMobileStyle:p}=xe(),{trackEvent:h}=Ne(),g=f.useCallback((b,_)=>{h(b,{entryUUID:e,frontendContextUUID:t,contextUUID:n,selectedTextExtendedBeforeContext:i,selectedTextBeforeContext:l,selectedText:c,selectedTextAfterContext:u,..._})},[e,t,n,i,l,c,u,h]),y=r?.length??0,v=d==="completed"?y===0?m({defaultMessage:"No sources",id:"tN3HZvczgp"}):m({defaultMessage:"{sources, plural, one {# source} other {# sources}}",id:"oWRBjE1HK2"},{sources:y}):m(d==="loading"?{defaultMessage:"Checking...",id:"1SvspNS1us"}:{defaultMessage:"Error",id:"KN7zKn8z4F"}),x=f.useMemo(()=>o.jsxs("div",{className:"gap-sm md:gap-md flex items-center",children:[o.jsx(Oit,{size:32,shouldAnimate:d==="loading"}),o.jsx(D,{variant:"page-title",className:B("mr-lg line-clamp-1 md:line-clamp-2"),children:v})]}),[d,v]);return o.jsxs(en,{isOpen:s,variant:p?"bottom-left-sheet":"side-sheet",onClose:a,titleContent:x,children:[o.jsxs(D,{children:[o.jsx("span",{children:l}),o.jsx("span",{className:"bg-super/30 font-bold",children:c}),o.jsx("span",{children:u})]}),o.jsx("hr",{className:"border-subtlest my-4 w-full border-t"}),o.jsx(H,{className:"gap-md flex h-full flex-col items-start",children:r?.map((b,_)=>o.jsx("div",{className:"gap-sm flex w-full min-w-0 flex-row-reverse",children:o.jsx(wU,{result:b,idx:_,isSelected:!1,variant:"modal",trackEvent:g})},_))})]})});Mye.displayName="CheckSourcesModal";const wen=3,Lit=120,Dit=1.5,Cen=2,Sen=4;function kye(e){return"article_info"in e}const Een=(e,t)=>({backend_uuid:"",context_uuid:"",frontend_context_uuid:"",knowledge_cards:void 0,widget_data:void 0,query_str:e,status:qn.STAGED.toLowerCase(),uuid:t,article_info:{title:e,summary:"",has_changed_title:!1,layout:"text",format:"paragraph",length:"concise",suggested_sections:[],user_selected_media_items:[],audience:"anyone",read_time:0,hero_offset:-1,emphasize_sources:!1,is_live:!1,is_auto_generated:!1},prompt_source:"page_suggestion",final:!1,mode:Sh.ARTICLE.toLowerCase(),sources:{sources:[]},should_index:!1,updated_datetime:void 0,thread_url_slug:void 0,expiry_time:null,thread_access:0,privacy_state:ag.NONE}),Men=e=>e?e.image_width&&e.image_height?e.image_width<Lit?!1:e.image_width>=Dit*e.image_height:!0:!1,ken=(e,t,n,r)=>{const s=[...e],a=t.find(i=>i.image===n);return a&&r<s.length&&s.splice(r,1,a),s},Ten=(e,t,n)=>{const r=[...e],s=r.findIndex(a=>a.image===t);if(s!==-1&&n<r.length){const a=r[n],i=r[s];a&&i&&(r[n]=i,r[s]=a)}return r},Ay=()=>{const{session:e}=Et(),t=fn(),{firstResult:{backend_uuid:n,context_uuid:r}={}}=Vt(),s=f.useCallback((a,i)=>{Li({name:a,data:{entryUUID:n,threadUUID:r,...i,isPerplexityBrowser:t},session:e??void 0})},[n,r,t,e]);return f.useMemo(()=>({trackEvent:s}),[s])};var w3="Checkbox",[Fit,Nen]=co(w3),[Uit,CU]=Fit(w3);function Bit(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:a,form:i,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:m}=e,[p,h]=Ji({prop:n,defaultProp:s??!1,onChange:c,caller:w3}),[g,y]=f.useState(null),[v,x]=f.useState(null),b=f.useRef(!1),_=g?!!i||!!g.closest("form"):!0,w={checked:p,disabled:a,setChecked:h,control:g,setControl:y,name:l,form:i,value:d,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:cd(s)?!1:s,isFormControl:_,bubbleInput:v,setBubbleInput:x};return o.jsx(Uit,{scope:t,...w,children:Vit(m)?m(w):r})}var Tye="CheckboxTrigger",Nye=f.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:a,value:i,disabled:l,checked:c,required:u,setControl:d,setChecked:m,hasConsumerStoppedPropagationRef:p,isFormControl:h,bubbleInput:g}=CU(Tye,e),y=Vn(s,d),v=f.useRef(c);return f.useEffect(()=>{const x=a?.form;if(x){const b=()=>m(v.current);return x.addEventListener("reset",b),()=>x.removeEventListener("reset",b)}},[a,m]),o.jsx(dn.button,{type:"button",role:"checkbox","aria-checked":cd(c)?"mixed":c,"aria-required":u,"data-state":Oye(c),"data-disabled":l?"":void 0,disabled:l,value:i,...r,ref:y,onKeyDown:Ft(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Ft(n,x=>{m(b=>cd(b)?!0:!b),g&&h&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})})});Nye.displayName=Tye;var jye=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:i,disabled:l,value:c,onCheckedChange:u,form:d,...m}=e;return o.jsx(Bit,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:i,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:p})=>o.jsxs(o.Fragment,{children:[o.jsx(Nye,{...m,ref:t,__scopeCheckbox:n}),p&&o.jsx(Pye,{__scopeCheckbox:n})]})})});jye.displayName=w3;var Aye="CheckboxIndicator",Iye=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=CU(Aye,n);return o.jsx(da,{present:r||cd(a.checked)||a.checked===!0,children:o.jsx(dn.span,{"data-state":Oye(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});Iye.displayName=Aye;var Rye="CheckboxBubbleInput",Pye=f.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:i,required:l,disabled:c,name:u,value:d,form:m,bubbleInput:p,setBubbleInput:h}=CU(Rye,e),g=Vn(n,h),y=cF(a),v=c5(r);f.useEffect(()=>{const b=p;if(!b)return;const _=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(_,"checked").set,S=!s.current;if(y!==a&&C){const E=new Event("click",{bubbles:S});b.indeterminate=cd(a),C.call(b,cd(a)?!1:a),b.dispatchEvent(E)}},[p,y,a,s]);const x=f.useRef(cd(a)?!1:a);return o.jsx(dn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??x.current,required:l,disabled:c,name:u,value:d,form:m,...t,tabIndex:-1,ref:g,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Pye.displayName=Rye;function Vit(e){return typeof e=="function"}function cd(e){return e==="indeterminate"}function Oye(e){return cd(e)?"indeterminate":e?"checked":"unchecked"}const e_=I.memo(({checked:e,toggleChecked:t,className:n="",variant:r="default",unselectedCheckboxClassName:s,...a})=>o.jsx(jye,{className:B("inline-flex cursor-pointer items-center justify-center duration-150",{"size-[24px]":r==="large","size-[18px]":r==="default","size-[14px]":r==="small"},n),checked:e,onCheckedChange:t,...a,children:o.jsx(H,{variant:e?"super":"background",noBorder:!0,className:B("border-subtle inline-flex size-full items-center justify-center rounded border",{"!border-super bg-super":e},!e&&s),children:o.jsx(Iye,{children:o.jsx(Ke,{children:e&&o.jsx(ge.div,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{type:"spring",bounce:.2,duration:.2},children:o.jsx(ce,{icon:Sr,size:r==="small"?"xs":"sm",className:"text-inverse"})})})})})}));e_.displayName="Checkbox";const Lye=I.memo(({onSelect:e,isSelected:t,result:n,idx:r})=>{const s=i=>{e?.(i)},{trackEvent:a}=Ne();return o.jsxs("div",{className:"gap-sm flex w-full flex-row-reverse",children:[o.jsx("div",{className:"w-full min-w-0",children:o.jsx(wU,{result:n,idx:r,isSelected:t,variant:"modal",trackEvent:a})}),e&&o.jsx("div",{className:"mt-[6px] shrink-0",children:o.jsx(e_,{checked:t,toggleChecked:s.bind(null,n.url)})})]})});Lye.displayName="ManageCitationRow";const SU=I.memo(({webResults:e,isOpen:t,submit:n,onClose:r,entry:s})=>{const{$t:a}=Z(),{isMobileStyle:i}=xe(),[l,c]=f.useState([]),{trackEvent:u}=Ay(),d=b=>{c(_=>_.includes(b)?_.filter(w=>w!==b):_.concat(b))},m=f.useCallback(()=>{c([]),r()},[c,r]),p=f.useCallback(b=>{u("click apply curation",{toDelete:b,entryUUID:s?.backend_uuid??void 0}),n?.(b)},[u,s,n]),h=f.useCallback(()=>{l.length>0&&p([...l]),m()},[l,m,p]),g=f.useMemo(()=>l.length>0?[{text:l.length===0?a({defaultMessage:"No sources",id:"tN3HZvczgp"}):a({defaultMessage:"{sources, plural, one {Remove # source} other {Remove # sources}}",id:"aRfiMe0V3R"},{sources:l.length}),disabled:l.length===0,onClick:h}]:[],[l.length,a,h]),y=s?.query_str??"";let v=y?cu(y).actualQuery:"";s&&kye(s)&&s.article_info?.title&&(v=s.article_info.title);const x=e?.length??0;return o.jsx(en,{actionList:g,title:x===0?a({defaultMessage:"No sources",id:"tN3HZvczgp"}):a({defaultMessage:"{sources, plural, one {# source} other {# sources}}",id:"oWRBjE1HK2"},{sources:x}),subtitle:v??void 0,isOpen:t,variant:i?"bottom-left-sheet":"side-sheet",onClose:m,icon:um,children:o.jsx(H,{className:"gap-md flex h-full flex-col items-start",children:e?.map((b,_)=>o.jsx(Lye,{onSelect:s&&n?d:void 0,isSelected:l.includes(b.url),idx:_,result:b},b.url))})})});SU.displayName="CitationListModal";const Ms=()=>{const[e,t]=I.useState(!1);return I.useEffect(()=>{t(!0)},[]),e},$it=({children:e,initial:t=!1,mode:n="wait",className:r,transition:s,supportZeroHeight:a=!0,...i})=>{const[l,{height:c}]=ql(),u=Ms(),d=a||c>0?c:"auto";return o.jsx(ge.div,{animate:{height:u?d:"auto"},className:r,transition:s,...i,children:o.jsx("div",{ref:l,children:o.jsx(Ke,{mode:n,initial:t,children:e})})})},rn=oo(.16,1,.3,1),jen=oo(.7,0,.84,0),Wit=({children:e,initial:t={opacity:0},animate:n={opacity:1},exit:r,transition:s,className:a,style:i,ref:l})=>o.jsx(ge.div,{initial:t,animate:n,exit:r??t,transition:s,ref:l,className:a,style:i,children:e}),zs=$it,Qr=Wit,Ml={outOfDate:ee({defaultMessage:"Out of date",id:"osuyeDna3D"}),inaccurate:ee({defaultMessage:"Inaccurate",id:"nzRZzFiqUd"}),irrelevant:ee({defaultMessage:"Irrelevant",id:"yi63oZJMHr"}),upToDate:ee({defaultMessage:"Up to date",id:"aOfyGCCmT0"}),accurate:ee({defaultMessage:"Accurate",id:"wrxp13nnhA"}),relevant:ee({defaultMessage:"Relevant",id:"XpZsjM22T8"}),successToast:ee({defaultMessage:"Thank you for your detailed feedback!",id:"ZrHT928df5"}),positivePrompt:ee({defaultMessage:"What did you like about this memory? (optional)",id:"xNH2PHiuYB"}),negativePrompt:ee({defaultMessage:"What didn't you like about this memory? (optional)",id:"gEOv/lEKfP"}),placeholder:ee({defaultMessage:"Add specific details",id:"HY/Q6ifj24"})},Hit={out_of_date:Ml.outOfDate,inaccurate:Ml.inaccurate,irrelevant:Ml.irrelevant},zit={up_to_date:Ml.upToDate,accurate:Ml.accurate,relevant:Ml.relevant},Dye=I.memo(({type:e,message:t,onFeedbackClick:n})=>{const s=Z().formatMessage,a=f.useCallback(()=>{n(e)},[e,n]);return o.jsx(he,{size:"small",variant:"common",text:s(t),onClick:a,extraCSS:"w-full justify-start text-left"})});Dye.displayName="FeedbackOption";const Fye=I.memo(({isPositive:e,onFeedbackClick:t,onFreeformVisible:n})=>{const r=e?zit:Hit,s=f.useMemo(()=>Object.entries(r).map(([a,i])=>o.jsx(Dye,{type:a,message:i,onFeedbackClick:t},a)),[r,t]);return o.jsxs("div",{className:"gap-sm flex flex-col",children:[s,o.jsx(he,{size:"small",variant:"common",text:"Other...",onClick:n,extraCSS:"w-full justify-start text-left"})]})});Fye.displayName="FeedbackOptions";const Uye=I.memo(({onSubmit:e,feedbackState:t,setFeedbackState:n,onDismiss:r,isPositive:s})=>{const{deprecatedOpenToast:a}=gn(),l=Z().formatMessage,{isMobileStyle:c,isMobileUserAgent:u}=xe(),[d,m]=f.useState(!1),p=f.useCallback(()=>{a(l(Ml.successToast),"success",2)},[a,l]),h=f.useCallback(C=>{p(),e(C)},[p,e]),g=f.useCallback(()=>{t&&h(t)},[t,h]),y=f.useCallback(C=>{const S={type:C};n(S),h(S)},[n,h]),v=f.useCallback(()=>{m(!1)},[m]),x=f.useCallback(()=>{m(!0)},[m]),b=f.useCallback(C=>{n({type:"comment",comment:C})},[n]),_=f.useCallback(C=>{ra.isEnterKeyWithoutShift(C)&&g()},[g]),w=f.useMemo(()=>[{type:"button",buttonProps:{variant:"primary",size:"small",icon:F7,onClick:g,disabled:!t?.comment,extraCSS:"aspect-square min-h-md h-md w-md",pill:!0}}],[g,t?.comment]);return o.jsx("div",{className:"mt-lg animate-in fade-in w-full duration-500",children:o.jsxs(H,{className:"gap-sm p-md pt-sm relative flex w-full flex-col rounded-md border",children:[o.jsx("div",{className:B("absolute bottom-full flex size-0 items-end",s?"left-2":"left-10"),children:o.jsx(H,{variant:"background",className:"size-3 shrink-0 origin-bottom-left rotate-45 border border-b-0 border-r-0"})}),o.jsxs("div",{className:B("ease-outExpo flex items-center pr-8 duration-150",{"pl-4":d}),children:[o.jsx(Te,{size:"tiny",onClick:v,pill:!0,icon:P7,extraCSS:B("!absolute duration-150",{"opacity-0 pointer-events-none":!d,"top-xs left-xs":d})}),o.jsx(D,{variant:"small",color:"light",children:l(s?Ml.positivePrompt:Ml.negativePrompt)})]}),o.jsx(zs,{mode:"popLayout",transition:{duration:.2,ease:rn},children:o.jsx(Qr,{initial:{opacity:0,x:d?10:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:d?-10:10},transition:{duration:.2,ease:rn},children:d?o.jsx("div",{className:"gap-x-sm flex items-end",children:o.jsx("div",{className:"flex-1",children:o.jsx(Aa,{className:"pr-md w-full",placeholder:l(Ml.placeholder),value:t?.comment||"",minRows:3,isOptional:!0,onChange:b,onKeyDown:_,autoFocus:!0,isMobileStyle:c,isMobileUserAgent:u,rightItems:w})})}):o.jsx(Fye,{isPositive:s,onFeedbackClick:y,onFreeformVisible:x})},d?"visible":"hidden")}),o.jsx(Te,{size:"tiny",onClick:r,pill:!0,icon:BM,extraCSS:"!absolute top-xs right-xs"})]})})});Uye.displayName="MemoryFeedbackInput";const Git=20,qit=async({queryParams:e,headers:t={},reason:n})=>{const r="getMemories";try{const s=await se.GET("/rest/memories/list",n,{params:{query:{limit:e.limit,offset:e.offset,query:e.query},timeoutMs:Ut.MEDIUM},headers:t});return s.data?{memories:s.data.memories,totalCount:s.data.total_memory_count}:{memories:[],totalCount:0}}catch(s){return ne.log(`Error in ${r}:`,s),{memories:[],totalCount:0}}},Kit=(e,t)=>{const n=t.reduce((r,s)=>r+s.memories.length,0);if(n<e.totalCount)return n},Aen=({initialPageParam:e=0,searchQuery:t,reason:n})=>xu({queryKey:nF(t),queryFn:async({pageParam:r})=>qit({queryParams:{limit:Git,offset:r??0,query:t},reason:n}),getNextPageParam:Kit,initialPageParam:e,refetchOnMount:"always",placeholderData:r=>r}),Yit=async({memoryKey:e,reason:t})=>{try{return(await se.DELETE("/rest/memories/delete",t,{params:{query:{memory_key:e}}})).data}catch(n){ne.log("Error in deleteMemory:",n);return}},Qit=({reason:e})=>{const t=ht();return vt({mutationFn:n=>Yit({memoryKey:n,reason:e}),onMutate:async n=>{await t.cancelQueries({queryKey:["memories"]});const r=t.getQueryData(["memories"]);try{t.setQueryData(["memories"],s=>{if(!s)return s;const a=s.pages.map(i=>({totalCount:i.totalCount-1,memories:i.memories.filter(l=>l.memory_key!==n)}));return{...s,pages:a}})}catch(s){ne.log(`Error in onMutate deleteMemories (${nF()}):`,s)}return{previousData:r}},onError:(n,r,s)=>{s?.previousData&&t.setQueryData(["memories"],s.previousData)},onSettled:()=>{t.invalidateQueries({queryKey:["memories"]})}})},Xit=async({reason:e})=>{try{return(await se.DELETE("/rest/memories/delete-all",e)).data}catch(t){ne.log("Error in deleteAllMemories:",t);return}},Zit=()=>{const e=ht();return vt({mutationFn:Xit,onMutate:async()=>{await e.cancelQueries({queryKey:["memories"]});const t=e.getQueryData(["memories"]);try{e.setQueryData(["memories"],()=>({pages:[{memories:[],totalCount:0}],pageParams:[0]}))}catch(n){ne.log(`Error in onMutate deleteAllMemories (${nF()}):`,n)}return{previousData:t}},onError:(t,n,r)=>{r?.previousData&&e.setQueryData(["memories"],r.previousData)},onSuccess:()=>{e.invalidateQueries({queryKey:["memories"]})}})},Jit=async({entryUuid:e,shouldForget:t,feedback:n,feedbackEntryUuid:r,reason:s})=>{try{return(await se.POST("/rest/memories/toggle_entry_feedback",s,{params:{query:{entry_uuid:e,should_forget:t===null?void 0:t,feedback:n,feedback_entry_uuid:r}}})).data}catch(a){ne.log("Error in forgetEntry:",a);return}},elt=({entryUuid:e,reason:t})=>{const n=ht();return vt({mutationFn:({shouldForget:r,feedback:s,feedbackEntryUuid:a})=>Jit({entryUuid:e,shouldForget:r,feedback:s,feedbackEntryUuid:a,reason:t}),onMutate:async({shouldForget:r})=>{await n.cancelQueries({queryKey:Vp(e)});const s=n.getQueryData(Vp(e));return n.setQueryData(Vp(e),r),{previousFeedback:s}},onError:(r,s,a)=>{a?.previousFeedback!==void 0&&n.setQueryData(Vp(e),a.previousFeedback)},onSuccess:()=>{n.invalidateQueries({queryKey:Vp(e)})}})},tlt=async({entryUuid:e,reason:t})=>{try{return(await se.GET("/rest/memories/get_entries",t,{params:{query:{entry_uuid:e}}})).data?.entries?.[0]?.is_thumbs_down}catch(n){ne.log("Error in getEntry:",n);return}},nlt=({entryUuid:e,enabled:t,reason:n})=>We({queryKey:Vp(e??""),queryFn:()=>e?tlt({entryUuid:e,reason:n}):null,enabled:!!e&&t}),rlt=async({memoryKey:e,reason:t})=>{try{return(await se.GET("/rest/memories/get",t,{params:{query:{memory_key:e}}})).data?.memories?.[0]}catch(n){ne.log("Error in getMemoryDetail:",n);return}},Ien=({memoryKey:e,enabled:t,reason:n})=>We({queryKey:["memory-detail",e],queryFn:()=>e?rlt({memoryKey:e,reason:n}):null,enabled:!!e&&t,retry:2}),Bye=e=>{if(!e)return;const t=e.split("/").filter(Boolean);return t.length>0?t[t.length-1]:void 0},Vye=e=>{const t=e.is_memory?"memory":"conversation_history",n=e.is_memory?e.url:void 0,r=e.is_conversation_history?Bye(e.url):void 0;return{snippet:e.snippet,url:e.url??"",title:e.name,type:t,memoryKey:n,entryUuid:r,timestamp:e.timestamp??""}},$ye=I.memo(({isOpen:e,onClose:t,snippet:n,type:r,url:s,memoryKey:a,entryUuid:i,title:l,timestamp:c})=>{const{formatDate:u}=Z(),d=fa(),m=r==="conversation_history",p=r==="memory",{trackEvent:h}=Ne(),{openStackedModal:g}=xt(),y=f.useCallback(()=>{h("navigated to manage memory",{memory_key:a}),g("memoryListModal",{isMemoryEnabled:!0})},[a,h,g]),v=f.useMemo(()=>o.jsx(D,{variant:"small",children:o.jsx(pe,{defaultMessage:"Manage",id:"0AzlrbMWV9"})}),[]),x=f.useMemo(()=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ce,{icon:m?Zg:Kc}),o.jsx(D,{variant:"baseSemi",children:m?o.jsx(pe,{defaultMessage:"Library",id:"StcK672jB9"}):o.jsx(pe,{defaultMessage:"Memory",id:"dVx3yznM2C"})})]}),[m]);return o.jsxs(en,{variant:d?"bottom-sheet":"side-sheet",isOpen:e,onClose:t,modalClassname:"md:!max-w-[400px] md:!min-w-[400px]",modalContentClassname:"justify-between",titleContent:x,children:[o.jsxs(H,{className:"flex size-full flex-col items-start",children:[l&&c&&o.jsxs(o.Fragment,{children:[o.jsx(D,{variant:"baseSemi",children:l}),o.jsx(D,{variant:"tinyRegular",color:"light",className:"pb-sm",children:u(c,{dateStyle:"long"})})]}),o.jsxs("div",{className:"inline",children:[o.jsx(D,{variant:"small",className:"inline",children:n}),o.jsx(D,{variant:"smallBold",className:"ml-1 inline",color:"super",children:m&&o.jsx(Ge,{href:s,target:"_blank",rel:"noopener",className:"whitespace-nowrap",children:o.jsx(pe,{defaultMessage:"See more",id:"yoLwRWw99S"})})})]}),m&&o.jsx(Wye,{entryUuid:i??"",memoryKey:a??"",type:r})]}),p&&o.jsxs(H,{className:"flex w-full items-center justify-center gap-1",children:[o.jsx(D,{variant:"small",className:"inline",color:"light",children:o.jsx(pe,{defaultMessage:"See all your memories.",id:"h0JAuR900y"})}),o.jsx(Te,{onClick:y,size:"small",variant:"common",noPadding:!0,text:v})]})]})});$ye.displayName="MemorySearchHistoryModal";const Wye=I.memo(({entryUuid:e,memoryKey:t,type:n})=>{const r="feedback-container",{$t:s}=Z(),a=f.useMemo(()=>{if(typeof window>"u")return;const S=Bye(window.location.pathname);if(S)return S.split("-").pop()},[]),{mutate:i}=elt({entryUuid:e??"",reason:r}),{trackEvent:l}=Ne(),{data:c}=nlt({entryUuid:e??"",enabled:!!e&&n==="conversation_history",reason:r}),[u,d]=f.useState(!1),[m,p]=f.useState(!1),[h,g]=f.useState(null),y=f.useMemo(()=>n==="conversation_history"?c:void 0,[n,c]),v=f.useCallback((S,E)=>{n==="conversation_history"&&e&&i({shouldForget:S,feedback:E,feedbackEntryUuid:a})},[n,e,i,a]),x=f.useCallback(S=>{l("memory search history feedback",{type:n,isHelpful:!S,...n==="conversation_history"&&{entry_uuid:e},...n==="memory"&&{memory_key:t}}),v(S),p(!S),d(!0)},[n,e,t,l,v]),b=f.useCallback(()=>{if(y===!1){v(null),d(!1);return}x(!1)},[y,v,x]),_=f.useCallback(()=>{if(y===!0){v(null),d(!1);return}x(!0)},[y,v,x]),w=f.useCallback(S=>{const E=S.type==="comment"?S.comment:S.type;v(!m,E),l("memory search history feedback",{type:n,isHelpful:m,...n==="conversation_history"&&{entry_uuid:e},...n==="memory"&&{memory_key:t}}),d(!1),g(null)},[n,e,t,l,m,v]),C=f.useCallback(()=>{d(!1),g(null)},[]);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx(Te,{size:"small",icon:alt(y??null),onClick:b,toolTip:s({defaultMessage:"Helpful",id:"5vwKkgYwrE"}),pill:!0}),o.jsx(Te,{size:"small",icon:slt(y??null),onClick:_,toolTip:s({defaultMessage:"Not helpful",id:"04tuTF23S7"}),pill:!0})]}),y===!0&&o.jsx(D,{variant:"tinyRegular",color:"light",children:o.jsx(pe,{defaultMessage:"This {type} will not be referenced in future searches.",id:"167AKZjMm1",values:{type:n==="memory"?"memory":"entry"}})}),u&&o.jsx(Uye,{onSubmit:w,feedbackState:h,setFeedbackState:g,onDismiss:C,isPositive:m})]})});Wye.displayName="FeedbackContainer";const slt=e=>e===null?p2:e===!0?GPe:p2,alt=e=>e===null?WI:e===!1?qPe:WI,Sc={linear_alt:{name:"Linear",tagline:ee({defaultMessage:"Plan and track projects, issues, and team workflows in Linear",id:"6u9Zf65BGW"}),bullets:[ee({defaultMessage:"Search across Linear issues, projects, and teams",id:"MicGE6HssU"}),ee({defaultMessage:"Create and update Linear issues and projects",id:"scUqB1LbKr"}),ee({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),ee({defaultMessage:"Data is retrieved from and written back to Linear whenever you query in Perplexity",id:"b/8mLQxIqE"})],developer:ee({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://www.linear.app",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/articles/12167711-linear-connector-for-enterprise-pro",footnote:{link:"https://www.perplexity.ai/help-center/en/articles/12167711-linear-connector-for-enterprise-pro",text:ee({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},google_drive:{name:"Google Drive",tagline:ee({defaultMessage:"Get in-depth answers from your Google Drive content",id:"CDmY5AQsRD"}),bullets:[ee({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),ee({defaultMessage:"Updates to your Google Drive files are automatically synced to Perplexity",id:"k0B4qzv3NH"}),ee({defaultMessage:"File and folder selection is based on your existing Google Drive permissions",id:"J1Fu/3n3pb"})],consumerBullets:[ee({defaultMessage:"Attach files from Google Drive to your query",id:"aUk7jts0tb"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://drive.google.com",supportUrl:null,documentationUrl:null,footnote:null},sharepoint:{name:"SharePoint",tagline:ee({defaultMessage:"Get in-depth answers from your SharePoint content",id:"H/XGo2cLQi"}),bullets:[ee({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),ee({defaultMessage:"Updates to your SharePoint files are automatically synced to Perplexity",id:"3asA6JKlOn"}),ee({defaultMessage:"File and folder selection is based on your existing SharePoint permissions",id:"m2/iFnRhkg"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://microsoft.sharepoint.com/",supportUrl:null,documentationUrl:null,footnote:null},onedrive:{name:"OneDrive",tagline:ee({defaultMessage:"Get in-depth answers from your OneDrive content",id:"6HI2ZlxJGV"}),bullets:[ee({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),ee({defaultMessage:"Updates to your OneDrive files are automatically synced to Perplexity",id:"gCHhNKes4R"}),ee({defaultMessage:"File and folder selection is based on your existing OneDrive permissions",id:"YCVPoXax40"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://www.microsoft.com/en-us/microsoft-365/onedrive/online-cloud-storage",documentationUrl:null,supportUrl:null,footnote:null},box:{name:"Box",tagline:ee({defaultMessage:"Get in-depth answers from your Box content",id:"vj5W7AIDE6"}),bullets:[ee({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),ee({defaultMessage:"Updates to your Box files are automatically synced to Perplexity",id:"tkl3HRlwOf"}),ee({defaultMessage:"File and folder selection is based on your existing Box permissions",id:"LuX1iT7lFa"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"http://www.box.com/",documentationUrl:null,supportUrl:null,footnote:null},dropbox:{name:"Dropbox",tagline:ee({defaultMessage:"Get in-depth answers from your Dropbox content",id:"+RPvqEE51/"}),bullets:[ee({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),ee({defaultMessage:"Updates to your Dropbox files are automatically synced to Perplexity",id:"Qnsbs8527p"}),ee({defaultMessage:"File and folder selection is based on your existing Dropbox permissions",id:"kzOZ3ZFcW4"})],consumerBullets:[ee({defaultMessage:"Attach files from Dropbox to your query",id:"E/rzAALT5B"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"http://www.dropbox.com/",documentationUrl:null,supportUrl:null,footnote:null},notion_mcp:{name:"Notion",tagline:ee({defaultMessage:"Search and create content on your Notion pages",id:"rXdfDrSVlj"}),bullets:[ee({defaultMessage:"Search across your pages and data ",id:"Ib2j2yH5wv"}),ee({defaultMessage:"Create new pages in your teamspace from Perplexity",id:"Ltbp+B60OB"}),ee({defaultMessage:"Update your data on existing pages directly from Perplexity",id:"ldpNlZAKLQ"}),ee({defaultMessage:"Data is retrieved from and written back to Notion whenever you query in Perplexity",id:"nbLEAiWYzT"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"http://www.notion.so/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/articles/12167654-notion-connector-for-enterprise-pro",footnote:null},github_mcp_direct:{name:"GitHub",tagline:ee({defaultMessage:"Search and manage your GitHub repositories ",id:"4miSrKjLad"}),bullets:[ee({defaultMessage:"Search, analyze, and summarize your repositories and issues",id:"hi8CvW/ld8"}),ee({defaultMessage:"Create, update, and manage issues and pull requests ",id:"6eZgVvjZEw"}),ee({defaultMessage:"Monitor workflows ",id:"EduR5immBI"}),ee({defaultMessage:"Search and manage notifications to streamline communication",id:"+zOuCOpAH8"}),ee({defaultMessage:"Data is retrieved from and written back to GitHub whenever you query in Perplexity",id:"9EQO9mj0sd"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://github.com/",supportUrl:"https://www.perplexity.ai/help-center/en/articles/12275669-github-connector-for-enterprise",documentationUrl:null,footnote:null},asana_mcp_direct:{name:"Asana",tagline:ee({defaultMessage:"Plan and track projects, tasks, and team workflows in Asana",id:"9AhVP0Y+6c"}),bullets:[ee({defaultMessage:"Search across Asana tasks, projects, and teams",id:"GKC+Sx/2dm"}),ee({defaultMessage:"Create and update Asana tasks and projects",id:"TnQ0Far/ZY"}),ee({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),ee({defaultMessage:"Data is retrieved from and written back to Asana whenever you query in Perplexity",id:"9NNVAEg7U3"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://asana.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:null},asana_mcp_merge:{name:"Asana",tagline:ee({defaultMessage:"Plan and track projects, tasks, and team workflows in Asana",id:"9AhVP0Y+6c"}),bullets:[ee({defaultMessage:"Search across Asana tasks, projects, and teams",id:"GKC+Sx/2dm"}),ee({defaultMessage:"Create and update Asana tasks and projects",id:"TnQ0Far/ZY"}),ee({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),ee({defaultMessage:"Data is retrieved from and written back to Asana whenever you query in Perplexity",id:"9NNVAEg7U3"})],developer:ee({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://asana.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:{link:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",text:ee({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},atlassian_mcp_direct:{name:"Atlassian",tagline:ee({defaultMessage:"Plan and track projects, tasks, and team workflows in Atlassian",id:"OKCrVfJwqD"}),bullets:[ee({defaultMessage:"Search across Atlassian tasks, projects, and teams",id:"3UDuuWRtR5"}),ee({defaultMessage:"Create and update Atlassian tasks and projects",id:"u+44P4c8w+"}),ee({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),ee({defaultMessage:"Data is retrieved from and written back to Atlassian whenever you query in Perplexity",id:"7gmOJCXim3"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://www.atlassian.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:null},jira_mcp_merge:{name:"Jira",tagline:ee({defaultMessage:"Plan and track projects, tasks, and team workflows in Jira",id:"DBNOet3M55"}),bullets:[ee({defaultMessage:"Search across Jira tasks, projects, and teams",id:"nWIt8qYQz1"}),ee({defaultMessage:"Create and update Jira tasks and projects",id:"mUCQ5Z26EF"}),ee({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),ee({defaultMessage:"Data is retrieved from and written back to Jira whenever you query in Perplexity",id:"CfzDXfmKKD"})],developer:ee({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://www.atlassian.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:{link:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",text:ee({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},confluence_mcp_merge:{name:"Confluence",tagline:ee({defaultMessage:"Search and create content on your Confluence pages",id:"7maYua4COa"}),bullets:[ee({defaultMessage:"Search across your pages and data ",id:"Ib2j2yH5wv"}),ee({defaultMessage:"Create new pages in your teamspace from Perplexity",id:"Ltbp+B60OB"}),ee({defaultMessage:"Update your data on existing pages directly from Perplexity",id:"ldpNlZAKLQ"}),ee({defaultMessage:"Data is retrieved from and written back to Confluence whenever you query in Perplexity",id:"Ifp49Im16y"})],developer:ee({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://www.atlassian.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:{link:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",text:ee({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},microsoft_teams_mcp_merge:{name:"Microsoft Teams",tagline:ee({defaultMessage:"Search and send messages in Microsoft Teams",id:"Rfl+yanh+2"}),bullets:[ee({defaultMessage:"Search across Microsoft Teams messages and channels",id:"LF+Ow88sFq"}),ee({defaultMessage:"Send and receive messages in Microsoft Teams",id:"1t8qQ+bxf2"}),ee({defaultMessage:"Data is retrieved from and written back to Microsoft Teams whenever you query in Perplexity",id:"+bTrwFjG66"})],developer:ee({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://teams.microsoft.com",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:{link:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",text:ee({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},slack_direct:{name:"Slack",tagline:ee({defaultMessage:"Search and post messages across your Slack workspace",id:"eGJ5wb/MzJ"}),bullets:[ee({defaultMessage:"Search messages across DMs, private channels, and public channels you have access to in Slack",id:"Om6FOnY7N3"}),ee({defaultMessage:"Post messages directly to Slack",id:"UOgLjThccO"}),ee({defaultMessage:"Data is retrieved from and written back to Slack whenever you run a query in Perplexity",id:"Fy/OA6Fd79"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://slack.com",supportUrl:"https://www.perplexity.ai/help-center/en/articles/12167980-using-the-connector-for-slack",documentationUrl:null,footnote:null},gcal:{name:"Gmail with Calendar",tagline:ee({defaultMessage:"Search, create, and manage your emails and calendar events",id:"R3VofVJjT+"}),bullets:[ee({defaultMessage:"Search your Gmail and calendar",id:"GCr38D/MA3"}),ee({defaultMessage:"Draft and send emails",id:"rMtvi6WyKE"}),ee({defaultMessage:"Manage and monitor emails and events",id:"p70DVe/3eQ"}),ee({defaultMessage:"Create and update calendar events",id:"ZLhGXocN5/"}),ee({defaultMessage:"Data is retrieved from and written back to Gmail and Gcal whenever you query in Perplexity",id:"HsjdaQ7NYa"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://accounts.google.com/InteractiveLogin?emr=1&ltmpl=default&nojavascript=1&rm=false&service=mail&ss=1",documentationUrl:null,supportUrl:null,footnote:null},outlook:{name:"Outlook",tagline:ee({defaultMessage:"Search your emails and calendar events",id:"zNVRcAj90b"}),bullets:[ee({defaultMessage:"Search your Outlook e-mail and calendar",id:"z5Tw6ljNsF"}),ee({defaultMessage:"Manage and monitor emails and events",id:"p70DVe/3eQ"}),ee({defaultMessage:"Data is retrieved from and written back to Outlook whenever you query in Perplexity",id:"xX8KEtSv2M"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://www.microsoft.com/en-us/microsoft-365/outlook/log-in",documentationUrl:null,supportUrl:null,footnote:null}},olt=e=>e in Sc,ilt=({connectorName:e,connectorAvatar:t,showModal:n,setShowModal:r,handleEnable:s})=>{const{$t:a}=Z(),{isEnterprise:i}=Y5({reason:"connectors-enable-modal"}),l=Sc[e].websiteUrl,c=Sc[e].documentationUrl,u=Sc[e].tagline,d=Sc[e]?.supportUrl??"https://www.perplexity.ai/help-center/en/articles/10672063-introduction-to-file-connectors-for-enterprise-organizations",m=Sc[e].footnote,p=[{label:"Website",url:l,icon:Vm},{label:"Documentation",url:c,icon:U7},{label:"Support",url:d,icon:Nie}],h=!i&&Sc[e].consumerBullets?Sc[e].consumerBullets:Sc[e].bullets;return o.jsx(en,{isOpen:n,onClose:()=>r(!1),variant:"large",modalContentClassname:"!py-0 w-full",modalClassname:"!max-w-2xl !w-screen",wrapperClassname:"w-full",noPadding:!0,children:o.jsxs(H,{className:"flex flex-col gap-6 px-3 pb-6 pt-2",children:[o.jsxs(H,{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[t&&o.jsx(H,{variant:"subtler",className:"border-subtlest shrink-0 rounded-lg border",children:o.jsx("img",{src:t,alt:Zs(e)??void 0,width:60,height:60,className:"object-contain"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(D,{variant:"section-title",children:Zs(e)}),u&&o.jsx(D,{variant:"small",color:"light",className:"text-pretty",children:a(u)})]})]}),o.jsx(he,{text:a({defaultMessage:"Add connector",id:"QDa8Q+GNMs"}),size:"small",variant:"primary",onClick:s,extraCSS:"rounded-full sm:ml-auto"})]}),o.jsxs("section",{className:"flex flex-col gap-2",children:[o.jsx(D,{variant:"baseSemi",children:a({defaultMessage:"Overview:",id:"75gRjsa29W"})}),o.jsx("ul",{children:h.map((g,y)=>o.jsx(D,{variant:"small",as:"li",className:"mb-xs ml-4 list-disc text-pretty last:mb-0",children:a(g)},y))})]}),o.jsxs("section",{className:"flex flex-col gap-2",children:[o.jsx(D,{variant:"baseSemi",children:a({defaultMessage:"Links",id:"qCcwo3DU78"})}),o.jsx("ul",{className:"flex flex-col gap-2",children:p.map((g,y)=>{if(!g.url)return null;const v=g.icon;return o.jsx("li",{className:"text-super group w-fit",children:o.jsxs(Ge,{href:g.url,target:"_blank",className:"flex items-center gap-1",children:[o.jsx(ce,{icon:v,size:14}),o.jsx(D,{variant:"small",className:"text-inherit group-hover:underline",children:g.label})]})},y)})})]}),m&&o.jsx("section",{className:"border-t py-2",children:o.jsxs(D,{variant:"tinyRegular",className:"text-pretty",children:[o.jsx(D,{as:"span",variant:"tinyRegular",color:"light",children:a(m.text)}),o.jsx(Ge,{href:m.link,target:"_blank",className:"text-super ml-1",children:a({defaultMessage:"Learn more",id:"TdTXXf940t"})})]})})]})})};function llt({isOpen:e,onContinue:t,onClose:n}){return o.jsx(en,{isOpen:e,onClose:n,title:"",variant:"small",children:o.jsxs(H,{className:"mx-auto w-full rounded-2xl px-4 py-0",children:[o.jsx(D,{variant:"section-title",className:"mb-2",children:o.jsx(pe,{defaultMessage:"We need more access to help with your Google calendar and email",id:"qfQz160ySM"})}),o.jsx(D,{variant:"small",color:"light",className:"mb-6",children:o.jsx(pe,{defaultMessage:"These permissions let us help you schedule meetings, find important messages, manage your inbox, and provide personalized assistance based on your real schedule and communication needs.",id:"yN/31P429t"})}),o.jsx(D,{variant:"small",color:"light",className:"mb-6",children:o.jsx(pe,{defaultMessage:"Important: Please select <b>all permission boxes</b> on the next screen to enable these features.",id:"sr/jqAmxMK",values:{b:r=>o.jsx("span",{className:"font-semibold",children:r})}})}),o.jsx(he,{text:o.jsx(pe,{defaultMessage:"Grant access to calendar and email",id:"SLN8GewG3+"}),variant:"primary",size:"regular",onClick:t,extraCSS:"w-full rounded-xl mb-4"})]})})}const clt=({isOpen:e,onClose:t})=>{const n="delete-all-memories-modal",r=Z(),{mutate:s}=Zit(),{trackEvent:a}=Ne(),i=f.useMemo(()=>[{text:r.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,variant:"common"},{text:r.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),onClick:()=>{a("cleared all memories",{}),s({reason:n}),t()},variant:"rejected"}],[s,r,t,a]);return o.jsx(en,{isOpen:e,onClose:t,actionList:i,titleTextVariant:"smallBold",renderCloseButton:!1,modalClassname:"!min-w-0 max-w-[324px] p-0",headerClassname:"pt-6 px-6  md:px-6 border-b-0 !pb-0",modalContentClassname:"pt-0",footerClassname:"border-t-0 pt-2 px-6 !pb-6 md:pt-2 md:px-6 md:pb-6",title:r.formatMessage({defaultMessage:"Delete all memories",id:"wViT4HVZZG"}),children:o.jsx("div",{className:"w-full justify-start px-2 py-1",children:o.jsx(D,{variant:"tinyRegular",children:r.formatMessage({defaultMessage:"Are you sure you want to delete all of your memories? Memories cannot be recovered once deleted.",id:"2xMxdqIgTQ"})})})})},ult=({isOpen:e,onClose:t,memoryId:n,onDeleteSuccess:r})=>{const s="delete-memory-modal",a=Z(),{mutate:i}=Qit({reason:s}),{trackEvent:l}=Ne(),{isMobileStyle:c}=xe(),u=f.useMemo(()=>[{text:a.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,variant:"common",shouldShowConfirmDialog:!0},{text:a.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),onClick:()=>{n&&(l("delete memory",{memoryId:n}),i(n,{onSuccess:()=>{r?.(),t()}}))},variant:"rejected"}],[i,a,n,t,r,l]);return o.jsx(en,{isOpen:e,onClose:t,actionList:u,titleTextVariant:"smallBold",renderCloseButton:!1,modalClassname:"!min-w-0 p-0",variant:c?"bottom-sheet":"default",title:a.formatMessage({defaultMessage:"Delete memory",id:"767lMfHCVm"}),children:o.jsx("div",{className:"w-full",children:o.jsx(D,{variant:"small",children:a.formatMessage({defaultMessage:"Are you sure you want to delete this memory? Memories cannot be recovered once deleted.",id:"bJP46nmx6X"})})})})},eZ=50,Jv={title:ee({defaultMessage:"Watchlist",id:"b+DoOaU7zT"}),saveWatchlist:ee({defaultMessage:"Save",id:"jvo0vs3nF0"}),cancel:ee({defaultMessage:"Cancel",id:"47FYwba+bI"}),settingsTitle:ee({defaultMessage:"Categories",id:"VKb1MSJZP+"}),sports:ot({title:{defaultMessage:"Sports",id:"qEuXjx1B4z"},settingsCtaText:{defaultMessage:"Add teams",id:"kapmPqUzuB"},searchPlaceholder:{defaultMessage:"Search for a team",id:"yve+fFGCVl"},widgetDescription:{defaultMessage:"Choose your teams",id:"6ZVPGK17cb"},settingsDescription:{defaultMessage:"Event updates, breaking news, and live scores",id:"yBBV27kmkn"},modalDescription:{defaultMessage:"Get event updates, breaking news, and live scores",id:"VLVunZTFAF"}}),finance:ot({title:{defaultMessage:"Finance",id:"Fm3M+yFIbr"},settingsCtaText:{defaultMessage:"Add stocks",id:"IrqguKbukF"},searchPlaceholder:{defaultMessage:"Search...",id:"0BUTMvePvK"},widgetDescription:{defaultMessage:"Set your watchlist",id:"Uh4Ex766Qm"},settingsDescription:{defaultMessage:"Set your watchlist for daily updates and summaries",id:"7SMcHmFldb"},modalDescription:{defaultMessage:"Updates and news about stocks and more",id:"uJAhXQDitL"}}),f1:ot({title:{defaultMessage:"Sports",id:"qEuXjx1B4z"},settingsCtaText:{defaultMessage:"Add drivers",id:"R9U03Vy8bO"},searchPlaceholder:{defaultMessage:"Search for a driver",id:"lE7oUWeeV1"},widgetDescription:{defaultMessage:"Choose your drivers",id:"sCVGGM0Ka3"},settingsDescription:{defaultMessage:"Event updates, breaking news, and live scores",id:"yBBV27kmkn"},modalDescription:{defaultMessage:"Get event updates, breaking news, and live scores",id:"VLVunZTFAF"}})},dlt=({symbol:e})=>o.jsx(D,{color:"light",children:o.jsx("span",{className:"font-mono opacity-70",children:e.slice(0,1)})}),C3=({image:e,imageDark:t,alt:n,watchlistType:r,className:s,imageClassName:a})=>{const i=r==="FINANCE",{colorScheme:l}=Wr(),c=i&&l==="dark"&&t?t:e,[u,d]=f.useState(()=>{if(!c)return!1;const g=new Image;return g.src=c,g.complete&&g.naturalWidth>0}),[m,p]=f.useState(!1),h=!u||m;return o.jsxs("div",{className:B("relative flex size-6 items-center justify-center",{"bg-subtler":h},s),children:[h&&o.jsx(dlt,{symbol:n??""}),!m&&o.jsx("div",{className:B("absolute",a),children:o.jsx("img",{src:c,alt:n,width:32,height:32,className:B("inset-0 size-full object-contain",{"opacity-0":!u}),onLoad:()=>d(!0),onError:()=>p(!0)})})]})},Hye=async({query:e,watchlistType:t,limit:n,category:r,cometRenderPlace:s,reason:a})=>{const i=encodeURIComponent(e),{data:l,error:c}=await se.GET("/rest/homepage-widgets/watchlist/list-autosuggest",a,{params:{query:{type:t,query:i,limit:n,category:r,entropy_render_place:s}},timeoutMs:1500,numRetries:1});if(c)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get watchlist autosuggestions",cause:c});return l.results??ue},flt=async({watchlistType:e,reason:t})=>{try{const{error:n,data:r}=await se.GET("/rest/homepage-widgets/watchlist/subscription",t,{params:{query:{type:e}},headers:{"content-type":"application/json"},numRetries:1});if(n)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get watchlist subscriptions",cause:n});return r.results??[]}catch(n){return ne.error(n),[]}},mlt=async({watchlistType:e,reason:t})=>{try{const{error:n,data:r}=await se.GET("/rest/homepage-widgets/watchlist/categories",t,{params:{query:{type:e}},numRetries:1});if(n)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get watchlist categories",cause:n});return r?.results??[]}catch(n){return ne.error(n),[]}},plt=async({watchlistType:e,identifier:t,category:n,reason:r})=>{try{const{error:s}=await se.PUT("/rest/homepage-widgets/watchlist/subscription",r,{params:{query:{type:e,identifier:t??"",category:n}},headers:{"content-type":"application/json"}});if(s)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to add watchlist subscription",cause:s});return!0}catch(s){return ne.error(s),!1}},hlt=async({watchlistType:e,identifier:t,category:n,reason:r})=>{try{const{error:s}=await se.DELETE("/rest/homepage-widgets/watchlist/subscription",r,{params:{query:{type:e,identifier:t,category:n}},headers:{"content-type":"application/json"}});if(s)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to remove watchlist subscription",cause:s});return!0}catch(s){return ne.error(s),!1}},glt=async({watchlistType:e,identifier:t,order:n,reason:r})=>{try{const{error:s}=await se.PATCH("/rest/homepage-widgets/watchlist/subscription",r,{params:{query:{type:e,identifier:t}},body:{order:n},headers:{"content-type":"application/json"}});if(s)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to update watchlist subscription order",cause:s});return!0}catch(s){return ne.error(s),!1}},S3=e=>["watchlist",e,"subscriptions"],ylt=e=>["watchlist",e,"addSubscription"],vlt=e=>["watchlist",e,"removeSubscription"],xlt=e=>["watchlist",e,"updateSubscription"],EU=({watchlistType:e,reason:t})=>{const n=rt(),r=S3(e);return We({queryKey:r,queryFn:()=>flt({watchlistType:e,reason:t}),staleTime:0,enabled:n})},zye=({watchlistType:e,queryClient:t,reason:n})=>{const r=S3(e);return vt({mutationKey:ylt(e),mutationFn:async s=>plt({watchlistType:e,reason:n,...s}),onMutate:async({identifier:s,category:a,description:i,image:l,title:c})=>{await t.cancelQueries({queryKey:r});const u=t.getQueryData(["watchlist",e]);return t.setQueryData(r,(d=[])=>{const m={identifier:s??"",category:a,description:i??"",image_url:l??"",title:c??"",subscribed:!0,order:Date.now()},p=d.filter(h=>h.identifier!==s);return[m,...p]}),{previousSubscriptions:u}},onError:(s,a,i)=>{ne.error("Error adding watchlist subscription",s),t.setQueryData(r,i?.previousSubscriptions)},onSuccess:()=>{t.invalidateQueries({queryKey:r})}})},Gye=({watchlistType:e,queryClient:t,reason:n})=>{const r=S3(e);return vt({mutationKey:vlt(e),mutationFn:async s=>hlt({watchlistType:e,reason:n,...s}),onSuccess:()=>{t.invalidateQueries({queryKey:r})},onMutate:async({identifier:s})=>{await t.cancelQueries({queryKey:r});const a=t.getQueryData(["watchlist",e]);return t.setQueryData(r,(i=[])=>i.filter(l=>l.identifier!==s)),{previousSubscriptions:a}},onError:(s,a,i)=>{ne.error("Error removing watchlist subscription",s),t.setQueryData(r,i?.previousSubscriptions)}})},blt=({watchlistType:e,queryClient:t,reason:n})=>{const r=S3(e);return vt({mutationKey:xlt(e),mutationFn:async s=>glt({watchlistType:e,reason:n,...s}),onMutate:async({newOrderedList:s})=>{await t.cancelQueries({queryKey:r});const a=t.getQueryData(r);return t.setQueryData(r,s),{previousSubscriptions:a}},onError:(s,a,i)=>{ne.error("Error updating watchlist subscription order",s),i?.previousSubscriptions&&t.setQueryData(r,i.previousSubscriptions)},onSuccess:()=>{t.invalidateQueries({queryKey:r})}})},tZ={nba:pS,nfl:B7,cricket:YPe,ncaam:pS,ncaaw:pS},Oj=KPe,_lt=({watchlistType:e,selectedCategory:t,setSelectedCategory:n})=>{const r="watchlist-category-dropdown",{isMobileStyle:s}=xe(),{$t:a}=Z(),[i,l]=f.useState([]);f.useEffect(()=>{(async()=>{const m=await mlt({watchlistType:e,reason:r});l(m)})()},[e]);const c=a({defaultMessage:"All Categories",id:"1X6HtI/EN/"}),u=f.useMemo(()=>[{text:c,icon:Oj,onClick:()=>n(void 0),type:"default",active:t===void 0,size:Kt.tiny},...i.map(m=>({text:m.display_name,icon:tZ[m.category]||Oj,onClick:()=>n(m),type:"default",active:t?.category===m.category,size:Kt.tiny}))],[i,n,t,c]);return i.length===0?null:o.jsx(Jt,{isMobileStyle:s,items:u,placement:"bottom-end",children:o.jsx(he,{icon:tZ[t?.category]||Oj,size:Kt.tiny,text:t?.display_name??c})})},yn=({children:e,className:t,as:n="div",active:r=!0,speed:s="normal",hoverOnly:a=!1,variant:i="default"})=>{const[l,c]=f.useState(!1),u=a?l:r;return I.createElement(n,{style:{animationDuration:s==="normal"?"1200ms":"1800ms"},className:B({shimmer:u&&i==="default","animate-gradient bg-clip-text text-transparent shimmer-super":u&&i==="super"},t),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},e)},qye=e=>e?.includes("perplexity.ai/finance")??!1,Kye=e=>e==="https://www.perplexity.ai/finance",Yye=I.memo(({query:e,completion:t,inputsAndCompletions:n,description:r,highlightPrefix:s,url:a,title:i,shouldShowTitle:l})=>{const c=qye(a),u=Kye(a),d=l&&i?i:e,m=c?d.toUpperCase():d,{$t:p}=Z(),h=c?t?.toUpperCase():t;return u?o.jsx(D,{variant:"small",inline:!0,children:p({defaultMessage:"{perplexity} Finance",id:"LnL5Kdg1cp"},{perplexity:"Perplexity"})},"perplexity-finance"):o.jsxs(o.Fragment,{children:[!r&&n?.length&&s?n.map(([g,y],v)=>g?o.jsx(D,{color:"light",variant:"small",className:"inline",as:"div",children:g},`${v}-${g}`):o.jsx(D,{className:"inline whitespace-pre",variant:"small",as:"div",children:y},`${v}-${y}`)):r?o.jsxs("div",{className:"flex flex-col",children:[o.jsx(D,{variant:"small",inline:!0,children:m}),o.jsx(D,{variant:"tinyRegular",className:"!text-quiet opacity-70",inline:!0,children:r})]}):o.jsx(D,{inline:!0,color:"light",variant:"small",children:m}),t&&s&&!n?.length&&o.jsx(D,{className:"whitespace-pre",inline:!0,variant:"small",children:h}),t&&!s&&o.jsx(D,{color:"light",inline:!0,variant:"small",children:h})]})});Yye.displayName="DefaultQueryContentComponent";const Qye=I.memo(({onClick:e,query:t,completion:n,inputsAndCompletions:r,url:s,suggestionIndex:a,keyboardFocusedIndex:i,setKeyboardFocusedIndex:l,leftIcon:c,rightIcon:u,className:d,description:m,title:p,shouldShowTitle:h,highlightPrefix:g=!0,category:y,QueryContentComponent:v=Yye,metadata:x,actionHandler:b})=>{const{isMobileUserAgent:_}=xe(),w="group-hover:opacity-100 group-data-[focused=self]:opacity-100",C="opacity-0 group-data-[focused=other]:opacity-0",S=f.useCallback(()=>{l?.(-1)},[l]),E=f.useCallback(M=>h&&p&&t?o.jsx(bn,{tooltipText:t,bodyClassName:"max-w-[300px]",showTooltip:!0,asChild:!0,tooltipLayout:"right",children:M}):M,[h,p,t]);return o.jsx(Ke,{children:E(o.jsx("div",{"data-focused":i===void 0||i===-1?"none":i===a?"self":"other","data-testid":`auto-suggestion-${(a??0)+1}`,className:B("group flex cursor-pointer flex-row items-center rounded-lg p-[8px]",d),onPointerDown:()=>{b?b():e(n?t+n:t)},onPointerLeave:S,children:o.jsxs("div",{className:"flex w-full min-w-0 flex-row whitespace-pre leading-tight",children:[o.jsx(D,{className:"-mr-three",color:"light",inline:!0,variant:"small",children:c}),o.jsx(D,{variant:"small",className:_?"truncate":"line-clamp-2 text-wrap",children:s?o.jsx(Ge,{href:s,target:"_blank",rel:"noopener",children:o.jsx(v,{query:t,url:s,completion:n,inputsAndCompletions:r,description:m,category:y,highlightPrefix:g,metadata:x,title:p,shouldShowTitle:h})}):o.jsx(v,{query:t,url:s,completion:n,inputsAndCompletions:r,description:m,category:y,highlightPrefix:g,metadata:x,title:p,shouldShowTitle:h})}),u&&o.jsx(D,{variant:"smallBold",color:"super",inline:!0,className:B("pr-xs ml-auto",w,{[C]:!s}),children:u})]})}))})});Qye.displayName="SuggestionCard";const EP={ticker:{order:0,showHeader:!1,highlightPrefix:!1},suggestion:{order:1,showHeader:!1,highlightPrefix:!0},news:{displayName:"Latest News",order:2,showHeader:!0,highlightPrefix:!1},related_question:{displayName:"Related Questions",order:3,showHeader:!0,highlightPrefix:!1},shortcuts:{displayName:"Shortcuts",order:4,showHeader:!0,highlightPrefix:!0}},wlt=e=>{const t={};return e.forEach(n=>{const r=n.category||"suggestion";t[r]||(t[r]=[]),t[r].push(n)}),t},Clt=e=>Object.keys(e).sort((t,n)=>{const r=EP[t]?.order??Number.MAX_SAFE_INTEGER,s=EP[n]?.order??Number.MAX_SAFE_INTEGER;return r-s}),nZ=e=>{const{metadata:t}=e;return!!t&&t.type==="price"&&!!t.price_info&&typeof t.price_info.currentPrice=="number"&&!!t.price_info.change&&!!t.price_info.changePercentage},Slt=e=>[...e].sort((t,n)=>{const r=nZ(t),s=nZ(n);return r&&!s?-1:!r&&s?1:0}),Xye=I.memo(e=>{const{text:t,show:n,className:r}=e;return n?o.jsxs(o.Fragment,{children:[o.jsx(H,{className:B("my-sm sm:mx-sm border-b first:hidden",r)}),t&&o.jsx(H,{variant:"transparent",className:"sm:mx-sm mt-xs mb-sm pr-sm",children:o.jsx(D,{className:"w-max",variant:"tinyMono",color:"light",children:t})})]}):null});Xye.displayName="GroupItemSeparator";const Zye=I.memo(({category:e,suggestions:t,categoryConfig:n,value:r,focusedIndex:s,setFocusedIndex:a,handleSubmit:i,indexOffset:l,LeftIconComponent:c,RightIconComponent:u,QueryContentComponent:d,onFillButtonClick:m,titleClassName:p})=>{const h=f.useMemo(()=>e==="ticker"?Slt(t):t,[e,t]);return t.length?o.jsxs(o.Fragment,{children:[o.jsx(Xye,{show:n.showHeader,text:n.displayName,className:p}),h.map((g,y)=>o.jsx(Jye,{suggestion:g,index:y,category:e,categoryConfig:n,value:r,focusedIndex:s,setFocusedIndex:a,handleSubmit:i,indexOffset:l,LeftIconComponent:c,RightIconComponent:u,onFillButtonClick:m,QueryContentComponent:d,highlightPrefix:n.highlightPrefix??!0},`${e}-${g.input+g.completion+g.description||g.query_uuid}`))]}):null});Zye.displayName="SuggestionGroup";const Jye=I.memo(({suggestion:{input:e,completion:t,query_uuid:n,image:r,imageDark:s,url:a="",description:i,identifier:l="",category:c,title:u="",subscribed:d=!1,metadata:m,submission_query:p,inputs_and_completions:h,icon_name:g,shouldShowTitle:y,actionHandler:v,isPersonalized:x},index:b,LeftIconComponent:_,QueryContentComponent:w,RightIconComponent:C,highlightPrefix:S,focusedIndex:E,handleSubmit:M,indexOffset:k,onFillButtonClick:A,setFocusedIndex:R,value:O})=>{const L=f.useCallback(j=>M({query:j,query_uuid:n,url:a,identifier:l,category:c,description:i,image:r,imageDark:s,title:u,subscribed:d,submission_query:p,isPersonalized:x},b+k),[c,i,M,l,r,s,b,k,n,p,d,u,a,x]),P=f.useCallback(()=>{A(e+t,a)},[t,e,A,a]),N=f.useMemo(()=>o.jsx(_,{image:r,imageDark:s,alt:e+O,url:a,category:c,iconName:g,value:O}),[_,c,g,r,s,e,a,O]),T=f.useMemo(()=>o.jsx(C,{onClick:P,url:a,isSelected:d,metadata:m,category:c}),[C,P,a,d,m,c]);return o.jsx(Qye,{onClick:L,query:e,completion:t,inputsAndCompletions:h,url:a,suggestionIndex:b+k,keyboardFocusedIndex:E,setKeyboardFocusedIndex:R,description:i,title:u,shouldShowTitle:y,highlightPrefix:S,className:B("hover:bg-subtler","data-[focused=self]:bg-subtler","dark:data-[focused=self]:bg-subtler","hover:data-[focused=other]:bg-raised","dark:hover:data-[focused=other]:bg-subtler"),category:c,QueryContentComponent:w,metadata:m,leftIcon:N,rightIcon:T,actionHandler:v})});Jye.displayName="SuggestionCardFactory";var Elt={};const Mlt=60,klt=2e3,Tlt=6,Nlt=4,jlt=5,Nh=(e,t)=>e?Nlt:t?jlt:Tlt,Alt=e=>!(e.length===0||e.includes(`
`)),Ilt=e=>e.map(t=>({query:t.text,image:t.image_url,url:t.url,title:t.title})),Rlt=e=>e.sort((t,n)=>t.url?-1:n.url?1:t.image?-1:n.image?1:0),MP=(e,t,n)=>{let r=e;(t||Elt.NEXT_PUBLIC_IS_SIDECAR_BUILD)&&(r=e.filter(i=>!i.url));const s=cie(r,"query");if(n){const i=s.findIndex(l=>l.query===n);if(~i){const l=s[i];s.splice(i,1),s.unshift(l)}}const a=Rlt(s);return[a,a.slice(0,Nh(t))]},e0e=(e,t,n)=>{const r=n?e.replace(/\s+/g,"").toLocaleLowerCase():e,s=t.query;let a=0,i=0;for(;a<r.length&&i<s.length;)r[a]===s[i]?.toLocaleLowerCase()&&a++,i++;return[a===r.length,i]},Plt=(e,t)=>{const n=e.replace(/\s+/g,""),r=[];let s="",a="",i=0,l=0;for(;i<n.length&&l<t.length;)n[i]?.toLocaleLowerCase()===t[l]?.toLocaleLowerCase()?(a&&(r.push(["",a]),a=""),s+=t[l],i++,l++):(s&&(r.push([s,""]),s=""),a+=t[l],l++);return s&&r.push([s,""]),a&&r.push(["",a]),l<t.length&&r.push(["",t.slice(l)]),r},Olt={calendar:hb,"report-search":Iie,browser:ZPe,mail:Jg,"shopping-bag":HI,message:V7,"user-heart":Aie,play:jie,globe:XPe,music:QPe,book:U7,plane:$M,plus:ar};var Llt={};const t0e=I.memo(({image:e,alt:t,url:n,iconName:r,value:s,category:a})=>{const i=s.length===0,[l,c]=f.useState(!1),{sidecarSourceTab:{url:u}}=Hr(),d=Pa(),m=f.useMemo(()=>{if(Llt.NEXT_PUBLIC_IS_SIDECAR_BUILD&&u&&i)return p1(u);if(e)return e;if(n)return sye(n)},[e,n,u,i]),p=r?Olt[r]:null,h=i?Yqe[d]??Rs:Rs;return a==="shortcuts"&&!r?o.jsx(ce,{icon:JPe,size:"sm",className:"mt-two mr-2 w-5 shrink-0"}):Kye(n)?o.jsx("div",{className:"mr-2 flex size-5 shrink-0 items-center justify-center",children:o.jsx(ce,{icon:gb,size:"sm",className:"text-foreground"})}):m&&!l?o.jsx("div",{className:"relative mr-2 size-5 shrink-0 overflow-hidden rounded-sm",children:o.jsx("img",{src:m,alt:t??"suggestion",className:"object-cover",sizes:"24px",onError:()=>c(!0)})}):o.jsx(ce,{icon:l&&n?$m:p??h,size:"sm",className:"mt-two mr-2 w-5 shrink-0"})});t0e.displayName="LeftIcon";const n0e=I.memo(({onClick:e,url:t,category:n})=>n==="shortcuts"?null:qye(t)?o.jsx("div",{className:"flex h-full items-center",children:o.jsx(ce,{icon:Kn,size:"sm",className:"text-quiet"})}):o.jsx("button",{className:"appearance-none",onPointerDown:r=>{r.stopPropagation(),r.preventDefault(),e(r)},type:"button",children:o.jsx(ce,{icon:t?e8e:Rie,size:"sm",className:"-mb-xs"})}));n0e.displayName="RightIcon";const r0e=I.memo(()=>{const{$t:e}=Z();return o.jsxs("div",{className:"flex w-full min-w-0 flex-row items-center whitespace-pre p-[8px] leading-tight",children:[o.jsx(D,{className:"-mr-three px-three shrink-0",color:"super",inline:!0,variant:"small",children:o.jsx(ce,{size:"xs",icon:Io})}),o.jsx(D,{variant:"tinyMono",color:"super",className:"ml-2",children:e({defaultMessage:"Comet Assistant",id:"ML678gEBQ1"})})]})});r0e.displayName="CometAssistantRow";const Iy=I.memo(({isOpen:e,suggestedQueries:t,focusedIndex:n,setFocusedIndex:r,handlePasteQuery:s,handleSubmit:a,dropdownClassName:i,dropdownType:l="query",components:c,value:u,children:d,popoverClassName:m,categoryTitleClassName:p,userInputQuery:h,portalTarget:g,placement:y="bottom",allowNonSequentialMatch:v=!1,isCometHome:x,scrollableShards:b=[],floatingStrategy:_,shouldEnableStacking:w=!1})=>{const{trackEvent:C}=Ne(),{RightIconComponent:S=n0e,LeftIconComponent:E=t0e,QueryContentComponent:M}=c??{},k=f.useMemo(()=>t.map(({query:Y,query_uuid:W,image:X,imageDark:G,url:J,title:q,description:te="",identifier:re="",category:ae,subscribed:fe=!1,metadata:de,submission_query:ve,icon:_e,is_comet_assistant:Se,shouldShowTitle:be,actionHandler:me,isPersonalized:Ae},Ee,je)=>{if(l==="select")return{input:Y,completion:"",query_uuid:W,title:q,image:X,imageDark:G,url:J,description:te,identifier:re,category:ae,subscribed:fe,submission_query:ve,icon_name:_e,is_comet_assistant:Se,shouldShowTitle:be,actionHandler:me,isPersonalized:Ae};const Me=h?n===-1?u:h:u;return Me.length>0&&Y.startsWith(Me)?{input:Me,completion:Y.slice(Me.length),query_uuid:W,title:q,image:X,imageDark:G,url:J,category:ae,metadata:de,...(ae==="ticker"||ae==="news")&&{description:te},submission_query:ve,icon_name:_e,is_comet_assistant:Se,shouldShowTitle:be,actionHandler:me,isPersonalized:Ae}:v&&!te&&Me.length>0&&Me.length<=Y.length&&je[Ee]&&e0e(Me,je[Ee],!0)[0]?{input:"",completion:Y,inputs_and_completions:Plt(Me,Y),query_uuid:W,title:q,image:X,url:J,category:ae,metadata:de,...(ae==="ticker"||ae==="news")&&{description:te},submission_query:ve,icon_name:_e,is_comet_assistant:Se,shouldShowTitle:be,actionHandler:me,isPersonalized:Ae}:{input:Y,completion:"",query_uuid:W,title:q,image:X,imageDark:G,url:J,category:ae,metadata:de,...(ae==="ticker"||ae==="news")&&{description:te},submission_query:ve,icon_name:_e,is_comet_assistant:Se,shouldShowTitle:be,actionHandler:me,isPersonalized:Ae}}),[t,u,l,h,n,v]),A=f.useMemo(()=>wlt(k),[k]),R=f.useMemo(()=>Clt(A),[A]),O=f.useMemo(()=>R.some(Y=>A[Y]?.some(W=>W.is_comet_assistant)),[R,A]),L=f.useCallback((Y,W)=>{if(W){window.open(W,"_blank");return}C("auto suggestion filled",{}),s(Y)},[s,C]),P=B("!block w-full",y==="bottom"?"mt-[-5px]":"mb-[-5px]",m),N=y==="bottom"?"rounded-b-2xl":"rounded-t-2xl",T=f.useRef(null),[j,F]=f.useState(null),U=!e||t.length===0;fot({ref:T,onResize:Y=>{F(Y?.height??null)}});const V=f.useMemo(()=>({portalTarget:g??void 0,removeScroll:!0,shards:b}),[g,b]),$=f.useMemo(()=>o.jsx("div",{className:B(y==="bottom"?"!border-t-subtlest shadow-super/10 rounded-b-2xl shadow-md dark:shadow-lg dark:shadow-black/10":"!border-b-subtler rounded-t-2xl","border-subtle border","bg-raised p-3",i),children:o.jsx(ge.div,{animate:{height:U?0:j??"auto"},initial:{height:0},transition:{height:{type:"spring",bounce:.1,duration:.05}},style:{overflow:"hidden"},children:o.jsxs("div",{ref:T,className:"flex flex-col items-stretch","data-testid":"autosuggestion-container",children:[x&&O?o.jsx(r0e,{}):null,R.map((Y,W)=>{const X=A[Y],G=EP[Y]||{order:999,showHeader:!1};let J=0;for(let q=0;q<W;q++){const te=R[q]??"";J+=A[te]?.length||0}return X?.length?o.jsx(Zye,{category:Y,suggestions:X||[],categoryConfig:G,value:u,focusedIndex:n,setFocusedIndex:r,handleSubmit:a,indexOffset:J,LeftIconComponent:E,RightIconComponent:S,QueryContentComponent:M,onFillButtonClick:L,titleClassName:p},Y):null})]})})}),[E,M,S,p,j,i,n,A,a,O,x,L,y,U,r,R,u]),z=f.useMemo(()=>_?{strategy:_}:void 0,[_]),Q=f.useMemo(()=>w?{className:"flex z-[1]"}:void 0,[w]);return o.jsx($o,{isOpen:e,matchTargetWidth:!0,disableAnimation:!0,placement:y,childrenClassName:"grow block",contentClassName:P,borderRadius:N,avoidCollisions:!1,disableShadow:!0,overlayProps:V,content:$,floatingElementProps:Q,...z&&{customFloatingUIOptions:z},children:d})});Iy.displayName="SuggestDropdown";const mg="homepage-widgets",MU="homepage/weather",Dlt="homepage-widgets/dismiss",Flt=e=>({"x-loc-latitude":e.latitude.toString(),"x-loc-longitude":e.longitude.toString()}),Ult=e=>{let t="existing";return e<3?t="new":e<10&&(t="activated"),t},Blt=async({searchMode:e,reason:t})=>{try{const{data:n,error:r}=await se.GET("/rest/homepage-widgets",t,{params:{query:{searchMode:e===ie.STUDY?"search":e}},timeoutMs:Ut.LOW,numRetries:1});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Homepage widget fetch failed",cause:r});return n.widgets}catch(n){return ne.error("Failed to get homepage widgets",n),[]}},Vlt=async({params:e,reason:t})=>{try{const{data:n,error:r}=await se.GET("/rest/homepage-widgets/public",t,{params:{query:e},timeoutMs:Ut.LOW,numRetries:1});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Homepage widget fetch failed",cause:r});return n.widgets}catch(n){return ne.error("Failed to get homepage widgets",n),[]}},$lt=async({widgetUuid:e,reason:t})=>{try{return(await se.POST("/rest/homepage-widgets/dismiss/{widget_uuid}",t,{params:{path:{widget_uuid:e}},numRetries:1})).data}catch(n){return ne.error("Failed to dismiss homepage widget",n),null}},Wlt=({widget:e,reason:t})=>{const n=ht();return vt({mutationKey:[Dlt],mutationFn:()=>$lt({widgetUuid:e.uuid??"",reason:t}),onMutate:async()=>{e.size==="ROW"&&n.setQueryData([mg],r=>r.filter(s=>s.uuid!==e.uuid))}})},s0e=async({location:e,locale:t,reason:n})=>{const r={...e?Flt(e):{},"accept-language":t},s=await se.GET("/rest/homepage-widgets/weather",n,{headers:r});if(!s.response.ok||!s.data)throw new Error("Failed to get weather");return s.data.data[0]},Hlt=ye(async()=>{const{WatchlistSelections:e}=await K(async()=>{const{WatchlistSelections:t}=await import("./WatchlistSelections-DPlK4SYK.js");return{WatchlistSelections:t}},__vite__mapDeps([2,3,1,4,5,6]));return{default:e}},{loading:()=>o.jsx(a0e,{})}),zlt=5,Glt=e=>{const{isSelected:t}=e;return o.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:o.jsx(Te,{icon:t?Sr:ar,size:"small",pill:!0})})},qlt=({onClear:e})=>o.jsx(Te,{icon:Rt,size:"tiny",pill:!0,onClick:e}),Klt=({isOpen:e,onClose:t,watchlistType:n,origin:r})=>{const{isMobileStyle:s,isMobileUserAgent:a}=xe(),i="watchlist-modal",{$t:l}=Z(),c=ht(),{trackEvent:u}=Ne(),{deprecatedOpenToast:d}=gn(),m=f.useRef(null),[p,h]=f.useState(""),[g,y]=f.useState(ue),[v,x]=f.useState(-1),[b,_]=f.useState(!1),[w,C]=f.useState(!1),[S,E]=f.useState();f.useEffect(()=>{u("watchlist modal viewed",{origin:r,watchlistType:n})},[r,n,u]);const k=(re=>re==="sports"||re==="finance"||re==="f1")(S?.category)?S.category:n.toLowerCase(),A=f.useCallback(()=>{b&&c.invalidateQueries({queryKey:[mg]}),t()},[b,c,t]),{data:R,isLoading:O}=EU({watchlistType:n,reason:i}),{mutate:L}=zye({watchlistType:n,queryClient:c,reason:i}),{mutate:P}=Gye({watchlistType:n,queryClient:c,reason:i}),{mutate:N}=blt({watchlistType:n,queryClient:c,reason:"watchlist-reorder"}),T=n==="FINANCE",j=[{text:l({defaultMessage:"Done",id:"JXdbo8Vnlw"}),variant:"inverted",onClick:A}],F=f.useCallback(async(re,ae)=>{const de=to().erp,_e=(await c.fetchQuery({queryKey:["watchlist",n,re,ae?.category],queryFn:()=>Hye({query:re,watchlistType:n,limit:zlt,category:ae?.category,cometRenderPlace:de,reason:i}),staleTime:0})).map(Se=>({query:Se.title,title:Se.title,image:Se.image_url??void 0,imageDark:Se.image_url_dark??void 0,description:Se.description,identifier:Se.identifier,category:Se.category??void 0,subscribed:Se.subscribed}));y(_e)},[c,n]),U=$s(F,100,{leading:!0,trailing:!0}),V=f.useCallback((re,ae)=>{U(re,ae)},[U]),$=()=>{C(!0),V(p,S)},z=()=>{C(!1)},Q=f.useCallback(re=>{const ae=re;h(ae),V(ae,S)},[V,S]),Y=()=>{h(""),y([])},W=(re,ae)=>{G(re),h(""),y([]),C(!1)},X=B("h-10 rounded-md dark:border-0 dark:border-transparent dark:bg-subtle p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":w&&g.length>0}),G=f.useCallback(re=>{if(_(!0),y(ue),h(""),(R?.length??0)>=eZ){d(l({defaultMessage:"Watchlist full (max {maxItems} items).",id:"mdbFzAw6E5"},{maxItems:eZ}),"error",2);return}re.subscribed||L(re)},[L,R?.length,d,l]),J=f.useCallback((re,ae)=>{P({identifier:re,category:ae}),_(!0)},[P]),q=f.useCallback((...re)=>{N(...re),_(!0)},[N]),te=f.useMemo(()=>({image:re,imageDark:ae,alt:fe})=>o.jsx(C3,{image:re,imageDark:ae,alt:fe,watchlistType:n,className:"mr-sm bg-subtler !size-8 overflow-hidden rounded",imageClassName:"inset-xs"}),[n]);return o.jsx(en,{isOpen:e,onClose:A,title:l(Jv[k].title),titleTextVariant:"baseSemi",subtitle:l(Jv[k].settingsDescription),subtitleClassname:"text-sm",actionList:j,variant:s?"bottom-sheet":"medium",renderCloseButton:!1,delayClose:!1,noPadding:!0,children:o.jsxs("div",{className:"pt-md flex h-[50vh] min-h-0 shrink-0 flex-col",children:[o.jsx("div",{className:"px-md flex flex-row items-center justify-between",children:o.jsx(_lt,{watchlistType:n,selectedCategory:S,setSelectedCategory:E})}),o.jsxs("div",{className:"h-full",children:[o.jsx("div",{className:"px-md",children:o.jsx(Iy,{isOpen:w&&g.length>0,suggestedQueries:g,focusedIndex:v,setFocusedIndex:x,handlePasteQuery:kn,handleSubmit:W,value:p,components:{RightIconComponent:Glt,LeftIconComponent:te},dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full",dropdownType:"select",popoverClassName:"dark:!border-none",children:o.jsx(Pr,{onFocus:$,onBlur:z,className:X,pill:!1,ref:m,isMobileUserAgent:a,placeholder:l(Jv[k].searchPlaceholder),value:p,onChange:Q,ClearIcon:qlt,...p.length>0?{onClear:Y}:{}})})}),O?o.jsx(a0e,{}):o.jsx(Hlt,{subscriptions:R??ue,onRemove:J,onUpdateOrder:q,watchlistType:n,selectedCategory:S,isReorderingEnabled:T,isMobile:s})]})]})})},a0e=()=>o.jsx(yn,{children:o.jsx("div",{style:{maskImage:"linear-gradient(to bottom, black 50%, transparent)"},className:"flex flex-col items-center",children:Array.from({length:4}).map((e,t)=>o.jsx(Ylt,{},t))})}),Ylt=()=>o.jsx(H,{className:"gap-sm mt-2 flex w-full flex-col px-6 py-2",children:o.jsx(H,{variant:"subtle",className:"h-10 w-full rounded-md"})});async function Ren({headers:e,reason:t}){const n=await se.GET("/rest/shopping/user-orders",t,{timeoutMs:Pe({productionMs:5e3}),headers:e});if(n.error)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to fetch shopping orders",cause:n.error});return n.data?.orders??ue}const Pen=async({shipping_address:e,amount:t,reason:n})=>{const{data:r,error:s}=await se.POST("/rest/shopping/calculate-tax-and-shipping",n,{body:{shipping_address:e,amount:t},timeoutMs:Pe(),numRetries:1});if(s)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to calculate tax and shipping",cause:s});return r},Qlt=async({reason:e})=>{const{data:t,error:n}=await se.GET("/rest/shopping/retrieve-customer-shopping-info",e,{timeoutMs:Pe({productionMs:5e3})});if(n)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get customer shopping info",cause:n});return t};async function Oen({body:e,reason:t}){const n="createShoppingOrder";try{const r=await se.POST("/rest/shopping/create-shopping-order",t,{headers:{"content-type":"application/json"},body:e,timeoutMs:1e4,numRetries:0});if(r.error)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to create shopping order",cause:r.error});return r.data}catch(r){throw ne.log(`Error in ${n}:`,r),r}}const Len=async({request:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/shopping/create-shopping-payment-intent",t,{body:e,timeoutMs:6e3,numRetries:0});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to create shopping payment intent",cause:r});if(n.status!=="success")throw new Ce("API_CLIENTS_ERROR",{message:"Failed to create payment intent",cause:n});return n},Den=async({orderId:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/shopping/update-shopping-order",t,{body:{order_id:e,order_status:"cancelled"},timeoutMs:2e4});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to cancel shopping order",cause:r});return n},Fen=async({request:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/shopping/create-firmly-cart",t,{body:e,timeoutMs:Pe({clientSideMs:5e3})});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to create firmly cart",cause:r});return n},Uen=async({request:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/shopping/set-firmly-shipping-info",t,{body:e,timeoutMs:Pe({clientSideMs:7e3})});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to set firmly shipping info",cause:r});return n},Xlt=async({reason:e})=>{const{data:t,error:n}=await se.GET("/rest/shopping/create-firmly-session",e,{timeoutMs:Pe()});if(n)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to create firmly session",cause:n});return t},Ben=async({request:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/stripe/update-customer-shipping-address",t,{body:e,timeoutMs:Pe()});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to update customer shipping address",cause:r});return n},Ven=async({optionKey:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/shopping/fetch-product-details",t,{body:{option_key:e},timeoutMs:4e3});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to fetch product details",cause:r});return n},$en=async({query:e,reason:t})=>{try{const{error:n,data:r}=await se.GET("/rest/autosuggest/shopping/list-autosuggest",t,{timeoutMs:Ut.MEDIUM,params:{query:{query:e}}});if(n)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get shopping suggestions",cause:n});return r.results??ue}catch(n){return ne.error("Failed to get shopping suggestions",n),[]}},Wen=async({page:e,reason:t})=>{const{data:n,error:r}=await se.GET("/rest/shopping/landing-page/tile-data",t,{timeoutMs:Ut.MEDIUM,params:e!==void 0?{query:{page:e}}:void 0});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get shopping tile data",cause:r});return n.shopping_tile_data.length===0&&ne.error("Empty shopping tile data"),n.shopping_tile_data},Hen=async({request:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/shopping/search-shopping-for-entry",t,{body:{query:e.query,read_write_token:e.read_write_token,entry_uuid:e.entry_uuid},timeoutMs:Ut.HIGH});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to search for additional products",cause:r});return!n||n.status==="failure"?[]:[...n.shopping_widgets]},Zlt=async({reason:e})=>{const{error:t,data:n}=await se.GET("/rest/shopping/try-on-photo/get",e,{timeoutMs:Pe()});return t?{status:"error",try_on_photo_url:null}:n},Jlt=({reason:e})=>{const{data:t,isLoading:n,refetch:r}=We({queryKey:G2(),queryFn:()=>Zlt({reason:e})});return f.useMemo(()=>({userTryOnPhotoUrl:t?.try_on_photo_url??null,isUserTryOnPhotoLoading:n,refetchUserTryOnPhoto:r}),[t,n,r])},E3=I.memo(({message:e,subtitle:t,...n})=>o.jsx(en,{title:e,subtitle:t,closeButtonClassname:"right-sm top-md flex self-start justify-end grow",...n}));E3.displayName="ConfirmationModal";const ect=({isOpen:e,onClose:t,config:n})=>{const{$t:r}=Z(),s=ht(),[a,i]=f.useState(!1),{userTryOnPhotoUrl:l,isUserTryOnPhotoLoading:c}=Jlt({reason:"avatar_management"}),{deleteAvatar:u}=xye({reason:"avatar_management"}),d=async()=>{await u(),s.setQueryData(G2(),{try_on_photo_url:null}),i(!1),t()},m=()=>{t(),n?.onRetry&&n.onRetry()},p=()=>{t()},h=n?.source==="toast";return o.jsxs(o.Fragment,{children:[o.jsx(en,{isOpen:e,onClose:t,title:r({defaultMessage:"Your avatar photo",id:"fXPKMrv34o"}),centerTitle:!0,modalClassname:"max-w-lg mx-auto",children:o.jsxs("div",{className:"flex flex-col items-center gap-6 p-6",children:[c?o.jsx($r,{}):l?o.jsx(H,{className:"gap-sm relative isolate flex flex-col overflow-hidden rounded-lg border",children:l&&o.jsx(fs,{src:l,alt:"Your Avatar",imageClassName:"max-h-[500px] max-w-full object-contain",containerClassName:"flex justify-center",includeLightBoxModal:!1})}):o.jsx(D,{variant:"smallMono",children:r({defaultMessage:"No avatar uploaded",id:"RDTTX4AfZg"})}),o.jsx("div",{className:"flex gap-3",children:h?o.jsxs(o.Fragment,{children:[o.jsx(he,{variant:"border",onClick:m,text:r({defaultMessage:"Retry",id:"62nsdyMyIO"})}),o.jsx(he,{variant:"primary",onClick:p,text:r({defaultMessage:"Continue shopping",id:"Yywm0pqtZa"})})]}):l&&o.jsx(he,{variant:"common",onClick:()=>i(!0),text:r({defaultMessage:"Delete",id:"K3r6DQW7h+"})})})]})}),o.jsx(E3,{isOpen:a,onClose:()=>i(!1),message:r({defaultMessage:"Are you sure you want to delete?",id:"y7o4RnAvXG"}),subtitle:r({defaultMessage:"Once deleted, your avatar cannot be recovered.",id:"CtPvgMBMh3"}),children:o.jsxs("div",{className:"-mb-lg flex justify-center gap-3 p-6",children:[o.jsx(he,{variant:"common",onClick:()=>i(!1),text:r({defaultMessage:"No",id:"oUWADlOjJt"})}),o.jsx(he,{variant:"primary",onClick:d,text:r({defaultMessage:"Yes",id:"a5msuh5ORp"})})]})})]})},tct=()=>{const e=Nt();return f.useMemo(()=>{const n=e?.get("pt")||vXe();if(n)try{const r=atob(n);return JSON.parse(r).title}catch{return}},[e])},nct="https://api.whatsapp.com/send/?phone=18334363285&text&type=phone_number&app_absent=0",t_=({origin:e})=>{const{trackEvent:t}=Ne();return f.useCallback(()=>{PM(),t("whatsapp button clicked",{origin:e}),window.open(nct,"_blank")},[t,e])},rct="https://perplexity.sng.link/A6awk/ppas?_smtype=3&pvid=",sct="https://perplexity.sng.link/A6awk/rcv6y?_smtype=3&pvid=",zd=(e,t=rct)=>{const n=Fb(),[r,s]=f.useState(t),{sendAppDownloadClickedEventSingular:a}=sU(),i=jt(),l=f.useMemo(()=>{const u=new URLSearchParams;return u.set("origin",e),n&&u.set("pvid",n),i&&u.set("pathname",i),u.toString()},[n,e,i]);f.useEffect(()=>{(async()=>{const{singularSdk:d}=await K(async()=>{const{singularSdk:h}=await import("./singular-sdk-CHVvA4e9.js").then(g=>g.s);return{singularSdk:h}},[]);for(;!d._isInitialized;)await new Promise(h=>setTimeout(h,100));let m=null;i&&(m=`perplexity-app://${i.startsWith("/")?i.slice(1):i}`);const p=d.buildWebToAppLink(`${t}${n}&_ios_dl=${m}&_android_dl=${m}`,m,l,m);s(p)})()},[n,i,l,t]);const c=f.useCallback(()=>{PM(),a(e),window.location.href=r},[r,e,a]);return f.useMemo(()=>({downloadAppLink:r,handleAppDownloadClicked:c}),[r,c])},act=["sso"],M3=I.memo(()=>o.jsxs("div",{className:"flex flex-row items-center",children:[o.jsx(Na,{variant:"mark",color:"foreground",size:"small"}),o.jsx("div",{className:"ml-2",children:o.jsx(Na,{variant:"text",color:"foreground",size:"small"})})]}));M3.displayName="PerplexityLogo";const oct=I.memo(({headerTextLineOne:e="Get answers, not links.",headerTextLineTwo:t="Search smarter today.",modalOrigin:n=Oe.MARKETING_LANDING_PAGE})=>{const{isMobileStyle:r}=xe(),[s,a]=f.useState("");return f.useEffect(()=>{typeof window<"u"&&a(d3(window.location.origin,oc,n))},[n]),o.jsxs("div",{className:"px-lg py-xl flex min-h-screen flex-col items-center justify-between overflow-y-auto",children:[o.jsx(M3,{}),o.jsxs("div",{className:"py-2xl flex flex-col items-center justify-center",children:[e&&o.jsx(D,{variant:r?"entry-title":"display",color:"default",className:"text-center",children:e}),t&&o.jsx(D,{variant:r?"entry-title":"display",color:"default",className:"text-center",children:t}),o.jsx(D,{variant:"base",color:"light",className:"mt-4 max-w-[400px] text-center",children:o.jsx(pe,{defaultMessage:"Join millions who have switched to Perplexity, the modern search engine.",id:"n7AYVi1U68"})}),o.jsx(h1,{autoFocus:!0,redirectUrl:s,showInternal:!0,className:"mt-xl w-full",disallowedMethods:act})]}),o.jsxs(D,{variant:"small",color:"light",children:[" ",new Date().getFullYear()," Perplexity AI"]})]})});oct.displayName="MainContent";const ict=async({stringProperties:e,headers:t,reason:n})=>{if(!t["accept-language"])return ne.warn("No accept-language header provided for translation request"),e;const r=await se.POST("/rest/translation/translate",n,{body:{texts:e},headers:{...t}});return r.response.ok?r.data?.translated_texts??[]:(ne.error(`Failed to fetch translations for ${e.join(", ")}}`),[])},lct=e=>e==null||e==="";async function o0e({originalContent:e,keysToTranslate:t,reason:n}){const r=id();if(r===wd)return e;const s=t.map(i=>e[i]);if(s.some(lct))return e;const a=await ict({stringProperties:s,headers:{"accept-language":r},reason:n});if(a.length===s.length){const i={...e};return t.forEach((l,c)=>{i[l]=a[c]}),i}return e}const i0e=({extraCss:e="",variant:t="subtler"})=>o.jsx(H,{variant:t,className:B("shimmer aspect-square w-[144px] rounded-lg",e)}),kU=f.memo(({className:e,innerClassName:t,gridClassName:n,children:r,fadeOut:s,dotClassName:a,highlightClassName:i,animate:l=!0,gridSize:c=22,count:u=20,style:d})=>{const[m,{width:p,height:h}]=ql(),[g,y]=f.useState([]),[v,x]=f.useState(0),[b,_]=f.useState(0),w=f.useRef(null),C=f.useRef(new Set),S=f.useCallback(()=>{const M=Math.floor(Math.random()*v)+1,k=Math.floor(Math.random()*b)+1,A=`${M}-${k}`;if(C.current.has(A))return;const R={col:M,row:k,id:A,duration:Math.floor(Math.random()*1001)+1e3,isSuper:Math.floor(Math.random()*5)%5===0};y(O=>{const L=[R,...O];if(L.length>u){const P=L.pop();P&&C.current.delete(P.id)}return C.current.add(A),L})},[v,b,u]);f.useEffect(()=>{if(l)return w.current=setInterval(S,100),()=>{w.current&&clearInterval(w.current)}},[S,l]),f.useEffect(()=>{x(Math.floor(p/c)),_(Math.floor(h/c))},[p,h,c]);const E=s?{maskImage:"radial-gradient(black, transparent)"}:void 0;return o.jsxs("div",{className:B("bg-base dotGridContainer pointer-events-none relative isolate",e),ref:m,style:d,children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden",style:E,children:[o.jsx("div",{className:B("dotHighlightGrid bg-inverse/20 absolute inset-0",i),children:g.map(M=>o.jsx(l0e,{item:M,className:a},M.id))}),o.jsx("div",{className:B("dotGrid absolute inset-0",n)})]}),o.jsx("div",{className:B("relative",t),children:r})]})});kU.displayName="DotGrid";const l0e=f.memo(({item:e,className:t})=>o.jsx("div",{className:B("gridDot text-foreground",t,{highlight:e.isSuper}),style:{gridColumn:e.col,gridRow:e.row,animationDuration:`${e.duration}ms`}}));l0e.displayName="GridDot";const n_=(e,t)=>{const n=t?.detail,r=n&&typeof n=="object"&&"error_code"in n&&n.error_code||e;return new Ce("API_CLIENTS_ERROR",{message:r,cause:t,details:{errorDetail:n}})},c0e=async({reason:e})=>{try{const{error:t,data:n}=await se.GET("/rest/user/promotions",e,{timeoutMs:Pe({productionMs:2e3})});if(t)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to fetch user promotions",cause:t});return n}catch{return{campaign:null,offer:null,institution:null}}},TU=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await se.GET("/rest/billing/get-customer-portal",t,{headers:e,timeoutMs:3e3});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get customer portal",cause:r});if(n.status!=="success")throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get customer portal",cause:r});return n.url}catch{return null}};async function u0e({currency:e,reason:t,subscriptionTier:n}){const{error:r,data:s}=await se.GET("/rest/stripe/prices",t,{timeoutMs:Ut.NONE,params:{query:{currency:e,subscription_tier:n}}});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to fetch prices",cause:r});return s}const kP=({currency:e,reason:t,subscriptionTier:n})=>We({queryKey:["prices",e,n],queryFn:()=>u0e({currency:e,reason:t,subscriptionTier:n}),gcTime:5*60*1e3,staleTime:2*60*1e3}),d0e=async({request:e,reason:t})=>{const n=g5(),r=Fb(),s={"content-type":"application/json",...n?{"Screen-Dimensions":n}:{}};try{const{data:a,error:i}=await se.POST("/rest/stripe/checkout-session",t,{body:{referral_code:e.referralCode,discount_code:e.discountCode,origin:e.origin,tier:e.tier,locale:e.locale,visitor_id:r,embedded:e.embedded??!1,subscription_tier:e.subscriptionTier,success_redirect_url:e.success_redirect_url},timeoutMs:5e3,headers:s,reason:t});if(i)throw new Ce("API_CLIENTS_ERROR",{cause:i,details:{reason:t}});return{subscriptionStatus:a.subscription_status,status:a.status,url:a.url??null,clientSecret:a.client_secret??void 0,errorCode:a.error_code??void 0,subscriptionTier:e.subscriptionTier}}catch{return}},cct=async({request:e,headers:t,reason:n})=>{try{const{data:r,error:s}=await se.POST("/rest/stripe/create-setup-intent",n,{body:{is_updating:e.isUpdating},timeoutMs:Pe({productionMs:2500}),headers:t});if(s)throw new Ce("API_CLIENTS_ERROR",{cause:s,details:{reason:n}});return{clientSecret:r.client_secret}}catch{return}},uct=async({request:e,headers:t,reason:n})=>{if(e.orgId)try{const{data:r,error:s}=await se.POST("/rest/pplx-api/v2/groups/{api_org_id}/setup-intent",n,{params:{path:{api_org_id:e.orgId}},timeoutMs:Pe({productionMs:2500}),headers:t});if(s)throw new Ce("API_CLIENTS_ERROR",{cause:s,details:{reason:n}});return{clientSecret:r.client_secret}}catch{return}},dct=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await se.POST("/rest/stripe/create-setup-intent-and-customer-session",t,{timeoutMs:Pe({productionMs:3e3}),headers:e});if(r)throw new Ce("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return{customerId:n.customer_id,clientSecret:n.client_secret,customerSessionClientSecret:n.customer_session_client_secret}}catch{return}};var TP;(function(e){e.WINDOWSAPP="windowsapp",e.MACAPP="macapp",e.COMET="comet"})(TP||(TP={}));const fct=async({credits:e,apiOrgId:t,reason:n})=>{const{error:r,data:s}=await se.POST("/rest/pplx-api/v2/groups/{api_org_id}/topup",n,{timeoutMs:5e3,headers:{"content-type":"application/json"},params:{path:{api_org_id:t}},body:{credits:e}});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to topup customer balance",cause:r});return s},mct=async({amount:e,apiOrgId:t,threshold:n=2,enabled:r=!0,reason:s})=>{const{error:a,data:i}=await se.POST("/rest/pplx-api/v2/groups/{api_org_id}/auto-topup",s,{timeoutMs:5e3,headers:{"content-type":"application/json"},params:{path:{api_org_id:t}},body:{amount:e,threshold:n,enabled:r}});if(a)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to auto topup customer balance",cause:a});return i};async function f0e({locale:e,reason:t}){try{const{error:n,data:r}=await se.GET("/rest/billing/get-milestone-progress",t,{timeoutMs:Ut.NONE,params:{header:{"accept-language":e}}});if(n)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to fetch milestones",cause:n});return r}catch{return null}}const m0e=async({displayName:e,address:t,description:n,contactInfo:r,reason:s})=>{try{const{error:a,data:i}=await se.POST("/rest/pplx-api/v2/groups",s,{timeoutMs:9e3,headers:{"content-type":"application/json"},body:{display_name:e,address:t,description:n,contact_info:r}});if(a)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to create API group",cause:a});return i.org}catch(a){return ne.log(a),null}},p0e=async({reason:e})=>{const t="getAPIGroupsV2";try{const{data:n}=await se.GET("/rest/pplx-api/v2/groups",e,{timeoutMs:1e4,numRetries:1,reason:e});return n?.orgs??ue}catch(n){return ne.log(`Error in ${t}:`,n),[]}},h0e=async({orgId:e,reason:t})=>{if(!e)return{};try{const{error:n,data:r}=await se.GET("/rest/pplx-api/v2/groups/{api_org_id}",t,{timeoutMs:1e4,headers:{"content-type":"application/json"},params:{path:{api_org_id:e}}});if(n)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to fetch API group customer info",cause:n});return{apiOrganization:r.apiOrganization,customerInfo:r.customerInfo,hasDefaultPaymentMethod:r.hasDefaultPaymentMethod,taxInfo:r.taxInfo}}catch(n){return ne.log(n),{}}},pct=async({orgId:e,reason:t})=>{const n="getAPIGroupAPIKeys";if(!e)return{};try{const{data:r}=await se.GET("/rest/pplx-api/v2/groups/{api_org_id}/api-keys",t,{params:{path:{api_org_id:e}},timeoutMs:1e4,numRetries:1});return{apiKeys:r?.apiKeys}}catch(r){return ne.log(`Error in ${n}:`,r),{}}},g0e=async({reason:e})=>{try{const{error:t,data:n}=await se.POST("/rest/billing/create-government-subscription",e,{timeoutMs:6e3});if(t)throw new Ce("API_CLIENTS_ERROR",{cause:t,details:{reason:e}});return{status:n.status,error_code:n.error_code??void 0,message:n.message??void 0}}catch{return}},hct=async({headers:e,reason:t})=>{const{error:n,data:r}=await se.GET("/rest/stripe/upgrade-subscription-preview",t,{headers:{"content-type":"application/json",...e},timeoutMs:Ut.HIGH});if(n)throw n_("Failed to fetch upgrade subscription preview",n);return r},gct=async({headers:e,reason:t})=>{const{error:n,data:r}=await se.GET("/rest/stripe/downgrade-subscription-preview",t,{headers:{"content-type":"application/json",...e},timeoutMs:Ut.HIGH});if(n)throw n_("Failed to fetch downgrade subscription preview",n);return r},y0e=({reason:e,enabled:t})=>We({queryKey:FXe(),queryFn:()=>hct({reason:e}),gcTime:0,staleTime:0,enabled:t}),v0e=({reason:e})=>We({queryKey:["downgrade-subscription-preview"],queryFn:()=>gct({reason:e}),gcTime:0,staleTime:0}),yct=async({headers:e,reason:t})=>{const{error:n,data:r}=await se.POST("/rest/stripe/upgrade-subscription",t,{headers:{"content-type":"application/json",...e},timeoutMs:Ut.HIGH});if(n)throw n_("Failed to upgrade subscription",n);return r},x0e=({reason:e},t)=>{const n="useUpgradeSubscription";return vt({retry:!1,mutationFn:()=>yct({reason:e}),onError:r=>{ne.error(`Error in ${n}:`,r)},...t})},vct=async({headers:e,reason:t})=>{const{error:n,data:r}=await se.POST("/rest/stripe/downgrade-subscription",t,{headers:{"content-type":"application/json",...e},timeoutMs:Ut.HIGH});if(n)throw n_("Failed to downgrade subscription",n);return r},b0e=({reason:e},t)=>{const n="useDowngradeSubscription";return vt({mutationFn:()=>vct({reason:e}),onError:r=>{ne.error(`Error in ${n}:`,r)},...t})},xct=async({reason:e})=>{const{error:t,data:n}=await se.GET("/rest/stripe/subscription-changes",e,{headers:{"content-type":"application/json"},timeoutMs:Ut.HIGH});if(t)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to fetch subscription changes",cause:t});return n},bct=({reason:e,enabled:t})=>We({queryKey:UXe(),queryFn:()=>xct({reason:e}),gcTime:0,staleTime:0,enabled:t}),_ct=async({reason:e})=>{const{error:t,data:n}=await se.POST("/rest/stripe/cancel-downgrade-subscription",e,{headers:{"content-type":"application/json"},timeoutMs:Ut.HIGH});if(t)throw n_("Failed to cancel downgrade",t);return n},wct=({reason:e},t)=>{const n="useCancelDowngrade";return vt({retry:!1,mutationFn:()=>_ct({reason:e}),onError:r=>{ne.error(`Error in ${n}:`,r)},...t})},Cct=async()=>{const e=await se.GET("/rest/billing/braintree/subscription-details","braintree-modal-fetch-details",{timeoutMs:5e3});if(e.error)throw e.error;return e.data},Sct=async({payment_method_type:e})=>{const t=await se.POST("/rest/billing/braintree/cancel-subscription","braintree-modal-cancel",{timeoutMs:5e3,body:{payment_method_type:e}});if(t.error)throw t.error;return t.data},Ect=async({payment_method_type:e})=>{const t=await se.POST("/rest/billing/braintree/renew-subscription","braintree-modal-renew",{timeoutMs:3e3,body:{payment_method_type:e}});if(t.error)throw t.error;return t.data},rZ=Object.freeze(Object.defineProperty({__proto__:null,get PlatformType(){return TP},autoTopupCustomerBalance:mct,cancelBraintreeSubscription:Sct,createApiGroupV2:m0e,createCheckoutSession:d0e,createGovernmentSubscription:g0e,createSetupIntent:cct,createSetupIntentAndCustomerSession:dct,createSetupIntentV2:uct,fetchBraintreeSubscriptionDetails:Cct,getAPIGroupAPIKeys:pct,getAPIGroupCustomerInfo:h0e,getAPIGroupsV2:p0e,getCustomerPortal:TU,getMilestoneProgress:f0e,getPrices:u0e,getUserPromotions:c0e,renewBraintreeSubscription:Ect,topupCustomerBalance:fct,useCancelDowngrade:wct,useDowngradeSubscription:b0e,useGetDowngradeSubscriptionPreview:v0e,useGetPrices:kP,useGetSubscriptionChanges:bct,useGetUpgradeSubscriptionPreview:y0e,useUpgradeSubscription:x0e},Symbol.toStringTag,{value:"Module"}));function Mct(){Ry(void 0)}function pg(e={}){const t=new URL(window.location.href);for(const[n,r]of Object.entries(e))typeof r>"u"?t.searchParams.delete(n):t.searchParams.set(n,r);Ry(Object.fromEntries(t.searchParams))}function Ry(e){const t=new URL(window.location.href),r=(e?new URLSearchParams(e):new URLSearchParams).toString();r!==t.searchParams.toString()&&window.history.replaceState({},"",`?${r}`)}function _0e(){return Ty("pplx.partner_banner",null,{initializeWithValue:!1})}function w0e(){return Ty("pplx.partner_discount_code",null,{initializeWithValue:!1})}ye(()=>K(()=>import("./AppDownloadQR-zqcSXPEM.js"),__vite__mapDeps([7,3,1])),{loading:()=>o.jsx(i0e,{})});const kct=({displayAs:e,className:t,allowBgImage:n=!0})=>{const r=["/static/images/app-icons/nasa.png","/static/images/app-icons/jungle.png","/static/images/app-icons/flower.png","/static/images/app-icons/sf.png","/static/images/app-icons/books.png","/static/images/app-icons/cat.png"],s=f.useMemo(()=>r[Math.floor(Math.random()*r.length)],[]);return o.jsxs("div",{className:B("bg-dark relative inline-flex aspect-square size-20 items-center justify-center overflow-hidden shadow-lg",{"p-md rounded-[20px]":e==="ios","p-md rounded-full":e==="android"},t),children:[n&&o.jsx("img",{className:B("absolute inset-0 opacity-50 duration-150"),src:s,suppressHydrationWarning:!0,alt:""}),o.jsx("div",{className:"relative flex items-center justify-center",children:o.jsx(Na,{variant:"mark",size:"md",color:"white"})}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/20 dark:border-white/10"})]})},C0e=()=>{const{device:{isAndroid:e}}=At();return o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx("div",{className:"flex items-center",children:[...Array(5)].map((t,n)=>o.jsx(ce,{icon:od,size:16,className:"text-super"},`rating-star-full-${n}`))}),o.jsx("div",{children:o.jsx(D,{variant:"tiny",color:"light",className:"mt-2xs flex items-end text-center",children:o.jsx(pe,{defaultMessage:"{amount} Ratings",id:"8lpjhgQpdU",values:{amount:e?"960K":"252K"}})})})]})},S0e=I.memo(({campaignData:e,dismiss:t,translated:n})=>{const r="reviews",{device:{isIOS:s}}=At(),[a,i]=f.useState(!!n),[l,c]=f.useState(e),{trackEvent:u}=Ne();f.useEffect(()=>{if(n)return;(async()=>{const v=await o0e({originalContent:e,keysToTranslate:["title_1","subtext_1","button_text"],reason:r});c(v),i(!0)})()},[e,n]),f.useEffect(()=>{u("mweb splash page viewed",{})},[u]);const{title_1:d,subtext_1:m,button_text:p,button_link:h}=l,g=f.useCallback(()=>{u("app download button selected",{downloadAppDestination:"mobile",origin:"marketingLandingPage"}),PM(),window.open(h,"_blank")},[h,u]);return o.jsxs("div",{className:B("p-lg fixed inset-0 mb-auto flex h-full flex-col items-center justify-between overflow-y-auto"),children:[t&&o.jsx("div",{className:"right-sm top-sm absolute",children:o.jsx(Te,{pill:!0,variant:"noBackground",size:"small",icon:Rt,extraCSS:"text-foreground md:hover:text-quiet ",onClick:t})}),o.jsx(M3,{}),o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx(kct,{displayAs:s?"ios":"android",allowBgImage:!1}),o.jsxs("div",{className:B("flex flex-col items-center"),children:[o.jsx(Ke,{children:a?o.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"flex flex-col items-center",children:[o.jsx(D,{variant:"entry-title",color:"default",textCenter:!0,children:d}),o.jsx(D,{variant:"base",color:"light",textCenter:!0,className:"mt-4 max-w-[400px]",children:m})]}):o.jsxs("div",{className:"invisible flex flex-col items-center",children:[o.jsx(D,{variant:"entry-title",color:"default",textCenter:!0,children:e.title_1}),o.jsx(D,{variant:"base",color:"light",textCenter:!0,className:"mt-4 max-w-[400px]",children:e.subtext_1})]})}),o.jsx("div",{className:"mt-4",children:o.jsx(C0e,{})})]})]}),o.jsx("div",{className:"flex w-full flex-col items-center",children:o.jsx(Ke,{children:a?o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"flex w-full flex-col items-center",children:o.jsx(he,{variant:"inverted",size:"large",text:p,icon:s?yb:$7,fullWidth:!0,extraCSS:"max-w-xs rounded-xl mx-auto",onClick:g})}):o.jsx("div",{className:"invisible flex w-full flex-col items-center",children:o.jsx(he,{variant:"inverted",size:"large",text:e.button_text})})})})]})});S0e.displayName="Reviews";const Tct=({origin:e})=>{const{device:{isIOS:t}}=At(),{downloadAppLink:n}=zd(e),{$t:r}=Z();return o.jsx(Ge,{href:n,children:o.jsxs("div",{className:"gap-x-md py-lg flex items-center justify-center",children:[o.jsx("div",{"data-color-scheme":"dark",className:B("border-subtler bg-base inline-block border",{"p-sm rounded-xl":t,"p-md rounded-full":!t}),children:o.jsx("div",{className:"flex aspect-square w-12 items-center justify-center",children:o.jsx(Na,{variant:"mark",size:"md",color:"white"})})}),o.jsxs("div",{className:"-mt-xs",children:[o.jsx(D,{variant:"baseSemi",children:"Perplexity"}),o.jsx(D,{variant:"small",color:"light",children:r({defaultMessage:"Search and discovery with AI",id:"n3oaAt293P"})}),o.jsx(C0e,{})]})]})})},r_=()=>{const{value:e,loading:t}=Rr({flag:"mweb-upsell-to-whatsapp",defaultValue:!1});return f.useMemo(()=>({mwebUpsellWhatsApp:e,loadingMwebUpsellWhatsApp:t}),[e,t])},Nct=({origin:e,isOpen:t,onClose:n,sheetModalVariant:r})=>{const{trackEventOnce:s,trackEvent:a}=Ne(),{$t:i}=Z(),{handleAppDownloadClicked:l}=zd("install-gate-modal-upsell"),c=tct(),u=t_({origin:"install-gate"}),{mwebUpsellWhatsApp:d}=r_();f.useEffect(()=>{s("install modal opened",{origin:e})},[e,s]);const m=f.useCallback(()=>{a("install modal closed",{origin:e}),n()},[n,e,a]);return o.jsx(eU,{isOpen:t,onClose:m,variant:r,showCloseButton:!1,overlayVariant:"default-less-blur",children:d?o.jsxs(o.Fragment,{children:[o.jsx(D,{variant:"section-title",className:"px-sm text-center",children:o.jsx(pe,{defaultMessage:"Keep the conversation going.",id:"4/VUgNnQik"})}),o.jsx(D,{variant:"section-title",className:"px-sm text-center",children:o.jsx(pe,{defaultMessage:"Try Perplexity on WhatsApp",id:"YTg7pt2IE4"})}),o.jsxs("div",{className:"mt-md mb-lg flex flex-row items-center justify-center gap-4",children:[o.jsx("div",{className:"aspect-square size-10 overflow-hidden rounded-full shadow-lg",children:o.jsx("img",{src:"https://r2cdn.perplexity.ai/whatsapp.jpg",alt:"WhatsApp"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(D,{children:"Perplexity"}),o.jsx(D,{variant:"smallMono",color:"super",textCenter:!0,children:"+1 (833) 436-3285"})]})]}),o.jsx(he,{variant:"primary",text:i({defaultMessage:"Continue on WhatsApp",id:"I7Lrfco0vS"}),size:"small",extraCSS:"h-[44px] mb-md",onClick:()=>{a("whatsapp button clicked",{origin:"install-gate"}),u()}})]}):o.jsxs(o.Fragment,{children:[o.jsx(D,{variant:"page-title",className:"px-sm text-center",children:c??o.jsx(pe,{defaultMessage:"One verified answer to any question",id:"C+F6JBwTvO"})}),o.jsx(Tct,{origin:"install-gate-modal-upsell"}),o.jsx(he,{variant:"primary",text:i({defaultMessage:"Open Perplexity app",id:"u0MSV+x6J3"}),size:"small",extraCSS:"h-[44px] mb-md",onClick:()=>{a("app download button clicked",{origin:"install-gate"}),l()}})]})})},jct={xlarge:[64,"h-[64px] w-auto leading-[64px]"],large:[48,"h-[48px] w-auto leading-[48px]"],regular:[32,"h-[32px] w-auto leading-[32px]"],small:[18,"h-[18px] w-auto leading-[18px]"],tiny:[12,"h-[12px] w-auto leading-[12px]"]},Act=ye(async()=>{const{Emoji:e}=await K(async()=>{const{Emoji:t}=await import("./emoji-picker-react.esm-D57JeT_8.js");return{Emoji:t}},__vite__mapDeps([8,3,1]));return{default:e}},{nextFrame:!0}),Gd=I.memo(({unified:e,size:t})=>{const[n,r]=jct[t]??[];return e?o.jsx("div",{className:`relative align-middle ${r}`,children:o.jsx(Act,{emojiStyle:"native",unified:e,size:n})}):null});Gd.displayName="PerplexityEmoji";const Ict=ye(()=>K(()=>import("./emoji-picker-react.esm-D57JeT_8.js"),__vite__mapDeps([8,3,1])),{nextFrame:!0}),E0e=I.memo(({emoji:e,setEmoji:t,size:n="large"})=>{const{$t:r}=Z(),{colorScheme:s}=Wr(),[a,i]=f.useState(!1),l=f.useCallback(g=>{i(!1),t(g.unified)},[t]),c={small:"h-8 w-8",medium:"h-11 w-11",large:"h-14 w-14"},u=f.useCallback(()=>i(!1),[]),d=f.useMemo(()=>({showPreview:!1}),[]),m=f.useMemo(()=>o.jsx(Ict,{emojiStyle:"native",onEmojiClick:l,autoFocusSearch:!0,width:"100%",theme:s==="dark"?"dark":"light",previewConfig:d}),[s,l,d]),p=f.useCallback(()=>t(""),[t]),h=f.useCallback(()=>i(g=>!g),[]);return o.jsxs("div",{className:"relative",children:[o.jsx(D,{variant:"smallBold",children:r({defaultMessage:"Emoji",id:"34NuzGC3+4"})}),o.jsxs("div",{className:"mt-sm relative inline-block",children:[e!==""&&o.jsx("div",{className:"-right-sm -top-sm absolute",children:o.jsx(he,{pill:!0,size:"tiny",icon:Rt,onClick:p})}),o.jsx($o,{isOpen:a,onClose:u,content:m,hasInteractiveContent:!0,children:o.jsx(H,{onClick:h,variant:"subtler",bgHover:"subtle",className:`p-sm flex cursor-pointer items-center justify-center rounded-full ${c[n]}`,children:e===""?o.jsx("div",{className:"flex size-full items-center justify-center",children:o.jsx(ce,{icon:ar,size:"md"})}):o.jsx("div",{className:"flex size-full items-center justify-center",children:o.jsx(Gd,{unified:e,size:"regular"})})})})]})]})});E0e.displayName="CollectionEmojiPicker";const Rct={in:{opacity:1,scale:1},out:{opacity:0,scale:.9}},M0e=I.memo(e=>{const{cancelButton:t,confirmButton:n,description:r,title:s,ref:a}=e,{handleCancel:i,handleConfirm:l}=Lze();return o.jsx(D5,{asChild:!0,onEscapeKeyDown:c=>{c.stopPropagation()},ref:a,children:o.jsxs(ge.div,{animate:"in",className:"border-subtlest bg-base p-lg rounded-lg border shadow-lg",exit:"out",initial:"out",transition:{duration:.2},variants:Rct,children:[o.jsxs(Ib,{children:[o.jsx(F5,{children:s}),o.jsx(TD,{children:r})]}),o.jsxs("div",{className:"gap-md flex flex-col items-center",children:[o.jsx(D,{children:r}),o.jsxs("div",{className:"gap-md mx-auto flex",children:[o.jsx(he,{variant:"common",onClick:i,testId:"confirm-close-modal-cancel-button",...t}),o.jsx(he,{variant:"rejected",onClick:l,testId:"confirm-close-modal-confirm-button",...n})]})]})]},"confirm-close-modal-content")})});M0e.displayName="ConfirmCloseModalContent";const k0e=I.memo(e=>{const{children:t,className:n="",motionProps:r,ref:s}=e;return o.jsx(xfe,{asChild:!0,ref:s,children:o.jsx(ge.div,{className:B("bg-backdrop/25 fixed inset-0 flex flex-col items-center justify-center backdrop-blur-[1px]",n),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},...r,children:t},"confirm-close-modal-overlay")})});k0e.displayName="ConfirmCloseModalOverlay";const T0e=I.memo(function(){const{$t:t}=Z(),n=f.useMemo(()=>({text:t({defaultMessage:"Cancel",id:"47FYwba+bI"}),testId:"default-confirm-modal-cancel-button"}),[t]),r=f.useMemo(()=>({text:t({defaultMessage:"Discard",id:"nmpevlUATU"}),testId:"default-confirm-modal-discard-button"}),[t]);return o.jsx(k0e,{children:o.jsx(M0e,{cancelButton:n,confirmButton:r,description:t({defaultMessage:"Discard any unsaved changes?",id:"p7u+eL35XP"}),title:t({defaultMessage:"Discard changes?",id:"41zpq3nBvm"})})})});T0e.displayName="DefaultConfirmModal";const NP=I.memo(({isOpen:e,closeModal:t,existingCollection:n,entryUUID:r,frontendContextUUID:s,onCreate:a,content:i})=>{const l="space-create-modal",{$t:c}=Z(),{isMobileStyle:u,isMobileUserAgent:d}=xe(),{createCollection:m,createCollectionForThread:p}=Cy({reason:l}),[h,g]=f.useState({title:i?.title??n?.title??"",description:i?.description??n?.description??"",instructions:i?.instructions??n?.instructions??"",emoji:i?.emoji??n?.emoji??"",accessLevel:n?.access??T2,enableWebByDefault:n?.enable_web_by_default??!0}),[y,v]=f.useState(!1),{title:x,description:b,emoji:_,instructions:w}=h,C=x?.length===0||x?.length>Cq||b?.length>Sq||w?.length>wq,S=N=>{g(T=>({...T,...N})),v(!0)},E=gt(),M=f.useCallback(N=>{S({title:"",description:"",instructions:"",emoji:"",accessLevel:T2}),t(),E.push(`/spaces/${N.slug}`),a?.(N)},[t,E,a]),k=f.useCallback(()=>{r?p({...h,entryUUID:r,frontendContextUUID:s??"",callback:M}):m({...h,callback:M})},[r,p,h,s,M,m]),A=f.useMemo(()=>[{text:c({defaultMessage:"Cancel",id:"47FYwba+bI"}),variant:"common",onClick:t,shouldShowConfirmDialog:!0},{text:c({defaultMessage:"Continue",id:"acrOozm08x"}),variant:"primary",disabled:C,onClick:()=>k()}],[t,c,C,k]),R=f.useCallback(N=>S({title:N}),[]),O=f.useCallback(N=>S({emoji:N}),[]),L=f.useCallback(N=>S({description:N}),[]),P=f.useCallback(N=>S({instructions:N}),[]);return o.jsx(en,{title:c({defaultMessage:"Create a Space",id:"SqVNRzqwJz"}),isOpen:e,onClose:t,actionList:A,confirmOnClose:y?o.jsx(T0e,{}):void 0,children:o.jsxs("div",{className:"space-y-md",children:[o.jsxs("div",{className:"space-x-sm flex items-center",children:[o.jsx("div",{className:"grow",children:o.jsx(Pr,{isMobileUserAgent:d,label:c({defaultMessage:"Title",id:"9a9+wwWy4u"}),value:x,autoFocus:!0,onChange:R,placeholder:c({defaultMessage:"Team Space...",id:"CR3RufeyCu"}),maxLength:Cq})}),o.jsx("div",{className:"shrink-0",children:o.jsx(E0e,{emoji:_,setEmoji:O,size:"medium"})})]}),o.jsx(Aa,{isMobileStyle:u,isMobileUserAgent:d,placeholder:c({defaultMessage:"A collaborative space for discussing latest insights...",id:"r+xI8TGuu9"}),label:c({defaultMessage:"Description",id:"Q8Qw5BZ1VA"}),isOptional:!0,minRows:2,value:b,onChange:L,maxLength:Sq}),o.jsx(Aa,{isMobileStyle:u,isMobileUserAgent:d,placeholder:c({defaultMessage:"Always respond in a formal tone and prioritize data-driven insights...",id:"ERATUnZFe3"}),label:c({defaultMessage:"Custom Instructions",id:"nRK52SgZ/p"}),subtitle:c({defaultMessage:"Give instructions to the AI that affects every thread in this space.",id:"6peDHp5LgI"}),isOptional:!0,value:w,minRows:2,onChange:P,maxLength:wq})]})})});NP.displayName="SpaceCreateModal";const Pct=e=>e?VOe(e):void 0,Gp=(e,t)=>{if(!e)return"";const n=Pct(e.currency);return n==null?"":t(e.price_minor_units/n,{style:"currency",currency:e.currency})},Oct=({billingInterval:e})=>e==="monthly"?o.jsx(pe,{defaultMessage:"/ month",id:"Vn2ud4qKOl"}):e==="yearly"?o.jsx(pe,{defaultMessage:"/ year",id:"8hNOud/igo"}):e==="unknown"?o.jsx(pe,{defaultMessage:"/ month",id:"Vn2ud4qKOl"}):null,rE=({planName:e,price:t,formatNumber:n,isHighlighted:r=!1,className:s="",billingInterval:a})=>o.jsxs(H,{variant:"subtler",className:`px-md h-xl my-sm flex items-center justify-between rounded-md ${s}`,children:[o.jsx(D,{variant:"baseSemi",color:r?"default":"light",children:o.jsx(pe,{...e})}),o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(D,{variant:"small",children:t?Gp(t,n):""}),o.jsx(D,{variant:"tinyRegular",children:o.jsx(Oct,{billingInterval:a})})]})]}),Lct=({isOpen:e,onClose:t})=>{const{data:n}=v0e({reason:"downgrade-modal"}),{update:r}=Et(),{currentOpenModals:s}=xt(),{deprecatedOpenToast:a}=gn(),{formatNumber:i,formatDate:l,$t:c}=Z(),{trackEvent:u}=Ne();f.useEffect(()=>{e&&u("subscription downgrade modal rendered")},[e,u]);const d=f.useCallback(async()=>{await EF({reason:"downgrade-to-pro-modal"}),await r(),t(),u("subscription downgrade success"),s.length>0&&t(),pg({downgrade:"success"}),a(c({defaultMessage:"Subscription updated",id:"Eq5gCUdVyJ"}),"success",5)},[t,s,r,a,c,u]),{mutate:m,isPending:p}=b0e({reason:"downgrade-modal"},{onSuccess:d}),h=n?.next_billing_start_ts,g=h?l(h*1e3):"";return o.jsx(en,{isOpen:e,onClose:t,renderCloseButton:!1,headerClassname:"hidden",modalClassname:"!w-[416px] !min-w-[416px] !max-w-[416px] !p-0",modalContentClassname:"!p-0",noPadding:!0,children:o.jsxs(H,{className:"p-ml",children:[o.jsx(D,{variant:"baseSemi",children:o.jsx(pe,{defaultMessage:"Confirm changes",id:"AnPtOvcf8f"})}),o.jsx(rE,{planName:{id:"kkjl2vQekD",defaultMessage:"Max"},price:n?.old_product_price,formatNumber:i,billingInterval:n?.old_product_interval}),o.jsx(H,{children:o.jsxs(D,{variant:"tinyRegular",color:"light",className:"flex items-center justify-center gap-1",children:[o.jsx("div",{className:"border-subtlest flex-1 border-t"}),o.jsx(pe,{defaultMessage:"Downgrade",id:"SduMNm+0em"}),o.jsx("div",{className:"border-subtlest flex-1 border-t"})]})}),o.jsx(rE,{planName:{id:"R/eOkjWqNU",defaultMessage:"Pro"},price:n?.new_product_price,formatNumber:i,billingInterval:n?.new_product_interval,isHighlighted:!0,className:"mb-0 !rounded-b-none rounded-t-md"}),o.jsx(H,{variant:"subtler",className:"px-md pb-sm flex items-center justify-between rounded-b-md",children:o.jsx(D,{variant:"small",color:"light",children:o.jsx(pe,{defaultMessage:"Your current Max subscription will remain active until {date} when it will change to Pro.",id:"2C6tgt4MMg",values:{date:g}})})}),o.jsxs(H,{className:"gap-sm mt-ml flex justify-end",children:[o.jsx(Te,{text:o.jsx(pe,{defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t}),o.jsx(he,{variant:"primary",text:o.jsx(pe,{defaultMessage:"Confirm",id:"N2IrpMDHDB"}),disabled:p,onClick:()=>m()})]})]})})},Dct=async()=>{try{return(await se.GET("/rest/homepage-widgets/upsell/","get upsells",{timeoutMs:Pe()})).data?.upsell_information??null}catch(e){return ne.error("Error getting homepage upsells",{error:e}),null}},Fct=async()=>{try{return(await se.GET("/rest/ntp/upsell/","get ntp upsells",{timeoutMs:Pe()})).data?.upsell_information??null}catch(e){return ne.error("Error getting NTP upsells",{error:e}),null}},NU=({enabled:e=!0}={})=>{const{data:t,isLoading:n,isError:r}=We({enabled:e,queryKey:NXe(),queryFn:Dct,networkMode:"always",staleTime:1/0,gcTime:1/0});return{data:t??null,isLoading:n,isError:r}},Pc={pro:t8e,collection:eo,research:N7,labs:DM,comet_login:Io,invite:Jg},Uct=()=>{const{data:e}=NU(),{trackEvent:t,trackEventOnce:n}=Ne(),r=Qb(e??void 0),[s,a]=f.useState(!1);f.useEffect(()=>{e&&e.app_location==="BANNER"&&(a(!0),n("banner upsell viewed",{upsellName:e.name,upsellType:e.upsell_type}))},[e,n]);const i=f.useCallback(()=>{e&&(t("banner upsell dismissed",{upsellName:e.name,upsellType:e.upsell_type}),a(!1),h3(e.name))},[e,t]),l=f.useMemo(()=>{if(e&&e.icon_reference&&e.icon_reference in Pc)return Pc[e.icon_reference]},[e]);return f.useMemo(()=>({show:s&&!!e,onDismiss:i,onClick:r,icon:l,title:e?.title,actionLabel:e?.button_text}),[i,r,s,l,e])},sZ={RAMP:"Welcome Ramp members. Your 6 month Perplexity Pro free trial starts now!",FREEATT:"Welcome ATT Employees.  Your complimentary 1-year subscription starts now!",FREEAWS:"Welcome AWS Employees.  Your complimentary 1-year subscription starts now!",RABBIT:"Welcome r1 owners.  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEUT:"Welcome UT Staff.  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEDATABRICKS:"Welcome Databricks team.  Your complimentary 1-year Perplexity Pro subscription starts now!",FREESRA:"Welcome SRA team. Your complimentary 1-year Perplexity Pro subscription starts now!",HBSTECH:"Welcome HBS Tech Conference Attendees.  Your complimentary 6 month Perplexity Pro subscription starts now!",HBSSTAFF:"Welcome HBS Tech Conference Attendees.  Your complimentary 1 year Perplexity Pro subscription starts now!",FREENEWSROOM:"Welcome Friends!  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEINKITT:"Welcome Inkitt Writers!  Your complimentary 1-year subscription to Perplexity Pro starts now!",FREETIME:"Welcome Time team!  Your complimentary 1-year subscription to Perplexity Pro starts now!",FREETMOBILE:"Welcome T-Mobile team!  Your complimentary 1-year subscription to Perplexity Pro starts now!","11LABS":"Welcome! Your complimentary 3-month subscription to Perplexity Pro starts now!",FREECAVS:"Welcome Cavs team! Your complimentary 1-year Perplexity Pro subscription starts now!",NOTHING6:"Welcome Nothing owners. Your complimentary 6-month Perplexity Pro subscription starts now!",FREENOTHING6:"Welcome Nothing owners. Your complimentary 6-month Perplexity Pro subscription starts now!",NOTHING1:"Welcome Nothing owners. Your complimentary 1-year Perplexity Pro subscription starts now!",FREENOTHING1:"Welcome Nothing owners. Your complimentary 1-year Perplexity Pro subscription starts now!",HOOHACKS:"Welcome HooHacks Community. Your 1-year Perplexity Pro free trial starts now!",NJED:"Welcome NJ ED Community. Your 1-year Perplexity Pro free trial starts now!",COPYAI:"Welcome Copy AI customers! Your 6-month complimentary Perplexity Pro subscription starts now!",RAYCAST6:"Welcome Raycast users! Your 6-month complimentary Perplexity Pro subscription starts now!",RAYCAST3:"Welcome Raycast users! Your 3-month complimentary Perplexity Pro subscription starts now!",FREEMAGENTALOVE:"Welcome Deutsche Telekom!  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEPPLXVIP:"Welcome friend of Perplexity! Your complimentary 1-year Perplexity Pro subscription starts now.",FREEUTA1:"Welcome UTA team! Your complimentray 1-year Perplexity Pro subscription starts now.",DT:"Willkommen Deutsche Telekom Kunde! Sie erhalten dank Magenta Moments ein kostenloses 1-Jahres-Abonnement fr Perplexity Pro.",MY:"Welcome! Your complimentary 1-year Perplexity Pro subscription starts now."},cC="pplx.discount_code",Lj="pplx.discount_code_expiry",Bct=()=>{const[e,t]=f.useState(null),[n,r]=f.useState(null),s=gt(),a=Nt(),i=jt(),l=a?.get("discount_code"),{$t:c}=Z(),u=Array.isArray(l)?l[0]:l,[d,m]=f.useState(u||null),{hasAccessToProFeatures:p}=_t(),h=f.useCallback(()=>{Re.removeItem(cC),Re.removeItem(Lj),r(null),t(null)},[]),g=f.useCallback(()=>{h(),m(null)},[h]),y=f.useCallback(()=>{if(n&&e)return;const b=Re.getItem(cC);b?.startsWith("REPLIT")?(t("/static/images/replit.svg"),r("/static/images/replit_dark.svg")):b?.startsWith("BREX")?(t("/static/images/brex.svg"),r("/static/images/brex_dark.svg")):(r(null),t(null))},[n,e]),v=f.useCallback(()=>{const b=Re.getItem(cC),_=Re.getItem(Lj);if(p){h();return}if(!(!b&&!u)){if(_&&new Date(_)<new Date){h();return}if(!b||u&&u!==b){const w=new Date;w.setDate(w.getDate()+2),Re.setItem(cC,String(u)),Re.setItem(Lj,w.toString()),m(String(u)),y(),i==="/pro"&&s.push("/",void 0,"Pro page");return}if(b){m(b),y();return}}},[u,y,p,i,h,s]),x=f.useCallback(b=>{for(const _ in sZ)if(b&&b.startsWith(_))return sZ[_];return c({defaultMessage:"Redeem your promo code {discountCode}. Get started",id:"Vapo/CiOwF"},{discountCode:b})},[c]);return f.useEffect(()=>{v()},[u,v]),f.useMemo(()=>({discountCode:d,setDiscountCode:m,partnerLogoDark:n,partnerLogoLight:e,message:x(d??""),clearDiscountCode:g}),[g,d,x,n,e])},N0e=({reason:e})=>{const{$t:t}=Z(),{data:n,isLoading:r}=We({queryKey:MXe(),queryFn:()=>c0e({reason:e})}),s=!!n?.institution;let a=n?.offer?.discount_str??void 0;!a&&s&&(a=t({defaultMessage:"$4.99",id:"ngR/pJs1LV"}));const i=n?.offer?.discount_type??void 0;return f.useMemo(()=>({userPromotionsLoading:r,discountPrice:a,discountType:i,showStudentDiscountContent:s,campaignId:n?.campaign?.id,institution:n?.institution}),[n?.campaign?.id,n?.institution,a,i,r,s])},V0="clicked enterprise ad",$0="https://www.perplexity.ai/enterprise",jU=()=>{const{trackEvent:e}=Ne(),t=gt(),{hasAccessToProFeatures:n}=_t(),r=f.useCallback(async h=>{h.preventDefault(),e(V0,{source:"sidebarAd",isSubscribed:n}),t.push($0)},[e,t,n]),s=f.useCallback(async h=>{h?.preventDefault(),e(V0,{source:"settingsHeader"}),t.push($0)},[e,t]),a=f.useCallback(async h=>{h.preventDefault(),h.stopPropagation(),e(V0,{source:"footer"}),t.push($0)},[e,t]),i=f.useCallback(async h=>{h.preventDefault(),e(V0,{source:"pricingTable"}),t.push($0)},[e,t]),l=f.useCallback(async h=>{h.preventDefault(),e(V0,{source:"paywall"}),t.push($0)},[e,t]),c=f.useCallback(({orgName:h,success:g})=>{e("org created",{orgName:h,success:g})},[e]),u=f.useCallback(({invitedEmail:h,source:g,orgUUID:y,inviteType:v})=>{e("org user invited",{invitedEmail:h,source:g,orgUUID:y,inviteType:v})},[e]),d=f.useCallback(({orgUUID:h})=>{e("org invite step completed",{orgUUID:h})},[e]),m=f.useCallback(({orgUUID:h,source:g,intent:y,success:v})=>e("org payment portal entered",{orgUUID:h,source:g,intent:y,success:v}),[e]),p=f.useCallback(({orgUUID:h,success:g})=>{e("sso enabled",{orgUUID:h,success:g})},[e]);return f.useMemo(()=>({handleSidebarAdClick:r,handleSettingsHeaderAdClick:s,handleFooterAdClick:a,handlePricingTableAdClick:i,handlePaywallAdClick:l,trackOrgCreated:c,trackOrgUserInvited:u,trackOrgInviteStepCompleted:d,trackOrgPaymentPortalEntered:m,trackSSOEnabled:p}),[a,l,i,s,r,c,d,m,u,p])},Vct=({reason:e})=>{const t=gt(),{organization:n}=_n({reason:e}),{trackOrgPaymentPortalEntered:r}=jU(),s=f.useCallback(async({source:l})=>{const c=await bXe({source:l,locale:id(),reason:e});c?(r({orgUUID:n?.uuid,source:l,intent:"portal",success:!0}),t.push(c)):(r({orgUUID:n?.uuid,source:l,intent:"portal",success:!1}),ne.log("could not open Stripe portal"))},[r,n?.uuid,t,e]),a=f.useCallback(({interval:l="monthly",subscriptionTier:c,source:u,onErrorCallback:d,reason:m})=>{const p=id();_Xe({subscriptionTier:c==="enterprise_pro"?On.PRO:On.MAX,interval:l,origin:u,locale:p,reason:m}).then(h=>{h&&h.status==="success"&&h.url!=null&&h.url!==""?(r({orgUUID:n?.uuid,source:u,intent:"checkout",success:!0}),h.url&&t.push(h.url)):(r({orgUUID:n?.uuid,source:u,intent:"checkout",success:!1}),d?.())})},[t,n?.uuid,r]),i=f.useCallback(async({interval:l,subscriptionTier:c,collectionMethod:u,source:d,billingAddress:m,reason:p})=>{const h=id(),g=await wXe({interval:l,subscriptionTier:c==="enterprise_pro"?On.PRO:On.MAX,origin:d,locale:h,collectionMethod:u,billingAddress:m,reason:p});return await lpe({reason:p}),g},[]);return f.useMemo(()=>({manageExistingBillingClick:s,navigateToCheckout:a,createInvoicedSubscription:i}),[i,s,a])},$ct={good:"super",bad:"red",info:"subtler",orange:"orange"},zm=I.memo(({variant:e,title:t,actionLabel:n,onClick:r,onClose:s,toolTip:a,icon:i,isMobileStyle:l,isLoading:c})=>{const u=e==="info"?"default":"white",d=e==="info"?"super":u,m=f.useCallback(h=>{h.stopPropagation(),s?.(h)},[s]),p=o.jsxs(H,{className:B("h-bannerHeight rounded-none","gap-xs px-md md:gap-sm relative flex w-full cursor-pointer items-center transition duration-200 hover:opacity-80",e==="info"?"md:justify-between":"md:justify-center",{"px-lg":s}),variant:$ct[e],onClick:r,children:[c?o.jsx(D,{color:u,children:o.jsx($r,{})}):i&&o.jsx(D,{color:u,className:"mr-xs md:mr-0",children:o.jsx(ce,{icon:i,size:l?"sm":"md"})}),o.jsx(D,{color:u,className:"leading-[1.1]",variant:l?"tiny":"small",children:t}),o.jsxs("div",{className:"flex items-center gap-1",children:[n&&o.jsx(D,{color:d,variant:l?"tiny":"small",className:B("hidden font-bold decoration-white/30 md:inline-flex",{"underline underline-offset-2":e!=="info"}),children:n}),r&&e!=="info"&&o.jsx(D,{color:u,className:"inline-flex",children:o.jsx(ce,{icon:WM,size:"xs"})})]}),s&&o.jsx(Te,{icon:Rt,extraCSS:B("!absolute right-sm opacity-50",e==="info"?"text-foreground dark:!text-white":"!text-white"),variant:"noHover",size:"tiny",onClick:m})]});return a?o.jsx(bn,{tooltipText:a,children:p}):p});zm.displayName="SiteBanner";const Wct=({orgStripeStatus:e})=>{const t="org-billing-banner",n=gt(),{$t:r}=Z(),{navigateToCheckout:s}=Vct({reason:t}),{isMobileStyle:a}=xe(),[i,l]=f.useState(!1),{openModal:c}=xt();if(Bs.getItem(nHe))return null;const d=()=>{if(!i){if(e==="none"){c("pricingModal",{origin:Oe.ENTERPRISE_BILLING_BANNER,showFreeTier:!0,pitchMessage:{title:r({defaultMessage:"Select your plan",id:"kujKpiV0z4"})}});return}l(!0),s({source:"banner",subscriptionTier:"enterprise_pro",onErrorCallback:()=>{n.refresh("Org billing banner"),l(!1)},reason:t})}},m=r(e==="past_due"?{defaultMessage:"Please complete your invoice payment to use Enterprise features",id:"e4FA3jvBUQ"}:{defaultMessage:"Please complete the payment process to use Enterprise features",id:"bNYGI9HBI3"}),p=r({defaultMessage:"May take up to a minute to reflect payment status changes",id:"+w47QOW1fc"});return o.jsx(zm,{onClick:d,isLoading:i,variant:"bad",title:m,toolTip:p,icon:n8e,isMobileStyle:a})},Hct=()=>{const e=gt(),{trackEvent:t}=Ne(),n=f.useCallback(async({origin:r,discountCode:s,tier:a,referralCode:i,subscriptionTier:l="pro",redirectPath:c})=>{const u=new URL(`/${l}/payment`,window.location.origin);return u.searchParams.set("plan",a),u.searchParams.set("origin",r),s&&u.searchParams.set("promotion_code",s),c&&u.searchParams.set("redirect_path",c),t("pro checkout started",{subscriptionTier:l,origin:r,discountCode:s??"",referralCode:i??"",tier:"monthly",flowType:"embedded_checkout"}),e.push(u.toString()),!0},[e,t]);return f.useMemo(()=>({navigateToPayment:n}),[n])},zct=({message:e,discountCode:t,clearDiscountCode:n})=>{const r="discount-code-banner",s=rt(),{trackEvent:a}=Ne(),{$t:i}=Z(),{isMobileStyle:l}=xe(),[c,u]=f.useState(!1),[d,m]=f.useState(null),{openVisitorLoginUpsell:p}=ur({enabled:!s}),{navigateToPayment:h}=Hct(),g=Oe.DISCOUNT_CODE_BANNER;f.useEffect(()=>{a("promo code banner shown",{discountCode:t})},[a,t]);const y=f.useCallback(()=>{const b=new URL(window.location.href);b.searchParams.delete("discount_code"),Ry(Object.fromEntries(b.searchParams)),n()},[n]),v=f.useCallback(async()=>{if(a("promo code banner clicked",{discountCode:t}),!c){if(d){y(),m(null);return}if(s){if(u(!0),a("get started button clicked from discount banner",{tier:"monthly"}),await h({origin:g,discountCode:t,tier:"monthly"})){n();return}a("pro checkout started",{subscriptionTier:"pro",origin:g,discountCode:t??"",referralCode:"",tier:"monthly",flowType:"stripe_checkout"}),d0e({request:{subscriptionTier:"pro",tier:"monthly",referralCode:"",discountCode:t,origin:g,locale:id()},reason:r}).then(b=>{b?.url?Hi(b.url,"Discount code banner checkout"):(b?.errorCode==="PROMO_CODE_CUSTOMER_NOT_FIRST_TIME"?m(i({defaultMessage:"This code is only valid for first-time customers. Click to dismiss.",id:"xTWJg0ueMJ"})):m(i({defaultMessage:"There was an error with your code. Please double-check your code and click to try again.",id:"CdOiX2ylN6"})),u(!1))})}else p({title:i({defaultMessage:"Get started with your Pro discount",id:"XTa2YrANRF"}),origin:g})}},[i,n,t,d,c,s,h,p,g,a,y]),x=b=>{y(),b.preventDefault()};return o.jsx(zm,{onClick:v,isLoading:c,icon:d?Pie:Oie,variant:d?"bad":"good",title:d||e,isMobileStyle:l,onClose:x})},Gct="back_to_school_winner",j0e="EDUFREEYEAR",aZ=({partnerCode:e,partnerDiscountCode:t,bannerVariant:n,onClose:r})=>{const{$t:s}=Z(),{session:a}=Et(),{hasActiveSubscription:i}=_t(),l=e==="edu"&&t===j0e?!1:i,[,,c]=_0e(),[,,u]=w0e(),[d,m]=f.useState(!1),{isMobileStyle:p}=xe(),{data:h}=We({queryKey:["partner",e],queryFn:()=>fetch(`/api/subscription/config?partnerCode=${e}`).then(S=>S.json())}),g=gt();if(!e)return null;const y=h?.messages??Xue,v=l?s({defaultMessage:"Welcome to Perplexity Pro",id:"dcD7kilsgv"}):y?.bannerMessage??"",x=l?s({defaultMessage:"Learn More",id:"7DIW6+rckr"}):e.startsWith("edu")?s({defaultMessage:"Redeem Now",id:"EiBCDsh1sP"}):s({defaultMessage:"Get Started",id:"9QXm1EW9qz"}),b=l?void 0:Oie,_=l?`/join/p/${e}/welcome`:a&&t?`/join/p/${e}/${t}`:`/join/p/${e}`,w=S=>{c(),u(),r&&r(),S.preventDefault()},C=()=>{d||(m(!0),g.push(_))};return h?.maskPromoCodeFromQueryParams?null:o.jsx(zm,{icon:b,isMobileStyle:p,title:v,actionLabel:x,onClick:C,isLoading:d,variant:n??"good",onClose:w})},qct="https://www.perplexity.ai/hub/blog/eligible-uber-one-members-can-now-unlock-a-complimentary-full-year-of-perplexity-pro",Kct=()=>{const{$t:e}=Z(),t=gt(),{isMobileStyle:n}=xe(),[r,s]=f.useState(!1),a=()=>{r||(s(!0),t.push(qct))};return o.jsx(zm,{variant:"good",title:e({defaultMessage:"{uberOne} members in the United States and Canada can redeem one free year of {perplexityPro}",id:"jo9fEuRnKx"},{uberOne:"Uber One",perplexityPro:"Perplexity Pro"}),onClick:a,isLoading:r,isMobileStyle:n})};var sE;(function(e){e.NONE="none",e.ACTIVE="active",e.TRIALING="trialing",e.PAST_DUE="past_due",e.INVOICE_PAST_DUE="invoice_past_due",e.WHITE_GLOVE_PAST_DUE="white_glove_past_due",e.CANCELED="canceled"})(sE||(sE={}));const zen=[{label:"N/A",value:""},{label:"AD NRT",value:"ad_nrt"},{label:"AE TRN",value:"ae_trn"},{label:"AL TIN",value:"al_tin"},{label:"AM TIN",value:"am_tin"},{label:"AO TIN",value:"ao_tin"},{label:"AR CUIT",value:"ar_cuit"},{label:"AU ABN",value:"au_abn"},{label:"AU ARN",value:"au_arn"},{label:"BA TIN",value:"ba_tin"},{label:"BB TIN",value:"bb_tin"},{label:"BG UIC",value:"bg_uic"},{label:"BH VAT",value:"bh_vat"},{label:"BO TIN",value:"bo_tin"},{label:"BR CNPJ",value:"br_cnpj"},{label:"BR CPF",value:"br_cpf"},{label:"BS TIN",value:"bs_tin"},{label:"BY TIN",value:"by_tin"},{label:"CA BN",value:"ca_bn"},{label:"CA GST/HST",value:"ca_gst_hst"},{label:"CA PST BC",value:"ca_pst_bc"},{label:"CA PST MB",value:"ca_pst_mb"},{label:"CA PST SK",value:"ca_pst_sk"},{label:"CA QST",value:"ca_qst"},{label:"CD NIF",value:"cd_nif"},{label:"CH UID",value:"ch_uid"},{label:"CH VAT",value:"ch_vat"},{label:"CL TIN",value:"cl_tin"},{label:"CN TIN",value:"cn_tin"},{label:"CO NIT",value:"co_nit"},{label:"CR TIN",value:"cr_tin"},{label:"DE STN",value:"de_stn"},{label:"DO RCN",value:"do_rcn"},{label:"EC RUC",value:"ec_ruc"},{label:"EG TIN",value:"eg_tin"},{label:"ES CIF",value:"es_cif"},{label:"EU OSS VAT",value:"eu_oss_vat"},{label:"EU VAT",value:"eu_vat"},{label:"GB VAT",value:"gb_vat"},{label:"GE VAT",value:"ge_vat"},{label:"GN NIF",value:"gn_nif"},{label:"HK BR",value:"hk_br"},{label:"HR OIB",value:"hr_oib"},{label:"HU TIN",value:"hu_tin"},{label:"ID NPWP",value:"id_npwp"},{label:"IL VAT",value:"il_vat"},{label:"IN GST",value:"in_gst"},{label:"IS VAT",value:"is_vat"},{label:"JP CN",value:"jp_cn"},{label:"JP RN",value:"jp_rn"},{label:"JP TRN",value:"jp_trn"},{label:"KE PIN",value:"ke_pin"},{label:"KH TIN",value:"kh_tin"},{label:"KR BRN",value:"kr_brn"},{label:"KZ BIN",value:"kz_bin"},{label:"LI UID",value:"li_uid"},{label:"LI VAT",value:"li_vat"},{label:"MA VAT",value:"ma_vat"},{label:"MD VAT",value:"md_vat"},{label:"ME PIB",value:"me_pib"},{label:"MK VAT",value:"mk_vat"},{label:"MR NIF",value:"mr_nif"},{label:"MX RFC",value:"mx_rfc"},{label:"MY FRP",value:"my_frp"},{label:"MY ITN",value:"my_itn"},{label:"MY SST",value:"my_sst"},{label:"NG TIN",value:"ng_tin"},{label:"NO VAT",value:"no_vat"},{label:"NO VOEC",value:"no_voec"},{label:"NP PAN",value:"np_pan"},{label:"NZ GST",value:"nz_gst"},{label:"OM VAT",value:"om_vat"},{label:"PE RUC",value:"pe_ruc"},{label:"PH TIN",value:"ph_tin"},{label:"RO TIN",value:"ro_tin"},{label:"RS PIB",value:"rs_pib"},{label:"RU INN",value:"ru_inn"},{label:"RU KPP",value:"ru_kpp"},{label:"SA VAT",value:"sa_vat"},{label:"SG GST",value:"sg_gst"},{label:"SG UEN",value:"sg_uen"},{label:"SI TIN",value:"si_tin"},{label:"SN NINEA",value:"sn_ninea"},{label:"SR FIN",value:"sr_fin"},{label:"SV NIT",value:"sv_nit"},{label:"TH VAT",value:"th_vat"},{label:"TJ TIN",value:"tj_tin"},{label:"TR TIN",value:"tr_tin"},{label:"TW VAT",value:"tw_vat"},{label:"TZ VAT",value:"tz_vat"},{label:"UA VAT",value:"ua_vat"},{label:"UG TIN",value:"ug_tin"},{label:"US EIN",value:"us_ein"},{label:"UY RUC",value:"uy_ruc"},{label:"UZ TIN",value:"uz_tin"},{label:"UZ VAT",value:"uz_vat"},{label:"VE RIF",value:"ve_rif"},{label:"VN TIN",value:"vn_tin"},{label:"ZA VAT",value:"za_vat"},{label:"ZM TIN",value:"zm_tin"},{label:"ZW TIN",value:"zw_tin"}],A0e=f.memo(({orgName:e,invitationUUID:t})=>{const{$t:n}=Z(),{isMobileStyle:r}=xe(),s=f.useCallback(()=>{Hi(`/onboarding/org/join/${t}`,"Organization invitation")},[t]),a=f.useMemo(()=>n({defaultMessage:"{orgName} invited you to join their organization",id:"xAk8Drb2hE"},{orgName:e}),[n,e]),i=f.useMemo(()=>n({defaultMessage:"View invite",id:"TDWT6zhMKG"}),[n]);return o.jsx(zm,{isLoading:!1,variant:"good",title:a,actionLabel:i,icon:yu,isMobileStyle:r,onClick:s})});A0e.displayName="OrgInvitationBanner";const Yct=e=>["/onboarding/org/create"].includes(e);function I0e(){const e="app-banner-inner",{isMobileUserAgent:t}=xe(),{message:n,discountCode:r,clearDiscountCode:s}=Bct(),{hasAccessToProFeatures:a}=_t(),[i]=_0e(),[l]=w0e(),c=jt(),{organization:u,orgUser:d,pendingInvitation:m}=_n({reason:e}),p=[sE.NONE,sE.PAST_DUE],h=u?.stripe_status&&p.includes(u.stripe_status),g=d?.role==="ADMIN",y=Nt(),x=N0e({reason:e}).campaignId===Gct,[b,_]=Ty("pplx.back_to_school_winner_banner_dismissed",!1),{show:w,onDismiss:C,onClick:S,icon:E,title:M,actionLabel:k}=Uct();return w&&M&&k?o.jsx(ge.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.2},children:o.jsx(zm,{icon:E,isMobileStyle:t,title:M,actionLabel:k,onClick:S,variant:"good",onClose:C})}):m&&!u&&!d?o.jsx(A0e,{orgName:m.organization_name,invitationUUID:m.invitation_uuid}):g&&h&&!Yct(c??"")&&!t?o.jsx(Wct,{orgStripeStatus:u?.stripe_status}):/(^\/$)|(^\/search)/.test(c??"")&&i?o.jsx(aZ,{partnerCode:i,partnerDiscountCode:l}):r&&!a&&!i?o.jsx(zct,{message:n,discountCode:r,clearDiscountCode:s}):y?.get("utm_campaign")==="morningbrew_083024"&&y?.get("utm_source")==="newsletter"?o.jsx(Kct,{}):x&&!b?o.jsx(aZ,{partnerCode:"edu",partnerDiscountCode:j0e,bannerVariant:"orange",onClose:()=>{_(!0)}}):null}const Qct=()=>{const e=f.useCallback(n=>{const r=document.documentElement,s=n??jn("colorSchemeTheme"),a=xle(s);a?r.setAttribute("data-theme",a):r.removeAttribute("data-theme")},[]),t=f.useMemo(()=>$s(e,100),[e]);DF("colorSchemeTheme",n=>{t(n?.value)}),f.useEffect(()=>{e()},[e])},R0e=Wt("AppLayoutContext",void 0),Mu=()=>{const e=f.useContext(R0e);if(!e)throw new Error("useAppLayout must be used within an AppLayoutProvider");return e},Xct=({children:e})=>{const[t,n]=f.useState(!1);return Qct(),o.jsx(R0e.Provider,{value:{isMobileSidebarOpen:t,setMobileSidebarOpen:n},children:e})},Zct=({children:e})=>{const{isMobileSidebarOpen:t,setMobileSidebarOpen:n}=Mu(),{$t:r}=Z();return o.jsx(vD,{open:t,onOpenChange:n,children:o.jsxs(bD,{forceMount:!0,children:[o.jsx(Ib,{children:o.jsx(SD,{children:r({defaultMessage:"Mobile Sidebar",id:"37aIxgWRuh"})})}),o.jsx(Ke,{children:t&&o.jsxs(o.Fragment,{children:[o.jsx(_D,{asChild:!0,children:o.jsx(ge.div,{className:"fixed inset-0 bg-black/20 dark:bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}},"mobile-sidebar-overlay")}),o.jsx(wD,{asChild:!0,children:o.jsx(ge.div,{className:"bg-base fixed inset-y-0 left-0",initial:{x:"-100%"},animate:{x:"0%"},exit:{x:"-100%"},transition:{duration:.2,ease:rn},children:e},"mobile-sidebar-content")})]})})]})})},AU=({className:e})=>{const{inApp:t}=Vo(),{isMobileSidebarOpen:n,setMobileSidebarOpen:r}=Mu();return t?null:o.jsx(Te,{icon:r8e,pill:!0,onClick:()=>r(!n),extraCSS:e})},ih=72,aE=200,P0e=()=>{const{isGovernmentRequestOrigin:e}=Zr();return e===void 0},Jct=()=>hXe()==="firefox"?!0:typeof window>"u"?!1:new URL(window.location.href).searchParams.get("pc")==="firefox",oZ="partnerships",eut=()=>yXe()===oZ?!0:typeof window>"u"?!1:new URL(window.location.href).searchParams.get("utm_source")===oZ,Di=f.memo(({isSamsungBrowser:e,isWindowsApp:t,isComet:n,isFirefoxDefaultSearch:r,isPartnershipCampaign:s,isGovernment:a,children:i})=>{const l=fn(),c=Jct(),u=eut(),{isGovernmentRequestOrigin:d}=Zr(),{device:{isWindowsApp:m,isSamsungBrowser:p}}=At(),h=P0e();return f.useMemo(()=>!!(n&&l||t&&m||e&&p||r&&c||s&&u||a&&(h||d)),[l,m,p,n,e,t,r,c,s,u,a,d,h])?null:i});Di.displayName="OmitUpsellIf";const O0e=I.memo(({})=>{const{$t:e}=Z(),{trackEvent:t}=Ne(),n=f.useCallback(()=>{t("click logo",{})},[t]),{device:{isIOS:r}}=At(),{handleAppDownloadClicked:s}=zd("mobile-header"),a=t_({origin:"mobile-header"}),{mwebUpsellWhatsApp:i,loadingMwebUpsellWhatsApp:l}=r_(),c=f.useMemo(()=>i?W7:r?yb:$7,[i,r]);return o.jsx(H,{variant:"background",className:"px-sm h-headerHeight sticky inset-x-0 top-0 z-10 flex w-full items-center md:mb-0",children:o.jsxs("div",{className:"gap-x-sm pl-xs flex w-full items-center justify-between md:hidden",children:[o.jsxs("div",{className:"gap-x-sm flex items-center",children:[o.jsx(AU,{className:"-ml-sm"}),o.jsx(Ge,{href:"/",onClick:n,children:o.jsx(Na,{variant:"text",size:"small"})})]}),!l&&o.jsx(Di,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,children:o.jsx("div",{className:"animate-in fade-in duration-300",children:o.jsx(he,{size:"small",pill:!0,variant:"primary",icon:c,text:e(i?{defaultMessage:"Chat in WhatsApp",id:"jXqSBQcpKC"}:{defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),onClick:i?a:s})})})]})})});O0e.displayName="MobileProductHeader";const IU=Wt("ScrollContainerRefContext",null),tut=({children:e,scrollContainerRef:t})=>o.jsx(IU.Provider,{value:{scrollContainerRef:t},children:e}),Oa=()=>{const e=f.useContext(IU);if(!e)throw new Error("useScrollContainerRef must be used within a ScrollContainerRefProvider");return e},RU=I.memo(e=>{const{children:t,inRenderingPlace:n}=e,s=to().erp;return n&&n===s||!n&&s!==void 0?null:o.jsx(o.Fragment,{children:t})});RU.displayName="HideInEntropy";const nut=/^\/b\//;function L0e(e){return e&&nut.test(e)}function rut(e){return e?new URL(window.location.href).pathname.endsWith(`/search/${e}`):!1}function sut(e){return e?.startsWith("/collections")||e?.startsWith("/spaces")}function aut(){return fn()?"/b/home":"/"}const Py=()=>{const{locale:e}=Z();return Sde(e)==="rtl"},out=({children:e,ref:t})=>o.jsx(Xct,{children:o.jsx(H,{variant:"underlay",children:o.jsx("div",{className:"isolate flex h-dvh",ref:t,children:e})})}),iut=({children:e})=>{const{isMobileStyle:t}=xe({evaluateOnInit:!0});return t?o.jsx(Zct,{children:e}):o.jsx(o.Fragment,{children:e})},lut=({children:e,fillHeight:t=!0,hasSidebar:n,ref:r})=>{const{isSidebarPinned:s}=hn(),{isMobileStyle:a}=xe({evaluateOnInit:!0}),i=jt(),l=n&&!L0e(i),c=s&&!a&&l,u=Xa(),d=Py(),m=f.useMemo(()=>d?{paddingRight:c?aE:0}:{paddingLeft:c?aE:0},[d,c]);return o.jsxs(ge.div,{initial:m,animate:m,transition:{duration:.2,ease:rn},className:"erp-tab:p-0 md:gap-xs erp-tab:gap-0 isolate flex h-auto max-h-screen min-w-0 grow flex-col",ref:r,children:[o.jsx(RU,{inRenderingPlace:"sidecar",children:o.jsx(I0e,{})}),o.jsxs(H,{variant:"background",className:"@container/main relative isolate min-h-0 flex-1 overflow-clip bg-clip-border",children:[o.jsx("div",{className:B("mx-auto flex w-full flex-col",{"h-full":t}),children:e}),o.jsx(H,{className:B("rounded-inherit pointer-events-none absolute inset-0 z-20 hidden md:dark:block",l&&"md:!border-y-0 md:!border-r-0",!u&&"md:dark:border")})]})]})},s_=({children:e,childrenWidth:t,containerClassName:n=""})=>{const r=Br(t).with("small",()=>"max-w-screen-sm px-md md:px-lg").with("default",()=>"max-w-screen-md px-md md:px-lg").with("static",()=>"max-w-screen-lg px-md py-lg md:px-xl").with("large",()=>"max-w-threadWidth px-md md:px-lg").with("none",()=>"max-w-none").otherwise(()=>"max-w-screen-md px-md md:px-lg"),s=f.useRef(null);return o.jsx(tut,{scrollContainerRef:s,children:o.jsx("div",{ref:s,className:"scrollable-container scrollbar-subtle flex flex-1 basis-0 overflow-auto [scrollbar-gutter:stable]",children:o.jsx("div",{className:B("mx-auto size-full",r,n),children:e})})})},Gen=({children:e,mobileHeader:t=!0})=>{const{isMobileStyle:n}=xe();return o.jsxs(o.Fragment,{children:[o.jsx("div",{children:t&&n&&o.jsx(O0e,{})}),e]})};function iZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function lh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iZ(Object(n),!0).forEach(function(r){D0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iZ(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function AS(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?AS=function(t){return typeof t}:AS=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AS(e)}function D0e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cut(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function uut(e,t){if(e==null)return{};var n=cut(e,t),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function oE(e,t){return dut(e)||fut(e,t)||mut(e,t)||put()}function dut(e){if(Array.isArray(e))return e}function fut(e,t){var n=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){var r=[],s=!0,a=!1,i,l;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));s=!0);}catch(c){a=!0,l=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function mut(e,t){if(e){if(typeof e=="string")return lZ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lZ(e,t)}}function lZ(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function put(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var go=function(t,n,r){var s=!!r,a=I.useRef(r);I.useEffect(function(){a.current=r},[r]),I.useEffect(function(){if(!s||!t)return function(){};var i=function(){a.current&&a.current.apply(a,arguments)};return t.on(n,i),function(){t.off(n,i)}},[s,n,t,a])},y1=function(t){var n=I.useRef(t);return I.useEffect(function(){n.current=t},[t]),n.current},wm=function(t){return t!==null&&AS(t)==="object"},hut=function(t){return wm(t)&&typeof t.then=="function"},gut=function(t){return wm(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},cZ="[object Object]",jP=function e(t,n){if(!wm(t)||!wm(n))return t===n;var r=Array.isArray(t),s=Array.isArray(n);if(r!==s)return!1;var a=Object.prototype.toString.call(t)===cZ,i=Object.prototype.toString.call(n)===cZ;if(a!==i)return!1;if(!a&&!r)return t===n;var l=Object.keys(t),c=Object.keys(n);if(l.length!==c.length)return!1;for(var u={},d=0;d<l.length;d+=1)u[l[d]]=!0;for(var m=0;m<c.length;m+=1)u[c[m]]=!0;var p=Object.keys(u);if(p.length!==l.length)return!1;var h=t,g=n,y=function(x){return e(h[x],g[x])};return p.every(y)},F0e=function(t,n,r){return wm(t)?Object.keys(t).reduce(function(s,a){var i=!wm(n)||!jP(t[a],n[a]);return r.includes(a)?(i&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),s):i?lh(lh({},s||{}),{},D0e({},a,t[a])):s},null):null},U0e="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",uZ=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U0e;if(t===null||gut(t))return t;throw new Error(n)},B0e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U0e;if(hut(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(s){return uZ(s,n)})};var r=uZ(t,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},V0e=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"3.1.0"}),t.registerAppInfo({name:"react-stripe-js",version:"3.1.0",url:"https://stripe.com/docs/stripe-js/react"}))},k3=I.createContext(null);k3.displayName="ElementsContext";var $0e=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},yut=function(t){var n=t.stripe,r=t.options,s=t.children,a=I.useMemo(function(){return B0e(n)},[n]),i=I.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),l=oE(i,2),c=l[0],u=l[1];I.useEffect(function(){var p=!0,h=function(y){u(function(v){return v.stripe?v:{stripe:y,elements:y.elements(r)}})};return a.tag==="async"&&!c.stripe?a.stripePromise.then(function(g){g&&p&&h(g)}):a.tag==="sync"&&!c.stripe&&h(a.stripe),function(){p=!1}},[a,c,r]);var d=y1(n);I.useEffect(function(){d!==null&&d!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[d,n]);var m=y1(r);return I.useEffect(function(){if(c.elements){var p=F0e(r,m,["clientSecret","fonts"]);p&&c.elements.update(p)}},[r,m,c.elements]),I.useEffect(function(){V0e(c.stripe)},[c.stripe]),I.createElement(k3.Provider,{value:c},s)};yut.propTypes={stripe:Le.any,options:Le.object};var vut=function(t){var n=I.useContext(k3);return $0e(n,t)},qen=function(){var t=vut("calls useElements()"),n=t.elements;return n};Le.func.isRequired;var xut=["on","session"],T3=I.createContext(null);T3.displayName="CheckoutSdkContext";var W0e=function(t,n){if(!t)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CheckoutProvider> provider."));return t},PU=I.createContext(null);PU.displayName="CheckoutContext";var but=function(t,n){if(!t)return null;t.on,t.session;var r=uut(t,xut);return n?lh(lh({},r),n):lh(lh({},r),t.session())},_ut="Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",wut=function(t){var n=t.stripe,r=t.options,s=t.children,a=I.useMemo(function(){return B0e(n,_ut)},[n]),i=I.useState(null),l=oE(i,2),c=l[0],u=l[1],d=I.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,checkoutSdk:null}}),m=oE(d,2),p=m[0],h=m[1],g=function(w,C){h(function(S){return S.stripe&&S.checkoutSdk?S:{stripe:w,checkoutSdk:C}})},y=I.useRef(!1);I.useEffect(function(){var _=!0;return a.tag==="async"&&!p.stripe?a.stripePromise.then(function(w){w&&_&&!y.current&&(y.current=!0,w.initCheckout(r).then(function(C){C&&(g(w,C),C.on("change",u))}))}):a.tag==="sync"&&a.stripe&&!y.current&&(y.current=!0,a.stripe.initCheckout(r).then(function(w){w&&(g(a.stripe,w),w.on("change",u))})),function(){_=!1}},[a,p,r,u]);var v=y1(n);I.useEffect(function(){v!==null&&v!==n&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[v,n]);var x=y1(r);I.useEffect(function(){var _,w;if(p.checkoutSdk){r.clientSecret&&!wm(x)&&!jP(r.clientSecret,x.clientSecret)&&console.warn("Unsupported prop change: options.clientSecret is not a mutable property.");var C=x==null||(_=x.elementsOptions)===null||_===void 0?void 0:_.appearance,S=r==null||(w=r.elementsOptions)===null||w===void 0?void 0:w.appearance;S&&!jP(S,C)&&p.checkoutSdk.changeAppearance(S)}},[r,x,p.checkoutSdk]),I.useEffect(function(){V0e(p.stripe)},[p.stripe]);var b=I.useMemo(function(){return but(p.checkoutSdk,c)},[p.checkoutSdk,c]);return p.checkoutSdk?I.createElement(T3.Provider,{value:p},I.createElement(PU.Provider,{value:b},s)):null};wut.propTypes={stripe:Le.any,options:Le.shape({clientSecret:Le.string.isRequired,elementsOptions:Le.object}).isRequired};var Cut=function(t){var n=I.useContext(T3);return W0e(n,t)},AP=function(t){var n=I.useContext(T3),r=I.useContext(k3);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n?W0e(n,t):$0e(r,t)},Ken=function(){Cut("calls useCheckout()");var t=I.useContext(PU);if(!t)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return t},Sut=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Jr=function(t,n){var r="".concat(Sut(t),"Element"),s=function(c){var u=c.id,d=c.className,m=c.options,p=m===void 0?{}:m,h=c.onBlur,g=c.onFocus,y=c.onReady,v=c.onChange,x=c.onEscape,b=c.onClick,_=c.onLoadError,w=c.onLoaderStart,C=c.onNetworksChange,S=c.onConfirm,E=c.onCancel,M=c.onShippingAddressChange,k=c.onShippingRateChange,A=AP("mounts <".concat(r,">")),R="elements"in A?A.elements:null,O="checkoutSdk"in A?A.checkoutSdk:null,L=I.useState(null),P=oE(L,2),N=P[0],T=P[1],j=I.useRef(null),F=I.useRef(null);go(N,"blur",h),go(N,"focus",g),go(N,"escape",x),go(N,"click",b),go(N,"loaderror",_),go(N,"loaderstart",w),go(N,"networkschange",C),go(N,"confirm",S),go(N,"cancel",E),go(N,"shippingaddresschange",M),go(N,"shippingratechange",k),go(N,"change",v);var U;y&&(t==="expressCheckout"?U=y:U=function(){y(N)}),go(N,"ready",U),I.useLayoutEffect(function(){if(j.current===null&&F.current!==null&&(R||O)){var $=null;O?$=O.createElement(t,p):R&&($=R.create(t,p)),j.current=$,T($),$&&$.mount(F.current)}},[R,O,p]);var V=y1(p);return I.useEffect(function(){if(j.current){var $=F0e(p,V,["paymentRequest"]);$&&"update"in j.current&&j.current.update($)}},[p,V]),I.useLayoutEffect(function(){return function(){if(j.current&&typeof j.current.destroy=="function")try{j.current.destroy(),j.current=null}catch{}}},[]),I.createElement("div",{id:u,className:d,ref:F})},a=function(c){AP("mounts <".concat(r,">"));var u=c.id,d=c.className;return I.createElement("div",{id:u,className:d})},i=n?a:s;return i.propTypes={id:Le.string,className:Le.string,onChange:Le.func,onBlur:Le.func,onFocus:Le.func,onReady:Le.func,onEscape:Le.func,onClick:Le.func,onLoadError:Le.func,onLoaderStart:Le.func,onNetworksChange:Le.func,onConfirm:Le.func,onCancel:Le.func,onShippingAddressChange:Le.func,onShippingRateChange:Le.func,options:Le.object},i.displayName=r,i.__elementType=t,i},es=typeof window>"u",Eut=I.createContext(null);Eut.displayName="EmbeddedCheckoutProviderContext";var Yen=function(){var t=AP("calls useStripe()"),n=t.stripe;return n};Jr("auBankAccount",es);Jr("card",es);Jr("cardNumber",es);Jr("cardExpiry",es);Jr("cardCvc",es);Jr("fpxBank",es);Jr("iban",es);Jr("idealBank",es);Jr("p24Bank",es);Jr("epsBank",es);var Qen=Jr("payment",es),Xen=Jr("expressCheckout",es);Jr("currencySelector",es);Jr("paymentRequestButton",es);var Zen=Jr("linkAuthentication",es),Jen=Jr("address",es);Jr("shippingAddress",es);Jr("paymentMethodMessaging",es);Jr("affirmMessage",es);Jr("afterpayClearpayMessage",es);var H0e="https://js.stripe.com/v3",Mut=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var kut=function(){for(var t=document.querySelectorAll('script[src^="'.concat(H0e,'"]')),n=0;n<t.length;n++){var r=t[n];if(Mut.test(r.src))return r}return null},dZ=function(t){var n="",r=document.createElement("script");r.src="".concat(H0e).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},Tut=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"5.5.0",startTime:n})},W0=null,uC=null,dC=null,Nut=function(t){return function(){t(new Error("Failed to load Stripe.js"))}},jut=function(t,n){return function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}},Aut=function(t){return W0!==null?W0:(W0=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var s=kut();if(!(s&&t)){if(!s)s=dZ(t);else if(s&&dC!==null&&uC!==null){var a;s.removeEventListener("load",dC),s.removeEventListener("error",uC),(a=s.parentNode)===null||a===void 0||a.removeChild(s),s=dZ(t)}}dC=jut(n,r),uC=Nut(r),s.addEventListener("load",dC),s.addEventListener("error",uC)}catch(i){r(i);return}}),W0.catch(function(n){return W0=null,Promise.reject(n)}))},Iut=function(t,n,r){if(t===null)return null;var s=t.apply(void 0,n);return Tut(s,r),s},H0,z0e=!1,G0e=function(){return H0||(H0=Aut(null).catch(function(t){return H0=null,Promise.reject(t)}),H0)};Promise.resolve().then(function(){return G0e()}).catch(function(e){z0e||console.warn(e)});var etn=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];z0e=!0;var s=Date.now();return G0e().then(function(a){return Iut(a,n,s)})};const ttn=ot({pro:{defaultMessage:"Enterprise Pro",id:"h/OVAC8xF3"},max:{defaultMessage:"Enterprise Max",id:"tfsuL8YexA"}}),Rut=[ee({defaultMessage:"Unlimited access to Labs, Research, and Comet Max Assistant",id:"cxCDLl3cHO"}),ee({defaultMessage:"Org-wide access to premium security features like data retention settings and usage analytics",id:"YgWIReWPJc"}),ee({defaultMessage:"10x more file storage",id:"LgZECYLgEY"}),ee({defaultMessage:"Access to our full model suite including o3-pro and Opus 4.1 Thinking",id:"0qp226NKVJ"}),ee({defaultMessage:"Enhanced video generation",id:"y2H8HPGbes"}),ee({defaultMessage:"Early access to new product features",id:"nFcQ0Wipw7"})],q0e={pro:"pro",max:"max"},ntn=e=>Object.keys(q0e).includes(e),rtn=(e,t)=>{const n=Object.keys(q0e),r=n.indexOf(e),s=n.indexOf(t);return r<s},Put=["enterprise_pro","enterprise_max"],stn=e=>Put.includes(e),Out={enterprise_pro:"pro",enterprise_max:"max"},atn=e=>Out[e],otn=o.jsx(pe,{defaultMessage:"Start for free, no credit card needed.",id:"uzjbT1FGfk"}),itn=o.jsx(pe,{defaultMessage:"Upgrade productivity and learning with additional access.",id:"PnQLpmbknU"}),ltn=o.jsx(pe,{defaultMessage:"Unlock the full capabilities of Perplexity at a discount after verifying educational status.",id:"8fdSFzTbg5"}),ctn=o.jsx(pe,{defaultMessage:"Unlock Perplexity's full capabilities with early access to new products.",id:"XvAk63xTH/"}),utn=o.jsx(pe,{defaultMessage:"Unlock the full capabilities of Perplexity for your team and enjoy new perks as they are added.",id:"fyHXg6ONTT"}),dtn=[o.jsx(pe,{defaultMessage:"Limited file uploads and image generation",id:"Yajq3Us4wf"},"ei4z2Aep9t"),o.jsx(pe,{defaultMessage:"Limited access to Perplexity Research",id:"rxiI86annI"},"Q4n6qAgIjm"),o.jsx(pe,{defaultMessage:"Limited access to advanced AI models",id:"Um2NQaGAN2"},"k+gSVpF51l"),o.jsx(pe,{defaultMessage:"Access to voice mode",id:"yzxI9mX7Ne"},"yzxI9mX7Ne")],ftn=[o.jsx(pe,{defaultMessage:"10x as many citations in answers",id:"D0fULpN8/D"},"ei4z2Aep9t"),o.jsx(pe,{defaultMessage:"Access to Perplexity Labs",id:"umi6FCpljx"},"LicOGayBYr"),o.jsx(pe,{defaultMessage:"Unlimited file and photo uploads",id:"9mQ544QaNG"},"9mQ544QaNG"),o.jsx(pe,{defaultMessage:"Extended access to Perplexity Research",id:"N+s4bfYMOJ"},"+tC8PdouYw"),o.jsx(pe,{defaultMessage:"Extended access to image generation",id:"YLNO5T8j3R"},"YLNO5T8j3R"),o.jsx(pe,{defaultMessage:"Limited access to video generation",id:"cuh0Xv/sI7"},"cuh0Xv/sI7"),o.jsx(pe,{defaultMessage:"One subscription for all the latest AI models including GPT-5 and Claude Sonnet 4",id:"PjThV/+cRD"},"PjThV/+cRD")],K0e=[o.jsx(pe,{defaultMessage:"Unlock free Pro",id:"ce/kjT07p9"},"unlock-free-pro"),o.jsx(pe,{defaultMessage:"Access to Study Mode for interactive flashcards and quizzes",id:"wvFgbv8SQM"},"study-mode"),o.jsx(pe,{defaultMessage:"10x as many citations in answers",id:"D0fULpN8/D"},"ei4z2Aep9t"),o.jsx(pe,{defaultMessage:"Access to Perplexity Labs",id:"umi6FCpljx"},"LicOGayBYr"),o.jsx(pe,{defaultMessage:"Unlimited file and photo uploads",id:"9mQ544QaNG"},"9mQ544QaNG"),o.jsx(pe,{defaultMessage:"Extended access to Perplexity Research",id:"N+s4bfYMOJ"},"+tC8PdouYw"),o.jsx(pe,{defaultMessage:"One subscription for all the latest AI models including GPT-5 and Claude Sonnet 4",id:"PjThV/+cRD"},"PjThV/+cRD"),o.jsx(pe,{defaultMessage:"{credits} in API credits",id:"RDoR9eeHom",values:{credits:o.jsx(XI,{value:5,style:"currency",currency:"USD"})}},"RDoR9eeHom")],mtn=()=>K0e,ptn=K0e,htn=[o.jsx(pe,{defaultMessage:"Everything in Pro",id:"EQO1QOs7ln"},"EQO1QOs7ln"),o.jsx(pe,{defaultMessage:"Early access to our newest products",id:"WM5nzt3hTc"},"ju0j9rjkOw"),o.jsx(pe,{defaultMessage:"Unlimited access to Perplexity Labs",id:"Vc+NmvcKpa"},"8jDdpmfeqS"),o.jsx(pe,{defaultMessage:"Unlimited access to Perplexity Research",id:"+tC8PdouYw"},"8jDdpmfeqS"),o.jsx(pe,{defaultMessage:"Use advanced AI models like OpenAI o3-pro and Anthropic Claude Opus 4.1",id:"RrdqLnZKqo"},"RrdqLnZKqo"),o.jsx(pe,{defaultMessage:"Enhanced access to video generation",id:"VSNs3zFEjy"},"VSNs3zFEjy"),o.jsx(pe,{defaultMessage:"Priority support",id:"3sSrKzxPrc"},"3sSrKzxPrc")],gtn=[o.jsx(pe,{defaultMessage:"Unlimited Pro searches",id:"isnJxc1XxM"},"UnlimitedProSearches"),o.jsx(pe,{defaultMessage:"Unlimited uploads for files and images",id:"y5R/L7qsi/"},"UnlimitedUploads"),o.jsx(pe,{defaultMessage:"Unlimited collaborators in Spaces",id:"EZFr73mN/d"},"UnlimitedCollaborators"),o.jsx(pe,{defaultMessage:"Connect Google Drive, Sharepoint, Dropbox, OneDrive, and Box",id:"ALW0u9e/Ps"},"ConnectCloudServices"),o.jsx(pe,{defaultMessage:"Powered by the latest top AI models",id:"ZSiV9iYVeG"},"LatestAIModels"),o.jsx(pe,{defaultMessage:"Dedicated enterprise support",id:"6ojq3KOETz"},"DedicatedSupport"),o.jsx(pe,{defaultMessage:"Integrate with your identity provider",id:"NEWodUzDlf"},"IdentityProvider"),o.jsx(pe,{defaultMessage:"User permissioning",id:"oEuCJfg2fr"},"UserPermissioning"),o.jsx(pe,{defaultMessage:"SOC 2 Type II security compliance",id:"j84mT5pXG7"},"SOC2TypeII")],ytn=[o.jsx(pe,{defaultMessage:"Everything in Enterprise Pro",id:"agavcX8Joo"},"EverythingInEnterprisePro"),...Rut.map(e=>o.jsx(pe,{...e},e.id))],fZ="USD",Lut=({lineItems:e})=>{const{$t:t,formatNumber:n}=Z(),r=f.useMemo(()=>{const s=e;return[{title:ee({defaultMessage:"Payment method",id:"BVTni9A2ca"}),value:s.payment_method,separator:!0},{title:ee({defaultMessage:"Perplexity Max Subscription",id:"zmPIe7d+w+"}),value:s.new_product_price?Gp(s.new_product_price,n):""},{title:ee({defaultMessage:"Adjustment",id:"LaLTJRqloA"}),value:s.adjustment_price?Gp(s.adjustment_price,n):"",separator:!0},{title:ee({defaultMessage:"Subtotal",id:"L8seEcJFZ7"}),value:Gp(s.subtotal_price,n)},{title:ee({defaultMessage:"Taxes",id:"r+dgivP2Od"}),value:Gp(s.tax_price,n),separator:!0},{title:ee({defaultMessage:"Total due today",id:"MxAykvkF+r"}),value:Gp(s.total_due_today_price,n),color:"default",size:"small"}]},[e,n]);return o.jsx("ul",{className:"flex flex-col",children:r.map(s=>o.jsxs("li",{className:`flex items-center justify-between ${s.separator?"border-subtlest py-sm mb-sm border-b":"pb-sm"}`,children:[o.jsx(D,{variant:"tinyRegular",color:"light",children:t(s.title)}),o.jsx(D,{variant:s.size??"tinyRegular",color:s.color??"light",children:s.value})]},s.title.id))})};function Y0e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Y0e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Dut(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Y0e(e))&&(r&&(r+=" "),r+=t);return r}const mZ=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,pZ=Dut,Q0e=(e,t)=>n=>{var r;if(t?.variants==null)return pZ(e,n?.class,n?.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(u=>{const d=n?.[u],m=a?.[u];if(d===null)return null;const p=mZ(d)||mZ(m);return s[u][p]}),l=n&&Object.entries(n).reduce((u,d)=>{let[m,p]=d;return p===void 0||(u[m]=p),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:m,className:p,...h}=d;return Object.entries(h).every(g=>{let[y,v]=g;return Array.isArray(v)?v.includes({...a,...l}[y]):{...a,...l}[y]===v})?[...u,m,p]:u},[]);return pZ(e,i,c,n?.class,n?.className)};function hZ({ref:e,className:t,children:n,...r}){return o.jsx("button",{...r,ref:e,className:B("reset interactable",t),children:n})}const Fut={tiny:"xs",small:"sm",default:"base",large:"lg"};function jh({icon:e,size:t}){return o.jsx(ce,{icon:e,size:Fut[t]})}function X0e(e){const t=f.useRef(null),n=f.useMemo(()=>({getBoundingClientRect:()=>t.current?.getBoundingClientRect()??DOMRect.fromRect({}),addEventListener:(r,s,a)=>{t.current?.addEventListener(r,s,a)},removeEventListener:(r,s,a)=>{t.current?.removeEventListener(r,s,a)},contains:r=>t.current?.contains(r)??!1}),[]);return f.useImperativeHandle(e,()=>n,[n]),t}function Z0e(e){return zRe(e,["onFocus","onBlur","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onTouchStart","data-state"])}const IP=Q0e("flex select-none font-semimedium font-sans text-center items-center justify-center leading-loose whitespace-nowrap",{variants:{variant:{primary:"bg-super text-inverse",secondary:"text-quiet border border-solid border-subtler bg-base",tonal:"bg-subtle text-foreground",text:"text-foreground"},size:{large:"h-14 text-lg",default:"h-10 text-base",small:"h-8 text-sm",tiny:"h-6 text-xs"},disabled:{false:"cursor-pointer origin-center",true:"cursor-default opacity-50"},fullWidth:{true:"flex w-full",false:""},rounded:{true:"rounded-full aspect-square p-0",false:""}},compoundVariants:[{variant:["text"],disabled:!1,class:"hover:bg-subtle"},{variant:["primary"],disabled:!1,class:"hover:opacity-80"},{variant:["secondary"],disabled:!1,class:"hover:border-subtle hover:bg-subtler"},{variant:["tonal"],disabled:!1,class:"hover:bg-subtle"},{rounded:!1,size:"large",class:"px-6 rounded-xl"},{rounded:!1,size:"default",class:"px-4 rounded-lg"},{rounded:!1,size:"small",class:"px-3 rounded-lg"},{rounded:!1,size:"tiny",class:"px-2 rounded-md"}],defaultVariants:{variant:"primary",size:"default",disabled:!1,fullWidth:!1,rounded:!1}});function iE({ref:e,children:t,icon:n,"aria-label":r,variant:s="primary",size:a="default",disabled:i=!1,fullWidth:l=!1,onClick:c,leadingIcon:u,trailingIcon:d,rounded:m=!1,__dangerousHtmlProps:p={},...h}){const g=X0e(e),y=Z0e(h);return n?o.jsx(hZ,{ref:g,...y,disabled:i,className:IP({variant:s,size:a,disabled:i,fullWidth:!1,rounded:m}),onClick:c,"aria-label":r,...p,children:o.jsx(jh,{icon:n,size:a})}):o.jsxs(hZ,{ref:g,...y,disabled:i,className:IP({variant:s,size:a,disabled:i,fullWidth:l}),onClick:c,"aria-label":r,...p,children:[u&&o.jsx("div",{className:"mr-1",children:o.jsx(jh,{icon:u,size:a})}),o.jsx("span",{className:B({"pl-1":u,"pr-1":d}),children:t}),d&&o.jsx("div",{className:"ml-1",children:o.jsx(jh,{icon:d,size:a})})]})}const Uut=({reason:e})=>{const t=async()=>get({reason:e}),{data:n,isLoading:r}=We({queryKey:["get_user_previous_subscription"],queryFn:t});return f.useMemo(()=>({previousSubscriptionStatus:n?.previous_subscription_status??"none",previousSubscriptionSource:n?.previous_subscription_source??"none",isLoading:r}),[n?.previous_subscription_source,n?.previous_subscription_status,r])},But=({variant:e="secondary",fullWidth:t=!1,subscriptionSource:n})=>{const{$t:r}=Z(),s=n==="softbank",a=[{type:"default",text:r({defaultMessage:"SoftBank",id:"mz906WB9pc"}),href:"https://stn.mb.softbank.jp/G4H51",onClick:i=>{i.preventDefault(),window.open("https://stn.mb.softbank.jp/G4H51","_blank")}},{type:"default",text:r({defaultMessage:"Y!mobile",id:"waO5BNtbEl"}),href:"https://stn.mb.softbank.jp/h6C4p",onClick:i=>{i.preventDefault(),window.open("https://stn.mb.softbank.jp/h6C4p","_blank")}},{type:"default",text:r({defaultMessage:"LINEMO",id:"5EeaeTgd/I"}),href:"https://stn.mb.softbank.jp/22m5K",onClick:i=>{i.preventDefault(),window.open("https://stn.mb.softbank.jp/22m5K","_blank")}}];return o.jsx("div",{className:"flex items-center gap-2",children:s?o.jsx(Jt,{items:a,isMobileStyle:!1,placement:"bottom-start",children:o.jsx(iE,{size:"small",variant:e,fullWidth:t,trailingIcon:s8e,children:o.jsx(pe,{defaultMessage:"Manage carrier billing",id:"qt9JnrA7Lf"})})}):o.jsx(iE,{size:"small",variant:e,fullWidth:t,onClick:i=>{i.preventDefault(),window.open("https://stn.mb.softbank.jp/b6O6d","_blank")},trailingIcon:ao,children:o.jsx(pe,{defaultMessage:"Set up carrier billing",id:"KvLeD+r7rf"})})})},Vut="https://billing.stripe.com/p/login/test_7sIdSS7ioeNSdpe9AA",$ut="https://billing.stripe.com/p/login/6oEeXaewnb3z1facMM",Wut="https://perplexity.sng.link/A6awk/pxdx?_ios_dl=home&_android_dl=singular-perplexity%3A%2F%2Fhome&_smtype=3";function Hut(e){switch(e){case"ios":return"https://www.apple.com/app-store/";case"android":return"https://play.google.com/store";default:Gt(e)}}const J0e=({text:e,hasPreviousSub:t=!1,origin:n,variant:r="tonal",fullWidth:s=!1})=>{const a="sub-modal-button",{$t:i,locale:l}=Z(),c=gt(),{hasAccessToProFeatures:u,subscriptionSource:d}=_t(),{revenuecatStatus:m,stripeStatus:p}=ma({reason:a}),{previousSubscriptionSource:h}=Uut({reason:a}),{env:{isProduction:g,isBeta:y}}=At(),{session:v}=Et(),x=Ho(),{openModal:b}=xt(),_=f.useCallback(async()=>{if(d==="incentive"){b("incentiveProModal",{origin:n});return}const S=d==="ios"||d==="android",E=h==="ios"||h==="android";if(S||E){E&&h!==d?c.push(Hut(h)):c.push(Wut);return}if(d==="braintree"){n===Oe.UPGRADE_MODAL?c.push("/max/payment"):b("braintreeSubscriptionModal",{origin:n});return}const k=await TU({reason:"sub-modal-button"});k?c.push(k):c.push(g||y?$ut:Vut)},[d,h,c,g,y,l,b,n]),w=u||p==="past_due"||t===!0,C=f.useMemo(()=>d==="ios"?i({defaultMessage:"Manage in App Store",id:"3iCRcP8mV0"}):d==="android"?i({defaultMessage:"Manage in Google Play",id:"tiFovnryYO"}):d==="braintree"?n===Oe.UPGRADE_MODAL?i({defaultMessage:"Continue to payment",id:"+g+0OKqjZc"}):i({defaultMessage:"Manage subscription",id:"Oj9Phcvy9M"}):t?i({defaultMessage:"Manage plan",id:"88XpVMnmFe"}):m!=="none"||["ios","android"].includes(h)?i({defaultMessage:"Mobile subscription",id:"EttF2eTvlk"}):i(d==="softbank"?{defaultMessage:"SoftBank, Y!mobile, and LINEMO Customers",id:"i1WJntbsih"}:{defaultMessage:"Manage",id:"0AzlrbMWV9"}),[d,t,m,h,i,n]);return o.jsx("div",{children:w?d==="softbank"?o.jsx(But,{fullWidth:s,variant:r,subscriptionSource:d}):o.jsx(iE,{fullWidth:s,size:"small",onClick:_,variant:r,trailingIcon:ao,children:C}):o.jsx(iE,{size:"small",onClick:()=>{v?x({origin:n}):b("loginModal",{origin:Oe.TRY_PRO,pitchMessage:{title:i({defaultMessage:"Sign in to unlock {pro}",id:"HsM7RilrD6"},{pro:"Pro"})}})},variant:r,leadingIcon:ao,children:e??o.jsx(pe,{defaultMessage:"Learn more",id:"TdTXXf940t"})})})},zut="https://billing.stripe.com/p/login/test_7sIdSS7ioeNSdpe9AA",Gut="https://billing.stripe.com/p/login/6oEeXaewnb3z1facMM",qut=()=>{const e=gt(),{env:{isProduction:t,isBeta:n}}=At(),r=f.useCallback(async({locale:s,reason:a})=>{const i=await TU({reason:a});i?e.push(i):e.push(t||n?Gut:zut)},[e,t,n]);return f.useMemo(()=>({navigateToCustomerPortal:r}),[r])};var _a;(function(e){e.UNSUPPORTED="unsupported",e.MISSING_PAYMENT_METHOD="missingPaymentMethod",e.PAYMENT_FAILED="paymentFailed",e.ANDROID="android",e.IOS="ios",e.UPGRADE_TO_CONTINUE="upgradeToContinue",e.GENERIC_PAYMENT_ERROR="genericPaymentError"})(_a||(_a={}));function Kut({subscriptionSource:e,isMissingPaymentMethod:t,paymentFailed:n,upgradeError:r}){return e==="android"?_a.ANDROID:e==="ios"?_a.IOS:t?_a.MISSING_PAYMENT_METHOD:n?_a.PAYMENT_FAILED:r?_a.GENERIC_PAYMENT_ERROR:_a.UPGRADE_TO_CONTINUE}function Yut(e){switch(e){case _a.UNSUPPORTED:return ee({defaultMessage:"Max subscriptions are not supported by carrier billing.",id:"Ux4ivT++jB"});case _a.MISSING_PAYMENT_METHOD:return ee({defaultMessage:"Please add a payment method to upgrade to Max.",id:"W6HVT1BPC8"});case _a.PAYMENT_FAILED:return ee({defaultMessage:"Payment failed. Please update payment to continue.",id:"b0rdlbJ3AI"});case _a.ANDROID:return ee({defaultMessage:"You subscribed on the Google Play Store. Upgrade your subscription via settings on the Android app.",id:"97MQ1Swe7/"});case _a.IOS:return ee({defaultMessage:"You subscribed on the App Store. Upgrade your subscription via settings on the iOS app.",id:"JGkQSWrZEy"});case _a.UPGRADE_TO_CONTINUE:return ee({defaultMessage:"You will be charged now and immediately get access to Max.",id:"9x1isMahOJ"});case _a.GENERIC_PAYMENT_ERROR:return ee({defaultMessage:"Something went wrong. Please continue to Stripe and complete your payment.",id:"xdKfV2F++4"});default:Gt(e)}}const gZ=e=>{if(e){if(e instanceof Ce&&"details"in e){const t=e.details;if(t?.errorDetail&&typeof t.errorDetail=="object"&&"error_code"in t.errorDetail)return t.errorDetail.error_code}return e.message}},yZ=6,Qut=()=>o.jsx("ul",{className:"flex flex-col",children:Array.from({length:yZ}).map((e,t)=>{const n=t%2===0;return o.jsx("li",{className:B({"border-subtlest py-sm mb-sm border-b":n,"pb-sm":!n}),children:o.jsx(yn,{children:o.jsx(H,{variant:"subtler",className:B("h-4 w-full rounded",{"py-0.5":t===yZ-1})})})},t)})}),Xut=({isOpen:e,onClose:t})=>{const n=Z(),{session:r}=Et(),s=r?.user?.subscription_source,a=s==="stripe",{data:i,isLoading:l,status:c,error:u}=y0e({reason:"upgrade-modal",enabled:a}),{data:d,isLoading:m}=kP({currency:fZ,reason:"upgrade-modal",subscriptionTier:"max"}),{data:p,isLoading:h}=kP({currency:fZ,reason:"upgrade-modal",subscriptionTier:"pro"}),{formatNumber:g,locale:y}=Z(),{update:v}=Et(),{currentOpenModals:x}=xt(),{trackEvent:b}=Ne(),{navigateToCustomerPortal:_}=qut(),w=f.useMemo(()=>d?.prices&&d.prices.find(U=>U.tier==="monthly")||null,[d]),C=f.useMemo(()=>p?.prices&&p.prices.find(U=>U.tier==="monthly")||null,[p]),S=f.useMemo(()=>c==="error"?gZ(u):null,[c,u]),E=f.useCallback(async()=>{await EF({reason:"upgrade-to-max-modal"}),await v(),t(),b("subscription upgrade success"),x.length>0&&t(),pg({upgrade_max:"success"})},[t,x,v,b]),M=x0e({reason:"upgrade-modal"},{onSuccess:E}),k=S==="missing_payment_method",A=S==="stripe_upgrade_payment_error";f.useEffect(()=>{e&&b("subscription upgrade modal rendered")},[e,b]);const R=Kut({subscriptionSource:s,isMissingPaymentMethod:k,paymentFailed:A,upgradeError:gZ(M?.error)}),O=f.useCallback(async()=>{await _({locale:y,reason:"upgrade-modal-add-payment"})},[_,y]),L=!!i?.payment_method,P=k||A||!!M.error,N=f.useMemo(()=>!a||M.isPending||!L||l||!!M.error,[a,M.isPending,L,l,M.error]),T=f.useCallback(async()=>{M.isPending||await M.mutateAsync()},[M]),j=f.useMemo(()=>k?o.jsx(pe,{defaultMessage:"Add payment method",id:"+EIsonKmCI"}):M.error?o.jsx(pe,{defaultMessage:"Continue to Stripe",id:"W2hJP+kQGf"}):o.jsx(pe,{defaultMessage:"Update payment method",id:"iIM9E+ynde"}),[k,M.error]);return o.jsx(en,{isOpen:e,onClose:t,renderCloseButton:!1,headerClassname:"hidden",modalClassname:"!w-[416px] !min-w-[416px] !max-w-[416px] !p-0",modalContentClassname:"!p-0",noPadding:!0,children:o.jsxs(H,{className:"p-ml",children:[o.jsx(D,{variant:"baseSemi",children:o.jsx(pe,{defaultMessage:"Confirm changes",id:"AnPtOvcf8f"})}),o.jsx(rE,{planName:{id:"R/eOkjWqNU",defaultMessage:"Pro"},price:c==="error"||!a?C:i?.old_product_price,formatNumber:g,billingInterval:c==="error"||!a?"monthly":i?.old_product_interval}),o.jsx(H,{children:o.jsxs(D,{variant:"tinyRegular",color:"light",className:"flex items-center justify-center gap-1",children:[o.jsx("div",{className:"border-subtlest flex-1 border-t"}),o.jsx(pe,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"}),o.jsx("div",{className:"border-subtlest flex-1 border-t"})]})}),o.jsx(rE,{planName:{id:"kkjl2vQekD",defaultMessage:"Max"},price:k||!a?w:i?.new_product_price,formatNumber:g,billingInterval:k||!a?"monthly":i?.new_product_interval,isHighlighted:!0,className:"mb-ml"}),l?o.jsx(Qut,{}):i&&o.jsx(Lut,{lineItems:i}),o.jsxs(H,{variant:"subtler",className:"px-md py-sm mt-ml gap-sm flex flex-col rounded-md",children:[o.jsx(D,{variant:"small",color:"light",children:o.jsx(pe,{...Yut(R)})}),!a&&o.jsx(J0e,{origin:Oe.UPGRADE_MODAL,variant:"primary",fullWidth:!0}),P&&o.jsx(he,{size:"small",fullWidth:!0,variant:"primary",text:j,onClick:O})]}),o.jsxs(H,{className:"gap-sm mt-ml flex justify-end",children:[o.jsx(Te,{text:n.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t}),o.jsx(he,{variant:"primary",text:n.formatMessage({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),isLoading:M.isPending,disabled:N,onClick:T})]})]})})};var Zut={};const ts=I.memo(()=>o.jsx("div",{className:"bg-backdrop/70 fixed inset-0 z-[999] flex items-center justify-center backdrop-blur-sm",children:o.jsx($r,{})}));ts.displayName="ModalLoader";const eve=I.memo(()=>o.jsx("p",{children:"An error has occurred"}));eve.displayName="ErrorFallback";const Jut=ye(async()=>{const{LocationPermissionModal:e}=await K(async()=>{const{LocationPermissionModal:t}=await Promise.resolve().then(()=>JUt);return{LocationPermissionModal:t}},void 0);return{default:e}},{loading:()=>o.jsx(ts,{})}),vZ=ye(async()=>{const{FileUploadModal:e}=await K(async()=>{const{FileUploadModal:t}=await import("./FileUploadModal-CTeo0dh0.js");return{FileUploadModal:t}},__vite__mapDeps([9,3,1,4,10,11,5,6]));return{default:e}},{loading:()=>o.jsx(ts,{})}),edt=ye(async()=>{const{CometDownloadInstructionsModal:e}=await K(async()=>{const{CometDownloadInstructionsModal:t}=await import("./CometDownloadInstructionsModal-CTcft6S-.js");return{CometDownloadInstructionsModal:t}},__vite__mapDeps([12,3,1,4,5,6]));return{default:e}},{loading:()=>o.jsx(ts,{})}),xZ=ye(async()=>{const{CollectionCreateEditModal:e}=await K(async()=>{const{CollectionCreateEditModal:t}=await import("./CollectionCreateEditModal-Dk4KSM0X.js");return{CollectionCreateEditModal:t}},__vite__mapDeps([13,3,1,4,5,14,6]));return{default:e}},{loading:()=>o.jsx(ts,{})}),tdt=ye(async()=>{const{CollectionSelectModal:e}=await K(async()=>{const{CollectionSelectModal:t}=await import("./CollectionSelectModal-BwBjpA7t.js");return{CollectionSelectModal:t}},__vite__mapDeps([15,3,1,4,14,5,6]));return{default:e}},{loading:()=>o.jsx(ts,{})}),ndt=ye(async()=>{const{OnboardingModal:e}=await K(async()=>{const{OnboardingModal:t}=await import("./OnboardingModal-OE_Lq1D5.js").then(n=>n.a);return{OnboardingModal:t}},__vite__mapDeps([16,3,1,4,6,5,17,18,19,20,21,22,23,24,25,26]));return{default:e}},{loading:()=>o.jsx(ts,{})}),rdt=ye(async()=>{const{PurchaseConfirmationToast:e}=await K(async()=>{const{PurchaseConfirmationToast:t}=await import("./PurchaseConfirmationToast-DWxyOw4C.js");return{PurchaseConfirmationToast:t}},__vite__mapDeps([27,3,1,4,5,6,28]));return{default:e}},{loading:()=>o.jsx(ts,{})}),sdt=ye(async()=>{const{ThreadLossAversionModal:e}=await K(async()=>{const{ThreadLossAversionModal:t}=await Promise.resolve().then(()=>Qdt);return{ThreadLossAversionModal:t}},void 0);return{default:e}},{loading:()=>o.jsx(ts,{})}),adt=ye(async()=>{const{CompanyDataPrivacyModal:e}=await K(async()=>{const{CompanyDataPrivacyModal:t}=await import("./CompanyDataPrivacyModal-C4d78CBj.js");return{CompanyDataPrivacyModal:t}},__vite__mapDeps([29,3,1,4,6,5]));return{default:e}},{loading:()=>o.jsx(ts,{})}),odt=ye(async()=>{const{SpaceVideoModal:e}=await K(async()=>{const{SpaceVideoModal:t}=await import("./SpaceVideoModal-BhJwwgCx.js");return{SpaceVideoModal:t}},__vite__mapDeps([30,3,1,4,6,5]));return{default:e}},{loading:()=>o.jsx(ts,{})}),idt=ye(async()=>{const{PricingTableModal:e}=await K(async()=>{const{PricingTableModal:t}=await import("./PricingTableModal-Bu7sWvLp.js");return{PricingTableModal:t}},__vite__mapDeps([31,3,1,6,32,4,20,21,5,23]));return{default:e}}),ldt=ye(async()=>{const{MapModal:e}=await K(async()=>{const{MapModal:t}=await import("./MapModal-C3DXUNwI.js");return{MapModal:t}},__vite__mapDeps([33,3,1,34,6,4,5,35]));return{default:e}}),cdt=ye(()=>K(()=>import("./InputPaymentModal-DdLHZRHv.js"),__vite__mapDeps([36,3,1,6,37,4,5]))),udt=ye(()=>K(()=>import("./ShoppingPaymentModal-BN3JyxO6.js").then(e=>e.b),__vite__mapDeps([38,3,1,4,39,37,40,5,41,42,6,43,44,45,46,47,28])),{loading:()=>o.jsx(ts,{})}),ddt=ye(async()=>{const{ShoppingOnboardingModal:e}=await K(async()=>{const{ShoppingOnboardingModal:t}=await import("./ShoppingOnboardingModal-BBKD9BTh.js");return{ShoppingOnboardingModal:t}},__vite__mapDeps([48,3,1,4,47,5,38,39,37,40,41,42,6,43,44,45,46,28]));return{default:e}},{loading:()=>o.jsx(ts,{})}),fdt=ye(async()=>{const{PurchaseDetailsModal:e}=await K(async()=>{const{PurchaseDetailsModal:t}=await import("./PurchaseDetailsModal-DiiNIQaL.js");return{PurchaseDetailsModal:t}},__vite__mapDeps([49,3,1,4,47,5,50,6]));return{default:e}},{loading:()=>o.jsx(ts,{})}),mdt=ye(async()=>{const{ReservationDetailsModal:e}=await K(async()=>{const{ReservationDetailsModal:t}=await import("./ReservationDetailsModal-BIzARzZb.js");return{ReservationDetailsModal:t}},__vite__mapDeps([51,3,1,4,52,53,5,54,6]));return{default:e}},{loading:()=>o.jsx(ts,{})}),pdt=ye(async()=>{const{SpaceSettingsModal:e}=await K(async()=>{const{SpaceSettingsModal:t}=await import("./SpaceSettingsModal-CZSD5uR9.js");return{SpaceSettingsModal:t}},__vite__mapDeps([55,3,1,4,6,5]));return{default:e}},{loading:()=>o.jsx(ts,{})}),hdt=ye(async()=>{const{UsernameModal:e}=await K(async()=>{const{UsernameModal:t}=await import("./UsernameModal-D9J-8aI_.js");return{UsernameModal:t}},__vite__mapDeps([56,3,1,4,6,5]));return{default:e}}),gdt=ye(async()=>{const{FullNameModal:e}=await K(async()=>{const{FullNameModal:t}=await import("./FullNameModal-CeXsJ436.js");return{FullNameModal:t}},__vite__mapDeps([57,3,1,4,6,5]));return{default:e}}),ydt=ye(async()=>{const{KeyboardShortcutEditorModal:e}=await K(async()=>{const{KeyboardShortcutEditorModal:t}=await import("./KeyboardShortcutEditorModal-BNSIIWaJ.js");return{KeyboardShortcutEditorModal:t}},__vite__mapDeps([58,3,1,4,6,5]));return{default:e}},{loading:()=>o.jsx(ts,{})}),vdt=ye(async()=>{const{VoiceToVoiceModal:e}=await K(async()=>{const{VoiceToVoiceModal:t}=await import("./VoiceToVoiceModal-D06NJJGX.js");return{VoiceToVoiceModal:t}},__vite__mapDeps([59,3,1,60,4,6,5]));return{default:e}},{loading:()=>o.jsx(vU,{})}),xdt=ye(async()=>{const{SearchStepsAssetsModal:e}=await K(async()=>{const{SearchStepsAssetsModal:t}=await import("./SearchStepsAssetsModal-B88ufDUh.js");return{SearchStepsAssetsModal:t}},__vite__mapDeps([61,3,1,4,62,63,17,5,6,18,64,65]));return{default:e}}),bdt=ye(async()=>{const{MemoryListModal:e}=await K(async()=>{const{MemoryListModal:t}=await import("./MemoryListModal-DyYThlz0.js");return{MemoryListModal:t}},__vite__mapDeps([66,3,1,4,67,5,6]));return{default:e}}),_dt=ye(async()=>{const{MemoryDetailModal:e}=await K(async()=>{const{MemoryDetailModal:t}=await import("./MemoryDetailModal-Dlj9Z5c0.js");return{MemoryDetailModal:t}},__vite__mapDeps([68,3,1,4,6,5]));return{default:e}}),wdt=ye(async()=>{const{HotelRoomDetailsModal:e}=await K(async()=>{const{HotelRoomDetailsModal:t}=await import("./HotelRoomDetailsModal-3sNiqqx4.js");return{HotelRoomDetailsModal:t}},__vite__mapDeps([69,3,1,4,70,71,6,5]));return{default:e}},{loading:()=>o.jsx(ts,{})}),Cdt=ye(async()=>{const{PaymentModal:e}=await K(async()=>{const{PaymentModal:t}=await import("./PaymentModal-9pcXmDH1.js");return{PaymentModal:t}},__vite__mapDeps([72,3,1,4,21,6,5,42,37]));return{default:e}},{loading:()=>o.jsx(ts,{})}),Sdt=ye(async()=>{const{FreeTrialModal:e}=await K(async()=>{const{FreeTrialModal:t}=await import("./FreeTrialModal-B4pWUjsf.js");return{FreeTrialModal:t}},__vite__mapDeps([32,3,1,4,20,21,6,5]));return{default:e}}),Edt=ye(async()=>{const{ProReferralModal:e}=await K(async()=>{const{ProReferralModal:t}=await import("./ProReferralModal-C_juUQRd.js");return{ProReferralModal:t}},__vite__mapDeps([73,3,1,4,5,6]));return{default:e}}),Mdt=ye(async()=>{const{MeetingDefaultsModal:e}=await K(async()=>{const{MeetingDefaultsModal:t}=await import("./MeetingDefaultsModal-DsB-P81Q.js");return{MeetingDefaultsModal:t}},__vite__mapDeps([74,3,1,4,5,6]));return{default:e}}),kdt=ye(async()=>{const{AvailabilityModal:e}=await K(async()=>{const{AvailabilityModal:t}=await import("./AvailabilityModal-CUegg-Ps.js");return{AvailabilityModal:t}},__vite__mapDeps([75,3,1,4,5,76,6]));return{default:e}}),Tdt=ye(async()=>{const{ProMessageModal:e}=await K(async()=>{const{ProMessageModal:t}=await import("./ProMessageModal-CzfyiMC9.js");return{ProMessageModal:t}},__vite__mapDeps([77,3,1,5,6,4]));return{default:e}}),Ndt=ye(async()=>{const{MemorySearchHistoryIntroModal:e}=await K(async()=>{const{MemorySearchHistoryIntroModal:t}=await import("./MemorySearchHistoryIntroModal-CNQdA6FM.js");return{MemorySearchHistoryIntroModal:t}},__vite__mapDeps([78,3,1,4,6,5]));return{default:e}}),jdt=ye(async()=>K(()=>import("./SubSuccessModal-CZzRq2oD.js"),__vite__mapDeps([79,3,1,4,80,5,6]))),Adt=ye(async()=>K(()=>import("./ReferralErrorModal-DCpyaTFz.js"),__vite__mapDeps([81,3,1,4,6,5]))),Idt=ye(async()=>K(()=>import("./ReferralSuccessModal-3hSUygZ_.js"),__vite__mapDeps([82,3,1,4,26,6,5]))),Rdt=ye(async()=>K(()=>import("./IncentiveProModal-BdYn6wqQ.js"),__vite__mapDeps([83,3,1,4,6,5]))),Pdt=ye(async()=>{const{StudentReferralsModal:e}=await K(async()=>{const{StudentReferralsModal:t}=await import("./StudentReferralsModal-BX9JD3_Q.js");return{StudentReferralsModal:t}},__vite__mapDeps([84,3,1,24,4,25,26,5,6]));return{default:e}}),Odt=ye(async()=>{const{SheerIDModal:e}=await K(async()=>{const{SheerIDModal:t}=await import("./SheerIDModal-DRUX72pn.js");return{SheerIDModal:t}},__vite__mapDeps([85,3,1,4,6,5]));return{default:e}}),Ldt=ye(async()=>K(()=>import("./BraintreeSubscriptionModal-DZJ37-j3.js"),__vite__mapDeps([86,3,1,4,6,5]))),Ddt=ye(async()=>{const{RestaurantBookingModal:e}=await K(async()=>{const{RestaurantBookingModal:t}=await import("./RestaurantBookingModal-skHf0r3t.js");return{RestaurantBookingModal:t}},__vite__mapDeps([87,3,1,4,6,5]));return{default:e}},{loading:()=>o.jsx(ts,{})}),Fdt=ye(async()=>K(()=>import("./SheerIdRedirectModal-9yQQaHL9.js"),__vite__mapDeps([88,3,1,4,6,5]))),Udt=ye(async()=>{const{EnterprisePremiumSecureUpgradeModal:e}=await K(async()=>{const{EnterprisePremiumSecureUpgradeModal:t}=await import("./EnterprisePremiumSecureUpgradeModal-Cv6V-we_.js");return{EnterprisePremiumSecureUpgradeModal:t}},__vite__mapDeps([89,3,1,4,90,6,5]));return{default:e}}),Bdt=ye(async()=>{const{ShortcutModal:e}=await K(async()=>{const{ShortcutModal:t}=await import("./ShortcutModal-L3f8QJT0.js");return{ShortcutModal:t}},__vite__mapDeps([91,3,1,4,6,5]));return{default:e}}),Vdt=ye(async()=>K(()=>Promise.resolve().then(()=>KDt),void 0)),$dt=ye(async()=>{const{AutomationModal:e}=await K(async()=>{const{AutomationModal:t}=await Promise.resolve().then(()=>WDt);return{AutomationModal:t}},void 0);return{default:e}}),Wdt=ye(async()=>{const{FinanceAlertModal:e}=await K(async()=>{const{FinanceAlertModal:t}=await Promise.resolve().then(()=>zDt);return{FinanceAlertModal:t}},void 0);return{default:e}}),Hdt=ye(async()=>{const{PlatformOptionsModal:e}=await K(async()=>{const{PlatformOptionsModal:t}=await import("./PlatformOptionsModal-C69hvre9.js");return{PlatformOptionsModal:t}},__vite__mapDeps([92,1,3,6,5,4]));return{default:e}}),zdt=ye(async()=>{const{SharepointSiteModal:e}=await K(async()=>{const{SharepointSiteModal:t}=await import("./SharepointSiteModal-DXKc864X.js");return{SharepointSiteModal:t}},__vite__mapDeps([93,3,1,4,6,5]));return{default:e}}),Gdt=ye(async()=>{const{MCPServerModal:e}=await K(async()=>{const{MCPServerModal:t}=await import("./MCPServerModal-6DgVCPS5.js");return{MCPServerModal:t}},__vite__mapDeps([94,3,1,4,5,6]));return{default:e}}),qdt=ye(async()=>{const{MemberSetTierModal:e}=await K(async()=>{const{MemberSetTierModal:t}=await import("./MemberSetTierModal-ZJ7Kv6cR.js");return{MemberSetTierModal:t}},__vite__mapDeps([95,3,1,4,80,5,6]));return{default:e}}),Kdt=ye(async()=>{const{MCPServiceToolsModal:e}=await K(async()=>{const{MCPServiceToolsModal:t}=await import("./MCPServiceToolsModal-CBnPIM40.js");return{MCPServiceToolsModal:t}},__vite__mapDeps([96,3,1,4,5,6]));return{default:e}});function Ydt(e){return e?{[e.modalName]:e.arg}:{}}const tve=I.memo(({})=>{const{currentOpenModals:e}=xt(),[t,n]=f.useState(e.length);f.useEffect(()=>{setTimeout(()=>{n(e.length)},100)},[e.length]);const r=t!=e.length;return e.map((s,a)=>o.jsx(nve,{modal:s,canOutsideClickClose:!r&&a+1==e.length},a))});tve.displayName="Modals";const nve=I.memo(({modal:e,canOutsideClickClose:t})=>{const n=f.useMemo(()=>({canOutsideClickClose:t}),[t]);return o.jsx(Mfe.Provider,{value:n,children:o.jsx(rve,{modal:e})})});nve.displayName="SingleModalWrapper";const rve=I.memo(({modal:e})=>{const{closeModal:t}=xt(),{hasActiveSubscription:n}=_t(),r=e.modalName,{pricingModal:s,loginModal:a,installModal:i,cometDownloadInstructionsModal:l,requestAccessModal:c,collectionSelectModal:u,collectionCreateOrEdit:d,collectionCreateForThread:m,spaceCreate:p,spaceCreateForThread:h,spaceSettings:g,companyDataPrivacyModal:y,citationListModal:v,checkSourcesModal:x,mapModal:b,inputPaymentModal:_,shoppingPaymentModal:w,purchaseConfirmationModal:C,shoppingOnboardingModal:S,shoppingOrderDetailsModal:E,lossAversionModal:M,spaceVideoModal:k,uploadFilesModal:A,spaceUploadFilesModal:R,spaceContextModal:O,locationPermissionModal:L,watchlistModal:P,reservationDetailsModal:N,deleteMemoryModal:T,memoryDetailModal:j,hotelRoomDetailsModal:F,searchStepsAssetsModal:U,memoryListModal:V,proSubscriptionPaymentModal:$,proMessageModal:z,memorySearchHistoryModal:Q,gmailFailedPermissionsModal:Y,subSuccessModal:W,incentiveProModal:X,restaurantBookingModal:G,sheerIdRedirectModal:J,enterprisePremiumSecureUpgradeModal:q,taskShortcutModal:te,financeAlertModal:re,scheduledTaskModal:ae,automationModal:fe,referralSuccessModal:de,sharepointSiteModal:ve,avatarManagementModal:_e,shoppingTryOnOnboardingModal:Se,braintreeSubscriptionModal:be,announcementImageModal:me,studentReferrals:Ae,sheerIdModal:Ee,meetingDefaultsModal:je,availabilityModal:Me,mcpServerModal:Ye,mcpServiceToolsModal:at,memberSetTierModal:it,connectorsEnableModal:ke}=Ydt(e),{trackEvent:Ue}=Ne();return o.jsxs(o.Fragment,{children:[r==="loginModal"&&a?.origin&&o.jsx(Nge,{pitchMessage:a?.pitchMessage,origin:a.origin,isOpen:r==="loginModal",experimentalImageDesign:a.experimentalImageDesign,sheetModalDesign:a.sheetModalDesign,closeModal:t,closeCallback:a?.closeCallback,overrideRedirectUrl:a?.overrideRedirectUrl,disallowedMethods:a?.disallowedMethods,loginButtonsStyle:a?.loginButtonsStyle,renderCloseButton:a?.renderCloseButton,preEnteredEmail:a?.preEnteredEmail,autoFocus:a?.autoFocus}),!Zut.NEXT_PUBLIC_IS_SIDECAR_BUILD&&o.jsx(Di,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,isPartnershipCampaign:!0,children:r==="installModal"&&i&&o.jsx(Nct,{isOpen:r==="installModal",onClose:()=>{t(),i.closeCallback?.()},origin:i.origin,sheetModalVariant:i.sheetModalVariant})}),r==="cometDownloadInstructionsModal"&&l&&l.requestedPlatform&&o.jsx(edt,{isOpen:r==="cometDownloadInstructionsModal",onClose:t,requestedPlatform:l.requestedPlatform}),r==="pricingModal"&&s&&o.jsx(idt,{isOpen:r==="pricingModal",pitchMessage:s?.pitchMessage,closeModal:t,origin:s.origin,showFreeTier:s.showFreeTier,defaultSegment:s.defaultSegment}),r==="collectionSelectModal"&&u?.entryUUID&&o.jsx(tdt,{isOpen:r==="collectionSelectModal",currentCollection:u.currentCollection,entryUUID:u.entryUUID,searchTerm:u.searchTerm,frontendContextUUID:u.frontendContextUUID,closeModal:t}),r==="collectionCreateOrEdit"&&o.jsx(xZ,{isOpen:r==="collectionCreateOrEdit",existingCollection:d?.existingCollection,frontendContextUUID:d?.frontendContextUUID,closeModal:t,onCreate:d?.onCreate}),r==="spaceCreate"&&o.jsx(NP,{isOpen:r==="spaceCreate",closeModal:t,existingCollection:p?.existingCollection,onCreate:p?.onCreate,content:p?.content}),r==="spaceCreateForThread"&&h?.entryUUID&&o.jsx(NP,{isOpen:r==="spaceCreateForThread",closeModal:t,existingCollection:p?.existingCollection,frontendContextUUID:h?.frontendContextUUID,entryUUID:h?.entryUUID,onCreate:h?.onCreate}),r==="spaceSettings"&&o.jsx(pdt,{isOpen:r==="spaceSettings",existingSpace:g?.existingSpace,closeModal:t}),r==="spaceVideoModal"&&k&&o.jsx(odt,{isOpen:r==="spaceVideoModal",setIsOpen:t,type:k.type}),r==="uploadFilesModal"&&A&&o.jsx(vZ,{...A,isOpen:r==="uploadFilesModal",closeModal:t}),r==="spaceUploadFilesModal"&&R&&o.jsx(vZ,{...R,connectionTypes:$nt(["LOCAL"]),isOpen:r==="spaceUploadFilesModal",closeModal:t}),r==="spaceContextModal"&&o.jsx(vge,{isOpen:r==="spaceContextModal",closeModal:t,collectionSlug:O?.collectionSlug}),r==="requestAccessModal"&&c?.uuidOrSlug&&o.jsx(Afe,{isOpen:r==="requestAccessModal",onClose:t,uuidOrSlug:c.uuidOrSlug}),r==="mapModal"&&o.jsx(Or,{fallback:eve,children:o.jsx(ldt,{isOpen:r==="mapModal",closeModal:t,locations:b&&b.locations,header:b.header,entryUUID:b.entryUUID,searchByLocationOverride:b?.searchByLocationOverride})}),r==="collectionCreateForThread"&&m?.entryUUID&&o.jsx(xZ,{isOpen:r==="collectionCreateForThread",existingCollection:d?.existingCollection,frontendContextUUID:m?.frontendContextUUID,closeModal:t,entryUUID:m?.entryUUID}),r==="inputPaymentModal"&&_&&o.jsx(cdt,{isOpen:r==="inputPaymentModal",closeModal:t,isUpdating:_.isUpdating}),r==="shoppingPaymentModal"&&w&&o.jsx(udt,{isOpen:r==="shoppingPaymentModal",closeModal:t,product:w.product,onSuccess:w.onSuccess}),r==="companyDataPrivacyModal"&&o.jsx(adt,{organizationName:y.organizationName,isOpen:r==="companyDataPrivacyModal",closeModal:t,onContinue:y.onContinue}),r==="citationListModal"&&v.webResults&&o.jsx(SU,{isOpen:r==="citationListModal",onClose:t,entry:v.entry,webResults:v.webResults,submit:v.submit}),r==="checkSourcesModal"&&x&&o.jsx(Mye,{isOpen:r==="checkSourcesModal",onClose:t,entryUUID:x.entryUUID,frontendContextUUID:x.frontendContextUUID,contextUUID:x.contextUUID,webResults:x.webResults,extendedBeforeContext:x.extendedBeforeContext,beforeContext:x.beforeContext,selectedText:x.selectedText,afterContext:x.afterContext,state:x?.state}),r==="keyboardShortcutEditorModal"&&o.jsx(ydt,{isOpen:r==="keyboardShortcutEditorModal",closeModal:t}),r==="keyboardShortcutHelperModal"&&o.jsx(Kpe,{isOpen:r==="keyboardShortcutHelperModal",closeModal:t}),r==="onboardingModal"&&o.jsx(ndt,{isOpen:r==="onboardingModal",closeModal:t}),r==="lossAversionModal"&&M&&o.jsx(sdt,{isOpen:r==="lossAversionModal",onClose:()=>{t(),M.callback?.()},origin:M.origin}),r==="shoppingOnboardingModal"&&S&&o.jsx(ddt,{isOpen:r==="shoppingOnboardingModal",onClose:t,onContinue:S.onContinue}),r==="shoppingOrderDetailsModal"&&o.jsx(fdt,{isOpen:r==="shoppingOrderDetailsModal",onClose:t,item:E?.item,userIntercomHash:E?.userIntercomHash}),r==="purchaseConfirmationModal"&&C&&o.jsx(rdt,{isOpen:r==="purchaseConfirmationModal",onClose:t,order:C.order}),r==="watchlistModal"&&P&&o.jsx(Klt,{isOpen:r==="watchlistModal",onClose:t,watchlistType:P.watchlistType,origin:P.origin}),r==="locationPermissionModal"&&L&&o.jsx(Jut,{isOpen:r==="locationPermissionModal",onClose:t,onPermissionGranted:L.onPermissionGranted??kn,origin:L.origin}),r==="reservationDetailsModal"&&N&&o.jsx(mdt,{isOpen:r==="reservationDetailsModal",onClose:t,reservation:N.reservation,userIntercomHash:N.userIntercomHash}),r==="usernameModal"&&o.jsx(hdt,{isOpen:r==="usernameModal",onClose:t}),r==="userFullNameModal"&&o.jsx(gdt,{isOpen:r==="userFullNameModal",onClose:t}),r==="deleteMemoryModal"&&o.jsx(ult,{isOpen:r==="deleteMemoryModal",onClose:t,memoryId:T?.memoryId,onDeleteSuccess:T?.onDeleteSuccess}),r==="deleteAllMemoriesModal"&&o.jsx(clt,{isOpen:r==="deleteAllMemoriesModal",onClose:t}),r==="voiceToVoiceModal"&&o.jsx(vdt,{isOpen:r==="voiceToVoiceModal",onClose:t}),r==="hotelRoomDetailsModal"&&F&&o.jsx(wdt,{isOpen:r==="hotelRoomDetailsModal",onClose:t,...F}),r==="searchStepsAssetsModal"&&U?.backendUUID&&o.jsx(xdt,{isOpen:r==="searchStepsAssetsModal",closeModal:t,...U},`${U.backendUUID}-${U.assetUUID||"default"}`),r==="memoryListModal"&&o.jsx(bdt,{isOpen:r==="memoryListModal",onClose:t,isMemoryEnabled:V?.isMemoryEnabled??!1}),r==="memoryDetailModal"&&j&&o.jsx(_dt,{isOpen:r==="memoryDetailModal",onClose:t,memoryKey:j.memoryKey,displayValue:j.displayValue}),r==="proSubscriptionPaymentModal"&&$&&o.jsx(Cdt,{isOpen:r==="proSubscriptionPaymentModal",onClose:t,...$}),r==="proReferralModal"&&o.jsx(Edt,{isOpen:r==="proReferralModal",onClose:t}),r==="proMessageModal"&&z&&o.jsx(Tdt,{isOpen:r==="proMessageModal",onClose:t,...z}),r==="freeTrialModal"&&o.jsx(Sdt,{isOpen:r==="freeTrialModal",onClose:t}),r==="memorySearchHistoryModal"&&o.jsx($ye,{isOpen:r==="memorySearchHistoryModal",onClose:t,snippet:Q?.snippet??"",type:Q?.type??"memory",url:Q?.url??"",memoryKey:Q?.memoryKey,entryUuid:Q?.entryUuid,title:Q?.title,timestamp:Q?.timestamp}),r==="memorySearchHistoryIntroModal"&&o.jsx(Ndt,{isOpen:r==="memorySearchHistoryIntroModal",onClose:t}),r==="gmailFailedPermissionsModal"&&Y&&o.jsx(llt,{isOpen:r==="gmailFailedPermissionsModal",onContinue:Y.onContinue??kn,onClose:t}),r==="subSuccessModal"&&W&&o.jsx(jdt,{isOpen:r==="subSuccessModal",onClose:t,flowType:W.flowType,upgradeMax:W.upgradeMax,subscriptionTier:W.subscriptionTier,confirmationRedirectsToHomepage:W.confirmationRedirectsToHomepage}),r==="referralErrorModal"&&o.jsx(Adt,{isOpen:r==="referralErrorModal",onClose:t}),r==="referralSuccessModal"&&de&&o.jsx(Idt,{isOpen:r==="referralSuccessModal",onClose:t,monthsAwarded:de.monthsAwarded}),r==="incentiveProModal"&&o.jsx(Rdt,{isOpen:r==="incentiveProModal",onClose:t,...X}),r==="braintreeSubscriptionModal"&&be&&o.jsx(Ldt,{isOpen:r==="braintreeSubscriptionModal",onClose:t,origin:be.origin}),r==="sheerIdRedirectModal"&&J&&o.jsx(Fdt,{isOpen:r==="sheerIdRedirectModal",onContinue:()=>{t(),Hi(J.sheerIdUrl,"sheerIdRedirectModal")},onCancel:t}),r==="upgradeModal"&&o.jsx(Xut,{isOpen:r==="upgradeModal",onClose:t}),r==="downgradeModal"&&o.jsx(Lct,{isOpen:r==="downgradeModal",onClose:t}),r==="restaurantBookingModal"&&G&&o.jsx(Ddt,{isOpen:r==="restaurantBookingModal",onClose:t,...G}),r==="bugReportModal"&&o.jsx(cJe,{isOpen:r==="bugReportModal",onClose:t}),r==="enterprisePremiumSecureUpgradeModal"&&o.jsx(Udt,{isOpen:r==="enterprisePremiumSecureUpgradeModal",onClose:t,onUpgradeSuccess:q?.onUpgradeSuccess}),r==="taskShortcutModal"&&te&&o.jsx(Bdt,{open:r==="taskShortcutModal",onClose:()=>{t(),te.onClose?.()},onCreated:te.onCreated,source:te.source,shortcut:te.shortcut}),r==="financeAlertModal"&&re&&o.jsx(Wdt,{isOpen:r==="financeAlertModal",onClose:()=>{t(),re.onClose?.()},symbol:re.symbol,task:re.task}),r==="scheduledTaskModal"&&ae&&o.jsx(Kl,{children:o.jsx(Vdt,{open:r==="scheduledTaskModal",onClose:()=>{t(),ae.onClose?.()},onSuccess:ae.onSuccess,source:ae.source,initial:ae.initial,prefill:ae.prefill})}),r==="automationModal"&&fe&&o.jsx(Kl,{children:o.jsx($dt,{open:r==="automationModal",onClose:()=>{t(),fe.onClose?.()},source:fe.source,initialConfiguration:fe.initial?ame({selectedTask:fe.initial}):fe.prefill?sme(fe.prefill):fe.initialConfiguration||V5(n),onSave:Ot=>{fe.onSuccess?.(Ot),t(),fe.onClose?.()},errorMessage:fe.errorMessage,trackEvent:Ue})}),r==="platformOptionsModal"&&o.jsx(Hdt,{isOpen:r==="platformOptionsModal",onClose:t}),r==="sharepointSiteModal"&&ve&&o.jsx(zdt,{isOpen:r==="sharepointSiteModal",onClose:t,onSelectSite:ve.onSelectSite}),r==="avatarManagementModal"&&_e&&o.jsx(ect,{isOpen:r==="avatarManagementModal",onClose:t,config:_e??{source:"settings"}}),r==="shoppingTryOnOnboardingModal"&&o.jsx(bye,{isOpen:r==="shoppingTryOnOnboardingModal",onClose:Se?.onClose||t,onSuccessfulOnboarding:Se?.onSuccessfulOnboarding||(()=>{})}),r==="announcementImageModal"&&me&&o.jsx(Not,{onClose:t,announcementImageModal:me}),r==="studentReferrals"&&o.jsx(Pdt,{isOpen:r==="studentReferrals",verificationId:Ae?.verificationId}),r==="sheerIdModal"&&o.jsx(Odt,{isOpen:r==="sheerIdModal",onClose:()=>{Ee?.onClose?.(),t()},onVerificationSuccess:Ot=>{Ee?.onSuccess?.(Ot),t()},type:Ee?.type||"student"}),r==="meetingDefaultsModal"&&o.jsx(Mdt,{currentDuration:je?.currentDuration,currentBuffer:je?.currentBuffer,onSave:je?.onSave}),r==="availabilityModal"&&o.jsx(kdt,{currentAvailability:Me?.currentAvailability,onSave:Me?.onSave}),r==="mcpServerModal"&&Ye&&o.jsx(Gdt,{isOpen:r==="mcpServerModal",onClose:t,server:Ye.server,onSave:Ye.onSave,onDelete:Ye.onDelete}),r==="mcpServiceToolsModal"&&at&&o.jsx(Kdt,{isOpen:r==="mcpServiceToolsModal",onClose:t,server:at.server,onEditServer:at.onEditServer,onToggleToolEnabled:at.onToggleToolEnabled}),r==="memberSetTierModal"&&it&&o.jsx(qdt,{isOpen:r==="memberSetTierModal",...it,onClose:()=>{t(),it.onClose?.()}}),r==="connectorsEnableModal"&&ke&&o.jsx(ilt,{connectorName:ke.connectorName,connectorAvatar:ke.connectorAvatar,showModal:r==="connectorsEnableModal",setShowModal:()=>t(),handleEnable:ke.handleEnable})]})});rve.displayName="SingleModal";const sve=I.memo(e=>{const{$t:t}=Z(),n=f.useMemo(()=>d3(window.location.href,oc,Oe.LOSS_AVERSION_MODAL),[]),{trackEvent:r}=Ne(),[s,a]=f.useState(!1);return f.useEffect(()=>{r("loss aversion modal opened",{origin:e.origin})},[r,e.origin]),o.jsx(en,{title:t(s?{defaultMessage:"Sign up or log in",id:"Qv2KGSr1CQ"}:{defaultMessage:"Lose your answer?",id:"BxKmht5dD3"}),actionList:s?void 0:[{text:t({defaultMessage:"Sign up or log in",id:"Qv2KGSr1CQ"}),onClick:()=>{a(!0)},variant:"primary"}],...e,children:o.jsx("div",{className:"grid grid-cols-1 grid-rows-1",children:o.jsx(zs,{initial:!1,mode:"popLayout",transition:{type:"spring",duration:.2},children:s?o.jsx(Qr,{transition:{ease:la,duration:.1,delay:.1},children:o.jsxs(ge.div,{className:"relative col-start-1 row-start-1",children:[o.jsx(D,{className:"mb-md",textCenter:!0,children:o.jsx(pe,{defaultMessage:"Log in to save this answer",id:"Ngtk6vEw7T"})}),o.jsx(h1,{redirectUrl:n,showCloseButton:!1})]})},"login"):o.jsx(Qr,{transition:{ease:la,duration:.1},children:o.jsx(ge.div,{className:"col-start-1 row-start-1",children:o.jsx(D,{children:t({defaultMessage:"To save this answer, sign up or log in.",id:"9Ha7YBI+Yh"})})})},"initial")})})})});sve.displayName="ThreadLossAversionModal";const OU=()=>{const e=f.useCallback(r=>{QQe(r)},[]),t=jn(rP),n=f.useCallback(()=>lm(rP),[]);return f.useMemo(()=>({lossAversionStatus:t,setLossAversionStatus:e,unsetLossAversion:n}),[t,e,n])},Oy=()=>{const{lossAversionStatus:e,setLossAversionStatus:t}=OU(),n=jt(),r=rt(),s=f.useMemo(()=>!r&&e==="allowed"&&n?.startsWith("/search"),[r,e,n]),{openModal:a}=xt(),i=f.useCallback(({args:l,openModalOverride:c})=>{c?c("lossAversionModal",l):a("lossAversionModal",l),t("cooldown")},[a,t]);return f.useMemo(()=>({shouldShowLossAversionModal:s,handleOpenLossAversion:i}),[s,i])},Qdt=Object.freeze(Object.defineProperty({__proto__:null,ThreadLossAversionModal:sve,useLossAversion:Oy,useLossAversionStorage:OU},Symbol.toStringTag,{value:"Module"})),ave=Wt("ModalStateContext",{currentOpenModals:[],currentOpenedModal:null,openModal:()=>{},openStackedModal:()=>{},updateModal:()=>{},closeModal:()=>{}}),Xdt=({children:e})=>{const[t,n]=f.useState([]),r=f.useMemo(()=>t.at(-1)?.modalName??null,[t]),{trackEvent:s}=Ne(),{setModalOpen:a}=qhe();f.useEffect(()=>{a(r!=null)},[r,a]);const{device:{isMacOS:i,isWindowsApp:l}}=At(),{shouldShowLossAversionModal:c,handleOpenLossAversion:u}=Oy(),d=gt(),m=f.useCallback((x,b)=>{n(()=>[{modalName:x,arg:b}])},[]),p=f.useCallback((x,b)=>{n(_=>[..._,{modalName:x,arg:b}])},[]),h=f.useCallback((x,b)=>{n(_=>{const w=_.findLastIndex(C=>C.modalName==x);if(w!=-1){const C=_.slice();return C[w]={modalName:x,arg:b},C}else return _})},[]),g=f.useCallback(()=>{n(x=>x.slice(0,x.length-1))},[]),y=f.useMemo(()=>({currentOpenModals:t,currentOpenedModal:r,openModal:m,openStackedModal:p,updateModal:h,closeModal:g}),[t,m,p,h,g,r]),v=f.useCallback(x=>{if(i?x.metaKey&&x.key==="k":x.ctrlKey&&x.key==="i")x.preventDefault(),c?u({args:{origin:Oe.NEW_THREAD_SHORTCUT,callback:()=>{s("quick ask keyboard shortcut",{}),d.push("/",void 0,"Quick ask keyboard shortcut (loss aversion)")}},openModalOverride:m}):(s("quick ask keyboard shortcut",{}),d.push("/",void 0,"Quick ask keyboard shortcut"));else if(i?x.metaKey&&x.key==="/":x.ctrlKey&&x.key==="/")x.preventDefault(),m(l?"keyboardShortcutEditorModal":"keyboardShortcutHelperModal",null);else if(l&&x.ctrlKey&&x.key==="d"){x.preventDefault();const b=new CustomEvent("toggleDictation");document.dispatchEvent(b)}},[i,l,c,u,m,s,d]);return f.useEffect(()=>(document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}),[v]),o.jsxs(ave.Provider,{value:y,children:[e,o.jsx(tve,{})]})},xt=()=>{const e=f.useContext(ave);if(!e)throw new Error("useModalState must be used within ModalContext");return e};function ove({}){const t=jt(),n=lU(t),{isMobileUserAgent:r}=xe();return!r&&!n&&!1}const bf=e=>`milestone-progress-dismissed-${e}`,bZ="milestone-success-modal-dismissed",Zdt=({reason:e})=>{const[t,n]=f.useState(!1),r=ht(),{keysRequiringRerender:s,removeKeyRequiringRerender:a}=Wd(),i=ove({}),{trackEvent:l,trackEventOnce:c}=Ne(),{locale:u,$t:d}=Z(),{hasAccessToProFeatures:m}=_t(),{update:p}=Et(),{openModal:h}=xt(),{data:g}=We({queryKey:["milestone-progress"],queryFn:()=>f0e({locale:u,reason:e}),enabled:i});f.useEffect(()=>{if(g?.progress_display?.length&&g.progress_display.every(Boolean)&&!m){if(Re.getItem(bZ))return;h("proMessageModal",{origin:Oe.MILESTONE_ACHIEVED,title:g?.promotion_display.success_modal,buttonText:d({defaultMessage:"Get Started",id:"9QXm1EW9qz"})}),Re.setItem(bZ,"true"),setTimeout(()=>{p()},1e3)}},[g?.progress_display,g?.promotion_display.success_modal,m,h,p,d]),f.useEffect(()=>{},[s,r,a,i]),f.useEffect(()=>{Bs.getItem(bf("session"))||Re.getItem(bf("lifetime"))||g&&!g.is_eligible&&g.has_incentive},[g,i,c]),f.useEffect(()=>{const v=g?.progress_display.filter(x=>x).length;v&&v>1&&!g.has_incentive&&(Bs.removeItem(bf("session")),Re.removeItem(bf("lifetime")))},[g]);const y=f.useCallback(()=>{if(!g)return;l("milestone progress widget dismissed",{progressCount:g?.progress_display.filter(Boolean).length,requiredCount:g?.progress_display.length,hasIncentive:g?.has_incentive}),n(!1),Bs.setItem(bf("session"),"true");const v=g?.progress_display.filter(x=>x).length;v&&v<=1&&Re.setItem(bf("lifetime"),"true"),g?.has_incentive&&Re.setItem(bf("lifetime"),"true")},[g,l]);return f.useMemo(()=>({show:t,handleClose:y,data:g}),[g,y,t])},Jdt=I.memo(()=>{const e="floating-milestone-progress",t=Z(),{show:n,handleClose:r,data:s}=Zdt({reason:e}),{title:a,description:i}=f.useMemo(()=>s?s.has_incentive?{title:s.promotion_display.title_complete,description:s.promotion_display.description_complete}:s.progress_display.includes(!0)?{title:s.promotion_display.title_progress,description:s.promotion_display.description_progress}:{title:s.promotion_display.title_start,description:s.promotion_display.description_start}:{title:"",description:""},[s]);return!n||!s||!s?.is_eligible?null:o.jsx(H,{variant:"background",className:"animate-in fade-in fixed bottom-[20px] right-[20px] w-[216px] overflow-hidden rounded-xl duration-300 ease-out",children:o.jsxs(H,{variant:"subtler",className:"p-sm border-subtlest inset-0 rounded-xl border",children:[o.jsx("img",{src:"https://r2cdn.perplexity.ai/academic/student-referrals.jpg",alt:t.formatMessage({id:"Tj0vv4yWUn",defaultMessage:"Student Referral Banner"}),className:"bg-subtle size-full rounded-lg object-cover",style:{aspectRatio:"600/350"}}),o.jsx("div",{className:"right-sm top-sm absolute",children:o.jsx(Te,{pill:!0,variant:"noBackground",size:"small",icon:Rt,extraCSS:"text-light md:hover:text-quiet ",onClick:r})}),o.jsxs("div",{className:"p-xs mt-sm",children:[o.jsx(D,{variant:"baseSemi",children:a}),o.jsx(D,{variant:"small",color:"light",className:"mt-xs",children:i}),o.jsx("div",{className:"mt-sm flex flex-row justify-between",children:s.progress_display.map((l,c)=>o.jsx("div",{className:"gap-xs py-xs flex flex-col items-center",children:l?o.jsx(D,{color:"super",children:o.jsx(ce,{size:"lg",icon:a8e})}):o.jsxs(D,{className:"relative opacity-30",children:[o.jsx(ce,{size:"lg",icon:o8e}),o.jsx(D,{variant:"tinyMono",color:"defaultInverted",className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:c+1})]})},c))})]})]})})});Jdt.displayName="FloatingMilestoneProgress";const _Z=e=>`https://plex.it/referrals/${e}`,vtn=({referralLink:e})=>{const{$t:t}=Z(),[n,r]=f.useState(!1),{trackEvent:s}=Ne(),a=f.useCallback(()=>{e&&(navigator.clipboard.writeText(e),s("referral link copied",{referralLink:e}),r(!0),setTimeout(()=>{r(!1)},2e3))},[e,s]),i=f.useCallback(()=>{e&&(navigator.share({url:e,text:t({defaultMessage:"I'm using Perplexity for smarter, faster answers. Sign up using my link and we'll both get 1 month of Pro.",id:"G7gaSddnv5"})}),s("referral link copied",{referralLink:e}))},[t,e,s]);return f.useMemo(()=>({isCopied:n,handleCopyLink:a,handleNativeShare:i,copyButtonProps:{text:t(n?{defaultMessage:"Copied",id:"p556q3uvbn"}:{defaultMessage:"Copy link",id:"lbr3Lq2Lnm"}),icon:n?Sr:Vm,onClick:a}}),[n,a,i,t])},xtn="/static/images/referrals-landing-wide.jpeg",eft=(e,t)=>{const{$t:n}=e,r=t?n({defaultMessage:"Get rewards like hoodies, laptops, and more.",id:"sDFaYf+nrK"}):"";return n({defaultMessage:"Earn 1 month of Pro for each friend you refer. {prizeText}",id:"vWjWyq4Feg"},{prizeText:r})},tft=e=>{if(!e)return!1;const t=e.indexOf("@"),n=e.lastIndexOf(".");return e.includes("@")&&e.includes(".")&&t<n&&t>0},nft=({reason:e})=>{const{session:t}=Et(),n=t?.user?.email??"",{isStudent:r}=f3({email:n??"",reason:e}),{value:s,loading:a}=Rr({flag:"spring-2025-referrals-promo",defaultValue:!0});return{isSpringReferralPromoEnabled:!a&&s,isStudent:r}},rft=()=>{const{value:e}=Rr({flag:"student-referral-prizes",defaultValue:!1});return e},ive=({reason:e})=>{const t=hn(),n=Ms(),r=jt(),{isSpringReferralPromoEnabled:s,isStudent:a}=nft({reason:e});return!!(!t.isStudentReferralBannerDismissed&&n&&r==="/"&&s&&a)},lve=I.memo(()=>{const e="floating-referral-invite",t=hn(),n=Z(),[r,s]=f.useState(!1),{referralCode:a}=ma({reason:e}),i=ive({reason:e}),{trackEvent:l,trackEventOnce:c}=Ne(),u=rft();f.useEffect(()=>{c("referral widget shown",{})},[c]),f.useEffect(()=>{let p;return r&&(l("referral link copied",{referralLink:_Z(a)}),p=setTimeout(()=>{s(!1)},2e3)),()=>{clearTimeout(p)}},[r,a,l]);const d=f.useCallback(()=>{t.actions.setIsStudentReferralBannerDismissed(!0),l("referral widget dismissed",{})},[t.actions,l]),m=f.useCallback(()=>{navigator.clipboard.writeText(_Z(a)),s(!0)},[a]);return a?o.jsx(tde,{shouldShow:!!i,imageSrc:"https://r2cdn.perplexity.ai/academic/student-referrals.jpg",imageAlt:n.formatMessage({id:"Tj0vv4yWUn",defaultMessage:"Student Referral Banner"}),title:n.formatMessage({id:"7vIfWIoBX6",defaultMessage:"Get up to 24 months of free Pro"}),description:eft(n,u),primaryAction:o.jsxs("div",{className:"gap-xs flex flex-row",children:[o.jsx(he,{variant:"common",text:n.formatMessage({id:"TdTXXf940t",defaultMessage:"Learn more"}),href:"/referrals",size:"small"}),o.jsx(he,{variant:"primaryGhost",icon:r?Lie:Vm,text:r?"Copied":"Copy your link",onClick:m,size:"small"})]}),onDismiss:d,iconXDismiss:!0}):null});lve.displayName="FloatingReferralInvite";const cve=I.memo(({closeCookieConsentPopup:e})=>{const{$t:t}=Z(),{locale:n}=Z(),r=f.useCallback(()=>{Zt(Nx,"true",{expires:365}),window.dispatchEvent(new CustomEvent("consentChange",{detail:{consent:"ALLOW"}})),e()},[e]),s=f.useCallback(()=>{Zt(Nx,"false",{expires:365}),e()},[e]);return o.jsx(MD,{modal:!1,open:!0,children:o.jsxs(kD,{children:[o.jsxs(KL,{children:[o.jsx(F5,{children:t({defaultMessage:"Cookie Policy",id:"cA0kQYQQMJ"})}),o.jsx(TD,{children:o.jsx(pe,{defaultMessage:'We use cookies to enhance your experience. By clicking "Accept All Cookies" or selecting "Necessary Cookies", you agree to our privacy policy.',id:"VCSjJ9FhMu"})})]}),o.jsx(D5,{children:o.jsxs(H,{id:"cookie-consent",variant:"background",className:"bottom-sm inset-x-sm p-md fixed max-w-md rounded-lg border shadow-sm md:left-auto",children:[o.jsxs(D,{variant:"baseSemi",className:"gap-x-sm flex items-center",children:[o.jsx(ce,{icon:i8e,size:"md"}),o.jsx("span",{children:t({defaultMessage:"Cookie Policy",id:"cA0kQYQQMJ"})})]}),o.jsx(D,{variant:"small",color:"light",className:"mb-4 text-sm",children:o.jsx(pe,{defaultMessage:'We use cookies to enhance your experience. By clicking "Accept All Cookies" or selecting "Necessary Cookies", you agree to our <link>privacy policy</link>.',id:"ADl1M4/ost",values:{link:a=>o.jsx(Ge,{href:Hv[n]?.privacyPolicy||Hv.default.privacyPolicy,className:"underline hover:no-underline",target:"_blank",children:a})}})}),o.jsxs(H,{className:"gap-x-sm flex items-center",children:[o.jsx(he,{size:"small",variant:"primary",onClick:s,text:t({defaultMessage:"Necessary Cookies",id:"Wzr9ADvGqD"})}),o.jsx(he,{size:"small",onClick:r,text:t({defaultMessage:"Accept All Cookies",id:"JyT5uF/dGC"})})]})]})})]})})});cve.displayName="CookieConsentPopup";function sft({reason:e}){const{organization:t}=_n({reason:e}),n=t?.uuid??"",r=jt(),s=Nt(),{value:a}=It({flag:"helper-disabled",subjectType:"user_nextauth_id",defaultValue:!1,extraAttributes:{orgUuid:n}}),i=r?.startsWith("/apps/"),l=r?.startsWith("/b/zen"),c=r?.startsWith("/b/try-assistant"),u=r?.startsWith("/b/mission-control")||r?.startsWith("/b/assistants"),d=r?.startsWith("/spaces/"),m=s.get("preview")==="1";return a||i||l||c||d||u||m}const aft=()=>{const{data:e}=NU(),{trackEvent:t,trackEventOnce:n}=Ne(),[r,s]=f.useState(!1);f.useEffect(()=>{e&&e.app_location==="SIDE_CARD"&&(s(!0),n("side upsell viewed",{upsellName:e.name,upsellType:e.upsell_type}))},[e,n]);const a=f.useCallback(()=>{e&&(t("side upsell dismissed",{upsellName:e.name,upsellType:e.upsell_type}),s(!1),h3(e.name))},[e,t]),i=f.useMemo(()=>e?o.jsx(g3,{upsellInformation:e,textButtonIfSecondary:!0}):null,[e]);return f.useMemo(()=>({show:r&&!!e,title:e?.title,description:e?.description,image:e?.image_asset,button:i,onDismiss:a}),[i,a,r,e])},uve=({userIntercomHash:e,appId:t,data:n,reason:r})=>{const s=!!Wo(),a=rt(),{session:i}=Et(),{isPro:l,isMax:c,subscriptionTier:u}=_t(),{orgUser:d,isEnterprise:m}=_n({reason:r}),p=f.useMemo(()=>{const y=s?{comet:!0}:{};return{l2wyozh0:{api_base:"https://api-iam.intercom.io",app_id:"l2wyozh0",name:i?.user?.name,email:i?.user?.email,user_hash:e??void 0,is_signed_in:a,is_pro_user:l,is_max_user:c,is_enterprise_user:m,account_type:d?.role,payment_tier:i?.user?.payment_tier||"free",subscription_tier:u||"none",hide_default_launcher:!0,...n,...y},fl4pfvft:{api_base:"https://api-iam.intercom.io",app_id:"fl4pfvft",name:i?.user?.name,email:i?.user?.email,user_hash:e??void 0,is_signed_in:a,is_pro_user:l,is_max_user:c,is_enterprise_user:m,account_type:d?.role,payment_tier:i?.user?.payment_tier||"free",subscription_tier:u||"none",hide_default_launcher:!0,...n,...y},cajnwzjn:{api_base:"https://api-iam.intercom.io",app_id:"cajnwzjn",name:i?.user?.name,email:i?.user?.email,user_hash:e??void 0,is_signed_in:a,is_pro_user:l,is_max_user:c,is_enterprise_user:m,account_type:d?.role,payment_tier:i?.user?.payment_tier||"free",subscription_tier:u||"none",hide_default_launcher:!0,...n,...y}}},[i,e,n,s,l,c,m,d?.role,a,u]),h=f.useRef(void 0),g=f.useCallback(async()=>{h.current||(h.current=K(async()=>{const{show:y,Intercom:v,shutdown:x,update:b}=await import("./index-5FFPV-FM.js").then(_=>_.i);return{show:y,Intercom:v,shutdown:x,update:b}},[]).then(({show:y,Intercom:v,shutdown:x,update:b})=>(v(p[t]),{show:y,update:b,shutdown:x}))),h.current.then(({show:y,update:v})=>{v(p[t]),y()})},[t,p]);return Hd(()=>{h.current?.then(({shutdown:y})=>{y()})}),f.useMemo(()=>({show:g}),[g])};uve.displayName="useIntercom";function dve(){const{trackEvent:e}=Ne(),{locale:t}=Z(),[n,r]=f.useState(bS.includes(t)?t:wd),s=zQe();return s?bS.includes(s)?n!==s&&r(s):GQe():n!==t&&bS.includes(t)&&r(t),f.useMemo(()=>({locale:n,hasChosenLocale:!!s,saveLocale(a){r(a),HQe(a),e("set locale cookie",{locale:a})}}),[n,s,e])}const oft=e=>{};function ift(e){const{$t:t}=Z(),{onLanguageChange:n=oft,button:r}=e,s=gt(),{locale:a,saveLocale:i,hasChosenLocale:l}=dve(),{isMobileStyle:c}=xe(),u=f.useCallback(async h=>{i(h),n(h),await c3(),s.refresh("Interface language select")},[i,n,s]),d=f.useMemo(()=>({text:t({defaultMessage:"Default",id:"lKv8exH0MR"}),value:"default",type:"default",onClick:()=>{pWe(),s.refresh("Interface language reset")}}),[t,s]),m=f.useMemo(()=>[d,...fWe.map(h=>({text:h.label,value:h.locale,type:"default",onClick:()=>{u(h.locale)}}))],[d,u]),p=f.useMemo(()=>l?m.find(h=>h.value===a)?.text:d.text,[m,a,l,d]);return o.jsx(Jt,{isMobileStyle:c,items:m,wrapperClassName:"inline-flex",children:r??o.jsx("div",{className:"w-full md:w-[200px]",children:o.jsx(he,{size:"small",chevron:!0,chevronIcon:Dn,text:p,layout:"split",fullWidth:!0,variant:"border",testId:"interface-language-select"})})})}async function fve(){const e=await fetch("/api/version",{method:"GET",headers:{"Content-Type":"application/json"}}),{version:t}=await e.json();return t}const lft=({hideOnNarrowScreens:e=!1,userIntercomHash:t})=>{const{$t:n}=Z(),{show:r}=uve({appId:"l2wyozh0",userIntercomHash:t,reason:"helper-contact-support"}),{isMobileStyle:s}=xe(),{device:{isWindowsApp:a}}=At(),{openModal:i}=xt(),{locale:l}=Z(),{trackEvent:c}=Ne(),u=Zn(),d=Kge(),m=Wo(),p=Cle(),{isEnterprise:h}=Y5({reason:"helper"}),[g,y]=f.useState(),[v,x]=f.useState(!1);f.useEffect(()=>{p&&async function(){try{y(await fve()??"")}catch{}}()},[p]);const b=l in Hv?Hv[l]:Hv.default,_=f.useMemo(()=>p?[{type:"nested",text:"",label:"Internal (PPLX only)",isSubmenuOpen:v,onSubmenuOpen:()=>x(!0),onSubmenuClose:()=>x(!1),submenu:[{type:"default",text:"",label:g===void 0?"Loading current commit...":"Current commit: "+g,show:!0,href:g&&"https://github.com/ppl-ai/agi/commit/"+g,target:"_blank"},{type:"default",text:"",label:m?`Browser: ${m.browser_version}
Extension: ${m.extension_version}
Agent Extension: ${m.agent_extension_version}`:"Browser info is not defined",show:!!m}]}]:[],[p,g,v,m]),w=f.useMemo(()=>d?"https://www.perplexity.ai/comet/gettingstarted":h?"https://www.perplexity.ai/enterprise/resources":"https://www.perplexity.ai/hub/getting-started#what-is-perplexity",[h,d]),C=f.useMemo(()=>h?"https://www.perplexity.ai/help-center/en/collections/11312901-enterprise-pro":"https://www.perplexity.ai/hub/helpcenter",[h]),S=f.useCallback(()=>{u.showFeedbackForm()},[u]),E=f.useMemo(()=>[{icon:d?Io:Die,text:n({defaultMessage:"Get started",id:"/aBLH2Kytu"}),show:!0,href:w,target:"_blank",onClick(){c("help menu item clicked",{href:w,isCometHome:d})}},{icon:LH,text:n({defaultMessage:"FAQ",id:"W8nHSdskn0"}),show:d,href:"http://comet-help.perplexity.ai/en",target:"_blank",onClick(){c("help menu item clicked",{href:"http://comet-help.perplexity.ai/en",isCometHome:d})}},{icon:DH,text:n({defaultMessage:"Report an Issue",id:"C8l3hRgoLu"}),show:d,onClick:S},{icon:LH,text:n({defaultMessage:"Help center",id:"BYkLO/XERT"}),show:!d||h,href:C,target:"_blank",onClick(){c("help menu item clicked",{href:C,isCometHome:d})}},{icon:l8e,text:n({defaultMessage:"Changelog",id:"MQcAqlXZ5R"}),show:!d,href:"https://www.perplexity.ai/changelog",target:"_blank",onClick(){c("help menu item clicked",{href:"https://www.perplexity.ai/changelog",isCometHome:d})}},{icon:c8e,text:n({defaultMessage:"Blog",id:"tv5FG3fVPd"}),show:!d,href:"/blog",target:"_blank",onClick(){c("help menu item clicked",{href:"/blog",isCometHome:d})}},{icon:XT,text:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),show:!a,onClick(){i("keyboardShortcutHelperModal",null),c("help menu item clicked",{action:"shortcut modal",isCometHome:d})}},{icon:XT,text:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),show:a,onClick(){i("keyboardShortcutEditorModal",null),c("help menu item clicked",{action:"shortcut modal",isCometHome:d})}},{icon:O7,text:n({defaultMessage:"{pplx} {pro}",id:"QDSn6QIReR"},{pplx:"Perplexity",pro:"Pro"}),show:!0,href:"/pro",target:"_blank",onClick(){c("help menu item clicked",{href:"/pro",isCometHome:d})}},{icon:UM,text:n({defaultMessage:"Enterprise",id:"CDLJ0Wjq0x"}),show:!0,href:"https://www.perplexity.ai/enterprise?utm_source=helper",target:"_blank",onClick(){c("help menu item clicked",{href:"https://www.perplexity.ai/enterprise?utm_source=helper",isCometHome:d})}},{icon:gie,text:n({defaultMessage:"Sonar API",id:"m21oy6OJo7"}),show:!0,href:"https://sonar.perplexity.ai/",target:"_blank",onClick(){c("help menu item clicked",{href:"https://sonar.perplexity.ai/",isCometHome:d})}},{icon:u8e,text:n({defaultMessage:"Contact Support",id:"YdQxfwJ5wQ"}),show:!0,onClick(){r()}},{type:"separator",show:!0},{text:"",label:n({defaultMessage:"Careers",id:"yJ1ORHjbX8"}),show:!0,href:"https://www.perplexity.ai/careers",target:"_blank",onClick(){c("help menu item clicked",{href:"https://www.perplexity.ai/careers",isCometHome:d})}},{text:"",label:n({defaultMessage:"Terms of service",id:"FqgDIVw4jF"}),show:!0,href:b.termsOfService,target:"_blank",onClick(){c("help menu item clicked",{href:b.termsOfService,isCometHome:d})}},{text:"",label:n({defaultMessage:"Privacy policy",id:"cPwv2cbzf2"}),show:!0,href:b.privacyPolicy,target:"_blank",onClick(){c("help menu item clicked",{href:b.privacyPolicy,isCometHome:d})}},..._],[d,n,w,S,h,C,a,b.termsOfService,b.privacyPolicy,_,c,i,r]),M=f.useCallback(()=>{i("keyboardShortcutEditorModal",null),c("help menu item clicked",{action:"shortcut modal"})},[i,c]),k=f.useCallback(()=>{p&&i("bugReportModal",null)},[i,p]),A=f.useMemo(()=>E.map(R=>({type:"default",...R})),[E]);return o.jsx("div",{className:B("bottom-md right-md m-sm fixed hidden",!e&&"md:block",e&&"lg:block"),children:o.jsxs("div",{className:"gap-sm flex items-center",children:[p&&o.jsx(he,{toolTip:"Report a bug",ariaLabel:n({defaultMessage:"Internal: Report a bug",id:"mD23B8Qy5J"}),size:"small",pill:!0,variant:"rejecter",icon:DH,onClick:k}),o.jsx("div",{className:"group relative",children:o.jsx(ift,{button:o.jsx(he,{toolTip:n({defaultMessage:"Change language",id:"jOuyTp+O9P"}),icon:d8e,ariaLabel:n({defaultMessage:"Language",id:"y1Z3orIe9Z"}),size:"small",pill:!0,variant:"border",extraCSS:"shadow-subtle"})})}),a&&o.jsx("div",{className:"hidden lg:block",children:o.jsx(he,{toolTip:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),ariaLabel:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),size:"small",pill:!0,variant:"border",extraCSS:"shadow-subtle",icon:XT,onClick:M})}),o.jsx(Jt,{popoverProps:{childrenClassName:"block"},placement:"top-end",isMobileStyle:s,onOpen:()=>c("help menu opened",{}),items:A,children:o.jsx(he,{toolTip:n({defaultMessage:"Learn more",id:"TdTXXf940t"}),ariaLabel:n({defaultMessage:"Help menu",id:"HzUkaMxHjy"}),variant:"border",extraCSS:"shadow-subtle ",size:"small",pill:!0,icon:f8e})})]})})};function Dj({ref:e,className:t,children:n,onTrackEvent:r,__dangerousDoNotUseOnClick:s,...a}){const i=f.useCallback(l=>{s?.(l),r?.()},[s,r]);return o.jsx(Ge,{...a,ref:e,onClick:i,className:B("reset interactable",t),children:n})}function cft({muted:e,bold:t}){return Q0e("cursor-pointer",{variants:{muted:{false:"text-super hover:underline",true:"underline hover:no-underline"},bold:{false:"",true:"font-bold"}}})({muted:e,bold:t})}const fC=({variant:e,muted:t,bold:n,...r})=>e==="inline"?cft({muted:t,bold:n}):IP({variant:e,...r});function mve({ref:e,href:t,children:n,icon:r,"aria-label":s,variant:a="inline",size:i="default",disabled:l=!1,target:c,rel:u,title:d,fullWidth:m=!1,leadingIcon:p,trailingIcon:h,rounded:g=!1,muted:y=!1,bold:v=!1,onTrackEvent:x,__dangerousHtmlProps:b={},..._}){const w=X0e(e),C=Z0e(_),S=f.useMemo(()=>r?o.jsx(jh,{icon:r,size:i}):o.jsxs(o.Fragment,{children:[p&&o.jsx("div",{className:"mr-1",children:o.jsx(jh,{icon:p,size:i})}),n,h&&o.jsx("div",{className:"ml-1",children:o.jsx(jh,{icon:h,size:i})})]}),[r,p,i,n,h]);return a==="inline"?o.jsx(Dj,{ref:w,...C,href:t,target:c,rel:u,title:d,className:fC({variant:"inline",muted:y,bold:v}),onTrackEvent:x,...b,children:S}):l?o.jsx("span",{ref:w,...C,role:"link",className:fC({variant:a,size:i,disabled:l,fullWidth:m,rounded:g,bold:!1}),"aria-disabled":"true","aria-label":s,children:S}):r?o.jsx(Dj,{ref:w,...C,href:t,target:c,rel:u,title:d,className:fC({variant:a,size:i,disabled:l,fullWidth:!1,rounded:g,bold:!1}),onTrackEvent:x,"aria-label":s,...b,children:S}):o.jsx(Dj,{ref:w,...C,href:t,target:c,rel:u,title:d,className:fC({variant:a,size:i,disabled:l,fullWidth:m,bold:!1}),onTrackEvent:x,...b,children:S})}async function btn({notification_type:e,reason:t}){try{const n=await se.POST("/rest/notifications/subscribe/{notification_type}",t,{params:{path:{notification_type:e}}});if(!n.response.ok||n.error)throw new Error(`Failed to subscribe to notification: ${e}`);return n??null}catch(n){return ne.error("Failed to subscribe to notification",n),null}}async function _tn({notification_type:e,reason:t}){try{const n=await se.DELETE("/rest/notifications/unsubscribe/{notification_type}",t,{params:{path:{notification_type:e}}});if(!n.response.ok||n.error)throw new Error(`Failed to unsubscribe from notification: ${e}`);return n??null}catch(n){return ne.error("Failed to unsubscribe from notification",n),null}}async function uft({phone_number:e,permalink:t,reason:n}){try{const r=await se.POST("/rest/notifications/sms/send-app-download-link",n,{body:{phone_number:e,permalink:t}});if(!r.response.ok||r.error)throw new Error(`Failed to send app download link: ${e}`);return r??null}catch(r){return ne.error("Failed to send app download link",r),null}}const dft=({reason:e})=>{const{$t:t}=Z(),{trackEvent:n}=Ne(),{openToast:r}=gn();return vt({mutationFn:async s=>uft({phone_number:s.phone_number,permalink:s.permalink,reason:e}),onSuccess:()=>{r({message:t({defaultMessage:"Text message sent!",id:"OZMs2DeT7X"}),variant:"success",timeout:3}),n("floating mobile download text sent",{})},onError:()=>{r({message:t({defaultMessage:"Failed to send text, please try again",id:"n/T6jrPSYY"}),variant:"error",timeout:3}),n("floating mobile download text send failed",{})}})};var Ly=[["Afghanistan","af","93"],["Albania","al","355"],["Algeria","dz","213"],["Andorra","ad","376"],["Angola","ao","244"],["Antigua and Barbuda","ag","1268"],["Argentina","ar","54","(..) ........",0],["Armenia","am","374",".. ......"],["Aruba","aw","297"],["Australia","au","61",{default:". .... ....","/^4/":"... ... ...","/^5(?!50)/":"... ... ...","/^1(3|8)00/":".... ... ...","/^13/":".. .. ..","/^180/":"... ...."},0,[]],["Austria","at","43"],["Azerbaijan","az","994","(..) ... .. .."],["Bahamas","bs","1242"],["Bahrain","bh","973"],["Bangladesh","bd","880"],["Barbados","bb","1246"],["Belarus","by","375","(..) ... .. .."],["Belgium","be","32","... .. .. .."],["Belize","bz","501"],["Benin","bj","229"],["Bhutan","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina","ba","387"],["Botswana","bw","267"],["Brazil","br","55","(..) .....-...."],["British Indian Ocean Territory","io","246"],["Brunei","bn","673"],["Bulgaria","bg","359"],["Burkina Faso","bf","226"],["Burundi","bi","257"],["Cambodia","kh","855"],["Cameroon","cm","237"],["Canada","ca","1","(...) ...-....",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde","cv","238"],["Caribbean Netherlands","bq","599","",1],["Cayman Islands","ky","1","... ... ....",4,["345"]],["Central African Republic","cf","236"],["Chad","td","235"],["Chile","cl","56"],["China","cn","86","... .... ...."],["Colombia","co","57","... ... ...."],["Comoros","km","269"],["Congo","cd","243"],["Congo","cg","242"],["Costa Rica","cr","506","....-...."],["Cte d'Ivoire","ci","225",".. .. .. .. .."],["Croatia","hr","385"],["Cuba","cu","53"],["Curaao","cw","599","",0],["Cyprus","cy","357",".. ......"],["Czech Republic","cz","420","... ... ..."],["Denmark","dk","45",".. .. .. .."],["Djibouti","dj","253",".. .. ...."],["Dominica","dm","1767"],["Dominican Republic","do","1","(...) ...-....",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt","eg","20"],["El Salvador","sv","503","....-...."],["Equatorial Guinea","gq","240"],["Eritrea","er","291"],["Estonia","ee","372",".... ......"],["Ethiopia","et","251",".. ... ...."],["Fiji","fj","679"],["Finland","fi","358",".. ... .. .."],["France","fr","33",". .. .. .. .."],["French Guiana","gf","594"],["French Polynesia","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia","ge","995"],["Germany","de","49","... ........."],["Ghana","gh","233"],["Greece","gr","30"],["Greenland","gl","299",".. .. .."],["Grenada","gd","1473"],["Guadeloupe","gp","590","",0],["Guam","gu","1671"],["Guatemala","gt","502","....-...."],["Guinea","gn","224"],["Guinea-Bissau","gw","245"],["Guyana","gy","592"],["Haiti","ht","509","....-...."],["Honduras","hn","504"],["Hong Kong","hk","852",".... ...."],["Hungary","hu","36"],["Iceland","is","354","... ...."],["India","in","91",".....-....."],["Indonesia","id","62"],["Iran","ir","98","... ... ...."],["Iraq","iq","964"],["Ireland","ie","353",".. ......."],["Israel","il","972","... ... ...."],["Italy","it","39","... .......",0],["Jamaica","jm","1876"],["Japan","jp","81",".. .... ...."],["Jordan","jo","962"],["Kazakhstan","kz","7","... ...-..-..",0],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait","kw","965"],["Kyrgyzstan","kg","996","... ... ..."],["Laos","la","856"],["Latvia","lv","371",".. ... ..."],["Lebanon","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya","ly","218"],["Liechtenstein","li","423"],["Lithuania","lt","370"],["Luxembourg","lu","352"],["Macau","mo","853"],["Macedonia","mk","389"],["Madagascar","mg","261"],["Malawi","mw","265"],["Malaysia","my","60","..-....-...."],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania","mr","222"],["Mauritius","mu","230"],["Mayotte","yt","262","",1,["269","639"]],["Mexico","mx","52","... ... ....",0],["Micronesia","fm","691"],["Moldova","md","373","(..) ..-..-.."],["Monaco","mc","377"],["Mongolia","mn","976"],["Montenegro","me","382"],["Morocco","ma","212"],["Mozambique","mz","258"],["Myanmar","mm","95"],["Namibia","na","264"],["Nauru","nr","674"],["Nepal","np","977"],["Netherlands","nl","31",{"/^06/":"(.). .........","/^6/":". .........","/^0(10|13|14|15|20|23|24|26|30|33|35|36|38|40|43|44|45|46|50|53|55|58|70|71|72|73|74|75|76|77|78|79|82|84|85|87|88|91)/":"(.).. ........","/^(10|13|14|15|20|23|24|26|30|33|35|36|38|40|43|44|45|46|50|53|55|58|70|71|72|73|74|75|76|77|78|79|82|84|85|87|88|91)/":".. ........","/^0/":"(.)... .......",default:"... ......."}],["New Caledonia","nc","687"],["New Zealand","nz","64","...-...-...."],["Nicaragua","ni","505"],["Niger","ne","227"],["Nigeria","ng","234"],["North Korea","kp","850"],["Norway","no","47","... .. ..."],["Oman","om","968"],["Pakistan","pk","92","...-......."],["Palau","pw","680"],["Palestine","ps","970"],["Panama","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru","pe","51"],["Philippines","ph","63","... ... ...."],["Poland","pl","48","...-...-..."],["Portugal","pt","351"],["Puerto Rico","pr","1","(...) ...-....",3,["787","939"]],["Qatar","qa","974"],["Runion","re","262","",0],["Romania","ro","40"],["Russia","ru","7","(...) ...-..-..",1],["Rwanda","rw","250"],["Saint Kitts and Nevis","kn","1869"],["Saint Lucia","lc","1758"],["Saint Vincent and the Grenadines","vc","1784"],["Samoa","ws","685"],["San Marino","sm","378"],["So Tom and Prncipe","st","239"],["Saudi Arabia","sa","966"],["Senegal","sn","221"],["Serbia","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65","....-...."],["Slovakia","sk","421"],["Slovenia","si","386"],["Solomon Islands","sb","677"],["Somalia","so","252"],["South Africa","za","27"],["South Korea","kr","82","... .... ...."],["South Sudan","ss","211"],["Spain","es","34","... ... ..."],["Sri Lanka","lk","94"],["Sudan","sd","249"],["Suriname","sr","597"],["Swaziland","sz","268"],["Sweden","se","46","... ... ..."],["Switzerland","ch","41",".. ... .. .."],["Syria","sy","963"],["Taiwan","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tonga","to","676"],["Trinidad and Tobago","tt","1868"],["Tunisia","tn","216"],["Turkey","tr","90","... ... .. .."],["Turkmenistan","tm","993"],["Tuvalu","tv","688"],["Uganda","ug","256"],["Ukraine","ua","380","(..) ... .. .."],["United Arab Emirates","ae","971"],["United Kingdom","gb","44",".... ......"],["United States","us","1","(...) ...-....",0],["Uruguay","uy","598"],["Uzbekistan","uz","998",".. ... .. .."],["Vanuatu","vu","678"],["Vatican City","va","39",".. .... ....",1],["Venezuela","ve","58"],["Vietnam","vn","84"],["Yemen","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"]],fft="react-international-phone-",pve=(...e)=>e.filter(t=>!!t).join(" ").trim(),mft=(...e)=>pve(...e).split(" ").map(t=>`${fft}${t}`).join(" "),na=({addPrefix:e,rawClassNames:t})=>pve(mft(...e),...t),pft=({value:e,mask:t,maskSymbol:n,offset:r=0,trimNonMaskCharsLeftover:s=!1})=>{if(e.length<r)return e;let a=e.slice(0,r),i=e.slice(r),l=a,c=0;for(let u of t.split("")){if(c>=i.length){if(!s&&u!==n){l+=u;continue}break}u===n?(l+=i[c],c+=1):l+=u}return l},qp=e=>e?/^\d+$/.test(e):!1,N3=e=>e.replace(/\D/g,""),hft=(e,t)=>{let n=e.style.display;n!=="block"&&(e.style.display="block");let r=e.getBoundingClientRect(),s=t.getBoundingClientRect(),a=s.top-r.top,i=r.bottom-s.bottom;a>=0&&i>=0||(Math.abs(a)<Math.abs(i)?e.scrollTop+=a:e.scrollTop-=i),e.style.display=n},gft=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes("macintosh"),yft=(e,t)=>{let n=t.disableDialCodeAndPrefix?!1:t.forceDialCode,r=t.disableDialCodeAndPrefix?!1:t.insertDialCodeOnEmpty,s=e,a=u=>t.trimNonDigitsEnd?u.trim():u;if(!s)return r&&!s.length||n?a(`${t.prefix}${t.dialCode}${t.charAfterDialCode}`):a(s);if(s=N3(s),s===t.dialCode&&!t.disableDialCodeAndPrefix)return a(`${t.prefix}${t.dialCode}${t.charAfterDialCode}`);if(t.dialCode.startsWith(s)&&!t.disableDialCodeAndPrefix)return a(n?`${t.prefix}${t.dialCode}${t.charAfterDialCode}`:`${t.prefix}${s}`);if(!s.startsWith(t.dialCode)&&!t.disableDialCodeAndPrefix){if(n)return a(`${t.prefix}${t.dialCode}${t.charAfterDialCode}`);if(s.length<t.dialCode.length)return a(`${t.prefix}${s}`)}let i=()=>{let u=t.dialCode.length,d=s.slice(0,u),m=s.slice(u);return{phoneLeftSide:d,phoneRightSide:m}},{phoneLeftSide:l,phoneRightSide:c}=i();return l=`${t.prefix}${l}${t.charAfterDialCode}`,c=pft({value:c,mask:t.mask,maskSymbol:t.maskChar,trimNonMaskCharsLeftover:t.trimNonDigitsEnd||t.disableDialCodeAndPrefix&&c.length===0}),t.disableDialCodeAndPrefix&&(l=""),a(`${l}${c}`)},vft=({phoneBeforeInput:e,phoneAfterInput:t,phoneAfterFormatted:n,cursorPositionAfterInput:r,leftOffset:s=0,deletion:a})=>{if(r<s)return s;if(!e)return n.length;let i=null;for(let d=r-1;d>=0;d-=1)if(qp(t[d])){i=d;break}if(i===null){for(let d=0;d<t.length;d+=1)if(qp(n[d]))return d;return t.length}let l=0;for(let d=0;d<i;d+=1)qp(t[d])&&(l+=1);let c=0,u=0;for(let d=0;d<n.length&&(c+=1,qp(n[d])&&(u+=1),!(u>=l+1));d+=1);if(a!=="backward")for(;!qp(n[c])&&c<n.length;)c+=1;return c},IS=({phone:e,prefix:t})=>e?`${t}${N3(e)}`:"";function RP({value:e,country:t,insertDialCodeOnEmpty:n,trimNonDigitsEnd:r,countries:s,prefix:a,charAfterDialCode:i,forceDialCode:l,disableDialCodeAndPrefix:c,defaultMask:u,countryGuessingEnabled:d,disableFormatting:m}){let p=e;c&&(p=p.startsWith(`${a}`)?p:`${a}${t.dialCode}${p}`);let h=d?Tft({phone:p,countries:s,currentCountryIso2:t?.iso2}):void 0,g=h?.country??t,y=yft(p,{prefix:a,mask:Mft({phone:p,country:g,defaultMask:u,disableFormatting:m}),maskChar:hve,dialCode:g.dialCode,trimNonDigitsEnd:r,charAfterDialCode:i,forceDialCode:l,insertDialCodeOnEmpty:n,disableDialCodeAndPrefix:c}),v=d&&!h?.fullDialCodeMatch?t:g;return{phone:IS({phone:c?`${v.dialCode}${y}`:y,prefix:a}),inputValue:y,country:v}}var xft=e=>{if(e?.toLocaleLowerCase().includes("delete")??!1)return e?.toLocaleLowerCase().includes("forward")?"forward":"backward"},bft=(e,{country:t,insertDialCodeOnEmpty:n,phoneBeforeInput:r,prefix:s,charAfterDialCode:a,forceDialCode:i,disableDialCodeAndPrefix:l,countryGuessingEnabled:c,defaultMask:u,disableFormatting:d,countries:m})=>{let p=e.nativeEvent,h=p.inputType,g=xft(h),y=!!h?.startsWith("insertFrom"),v=h==="insertText",x=p?.data||void 0,b=e.target.value,_=e.target.selectionStart??0;if(h?.includes("history"))return{inputValue:r,phone:IS({phone:r,prefix:s}),cursorPosition:r.length,country:t};if(v&&!qp(x)&&b!==s)return{inputValue:r,phone:IS({phone:l?`${t.dialCode}${r}`:r,prefix:s}),cursorPosition:_-(x?.length??0),country:t};if(i&&!b.startsWith(`${s}${t.dialCode}`)&&!y){let M=b?r:`${s}${t.dialCode}${a}`;return{inputValue:M,phone:IS({phone:M,prefix:s}),cursorPosition:s.length+t.dialCode.length+a.length,country:t}}let{phone:w,inputValue:C,country:S}=RP({value:b,country:t,trimNonDigitsEnd:g==="backward",insertDialCodeOnEmpty:n,countryGuessingEnabled:c,countries:m,prefix:s,charAfterDialCode:a,forceDialCode:i,disableDialCodeAndPrefix:l,disableFormatting:d,defaultMask:u}),E=vft({cursorPositionAfterInput:_,phoneBeforeInput:r,phoneAfterInput:b,phoneAfterFormatted:C,leftOffset:i?s.length+t.dialCode.length+a.length:0,deletion:g});return{phone:w,inputValue:C,cursorPosition:E,country:S}},_ft=(e,t)=>{let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let s of n)if(e[s]!==t[s])return!1;return!0},wft=()=>{let e=f.useRef(),t=f.useRef(Date.now());return{check:()=>{let n=Date.now(),r=e.current?n-t.current:void 0;return e.current=t.current,t.current=n,r}}},Cft={size:20,overrideLastItemDebounceMS:-1};function Sft(e,t){let{size:n,overrideLastItemDebounceMS:r,onChange:s}={...Cft,...t},[a,i]=f.useState(e),[l,c]=f.useState([a]),[u,d]=f.useState(0),m=wft();return[a,(p,h)=>{if(typeof p=="object"&&typeof a=="object"&&_ft(p,a)||p===a)return;let g=r>0,y=m.check(),v=g&&y!==void 0?y>r:!0;if(h?.overrideLastItem!==void 0?h.overrideLastItem:!v)c(x=>[...x.slice(0,u),p]);else{let x=l.length>=n;c(b=>[...b.slice(x?1:0,u+1),p]),x||d(b=>b+1)}i(p),s?.(p)},()=>{if(u<=0)return{success:!1};let p=l[u-1];return i(p),d(h=>h-1),s?.(p),{success:!0,value:p}},()=>{if(u+1>=l.length)return{success:!1};let p=l[u+1];return i(p),d(h=>h+1),s?.(p),{success:!0,value:p}}]}var hve=".",qo={defaultCountry:"us",value:"",prefix:"+",defaultMask:"............",charAfterDialCode:" ",historySaveDebounceMS:200,disableCountryGuess:!1,disableDialCodePrefill:!1,forceDialCode:!1,disableDialCodeAndPrefix:!1,disableFormatting:!1,countries:Ly},Eft=({defaultCountry:e=qo.defaultCountry,value:t=qo.value,countries:n=qo.countries,prefix:r=qo.prefix,defaultMask:s=qo.defaultMask,charAfterDialCode:a=qo.charAfterDialCode,historySaveDebounceMS:i=qo.historySaveDebounceMS,disableCountryGuess:l=qo.disableCountryGuess,disableDialCodePrefill:c=qo.disableDialCodePrefill,forceDialCode:u=qo.forceDialCode,disableDialCodeAndPrefix:d=qo.disableDialCodeAndPrefix,disableFormatting:m=qo.disableFormatting,onChange:p,inputRef:h})=>{let g={countries:n,prefix:r,charAfterDialCode:a,forceDialCode:d?!1:u,disableDialCodeAndPrefix:d,defaultMask:s,countryGuessingEnabled:!l,disableFormatting:m},y=f.useRef(null),v=h||y,x=P=>{Promise.resolve().then(()=>{typeof window>"u"||v.current!==document?.activeElement||v.current?.setSelectionRange(P,P)})},[{phone:b,inputValue:_,country:w},C,S,E]=Sft(()=>{let P=ch({value:e,field:"iso2",countries:n});P||console.error(`[react-international-phone]: can not find a country with "${e}" iso2 code`);let N=P||ch({value:"us",field:"iso2",countries:n}),{phone:T,inputValue:j,country:F}=RP({value:t,country:N,insertDialCodeOnEmpty:!c,...g});return x(j.length),{phone:T,inputValue:j,country:F.iso2}},{overrideLastItemDebounceMS:i,onChange:({inputValue:P,phone:N,country:T})=>{if(!p)return;let j=M(T);p({phone:N,inputValue:P,country:j})}}),M=f.useCallback(P=>ch({value:P,field:"iso2",countries:n}),[n]),k=f.useMemo(()=>M(w),[w,M]);f.useEffect(()=>{let P=v.current;if(!P)return;let N=T=>{if(!T.key)return;let j=T.ctrlKey,F=T.metaKey,U=T.shiftKey;if(T.key.toLowerCase()==="z"){if(gft()){if(!F)return}else if(!j)return;U?E():S()}};return P.addEventListener("keydown",N),()=>{P.removeEventListener("keydown",N)}},[v,S,E]);let A=P=>{P.preventDefault();let{phone:N,inputValue:T,country:j,cursorPosition:F}=bft(P,{country:k,phoneBeforeInput:_,insertDialCodeOnEmpty:!1,...g});return C({inputValue:T,phone:N,country:j.iso2}),x(F),t},R=(P,N={focusOnInput:!1})=>{let T=ch({value:P,field:"iso2",countries:n});if(!T){console.error(`[react-international-phone]: can not find a country with "${P}" iso2 code`);return}let j=d?"":`${r}${T.dialCode}${a}`;C({inputValue:j,phone:`${r}${T.dialCode}`,country:T.iso2}),N.focusOnInput&&Promise.resolve().then(()=>{v.current?.focus()})},[O,L]=f.useState(!1);return f.useEffect(()=>{if(!O){L(!0),t!==b&&p?.({inputValue:_,phone:b,country:k});return}if(t===b)return;let{phone:P,inputValue:N,country:T}=RP({value:t,country:k,insertDialCodeOnEmpty:!c,...g});C({phone:P,inputValue:N,country:T.iso2})},[t]),{phone:b,inputValue:_,country:k,setCountry:R,handlePhoneValueChange:A,inputRef:v}},Mft=({phone:e,country:t,defaultMask:n="............",disableFormatting:r=!1})=>{let s=t.format,a=l=>r?l.replace(new RegExp(`[^${hve}]`,"g"),""):l;if(!s)return a(n);if(typeof s=="string")return a(s);if(!s.default)return console.error(`[react-international-phone]: default mask for ${t.iso2} is not provided`),a(n);let i=Object.keys(s).find(l=>{if(l==="default")return!1;if(!(l.charAt(0)==="/"&&l.charAt(l.length-1)==="/"))return console.error(`[react-international-phone]: format regex "${l}" for ${t.iso2} is not valid`),!1;let c=new RegExp(l.substring(1,l.length-1)),u=e.replace(t.dialCode,"");return c.test(N3(u))});return a(i?s[i]:s.default)},gl=e=>{let[t,n,r,s,a,i]=e;return{name:t,iso2:n,dialCode:r,format:s,priority:a,areaCodes:i}},kft=e=>`Field "${e}" is not supported`,ch=({field:e,value:t,countries:n=Ly})=>{if(["priority"].includes(e))throw new Error(kft(e));let r=n.find(s=>{let a=gl(s);return t===a[e]});if(r)return gl(r)},Tft=({phone:e,countries:t=Ly,currentCountryIso2:n})=>{let r={country:void 0,fullDialCodeMatch:!1};if(!e)return r;let s=N3(e);if(!s)return r;let a=r,i=({country:l,fullDialCodeMatch:c})=>{let u=l.dialCode===a.country?.dialCode,d=(l.priority??0)<(a.country?.priority??0);(!u||d)&&(a={country:l,fullDialCodeMatch:c})};for(let l of t){let c=gl(l),{dialCode:u,areaCodes:d}=c;if(s.startsWith(u)){let m=a.country?Number(u)>=Number(a.country.dialCode):!0;if(d){let p=s.substring(u.length);for(let h of d)if(p.startsWith(h))return{country:c,fullDialCodeMatch:!0}}(m||u===s||!a.fullDialCodeMatch)&&i({country:c,fullDialCodeMatch:!0})}a.fullDialCodeMatch||s.length<u.length&&u.startsWith(s)&&(!a.country||Number(u)<=Number(a.country.dialCode))&&i({country:c,fullDialCodeMatch:!1})}if(n){let l=ch({value:n,field:"iso2",countries:t});if(!l)return a;let c=l?(u=>{if(!u?.areaCodes)return!1;let d=s.substring(u.dialCode.length);return u.areaCodes.some(m=>m.startsWith(d))})(l):!1;a&&a.country?.dialCode===l.dialCode&&a.country!==l&&a.fullDialCodeMatch&&(!l.areaCodes||c)&&(a={country:l,fullDialCodeMatch:!0})}return a},Nft=(e,t)=>{let n=parseInt(e,16);return Number(n+t).toString(16)},jft="abcdefghijklmnopqrstuvwxyz",Aft="1f1e6",wZ=jft.split("").reduce((e,t,n)=>({...e,[t]:Nft(Aft,n)}),{}),Ift=e=>[wZ[e[0]],wZ[e[1]]].join("-"),gve=({iso2:e,size:t,src:n,protocol:r="https",disableLazyLoading:s,className:a,style:i,...l})=>{if(!e)return I.createElement("img",{className:na({addPrefix:["flag-emoji"],rawClassNames:[a]}),width:t,height:t,...l});let c=()=>{if(n)return n;let u=Ift(e);return`${r}://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/${u}.svg`};return I.createElement("img",{className:na({addPrefix:["flag-emoji"],rawClassNames:[a]}),src:c(),width:t,height:t,draggable:!1,"data-country":e,loading:s?void 0:"lazy",style:{width:t,height:t,...i},alt:"",...l})},Rft=1e3,Pft=({show:e,dialCodePrefix:t="+",selectedCountry:n,countries:r=Ly,preferredCountries:s=[],flags:a,onSelect:i,onClose:l,...c})=>{let u=f.useRef(null),d=f.useRef(),m=f.useMemo(()=>{if(!s||!s.length)return r;let S=[],E=[...r];for(let M of s){let k=E.findIndex(A=>gl(A).iso2===M);if(k!==-1){let A=E.splice(k,1)[0];S.push(A)}}return S.concat(E)},[r,s]),p=f.useRef({updatedAt:void 0,value:""}),h=S=>{let E=p.current.updatedAt&&new Date().getTime()-p.current.updatedAt.getTime()>Rft;p.current={value:E?S:`${p.current.value}${S}`,updatedAt:new Date};let M=m.findIndex(k=>gl(k).name.toLowerCase().startsWith(p.current.value));M!==-1&&v(M)},g=f.useCallback(S=>m.findIndex(E=>gl(E).iso2===S),[m]),[y,v]=f.useState(g(n)),x=()=>{d.current!==n&&v(g(n))},b=f.useCallback(S=>{v(g(S.iso2)),i?.(S)},[i,g]),_=S=>{let E=m.length-1,M=k=>S==="prev"?k-1:S==="next"?k+1:S==="last"?E:0;v(k=>{let A=M(k);return A<0?0:A>E?E:A})},w=S=>{if(S.stopPropagation(),S.key==="Enter"){S.preventDefault();let E=gl(m[y]);b(E);return}if(S.key==="Escape"){l?.();return}if(S.key==="ArrowUp"){S.preventDefault(),_("prev");return}if(S.key==="ArrowDown"){S.preventDefault(),_("next");return}if(S.key==="PageUp"){S.preventDefault(),_("first");return}if(S.key==="PageDown"){S.preventDefault(),_("last");return}S.key===" "&&S.preventDefault(),S.key.length===1&&!S.altKey&&!S.ctrlKey&&!S.metaKey&&h(S.key.toLocaleLowerCase())},C=f.useCallback(()=>{if(!u.current||y===void 0)return;let S=gl(m[y]).iso2;if(S===d.current)return;let E=u.current.querySelector(`[data-country="${S}"]`);E&&(hft(u.current,E),d.current=S)},[y,m]);return f.useEffect(()=>{C()},[y,C]),f.useEffect(()=>{u.current&&(e?u.current.focus():x())},[e]),f.useEffect(()=>{x()},[n]),I.createElement("ul",{ref:u,role:"listbox",className:na({addPrefix:["country-selector-dropdown"],rawClassNames:[c.className]}),style:{display:e?"block":"none",...c.style},onKeyDown:w,onBlur:l,tabIndex:-1,"aria-activedescendant":`react-international-phone__${gl(m[y]).iso2}-option`},m.map((S,E)=>{let M=gl(S),k=M.iso2===n,A=E===y,R=s.includes(M.iso2),O=E===s.length-1,L=a?.find(P=>P.iso2===M.iso2);return I.createElement(I.Fragment,{key:M.iso2},I.createElement("li",{"data-country":M.iso2,role:"option","aria-selected":k,"aria-label":`${M.name} ${t}${M.dialCode}`,id:`react-international-phone__${M.iso2}-option`,className:na({addPrefix:["country-selector-dropdown__list-item",R&&"country-selector-dropdown__list-item--preferred",k&&"country-selector-dropdown__list-item--selected",A&&"country-selector-dropdown__list-item--focused"],rawClassNames:[c.listItemClassName]}),onClick:()=>b(M),style:c.listItemStyle,title:M.name},I.createElement(gve,{iso2:M.iso2,src:L?.src,className:na({addPrefix:["country-selector-dropdown__list-item-flag-emoji"],rawClassNames:[c.listItemFlagClassName]}),style:c.listItemFlagStyle}),I.createElement("span",{className:na({addPrefix:["country-selector-dropdown__list-item-country-name"],rawClassNames:[c.listItemCountryNameClassName]}),style:c.listItemCountryNameStyle},M.name),I.createElement("span",{className:na({addPrefix:["country-selector-dropdown__list-item-dial-code"],rawClassNames:[c.listItemDialCodeClassName]}),style:c.listItemDialCodeStyle},t,M.dialCode)),O?I.createElement("hr",{className:na({addPrefix:["country-selector-dropdown__preferred-list-divider"],rawClassNames:[c.preferredListDividerClassName]}),style:c.preferredListDividerStyle}):null)}))},Oft=({selectedCountry:e,onSelect:t,disabled:n,hideDropdown:r,countries:s=Ly,preferredCountries:a=[],flags:i,renderButtonWrapper:l,...c})=>{let[u,d]=f.useState(!1),m=f.useMemo(()=>{if(e)return ch({value:e,field:"iso2",countries:s})},[s,e]),p=f.useRef(null),h=y=>{y.key&&["ArrowUp","ArrowDown"].includes(y.key)&&(y.preventDefault(),d(!0))},g=()=>{let y={title:m?.name,onClick:()=>d(x=>!x),onMouseDown:x=>x.preventDefault(),onKeyDown:h,disabled:r||n,role:"combobox","aria-label":"Country selector","aria-haspopup":"listbox","aria-expanded":u},v=I.createElement("div",{className:na({addPrefix:["country-selector-button__button-content"],rawClassNames:[c.buttonContentWrapperClassName]}),style:c.buttonContentWrapperStyle},I.createElement(gve,{iso2:e,src:i?.find(x=>x.iso2===e)?.src,className:na({addPrefix:["country-selector-button__flag-emoji",n&&"country-selector-button__flag-emoji--disabled"],rawClassNames:[c.flagClassName]}),style:{visibility:e?"visible":"hidden",...c.flagStyle}}),!r&&I.createElement("div",{className:na({addPrefix:["country-selector-button__dropdown-arrow",n&&"country-selector-button__dropdown-arrow--disabled",u&&"country-selector-button__dropdown-arrow--active"],rawClassNames:[c.dropdownArrowClassName]}),style:c.dropdownArrowStyle}));return l?l({children:v,rootProps:y}):I.createElement("button",{...y,type:"button",className:na({addPrefix:["country-selector-button",u&&"country-selector-button--active",n&&"country-selector-button--disabled",r&&"country-selector-button--hide-dropdown"],rawClassNames:[c.buttonClassName]}),"data-country":e,style:c.buttonStyle},v)};return I.createElement("div",{className:na({addPrefix:["country-selector"],rawClassNames:[c.className]}),style:c.style,ref:p},g(),I.createElement(Pft,{show:u,countries:s,preferredCountries:a,flags:i,onSelect:y=>{d(!1),t?.(y)},selectedCountry:e,onClose:()=>{d(!1)},...c.dropdownStyleProps}))},Lft=({dialCode:e,prefix:t,disabled:n,style:r,className:s})=>I.createElement("div",{className:na({addPrefix:["dial-code-preview",n&&"dial-code-preview--disabled"],rawClassNames:[s]}),style:r},`${t}${e}`),Dft=f.forwardRef(({value:e,onChange:t,countries:n=Ly,preferredCountries:r=[],hideDropdown:s,showDisabledDialCodeAndPrefix:a,disableFocusAfterCountrySelect:i,flags:l,style:c,className:u,inputStyle:d,inputClassName:m,countrySelectorStyleProps:p,dialCodePreviewStyleProps:h,inputProps:g,placeholder:y,disabled:v,name:x,onFocus:b,onBlur:_,required:w,autoFocus:C,...S},E)=>{let{phone:M,inputValue:k,inputRef:A,country:R,setCountry:O,handlePhoneValueChange:L}=Eft({value:e,countries:n,...S,onChange:N=>{t?.(N.phone,{country:N.country,inputValue:N.inputValue})}}),P=S.disableDialCodeAndPrefix&&a&&R?.dialCode;return f.useImperativeHandle(E,()=>A.current?Object.assign(A.current,{setCountry:O,state:{phone:M,inputValue:k,country:R}}):null,[A,O,M,k,R]),I.createElement("div",{ref:E,className:na({addPrefix:["input-container"],rawClassNames:[u]}),style:c},I.createElement(Oft,{onSelect:N=>O(N.iso2,{focusOnInput:!i}),flags:l,selectedCountry:R.iso2,countries:n,preferredCountries:r,disabled:v,hideDropdown:s,...p}),P&&I.createElement(Lft,{dialCode:R.dialCode,prefix:S.prefix??"+",disabled:v,...h}),I.createElement("input",{onChange:L,value:k,type:"tel",ref:A,className:na({addPrefix:["input",v&&"input--disabled"],rawClassNames:[m]}),placeholder:y,disabled:v,style:d,name:x,onFocus:b,onBlur:_,autoFocus:C,required:w,...g}))});const CZ={height:"38px"},LU=I.memo(({required:e,number:t,defaultCountry:n,errorText:r,onChange:s,label:a})=>{const{locale:i,$t:l}=Z(),c=n?.toLowerCase()||i.split("-")[1]?.toLowerCase()||"us",u=f.useCallback((m,p)=>{s({number:m,countryCode:p.country.iso2.toUpperCase()})},[s]),d=f.useMemo(()=>({dropdownStyleProps:{className:"rounded-md !text-foreground !bg-base dark:bg-gradient-to-r dark:from-subtler via-subtle dark:to-subtler dark:ring-subtle scrollbar-none focus:outline-none",listItemClassName:"my-xs mx-sm rounded-md aria-selected:dark:bg-subtle aria-selected:dark:text-foreground dark:hover:bg-subtle"},buttonContentWrapperClassName:"px-md",buttonClassName:"bg-base dark:bg-subtler dark:border-subtle",buttonStyle:CZ}),[]);return o.jsxs("div",{children:[o.jsx(Ub,{label:a??l({defaultMessage:"Phone number",id:"jdJhOLwFfi"}),isOptional:!1,errorText:r}),o.jsx(Dft,{required:e,countrySelectorStyleProps:d,inputClassName:B("w-full outline-none !bg-base dark:!bg-subtler caret-super focus:ring-1 focus:ring-subtler","dark:border-subtle dark:text-foreground","selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"),inputStyle:CZ,defaultCountry:c,value:t,onChange:u})]})});LU.displayName="IntlPhoneInput";const wtn=Object.freeze(Object.defineProperty({__proto__:null,IntlPhoneInput:LU},Symbol.toStringTag,{value:"Module"}));function Fft(e){if(!e)return!1;const t=e.replace(/[^\d+]/g,"");return!t.startsWith("+")||t.length<8||t.length>18||t.length===1?!1:/^\+\d{7,17}$/.test(t)}function Uft(e){return/^(\+?1?\s?)?\(?\d{3}\)?[-.\s]?\d{3}[-.\s]?\d{4}$/.test(e)}const Bft=()=>Bs.getItem("mobilePopupDismissed")!=="true",Vft=()=>Bs.setItem("mobilePopupDismissed","true"),$ft=ye(()=>K(()=>import("./AppDownloadQR-zqcSXPEM.js"),__vite__mapDeps([7,3,1])),{loading:()=>o.jsx(i0e,{})}),yve=I.memo(({})=>{const{$t:e}=Z(),t=jt(),{trackEvent:n}=Ne(),{keysRequiringRerender:r,removeKeyRequiringRerender:s}=Wd(),{openToast:a}=gn(),[i,l]=f.useState(!1),[c,u]=f.useState(""),[d,m]=f.useState("US"),p=dft({reason:"floating-app-download"}),{downloadAppLink:h}=zd("floating-app-download",sct),g=lU(t);f.useEffect(()=>{r.includes("floating-mobile-download")&&l(Bft()&&!g),s("floating-mobile-download")},[r,g,s]),f.useEffect(()=>{i&&n("floating mobile download shown",{})},[i,n]);const y=f.useCallback(_=>{u(_.number),m(_.countryCode)},[]),v=f.useCallback(()=>{if(!c){a({message:e({defaultMessage:"Please enter a phone number",id:"MbYoP1/2Qh"}),variant:"error",timeout:3});return}if(!Uft(c)&&!Fft(c)){a({message:e({defaultMessage:"Please enter a valid phone number",id:"FPcbu0KFMJ"}),variant:"error",timeout:3});return}p.mutate({phone_number:c,permalink:h})},[c,h,p,a,e]),x=()=>{l(!1),Vft(),n("floating mobile download dismissed",{})};if(!i)return null;const b=p.isPending;return o.jsx(H,{variant:"background",className:"bottom-md right-md p-lg animate-in fade-in fixed z-30 hidden w-[340px] rounded-lg border shadow-lg duration-300 ease-out md:block",children:o.jsxs("div",{children:[o.jsx("div",{className:"right-sm top-sm absolute",children:o.jsx(Te,{pill:!0,size:"small",icon:Rt,onClick:x})}),o.jsx(D,{variant:"section-title",className:"mb-md text-center",children:o.jsx(pe,{defaultMessage:"Download the Perplexity app",id:"1sBOM+cndS"})}),o.jsxs("div",{className:"mb-md gap-sm flex flex-col",children:[o.jsx(LU,{label:"",number:c,defaultCountry:d,onChange:y}),o.jsx(he,{text:e({defaultMessage:"Text me the link",id:"wkEpU7ZihM"}),fullWidth:!0,variant:"primary",disabled:b,isLoading:b,onClick:v})]}),o.jsxs("div",{className:"my-md pt-sm relative flex items-center",children:[o.jsx("div",{className:"border-subtler flex-1 border-t"}),o.jsx(D,{variant:"small",color:"light",className:"mx-sm bg-base px-sm text-center",children:o.jsx(pe,{defaultMessage:"Scan QR code",id:"aA2Fwg7hc1"})}),o.jsx("div",{className:"border-subtler flex-1 border-t"})]}),o.jsx(H,{className:"mb-md mx-auto flex items-center justify-center",children:o.jsx($ft,{className:"p-xs overflow-hidden rounded-lg shadow-md"})}),o.jsxs(D,{variant:"tiny",color:"ultraLight",className:"text-center",children:[o.jsx(pe,{defaultMessage:"Enter your phone number to get the app link and occasional updates from Perplexity. See our ",id:"l6RMC+6Lgp"}),o.jsx(mve,{href:"https://www.perplexity.ai/hub/legal/privacy-policy",children:o.jsx(D,{variant:"tiny",color:"ultraLight",className:"underline",as:"span",children:o.jsx(pe,{defaultMessage:"Privacy Policy",id:"vx0nkZ8xpy"})})}),o.jsx(pe,{defaultMessage:" for more details. Opt out anytime.",id:"BPjqn8RV0y"})]})]})})});yve.displayName="FloatingAppDownload";function Wft({useCase:e}){return We({queryKey:["userIntercomHash",e],queryFn:()=>{const t=new URLSearchParams;return t.set("useCase",e),fetch(`/api/intercom?${t.toString()}`).then(n=>n.json())}})}var SZ={};const Hft=()=>{const e="floating-components",t=rt(),n=ove({});ur({enabled:!t});const r=aft(),{showCookieConsentPopup:s,closeCookieConsentPopup:a}=ble(),i=sft({reason:e}),l=f.useRef(null),{inApp:c}=Vo(),u=ive({reason:e}),{currentOpenedModal:d}=xt(),m=jt(),{data:p}=Wft({useCase:"default"});if(c)return null;if(r.show&&r.title&&r.description&&r.button&&r.onDismiss)return o.jsx(Di,{isFirefoxDefaultSearch:!0,children:o.jsx(tde,{shouldShow:r.show,imageSrc:r.image,imageAlt:"Side card upsell",title:r.title,description:r.description,primaryAction:r.button,onDismiss:r.onDismiss,iconXDismiss:!0})});if(!s&&u)return o.jsx(lve,{});const h=p?.userIntercomHash??null,g=!d&&!t&&!s&&!SZ.NEXT_PUBLIC_IS_SIDECAR_BUILD;return o.jsxs(o.Fragment,{children:[!i&&h&&o.jsx(lft,{hideOnNarrowScreens:m?.includes("/search"),userIntercomHash:h}),g&&o.jsx("div",{ref:l,children:o.jsx(Di,{isWindowsApp:!0,isGovernment:!0,children:o.jsx(Yge,{portalTarget:l.current??void 0},"floating-signup")})}),t&&!SZ.NEXT_PUBLIC_IS_SIDECAR_BUILD&&o.jsx(Di,{isWindowsApp:!0,isFirefoxDefaultSearch:!0,children:o.jsx(yve,{})}),s&&o.jsx(cve,{closeCookieConsentPopup:a}),t&&n]})},zft="pplx.ai",Gft=ye(async()=>{const{Analytics:e}=await K(async()=>{const{Analytics:t}=await import("./index-DKFDMv2a.js");return{Analytics:t}},__vite__mapDeps([97,3,1]));return{default:e}},{prefetch:!1}),qft="dub_id",Kft="dub_id",EZ=90,Yft=()=>{const e=Nt(),t=rt(),n=f.useRef(!1);return f.useEffect(()=>{const r=e.get(qft);r&&(Zt(Kft,r,{expires:EZ}),t&&!n.current&&(n.current=!0,Qge({eventName:"activated",isDeferred:!0,clickId:r,reason:"logged in lead"})))},[e,t]),o.jsx(Gft,{domainsConfig:{refer:zft},cookieOptions:{expiresInDays:EZ}})},MZ="AW-11209402154",Qft="AW-11209402154/Oz8uCISC_PYZEKrOh-Ep",vve=I.memo(()=>{const{hasConsent:e}=ble(),n=!!Nt()?.get(oc),[r,s]=f.useState(!1);return f.useEffect(()=>{if(!r&&e){const a=i=>{if(i.timeRemaining()>0||i.didTimeout){const l=document.createElement("script");l.src=`https://www.googletagmanager.com/gtag/js?id=${MZ}`,l.async=!0,document.head.appendChild(l),l.onload=()=>{window.dataLayer=window.dataLayer||[];function c(...u){window.dataLayer.push(arguments)}c("js",new Date),c("config",MZ),n&&c("event","conversion",{send_to:Qft}),s(!0)}}else window.requestIdleCallback(a)};"requestIdleCallback"in window?window.requestIdleCallback(a,{timeout:5e3}):a({timeRemaining:()=>1/0,didTimeout:!0})}},[e,n,r]),null});vve.displayName="GoogleTagManager";const Xft=1e3*60,xve=I.memo(()=>(f.useEffect(()=>{ui("phone_home");const e=setInterval(()=>ui("phone_home"),Xft);return()=>clearInterval(e)},[]),null));xve.displayName="ET";const bve=Wt("WindowsAppPanelContext",null),Zft=({children:e})=>{const t=f.useRef(null),n=f.useRef(!1),r=jt(),{device:{isWindowsApp:s}}=At(),[a,i]=f.useState(!1),l=!!(s&&r?.includes(s1)),c=f.useCallback(async()=>{const h=await hP({ref:t.current});i(h);const g=()=>i(!0),y=()=>i(!1);return mv("show",g,{ref:t.current}),mv("hide",y,{ref:t.current}),()=>{try{t.current&&(gP("show",{ref:t.current}),gP("hide",{ref:t.current}))}catch(v){ne.warn("Error removing window listeners during cleanup",v)}}},[t]),u=f.useCallback(async()=>{if(n.current)return ne.info("Already creating window, skipping"),!1;if(t.current)try{return await hP({ref:t.current}),ne.info("Existing window is still valid, skipping creation"),!0}catch{ne.warn("Existing window reference is invalid, will create new window"),t.current=null}try{ne.info("Starting panel window creation"),n.current=!0;const h=await Ort({width:720,height:350,transparent:!0,show:!1,frame:!1,alwaysOnTop:!0,type:"panel"});if(!h)throw new Error("Failed to create window - no window reference returned");const g=await Urt({ref:h});if(!g)throw new Error("Failed to get web contents");const y=await Hrt({webPreferences:{nodeIntegration:!0,contextIsolation:!1}});if(!y)throw new Error("Failed to create view");await Lrt({ref:h,viewRef:y});const v=new URL(s1,window.location.origin).toString();await zrt({ref:g},v),t.current=h;const x=await c();if(x){const b=t.current;mv("close",x,{ref:b})}return mv("close",()=>{},{ref:h,preventDefault:!0}),!0}catch(h){return ne.error("Error creating panel window: ",h),t.current=null,!1}finally{n.current=!1}},[c]),d=f.useCallback(async()=>{try{if(!t.current)return ne.info("No panel window to hide"),!1;try{return await Frt({ref:t.current}),!0}catch(h){return ne.warn("Error hiding panel, window may be invalid",h),t.current=null,!1}}catch(h){return ne.warn("Error in hidePanel: ",h),!1}},[]),m=f.useCallback(async()=>{try{if(t.current){if(a){ne.info("Panel window is already visible, skipping centering");return}}else if(!await u())return;const h=await $rt(),g=(await Wrt(h)).bounds,[y=0,v]=await Drt({ref:t.current});await Brt({ref:t.current},Math.round(g.x+(g.width-y)/2),Math.round(g.y+g.height*.3)),await ZF({ref:t.current}),await XF({ref:t.current})}catch(h){ne.warn("Error showing panel: ",h)}},[u,a]),p={isVisible:a,isWindowsAppPanelView:l,handleShowPanel:m,handleHidePanel:d,createPanelWindow:u};return o.jsx(bve.Provider,{value:p,children:e})},Gm=()=>{const e=f.useContext(bve);if(!e)throw new Error("useWindowsAppPanel must be used within a WindowsAppPanelProvider");return e};var kZ={};const Jft="pplx.hasUpdated",emt=Math.random()*1e3*60*30,tmt=0,nmt=1e3*60*30,rmt=1e3*60,TZ=1e3*60*60,NZ=1e3*30,_ve=I.memo(({version:e})=>{const{session:t}=Et(),n=t?.user?.email?.endsWith("@perplexity.ai"),r=f.useRef(e),{deprecatedOpenToast:s}=gn(),{isWindowsAppPanelView:a}=Gm(),{inApp:i}=Vo(),{$t:l}=Z(),c=fn(),[u,d]=dU(Jft,!1),m=f.useRef(!1),p=Dme(),h=f.useRef(Date.now());r.current=e;const g=n?tmt:emt,y=n?rmt:nmt,v=f.useCallback(async()=>{try{if(!m.current){const C=await fve();ui("idle_refresh_check_version",{isCometSidecarClient:!!kZ.NEXT_PUBLIC_IS_SIDECAR_BUILD,currentVersion:r.current,latestVersion:C}),m.current=!!(r.current&&C&&r.current!==C)}if(document.hidden||p()||Date.now()-h.current<NZ)return;m.current&&(!c&&d(!0),await c3(),ui("idle_refresh"),p5("Idle refresh"))}catch{ne.log("Error getting build version")}},[c,d,p]),x=f.useMemo(()=>$s(v,g,{maxWait:TZ,leading:!1,trailing:!0}),[v,g]),b=f.useCallback(()=>{m.current?v():x()},[v,x]),_=f.useMemo(()=>$s(b,NZ,{maxWait:TZ,leading:!1,trailing:!0}),[b]),w=f.useCallback(()=>{h.current=Date.now(),_()},[_]);return f.useEffect(()=>{u&&!a&&!i&&(d(!1),s(l({defaultMessage:"Updated to latest version",id:"5SFf7ytcaw"}),"success",4))},[]),f.useEffect(()=>{const C=kZ.NEXT_PUBLIC_IS_SIDECAR_BUILD?setInterval(b,y):null;return document.addEventListener("visibilitychange",w),window.addEventListener("focus",w),window.addEventListener("keydown",w),window.addEventListener("mousedown",w),()=>{C&&clearInterval(C),document.removeEventListener("visibilitychange",w),window.removeEventListener("focus",w),window.removeEventListener("keydown",w),window.removeEventListener("mousedown",w)}},[b,y,w]),null});_ve.displayName="IdleRefresh";const wve=I.memo(function(){const{session:t}=Et(),n=f.useMemo(()=>{if(t)return{id:t.user.id,name:t.user.name,email:t.user.email,isPro:!!t.user.subscription_status&&t.user.subscription_status!=="none"}},[t]);if(!n)return null;const r=qb(globalThis.navigator?.userAgent??"");return o.jsxs(o.Fragment,{children:[o.jsx(MRe,{session:n,isWindowsApp:r}),o.jsx(kRe,{session:n,isWindowsApp:r})]})});wve.displayName="Instrumentation";async function smt(){const e=await fetch("https://pplx-next-static-public.perplexity.ai/version/min-version.json",{method:"GET",headers:{"Content-Type":"application/json"}}),{minVersion:t,jitter:n}=await e.json();return{minVersion:t,jitter:n}}var amt={};const jZ=30,omt=0,imt=1e3*60*60,Fj=1e3*30,lmt="pplx.hasUpdated",Cve=I.memo(({minVersion:e})=>{const{session:t}=Et(),n=t?.user?.email?.endsWith("@perplexity.ai"),r=f.useRef(e),s=f.useRef(0),a=f.useRef(!1),{deprecatedOpenToast:i}=gn(),{isWindowsAppPanelView:l}=Gm(),{inApp:c}=Vo(),{$t:u}=Z(),d=fn(),[m,p]=dU(lmt,!1),h=Dme(),{env:{isLocalhost:g}}=At(),y=f.useRef(Date.now()),v=f.useRef(null);r.current=e;const x=f.useCallback(async()=>{try{if(g)return;if(!a.current){const{minVersion:w,jitter:C}=await smt();if(ui("min_version_refresh_check_version",{isCometSidecarClient:!!amt.NEXT_PUBLIC_IS_SIDECAR_BUILD,currentVersion:r.current,latestVersion:w}),s.current=n?omt:Math.max(C||jZ,jZ),!r.current&&w){r.current=w;return}a.current=!!(w&&r.current&&w>r.current)}if(document.hidden||h()||Date.now()-y.current<Fj)return;a.current&&!v.current&&(v.current=setTimeout(async()=>{if(v.current=null,document.hidden||h()||Date.now()-y.current<Fj){s.current=0;return}!d&&p(!0),await c3(),ui("min_version_refresh"),p5("Min version refresh")},Math.random()*s.current*1e3*60))}catch{ne.log("Error getting min version")}},[g,h,d,p,n]);f.useEffect(()=>{m&&!l&&!c&&(p(!1),i(u({defaultMessage:"Updated to latest version",id:"5SFf7ytcaw"}),"success",4))},[]);const b=f.useMemo(()=>$s(x,Fj,{maxWait:imt,leading:!1,trailing:!0}),[x]),_=f.useCallback(()=>{y.current=Date.now(),b()},[b]);return f.useEffect(()=>(document.addEventListener("visibilitychange",_),window.addEventListener("focus",_),window.addEventListener("keydown",_),window.addEventListener("mousedown",_),()=>{document.removeEventListener("visibilitychange",_),window.removeEventListener("focus",_),window.removeEventListener("keydown",_),window.removeEventListener("mousedown",_)}),[_]),null});Cve.displayName="MinVersionRefresh";async function cmt(){try{return(await(await fetch("/cdn-cgi/trace")).text()).split(`
`).reduce((n,r)=>{const[s,a]=r.split("=");return n[s]=a??"",n},{loc:"US"})}catch(e){return ne.error("Error getting Cloudflare trace",e),{loc:"US"}}}function qm(){const{data:e}=We({queryKey:["cloudflare-trace"],queryFn:cmt});return f.useMemo(()=>e?.loc??"US",[e])}const umt=({children:e,hostname:t})=>{const{session:n}=Et(),r=qm();return o.jsx(ant,{hostname:t,session:n??void 0,cfCountry:r,children:e})};class Uj{static cancelOneTap(t=!1){if(typeof window>"u"||!window)return!0;const n=window.location.pathname;return!![{match:"/",condition:()=>t},{match:"/welcome",condition:()=>t},{match:"/search/new"},{match:"/join/",startsWith:!0},{match:"/onboarding",startsWith:!0},{match:"/search/render",startsWith:!0},{match:"/auth/windows-app",startsWith:!0},{match:"/auth/sso",startsWith:!0},{match:"/auth/error",startsWith:!0}].some(({match:s,startsWith:a,condition:i})=>(a?n.startsWith(s):n===s)&&(!i||i()))}static getLoginSource(){if(!window)return Oe.GOOGLE_ONETAP_UNKNOWN;const t=window.location.pathname;return t?t==="/"?Oe.GOOGLE_ONETAP_HOME:t.startsWith("/search/")?Oe.GOOGLE_ONETAP_THREAD:t.startsWith("/page/")?Oe.GOOGLE_ONETAP_PAGE:t.startsWith("/discover")?Oe.GOOGLE_ONETAP_DISCOVER:Oe.GOOGLE_ONETAP_UNKNOWN:Oe.GOOGLE_ONETAP_UNKNOWN}}const AZ=500,dmt=4,Sve=Wt("GoogleOneTapContext",{promptSkipped:!1});function fmt(e){const{children:t}=e,n=f.useRef(0),r=f.useRef(!1),[s,a]=f.useState(!1),i=rt(),{isMobileUserAgent:l}=xe(),u=to().erp,d=f.useCallback(async m=>{if(!m||Uj.cancelOneTap())return;const p=Uj.getLoginSource(),h=typeof window<"u"?new URL(window.location.href):new URL("/","https://www.perplexity.ai"),g=new URLSearchParams({[oc]:p});h.search=g.toString();const y={credential:m.credential,callbackUrl:h.toString()};await pv("googleonetap",y)},[]);return f.useEffect(()=>{if(typeof window>"u"||i||l||["new_tab","sidecar"].includes(u??""))return;function m(){if(!r.current&&(n.current+=1,!(n.current>dmt))){if(!window.google?.accounts?.id){setTimeout(m,AZ);return}r.current=!0,!Uj.cancelOneTap()&&(window.google.accounts.id.initialize({client_id:"60244564555-30175ip7vg79fobh0rk1sur3pdutj9l1.apps.googleusercontent.com",callback:d,auto_select:!0,use_fedcm_for_prompt:!0}),fn()?a(!0):window.google.accounts.id.prompt(h=>{a(h.isSkippedMoment())}))}}const p=setTimeout(m,AZ);return()=>{clearTimeout(p)}},[d,l,i,u]),o.jsx(Sve.Provider,{value:{promptSkipped:s},children:t})}function mmt(){return f.useContext(Sve)}const DU=fy("LocalPropsContext",()=>pi(e=>({tasksModeFocusStepUUID:void 0,actions:{setTasksModeFocusStepUUID:t=>{e({tasksModeFocusStepUUID:t})}}}))),pmt=DU.Provider,hmt=DU.useSelector,gmt=DU.useTrackedState,Ctn=()=>hmt(e=>e.actions),Stn=gmt,Eve=({reason:e})=>{const{connectors:t}=ma({reason:e});return f.useMemo(()=>{const n=new Set(t?.connectors?.map(s=>s.name)??[]),r=new Set(t?.connectors?.filter(s=>s.connected===!0)?.map(s=>s.name)??[]);return{isAllowed:s=>n.has(s),isConnected:s=>r.has(s)}},[t])},ymt=e=>e?.length?e.filter(dy):void 0;function Mve({reason:e,allowCometRestrictions:t=!0}){const n=Z(),r=gt(),{hasAccessToProFeatures:s}=_t(),{isEnterprise:a,organization:i}=_n({reason:e}),l=UF({reason:e,feature:ld.SOURCES}),c=fn(),{enabledConnectors:u,enabledNonFileConnectors:d,enabledFileConnectors:m}=_y({reason:e}),{sources:p}=Jn(),h=Cu(),{isAllowed:g}=Eve({reason:e}),[y,v]=f.useState(!1),x=f.useCallback(()=>{v(!0)},[]),b=f.useCallback(()=>{v(!1)},[]),{value:_}=Rr({flag:"gcal-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:i?.uuid??""}}),{value:w}=Rr({flag:"enable-remote-mcp-tools",defaultValue:!1,extraAttributes:{orgUuid:i?.uuid??""}}),C=w&&s,S=_&&(!c||!t),{value:E}=Rr({flag:"outlook-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:i?.uuid??""}}),M=f.useCallback(L=>{L.stopPropagation(),r.push(`${h}/files`)},[r,h]),k=f.useMemo(()=>o.jsx("div",{className:"mr-sm flex",children:o.jsx(bn,{tooltipText:n.formatMessage({defaultMessage:"Manage my files",id:"o8eQg7byBv"}),children:o.jsx(D,{color:"light",onClick:M,children:o.jsx(ce,{icon:Fie,size:"sm"})})})}),[n,M]),A=f.useMemo(()=>{const L=m.map(N=>{const T=N.name,j=ai(T)??"";return o.jsx(wt,{user:j,rounded:!1,showBackground:!1,size:"small"},T)});let P=null;return L.length>0&&(P=_m(L,{...L.length<=3&&{rightText:o.jsx(D,{color:"light",variant:"tinyRegular",children:n.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"})})},maxVisuals:L.length,size:"sm"})),{web:{icon:$m,avatar:void 0,text:n.formatMessage({defaultMessage:"Web",id:"B6CB3748fZ"}),description:n.formatMessage({defaultMessage:"Search across the entire Internet",id:"L+Gw+J7uDs"}),type:"toggle"},scholar:{icon:h2,avatar:void 0,text:n.formatMessage({defaultMessage:"Academic",id:"mbxIJyT8C5"}),description:n.formatMessage({defaultMessage:"Search academic papers",id:"IVRQQmrqTD"}),type:"toggle"},...a?{}:{social:{icon:Vie,avatar:void 0,text:n.formatMessage({defaultMessage:"Social",id:"qOLogguG/7"}),description:n.formatMessage({defaultMessage:"Discussions and opinions",id:"g9xPuArp4v"}),type:"toggle"}},edgar:{icon:Bie,avatar:void 0,text:cD,description:"Search SEC filings",type:"toggle"},...a?{org:{icon:Uie,avatar:void 0,text:n.formatMessage({defaultMessage:"Org files",id:"iWDsD738/m"}),description:n.formatMessage({defaultMessage:"Search files from your organization",id:"Ak5CW53mGi"}),type:"toggle"}}:{},...C&&g("linear_alt")?{linear_alt:{icon:void 0,avatar:o.jsx(wt,{user:Kx,size:"small",rounded:!1,showBackground:!1,altText:Vf}),text:Vf,description:n.formatMessage({defaultMessage:"Search workspace issues",id:"7GhXgujkn6"}),type:"toggle"}}:{},...C&&g("linear")?{linear:{icon:void 0,avatar:o.jsx(wt,{user:Kx,size:"small",rounded:!1,showBackground:!1,altText:Vf}),text:Vf,description:n.formatMessage({defaultMessage:"Search workspace issues",id:"7GhXgujkn6"}),type:"toggle"}}:{},...C&&g("notion_mcp")?{notion_mcp:{icon:void 0,avatar:o.jsx(wt,{user:Ob,size:"small",rounded:!1,showBackground:!1,altText:rg}),text:rg,description:n.formatMessage({defaultMessage:"Search workspace pages",id:"Dfr7kK7JJA"}),type:"toggle"}}:{},...C&&g("slack")?{slack:{icon:void 0,avatar:o.jsx(wt,{user:Yx,size:"small",rounded:!1,showBackground:!1,altText:Qx}),text:Qx,description:n.formatMessage({defaultMessage:"Search workspace messages",id:"wc4K5cTYcm"}),type:"toggle"}}:{},...C&&g("github_mcp_direct")?{github_mcp_direct:{icon:void 0,avatar:o.jsx(wt,{user:j5,size:"small",rounded:!1,showBackground:!1,altText:Zx}),text:Zx,description:n.formatMessage({defaultMessage:"Search GitHub repositories",id:"PfrUPmxSqk"}),type:"toggle"}}:{},...C&&g("asana_mcp_direct")?{asana_mcp_direct:{icon:void 0,avatar:o.jsx(wt,{user:Jx,size:"small",rounded:!1,showBackground:!1,altText:Sl}),text:Sl,description:n.formatMessage({defaultMessage:"Search Asana workspace",id:"nL3T2yHGLc"}),type:"toggle"}}:{},...C&&g("asana_mcp_merge")?{asana_mcp_merge:{icon:void 0,avatar:o.jsx(wt,{user:Jx,size:"small",rounded:!1,showBackground:!1,altText:Sl}),text:Sl,description:n.formatMessage({defaultMessage:"Search Asana workspace",id:"nL3T2yHGLc"}),type:"toggle"}}:{},...C&&g("atlassian_mcp_direct")?{atlassian_mcp_direct:{icon:void 0,avatar:o.jsx(wt,{user:A5,size:"small",rounded:!1,showBackground:!1,altText:e1}),text:e1,description:n.formatMessage({defaultMessage:"Search Confluence pages and Jira projects",id:"KVekzaQOfl"}),type:"toggle"}}:{},...C&&g("slack_direct")?{slack_direct:{icon:void 0,avatar:o.jsx(wt,{user:Yx,size:"small",rounded:!1,showBackground:!1,altText:Xx}),text:Xx,description:n.formatMessage({defaultMessage:"Search workspace messages",id:"wc4K5cTYcm"}),type:"toggle"}}:{},...C&&g("jira_mcp_merge")?{jira_mcp_merge:{icon:void 0,avatar:o.jsx(wt,{user:dD,size:"small",rounded:!1,showBackground:!1,altText:t1}),text:t1,description:n.formatMessage({defaultMessage:"Search Jira projects",id:"EwciVPsXk3"}),type:"toggle"}}:{},...C&&g("confluence_mcp_merge")?{confluence_mcp_merge:{icon:void 0,avatar:o.jsx(wt,{user:fD,size:"small",rounded:!1,showBackground:!1,altText:n1}),text:n1,description:n.formatMessage({defaultMessage:"Search Confluence pages",id:"TD+F2o03sr"}),type:"toggle"}}:{},...C&&g("microsoft_teams_mcp_merge")?{microsoft_teams_mcp_merge:{icon:void 0,avatar:o.jsx(wt,{user:mD,size:"small",rounded:!1,showBackground:!1,altText:r1}),text:r1,description:n.formatMessage({defaultMessage:"Search Teams messages",id:"5Z2BgVurdk"}),type:"toggle"}}:{},...w&&g("wiley_mcp_cashmere")?{wiley_mcp_cashmere:{icon:void 0,avatar:o.jsx(wt,{user:ou,size:"small",rounded:!1,showBackground:!1,altText:Wx}),text:Wx,description:n.formatMessage({defaultMessage:"Search Wiley",id:"/0quh5kDz/"}),type:"toggle"}}:{},...w&&g("cbinsights_mcp_cashmere")?{cbinsights_mcp_cashmere:{icon:void 0,avatar:o.jsx(wt,{user:w5,size:"small",rounded:!1,showBackground:!1,altText:Hx}),text:Hx,description:n.formatMessage({defaultMessage:"Search CB Insights",id:"agQ19cy5aQ"}),type:"toggle"}}:{},...w&&g("pitchbook_mcp_cashmere")?{pitchbook_mcp_cashmere:{icon:void 0,avatar:o.jsx(wt,{user:C5,size:"small",rounded:!1,showBackground:!1,altText:zx}),text:zx,description:n.formatMessage({defaultMessage:"Search PitchBook",id:"7wJy/mgCKb"}),type:"toggle"}}:{},...w&&g("statista_mcp_cashmere")?{statista_mcp_cashmere:{icon:void 0,avatar:o.jsx(wt,{user:S5,size:"small",rounded:!1,showBackground:!1,altText:Gx}),text:Gx,description:n.formatMessage({defaultMessage:"Search Statista",id:"4FPGoQlMEg"}),type:"toggle"}}:{},...l&&a?{my_files:{icon:H7,avatar:void 0,text:n.formatMessage({defaultMessage:"My files",id:"bYbrKKlKgS"}),description:m.length===0?n.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"}):"",bottomElement:P,rightElement:k,type:"toggle"}}:{}}},[m,n,a,C,w,g,l,k]),R=f.useMemo(()=>({...u?.some(P=>P.name==="crunchbase")?{crunchbase:{icon:void 0,avatar:o.jsx(wt,{user:x5,rounded:!1,showBackground:!1,size:"small",altText:"Crunchbase"}),text:b5,type:"toggle"}}:{},...u?.some(P=>P.name==="factset")?{factset:{icon:void 0,avatar:o.jsx(wt,{user:v5,rounded:!1,showBackground:!1,size:"small",altText:"FactSet"}),text:Pb,type:"toggle"}}:{},...u?.some(P=>P.connection_type==="GOOGLE_DRIVE")&&l?{google_drive:{icon:void 0,avatar:o.jsx(wt,{user:bo(Tt.GOOGLE_DRIVE)||"",rounded:!1,showBackground:!1,size:"small",altText:tg}),text:tg,type:"toggle"}}:{},...u?.some(P=>P.connection_type==="ONEDRIVE")&&l?{onedrive:{icon:void 0,avatar:o.jsx(wt,{user:bo(Tt.ONEDRIVE)||"",rounded:!1,showBackground:!1,size:"small",altText:Cd}),text:Cd,type:"toggle"}}:{},...u?.some(P=>P.connection_type==="SHAREPOINT")&&l?{sharepoint:{icon:void 0,avatar:o.jsx(wt,{user:bo(Tt.SHAREPOINT)||"",rounded:!1,showBackground:!1,size:"small",altText:Sd}),text:Sd,type:"toggle"}}:{},...u?.some(P=>P.connection_type==="WILEY")&&a?{wiley:{icon:void 0,avatar:o.jsx(wt,{user:ou,rounded:!1,showBackground:!1,size:"small",altText:"Wiley"}),text:_5,type:"toggle"}}:{},...u?.some(P=>P.connection_type==="DROPBOX")&&l?{dropbox:{icon:void 0,avatar:o.jsx(wt,{user:bo(Tt.DROPBOX)||"",rounded:!1,showBackground:!1,size:"small",altText:iu}),text:iu,type:"toggle"}}:{},...u?.some(P=>P.connection_type==="GCAL")&&S?{gcal:{icon:void 0,avatar:o.jsx(wt,{user:bo(Tt.GCAL)||"",rounded:!1,showBackground:!1,size:"small",altText:qx}),text:qx,type:"toggle"}}:{},...u?.some(P=>P.connection_type==="OUTLOOK")&&E?{outlook:{icon:void 0,avatar:o.jsx(wt,{user:bo(Tt.OUTLOOK)||"",rounded:!1,showBackground:!1,size:"small",altText:sg}),text:sg,type:"toggle"}}:{}}),[u,a,l,S,E]),O=f.useMemo(()=>{const L=d.filter(V=>!(V.connection_type==="OUTLOOK"&&!E||V.connection_type==="GCAL"&&!S)),P=[...new Set(L.map(V=>V.name))],N=P.map(V=>{const $=ai(V)??"";return o.jsx(wt,{user:$,rounded:!1,showBackground:!1,size:"small"},V)}),j=(p?.filter(V=>L.some($=>$.name===V))||[]).length>0;let F=null;L.length>0&&(F=_m(N,{rightText:o.jsx(D,{color:"light",variant:"tinyRegular",children:j?n.formatMessage({defaultMessage:"{ num } connected",id:"vKOo9VV7WK"},{num:P.length}):n.formatMessage({defaultMessage:"{ num } available",id:"eEfaubop4a"},{num:P.length})}),maxVisuals:N.length,size:"sm"}));const U=Object.entries(R).filter(([V])=>L.some($=>$.name===V));return U.length===0?{type:"default",text:n.formatMessage({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),icon:FH,onClick:()=>r.push(`${h}/connectors`),submenuItems:[]}:{type:"nested",isSubmenuOpen:y,onSubmenuOpen:x,onSubmenuClose:b,text:n.formatMessage({defaultMessage:"More connectors",id:"3l4CuVEyHY"}),icon:FH,menuWidth:"300px",bottomElement:F,submenuItems:[...U,{type:"separator"},{type:"default",text:n.formatMessage({defaultMessage:"Manage connectors",id:"cqx+RdJnHp"}),onClick:()=>r.push(`${h}/connectors`)}]}},[y,n,r,d,R,x,b,h,p,S,E]);return f.useMemo(()=>({RootSources:A,ConnectionSources:R,NestedConnectionSources:O}),[R,O,A])}var Si={},IZ;function vmt(){if(IZ)return Si;IZ=1;var e=Si&&Si.__awaiter||function(s,a,i,l){function c(u){return u instanceof i?u:new i(function(d){d(u)})}return new(i||(i=Promise))(function(u,d){function m(g){try{h(l.next(g))}catch(y){d(y)}}function p(g){try{h(l.throw(g))}catch(y){d(y)}}function h(g){g.done?u(g.value):c(g.value).then(m,p)}h((l=l.apply(s,a||[])).next())})};Object.defineProperty(Si,"__esModule",{value:!0}),Si.identify=Si.subscribe=Si.publish=void 0;const t=(s,a)=>{window.todesktop.ipc.publish(s,a)};Si.publish=t;const n=(s,a)=>window.todesktop.ipc.subscribe(s,a);Si.subscribe=n;const r=()=>e(void 0,void 0,void 0,function*(){return window.todesktop.ipc.identify()});return Si.identify=r,Si}var RZ=vmt();const j3=()=>{const{device:{isWindowsApp:e}}=At(),t=f.useRef({}),n=f.useRef({}),r=f.useCallback((a,i)=>{if(e)try{RZ.publish(a,i)}catch{try{if(typeof BroadcastChannel<"u"){let c=t.current[a];c||(c=new BroadcastChannel(a),t.current[a]=c),c.postMessage(i)}else ne.warn("Neither IPC publish nor BroadcastChannel are available in this runtime")}catch(c){ne.warn("Error using BroadcastChannel: ",c)}}},[e]),s=f.useCallback((a,i)=>{if(e)try{return RZ.subscribe(a,i)}catch{try{if(typeof BroadcastChannel<"u"){let c=t.current[a];c||(c=new BroadcastChannel(a),t.current[a]=c);let u=n.current[a];u||(u=new Set,n.current[a]=u);const d=m=>{i(m.data)};return u.add(i),c.addEventListener("message",d),()=>{c.removeEventListener("message",d),u.delete(i),u.size===0&&(c.close(),delete t.current[a],delete n.current[a])}}ne.warn("Neither IPC subscribe nor BroadcastChannel are available in this runtime");return}catch(c){ne.warn("Error using BroadcastChannel: ",c);return}}},[e]);return f.useMemo(()=>({safeWindowsIpcPublish:r,safeWindowsIpcSubscribe:s}),[r,s])};function Dy({defaultSource:e,reason:t}){const{sources:n,setSources:r,setRecency:s}=Jn(),a=Nt(),{fileRepoInfo:i}=nl({reason:t}),{RootSources:l,ConnectionSources:c}=Mve({reason:t}),{isLoading:u}=_n({reason:t}),{device:{isWindowsApp:d}}=At(),{safeWindowsIpcPublish:m,safeWindowsIpcSubscribe:p}=j3(),h=i.file_repository_type==="COLLECTION",g=h?`space-${i.owner_id}`:"home",y=Zi(),v=Array.isArray(y?.slug)?y.slug[0]:y?.slug,{collection:x,isLoading:b}=cc({collectionSlug:v,reason:t}),_=b?void 0:x?.enable_web_by_default,w=f.useRef(p);f.useEffect(()=>{w.current=p},[p]);const C=f.useRef(Math.random().toString(36).substring(7)),S=f.useCallback(k=>{let A=[];return n?.includes(k)?(A=n.filter(R=>R!==k),k==="web"&&(n.includes("crunchbase")&&(A=n.filter(R=>R!=="crunchbase"&&R!=="web")),s?.(null))):(A=[...n||[]],k==="crunchbase"&&!A.includes("web")&&A.push("web"),A.push(k)),h&&mN(A,g),r(A),d&&m(Gu,{type:Gu,sources:A,windowId:C.current}),A},[h,g,r,s,n,d,m]),E=f.useCallback(k=>{const A=[...k];A.includes("crunchbase")&&!A.includes("web")&&A.push("web"),h&&mN(A,g),r(A),d&&m(Gu,{type:Gu,sources:A,windowId:C.current})},[h,d,g,m,r]);f.useEffect(()=>{if(!d)return;const k=w.current(Gu,A=>{A.type===Gu&&A.windowId!==C.current&&r(A.sources)});return()=>{k?.()}},[d,r,n]);const M=f.useMemo(()=>{if(b)return new Set([]);if(h)return _?new Set(["web"]):new Set([]);if(e)return new Set([e]);const A=(a?.get("sources")??"web").split(",").map(R=>R.trim()).filter(dy);return new Set(A||["web"])},[h,b,_,a,e]);return f.useEffect(()=>{if(u)return;let k=h?rXe(g)||[...M]:[...M];if(h&&_&&!k.includes("web")?k.push("web"):h&&!_&&k.includes("web")&&(k=k.filter(R=>R!=="web")),JSON.stringify(n||[])!==JSON.stringify(k)){const R=k.filter(O=>O in l||O in c);h&&mN(R,g),r(R)}},[u,h,_]),f.useMemo(()=>({DEFAULT_SOURCES:M,isSpace:h,isSpaceEnableWebByDefault:_,updateSources:S,overwriteSources:E}),[M,h,_,E,S])}const xmt=({reason:e})=>{const{safeWindowsIpcPublish:t}=j3(),{actions:n}=hn(),{device:{isWindowsApp:r}}=At(),s=rt(),{isPro:a}=_t(),{DEFAULT_SOURCES:i}=Dy({reason:e}),l=f.useRef(n),c=f.useRef(t);f.useEffect(()=>{l.current=n,c.current=t},[n,t]);const u=f.useCallback(()=>{Hi("/?voice-mode=true","Voice mode")},[]),d=f.useCallback(()=>{Hi("/?v2v=true","V2V mode")},[]),m=f.useCallback(g=>{const y=g.searchParams,v=y.get("q"),x=y.get("incognito"),_=(y.get("sources")??"").split(",").map(S=>S.trim()).filter(dy),w=y.get("search_mode"),C=w?Qqe[w]:void 0;x!==null&&l.current.setIsIncognito(x==="true"),_&&t(Gu,{type:Gu,sources:_}),C?.model&&C?.mode&&t(sh,{type:sh,model:C.model,searchMode:C.mode}),v&&c.current(Dde,{query:v,promptSource:"user",querySource:"windows-app-shortcut",incognitoOverride:x,sourcesOverride:_??[]})},[t]),p=f.useCallback(g=>{const y=g.searchParams,v=y.get("type"),x=y.get("callback");if(!v||!x)return;const b=v.split(","),_=new URLSearchParams;b.forEach(C=>{switch(C){case"sources":_.set("sources",Array.from(i).join(","));break;case"search-modes":_.set("search-modes",Object.values(ie).join(","));break;case"sign-in":_.set("sign-in",s?"true":"false");break;case"subscription":_.set("subscription",a?"true":"false");break}});const w=`${x}?${_.toString()}`;window.open(w,"_blank")},[s,a,i]),h=f.useMemo(()=>new Map([["voice-mode",u],["v2v",d],["search",g=>m(g)],["request",g=>p(g)]]),[u,d,m,p]);f.useEffect(()=>{if(!r)return;const g=Mrt("openProtocolURL",(v,x)=>{const b=new URL(x.url);for(const[_,w]of h)if(b.toString().includes(_)){x.preventDefault(),w(b);break}}),y=async()=>{await(await g)()};return()=>{y()}},[r,h])},PP="keyboard-shortcuts",bmt=(e,t)=>{const n={[br.NEW_THREAD]:{[zn.MACOS]:[],[zn.WINDOWS]:[]},[br.STOP_GENERATING]:{[zn.MACOS]:[],[zn.WINDOWS]:[]},[br.TOGGLE_INCOGNITO]:{[zn.MACOS]:[],[zn.WINDOWS]:[]},[br.SHOW_SHORTCUTS]:{[zn.MACOS]:[],[zn.WINDOWS]:[]},[br.FOCUS_ASK_INPUT]:{[zn.MACOS]:[],[zn.WINDOWS]:[]},[br.TOGGLE_DICTATION]:{[zn.MACOS]:[],[zn.WINDOWS]:[]},[br.TOGGLE_V2V]:{[zn.MACOS]:[],[zn.WINDOWS]:[]}},r=qpe(e,t);[br.NEW_THREAD,br.TOGGLE_V2V].forEach(s=>{const a=r.find(i=>i.type===s);a&&(n[s]={[zn.MACOS]:a.macos,[zn.WINDOWS]:a.windows})});try{const s=Re.getItem(PP);if(s){const a=JSON.parse(s);[br.NEW_THREAD,br.TOGGLE_V2V].forEach(i=>{const l=a.find(c=>c.type===i);l&&(n[i]={[zn.MACOS]:l.macos,[zn.WINDOWS]:l.windows})})}}catch(s){ne.warn("Error reading keyboard shortcuts:",s)}return n},_mt=(e,t)=>pi(n=>({globalShortcuts:bmt(e,t),setShortcut:(r,s,a)=>n(i=>{const l={...i.globalShortcuts,[r]:{...i.globalShortcuts[r],[s]:a}};try{const c=Re.getItem(PP),d=(c?JSON.parse(c):[]).map(m=>m.type===r?{...m,[s]:a}:m);Re.setItem(PP,JSON.stringify(d))}catch(c){ne.warn("Error saving keyboard shortcuts:",c)}return{globalShortcuts:l}})}));let Bj=null;const OP=e=>{const{device:{isWindowsApp:t}}=At(),n=Z();return Bj||(Bj=_mt(n,t)),Bj(e)},wmt=()=>{const{handleShowPanel:e}=Gm(),t=OP(c=>c.setShortcut),{getMainWindowRef:n}=Cmt(),r=OP(c=>c.globalShortcuts),s=f.useCallback(async()=>{const c=await n();if(!c)return;await ZF({ref:c}),await XF({ref:c});const u=new CustomEvent("toggleVoiceToVoice");document.dispatchEvent(u)},[n]),a=f.useCallback(async(c,u)=>{try{const d=Array.isArray(c)?c.join("+"):c;let m;switch(u){case br.NEW_THREAD:m=e;break;case br.TOGGLE_V2V:m=s;break;default:return ne.warn(`No handler registered for shortcut type: ${u}`),!1}return d&&d.trim()!==""&&await _j(d),await Prt(d,m),!0}catch(d){return ne.warn("Error registering shortcut:",d),!1}},[e,s]),i=f.useCallback(async(c,u,d)=>{try{const m=c.join("+"),p=u.join("+");if(m===p)return;m&&m.trim()!==""&&await _j(m),await a(p,d)&&t(d,zn.WINDOWS,u)}catch(m){ne.error("Error updating global shortcut:",m)}},[a,t]),l=f.useCallback(async c=>{const u=c.join("+");u&&u.trim()!==""&&await _j(u)},[]);return f.useMemo(()=>({shortcuts:r,registerShortcut:a,updateGlobalShortcut:i,unregisterShortcut:l}),[a,r,l,i])},kve=Wt("WindowsAppContext",null),Cmt=()=>{const e=f.useContext(kve);if(!e)throw new Error("useWindowsApp must be used within WindowsAppProvider");return e},Smt=()=>{const e=f.useRef(null);return{getMainWindowRef:f.useCallback(async()=>(e.current||(e.current=(async()=>{let n=await rX({id:"TJmK6yKBLiw389HLDdYy5"});return n||(n=await rX({id:"C195F2RyYDhfB93QW7vui"})),n})()),e.current),[])}},Emt=({children:e,getMainWindowRef:t})=>{const n="windows-app-provider-inner",{device:{isWindowsApp:r}}=At(),s=jt(),a=r&&!s?.includes(s1),{submitQuery:i}=Hs(),{isCopilot:l}=Jn(),{createPanelWindow:c,handleHidePanel:u}=Gm(),d=rt(),m=f.useRef(i),p=f.useRef(l),{safeWindowsIpcSubscribe:h}=j3();f.useEffect(()=>{m.current=i},[i]),xmt({reason:n}),f.useEffect(()=>{p.current=l},[l]);const{shortcuts:g,registerShortcut:y,unregisterShortcut:v}=wmt();f.useEffect(()=>{a&&(c(),u())},[a,c,u]);const x=f.useCallback(async b=>{const _=async(E=500)=>{const M=new AbortController,k=setTimeout(()=>M.abort(),E);try{const A=new Promise(R=>{hP().then(O=>{if(O){clearTimeout(k),R(!0);return}mv("show",()=>{clearTimeout(k),R(!0)})})});return await Promise.race([A,new Promise(R=>{M.signal.addEventListener("abort",()=>R(!1))})])}catch(A){return ne.warn("Error ensuring window is ready",{error:A}),!1}finally{clearTimeout(k);try{gP("show")}catch(A){ne.warn("Error removing show listeners during cleanup",A)}}},w=await t();if(await ZF({ref:w}),await XF({ref:w}),!await _())return;const C=b.query.trim();if(!C?.trim())return;const S=lo();m.current({rawQuery:C,copilotOverride:p.current?!0:void 0,attachments:b.attachments,collection:null,newFrontendContextUUID:S,promptSource:b.promptSource??"user",querySource:b.querySource??"home",timeFromFirstType:b.timeFromFirstType,shouldRedirectToBackendUUID:!0})},[t]);return f.useEffect(()=>{if(!a)return;const b=h(Dde,_=>{x(_)});return()=>{b?.()}},[a,x,h]),f.useEffect(()=>{if(!a)return;const b=[br.NEW_THREAD,...d?[br.TOGGLE_V2V]:[]];return b.forEach(_=>{const C=g[_][zn.WINDOWS].map(QK);y(C,_)}),()=>{b.forEach(_=>{const C=g[_][zn.WINDOWS].map(QK);v(C)})}},[y,a,g,d,v]),o.jsx(o.Fragment,{children:e})},Mmt=({children:e})=>{const{getMainWindowRef:t}=Smt(),n=f.useMemo(()=>({getMainWindowRef:t}),[t]);return o.jsx(kve.Provider,{value:n,children:o.jsx(Zft,{children:o.jsx(Emt,{getMainWindowRef:t,children:e})})})};var kmt={};const Tve=I.memo(function(){return f.useEffect(()=>{if(kmt.NEXT_PUBLIC_SW_ENABLED_LOCAL){oX();return}const t=to();t.env&&t.env!=="local"?oX():Jrt()},[]),null});Tve.displayName="ServiceWorker";var Tmt={};const cl=e=>{try{return JSON.parse(e)}catch{return{}}};function Nmt({reason:e}){const t=fn(),n=Zn(),r=f.useCallback(async(s,a)=>{if(ne.info("browserStep",s),s.browser_open_tab_content){const i=s.browser_open_tab_content,l=cl(i.extra_headers);ne.info("browserTool: browser_open_tab",{tool:i},{request_id:l[Dr]}),await Rtt({url:i.url,cometBrowser:n,stepUuid:s.uuid,extraHeaders:cl(i.extra_headers),reason:e})}else if(s.search_browser_content){const i=s.search_browser_content,l=cl(i.extra_headers);ne.info("browserTool: search_browser",{tool:i},{request_id:l[Dr]}),await Dtt(i,n,s.uuid,l,e)}else if(s.browser_close_tabs_content){const i=s.browser_close_tabs_content,l=i.payload;if(!l){ne.error("[useExecuteBrowserTool] browser_close_tabs_content payload is undefined",{browserStep:s},{reason:e,backend_uuid:a});return}const c=cl(i.extra_headers);ne.info("browserTool: browser_close_tabs",{tool:i},{request_id:c[Dr]}),await Ltt(l,n,s.uuid,c,e)}else if(s.browser_group_tabs_content){const i=s.browser_group_tabs_content,l=i.payloads,c=cl(i.extra_headers);ne.info("browserTool: browser_group_tabs",{tool:i},{request_id:c[Dr]}),await Ott(l,n,s.uuid,c,e)}else if(s.entropy_request_content){const i=s.entropy_request_content,l=i.extra_headers,c=cl(l)[Dr];ne.info("browserTool: entropy_request",{tool:i},{request_id:c}),i.tasks.forEach(u=>{ne.info("[comet] Submitting agent task",{task_id:u.uuid,entry_uuid:a,request_id:c}),n.submitTask({action:"startAgentFromPerplexity",type:"START_AGENT",extra_headers:l,base_url:i.base_url,entryId:a,...u,use_current_page:u.use_current_page&&!!Tmt.NEXT_PUBLIC_IS_SIDECAR_BUILD,capture_screenshot:!u.use_current_page&&!u.tab_id,is_mission_control:window.location.pathname.startsWith("/b/mission-control")||window.location.pathname.startsWith("/b/assistants")||i.is_mission_control})})}else if(s.get_url_content_content){const i=s.get_url_content_content,l=cl(i.extra_headers);if(ne.info("browserTool: get_url_content",{tool:i},{request_id:l[Dr]}),!t)return;const c={...i,key:s.uuid,request_id:l[Dr],pages:[...i.pages||[]]},u=n.GetContent(c);await Zu(u,s.uuid,{request_id:l[Dr]??""},e)}else if(s.browser_ungroup_content){const i=s.browser_ungroup_content;if(!i.payload){ne.error("[useExecuteBrowserTool] browser_ungroup_content payload is undefined",{browserStep:s},{reason:e,backend_uuid:a});return}const l={groupIds:i.payload.group_ids,tabIds:i.payload.tab_ids},c=cl(i.extra_headers),u=n.ungroupTabs(l,s.uuid,c[Dr]??"").then(d=>{if(!d.is_success)throw d;return{group_ids:d.groupIds,tab_ids:d.tabIds}});await Zu(u,s.uuid,{request_id:c[Dr]??""},e)}else if(s.browser_search_tab_groups_content){const i=s.browser_search_tab_groups_content,l=i.payload;if(!l){ne.error("[useExecuteBrowserTool] browser_search_tab_groups_content payload is undefined",{browserStep:s},{reason:e,backend_uuid:a});return}const c=cl(i.extra_headers),u=n.searchTabGroups(l,s.uuid,c[Dr]??"").then(d=>{if(!d.is_success)throw d;return{results:d.results.map(m=>({...m,color:Rhe(m.color)}))}});await Zu(u,s.uuid,{request_id:c[Dr]??""},e)}else if(s.browser_get_visible_tab_screenshot_content){const i=s.browser_get_visible_tab_screenshot_content,l=cl(i.extra_headers),c=n.GetVisibleTabScreenshot({key:s.uuid,request_id:l[Dr]??"",...i}).then(async u=>{const m=await(await fetch(u.data_url)).blob(),p=new File([m],"screenshot."+(i.format??"png"),{type:m.type}),h=await gU({file:p,forceImage:!0,reason:e,fileSource:"entropy"});if(!h||!h?.fields||!h.s3_bucket_url)throw new Error("Failed to create upload URL");const g=new FormData;Object.entries(h.fields).forEach(([x,b])=>{g.append(x,b)}),g.append("file",p);const y=await fetch(h.s3_bucket_url,{method:"POST",body:g});if(!y.ok)throw new Error(`Failed to upload screenshot: ${y.statusText}`);const v=await y.json();if(!v.secure_url)throw ne.error("[GetVisibleTabScreenshot] Upload did not return a secure URL",{response:v}),new Error("Upload did not return a secure URL");return{screenshot_url:v.secure_url}});await Zu(c,s.uuid,{request_id:l[Dr]??""},e)}else ne.error("[useExecuteBrowserTool] Unknown browser tool step",{browserStep:s},{reason:e,backend_uuid:a})},[n,t,e]);return f.useMemo(()=>({executeBrowserTool:r}),[r])}const Nve=I.memo(function(){const{executeBrowserTool:t}=Nmt({reason:"StreamMiddlewares"}),n=f.useCallback(s=>{if(!s||!s.browser_tool)return s;t(s.browser_tool,s.backend_uuid)},[t]),r=f.useMemo(()=>[n],[n]);return o.jsx(Ome,{middlewares:r})});Nve.displayName="StreamMiddlewares";const jmt=({reason:e})=>{const t=_y({reason:e}),n=MF({reason:e});return f.useMemo(()=>{const r=RH([...t.enabledConnectors,...t.enabledFileConnectors,...t.enabledNonFileConnectors].map(a=>a.name)),s=RH([...n.disabledConnectors,...n.disabledFileConnectors].map(a=>a.name));return{enabled:r,disabled:s}},[t,n])},Amt=({fileRepoInfo:e,reason:t})=>{const{$t:n}=Z(),r=ht(),s=["list_file_directory",e.file_repository_type,e.owner_id],{deprecatedOpenToast:a}=gn(),{session:i}=Et(),l=i?.user?.email??"",c=vt({mutationFn:async u=>{if(!u.nextURL)throw new Error("File must have a url");const d=await se.POST("/rest/file-repository/move-attachment-to-persistent-file-path",t,{body:{file_repository_info:e,file_url:u.nextURL},timeoutMs:Ut.MEDIUM,retries:2}),m=d.data;if(m&&await gF({request:{file_repository_info:e,file_index_params:[{file_s3_url:m.file_url_params.s3_object_url,file_size:u.file.size,filename:u.file.name,file_uuid:m.file_url_params.file_uuid,replace_existing:!1}]},reason:t}),!d.response.ok||!d.data)throw new Error("Failed to save file persistently");return d.data},onSuccess:(u,d)=>{const m={name:d.file.name,file_s3_url:u.file_url_params.s3_object_url,file_uuid:u.file_url_params.file_uuid,file_title:d.file.name,file_description:null,uploadedBy:l,date:new Date().toLocaleString(),state:"COMPLETE",size:d.file.size,isOptimistic:!0};r.setQueriesData({queryKey:s},h=>{if(!h)return h;const g=h.completedFiles||[];return{...h,completedFiles:[...g,m]}});const p=rF(e.owner_id,d.file.name);r.invalidateQueries({queryKey:p}),a(n({defaultMessage:"Saved file",id:"2HZW5WnkV3"}),"success",3)},onError:(u,d)=>{a(n({defaultMessage:"Failed to upload file",id:"x2gE8tKhMn"}),"error",3),ne.error("Error saving file with name",d.file.name,u)},onSettled:async()=>{await r.invalidateQueries({queryKey:s})}});return f.useMemo(()=>({saveFile:c.mutate,isLoading:c.isPending}),[c.isPending,c.mutate])},FU=({fileRepoInfo:e,fileName:t,reason:n})=>{const{session:r}=Et();return We({queryKey:rF(e.owner_id,t),refetchOnMount:!0,queryFn:async()=>((await iP({request:{fileRepositoryInfo:e,limit:_o,offset:0,searchTerm:t,fileStates:["COMPLETE"],email:r?.user?.email??""},reason:n}))?.files.length??0)>0,enabled:e.file_repository_type==="COLLECTION"&&!!e.owner_id&&t.length>0})},jve=({fileRepoInfo:e,fileExists:t,reason:n})=>{const{deprecatedOpenToast:r}=gn(),{session:s}=Et(),a=f.useMemo(()=>s?.user?.email??"",[s]),i=ht(),{mutate:l}=phe({fileRepoInfo:e,setTotalFilesUploading:()=>1,replaceExisting:t,reason:n}),{mutateAsync:c}=mhe({fileRepositoryType:e.file_repository_type,offset:0,searchTerm:"",ownerId:e.owner_id,reason:n}),u=f.useCallback(async(m,p)=>{try{if(!m||!p)return;const h=await cme({thread_uuid:m,format:"md",filename:p,reason:n}),g=atob(h.file_content_64),y=new Array(g.length);for(let _=0;_<g.length;_++)y[_]=g.charCodeAt(_);const v=new Uint8Array(y),x=new Blob([v],{type:"application/md"}),b=new File([x],h.filename,{type:"application/md"});await l([b]),i.setQueryData(["file_exists",e.owner_id,p],!0),t||r("Successfully saved to space","success",3)}catch(h){r(`Failed to save to space: ${h}`,"error",3)}},[l,r,t,e,i,n]),d=f.useCallback(async m=>{try{const h=(await Z2({fileRepositoryType:e.file_repository_type,limit:10,offset:0,searchTerm:"",email:a,ownerId:e.owner_id,reason:n}))?.completedFiles.find(g=>g.name.includes(m??""));if(!h?.file_uuid)return;await c([h.file_uuid]),i.setQueryData(["file_exists",e.owner_id,m],!1),r("File removed from space","success",3)}catch(p){r(`Failed to remove from space: ${p}`,"error",3)}},[c,r,i,e.owner_id,a,n,e.file_repository_type]);return f.useMemo(()=>({saveThreadToSpace:u,removeThreadFromSpace:d}),[d,u])},UU=({windowsAppOnly:e=!0}={})=>{const[t,n]=f.useState(()=>globalThis.Notification?globalThis.Notification.permission:"denied"),{device:{isWindowsApp:r}}=At();f.useEffect(()=>{globalThis.Notification&&globalThis.Notification.permission!==t&&n(globalThis.Notification.permission)},[t]);const s=f.useCallback(async()=>{if(globalThis.Notification){if(t==="granted")return!0;if(t==="denied")return!1;const i=await globalThis.Notification.requestPermission();return n(i),i==="granted"}return!1},[t]),a=f.useCallback(async({title:i,body:l,icon:c="https://r2cdn.perplexity.ai/pplx-desktop-icon.png",onClick:u})=>{if(!(e&&!r||!await s())&&globalThis.Notification){const m=new globalThis.Notification(i,{body:l,icon:c});u&&(m.onclick=()=>{u(),window.focus()})}},[e,r,s]);return f.useMemo(()=>({sendNotification:a,requestPermission:s,permission:t,isWindowsApp:r}),[r,t,s,a])},RS="v1",PS="last_results",A3=e=>({backend_uuid:t,thread_url_slug:n})=>t===e||n===e,I3=()=>{const e=Re.getItem(PS);let t={version:RS,results:ue};try{e&&(t=JSON.parse(e),t.version!==RS&&(Re.removeItem(PS),t={version:RS,results:[]}))}catch{Re.removeItem(PS)}return t.results},v1=e=>Re.setItem(PS,JSON.stringify({version:RS,results:e})),Ave=e=>{const t=A3(e.backend_uuid),r=I3().slice(-49).filter(s=>!t(s));r.push(e),v1(r)||v1([e])},BU=pYe,Ive=BU*10,Imt=Ive*10+BU,x1="all_results",Rmt=({slugOrUUID:e,enabled:t,reason:n})=>{const r=ht(),s=f.useCallback(async(a,i)=>{const l=await a1({slugOrUUID:a,options:{withParentInfo:!0,supportedBlockUseCases:[...Fde],limit:i?Ive:BU,fromFirst:!0,cursor:i},numRetries:bu,reason:n});if(!l?.entries?.length||l.status!=="success")return[];const c=[x1,a];r.setQueryData(c,d=>{const m=l.entries,p=new Set(d?.map(g=>g.backend_uuid)),h=m.filter(g=>!p?.has(g.backend_uuid));return[...d??[],...h]});const u=r.getQueryData(c)??[];return l.next_cursor&&u.length<Imt&&s(a,l.next_cursor),u},[n,r]);return We({queryKey:[x1,e],enabled:!!e&&t,retry:!1,queryFn:async({queryKey:a})=>await s(a[1]??"")})},Pmt=()=>{const e=ht();return f.useCallback(t=>{if(!ia(t))return;const n=t[0],r=n.thread_url_slug??n.backend_uuid;Ave(n),e.setQueryData([x1,r],t)},[e])},Omt=()=>{const e=ht();return f.useCallback(t=>{if(t){const n=A3(t),r=I3();if(r.find(n)){const s=r.filter(a=>!n(a));v1(s)}e.removeQueries({queryKey:[x1,t],exact:!0})}else v1(ue),e.removeQueries({queryKey:[x1]})},[e])};function Lmt({reason:e}){const{setIsCopilot:t,gpt4Limit:n,setGPT4Limit:r,pplxAlphaLimit:s,setPplxAlphaLimit:a,pplxBetaLimit:i,setPplxBetaLimit:l,setAskInputReasoningMode:c}=Jn(),{trackEvent:u}=Ne(),d=f.useCallback(async()=>{try{const p=(await se.GET("/rest/rate-limit/all",e)).data;if(!p)throw new Error("No data returned from rate limit check");const h=p.remaining_pro??0,g=p.remaining_research??0,y=p.remaining_labs??0;n>0&&p.remaining_pro!==null&&h<=0&&u("pro rate limit reached",{}),s>0&&p.remaining_research!==null&&g<=0&&u("pplx alpha rate limit reached",{}),i>0&&p.remaining_labs!==null&&y<=0&&u("pplx beta rate limit reached",{}),r(h),a(g),l(y),h<=0&&(c(!1),t(!1))}catch(m){ne.error("Failed to check rate limit",m)}},[n,r,s,a,i,l,c,t,u,e]);return f.useCallback(()=>{d()},[d])}const Dmt=(e,t)=>{const{value:n,loading:r}=Su({flag:"sapi-ranking-navigate",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Fmt=async({query:e,userIdentity:t,queryClient:n,reason:r,sapiSearchNavigateConfig:s})=>{try{const a=s?[`sapi-ranking-navigate-cfg=${JSON.stringify(s)}`]:[],c=(await(await TRe({resource:"https://suggest.perplexity.ai/search/v2/navigate",method:"POST",options:{headers:{"content-type":"application/json","X-Client-Name":"agi_ui_navigate_v2","X-Client-Env":"production"}},body:JSON.stringify({query:e,user_identity:{lang:t.lang,country:t.country,ab_active_tests:a}}),timeoutMs:1e3,reason:r})).json())?.hit;c&&n.setQueryData(["navigationResults",e],c)}catch(a){ne.error("Failed to fetch navigational search results:",a)}},Umt=35,Bmt=()=>{const e=ht(),t=qm(),{variation:n,loading:r}=Dmt({});return f.useCallback(({query:s,params:a,reason:i})=>{const l=s.length<=Umt,c=!!a.last_backend_uuid,u=a.attachments,d=a.sources,m=a.model_preference==="pplx_study";if(l&&!c&&u.length===0&&d&&d.length>0&&!m){const h={lang:a.language,country:t};Fmt({query:s,userIdentity:h,queryClient:e,reason:i,sapiSearchNavigateConfig:r?void 0:n})}},[e,t,n,r])};function Vmt({lastResponse:e,backend_uuid:t,trackEvent:n,notificationText:r,sendNotification:s,cometAdapter:a,isMissionControl:i}){if(!t)return ne.error(new Error("No backend_uuid found in response")),!1;if(!e)return ne.error(new Error("No last response found in query client")),!1;(Ur(e.display_model)===ie.RESEARCH||Ur(e.display_model)===ie.STUDIO)&&r&&s&&document.visibilityState!=="visible"&&s({title:r,body:e.query_str,onClick:()=>{window.focus()}}),e.blocks.filter(c=>c.intended_usage?.endsWith("_markdown")).forEach(c=>{c.markdown_block?.media_items&&n&&c.markdown_block?.media_items.forEach(u=>{n("inline image rendered",{image_url:u.image,entryUUID:t})})});const l=e.blocks.find(c=>c.intended_usage==="knowledge_cards")?.knowledge_card_block?.knowledge_cards?.[0];return l&&n&&n("knowledge card in results",{entryUUID:t,name:l.title,id:l.id,type:l.card_type}),a?.setTabProgress(!1),i||a?.showNotification(),!0}const VU="pplx.activeQuery";function Rve(){const e=Bs.getItem(VU);if(!e)return{};try{return JSON.parse(e)}catch{return{}}}function $mt(e){Bs.setItem(VU,JSON.stringify(e))}function Wmt(){Bs.removeItem(VU)}const Pve=fy("QueryInputStateContext",()=>pi(e=>({userInput:"",userInputJson:void 0,hasStartedTyping:!1,shouldTriggerFocus:!1,actions:{restoreInput:()=>{const t=Rve();t.rawQuery&&e({userInput:t.rawQuery,userInputJson:t.rawQueryJson})},setUserInput:(t,n)=>{e({userInput:t,userInputJson:n}),$mt({rawQuery:t,rawQueryJson:n})},setHasStartedTyping:t=>e({hasStartedTyping:t}),setStartTypingTime:t=>e({startTypingTime:t}),resetInput:()=>{e({userInput:"",userInputJson:void 0}),Wmt()},markInputAsSubmitted:()=>{e({userInput:"",userInputJson:void 0,startTypingTime:void 0})},setShouldTriggerFocus:t=>{e({shouldTriggerFocus:t})}}}))),Hmt=Pve.Provider,Fy=Pve.useSelector,Ove=I.memo(()=>{const{setUserInput:e,resetInput:t}=a_(),n=jt(),r=py(n);return f.useLayoutEffect(()=>{const s=Rve();s.rawQuery&&e(s.rawQuery,s.rawQueryJson)},[e]),f.useLayoutEffect(()=>{!r||r===n||r==="/"&&n?.startsWith("/search/new")||r.startsWith("/search/new")&&n?.startsWith("/search")||t()},[n,r,t]),null});Ove.displayName="QueryInputSideEffects";const Lve=()=>Fy(e=>e.userInput),zmt=()=>Fy(e=>e.userInputJson),Dve=()=>Fy(e=>e.hasStartedTyping),Gmt=()=>Fy(e=>e.startTypingTime),qmt=()=>Fy(e=>e.shouldTriggerFocus),a_=()=>Fy(e=>e.actions),Kmt=ye(async()=>{const{DebugStreamSideEffects:e}=await K(async()=>{const{DebugStreamSideEffects:t}=await import("./DebugStreamSideEffects-Ba9XSdJZ.js");return{DebugStreamSideEffects:t}},__vite__mapDeps([98,3,1,99,6,5,100,4]));return{default:e}},{prefetch:!1,restricted:!0}),Fve=I.memo(function(){const t="stream-side-effects",n=gt(),r=fn(),{session:s}=Et(),{trackEvent:a}=Ne(),{$t:i}=Z(),l=qb(globalThis.navigator?.userAgent),{sendNotification:c}=UU({windowsAppOnly:!1}),u=Fge(),d=Bmt(),{addKeyRequiringRerender:m}=Wd(),p=to(),h=Zn(),g=OF(),y=typeof window<"u"&&(window.location.pathname.startsWith("/b/mission-control")||window.location.pathname.startsWith("/b/assistants")),{fileRepoInfo:v}=nl({reason:t}),{firstResult:{thread_url_slug:x}={}}=Vt(),{data:b}=FU({fileRepoInfo:v,fileName:x??"",reason:t}),{saveThreadToSpace:_}=jve({fileRepoInfo:v,fileExists:b??!0,reason:t}),w=Pmt(),{resetInput:C,restoreInput:S}=a_(),E=Lve(),M=f.useRef(E);M.current=E;const k=jmt({reason:t}),A=ht(),R=Lmt({reason:t}),{updateLocalStatePostStream:O}=Hs();return f.useLayoutEffect(()=>rs.on("created",async({stream:L,query:P,params:N})=>{if(L.isReconnect||!P||!N)return;const T=Wo(),j=Y4(l,p.erp);mHe(L.id,{name:"perplexity_ask",queryStr:P,queryParams:N,isFollowup:XR(N)&&(N.query_source==="followup"||N.query_source==="followup-sidecar"),isPerplexityBrowser:r,frontendUUID:N.frontend_uuid??"",session:s,browserVersion:T?.browser_version,source:j,connectors:k,mentions:"mentions"in N?N.mentions:[]}),h?.setTabProgress(!0),g&&h.sendThreadStatusToMobile({status:"working",streamId:L.id.description})}),[r,l,s,k,p.erp,h,g]),f.useLayoutEffect(()=>rs.on("progress",({stream:L,message:P})=>{const{blocks:N,status:T}=P,j=N?.some(V=>!!V?.markdown_block?.chunks?.length),F=N?.some(V=>!!V?.web_result_block?.web_results?.length),U=N?.some(V=>!!V?.sources_mode_block?.rows?.length);if(j&&L.timer.addTimingOnce("web.frontend.first_llm_token_seen"),F&&L.timer.addTimingOnce("web.frontend.first_search_results_seen"),U&&L.timer.addTimingOnce("web.frontend.first_sources_seen"),P.telemetry_data){const{has_displayed_search_results:V,has_first_output_token:$,has_first_token:z,has_widget_data:Q,country:Y,is_followup:W,source:X,engine_mode:G,search_implementation_mode:J,has_useful_renderable_content:q}=P.telemetry_data,te={country:Y,is_followup:W,source:X,engine_mode:G,search_implementation_mode:J};V&&L.timer.addTimingOnce("web.frontend.first_search_results_latency_ms",te),$&&L.timer.addTimingOnce("web.frontend.first_output_token_latency_ms",te),z&&L.timer.addTimingOnce("web.frontend.first_token_latency_ms",te),Q&&L.timer.addTimingOnce("web.frontend.first_widget_data_latency_ms",te),q&&L.timer.addTimingOnce("web.frontend.first_useful_renderable_content_latency_ms",te)}sHe(L.id,{hasLLMToken:j,hasSearchResults:F,hasSources:U},s??void 0),T===qn.FAILED&&ne.error(new fU("STREAM_FAILED_CHUNK_ERROR"),{message:P})}),[s]),f.useLayoutEffect(()=>rs.on("progress",({stream:L,isFirstMessage:P})=>{P&&L.placeholderChunk&&L.placeholderChunk.query_source&&!M.current&&C()}),[C]),f.useLayoutEffect(()=>rs.on("completed",({stream:L})=>{const P=to(),N=Y4(l,P.erp);Dq(L.id,{name:"SUCCESSFUL response",session:s,source:N})}),[s,l]),f.useLayoutEffect(()=>rs.on("completed",({stream:L,thread:P})=>{if(!L.threadId||!L.entryId)return;w(P);const N=P?.find(j=>j?.uuid===L.id.description||j?.backend_uuid===L.entryId);let T;Ur(N?.display_model)===ie.RESEARCH?T=i({defaultMessage:"Your report is ready",id:"CEIDgftq5U"}):Ur(N?.display_model)===ie.STUDIO&&(T=i({defaultMessage:"Your project is ready",id:"UXOU5ST+Nc"})),Vmt({lastResponse:N,backend_uuid:L.entryId,trackEvent:a,sendNotification:c,notificationText:T,cometAdapter:h,isMissionControl:y})}),[i,a,c,w,h,y]),f.useLayoutEffect(()=>rs.on("completed",async({stream:L})=>{!x||!L.entryId||b&&await _(L.entryId,x)}),[b,_,x]),f.useLayoutEffect(()=>{const L=({stream:T})=>{const{id:j}=T,F=to(),U=Y4(l,F.erp),z=new URL(window.location.href).pathname.replace("/search/new/","");Dq(j,{name:"FAILED response",session:s,source:U}),z===j.description&&(S(),n.replace(`/?error=${Jf.ThreadStreamError}`,"StreamSideEffects")),h?.setTabProgress(!1)},P=rs.on("error",L),N=rs.on("aborted",L);return()=>{P(),N()}},[s,l,S,n,h]),f.useLayoutEffect(()=>rs.on("created",({query:L,params:P,stream:{isReconnect:N,id:T}})=>{if(!(!L||!P||N||!XR(P))){if(r){u(L,{model_preference:P.model_preference,last_backend_uuid:"last_backend_uuid"in P?P.last_backend_uuid:void 0,sources:P.sources,override_no_search:P.override_no_search},T.description);return}d({query:L,params:P,reason:"streamEvents.on(created)"})}}),[u,d,r]),f.useEffect(()=>{const L=[rs.on("completed",({stream:P})=>{h.cleanupTasks(P.entryId,"stream_completed"),g&&h.sendThreadStatusToMobile({status:"ready",streamId:P.id.description})}),rs.on("aborted",({stream:P})=>{h.cleanupTasks(P.entryId,"stream_aborted"),g&&h.sendThreadStatusToMobile({status:"ready",streamId:P.id.description})}),rs.on("error",({stream:P})=>{h.cleanupTasks(P.entryId,"stream_error"),g&&h.sendThreadStatusToMobile({status:"error",streamId:P.id.description})})];return()=>{L.forEach(P=>P())}},[h,g]),f.useEffect(()=>rs.on("completed",async({message:L,thread:P})=>{if(!L||(O(L),L.collection_info?.slug&&A.invalidateQueries({queryKey:[Vc,{collection_slug:L.collection_info.slug.slice(-22)}]}),R(),rut(L.thread_url_slug)))return;const N=!!L.parent_info,T=P.findIndex(j=>j.uuid===L.uuid)>0;(N||!T)&&(m("floating-signup"),A.invalidateQueries({queryKey:[xm],refetchType:"all"}))}),[A,l,m,R,O]),null});Fve.displayName="StreamSideEffects";const Uve=I.memo(function(){const{pendingTasks:t,navigationMeta:n}=Hr();return o.jsx(Kmt,{pendingTasks:t,navigationMeta:n})});Uve.displayName="DebugStreamSideEffects";const qd=e=>e?.includes("perplexity.ai"),Ymt=e=>e?.includes("localhost"),Qmt=e=>qd(e)&&e?.includes("preview"),Xmt=e=>qd(e)&&e?.includes("staging"),Zmt=e=>qd(e)&&(e?.includes("alpha")||e?.includes("beta")),Jmt=e=>qd(e)&&e?.includes("testing"),ept=e=>qd(e)&&e?.includes("askdev"),tpt=e=>qd(e)&&e?.startsWith("dev"),npt=e=>qd(e)&&(e?.includes("klarna")||e?.includes("inhouse")||e?.includes("wolfram")||e?.includes("ftrouter")||e?.includes("ft")||e?.includes("brave")||e?.includes("claude2")||e?.includes("claude1-instant")||e?.includes("claude2-instant")||e?.includes("shopping")||e?.includes("turbo16k")||e?.includes("yelp")||e?.includes("mobile-flag-dev")),rpt=e=>qd(e)&&!Qmt(e)&&!Jmt(e)&&!Zmt(e)&&!ept(e)&&!tpt(e)&&!npt(e);function Bve(){return rpt(window.location.hostname)?"beta":Xmt(window.location.hostname)?"staging":Ymt(window.location.hostname)?"local":"testing"}class _f{static GC_TIME=1e3*60*5;static STALE_TIME=1/0;static retryDelay(t,n){return Math.min(t>1?2**t*1e3:1e3,30*1e3)}static retryQuery(t,n){return!1}static retryMutation(t,n){return!1}}function spt(){return pm?PZ():(Vj||(Vj=PZ()),Vj)}function PZ(){return new q$e({queryCache:new dde({onError:e=>{const t=e instanceof UI?e:new UI("FETCHER_UNKNOWN_ERROR",{details:{cause:NRe(e)},cause:jRe(e)?e:void 0});ne.error(t)}}),mutationCache:new mde({onError:e=>{ne.error("Mutation error",e)}}),defaultOptions:{queries:{staleTime:_f.STALE_TIME,gcTime:_f.GC_TIME,refetchOnReconnect:!0,refetchOnMount:!0,refetchOnWindowFocus:!0,retry:_f.retryQuery,retryDelay:_f.retryDelay,throwOnError:!1,networkMode:"online"},mutations:{gcTime:_f.GC_TIME,retry:_f.retryMutation,retryDelay:_f.retryDelay,throwOnError:!1,networkMode:"online"}}})}let Vj;const Vve=I.memo(()=>{const{message:e,variant:t,description:n,ctaText:r,ctaOnClick:s,isVisible:a,timeout:i,handleClick:l,closeToast:c,position:u,iconOverride:d,keyProp:m}=gn(),p=f.useCallback(()=>{t==="refresh"&&l===void 0?window.location.reload():l&&l()},[t,l]);return o.jsx(Gl,{keyProp:m,isVisible:a,variant:t,message:e,description:n,ctaText:r,ctaOnClick:s,timeout:i,handleClick:p,onTimeout:c,position:u,iconOverride:d},m)});Vve.displayName="Toasts";const $ve=I.memo(({children:e})=>o.jsx(x$e,{children:e}));$ve.displayName="TooltipStateProvider";const Wve=I.memo(({children:e,colorScheme:t})=>o.jsx(Lhe,{userPreferredColorScheme:t,children:o.jsx($ve,{children:o.jsxs(jfe,{children:[e,o.jsx(Vve,{})]})})}));Wve.displayName="GlobalUXProvider";ye(async()=>{const{RenderToolbar:e}=await K(async()=>{const{RenderToolbar:t}=await import("./RenderToolbar-BKBpNXu7.js");return{RenderToolbar:t}},__vite__mapDeps([101,1,3]));return{default:e}},{prefetch:!1});ye(async()=>{const{ReactQueryDevtools:e}=await K(async()=>{const{ReactQueryDevtools:t}=await import("./index-Ds5yF1gS.js");return{ReactQueryDevtools:t}},[]);return{default:e}},{prefetch:!1});const apt=({children:e,hostname:t,version:n,minVersion:r,spaRoutes:s,strictSpa:a,shouldOpenNonSpaRouteInNewTab:i,base:l,idleRefresh:c,minVersionRefresh:u})=>{const d=jt(),m=spt(),{colorScheme:p}=hn();return f.useEffect(()=>{!n&&["beta","staging"].includes(Bve())&&ne.error("Version is not set")},[n]),o.jsx(ARe,{ssrPath:d??"/",ssrSearch:"",base:l,children:o.jsx(IRe,{spaRoutes:s,strictSpa:a,openNonSpaRouteInNewTab:i,children:o.jsx(eot,{children:o.jsxs(Hmt,{children:[o.jsx(wve,{}),o.jsx(Z$e,{client:m,children:o.jsxs(Tat,{children:[o.jsx(Wve,{colorScheme:p??void 0,children:o.jsx(Khe,{children:o.jsx(umt,{hostname:t,children:o.jsx(Ame,{children:o.jsx(PQe,{children:o.jsxs(Lat,{shouldFetchSettings:!0,children:[o.jsx(Vst,{children:o.jsx(_ot,{shouldFetchSettings:!1,children:o.jsx(Mmt,{children:o.jsx(pmt,{children:o.jsx(Xdt,{children:o.jsxs(fmt,{children:[o.jsx(xve,{}),c&&o.jsx(_ve,{version:n}),u&&o.jsx(Cve,{minVersion:r}),o.jsx(Fve,{}),o.jsx(Nve,{}),typeof window<"u"&&o.jsx(Ove,{}),o.jsx(Uve,{}),o.jsx(Tve,{}),e]})})})})})}),o.jsx(Yft,{})]})})})})})}),!1,o.jsx(vve,{})]})})]})})})})},R3="^/(finance|crypto|app/finance)/?([^/]+)?(?:/([^/]+))?/?$",opt=["^\\/search(?:\\/(?<new>new))?(?:\\/(?<uuid>.+))?$","/account/api/files/:repositoryUuid","/account/api/members","/account/api/billing","/account/api/files","/account/api/limits","/account/api/group","/account/api/keys","/account/api/playground/search","/account/api","/account/org/user-access","/account/org/permissions","/account/org/connectors","/account/org/insights","/account/org/members","/account/org/details","/account/org/files","/account/org","/account/pro-perks/:name","/account/pro-perks","/account/tasks/:taskId","/account/tasks","/account/site-instructions","/account/reservations","/account/preferences","/account/personalize/memories","/account/personalize","/account/assistant","/account/notifications","/account/purchases","/account/connectors","/account/shortcuts","/account/details","/account/files","/account","/sports/atp/tournaments/:seasonId","/sports/atp/events/:eventId","/sports/atp","/sports/wta/tournaments/:seasonId","/sports/wta/events/:eventId","/sports/wta","/sports/nba/players/:playerId","/sports/nba/events/:eventId","/sports/nba/teams/:teamId","/sports/nba","/sports/nfl/players/:playerId","/sports/nfl/events/:eventId","/sports/nfl/teams/:teamId","/sports/nfl","/sports/championsleague/events/:eventId","/sports/championsleague","/sports/f1/events/:eventId","/sports/f1","/sports/mlb/events/:eventId","/sports/mlb","/sports/ipl/events/:eventId","/sports/ipl","/sports/icc/events/:eventId","/sports/icc","/sports/pga/events/:eventId","/sports/pga","/sports/dpworldtour/events/:eventId","/sports/dpworldtour","/sports/wnba/events/:eventId","/sports/wnba","/sports/ncaam/events/:eventId","/sports/ncaam","/sports/ncaaw/events/:eventId","/sports/ncaaw","/sports/cricket/events/:eventId","/sports","/discover/:topic/:slug","/discover/:topic","/discover","/spaces/templates","/spaces/:slug","/spaces","/hotels/:slug","/page/:slug","/b/mission-control","/b/assistants","/b/try-assistant","/b/speak","/b/home","/b/zen","/perplexify_me","/academic","/shopping","/library","/travel","/windows-app/ask/input",R3,"/"],ipt=["49a618ae-2fee-4bac-9150-81c466a49187"];let OZ=!1;const lpt=performance.now();function Hve(e,t){if(OZ||typeof document>"u")return;const r="4705c1a2-db1e-42f0-8a66-cd6208ae9e65",s="pub4ecf63e3fd1ad28de1a9027c01181601",a=e.version,i=e.env??"local",l=Wo(),c=t?.email?.endsWith("@perplexity.ai"),u=i==="local",d=i==="testing"||u||l||c?100:2,m=u||c?100:2;if(!ipt.includes(t?.org_uuid??"")){RRe({ddApplicationId:r,ddClientToken:s,version:a,env:i,debug:u,sessionSampleRate:100,sessionReplaySampleRate:m}),PRe({ddClientToken:s,version:a,env:i,debug:u,sessionSampleRate:d});const h=typeof navigator<"u"&&"serviceWorker"in navigator&&!!navigator.serviceWorker.controller;if(AH({useServiceWorker:h}),IH({useServiceWorker:h}),l){const g={cometAgentExtensionVersion:l?.agent_extension_version,cometDeviceId:l.device_id,cometMainExtensionVersion:l.extension_version,cometVersion:l?.browser_version,erp:e.erp};AH(g),IH(g)}Uc("web.frontend.module_exec_start",{startTime:performance.timeOrigin,duration:lpt})}OZ=!0}const zve=I.memo(function({error:t}){f.useEffect(()=>{ne.error(t,{digest:t.digest,globalError:!0})},[t]);const n=f.useCallback(r=>{r.preventDefault(),Hi("/sidecar","sidecar error")},[]);return o.jsx("div",{className:"bg-subtler flex h-screen items-center justify-center",children:o.jsxs(H,{className:"space-y-md p-lg rounded-md",children:[o.jsx("div",{className:"max-w-[400px]",children:o.jsx(D,{className:"text-center",variant:"section-title",children:t.digest?`Internal Error (${t.digest})`:"Internal Error"})}),o.jsx(D,{className:"text-center underline",variant:"section-title",color:"light",children:o.jsx(Ge,{href:"/sidecar",onClick:n,children:"Return home"})})]})})});zve.displayName="GlobalError";const cpt=60*60*24;function upt({children:e,session:t}){return o.jsx(_b.SessionProvider,{session:t,refetchInterval:cpt,children:e})}const dpt=(e,t)=>t?.includes("WindowsApp")?!0:e==="true",fpt=e=>e==="light"||e==="dark";function mpt(e,{userAgent:t}={}){const n=e.colorScheme,r=fpt(n)?n:null;let s=e[sP],a={};try{a=JSON.parse(e[rpe]??"{}")}catch{}const i=Object.values(ie).includes(s);(!s||!i)&&(s=ie.SEARCH);const l=e[Ume];return{colorScheme:r,isCollapsed:dpt(e.isCollapsed,t),isSidebarPinned:e.isSidebarPinned==="true",sidebarHiddenHubs:JSON.parse(e.sidebarHiddenHubs??"[]"),isIncognitoLocal:e[z2]===void 0?void 0:e[z2]==="true",isDiscoverInterestBoxDismissed:l?l==="true":void 0,isEnterpriseAdDismissed:e[Bme]=="true",isMaxAssistantMode:e[spe]=="true",isSplashPageDismissed:e[Vme]=="true",isSuggestionsDisabled:e[$me]=="true",isHomepageWidgetsDisabled:e[Wme]=="true",isSportsIosCtaDismissed:e[zme]=="true",preferredSearchMode:s,preferredSearchModels:a,welcomeBackGateImpressions:Number(e[Gme])||0,shareGateImpressions:Number(e[qme])||0,isSidebarConnectorsAdDismissed:e[Kme]=="true",isStudentReferralBannerDismissed:e[Yme]=="true",isStudentSpaceUpsellDismissed:e[Qme]=="true",studentSpaceUpsellImpressions:Number(e[Xme])||0}}function ppt(e=""){return!e&&typeof navigator<"u"&&(e=navigator.userAgent),{isChrome:cst(e),isMobile:Ege(e),isAndroid:ust(e),isIOS:dst(e),isMacOS:fst(e),isMobileSafari:mst(e),isFirefox:pst(e),isWindowsApp:qb(e),isWindowsOS:hst(e),isMetaBrowser:gst(e),isSamsungBrowser:yst(e),userAgent:e}}const al=e=>e?.includes("perplexity.ai"),Gve=e=>e?.includes("localhost"),hpt=e=>e?.includes("pplx.dev"),qve=e=>al(e)&&e?.includes("preview"),Kve=e=>al(e)&&e?.includes("staging"),Yve=e=>al(e)&&(e?.includes("alpha")||e?.includes("beta")),Qve=e=>al(e)&&e?.includes("testing"),gpt=e=>al(e)&&e?.includes("experimental"),Xve=e=>al(e)&&e?.includes("askdev"),Zve=e=>al(e)&&e?.startsWith("dev"),Jve=e=>al(e)&&(e?.includes("klarna")||e?.includes("inhouse")||e?.includes("wolfram")||e?.includes("ftrouter")||e?.includes("ft")||e?.includes("brave")||e?.includes("claude2")||e?.includes("claude1-instant")||e?.includes("claude2-instant")||e?.includes("shopping")||e?.includes("turbo16k")||e?.includes("yelp")||e?.includes("mobile-flag-dev")),exe=e=>al(e)&&!qve(e)&&!Qve(e)&&!Yve(e)&&!Xve(e)&&!Zve(e)&&!Jve(e)&&!gpt(e),ypt=e=>al(e)&&e?.includes("sandbox"),vpt=e=>e?.includes("quokka-gamma.ts.net")||e?.endsWith(".preview.i.perplexity.ai"),xpt=e=>{const t="unknown";try{return typeof process<"u"&&process?.env?.DD_ENV?process?.env?.DD_ENV:e?Gve(e)?"local":e==="www.perplexity.ai"?"prod":e.endsWith(".preview.i.perplexity.ai")?e.replace(/\.preview\.i\.perplexity\.ai$/,""):e.endsWith(".perplexity.ai")?e.replace(/\.perplexity\.ai$/,""):t:t}catch{return t}},bpt=e=>e.isTesting||e.isLocalhost||e.isSandbox||e.isDevBox||e.isPplxDev||e.isDevDeployment,_pt=e=>{const t={isPublicDNS:al(e),isLocalhost:Gve(e),isPplxDev:hpt(e),isPreview:qve(e),isStaging:Kve(e),isBeta:Yve(e),isTesting:Qve(e),isAskDev:Xve(e),isDevBox:Zve(e),isNamedDevDomain:Jve(e),isProduction:exe(e),isSandbox:ypt(e),isDevDeployment:vpt(e),deployName:xpt(e),envHasDevLogins:!1};return t.envHasDevLogins=bpt(t),t},txe=f.memo(({children:e,userAgent:t,hostname:n})=>{const r=f.useMemo(()=>({device:ppt(t),env:_pt(n)}),[t,n]);return o.jsx(Tde.Provider,{value:r,children:e})});txe.displayName="WebPlatformProvider";const wpt={},$U=I.memo(({locale:e,children:t,messages:n=wpt})=>{const r=f.useCallback(s=>{s.code!=="MISSING_TRANSLATION"&&ne.error(s)},[]);return o.jsx($Oe,{locale:e,defaultLocale:wd,messages:n,onError:r,children:t})});$U.displayName="TranslationsProvider";const Cpt=lie(mWe),nxe=I.memo(({locale:e,children:t})=>{const{translations:n,matchedLocale:r}=f.use(Cpt(e));return o.jsx($U,{locale:r,messages:n,children:t})});nxe.displayName="InnerClientTranslationsProvider";const Spt={},rxe=I.memo(({children:e,shouldSetHtmlLang:t=!0})=>{const n=f.useMemo(()=>id(),[]),r=f.useMemo(()=>Sde(n),[n]);return t&&typeof document<"u"&&(document.documentElement.lang!==n&&(document.documentElement.lang=n),document.documentElement.dir!==r&&(document.documentElement.dir=r)),n===wd?o.jsx($U,{locale:n,messages:Spt,children:e}):o.jsx(f.Suspense,{fallback:null,children:o.jsx(nxe,{locale:n,children:e})})});rxe.displayName="ClientTranslationsProvider";const Ept=ye(async()=>{const{DebugModeActivator:e}=await K(async()=>{const{DebugModeActivator:t}=await import("./DebugModeActivator-DwQjrCFo.js");return{DebugModeActivator:t}},__vite__mapDeps([102,3,1,100,6,5,4]));return{default:e}},{restricted:!0}),sxe=I.memo(({host:e,userAgent:t,children:n,session:r})=>{const s=f.useMemo(()=>mpt(ORe(),{userAgent:t}),[t]);return o.jsx(rxe,{children:o.jsx(upt,{session:r,children:o.jsx(txe,{hostname:e,userAgent:t,children:o.jsxs(ert,{initialLocalUserSettings:s,children:[o.jsx(Ept,{}),n]})})})})});sxe.displayName="RootProviders";function Mpt(e,t){if(e?.pathname.startsWith("/sidecar"))return"sidecar";if(e?.pathname.startsWith("/mobile-sidecar"))return"mobile-sidecar";if(t)return"tab"}function kpt(){const{cachedSession:e,sessionFetchPromise:t}=S7e(!0),n=Xa(),r=document.querySelector("meta[name='version']")?.getAttribute("content")||"",s=+(document.querySelector("meta[name='min-version']")?.getAttribute("content")||0),a=new URL(window.location.href);return{cachedSession:e,sessionFetchPromise:t.catch(i=>(console.error("Error getting session",i),null)),config:{env:Bve(),version:r,minVersion:s,erp:Mpt(a,n)}}}const axe=I.memo(function({children:t}){const n=jt(),r=Nt(),[s,a]=f.useState(null),{colorScheme:i}=Wr(),{session:l}=Et(),c=f.useCallback(d=>d==="/search"&&r?.get("newFrontendContextUUID")||d.startsWith("/page/new")&&r?.get("newFrontendContextUUID")||d==="/search/new",[r]),u=f.useCallback(d=>{if((d?.split("?")[0]??"")===(s?.split("?")[0]??"")||c(d))return;const p=s;a(d),Li({name:"pageview",data:{internalReferrer:p??void 0,colorScheme:i},session:l??void 0})},[i,c,s,l]);return f.useEffect(()=>{n&&u(n)},[u,n]),o.jsx(o.Fragment,{children:t})});axe.displayName="PageviewTemplate";const Tpt=({inviteLink:e,hasCopied:t,onCopyLink:n,email:r,onEmailChange:s,onSendInvitation:a,isSending:i,justSentEmail:l,selectedInvite:c,isMobileUserAgent:u,showDivider:d=!1})=>o.jsxs(o.Fragment,{children:[o.jsx(Pr,{value:e??"",onChange:()=>{},disabled:!0,placeholder:"Generating invite link...",isMobileUserAgent:u,pill:!1,className:`text-center ${e?"opacity-100":"opacity-50"}`}),o.jsx(he,{variant:"primary",text:t?"Copied!":"Copy link",onClick:n,icon:t?Sr:Vm,fullWidth:!0,disabled:!e}),o.jsxs("div",{className:"flex items-center py-2",children:[o.jsx("div",{className:"h-two from-subtler via-subtler flex-1 bg-gradient-to-l via-75% to-transparent"}),o.jsx(D,{variant:"base",color:"light",className:"px-4",children:"OR"}),o.jsx("div",{className:"h-two from-subtler via-subtler flex-1 bg-gradient-to-r via-75% to-transparent"})]}),o.jsx(Pr,{value:r,onChange:s,placeholder:"Enter email address...",type:"email",disabled:!c||!!l,isMobileUserAgent:u,pill:!1,onKeyDown:m=>{m.key==="Enter"&&r.trim()&&!i&&!l&&a()}}),o.jsx(he,{variant:"border",text:l?"Invitation sent!":"Send",onClick:a,icon:l?Sr:$ie,disabled:!r.trim()||i||!!l||!c,isLoading:i,fullWidth:!0}),d&&o.jsx("div",{className:"my-3",children:o.jsx("div",{className:"h-two via-subtle bg-gradient-to-r from-transparent from-[-10%] via-50% to-transparent to-[110%]"})})]});var Ah;(function(e){e[e.Ungenerated=0]="Ungenerated",e[e.Generating=1]="Generating",e[e.Generated=2]="Generated",e[e.Sent=3]="Sent",e[e.Claimed=4]="Claimed"})(Ah||(Ah={}));const Npt=({className:e="",style:t,onClick:n,invite:r,isModal:s=!1,responsive:a=!1,claimed:i=!1,sent:l=!1,useFallbackImage:c=!0})=>{const{session:u}=Et(),{isMobileStyle:d}=xe(),m=u?.user?.image,[p,h]=f.useState(!1),g=f.useMemo(()=>`/static/images/comet-invite/avatar/${r.code.split("").reduce((Q,Y)=>Q+Y.charCodeAt(0),0)%10+1}.png`,[r.code]),y=$v(.5),v=$v(.5),x=$v(0),[b,_]=f.useState({stiffness:150,damping:30,mass:1}),[w,C]=f.useState({stiffness:300,damping:30}),S=f.useRef(!1),E=kf(v,[0,1],[d?-5:-20,d?5:20]),M=kf(y,[0,1],[d?5:20,d?-5:-20]),k=hp(E,b),A=hp(M,b),R=kf(y,[0,1],[d?-10:-30,d?10:30]),O=kf(v,[0,1],[d?10:30,d?-10:-30]),L=hp(0,b),P=hp(R,b),N=hp(O,b),T=kf([y,v,x],([$,z,Q])=>{const Y=$,W=z,X=Q,G=Math.max(Math.abs(Y-.5),Math.abs(W-.5));return X*G*1}),j=hp(T,w),F=$=>{S.current||(S.current=!0,_({stiffness:150,damping:30,mass:1}),C({stiffness:300,damping:30}));const z=$.currentTarget.getBoundingClientRect(),{width:Q,height:Y}=z,W=$.clientX-z.left,X=$.clientY-z.top;y.set(W/Q),v.set(X/Y),x.set(1),L.set(50)},U=()=>{S.current=!1,y.set(.5),v.set(.5),x.set(0),L.set(0)},V=o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-sm mb-sm flex shrink-0 items-center justify-between",children:[m&&!i&&!l?o.jsx(wt,{size:"base",user:m,showBackground:!1,className:"size-6"}):o.jsx("img",{src:g,alt:"Comet avatar",className:"size-6 rounded-full",loading:"lazy"}),o.jsx(ce,{icon:Io,size:"base",className:"text-white"})]}),o.jsx("div",{className:"mx-sm flex-1",children:o.jsxs("div",{className:"relative w-full",style:{aspectRatio:"3 / 4"},children:[o.jsx(ge.img,{loading:"lazy",onLoad:()=>h(!0),initial:{opacity:0},animate:{opacity:p?1:0},transition:{duration:.3},src:r.image_url??(c?"/static/images/comet-invite/invite-background.png":void 0),className:B("absolute inset-0 size-full rounded-[16px] bg-[#000000] object-cover",{"contrast-75":i||l}),alt:"Invite background",style:{boxShadow:"0px 5px 6px 0px rgba(0, 0, 0, 0.05)"}}),(i||l)&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(ce,{icon:i?m8e:$ie,size:"4xl",className:"text-white"})})})]})}),o.jsxs("div",{className:"p-sm mt-sm flex shrink-0 items-center justify-between font-mono text-white",children:[o.jsx("div",{className:"text-xs",children:"Comet Invitation"}),o.jsxs("div",{className:"text-light text-xs opacity-50",children:["#",r.code.slice(-4)]})]}),o.jsx(ge.div,{className:"pointer-events-none absolute inset-0 rounded-[16px] [mix-blend-mode:overlay]",style:{background:kf([y,v],([$,z])=>`radial-gradient(farthest-corner circle at ${$*100}% ${z*100}%, hsla(0, 0%, 100%, 0.9) 10%, hsla(0, 0%, 100%, 0.75) 20%, hsla(0, 0%, 100%, 0) 80%)`),opacity:j}})]});return n?o.jsx(ge.button,{type:"button",layout:!0,layoutId:`card-container-${r.code}`,onClick:n,onMouseMove:F,onMouseLeave:U,style:{...t,width:a?"100%":s?335:235,boxShadow:"0px 520px 146px 0px rgba(0, 0, 0, 0.01), 0px 333px 133px 0px rgba(0, 0, 0, 0.04), 0px 83px 83px 0px rgba(0, 0, 0, 0.26), 0px 21px 46px 0px rgba(0, 0, 0, 0.29)",transformStyle:"preserve-3d",rotateX:k,rotateY:A,x:P,y:N,z:L},className:B("p-sm md:p-md flex cursor-pointer flex-col items-stretch rounded-[16px] border-0 bg-[#1F2121]",e,{"saturate-0":i||l}),"aria-label":`View invite ${r.code.slice(-4)}`,children:V}):o.jsx(ge.div,{layout:!0,layoutId:`card-container-${r.code}`,onMouseMove:F,onMouseLeave:U,style:{...t,width:a?"100%":s?335:235,boxShadow:"0px 520px 146px 0px rgba(0, 0, 0, 0.01), 0px 333px 133px 0px rgba(0, 0, 0, 0.04), 0px 83px 83px 0px rgba(0, 0, 0, 0.26), 0px 21px 46px 0px rgba(0, 0, 0, 0.29)",transformStyle:"preserve-3d",rotateX:k,rotateY:A,x:P,y:N,z:L},className:B("p-sm md:p-md flex flex-col rounded-[16px] bg-[#1F2121]",e,{"saturate-0":i||l}),children:V})},oxe=I.memo(Npt);oxe.displayName="InviteCardContent";const jpt=({state:e,className:t=""})=>o.jsx("div",{className:`border-subtlest bg-subtler relative flex items-center justify-center rounded-lg border border-dashed ${t}`,style:{width:"235px",height:"350px"},children:e===Ah.Generating?o.jsx(ge.div,{animate:{scale:[1,1.3,1]},transition:{duration:.8,repeat:1/0,ease:"easeInOut"},children:o.jsx(ce,{icon:Io,size:"xl",className:"text-foreground"})}):o.jsx(ce,{icon:Io,size:"xl",className:"text-foreground"})}),ixe=I.memo(jpt);ixe.displayName="InviteCardPlaceholder";const Apt=({state:e=Ah.Generated,onClick:t,invite:n,isModal:r=!1,responsive:s=!1,claimed:a=!1})=>{const i=e===Ah.Claimed||a,l=e===Ah.Sent;return o.jsx(o.Fragment,{children:n?o.jsx("div",{style:{perspective:"1000px"},children:o.jsx(oxe,{invite:n,onClick:t,isModal:r,responsive:s,claimed:i,sent:l})}):o.jsx(ixe,{state:e})})},lxe=I.memo(Apt);lxe.displayName="InviteCard";const Ipt=({reason:e,onNoInvites:t,source:n,onContinue:r})=>{const{trackEvent:s}=Ne(),[a,i]=f.useState(null),[l,c]=f.useState(!0),[u,d]=f.useState(null),[m,p]=f.useState(""),[h,g]=f.useState(!1),[y,v]=f.useState(!1),[x,b]=f.useState(!1),[_,w]=f.useState(null),[C,S]=f.useState(0),E=f.useRef(!1),M=f.useRef(!1),k=f.useCallback(T=>{p(T),T.trim()&&v(!0)},[p,v]),A=f.useCallback(()=>{y?s("comet invite flow continued",{source:n}):s("comet invite flow skipped",{source:n}),r?.()},[y,s,n,r]),R=f.useCallback(async T=>{try{const j=await yX({reason:e});j?.invite&&(s("comet invite code generated",{source:n}),d(j.invite),i({...T,one_time_invites:[j.invite,...T.one_time_invites||[]]}))}catch(j){ne.error("Failed to generate invite:",j)}},[e,s,n]),O=f.useCallback(async()=>{c(!0);try{const T=await Pge({reason:e});if(!T||T.remaining_invites===0){t?.();return}if(s("comet invite flow viewed",{source:n}),i(T),M.current||(S(T.remaining_invites),M.current=!0),!E.current){E.current=!0;try{await R(T)}finally{E.current=!1}}c(!1)}catch(T){ne.error("Failed to load or generate invite:",T),t?.()}},[e,s,n,R,t]),L=f.useCallback(()=>{if(!u)return;const T=`https://perplexity.ai/browser/claim/${u.code}`;navigator.clipboard.writeText(T).then(()=>{g(!0),v(!0),s("comet invite link copied",{source:n}),setTimeout(()=>g(!1),2e3)}).catch(j=>{ne.error("Failed to copy invite link:",j)})},[u,s,n]),P=f.useCallback(async()=>{if(!(!u||!m.trim()||x||!a)){b(!0),v(!0);try{await zst({reason:e,email:m,inviteCode:u.code}),s("comet invite email sent",{source:n});const T=Math.max(0,C-1);S(T);const j=Math.max(0,a.remaining_invites-1),F=a.one_time_invites.map(U=>U.code===u.code?{...U,email_sent:!0}:U);if(i({...a,remaining_invites:j,one_time_invites:F}),w(m),p(""),T>0){setTimeout(()=>{w(null)},1e3);const U=await yX({reason:e});U?.invite&&(s("comet invite code generated",{source:n}),d(U.invite),i(V=>V?{...V,one_time_invites:[U.invite,...F]}:null))}else setTimeout(()=>{t?.()},1500)}catch(T){ne.error("Failed to send invite:",T)}finally{b(!1)}}},[u,m,x,a,s,C,e,n,t]),N=u?`https://perplexity.ai/browser/claim/${u.code}`:"";return{invitesData:a,loading:l,selectedInvite:u,email:m,setEmail:p,hasCopied:h,hasInteracted:y,setHasInteracted:v,isSending:x,justSentEmail:_,availableInvites:C,inviteLink:N,loadInvitesData:O,handleCopyLink:L,handleEmailChange:k,handleSendInvitation:P,handleContinue:A,generateNewInvite:R}},Rpt=({actionsFinished:e,handleNext:t,promptConfirmation:n,fullWidth:r=!1})=>{const{$t:s}=Z(),[a,i]=f.useState(!1),l=f.useCallback(()=>{n?i(!0):t()},[t,n]),c=f.useCallback(()=>{i(!1)},[]),u=f.useCallback(()=>{i(!1),t()},[t]);return o.jsxs(o.Fragment,{children:[o.jsx(he,{variant:e?"primary":"common",text:s(e?{defaultMessage:"Continue",id:"acrOozm08x"}:{defaultMessage:"Skip for now",id:"WYzHAIKZxl"}),trailingComponent:e?o.jsx(WM,{size:20}):void 0,onClick:l,fullWidth:r}),o.jsx(E3,{isOpen:a,onClose:c,message:s({defaultMessage:"Are you sure you want to skip setup?",id:"IDp4IiGsos"}),subtitle:s({defaultMessage:"Completing these steps makes your Comet Assistant smarter, faster, and unlocks powerful workflows. You may experience suboptimal results if left incomplete.",id:"ZUDl5XeEnm"}),renderCloseButton:!1,variant:"medium",modalClassname:"!max-w-[520px]",footerContent:o.jsxs("div",{className:"gap-sm flex justify-end",children:[o.jsx(Te,{text:s({defaultMessage:"Skip anyway",id:"x3kdOSc6+J"}),onClick:u}),o.jsx(he,{variant:"primary",text:s({defaultMessage:"Finish setup",id:"G09l5K24Rl"}),onClick:c})]})})]})},Ppt=({isOpen:e,onClose:t})=>{const{$t:n}=Z(),{isMobileStyle:r,isMobileUserAgent:s}=xe(),{loading:a,selectedInvite:i,email:l,hasCopied:c,hasInteracted:u,isSending:d,justSentEmail:m,availableInvites:p,inviteLink:h,loadInvitesData:g,handleCopyLink:y,handleEmailChange:v,handleSendInvitation:x,handleContinue:b}=Ipt({reason:"invite-friends-modal",onNoInvites:t,source:"comet-ntp",onContinue:t});return f.useEffect(()=>{e&&g()},[e,g]),f.useEffect(()=>{if(!e)return;const _=document.documentElement.style.overflow,w=document.body.style.overflow;return document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",()=>{document.documentElement.style.overflow=_,document.body.style.overflow=w}},[e]),!e||a?null:Us.createPortal(o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"bg-backdrop/80 absolute inset-0 backdrop-blur-sm"}),o.jsxs(ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-base relative max-h-[90vh] w-full max-w-4xl overflow-auto rounded-2xl px-8 pb-8 pt-12 shadow-2xl",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx(D,{variant:"display",className:"font-editorial mb-2 text-5xl font-light",children:n({defaultMessage:"Invite a friend to Comet",id:"EnSyt8JS7a"})}),o.jsx(D,{color:"light",children:n({defaultMessage:"Share Comet with friends before your invites expire.",id:"ni5OyhC5dU"})}),o.jsx(D,{color:"light",className:"font-bold",children:n({defaultMessage:"You have {count, plural, one {# invitation} other {# invitations}} left.",id:"yml4YDxsHX"},{count:p})})]}),o.jsxs("div",{className:`flex ${r?"flex-col items-center":"flex-row"} items-start justify-center gap-8 px-14`,children:[o.jsx("div",{className:`flex ${r?"w-auto justify-center":"w-[45%] justify-end"} max-w-xs items-start`,children:i&&o.jsx("div",{className:"-mt-12 scale-[0.81]",children:o.jsx(lxe,{invite:i,isModal:!0,responsive:!1})})}),o.jsxs("div",{className:`flex ${r?"w-full px-4":"w-[55%] px-4"} max-w-sm flex-col gap-5`,children:[o.jsx(Tpt,{inviteLink:h,hasCopied:c,onCopyLink:y,email:l,onEmailChange:v,onSendInvitation:x,isSending:d,justSentEmail:m,selectedInvite:i,isMobileUserAgent:s}),o.jsx(Rpt,{actionsFinished:u,handleNext:b,fullWidth:!0})]})]})]})]}),document.body)},cxe=I.memo(Ppt);cxe.displayName="CometInviteModal";const Opt="https://r2cdn.perplexity.ai/comet/cmp_grocery_cart.mp4",Lpt="https://r2cdn.perplexity.ai/comet/cmp_reddit_ama.mp4",Dpt="https://r2cdn.perplexity.ai/comet/cmp_find_emails.mp4",Fpt="https://r2cdn.perplexity.ai/comet/cmp_find_creatine.mp4",Upt="https://r2cdn.perplexity.ai/comet/cmp_bikes_shipping.mp4",Bpt="https://r2cdn.perplexity.ai/comet/cmp_summarize_webpage.mp4",Vpt="https://r2cdn.perplexity.ai/comet/cmp_walking_route.mp4",$pt="https://r2cdn.perplexity.ai/comet/cmp_v2v_browsing.mp4",Wpt="https://r2cdn.perplexity.ai/comet/grocery_cart-min.png",Hpt="https://r2cdn.perplexity.ai/comet/reddit_ama-min.png",zpt="https://r2cdn.perplexity.ai/comet/find_emails-min.png",Gpt="https://r2cdn.perplexity.ai/comet/find_creatine-min.png",qpt="https://r2cdn.perplexity.ai/comet/bikes_shipping-min.png",Kpt="https://r2cdn.perplexity.ai/comet/summarize_webpage-min.png",Ypt="https://r2cdn.perplexity.ai/comet/tour_plan-min.png",Qpt="https://r2cdn.perplexity.ai/comet/v2v_browsing-min.png",Xpt="https://r2cdn.perplexity.ai/comet/cmp_grocery_cart_v2.mp4",Zpt="https://r2cdn.perplexity.ai/comet/cmp_reddit_ama_v3.mp4",Jpt="https://r2cdn.perplexity.ai/comet/cmp_find_emails_v2.mp4",eht="https://r2cdn.perplexity.ai/comet/cmp_find_creatine_v2.mp4",tht="https://r2cdn.perplexity.ai/comet/cmp_bikes_shipping_v3.mp4",nht="https://r2cdn.perplexity.ai/comet/cmp_summarize_webpage_v2.mp4",rht="https://r2cdn.perplexity.ai/comet/cmp_walking_route_v2.mp4",sht="https://r2cdn.perplexity.ai/comet/cmp_v2v_browsing_v2.mp4";function aht(){const{$t:e}=Z();return f.useMemo(()=>[{videoSrc:Dpt,fullVideoSrc:Jpt,previewSrc:zpt,label:e({id:"U51r44Fr7z",defaultMessage:"Master Your Inbox and Calendar"})},{videoSrc:Opt,fullVideoSrc:Xpt,previewSrc:Wpt,label:e({id:"7rWLu0GI8D",defaultMessage:"Delegate the Basics"})},{videoSrc:Bpt,fullVideoSrc:nht,previewSrc:Kpt,label:e({id:"0MeQ1Iywio",defaultMessage:"Get the Gist in Seconds"})},{videoSrc:Vpt,fullVideoSrc:rht,previewSrc:Ypt,label:e({id:"zX2SKiQpSn",defaultMessage:"Automate the Clicks"})},{videoSrc:$pt,fullVideoSrc:sht,previewSrc:Qpt,label:e({id:"k3OgfsBfr6",defaultMessage:"Browse with Your Voice"})},{videoSrc:Fpt,fullVideoSrc:eht,previewSrc:Gpt,label:e({id:"Fi5Bt5+lYj",defaultMessage:"Quickly Find Answers in Your History"})},{videoSrc:Lpt,fullVideoSrc:Zpt,previewSrc:Hpt,label:e({id:"HHOfPSzTkI",defaultMessage:"Get Insights in One Click"})},{videoSrc:Upt,fullVideoSrc:tht,previewSrc:qpt,label:e({id:"ytn1Ld8ocW",defaultMessage:"Reference Any Tab for Precise Answers"})}],[e])}function oht(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const P3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Uy(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function WU(e){return"nodeType"in e}function La(e){var t,n;return e?Uy(e)?e:WU(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function HU(e){const{Document:t}=La(e);return e instanceof t}function o_(e){return Uy(e)?!1:e instanceof La(e).HTMLElement}function uxe(e){return e instanceof La(e).SVGElement}function By(e){return e?Uy(e)?e.document:WU(e)?HU(e)?e:o_(e)||uxe(e)?e.ownerDocument:document:document:document}const Gi=P3?f.useLayoutEffect:f.useEffect;function O3(e){const t=f.useRef(e);return Gi(()=>{t.current=e}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function iht(){const e=f.useRef(null),t=f.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=f.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function b1(e,t){t===void 0&&(t=[e]);const n=f.useRef(e);return Gi(()=>{n.current!==e&&(n.current=e)},t),n}function i_(e,t){const n=f.useRef();return f.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function lE(e){const t=O3(e),n=f.useRef(null),r=f.useCallback(s=>{s!==n.current&&t?.(s,n.current),n.current=s},[]);return[n,r]}function cE(e){const t=f.useRef();return f.useEffect(()=>{t.current=e},[e]),t.current}let $j={};function l_(e,t){return f.useMemo(()=>{if(t)return t;const n=$j[e]==null?0:$j[e]+1;return $j[e]=n,e+"-"+n},[e,t])}function dxe(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((a,i)=>{const l=Object.entries(i);for(const[c,u]of l){const d=a[c];d!=null&&(a[c]=d+e*u)}return a},{...t})}}const Ih=dxe(1),_1=dxe(-1);function lht(e){return"clientX"in e&&"clientY"in e}function L3(e){if(!e)return!1;const{KeyboardEvent:t}=La(e.target);return t&&e instanceof t}function cht(e){if(!e)return!1;const{TouchEvent:t}=La(e.target);return t&&e instanceof t}function uE(e){if(cht(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return lht(e)?{x:e.clientX,y:e.clientY}:null}const Cm=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Cm.Translate.toString(e),Cm.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),LZ="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function uht(e){return e.matches(LZ)?e:e.querySelector(LZ)}const dht={display:"none"};function fht(e){let{id:t,value:n}=e;return I.createElement("div",{id:t,style:dht},n)}function mht(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return I.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function pht(){const[e,t]=f.useState("");return{announce:f.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const fxe=f.createContext(null);function hht(e){const t=f.useContext(fxe);f.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function ght(){const[e]=f.useState(()=>new Set),t=f.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[f.useCallback(r=>{let{type:s,event:a}=r;e.forEach(i=>{var l;return(l=i[s])==null?void 0:l.call(i,a)})},[e]),t]}const yht={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},vht={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function xht(e){let{announcements:t=vht,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=yht}=e;const{announce:a,announcement:i}=pht(),l=l_("DndLiveRegion"),[c,u]=f.useState(!1);if(f.useEffect(()=>{u(!0)},[]),hht(f.useMemo(()=>({onDragStart(m){let{active:p}=m;a(t.onDragStart({active:p}))},onDragMove(m){let{active:p,over:h}=m;t.onDragMove&&a(t.onDragMove({active:p,over:h}))},onDragOver(m){let{active:p,over:h}=m;a(t.onDragOver({active:p,over:h}))},onDragEnd(m){let{active:p,over:h}=m;a(t.onDragEnd({active:p,over:h}))},onDragCancel(m){let{active:p,over:h}=m;a(t.onDragCancel({active:p,over:h}))}}),[a,t])),!c)return null;const d=I.createElement(I.Fragment,null,I.createElement(fht,{id:r,value:s.draggable}),I.createElement(mht,{id:l,announcement:i}));return n?Us.createPortal(d,n):d}var os;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(os||(os={}));function dE(){}function bht(e,t){return f.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function _ht(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const qi=Object.freeze({x:0,y:0});function zU(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function wht(e,t){const n=uE(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function GU(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Cht(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function LP(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function mxe(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function DZ(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Etn=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=DZ(t,t.left,t.top),a=[];for(const i of r){const{id:l}=i,c=n.get(l);if(c){const u=zU(DZ(c),s);a.push({id:l,data:{droppableContainer:i,value:u}})}}return a.sort(GU)},Sht=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=LP(t),a=[];for(const i of r){const{id:l}=i,c=n.get(l);if(c){const u=LP(c),d=s.reduce((p,h,g)=>p+zU(u[g],h),0),m=Number((d/4).toFixed(4));a.push({id:l,data:{droppableContainer:i,value:m}})}}return a.sort(GU)};function Eht(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),i=s-r,l=a-n;if(r<s&&n<a){const c=t.width*t.height,u=e.width*e.height,d=i*l,m=d/(c+u-d);return Number(m.toFixed(4))}return 0}const Mht=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const a of r){const{id:i}=a,l=n.get(i);if(l){const c=Eht(l,t);c>0&&s.push({id:i,data:{droppableContainer:a,value:c}})}}return s.sort(Cht)};function kht(e,t){const{top:n,left:r,bottom:s,right:a}=t;return n<=e.y&&e.y<=s&&r<=e.x&&e.x<=a}const Tht=e=>{let{droppableContainers:t,droppableRects:n,pointerCoordinates:r}=e;if(!r)return[];const s=[];for(const a of t){const{id:i}=a,l=n.get(i);if(l&&kht(r,l)){const u=LP(l).reduce((m,p)=>m+zU(r,p),0),d=Number((u/4).toFixed(4));s.push({id:i,data:{droppableContainer:a,value:d}})}}return s.sort(GU)};function Nht(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function pxe(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:qi}function jht(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((i,l)=>({...i,top:i.top+e*l.y,bottom:i.bottom+e*l.y,left:i.left+e*l.x,right:i.right+e*l.x}),{...n})}}const Aht=jht(1);function hxe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Iht(e,t,n){const r=hxe(t);if(!r)return e;const{scaleX:s,scaleY:a,x:i,y:l}=r,c=e.left-i-(1-s)*parseFloat(n),u=e.top-l-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),d=s?e.width/s:e.width,m=a?e.height/a:e.height;return{width:d,height:m,top:u,right:c+d,bottom:u+m,left:c}}const Rht={ignoreTransform:!1};function Vy(e,t){t===void 0&&(t=Rht);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=La(e).getComputedStyle(e);u&&(n=Iht(n,u,d))}const{top:r,left:s,width:a,height:i,bottom:l,right:c}=n;return{top:r,left:s,width:a,height:i,bottom:l,right:c}}function FZ(e){return Vy(e,{ignoreTransform:!0})}function Pht(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Oht(e,t){return t===void 0&&(t=La(e).getComputedStyle(e)),t.position==="fixed"}function Lht(e,t){t===void 0&&(t=La(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const a=t[s];return typeof a=="string"?n.test(a):!1})}function D3(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(HU(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!o_(s)||uxe(s)||n.includes(s))return n;const a=La(e).getComputedStyle(s);return s!==e&&Lht(s,a)&&n.push(s),Oht(s,a)?n:r(s.parentNode)}return e?r(e):n}function gxe(e){const[t]=D3(e,1);return t??null}function Wj(e){return!P3||!e?null:Uy(e)?e:WU(e)?HU(e)||e===By(e).scrollingElement?window:o_(e)?e:null:null}function yxe(e){return Uy(e)?e.scrollX:e.scrollLeft}function vxe(e){return Uy(e)?e.scrollY:e.scrollTop}function DP(e){return{x:yxe(e),y:vxe(e)}}var gs;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(gs||(gs={}));function xxe(e){return!P3||!e?!1:e===document.scrollingElement}function bxe(e){const t={x:0,y:0},n=xxe(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:s,isLeft:a,isBottom:i,isRight:l,maxScroll:r,minScroll:t}}const Dht={x:.2,y:.2};function Fht(e,t,n,r,s){let{top:a,left:i,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=Dht);const{isTop:u,isBottom:d,isLeft:m,isRight:p}=bxe(e),h={x:0,y:0},g={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!u&&a<=t.top+y.height?(h.y=gs.Backward,g.y=r*Math.abs((t.top+y.height-a)/y.height)):!d&&c>=t.bottom-y.height&&(h.y=gs.Forward,g.y=r*Math.abs((t.bottom-y.height-c)/y.height)),!p&&l>=t.right-y.width?(h.x=gs.Forward,g.x=r*Math.abs((t.right-y.width-l)/y.width)):!m&&i<=t.left+y.width&&(h.x=gs.Backward,g.x=r*Math.abs((t.left+y.width-i)/y.width)),{direction:h,speed:g}}function Uht(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:i}=window;return{top:0,left:0,right:a,bottom:i,width:a,height:i}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function _xe(e){return e.reduce((t,n)=>Ih(t,DP(n)),qi)}function Bht(e){return e.reduce((t,n)=>t+yxe(n),0)}function Vht(e){return e.reduce((t,n)=>t+vxe(n),0)}function wxe(e,t){if(t===void 0&&(t=Vy),!e)return;const{top:n,left:r,bottom:s,right:a}=t(e);gxe(e)&&(s<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const $ht=[["x",["left","right"],Bht],["y",["top","bottom"],Vht]];class qU{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=D3(n),s=_xe(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,i,l]of $ht)for(const c of i)Object.defineProperty(this,c,{get:()=>{const u=l(r),d=s[a]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ex{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Wht(e){const{EventTarget:t}=La(e);return e instanceof t?e:By(e)}function Hj(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Jo;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Jo||(Jo={}));function UZ(e){e.preventDefault()}function Hht(e){e.stopPropagation()}var xn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(xn||(xn={}));const Cxe={start:[xn.Space,xn.Enter],cancel:[xn.Esc],end:[xn.Space,xn.Enter,xn.Tab]},zht=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case xn.Right:return{...n,x:n.x+25};case xn.Left:return{...n,x:n.x-25};case xn.Down:return{...n,y:n.y+25};case xn.Up:return{...n,y:n.y-25}}};class Sxe{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new ex(By(n)),this.windowListeners=new ex(La(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Jo.Resize,this.handleCancel),this.windowListeners.add(Jo.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Jo.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&wxe(r),n(qi)}handleKeyDown(t){if(L3(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:a=Cxe,coordinateGetter:i=zht,scrollBehavior:l="smooth"}=s,{code:c}=t;if(a.end.includes(c)){this.handleEnd(t);return}if(a.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:qi;this.referenceCoordinates||(this.referenceCoordinates=d);const m=i(t,{active:n,context:r.current,currentCoordinates:d});if(m){const p=_1(m,d),h={x:0,y:0},{scrollableAncestors:g}=r.current;for(const y of g){const v=t.code,{isTop:x,isRight:b,isLeft:_,isBottom:w,maxScroll:C,minScroll:S}=bxe(y),E=Uht(y),M={x:Math.min(v===xn.Right?E.right-E.width/2:E.right,Math.max(v===xn.Right?E.left:E.left+E.width/2,m.x)),y:Math.min(v===xn.Down?E.bottom-E.height/2:E.bottom,Math.max(v===xn.Down?E.top:E.top+E.height/2,m.y))},k=v===xn.Right&&!b||v===xn.Left&&!_,A=v===xn.Down&&!w||v===xn.Up&&!x;if(k&&M.x!==m.x){const R=y.scrollLeft+p.x,O=v===xn.Right&&R<=C.x||v===xn.Left&&R>=S.x;if(O&&!p.y){y.scrollTo({left:R,behavior:l});return}O?h.x=y.scrollLeft-R:h.x=v===xn.Right?y.scrollLeft-C.x:y.scrollLeft-S.x,h.x&&y.scrollBy({left:-h.x,behavior:l});break}else if(A&&M.y!==m.y){const R=y.scrollTop+p.y,O=v===xn.Down&&R<=C.y||v===xn.Up&&R>=S.y;if(O&&!p.x){y.scrollTo({top:R,behavior:l});return}O?h.y=y.scrollTop-R:h.y=v===xn.Down?y.scrollTop-C.y:y.scrollTop-S.y,h.y&&y.scrollBy({top:-h.y,behavior:l});break}}this.handleMove(t,Ih(_1(m,this.referenceCoordinates),h))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Sxe.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Cxe,onActivation:s}=t,{active:a}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const l=a.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),s?.({event:e.nativeEvent}),!0)}return!1}}];function BZ(e){return!!(e&&"distance"in e)}function VZ(e){return!!(e&&"delay"in e)}class KU{constructor(t,n,r){var s;r===void 0&&(r=Wht(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:i}=a;this.props=t,this.events=n,this.document=By(i),this.documentListeners=new ex(this.document),this.listeners=new ex(r),this.windowListeners=new ex(La(i)),this.initialCoordinates=(s=uE(a))!=null?s:qi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Jo.Resize,this.handleCancel),this.windowListeners.add(Jo.DragStart,UZ),this.windowListeners.add(Jo.VisibilityChange,this.handleCancel),this.windowListeners.add(Jo.ContextMenu,UZ),this.documentListeners.add(Jo.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(VZ(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(BZ(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Jo.Click,Hht,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Jo.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:a}=this,{onMove:i,options:{activationConstraint:l}}=a;if(!s)return;const c=(n=uE(t))!=null?n:qi,u=_1(s,c);if(!r&&l){if(BZ(l)){if(l.tolerance!=null&&Hj(u,l.tolerance))return this.handleCancel();if(Hj(u,l.distance))return this.handleStart()}if(VZ(l)&&Hj(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),i(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===xn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Ght={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class YU extends KU{constructor(t){const{event:n}=t,r=By(n.target);super(t,Ght,r)}}YU.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const qht={move:{name:"mousemove"},end:{name:"mouseup"}};var FP;(function(e){e[e.RightClick=2]="RightClick"})(FP||(FP={}));class Kht extends KU{constructor(t){super(t,qht,By(t.event.target))}}Kht.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===FP.RightClick?!1:(r?.({event:n}),!0)}}];const zj={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Yht extends KU{constructor(t){super(t,zj)}static setup(){return window.addEventListener(zj.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(zj.move.name,t)};function t(){}}}Yht.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r?.({event:n}),!0)}}];var tx;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(tx||(tx={}));var fE;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(fE||(fE={}));function Qht(e){let{acceleration:t,activator:n=tx.Pointer,canScroll:r,draggingRect:s,enabled:a,interval:i=5,order:l=fE.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:m,threshold:p}=e;const h=Zht({delta:m,disabled:!a}),[g,y]=iht(),v=f.useRef({x:0,y:0}),x=f.useRef({x:0,y:0}),b=f.useMemo(()=>{switch(n){case tx.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case tx.DraggableRect:return s}},[n,s,c]),_=f.useRef(null),w=f.useCallback(()=>{const S=_.current;if(!S)return;const E=v.current.x*x.current.x,M=v.current.y*x.current.y;S.scrollBy(E,M)},[]),C=f.useMemo(()=>l===fE.TreeOrder?[...u].reverse():u,[l,u]);f.useEffect(()=>{if(!a||!u.length||!b){y();return}for(const S of C){if(r?.(S)===!1)continue;const E=u.indexOf(S),M=d[E];if(!M)continue;const{direction:k,speed:A}=Fht(S,M,b,t,p);for(const R of["x","y"])h[R][k[R]]||(A[R]=0,k[R]=0);if(A.x>0||A.y>0){y(),_.current=S,g(w,i),v.current=A,x.current=k;return}}v.current={x:0,y:0},x.current={x:0,y:0},y()},[t,w,r,y,a,i,JSON.stringify(b),JSON.stringify(h),g,u,C,d,JSON.stringify(p)])}const Xht={x:{[gs.Backward]:!1,[gs.Forward]:!1},y:{[gs.Backward]:!1,[gs.Forward]:!1}};function Zht(e){let{delta:t,disabled:n}=e;const r=cE(t);return i_(s=>{if(n||!r||!s)return Xht;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[gs.Backward]:s.x[gs.Backward]||a.x===-1,[gs.Forward]:s.x[gs.Forward]||a.x===1},y:{[gs.Backward]:s.y[gs.Backward]||a.y===-1,[gs.Forward]:s.y[gs.Forward]||a.y===1}}},[n,t,r])}function Jht(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return i_(s=>{var a;return t==null?null:(a=r??s)!=null?a:null},[r,t])}function egt(e,t){return f.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,a=s.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...a]},[]),[e,t])}var w1;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(w1||(w1={}));var UP;(function(e){e.Optimized="optimized"})(UP||(UP={}));const $Z=new Map;function tgt(e,t){let{dragging:n,dependencies:r,config:s}=t;const[a,i]=f.useState(null),{frequency:l,measure:c,strategy:u}=s,d=f.useRef(e),m=v(),p=b1(m),h=f.useCallback(function(x){x===void 0&&(x=[]),!p.current&&i(b=>b===null?x:b.concat(x.filter(_=>!b.includes(_))))},[p]),g=f.useRef(null),y=i_(x=>{if(m&&!n)return $Z;if(!x||x===$Z||d.current!==e||a!=null){const b=new Map;for(let _ of e){if(!_)continue;if(a&&a.length>0&&!a.includes(_.id)&&_.rect.current){b.set(_.id,_.rect.current);continue}const w=_.node.current,C=w?new qU(c(w),w):null;_.rect.current=C,C&&b.set(_.id,C)}return b}return x},[e,a,n,m,c]);return f.useEffect(()=>{d.current=e},[e]),f.useEffect(()=>{m||h()},[n,m]),f.useEffect(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),f.useEffect(()=>{m||typeof l!="number"||g.current!==null||(g.current=setTimeout(()=>{h(),g.current=null},l))},[l,m,h,...r]),{droppableRects:y,measureDroppableContainers:h,measuringScheduled:a!=null};function v(){switch(u){case w1.Always:return!1;case w1.BeforeDragging:return n;default:return!n}}}function QU(e,t){return i_(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function ngt(e,t){return QU(e,t)}function rgt(e){let{callback:t,disabled:n}=e;const r=O3(t),s=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return f.useEffect(()=>()=>s?.disconnect(),[s]),s}function F3(e){let{callback:t,disabled:n}=e;const r=O3(t),s=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return f.useEffect(()=>()=>s?.disconnect(),[s]),s}function sgt(e){return new qU(Vy(e),e)}function WZ(e,t,n){t===void 0&&(t=sgt);const[r,s]=f.useState(null);function a(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??n)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const i=rgt({callback(c){if(e)for(const u of c){const{type:d,target:m}=u;if(d==="childList"&&m instanceof HTMLElement&&m.contains(e)){a();break}}}}),l=F3({callback:a});return Gi(()=>{a(),e?(l?.observe(e),i?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),i?.disconnect())},[e]),r}function agt(e){const t=QU(e);return pxe(e,t)}const HZ=[];function ogt(e){const t=f.useRef(e),n=i_(r=>e?r&&r!==HZ&&e&&t.current&&e.parentNode===t.current.parentNode?r:D3(e):HZ,[e]);return f.useEffect(()=>{t.current=e},[e]),n}function igt(e){const[t,n]=f.useState(null),r=f.useRef(e),s=f.useCallback(a=>{const i=Wj(a.target);i&&n(l=>l?(l.set(i,DP(i)),new Map(l)):null)},[]);return f.useEffect(()=>{const a=r.current;if(e!==a){i(a);const l=e.map(c=>{const u=Wj(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,DP(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=e}return()=>{i(e),i(a)};function i(l){l.forEach(c=>{const u=Wj(c);u?.removeEventListener("scroll",s)})}},[s,e]),f.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,i)=>Ih(a,i),qi):_xe(e):qi,[e,t])}function zZ(e,t){t===void 0&&(t=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},t),f.useEffect(()=>{const r=e!==qi;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?_1(e,n.current):qi}function lgt(e){f.useEffect(()=>{if(!P3)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function cgt(e,t){return f.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:a}=r;return n[s]=i=>{a(i,t)},n},{}),[e,t])}function Exe(e){return f.useMemo(()=>e?Pht(e):null,[e])}const GZ=[];function ugt(e,t){t===void 0&&(t=Vy);const[n]=e,r=Exe(n?La(n):null),[s,a]=f.useState(GZ);function i(){a(()=>e.length?e.map(c=>xxe(c)?r:new qU(t(c),c)):GZ)}const l=F3({callback:i});return Gi(()=>{l?.disconnect(),i(),e.forEach(c=>l?.observe(c))},[e]),s}function Mxe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return o_(t)?t:e}function dgt(e){let{measure:t}=e;const[n,r]=f.useState(null),s=f.useCallback(u=>{for(const{target:d}of u)if(o_(d)){r(m=>{const p=t(d);return m?{...m,width:p.width,height:p.height}:p});break}},[t]),a=F3({callback:s}),i=f.useCallback(u=>{const d=Mxe(u);a?.disconnect(),d&&a?.observe(d),r(d?t(d):null)},[t,a]),[l,c]=lE(i);return f.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const fgt=[{sensor:YU,options:{}},{sensor:Sxe,options:{}}],mgt={current:{}},OS={draggable:{measure:FZ},droppable:{measure:FZ,strategy:w1.WhileDragging,frequency:UP.Optimized},dragOverlay:{measure:Vy}};class nx extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const pgt={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new nx,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:dE},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:OS,measureDroppableContainers:dE,windowRect:null,measuringScheduled:!1},kxe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:dE,draggableNodes:new Map,over:null,measureDroppableContainers:dE},c_=f.createContext(kxe),Txe=f.createContext(pgt);function hgt(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new nx}}}function ggt(e,t){switch(t.type){case os.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case os.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case os.DragEnd:case os.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case os.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new nx(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case os.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new nx(e.droppable.containers);return i.set(n,{...a,disabled:s}),{...e,droppable:{...e.droppable,containers:i}}}case os.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new nx(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function ygt(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=f.useContext(c_),a=cE(r),i=cE(n?.id);return f.useEffect(()=>{if(!t&&!r&&a&&i!=null){if(!L3(a)||document.activeElement===a.target)return;const l=s.get(i);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const m=uht(d);if(m){m.focus();break}}})}},[r,t,s,i,a]),null}function Nxe(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,a)=>a({transform:s,...r}),n):n}function vgt(e){return f.useMemo(()=>({draggable:{...OS.draggable,...e?.draggable},droppable:{...OS.droppable,...e?.droppable},dragOverlay:{...OS.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function xgt(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const a=f.useRef(!1),{x:i,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Gi(()=>{if(!i&&!l||!t){a.current=!1;return}if(a.current||!r)return;const u=t?.node.current;if(!u||u.isConnected===!1)return;const d=n(u),m=pxe(d,r);if(i||(m.x=0),l||(m.y=0),a.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const p=gxe(u);p&&p.scrollBy({top:m.y,left:m.x})}},[t,i,l,r,n])}const U3=f.createContext({...qi,scaleX:1,scaleY:1});var qu;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(qu||(qu={}));const bgt=f.memo(function(t){var n,r,s,a;let{id:i,accessibility:l,autoScroll:c=!0,children:u,sensors:d=fgt,collisionDetection:m=Mht,measuring:p,modifiers:h,...g}=t;const y=f.useReducer(ggt,void 0,hgt),[v,x]=y,[b,_]=ght(),[w,C]=f.useState(qu.Uninitialized),S=w===qu.Initialized,{draggable:{active:E,nodes:M,translate:k},droppable:{containers:A}}=v,R=E!=null?M.get(E):null,O=f.useRef({initial:null,translated:null}),L=f.useMemo(()=>{var Xe;return E!=null?{id:E,data:(Xe=R?.data)!=null?Xe:mgt,rect:O}:null},[E,R]),P=f.useRef(null),[N,T]=f.useState(null),[j,F]=f.useState(null),U=b1(g,Object.values(g)),V=l_("DndDescribedBy",i),$=f.useMemo(()=>A.getEnabled(),[A]),z=vgt(p),{droppableRects:Q,measureDroppableContainers:Y,measuringScheduled:W}=tgt($,{dragging:S,dependencies:[k.x,k.y],config:z.droppable}),X=Jht(M,E),G=f.useMemo(()=>j?uE(j):null,[j]),J=Pn(),q=ngt(X,z.draggable.measure);xgt({activeNode:E!=null?M.get(E):null,config:J.layoutShiftCompensation,initialRect:q,measure:z.draggable.measure});const te=WZ(X,z.draggable.measure,q),re=WZ(X?X.parentElement:null),ae=f.useRef({activatorEvent:null,active:null,activeNode:X,collisionRect:null,collisions:null,droppableRects:Q,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),fe=A.getNodeFor((n=ae.current.over)==null?void 0:n.id),de=dgt({measure:z.dragOverlay.measure}),ve=(r=de.nodeRef.current)!=null?r:X,_e=S?(s=de.rect)!=null?s:te:null,Se=!!(de.nodeRef.current&&de.rect),be=agt(Se?null:te),me=Exe(ve?La(ve):null),Ae=ogt(S?fe??X:null),Ee=ugt(Ae),je=Nxe(h,{transform:{x:k.x-be.x,y:k.y-be.y,scaleX:1,scaleY:1},activatorEvent:j,active:L,activeNodeRect:te,containerNodeRect:re,draggingNodeRect:_e,over:ae.current.over,overlayNodeRect:de.rect,scrollableAncestors:Ae,scrollableAncestorRects:Ee,windowRect:me}),Me=G?Ih(G,k):null,Ye=igt(Ae),at=zZ(Ye),it=zZ(Ye,[te]),ke=Ih(je,at),Ue=_e?Aht(_e,je):null,Ot=L&&Ue?m({active:L,collisionRect:Ue,droppableRects:Q,droppableContainers:$,pointerCoordinates:Me}):null,yt=mxe(Ot,"id"),[St,et]=f.useState(null),He=Se?je:Ih(je,it),Be=Nht(He,(a=St?.rect)!=null?a:null,te),ut=f.useRef(null),kt=f.useCallback((Xe,Ve)=>{let{sensor:lt,options:qt}=Ve;if(P.current==null)return;const ln=M.get(P.current);if(!ln)return;const $n=Xe.nativeEvent,we=new lt({active:P.current,activeNode:ln,event:$n,options:qt,context:ae,onAbort(De){if(!M.get(De))return;const{onDragAbort:Qe}=U.current,Pt={id:De};Qe?.(Pt),b({type:"onDragAbort",event:Pt})},onPending(De,tt,Qe,Pt){if(!M.get(De))return;const{onDragPending:Fn}=U.current,cn={id:De,constraint:tt,initialCoordinates:Qe,offset:Pt};Fn?.(cn),b({type:"onDragPending",event:cn})},onStart(De){const tt=P.current;if(tt==null)return;const Qe=M.get(tt);if(!Qe)return;const{onDragStart:Pt}=U.current,Sn={activatorEvent:$n,active:{id:tt,data:Qe.data,rect:O}};Us.unstable_batchedUpdates(()=>{Pt?.(Sn),C(qu.Initializing),x({type:os.DragStart,initialCoordinates:De,active:tt}),b({type:"onDragStart",event:Sn}),T(ut.current),F($n)})},onMove(De){x({type:os.DragMove,coordinates:De})},onEnd:qe(os.DragEnd),onCancel:qe(os.DragCancel)});ut.current=we;function qe(De){return async function(){const{active:Qe,collisions:Pt,over:Sn,scrollAdjustedTranslate:Fn}=ae.current;let cn=null;if(Qe&&Fn){const{cancelDrop:Lr}=U.current;cn={activatorEvent:$n,active:Qe,collisions:Pt,delta:Fn,over:Sn},De===os.DragEnd&&typeof Lr=="function"&&await Promise.resolve(Lr(cn))&&(De=os.DragCancel)}P.current=null,Us.unstable_batchedUpdates(()=>{x({type:De}),C(qu.Uninitialized),et(null),T(null),F(null),ut.current=null;const Lr=De===os.DragEnd?"onDragEnd":"onDragCancel";if(cn){const Ts=U.current[Lr];Ts?.(cn),b({type:Lr,event:cn})}})}}},[M]),$t=f.useCallback((Xe,Ve)=>(lt,qt)=>{const ln=lt.nativeEvent,$n=M.get(qt);if(P.current!==null||!$n||ln.dndKit||ln.defaultPrevented)return;const we={active:$n};Xe(lt,Ve.options,we)===!0&&(ln.dndKit={capturedBy:Ve.sensor},P.current=qt,kt(lt,Ve))},[M,kt]),tn=egt(d,$t);lgt(d),Gi(()=>{te&&w===qu.Initializing&&C(qu.Initialized)},[te,w]),f.useEffect(()=>{const{onDragMove:Xe}=U.current,{active:Ve,activatorEvent:lt,collisions:qt,over:ln}=ae.current;if(!Ve||!lt)return;const $n={active:Ve,activatorEvent:lt,collisions:qt,delta:{x:ke.x,y:ke.y},over:ln};Us.unstable_batchedUpdates(()=>{Xe?.($n),b({type:"onDragMove",event:$n})})},[ke.x,ke.y]),f.useEffect(()=>{const{active:Xe,activatorEvent:Ve,collisions:lt,droppableContainers:qt,scrollAdjustedTranslate:ln}=ae.current;if(!Xe||P.current==null||!Ve||!ln)return;const{onDragOver:$n}=U.current,we=qt.get(yt),qe=we&&we.rect.current?{id:we.id,rect:we.rect.current,data:we.data,disabled:we.disabled}:null,De={active:Xe,activatorEvent:Ve,collisions:lt,delta:{x:ln.x,y:ln.y},over:qe};Us.unstable_batchedUpdates(()=>{et(qe),$n?.(De),b({type:"onDragOver",event:De})})},[yt]),Gi(()=>{ae.current={activatorEvent:j,active:L,activeNode:X,collisionRect:Ue,collisions:Ot,droppableRects:Q,draggableNodes:M,draggingNode:ve,draggingNodeRect:_e,droppableContainers:A,over:St,scrollableAncestors:Ae,scrollAdjustedTranslate:ke},O.current={initial:_e,translated:Ue}},[L,X,Ot,Ue,M,ve,_e,Q,A,St,Ae,ke]),Qht({...J,delta:k,draggingRect:Ue,pointerCoordinates:Me,scrollableAncestors:Ae,scrollableAncestorRects:Ee});const nn=f.useMemo(()=>({active:L,activeNode:X,activeNodeRect:te,activatorEvent:j,collisions:Ot,containerNodeRect:re,dragOverlay:de,draggableNodes:M,droppableContainers:A,droppableRects:Q,over:St,measureDroppableContainers:Y,scrollableAncestors:Ae,scrollableAncestorRects:Ee,measuringConfiguration:z,measuringScheduled:W,windowRect:me}),[L,X,te,j,Ot,re,de,M,A,Q,St,Y,Ae,Ee,z,W,me]),Cn=f.useMemo(()=>({activatorEvent:j,activators:tn,active:L,activeNodeRect:te,ariaDescribedById:{draggable:V},dispatch:x,draggableNodes:M,over:St,measureDroppableContainers:Y}),[j,tn,L,te,x,V,M,St,Y]);return I.createElement(fxe.Provider,{value:_},I.createElement(c_.Provider,{value:Cn},I.createElement(Txe.Provider,{value:nn},I.createElement(U3.Provider,{value:Be},u)),I.createElement(ygt,{disabled:l?.restoreFocus===!1})),I.createElement(xht,{...l,hiddenTextDescribedById:V}));function Pn(){const Xe=N?.autoScrollEnabled===!1,Ve=typeof c=="object"?c.enabled===!1:c===!1,lt=S&&!Xe&&!Ve;return typeof c=="object"?{...c,enabled:lt}:{enabled:lt}}}),_gt=f.createContext(null),qZ="button",wgt="Draggable";function Cgt(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const a=l_(wgt),{activators:i,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:m,over:p}=f.useContext(c_),{role:h=qZ,roleDescription:g="draggable",tabIndex:y=0}=s??{},v=c?.id===t,x=f.useContext(v?U3:_gt),[b,_]=lE(),[w,C]=lE(),S=cgt(i,t),E=b1(n);Gi(()=>(m.set(t,{id:t,key:a,node:b,activatorNode:w,data:E}),()=>{const k=m.get(t);k&&k.key===a&&m.delete(t)}),[m,t]);const M=f.useMemo(()=>({role:h,tabIndex:y,"aria-disabled":r,"aria-pressed":v&&h===qZ?!0:void 0,"aria-roledescription":g,"aria-describedby":d.draggable}),[r,h,y,v,g,d.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:M,isDragging:v,listeners:r?void 0:S,node:b,over:p,setNodeRef:_,setActivatorNodeRef:C,transform:x}}function jxe(){return f.useContext(Txe)}const Sgt="Droppable",Egt={timeout:25};function Mgt(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const a=l_(Sgt),{active:i,dispatch:l,over:c,measureDroppableContainers:u}=f.useContext(c_),d=f.useRef({disabled:n}),m=f.useRef(!1),p=f.useRef(null),h=f.useRef(null),{disabled:g,updateMeasurementsFor:y,timeout:v}={...Egt,...s},x=b1(y??r),b=f.useCallback(()=>{if(!m.current){m.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),h.current=null},v)},[v]),_=F3({callback:b,disabled:g||!i}),w=f.useCallback((M,k)=>{_&&(k&&(_.unobserve(k),m.current=!1),M&&_.observe(M))},[_]),[C,S]=lE(w),E=b1(t);return f.useEffect(()=>{!_||!C.current||(_.disconnect(),m.current=!1,_.observe(C.current))},[C,_]),f.useEffect(()=>(l({type:os.RegisterDroppable,element:{id:r,key:a,disabled:n,node:C,rect:p,data:E}}),()=>l({type:os.UnregisterDroppable,key:a,id:r})),[r]),f.useEffect(()=>{n!==d.current.disabled&&(l({type:os.SetDroppableDisabled,id:r,key:a,disabled:n}),d.current.disabled=n)},[r,a,n,l]),{active:i,rect:p,isOver:c?.id===r,node:C,over:c,setNodeRef:S}}function kgt(e){let{animation:t,children:n}=e;const[r,s]=f.useState(null),[a,i]=f.useState(null),l=cE(n);return!n&&!r&&l&&s(l),Gi(()=>{if(!a)return;const c=r?.key,u=r?.props.id;if(c==null||u==null){s(null);return}Promise.resolve(t(u,a)).then(()=>{s(null)})},[t,r,a]),I.createElement(I.Fragment,null,n,r?f.cloneElement(r,{ref:i}):null)}const Tgt={x:0,y:0,scaleX:1,scaleY:1};function Ngt(e){let{children:t}=e;return I.createElement(c_.Provider,{value:kxe},I.createElement(U3.Provider,{value:Tgt},t))}const jgt={position:"fixed",touchAction:"none"},Agt=e=>L3(e)?"transform 250ms ease":void 0,Igt=f.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:a,className:i,rect:l,style:c,transform:u,transition:d=Agt}=e;if(!l)return null;const m=s?u:{...u,scaleX:1,scaleY:1},p={...jgt,width:l.width,height:l.height,top:l.top,left:l.left,transform:Cm.Transform.toString(m),transformOrigin:s&&r?wht(r,l):void 0,transition:typeof d=="function"?d(r):d,...c};return I.createElement(n,{className:i,style:p,ref:t},a)}),Rgt=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:a,className:i}=e;if(a!=null&&a.active)for(const[l,c]of Object.entries(a.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(a!=null&&a.dragOverlay)for(const[l,c]of Object.entries(a.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);i!=null&&i.active&&n.node.classList.remove(i.active)}},Pgt=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Cm.Transform.toString(t)},{transform:Cm.Transform.toString(n)}]},Ogt={duration:250,easing:"ease",keyframes:Pgt,sideEffects:Rgt({styles:{active:{opacity:"0"}}})};function Lgt(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return O3((a,i)=>{if(t===null)return;const l=n.get(a);if(!l)return;const c=l.node.current;if(!c)return;const u=Mxe(i);if(!u)return;const{transform:d}=La(i).getComputedStyle(i),m=hxe(d);if(!m)return;const p=typeof t=="function"?t:Dgt(t);return wxe(c,s.draggable.measure),p({active:{id:a,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:i,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:m})})}function Dgt(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...Ogt,...e};return a=>{let{active:i,dragOverlay:l,transform:c,...u}=a;if(!t)return;const d={x:l.rect.left-i.rect.left,y:l.rect.top-i.rect.top},m={scaleX:c.scaleX!==1?i.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?i.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-d.x,y:c.y-d.y,...m},h=s({...u,active:i,dragOverlay:l,transform:{initial:c,final:p}}),[g]=h,y=h[h.length-1];if(JSON.stringify(g)===JSON.stringify(y))return;const v=r?.({active:i,dragOverlay:l,...u}),x=l.node.animate(h,{duration:t,easing:n,fill:"forwards"});return new Promise(b=>{x.onfinish=()=>{v?.(),b()}})}}let KZ=0;function Fgt(e){return f.useMemo(()=>{if(e!=null)return KZ++,KZ},[e])}const Mtn=I.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:a,modifiers:i,wrapperElement:l="div",className:c,zIndex:u=999}=e;const{activatorEvent:d,active:m,activeNodeRect:p,containerNodeRect:h,draggableNodes:g,droppableContainers:y,dragOverlay:v,over:x,measuringConfiguration:b,scrollableAncestors:_,scrollableAncestorRects:w,windowRect:C}=jxe(),S=f.useContext(U3),E=Fgt(m?.id),M=Nxe(i,{activatorEvent:d,active:m,activeNodeRect:p,containerNodeRect:h,draggingNodeRect:v.rect,over:x,overlayNodeRect:v.rect,scrollableAncestors:_,scrollableAncestorRects:w,transform:S,windowRect:C}),k=QU(p),A=Lgt({config:r,draggableNodes:g,droppableContainers:y,measuringConfiguration:b}),R=k?v.setRef:void 0;return I.createElement(Ngt,null,I.createElement(kgt,{animation:A},m&&E?I.createElement(Igt,{key:E,id:m.id,ref:R,as:l,activatorEvent:d,adjustScale:t,className:c,transition:a,rect:k,style:{zIndex:u,...s},transform:M},n):null))});function XU(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Ugt(e,t){return e.reduce((n,r,s)=>{const a=t.get(r);return a&&(n[s]=a),n},Array(e.length))}function mC(e){return e!==null&&e>=0}function Bgt(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Vgt(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Axe=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const a=XU(t,r,n),i=t[s],l=a[s];return!l||!i?null:{x:l.left-i.left,y:l.top-i.top,scaleX:l.width/i.width,scaleY:l.height/i.height}},pC={scaleX:1,scaleY:1},ktn=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:a,overIndex:i}=e;const l=(t=a[n])!=null?t:r;if(!l)return null;if(s===n){const u=a[i];return u?{x:0,y:n<i?u.top+u.height-(l.top+l.height):u.top-l.top,...pC}:null}const c=$gt(a,s,n);return s>n&&s<=i?{x:0,y:-l.height-c,...pC}:s<n&&s>=i?{x:0,y:l.height+c,...pC}:{x:0,y:0,...pC}};function $gt(e,t,n){const r=e[t],s=e[t-1],a=e[t+1];return r?n<t?s?r.top-(s.top+s.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Ixe="Sortable",Rxe=I.createContext({activeIndex:-1,containerId:Ixe,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Axe,disabled:{draggable:!1,droppable:!1}});function Wgt(e){let{children:t,id:n,items:r,strategy:s=Axe,disabled:a=!1}=e;const{active:i,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=jxe(),m=l_(Ixe,n),p=l.rect!==null,h=f.useMemo(()=>r.map(S=>typeof S=="object"&&"id"in S?S.id:S),[r]),g=i!=null,y=i?h.indexOf(i.id):-1,v=u?h.indexOf(u.id):-1,x=f.useRef(h),b=!Bgt(h,x.current),_=v!==-1&&y===-1||b,w=Vgt(a);Gi(()=>{b&&g&&d(h)},[b,h,g,d]),f.useEffect(()=>{x.current=h},[h]);const C=f.useMemo(()=>({activeIndex:y,containerId:m,disabled:w,disableTransforms:_,items:h,overIndex:v,useDragOverlay:p,sortedRects:Ugt(h,c),strategy:s}),[y,m,w.draggable,w.droppable,_,h,v,c,p,s]);return I.createElement(Rxe.Provider,{value:C},t)}const Hgt=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return XU(n,r,s).indexOf(t)},zgt=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:a,newIndex:i,previousItems:l,previousContainerId:c,transition:u}=e;return!u||!r||l!==a&&s===i?!1:n?!0:i!==s&&t===c},Ggt={duration:200,easing:"ease"},Pxe="transform",qgt=Cm.Transition.toString({property:Pxe,duration:0,easing:"linear"}),Kgt={roleDescription:"sortable"};function Ygt(e){let{disabled:t,index:n,node:r,rect:s}=e;const[a,i]=f.useState(null),l=f.useRef(n);return Gi(()=>{if(!t&&n!==l.current&&r.current){const c=s.current;if(c){const u=Vy(r.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&i(d)}}n!==l.current&&(l.current=n)},[t,n,r,s]),f.useEffect(()=>{a&&i(null)},[a]),a}function Qgt(e){let{animateLayoutChanges:t=zgt,attributes:n,disabled:r,data:s,getNewIndex:a=Hgt,id:i,strategy:l,resizeObserverConfig:c,transition:u=Ggt}=e;const{items:d,containerId:m,activeIndex:p,disabled:h,disableTransforms:g,sortedRects:y,overIndex:v,useDragOverlay:x,strategy:b}=f.useContext(Rxe),_=Xgt(r,h),w=d.indexOf(i),C=f.useMemo(()=>({sortable:{containerId:m,index:w,items:d},...s}),[m,s,w,d]),S=f.useMemo(()=>d.slice(d.indexOf(i)),[d,i]),{rect:E,node:M,isOver:k,setNodeRef:A}=Mgt({id:i,data:C,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:R,activatorEvent:O,activeNodeRect:L,attributes:P,setNodeRef:N,listeners:T,isDragging:j,over:F,setActivatorNodeRef:U,transform:V}=Cgt({id:i,data:C,attributes:{...Kgt,...n},disabled:_.draggable}),$=oht(A,N),z=!!R,Q=z&&!g&&mC(p)&&mC(v),Y=!x&&j,W=Y&&Q?V:null,G=Q?W??(l??b)({rects:y,activeNodeRect:L,activeIndex:p,overIndex:v,index:w}):null,J=mC(p)&&mC(v)?a({id:i,items:d,activeIndex:p,overIndex:v}):w,q=R?.id,te=f.useRef({activeId:q,items:d,newIndex:J,containerId:m}),re=d!==te.current.items,ae=t({active:R,containerId:m,isDragging:j,isSorting:z,id:i,index:w,items:d,newIndex:te.current.newIndex,previousItems:te.current.items,previousContainerId:te.current.containerId,transition:u,wasDragging:te.current.activeId!=null}),fe=Ygt({disabled:!ae,index:w,node:M,rect:E});return f.useEffect(()=>{z&&te.current.newIndex!==J&&(te.current.newIndex=J),m!==te.current.containerId&&(te.current.containerId=m),d!==te.current.items&&(te.current.items=d)},[z,J,m,d]),f.useEffect(()=>{if(q===te.current.activeId)return;if(q!=null&&te.current.activeId==null){te.current.activeId=q;return}const ve=setTimeout(()=>{te.current.activeId=q},50);return()=>clearTimeout(ve)},[q]),{active:R,activeIndex:p,attributes:P,data:C,rect:E,index:w,newIndex:J,items:d,isOver:k,isSorting:z,isDragging:j,listeners:T,node:M,overIndex:v,over:F,setNodeRef:$,setActivatorNodeRef:U,setDroppableNodeRef:A,setDraggableNodeRef:N,transform:fe??G,transition:de()};function de(){if(fe||re&&te.current.newIndex===w)return qgt;if(!(Y&&!L3(O)||!u)&&(z||ae))return Cm.Transition.toString({...u,property:Pxe})}}function Xgt(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}function mE(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Zgt=[xn.Down,xn.Right,xn.Up,xn.Left],Ttn=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:a,over:i,scrollableAncestors:l}}=t;if(Zgt.includes(e.code)){if(e.preventDefault(),!n||!r)return;const c=[];a.getEnabled().forEach(m=>{if(!m||m!=null&&m.disabled)return;const p=s.get(m.id);if(p)switch(e.code){case xn.Down:r.top<p.top&&c.push(m);break;case xn.Up:r.top>p.top&&c.push(m);break;case xn.Left:r.left>p.left&&c.push(m);break;case xn.Right:r.left<p.left&&c.push(m);break}});const u=Sht({collisionRect:r,droppableRects:s,droppableContainers:c});let d=mxe(u,"id");if(d===i?.id&&u.length>1&&(d=u[1].id),d!=null){const m=a.get(n.id),p=a.get(d),h=p?s.get(p.id):null,g=p?.node.current;if(g&&h&&m&&p){const v=D3(g).some((S,E)=>l[E]!==S),x=Oxe(m,p),b=Jgt(m,p),_=v||!x?{x:0,y:0}:{x:b?r.width-h.width:0,y:b?r.height-h.height:0},w={x:h.left,y:h.top};return _.x&&_.y?w:_1(w,_)}}}};function Oxe(e,t){return!mE(e)||!mE(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Jgt(e,t){return!mE(e)||!mE(t)||!Oxe(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const eyt=({enabled:e=!0}={})=>{const{data:t,isLoading:n,isError:r}=We({enabled:e,queryKey:jXe(),queryFn:Fct,networkMode:"always",staleTime:1/0,gcTime:1/0});return{data:t??null,isLoading:n,isError:r}};function tyt(){const{data:e,isLoading:t}=eyt(),{trackEvent:n,trackEventOnce:r}=Ne(),s=Qb(e??void 0),[a,i]=f.useState(!1);f.useEffect(()=>{e&&e.name!=="comet_ntp_set_default"&&e.app_location===Ic.COMET_NTP_BANNER&&(i(!0),r("ntp banner upsell viewed",{upsellName:e.name,upsellType:e.upsell_type}))},[e,r]);const l=f.useCallback(()=>{e&&(n("ntp banner upsell dismissed",{upsellName:e.name,upsellType:e.upsell_type}),i(!1),Sot(e.name))},[e,n]),c=f.useCallback(()=>{e&&(n("ntp banner upsell clicked",{upsellName:e.name,upsellType:e.upsell_type}),s())},[e,n,s]),u=f.useMemo(()=>{if(e?.icon_reference&&e.icon_reference in Pc)return Pc[e.icon_reference]},[e]);return f.useMemo(()=>({show:a&&!!e,onDismiss:l,onClick:c,icon:u,title:e?.title,actionLabel:e?.button_text,isLoading:t,upsellName:e?.name}),[l,c,a,u,e,t])}const Lxe="pplx-top-sites-cache",nyt=()=>{try{const e=Re.getItem(Lxe);return e?JSON.parse(e):[]}catch{return[]}},ryt=e=>{Re.setItem(Lxe,JSON.stringify(e))};function Dxe({maxUrls:e=15}={}){const t=Zn(),n=nyt();return We({queryKey:["topMostUrls"],queryFn:async()=>{const s=(await Ptt({cometBrowser:t,maxUrls:e}))?.reduce((i,l)=>{const u=new URL(l.url).hostname;return(!i[u]||i[u].visitCount<l.visitCount)&&(i[u]=l),i},{})??{},a=Object.values(s);return ryt(a),a},placeholderData:n,staleTime:5*60*1e3})}const pE="comet-widgets",Sm="comet-widgets-content",ZU="default-shortcut-task-id";function Fxe(e,t){return e.find(n=>n.type===t)}function syt(e){return typeof e=="object"&&e!==null&&"version"in e&&typeof e.version=="number"&&e.version===1&&"taskId"in e&&typeof e.taskId=="string"&&"name"in e&&typeof e.name=="string"&&"query"in e&&typeof e.query=="string"}function Uxe({context:e,widgetId:t,defaultQuery:n,defaultName:r}){if(e==="widget"){const s=$y("SHORTCUT",t);if(syt(s))return s}return{version:1,taskId:ZU,name:r??"",query:n??""}}function ayt(){if(Re.getItem(Sm))return;const t=Re.getItem(pE);if(t)try{const n=JSON.parse(t),r={},s=n.map(a=>{if(a.content){const{content:i,...l}=a;return r[a.id]=i,l}return{id:a.id,type:a.type}});Re.setItem(pE,JSON.stringify(s)),Re.setItem(Sm,JSON.stringify(r))}catch{}}function Bxe(e){ayt();const t=Re.getItem(pE);if(!t)return e;try{const n=JSON.parse(t);return!n||!Array.isArray(n)?e:n.every(s=>s.id&&s.type&&typeof s.type=="string")?n:(JU(e),e)}catch{return e}}function JU(e){Re.setItem(pE,JSON.stringify(e))}function oyt(e){const n=Bxe([]).filter(r=>r.id!==e);JU(n)}function iyt(e){const t=Re.getItem(Sm);if(!t)return!1;try{return!!JSON.parse(t)[e]}catch{return!1}}function $y(e,t){const n=Re.getItem(Sm);if(!n)return null;let r=null;try{r=JSON.parse(n)[t]}catch{return null}return typeof r!="object"||r===null?null:{version:1,...r}}function Km(e,t,n){const r=Re.getItem(Sm);let s={};if(r)try{s=JSON.parse(r)}catch{s={}}s[t]=n,Re.setItem(Sm,JSON.stringify(s))}function lyt(e){const t=Re.getItem(Sm);if(!t)return!1;try{const n=JSON.parse(t);return e.every(s=>!!n[s])}catch{return!1}}function cyt(e){return e.startsWith("student-shortcut-")}const YZ="widget-analytics-last-sent",uyt=6*60*60*1e3;function dyt(e,t){const{trackEvent:n}=Ne();f.useEffect(()=>{const r=Date.now(),s=Re.getItem(YZ),a=s?parseInt(s,10):0;if(r-a<uyt)return;const i={},l=[];e.forEach(u=>{i[u.type]=(i[u.type]||0)+1,iyt(u.id)&&l.push(u.type)});const c=e.map(u=>Fxe(t,u.type));n("comet home widgets viewed",{enabledWidgets:i,widgetsWithSettings:l,widgetTypes:c.map(u=>u?.type),widgetNames:c.map(u=>u?.name)}),Re.setItem(YZ,r.toString())},[e,t,n])}const QZ="assistant-promo-config-cached";function fyt(){const{value:e,loading:t}=Su({flag:"assistant-promo-deeplinks",subjectType:"user_nextauth_id",defaultValue:{}}),[n,r]=f.useState(()=>{const a=Re.getItem(QZ);return a?JSON.parse(a):{}});f.useEffect(()=>{const a=e;!t&&JSON.stringify(a)!==JSON.stringify(n)&&(r(a),Re.setItem(QZ,JSON.stringify(a)))},[e,n,t]);const s=!!(n.deeplinkQueries&&n.deeplinkQueries.length>0);return f.useMemo(()=>({config:n,isLoading:t,shouldShowExploreAssistant:s}),[n,t,s])}const XZ="explore-assistant-should-show-cached",LS="explore-assistant-history-cache",Vxe=10*60*1e3,Gj=e=>e!=="unknown"&&!!e,myt=()=>{try{const e=Re.getItem(LS);if(!e)return null;const t=JSON.parse(e);return Date.now()-t.timestamp>Vxe?(Re.removeItem(LS),null):new Set(t.domainsInHistory)}catch{return Re.removeItem(LS),null}},ZZ=e=>{const t={timestamp:Date.now(),domainsInHistory:Array.from(e)};Re.setItem(LS,JSON.stringify(t))},JZ={url:"https://www.nytimes.com/games/wordle/index.html",query:"Take control over browser and win Wordle for me"},pyt=(e,t)=>!e||!t?`${JZ.url}#comet=${encodeURIComponent(JZ.query)}`:`${e}#comet=${encodeURIComponent(t)}`;function eB(){const{config:e,isLoading:t}=fyt(),n=Zn(),[r,s]=f.useState(()=>{const h=Re.getItem(XZ);return h?JSON.parse(h):!1}),a=f.useMemo(()=>e.deeplinkQueries||[],[e]),i=f.useMemo(()=>{const h=new Set;return a.forEach(g=>{if(g.action==="HISTORY_PRESENCE"){const y=Ta(g.url);Gj(y)&&h.add(y)}}),Array.from(h)},[a]),{data:l}=We({queryKey:["explore-assistant-history",i],queryFn:async()=>{if(!n||i.length===0)return new Set;const h=myt();if(h!==null)return h;try{const g=await n.getHistorySummary("explore-assistant-check",i,14,1),y=new Set;return g.history_results?.forEach(v=>{const x=Ta(v?.url||"");Gj(x)&&i.includes(x)&&y.add(x)}),ZZ(y),y}catch{return new Th("PARSE_HISTORY_FAILED",{message:"Explore Assistant failed to parse history"}),ZZ(new Set),new Set}},staleTime:Vxe,enabled:!0,retry:!1,throwOnError:!1}),c=f.useMemo(()=>l||new Set,[l]),u=f.useMemo(()=>{if(a.length===0)return null;const h=[],g=a.filter(x=>x.action==="ALWAYS");h.push(...g);const y=a.filter(x=>{if(x.action!=="HISTORY_PRESENCE")return!1;const b=Ta(x.url);return Gj(b)&&c.has(b)});if(h.push(...y),h.length===0)return null;const v=Math.floor(Math.random()*h.length);return h[v]||null},[a,c]),d=f.useMemo(()=>pyt(u?.url,u?.query),[u]),m=a?.length>0;f.useEffect(()=>{m!==r&&(s(m),Re.setItem(XZ,JSON.stringify(m)))},[m,r]);const p=t?r:m;return f.useMemo(()=>({targetUrl:d,isLoading:t,shouldShowWidget:p}),[d,t,p])}const $xe="default-widgets-cached";function Wxe(e){return`student-shortcut-${e}`}const BP=Array.from({length:4},(e,t)=>Wxe(t)),VP=e=>[...BP.map(t=>({id:t,type:"SHORTCUT"})),{id:"default-discover-prototype",type:"DISCOVER_PROTOTYPE"},{id:"default-analog-clock",type:"ANALOG_CLOCK"},{id:e?"default-explore-assistant":"default-assistant",type:e?"EXPLORE_ASSISTANT":"ASSISTANT"},{id:"default-stock",type:"STOCK"},{id:"default-weather",type:"WEATHER"},{id:"top-most-urls",type:"TOP_URLS"}],hyt=()=>{const e=Re.getItem($xe);if(e)try{return JSON.parse(e)}catch{return VP(!1)}return VP(!1)};function gyt(){const{shouldShowWidget:e,isLoading:t}=eB(),[n,r]=f.useState(hyt()),s=f.useMemo(()=>VP(e),[e]);f.useEffect(()=>{if(!t){const i=JSON.stringify(s),l=JSON.stringify(n);i!==l&&(r(s),Re.setItem($xe,i))}},[t,s,n]);const a=t?n:s;return f.useMemo(()=>({defaultWidgets:a,isLoading:t}),[a,t])}const yyt=e=>{const{value:t,loading:n}=zb({flag:"discover-comet-prototype-widgets",defaultValue:"disabled",extraAttributes:e,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:t,loading:n}),[t,n])},eJ="discover-prototype-should-show-cached",Hxe="discover-prototype-first-load";function vyt(){Re.setItem(Hxe,JSON.stringify(!0))}function xyt(){const e=Re.getItem(Hxe);return e?JSON.parse(e):!1}function byt(){const{variation:e,loading:t}=yyt(),[n,r]=f.useState(()=>{const i=Re.getItem(eJ);return i?JSON.parse(i):!1}),s=e==="enabled";f.useEffect(()=>{!t&&s!==n&&(r(s),Re.setItem(eJ,JSON.stringify(s)))},[s,n,t]);const a=t?n:s;return f.useMemo(()=>({isLoading:t,shouldShowWidget:a}),[t,a])}const Ym=Pe({productionMs:3e3}),_yt=Pe({productionMs:5e3}),tJ={TASK_LIMIT_EXCEEDED:"TASK_LIMIT_EXCEEDED",SHORTCUT_NAME_ALREADY_EXISTS:"SHORTCUT_NAME_ALREADY_EXISTS"},B3=async({taskId:e,headers:t,reason:n})=>{const{data:r,error:s}=await se.GET("/rest/tasks/{task_id}",n,{params:{path:{task_id:e}},timeoutMs:Pe(),numRetries:bu,headers:t});if(s)throw s;return r?.task?rme(r.task):null};async function Ntn({headers:e,reason:t,schedulerType:n}){const r="getUserAlerts";try{const a=(await se.GET("/rest/tasks/",t,{params:{query:{scheduler_type:n}},timeoutMs:Pe(),numRetries:bu,headers:e})).data?.tasks.map(rme);return a?a.sort((i,l)=>l.createdAt.valueOf()-i.createdAt.valueOf()):[]}catch(s){return ne.log(`Error in ${r}:`,s),[]}}const wyt=async({payload:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/tasks/",t,{body:e});if(r)throw r;return n},$P=async({taskId:e,payload:t,reason:n})=>{const{data:r,error:s}=await se.PATCH("/rest/tasks/{task_id}",n,{params:{path:{task_id:e}},body:t});if(s)throw s;return r},zxe=async({taskId:e,reason:t})=>se.DELETE("/rest/tasks/{task_id}",t,{params:{path:{task_id:e}},timeoutMs:Ym}),jtn=async({payload:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/tasks/suggest",t,{body:e,timeoutMs:1e4});if(r)throw r;return n},Cyt=async({payload:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/tasks/finance",t,{body:e});if(r)throw r;return n},Syt=async({taskId:e,payload:t,reason:n})=>{const{data:r,error:s}=await se.PATCH("/rest/tasks/finance/{task_id}",n,{params:{path:{task_id:e}},body:t});if(s)throw s;return r},Eyt=async({ticker:e,reason:t})=>{const{data:n,error:r}=await se.GET("/rest/tasks/finance/tickers/{ticker}",t,{params:{path:{ticker:e}},timeoutMs:Pe(),numRetries:bu});if(r)throw ne.error("Failed to get finance ticker",r),r;return n},Atn=async({payload:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/tasks/shortcuts",t,{body:e,timeoutMs:Ym});if(r)throw r;return n},Itn=async({payload:e,reason:t})=>{const{data:n,error:r}=await se.POST("/rest/tasks/shortcuts/slug",t,{body:e,timeoutMs:_yt});if(r)throw r;return n},Rtn=async({taskId:e,payload:t,reason:n})=>{const{data:r,error:s}=await se.PATCH("/rest/tasks/shortcuts/{task_id}",n,{body:t,params:{path:{task_id:e}},timeoutMs:Ym});if(s)throw s;return r},Ptn=async({shortcutId:e,reason:t})=>{const{data:n,error:r}=await se.DELETE("/rest/tasks/shortcuts/defaults/{shortcut_id}",t,{params:{path:{shortcut_id:e}},timeoutMs:Ym});if(r)throw r;return n},Otn=async({shortcutId:e,reason:t})=>{const{data:n,error:r}=await se.GET("/rest/tasks/shortcuts/copy/{shortcut_id}",t,{params:{path:{shortcut_id:e}},timeoutMs:Ym});if(r)throw r;return n},Myt=async({copyToken:e,reason:t,headers:n})=>{const{data:r,error:s}=await se.GET("/rest/tasks/shortcuts/paste/{copy_token}",t,{params:{path:{copy_token:e}},headers:n,timeoutMs:Ym});if(s)throw s;return r},Gxe=async({reason:e,headers:t})=>{const{data:n,error:r}=await se.GET("/rest/tasks/shortcuts/mentions",e,{params:{query:{order_by:"created_at"}},timeoutMs:Ym,numRetries:bu,headers:t});if(r)throw ne.error("Failed to get shortcut typeahead options",r),r;return n},V3=({reason:e,...t})=>We({queryKey:BXe(),queryFn:async()=>{const{tasks:n}=await Gxe({reason:e});return n},...t}),qxe="comet-shortcuts-student-status-cached";function kyt(){const e=Re.getItem(qxe);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function Tyt(e){Re.setItem(qxe,JSON.stringify(e))}function Nyt(e){return e.length>0&&lyt(e)}function jyt(){const[e]=f.useState(kyt),[t,n]=f.useState(Nyt(BP)),{data:r,isLoading:s}=V3({reason:"student-widgets-shortcuts"}),a=f.useMemo(()=>r?.filter(p=>p.metadata?.student_only)||[],[r]),i=f.useRef(null),l=f.useMemo(()=>(!i.current&&a.length>0&&(i.current=[...a].sort(()=>Math.random()-.5).slice(0,Math.min(a.length,BP.length))),i.current||[]),[a]),{signals:c,isLoading:u}=Oge({reason:"student-widgets"}),d=f.useMemo(()=>c.isVerifiedStudent||!1,[c.isVerifiedStudent]),m=f.useMemo(()=>u&&e!==null?e:d,[u,e,d]);return f.useEffect(()=>{u||Tyt(d)},[u,d]),f.useEffect(()=>{m&&r&&!s&&(l.forEach(({task_id:p,task_name:h,prompt:g},y)=>{Km("SHORTCUT",Wxe(y),{version:1,taskId:p,name:h||"",query:g||""})}),n(l.length>0))},[m,r,l,s]),{showStudentWidgets:m&&t}}const Kxe=I.memo(({shouldShow:e,title:t,actionLabel:n,icon:r,onDismiss:s,onClick:a})=>e?o.jsx(ge.div,{className:"-mt-md col-span-full inline-flex flex-wrap items-center justify-center",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:o.jsxs(H,{variant:"superLight",className:"gap-sm pl-xs pr-sm py-xs shadow-subtle flex cursor-pointer items-center rounded-full border",onClick:a,children:[o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(Te,{icon:Rt,onClick:i=>{i.stopPropagation(),s()},size:"small",pill:!0}),o.jsx(D,{variant:"small",color:"super",className:"whitespace-nowrap",children:t||""})]}),o.jsx(he,{variant:"primary",size:"tiny",pill:!0,text:n||"",icon:r,extraCSS:"border-none"})]})}):null);Kxe.displayName="NtpBanner";const ku=I.memo(({onClose:e,children:t})=>o.jsx(Bd,{portalTarget:document.body,children:o.jsxs("div",{className:"fixed inset-0 flex size-full flex-col items-center justify-center",children:[o.jsx(ge.div,{onClick:e,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:Po,className:"bg-backdrop/70 absolute inset-0"}),o.jsx(ge.div,{initial:{y:6,opacity:0},animate:{y:0,opacity:1},exit:{y:6,opacity:0},transition:Po,className:"w-full max-w-[360px]",children:o.jsx(sn,{className:"shadow-overlay border-none",children:t})})]})}));ku.displayName="WidgetModal";const Ayt=()=>{const{trackEvent:e}=Ne(),t=gt(),n="clicked spaces ad",r=f.useCallback(async a=>{a.preventDefault(),e(n,{source:"createSpaceSidebar"}),t.push("/spaces/templates")},[e,t]),s=f.useCallback(async()=>{e("space mentioned in query"),iXe()},[e]);return f.useMemo(()=>({handleCreateSpaceSidebarAdClick:r,handleSubmitQueryWithMention:s}),[r,s])},Iyt=e=>{const t=[];if(!e)return t;const n=r=>{if(r.type==="mention"){const a=r.props;a.variant==="connector"&&t.push(a.uuid)}"children"in r&&Array.isArray(r.children)&&r.children.forEach(n)};return n(e),t},Yxe=e=>{const t=[];if(!e)return{dslQuery:void 0,mentions:t};let n=0;const r=s=>{let a="";if(s.type==="text"&&"text"in s)a=s.text;else if(s.type==="linebreak")a=`
`;else{if((s.type==="link"||s.type==="autolink")&&"url"in s)return a=`[${"children"in s&&Array.isArray(s.children)&&s.children.map(r).reduce((l,c)=>(l+=c,l),"")||""}](${s.url})`,a;if(s.type==="mention"){const l=s.props;if(l.variant==="tab")return t.push({id:l.uuid,url:l.url??"",type:l.variant}),n++,a=`<attachment citation_id="${n}" />`,a;if(l.variant==="space")return t.push({id:l.uuid,url:"",type:l.variant}),a="",a;if(l.variant==="shortcut")return t.push({id:l.uuid,url:"",type:l.variant}),a=l.queryText??"",a;if(l.variant==="connector")return t.push({id:l.uuid,url:"",type:l.variant}),a="",a}}return"children"in s&&Array.isArray(s.children)?s.children.map(r).reduce((i,l)=>(i+=l,i),a):a};return{dslQuery:r(e)||void 0,mentions:t}},tB=3e3;function nB({onSubmit:e,immediate:t=!0}){const n=Lve(),r=zmt(),s=Dve(),a=Gmt(),{setUserInput:i,setHasStartedTyping:l,setStartTypingTime:c,markInputAsSubmitted:u}=a_(),d=f.useRef(!1);f.useEffect(()=>()=>{d.current&&(u(),d.current=!1)},[u,t]);const m=f.useCallback(h=>{ne.info("ask input submitted");const g=a?performance.now()-a:void 0,{dslQuery:y,mentions:v}=Yxe(h.json?.root);e?.({timeFromFirstType:g,...h,dslQuery:y,mentions:h.mentions??v}),t?u():d.current=!0},[t,u,e,a]),p=f.useCallback((h,g)=>{!s&&h&&l(!0),a||c(performance.now()),i(h,g)},[s,i,l,a,c]);return[n,r,f.useMemo(()=>({onChange:p,onSubmit:m,setUserInput:i}),[p,m,i])]}var $a;(function(e){e.EXPOSURE="sbs exposure",e.JUDGMENT="sbs judgment",e.BANNER="sbs banner"})($a||($a={}));const hE=-1,Ryt="sbs_analytics_",Pyt=e=>{const t=e?.experiment_override;return t?JSON.stringify(t):""},Oyt=(e,t)=>{const n=e.side_by_side_metadata;return{displayPosition:t,experimentRole:n?.experiment_role||`entry_${t}`,entryUUID:e.backend_uuid,experimentOverride:Pyt(n)}},Qxe=(e,t)=>`${Ryt}${e}_${t}`,qj=(e,t)=>{try{const n=Qxe(e,t);return Re.getItem(n)==="true"}catch(n){return ne.error("Error checking localStorage for SBS event:",n),!1}},Kj=(e,t)=>{try{const n=Qxe(e,t);Re.setItem(n,"true")}catch(n){ne.error("Error setting localStorage for SBS event:",n)}},Lyt=({results:e,session:t,trackEvent:n})=>{const r=f.useCallback(()=>{if(!e[0])return null;const c=e[0].side_by_side_metadata;if(!c?.sibling_uuid)return null;const u=c.experiment_override,d=u&&Object.keys(u)[0]||"";return{evaluationUUID:c.sibling_uuid,experimentVariationKey:d,evaluatorID:t?.user?.id||t?.user?.email||"anonymous"}},[e,t?.user?.id,t?.user?.email]),s=f.useCallback(c=>{try{const u=r();if(!u)return null;let d,m;if(c===hE)d=hE,m=void 0;else if(d=c,d>=0&&d<e.length)m=e[d]?.backend_uuid;else return ne.warn(`Invalid SBS selection index: ${c}, results length: ${e.length}`),null;return{eventType:$a.JUDGMENT,timestampMs:Date.now(),eventData:{evaluationUUID:u.evaluationUUID,evaluatorID:u.evaluatorID,preferredPosition:d,entryUUID:m}}}catch(u){return ne.error("Failed to build SBS judgment payload:",u),null}},[r,e]),a=f.useCallback(c=>{try{const u=r();if(!u||qj(u.evaluationUUID,$a.JUDGMENT))return;const d=s(c);d&&(n($a.JUDGMENT,d),Kj(u.evaluationUUID,$a.JUDGMENT))}catch(u){ne.error("Failed to track SBS judgment:",u)}},[r,s,n]),i=f.useCallback(()=>{try{const c=r();if(!c||qj(c.evaluationUUID,$a.BANNER))return;const u={eventType:$a.BANNER,timestampMs:Date.now(),eventData:{evaluationUUID:c.evaluationUUID,evaluatorID:c.evaluatorID,experimentVariationKey:c.experimentVariationKey,experimentRoles:e.map(d=>d.side_by_side_metadata?.experiment_role||`entry_${e.indexOf(d)}`)}};n($a.BANNER,u),Kj(c.evaluationUUID,$a.BANNER)}catch(c){ne.error("Failed to track SBS banner exposure:",c)}},[r,e,n]),l=f.useCallback(()=>{try{const c=r();if(!c||qj(c.evaluationUUID,$a.EXPOSURE))return;const u={eventType:$a.EXPOSURE,timestampMs:Date.now(),eventData:{evaluationUUID:c.evaluationUUID,evaluatorID:c.evaluatorID,experimentVariationKey:c.experimentVariationKey,entries:e.map(Oyt)}};n($a.EXPOSURE,u),Kj(c.evaluationUUID,$a.EXPOSURE)}catch(c){ne.error("Failed to track SBS exposure:",c)}},[r,e,n]);return f.useMemo(()=>({trackJudgment:a,trackBannerExposure:i,trackSBSExposure:l}),[a,i,l])},Xxe=({enabled:e,reason:t})=>{const{locale:n}=Z(),r=n?{"accept-language":n}:{},s=async()=>pet({headers:r,reason:t}),a=rt(),{data:i}=We({enabled:a?typeof e>"u"?!0:e:!1,queryKey:aP(),queryFn:s,networkMode:"always"});return i??fhe},Dyt="side-by-side-experiments";function Fyt(e,t={}){const{value:n,loading:r,error:s}=ont({flag:Dyt,defaultValue:{side_by_side_config:{}},subjectType:"context_uuid",extraAttributes:t},e);return f.useMemo(()=>({sideBySideOverrides:n,loading:r,error:s}),[n,r,s])}var Uyt={};const Zxe="sbs_trigger_count",nJ="[control]",Byt=[],Vyt={isEnabled:!1,sbsVariations:Byt,isLoading:!1,error:null,incrementTriggerCount:()=>{},triggerCount:0},$yt="sbsMaxTriggerCntPerThread";function Wyt(e,t,n,r,s,a,i,l){const{isPro:c,isMax:u,hasAccessToProFeatures:d}=e,{isEnterprise:m=!1}=t,p=c||u||m||d,h=c||u||d,g=s?.localeObj?.language||n?.language||null,y=r?.toLowerCase()||null,v=m?"ENTERPRISE":"INDIVIDUAL",x=typeof window<"u"&&window.navigator.userAgent.includes("Mobile");return{isPriority:p,isSubscribed:h,language:g,country:i,searchFocus:y,userCategory:v,isFollowUp:!!l,isMobile:x,appApiClient:"web",[$yt]:a}}const Jxe=e=>[...e].sort((t,n)=>t.backend_uuid.localeCompare(n.backend_uuid,void 0,{sensitivity:"base"})),Hyt=e=>{try{if(!e||!e.side_by_side_config)return!1;const t=e.side_by_side_config;if(!t||typeof t!="object")return!1;const n=!!(t.experiment_flag&&typeof t.experiment_flag=="string"&&t.experiment_flag.length>0),r=!!(t.variations&&Array.isArray(t.variations)&&t.variations.length>0);return n||r}catch{return!1}},zyt=e=>{if(!e||!e.side_by_side_config)return[];const t=e.side_by_side_config;if(!t.experiment_flag||!t.variations||!Array.isArray(t.variations))return[];if(t.variations.length===0)return[];const n=[],r=lo(),s=t.experiment_flag;let a=!1;return t.variations.forEach(i=>{if(!i||!i.identifier)return;const l=i.is_control===!0;l&&(a=!0);const c=l?`${nJ}${s}:${i.identifier}`:`${s}:${i.identifier}`,u={[s]:i.attributes_override??{}};n.push({sibling_uuid:r,experiment_role:c,experiment_override:u})}),!a&&ia(n)&&(n[0].experiment_role=`${nJ}${s}:${t.variations[0]?.identifier}`),n},rJ=e=>{try{const t=Bs.getItem(`${Zxe}_${e}`);return t?parseInt(t,10):0}catch{return 0}},Gyt=(e,t)=>{try{Bs.setItem(`${Zxe}_${e}`,t.toString())}catch{}};function qyt({frontendContextUUID:e,disableSideBySide:t=!1}){const n=Pa(),{sources:r}=Jn(),s=UYe(r||[]),a=_t(),i=_n({reason:"sbs-experiment-attributes"}),l=Xxe({reason:"sbs-experiment-attributes"}),c=dve(),u=qm(),d=fn()||!!Uyt.NEXT_PUBLIC_IS_SIDECAR_BUILD||JF();t=t||n===ie.STUDIO||n===ie.RESEARCH||d||s.length>0;const[m,p]=f.useState(()=>e?rJ(e):0),h=e?Wyt(a,i,l,n,c,m,u??null,e):{},{sideBySideOverrides:g,loading:y,error:v}=Fyt(e||"",h),x=v?String(v):null,b=Hyt(g);f.useEffect(()=>{if(e){const w=rJ(e);p(Math.max(0,w))}else p(0)},[e]),f.useEffect(()=>{b&&e&&m>0&&Gyt(e,m)},[e,m,b]);const _=f.useCallback(()=>{b&&p(w=>Math.max(0,w+1))},[b]);return f.useMemo(()=>{if(t||!b||x)return Vyt;const w=zyt(g);return{isEnabled:b,sbsVariations:w,isLoading:y,error:x,incrementTriggerCount:_,triggerCount:m}},[t,x,_,b,y,g,m])}const e1e=e=>{if(!e.length)return[];const t=new Map;return e.forEach(n=>{if(n.side_by_side_metadata?.sibling_uuid&&n.side_by_side_metadata?.selection_status===Ii.UNSELECTED)return;const r=n.side_by_side_metadata?.sibling_uuid??n.backend_uuid;t.has(r)||t.set(r,[]),t.get(r).push(n)}),[...t.values()].map(n=>{const r=Jxe(n);return r[0]?.side_by_side_metadata?.selection_status===Ii.TIE?[r[0]]:r})},Kyt=async(e,t,n,r)=>{const s=(a,i)=>{r(l=>l.filter(c=>t.some(u=>u.backend_uuid===c.backend_uuid)?c.backend_uuid===a.backend_uuid:!0).map(c=>c.backend_uuid===a.backend_uuid?{...c,side_by_side_metadata:c.side_by_side_metadata?{...c.side_by_side_metadata,selection_status:i}:void 0}:c))};try{const a=t.map((c,u)=>{let d;return e===hE?d=Ii.TIE:d=u===e?Ii.SELECTED:Ii.UNSELECTED,PHe({entryUUID:c.backend_uuid,params:d,siblingUUID:n,reason:"user-sbs-selection"}).catch(m=>{throw ne.error(`Failed to update selection for entry ${c.backend_uuid}:`,m),m})});await Promise.all(a);let i,l;if(e===hE?(i=Jxe(t)[0],l=Ii.TIE):(i=t[e],l=Ii.SELECTED),!i)throw new Error("No target result found");s(i,l)}catch(a){throw ne.error("Failed to update entry selection:",a),a}};function t1e({handleSubmitQuery:e,isHomepage:t,contextUuid:n,disableSideBySide:r=!1}){const{isEnabled:s,sbsVariations:a,incrementTriggerCount:i}=qyt({frontendContextUUID:n,disableSideBySide:r});return f.useCallback(c=>{s?(i(),a.forEach(u=>{const{experiment_override:d,sibling_uuid:m,experiment_role:p}=u,h={experiment_role:p,sibling_uuid:m,experiment_override:d,selection_status:Ii.SELECTION_STATUS_UNSPECIFIED},g={...c,...t?{newFrontendContextUUID:n}:{existingFrontendContextUUID:n},side_by_side_metadata:h};e(g)})):e(c)},[e,s,a,i,t,n])}const ss={[ie.SEARCH]:ot({askInputPlaceholder:{defaultMessage:"Ask anything",id:"AUouhaZgFv"},name:{defaultMessage:"Search",id:"xmcVZ0BU63"},description:{defaultMessage:"Fast answers to everyday questions",id:"5Y9Hg4e+zB"}}),[ie.RESEARCH]:ot({askInputPlaceholder:{defaultMessage:"Research anything",id:"PITzDLgm5P"},name:{defaultMessage:"Research",id:"JEe7dVso7F"},description:{defaultMessage:"Deep research on any topic",id:"uH6f+eH2OS"}}),[ie.STUDIO]:ot({askInputPlaceholder:{defaultMessage:"Create anything",id:"pmtrj6Tjm9"},name:{defaultMessage:"Labs",id:"ylFNoY79wa"},description:{defaultMessage:"Create projects from scratch",id:"nH9rAkplC/"}}),[ie.STUDY]:ot({askInputPlaceholder:{defaultMessage:"Study anything",id:"UOEDdZ+cnD"},name:{defaultMessage:"Study",id:"UTFsoN8Z1P"},description:{defaultMessage:"Step-by-step learning",id:"UGHOn5vTUx"}})},Yn={[le.DEFAULT]:ot({name:{defaultMessage:"Auto",id:"NXI/XLSYwc"},description:{defaultMessage:"Adapts to each query",id:"SsTMNu/s/A"}}),[le.PRO]:ot({name:{defaultMessage:"Best",id:"PzlMqGwwkm"},description:{defaultMessage:"Automatically selects the most responsive model based on the query",id:"DuOz+H05Us"}}),[le.PPLX_PRO_UPGRADED]:ot({name:{defaultMessage:"Pro",id:"R/eOkjWqNU"},description:{defaultMessage:"Automatically selects the most responsive model based on the query",id:"DuOz+H05Us"}}),[le.SONAR]:ot({name:{defaultMessage:"Sonar",id:"sT9VX563o6"},description:{defaultMessage:"Perplexity's fast model",id:"pdbURewz6Q"}}),[le.GPT_4o]:ot({name:{defaultMessage:"GPT-4o",id:"nebbHBgxX/"},description:{defaultMessage:"OpenAI's versatile model",id:"zdAw82CyOA"}}),[le.GPT_4_1]:ot({name:{defaultMessage:"GPT-4.1",id:"+LPr/f6Fal"},description:{defaultMessage:"OpenAI's advanced model",id:"+uCLZVt7uh"}}),[le.GPT_5]:ot({name:{defaultMessage:"GPT-5",id:"VfhmdGpVc7"},description:{defaultMessage:"OpenAI's latest model",id:"5VYr+wSh/Y"}}),[le.GPT_5_THINKING]:ot({name:{defaultMessage:"GPT-5 Thinking",id:"/IA3KV+qFr"},description:{defaultMessage:"OpenAI's latest model with thinking",id:"r+tIMgEnyZ"}}),[le.CLAUDE_2]:ot({name:{defaultMessage:"Claude Sonnet 4.0",id:"4UrgPEhdwq"},description:{defaultMessage:"Anthropic's advanced model",id:"b5CqfvLw4b"}}),[le.GEMINI_2_FLASH]:ot({name:{defaultMessage:"Gemini 2.5 Pro",id:"hec4NYL1Ib"},description:{defaultMessage:"Google's latest model",id:"XBL8FigIeX"}}),[le.GROK]:ot({name:{defaultMessage:"Grok 3 Beta",id:"Ybq0GDRm0J"},description:{defaultMessage:"xAI's Grok 3 model",id:"gwIHPQy1c/"}}),[le.PPLX_REASONING]:ot({name:{defaultMessage:"Reasoning",id:"Aw3qRf7hyO"},description:{defaultMessage:"Advanced problem solving",id:"4J0akc6m53"}}),[le.CLAUDE_3_7_SONNET_THINKING]:ot({name:{defaultMessage:"Claude Sonnet 4.0 Thinking",id:"a3LiLxX42G"},description:{defaultMessage:"Anthropic's reasoning model",id:"vRfGVNHXG3"}}),[le.CLAUDE_4_0_OPUS]:ot({name:{defaultMessage:"Claude Opus 4.0",id:"fwViXd5wrs"},description:{defaultMessage:"Anthropic's Opus reasoning model",id:"e0FjrIe1O/"}}),[le.CLAUDE_4_0_OPUS_THINKING]:ot({name:{defaultMessage:"Claude Opus 4.0 Thinking",id:"hwrQNTIYLG"},description:{defaultMessage:"Anthropic's Opus reasoning model with thinking",id:"ipx+1wZCy6"}}),[le.CLAUDE_4_1_OPUS]:ot({name:{defaultMessage:"Claude Opus 4.1",id:"aq+8T//8S9"},description:{defaultMessage:"Anthropic's Opus reasoning model",id:"e0FjrIe1O/"}}),[le.CLAUDE_4_1_OPUS_THINKING]:ot({name:{defaultMessage:"Claude Opus 4.1 Thinking",id:"Vd2LxNSW/4"},description:{defaultMessage:"Anthropic's Opus reasoning model with thinking",id:"ipx+1wZCy6"}}),[le.CLAUDE_4_5_SONNET]:ot({name:{defaultMessage:"Claude Sonnet 4.5",id:"TreRV15OSF"},description:{defaultMessage:"Anthropic's newest advanced model",id:"yVLNWskqHe"}}),[le.CLAUDE_4_5_SONNET_THINKING]:ot({name:{defaultMessage:"Claude Sonnet 4.5 Thinking",id:"POJuSUD1gU"},description:{defaultMessage:"Anthropic's newest reasoning model",id:"MIjO2w9Cui"}}),[le.GROK_4]:ot({name:{defaultMessage:"Grok 4",id:"+Y775fAOqr"},description:{defaultMessage:"xAI's reasoning model",id:"tYRPjba3cL"}}),[le.GROK_4_NON_THINKING]:ot({name:{defaultMessage:"Grok 4",id:"+Y775fAOqr"},description:{defaultMessage:"xAI's advanced model",id:"av1iNKEP7e"}}),[le.O3_PRO]:ot({name:{defaultMessage:"o3-pro",id:"lyV2e5kFYG"},description:{defaultMessage:"OpenAI's most powerful reasoning model",id:"1ntkiZj5rM"}}),[le.O4_MINI]:ot({name:{defaultMessage:"o4-mini",id:"BwwjXFHgz7"},description:{defaultMessage:"OpenAI's latest reasoning model",id:"VKonAfIZbf"}}),[le.PPLX_SONAR_INTERNAL_TESTING]:ot({name:{defaultMessage:"Sonar Testing - Alpha",id:"2oa4bWRfNL"},description:{defaultMessage:"Sonar model alpha variant",id:"EvwN/e7vAD"}}),[le.PPLX_SONAR_INTERNAL_TESTING_V2]:ot({name:{defaultMessage:"Sonar Testing - Beta",id:"VNsK+ZGei/"},description:{defaultMessage:"Sonar model beta variant",id:"Dzfl36DNyM"}}),[le.ALPHA]:ot({name:{defaultMessage:"Best",id:"PzlMqGwwkm"},description:{defaultMessage:"Fast and thorough for routine research",id:"v/MuahlVJE"}}),[le.O3_RESEARCH]:ot({name:{defaultMessage:"o3",id:"BBaBURoUEg"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[le.O3_PRO_RESEARCH]:ot({name:{defaultMessage:"o3-pro",id:"lyV2e5kFYG"},description:{defaultMessage:"OpenAI's most powerful reasoning model",id:"1ntkiZj5rM"}}),[le.CLAUDE40SONNET_RESEARCH]:ot({name:{defaultMessage:"Claude Sonnet 4.0",id:"4UrgPEhdwq"},description:{defaultMessage:"Anthropic's advanced model",id:"b5CqfvLw4b"}}),[le.CLAUDE40SONNETTHINKING_RESEARCH]:ot({name:{defaultMessage:"Claude Sonnet 4.0 Thinking",id:"a3LiLxX42G"},description:{defaultMessage:"Anthropic's reasoning model",id:"vRfGVNHXG3"}}),[le.CLAUDE40OPUS_RESEARCH]:ot({name:{defaultMessage:"Claude Opus 4.0",id:"fwViXd5wrs"},description:{defaultMessage:"Anthropic's most advanced model",id:"4l6C+Dcw8g"}}),[le.CLAUDE40OPUSTHINKING_RESEARCH]:ot({name:{defaultMessage:"Claude Opus 4.0 Thinking",id:"hwrQNTIYLG"},description:{defaultMessage:"Anthropic's advanced reasoning model",id:"RwUx0WhdZb"}}),[le.BETA]:ot({name:{defaultMessage:"Best",id:"PzlMqGwwkm"},description:{defaultMessage:"Multi-step tasks with advanced troubleshooting",id:"Sf0AeuilA5"}}),[le.O3_LABS]:ot({name:{defaultMessage:"o3",id:"BBaBURoUEg"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[le.O3_PRO_LABS]:ot({name:{defaultMessage:"o3-pro",id:"lyV2e5kFYG"},description:{defaultMessage:"OpenAI's most powerful reasoning model",id:"1ntkiZj5rM"}}),[le.CLAUDE40SONNETTHINKING_LABS]:ot({name:{defaultMessage:"Claude Sonnet 4.0 Thinking",id:"a3LiLxX42G"},description:{defaultMessage:"Anthropic's reasoning model",id:"vRfGVNHXG3"}}),[le.CLAUDE40OPUSTHINKING_LABS]:ot({name:{defaultMessage:"Claude Opus 4.0 Thinking",id:"hwrQNTIYLG"},description:{defaultMessage:"Anthropic's advanced reasoning model",id:"RwUx0WhdZb"}}),[le.STUDY]:ot({name:{defaultMessage:"Study",id:"UTFsoN8Z1P"},description:{defaultMessage:"Fast model for routine research",id:"prWIV9FsWt"}}),[Ks.O3_MINI]:ot({name:{defaultMessage:"o3-mini",id:"GdJwPgWWId"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[Ks.GROK2]:ot({name:{defaultMessage:"Grok-2",id:"9X3jPx+0vk"},description:{defaultMessage:"xAI's latest model",id:"e2CghRZC7d"}}),[Ks.GPT_4]:ot({name:{defaultMessage:"GPT-4",id:"6TGiMlP7f4"},description:{defaultMessage:"OpenAI's previous generation model",id:"U3OQoJ211e"}}),[Ks.CLAUDE_3_OPUS]:ot({name:{defaultMessage:"Claude 3 Opus",id:"gLSCHWGsu1"},description:{defaultMessage:"Anthropic's previous generation model",id:"hAevdn8yGl"}}),[Ks.CLAUDE_3_5_HAIKU]:ot({name:{defaultMessage:"Claude 3.5 Haiku",id:"zEJWYa05R2"},description:{defaultMessage:"Anthropic's smaller model",id:"pQia6E7J8i"}}),[Ks.GEMINI]:ot({name:{defaultMessage:"Gemini",id:"XoqZkcqFZ/"},description:{defaultMessage:"Previous version of Google's Gemini model",id:"9C0LtRWLFh"}}),[Ks.LLAMA_X_LARGE]:ot({name:{defaultMessage:"Llama X Large",id:"2zxgnSWUyX"},description:{defaultMessage:"Meta's large Llama model",id:"+95UnVOxgQ"}}),[Ks.MISTRAL]:ot({name:{defaultMessage:"Mistral",id:"dUBSpMbbs4"},description:{defaultMessage:"Mistral AI model",id:"rYRyt8I2Zr"}}),[Ks.COPILOT]:ot({name:{defaultMessage:"Copilot",id:"b3QbnXgawD"},description:{defaultMessage:"Legacy Pro Search",id:"pg83InaW1o"}}),[Ks.CLAUDE_OMBRE_EAP]:ot({name:{defaultMessage:"Claude Ombre",id:"F12IlTx8R1"},description:{defaultMessage:"Anthropic's research preview",id:"LKt7UBXwdw"}}),[Ks.CLAUDE_LACE_EAP]:ot({name:{defaultMessage:"Claude Lace",id:"8ydOdGYWef"},description:{defaultMessage:"Anthropic's opus research preview",id:"GHW8xWfe9i"}}),[Ks.R1]:ot({name:{defaultMessage:"R1 1776",id:"e8N3MYqmIQ"},description:{defaultMessage:"Perplexity's unbiased reasoning model",id:"R5Tg1hC1um"}}),[Ks.GAMMA]:ot({name:{defaultMessage:"Gamma",id:"Wb9IyuuCJO"},description:{defaultMessage:"Fast model for routine research",id:"prWIV9FsWt"}}),[Ks.O3]:ot({name:{defaultMessage:"o3",id:"BBaBURoUEg"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}})};function $3({collection:e,onSubmit:t,redirectToNewThread:n=!0,csrRedirect:r=!1}){const{$t:s}=Z(),{isCopilot:a}=Jn(),{submitQuery:i}=Hs(),{actions:{clearCurrentStreamId:l,clearCurrentThreadId:c}}=Vt(),u=gt(),d=Pa(),{handleSubmitQueryWithMention:m}=Ayt(),p=f.useMemo(()=>lo(),[]),h=f.useCallback(C=>{if(C.query.trim()==="")return;t?.(C),C.mentions&&C.mentions.some(E=>E.type==="space")&&m();const S=C.newFrontendContextUUID??lo();n&&(c(),l(),i({rawQuery:C.query,dslQuery:C.dslQuery,mentions:C.mentions,copilotOverride:a?!0:void 0,attachments:C.attachments,collection:e||null,newFrontendContextUUID:S,promptSource:C.promptSource||"user",querySource:C.querySource,timeFromFirstType:C.timeFromFirstType,shouldRedirectToBackendUUID:!r,...C.side_by_side_metadata&&{side_by_side_metadata:C.side_by_side_metadata},onThreadSlugReceived:E=>{if(!r)return;const M=window.location.pathname;M.startsWith(`${u.base}/search/`)&&aie(M.split("/").pop())&&u.replace(`/search/${E}`,"Home ask input")}}),r&&setTimeout(()=>{u.push(`/search/new/${S}`,void 0,"Home ask input")}))},[t,n,c,l,i,a,e,r,u,m]),g=t1e({handleSubmitQuery:h,isHomepage:!0,contextUuid:p}),y=f.useRef(!1),v=f.useCallback(C=>{y.current||(y.current=!0,setTimeout(()=>y.current=!1,tB),g(C))},[g]),[x,b,_]=nB({onSubmit:v,immediate:!r}),w=s(ss[d].askInputPlaceholder);return[x,b,f.useMemo(()=>({..._,placeholder:w}),[_,w])]}const rB=le.PRO,n1e=e=>({id:e.task_id,title:e.task_name,prompt:e.prompt,searchModel:FD(e.model_preference)??rB,sources:V2(e.sources),preconfigured:e.preconfigured});function Ltn(e=""){return{title:"",prompt:e,searchModel:rB,sources:["web"],preconfigured:!1}}const Yyt=(e,t)=>{const{value:n,loading:r}=It({flag:"shortcut-widget",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},sJ="shortcut-widgets-enabled-cache";function Qyt(){const{variation:e,loading:t}=Yyt(!1),{value:n,loading:r}=Rr({flag:"shortcut-tasks",defaultValue:!0}),s=t||r,a=e&&n,[i,l]=f.useState(()=>{const c=Re.getItem(sJ);return c?JSON.parse(c):!1});return f.useEffect(()=>{s||a!==i&&(l(a),Re.setItem(sJ,JSON.stringify(a)))},[a,s,i]),i}function aJ(e,t){Km("SHORTCUT",t,e)}const sB=f.memo(({context:e,widgetId:t,defaultName:n,defaultQuery:r,showSettings:s,setShowSettings:a})=>{const[i,l,{onSubmit:c}]=$3({csrRedirect:!0}),[u,d]=f.useState(()=>Uxe({context:e,widgetId:t,defaultQuery:r,defaultName:n})),{data:m}=We({queryKey:sF(u.taskId),queryFn:()=>B3({taskId:u.taskId,reason:"ShortcutWidget"}),enabled:u.taskId!==ZU});f.useEffect(()=>{m&&d(v=>{const x={...v,query:m.prompt,name:m.title};return aJ(x,t),x})},[m,t]);const p=f.useCallback(()=>{c({query:u.query,querySource:"homepage_widget",promptSource:"homepage_widget",mentions:[{type:"shortcut",id:u.taskId,url:""}]})},[c,u.query,u.taskId]),h=f.useCallback(()=>{a?.(!1)},[a]),g=f.useCallback(v=>{aJ(v,t),d(v),a?.(!1)},[a,t]),y=o.jsxs("div",{className:"flex size-full flex-col p-3",style:{zoom:e==="thumbnail"?.75:1},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(D,{color:"super",children:o.jsx(ce,{icon:Io,size:"lg"})}),o.jsxs(D,{variant:"tinyRegular",color:"light",className:"line-clamp-2 break-words",children:["/",u.name]})]}),o.jsx(D,{variant:"smallBold",color:"default",className:"mt-auto line-clamp-5 text-balance break-words",children:u.query})]});return e==="thumbnail"?y:o.jsxs(o.Fragment,{children:[o.jsx(sn,{shadow:!0,className:"aspect-[1/1] w-full cursor-pointer select-none overflow-hidden !rounded-2xl",onClick:p,children:o.jsx(yn,{hoverOnly:!0,className:"size-full",children:o.jsx(H,{variant:"raised",className:"hover:bg-subtler dark:hover:bg-subtle size-full transition duration-300",children:y})})}),s&&o.jsx(Xyt,{shortcut:u,onDone:g,onClose:h})]})});sB.displayName="ShortcutWidget";const Xyt=({shortcut:e,onDone:t,onClose:n})=>{const r="shortcut-widget-settings",{$t:s}=Z(),a=fa(),{openModal:i}=xt(),[l,c]=f.useState(e.taskId),[u,d]=f.useState(null),{data:m}=V3({reason:r}),p=f.useCallback(v=>m?.find(x=>x.task_id===v),[m]),h=f.useMemo(()=>{const v=[];m&&m.forEach(b=>{if(!b.prompt.length)return;const _={type:"default",text:`/${b.task_name}`,tooltipText:b.prompt,rightElement:b.preconfigured?null:o.jsx(Zyt,{shortcut:b,focused:u===b.task_id}),onMouseEnter:()=>{d(b.task_id)},onClick:()=>{c(b.task_id)}};v.push(_)});const x={type:"default",text:s({defaultMessage:"+ Create a new shortcut",id:"91niw1hBV9"}),onMouseEnter:()=>{d("create")},onClick:()=>{i("taskShortcutModal",{source:"shortcut_widget",onCreated:b=>{c(b.id)}})}};return[...v,x]},[m,s,i,u]),g=f.useMemo(()=>{const v=p(l);return v?`/${v.task_name}`:s({defaultMessage:"Choose or create a shortcut",id:"mtB/vUwddZ"})},[p,l,s]),y=f.useCallback(()=>{const v=p(l);v&&t({...e,query:v.prompt,name:v.task_name,taskId:l})},[t,e,p,l]);return o.jsx(Ke,{children:o.jsx(ku,{onClose:n,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsxs("div",{children:[o.jsx(D,{variant:"entry-title-300",children:s({defaultMessage:"Shortcuts",id:"7FAwwkYilD"})}),o.jsx(D,{variant:"small",color:"light",children:s({defaultMessage:"Add a shortcut to a query that you use often.",id:"ry+zfkzET+"})})]}),o.jsx(Jt,{items:h,isMobileStyle:a,children:o.jsx(he,{size:"small",chevron:!0,chevronIcon:Dn,text:g,textClassName:"font-normal",layout:"split",fullWidth:!0,variant:"border",testId:"interface-language-select"})}),o.jsx("div",{className:"flex flex-row justify-end",children:o.jsx(he,{variant:"primary",size:"small",onClick:y,text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})},Zyt=({shortcut:e,focused:t})=>{const{openModal:n}=xt(),r=f.useCallback(s=>{s.preventDefault(),s.stopPropagation(),n("taskShortcutModal",{source:"typeahead_edit",shortcut:n1e(e)})},[n,e]);return o.jsx("div",{className:B("transition-opacity",t&&"opacity-100",!t&&"opacity-0"),children:o.jsx(Te,{icon:vu,size:"tiny",variant:"common",noPadding:!0,onClick:r})})};function Jyt(e="widget",t,n){if(e==="widget"){const r=$y("ASSISTANT",t);if(r)return{version:1,query:r.query??n??""}}return{version:1,query:n??""}}function oJ(e,t="widget",n){t==="widget"&&Km("ASSISTANT",n,e)}const aB=I.memo(({context:e="widget",defaultQuery:t,widgetId:n,showSettings:r,setShowSettings:s})=>{const a=Jyt(e,n,t),{$t:i}=Z(),[l,c]=f.useState(a.query||""),[u,d,{onSubmit:m}]=$3({csrRedirect:!0}),p=f.useRef($s(C=>{oJ({query:C.query,version:1},e,n)},1e3));f.useEffect(()=>{const C=p.current.flush;return()=>{C()}},[p]);const h=C=>{const S=C.target.value;c(S),p.current({query:S})},g=o.jsxs("div",{className:B("flex size-full flex-col p-3",{"p-3":e==="thumbnail"}),style:{zoom:e==="thumbnail"?.75:1},children:[o.jsx(D,{color:"super",children:o.jsx(ce,{icon:Io,size:"lg"})}),o.jsx(D,{variant:"smallBold",color:"default",className:"mt-auto line-clamp-5 text-balance",children:l||""})]}),y=f.useCallback(()=>{m({query:l,querySource:"homepage_widget",promptSource:"homepage_widget"})},[m,l]),v=f.useCallback(()=>s?.(!1),[s]),x=f.useCallback(()=>{oJ({query:l||"",version:1},e,n),s?.(!1)},[s,l,e,n]),b=f.useCallback(()=>c(i({defaultMessage:"what is my schedule for today",id:"5xGy4y8knY"})),[i]),_=f.useCallback(()=>c(i({defaultMessage:"group my tabs by topic",id:"uDBqWc5SFP"})),[i]),w=f.useCallback(()=>c(i({defaultMessage:"search for trending news",id:"E4T4sT/ZCb"})),[i]);return e==="thumbnail"?g:o.jsxs(o.Fragment,{children:[o.jsx(sn,{shadow:!0,className:"aspect-[1/1] w-full cursor-pointer select-none overflow-hidden !rounded-2xl",onClick:y,children:o.jsx(yn,{hoverOnly:!0,className:"size-full",children:o.jsx(H,{variant:"raised",className:"hover:bg-subtler dark:hover:bg-subtle size-full transition duration-300",children:g})})}),o.jsx(Ke,{children:r&&o.jsx(ku,{onClose:v,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsxs("div",{children:[o.jsx(D,{variant:"entry-title-300",children:i({defaultMessage:"Assistant query",id:"FyiOOCgH1j"})}),o.jsx(D,{variant:"small",color:"light",children:i({defaultMessage:"Save assistant queries that you use often.",id:"p2agK1deUX"})})]}),o.jsx("div",{children:o.jsxs("div",{className:"text-foreground relative whitespace-pre-wrap break-words px-3 py-2 text-sm after:content-['\\\\200B']",children:[o.jsx("span",{className:"invisible",children:l||""}),o.jsx("textarea",{className:"bg-base text-foreground border-subtler placeholder:text-quiet focus:ring-subtler absolute -inset-px size-full resize-none overflow-hidden rounded-md border px-3 py-2 text-sm outline-none focus:outline-none focus:ring-1",value:l||"",onChange:h})]})}),o.jsx("div",{children:o.jsxs(D,{variant:"tinyRegular",color:"light",children:[i({defaultMessage:"For example",id:"qbXH6UvD6V"}),":"," ",o.jsx(D,{as:"a",role:"button",variant:"tinyRegular",color:"super",onClick:b,children:i({defaultMessage:"what is my schedule for today",id:"5xGy4y8knY"})}),","," ",o.jsx(D,{as:"a",role:"button",variant:"tinyRegular",color:"super",onClick:_,children:i({defaultMessage:"group my tabs by topic",id:"uDBqWc5SFP"})}),","," ",o.jsx(D,{as:"a",role:"button",variant:"tinyRegular",color:"super",onClick:w,children:i({defaultMessage:"search for trending news",id:"E4T4sT/ZCb"})}),"."]})}),o.jsx("div",{className:"flex flex-row justify-end",children:o.jsx(he,{variant:"primary",size:"small",onClick:x,text:i({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});aB.displayName="AssistantWidget";var hC={exports:{}},iJ;function e0t(){return iJ||(iJ=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){if(r===null||r===!0||r===!1)return NaN;var s=Number(r);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}e.exports=t.default}(hC,hC.exports)),hC.exports}var gC={exports:{}},lJ;function t0t(){return lJ||(lJ=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){var s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return s.setUTCFullYear(r.getFullYear()),r.getTime()-s.getTime()}e.exports=t.default}(gC,gC.exports)),gC.exports}function n0t(e,t){var n=o0t(t);return n.formatToParts?s0t(n,e):a0t(n,e)}var r0t={year:0,month:1,day:2,hour:3,minute:4,second:5};function s0t(e,t){try{for(var n=e.formatToParts(t),r=[],s=0;s<n.length;s++){var a=r0t[n[s].type];a>=0&&(r[a]=parseInt(n[s].value,10))}return r}catch(i){if(i instanceof RangeError)return[NaN];throw i}}function a0t(e,t){var n=e.format(t),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var Yj={};function o0t(e){if(!Yj[e]){var t=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=t==="06/25/2014, 00:00:00"||t==="06/25/2014 00:00:00";Yj[e]=n?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Yj[e]}function r1e(e,t,n,r,s,a,i){var l=new Date(0);return l.setUTCFullYear(e,t,n),l.setUTCHours(r,s,a,i),l}var cJ=36e5,i0t=6e4,Qj={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function s1e(e,t,n){var r,s;if(!e||(r=Qj.timezoneZ.exec(e),r))return 0;var a;if(r=Qj.timezoneHH.exec(e),r)return a=parseInt(r[1],10),uJ(a)?-(a*cJ):NaN;if(r=Qj.timezoneHHMM.exec(e),r){a=parseInt(r[2],10);var i=parseInt(r[3],10);return uJ(a,i)?(s=Math.abs(a)*cJ+i*i0t,r[1]==="+"?-s:s):NaN}if(u0t(e)){t=new Date(t||Date.now());var l=n?t:l0t(t),c=WP(l,e),u=n?c:c0t(t,c,e);return-u}return NaN}function l0t(e){return r1e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function WP(e,t){var n=n0t(e,t),r=r1e(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),s=e.getTime(),a=s%1e3;return s-=a>=0?a:1e3+a,r-s}function c0t(e,t,n){var r=e.getTime(),s=r-t,a=WP(new Date(s),n);if(t===a)return t;s-=a-t;var i=WP(new Date(s),n);return a===i?a:Math.max(a,i)}function uJ(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var dJ={};function u0t(e){if(dJ[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),dJ[e]=!0,!0}catch{return!1}}var d0t=e0t();const f0t=Bo(d0t);var m0t=t0t();const fJ=Bo(m0t);var p0t=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Xj=36e5,mJ=6e4,h0t=2,wa={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:p0t};function g0t(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var n={},r=n.additionalDigits==null?h0t:f0t(n.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=y0t(e),a=v0t(s.date,r),i=a.year,l=a.restDateString,c=x0t(l,i);if(isNaN(c))return new Date(NaN);if(c){var u=c.getTime(),d=0,m;if(s.time&&(d=b0t(s.time),isNaN(d)))return new Date(NaN);if(s.timeZone||n.timeZone){if(m=s1e(s.timeZone||n.timeZone,new Date(u+d)),isNaN(m))return new Date(NaN)}else m=fJ(new Date(u+d)),m=fJ(new Date(u+d+m));return new Date(u+d+m)}else return new Date(NaN)}function y0t(e){var t={},n=wa.dateTimePattern.exec(e),r;if(n?(t.date=n[1],r=n[3]):(n=wa.datePattern.exec(e),n?(t.date=n[1],r=n[2]):(t.date=null,r=e)),r){var s=wa.timeZone.exec(r);s?(t.time=r.replace(s[1],""),t.timeZone=s[1].trim()):t.time=r}return t}function v0t(e,t){var n=wa.YYY[t],r=wa.YYYYY[t],s;if(s=wa.YYYY.exec(e)||r.exec(e),s){var a=s[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(s=wa.YY.exec(e)||n.exec(e),s){var i=s[1];return{year:parseInt(i,10)*100,restDateString:e.slice(i.length)}}return{year:null}}function x0t(e,t){if(t===null)return null;var n,r,s,a;if(e.length===0)return r=new Date(0),r.setUTCFullYear(t),r;if(n=wa.MM.exec(e),n)return r=new Date(0),s=parseInt(n[1],10)-1,hJ(t,s)?(r.setUTCFullYear(t,s),r):new Date(NaN);if(n=wa.DDD.exec(e),n){r=new Date(0);var i=parseInt(n[1],10);return C0t(t,i)?(r.setUTCFullYear(t,0,i),r):new Date(NaN)}if(n=wa.MMDD.exec(e),n){r=new Date(0),s=parseInt(n[1],10)-1;var l=parseInt(n[2],10);return hJ(t,s,l)?(r.setUTCFullYear(t,s,l),r):new Date(NaN)}if(n=wa.Www.exec(e),n)return a=parseInt(n[1],10)-1,gJ(t,a)?pJ(t,a):new Date(NaN);if(n=wa.WwwD.exec(e),n){a=parseInt(n[1],10)-1;var c=parseInt(n[2],10)-1;return gJ(t,a,c)?pJ(t,a,c):new Date(NaN)}return null}function b0t(e){var t,n,r;if(t=wa.HH.exec(e),t)return n=parseFloat(t[1].replace(",",".")),Zj(n)?n%24*Xj:NaN;if(t=wa.HHMM.exec(e),t)return n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),Zj(n,r)?n%24*Xj+r*mJ:NaN;if(t=wa.HHMMSS.exec(e),t){n=parseInt(t[1],10),r=parseInt(t[2],10);var s=parseFloat(t[3].replace(",","."));return Zj(n,r,s)?n%24*Xj+r*mJ+s*1e3:NaN}return null}function pJ(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var s=r.getUTCDay()||7,a=t*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}var _0t=[31,28,31,30,31,30,31,31,30,31,30,31],w0t=[31,29,31,30,31,30,31,31,30,31,30,31];function a1e(e){return e%400===0||e%4===0&&e%100!==0}function hJ(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;var r=a1e(e);if(r&&n>w0t[t]||!r&&n>_0t[t])return!1}return!0}function C0t(e,t){if(t<1)return!1;var n=a1e(e);return!(n&&t>366||!n&&t>365)}function gJ(e,t,n){return!(t<0||t>52||n!=null&&(n<0||n>6))}function Zj(e,t,n){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}function HP(e,t,n){var r=g0t(e,n),s=s1e(t,r,!0),a=new Date(r.getTime()-s),i=new Date(0);return i.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),i.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),i}const S0t=e=>({"x-loc-latitude":e.latitude.toString(),"x-loc-longitude":e.longitude.toString()}),E0t=async e=>{let t;e&&(t=S0t(e));const{data:n,error:r}=await se.GET("/rest/homepage-widgets/clock/current-location","clock-widget-current-location",{headers:t});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to fetch clock current location",cause:r});return n},o1e="clock-current-location-cache",zP={geonameid:5391959,name:"San Francisco",latitude:37.77493,longitude:-122.41942,countrycode:"US",population:864816,timezone:"America/Los_Angeles",timezone_offset:-25200};function M0t(){try{const e=Re.getItem(o1e);if(e)return JSON.parse(e)}catch{}return null}function k0t(e){try{Re.setItem(o1e,JSON.stringify(e))}catch{}}function T0t(e="widget",t){if(e==="widget"){const n=$y("ANALOG_CLOCK",t);if(n)return n.version===1?{version:2,city:n.city,useCurrentLocation:!n.city}:n}return{version:2,city:zP,useCurrentLocation:!0}}function yJ(e,t="widget",n){t==="widget"&&Km("ANALOG_CLOCK",n,e)}const N0t=()=>{const{location:e}=Ny(),t=M0t();return We({queryKey:["clock-current-location",e?.latitude,e?.longitude],queryFn:async()=>{const n=await E0t(e);return n&&k0t(n),n},staleTime:5*60*1e3,gcTime:10*60*1e3,retry:1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,placeholderData:t})};function j0t(e,t="widget"){const n=T0t(t,e),[r,s]=f.useState(n),{data:a,isLoading:i}=N0t(),l=f.useMemo(()=>r.useCurrentLocation&&a?{name:a.name||"Your Location",timezone:a.timezone,country:a.country}:r.city||zP,[r.useCurrentLocation,a,r.city]),c=f.useCallback(d=>{const m={...r,...d};s(m),yJ(m,t,e)},[r,t,e]),u=f.useCallback((d,m)=>{const p={...r,city:d,useCurrentLocation:d?!1:m??!0};s(p),yJ(p,t,e)},[r,t,e]);return f.useMemo(()=>({selectedCity:l,settings:r,currentLocationData:a??null,isLoading:i,updateSettings:c,saveCity:u}),[l,r,a,i,c,u])}const A0t=async({query:e="",limit:t=10,reason:n})=>{try{const{error:r,data:s}=await se.GET("/rest/homepage-widgets/cities-autosuggests",n,{params:{query:{query:e,limit:t}},timeoutMs:2e3});if(r)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get cities autosuggestions",cause:r});return s.data??[]}catch(r){return ne.error(r),[]}},I0t=({query:e="",limit:t=5,reason:n})=>We({queryKey:["cities",e,t],queryFn:()=>A0t({query:e,limit:t,reason:n}),enabled:e?.trim().length>0,staleTime:5*60*1e3,gcTime:30*60*1e3}),R0t=100,P0t=()=>o.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:o.jsx(Te,{icon:ar,size:"small",pill:!0})}),O0t=()=>o.jsx("div",{className:"w-sm"}),L0t=({onClear:e})=>o.jsx(Te,{icon:Rt,size:"tiny",pill:!0,onClick:e}),oB=I.memo(({widgetId:e,showCity:t=!1,showSettings:n,setShowSettings:r,context:s="widget"})=>{const{$t:a}=Z(),{colorScheme:i}=Wr(),l=i==="dark",c=f.useRef(!0),{isMobileUserAgent:u}=xe(),d="clock-widget-settings",{selectedCity:m,settings:p,updateSettings:h,saveCity:g}=j0t(e,s),y=f.useRef(null),[v,x]=f.useState(m.name??""),[b,_]=f.useState(-1),[w,C]=f.useState(!1);f.useEffect(()=>{x(m.name??"")},[m.name]);const{data:S=[]}=I0t({query:v,limit:R0t,reason:d}),E=f.useMemo(()=>S.map(te=>({query:te.name,title:te.name,description:`${te.countrycode}  ${te.timezone}`,identifier:te.geonameid.toString()})),[S]),[M,k]=f.useState(new Date);f.useEffect(()=>{const te=setInterval(()=>{k(new Date)},1e3);return()=>clearInterval(te)},[]);const A=te=>te*6,R=te=>te*6,O=te=>te*30,L=HP(M,m.timezone),P=A(L.getSeconds()),N=R(L.getMinutes()),T=O(L.getHours()+L.getMinutes()/60),j=f.useCallback(()=>{C(!0)},[]),F=f.useCallback(()=>{C(!1)},[]),U=f.useCallback(te=>{x(te)},[]),V=()=>{x("")},$=f.useCallback(te=>S.find(re=>re.geonameid.toString()===te),[S]),z=f.useCallback(te=>{if(!te.identifier)return;const re=$(te.identifier);re&&(h({city:re,useCurrentLocation:!1}),x(re.name),g(re,!1))},[$,h,g]),Q=f.useCallback((te,re)=>{z(te)},[z]);f.useEffect(()=>{if(c.current){c.current=!1;return}},[m,s,e]);const Y=o.jsxs("div",{className:B("relative size-full p-2",{"pb-7 pt-2":t}),children:[o.jsxs("div",{className:"relative mx-auto aspect-square max-h-full max-w-full",children:[s==="widget"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute right-[calc(25%+4px)] top-1/2 -translate-y-1/2 translate-x-1/2",children:o.jsx(D,{variant:"tinyMono",className:"scale-[70%]",children:o.jsx(WOe,{value:M,hour:"numeric",minute:"2-digit",timeZone:m.timezone})})}),o.jsx("div",{className:"absolute left-[calc(25%+4px)] top-1/2 -translate-x-1/2 -translate-y-1/2",children:o.jsx(D,{variant:"tinyMono",className:"scale-[70%] uppercase",children:o.jsx(ZI,{value:M,weekday:"short",timeZone:m.timezone})})})]}),o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:[o.jsx("path",{fill:l?"#fff":"#000",d:"M71 130a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0v-11a.5.5 0 0 1 .5-.5M40.817 122.278a.5.5 0 1 1 .867.5l-5.5 9.527a.5.5 0 0 1-.867-.5zM100.501 122.094a.5.5 0 0 1 .683.183l5.5 9.527a.5.5 0 0 1-.867.5l-5.5-9.527a.5.5 0 0 1 .184-.683M19.222 100.316a.5.5 0 0 1 .5.867l-9.527 5.5a.5.5 0 0 1-.5-.867zM122.096 100.499a.5.5 0 0 1 .683-.183l9.527 5.5a.501.501 0 0 1-.5.867l-9.527-5.5a.5.5 0 0 1-.183-.684M11.5 70.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1zM141.5 70.5a.5.5 0 0 1 0 1h-11a.5.5 0 0 1 0-1zM9.513 35.499a.5.5 0 0 1 .682-.183l9.527 5.5a.5.5 0 1 1-.5.867l-9.527-5.5a.5.5 0 0 1-.182-.684M131.806 35.316a.5.5 0 1 1 .5.867l-9.527 5.5a.5.5 0 0 1-.5-.867zM105.817 9.694a.5.5 0 0 1 .867.5l-5.5 9.527a.501.501 0 0 1-.867-.5zM35.501 9.51a.5.5 0 0 1 .683.183l5.5 9.527a.5.5 0 0 1-.867.5l-5.5-9.527a.5.5 0 0 1 .184-.682M71 0a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0V.5A.5.5 0 0 1 71 0"}),o.jsx("path",{fill:l?"#444":"#CCC",d:"M63.997 137.633a.5.5 0 0 1 .445.549l-.314 2.984a.5.5 0 1 1-.994-.105l.313-2.983a.5.5 0 0 1 .55-.445M78.004 137.632a.5.5 0 0 1 .55.444l.313 2.984a.5.5 0 1 1-.994.105l-.314-2.984a.5.5 0 0 1 .445-.549M84.932 136.538a.5.5 0 0 1 .593.385l.623 2.934a.5.5 0 1 1-.977.208l-.624-2.934a.5.5 0 0 1 .385-.593M57.07 136.532a.5.5 0 0 1 .385.593l-.624 2.934a.5.5 0 1 1-.979-.208l.624-2.933a.5.5 0 0 1 .593-.386M91.706 134.722a.5.5 0 0 1 .63.321l.927 2.853a.5.5 0 0 1-.95.309l-.928-2.853a.5.5 0 0 1 .32-.63M49.666 135.04a.5.5 0 0 1 .951.309l-.928 2.853a.499.499 0 1 1-.95-.309zM98.25 132.208a.5.5 0 0 1 .661.254l1.221 2.74a.5.5 0 0 1-.914.407l-1.22-2.741a.5.5 0 0 1 .253-.66M43.089 132.46a.5.5 0 0 1 .913.407l-1.22 2.74a.5.5 0 0 1-.914-.406zM30.92 125.315a.5.5 0 0 1 .81.588l-1.763 2.427a.5.5 0 0 1-.81-.588zM110.383 125.203a.5.5 0 0 1 .698.11l1.764 2.428a.5.5 0 0 1-.81.587l-1.763-2.427a.5.5 0 0 1 .111-.698M115.835 120.79a.5.5 0 0 1 .706.037l2.007 2.229a.5.5 0 1 1-.743.669l-2.007-2.228a.5.5 0 0 1 .037-.707M25.464 120.825a.5.5 0 1 1 .743.669l-2.008 2.229a.5.5 0 0 1-.743-.668zM120.794 115.833a.5.5 0 0 1 .706-.037l2.229 2.007a.499.499 0 1 1-.669.743l-2.229-2.007a.5.5 0 0 1-.037-.706M20.504 115.793a.5.5 0 1 1 .669.743l-2.23 2.007a.5.5 0 0 1-.669-.743zM125.204 110.382a.5.5 0 0 1 .698-.111l2.428 1.764a.5.5 0 0 1-.588.809l-2.428-1.763a.5.5 0 0 1-.11-.699M16.098 110.27a.5.5 0 0 1 .587.809l-2.427 1.764a.5.5 0 1 1-.587-.809zM9.133 97.998a.5.5 0 0 1 .407.913l-2.741 1.221a.5.5 0 0 1-.407-.914zM132.209 98.25a.5.5 0 0 1 .66-.253l2.74 1.22a.5.5 0 0 1-.406.914l-2.741-1.22a.5.5 0 0 1-.253-.66M134.723 91.703a.5.5 0 0 1 .63-.321l2.854.927a.5.5 0 0 1-.31.95l-2.852-.926a.5.5 0 0 1-.322-.63M6.652 91.382a.5.5 0 0 1 .31.95l-2.854.928a.5.5 0 1 1-.308-.952zM137.133 84.545l2.934.623a.501.501 0 0 1-.208.978l-2.934-.624a.5.5 0 1 1 .208-.977M4.873 84.543a.5.5 0 1 1 .208.977l-2.935.624a.5.5 0 0 1-.208-.978zM141.167 77.872a.5.5 0 0 1-.105.995l-2.984-.313a.5.5 0 0 1 .104-.996zM3.818 77.558a.5.5 0 0 1 .105.995l-2.984.313a.5.5 0 0 1-.104-.994zM3.923 63.447a.5.5 0 0 1-.105.995l-2.983-.314a.5.5 0 1 1 .104-.994zM141.062 63.133a.5.5 0 0 1 .105.995l-2.985.313a.5.5 0 0 1-.104-.995zM2.148 55.852l2.935.624a.5.5 0 1 1-.208.979L1.94 56.83a.5.5 0 0 1 .208-.979M139.857 55.85a.5.5 0 0 1 .208.979l-2.934.624a.5.5 0 0 1-.208-.979zM3.477 49.058a.5.5 0 0 1 .631-.32l2.853.927a.5.5 0 1 1-.309.951L3.8 49.688a.5.5 0 0 1-.322-.63M137.898 48.737a.5.5 0 1 1 .309.951l-2.853.927a.5.5 0 0 1-.309-.951zM6.14 42.12a.5.5 0 0 1 .66-.253l2.74 1.22a.5.5 0 1 1-.406.914l-2.742-1.22a.5.5 0 0 1-.253-.66M135.202 41.868a.5.5 0 0 1 .407.914l-2.741 1.22a.5.5 0 1 1-.406-.913zM13.56 29.267a.5.5 0 0 1 .699-.11l2.426 1.764a.5.5 0 0 1-.587.808l-2.427-1.763a.5.5 0 0 1-.112-.699M127.742 29.156a.5.5 0 0 1 .588.809l-2.428 1.763a.5.5 0 0 1-.588-.81zM18.24 23.492a.5.5 0 0 1 .706-.037l2.23 2.008a.5.5 0 0 1-.67.743l-2.229-2.008a.5.5 0 0 1-.037-.706M123.057 23.452a.5.5 0 0 1 .67.743l-2.229 2.008a.5.5 0 0 1-.67-.743zM23.494 18.236a.5.5 0 0 1 .707.037l2.007 2.23a.5.5 0 1 1-.743.669l-2.007-2.23a.5.5 0 0 1 .036-.706M117.804 18.27a.5.5 0 0 1 .743.67l-2.007 2.229a.5.5 0 1 1-.743-.67zM112.035 13.67a.5.5 0 0 1 .809.589l-1.763 2.426a.5.5 0 0 1-.81-.587zM29.268 13.558a.5.5 0 0 1 .699.11l1.763 2.428a.5.5 0 0 1-.81.588l-1.762-2.427a.5.5 0 0 1 .11-.699M42.12 6.139a.5.5 0 0 1 .661.253l1.22 2.74a.5.5 0 0 1-.913.408l-1.22-2.741a.5.5 0 0 1 .253-.66M99.219 6.391a.5.5 0 1 1 .913.407l-1.22 2.74a.5.5 0 0 1-.914-.406zM49.061 3.476a.5.5 0 0 1 .631.32l.927 2.854a.5.5 0 0 1-.951.31l-.927-2.854a.5.5 0 0 1 .32-.63M92.31 3.795a.5.5 0 1 1 .951.308l-.927 2.854a.5.5 0 1 1-.951-.31zM56.24 1.554a.5.5 0 0 1 .593.384l.624 2.935a.5.5 0 0 1-.979.208l-.623-2.935a.5.5 0 0 1 .385-.592M85.762 1.548a.5.5 0 0 1 .384.593l-.624 2.934a.5.5 0 1 1-.977-.208l.623-2.934a.5.5 0 0 1 .593-.385M78.422.389a.5.5 0 0 1 .445.55l-.314 2.983a.5.5 0 0 1-.995-.105l.314-2.983a.5.5 0 0 1 .55-.445M63.579.388a.5.5 0 0 1 .55.445l.313 2.983a.5.5 0 0 1-.994.105L63.135.937a.5.5 0 0 1 .444-.55"})]}),o.jsx(ge.div,{initial:{rotate:N},animate:{rotate:[N,N+360]},transition:{duration:3600,repeat:1/0,repeatType:"loop",ease:"linear"},className:"absolute inset-0",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:o.jsx("path",{fill:l?"#fff":"#000",fillRule:"evenodd",d:"M71 2a2 2 0 0 1 2 2v60c0 .74-.403 1.383-1 1.73v2.444A2.998 2.998 0 0 1 71 74a3 3 0 0 1-1-5.826v-2.445c-.597-.346-1-.99-1-1.729V4a2 2 0 0 1 2-2m0 68a1 1 0 1 0 0 2 1 1 0 0 0 0-2",clipRule:"evenodd"})})}),o.jsx(ge.div,{initial:{rotate:T},animate:{rotate:[T,T+360]},transition:{duration:43200,repeat:1/0,repeatType:"loop",ease:"linear"},className:"absolute inset-0",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:o.jsx("path",{fill:l?"#fff":"#000",fillRule:"evenodd",d:"M71 24a2 2 0 0 1 2 2v38c0 .74-.403 1.383-1 1.73v2.444A2.998 2.998 0 0 1 71 74a3 3 0 0 1-1-5.826v-2.445c-.597-.346-1-.99-1-1.729V26a2 2 0 0 1 2-2m0 46a1 1 0 1 0 0 2 1 1 0 0 0 0-2",clipRule:"evenodd"})})}),o.jsx(ge.div,{initial:{rotate:P},animate:{rotate:[P,P+360]},transition:{duration:60,repeat:1/0,repeatType:"loop",ease:"linear"},className:"absolute inset-0",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:[o.jsx("path",{fill:"#FF7323",d:"M71 2a.75.75 0 0 1 .75.75v66.397a2 2 0 0 1 0 3.706v3.397a.75.75 0 0 1-1.5 0v-3.397a1.999 1.999 0 0 1 0-3.706V2.75A.75.75 0 0 1 71 2"}),o.jsx("circle",{cx:71,cy:71,r:1,fill:"#fff"})]})})]}),t&&o.jsx(D,{variant:"tiny",color:"default",className:"pointer-events-none flex h-7 select-none items-center justify-center",children:o.jsx("div",{className:"truncate px-2",children:m.name})})]}),W=B("h-10 rounded-md p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":w&&E.length>0,"opacity-50":!!p.useCurrentLocation}),X=f.useMemo(()=>({LeftIconComponent:O0t,RightIconComponent:P0t}),[]),G=f.useCallback(()=>r?.(!1),[r]),J=f.useCallback(te=>{h({useCurrentLocation:te})},[h]),q=f.useCallback(()=>{r?.(!1)},[r]);return s==="thumbnail"?Y:o.jsxs(o.Fragment,{children:[o.jsx(sn,{shadow:!0,className:"active:!bg-subtler dark:active:!bg-subtle aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:o.jsx(Ge,{draggable:!1,href:`/search/new?q=${a({defaultMessage:"what time is it in {location}",id:"NbMaPyS+lK"},{location:m.name})}`,className:"relative block size-full",children:Y})}),o.jsx(Ke,{children:n&&o.jsx(ku,{onClose:G,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsx(D,{variant:"entry-title-300",children:a({defaultMessage:"Select city",id:"twZBdKGll7"})}),o.jsx(Iy,{isOpen:w&&E.length>0,suggestedQueries:E,focusedIndex:b,setFocusedIndex:_,handlePasteQuery:kn,handleSubmit:Q,value:v??"",components:X,dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full max-h-[250px] overflow-y-auto",dropdownType:"select",popoverClassName:"dark:!border-none",children:o.jsx(Pr,{disable1pass:!0,disabled:p.useCurrentLocation,onFocus:j,onBlur:F,className:W,pill:!1,ref:y,isMobileUserAgent:u,placeholder:a({defaultMessage:"New York, London, Tokyo...",id:"iJ+co77mIp"}),value:v,onChange:U,ClearIcon:L0t,...v.length>0?{onClear:V}:{}})}),o.jsxs("label",{htmlFor:"use-current-location",className:"gap-sm flex w-fit flex-row items-center",children:[o.jsx(e_,{id:"use-current-location",checked:!!p.useCurrentLocation,toggleChecked:J}),o.jsx(D,{variant:"small",color:"light",children:a({defaultMessage:"Use current location",id:"Z2NE7X6xxg"})})]}),o.jsx("div",{className:"mt-sm flex flex-row justify-end",children:o.jsx(he,{variant:"primary",size:"small",onClick:q,text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});oB.displayName="ClockWidget";const i1e=20,D0t=async({options:e,reason:t})=>{const n=e?.offset??0,r=e?.limit??i1e,s=e?.topic??null,a=e?.nextToken??null,{data:i,error:l}=await se.GET("/rest/discover/feed",t,{params:{query:{limit:r,offset:n,next_token:a,topic:s&&s!=="you"?[s]:void 0}},timeoutMs:Pe(),numRetries:1,reason:t});if(l)throw new Ce("API_CLIENTS_ERROR",{cause:l});const c=i;if(c.status!=="success")throw new Ce("API_CLIENTS_ERROR",{cause:c});const u=c?.items??[],d=c?.feed_uuid??null,m=c?.next_token??null;return d&&u.length>0&&u.forEach(p=>{p.feed_uuid=d}),{threads:u,nextToken:m}};async function F0t(){try{const e="getDiscoverTopics",{error:t,data:n}=await se.GET("/rest/discover/topics",e,{timeoutMs:1500,numRetries:1});if(t)throw new Ce("API_CLIENTS_ERROR",{cause:t});return{userSelectedTopics:n?.user_selected_topics??ue,allTopics:n?.all_topics??ue}}catch(e){return ne.error("Failed to get discover topics.",e),{userSelectedTopics:ue,allTopics:ue}}}function U0t(){return We({queryKey:upe(),queryFn:()=>F0t(),placeholderData:Ud,refetchOnReconnect:!0,refetchOnMount:!1})}const B0t=async({topics:e,reason:t})=>{const{data:n,error:r}=await se.PUT("/rest/discover/topics",t,{body:{topics:e,return_feed:!0,return_feed_limit:i1e,return_feed_version:ac},timeoutMs:1500,numRetries:1});if(r)throw new Ce("API_CLIENTS_ERROR",{cause:r});const s=n,a=s.feed_items??[],i=s.feed_uuid,l=s.next_token??null;return i&&a?.length>0&&a.forEach(c=>{c.feed_uuid=i}),{status:"success",feedItems:a,nextToken:l}},Dtn=async({contextUUID:e,reason:t})=>{const n=await se.PUT("/rest/discover/feed-items/{context_uuid}/feedback/like",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},Ftn=async({contextUUID:e,reason:t})=>{const n=await se.DELETE("/rest/discover/feed-items/{context_uuid}/feedback/like",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},Utn=async({contextUUID:e,reason:t})=>{const n=await se.PUT("/rest/discover/feed-items/{context_uuid}/feedback/dislike",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},Btn=async({contextUUID:e,reason:t})=>{const n=await se.DELETE("/rest/discover/feed-items/{context_uuid}/feedback/dislike",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},V0t=20,$0t=({pageParam:e,topic:t,reason:n})=>{const r=e.pageNum*V0t;return D0t({options:{offset:r,topic:t,nextToken:e.nextToken},reason:n})},W0t=({initialPage:e,topic:t,reason:n,refetchInterval:r})=>{const s=xu({queryKey:Tc(t),queryFn:({pageParam:m})=>$0t({pageParam:m,topic:t,reason:n}),refetchOnReconnect:"always",refetchOnMount:!1,initialPageParam:{pageNum:e},refetchInterval:r,getNextPageParam:(m,p,h)=>{if(!(m&&!m.threads?.[0]?.has_next_page))return{pageNum:h.pageNum+1,nextToken:m.nextToken}}}),a=s.data?.pages??[],i=(()=>{const m=new Set;return a.flatMap(p=>p.threads).filter(p=>m.has(p.uuid)?!1:(m.add(p.uuid),!0))})(),l=a[a.length-1]?.threads?.[0]?.has_next_page??!1,c=s.data?.pageParams?.length??1,u=l?c+1:null,d=f.useMemo(()=>({currentPage:c,hasNextPage:l,hasPreviousPage:c>1,getNextPage:()=>s.fetchNextPage(),getPreviousPage:()=>s.fetchPreviousPage()}),[l,c,s]);return f.useMemo(()=>({...s,nextPage:u,paginationInfo:d,threads:i}),[u,d,s,i])},H0t=0,l1e=({topic:e,reason:t,refetchInterval:n})=>{const{threads:r,paginationInfo:s,isLoading:a,isFetching:i,fetchStatus:l,nextPage:c}=W0t({initialPage:H0t,topic:e,reason:t,refetchInterval:n}),u=a||l==="fetching",d=!r?.length&&!a&&l==="idle",m=f.useCallback(()=>{!s.hasNextPage||i||s.getNextPage()},[i,s]);return f.useMemo(()=>({threads:r,paginationInfo:s,isLoading:a,fetchStatus:l,nextPage:c,showLoadingState:u,showEmptyState:d,fetchNextPage:m}),[r,s,a,l,c,u,d,m])},C1=I.memo(({variant:e,className:t,colorVariant:n,text:r,lines:s=1})=>{const i=f.useMemo(()=>({height:"50%"}),[.5]);return o.jsxs("div",{className:`relative grid items-center ${t}`,children:[o.jsx("div",{className:"col-start-1 row-start-1 flex size-full flex-col",children:Array.from({length:s}).map((l,c)=>o.jsx("div",{className:"flex h-full items-center",children:o.jsx(H,{className:B("rounded-full",{"w-full":c!==s-1||s===1,"w-1/2":c===s-1&&s>1}),variant:n??"subtle",style:i})},c))}),o.jsx(D,{variant:e,color:"light",className:"pointer-events-none col-start-1 row-start-1 opacity-0",children:Array.from({length:s}).map((l,c)=>o.jsxs(I.Fragment,{children:[r??o.jsx(o.Fragment,{children:""}),c<s-1&&o.jsx("br",{})]},c))})]})});C1.displayName="TextBlockSkeleton";const iB=I.memo(({showSettings:e,setShowSettings:t,context:n="widget"})=>{const{$t:r}=Z(),s=Z(),[a,i]=f.useState(!1),{threads:l}=l1e({topic:"top",reason:"Discover widget",refetchInterval:n==="thumbnail"?void 0:1e3*60*5}),c=l[0]?.updated_datetime?.endsWith("Z")?l[0]?.updated_datetime:`${l[0]?.updated_datetime}Z`,u=l[0]?.featured_images?.[0]?.thumbnail;f.useEffect(()=>{i(!1)},[u]);const d=l[0]?o.jsx("div",{className:B("size-full transform-gpu rounded-2xl"),children:o.jsxs("div",{className:"gap-sm flex h-full flex-1 flex-col justify-between p-2.5 pb-0",style:{zoom:n==="thumbnail"?.75:1},children:[u&&!a&&o.jsxs(o.Fragment,{children:[o.jsx("img",{src:u,alt:"Discover",className:"absolute inset-0 size-full object-cover",onError:()=>{i(!0)}},u),o.jsx("div",{className:"absolute inset-0 bg-black/50"}),o.jsx("div",{className:"absolute inset-0 bg-black",style:{maskImage:"linear-gradient(to bottom, transparent 50%, black)"}})]}),o.jsxs("div",{className:B("absolute inset-0 flex flex-col items-start justify-end gap-1 p-2",{"drop-shadow-md":!a}),children:[o.jsx(D,{variant:"micro",color:a?"default":"white",className:"opacity-60",children:jy(s,new Date(c))}),o.jsx(D,{variant:"smallBold",color:a?"default":"white",className:"w-full break-words",children:l[0].title})]})]})}):o.jsx("div",{className:"bg-subtler size-full",children:o.jsxs("div",{className:"absolute inset-0 flex w-full flex-col items-start justify-end gap-1 p-2",children:[o.jsx(C1,{variant:"micro",colorVariant:"subtle",className:"w-10 opacity-75 dark:opacity-60"}),o.jsx(C1,{variant:"smallBold",colorVariant:"subtle",lines:3,className:"w-full"})]})}),m=f.useCallback(()=>t?.(!1),[t]);return n==="thumbnail"?d:o.jsxs(o.Fragment,{children:[o.jsx(sn,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:o.jsx(Ge,{href:`/page/${l[0]?.slug}`,className:"block",children:o.jsx("div",{className:"absolute inset-0 select-none",children:d})})}),o.jsx(Ke,{children:e&&o.jsx(ku,{onClose:m,children:o.jsx("div",{className:"flex flex-col gap-3 px-5 py-4",children:o.jsx(D,{variant:"entry-title-300",children:r({defaultMessage:"Discover settings",id:"Kf1JUdlcaI"})})})})})]})});iB.displayName="DiscoverWidget";const lB=I.memo(({showSettings:e,setShowSettings:t,context:n="widget"})=>{const{$t:r}=Z(),s=Z(),[a,i]=f.useState(!1),{threads:l}=l1e({topic:"comet_ntp_prototype",reason:"Discover prototype widget",refetchInterval:n==="thumbnail"?void 0:1e3*60*5}),c=l[0]?.updated_datetime?.endsWith("Z")?l[0]?.updated_datetime:`${l[0]?.updated_datetime}Z`,u=l[0]?.featured_images?.[0]?.thumbnail,d=l[0]?o.jsx("div",{className:B("size-full transform-gpu rounded-2xl"),children:o.jsxs("div",{className:"gap-sm flex h-full flex-1 flex-col justify-between p-2.5 pb-0",style:{zoom:n==="thumbnail"?.75:1},children:[u&&!a&&o.jsxs(o.Fragment,{children:[o.jsx("img",{src:u,alt:"Discover Recommendation",className:"absolute inset-0 size-full object-cover",onError:()=>{i(!0)}},u),o.jsx("div",{className:"absolute inset-0 bg-black/50"}),o.jsx("div",{className:"absolute inset-0 bg-black",style:{maskImage:"linear-gradient(to bottom, transparent 50%, black)"}})]}),o.jsxs("div",{className:B("absolute inset-0 flex flex-col items-center justify-center gap-2 p-4",{"drop-shadow-md":!a}),children:[o.jsx(D,{variant:"page-title",color:a?"default":"white",className:"w-full break-words text-center",children:l[0].title}),o.jsx(D,{variant:"small",color:a?"default":"white",className:"opacity-70",children:jy(s,new Date(c))})]})]})}):o.jsx("div",{className:"bg-subtler size-full",children:o.jsxs("div",{className:"absolute inset-0 flex w-full flex-col items-center justify-center gap-2 p-4",children:[o.jsx(C1,{variant:"page-title",colorVariant:"subtle",lines:2,className:"w-full"}),o.jsx(C1,{variant:"small",colorVariant:"subtle",className:"w-20 opacity-75 dark:opacity-60"})]})}),m=f.useCallback(()=>t?.(!1),[t]);return n==="thumbnail"?d:o.jsxs(o.Fragment,{children:[o.jsx(sn,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:o.jsx(Ge,{href:`${l[0]?.url}`,className:"block",children:o.jsx("div",{className:"absolute inset-0 select-none",children:d})})}),o.jsx(Ke,{children:e&&o.jsx(ku,{onClose:m,children:o.jsx("div",{className:"flex flex-col gap-3 px-5 py-4",children:o.jsx(D,{variant:"entry-title-300",children:r({defaultMessage:"Discover Recommendation settings",id:"ToW+xlnws8"})})})})})]})});lB.displayName="DiscoverPrototypeWidget";const z0t=()=>{const e=f.useRef(null),t=f.useRef(null),n=f.useCallback((i,l)=>{if(e.current=i,!i||(i.volume=.5,!l))return;const c=i.play();c!==void 0&&(t.current=c,c.catch(()=>{}).finally(()=>{t.current===c&&(t.current=null)}))},[]),r=f.useCallback(()=>{const i=e.current;if(!i)return;const l=i.play();l!==void 0&&(t.current=l,l.catch(()=>{}).finally(()=>{t.current===l&&(t.current=null)}))},[]),s=f.useCallback(()=>{const i=e.current;i&&(t.current?t.current.catch(()=>{}).finally(()=>{i.pause()}):i.pause())},[]),a=f.useCallback(i=>{i?r():s()},[r,s]);return{videoRef:e,setVideoRef:n,playVideo:r,pauseVideo:s,togglePlayback:a}},G0t="https://r2cdn.perplexity.ai/comet/explore-assistant-min.mp4",vJ="https://r2cdn.perplexity.ai/comet/eplore-assistant-stop-min.png",q0t=({context:e="widget"})=>{const{targetUrl:t,shouldShowWidget:n}=eB(),{trackEvent:r}=Ne(),{setVideoRef:s,togglePlayback:a}=z0t(),i=f.useCallback(m=>{s(m,!1)},[s]),l=f.useCallback(()=>{if(!t)return;const m=Ta(t);r("explore assistant clicked",{domain:m})},[t,r]);if(f.useEffect(()=>{r("explore assistant shown")},[r]),!n||!t)return null;const c=()=>{e==="widget"&&a(!0)},u=()=>{e==="widget"&&a(!1)},d=o.jsx("div",{className:B("relative size-full cursor-pointer select-none",{"active:!bg-subtler dark:active:!bg-subtle":e==="widget"}),onMouseEnter:c,onMouseLeave:u,children:o.jsxs("div",{className:"group relative size-full",children:[e==="widget"?o.jsx("video",{ref:i,src:G0t,poster:vJ,className:"pointer-events-none absolute inset-0 size-full object-cover",autoPlay:!1,loop:!0,muted:!0,playsInline:!0}):o.jsx("img",{src:vJ,alt:"Explore Assistant",className:"pointer-events-none absolute inset-0 size-full object-cover"}),o.jsx("div",{className:"pointer-events-none absolute bottom-0 h-[45px] w-full bg-gradient-to-b from-transparent to-[#02233E]"}),o.jsx("div",{className:"absolute inset-x-0 bottom-2 flex justify-center",children:o.jsx(D,{variant:"tinyMono",color:"white",className:"!text-2xs uppercase drop-shadow-lg",children:e==="widget"?"Try Assistant In Action":"Try Assistant"})})]})});return e==="thumbnail"?d:o.jsx(sn,{shadow:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",fullBleed:!0,children:o.jsx(Ge,{href:t,target:"_blank",rel:"noopener",className:"block size-full cursor-pointer",draggable:!1,onClick:l,children:d})})},c1e=I.memo(q0t),u1e=e=>{switch(e){case"YELLOW":return"bg-[#fef3c7] dark:bg-[#422006]";case"BLUE":return"bg-[#dbeafe] dark:bg-[#172554]";case"RED":return"bg-[#fee2e2] dark:bg-[#450a0a]";case"GREEN":return"bg-[#d1fae5] dark:bg-[#052e16]";default:return"bg-[#fef3c7] dark:bg-[#422006]"}},K0t=e=>{switch(e){case"YELLOW":return"placeholder-[#eab308] dark:placeholder-[#a16207]";case"BLUE":return"placeholder-[#3b82f6] dark:placeholder-[#1d4ed8]";case"RED":return"placeholder-[#ef4444] dark:placeholder-[#b91c1c]";case"GREEN":return"placeholder-[#22c55e] dark:placeholder-[#15803d]";default:return"placeholder-[#eab308] dark:placeholder-[#a16207]"}},xJ=e=>{switch(e){case"YELLOW":return"text-[#a16207] dark:text-[#fef08a]";case"BLUE":return"text-[#1d4ed8] dark:text-[#bfdbfe]";case"RED":return"text-[#b91c1c] dark:text-[#fecaca]";case"GREEN":return"text-[#15803d] dark:text-[#bbf7d0]";default:return"text-[#a16207] dark:text-[#fef08a]"}};function Y0t(e="widget",t,n){if(e==="widget"){const r=$y("STICKY",t);if(r)return{text:r.text??n??"",color:r.color??"YELLOW"}}return{text:n??"",color:"YELLOW"}}function Q0t(e,t="widget",n){t==="widget"&&Km("STICKY",n,{version:1,text:e.text,color:e.color})}const cB=I.memo(({context:e="widget",defaultText:t,widgetId:n,showSettings:r,setShowSettings:s})=>{const{$t:a}=Z(),i=Y0t(e,n,t),[l,c]=f.useState(()=>i.text),[u,d]=f.useState(()=>i.color),m=f.useRef(Xg(w=>{Q0t({...w},e,n)},200));f.useEffect(()=>{const w=m.current.flush;return()=>{w()}},[m]);const p=w=>{const C=w.target.value;c(C),m.current({text:C,color:u})},h=["YELLOW","BLUE","RED","GREEN"],g=a({defaultMessage:"Milk",id:"2ohof39xN+"}),y=a({defaultMessage:"Eggs",id:"rMvDs1YU+D"}),v=a({defaultMessage:"Bread",id:"0n2Uqvcq4W"}),x=o.jsxs("div",{className:"relative flex size-full cursor-pointer flex-col",style:{zoom:e==="thumbnail"?.75:1},children:[o.jsx("div",{className:B("absolute inset-0",u1e(u))}),e==="widget"?o.jsx("textarea",{className:B("scrollbar-none absolute inset-0 z-[1] resize-none bg-transparent p-4 font-sans text-sm focus:outline-none",K0t(u),xJ(u)),autoCorrect:"false",placeholder:a({defaultMessage:"New note...",id:"i+imRH5ndN"}),value:l,onChange:p,style:{maskImage:"linear-gradient(to top, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 16px, rgba(0,0,0,1) calc(100% - 16px), rgba(0,0,0,0) 100%)"}}):o.jsx("div",{className:"absolute inset-0 p-4",children:o.jsxs(D,{variant:"baseSemi",className:xJ(u),children:["- ",g,o.jsx("br",{}),"- ",y,o.jsx("br",{}),"- ",v,o.jsx("br",{})]})})]}),b=f.useCallback(()=>s?.(!1),[s]),_=f.useCallback(()=>s?.(!1),[s]);return e==="thumbnail"?x:o.jsxs(o.Fragment,{children:[o.jsx(sn,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:x}),o.jsx(Ke,{children:r&&o.jsx(ku,{onClose:_,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsx(D,{variant:"entry-title-300",children:a({defaultMessage:"Sticky color",id:"d1DnFHvFSU"})}),o.jsx("div",{className:"gap-sm grid w-full grid-cols-4",children:h.map((w,C)=>o.jsx(d1e,{value:w,color:u,text:l,setColor:d,debouncedSave:m},C))}),o.jsx("div",{className:"mt-sm flex flex-row justify-end",children:o.jsx(he,{variant:"primary",size:"small",onClick:b,text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});cB.displayName="Sticky";function X0t({color:e,onClick:t,selected:n}){return o.jsxs(ge.div,{whileTap:{scale:.95},onClick:t,className:B("relative aspect-square size-full cursor-pointer rounded-full",u1e(e)),children:[n&&o.jsx("div",{className:"border-inverse absolute inset-1 rounded-full border-4"}),o.jsx("div",{className:"rounded-inherit pointer-events-none absolute inset-0 z-[1] border border-[black]/5 dark:border-[white]/5"})]})}const d1e=I.memo(({value:e,color:t,text:n,setColor:r,debouncedSave:s})=>{const a=f.useCallback(()=>{r(e),s.current({text:n,color:e})},[s,r,n,e]);return o.jsx(X0t,{color:e,onClick:a,selected:e===t})});d1e.displayName="StickyColorFactory";const ud=(e,t,n)=>{const r=document.createElement(e),[s,a]=Array.isArray(t)?[void 0,t]:[t,n];return s&&Object.assign(r,s),a?.forEach(i=>r.appendChild(i)),r},Z0t=(e,t)=>{var n;return t==="left"?e.offsetLeft:(((n=e.offsetParent instanceof HTMLElement?e.offsetParent:null)==null?void 0:n.offsetWidth)??0)-e.offsetWidth-e.offsetLeft},J0t=e=>e.offsetWidth>0&&e.offsetHeight>0,evt=(e,t)=>{customElements.get(e)!==t&&customElements.define(e,t)};function tvt(e,t,{reverse:n=!1}={}){const r=e.length;for(let s=n?r-1:0;n?s>=0:s<r;n?s--:s++)t(e[s],s)}function nvt(e,t,n,r){const s=t.formatToParts(e);n&&s.unshift({type:"prefix",value:n}),r&&s.push({type:"suffix",value:r});const a=[],i=[],l=[],c=[],u={},d=y=>`${y}:${u[y]=(u[y]??-1)+1}`;let m="",p=!1,h=!1;for(const y of s){m+=y.value;const v=y.type==="minusSign"||y.type==="plusSign"?"sign":y.type;v==="integer"?(p=!0,i.push(...y.value.split("").map(x=>({type:v,value:parseInt(x)})))):v==="group"?i.push({type:v,value:y.value}):v==="decimal"?(h=!0,l.push({type:v,value:y.value,key:d(v)})):v==="fraction"?l.push(...y.value.split("").map(x=>({type:v,value:parseInt(x),key:d(v),pos:-1-u[v]}))):(p||h?c:a).push({type:v,value:y.value,key:d(v)})}const g=[];for(let y=i.length-1;y>=0;y--){const v=i[y];g.unshift(v.type==="integer"?{...v,key:d(v.type),pos:u[v.type]}:{...v,key:d(v.type)})}return{pre:a,integer:g,fraction:l,post:c,valueAsString:m,value:typeof e=="string"?parseFloat(e):e}}const rvt=String.raw,svt=(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0})(),avt=typeof CSS<"u"&&CSS.supports&&CSS.supports("line-height","mod(1,1)"),bJ=typeof matchMedia<"u"?matchMedia("(prefers-reduced-motion: reduce)"):null,gE="--_number-flow-d-opacity",uB="--_number-flow-d-width",yE="--_number-flow-dx",dB="--_number-flow-d",ovt=(()=>{try{return CSS.registerProperty({name:gE,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:yE,syntax:"<length>",inherits:!0,initialValue:"0px"}),CSS.registerProperty({name:uB,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:dB,syntax:"<number>",inherits:!0,initialValue:"0"}),!0}catch{return!1}})(),ivt="var(--number-flow-char-height, 1em)",$u="var(--number-flow-mask-height, 0.25em)",_J=`calc(${$u} / 2)`,GP="var(--number-flow-mask-width, 0.5em)",wf=`calc(${GP} / var(--scale-x))`,yC="#000 0, transparent 71%",wJ=rvt`:host{display:inline-block;direction:ltr;white-space:nowrap;isolation:isolate;line-height:${ivt} !important}.number,.number__inner{display:inline-block;transform-origin:left top}:host([data-will-change]) :is(.number,.number__inner,.section,.digit,.digit__num,.symbol){will-change:transform}.number{--scale-x:calc(1 + var(${uB}) / var(--width));transform:translateX(var(${yE})) scaleX(var(--scale-x));margin:0 calc(-1 * ${GP});position:relative;-webkit-mask-image:linear-gradient(to right,transparent 0,#000 ${wf},#000 calc(100% - ${wf}),transparent ),linear-gradient(to bottom,transparent 0,#000 ${$u},#000 calc(100% - ${$u}),transparent 100% ),radial-gradient(at bottom right,${yC}),radial-gradient(at bottom left,${yC}),radial-gradient(at top left,${yC}),radial-gradient(at top right,${yC});-webkit-mask-size:100% calc(100% - ${$u} * 2),calc(100% - ${wf} * 2) 100%,${wf} ${$u},${wf} ${$u},${wf} ${$u},${wf} ${$u};-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat}.number__inner{padding:${_J} ${GP};transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(${yE})))}:host > :not(.number){z-index:5}.section,.symbol{display:inline-block;position:relative;isolation:isolate}.section::after{content:'\200b';display:inline-block}.section--justify-left{transform-origin:center left}.section--justify-right{transform-origin:center right}.section > [inert],.symbol > [inert]{margin:0 !important;position:absolute !important;z-index:-1}.digit{display:inline-block;position:relative;--c:var(--current) + var(${dB})}.digit__num,.number .section::after{padding:${_J} 0}.digit__num{display:inline-block;--offset-raw:mod(var(--length) + var(--n) - mod(var(--c),var(--length)),var(--length));--offset:calc( var(--offset-raw) - var(--length) * round(down,var(--offset-raw) / (var(--length) / 2),1) );--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y))}.digit__num[inert]{position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y))}.digit:not(.is-spinning) .digit__num[inert]{display:none}.symbol__value{display:inline-block;mix-blend-mode:plus-lighter;white-space:pre}.section--justify-left .symbol > [inert]{left:0}.section--justify-right .symbol > [inert]{right:0}.animate-presence{opacity:calc(1 + var(${gE}))}`,lvt=HTMLElement,cvt=avt&&svt&&ovt;let vC,f1e=class extends lvt{constructor(){super(),this.created=!1,this.batched=!1;const{animated:t,...n}=this.constructor.defaultProps;this._animated=this.computedAnimated=t,Object.assign(this,n)}get animated(){return this._animated}set animated(t){var n;this.animated!==t&&(this._animated=t,(n=this.shadowRoot)==null||n.getAnimations().forEach(r=>r.finish()))}set data(t){var n;if(t==null)return;const{pre:r,integer:s,fraction:a,post:i,value:l}=t;if(this.created){const c=this._data;this._data=t,this.computedTrend=typeof this.trend=="function"?this.trend(c.value,l):this.trend,this.computedAnimated=cvt&&this._animated&&(!this.respectMotionPreference||!(bJ!=null&&bJ.matches))&&J0t(this),(n=this.plugins)==null||n.forEach(u=>{var d;return(d=u.onUpdate)==null?void 0:d.call(u,t,c,this)}),this.batched||this.willUpdate(),this._pre.update(r),this._num.update({integer:s,fraction:a}),this._post.update(i),this.batched||this.didUpdate()}else{this._data=t,this.attachShadow({mode:"open"});try{this._internals??(this._internals=this.attachInternals()),this._internals.role="img"}catch{}if(typeof CSSStyleSheet<"u"&&this.shadowRoot.adoptedStyleSheets)vC||(vC=new CSSStyleSheet,vC.replaceSync(wJ)),this.shadowRoot.adoptedStyleSheets=[vC];else{const c=document.createElement("style");c.textContent=wJ,this.shadowRoot.appendChild(c)}this._pre=new SJ(this,r,{justify:"right",part:"left"}),this.shadowRoot.appendChild(this._pre.el),this._num=new uvt(this,s,a),this.shadowRoot.appendChild(this._num.el),this._post=new SJ(this,i,{justify:"left",part:"right"}),this.shadowRoot.appendChild(this._post.el),this.created=!0}try{this._internals.ariaLabel=t.valueAsString}catch{}}willUpdate(){this._pre.willUpdate(),this._num.willUpdate(),this._post.willUpdate()}didUpdate(){if(!this.computedAnimated)return;this._abortAnimationsFinish?this._abortAnimationsFinish.abort():this.dispatchEvent(new Event("animationsstart")),this._pre.didUpdate(),this._num.didUpdate(),this._post.didUpdate();const t=new AbortController;Promise.all(this.shadowRoot.getAnimations().map(n=>n.finished)).then(()=>{t.signal.aborted||(this.dispatchEvent(new Event("animationsfinish")),this._abortAnimationsFinish=void 0)}),this._abortAnimationsFinish=t}};f1e.defaultProps={transformTiming:{duration:900,easing:"linear(0,.005,.019,.039,.066,.096,.129,.165,.202,.24,.278,.316,.354,.39,.426,.461,.494,.526,.557,.586,.614,.64,.665,.689,.711,.731,.751,.769,.786,.802,.817,.831,.844,.856,.867,.877,.887,.896,.904,.912,.919,.925,.931,.937,.942,.947,.951,.955,.959,.962,.965,.968,.971,.973,.976,.978,.98,.981,.983,.984,.986,.987,.988,.989,.99,.991,.992,.992,.993,.994,.994,.995,.995,.996,.996,.9963,.9967,.9969,.9972,.9975,.9977,.9979,.9981,.9982,.9984,.9985,.9987,.9988,.9989,1)"},spinTiming:void 0,opacityTiming:{duration:450,easing:"ease-out"},animated:!0,trend:(e,t)=>Math.sign(t-e),respectMotionPreference:!0,plugins:void 0,digits:void 0};let uvt=class{constructor(t,n,r,{className:s,...a}={}){this.flow=t,this._integer=new CJ(t,n,{justify:"right",part:"integer"}),this._fraction=new CJ(t,r,{justify:"left",part:"fraction"}),this._inner=ud("span",{className:"number__inner"},[this._integer.el,this._fraction.el]),this.el=ud("span",{...a,part:"number",className:`number ${s??""}`},[this._inner])}willUpdate(){this._prevWidth=this.el.offsetWidth,this._prevLeft=this.el.getBoundingClientRect().left,this._integer.willUpdate(),this._fraction.willUpdate()}update({integer:t,fraction:n}){this._integer.update(t),this._fraction.update(n)}didUpdate(){const t=this.el.getBoundingClientRect();this._integer.didUpdate(),this._fraction.didUpdate();const n=this._prevLeft-t.left,r=this.el.offsetWidth,s=this._prevWidth-r;this.el.style.setProperty("--width",String(r)),this.el.animate({[yE]:[`${n}px`,"0px"],[uB]:[s,0]},{...this.flow.transformTiming,composite:"accumulate"})}},m1e=class{constructor(t,n,{justify:r,className:s,...a},i){this.flow=t,this.children=new Map,this.onCharRemove=c=>()=>{this.children.delete(c)},this.justify=r;const l=n.map(c=>this.addChar(c).el);this.el=ud("span",{...a,className:`section section--justify-${r} ${s??""}`},i?i(l):l)}addChar(t,{startDigitsAtZero:n=!1,...r}={}){const s=t.type==="integer"||t.type==="fraction"?new h1e(this,t.type,n?0:t.value,t.pos,{...r,onRemove:this.onCharRemove(t.key)}):new dvt(this,t.type,t.value,{...r,onRemove:this.onCharRemove(t.key)});return this.children.set(t.key,s),s}unpop(t){t.el.removeAttribute("inert"),t.el.style.top="",t.el.style[this.justify]=""}pop(t){t.forEach(n=>{n.el.style.top=`${n.el.offsetTop}px`,n.el.style[this.justify]=`${Z0t(n.el,this.justify)}px`}),t.forEach(n=>{n.el.setAttribute("inert",""),n.present=!1})}addNewAndUpdateExisting(t){const n=new Map,r=new Map,s=this.justify==="left",a=s?"prepend":"append";if(tvt(t,i=>{let l;this.children.has(i.key)?(l=this.children.get(i.key),r.set(i,l),this.unpop(l),l.present=!0):(l=this.addChar(i,{startDigitsAtZero:!0,animateIn:!0}),n.set(i,l)),this.el[a](l.el)},{reverse:s}),this.flow.computedAnimated){const i=this.el.getBoundingClientRect();n.forEach(l=>{l.willUpdate(i)})}n.forEach((i,l)=>{i.update(l.value)}),r.forEach((i,l)=>{i.update(l.value)})}willUpdate(){const t=this.el.getBoundingClientRect();this._prevOffset=t[this.justify],this.children.forEach(n=>n.willUpdate(t))}didUpdate(){const t=this.el.getBoundingClientRect();this.children.forEach(s=>s.didUpdate(t));const n=t[this.justify],r=this._prevOffset-n;r&&this.children.size&&this.el.animate({transform:[`translateX(${r}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}},CJ=class extends m1e{update(t){const n=new Map;this.children.forEach((r,s)=>{t.find(a=>a.key===s)||n.set(s,r),this.unpop(r)}),this.addNewAndUpdateExisting(t),n.forEach(r=>{r instanceof h1e&&r.update(0)}),this.pop(n)}},SJ=class extends m1e{update(t){const n=new Map;this.children.forEach((r,s)=>{t.find(a=>a.key===s)||n.set(s,r)}),this.pop(n),this.addNewAndUpdateExisting(t)}},qP=class{constructor(t,n,{onRemove:r,animateIn:s=!1}={}){this.flow=t,this.el=n,this._present=!0,this._remove=()=>{var a;this.el.remove(),(a=this._onRemove)==null||a.call(this)},this.el.classList.add("animate-presence"),this.flow.computedAnimated&&s&&this.el.animate({[gE]:[-.9999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),this._onRemove=r}get present(){return this._present}set present(t){if(this._present!==t){if(this._present=t,t?this.el.removeAttribute("inert"):this.el.setAttribute("inert",""),!this.flow.computedAnimated){t||this._remove();return}this.el.style.setProperty("--_number-flow-d-opacity",t?"0":"-.999"),this.el.animate({[gE]:t?[-.9999,0]:[.999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),t?this.flow.removeEventListener("animationsfinish",this._remove):this.flow.addEventListener("animationsfinish",this._remove,{once:!0})}}},p1e=class extends qP{constructor(t,n,r,s){super(t.flow,r,s),this.section=t,this.value=n,this.el=r}},h1e=class extends p1e{constructor(t,n,r,s,a){var i,l;const c=(((l=(i=t.flow.digits)==null?void 0:i[s])==null?void 0:l.max)??9)+1,u=Array.from({length:c}).map((m,p)=>{const h=ud("span",{className:"digit__num"},[document.createTextNode(String(p))]);return p!==r&&h.setAttribute("inert",""),h.style.setProperty("--n",String(p)),h}),d=ud("span",{part:`digit ${n}-digit`,className:"digit"},u);d.style.setProperty("--current",String(r)),d.style.setProperty("--length",String(c)),super(t,r,d,a),this.pos=s,this._onAnimationsFinish=()=>{this.el.classList.remove("is-spinning")},this._numbers=u,this.length=c}willUpdate(t){const n=this.el.getBoundingClientRect();this._prevValue=this.value;const r=n[this.section.justify]-t[this.section.justify],s=n.width/2;this._prevCenter=this.section.justify==="left"?r+s:r-s}update(t){this.el.style.setProperty("--current",String(t)),this._numbers.forEach((n,r)=>r===t?n.removeAttribute("inert"):n.setAttribute("inert","")),this.value=t}didUpdate(t){const n=this.el.getBoundingClientRect(),r=n[this.section.justify]-t[this.section.justify],s=n.width/2,a=this.section.justify==="left"?r+s:r-s,i=this._prevCenter-a;i&&this.el.animate({transform:[`translateX(${i}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"});const l=this.getDelta();l&&(this.el.classList.add("is-spinning"),this.el.animate({[dB]:[-l,0]},{...this.flow.spinTiming??this.flow.transformTiming,composite:"accumulate"}),this.flow.addEventListener("animationsfinish",this._onAnimationsFinish,{once:!0}))}getDelta(){var t;if(this.flow.plugins)for(const s of this.flow.plugins){const a=(t=s.getDelta)==null?void 0:t.call(s,this.value,this._prevValue,this);if(a!=null)return a}const n=this.value-this._prevValue,r=this.flow.computedTrend||Math.sign(n);return r<0&&this.value>this._prevValue?this.value-this.length-this._prevValue:r>0&&this.value<this._prevValue?this.length-this._prevValue+this.value:n}},dvt=class extends p1e{constructor(t,n,r,s){const a=ud("span",{className:"symbol__value",textContent:r});super(t,r,ud("span",{part:`symbol ${n}`,className:"symbol"},[a]),s),this.type=n,this._children=new Map,this._onChildRemove=i=>()=>{this._children.delete(i)},this._children.set(r,new qP(this.flow,a,{onRemove:this._onChildRemove(r)}))}willUpdate(t){if(this.type==="decimal")return;const n=this.el.getBoundingClientRect();this._prevOffset=n[this.section.justify]-t[this.section.justify]}update(t){if(this.value!==t){const n=this._children.get(this.value);n&&(n.present=!1);const r=this._children.get(t);if(r)r.present=!0;else{const s=ud("span",{className:"symbol__value",textContent:t});this.el.appendChild(s),this._children.set(t,new qP(this.flow,s,{animateIn:!0,onRemove:this._onChildRemove(t)}))}}this.value=t}didUpdate(t){if(this.type==="decimal")return;const n=this.el.getBoundingClientRect()[this.section.justify]-t[this.section.justify],r=this._prevOffset-n;r&&this.el.animate({transform:[`translateX(${r}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}};const fvt=parseInt(f.version.match(/^(\d+)\./)?.[1]),fB=fvt>=19,mvt=["data","digits"];class mB extends f1e{attributeChangedCallback(t,n,r){this[t]=JSON.parse(r)}}mB.observedAttributes=fB?[]:mvt;evt("number-flow-react",mB);const pvt={},EJ=fB?e=>e:JSON.stringify;function MJ(e){const{transformTiming:t,spinTiming:n,opacityTiming:r,animated:s,respectMotionPreference:a,trend:i,plugins:l,...c}=e;return[{transformTiming:t,spinTiming:n,opacityTiming:r,animated:s,respectMotionPreference:a,trend:i,plugins:l},c]}class hvt extends f.Component{updateProperties(t){if(!this.el)return;this.el.batched=!this.props.isolate;const[n]=MJ(this.props);Object.entries(n).forEach(([r,s])=>{this.el[r]=s??mB.defaultProps[r]}),t?.onAnimationsStart&&this.el.removeEventListener("animationsstart",t.onAnimationsStart),this.props.onAnimationsStart&&this.el.addEventListener("animationsstart",this.props.onAnimationsStart),t?.onAnimationsFinish&&this.el.removeEventListener("animationsfinish",t.onAnimationsFinish),this.props.onAnimationsFinish&&this.el.addEventListener("animationsfinish",this.props.onAnimationsFinish)}componentDidMount(){this.updateProperties(),fB&&this.el&&(this.el.digits=this.props.digits,this.el.data=this.props.data)}getSnapshotBeforeUpdate(t){if(this.updateProperties(t),t.data!==this.props.data){if(this.props.group)return this.props.group.willUpdate(),()=>this.props.group?.didUpdate();if(!this.props.isolate)return this.el?.willUpdate(),()=>this.el?.didUpdate()}return null}componentDidUpdate(t,n,r){r?.()}handleRef(t){this.props.innerRef&&(this.props.innerRef.current=t),this.el=t}render(){const[t,{innerRef:n,className:r,data:s,willChange:a,isolate:i,group:l,digits:c,onAnimationsStart:u,onAnimationsFinish:d,...m}]=MJ(this.props);return f.createElement("number-flow-react",{ref:this.handleRef,"data-will-change":a?"":void 0,class:r,...m,dangerouslySetInnerHTML:{__html:""},suppressHydrationWarning:!0,digits:EJ(c),data:EJ(s)})}constructor(t){super(t),this.handleRef=this.handleRef.bind(this)}}const ci=f.forwardRef(function({value:t,locales:n,format:r,prefix:s,suffix:a,...i},l){f.useImperativeHandle(l,()=>c.current,[]);const c=f.useRef(),u=f.useContext(gvt);u?.useRegister(c);const d=f.useMemo(()=>n?JSON.stringify(n):"",[n]),m=f.useMemo(()=>r?JSON.stringify(r):"",[r]),p=f.useMemo(()=>{const h=pvt[`${d}:${m}`]??=new Intl.NumberFormat(n,r);return nvt(t,h,s,a)},[t,d,m,s,a]);return f.createElement(hvt,{...i,group:u,data:p,innerRef:c})}),gvt=f.createContext(void 0),Tn=0,wn=1,vn="finance",Qtn=(e,t)=>["finance/topMovers",e,t];async function Xtn({marketType:e,country:t,headers:n}){const r=await se.GET("/rest/finance/top-movers/{market_type}",vn,{params:{path:{market_type:e},query:{country:t}},headers:n,timeoutMs:Tn,numRetries:wn});if(r.error)throw new Error("Failed to fetch top movers.",{cause:r.error});return r.data}const Ztn=async({symbol:e,category:t,period:n})=>{const r=await se.POST("/rest/finance/financials/{market_identifier}/analysis",vn,{params:{path:{market_identifier:e}},body:{category:t,period:n},timeoutMs:1e4,numRetries:wn});if(r.error)throw new Error(`Failed to fetch financial insights for ${e}`,{cause:r.error});return r.data},Jtn=async({symbol:e,period:t,interval:n,headers:r})=>{const s=await se.GET("/rest/finance/history/{market_identifier}",vn,{params:{query:{period:t??"1d",interval:n},path:{market_identifier:e}},headers:r,timeoutMs:Tn,numRetries:wn});if(s.error)throw new Error(`Failed to fetch price history for ${e}`,{cause:s.error});return s.data},enn=e=>["finance/coin50/history",e],tnn=async({period:e})=>{const t=await se.GET("/rest/finance/history/COIN50USD",vn,{params:{query:{period:e??"1d"}},timeoutMs:Tn,numRetries:wn});if(t.error)throw new Error("Failed to fetch price history for COIN50USD",{cause:t.error});return t.data},nnn=async({symbol:e,period:t,interval:n})=>{const r=await se.GET("/rest/finance/history/{market_identifier}/csv",vn,{parseAs:"blob",params:{path:{market_identifier:e},query:{period:t??"1d",interval:n}}});if(r.error)throw new Error(`Failed to fetch price history for ${e}`,{cause:r.error});return r.data},S1=({symbol:e,withHistory:t,historyAfterHours:n,historyPeriod:r,historyOffset:s})=>["finance/quote",e,t??null,n??null,r??null,s??null],Td=async({symbol:e,withHistory:t=!1,historyAfterHours:n=!0,historyPeriod:r,historyOffset:s,headers:a})=>{const i=await se.GET("/rest/finance/quote/{market_identifier}",vn,{params:{path:{market_identifier:e},query:{with_history:t,history_period:r,history_offset:s,history_after_hours:n}},headers:a,timeoutMs:Tn,numRetries:wn});if(i.response.status===404)return null;if(i.error)throw new Error(`Failed to fetch quote for ${e}`,{cause:i.error});return i.data},rnn=e=>["finance/profile",e],snn=async({symbol:e,headers:t})=>{const n=await se.GET("/rest/finance/profile/{market_identifier}",vn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:Tn,numRetries:wn});if(n.response.status===404)return null;if(n.error)throw new Error(`Failed to fetch profile for ${e}`,{cause:n.error});return n.data},ann=e=>["finance/profile/description",e],onn=async({symbol:e,headers:t})=>{const n=await se.GET("/rest/finance/profile/{market_identifier}/description",vn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:Tn,numRetries:wn});if(n.error)throw new Error(`Failed to fetch profile description for ${e}`,{cause:n.error});return n.data},inn=(e,t,n="",r="",s)=>["finance/history",t,e,n,r,s],lnn=e=>["finance/financials",e],cnn=async(e,t)=>{const n=await se.GET("/rest/finance/financials/{market_identifier}",vn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:Tn,numRetries:wn});if(n.error)throw new Error(`Failed to fetch financials for ${e}`,{cause:n.error});return n.data},unn=e=>["finance/holders",e],dnn=async(e,t)=>{const n=await se.GET("/rest/finance/holders/{market_identifier}",vn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:Tn,numRetries:wn});if(n.error)throw new Error(`Failed to fetch holders for ${e}`,{cause:n.error});return n.data};function yvt(e,t){return["finance/peers",e,t]}async function vvt({symbol:e,headers:t,index:n}){const r=await se.GET("/rest/finance/peers/{market_identifier}",vn,{params:{path:{market_identifier:e},query:{with_index:n}},headers:t,timeoutMs:Tn,numRetries:wn});if(r.error)throw new Error(`Failed to fetch peers for ${e}`,{cause:r.error});return r.data}async function fnn({symbol:e,headers:t}){const n=await se.GET("/rest/finance/bulls-vs-bears-summary/{market_identifier}",vn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:Tn,numRetries:wn});if(n.error)throw new Error(`Failed to fetch bulls vs bears analysis for ${e}`,{cause:n.error});return n.data}async function mnn({symbol:e,headers:t}){const n=await se.GET("/rest/finance/timeline/{market_identifier}",vn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:0});if(n.error)throw new Error(`Failed to fetch timeline for ${e}`,{cause:n.error});return n.data}async function pnn({eventId:e,symbol:t,headers:n}){const r=await se.GET("/rest/finance/earnings/{market_identifier}/transcript/{event_id}",vn,{headers:n,params:{path:{market_identifier:t,event_id:e}},timeoutMs:Tn,numRetries:wn});if(r.response.status===404)return null;if(r.error)throw new Error(`Failed to fetch earnings transcript for ${t}`,{cause:r.error});return r.data}const hnn=(e,t)=>["finance/analysis",e,t];async function gnn({eventId:e,symbol:t,headers:n}){const r=await se.GET("/rest/finance/earnings/{market_identifier}/analysis/{event_id}",vn,{params:{path:{market_identifier:t,event_id:e}},headers:n,timeoutMs:Tn,numRetries:wn});if(r.error)throw new Error(`Failed to fetch earnings analysis for ${t}`,{cause:r.error});return r.data}const ynn=(e,t)=>["finance/documents",e,t];async function vnn({eventId:e,symbol:t,headers:n}){const r=await se.GET("/rest/finance/earnings/{market_identifier}/documents/{event_id}",vn,{params:{path:{market_identifier:t,event_id:e}},headers:n,timeoutMs:Tn,numRetries:wn});if(r.error)throw new Error(`Failed to fetch earnings documents for ${t}`,{cause:r.error});return r.data}const xnn=e=>["finance/documents",e];async function bnn({symbol:e,headers:t}){const n=await se.GET("/rest/finance/documents/{market_identifier}",vn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:Tn,numRetries:wn});if(n.error)throw new Error(`Failed to fetch documents for ${e}`,{cause:n.error});return n.data}const _nn=async(e,t)=>{const n=await se.GET("/rest/finance/documents/download/{document_id}",vn,{params:{path:{document_id:e}},headers:t,timeoutMs:Tn,numRetries:wn});if(n.error)throw new Error(`Failed to fetch document download url for ${e}`,{cause:n.error});return{errorCode:n.data?.error_code??null,presignedUrl:n.data?.presigned_url??null}},wnn=e=>["finance/earnings",e];async function Cnn({symbol:e,headers:t}){const n=await se.GET("/rest/finance/earnings/{market_identifier}",vn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:Tn,numRetries:wn});if(n.response.status===404)return[];if(n.error)throw new Error(`Failed to fetch earnings for ${e}`,{cause:n.error});return n.data}async function Snn({marketType:e,headers:t,country:n}){const r=await se.GET("/rest/finance/{market_type}",vn,{headers:t,params:{path:{market_type:e},query:{country:n}},timeoutMs:Tn,numRetries:wn});if(r.error)throw new Error(`Failed to fetch finance page shared data for ${e}`,{cause:r.error});return r.data}const xvt=(e,t,n)=>["finance/top-indices",e,t,n];async function bvt({groupId:e,headers:t,historyPeriod:n,country:r}){const s=await se.GET("/rest/finance/top-indices/{group_id}",vn,{headers:t,params:{path:{group_id:e},query:{with_history:!0,history_period:n,country:r}},timeoutMs:Tn,numRetries:wn});if(s.error)throw new Error("Failed to fetch top indices",{cause:s.error});return s.data}const Enn=(e,t)=>["finance/watchlist-quotes",e??"",t??""];async function Mnn({headers:e,country:t}){const n=await se.GET("/rest/finance/watchlist-quotes",vn,{headers:e,timeoutMs:Tn,numRetries:wn,params:{query:{country:t}}});if(n.error)throw new Error("Failed to fetch watchlist quotes",{cause:n.error});return n.data}async function knn(){const e=await se.GET("/rest/finance/equity-sectors",vn,{timeoutMs:Tn,numRetries:wn});if(e.error)throw new Error("Failed to fetch equity sectors",{cause:e.error});return e.data}async function Tnn(){const e=await se.GET("/rest/finance/fixed-income",vn,{timeoutMs:Tn,numRetries:wn});if(e.error)throw new Error("Failed to fetch fixed income",{cause:e.error});return e.data}async function Nnn({marketType:e,country:t}){const n=await se.GET("/rest/finance/market-sentiment/{market_type}",vn,{params:{path:{market_type:e},query:{country:t}},timeoutMs:Tn,numRetries:wn});if(n.error)throw new Error("Failed to fetch market sentiment",{cause:n.error});return n.data}async function jnn({marketType:e,headers:t,country:n}){const r=await se.GET("/rest/finance/top-z-scores/{market_type}",vn,{params:{path:{market_type:e},query:{country:n}},headers:t,timeoutMs:Tn,numRetries:wn});if(r.error)throw new Error("Failed to fetch top z scores",{cause:r.error});return r.data}async function Ann({marketIdentifier:e,locale:t}){const n=await se.GET("/rest/finance/significant-movement-summary/{market_identifier}",vn,{params:{path:{market_identifier:e}},headers:{"Accept-Language":t},timeoutMs:Tn,numRetries:wn});if(n.error)throw new Error("Failed to fetch significant movement summary",{cause:n.error});return n.data}const Inn=e=>["finance/news",e];async function Rnn({symbol:e,headers:t}){const n=await se.GET("/rest/finance/news/{market_identifier}",vn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:Tn,numRetries:wn});if(n.error)throw new Error("Failed to fetch news",{cause:n.error});return n.data}async function Pnn({marketType:e,country:t,headers:n}){const r=await se.GET("/rest/finance/market-summary/{market_type}",vn,{params:{path:{market_type:e},query:{country:t}},headers:n,timeoutMs:Tn,numRetries:wn});if(r.error)throw new Error("Failed to fetch market summary",{cause:r.error});return r.data}async function Onn({marketType:e,headers:t,country:n}){const r=await se.GET("/rest/finance/general-news/{market_type}",vn,{params:{path:{market_type:e},query:{country:n}},headers:t,timeoutMs:Tn,numRetries:wn});if(r.error)throw new Error("Failed to fetch general news",{cause:r.error});return r.data}const Lnn=(e,t,n)=>["finance/crypto-leaderboard",e,t,n];async function Dnn({sortBy:e="dollarVolume24h",orderBy:t="desc",provider:n="coinbase",headers:r}){const s=await se.GET("/rest/finance/leaderboard/crypto",vn,{params:{query:{sort_by:e,order_by:t,provider:n}},timeoutMs:Tn,numRetries:wn,headers:r});if(s.error)throw new Error("Failed to fetch crypto leaderboard",{cause:s.error});return s.data}const Fnn=(e,t,n,r)=>["finance/earnings/schedule",e,t,n,r];async function Unn(e,t,n,r){const s=await se.GET("/rest/finance/earnings/schedule",vn,{params:{query:{start_date:e,end_date:t,timezone:n,country:r}},timeoutMs:Tn,numRetries:wn});if(s.error)throw new Error("Failed to fetch earnings schedule",{cause:s.error});return s.data}const Bnn=(e,t,n)=>["finance/earnings",e,t,n];async function Vnn(e,t,n){const r=await se.GET("/rest/finance/earnings",vn,{params:{query:{date:e,timezone:t,country:n}},timeoutMs:Tn,numRetries:wn});if(r.error)throw new Error("Failed to fetch earnings schedule",{cause:r.error});return r.data}async function $nn(){const{data:e,error:t}=await se.GET("/rest/autosuggest/finance/list-autosuggest",vn,{params:{query:{query:""}},timeoutMs:Tn,numRetries:wn});if(t)throw new Error("Failed to fetch trending companies",{cause:t});return e.results.filter(n=>n.category==="ticker")}const Wnn=(e,t)=>["finance/screener",e,t];async function Hnn({query:e,currency:t,headers:n}){const r=await se.GET("/rest/finance/screener",vn,{params:{query:{query:e,currency:t||void 0}},headers:n,timeoutMs:Tn,numRetries:wn});if(r.error)throw new Error("Failed to fetch screener data.",{cause:r.error});return r.data}const kJ=(e,t)=>["finance-autosuggest",e,t],KP=async({query:e,reason:t,country:n})=>{try{const{data:r,error:s}=await se.GET("/rest/autosuggest/finance/list-autosuggest",t,{params:{query:{query:e,country:n}},timeoutMs:0});if(s)throw new Error("Failed to fetch finance suggestions.",{cause:s});return r.results??ue}catch(r){return ne.error(r),[]}},_vt=(e,t,n)=>["finance/currency-exchange",e,t,n];async function wvt({sourceCurrency:e,targetCurrency:t,amount:n=1,headers:r}){const s=await se.GET("/rest/finance/currency-exchange",vn,{params:{query:{source_currency:e,target_currency:t,amount:n}},headers:r,timeoutMs:Tn,numRetries:wn});if(s.error)throw new Error(`Failed to convert ${e} to ${t}`,{cause:s.error});return s.data}async function Cvt(e,t){try{return(await Td({symbol:e,headers:t}))?.currency?.toLowerCase()||"usd"}catch(n){return ne.warn(`Failed to fetch currency for symbol ${e}`,{error:n}),"usd"}}const znn=(e,t)=>["finance/transcript",e,t];function Svt(e){const t=e+"CollectionProvider",[n,r]=co(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=y=>{const{scope:v,children:x}=y,b=I.useRef(null),_=I.useRef(new Map).current;return o.jsx(s,{scope:v,itemMap:_,collectionRef:b,children:x})};i.displayName=t;const l=e+"CollectionSlot",c=Fx(l),u=I.forwardRef((y,v)=>{const{scope:x,children:b}=y,_=a(l,x),w=Vn(v,_.collectionRef);return o.jsx(c,{ref:w,children:b})});u.displayName=l;const d=e+"CollectionItemSlot",m="data-radix-collection-item",p=Fx(d),h=I.forwardRef((y,v)=>{const{scope:x,children:b,..._}=y,w=I.useRef(null),C=Vn(v,w),S=a(d,x);return I.useEffect(()=>(S.itemMap.set(w,{ref:w,..._}),()=>void S.itemMap.delete(w))),o.jsx(p,{[m]:"",ref:C,children:b})});h.displayName=d;function g(y){const v=a(e+"CollectionConsumer",y);return I.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const _=Array.from(b.querySelectorAll(`[${m}]`));return Array.from(v.itemMap.values()).sort((S,E)=>_.indexOf(S.ref.current)-_.indexOf(E.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:i,Slot:u,ItemSlot:h},g,r]}var Jj="rovingFocusGroup.onEntryFocus",Evt={bubbles:!1,cancelable:!0},u_="RovingFocusGroup",[YP,g1e,Mvt]=Svt(u_),[kvt,W3]=co(u_,[Mvt]),[Tvt,Nvt]=kvt(u_),y1e=f.forwardRef((e,t)=>o.jsx(YP.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(YP.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(jvt,{...e,ref:t})})}));y1e.displayName=u_;var jvt=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...m}=e,p=f.useRef(null),h=Vn(t,p),g=X5(a),[y,v]=Ji({prop:i,defaultProp:l??null,onChange:c,caller:u_}),[x,b]=f.useState(!1),_=Ka(u),w=g1e(n),C=f.useRef(!1),[S,E]=f.useState(0);return f.useEffect(()=>{const M=p.current;if(M)return M.addEventListener(Jj,_),()=>M.removeEventListener(Jj,_)},[_]),o.jsx(Tvt,{scope:n,orientation:r,dir:g,loop:s,currentTabStopId:y,onItemFocus:f.useCallback(M=>v(M),[v]),onItemShiftTab:f.useCallback(()=>b(!0),[]),onFocusableItemAdd:f.useCallback(()=>E(M=>M+1),[]),onFocusableItemRemove:f.useCallback(()=>E(M=>M-1),[]),children:o.jsx(dn.div,{tabIndex:x||S===0?-1:0,"data-orientation":r,...m,ref:h,style:{outline:"none",...e.style},onMouseDown:Ft(e.onMouseDown,()=>{C.current=!0}),onFocus:Ft(e.onFocus,M=>{const k=!C.current;if(M.target===M.currentTarget&&k&&!x){const A=new CustomEvent(Jj,Evt);if(M.currentTarget.dispatchEvent(A),!A.defaultPrevented){const R=w().filter(T=>T.focusable),O=R.find(T=>T.active),L=R.find(T=>T.id===y),N=[O,L,...R].filter(Boolean).map(T=>T.ref.current);b1e(N,d)}}C.current=!1}),onBlur:Ft(e.onBlur,()=>b(!1))})})}),v1e="RovingFocusGroupItem",x1e=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:i,...l}=e,c=bh(),u=a||c,d=Nvt(v1e,n),m=d.currentTabStopId===u,p=g1e(n),{onFocusableItemAdd:h,onFocusableItemRemove:g,currentTabStopId:y}=d;return f.useEffect(()=>{if(r)return h(),()=>g()},[r,h,g]),o.jsx(YP.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:o.jsx(dn.span,{tabIndex:m?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Ft(e.onMouseDown,v=>{r?d.onItemFocus(u):v.preventDefault()}),onFocus:Ft(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Ft(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=Rvt(v,d.orientation,d.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let _=p().filter(w=>w.focusable).map(w=>w.ref.current);if(x==="last")_.reverse();else if(x==="prev"||x==="next"){x==="prev"&&_.reverse();const w=_.indexOf(v.currentTarget);_=d.loop?Pvt(_,w+1):_.slice(w+1)}setTimeout(()=>b1e(_))}}),children:typeof i=="function"?i({isCurrentTabStop:m,hasTabStop:y!=null}):i})})});x1e.displayName=v1e;var Avt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ivt(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Rvt(e,t,n){const r=Ivt(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Avt[r]}function b1e(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Pvt(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var _1e=y1e,w1e=x1e,C1e="Toggle",S1e=f.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r,onPressedChange:s,...a}=e,[i,l]=Ji({prop:n,onChange:s,defaultProp:r??!1,caller:C1e});return o.jsx(dn.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:Ft(e.onClick,()=>{e.disabled||l(!i)})})});S1e.displayName=C1e;var Kd="ToggleGroup",[E1e,Gnn]=co(Kd,[W3]),M1e=W3(),pB=I.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const s=r;return o.jsx(Ovt,{...s,ref:t})}if(n==="multiple"){const s=r;return o.jsx(Lvt,{...s,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Kd}\``)});pB.displayName=Kd;var[k1e,T1e]=E1e(Kd),Ovt=I.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=e,[i,l]=Ji({prop:n,defaultProp:r??"",onChange:s,caller:Kd});return o.jsx(k1e,{scope:e.__scopeToggleGroup,type:"single",value:I.useMemo(()=>i?[i]:[],[i]),onItemActivate:l,onItemDeactivate:I.useCallback(()=>l(""),[l]),children:o.jsx(N1e,{...a,ref:t})})}),Lvt=I.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=e,[i,l]=Ji({prop:n,defaultProp:r??[],onChange:s,caller:Kd}),c=I.useCallback(d=>l((m=[])=>[...m,d]),[l]),u=I.useCallback(d=>l((m=[])=>m.filter(p=>p!==d)),[l]);return o.jsx(k1e,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:u,children:o.jsx(N1e,{...a,ref:t})})});pB.displayName=Kd;var[Dvt,Fvt]=E1e(Kd),N1e=I.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:s=!0,orientation:a,dir:i,loop:l=!0,...c}=e,u=M1e(n),d=X5(i),m={role:"group",dir:d,...c};return o.jsx(Dvt,{scope:n,rovingFocus:s,disabled:r,children:s?o.jsx(_1e,{asChild:!0,...u,orientation:a,dir:d,loop:l,children:o.jsx(dn.div,{...m,ref:t})}):o.jsx(dn.div,{...m,ref:t})})}),vE="ToggleGroupItem",j1e=I.forwardRef((e,t)=>{const n=T1e(vE,e.__scopeToggleGroup),r=Fvt(vE,e.__scopeToggleGroup),s=M1e(e.__scopeToggleGroup),a=n.value.includes(e.value),i=r.disabled||e.disabled,l={...e,pressed:a,disabled:i},c=I.useRef(null);return r.rovingFocus?o.jsx(w1e,{asChild:!0,...s,focusable:!i,active:a,ref:c,children:o.jsx(TJ,{...l,ref:t})}):o.jsx(TJ,{...l,ref:t})});j1e.displayName=vE;var TJ=I.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...s}=e,a=T1e(vE,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=a.type==="single"?i:void 0;return o.jsx(S1e,{...l,...s,ref:t,onPressedChange:c=>{c?a.onItemActivate(r):a.onItemDeactivate(r)}})}),Uvt=pB,Bvt=j1e;const Nd=[.4,0,.2,1],Vvt=({value:e,onChange:t,id:n,children:r,boxProps:s,className:a=""})=>{const i=l=>{l&&t(l)};return o.jsx(A1e.Provider,{value:{activeValue:e},children:o.jsx(rc,{id:n,children:o.jsx(Uvt,{onValueChange:i,type:"single",value:e,asChild:!0,children:o.jsx(ge.div,{layout:!0,layoutRoot:!0,children:o.jsx(H,{className:B("border-subtler p-two flex rounded-lg border",a),...s,children:r})})})})})},$vt=({value:e,icon:t,className:n="",children:r})=>{const s="relative text-quiet hover:text-foreground data-[state=on]:text-foreground flex h-[32px] min-w-[32px] p-sm items-center justify-center duration-150 active:scale-95",a=f.useContext(A1e);return o.jsx(Bvt,{asChild:!0,value:e,children:o.jsxs("button",{className:B(s,n),children:[o.jsxs("span",{className:"gap-xs relative z-[2] flex",children:[Array.isArray(t)?t.map((i,l)=>o.jsx(ce,{icon:i,size:"sm"},l)):t?o.jsx(ce,{icon:t,size:"sm"}):null,r]}),a.activeValue===e&&o.jsx(ge.div,{layout:!0,layoutId:"toggle",className:"absolute inset-0 z-[1]",transition:{duration:.15,ease:Nd},children:o.jsx("div",{className:"absolute inset-0 rounded-md bg-current opacity-10"})})]})})},A1e=Wt("ToggleGroupContext",{activeValue:""}),Wvt=Vvt,Hvt=$vt,NJ={Root:Wvt,Item:Hvt},QP=["1d","5d","1m","6m","ytd","1y","5y","max"],zvt={"1d":ee({id:"+7PjfVlUMl",defaultMessage:"1 day"}),"5d":ee({id:"hZS2DWIcL1",defaultMessage:"5 days"}),"1m":ee({id:"p1dNdsvErg",defaultMessage:"1 month"}),"6m":ee({id:"AwuN57pzXN",defaultMessage:"6 months"}),ytd:ee({id:"zvczgisLv6",defaultMessage:"Year to date"}),"1y":ee({id:"rwIPgHMeIl",defaultMessage:"1 year"}),"3m":ee({id:"D0xe/T9tyE",defaultMessage:"3 months"}),"5y":ee({id:"dFw5uLx5ao",defaultMessage:"5 years"}),max:ee({id:"kkjl2vQekD",defaultMessage:"Max"})},I1e=QP.map(e=>({text:e.toUpperCase(),value:e})),Gvt=f.memo(function({id:t,periods:n,period:r,setPeriod:s,className:a}){const{isMobileStyle:i}=xe(),{$t:l}=Z(),c=f.useMemo(()=>n.map(d=>({text:l(zvt[d.value]),value:d.value,active:r===d.value,show:!0,type:"default",onClick:()=>{s(d.value)}})),[n,r,s,l]),u=f.useMemo(()=>n.find(d=>d.value===r),[n,r]);return i?o.jsx(H,{className:B(a,"flex items-center"),variant:"transparent",children:o.jsx(Jt,{items:c,isMobileStyle:i,children:o.jsx(Te,{text:u?.text??"",size:"tiny",variant:"noBackground",chevron:!0})})}):o.jsx(NJ.Root,{value:r,className:a,id:`${t}-periods`,onChange:d=>{s(d)},children:n.map(d=>o.jsx(NJ.Item,{value:d.value,className:"select-none bg-transparent",children:o.jsx(D,{variant:"tiny",color:r===d.value?"default":"light",className:"translate-y-px whitespace-nowrap duration-150",children:d.text})},`${d.value}`))})}),xC=new Set;async function qvt({period:e,symbols:t,headers:n,existingFailedPeriods:r=[],reason:s}){const a=QP.indexOf(e),i=[...r].filter(l=>!xC.has(l));for(const l of QP.slice(a)){if(i.includes(l)&&!xC.has(l))continue;const c=await se.GET("/rest/finance/prices/{period}/{market_identifiers}",s,{params:{path:{period:l,market_identifiers:t.join(",")}},headers:n,timeoutMs:Tn,numRetries:wn});if(c.error){xC.has(l)||i.push(l),ne.error("Failed to fetch FMP prices",{url:`/rest/finance/prices/${l}/${t.join(",")}`,error:c.error,status:c.response.status,statusText:c.response.statusText});continue}return xC.add(l),{...c.data.data}}return null}const R1e="stock-widget-quote-cache",P1e="stock-widget-prices-cache",DS="NVDA",Kvt=60*1e3,Yvt=5*60*1e3,Qvt=60*1e3,Xvt=30*1e3,Zvt=5*60*1e3,Jvt=60*1e3,ext=150,jJ=50,txt=24*60*60*1e3,nxt=.1,rxt=10,sxt=5;function axt(e){try{const t=Re.getItem(`${R1e}-${e}`);if(t){const n=JSON.parse(t);if(Date.now()-n.timestamp<Kvt)return n.data}}catch{}return null}function oxt(e,t){try{const n={symbol:e,data:t,timestamp:Date.now()};Re.setItem(`${R1e}-${e}`,JSON.stringify(n))}catch{}}function ixt(e,t){try{const n=Re.getItem(`${P1e}-${e}-${t}`);if(n){const r=JSON.parse(n);if(Date.now()-r.timestamp<Yvt)return r.data}}catch{}return null}function lxt(e,t,n){try{const r={symbol:e,period:t,data:n,timestamp:Date.now()};Re.setItem(`${P1e}-${e}-${t}`,JSON.stringify(r))}catch{}}function cxt(e="widget",t="default"){if(e!=="widget")return{version:1,symbol:DS};const n=$y("STOCK",t);return n?{version:1,symbol:n.symbol??DS}:{version:1,symbol:DS}}function uxt(e,t="widget",n="default"){t==="widget"&&Km("STOCK",n,{version:1,symbol:e.symbol})}function dxt(e="default",t="widget"){const n=cxt(t,e),[r,s]=f.useState(n),a="stock-widget",{data:i}=EU({watchlistType:"FINANCE",reason:a}),l=r.symbol||i?.[0]?.identifier||DS,c=axt(l),u=ixt(l,"1d"),{data:d,isLoading:m}=We({queryKey:["finance/quote",l],queryFn:async()=>{const E=await Td({symbol:l,withHistory:!0,historyPeriod:"1d",historyOffset:0});return E&&oxt(l,E),E},refetchInterval:Qvt,staleTime:Xvt,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,enabled:!0,placeholderData:c}),{data:p,isLoading:h}=We({queryKey:["finance/prices",l,"1d"],queryFn:async()=>{const E=await qvt({period:"1d",symbols:[l],reason:"stock-widget"});return E&&lxt(l,"1d",E),E},refetchInterval:Zvt,staleTime:Jvt,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,enabled:!0,placeholderData:u}),g=d||c,y=p||u,v=!!(d&&p),x={symbol:l,price:"---.--",changesPercentage:"--%",change:"--$",exchange:"--",currency:"USD"},b={history:{prices:[{symbol:l,entries:Array.from({length:jJ},(E,M)=>({date:new Date(Date.now()-(jJ-1-M)*txt).toISOString(),price:ext+Math.sin(M*nxt)*rxt+Math.random()*sxt})),exchange:"--",currency:"USD"}]}},_=g||x,w=y||b,C=f.useMemo(()=>w?.history?.prices?w.history.prices.map(E=>({symbol:E.symbol,entries:E.entries.map(M=>({date:M.date,price:M.price})).sort((M,k)=>new Date(M.date).getTime()-new Date(k.date).getTime()),exchange:E.exchange||_?.exchange||"",currency:E.currency||_?.currency||"USD"})):[],[w,_]),S=f.useCallback(E=>{s(E),uxt(E,t,e)},[s,t,e]);return f.useMemo(()=>({symbol:l,quote:_,prices:C,isLoading:m||h,hasError:!1,hasRealData:v,stockSettings:r,updateStockSettings:S}),[l,_,C,m,h,v,r,S])}const H3=I.memo(({symbol:e,src:t,srcDark:n,className:r,size:s="lg"})=>{n=n??t;const[a,i]=f.useState(!1),l=f.useRef(null),{colorScheme:c}=Wr(),u=()=>{l.current&&l.current.naturalHeight>0&&i(!1)};f.useEffect(()=>{l.current&&(l.current.complete&&l.current.naturalHeight===0?i(!0):i(!1))},[l]),f.useEffect(()=>{i(!1)},[e]);const d=c==="dark"?n:t;return o.jsx("div",{className:B({"size-lg":s==="lg","size-md":s==="md","size-sm":s==="sm"},"flex shrink-0 items-center justify-center",r),children:a||!d?o.jsx(fxt,{symbol:e}):o.jsx("img",{ref:l,src:d,alt:e,className:"rounded-[4px] object-contain",onError:()=>{i(!0)},onLoad:u},e)})});H3.displayName="FinanceAssetLogo";const fxt=({symbol:e})=>{const t=f.useMemo(()=>e.replace(/[^a-zA-Z0-9]/g,"").slice(0,1).toUpperCase()||"#",[e]);return o.jsx(H,{variant:"subtle",className:"flex size-full items-center justify-center rounded-full",children:o.jsx(D,{color:"light",children:o.jsx("span",{className:"font-mono opacity-70",children:t})})})},mxt=10,pxt=e=>{const{isSelected:t}=e;return o.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:o.jsx(Te,{icon:t?Sr:ar,size:"small",pill:!0})})},hxt=({onClear:e})=>o.jsx(Te,{icon:Rt,size:"tiny",pill:!0,onClick:e}),O1e=I.memo(({onClose:e,onSelectStock:t,currentSymbol:n})=>{const{isMobileUserAgent:r}=xe(),s="stock-settings-modal",{$t:a}=Z(),i=ht(),l=f.useRef(null),[c,u]=f.useState(n),[d,m]=f.useState(ue),[p,h]=f.useState(-1),[g,y]=f.useState(!1),v=f.useCallback(()=>{e(),m(ue)},[e]),x=f.useCallback(async L=>{if(L.trim().length===0){m(ue);return}const N=to().erp;try{const j=(await i.fetchQuery({queryKey:["watchlist","FINANCE",L],queryFn:()=>Hye({query:L,watchlistType:"FINANCE",limit:mxt,cometRenderPlace:N,reason:s}),staleTime:3600})).map(F=>({query:F.title,title:F.title,image:F.image_url??void 0,imageDark:F.image_url_dark??void 0,description:F.description,identifier:F.identifier,category:F.category??void 0,subscribed:F.subscribed}));m(j)}catch{m(ue)}},[i,s]),b=$s(x,250,{leading:!0,trailing:!0}),_=f.useCallback(L=>{b(L)},[b]),w=f.useCallback(()=>{y(!0),_(c)},[c,_]),C=f.useCallback(()=>{y(!1)},[]),S=f.useCallback(L=>{u(L),_(L)},[_]),E=()=>{u(""),m([])},M=f.useCallback(L=>{t(L.identifier??"AAPL"),m(ue),u(L.identifier??"AAPL")},[t]),k=f.useCallback((L,P)=>{M(L)},[M]),A=B("h-10 rounded-md p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":g&&d.length>0}),R=f.useMemo(()=>({image:L,alt:P})=>o.jsx("div",{className:"mr-3 flex size-6 items-center justify-center overflow-hidden rounded",children:o.jsx(H3,{src:L??"",symbol:P??"",size:"lg"})}),[]);f.useEffect(()=>{c||_("")},[c,_]);const O=f.useMemo(()=>({RightIconComponent:pxt,LeftIconComponent:R}),[R]);return o.jsx(ku,{onClose:v,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsx(D,{variant:"entry-title-300",children:a({defaultMessage:"Select Stock",id:"0MrUZjeA/m"})}),o.jsx(Iy,{isOpen:g&&d.length>0,suggestedQueries:d,focusedIndex:p,setFocusedIndex:h,handlePasteQuery:kn,handleSubmit:k,value:c,components:O,dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full max-h-[250px] overflow-y-auto",dropdownType:"select",popoverClassName:"dark:!border-none",children:o.jsx(Pr,{onFocus:w,onBlur:C,className:A,pill:!1,ref:l,isMobileUserAgent:r,placeholder:a({defaultMessage:"Search stocks (e.g., AAPL, TSLA, MSFT)...",id:"TMRxNvCkDS"}),value:c,onChange:S,ClearIcon:hxt,...c.length>0?{onClear:E}:{}})}),o.jsx("div",{className:"mt-sm flex flex-row justify-end",children:o.jsx(he,{variant:"primary",size:"small",onClick:v,text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})});O1e.displayName="StockSettingsModal";var XP=Math.PI,ZP=2*XP,jf=1e-6,gxt=ZP-jf;function JP(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function zo(){return new JP}JP.prototype=zo.prototype={constructor:JP,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,s,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+s)+","+(this._y1=+a)},arcTo:function(e,t,n,r,s){e=+e,t=+t,n=+n,r=+r,s=+s;var a=this._x1,i=this._y1,l=n-e,c=r-t,u=a-e,d=i-t,m=u*u+d*d;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(m>jf)if(!(Math.abs(d*l-c*u)>jf)||!s)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var p=n-a,h=r-i,g=l*l+c*c,y=p*p+h*h,v=Math.sqrt(g),x=Math.sqrt(m),b=s*Math.tan((XP-Math.acos((g+m-y)/(2*v*x)))/2),_=b/x,w=b/v;Math.abs(_-1)>jf&&(this._+="L"+(e+_*u)+","+(t+_*d)),this._+="A"+s+","+s+",0,0,"+ +(d*p>u*h)+","+(this._x1=e+w*l)+","+(this._y1=t+w*c)}},arc:function(e,t,n,r,s,a){e=+e,t=+t,n=+n,a=!!a;var i=n*Math.cos(r),l=n*Math.sin(r),c=e+i,u=t+l,d=1^a,m=a?r-s:s-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+u:(Math.abs(this._x1-c)>jf||Math.abs(this._y1-u)>jf)&&(this._+="L"+c+","+u),n&&(m<0&&(m=m%ZP+ZP),m>gxt?this._+="A"+n+","+n+",0,1,"+d+","+(e-i)+","+(t-l)+"A"+n+","+n+",0,1,"+d+","+(this._x1=c)+","+(this._y1=u):m>jf&&(this._+="A"+n+","+n+",0,"+ +(m>=XP)+","+d+","+(this._x1=e+n*Math.cos(s))+","+(this._y1=t+n*Math.sin(s))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Mn(e){return function(){return e}}var AJ=Math.abs,qs=Math.atan2,Cf=Math.cos,yxt=Math.max,eA=Math.min,ul=Math.sin,uh=Math.sqrt,Va=1e-12,E1=Math.PI,xE=E1/2,FS=2*E1;function vxt(e){return e>1?0:e<-1?E1:Math.acos(e)}function IJ(e){return e>=1?xE:e<=-1?-xE:Math.asin(e)}function xxt(e){return e.innerRadius}function bxt(e){return e.outerRadius}function _xt(e){return e.startAngle}function wxt(e){return e.endAngle}function Cxt(e){return e&&e.padAngle}function Sxt(e,t,n,r,s,a,i,l){var c=n-e,u=r-t,d=i-s,m=l-a,p=m*c-d*u;if(!(p*p<Va))return p=(d*(t-a)-m*(e-s))/p,[e+p*c,t+p*u]}function bC(e,t,n,r,s,a,i){var l=e-n,c=t-r,u=(i?a:-a)/uh(l*l+c*c),d=u*c,m=-u*l,p=e+d,h=t+m,g=n+d,y=r+m,v=(p+g)/2,x=(h+y)/2,b=g-p,_=y-h,w=b*b+_*_,C=s-a,S=p*y-g*h,E=(_<0?-1:1)*uh(yxt(0,C*C*w-S*S)),M=(S*_-b*E)/w,k=(-S*b-_*E)/w,A=(S*_+b*E)/w,R=(-S*b+_*E)/w,O=M-v,L=k-x,P=A-v,N=R-x;return O*O+L*L>P*P+N*N&&(M=A,k=R),{cx:M,cy:k,x01:-d,y01:-m,x11:M*(s/C-1),y11:k*(s/C-1)}}function Ext(){var e=xxt,t=bxt,n=Mn(0),r=null,s=_xt,a=wxt,i=Cxt,l=null;function c(){var u,d,m=+e.apply(this,arguments),p=+t.apply(this,arguments),h=s.apply(this,arguments)-xE,g=a.apply(this,arguments)-xE,y=AJ(g-h),v=g>h;if(l||(l=u=zo()),p<m&&(d=p,p=m,m=d),!(p>Va))l.moveTo(0,0);else if(y>FS-Va)l.moveTo(p*Cf(h),p*ul(h)),l.arc(0,0,p,h,g,!v),m>Va&&(l.moveTo(m*Cf(g),m*ul(g)),l.arc(0,0,m,g,h,v));else{var x=h,b=g,_=h,w=g,C=y,S=y,E=i.apply(this,arguments)/2,M=E>Va&&(r?+r.apply(this,arguments):uh(m*m+p*p)),k=eA(AJ(p-m)/2,+n.apply(this,arguments)),A=k,R=k,O,L;if(M>Va){var P=IJ(M/m*ul(E)),N=IJ(M/p*ul(E));(C-=P*2)>Va?(P*=v?1:-1,_+=P,w-=P):(C=0,_=w=(h+g)/2),(S-=N*2)>Va?(N*=v?1:-1,x+=N,b-=N):(S=0,x=b=(h+g)/2)}var T=p*Cf(x),j=p*ul(x),F=m*Cf(w),U=m*ul(w);if(k>Va){var V=p*Cf(b),$=p*ul(b),z=m*Cf(_),Q=m*ul(_),Y;if(y<E1&&(Y=Sxt(T,j,z,Q,V,$,F,U))){var W=T-Y[0],X=j-Y[1],G=V-Y[0],J=$-Y[1],q=1/ul(vxt((W*G+X*J)/(uh(W*W+X*X)*uh(G*G+J*J)))/2),te=uh(Y[0]*Y[0]+Y[1]*Y[1]);A=eA(k,(m-te)/(q-1)),R=eA(k,(p-te)/(q+1))}}S>Va?R>Va?(O=bC(z,Q,T,j,p,R,v),L=bC(V,$,F,U,p,R,v),l.moveTo(O.cx+O.x01,O.cy+O.y01),R<k?l.arc(O.cx,O.cy,R,qs(O.y01,O.x01),qs(L.y01,L.x01),!v):(l.arc(O.cx,O.cy,R,qs(O.y01,O.x01),qs(O.y11,O.x11),!v),l.arc(0,0,p,qs(O.cy+O.y11,O.cx+O.x11),qs(L.cy+L.y11,L.cx+L.x11),!v),l.arc(L.cx,L.cy,R,qs(L.y11,L.x11),qs(L.y01,L.x01),!v))):(l.moveTo(T,j),l.arc(0,0,p,x,b,!v)):l.moveTo(T,j),!(m>Va)||!(C>Va)?l.lineTo(F,U):A>Va?(O=bC(F,U,V,$,m,-A,v),L=bC(T,j,z,Q,m,-A,v),l.lineTo(O.cx+O.x01,O.cy+O.y01),A<k?l.arc(O.cx,O.cy,A,qs(O.y01,O.x01),qs(L.y01,L.x01),!v):(l.arc(O.cx,O.cy,A,qs(O.y01,O.x01),qs(O.y11,O.x11),!v),l.arc(0,0,m,qs(O.cy+O.y11,O.cx+O.x11),qs(L.cy+L.y11,L.cx+L.x11),v),l.arc(L.cx,L.cy,A,qs(L.y11,L.x11),qs(L.y01,L.x01),!v))):l.arc(0,0,m,w,_,v)}if(l.closePath(),u)return l=null,u+""||null}return c.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+s.apply(this,arguments)+ +a.apply(this,arguments))/2-E1/2;return[Cf(d)*u,ul(d)*u]},c.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:Mn(+u),c):e},c.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:Mn(+u),c):t},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:Mn(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:Mn(+u),c):r},c.startAngle=function(u){return arguments.length?(s=typeof u=="function"?u:Mn(+u),c):s},c.endAngle=function(u){return arguments.length?(a=typeof u=="function"?u:Mn(+u),c):a},c.padAngle=function(u){return arguments.length?(i=typeof u=="function"?u:Mn(+u),c):i},c.context=function(u){return arguments.length?(l=u??null,c):l},c}function L1e(e){this._context=e}L1e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Em(e){return new L1e(e)}function hB(e){return e[0]}function gB(e){return e[1]}function yB(){var e=hB,t=gB,n=Mn(!0),r=null,s=Em,a=null;function i(l){var c,u=l.length,d,m=!1,p;for(r==null&&(a=s(p=zo())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+e(d,c,l),+t(d,c,l));if(p)return a=null,p+""||null}return i.x=function(l){return arguments.length?(e=typeof l=="function"?l:Mn(+l),i):e},i.y=function(l){return arguments.length?(t=typeof l=="function"?l:Mn(+l),i):t},i.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Mn(!!l),i):n},i.curve=function(l){return arguments.length?(s=l,r!=null&&(a=s(r)),i):s},i.context=function(l){return arguments.length?(l==null?r=a=null:a=s(r=l),i):r},i}function Mxt(){var e=hB,t=null,n=Mn(0),r=gB,s=Mn(!0),a=null,i=Em,l=null;function c(d){var m,p,h,g=d.length,y,v=!1,x,b=new Array(g),_=new Array(g);for(a==null&&(l=i(x=zo())),m=0;m<=g;++m){if(!(m<g&&s(y=d[m],m,d))===v)if(v=!v)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),h=m-1;h>=p;--h)l.point(b[h],_[h]);l.lineEnd(),l.areaEnd()}v&&(b[m]=+e(y,m,d),_[m]=+n(y,m,d),l.point(t?+t(y,m,d):b[m],r?+r(y,m,d):_[m]))}if(x)return l=null,x+""||null}function u(){return yB().defined(s).curve(i).context(a)}return c.x=function(d){return arguments.length?(e=typeof d=="function"?d:Mn(+d),t=null,c):e},c.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Mn(+d),c):e},c.x1=function(d){return arguments.length?(t=d==null?null:typeof d=="function"?d:Mn(+d),c):t},c.y=function(d){return arguments.length?(n=typeof d=="function"?d:Mn(+d),r=null,c):n},c.y0=function(d){return arguments.length?(n=typeof d=="function"?d:Mn(+d),c):n},c.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Mn(+d),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(n)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(t).y(n)},c.defined=function(d){return arguments.length?(s=typeof d=="function"?d:Mn(!!d),c):s},c.curve=function(d){return arguments.length?(i=d,a!=null&&(l=i(a)),c):i},c.context=function(d){return arguments.length?(d==null?a=l=null:l=i(a=d),c):a},c}function kxt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Txt(e){return e}function Nxt(){var e=Txt,t=kxt,n=null,r=Mn(0),s=Mn(FS),a=Mn(0);function i(l){var c,u=l.length,d,m,p=0,h=new Array(u),g=new Array(u),y=+r.apply(this,arguments),v=Math.min(FS,Math.max(-FS,s.apply(this,arguments)-y)),x,b=Math.min(Math.abs(v)/u,a.apply(this,arguments)),_=b*(v<0?-1:1),w;for(c=0;c<u;++c)(w=g[h[c]=c]=+e(l[c],c,l))>0&&(p+=w);for(t!=null?h.sort(function(C,S){return t(g[C],g[S])}):n!=null&&h.sort(function(C,S){return n(l[C],l[S])}),c=0,m=p?(v-u*_)/p:0;c<u;++c,y=x)d=h[c],w=g[d],x=y+(w>0?w*m:0)+_,g[d]={data:l[d],index:c,value:w,startAngle:y,endAngle:x,padAngle:b};return g}return i.value=function(l){return arguments.length?(e=typeof l=="function"?l:Mn(+l),i):e},i.sortValues=function(l){return arguments.length?(t=l,n=null,i):t},i.sort=function(l){return arguments.length?(n=l,t=null,i):n},i.startAngle=function(l){return arguments.length?(r=typeof l=="function"?l:Mn(+l),i):r},i.endAngle=function(l){return arguments.length?(s=typeof l=="function"?l:Mn(+l),i):s},i.padAngle=function(l){return arguments.length?(a=typeof l=="function"?l:Mn(+l),i):a},i}var jxt=F1e(Em);function D1e(e){this._curve=e}D1e.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function F1e(e){function t(n){return new D1e(e(n))}return t._curve=e,t}function Axt(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t(F1e(n)):t()._curve},e}function Ixt(){return Axt(yB().curve(jxt))}function _C(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}var e8=Array.prototype.slice;function Rxt(e){return e.source}function Pxt(e){return e.target}function vB(e){var t=Rxt,n=Pxt,r=hB,s=gB,a=null;function i(){var l,c=e8.call(arguments),u=t.apply(this,c),d=n.apply(this,c);if(a||(a=l=zo()),e(a,+r.apply(this,(c[0]=u,c)),+s.apply(this,c),+r.apply(this,(c[0]=d,c)),+s.apply(this,c)),l)return a=null,l+""||null}return i.source=function(l){return arguments.length?(t=l,i):t},i.target=function(l){return arguments.length?(n=l,i):n},i.x=function(l){return arguments.length?(r=typeof l=="function"?l:Mn(+l),i):r},i.y=function(l){return arguments.length?(s=typeof l=="function"?l:Mn(+l),i):s},i.context=function(l){return arguments.length?(a=l??null,i):a},i}function Oxt(e,t,n,r,s){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,s,r,s)}function Lxt(e,t,n,r,s){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+s)/2,r,n,r,s)}function Dxt(e,t,n,r,s){var a=_C(t,n),i=_C(t,n=(n+s)/2),l=_C(r,n),c=_C(r,s);e.moveTo(a[0],a[1]),e.bezierCurveTo(i[0],i[1],l[0],l[1],c[0],c[1])}function Fxt(){return vB(Oxt)}function Uxt(){return vB(Lxt)}function Bxt(){var e=vB(Dxt);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}function RJ(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function U1e(e){this._context=e}U1e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:RJ(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:RJ(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Vxt(e){return new U1e(e)}function PJ(e){return e<0?-1:1}function OJ(e,t,n){var r=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(r||s<0&&-0),i=(n-e._y1)/(s||r<0&&-0),l=(a*s+i*r)/(r+s);return(PJ(a)+PJ(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(l))||0}function LJ(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function tA(e,t,n){var r=e._x0,s=e._y0,a=e._x1,i=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,s+l*t,a-l,i-l*n,a,i)}function bE(e){this._context=e}bE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tA(this,this._t0,LJ(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,tA(this,LJ(this,n=OJ(this,e,t)),n);break;default:tA(this,this._t0,n=OJ(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};Object.create(bE.prototype).point=function(e,t){bE.prototype.point.call(this,t,e)};function $xt(e){return new bE(e)}function B1e(e){this._context=e}B1e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=DJ(e),s=DJ(t),a=0,i=1;i<n;++a,++i)this._context.bezierCurveTo(r[0][a],s[0][a],r[1][a],s[1][a],e[i],t[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function DJ(e){var t,n=e.length-1,r,s=new Array(n),a=new Array(n),i=new Array(n);for(s[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,a[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=s[t]/a[t-1],a[t]-=r,i[t]-=r*i[t-1];for(s[n-1]=i[n-1]/a[n-1],t=n-2;t>=0;--t)s[t]=(i[t]-s[t+1])/a[t];for(a[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function Wxt(e){return new B1e(e)}function hg(e,t){if((i=e.length)>1)for(var n=1,r,s,a=e[t[0]],i,l=a.length;n<i;++n)for(s=a,a=e[t[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function gg(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Hxt(e,t){return e[t]}function xB(){var e=Mn([]),t=gg,n=hg,r=Hxt;function s(a){var i=e.apply(this,arguments),l,c=a.length,u=i.length,d=new Array(u),m;for(l=0;l<u;++l){for(var p=i[l],h=d[l]=new Array(c),g=0,y;g<c;++g)h[g]=y=[0,+r(a[g],p,g,a)],y.data=a[g];h.key=p}for(l=0,m=t(d);l<u;++l)d[m[l]].index=l;return n(d,m),d}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Mn(e8.call(a)),s):e},s.value=function(a){return arguments.length?(r=typeof a=="function"?a:Mn(+a),s):r},s.order=function(a){return arguments.length?(t=a==null?gg:typeof a=="function"?a:Mn(e8.call(a)),s):t},s.offset=function(a){return arguments.length?(n=a??hg,s):n},s}function zxt(e,t){if((r=e.length)>0){for(var n,r,s=0,a=e[0].length,i;s<a;++s){for(i=n=0;n<r;++n)i+=e[n][s][1]||0;if(i)for(n=0;n<r;++n)e[n][s][1]/=i}hg(e,t)}}function Gxt(e,t){if((c=e.length)>0)for(var n,r=0,s,a,i,l,c,u=e[t[0]].length;r<u;++r)for(i=l=0,n=0;n<c;++n)(a=(s=e[t[n]][r])[1]-s[0])>0?(s[0]=i,s[1]=i+=a):a<0?(s[1]=l,s[0]=l+=a):(s[0]=0,s[1]=a)}function qxt(e,t){if((s=e.length)>0){for(var n=0,r=e[t[0]],s,a=r.length;n<a;++n){for(var i=0,l=0;i<s;++i)l+=e[i][n][1]||0;r[n][1]+=r[n][0]=-l/2}hg(e,t)}}function Kxt(e,t){if(!(!((i=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var n=0,r=1,s,a,i;r<a;++r){for(var l=0,c=0,u=0;l<i;++l){for(var d=e[t[l]],m=d[r][1]||0,p=d[r-1][1]||0,h=(m-p)/2,g=0;g<l;++g){var y=e[t[g]],v=y[r][1]||0,x=y[r-1][1]||0;h+=v-x}c+=m,u+=h*m}s[r-1][1]+=s[r-1][0]=n,c&&(n-=u/c)}s[r-1][1]+=s[r-1][0]=n,hg(e,t)}}function Yxt(e){var t=e.map(Qxt);return gg(e).sort(function(n,r){return t[n]-t[r]})}function Qxt(e){for(var t=-1,n=0,r=e.length,s,a=-1/0;++t<r;)(s=+e[t][1])>a&&(a=s,n=t);return n}function V1e(e){var t=e.map($1e);return gg(e).sort(function(n,r){return t[n]-t[r]})}function $1e(e){for(var t=0,n=-1,r=e.length,s;++n<r;)(s=+e[n][1])&&(t+=s);return t}function Xxt(e){return V1e(e).reverse()}function Zxt(e){var t=e.length,n,r,s=e.map($1e),a=Yxt(e),i=0,l=0,c=[],u=[];for(n=0;n<t;++n)r=a[n],i<l?(i+=s[r],c.push(r)):(l+=s[r],u.push(r));return u.reverse().concat(c)}function Jxt(e){return gg(e).reverse()}var e1t=["children","id","from","to","x1","y1","x2","y2","fromOffset","fromOpacity","toOffset","toOpacity","rotate","transform","vertical"];function t8(){return t8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t8.apply(this,arguments)}function t1t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function z3(e){var t=e.children,n=e.id,r=e.from,s=e.to,a=e.x1,i=e.y1,l=e.x2,c=e.y2,u=e.fromOffset,d=u===void 0?"0%":u,m=e.fromOpacity,p=m===void 0?1:m,h=e.toOffset,g=h===void 0?"100%":h,y=e.toOpacity,v=y===void 0?1:y,x=e.rotate,b=e.transform,_=e.vertical,w=_===void 0?!0:_,C=t1t(e,e1t),S=a,E=l,M=i,k=c;return w&&!S&&!E&&!M&&!k&&(S="0",E="0",M="0",k="1"),I.createElement("defs",null,I.createElement("linearGradient",t8({id:n,x1:S,y1:M,x2:E,y2:k,gradientTransform:x?"rotate("+x+")":b},C),!!t&&t,!t&&I.createElement("stop",{offset:d,stopColor:r,stopOpacity:p}),!t&&I.createElement("stop",{offset:g,stopColor:s,stopOpacity:v})))}z3.propTypes={id:Le.string.isRequired,from:Le.string,to:Le.string,x1:Le.oneOfType([Le.string,Le.number]),x2:Le.oneOfType([Le.string,Le.number]),y1:Le.oneOfType([Le.string,Le.number]),y2:Le.oneOfType([Le.string,Le.number]),fromOffset:Le.oneOfType([Le.string,Le.number]),fromOpacity:Le.oneOfType([Le.string,Le.number]),toOffset:Le.oneOfType([Le.string,Le.number]),toOpacity:Le.oneOfType([Le.string,Le.number]),rotate:Le.oneOfType([Le.string,Le.number]),transform:Le.string,children:Le.node,vertical:Le.bool};function rx(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function n1t(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function G3(e){let t,n,r;e.length!==2?(t=rx,n=(l,c)=>rx(e(l),c),r=(l,c)=>e(l)-c):(t=e===rx||e===n1t?e:r1t,n=e,r=e);function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const m=u+d>>>1;n(l[m],c)<0?u=m+1:d=m}while(u<d)}return u}function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const m=u+d>>>1;n(l[m],c)<=0?u=m+1:d=m}while(u<d)}return u}function i(l,c,u=0,d=l.length){const m=s(l,c,u,d-1);return m>u&&r(l[m-1],c)>-r(l[m],c)?m-1:m}return{left:s,center:i,right:a}}function r1t(){return 0}function W1e(e){return e===null?NaN:+e}const s1t=G3(rx),Wy=s1t.right;G3(W1e).center;function Ja(e,t){let n,r;if(t===void 0)for(const s of e)s!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class FJ extends Map{constructor(t,n=i1t){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,s]of t)this.set(r,s)}get(t){return super.get(UJ(this,t))}has(t){return super.has(UJ(this,t))}set(t,n){return super.set(a1t(this,t),n)}delete(t){return super.delete(o1t(this,t))}}function UJ({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function a1t({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function o1t({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function i1t(e){return e!==null&&typeof e=="object"?e.valueOf():e}var n8=Math.sqrt(50),r8=Math.sqrt(10),s8=Math.sqrt(2);function a8(e,t,n){var r,s=-1,a,i,l;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(l=H1e(e,t,n))===0||!isFinite(l))return[];if(l>0){let c=Math.round(e/l),u=Math.round(t/l);for(c*l<e&&++c,u*l>t&&--u,i=new Array(a=u-c+1);++s<a;)i[s]=(c+s)*l}else{l=-l;let c=Math.round(e*l),u=Math.round(t*l);for(c/l<e&&++c,u/l>t&&--u,i=new Array(a=u-c+1);++s<a;)i[s]=(c+s)/l}return r&&i.reverse(),i}function H1e(e,t,n){var r=(t-e)/Math.max(0,n),s=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,s);return s>=0?(a>=n8?10:a>=r8?5:a>=s8?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(a>=n8?10:a>=r8?5:a>=s8?2:1)}function o8(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/s;return a>=n8?s*=10:a>=r8?s*=5:a>=s8&&(s*=2),t<e?-s:s}function l1t(e,t,n=W1e){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,s=(r-1)*t,a=Math.floor(s),i=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return i+(l-i)*(s-a)}}function c1t(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(s);++r<s;)a[r]=e+r*n;return a}function yi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const BJ=Symbol("implicit");function bB(){var e=new FJ,t=[],n=[],r=BJ;function s(a){let i=e.get(a);if(i===void 0){if(r!==BJ)return r;e.set(a,i=t.push(a)-1)}return n[i%n.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new FJ;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return bB(t,n).unknown(r)},yi.apply(s,arguments),s}function _B(){var e=bB().unknown(void 0),t=e.domain,n=e.range,r=0,s=1,a,i,l=!1,c=0,u=0,d=.5;delete e.unknown;function m(){var p=t().length,h=s<r,g=h?s:r,y=h?r:s;a=(y-g)/Math.max(1,p-c+u*2),l&&(a=Math.floor(a)),g+=(y-g-a*(p-c))*d,i=a*(1-c),l&&(g=Math.round(g),i=Math.round(i));var v=c1t(p).map(function(x){return g+a*x});return n(h?v.reverse():v)}return e.domain=function(p){return arguments.length?(t(p),m()):t()},e.range=function(p){return arguments.length?([r,s]=p,r=+r,s=+s,m()):[r,s]},e.rangeRound=function(p){return[r,s]=p,r=+r,s=+s,l=!0,m()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(p){return arguments.length?(l=!!p,m()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),m()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),m()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,m()):u},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),m()):d},e.copy=function(){return _B(t(),[r,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},yi.apply(m(),arguments)}function z1e(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return z1e(t())},e}function u1t(){return z1e(_B.apply(null,arguments).paddingInner(1))}function Hy(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function d_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Yd(){}var Mm=.7,yg=1/Mm,Rh="\\s*([+-]?\\d+)\\s*",M1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ol="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",d1t=/^#([0-9a-f]{3,8})$/,f1t=new RegExp(`^rgb\\(${Rh},${Rh},${Rh}\\)$`),m1t=new RegExp(`^rgb\\(${Ol},${Ol},${Ol}\\)$`),p1t=new RegExp(`^rgba\\(${Rh},${Rh},${Rh},${M1}\\)$`),h1t=new RegExp(`^rgba\\(${Ol},${Ol},${Ol},${M1}\\)$`),g1t=new RegExp(`^hsl\\(${M1},${Ol},${Ol}\\)$`),y1t=new RegExp(`^hsla\\(${M1},${Ol},${Ol},${M1}\\)$`),VJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hy(Yd,k1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$J,formatHex:$J,formatHex8:v1t,formatHsl:x1t,formatRgb:WJ,toString:WJ});function $J(){return this.rgb().formatHex()}function v1t(){return this.rgb().formatHex8()}function x1t(){return G1e(this).formatHsl()}function WJ(){return this.rgb().formatRgb()}function k1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=d1t.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?HJ(t):n===3?new Cs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?wC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?wC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=f1t.exec(e))?new Cs(t[1],t[2],t[3],1):(t=m1t.exec(e))?new Cs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=p1t.exec(e))?wC(t[1],t[2],t[3],t[4]):(t=h1t.exec(e))?wC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=g1t.exec(e))?qJ(t[1],t[2]/100,t[3]/100,1):(t=y1t.exec(e))?qJ(t[1],t[2]/100,t[3]/100,t[4]):VJ.hasOwnProperty(e)?HJ(VJ[e]):e==="transparent"?new Cs(NaN,NaN,NaN,0):null}function HJ(e){return new Cs(e>>16&255,e>>8&255,e&255,1)}function wC(e,t,n,r){return r<=0&&(e=t=n=NaN),new Cs(e,t,n,r)}function wB(e){return e instanceof Yd||(e=k1(e)),e?(e=e.rgb(),new Cs(e.r,e.g,e.b,e.opacity)):new Cs}function i8(e,t,n,r){return arguments.length===1?wB(e):new Cs(e,t,n,r??1)}function Cs(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Hy(Cs,i8,d_(Yd,{brighter(e){return e=e==null?yg:Math.pow(yg,e),new Cs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Mm:Math.pow(Mm,e),new Cs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Cs(tm(this.r),tm(this.g),tm(this.b),_E(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zJ,formatHex:zJ,formatHex8:b1t,formatRgb:GJ,toString:GJ}));function zJ(){return`#${$f(this.r)}${$f(this.g)}${$f(this.b)}`}function b1t(){return`#${$f(this.r)}${$f(this.g)}${$f(this.b)}${$f((isNaN(this.opacity)?1:this.opacity)*255)}`}function GJ(){const e=_E(this.opacity);return`${e===1?"rgb(":"rgba("}${tm(this.r)}, ${tm(this.g)}, ${tm(this.b)}${e===1?")":`, ${e})`}`}function _E(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function tm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $f(e){return e=tm(e),(e<16?"0":"")+e.toString(16)}function qJ(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ri(e,t,n,r)}function G1e(e){if(e instanceof Ri)return new Ri(e.h,e.s,e.l,e.opacity);if(e instanceof Yd||(e=k1(e)),!e)return new Ri;if(e instanceof Ri)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,l=a-s,c=(a+s)/2;return l?(t===a?i=(n-r)/l+(n<r)*6:n===a?i=(r-t)/l+2:i=(t-n)/l+4,l/=c<.5?a+s:2-a-s,i*=60):l=c>0&&c<1?0:i,new Ri(i,l,c,e.opacity)}function l8(e,t,n,r){return arguments.length===1?G1e(e):new Ri(e,t,n,r??1)}function Ri(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Hy(Ri,l8,d_(Yd,{brighter(e){return e=e==null?yg:Math.pow(yg,e),new Ri(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Mm:Math.pow(Mm,e),new Ri(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new Cs(nA(e>=240?e-240:e+120,s,r),nA(e,s,r),nA(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new Ri(KJ(this.h),CC(this.s),CC(this.l),_E(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_E(this.opacity);return`${e===1?"hsl(":"hsla("}${KJ(this.h)}, ${CC(this.s)*100}%, ${CC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function KJ(e){return e=(e||0)%360,e<0?e+360:e}function CC(e){return Math.max(0,Math.min(1,e||0))}function nA(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const q1e=Math.PI/180,K1e=180/Math.PI,wE=18,Y1e=.96422,Q1e=1,X1e=.82521,Z1e=4/29,Ph=6/29,J1e=3*Ph*Ph,_1t=Ph*Ph*Ph;function ebe(e){if(e instanceof Ll)return new Ll(e.l,e.a,e.b,e.opacity);if(e instanceof $c)return tbe(e);e instanceof Cs||(e=wB(e));var t=oA(e.r),n=oA(e.g),r=oA(e.b),s=rA((.2225045*t+.7168786*n+.0606169*r)/Q1e),a,i;return t===n&&n===r?a=i=s:(a=rA((.4360747*t+.3850649*n+.1430804*r)/Y1e),i=rA((.0139322*t+.0971045*n+.7141733*r)/X1e)),new Ll(116*s-16,500*(a-s),200*(s-i),e.opacity)}function c8(e,t,n,r){return arguments.length===1?ebe(e):new Ll(e,t,n,r??1)}function Ll(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Hy(Ll,c8,d_(Yd,{brighter(e){return new Ll(this.l+wE*(e??1),this.a,this.b,this.opacity)},darker(e){return new Ll(this.l-wE*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Y1e*sA(t),e=Q1e*sA(e),n=X1e*sA(n),new Cs(aA(3.1338561*t-1.6168667*e-.4906146*n),aA(-.9787684*t+1.9161415*e+.033454*n),aA(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function rA(e){return e>_1t?Math.pow(e,1/3):e/J1e+Z1e}function sA(e){return e>Ph?e*e*e:J1e*(e-Z1e)}function aA(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function oA(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function w1t(e){if(e instanceof $c)return new $c(e.h,e.c,e.l,e.opacity);if(e instanceof Ll||(e=ebe(e)),e.a===0&&e.b===0)return new $c(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*K1e;return new $c(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function u8(e,t,n,r){return arguments.length===1?w1t(e):new $c(e,t,n,r??1)}function $c(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function tbe(e){if(isNaN(e.h))return new Ll(e.l,0,0,e.opacity);var t=e.h*q1e;return new Ll(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Hy($c,u8,d_(Yd,{brighter(e){return new $c(this.h,this.c,this.l+wE*(e??1),this.opacity)},darker(e){return new $c(this.h,this.c,this.l-wE*(e??1),this.opacity)},rgb(){return tbe(this).rgb()}}));var nbe=-.14861,CB=1.78277,SB=-.29227,q3=-.90649,T1=1.97294,YJ=T1*q3,QJ=T1*CB,XJ=CB*SB-q3*nbe;function C1t(e){if(e instanceof nm)return new nm(e.h,e.s,e.l,e.opacity);e instanceof Cs||(e=wB(e));var t=e.r/255,n=e.g/255,r=e.b/255,s=(XJ*r+YJ*t-QJ*n)/(XJ+YJ-QJ),a=r-s,i=(T1*(n-s)-SB*a)/q3,l=Math.sqrt(i*i+a*a)/(T1*s*(1-s)),c=l?Math.atan2(i,a)*K1e-120:NaN;return new nm(c<0?c+360:c,l,s,e.opacity)}function d8(e,t,n,r){return arguments.length===1?C1t(e):new nm(e,t,n,r??1)}function nm(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Hy(nm,d8,d_(Yd,{brighter(e){return e=e==null?yg:Math.pow(yg,e),new nm(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Mm:Math.pow(Mm,e),new nm(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*q1e,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),s=Math.sin(e);return new Cs(255*(t+n*(nbe*r+CB*s)),255*(t+n*(SB*r+q3*s)),255*(t+n*(T1*r)),this.opacity)}}));const K3=e=>()=>e;function rbe(e,t){return function(n){return e+n*t}}function S1t(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function EB(e,t){var n=t-e;return n?rbe(e,n>180||n<-180?n-360*Math.round(n/360):n):K3(isNaN(e)?t:e)}function E1t(e){return(e=+e)==1?Ss:function(t,n){return n-t?S1t(t,n,e):K3(isNaN(t)?n:t)}}function Ss(e,t){var n=t-e;return n?rbe(e,n):K3(isNaN(e)?t:e)}const f8=function e(t){var n=E1t(t);function r(s,a){var i=n((s=i8(s)).r,(a=i8(a)).r),l=n(s.g,a.g),c=n(s.b,a.b),u=Ss(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return r.gamma=e,r}(1);function M1t(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(a){for(s=0;s<n;++s)r[s]=e[s]*(1-a)+t[s]*a;return r}}function k1t(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function T1t(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),a=new Array(n),i;for(i=0;i<r;++i)s[i]=MB(e[i],t[i]);for(;i<n;++i)a[i]=t[i];return function(l){for(i=0;i<r;++i)a[i]=s[i](l);return a}}function N1t(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function CE(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function j1t(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=MB(e[s],t[s]):r[s]=t[s];return function(a){for(s in n)r[s]=n[s](a);return r}}var m8=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,iA=new RegExp(m8.source,"g");function A1t(e){return function(){return e}}function I1t(e){return function(t){return e(t)+""}}function R1t(e,t){var n=m8.lastIndex=iA.lastIndex=0,r,s,a,i=-1,l=[],c=[];for(e=e+"",t=t+"";(r=m8.exec(e))&&(s=iA.exec(t));)(a=s.index)>n&&(a=t.slice(n,a),l[i]?l[i]+=a:l[++i]=a),(r=r[0])===(s=s[0])?l[i]?l[i]+=s:l[++i]=s:(l[++i]=null,c.push({i,x:CE(r,s)})),n=iA.lastIndex;return n<t.length&&(a=t.slice(n),l[i]?l[i]+=a:l[++i]=a),l.length<2?c[0]?I1t(c[0].x):A1t(t):(t=c.length,function(u){for(var d=0,m;d<t;++d)l[(m=c[d]).i]=m.x(u);return l.join("")})}function MB(e,t){var n=typeof t,r;return t==null||n==="boolean"?K3(t):(n==="number"?CE:n==="string"?(r=k1(t))?(t=r,f8):R1t:t instanceof k1?f8:t instanceof Date?N1t:k1t(t)?M1t:Array.isArray(t)?T1t:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?j1t:CE)(e,t)}function sbe(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function abe(e){return function(t,n){var r=e((t=l8(t)).h,(n=l8(n)).h),s=Ss(t.s,n.s),a=Ss(t.l,n.l),i=Ss(t.opacity,n.opacity);return function(l){return t.h=r(l),t.s=s(l),t.l=a(l),t.opacity=i(l),t+""}}}const P1t=abe(EB);var O1t=abe(Ss);function L1t(e,t){var n=Ss((e=c8(e)).l,(t=c8(t)).l),r=Ss(e.a,t.a),s=Ss(e.b,t.b),a=Ss(e.opacity,t.opacity);return function(i){return e.l=n(i),e.a=r(i),e.b=s(i),e.opacity=a(i),e+""}}function obe(e){return function(t,n){var r=e((t=u8(t)).h,(n=u8(n)).h),s=Ss(t.c,n.c),a=Ss(t.l,n.l),i=Ss(t.opacity,n.opacity);return function(l){return t.h=r(l),t.c=s(l),t.l=a(l),t.opacity=i(l),t+""}}}const D1t=obe(EB);var F1t=obe(Ss);function ibe(e){return function t(n){n=+n;function r(s,a){var i=e((s=d8(s)).h,(a=d8(a)).h),l=Ss(s.s,a.s),c=Ss(s.l,a.l),u=Ss(s.opacity,a.opacity);return function(d){return s.h=i(d),s.s=l(d),s.l=c(Math.pow(d,n)),s.opacity=u(d),s+""}}return r.gamma=t,r}(1)}const U1t=ibe(EB);var B1t=ibe(Ss);function V1t(e){return function(){return e}}function lbe(e){return+e}var ZJ=[0,1];function kl(e){return e}function p8(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:V1t(isNaN(t)?NaN:.5)}function $1t(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function W1t(e,t,n){var r=e[0],s=e[1],a=t[0],i=t[1];return s<r?(r=p8(s,r),a=n(i,a)):(r=p8(r,s),a=n(a,i)),function(l){return a(r(l))}}function H1t(e,t,n){var r=Math.min(e.length,t.length)-1,s=new Array(r),a=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)s[i]=p8(e[i],e[i+1]),a[i]=n(t[i],t[i+1]);return function(l){var c=Wy(e,l,1,r)-1;return a[c](s[c](l))}}function f_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Y3(){var e=ZJ,t=ZJ,n=MB,r,s,a,i=kl,l,c,u;function d(){var p=Math.min(e.length,t.length);return i!==kl&&(i=$1t(e[0],e[p-1])),l=p>2?H1t:W1t,c=u=null,m}function m(p){return p==null||isNaN(p=+p)?a:(c||(c=l(e.map(r),t,n)))(r(i(p)))}return m.invert=function(p){return i(s((u||(u=l(t,e.map(r),CE)))(p)))},m.domain=function(p){return arguments.length?(e=Array.from(p,lbe),d()):e.slice()},m.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},m.rangeRound=function(p){return t=Array.from(p),n=sbe,d()},m.clamp=function(p){return arguments.length?(i=p?!0:kl,d()):i!==kl},m.interpolate=function(p){return arguments.length?(n=p,d()):n},m.unknown=function(p){return arguments.length?(a=p,m):a},function(p,h){return r=p,s=h,d()}}function kB(){return Y3()(kl,kl)}function z1t(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function SE(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function vg(e){return e=SE(Math.abs(e)),e?e[1]:NaN}function G1t(e,t){return function(n,r){for(var s=n.length,a=[],i=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(n.substring(s-=l,s+l)),!((c+=l+1)>r));)l=e[i=(i+1)%e.length];return a.reverse().join(t)}}function q1t(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var K1t=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function N1(e){if(!(t=K1t.exec(e)))throw new Error("invalid format: "+e);var t;return new TB({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}N1.prototype=TB.prototype;function TB(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}TB.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Y1t(e){e:for(var t=e.length,n=1,r=-1,s;n<t;++n)switch(e[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(s+1):e}var cbe;function Q1t(e,t){var n=SE(e,t);if(!n)return e+"";var r=n[0],s=n[1],a=s-(cbe=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,i=r.length;return a===i?r:a>i?r+new Array(a-i+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+SE(e,Math.max(0,t+a-1))[0]}function JJ(e,t){var n=SE(e,t);if(!n)return e+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const eee={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:z1t,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>JJ(e*100,t),r:JJ,s:Q1t,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function tee(e){return e}var nee=Array.prototype.map,ree=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function X1t(e){var t=e.grouping===void 0||e.thousands===void 0?tee:G1t(nee.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?tee:q1t(nee.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(m){m=N1(m);var p=m.fill,h=m.align,g=m.sign,y=m.symbol,v=m.zero,x=m.width,b=m.comma,_=m.precision,w=m.trim,C=m.type;C==="n"?(b=!0,C="g"):eee[C]||(_===void 0&&(_=12),w=!0,C="g"),(v||p==="0"&&h==="=")&&(v=!0,p="0",h="=");var S=y==="$"?n:y==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",E=y==="$"?r:/[%p]/.test(C)?i:"",M=eee[C],k=/[defgprs%]/.test(C);_=_===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function A(R){var O=S,L=E,P,N,T;if(C==="c")L=M(R)+L,R="";else{R=+R;var j=R<0||1/R<0;if(R=isNaN(R)?c:M(Math.abs(R),_),w&&(R=Y1t(R)),j&&+R==0&&g!=="+"&&(j=!1),O=(j?g==="("?g:l:g==="-"||g==="("?"":g)+O,L=(C==="s"?ree[8+cbe/3]:"")+L+(j&&g==="("?")":""),k){for(P=-1,N=R.length;++P<N;)if(T=R.charCodeAt(P),48>T||T>57){L=(T===46?s+R.slice(P+1):R.slice(P))+L,R=R.slice(0,P);break}}}b&&!v&&(R=t(R,1/0));var F=O.length+R.length+L.length,U=F<x?new Array(x-F+1).join(p):"";switch(b&&v&&(R=t(U+R,U.length?x-L.length:1/0),U=""),h){case"<":R=O+R+L+U;break;case"=":R=O+U+R+L;break;case"^":R=U.slice(0,F=U.length>>1)+O+R+L+U.slice(F);break;default:R=U+O+R+L;break}return a(R)}return A.toString=function(){return m+""},A}function d(m,p){var h=u((m=N1(m),m.type="f",m)),g=Math.max(-8,Math.min(8,Math.floor(vg(p)/3)))*3,y=Math.pow(10,-g),v=ree[8+g/3];return function(x){return h(y*x)+v}}return{format:u,formatPrefix:d}}var SC,NB,ube;Z1t({thousands:",",grouping:[3],currency:["$",""]});function Z1t(e){return SC=X1t(e),NB=SC.format,ube=SC.formatPrefix,SC}function J1t(e){return Math.max(0,-vg(Math.abs(e)))}function ebt(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vg(t)/3)))*3-vg(Math.abs(e)))}function tbt(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,vg(t)-vg(e))+1}function nbt(e,t,n,r){var s=o8(e,t,n),a;switch(r=N1(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=ebt(s,i))&&(r.precision=a),ube(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=tbt(s,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=J1t(s))&&(r.precision=a-(r.type==="%")*2);break}}return NB(r)}function m_(e){var t=e.domain;return e.ticks=function(n){var r=t();return a8(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var s=t();return nbt(s[0],s[s.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),s=0,a=r.length-1,i=r[s],l=r[a],c,u,d=10;for(l<i&&(u=i,i=l,l=u,u=s,s=a,a=u);d-- >0;){if(u=H1e(i,l,n),u===c)return r[s]=i,r[a]=l,t(r);if(u>0)i=Math.floor(i/u)*u,l=Math.ceil(l/u)*u;else if(u<0)i=Math.ceil(i*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function dbe(){var e=kB();return e.copy=function(){return f_(e,dbe())},yi.apply(e,arguments),m_(e)}function fbe(e,t){e=e.slice();var n=0,r=e.length-1,s=e[n],a=e[r],i;return a<s&&(i=n,n=r,r=i,i=s,s=a,a=i),e[n]=t.floor(s),e[r]=t.ceil(a),e}function see(e){return Math.log(e)}function aee(e){return Math.exp(e)}function rbt(e){return-Math.log(-e)}function sbt(e){return-Math.exp(-e)}function abt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function obt(e){return e===10?abt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function ibt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function oee(e){return(t,n)=>-e(-t,n)}function lbt(e){const t=e(see,aee),n=t.domain;let r=10,s,a;function i(){return s=ibt(r),a=obt(r),n()[0]<0?(s=oee(s),a=oee(a),e(rbt,sbt)):e(see,aee),t}return t.base=function(l){return arguments.length?(r=+l,i()):r},t.domain=function(l){return arguments.length?(n(l),i()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const m=d<u;m&&([u,d]=[d,u]);let p=s(u),h=s(d),g,y;const v=l==null?10:+l;let x=[];if(!(r%1)&&h-p<v){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(g=1;g<r;++g)if(y=p<0?g/a(-p):g*a(p),!(y<u)){if(y>d)break;x.push(y)}}else for(;p<=h;++p)for(g=r-1;g>=1;--g)if(y=p>0?g/a(-p):g*a(p),!(y<u)){if(y>d)break;x.push(y)}x.length*2<v&&(x=a8(u,d,v))}else x=a8(p,h,Math.min(h-p,v)).map(a);return m?x.reverse():x},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=N1(c)).precision==null&&(c.trim=!0),c=NB(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return d=>{let m=d/a(Math.round(s(d)));return m*r<r-.5&&(m*=r),m<=u?c(d):""}},t.nice=()=>n(fbe(n(),{floor:l=>a(Math.floor(s(l))),ceil:l=>a(Math.ceil(s(l)))})),t}function mbe(){const e=lbt(Y3()).domain([1,10]);return e.copy=()=>f_(e,mbe()).base(e.base()),yi.apply(e,arguments),e}function iee(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function lee(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function cbt(e){var t=1,n=e(iee(t),lee(t));return n.constant=function(r){return arguments.length?e(iee(t=+r),lee(t)):t},m_(n)}function pbe(){var e=cbt(Y3());return e.copy=function(){return f_(e,pbe()).constant(e.constant())},yi.apply(e,arguments)}function cee(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ubt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function dbt(e){return e<0?-e*e:e*e}function fbt(e){var t=e(kl,kl),n=1;function r(){return n===1?e(kl,kl):n===.5?e(ubt,dbt):e(cee(n),cee(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,r()):n},m_(t)}function jB(){var e=fbt(Y3());return e.copy=function(){return f_(e,jB()).exponent(e.exponent())},yi.apply(e,arguments),e}function mbt(){return jB.apply(null,arguments).exponent(.5)}function uee(e){return Math.sign(e)*e*e}function pbt(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function hbe(){var e=kB(),t=[0,1],n=!1,r;function s(a){var i=pbt(e(a));return isNaN(i)?r:n?Math.round(i):i}return s.invert=function(a){return e.invert(uee(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,lbe)).map(uee)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(n=!!a,s):n},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return hbe(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},yi.apply(s,arguments),m_(s)}function gbe(){var e=[],t=[],n=[],r;function s(){var i=0,l=Math.max(1,t.length);for(n=new Array(l-1);++i<l;)n[i-1]=l1t(e,i/l);return a}function a(i){return i==null||isNaN(i=+i)?r:t[Wy(n,i)]}return a.invertExtent=function(i){var l=t.indexOf(i);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let l of i)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(rx),s()},a.range=function(i){return arguments.length?(t=Array.from(i),s()):t.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return gbe().domain(e).range(t).unknown(r)},yi.apply(a,arguments)}function ybe(){var e=0,t=1,n=1,r=[.5],s=[0,1],a;function i(c){return c!=null&&c<=c?s[Wy(r,c,0,n)]:a}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},i.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,l()):s.slice()},i.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},i.unknown=function(c){return arguments.length&&(a=c),i},i.thresholds=function(){return r.slice()},i.copy=function(){return ybe().domain([e,t]).range(s).unknown(a)},yi.apply(m_(i),arguments)}function vbe(){var e=[.5],t=[0,1],n,r=1;function s(a){return a!=null&&a<=a?t[Wy(e,a,0,r)]:n}return s.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return vbe().domain(e).range(t).unknown(n)},yi.apply(s,arguments)}const lA=new Date,cA=new Date;function ms(e,t,n,r){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const i=s(a),l=s.ceil(a);return a-i<l-a?i:l},s.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),s.range=(a,i,l)=>{const c=[];if(a=s.ceil(a),l=l==null?1:Math.floor(l),!(a<i)||!(l>0))return c;let u;do c.push(u=new Date(+a)),t(a,l),e(a);while(u<a&&a<i);return c},s.filter=a=>ms(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;t(i,-1),!a(i););else for(;--l>=0;)for(;t(i,1),!a(i););}),n&&(s.count=(a,i)=>(lA.setTime(+a),cA.setTime(+i),e(lA),e(cA),Math.floor(n(lA,cA))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(r?i=>r(i)%a===0:i=>s.count(0,i)%a===0):s)),s}const EE=ms(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);EE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ms(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):EE);EE.range;const Wc=1e3,oi=Wc*60,Hc=oi*60,uu=Hc*24,AB=uu*7,dee=uu*30,uA=uu*365,zc=ms(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Wc)},(e,t)=>(t-e)/Wc,e=>e.getUTCSeconds());zc.range;const Q3=ms(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wc)},(e,t)=>{e.setTime(+e+t*oi)},(e,t)=>(t-e)/oi,e=>e.getMinutes());Q3.range;const X3=ms(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*oi)},(e,t)=>(t-e)/oi,e=>e.getUTCMinutes());X3.range;const Z3=ms(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wc-e.getMinutes()*oi)},(e,t)=>{e.setTime(+e+t*Hc)},(e,t)=>(t-e)/Hc,e=>e.getHours());Z3.range;const J3=ms(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Hc)},(e,t)=>(t-e)/Hc,e=>e.getUTCHours());J3.range;const zy=ms(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*oi)/uu,e=>e.getDate()-1);zy.range;const p_=ms(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/uu,e=>e.getUTCDate()-1);p_.range;const xbe=ms(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/uu,e=>Math.floor(e/uu));xbe.range;function Qm(e){return ms(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*oi)/AB)}const h_=Qm(0),ME=Qm(1),hbt=Qm(2),gbt=Qm(3),xg=Qm(4),ybt=Qm(5),vbt=Qm(6);h_.range;ME.range;hbt.range;gbt.range;xg.range;ybt.range;vbt.range;function Xm(e){return ms(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/AB)}const g_=Xm(0),kE=Xm(1),xbt=Xm(2),bbt=Xm(3),bg=Xm(4),_bt=Xm(5),wbt=Xm(6);g_.range;kE.range;xbt.range;bbt.range;bg.range;_bt.range;wbt.range;const y_=ms(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());y_.range;const ek=ms(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ek.range;const Ki=ms(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ki.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ms(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ki.range;const Yl=ms(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Yl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ms(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Yl.range;function bbe(e,t,n,r,s,a){const i=[[zc,1,Wc],[zc,5,5*Wc],[zc,15,15*Wc],[zc,30,30*Wc],[a,1,oi],[a,5,5*oi],[a,15,15*oi],[a,30,30*oi],[s,1,Hc],[s,3,3*Hc],[s,6,6*Hc],[s,12,12*Hc],[r,1,uu],[r,2,2*uu],[n,1,AB],[t,1,dee],[t,3,3*dee],[e,1,uA]];function l(u,d,m){const p=d<u;p&&([u,d]=[d,u]);const h=m&&typeof m.range=="function"?m:c(u,d,m),g=h?h.range(u,+d+1):[];return p?g.reverse():g}function c(u,d,m){const p=Math.abs(d-u)/m,h=G3(([,,v])=>v).right(i,p);if(h===i.length)return e.every(o8(u/uA,d/uA,m));if(h===0)return EE.every(Math.max(o8(u,d,m),1));const[g,y]=i[p/i[h-1][2]<i[h][2]/p?h-1:h];return g.every(y)}return[l,c]}const[Cbt,Sbt]=bbe(Yl,ek,g_,xbe,J3,X3),[Ebt,Mbt]=bbe(Ki,y_,h_,zy,Z3,Q3);function dA(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function fA(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function z0(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function kbt(e){var t=e.dateTime,n=e.date,r=e.time,s=e.periods,a=e.days,i=e.shortDays,l=e.months,c=e.shortMonths,u=G0(s),d=q0(s),m=G0(a),p=q0(a),h=G0(i),g=q0(i),y=G0(l),v=q0(l),x=G0(c),b=q0(c),_={a:j,A:F,b:U,B:V,c:null,d:yee,e:yee,f:Qbt,g:o_t,G:l_t,H:qbt,I:Kbt,j:Ybt,L:_be,m:Xbt,M:Zbt,p:$,q:z,Q:bee,s:_ee,S:Jbt,u:e_t,U:t_t,V:n_t,w:r_t,W:s_t,x:null,X:null,y:a_t,Y:i_t,Z:c_t,"%":xee},w={a:Q,A:Y,b:W,B:X,c:null,d:vee,e:vee,f:m_t,g:C_t,G:E_t,H:u_t,I:d_t,j:f_t,L:Cbe,m:p_t,M:h_t,p:G,q:J,Q:bee,s:_ee,S:g_t,u:y_t,U:v_t,V:x_t,w:b_t,W:__t,x:null,X:null,y:w_t,Y:S_t,Z:M_t,"%":xee},C={a:A,A:R,b:O,B:L,c:P,d:hee,e:hee,f:Wbt,g:pee,G:mee,H:gee,I:gee,j:Ubt,L:$bt,m:Fbt,M:Bbt,p:k,q:Dbt,Q:zbt,s:Gbt,S:Vbt,u:Ibt,U:Rbt,V:Pbt,w:Abt,W:Obt,x:N,X:T,y:pee,Y:mee,Z:Lbt,"%":Hbt};_.x=S(n,_),_.X=S(r,_),_.c=S(t,_),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(q,te){return function(re){var ae=[],fe=-1,de=0,ve=q.length,_e,Se,be;for(re instanceof Date||(re=new Date(+re));++fe<ve;)q.charCodeAt(fe)===37&&(ae.push(q.slice(de,fe)),(Se=fee[_e=q.charAt(++fe)])!=null?_e=q.charAt(++fe):Se=_e==="e"?" ":"0",(be=te[_e])&&(_e=be(re,Se)),ae.push(_e),de=fe+1);return ae.push(q.slice(de,fe)),ae.join("")}}function E(q,te){return function(re){var ae=z0(1900,void 0,1),fe=M(ae,q,re+="",0),de,ve;if(fe!=re.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(te&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(de=fA(z0(ae.y,0,1)),ve=de.getUTCDay(),de=ve>4||ve===0?kE.ceil(de):kE(de),de=p_.offset(de,(ae.V-1)*7),ae.y=de.getUTCFullYear(),ae.m=de.getUTCMonth(),ae.d=de.getUTCDate()+(ae.w+6)%7):(de=dA(z0(ae.y,0,1)),ve=de.getDay(),de=ve>4||ve===0?ME.ceil(de):ME(de),de=zy.offset(de,(ae.V-1)*7),ae.y=de.getFullYear(),ae.m=de.getMonth(),ae.d=de.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),ve="Z"in ae?fA(z0(ae.y,0,1)).getUTCDay():dA(z0(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(ve+5)%7:ae.w+ae.U*7-(ve+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,fA(ae)):dA(ae)}}function M(q,te,re,ae){for(var fe=0,de=te.length,ve=re.length,_e,Se;fe<de;){if(ae>=ve)return-1;if(_e=te.charCodeAt(fe++),_e===37){if(_e=te.charAt(fe++),Se=C[_e in fee?te.charAt(fe++):_e],!Se||(ae=Se(q,re,ae))<0)return-1}else if(_e!=re.charCodeAt(ae++))return-1}return ae}function k(q,te,re){var ae=u.exec(te.slice(re));return ae?(q.p=d.get(ae[0].toLowerCase()),re+ae[0].length):-1}function A(q,te,re){var ae=h.exec(te.slice(re));return ae?(q.w=g.get(ae[0].toLowerCase()),re+ae[0].length):-1}function R(q,te,re){var ae=m.exec(te.slice(re));return ae?(q.w=p.get(ae[0].toLowerCase()),re+ae[0].length):-1}function O(q,te,re){var ae=x.exec(te.slice(re));return ae?(q.m=b.get(ae[0].toLowerCase()),re+ae[0].length):-1}function L(q,te,re){var ae=y.exec(te.slice(re));return ae?(q.m=v.get(ae[0].toLowerCase()),re+ae[0].length):-1}function P(q,te,re){return M(q,t,te,re)}function N(q,te,re){return M(q,n,te,re)}function T(q,te,re){return M(q,r,te,re)}function j(q){return i[q.getDay()]}function F(q){return a[q.getDay()]}function U(q){return c[q.getMonth()]}function V(q){return l[q.getMonth()]}function $(q){return s[+(q.getHours()>=12)]}function z(q){return 1+~~(q.getMonth()/3)}function Q(q){return i[q.getUTCDay()]}function Y(q){return a[q.getUTCDay()]}function W(q){return c[q.getUTCMonth()]}function X(q){return l[q.getUTCMonth()]}function G(q){return s[+(q.getUTCHours()>=12)]}function J(q){return 1+~~(q.getUTCMonth()/3)}return{format:function(q){var te=S(q+="",_);return te.toString=function(){return q},te},parse:function(q){var te=E(q+="",!1);return te.toString=function(){return q},te},utcFormat:function(q){var te=S(q+="",w);return te.toString=function(){return q},te},utcParse:function(q){var te=E(q+="",!0);return te.toString=function(){return q},te}}}var fee={"-":"",_:" ",0:"0"},ks=/^\s*\d+/,Tbt=/^%/,Nbt=/[\\^$*+?|[\]().{}]/g;function Rn(e,t,n){var r=e<0?"-":"",s=(r?-e:e)+"",a=s.length;return r+(a<n?new Array(n-a+1).join(t)+s:s)}function jbt(e){return e.replace(Nbt,"\\$&")}function G0(e){return new RegExp("^(?:"+e.map(jbt).join("|")+")","i")}function q0(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Abt(e,t,n){var r=ks.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ibt(e,t,n){var r=ks.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Rbt(e,t,n){var r=ks.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Pbt(e,t,n){var r=ks.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Obt(e,t,n){var r=ks.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function mee(e,t,n){var r=ks.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function pee(e,t,n){var r=ks.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Lbt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Dbt(e,t,n){var r=ks.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Fbt(e,t,n){var r=ks.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function hee(e,t,n){var r=ks.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Ubt(e,t,n){var r=ks.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function gee(e,t,n){var r=ks.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Bbt(e,t,n){var r=ks.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Vbt(e,t,n){var r=ks.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function $bt(e,t,n){var r=ks.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Wbt(e,t,n){var r=ks.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Hbt(e,t,n){var r=Tbt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function zbt(e,t,n){var r=ks.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Gbt(e,t,n){var r=ks.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function yee(e,t){return Rn(e.getDate(),t,2)}function qbt(e,t){return Rn(e.getHours(),t,2)}function Kbt(e,t){return Rn(e.getHours()%12||12,t,2)}function Ybt(e,t){return Rn(1+zy.count(Ki(e),e),t,3)}function _be(e,t){return Rn(e.getMilliseconds(),t,3)}function Qbt(e,t){return _be(e,t)+"000"}function Xbt(e,t){return Rn(e.getMonth()+1,t,2)}function Zbt(e,t){return Rn(e.getMinutes(),t,2)}function Jbt(e,t){return Rn(e.getSeconds(),t,2)}function e_t(e){var t=e.getDay();return t===0?7:t}function t_t(e,t){return Rn(h_.count(Ki(e)-1,e),t,2)}function wbe(e){var t=e.getDay();return t>=4||t===0?xg(e):xg.ceil(e)}function n_t(e,t){return e=wbe(e),Rn(xg.count(Ki(e),e)+(Ki(e).getDay()===4),t,2)}function r_t(e){return e.getDay()}function s_t(e,t){return Rn(ME.count(Ki(e)-1,e),t,2)}function a_t(e,t){return Rn(e.getFullYear()%100,t,2)}function o_t(e,t){return e=wbe(e),Rn(e.getFullYear()%100,t,2)}function i_t(e,t){return Rn(e.getFullYear()%1e4,t,4)}function l_t(e,t){var n=e.getDay();return e=n>=4||n===0?xg(e):xg.ceil(e),Rn(e.getFullYear()%1e4,t,4)}function c_t(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Rn(t/60|0,"0",2)+Rn(t%60,"0",2)}function vee(e,t){return Rn(e.getUTCDate(),t,2)}function u_t(e,t){return Rn(e.getUTCHours(),t,2)}function d_t(e,t){return Rn(e.getUTCHours()%12||12,t,2)}function f_t(e,t){return Rn(1+p_.count(Yl(e),e),t,3)}function Cbe(e,t){return Rn(e.getUTCMilliseconds(),t,3)}function m_t(e,t){return Cbe(e,t)+"000"}function p_t(e,t){return Rn(e.getUTCMonth()+1,t,2)}function h_t(e,t){return Rn(e.getUTCMinutes(),t,2)}function g_t(e,t){return Rn(e.getUTCSeconds(),t,2)}function y_t(e){var t=e.getUTCDay();return t===0?7:t}function v_t(e,t){return Rn(g_.count(Yl(e)-1,e),t,2)}function Sbe(e){var t=e.getUTCDay();return t>=4||t===0?bg(e):bg.ceil(e)}function x_t(e,t){return e=Sbe(e),Rn(bg.count(Yl(e),e)+(Yl(e).getUTCDay()===4),t,2)}function b_t(e){return e.getUTCDay()}function __t(e,t){return Rn(kE.count(Yl(e)-1,e),t,2)}function w_t(e,t){return Rn(e.getUTCFullYear()%100,t,2)}function C_t(e,t){return e=Sbe(e),Rn(e.getUTCFullYear()%100,t,2)}function S_t(e,t){return Rn(e.getUTCFullYear()%1e4,t,4)}function E_t(e,t){var n=e.getUTCDay();return e=n>=4||n===0?bg(e):bg.ceil(e),Rn(e.getUTCFullYear()%1e4,t,4)}function M_t(){return"+0000"}function xee(){return"%"}function bee(e){return+e}function _ee(e){return Math.floor(+e/1e3)}var Np,v_,Ebe;k_t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function k_t(e){return Np=kbt(e),v_=Np.format,Np.parse,Ebe=Np.utcFormat,Np.utcParse,Np}function T_t(e){return new Date(e)}function N_t(e){return e instanceof Date?+e:+new Date(+e)}function IB(e,t,n,r,s,a,i,l,c,u){var d=kB(),m=d.invert,p=d.domain,h=u(".%L"),g=u(":%S"),y=u("%I:%M"),v=u("%I %p"),x=u("%a %d"),b=u("%b %d"),_=u("%B"),w=u("%Y");function C(S){return(c(S)<S?h:l(S)<S?g:i(S)<S?y:a(S)<S?v:r(S)<S?s(S)<S?x:b:n(S)<S?_:w)(S)}return d.invert=function(S){return new Date(m(S))},d.domain=function(S){return arguments.length?p(Array.from(S,N_t)):p().map(T_t)},d.ticks=function(S){var E=p();return e(E[0],E[E.length-1],S??10)},d.tickFormat=function(S,E){return E==null?C:u(E)},d.nice=function(S){var E=p();return(!S||typeof S.range!="function")&&(S=t(E[0],E[E.length-1],S??10)),S?p(fbe(E,S)):d},d.copy=function(){return f_(d,IB(e,t,n,r,s,a,i,l,c,u))},d}function j_t(){return yi.apply(IB(Ebt,Mbt,Ki,y_,h_,zy,Z3,Q3,zc,v_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function A_t(){return yi.apply(IB(Cbt,Sbt,Yl,ek,g_,p_,J3,X3,zc,Ebe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function I_t(e,t){t.domain&&("nice"in e||"quantiles"in e||"padding"in e,e.domain(t.domain))}function R_t(e,t){t.range&&("padding"in e,e.range(t.range))}function P_t(e,t){"align"in e&&"align"in t&&typeof t.align<"u"&&e.align(t.align)}function O_t(e,t){"base"in e&&"base"in t&&typeof t.base<"u"&&e.base(t.base)}function L_t(e,t){"clamp"in e&&"clamp"in t&&typeof t.clamp<"u"&&e.clamp(t.clamp)}function D_t(e,t){"constant"in e&&"constant"in t&&typeof t.constant<"u"&&e.constant(t.constant)}function F_t(e,t){"exponent"in e&&"exponent"in t&&typeof t.exponent<"u"&&e.exponent(t.exponent)}var wee={lab:L1t,hcl:D1t,"hcl-long":F1t,hsl:P1t,"hsl-long":O1t,cubehelix:U1t,"cubehelix-long":B1t,rgb:f8};function U_t(e){switch(e){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return wee[e]}var t=e.type,n=e.gamma,r=wee[t];return typeof n>"u"?r:r.gamma(n)}function B_t(e,t){if("interpolate"in t&&"interpolate"in e&&typeof t.interpolate<"u"){var n=U_t(t.interpolate);e.interpolate(n)}}var V_t=new Date(Date.UTC(2020,1,2,3,4,5)),$_t="%Y-%m-%d %H:%M";function Mbe(e){var t=e.tickFormat(1,$_t)(V_t);return t==="2020-02-02 03:04"}var Cee={day:zy,hour:Z3,minute:Q3,month:y_,second:zc,week:h_,year:Ki},See={day:p_,hour:J3,minute:X3,month:ek,second:zc,week:g_,year:Yl};function W_t(e,t){if("nice"in t&&typeof t.nice<"u"&&"nice"in e){var n=t.nice;if(typeof n=="boolean")n&&e.nice();else if(typeof n=="number")e.nice(n);else{var r=e,s=Mbe(r);if(typeof n=="string")r.nice(s?See[n]:Cee[n]);else{var a=n.interval,i=n.step,l=(s?See[a]:Cee[a]).every(i);l!=null&&r.nice(l)}}}}function H_t(e,t){"padding"in e&&"padding"in t&&typeof t.padding<"u"&&e.padding(t.padding),"paddingInner"in e&&"paddingInner"in t&&typeof t.paddingInner<"u"&&e.paddingInner(t.paddingInner),"paddingOuter"in e&&"paddingOuter"in t&&typeof t.paddingOuter<"u"&&e.paddingOuter(t.paddingOuter)}function z_t(e,t){if(t.reverse){var n=e.range().slice().reverse();"padding"in e,e.range(n)}}function G_t(e,t){"round"in t&&typeof t.round<"u"&&(t.round&&"interpolate"in t&&typeof t.interpolate<"u"?console.warn("[visx/scale/applyRound] ignoring round: scale config contains round and interpolate. only applying interpolate. config:",t):"round"in e?e.round(t.round):"interpolate"in e&&t.round&&e.interpolate(sbe))}function q_t(e,t){"unknown"in e&&"unknown"in t&&typeof t.unknown<"u"&&e.unknown(t.unknown)}function K_t(e,t){if("zero"in t&&t.zero===!0){var n=e.domain(),r=n[0],s=n[1],a=s<r,i=a?[s,r]:[r,s],l=i[0],c=i[1],u=[Math.min(0,l),Math.max(0,c)];e.domain(a?u.reverse():u)}}var kbe=["domain","nice","zero","interpolate","round","range","reverse","align","base","clamp","constant","exponent","padding","unknown"],Y_t={domain:I_t,nice:W_t,zero:K_t,interpolate:B_t,round:G_t,align:P_t,base:O_t,clamp:L_t,constant:D_t,exponent:F_t,padding:H_t,range:R_t,reverse:z_t,unknown:q_t};function Da(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new Set(t),s=kbe.filter(function(a){return r.has(a)});return function(i,l){return typeof l<"u"&&s.forEach(function(c){Y_t[c](i,l)}),i}}var Q_t=Da("domain","range","reverse","align","padding","round");function RB(e){return Q_t(_B(),e)}var X_t=Da("domain","range","reverse","align","padding","round");function x_(e){return X_t(u1t(),e)}var Z_t=Da("domain","range","reverse","clamp","interpolate","nice","round","zero");function jd(e){return Z_t(dbe(),e)}var J_t=Da("domain","range","clamp","nice","round","unknown");function ewt(e){return J_t(hbe(),e)}var twt=Da("domain","range","reverse","clamp","interpolate","nice","round");function Zm(e){return twt(j_t(),e)}var nwt=Da("domain","range","reverse","clamp","interpolate","nice","round");function Tbe(e){return nwt(A_t(),e)}var rwt=Da("domain","range","reverse","base","clamp","interpolate","nice","round");function PB(e){return rwt(mbe(),e)}var swt=Da("domain","range","reverse","clamp","exponent","interpolate","nice","round","zero");function Nbe(e){return swt(jB(),e)}var awt=Da("domain","range","reverse","unknown");function OB(e){return awt(bB(),e)}var owt=Da("domain","range","reverse","nice","zero");function jbe(e){return owt(ybe(),e)}var iwt=Da("domain","range","reverse");function Abe(e){return iwt(gbe(),e)}var lwt=Da("domain","range","reverse","clamp","constant","nice","zero","round");function Ibe(e){return lwt(pbe(),e)}var cwt=Da("domain","range","reverse");function Rbe(e){return cwt(vbe(),e)}var uwt=Da("domain","range","reverse","clamp","interpolate","nice","round","zero");function Pbe(e){return uwt(mbt(),e)}function dwt(e){if(typeof e<"u"&&"type"in e)switch(e.type){case"linear":return jd(e);case"log":return PB(e);case"pow":return Nbe(e);case"sqrt":return Pbe(e);case"symlog":return Ibe(e);case"time":return Zm(e);case"utc":return Tbe(e);case"quantile":return Abe(e);case"quantize":return jbe(e);case"threshold":return Rbe(e);case"ordinal":return OB(e);case"point":return x_(e);case"band":return RB(e)}return jd(e)}var fwt=Da.apply(void 0,kbe);function mwt(e,t){return fwt(e.copy(),t)}function pwt(e){return"paddingInner"in e?"band":"padding"in e?"point":"quantiles"in e?"quantile":"base"in e?"log":"exponent"in e?e.exponent()===.5?"sqrt":"pow":"constant"in e?"symlog":"clamp"in e?e.ticks()[0]instanceof Date?Mbe(e)?"utc":"time":"linear":"nice"in e?"quantize":"invertExtent"in e?"threshold":"ordinal"}function b_(e){if((typeof e=="function"||typeof e=="object"&&e)&&"valueOf"in e){var t=e.valueOf();if(typeof t=="number")return t}return e}function tk(e,t){var n=e;return"ticks"in n?n.ticks(t):n.domain().filter(function(r,s,a){return t==null||a.length<=t||s%Math.round((a.length-1)/t)===0})}function Obe(e){return e?.toString()}var hwt=new Set(["linear","pow","quantize","sqrt","symlog"]);function gwt(e){return hwt.has(e.type)}const ywt=Object.freeze(Object.defineProperty({__proto__:null,coerceNumber:b_,createScale:dwt,getTicks:tk,inferScaleType:pwt,scaleBand:RB,scaleCanBeZeroed:gwt,scaleLinear:jd,scaleLog:PB,scaleOrdinal:OB,scalePoint:x_,scalePower:Nbe,scaleQuantile:Abe,scaleQuantize:jbe,scaleRadial:ewt,scaleSqrt:Pbe,scaleSymlog:Ibe,scaleThreshold:Rbe,scaleTime:Zm,scaleUtc:Tbe,toString:Obe,updateScale:mwt},Symbol.toStringTag,{value:"Module"}));function lr(e,t){e(t)}var TE={ascending:V1e,descending:Xxt,insideout:Zxt,none:gg,reverse:Jxt},vwt=Object.keys(TE);function nk(e){return e&&TE[e]||TE.none}var NE={expand:zxt,diverging:Gxt,none:hg,silhouette:qxt,wiggle:Kxt},xwt=Object.keys(NE);function rk(e){return e&&NE[e]||NE.none}function LB(e){var t=e===void 0?{}:e,n=t.innerRadius,r=t.outerRadius,s=t.cornerRadius,a=t.startAngle,i=t.endAngle,l=t.padAngle,c=t.padRadius,u=Ext();return n!=null&&lr(u.innerRadius,n),r!=null&&lr(u.outerRadius,r),s!=null&&lr(u.cornerRadius,s),a!=null&&lr(u.startAngle,a),i!=null&&lr(u.endAngle,i),l!=null&&lr(u.padAngle,l),c!=null&&lr(u.padRadius,c),u}function sk(e){var t=e===void 0?{}:e,n=t.x,r=t.x0,s=t.x1,a=t.y,i=t.y0,l=t.y1,c=t.defined,u=t.curve,d=Mxt();return n&&lr(d.x,n),r&&lr(d.x0,r),s&&lr(d.x1,s),a&&lr(d.y,a),i&&lr(d.y0,i),l&&lr(d.y1,l),c&&d.defined(c),u&&d.curve(u),d}function Tu(e){var t=e===void 0?{}:e,n=t.x,r=t.y,s=t.defined,a=t.curve,i=yB();return n&&lr(i.x,n),r&&lr(i.y,r),s&&i.defined(s),a&&i.curve(a),i}function Lbe(e){var t=e===void 0?{}:e,n=t.startAngle,r=t.endAngle,s=t.padAngle,a=t.value,i=t.sort,l=t.sortValues,c=Nxt();return(i===null||i!=null)&&c.sort(i),(l===null||l!=null)&&c.sortValues(l),a!=null&&c.value(a),s!=null&&lr(c.padAngle,s),n!=null&&lr(c.startAngle,n),r!=null&&lr(c.endAngle,r),c}function Dbe(e){var t=e===void 0?{}:e,n=t.angle,r=t.radius,s=t.defined,a=t.curve,i=Ixt();return n&&lr(i.angle,n),r&&lr(i.radius,r),s&&i.defined(s),a&&i.curve(a),i}function Fbe(e){var t=e.keys,n=e.value,r=e.order,s=e.offset,a=xB();return t&&a.keys(t),n&&lr(a.value,n),r&&a.order(nk(r)),s&&a.offset(rk(s)),a}var bwt=["className","data","innerRadius","outerRadius","cornerRadius","startAngle","endAngle","padAngle","padRadius","children","innerRef"];function h8(){return h8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h8.apply(this,arguments)}function _wt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Ube(e){var t=e.className,n=e.data,r=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,i=e.startAngle,l=e.endAngle,c=e.padAngle,u=e.padRadius,d=e.children,m=e.innerRef,p=_wt(e,bwt),h=LB({innerRadius:r,outerRadius:s,cornerRadius:a,startAngle:i,endAngle:l,padAngle:c,padRadius:u});return d?I.createElement(I.Fragment,null,d({path:h})):!n&&(i==null||l==null||r==null||s==null)?(console.warn("[@visx/shape/Arc]: expected data because one of startAngle, endAngle, innerRadius, outerRadius is undefined. Bailing."),null):I.createElement("path",h8({ref:m,className:B("visx-arc",t),d:h(n)||""},p))}var wwt=["top","left","transform","className","children","innerRef"];function g8(){return g8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g8.apply(this,arguments)}function Cwt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ca(e){var t=e.top,n=t===void 0?0:t,r=e.left,s=r===void 0?0:r,a=e.transform,i=e.className,l=e.children,c=e.innerRef,u=Cwt(e,wwt);return I.createElement("g",g8({ref:c,className:B("visx-group",i),transform:a||"translate("+s+", "+n+")"},u),l)}ca.propTypes={top:Le.number,left:Le.number,transform:Le.string,className:Le.string,children:Le.node,innerRef:Le.oneOfType([Le.string,Le.func,Le.object])};const Swt=Object.freeze(Object.defineProperty({__proto__:null,Group:ca},Symbol.toStringTag,{value:"Module"}));var Ewt=["className","top","left","data","centroid","innerRadius","outerRadius","cornerRadius","startAngle","endAngle","padAngle","padRadius","pieSort","pieSortValues","pieValue","children","fill"];function y8(){return y8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y8.apply(this,arguments)}function Mwt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function kwt(e){var t=e.className,n=e.top,r=e.left,s=e.data,a=s===void 0?[]:s,i=e.centroid,l=e.innerRadius,c=l===void 0?0:l,u=e.outerRadius,d=e.cornerRadius,m=e.startAngle,p=e.endAngle,h=e.padAngle,g=e.padRadius,y=e.pieSort,v=e.pieSortValues,x=e.pieValue,b=e.children,_=e.fill,w=_===void 0?"":_,C=Mwt(e,Ewt),S=LB({innerRadius:c,outerRadius:u,cornerRadius:d,padRadius:g}),E=Lbe({startAngle:m,endAngle:p,padAngle:h,value:x,sort:y,sortValues:v}),M=E(a);return b?I.createElement(I.Fragment,null,b({arcs:M,path:S,pie:E})):I.createElement(ca,{className:"visx-pie-arcs-group",top:n,left:r},M.map(function(k,A){return I.createElement("g",{key:"pie-arc-"+A},I.createElement("path",y8({className:B("visx-pie-arc",t),d:S(k)||"",fill:w==null||typeof w=="string"?w:w(k)},C)),i?.(S.centroid(k),k))}))}var Twt=["from","to","fill","className","innerRef"];function v8(){return v8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v8.apply(this,arguments)}function Nwt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ak(e){var t=e.from,n=t===void 0?{x:0,y:0}:t,r=e.to,s=r===void 0?{x:1,y:1}:r,a=e.fill,i=a===void 0?"transparent":a,l=e.className,c=e.innerRef,u=Nwt(e,Twt),d=n.x===s.x||n.y===s.y;return I.createElement("line",v8({ref:c,className:B("visx-line",l),x1:n.x,y1:n.y,x2:s.x,y2:s.y,fill:i,shapeRendering:d?"crispEdges":"auto"},u))}var jwt=["children","data","x","y","fill","className","curve","innerRef","defined"];function x8(){return x8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x8.apply(this,arguments)}function Awt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Bbe(e){var t=e.children,n=e.data,r=n===void 0?[]:n,s=e.x,a=e.y,i=e.fill,l=i===void 0?"transparent":i,c=e.className,u=e.curve,d=e.innerRef,m=e.defined,p=m===void 0?function(){return!0}:m,h=Awt(e,jwt),g=Tu({x:s,y:a,defined:p,curve:u});return t?I.createElement(I.Fragment,null,t({path:g})):I.createElement("path",x8({ref:d,className:B("visx-linepath",c),d:g(r)||"",fill:l,strokeLinecap:"round"},h))}var Iwt=["className","angle","radius","defined","curve","data","innerRef","children","fill"];function b8(){return b8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b8.apply(this,arguments)}function Rwt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Pwt(e){var t=e.className,n=e.angle,r=e.radius,s=e.defined,a=e.curve,i=e.data,l=i===void 0?[]:i,c=e.innerRef,u=e.children,d=e.fill,m=d===void 0?"transparent":d,p=Rwt(e,Iwt),h=Dbe({angle:n,radius:r,defined:s,curve:a});return u?I.createElement(I.Fragment,null,u({path:h})):I.createElement("path",b8({ref:c,className:B("visx-line-radial",t),d:h(l)||"",fill:m},p))}var Owt=["children","x","x0","x1","y","y0","y1","data","defined","className","curve","innerRef"];function _8(){return _8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_8.apply(this,arguments)}function Lwt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Dwt(e){var t=e.children,n=e.x,r=e.x0,s=e.x1,a=e.y,i=e.y0,l=e.y1,c=e.data,u=c===void 0?[]:c,d=e.defined,m=d===void 0?function(){return!0}:d,p=e.className,h=e.curve,g=e.innerRef,y=Lwt(e,Owt),v=sk({x:n,x0:r,x1:s,y:a,y0:i,y1:l,defined:m,curve:h});return t?I.createElement(I.Fragment,null,t({path:v})):I.createElement("path",_8({ref:g,className:B("visx-area",p),d:v(u)||""},y))}var Fwt=["x","x0","x1","y","y1","y0","yScale","data","defined","className","curve","innerRef","children"];function w8(){return w8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w8.apply(this,arguments)}function Uwt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function _g(e){var t=e.x,n=e.x0,r=e.x1,s=e.y,a=e.y1,i=e.y0,l=e.yScale,c=e.data,u=c===void 0?[]:c,d=e.defined,m=d===void 0?function(){return!0}:d,p=e.className,h=e.curve,g=e.innerRef,y=e.children,v=Uwt(e,Fwt),x=sk({x:t,x0:n,x1:r,defined:m,curve:h});return i==null?x.y0(l.range()[0]):lr(x.y0,i),s&&!a&&lr(x.y1,s),a&&!s&&lr(x.y1,a),y?I.createElement(I.Fragment,null,y({path:x})):I.createElement("path",w8({ref:g,className:B("visx-area-closed",p),d:x(u)||""},v))}var Bwt=["className","top","left","keys","data","curve","defined","x","x0","x1","y0","y1","value","order","offset","color","children"];function C8(){return C8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C8.apply(this,arguments)}function Vwt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Vbe(e){var t=e.className,n=e.top,r=e.left,s=e.keys,a=e.data,i=e.curve,l=e.defined,c=e.x,u=e.x0,d=e.x1,m=e.y0,p=e.y1,h=e.value,g=e.order,y=e.offset,v=e.color,x=e.children,b=Vwt(e,Bwt),_=Fbe({keys:s,value:h,order:g,offset:y}),w=sk({x:c,x0:u,x1:d,y0:m,y1:p,curve:i,defined:l}),C=_(a);return x?I.createElement(I.Fragment,null,x({stacks:C,path:w,stack:_})):I.createElement(ca,{top:n,left:r},C.map(function(S,E){return I.createElement("path",C8({className:B("visx-stack",t),key:"stack-"+E+"-"+(S.key||""),d:w(S)||"",fill:v?.(S.key,E)},b))}))}var $wt=["className","top","left","keys","data","curve","defined","x","x0","x1","y0","y1","value","order","offset","color","children"];function jE(){return jE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jE.apply(this,arguments)}function Wwt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Hwt(e){var t=e.className,n=e.top,r=e.left,s=e.keys,a=e.data,i=e.curve,l=e.defined,c=e.x,u=e.x0,d=e.x1,m=e.y0,p=e.y1,h=e.value,g=e.order,y=e.offset,v=e.color,x=e.children,b=Wwt(e,$wt);return I.createElement(Vbe,jE({className:t,top:n,left:r,keys:s,data:a,curve:i,defined:l,x:c,x0:u,x1:d,y0:m,y1:p,value:h,order:g,offset:y,color:v},b),x||function(_){var w=_.stacks,C=_.path;return w.map(function(S,E){return I.createElement("path",jE({className:B("visx-area-stack",t),key:"area-stack-"+E+"-"+(S.key||""),d:C(S)||"",fill:v?.(S.key,E)},b))})})}var zwt=["className","innerRef"];function S8(){return S8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S8.apply(this,arguments)}function Gwt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Gy(e){var t=e.className,n=e.innerRef,r=Gwt(e,zwt);return I.createElement("rect",S8({ref:n,className:B("visx-bar",t)},r))}var qwt=["children","className","innerRef","x","y","width","height","radius","all","top","bottom","left","right","topLeft","topRight","bottomLeft","bottomRight"];function E8(){return E8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E8.apply(this,arguments)}function Kwt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Ywt(e){var t=e.all,n=e.bottom,r=e.bottomLeft,s=e.bottomRight,a=e.height,i=e.left,l=e.radius,c=e.right,u=e.top,d=e.topLeft,m=e.topRight,p=e.width,h=e.x,g=e.y;m=t||u||c||m,s=t||n||c||s,r=t||n||i||r,d=t||u||i||d,l=Math.max(1,Math.min(l,Math.min(p,a)/2));var y=2*l,v=("M"+(h+l)+","+g+" h"+(p-y)+`
 `+(m?"a"+l+","+l+" 0 0 1 "+l+","+l:"h"+l+"v"+l)+`
 v`+(a-y)+`
 `+(s?"a"+l+","+l+" 0 0 1 "+-l+","+l:"v"+l+"h"+-l)+`
 h`+(y-p)+`
 `+(r?"a"+l+","+l+" 0 0 1 "+-l+","+-l:"h"+-l+"v"+-l)+`
 v`+(y-a)+`
 `+(d?"a"+l+","+l+" 0 0 1 "+l+","+-l:"v"+-l+"h"+l)+`
z`).split(`
`).join("");return v}function Qwt(e){var t=e.children,n=e.className,r=e.innerRef,s=e.x,a=e.y,i=e.width,l=e.height,c=e.radius,u=e.all,d=u===void 0?!1:u,m=e.top,p=m===void 0?!1:m,h=e.bottom,g=h===void 0?!1:h,y=e.left,v=y===void 0?!1:y,x=e.right,b=x===void 0?!1:x,_=e.topLeft,w=_===void 0?!1:_,C=e.topRight,S=C===void 0?!1:C,E=e.bottomLeft,M=E===void 0?!1:E,k=e.bottomRight,A=k===void 0?!1:k,R=Kwt(e,qwt),O=Ywt({x:s,y:a,width:i,height:l,radius:c,all:d,top:p,bottom:g,left:v,right:b,topLeft:w,topRight:S,bottomLeft:M,bottomRight:A});return t?I.createElement(I.Fragment,null,t({path:O})):I.createElement("path",E8({ref:r,className:B("visx-bar-rounded",n),d:O},R))}function ok(e){if("bandwidth"in e)return e.bandwidth();var t=e.range(),n=e.domain();return Math.abs(t[t.length-1]-t[0])/n.length}var Xwt=["data","className","top","left","x0","x0Scale","x1Scale","yScale","color","keys","height","children"];function M8(){return M8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M8.apply(this,arguments)}function Zwt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Jwt(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.x0,i=e.x0Scale,l=e.x1Scale,c=e.yScale,u=e.color,d=e.keys,m=e.height,p=e.children,h=Zwt(e,Xwt),g=ok(l),y=t.map(function(v,x){return{index:x,x0:i(a(v)),bars:d.map(function(b,_){var w=v[b];return{index:_,key:b,value:w,width:g,x:l(b)||0,y:c(w)||0,color:u(b,_),height:m-(c(w)||0)}})}});return p?I.createElement(I.Fragment,null,p(y)):I.createElement(ca,{className:B("visx-bar-group",n),top:r,left:s},y.map(function(v){return I.createElement(ca,{key:"bar-group-"+v.index+"-"+v.x0,left:v.x0},v.bars.map(function(x){return I.createElement(Gy,M8({key:"bar-group-bar-"+v.index+"-"+x.index+"-"+x.value+"-"+x.key,x:x.x,y:x.y,width:x.width,height:x.height,fill:x.color},h))}))}))}var eCt=["data","className","top","left","x","y0","y0Scale","y1Scale","xScale","color","keys","width","children"];function k8(){return k8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k8.apply(this,arguments)}function tCt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function nCt(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.x,i=a===void 0?function(){return 0}:a,l=e.y0,c=e.y0Scale,u=e.y1Scale,d=e.xScale,m=e.color,p=e.keys;e.width;var h=e.children,g=tCt(e,eCt),y=ok(u),v=t.map(function(x,b){return{index:b,y0:c(l(x))||0,bars:p.map(function(_,w){var C=x[_];return{index:w,key:_,value:C,height:y,x:i(C)||0,y:u(_)||0,color:m(_,w),width:d(C)||0}})}});return h?I.createElement(I.Fragment,null,h(v)):I.createElement(ca,{className:B("visx-bar-group-horizontal",n),top:r,left:s},v.map(function(x){return I.createElement(ca,{key:"bar-group-"+x.index+"-"+x.y0,top:x.y0},x.bars.map(function(b){return I.createElement(Gy,k8({key:"bar-group-bar-"+x.index+"-"+b.index+"-"+b.value+"-"+b.key,x:b.x,y:b.y,width:b.width,height:b.height,fill:b.color},g))}))}))}function vi(e){return typeof e?.x=="number"?e?.x:0}function xi(e){return typeof e?.y=="number"?e?.y:0}function bi(e){return e?.source}function _i(e){return e?.target}function $be(e){return e?.[0]}function Wbe(e){return e?.[1]}var rCt=["data","className","top","left","x","y0","y1","xScale","yScale","color","keys","value","order","offset","children"];function T8(){return T8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T8.apply(this,arguments)}function sCt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function aCt(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.x,i=e.y0,l=i===void 0?$be:i,c=e.y1,u=c===void 0?Wbe:c,d=e.xScale,m=e.yScale,p=e.color,h=e.keys,g=e.value,y=e.order,v=e.offset,x=e.children,b=sCt(e,rCt),_=xB();h&&_.keys(h),g&&lr(_.value,g),y&&_.order(nk(y)),v&&_.offset(rk(v));var w=_(t),C=ok(d),S=w.map(function(E,M){var k=E.key;return{index:M,key:k,bars:E.map(function(A,R){var O=(m(l(A))||0)-(m(u(A))||0),L=m(u(A)),P="bandwidth"in d?d(a(A.data)):Math.max((d(a(A.data))||0)-C/2);return{bar:A,key:k,index:R,height:O,width:C,x:P||0,y:L||0,color:p(E.key,R)}})}});return x?I.createElement(I.Fragment,null,x(S)):I.createElement(ca,{className:B("visx-bar-stack",n),top:r,left:s},S.map(function(E){return E.bars.map(function(M){return I.createElement(Gy,T8({key:"bar-stack-"+E.index+"-"+M.index,x:M.x,y:M.y,height:M.height,width:M.width,fill:M.color},b))})}))}var oCt=["data","className","top","left","y","x0","x1","xScale","yScale","color","keys","value","order","offset","children"];function N8(){return N8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N8.apply(this,arguments)}function iCt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function lCt(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.y,i=e.x0,l=i===void 0?$be:i,c=e.x1,u=c===void 0?Wbe:c,d=e.xScale,m=e.yScale,p=e.color,h=e.keys,g=e.value,y=e.order,v=e.offset,x=e.children,b=iCt(e,oCt),_=xB();h&&_.keys(h),g&&lr(_.value,g),y&&_.order(nk(y)),v&&_.offset(rk(v));var w=_(t),C=ok(m),S=w.map(function(E,M){var k=E.key;return{index:M,key:k,bars:E.map(function(A,R){var O=(d(u(A))||0)-(d(l(A))||0),L=d(l(A)),P="bandwidth"in m?m(a(A.data)):Math.max((m(a(A.data))||0)-O/2);return{bar:A,key:k,index:R,height:C,width:O,x:L||0,y:P||0,color:p(E.key,R)}})}});return x?I.createElement(I.Fragment,null,x(S)):I.createElement(ca,{className:B("visx-bar-stack-horizontal",n),top:r,left:s},S.map(function(E){return E.bars.map(function(M){return I.createElement(Gy,N8({key:"bar-stack-"+E.index+"-"+M.index,x:M.x,y:M.y,height:M.height,width:M.width,fill:M.color},b))})}))}var Hbe=function(t){return Math.PI/180*t},cCt=["className","children","data","innerRef","path","x","y","source","target"];function j8(){return j8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j8.apply(this,arguments)}function uCt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function zbe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=Fxt();return i.x(r),i.y(s),i.source(t),i.target(n),i(a)}}function dCt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.x,l=i===void 0?xi:i,c=e.y,u=c===void 0?vi:c,d=e.source,m=d===void 0?bi:d,p=e.target,h=p===void 0?_i:p,g=uCt(e,cCt),y=a||zbe({source:m,target:h,x:l,y:u});return n?I.createElement(I.Fragment,null,n({path:y})):I.createElement("path",j8({ref:s,className:B("visx-link visx-link-horizontal-diagonal",t),d:y(r)||""},g))}var fCt=["className","children","data","innerRef","path","x","y","source","target"];function A8(){return A8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A8.apply(this,arguments)}function mCt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Gbe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=Uxt();return i.x(r),i.y(s),i.source(t),i.target(n),i(a)}}function pCt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.x,l=i===void 0?vi:i,c=e.y,u=c===void 0?xi:c,d=e.source,m=d===void 0?bi:d,p=e.target,h=p===void 0?_i:p,g=mCt(e,fCt),y=a||Gbe({source:m,target:h,x:l,y:u});return n?I.createElement(I.Fragment,null,n({path:y})):I.createElement("path",A8({ref:s,className:B("visx-link visx-link-vertical-diagonal",t),d:y(r)||""},g))}var hCt=["className","children","data","innerRef","path","angle","radius","source","target"];function I8(){return I8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I8.apply(this,arguments)}function gCt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function qbe(e){var t=e.source,n=e.target,r=e.angle,s=e.radius;return function(a){var i=Bxt();return i.angle(r),i.radius(s),i.source(t),i.target(n),i(a)}}function yCt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.angle,l=i===void 0?vi:i,c=e.radius,u=c===void 0?xi:c,d=e.source,m=d===void 0?bi:d,p=e.target,h=p===void 0?_i:p,g=gCt(e,hCt),y=a||qbe({source:m,target:h,angle:l,radius:u});return n?I.createElement(I.Fragment,null,n({path:y})):I.createElement("path",I8({ref:s,className:B("visx-link visx-link-radial-diagonal",t),d:y(r)||""},g))}var vCt=["className","children","data","innerRef","path","percent","x","y","source","target"];function R8(){return R8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R8.apply(this,arguments)}function xCt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Kbe(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(i){var l=t(i),c=n(i),u=r(l),d=s(l),m=r(c),p=s(c),h=m-u,g=p-d,y=a*(h+g),v=a*(g-h),x=zo();return x.moveTo(u,d),x.bezierCurveTo(u+y,d+v,m+v,p-y,m,p),x.toString()}}function bCt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.percent,l=i===void 0?.2:i,c=e.x,u=c===void 0?xi:c,d=e.y,m=d===void 0?vi:d,p=e.source,h=p===void 0?bi:p,g=e.target,y=g===void 0?_i:g,v=xCt(e,vCt),x=a||Kbe({source:h,target:y,x:u,y:m,percent:l});return n?I.createElement(I.Fragment,null,n({path:x})):I.createElement("path",R8({ref:s,className:B("visx-link visx-link-horizontal-curve",t),d:x(r)||""},v))}var _Ct=["className","children","data","innerRef","path","percent","x","y","source","target"];function P8(){return P8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P8.apply(this,arguments)}function wCt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Ybe(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(i){var l=t(i),c=n(i),u=r(l),d=s(l),m=r(c),p=s(c),h=m-u,g=p-d,y=a*(h+g),v=a*(g-h),x=zo();return x.moveTo(u,d),x.bezierCurveTo(u+y,d+v,m+v,p-y,m,p),x.toString()}}function CCt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.percent,l=i===void 0?.2:i,c=e.x,u=c===void 0?vi:c,d=e.y,m=d===void 0?xi:d,p=e.source,h=p===void 0?bi:p,g=e.target,y=g===void 0?_i:g,v=wCt(e,_Ct),x=a||Ybe({source:h,target:y,x:u,y:m,percent:l});return n?I.createElement(I.Fragment,null,n({path:x})):I.createElement("path",P8({ref:s,className:B("visx-link visx-link-vertical-curve",t),d:x(r)||""},v))}var SCt=["className","children","data","innerRef","path","percent","x","y","source","target"];function O8(){return O8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O8.apply(this,arguments)}function ECt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Qbe(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(i){var l=t(i),c=n(i),u=r(l)-Math.PI/2,d=s(l),m=r(c)-Math.PI/2,p=s(c),h=Math.cos(u),g=Math.sin(u),y=Math.cos(m),v=Math.sin(m),x=d*h,b=d*g,_=p*y,w=p*v,C=_-x,S=w-b,E=a*(C+S),M=a*(S-C),k=zo();return k.moveTo(x,b),k.bezierCurveTo(x+E,b+M,_+M,w-E,_,w),k.toString()}}function MCt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.percent,l=i===void 0?.2:i,c=e.x,u=c===void 0?vi:c,d=e.y,m=d===void 0?xi:d,p=e.source,h=p===void 0?bi:p,g=e.target,y=g===void 0?_i:g,v=ECt(e,SCt),x=a||Qbe({source:h,target:y,x:u,y:m,percent:l});return n?I.createElement(I.Fragment,null,n({path:x})):I.createElement("path",O8({ref:s,className:B("visx-link visx-link-radial-curve",t),d:x(r)||""},v))}var kCt=["className","children","innerRef","data","path","x","y","source","target"];function L8(){return L8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L8.apply(this,arguments)}function TCt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Xbe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=t(a),l=n(a),c=r(i),u=s(i),d=r(l),m=s(l),p=zo();return p.moveTo(c,u),p.lineTo(d,m),p.toString()}}function NCt(e){var t=e.className,n=e.children,r=e.innerRef,s=e.data,a=e.path,i=e.x,l=i===void 0?xi:i,c=e.y,u=c===void 0?vi:c,d=e.source,m=d===void 0?bi:d,p=e.target,h=p===void 0?_i:p,g=TCt(e,kCt),y=a||Xbe({source:m,target:h,x:l,y:u});return n?I.createElement(I.Fragment,null,n({path:y})):I.createElement("path",L8({ref:r,className:B("visx-link visx-link-horizontal-line",t),d:y(s)||""},g))}var jCt=["className","innerRef","data","path","x","y","source","target","children"];function D8(){return D8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D8.apply(this,arguments)}function ACt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Zbe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=t(a),l=n(a),c=r(i),u=s(i),d=r(l),m=s(l),p=zo();return p.moveTo(c,u),p.lineTo(d,m),p.toString()}}function ICt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.x,i=a===void 0?vi:a,l=e.y,c=l===void 0?xi:l,u=e.source,d=u===void 0?bi:u,m=e.target,p=m===void 0?_i:m,h=e.children,g=ACt(e,jCt),y=s||Zbe({source:d,target:p,x:i,y:c});return h?I.createElement(I.Fragment,null,h({path:y})):I.createElement("path",D8({ref:n,className:B("visx-link visx-link-vertical-line",t),d:y(r)||""},g))}var RCt=["className","innerRef","data","path","x","y","source","target","children"];function F8(){return F8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F8.apply(this,arguments)}function PCt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Jbe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=t(a),l=n(a),c=r(i)-Math.PI/2,u=s(i),d=r(l)-Math.PI/2,m=s(l),p=Math.cos(c),h=Math.sin(c),g=Math.cos(d),y=Math.sin(d),v=zo();return v.moveTo(u*p,u*h),v.lineTo(m*g,m*y),v.toString()}}function OCt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.x,i=a===void 0?vi:a,l=e.y,c=l===void 0?xi:l,u=e.source,d=u===void 0?bi:u,m=e.target,p=m===void 0?_i:m,h=e.children,g=PCt(e,RCt),y=s||Jbe({source:d,target:p,x:i,y:c});return h?I.createElement(I.Fragment,null,h({path:y})):I.createElement("path",F8({ref:n,className:B("visx-link visx-link-radial-line",t),d:y(r)||""},g))}var LCt=["className","innerRef","data","path","percent","x","y","source","target","children"];function U8(){return U8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U8.apply(this,arguments)}function DCt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function e_e(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(i){var l=t(i),c=n(i),u=r(l),d=s(l),m=r(c),p=s(c),h=zo();return h.moveTo(u,d),h.lineTo(u+(m-u)*a,d),h.lineTo(u+(m-u)*a,p),h.lineTo(m,p),h.toString()}}function FCt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.percent,i=a===void 0?.5:a,l=e.x,c=l===void 0?xi:l,u=e.y,d=u===void 0?vi:u,m=e.source,p=m===void 0?bi:m,h=e.target,g=h===void 0?_i:h,y=e.children,v=DCt(e,LCt),x=s||e_e({source:p,target:g,x:c,y:d,percent:i});return y?I.createElement(I.Fragment,null,y({path:x})):I.createElement("path",U8({ref:n,className:B("visx-link visx-link-horizontal-step",t),d:x(r)||""},v))}var UCt=["className","innerRef","data","path","percent","x","y","source","target","children"];function B8(){return B8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B8.apply(this,arguments)}function BCt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function t_e(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(i){var l=t(i),c=n(i),u=r(l),d=s(l),m=r(c),p=s(c),h=zo();return h.moveTo(u,d),h.lineTo(u,d+(p-d)*a),h.lineTo(m,d+(p-d)*a),h.lineTo(m,p),h.toString()}}function VCt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.percent,i=a===void 0?.5:a,l=e.x,c=l===void 0?vi:l,u=e.y,d=u===void 0?xi:u,m=e.source,p=m===void 0?bi:m,h=e.target,g=h===void 0?_i:h,y=e.children,v=BCt(e,UCt),x=s||t_e({source:p,target:g,x:c,y:d,percent:i});return y?I.createElement(I.Fragment,null,y({path:x})):I.createElement("path",B8({ref:n,className:B("visx-link visx-link-vertical-step",t),d:x(r)||""},v))}var $Ct=["className","innerRef","data","path","x","y","source","target","children"];function V8(){return V8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V8.apply(this,arguments)}function WCt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function n_e(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=t(a),l=n(a),c=r(i),u=s(i),d=r(l),m=s(l),p=c-Math.PI/2,h=u,g=d-Math.PI/2,y=m,v=Math.cos(p),x=Math.sin(p),b=Math.cos(g),_=Math.sin(g),w=Math.abs(g-p)>Math.PI?g<=p:g>p;return`
      M`+h*v+","+h*x+`
      A`+h+","+h+",0,0,"+(w?1:0)+","+h*b+","+h*_+`
      L`+y*b+","+y*_+`
    `}}function HCt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.x,i=a===void 0?vi:a,l=e.y,c=l===void 0?xi:l,u=e.source,d=u===void 0?bi:u,m=e.target,p=m===void 0?_i:m,h=e.children,g=WCt(e,$Ct),y=s||n_e({source:d,target:p,x:i,y:c});return h?I.createElement(I.Fragment,null,h({path:y})):I.createElement("path",V8({ref:n,className:B("visx-link visx-link-radial-step",t),d:y(r)||""},g))}var zCt=["sides","size","center","rotate","className","children","innerRef","points"];function $8(){return $8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$8.apply(this,arguments)}function GCt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var r_e={x:0,y:0},s_e=function(t){var n=t.sides,r=n===void 0?4:n,s=t.size,a=s===void 0?25:s,i=t.center,l=i===void 0?r_e:i,c=t.rotate,u=c===void 0?0:c,d=t.side,m=360/r*d-u,p=Hbe(m);return{x:l.x+a*Math.cos(p),y:l.y+a*Math.sin(p)}},a_e=function(t){var n=t.sides,r=t.size,s=t.center,a=t.rotate;return new Array(n).fill(0).map(function(i,l){return s_e({sides:n,size:r,center:s,rotate:a,side:l})})};function qCt(e){var t=e.sides,n=t===void 0?4:t,r=e.size,s=r===void 0?25:r,a=e.center,i=a===void 0?r_e:a,l=e.rotate,c=l===void 0?0:l,u=e.className,d=e.children,m=e.innerRef,p=e.points,h=GCt(e,zCt),g=p||a_e({sides:n,size:s,center:i,rotate:c}).map(function(y){var v=y.x,x=y.y;return[v,x]});return d?I.createElement(I.Fragment,null,d({points:g})):I.createElement("polygon",$8({ref:m,className:B("visx-polygon",u),points:g.join(" ")},h))}var KCt=["className","innerRef"];function W8(){return W8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W8.apply(this,arguments)}function YCt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function QCt(e){var t=e.className,n=e.innerRef,r=YCt(e,KCt);return I.createElement("circle",W8({ref:n,className:B("visx-circle",t)},r))}var Eee="http://www.w3.org/2000/svg";function XCt(e){var t=document.getElementById(e);if(!t){var n=document.createElementNS(Eee,"svg");n.setAttribute("aria-hidden","true"),n.style.opacity="0",n.style.width="0",n.style.height="0",n.style.position="absolute",n.style.top="-100%",n.style.left="-100%",n.style.pointerEvents="none",t=document.createElementNS(Eee,"path"),t.setAttribute("id",e),n.appendChild(t),document.body.appendChild(n)}return t}var ZCt="__visx_splitpath_svg_path_measurement_id",Mee=function(){return!0};function JCt(e){var t=e.path,n=e.pointsInSegments,r=e.segmentation,s=r===void 0?"x":r,a=e.sampleRate,i=a===void 0?1:a;try{var l=XCt(ZCt);l.setAttribute("d",t);var c=l.getTotalLength(),u=n.length,d=n.map(function(){return[]});if(s==="x"||s==="y")for(var m=n.map(function(L){var P;return(P=L.find(function(N){return typeof N[s]=="number"}))==null?void 0:P[s]}),p=l.getPointAtLength(0),h=l.getPointAtLength(c),g=h[s]>p[s],y=g?m.map(function(L){return typeof L>"u"?Mee:function(P){return P>=L}}):m.map(function(L){return typeof L>"u"?Mee:function(P){return P<=L}}),v=0,x=0;x<=c;x+=i){for(var b=l.getPointAtLength(x),_=b[s];v<u-1&&y[v+1](_);)v+=1;d[v].push(b)}else{var w=n.map(function(L){return L.length}),C=w.reduce(function(L,P){return L+P},0),S=c/Math.max(1,C-1),E=w.slice(0,u-1);E.unshift(0);for(var M=2;M<u;M+=1)E[M]+=E[M-1];for(var k=0;k<u;k+=1)E[k]*=S;for(var A=0,R=0;R<=c;R+=i){for(var O=l.getPointAtLength(R);A<u-1&&R>=E[A+1];)A+=1;d[A].push(O)}}return d}catch{return[]}}function H8(){return H8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H8.apply(this,arguments)}var eSt=function(t){return t.x||0},tSt=function(t){return t.y||0};function o_e(e){var t=e.children,n=e.className,r=e.curve,s=e.defined,a=e.segmentation,i=e.sampleRate,l=e.segments,c=e.x,u=e.y,d=e.styles,m=f.useMemo(function(){var g=typeof c=="number"||typeof c>"u"?function(){return c}:c,y=typeof u=="number"||typeof u>"u"?function(){return u}:u;return l.map(function(v){return v.map(function(x,b){return{x:g(x,b,v),y:y(x,b,v)}})})},[c,u,l]),p=f.useMemo(function(){var g=Tu({x:c,y:u,defined:s,curve:r});return g(l.flat())||""},[c,u,s,r,l]),h=f.useMemo(function(){return JCt({path:p,segmentation:a,pointsInSegments:m,sampleRate:i})},[p,a,m,i]);return I.createElement("g",null,h.map(function(g,y){return t?I.createElement(I.Fragment,{key:y},t({index:y,segment:g,styles:d[y]||d[y%d.length]})):I.createElement(Bbe,H8({key:y,className:n,data:g,x:eSt,y:tSt},d[y]||d[y%d.length]))}))}o_e.propTypes={segments:Le.arrayOf(Le.array).isRequired,styles:Le.array.isRequired,children:Le.func,className:Le.string};const nSt=Object.freeze(Object.defineProperty({__proto__:null,Arc:Ube,Area:Dwt,AreaClosed:_g,AreaStack:Hwt,Bar:Gy,BarGroup:Jwt,BarGroupHorizontal:nCt,BarRounded:Qwt,BarStack:aCt,BarStackHorizontal:lCt,Circle:QCt,Line:ak,LinePath:Bbe,LineRadial:Pwt,LinkHorizontal:dCt,LinkHorizontalCurve:bCt,LinkHorizontalLine:NCt,LinkHorizontalStep:FCt,LinkRadial:yCt,LinkRadialCurve:MCt,LinkRadialLine:OCt,LinkRadialStep:HCt,LinkVertical:pCt,LinkVerticalCurve:CCt,LinkVerticalLine:ICt,LinkVerticalStep:VCt,Pie:kwt,Polygon:qCt,STACK_OFFSETS:NE,STACK_OFFSET_NAMES:xwt,STACK_ORDERS:TE,STACK_ORDER_NAMES:vwt,SplitLinePath:o_e,Stack:Vbe,arc:LB,area:sk,degreesToRadians:Hbe,getPoint:s_e,getPoints:a_e,line:Tu,pathHorizontalCurve:Kbe,pathHorizontalDiagonal:zbe,pathHorizontalLine:Xbe,pathHorizontalStep:e_e,pathRadialCurve:Qbe,pathRadialDiagonal:qbe,pathRadialLine:Jbe,pathRadialStep:n_e,pathVerticalCurve:Ybe,pathVerticalDiagonal:Gbe,pathVerticalLine:Zbe,pathVerticalStep:t_e,pie:Lbe,radialLine:Dbe,stack:Fbe,stackOffset:rk,stackOrder:nk},Symbol.toStringTag,{value:"Module"})),kee="pplx://www.pplx.com";function DB({href:e,inApp:t,queryParams:n}){if(!t||e==null)return e;const r=new URL(e,kee);return n?.forEach((s,a)=>{r.searchParams.get(a)||r.searchParams.set(a,s??"")}),r.pathname.startsWith("/app")||(r.pathname.startsWith("/")?r.pathname=`/app${r.pathname}`:r.pathname=`/app/${r.pathname}`),r.href.replace(kee,"")}const Nu=I.memo(({children:e,href:t,...n})=>{const{inApp:r}=Vo(),s=Nt();return o.jsx(Ge,{...n,href:DB({href:t,inApp:r,queryParams:s}),children:e})});Nu.displayName="CanonicalLink";const rSt=I.memo(e=>e.href?o.jsx(Nu,{...e}):e.children);rSt.displayName="CanonicalLinkMaybe";const sSt=(e,t)=>{const{value:n,loading:r}=It({flag:"finance-india",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},aSt="pplx.finance-country",ik={US:"US",IN:"IN"},i_e=e=>ik[e?.toUpperCase()],oSt=e=>i_e(e)??ik.US,l_e=Wt("FinanceIndexContext",{country:ik.US,setCountry:()=>{},enabled:!1}),c_e=()=>{const e=f.useContext(l_e);if(!e)throw new Error("useFinanceCountry must be used within a FinanceCountryProvider");return e},iSt={US:ee({defaultMessage:"US Markets",id:"7T1wl9MB1D"}),IN:ee({defaultMessage:"India Markets",id:"ty1NgqpFg/"})},qnn=e=>iSt[e]??ee({defaultMessage:"Markets",id:"sITCHuqY3F"}),Knn=e=>{switch(e){case"IN":return"Asia/Kolkata";case"US":default:return"America/New_York"}},Ynn=({children:e})=>{const t=qm(),[n,r]=Ty(aSt,null),{session:s}=Et(),{variation:a}=sSt(!0,{userEmail:s?.user?.email??""}),i=i_e(n)??oSt(t??null);return o.jsx(l_e.Provider,{value:{country:a?i:ik.US,setCountry:r,enabled:a},children:e})},FB=I.memo(({value:e,format:t,suffix:n,animated:r=!0})=>{const{locale:s}=Z();return r?o.jsx(ci,{value:e,format:t,suffix:n}):o.jsx("span",{children:Intl.NumberFormat(s,t).format(e)})});FB.displayName="FinanceNumberFlow";const lSt=e=>e===0?"":e>0?"+":"-",cSt=(e,t)=>e===0||!t?null:e>0?ao:p8e,uSt=e=>e===0?"light":e>0?"positive":"negative",km=I.memo(({change:e,variant:t="small",includeIcon:n=!1,className:r,animated:s=!0,background:a=!0,mono:i=!0,format:l={style:"percent",minimumFractionDigits:0,maximumFractionDigits:e/100>1?0:2}})=>{const c=cSt(e,n);return o.jsxs(D,{variant:t,color:uSt(e),className:B("flex shrink-0 grow-0 items-center justify-center gap-[0.1em] rounded text-center font-mono",{"bg-positive/10":e>0&&a,"bg-negative/10":e<0&&a,"bg-subtle":e===0&&a,"px-[0.6em] py-[0.15em]":a,"!pl-[0.3em]":a&&n&&e!==0},r),children:[c?o.jsx(ce,{icon:c,className:B("inline-flex size-[1.2em]",{"!mt-px":i})}):o.jsx("span",{className:i?"font-mono":"",children:lSt(e)}),o.jsx("span",{className:B("whitespace-nowrap",{"font-mono":i}),children:o.jsx(FB,{value:Math.abs(e)/100,format:l,animated:s})})]})});km.displayName="FinancePriceChange";var UB=w_(),Qt=e=>__(e,UB),BB=w_();Qt.write=e=>__(e,BB);var lk=w_();Qt.onStart=e=>__(e,lk);var VB=w_();Qt.onFrame=e=>__(e,VB);var $B=w_();Qt.onFinish=e=>__(e,$B);var Oh=[];Qt.setTimeout=(e,t)=>{const n=Qt.now()+t,r=()=>{const a=Oh.findIndex(i=>i.cancel==r);~a&&Oh.splice(a,1),ed-=~a?1:0},s={time:n,handler:e,cancel:r};return Oh.splice(u_e(n),0,s),ed+=1,d_e(),s};var u_e=e=>~(~Oh.findIndex(t=>t.time>e)||~Oh.length);Qt.cancel=e=>{lk.delete(e),VB.delete(e),$B.delete(e),UB.delete(e),BB.delete(e)};Qt.sync=e=>{z8=!0,Qt.batchedUpdates(e),z8=!1};Qt.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...s){t=s,Qt.onStart(n)}return r.handler=e,r.cancel=()=>{lk.delete(n),t=null},r};var WB=typeof window<"u"?window.requestAnimationFrame:()=>{};Qt.use=e=>WB=e;Qt.now=typeof performance<"u"?()=>performance.now():Date.now;Qt.batchedUpdates=e=>e();Qt.catch=console.error;Qt.frameLoop="always";Qt.advance=()=>{Qt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):m_e()};var Ju=-1,ed=0,z8=!1;function __(e,t){z8?(t.delete(e),e(0)):(t.add(e),d_e())}function d_e(){Ju<0&&(Ju=0,Qt.frameLoop!=="demand"&&WB(f_e))}function dSt(){Ju=-1}function f_e(){~Ju&&(WB(f_e),Qt.batchedUpdates(m_e))}function m_e(){const e=Ju;Ju=Qt.now();const t=u_e(Ju);if(t&&(p_e(Oh.splice(0,t),n=>n.handler()),ed-=t),!ed){dSt();return}lk.flush(),UB.flush(e?Math.min(64,Ju-e):16.667),VB.flush(),BB.flush(),$B.flush()}function w_(){let e=new Set,t=e;return{add(n){ed+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return ed-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,ed-=t.size,p_e(t,r=>r(n)&&e.add(r)),ed+=e.size,t=e)}}}function p_e(e,t){e.forEach(n=>{try{t(n)}catch(r){Qt.catch(r)}})}var fSt=Object.defineProperty,mSt=(e,t)=>{for(var n in t)fSt(e,n,{get:t[n],enumerable:!0})},Yi={};mSt(Yi,{assign:()=>hSt,colors:()=>dd,createStringInterpolator:()=>zB,skipAnimation:()=>g_e,to:()=>h_e,willAdvance:()=>GB});function G8(){}var pSt=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),ze={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function Nc(e,t){if(ze.arr(e)){if(!ze.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var Ht=(e,t)=>e.forEach(t);function Ql(e,t,n){if(ze.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var Ma=e=>ze.und(e)?[]:ze.arr(e)?e:[e];function sx(e,t){if(e.size){const n=Array.from(e);e.clear(),Ht(n,t)}}var vv=(e,...t)=>sx(e,n=>n(...t)),HB=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),zB,h_e,dd=null,g_e=!1,GB=G8,hSt=e=>{e.to&&(h_e=e.to),e.now&&(Qt.now=e.now),e.colors!==void 0&&(dd=e.colors),e.skipAnimation!=null&&(g_e=e.skipAnimation),e.createStringInterpolator&&(zB=e.createStringInterpolator),e.requestAnimationFrame&&Qt.use(e.requestAnimationFrame),e.batchedUpdates&&(Qt.batchedUpdates=e.batchedUpdates),e.willAdvance&&(GB=e.willAdvance),e.frameLoop&&(Qt.frameLoop=e.frameLoop)},ax=new Set,ri=[],mA=[],AE=0,ck={get idle(){return!ax.size&&!ri.length},start(e){AE>e.priority?(ax.add(e),Qt.onStart(gSt)):(y_e(e),Qt(q8))},advance:q8,sort(e){if(AE)Qt.onFrame(()=>ck.sort(e));else{const t=ri.indexOf(e);~t&&(ri.splice(t,1),v_e(e))}},clear(){ri=[],ax.clear()}};function gSt(){ax.forEach(y_e),ax.clear(),Qt(q8)}function y_e(e){ri.includes(e)||v_e(e)}function v_e(e){ri.splice(ySt(ri,t=>t.priority>e.priority),0,e)}function q8(e){const t=mA;for(let n=0;n<ri.length;n++){const r=ri[n];AE=r.priority,r.idle||(GB(r),r.advance(e),r.idle||t.push(r))}return AE=0,mA=ri,mA.length=0,ri=t,ri.length>0}function ySt(e,t){const n=e.findIndex(t);return n<0?e.length:n}var vSt={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Pi="[-+]?\\d*\\.?\\d+",IE=Pi+"%";function uk(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var xSt=new RegExp("rgb"+uk(Pi,Pi,Pi)),bSt=new RegExp("rgba"+uk(Pi,Pi,Pi,Pi)),_St=new RegExp("hsl"+uk(Pi,IE,IE)),wSt=new RegExp("hsla"+uk(Pi,IE,IE,Pi)),CSt=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,SSt=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ESt=/^#([0-9a-fA-F]{6})$/,MSt=/^#([0-9a-fA-F]{8})$/;function kSt(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=ESt.exec(e))?parseInt(t[1]+"ff",16)>>>0:dd&&dd[e]!==void 0?dd[e]:(t=xSt.exec(e))?(jp(t[1])<<24|jp(t[2])<<16|jp(t[3])<<8|255)>>>0:(t=bSt.exec(e))?(jp(t[1])<<24|jp(t[2])<<16|jp(t[3])<<8|jee(t[4]))>>>0:(t=CSt.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=MSt.exec(e))?parseInt(t[1],16)>>>0:(t=SSt.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=_St.exec(e))?(Tee(Nee(t[1]),EC(t[2]),EC(t[3]))|255)>>>0:(t=wSt.exec(e))?(Tee(Nee(t[1]),EC(t[2]),EC(t[3]))|jee(t[4]))>>>0:null}function pA(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Tee(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,a=pA(s,r,e+1/3),i=pA(s,r,e),l=pA(s,r,e-1/3);return Math.round(a*255)<<24|Math.round(i*255)<<16|Math.round(l*255)<<8}function jp(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Nee(e){return(parseFloat(e)%360+360)%360/360}function jee(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function EC(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Aee(e){let t=kSt(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,a=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${a})`}var j1=(e,t,n)=>{if(ze.fun(e))return e;if(ze.arr(e))return j1({range:e,output:t,extrapolate:n});if(ze.str(e.output[0]))return zB(e);const r=e,s=r.output,a=r.range||[0,1],i=r.extrapolateLeft||r.extrapolate||"extend",l=r.extrapolateRight||r.extrapolate||"extend",c=r.easing||(u=>u);return u=>{const d=NSt(u,a);return TSt(u,a[d],a[d+1],s[d],s[d+1],c,i,l,r.map)}};function TSt(e,t,n,r,s,a,i,l,c){let u=c?c(e):e;if(u<t){if(i==="identity")return u;i==="clamp"&&(u=t)}if(u>n){if(l==="identity")return u;l==="clamp"&&(u=n)}return r===s?r:t===n?e<=t?r:s:(t===-1/0?u=-u:n===1/0?u=u-t:u=(u-t)/(n-t),u=a(u),r===-1/0?u=-u:s===1/0?u=u+r:u=u*(s-r)+r,u)}function NSt(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var jSt={linear:e=>e},A1=Symbol.for("FluidValue.get"),wg=Symbol.for("FluidValue.observers"),ni=e=>!!(e&&e[A1]),Ha=e=>e&&e[A1]?e[A1]():e,Iee=e=>e[wg]||null;function ASt(e,t){e.eventObserved?e.eventObserved(t):e(t)}function I1(e,t){const n=e[wg];n&&n.forEach(r=>{ASt(r,t)})}var x_e=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");ISt(this,e)}},ISt=(e,t)=>b_e(e,A1,t);function qy(e,t){if(e[A1]){let n=e[wg];n||b_e(e,wg,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function R1(e,t){const n=e[wg];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[wg]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var b_e=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),US=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,RSt=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Ree=new RegExp(`(${US.source})(%|[a-z]+)`,"i"),PSt=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,dk=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,__e=e=>{const[t,n]=OSt(e);if(!t||HB())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||e}else{if(n&&dk.test(n))return __e(n);if(n)return n}return e},OSt=e=>{const t=dk.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},hA,LSt=(e,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,w_e=e=>{hA||(hA=dd?new RegExp(`(${Object.keys(dd).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(a=>Ha(a).replace(dk,__e).replace(RSt,Aee).replace(hA,Aee)),n=t.map(a=>a.match(US).map(Number)),s=n[0].map((a,i)=>n.map(l=>{if(!(i in l))throw Error('The arity of each "output" value must be equal');return l[i]})).map(a=>j1({...e,output:a}));return a=>{const i=!Ree.test(t[0])&&t.find(c=>Ree.test(c))?.replace(US,"");let l=0;return t[0].replace(US,()=>`${s[l++](a)}${i||""}`).replace(PSt,LSt)}},qB="react-spring: ",C_e=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${qB}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},DSt=C_e(console.warn);function FSt(){DSt(`${qB}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var USt=C_e(console.warn);function BSt(){USt(`${qB}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function fk(e){return ze.str(e)&&(e[0]=="#"||/\d/.test(e)||!HB()&&dk.test(e)||e in(dd||{}))}var Wf=HB()?f.useEffect:f.useLayoutEffect,VSt=()=>{const e=f.useRef(!1);return Wf(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function KB(){const e=f.useState()[1],t=VSt();return()=>{t.current&&e(Math.random())}}function $St(e,t){const[n]=f.useState(()=>({inputs:t,result:e()})),r=f.useRef(),s=r.current;let a=s;return a?t&&a.inputs&&WSt(t,a.inputs)||(a={inputs:t,result:e()}):a=n,f.useEffect(()=>{r.current=a,s==n&&(n.inputs=n.result=void 0)},[a]),a.result}function WSt(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var YB=e=>f.useEffect(e,HSt),HSt=[];function K8(e){const t=f.useRef();return f.useEffect(()=>{t.current=e}),t.current}var P1=Symbol.for("Animated:node"),zSt=e=>!!e&&e[P1]===e,yl=e=>e&&e[P1],QB=(e,t)=>pSt(e,P1,t),mk=e=>e&&e[P1]&&e[P1].getPayload(),S_e=class{constructor(){QB(this,this)}getPayload(){return this.payload||[]}},C_=class extends S_e{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,ze.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new C_(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return ze.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,ze.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},O1=class extends C_{constructor(e){super(0),this._string=null,this._toString=j1({output:[e,e]})}static create(e){return new O1(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(ze.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=j1({output:[this.getValue(),e]})),this._value=0,super.reset()}},RE={dependencies:null},pk=class extends S_e{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Ql(this.source,(n,r)=>{zSt(n)?t[r]=n.getValue(e):ni(n)?t[r]=Ha(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Ht(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Ql(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){RE.dependencies&&ni(e)&&RE.dependencies.add(e);const t=mk(e);t&&Ht(t,n=>this.add(n))}},E_e=class extends pk{constructor(e){super(e)}static create(e){return new E_e(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(GSt)),!0)}};function GSt(e){return(fk(e)?O1:C_).create(e)}function Y8(e){const t=yl(e);return t?t.constructor:ze.arr(e)?E_e:fk(e)?O1:C_}var Pee=(e,t)=>{const n=!ze.fun(e)||e.prototype&&e.prototype.isReactComponent;return f.forwardRef((r,s)=>{const a=f.useRef(null),i=n&&f.useCallback(g=>{a.current=YSt(s,g)},[s]),[l,c]=KSt(r,t),u=KB(),d=()=>{const g=a.current;if(n&&!g)return;(g?t.applyAnimatedValues(g,l.getValue(!0)):!1)===!1&&u()},m=new qSt(d,c),p=f.useRef();Wf(()=>(p.current=m,Ht(c,g=>qy(g,m)),()=>{p.current&&(Ht(p.current.deps,g=>R1(g,p.current)),Qt.cancel(p.current.update))})),f.useEffect(d,[]),YB(()=>()=>{const g=p.current;Ht(g.deps,y=>R1(y,g))});const h=t.getComponentProps(l.getValue());return f.createElement(e,{...h,ref:i})})},qSt=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&Qt.write(this.update)}};function KSt(e,t){const n=new Set;return RE.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new pk(e),RE.dependencies=null,[e,n]}function YSt(e,t){return e&&(ze.fun(e)?e(t):e.current=t),t}var Oee=Symbol.for("AnimatedComponent"),QSt=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new pk(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},a=i=>{const l=Lee(i)||"Anonymous";return ze.str(i)?i=a[i]||(a[i]=Pee(i,s)):i=i[Oee]||(i[Oee]=Pee(i,s)),i.displayName=`Animated(${l})`,i};return Ql(e,(i,l)=>{ze.arr(e)&&(l=Lee(i)),a[l]=a(i)}),{animated:a}},Lee=e=>ze.str(e)?e:e&&ze.str(e.displayName)?e.displayName:ze.fun(e)&&e.name||null;function za(e,...t){return ze.fun(e)?e(...t):e}var ox=(e,t)=>e===!0||!!(t&&e&&(ze.fun(e)?e(t):Ma(e).includes(t))),M_e=(e,t)=>ze.obj(e)?t&&e[t]:e,k_e=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,XSt=e=>e,hk=(e,t=XSt)=>{let n=ZSt;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const s of n){const a=t(e[s],s);ze.und(a)||(r[s]=a)}return r},ZSt=["config","onProps","onStart","onChange","onPause","onResume","onRest"],JSt={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function e2t(e){const t={};let n=0;if(Ql(e,(r,s)=>{JSt[s]||(t[s]=r,n++)}),n)return t}function XB(e){const t=e2t(e);if(t){const n={to:t};return Ql(e,(r,s)=>s in t||(n[s]=r)),n}return{...e}}function L1(e){return e=Ha(e),ze.arr(e)?e.map(L1):fk(e)?Yi.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function T_e(e){for(const t in e)return!0;return!1}function Q8(e){return ze.fun(e)||ze.arr(e)&&ze.obj(e[0])}function X8(e,t){e.ref?.delete(e),t?.delete(e)}function N_e(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var t2t={default:{tension:170,friction:26}},Z8={...t2t.default,mass:1,damping:1,easing:jSt.linear,clamp:!1},n2t=class{constructor(){this.velocity=0,Object.assign(this,Z8)}};function r2t(e,t,n){n&&(n={...n},Dee(n,t),t={...n,...t}),Dee(e,t),Object.assign(e,t);for(const i in Z8)e[i]==null&&(e[i]=Z8[i]);let{frequency:r,damping:s}=e;const{mass:a}=e;return ze.und(r)||(r<.01&&(r=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/r,2)*a,e.friction=4*Math.PI*s*a/r),e}function Dee(e,t){if(!ze.und(t.decay))e.duration=void 0;else{const n=!ze.und(t.tension)||!ze.und(t.friction);(n||!ze.und(t.frequency)||!ze.und(t.damping)||!ze.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var Fee=[],s2t=class{constructor(){this.changed=!1,this.values=Fee,this.toValues=null,this.fromValues=Fee,this.config=new n2t,this.immediate=!1}};function j_e(e,{key:t,props:n,defaultProps:r,state:s,actions:a}){return new Promise((i,l)=>{let c,u,d=ox(n.cancel??r?.cancel,t);if(d)h();else{ze.und(n.pause)||(s.paused=ox(n.pause,t));let g=r?.pause;g!==!0&&(g=s.paused||ox(g,t)),c=za(n.delay||0,t),g?(s.resumeQueue.add(p),a.pause()):(a.resume(),p())}function m(){s.resumeQueue.add(p),s.timeouts.delete(u),u.cancel(),c=u.time-Qt.now()}function p(){c>0&&!Yi.skipAnimation?(s.delayed=!0,u=Qt.setTimeout(h,c),s.pauseQueue.add(m),s.timeouts.add(u)):h()}function h(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(m),s.timeouts.delete(u),e<=(s.cancelId||0)&&(d=!0);try{a.start({...n,callId:e,cancel:d},i)}catch(g){l(g)}}})}var ZB=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?Lh(e.get()):t.every(n=>n.noop)?A_e(e.get()):ji(e.get(),t.every(n=>n.finished)),A_e=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),ji=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),Lh=e=>({value:e,cancelled:!0,finished:!1});function I_e(e,t,n,r){const{callId:s,parentId:a,onRest:i}=t,{asyncTo:l,promise:c}=n;return!a&&e===l&&!t.reset?c:n.promise=(async()=>{n.asyncId=s,n.asyncTo=e;const u=hk(t,(v,x)=>x==="onRest"?void 0:v);let d,m;const p=new Promise((v,x)=>(d=v,m=x)),h=v=>{const x=s<=(n.cancelId||0)&&Lh(r)||s!==n.asyncId&&ji(r,!1);if(x)throw v.result=x,m(v),v},g=(v,x)=>{const b=new Uee,_=new Bee;return(async()=>{if(Yi.skipAnimation)throw D1(n),_.result=ji(r,!1),m(_),_;h(b);const w=ze.obj(v)?{...v}:{...x,to:v};w.parentId=s,Ql(u,(S,E)=>{ze.und(w[E])&&(w[E]=S)});const C=await r.start(w);return h(b),n.paused&&await new Promise(S=>{n.resumeQueue.add(S)}),C})()};let y;if(Yi.skipAnimation)return D1(n),ji(r,!1);try{let v;ze.arr(e)?v=(async x=>{for(const b of x)await g(b)})(e):v=Promise.resolve(e(g,r.stop.bind(r))),await Promise.all([v.then(d),p]),y=ji(r.get(),!0,!1)}catch(v){if(v instanceof Uee)y=v.result;else if(v instanceof Bee)y=v.result;else throw v}finally{s==n.asyncId&&(n.asyncId=a,n.asyncTo=a?l:void 0,n.promise=a?c:void 0)}return ze.fun(i)&&Qt.batchedUpdates(()=>{i(y,r,r.item)}),y})()}function D1(e,t){sx(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Uee=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Bee=class extends Error{constructor(){super("SkipAnimationSignal")}},J8=e=>e instanceof JB,a2t=1,JB=class extends x_e{constructor(){super(...arguments),this.id=a2t++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=yl(this);return e&&e.getValue()}to(...e){return Yi.to(this,e)}interpolate(...e){return FSt(),Yi.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){I1(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||ck.sort(this),I1(this,{type:"priority",parent:this,priority:e})}},Tm=Symbol.for("SpringPhase"),R_e=1,P_e=2,O_e=4,gA=e=>(e[Tm]&R_e)>0,Du=e=>(e[Tm]&P_e)>0,K0=e=>(e[Tm]&O_e)>0,Vee=(e,t)=>t?e[Tm]|=P_e|R_e:e[Tm]&=-3,$ee=(e,t)=>t?e[Tm]|=O_e:e[Tm]&=-5,o2t=class extends JB{constructor(e,t){if(super(),this.animation=new s2t,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ze.und(e)||!ze.und(t)){const n=ze.obj(e)?{...e}:{...t,from:e};ze.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Du(this)||this._state.asyncTo)||K0(this)}get goal(){return Ha(this.animation.to)}get velocity(){const e=yl(this);return e instanceof C_?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return gA(this)}get isAnimating(){return Du(this)}get isPaused(){return K0(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:a}=r,i=mk(r.to);!i&&ni(r.to)&&(s=Ma(Ha(r.to))),r.values.forEach((u,d)=>{if(u.done)return;const m=u.constructor==O1?1:i?i[d].lastPosition:s[d];let p=r.immediate,h=m;if(!p){if(h=u.lastPosition,a.tension<=0){u.done=!0;return}let g=u.elapsedTime+=e;const y=r.fromValues[d],v=u.v0!=null?u.v0:u.v0=ze.arr(a.velocity)?a.velocity[d]:a.velocity;let x;const b=a.precision||(y==m?.005:Math.min(1,Math.abs(m-y)*.001));if(ze.und(a.duration))if(a.decay){const _=a.decay===!0?.998:a.decay,w=Math.exp(-(1-_)*g);h=y+v/(1-_)*(1-w),p=Math.abs(u.lastPosition-h)<=b,x=v*w}else{x=u.lastVelocity==null?v:u.lastVelocity;const _=a.restVelocity||b/10,w=a.clamp?0:a.bounce,C=!ze.und(w),S=y==m?u.v0>0:y<m;let E,M=!1;const k=1,A=Math.ceil(e/k);for(let R=0;R<A&&(E=Math.abs(x)>_,!(!E&&(p=Math.abs(m-h)<=b,p)));++R){C&&(M=h==m||h>m==S,M&&(x=-x*w,h=m));const O=-a.tension*1e-6*(h-m),L=-a.friction*.001*x,P=(O+L)/a.mass;x=x+P*k,h=h+x*k}}else{let _=1;a.duration>0&&(this._memoizedDuration!==a.duration&&(this._memoizedDuration=a.duration,u.durationProgress>0&&(u.elapsedTime=a.duration*u.durationProgress,g=u.elapsedTime+=e)),_=(a.progress||0)+g/this._memoizedDuration,_=_>1?1:_<0?0:_,u.durationProgress=_),h=y+a.easing(_)*(m-y),x=(h-u.lastPosition)/e,p=_==1}u.lastVelocity=x,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),p=!0)}i&&!i[d].done&&(p=!1),p?u.done=!0:t=!1,u.setValue(h,a.round)&&(n=!0)});const l=yl(this),c=l.getValue();if(t){const u=Ha(r.to);(c!==u||n)&&!a.decay?(l.setValue(u),this._onChange(u)):n&&a.decay&&this._onChange(c),this._stop()}else n&&this._onChange(c)}set(e){return Qt.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Du(this)){const{to:e,config:t}=this.animation;Qt.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return ze.und(e)?(n=this.queue||[],this.queue=[]):n=[ze.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>ZB(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),D1(this._state,e&&this._lastCallId),Qt.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=ze.obj(n)?n[t]:n,(n==null||Q8(n))&&(n=void 0),r=ze.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:n,from:r};return gA(this)||(e.reverse&&([n,r]=[r,n]),r=Ha(r),ze.und(r)?yl(this)||this._set(n):this._set(r)),s}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,hk(e,(i,l)=>/^on/.test(l)?M_e(i,n):i)),Hee(this,e,"onProps"),Q0(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return j_e(++this._lastCallId,{key:n,props:e,defaultProps:r,state:a,actions:{pause:()=>{K0(this)||($ee(this,!0),vv(a.pauseQueue),Q0(this,"onPause",ji(this,Y0(this,this.animation.to)),this))},resume:()=>{K0(this)&&($ee(this,!1),Du(this)&&this._resume(),vv(a.resumeQueue),Q0(this,"onResume",ji(this,Y0(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(i=>{if(e.loop&&i.finished&&!(t&&i.noop)){const l=L_e(e);if(l)return this._update(l,!0)}return i})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(Lh(this));const r=!ze.und(e.to),s=!ze.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(Lh(this));const{key:a,defaultProps:i,animation:l}=this,{to:c,from:u}=l;let{to:d=c,from:m=u}=e;s&&!r&&(!t.default||ze.und(d))&&(d=m),t.reverse&&([d,m]=[m,d]);const p=!Nc(m,u);p&&(l.from=m),m=Ha(m);const h=!Nc(d,c);h&&this._focus(d);const g=Q8(t.to),{config:y}=l,{decay:v,velocity:x}=y;(r||s)&&(y.velocity=0),t.config&&!g&&r2t(y,za(t.config,a),t.config!==i.config?za(i.config,a):void 0);let b=yl(this);if(!b||ze.und(d))return n(ji(this,!0));const _=ze.und(t.reset)?s&&!t.default:!ze.und(m)&&ox(t.reset,a),w=_?m:this.get(),C=L1(d),S=ze.num(C)||ze.arr(C)||fk(C),E=!g&&(!S||ox(i.immediate||t.immediate,a));if(h){const R=Y8(d);if(R!==b.constructor)if(E)b=this._set(C);else throw Error(`Cannot animate between ${b.constructor.name} and ${R.name}, as the "to" prop suggests`)}const M=b.constructor;let k=ni(d),A=!1;if(!k){const R=_||!gA(this)&&p;(h||R)&&(A=Nc(L1(w),C),k=!A),(!Nc(l.immediate,E)&&!E||!Nc(y.decay,v)||!Nc(y.velocity,x))&&(k=!0)}if(A&&Du(this)&&(l.changed&&!_?k=!0:k||this._stop(c)),!g&&((k||ni(c))&&(l.values=b.getPayload(),l.toValues=ni(d)?null:M==O1?[1]:Ma(C)),l.immediate!=E&&(l.immediate=E,!E&&!_&&this._set(c)),k)){const{onRest:R}=l;Ht(l2t,L=>Hee(this,t,L));const O=ji(this,Y0(this,c));vv(this._pendingCalls,O),this._pendingCalls.add(n),l.changed&&Qt.batchedUpdates(()=>{l.changed=!_,R?.(O,this),_?za(i.onRest,O):l.onStart?.(O,this)})}_&&this._set(w),g?n(I_e(t.to,t,this._state,this)):k?this._start():Du(this)&&!h?this._pendingCalls.add(n):n(A_e(w))}_focus(e){const t=this.animation;e!==t.to&&(Iee(this)&&this._detach(),t.to=e,Iee(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;ni(t)&&(qy(t,this),J8(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;ni(e)&&R1(e,this)}_set(e,t=!0){const n=Ha(e);if(!ze.und(n)){const r=yl(this);if(!r||!Nc(n,r.getValue())){const s=Y8(n);!r||r.constructor!=s?QB(this,s.create(n)):r.setValue(n),r&&Qt.batchedUpdates(()=>{this._onChange(n,t)})}}return yl(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Q0(this,"onStart",ji(this,Y0(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),za(this.animation.onChange,e,this)),za(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;yl(this).reset(Ha(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Du(this)||(Vee(this,!0),K0(this)||this._resume())}_resume(){Yi.skipAnimation?this.finish():ck.start(this)}_stop(e,t){if(Du(this)){Vee(this,!1);const n=this.animation;Ht(n.values,s=>{s.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),I1(this,{type:"idle",parent:this});const r=t?Lh(this.get()):ji(this.get(),Y0(this,e??n.to));vv(this._pendingCalls,r),n.changed&&(n.changed=!1,Q0(this,"onRest",r,this))}}};function Y0(e,t){const n=L1(t),r=L1(e.get());return Nc(r,n)}function L_e(e,t=e.loop,n=e.to){const r=za(t);if(r){const s=r!==!0&&XB(r),a=(s||e).reverse,i=!s||s.reset;return F1({...e,loop:t,default:!1,pause:void 0,to:!a||Q8(n)?n:void 0,from:i?e.from:void 0,reset:i,...s})}}function F1(e){const{to:t,from:n}=e=XB(e),r=new Set;return ze.obj(t)&&Wee(t,r),ze.obj(n)&&Wee(n,r),e.keys=r.size?Array.from(r):null,e}function i2t(e){const t=F1(e);return ze.und(t.default)&&(t.default=hk(t)),t}function Wee(e,t){Ql(e,(n,r)=>n!=null&&t.add(r))}var l2t=["onStart","onRest","onChange","onPause","onResume"];function Hee(e,t,n){e.animation[n]=t[n]!==k_e(t,n)?M_e(t[n],e.key):void 0}function Q0(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var c2t=["onStart","onChange","onRest"],u2t=1,D_e=class{constructor(e,t){this.id=u2t++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];ze.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(F1(e)),this}start(e){let{queue:t}=this;return e?t=Ma(e).map(F1):this.queue=[],this._flush?this._flush(this,t):($_e(this,t),e9(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;Ht(Ma(t),r=>n[r].stop(!!e))}else D1(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(ze.und(e))this.start({pause:!0});else{const t=this.springs;Ht(Ma(e),n=>t[n].pause())}return this}resume(e){if(ze.und(e))this.start({pause:!1});else{const t=this.springs;Ht(Ma(e),n=>t[n].resume())}return this}each(e){Ql(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,sx(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const a=!r&&this._started,i=s||a&&n.size?this.get():null;s&&t.size&&sx(t,([l,c])=>{c.value=i,l(c,this,this._item)}),a&&(this._started=!1,sx(n,([l,c])=>{c.value=i,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;Qt.onFrame(this._onFrame)}};function e9(e,t){return Promise.all(t.map(n=>F_e(e,n))).then(n=>ZB(e,n))}async function F_e(e,t,n){const{keys:r,to:s,from:a,loop:i,onRest:l,onResolve:c}=t,u=ze.obj(t.default)&&t.default;i&&(t.loop=!1),s===!1&&(t.to=null),a===!1&&(t.from=null);const d=ze.arr(s)||ze.fun(s)?s:void 0;d?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):Ht(c2t,y=>{const v=t[y];if(ze.fun(v)){const x=e._events[y];t[y]=({finished:b,cancelled:_})=>{const w=x.get(v);w?(b||(w.finished=!1),_&&(w.cancelled=!0)):x.set(v,{value:null,finished:b||!1,cancelled:_||!1})},u&&(u[y]=t[y])}});const m=e._state;t.pause===!m.paused?(m.paused=t.pause,vv(t.pause?m.pauseQueue:m.resumeQueue)):m.paused&&(t.pause=!0);const p=(r||Object.keys(e.springs)).map(y=>e.springs[y].start(t)),h=t.cancel===!0||k_e(t,"cancel")===!0;(d||h&&m.asyncId)&&p.push(j_e(++e._lastAsyncId,{props:t,state:m,actions:{pause:G8,resume:G8,start(y,v){h?(D1(m,e._lastAsyncId),v(Lh(e))):(y.onRest=l,v(I_e(d,y,m,e)))}}})),m.paused&&await new Promise(y=>{m.resumeQueue.add(y)});const g=ZB(e,await Promise.all(p));if(i&&g.finished&&!(n&&g.noop)){const y=L_e(t,i,s);if(y)return $_e(e,[y]),F_e(e,y,!0)}return c&&Qt.batchedUpdates(()=>c(g,e,e.item)),g}function t9(e,t){const n={...e.springs};return t&&Ht(Ma(t),r=>{ze.und(r.keys)&&(r=F1(r)),ze.obj(r.to)||(r={...r,to:void 0}),V_e(n,r,s=>B_e(s))}),U_e(e,n),n}function U_e(e,t){Ql(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,qy(n,e))})}function B_e(e,t){const n=new o2t;return n.key=e,t&&qy(n,t),n}function V_e(e,t,n){t.keys&&Ht(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function $_e(e,t){Ht(t,n=>{V_e(e.springs,n,r=>B_e(r,e))})}var S_=({children:e,...t})=>{const n=f.useContext(PE),r=t.pause||!!n.pause,s=t.immediate||!!n.immediate;t=$St(()=>({pause:r,immediate:s}),[r,s]);const{Provider:a}=PE;return f.createElement(a,{value:t},e)},PE=d2t(S_,{});S_.Provider=PE.Provider;S_.Consumer=PE.Consumer;function d2t(e,t){return Object.assign(e,f.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var W_e=()=>{const e=[],t=function(r){BSt();const s=[];return Ht(e,(a,i)=>{if(ze.und(r))s.push(a.start());else{const l=n(r,a,i);l&&s.push(a.start(l))}}),s};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const s=e.indexOf(r);~s&&e.splice(s,1)},t.pause=function(){return Ht(e,r=>r.pause(...arguments)),this},t.resume=function(){return Ht(e,r=>r.resume(...arguments)),this},t.set=function(r){Ht(e,(s,a)=>{const i=ze.fun(r)?r(a,s):r;i&&s.set(i)})},t.start=function(r){const s=[];return Ht(e,(a,i)=>{if(ze.und(r))s.push(a.start());else{const l=this._getProps(r,a,i);l&&s.push(a.start(l))}}),s},t.stop=function(){return Ht(e,r=>r.stop(...arguments)),this},t.update=function(r){return Ht(e,(s,a)=>s.update(this._getProps(r,s,a))),this};const n=function(r,s,a){return ze.fun(r)?r(a,s):r};return t._getProps=n,t};function f2t(e,t,n){const r=ze.fun(t)&&t;r&&!n&&(n=[]);const s=f.useMemo(()=>r||arguments.length==3?W_e():void 0,[]),a=f.useRef(0),i=KB(),l=f.useMemo(()=>({ctrls:[],queue:[],flush(x,b){const _=t9(x,b);return a.current>0&&!l.queue.length&&!Object.keys(_).some(C=>!x.springs[C])?e9(x,b):new Promise(C=>{U_e(x,_),l.queue.push(()=>{C(e9(x,b))}),i()})}}),[]),c=f.useRef([...l.ctrls]),u=[],d=K8(e)||0;f.useMemo(()=>{Ht(c.current.slice(e,d),x=>{X8(x,s),x.stop(!0)}),c.current.length=e,m(d,e)},[e]),f.useMemo(()=>{m(0,Math.min(d,e))},n);function m(x,b){for(let _=x;_<b;_++){const w=c.current[_]||(c.current[_]=new D_e(null,l.flush)),C=r?r(_,w):t[_];C&&(u[_]=i2t(C))}}const p=c.current.map((x,b)=>t9(x,u[b])),h=f.useContext(S_),g=K8(h),y=h!==g&&T_e(h);Wf(()=>{a.current++,l.ctrls=c.current;const{queue:x}=l;x.length&&(l.queue=[],Ht(x,b=>b())),Ht(c.current,(b,_)=>{s?.add(b),y&&b.start({default:h});const w=u[_];w&&(N_e(b,w.ref),b.ref?b.queue.push(w):b.start(w))})}),YB(()=>()=>{Ht(l.ctrls,x=>x.stop(!0))});const v=p.map(x=>({...x}));return s?[v,s]:v}function eV(e,t){const n=ze.fun(e),[[r],s]=f2t(1,n?e:[e],n?[]:t);return n||arguments.length==2?[r,s]:r}function tV(e,t,n){const r=ze.fun(t)&&t,{reset:s,sort:a,trail:i=0,expires:l=!0,exitBeforeEnter:c=!1,onDestroyed:u,ref:d,config:m}=r?r():t,p=f.useMemo(()=>r||arguments.length==3?W_e():void 0,[]),h=Ma(e),g=[],y=f.useRef(null),v=s?null:y.current;Wf(()=>{y.current=g}),YB(()=>(Ht(g,P=>{p?.add(P.ctrl),P.ctrl.ref=p}),()=>{Ht(y.current,P=>{P.expired&&clearTimeout(P.expirationId),X8(P.ctrl,p),P.ctrl.stop(!0)})}));const x=p2t(h,r?r():t,v),b=s&&y.current||[];Wf(()=>Ht(b,({ctrl:P,item:N,key:T})=>{X8(P,p),za(u,N,T)}));const _=[];if(v&&Ht(v,(P,N)=>{P.expired?(clearTimeout(P.expirationId),b.push(P)):(N=_[N]=x.indexOf(P.key),~N&&(g[N]=P))}),Ht(h,(P,N)=>{g[N]||(g[N]={key:x[N],item:P,phase:"mount",ctrl:new D_e},g[N].ctrl.item=P)}),_.length){let P=-1;const{leave:N}=r?r():t;Ht(_,(T,j)=>{const F=v[j];~T?(P=g.indexOf(F),g[P]={...F,item:h[T]}):N&&g.splice(++P,0,F)})}ze.fun(a)&&g.sort((P,N)=>a(P.item,N.item));let w=-i;const C=KB(),S=hk(t),E=new Map,M=f.useRef(new Map),k=f.useRef(!1);Ht(g,(P,N)=>{const T=P.key,j=P.phase,F=r?r():t;let U,V;const $=za(F.delay||0,T);if(j=="mount")U=F.enter,V="enter";else{const W=x.indexOf(T)<0;if(j!="leave")if(W)U=F.leave,V="leave";else if(U=F.update)V="update";else return;else if(!W)U=F.enter,V="enter";else return}if(U=za(U,P.item,N),U=ze.obj(U)?XB(U):{to:U},!U.config){const W=m||S.config;U.config=za(W,P.item,N,V)}w+=i;const z={...S,delay:$+w,ref:d,immediate:F.immediate,reset:!1,...U};if(V=="enter"&&ze.und(z.from)){const W=r?r():t,X=ze.und(W.initial)||v?W.from:W.initial;z.from=za(X,P.item,N)}const{onResolve:Q}=z;z.onResolve=W=>{za(Q,W);const X=y.current,G=X.find(J=>J.key===T);if(G&&!(W.cancelled&&G.phase!="update")&&G.ctrl.idle){const J=X.every(q=>q.ctrl.idle);if(G.phase=="leave"){const q=za(l,G.item);if(q!==!1){const te=q===!0?0:q;if(G.expired=!0,!J&&te>0){te<=2147483647&&(G.expirationId=setTimeout(C,te));return}}}J&&X.some(q=>q.expired)&&(M.current.delete(G),c&&(k.current=!0),C())}};const Y=t9(P.ctrl,z);V==="leave"&&c?M.current.set(P,{phase:V,springs:Y,payload:z}):E.set(P,{phase:V,springs:Y,payload:z})});const A=f.useContext(S_),R=K8(A),O=A!==R&&T_e(A);Wf(()=>{O&&Ht(g,P=>{P.ctrl.start({default:A})})},[A]),Ht(E,(P,N)=>{if(M.current.size){const T=g.findIndex(j=>j.key===N.key);g.splice(T,1)}}),Wf(()=>{Ht(M.current.size?M.current:E,({phase:P,payload:N},T)=>{const{ctrl:j}=T;T.phase=P,p?.add(j),O&&P=="enter"&&j.start({default:A}),N&&(N_e(j,N.ref),(j.ref||p)&&!k.current?j.update(N):(j.start(N),k.current&&(k.current=!1)))})},s?void 0:n);const L=P=>f.createElement(f.Fragment,null,g.map((N,T)=>{const{springs:j}=E.get(N)||N.ctrl,F=P({...j},N.item,N,T);return F&&F.type?f.createElement(F.type,{...F.props,key:ze.str(N.key)||ze.num(N.key)?N.key:N.ctrl.id,ref:F.ref}):F}));return p?[L,p]:L}var m2t=1;function p2t(e,{key:t,keys:n=t},r){if(n===null){const s=new Set;return e.map(a=>{const i=r&&r.find(l=>l.item===a&&l.phase!=="leave"&&!s.has(l));return i?(s.add(i),i.key):m2t++})}return ze.und(n)?e:ze.fun(n)?e.map(n):Ma(n)}var H_e=class extends JB{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=j1(...t);const n=this._get(),r=Y8(n);QB(this,r.create(n))}advance(e){const t=this._get(),n=this.get();Nc(t,n)||(yl(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&zee(this._active)&&yA(this)}_get(){const e=ze.arr(this.source)?this.source.map(Ha):Ma(Ha(this.source));return this.calc(...e)}_start(){this.idle&&!zee(this._active)&&(this.idle=!1,Ht(mk(this),e=>{e.done=!1}),Yi.skipAnimation?(Qt.batchedUpdates(()=>this.advance()),yA(this)):ck.start(this))}_attach(){let e=1;Ht(Ma(this.source),t=>{ni(t)&&qy(t,this),J8(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){Ht(Ma(this.source),e=>{ni(e)&&R1(e,this)}),this._active.clear(),yA(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Ma(this.source).reduce((t,n)=>Math.max(t,(J8(n)?n.priority:0)+1),0))}};function h2t(e){return e.idle!==!1}function zee(e){return!e.size||Array.from(e).every(h2t)}function yA(e){e.idle||(e.idle=!0,Ht(mk(e),t=>{t.done=!0}),I1(e,{type:"idle",parent:e}))}var g2t=(e,...t)=>new H_e(e,t);Yi.assign({createStringInterpolator:w_e,to:(e,t)=>new H_e(e,t)});var z_e=/^--/;function y2t(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!z_e.test(e)&&!(ix.hasOwnProperty(e)&&ix[e])?t+"px":(""+t).trim()}var Gee={};function v2t(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:r,style:s,children:a,scrollTop:i,scrollLeft:l,viewBox:c,...u}=t,d=Object.values(u),m=Object.keys(u).map(p=>n||e.hasAttribute(p)?p:Gee[p]||(Gee[p]=p.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));a!==void 0&&(e.textContent=a);for(const p in s)if(s.hasOwnProperty(p)){const h=y2t(p,s[p]);z_e.test(p)?e.style.setProperty(p,h):e.style[p]=h}m.forEach((p,h)=>{e.setAttribute(p,d[h])}),r!==void 0&&(e.className=r),i!==void 0&&(e.scrollTop=i),l!==void 0&&(e.scrollLeft=l),c!==void 0&&e.setAttribute("viewBox",c)}var ix={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},x2t=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),b2t=["Webkit","Ms","Moz","O"];ix=Object.keys(ix).reduce((e,t)=>(b2t.forEach(n=>e[x2t(n,t)]=e[t]),e),ix);var _2t=/^(matrix|translate|scale|rotate|skew)/,w2t=/^(translate)/,C2t=/^(rotate|skew)/,vA=(e,t)=>ze.num(e)&&e!==0?e+t:e,BS=(e,t)=>ze.arr(e)?e.every(n=>BS(n,t)):ze.num(e)?e===t:parseFloat(e)===t,S2t=class extends pk{constructor({x:e,y:t,z:n,...r}){const s=[],a=[];(e||t||n)&&(s.push([e||0,t||0,n||0]),a.push(i=>[`translate3d(${i.map(l=>vA(l,"px")).join(",")})`,BS(i,0)])),Ql(r,(i,l)=>{if(l==="transform")s.push([i||""]),a.push(c=>[c,c===""]);else if(_2t.test(l)){if(delete r[l],ze.und(i))return;const c=w2t.test(l)?"px":C2t.test(l)?"deg":"";s.push(Ma(i)),a.push(l==="rotate3d"?([u,d,m,p])=>[`rotate3d(${u},${d},${m},${vA(p,c)})`,BS(p,0)]:u=>[`${l}(${u.map(d=>vA(d,c)).join(",")})`,BS(u,l.startsWith("scale")?1:0)])}}),s.length&&(r.transform=new E2t(s,a)),super(r)}},E2t=class extends x_e{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return Ht(this.inputs,(n,r)=>{const s=Ha(n[0]),[a,i]=this.transforms[r](ze.arr(s)?s:n.map(Ha));e+=" "+a,t=t&&i}),t?"none":e}observerAdded(e){e==1&&Ht(this.inputs,t=>Ht(t,n=>ni(n)&&qy(n,this)))}observerRemoved(e){e==0&&Ht(this.inputs,t=>Ht(t,n=>ni(n)&&R1(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),I1(this,e)}},M2t=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Yi.assign({batchedUpdates:Us.unstable_batchedUpdates,createStringInterpolator:w_e,colors:vSt});var k2t=QSt(M2t,{applyAnimatedValues:v2t,createAnimatedStyle:e=>new S2t(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),Xc=k2t.animated;function qee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function T2t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qee(Object(n),!0).forEach(function(r){N2t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qee(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lx(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lx=function(t){return typeof t}:lx=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lx(e)}function N2t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OE(){return OE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OE.apply(this,arguments)}function j2t(e,t){if(e){if(typeof e=="string")return Kee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kee(e,t)}}function Kee(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function G_e(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=j2t(e))||t){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,i=!1,l;return{s:function(){n=n.call(e)},n:function(){var c=n.next();return a=c.done,c},e:function(c){i=!0,l=c},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(i)throw l}}}}function A2t(e,t){var n=[],r=[];function s(a,i){if(a.length===1)n.push(a[0]),r.push(a[0]);else{for(var l=Array(a.length-1),c=0;c<l.length;c++)c===0&&n.push(a[0]),c===l.length-1&&r.push(a[c+1]),l[c]=[(1-i)*a[c][0]+i*a[c+1][0],(1-i)*a[c][1]+i*a[c+1][1]];s(l,i)}}return e.length&&s(e,t),{left:n,right:r.reverse()}}function I2t(e){var t={};return e.length===4&&(t.x2=e[2][0],t.y2=e[2][1]),e.length>=3&&(t.x1=e[1][0],t.y1=e[1][1]),t.x=e[e.length-1][0],t.y=e[e.length-1][1],e.length===4?t.type="C":e.length===3?t.type="Q":t.type="L",t}function R2t(e,t){t=t||2;for(var n=[],r=e,s=1/t,a=0;a<t-1;a++){var i=s/(1-s*a),l=A2t(r,i);n.push(l.left),r=l.right}return n.push(r),n}function P2t(e,t,n){var r=[[e.x,e.y]];return t.x1!=null&&r.push([t.x1,t.y1]),t.x2!=null&&r.push([t.x2,t.y2]),r.push([t.x,t.y]),R2t(r,n).map(I2t)}var O2t=/[MLCSTQAHVZmlcstqahv]|-?[\d.e+-]+/g,Dh={M:["x","y"],L:["x","y"],H:["x"],V:["y"],C:["x1","y1","x2","y2","x","y"],S:["x2","y2","x","y"],Q:["x1","y1","x","y"],T:["x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"],Z:[]};Object.keys(Dh).forEach(function(e){Dh[e.toLowerCase()]=Dh[e]});function n9(e,t){for(var n=Array(e),r=0;r<e;r++)n[r]=t;return n}function L2t(e){return"".concat(e.type).concat(Dh[e.type].map(function(t){return e[t]}).join(","))}function D2t(e,t){var n={x1:"x",y1:"y",x2:"x",y2:"y"},r=["xAxisRotation","largeArcFlag","sweepFlag"];if(e.type!==t.type&&t.type.toUpperCase()!=="M"){var s={};Object.keys(t).forEach(function(a){var i=t[a],l=e[a];l===void 0&&(r.includes(a)?l=i:(l===void 0&&n[a]&&(l=e[n[a]]),l===void 0&&(l=0))),s[a]=l}),s.type=t.type,e=s}return e}function F2t(e,t,n){var r=[];if(t.type==="L"||t.type==="Q"||t.type==="C")r=r.concat(P2t(e,t,n));else{var s=OE({},e);s.type==="M"&&(s.type="L"),r=r.concat(n9(n-1).map(function(){return s})),r.push(t)}return r}function Yee(e,t,n){var r=e.length-1,s=t.length-1,a=r/s,i=n9(s).reduce(function(c,u,d){var m=Math.floor(a*d);if(n&&m<e.length-1&&n(e[m],e[m+1])){var p=a*d%1<.5;c[m]&&(p?m>0?m-=1:m<e.length-1&&(m+=1):m<e.length-1?m+=1:m>0&&(m-=1))}return c[m]=(c[m]||0)+1,c},[]),l=i.reduce(function(c,u,d){if(d===e.length-1){var m=n9(u,OE({},e[e.length-1]));return m[0].type==="M"&&m.forEach(function(p){p.type="L"}),c.concat(m)}return c.concat(F2t(e[d],e[d+1],u))},[]);return l.unshift(e[0]),l}function Qee(e){for(var t=(e||"").match(O2t)||[],n=[],r,s,a=0;a<t.length;++a)if(r=Dh[t[a]],r){s={type:t[a]};for(var i=0;i<r.length;++i)s[r[i]]=+t[a+i+1];a+=r.length,n.push(s)}return n}function U2t(e,t,n){var r=e==null?[]:e.slice(),s=t==null?[]:t.slice(),a=lx(n)==="object"?n:{excludeSegment:n,snapEndsToInput:!0},i=a.excludeSegment,l=a.snapEndsToInput;if(!r.length&&!s.length)return function(){return[]};var c=(r.length===0||r[r.length-1].type==="Z")&&(s.length===0||s[s.length-1].type==="Z");r.length>0&&r[r.length-1].type==="Z"&&r.pop(),s.length>0&&s[s.length-1].type==="Z"&&s.pop(),r.length?s.length||s.push(r[0]):r.push(s[0]);var u=Math.abs(s.length-r.length);u!==0&&(s.length>r.length?r=Yee(r,s,i):s.length<r.length&&(s=Yee(s,r,i))),r=r.map(function(m,p){return D2t(m,s[p])});var d=r.map(function(m){return T2t({},m)});return c&&(d.push({type:"Z"}),r.push({type:"Z"})),function(p){if(p===1&&l)return t??[];if(p===0)return r;for(var h=0;h<d.length;++h){var g=r[h],y=s[h],v=d[h],x=G_e(Dh[v.type]),b;try{for(x.s();!(b=x.n()).done;){var _=b.value;v[_]=(1-p)*g[_]+p*y[_],(_==="largeArcFlag"||_==="sweepFlag")&&(v[_]=Math.round(v[_]))}}catch(w){x.e(w)}finally{x.f()}}return d}}function B2t(e,t,n){var r=Qee(e),s=Qee(t),a=lx(n)==="object"?n:{excludeSegment:n,snapEndsToInput:!0},i=a.excludeSegment,l=a.snapEndsToInput;if(!r.length&&!s.length)return function(){return""};var c=U2t(r,s,{excludeSegment:i,snapEndsToInput:l});return function(d){if(d===1&&l)return t??"";var m=c(d),p="",h=G_e(m),g;try{for(h.s();!(g=h.n()).done;){var y=g.value;p+=L2t(y)}}catch(v){h.e(v)}finally{h.f()}return p}}const q_e=$xt,E_="geometricPrecision",K_e="pointer-events-none overflow-visible font-sans",gk=200,Y_e="relative isolate select-none touch-none touch-pan-down",Fh={duration:.2,delay:gk/1e3,ease:Ya},Q_e={opacity:0,transition:{duration:0,delay:0}},X_e=4,Z_e=3,aa={blue:"oklch(var(--positive-color))",red:"oklch(var(--negative-color))",gray:"oklch(var(--foreground-quieter-color))",black:"oklch(var(--foreground-color))",transparent:"#00000000"},nV=16,J_e=-5,V2t={fill:aa.gray,fontSize:12,dy:`${J_e}px`,textAnchor:"start",fontFamily:"var(--font-family-sans)"},r9=e=>B("transition-opacity duration-500",{"opacity-0":e}),$2t=({tick:e,history:t,yScale:n,xScale:r,xOffset:s,yOffset:a,yHeight:i,yWidth:l,yGet:c,baseline:u})=>{if(!t||t.length===0)return!1;const m=n(e)+a,p=m-i;if(Number.isFinite(u)){const g=n(u);if(g>=p&&g<=m)return!0}const h=s+l;for(let g=0;g<t.length;g++){const y=t[g],v=r(cs(y));if(!y||!v||v<s)continue;if(v>h)break;const x=n(c(y));if(x>=p&&x<=m)return!0}return!1},ewe=({tick:e,history:t,yScale:n,xScale:r,yGet:s,baseline:a})=>({...V2t,opacity:$2t({tick:e,history:t,yScale:n,xScale:r,xOffset:nV+5,yOffset:J_e,yHeight:16,yWidth:25,yGet:s,baseline:a})?.4:1}),twe={fill:aa.gray,fontSize:12,textAnchor:"start",dx:"6px",fontFamily:"var(--font-family-sans)"},td={POSITIVE:"positive",NEGATIVE:"negative",NEUTRAL:"neutral",TRANSPARENT:"transparent"},U1={[td.POSITIVE]:"blue",[td.NEGATIVE]:"red",[td.NEUTRAL]:"gray",[td.TRANSPARENT]:"transparent"},Oc=e=>e.date,nwe=e=>new Date(e),cs=e=>nwe(e.date),W2t=e=>{const t=e.match(/(\d{2}):(\d{2})/);return t?t[0]:void 0},Xee=(e,t)=>t?e.replace(/T\d{2}:\d{2}/,`T${t}`):e,H2t={lunch_break:{valence:td.TRANSPARENT,backgroundColor:U1[td.TRANSPARENT],backgroundOpacity:0,lineOpacity:0},pre_market:{backgroundOpacity:.5},after_hours:{backgroundOpacity:.5}},Zee={lunch_break:ee({defaultMessage:"Lunch Break",id:"tHK2Aeii37"}),pre_market:ee({defaultMessage:"Pre-Market",id:"8y93h1dAbn"}),after_hours:ee({defaultMessage:"After-Hours",id:"19IROpkyrs"})},Kp=(e,t)=>{const n=W2t(t);if(n)return e?.find(r=>{const s=r.open,a=r.close;return s<=a?n>=s&&n<=a:n>=s||n<=a})},z2t=e=>({backgroundColor:U1[e],backgroundOpacity:1,lineColor:U1[e],lineOpacity:1,valence:e}),G2t={"1d":{0:0,15:5,30:10},"5d":null,"1m":null,"6m":null,"3m":null,ytd:null,"1y":null,"5y":{0:10},max:null};function rwe(e){if(!Array.isArray(e)||e.length<22)return new Set;const r=[];let s=0,a=0;const i=[],l=u=>{i.push(u);const d=u-s;s+=d/i.length,a+=d*(u-s)},c=()=>{const u=i.shift(),d=u-s;s-=d/i.length,a-=d*(u-s)};for(let u=1;u<=20;u++){const d=Math.log(e[u].close/e[u-1].close);l(d)}for(let u=21;u<e.length;u++){const d=Math.log(e[u].close/e[u-1].close),m=i.length>1?a/i.length:0,p=Math.sqrt(m),h=p>0&&Number.isFinite(p),g=h?Math.abs((d-s)/p):0;h&&g>20&&r.push(u),c(),l(d)}return new Set(r.map(u=>e[u].date))}const q2t=(e,t=0)=>{if(t===0||!e?.length)return e;const n=[...e];let r=0;for(let s=0;s<e.length;s++){const a=e[s].close;if(r+=a,s>=t){const l=e[s-t].close;r-=l}const i=s<t?s+1:t;s===0||s===e.length-1||(n[s]={...e[s],close:r/i})}return n},rV=(e,t)=>{const n=G2t[t];if(!n)return e;const r=Object.keys(n).reduce((s,a)=>Math.abs(e.length-+s)<Math.abs(e.length-+a)?+s:+a,0);return q2t(e,n[r]??0)},swe=(e,t=!0)=>{const n=f.useRef(e),r=f.useRef(e),s=!t||!n.current||!r.current,[a,i]=eV(()=>({t:0,immediate:s,easing:Nd}));return f.useEffect(()=>{r.current!==e&&(n.current=r.current,r.current=e,t&&i.start({from:{t:0},to:{t:1},config:{duration:gk}}))},[e,t,i]),t?a.t.to(l=>n.current===r.current?e:B2t(n.current,r.current)(l)):e},K2t=e=>e?.includes?.("00:00:00"),awe=(e,t,n)=>{if(!e)return null;const r=new Date(e),s=!K2t(e);return r.toLocaleString(t,{month:"short",day:"numeric",timeZone:n,minute:s?"2-digit":void 0,hour:s?"numeric":void 0,year:s?void 0:"numeric",timeZoneName:s?"short":void 0})},sV=(e,t,n)=>new Intl.NumberFormat(n,{style:t?"currency":"decimal",currency:t??void 0,minimumFractionDigits:2,maximumFractionDigits:2}).format(e),Y2t=G3(e=>cs(e)).left,Q2t=(e,t)=>{if("invert"in e)return e.invert(t);const n=e.step(),r=e.domain(),s=e.range()[0],a=Math.round((t-s)/n);return r[Math.max(0,Math.min(r.length-1,a))]};function aV(e,t,n){const r=Math.max(0,e),s=Y2t(n,Q2t(t,r),0);return{d:n[s]??n[n.length-1],index:s,x:r}}const Cg=I.memo(({countryCode:e,square:t,...n})=>{const r=e??"NEU",s=t?`square/${r}`:r;return o.jsx("img",{src:`https://r2cdn.perplexity.ai/images/country_flags/${s}.svg`,alt:e??"NEU",...n})});Cg.displayName="CountryFlag";const X2t={COMMODITY:"",FOREX:"FX",INDEX:"INDEX",CRYPTO:"CRYPTO"},Nm=I.memo(({price:e,currency:t,sign:n,variant:r="small",animated:s=!0,className:a})=>{const i=f.useMemo(()=>({style:t?"currency":"decimal",currency:t||void 0,minimumFractionDigits:e<1e3?2:0,maximumFractionDigits:Math.abs(e)<.01?void 0:2,signDisplay:n?"exceptZero":void 0}),[t,e,n]);return o.jsx(D,{variant:r,color:"light",className:a,children:o.jsx(ci,{value:e,format:i,animated:s})})});Nm.displayName="Price";const owe=({name:e,variant:t="smallBold"})=>e?o.jsx(D,{variant:t,className:"min-w-0 truncate break-words",as:"span",children:e}):null,yk=({symbol:e,exchange:t,country:n,gap:r="xs"})=>{const s=f.useMemo(()=>e&&decodeURIComponent(e).split(".")[0],[e]),a=f.useMemo(()=>t&&(X2t[t]??t),[t]);if(!s)return null;if(!a)return s;const i=n||null;return o.jsxs(Pl,{className:B("whitespace-nowrap",{"gap-xs":r==="xs","gap-sm":r==="sm"}),children:[o.jsx(gr,{id:"symbol",children:s}),o.jsx(gr,{id:"exchange",children:a}),i&&o.jsx(gr,{id:"country",children:o.jsxs("div",{className:"relative flex w-[1.2em] shrink-0 items-center",children:[o.jsx(Cg,{countryCode:i}),o.jsx("div",{className:"absolute inset-0 border border-black/10 dark:border-0"})]})})]})},iwe=({symbol:e,children:t,className:n})=>{const{inApp:r}=Vo(),s=Nt(),a=DB({href:`/finance/${e}`,inApp:r,queryParams:s}),i=fa(),{scrollContainerRef:l}=Oa(),c=f.useCallback(()=>{i&&l?.current?.scrollTo({behavior:"smooth",top:0})},[i,l]);return o.jsx(Ge,{href:a,className:B("py-sm px-md hover:bg-subtler block border-b duration-150 last:border-b-0",n),onClick:c,children:t})},lwe=e=>{const{trackEvent:t}=Ne(),n=f.useCallback((r,s)=>{switch(e){case"discover":t("discover home widget clicked",{widgetType:r,destinationUrl:s});break;case"market":case"crypto":t("finance homepage widget clicked",{pageType:e,widgetType:r,destinationUrl:s});break}},[t,e]);return f.useMemo(()=>({onClick:n}),[n])},Qnn=({enter:e,exit:t})=>{const{trackEvent:n}=Ne(),r=f.useRef(performance.now()),s=f.useRef(!0);f.useEffect(()=>{n(e,{});const a=()=>{s.current&&n(t,{timeOnPageMs:Math.ceil(performance.now()-r.current)})},i=()=>{document.hidden?(a(),s.current=!1):(r.current=performance.now(),s.current=!0)};return document.addEventListener("visibilitychange",i),window.addEventListener("beforeunload",a),()=>{document.removeEventListener("visibilitychange",i),window.removeEventListener("beforeunload",a),a()}},[n,e,t])},Z2t=(e,t,n)=>{const r=()=>{t.removeEventListener("scrollend",r),n?.()};n&&t.addEventListener("scrollend",r),t.scrollTo({top:e,behavior:"smooth"})},J2t=60;function LE(e){const t=e.scrollHeight,n=e.clientHeight,r=e.scrollTop;return Math.abs(t-n-r)<=1}const eEt=()=>{const{scrollContainerRef:e}=Oa(),t=f.useCallback(()=>{if(!e?.current)return;const n=e.current,r=n.querySelector("#coin50-section");if(!r)return;const s=r.getBoundingClientRect().top,a=n.scrollTop,i=s+a-J2t;Z2t(i,n)},[e]);return f.useMemo(()=>({scrollToCoin50Section:t}),[t])},cwe="#1FB8CD",uwe="#B4413C",tEt=[cwe,"#FFC185",uwe,"#ECEBD5","#5D878F","#DB4545","#D2BA4C","#964325"],dwe="#20808D",fwe="#A84B2F",nEt=[dwe,fwe,"#1B474D","#BCE2E7","#944454","#FFC553","#848456","#6E522B"],rEt={tickColor:"#2F3031",axisColor:"#2F3031",textColor:"#aaaaaa",colorSchema:tEt},sEt={tickColor:"#D9D9D0",axisColor:"#D9D9D0",textColor:"#A0A0A0",colorSchema:nEt},Jm=(e="sm")=>{const[t,n]=f.useState(e);f.useEffect(()=>{const c=()=>{window.innerWidth>=1536?n("2xl"):window.innerWidth>=1280?n("xl"):window.innerWidth>=1024?n("lg"):window.innerWidth>=768?n("md"):window.innerWidth>=640&&n("sm")};return window.addEventListener("resize",c),c(),()=>window.removeEventListener("resize",c)},[]);const r=!0,s=["md","lg","xl","2xl"].includes(t),a=["lg","xl","2xl"].includes(t),i=["xl","2xl"].includes(t),l=["2xl"].includes(t);return f.useMemo(()=>({breakpoint:t,isSmallScreen:r,isMediumScreen:s,isLargeScreen:a,isXLargeScreen:i,is2XLargeScreen:l}),[t,l,a,s,r,i])},cx=e=>new Date(e.date),xA=e=>e.close,aEt={blue:cwe,red:uwe},oEt={blue:dwe,red:fwe},oV=I.memo(({history:e,symbol:t,valence:n,width:r=150,height:s=25,strokeWidth:a=1.2,className:i})=>{const{colorScheme:l}=Wr(),c=f.useMemo(()=>{const v=[...e],x=rwe(v),b=v.filter(_=>!x.has(_.date));return rV(b,"1d")},[e]),u=f.useMemo(()=>{const v=l==="dark"?aEt:oEt;return n==="positive"?v.blue:v.red},[l,n]),d=f.useMemo(()=>Zm({domain:Ja(c,cx),range:[0,r]}),[c,r]),m=f.useMemo(()=>jd({domain:Ja(c,xA),range:[s,0]}),[c,s]),p=f.useMemo(()=>Tu().x(v=>d(cx(v))??0).y(v=>m(xA(v))??0).curve(Vxt),[d,m]),h=f.useMemo(()=>p(c),[p,c]),g=f.useCallback(v=>d(cx(v))??0,[d]),y=f.useCallback(v=>m(xA(v))??0,[m]);return o.jsxs("svg",{height:s,width:r,viewBox:`0 0 ${r} ${s}`,className:B("overflow-visible",i),children:[o.jsx("path",{d:h,stroke:u,strokeWidth:a,fill:"none",shapeRendering:"geometricPrecision"}),o.jsx(z3,{from:`${u}22`,to:`${u}00`,id:`ticker-line-${t}`}),o.jsx(_g,{data:c,x:g,y,yScale:m,fill:`url(#ticker-line-${t})`})]})});oV.displayName="TickerLine";const iEt=({ticker:e,showExchange:t})=>{const{onClick:n}=lwe("crypto"),{scrollToCoin50Section:r}=eEt(),s=()=>{n("top_indices","scroll"),r()};return o.jsx("div",{className:"min-w-0 shrink-0 cursor-pointer",onClick:s,children:o.jsx(vk,{symbol:e.symbol,currency:e.currency,name:e.name,price:e.price,change:e.change,history:e.history,showExchange:t})})},lEt=({ticker:e,marketType:t,showExchange:n})=>{const{onClick:r}=lwe(t),s=f.useCallback(()=>{r("top_indices",`/finance/${e.symbol}`)},[r,e.symbol]);return o.jsx(Nu,{href:`/finance/${e.symbol}`,className:"min-w-0 shrink-0",onClick:s,children:o.jsx(vk,{currency:e.currency,symbol:e.symbol,exchange:e.exchange,name:e.name,price:e.price,change:e.change,history:e.history,showExchange:n})})},cEt=e=>{const{country:t}=c_e();return We({queryKey:xvt(e,"1d",t),queryFn:()=>bvt({groupId:e,historyPeriod:"1d",country:t}),refetchInterval:1e3*30})},uEt=I.memo(({groupId:e,className:t})=>{const{data:n,isLoading:r}=cEt(e);return o.jsx(mwe,{groupId:e,data:n,isLoading:r,className:t})});uEt.displayName="KeyTickersWithQuery";const mwe=I.memo(({groupId:e,className:t,data:n,isLoading:r,showExchange:s=!0})=>(Hm("mini-graphs",{skip:!n}),o.jsxs("div",{className:t,children:[n?.map(a=>o.jsx(H,{children:a.symbol==="COIN50USD"?o.jsx(iEt,{ticker:a,showExchange:s}):o.jsx(lEt,{ticker:a,marketType:e,showExchange:s})},`markets-${a.symbol}`)),r&&[1,2,3,4].map(a=>o.jsx(pwe,{},a))]})));mwe.displayName="KeyTickers";const vk=I.memo(({symbol:e,name:t,currency:n,price:r,change:s,history:a,exchange:i,showExchange:l})=>{const c=s/(r-s)*100,u=t,{isXLargeScreen:d}=Jm(),{isMobileStyle:m}=xe(),p=m&&r>1e6?r/1e6:r,h=m&&r>1e6?"M":"",g=f.useMemo(()=>a?.slice().sort((x,b)=>cx(x).getTime()-cx(b).getTime()),[a]),y=s<0?"negative":"positive",v=f.useMemo(()=>({style:n?"currency":"decimal",currency:n??void 0,trailingZeroDisplay:"stripIfInteger"}),[n]);return o.jsxs(sn,{className:"py-sm gap-xs hover:shadow-subtle flex select-none flex-col transition-all duration-200 hover:scale-[1.02]",children:[o.jsxs("div",{className:"px-sm min-w-0",children:[o.jsxs("div",{className:"gap-xs flex min-w-0 items-center justify-between",children:[o.jsx(D,{variant:"smallBold",className:"min-w-0 truncate",children:u}),o.jsx(km,{className:"translate-x-xs",change:c,variant:"tiny",includeIcon:!0})]}),o.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[o.jsx(D,{variant:"micro",color:"light",className:"whitespace-nowrap",children:o.jsx(yk,{symbol:e,exchange:!m&&l?i:void 0})}),o.jsx(km,{className:"-translate-x-two mt-px",change:s*100,background:!1,variant:"micro",format:v})]})]}),g&&g.length>0&&o.jsx("div",{className:"my-sm flex w-full",children:o.jsx("div",{className:"px-sm flex flex-1",children:o.jsx(oV,{history:g,symbol:e,valence:y,className:"h-auto w-0 flex-1",strokeWidth:d?1.6:1})})}),o.jsx(D,{variant:"baseSemi",className:"px-sm -mb-xs -mt-xs",children:o.jsx(FB,{value:p,format:v,suffix:h})})]})});vk.displayName="KeyTicker";const pwe=I.memo(()=>{const e=f.useMemo(()=>[{date:"2025-01-01",close:100},{date:"2025-01-02",close:100}],[]);return o.jsxs(yn,{className:"pointer-events-none relative","aria-hidden":"true",children:[o.jsx("div",{className:"invisible",children:o.jsx(vk,{symbol:"XXX",name:"XXX",price:100,change:100,history:e})}),o.jsx("div",{className:"absolute inset-0",children:o.jsxs(sn,{className:"py-sm gap-xs flex h-full flex-col",children:[o.jsxs("div",{className:"px-sm",children:[o.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-4 w-3/5 max-w-24 rounded"}),o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-5 w-1/4 max-w-12 rounded-full"})]}),o.jsxs("div",{className:"gap-sm mt-xs flex items-center justify-between",children:[o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-3 w-1/4 max-w-10 rounded"}),o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-3 w-1/3 max-w-14 rounded"})]})]}),o.jsx("div",{className:"mx-sm my-xs flex-1",children:o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle size-full rounded"})}),o.jsx("div",{className:"px-sm",children:o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-5 w-2/5 max-w-20 rounded"})})]})})]})});pwe.displayName="KeyTickerSkeleton";const iV=I.memo(({widgetId:e,showSettings:t,setShowSettings:n,context:r="widget"})=>{const{$t:s}=Z(),{symbol:a,quote:i,prices:l,isLoading:c,updateStockSettings:u}=dxt(e,r),d=f.useCallback(b=>{u({symbol:b,version:1})},[u]),m=f.useMemo(()=>({style:i.currency?"currency":void 0,currency:i.currency??void 0,minimumFractionDigits:i.price<1e3?2:0,maximumFractionDigits:2}),[i]),p=l[0]?.entries,h=p?.[0]?.price,g=p?.[p.length-1]?.price,y=g&&g>(i?.previousClose??h)?"positive":"negative",v=o.jsx("div",{className:B("h-full transform-gpu rounded-2xl"),children:o.jsxs("div",{className:"gap-xs flex h-full flex-1 flex-col justify-between p-2.5 pb-0 drop-shadow-sm",style:{zoom:r==="thumbnail"?.75:1},children:[o.jsxs("div",{className:"flex flex-col gap-px",children:[o.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[o.jsx(D,{variant:"smallBold",className:"min-w-0 truncate",children:a}),i&&!c&&typeof i.changesPercentage=="number"&&o.jsx(km,{change:i.changesPercentage,variant:"micro",includeIcon:!0,className:"-translate-y-0.5 translate-x-0.5 rounded-md"})]}),o.jsx(D,{variant:"tinyRegular",color:"light",className:"min-w-0 truncate whitespace-nowrap",children:c?s({defaultMessage:"Loading...",id:"gjBiyjshwX"}):i?.name||a})]}),ia(l)&&ia(l[0]?.entries)&&i?.price&&typeof i.price=="number"&&o.jsx("div",{className:"pointer-events-none",children:o.jsx(oV,{history:p?.map(b=>({date:b.date,close:b.price}))??ue,symbol:a,valence:y,width:140,height:60,strokeWidth:1.6,className:"h-auto w-full"})}),i?.price&&typeof i.price=="number"?o.jsx(D,{variant:"section-title",className:"-translate-x-two -translate-y-px",children:o.jsx("span",{className:"font-mono",children:o.jsx(ci,{value:i.price,format:m,animated:!0})})}):i?.price?o.jsx(D,{variant:"page-title",className:"-translate-x-two -translate-y-px",children:o.jsx("span",{className:"font-mono text-xl",children:i.price})}):null]})}),x=f.useCallback(()=>n?.(!1),[n]);return r==="thumbnail"?v:o.jsxs(o.Fragment,{children:[o.jsx(sn,{shadow:!0,className:"active:!bg-subtler dark:active:!bg-subtle aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:o.jsx(Ge,{draggable:!1,href:`/finance/${a}`,className:"relative block size-full",children:o.jsx("div",{className:"absolute inset-0 select-none",children:v})})}),o.jsx(Ke,{children:t&&o.jsx(O1e,{onClose:x,onSelectStock:d,currentSymbol:a})})]})});iV.displayName="StockWidget";const s9=I.memo(({hostname:e,title:t,context:n})=>{const r=["teal","maroon","purple","orange","blue"],s=e.split("").reduce((d,m)=>m.charCodeAt(0)+((d<<5)-d),0),a=Math.abs(s)%r.length,i=r[a],l=(t||e)?.[0]?.toUpperCase()??"",c={teal:"bg-[#21808D] dark:bg-[#32B8C6]",maroon:"bg-[#944454] dark:bg-[#FFB3C9]",purple:"bg-[#865D95] dark:bg-[#C48ED8]",orange:"bg-[#DB7100] dark:bg-[#FFAB44]",blue:"bg-[#19789E] dark:bg-[#54B4E3]"},u={teal:"text-[#B1EFF7] dark:text-[#082125]",maroon:"text-[#FFDFE9] dark:text-[#2D171B]",purple:"text-[#FFE4FF] dark:text-[#2E1836]",orange:"text-[#FFE6C8] dark:text-[#3B0F00]",blue:"text-[#CEF4FF] dark:text-[#071F2B]"};return o.jsx("span",{className:`pt-two flex select-none items-center justify-center rounded-full font-sans text-xs font-medium ${c[i]} ${u[i]} ${n==="thumbnail"?"size-4":"size-6"}`,children:l})});s9.displayName="FaviconFallback";const Jee=4,xk=I.memo(({context:e,disabled:t})=>{const[n,r]=f.useState({}),{data:s=[]}=Dxe();if(e==="thumbnail")return o.jsx("div",{className:"gap-sm grid size-full grid-rows-3",children:s.length>=3?s.slice(0,3).map(i=>{const c=new URL(i.url).host;return o.jsx(xv,{width:"w-16",disabled:t,thumbnail:n[i.url]?o.jsx(s9,{hostname:c,title:i.title,context:"thumbnail"}):o.jsx("img",{src:p1(i.url),alt:"Favicon",className:"size-full",onError:()=>{r(u=>({...u,[i.url]:!0}))}})},i.url)}):o.jsxs(o.Fragment,{children:[o.jsx(xv,{width:"w-16",disabled:t}),o.jsx(xv,{width:"w-12",disabled:t}),o.jsx(xv,{width:"w-14",disabled:t})]})});const a=Math.max(Jee-s.length,0);return o.jsxs("div",{className:B("flex w-full flex-wrap items-center justify-center gap-3",{"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))]":e==="sortable-widgets"}),children:[s.slice(0,Jee).map(i=>{const c=new URL(i.url).host,u=aU(c);return o.jsx(bn,{tooltipText:i.title||i.url,tooltipLayout:"bottom",asChild:!0,children:o.jsx(Ge,{href:i.url,children:o.jsxs(sn,{shadow:!0,className:B("p-sm gap-sm flex w-full select-none items-center rounded-lg border"),bgHover:"subtler",children:[n[i.url]?o.jsx(s9,{hostname:c,title:i.title}):o.jsx("img",{src:p1(i.url),alt:"Favicon",className:"size-6 rounded-md",onError:()=>{r(d=>({...d,[i.url]:!0}))}}),o.jsx(D,{variant:"tiny",className:"line-clamp-1 text-left capitalize",color:"light",children:u.replace(/\./g," ")})]})})},i.url)}),new Array(a).fill("").map((i,l)=>o.jsx("div",{className:"h-[42px]"},l))]})});xk.displayName="TopMostUrls";const xv=I.memo(({width:e,thumbnail:t,disabled:n})=>o.jsxs(sn,{shadow:!0,fullBleed:!0,className:"gap-sm px-sm flex flex-row items-center !rounded-lg",children:[o.jsx("div",{className:B("empty:bg-subtle size-4 overflow-hidden rounded-[4px]",{"opacity-50":n}),children:t}),o.jsx("div",{className:B("bg-subtle h-1.5 rounded-full",e,{"opacity-50":n})})]}));xv.displayName="TopMostUrlsThumbnailItem";const hwe="weather-widget-cache";function dEt(){try{const e=Re.getItem(hwe);if(e)return JSON.parse(e)}catch{}return null}function fEt(e){try{Re.setItem(hwe,JSON.stringify(e))}catch{}}function ete(e="widget",t="default",n=!1){if(e!=="widget")return{version:1,prefersMetric:n};const r=$y("WEATHER",t);return r?{version:1,prefersMetric:r.prefersMetric??n}:{version:1,prefersMetric:n}}function mEt(e,t="widget",n="default"){t==="widget"&&Km("WEATHER",n,{version:1,prefersMetric:e.prefersMetric})}function pEt(e="default",t="widget"){const{locale:n}=Z(),{location:r}=Ny(),s=r?.latitude??null,a=r?.longitude??null,i=dEt(),l=ete(t,e,i?.is_metric_preferred),[c,u]=f.useState(l),{data:d,isLoading:m}=We({queryKey:[MU,s,a].map(String),queryFn:async()=>{const k=await s0e({location:r,locale:n,reason:"weather-comet-home-widget"});return k&&fEt(k),u(A=>{const R=ete(t,e,k?.is_metric_preferred);return{...A,prefersMetric:R.prefersMetric}}),k},refetchInterval:1e3*60*5,staleTime:1e3*60,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,placeholderData:i}),p="patchy-rain-possible-day",h=c.prefersMetric?16:62,g="Rainy",y="San Francisco, CA",v=d||i,x=v&&v.current&&v.location,b=!!d,_=!!r,w=x?v.current.condition?.icon:p,C=x?c.prefersMetric?v.current.temp_c??h:v.current.temp_f??h:h,S=x?v.current.condition?.text??g:g,E=x?`${v.location.name}${v.location.is_usa&&v.location.region?`, ${v.location.region}`:v.location.country?`, ${v.location.country}`:""}`:y,M=f.useCallback(k=>{u(k),mEt(k,t,e)},[u,t,e]);return f.useMemo(()=>({icon:w,temperature:C,condition:S,locationName:E,isLoading:m,hasError:!1,hasRealData:b,hasLocation:_,weatherSettings:c,updateWeatherSettings:M}),[w,C,S,E,m,b,_,c,M])}const VS=f.memo(({width:e,height:t,variant:n})=>{const[r,s]=f.useState(!1),a=n==="hail"?20:n==="normal"?50:120,i=400,l=n==="hail"?1:20,c=n==="hail"?3:n==="normal"?30:80,u=100,d=n==="hail"?.8:.5,m=n==="hail"?.3:.1,p=Tb();return f.useEffect(()=>{s(!0)},[]),!r||p?null:o.jsx("div",{className:"absolute inset-0",children:o.jsx(Ke,{children:Array.from({length:a}).map((h,g)=>{const y=Math.floor(Math.random()*(e-1)),v=Math.floor(Math.random()*(c-l+1))+l,x=Math.floor(Math.random()*(u+1)),b=Math.random()*(d-m)+m,_=Math.floor(Math.random()*i)+1,w=n==="hail"?v:1;return o.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:3},style:{left:y,top:0,height:t},className:"absolute",children:[o.jsx("div",{style:{width:w,height:v,animationDuration:i+x+"ms",animationDelay:-_+"ms",animationTimingFunction:"linear",opacity:b,maskImage:n!=="hail"?"linear-gradient(to bottom, transparent, black, transparent)":void 0},className:B("absolute rounded-full bg-white",{"rounded-full":n==="hail"},"animation-weather-rain")}),n!=="hail"&&o.jsx("div",{style:{animationDuration:i+x+"ms",animationDelay:-_+"ms",opacity:b},className:B("-right-two absolute bottom-0 h-px w-[4px] rounded-full bg-white","animation-weather-rain-splash")})]},g)})})})});VS.displayName="Rain";const a9=f.memo(({width:e,height:t,variant:n})=>{const[r,s]=f.useState(!1),a=n==="normal"?50:80,i=n==="normal"?2e3:1e3,l=1,c=8,u=n==="normal"?1500:800,d=.5,m=.1,p=2,h=Tb();return f.useEffect(()=>{s(!0)},[]),!r||h?null:o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:B("absolute inset-x-0 bottom-0 translate-y-[80%] bg-white opacity-20 blur-sm",{"rounded-m blur-xs -left-xl -right-xl h-lg":n==="heavy"},{"h-md rounded-[50%]":n==="normal"})}),o.jsx(Ke,{children:Array.from({length:a}).map((g,y)=>{const v=Math.floor(Math.random()*(e-1)),x=Math.floor(Math.random()*(c-l+1))+l,b=Math.floor(Math.random()*(u+1)),_=Math.floor(Math.random()*p)+1,w=Math.random()*(d-m)+m,C=Math.floor(Math.random()*i)+1;return o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:3},style:{left:v,top:0,height:t},className:"absolute",children:o.jsx("div",{style:{animationDuration:i+b+"ms",animationTimingFunction:"linear",animationDelay:-C+"ms",opacity:w},className:B("absolute rounded-full bg-white","animation-weather-snow"),children:o.jsx("div",{style:{width:x,height:x,animationDuration:"inherit",maskImage:"radial-gradient(black 20%, transparent)"},className:B("absolute rounded-full bg-white",_===1&&"animation-weather-snow-wave")})})},y)})})]})});a9.displayName="Snow";const gwe=f.memo(({width:e,height:t,context:n})=>{const[r,s]=f.useState(!1),a=70,i=2,l=1,c=2,u=500,d=1e3,m=.5,p=.2,h=Tb();return f.useEffect(()=>{s(!0)},[]),!r||h?null:o.jsxs("div",{className:"absolute inset-0",children:[o.jsx(Ke,{children:Array.from({length:a}).map((g,y)=>{const v=Math.floor(Math.random()*(e-1)),x=Math.floor(Math.random()*(t-1)),b=Math.floor(Math.random()*(i-l+1))+l,_=Math.floor(Math.random()*c)+1,w=Math.floor(Math.random()*(u+1)),C=Math.floor(Math.random()*(d+1)),S=Math.random()*(m-p)+p;return o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:3},style:{left:v,top:x},className:"absolute",children:o.jsx("div",{style:{width:b,height:b,animationDuration:5e3+w+"ms",animationDelay:C+"ms",opacity:S},className:B("absolute rounded-full bg-white",{"animation-weather-star-twinkle":_===1})})},y)})}),o.jsx("div",{className:B("w-lg absolute left-0 h-px bg-white","animation-weather-star-shoot",{"context-ntp":n==="ntp"})})]})});gwe.displayName="Stars";const bk=["clear-day","clear-night","partly-cloudy-day","partly-cloudy-night","cloudy-day","cloudy-night","patchy-rain-possible-day","patchy-rain-possible-night","possible-thunder-day","possible-thunder-night","overcast","fog","snow","sleet","patchy-freezing-drizzle","heavy-snow","blizzard","drizzle","hail","light-shower","heavy-rain","lightning-rain","lightning-snow"],DE=I.memo(({variant:e,context:t,className:n})=>{const r=f.useCallback(h=>{switch(h){case"clear-day":default:return["#FF813A","#FFC700","#1F84CD"];case"partly-cloudy-day":return["#8E8E8E","#D5D5D5","#1F84CD"];case"partly-cloudy-night":return["#8E8E8E","#6A6A6A","#0B1B39"];case"cloudy-day":case"overcast":case"patchy-rain-possible-day":case"patchy-freezing-drizzle":case"drizzle":case"light-shower":case"heavy-rain":case"blizzard":case"heavy-snow":case"sleet":case"snow":case"fog":case"possible-thunder-day":case"hail":case"lightning-rain":case"lightning-snow":return["#B8B8B8","#8791AB","#486289"];case"cloudy-night":case"possible-thunder-night":case"patchy-rain-possible-night":return["#222938","#3E475A","#1B2230"];case"clear-night":return["#44344A","#091937","#091937"]}},[]),s=f.useCallback(h=>{switch(h){default:return null;case"partly-cloudy-night":case"cloudy-night":case"possible-thunder-night":case"clear-night":return"stars";case"light-shower":case"sleet":case"drizzle":case"patchy-rain-possible-night":case"patchy-rain-possible-day":case"patchy-freezing-drizzle":case"lightning-rain":return"rain";case"hail":return"rain-hail";case"heavy-rain":return"rain-heavy";case"snow":return"snow";case"heavy-snow":case"blizzard":case"lightning-snow":return"snow-heavy"}},[]),a=r(e),[i,l,c]=a,[u,{width:d,height:m}]=ql(),p=s(e);return o.jsxs("div",{style:{backgroundColor:c},className:B("absolute inset-0 overflow-hidden rounded-md shadow-md",n),children:[o.jsx("div",{className:"-inset-xl absolute translate-y-1/4 rounded-[50%] opacity-75",style:{backgroundColor:l}}),o.jsx("div",{className:"-inset-xl absolute translate-y-[60%] rounded-[50%] opacity-75",style:{backgroundColor:i}}),o.jsx("div",{className:"rounded-inherit absolute inset-0 overflow-hidden",style:{backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)"}}),o.jsx("div",{className:"absolute inset-0",ref:u,children:p==="stars"?o.jsx(gwe,{height:m,width:d,context:t}):p==="rain"?o.jsx(VS,{height:m,width:d,variant:"normal"}):p==="rain-heavy"?o.jsx(VS,{height:m,width:d,variant:"heavy"}):p==="snow"?o.jsx(a9,{height:m,width:d,variant:"normal"}):p==="snow-heavy"?o.jsx(a9,{height:m,width:d,variant:"heavy"}):p==="rain-hail"?o.jsx(VS,{height:m,width:d,variant:"hail"}):null}),o.jsx("div",{className:"absolute inset-0 rounded-md border border-transparent"})]})});DE.displayName="WeatherGradient";const B1={"clear-day":vb,"clear-night":j8e,"partly-cloudy-day":VH,"partly-cloudy-night":BH,"cloudy-day":VH,"cloudy-night":BH,"patchy-rain-possible-day":N8e,"patchy-rain-possible-night":T8e,"possible-thunder-day":k8e,"possible-thunder-night":M8e,overcast:E8e,fog:S8e,snow:C8e,sleet:w8e,"patchy-freezing-drizzle":_8e,"heavy-snow":b8e,blizzard:x8e,drizzle:v8e,hail:y8e,"light-shower":g8e,"heavy-rain":h8e,"lightning-rain":UH,"lightning-snow":UH},lV=I.memo(({widgetId:e="default",showSettings:t,setShowSettings:n,context:r="widget"})=>{const{$t:s}=Z(),a=pEt(e,r),[i,l]=f.useState(!1),c=f.useCallback(()=>n?.(!1),[n]),{permissionStatus:u}=Ny(),{openModal:d}=xt();f.useEffect(()=>{u==="granted"&&l(!0)},[u]);const m=f.useCallback(()=>{d("locationPermissionModal",{onPermissionGranted:()=>{l(!0)},origin:"weather_widget"})},[d]);if(!a.hasRealData&&!a.hasLocation&&a.isLoading)return o.jsxs("div",{className:B("h-full transform-gpu rounded-2xl"),children:[o.jsx(DE,{variant:"clear-day",className:"rounded-2xl",context:"ntp"}),o.jsx("div",{className:"gap-sm flex h-full flex-1 flex-col items-center justify-center p-2.5 drop-shadow-sm",style:{zoom:r==="thumbnail"?.75:1},children:o.jsx(D,{variant:"tiny",color:"white",className:"opacity-75",children:s({defaultMessage:"Loading weather...",id:"kTpqlc9m9M"})})})]});const p=OM(bk,a.icon)?B1[a.icon]:vb,h=o.jsxs("div",{className:B("h-full transform-gpu overflow-hidden rounded-2xl"),children:[o.jsx(DE,{variant:a.icon,className:"!rounded-2xl",context:"ntp"}),o.jsxs("div",{className:"gap-sm flex h-full flex-1 flex-col justify-between p-2.5 pb-0 pt-1 drop-shadow-sm",style:{zoom:r==="thumbnail"?.75:1},children:[o.jsxs("div",{className:"flex flex-row items-start justify-between",children:[o.jsxs("div",{children:[o.jsx(D,{variant:"page-title",color:"white",children:o.jsxs("span",{className:"font-mono",children:[a.temperature,"",a.weatherSettings.prefersMetric?"C":"F"]})}),o.jsx(D,{variant:"tinyRegular",color:"white",className:"-mt-xs opacity-60",children:a.condition})]}),o.jsx(D,{variant:"page-title",color:"white",className:"mr-0.5 mt-2",children:o.jsx(ce,{icon:p,size:36,className:"-mt-xs"})})]}),o.jsx(D,{variant:"tiny",color:"white",className:"mb-1.5 line-clamp-2 flex items-center",children:a.locationName})]})]});return r==="thumbnail"?h:o.jsxs(o.Fragment,{children:[o.jsx(sn,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:o.jsx(Ge,{href:`/search/new?q=${s({defaultMessage:"weather near {location}",id:"vi8HXN1mDE"},{location:a.locationName})}
          `,draggable:!1,className:"relative block size-full",children:o.jsx("div",{className:"absolute inset-0 select-none",children:h})})}),o.jsx(Ke,{children:t&&o.jsx(ku,{onClose:c,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsx(D,{variant:"entry-title-300",children:s({defaultMessage:"Weather settings",id:"RMurwlcxbd"})}),o.jsx("div",{className:"flex flex-col gap-3",children:o.jsx("div",{className:"flex w-full flex-col",children:o.jsxs("div",{className:"border-subtlest flex w-full gap-2 rounded-lg border p-1",children:[o.jsxs("label",{className:B("flex w-full cursor-pointer items-center justify-center rounded-md py-2",{"bg-subtler dark:bg-subtle":a.weatherSettings.prefersMetric}),children:[o.jsx("input",{type:"radio",name:"tempUnit",checked:a.weatherSettings.prefersMetric,onChange:()=>{const g={version:1,prefersMetric:!0};a.updateWeatherSettings(g)},className:"hidden"}),o.jsx(D,{variant:"smallBold",color:a.weatherSettings.prefersMetric?"default":"light",children:s({defaultMessage:"Celsius",id:"y/PhoM9SbF"})})]}),o.jsxs("label",{className:B("flex w-full cursor-pointer items-center justify-center rounded-md py-2",{"bg-subtler dark:bg-subtle":!a.weatherSettings.prefersMetric}),children:[o.jsx("input",{type:"radio",name:"tempUnit",checked:!a.weatherSettings.prefersMetric,onChange:()=>{const g={version:1,prefersMetric:!1};a.updateWeatherSettings(g)},className:"hidden"}),o.jsx(D,{variant:"smallBold",color:a.weatherSettings.prefersMetric?"light":"default",children:s({defaultMessage:"Fahrenheit",id:"K2DDr1Ji/l"})})]})]})})}),o.jsx(H,{className:"border-t"}),o.jsxs("div",{className:"flex flex-row items-center justify-between",children:[o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(D,{variant:"smallBold",children:s({defaultMessage:"Precise Location",id:"WP8KG0QkTf"})}),o.jsx(D,{variant:"small",className:"leading-tight",color:"light",children:s({defaultMessage:"Use your device location to get the most accurate weather information.",id:"Dsn2unk3pR"})})]}),o.jsx(hEt,{permissionStatus:u,children:o.jsx("div",{onClick:i?void 0:m,children:o.jsx(Ro,{active:i,disabled:i})})})]}),o.jsx(H,{className:"border-t"}),o.jsx("div",{className:"mt-sm flex flex-row justify-end",children:o.jsx(he,{variant:"primary",size:"small",onClick:c,text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});lV.displayName="WeatherWidget";const hEt=({children:e,permissionStatus:t})=>{const{$t:n}=Z(),r=n({defaultMessage:"Currently using precise location. This can be disabled from Comet Settings.",id:"5Z0PWou5EU"});return t==="granted"?o.jsx(bn,{asChild:!0,tooltipText:r,delayDuration:0,bodyTextClassName:"text-center",children:e}):e},gEt="chrome://wormhole",tte="wormhole-widgets-enabled-cache";function yEt(){const{value:e,loading:t}=Rr({flag:"wormhole-widget",defaultValue:!1}),[n,r]=f.useState(()=>{const s=Re.getItem(tte);return s?JSON.parse(s):!1});return f.useEffect(()=>{t||e!==n&&(r(e),Re.setItem(tte,JSON.stringify(e)))},[e,t,n]),n}const cV=I.memo(({context:e="widget"})=>{const t=Zn(),n=f.useCallback(()=>{t.openTab({url:gEt,key:"openWormhole"})},[t]),r=o.jsx("div",{className:"group relative size-full",children:o.jsx("img",{src:"/static/images/wormhole/thumbnail.png",alt:"Wormhole",className:"pointer-events-none absolute inset-0 object-cover"})});return e==="thumbnail"?r:o.jsx(sn,{fullBleed:!0,shadow:!0,className:"active:!bg-subtler dark:active:!bg-subtle aspect-[1/1] w-full cursor-pointer overflow-hidden !rounded-2xl",onClick:n,children:r})});cV.displayName="WormholeWidget";const uV=I.memo(({context:e="widget"})=>{const t=o.jsx("div",{className:B("relative size-full cursor-pointer select-none",{"active:!bg-subtler dark:active:!bg-subtle":e==="widget"}),children:o.jsx("div",{className:"group relative size-full",children:o.jsx("img",{src:"/static/images/zen/thumbnail.png",alt:"Zen",className:"pointer-events-none absolute inset-0 object-cover"})})});return e==="thumbnail"?t:o.jsx(sn,{shadow:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",fullBleed:!0,children:o.jsx(Ge,{href:"/b/zen",className:"cursor-pointer",draggable:!1,children:t})})});uV.displayName="ZenWidget";const vEt=500,ywe=I.memo(function({id:t,editMode:n,onDelete:r,onShowSettings:s,widget:a}){const[i,l]=f.useState(!1),{isMobileStyle:c}=xe(),{$t:u}=Z(),[d,m]=f.useState(!1),[p,h]=f.useState(!1),[g,y]=f.useState(!1),v=f.useRef(null),{trackEvent:x}=Ne(),b=f.useCallback((P,N)=>{x(`comet home widget ${P}`,{widgetType:N,widgetName:a?.name})},[x,a?.name]);f.useEffect(()=>{i&&(m(!1),y(!1))},[i]),f.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const _=f.useCallback(()=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{y(!0),b("hovered",a?.type)},vEt)},[b,a?.type]),w=f.useCallback(()=>{v.current&&clearTimeout(v.current),d||y(!1)},[d]),C=f.useCallback(P=>{s(P),h(P)},[s]);f.useEffect(()=>{y(!1)},[p]);const{attributes:S,isDragging:E,listeners:M,setNodeRef:k}=Qgt({id:t,disabled:!n}),A=P=>{switch(P){case"ANALOG_CLOCK":return o.jsx(oB,{widgetId:t,context:"widget",showSettings:p,setShowSettings:C,showCity:!0});case"STICKY":return o.jsx(cB,{widgetId:t,showSettings:p,setShowSettings:C,context:"widget",defaultText:""});case"TOP_URLS":return o.jsx(xk,{context:"sortable-widgets"});case"WEATHER":return o.jsx(lV,{widgetId:t,context:"widget",showSettings:p,setShowSettings:C});case"STOCK":return o.jsx(iV,{widgetId:t,context:"widget",showSettings:p,setShowSettings:C});case"DISCOVER":return o.jsx(iB,{context:"widget",showSettings:p,setShowSettings:C});case"DISCOVER_PROTOTYPE":return o.jsx(lB,{context:"widget",showSettings:p,setShowSettings:C});case"ASSISTANT":return o.jsx(aB,{widgetId:t,context:"widget",defaultQuery:u({defaultMessage:"Find important unanswered emails",id:"D8O0cB/SKH"}),showSettings:p,setShowSettings:C});case"SHORTCUT":return o.jsx(sB,{widgetId:t,context:"widget",defaultName:u({defaultMessage:"quick-dinner",id:"7f3tHXsIWC"}),defaultQuery:u({defaultMessage:"Give me 3 ideas of one-pan meals I can make for dinner tonight",id:"sgqIZmDyDW"}),showSettings:p,setShowSettings:C});case"WORMHOLE":return o.jsx(cV,{widgetId:t,context:"widget"});case"ZEN":return o.jsx(uV,{context:"widget"});case"EXPLORE_ASSISTANT":return o.jsx(c1e,{context:"widget"},`${t}-widget`);default:return null}},R=f.useMemo(()=>{const P={type:"default",text:u({defaultMessage:"Remove",id:"G/yZLul6P1"}),destructive:!0,onClick:()=>{r?.(),b("dismissed",a?.type)}},N={type:"default",text:u({defaultMessage:"Settings",id:"D3idYvSLF9"}),onClick:()=>C(!p)};return[...a?.settings?[N]:[],...a?.cannotBeDeleted?[]:[P]]},[u,r,p,a?.cannotBeDeleted,a?.settings,C,b,a?.type]),O=f.useCallback(()=>m(!0),[m]),L=f.useCallback(()=>{m(!1),y(!1)},[]);return a?o.jsxs(ge.div,{layout:!0,ref:k,className:B("relative isolate",a.width===4?"col-span-full":a.width===3?"col-span-3":a.width===2?"col-span-2":"col-span-1",{"z-[100]":E||i}),drag:n,dragSnapToOrigin:!0,onMouseEnter:_,onMouseLeave:w,onDragStart:()=>{l(!0)},onDragTransitionEnd:()=>{l(!1)},exit:{opacity:0},transition:Po,onClick:()=>b("selected",a?.type),children:[o.jsx(Ke,{children:(n||g)&&o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:Po,className:"absolute -left-2 -top-2 z-10",children:o.jsx(Jt,{isMobileStyle:c,items:R,placement:"bottom-start",onOpen:O,onClose:L,children:o.jsx(H,{as:"button",onClick:O,variant:"raised",className:"active:!bg-subtler dark:active:!bg-subtle shadow-overlay flex size-6 !cursor-pointer items-center justify-center rounded-full",children:o.jsx(ce,{icon:xd,size:"sm"})})})})}),n&&o.jsx("div",{className:B("absolute inset-0 z-[9] cursor-grab",{"cursor-grabbing":E}),onMouseDown:()=>m(!1),...S,...M}),A(a.type)]}):null});ywe.displayName="WidgetItem";const vwe=I.memo(({widget:e,widgetData:t,editMode:n,handleDelete:r,onShowSettings:s})=>{const a=f.useCallback(()=>r(e.id),[r,e.id]);return t?e.shouldHide?o.jsx("div",{className:B("h-px",{"col-span-full":t.width===4,"col-span-1":t.width===1,"col-span-2":t.width===2,"col-span-3":t.width===3}),style:{opacity:0}},e.id):o.jsx(Or,{fallback:null,children:o.jsx(ywe,{id:e.id,editMode:n,onDelete:a,widget:t,onShowSettings:s})},e.id):null});vwe.displayName="WidgetsFactory";const xwe=I.memo(({aspectRatio:e,onClick:t,widget:n,widgetIsAdded:r,hideIconOutline:s,manuallyDisabled:a=!1})=>{const i=n.singleton&&r||a,l=u=>{switch(u){case"ANALOG_CLOCK":return o.jsx(oB,{widgetId:n.type,context:"thumbnail"});case"STICKY":return o.jsx(cB,{widgetId:n.type,context:"thumbnail",defaultText:"My great sticky..."});case"WEATHER":return o.jsx(lV,{widgetId:n.type,context:"thumbnail"});case"TOP_URLS":return o.jsx(xk,{context:"thumbnail",disabled:i});case"STOCK":return o.jsx(iV,{widgetId:n.type,context:"thumbnail"});case"DISCOVER":return o.jsx(iB,{context:"thumbnail"});case"DISCOVER_PROTOTYPE":return o.jsx(lB,{context:"thumbnail"});case"ASSISTANT":return o.jsx(aB,{widgetId:n.type,context:"thumbnail",defaultQuery:"Find important unanswered emails"});case"SHORTCUT":return o.jsx(sB,{widgetId:n.type,context:"thumbnail",defaultName:"quick-dinner",defaultQuery:"Give me 3 ideas of one-pan meals I can make for dinner tonight"});case"WORMHOLE":return o.jsx(cV,{widgetId:n.type,context:"thumbnail"});case"ZEN":return o.jsx(uV,{context:"thumbnail"});case"EXPLORE_ASSISTANT":return o.jsx(c1e,{context:"thumbnail"},`${n.type}-thumbnail`);default:return o.jsx("div",{})}},c=f.useMemo(()=>({aspectRatio:e}),[e]);return o.jsxs("div",{className:"gap-sm relative flex flex-col items-center justify-center",children:[!i&&o.jsx("div",{className:"absolute -top-2 left-1/2 z-10 translate-x-[-68px]",children:o.jsx(H,{as:"button",variant:"raised",onClick:i?void 0:t,className:"active:!bg-subtler dark:active:!bg-subtle shadow-overlay flex size-6 !cursor-pointer items-center justify-center rounded-full",children:o.jsx(ce,{icon:ar,size:"sm"})})}),o.jsx(sn,{shadow:!0,fullBleed:!s,onClick:i?void 0:t,style:c,className:B("h-[120px] cursor-pointer overflow-hidden",{"pointer-events-none":i,"!overflow-visible !rounded-none border-none !bg-transparent shadow-none":s}),children:o.jsx("div",{className:"absolute inset-0",children:l(n.type)})}),o.jsx(D,{variant:"small",color:i?"ultraLight":"default",children:n.name})]})});xwe.displayName="WidgetsTrayItem";const xEt=25,bwe=I.memo(({widget:e,handleAdd:t,userWidgets:n,handleRequestWeatherPermission:r,topSitesData:s})=>{const a=f.useMemo(()=>e.type==="TOP_URLS"&&s.length===0||n.length>=xEt,[s.length,n.length,e.type]),i=f.useCallback(()=>{t(e),r()},[t,r,e]);if(!e||e.cannotBeDeleted)return null;const l=n.some(c=>c.type===e.type);return o.jsx(Or,{fallback:null,children:o.jsx(xwe,{aspectRatio:1/1,widget:e,widgetIsAdded:l,hideIconOutline:e.type==="TOP_URLS",onClick:i,manuallyDisabled:a})})});bwe.displayName="WidgetsTrayFactory";const bEt=({widgets:e,userWidgets:t,handleRequestWeatherPermission:n,topSitesData:r,handleAdd:s})=>e.map((a,i)=>o.jsx(bwe,{widget:a,handleAdd:s,userWidgets:t,handleRequestWeatherPermission:n,topSitesData:r},i)),_we=I.memo(({children:e,setEditMode:t,containerRef:n,maxWidgetsReached:r})=>{const{$t:s}=Z(),a=f.useCallback(()=>t(!1),[t]);return o.jsx(Bd,{portalTarget:n.current??document.body,children:o.jsx(ge.div,{initial:{y:"100%",x:"-50%"},animate:{y:0,x:"-50%"},exit:{y:"100%",x:"-50%"},transition:Po,className:"md:px-xl fixed bottom-0 left-1/2 z-[100] w-full pb-3",children:o.jsx("div",{className:"px-xl mx-auto max-w-[800px]",children:o.jsxs(H,{variant:"raised",className:"dark:!bg-base shadow-overlay size-full rounded-2xl pb-3",children:[o.jsx("div",{className:"scrollbar-none max-h-[250px] w-full overflow-scroll",children:e}),o.jsxs("div",{className:"pl-md border-subtlest sticky left-0 flex w-full flex-row items-center border-t pr-3 pt-3",children:[r&&o.jsx(D,{variant:"small",color:"ultraLight",children:s({defaultMessage:"You have reached the maximum number of widgets",id:"fRBSTWO49U"})}),o.jsx(he,{variant:"primary",size:"small",extraCSS:"ml-auto",text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"}),onClick:a})]})]})})})})});_we.displayName="WidgetTray";const _Et=()=>{const{$t:e}=Z();return f.useMemo(()=>[{type:"TOP_URLS",name:e({defaultMessage:"Top Sites",id:"v/BAbysxv5"}),singleton:!0,width:4},{type:"DISCOVER_PROTOTYPE",name:e({defaultMessage:"Discover Recommendation",id:"Tnjchtxzip"}),singleton:!0,settings:!0,width:2},{type:"ANALOG_CLOCK",name:e({defaultMessage:"Clock",id:"qCyPKfisKN"}),settings:!0,width:1},{type:"STICKY",name:e({defaultMessage:"Sticky",id:"kpXiKrXCK9"}),settings:!0,width:1},{type:"WEATHER",name:e({defaultMessage:"Weather",id:"O2sqh9Nj5X"}),settings:!0,singleton:!0,width:1},{type:"STOCK",name:e({defaultMessage:"Stock",id:"vuKrlWBaI3"}),settings:!0,width:1},{type:"DISCOVER",name:e({defaultMessage:"Discover",id:"cE4HfwyEyr"}),singleton:!0,width:1},{type:"ASSISTANT",name:e({defaultMessage:"Assistant",id:"wSAvhubuX6"}),settings:!0,width:1},{type:"SHORTCUT",name:e({defaultMessage:"Shortcut",id:"tceWOrncgz"}),settings:!0,width:1},{type:"WORMHOLE",name:e({defaultMessage:"Wormhole",id:"GrT4LLPa93"}),singleton:!0,width:1},{type:"ZEN",name:e({defaultMessage:"Zen",id:"wpzEtliq4X"}),singleton:!0,width:1},{type:"EXPLORE_ASSISTANT",name:e({defaultMessage:"Try Agent in Action",id:"7swKDXB5AP"}),singleton:!0,width:1}],[e])},nte=25,wEt=()=>null,wwe=I.memo(({editMode:e,setEditMode:t,containerRef:n,askInput:r})=>{const s="sortable-widgets",{defaultWidgets:a}=gyt(),{showStudentWidgets:i}=jyt(),{shouldShowWidget:l}=eB(),{shouldShowWidget:c}=byt(),[u,d]=f.useState(Bxe(a)),m=_ht(bht(YU)),p=f.useRef(!1),{show:h,title:g,actionLabel:y,icon:v,onDismiss:x,onClick:b}=tyt(),{data:_=[]}=Dxe(),w=_Et(),C=xyt();f.useEffect(()=>{c&&!C&&(d(j=>[{id:crypto.randomUUID(),type:"DISCOVER_PROTOTYPE"},...j.filter(F=>F.type!=="DISCOVER_PROTOTYPE")]),vyt())},[c,C]),f.useEffect(()=>{if(!p.current){p.current=!0;return}JU(u)},[u]);const S=f.useCallback(j=>{const{active:F,over:U}=j;U&&F.id!==U.id&&d(V=>{const $=V.findIndex(Q=>Q.id===F.id),z=V.findIndex(Q=>Q.id===U.id);return XU(V,$,z)})},[]),E=f.useCallback(j=>{u.length>=nte||d(F=>[...F,{id:crypto.randomUUID(),type:j.type}])},[u]),M=f.useCallback(j=>{d(F=>F.filter(U=>U.id!==j))},[]),k=f.useCallback(()=>{navigator.geolocation.getCurrentPosition(ne.info)},[]),A=yEt(),R=Qyt(),{data:O}=V3({reason:s,enabled:R}),[L,P]=f.useState(!1);f.useEffect(()=>{if(!R||!O||L)return;const j=O?.map?.($=>$.task_id)??ue,U=u.filter($=>$.type==="SHORTCUT").map($=>{const{taskId:z}=Uxe({context:"widget",widgetId:$.id});return{...$,taskId:z}}).filter($=>!j.includes($.taskId)).filter($=>$.taskId!==ZU).map($=>$.id);if(U.length===0)return;U.forEach($=>{oyt($)});const V=u.filter($=>!U.includes($.id));d(V)},[O,u,R,L]);const N=f.useMemo(()=>u.filter(j=>j.type==="EXPLORE_ASSISTANT"?l:j.type==="DISCOVER_PROTOTYPE"?c:cyt(j.id)?i:j.type==="SHORTCUT"?R:j.type==="WORMHOLE"?A:!0).map(j=>({...j,shouldHide:j.type==="TOP_URLS"&&_.length===0})),[u,_,l,c,R,A,i]),T=f.useMemo(()=>w.filter(j=>j.type==="WORMHOLE"?A:j.type==="EXPLORE_ASSISTANT"?l:j.type==="DISCOVER_PROTOTYPE"?c:j.type==="SHORTCUT"?R:j.type==="ASSISTANT"?!R:!0),[w,A,l,c,R]);return dyt(u,w),o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"p-lg flex min-h-full w-full items-center justify-center",children:o.jsxs("div",{style:{width:800},className:"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))] gap-3",children:[o.jsx(Kxe,{shouldShow:h,title:g,actionLabel:y,icon:v,onDismiss:x,onClick:b}),o.jsx(bgt,{sensors:m,collisionDetection:Tht,onDragOver:S,children:o.jsxs(Wgt,{items:N,strategy:wEt,children:[o.jsx(ge.div,{layout:!0,transition:Po,className:"-mb-md col-span-full",children:r}),o.jsx(Ke,{children:N.map(j=>o.jsx(vwe,{widget:j,editMode:e,handleDelete:M,widgetData:Fxe(w,j.type),onShowSettings:P},j.id))})]})})]})}),o.jsx(Ke,{children:e&&o.jsx(_we,{containerRef:n,setEditMode:t,maxWidgetsReached:u.length>=nte,children:o.jsx("div",{className:"w-full",children:o.jsx("div",{className:"grid w-full grid-cols-[repeat(auto-fill,minmax(120px,1fr))] flex-row gap-6 p-6",children:o.jsx(bEt,{widgets:T,handleAdd:E,userWidgets:u,handleRequestWeatherPermission:k,topSitesData:_})})})})})]})});wwe.displayName="HomeWidgets";const CEt=["cometInvitesDashboard"],SEt=({reason:e})=>{const{data:t,isFetching:n}=We({queryFn:()=>Pge({reason:e}),queryKey:CEt});return f.useMemo(()=>({data:t,isFetching:n}),[t,n])},bA="comet.ntp-invite-button.cachedCount",MC="comet.ntp-invite-button.dismissed",_A=3e3,EEt=e=>{const[t,n]=f.useState(null),[r,s]=f.useState(!0),[a,i]=f.useState(!1),[l,c]=f.useState(!1),u=f.useRef(null),d=f.useRef(-1),m=f.useRef(!1);f.useEffect(()=>{if(m.current)return;m.current=!0;const h=Re.getItem(bA),g=Re.getItem(MC)==="true";if(h!==null){const y=parseInt(h,10);n(y),s(!1),!g&&y>0&&(i(!0),c(!0),u.current=setTimeout(()=>{c(!1),u.current=null},_A))}else s(!0)},[]),f.useEffect(()=>{if(e===void 0||e<0||e===d.current)return;d.current=e;const h=Re.getItem(bA),g=h?parseInt(h,10):null;if(g===null)setTimeout(()=>{n(e),s(!1),e>0&&(i(!0),c(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{c(!1),u.current=null},_A))},100);else{n(e),s(!1);const y=Re.getItem(MC)==="true";e>g?(Re.removeItem(MC),i(!0),c(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{c(!1),u.current=null},_A)):!y&&e>0?i(!0):(i(!1),c(!1))}return Re.setItem(bA,e.toString()),()=>{u.current&&(clearTimeout(u.current),u.current=null)}},[e]);const p=f.useCallback(()=>{Re.setItem(MC,"true"),i(!1),c(!1),u.current&&(clearTimeout(u.current),u.current=null)},[]);return{displayCount:e!==void 0?e:t,shouldShowInitialText:r,hasNewInvites:a,shouldShowShimmer:l,dismissNewInvites:p}},Cwe=I.memo(e=>{const{$t:t}=Z(),n=gt(),{trackEvent:r}=Ne(),{data:s}=SEt({reason:"ntp-invite-button"}),a=s?.remaining_invites!==void 0?Math.max(s.remaining_invites,0):void 0,{displayCount:i,shouldShowInitialText:l,hasNewInvites:c,shouldShowShimmer:u,dismissNewInvites:d}=EEt(a),m=f.useCallback(()=>{r("comet ntp invite button clicked",{availableInvites:i??0,hasNewInvites:c,cometSurface:"comet_home"}),d(),n.push("/browser/invite")},[n,d,r,i,c]),p=f.useMemo(()=>{const g=u||c,y=g?c?"shimmer-state":"normal-state":void 0,v=o.jsx(o.Fragment,{children:l?o.jsx("span",{children:t({defaultMessage:"Invites",id:"Wy+IdbkBFc"})}):i!==null?u?o.jsxs(yn,{variant:"default",speed:"slow",as:"span",className:"relative inline-flex items-center gap-1",children:[o.jsx("span",{className:"text-super",children:o.jsx(ci,{value:i,animated:!0,willChange:!0})}),o.jsx("span",{className:"text-super",children:t({defaultMessage:"{count, plural, one {invite} other {invites}} left",id:"zsKWZENN9/"},{count:i})})]}):o.jsxs(o.Fragment,{children:[o.jsx(ci,{value:i,animated:!0,willChange:!0}),o.jsx("span",{className:"ml-1",children:t({defaultMessage:"{count, plural, one {invite} other {invites}} left",id:"zsKWZENN9/"},{count:i})})]}):o.jsx("span",{children:t({defaultMessage:"Invites",id:"Wy+IdbkBFc"})})});return g?o.jsx(Ke,{mode:"popLayout",initial:!1,children:o.jsx(ge.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"inline-flex items-center",children:v},y)}):o.jsx("span",{className:"inline-flex items-center",children:v})},[i,l,t,u,c]),h=f.useMemo(()=>o.jsx(Ke,{mode:"wait",children:i!==null&&i>0&&c&&o.jsx(ge.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{duration:.3,ease:[.4,0,.2,1]},children:o.jsx("div",{className:"bg-super text-inverse py-three flex items-center rounded-full px-1.5",children:o.jsx(D,{variant:"micro",color:"defaultInverted",className:"font-medium uppercase leading-none tracking-wider",children:t({defaultMessage:"NEW",id:"5Jcaq49T38"})})})},"new-pill")}),[i,c,t]);return o.jsx("div",{className:"inline-block",children:o.jsx(he,{...e,icon:Jg,text:p,trailingComponent:h,onClick:m})})});Cwe.displayName="NTPInviteButton";const MEt=()=>{const{value:e}=Rr({flag:"comet-invite-system",defaultValue:!0});return e};function kEt(){const{value:e}=It({flag:"at-mention-spaces",subjectType:"user_nextauth_id",defaultValue:!0});return e}function TEt({reason:e,collectionName:t,isLazy:n=!0,enabled:r=!0}){const{$t:s}=Z(),[a,i]=f.useState(()=>!n),{isMobileStyle:l}=xe(),c=rt(),u=kEt()&&r,{data:d,isStale:m,refetch:p}=We({queryKey:fv(),queryFn:()=>trt({reason:e}),enabled:u&&a,staleTime:10*60*1e3}),h=f.useCallback(()=>{a?m&&p():i(!0)},[a,m,p]),g=f.useMemo(()=>(d?.spaces??[]).map(x=>({uuid:x.uuid,variant:"space",label:x.title,emoji:x.emoji||void 0})),[d]),y=f.useMemo(()=>{const v=oXe();if(!(!u||l||!c||v))return t?s({defaultMessage:"Ask anything about { space } or @ mention a Space",id:"NpwyMmamjs"},{space:t}):s({defaultMessage:"Ask anything or @mention a Space",id:"5FEHAEZOKs"})},[s,t,u,l,c]);return f.useMemo(()=>({isAtMentionSpacesEnabled:u,mentionSpacesOptions:g,inputPlaceholder:y,onTrigger:h}),[y,u,g,h])}function M_(){const{value:e}=Rr({flag:"shortcut-tasks",defaultValue:!0});return e&&Xa()}function _k(){const{gpt4Limit:e,pplxAlphaLimit:t,pplxBetaLimit:n}=Jn(),{specialCapabilities:r}=Zr(),s=rt(),{hasAccessToProFeatures:a,isMax:i}=_t(),l=Sy(),c=!r.unlimitedProSearch&&e<=0&&!a,u=!r.unlimitedResearch&&(e<=0||t<=0),d=e<=0||n<=0,{session:m}=Et(),p=m?.user?.email??"",{isStudent:h}=f3({email:p,reason:"study-mode-access"});return f.useCallback(g=>{const y=io[g],v=y===ie.SEARCH&&![le.DEFAULT,le.PRO].includes(g);if(g===le.DEFAULT)return!0;if(s)return Ur(g)===ie.STUDY&&!h?!1:i?!0:c||Ur(g)===ie.RESEARCH&&u||Ur(g)===ie.STUDIO&&d||l(y)?!1:!(!a&&v&&!r.unlimitedProSearch);{const x=r.unlimitedProSearch&&Ur(g)===ie.SEARCH&&!l(y),b=r.unlimitedResearch&&Ur(g)===ie.RESEARCH&&!l(y);return x||b}},[c,u,d,a,r.unlimitedProSearch,r.unlimitedResearch,s,l,i,h])}function k_(){const{$t:e}=Z(),t=rt(),{openVisitorLoginUpsell:n}=ur({enabled:!t}),r=Sy(),s=_k(),a=Ho(),{specialCapabilities:i}=Zr(),l=f.useCallback((u,d)=>{const m=io[u];if(u===le.DEFAULT&&!d)return!1;const p=s(u)===!1||d;if(t)if(p){const h={[ie.SEARCH]:e({defaultMessage:"Want more {copilot}?",id:"Kf+JzdHL3c"},{copilot:"Pro Search"}),[ie.RESEARCH]:e({defaultMessage:"Want more Research?",id:"4cKm89wwuR"}),[ie.STUDIO]:e({defaultMessage:"Try Perplexity Labs",id:"y2BN7EwBoA"}),[ie.STUDY]:e({defaultMessage:"Step-by-step learning",id:"UGHOn5vTUx"})},g={[ie.SEARCH]:e({defaultMessage:"With {pplx} {pro}, get as many as you want",id:"jRMiP6Ut4n"},{pplx:"Perplexity",pro:"Pro"}),[ie.RESEARCH]:r(m)?e({defaultMessage:"Upgrade to Max for unlimited access to Perplexity Research.",id:"WuvGBcnhvG"}):e({defaultMessage:"Extended access for subscribers",id:"ATGyCTI4+V"}),[ie.STUDIO]:r(m)?e({defaultMessage:"Upgrade to Max for unlimited access to Perplexity Labs.",id:"jmWIIwpGtp"}):e({defaultMessage:"Exclusive access for subscribers",id:"1LB4QwRSMw"}),[ie.STUDY]:e({defaultMessage:"Ask questions and learn",id:"8RzCMAs2/c"})},y=h[m??ie.SEARCH],v=g[m??ie.SEARCH],b={[ie.SEARCH]:Oe.TRY_COPILOT,[ie.RESEARCH]:Oe.TRY_RESEARCH,[ie.STUDIO]:Oe.TRY_LABS}[m??ie.SEARCH]??Oe.TRY_COPILOT;return a({pitchMessage:{title:y,description:v},origin:b}),!0}else return!1;else{if(u===le.PRO&&i.unlimitedProSearch)return!1;const h={[ie.SEARCH]:e({defaultMessage:"Sign in to access Pro Search",id:"AARKXJYL5U"}),[ie.RESEARCH]:e({defaultMessage:"Sign in to access Perplexity Research",id:"D/01NxLK/G"}),[ie.STUDIO]:e({defaultMessage:"Sign in to try Perplexity Labs",id:"xJYMyIruMK"}),[ie.STUDY]:e({defaultMessage:"Sign in to access Perplexity Study",id:"PiR4Uw7Ibg"})},g={[ie.SEARCH]:e({defaultMessage:"10x as many citations in answers",id:"D0fULpN8/D"}),[ie.RESEARCH]:e({defaultMessage:"Deep research and analysis on any topic",id:"vZzVhXmhZo"}),[ie.STUDIO]:e({defaultMessage:"Create projects from scratch, exclusive access for subscribers",id:"STPFx+8/sC"}),[ie.STUDY]:e({defaultMessage:"Step-by-step learning",id:"UGHOn5vTUx"})},y=h[m??ie.SEARCH],v=g[m??ie.SEARCH];return n({title:y,description:v,origin:Oe.TRY_PRO}),!0}},[e,s,t,a,n,r,i.unlimitedProSearch]),c=f.useCallback(u=>s(u)?!1:(t?a({pitchMessage:{title:e({defaultMessage:"Choose a model",id:"fXlc3idTcy"}),description:e({defaultMessage:"With Perplexity Pro, you get unlimited access to all the latest AI models in one subscription",id:"YHjeXkhaC/"})},origin:Oe.MODEL_SELECTOR}):n({title:e({defaultMessage:"Sign in to choose a model",id:"BhbQUiYsTB"}),description:e({defaultMessage:"Access the latest AI models from Perplexity, OpenAI, Anthropic (Claude), Google Gemini and more",id:"DDVABeGeBG"}),origin:Oe.MODEL_SELECTOR}),!0),[s,t,a,n,e]);return f.useMemo(()=>({gateSearchModeSelection:l,gateSearchModelSelection:c}),[l,c])}function Swe(){const e=Pa(),{actions:t}=hn(),{setConfiguredModel:n,setConfiguredSearchMode:r,gpt4Limit:s}=Jn(),{specialCapabilities:a}=Zr(),{gateSearchModelSelection:i}=k_(),{hasAccessToProFeatures:l}=_t(),c=f.useCallback(()=>!a.unlimitedProSearch&&(s<=0||!l)?le.DEFAULT:le.PRO,[s,l,a.unlimitedProSearch]);return f.useCallback((u=c(),d=e)=>{i(u)||(t.setPreferredSearchModel(d,u),n(u),r(d))},[e,i,c,n,r,t])}function Ky(){const e=Swe(),{device:{isWindowsApp:t}}=At(),{safeWindowsIpcPublish:n,safeWindowsIpcSubscribe:r}=j3(),s=f.useRef(e);f.useEffect(()=>{s.current=e},[e]);const a=f.useRef(r);return f.useEffect(()=>{a.current=r},[r]),f.useEffect(()=>{if(!t)return;const l=a.current(sh,c=>{c.type===sh&&s.current(c.model,c.searchMode)});return()=>{l?.()}},[t]),f.useCallback((l,c)=>{n(sh,{type:sh,model:l,searchMode:c}),s.current(l,c)},[n])}function NEt({reason:e,enabled:t=!0}){const{$t:n}=Z(),[r,s]=f.useState(!1),{openModal:a}=xt(),i=fa(),l=rt(),c=M_()&&t,u=Ky(),{overwriteSources:d}=Dy({reason:e}),{data:m,isStale:p,refetch:h}=V3({reason:e,enabled:c&&r,staleTime:10*60*1e3}),g=f.useCallback(()=>{r?p&&h():s(!0)},[r,p,h]),y=f.useCallback(()=>{a("taskShortcutModal",{source:"typeahead_create"})},[a]),v=f.useMemo(()=>{if(!(!c||i||!l))return n({defaultMessage:"Ask anything. Type @ for mentions and / for shortcuts.",id:"KO0XLRzele"})},[n,i,c,l]),x=f.useCallback((_,w)=>{let C=ie.SEARCH;_===le.ALPHA?C=ie.RESEARCH:_===le.BETA&&(C=ie.STUDIO),u(_,C),d(w)},[u,d]),b=f.useMemo(()=>{const w=(m??[]).map(C=>({uuid:C.task_id,variant:"shortcut",label:`/${C.task_name}`,queryText:C.prompt,className:"group/shortcut-typeahead-option",action:()=>x(C.model_preference,C.sources),convertToNode:!0,rightElement:({focused:S})=>o.jsx(jEt,{shortcut:C,focused:S})}));return c&&l&&w.push({uuid:"create-a-shortcut",variant:"shortcut",label:n({defaultMessage:"+ Create a shortcut",id:"P9a8R5IRCb"}),action:y,convertToNode:!1,isAlwaysVisible:!0}),w},[m,c,l,x,n,y]);return f.useMemo(()=>({isShortcutTasksEnabled:c,shortcutsTypeaheadOptions:b,inputPlaceholder:v,onTrigger:g}),[c,b,v,g])}function jEt({shortcut:e,focused:t}){const{openModal:n}=xt(),r=f.useCallback(s=>{s.preventDefault(),s.stopPropagation(),n("taskShortcutModal",{source:"typeahead_edit",shortcut:n1e(e)})},[n,e]);return o.jsx("div",{className:B("h-5 transition-opacity",t&&"opacity-100",!t&&"opacity-0"),children:o.jsx(Te,{icon:vu,size:"tiny",variant:"common",noPadding:!0,onMouseDown:r})})}const AEt=(e,t)=>{const[n,r]=f.useState(e),s=Xg(r,t);return f.useEffect(()=>{s(e)},[e,s]),n};var IEt={};const REt=5e3,PEt=3e3,OEt=(e,t=!0)=>{const{$t:n}=Z(),r=fn(),s=t&&r,{sidecarSourceTab:{url:a}}=Hr(),i=AEt(a,PEt),l=f.useMemo(()=>IEt.NEXT_PUBLIC_IS_SIDECAR_BUILD?["get_tabs_for_sidecar",i]:["get_tabs_for_ntp"],[i]),{data:c=ue}=We({queryKey:l,queryFn:async()=>(await e.fetchOpenedTabs()).map(m=>({uuid:String(m.tabId),variant:"tab",label:m.title,url:m.url,src:p1(m.url)})),staleTime:REt,enabled:s}),u=f.useMemo(()=>s?n({defaultMessage:"Ask anything or @mention a tab",id:"37eMdtX5Pe"}):void 0,[n,s]);return f.useMemo(()=>({tabs:c,tabAttachmentsEnabled:s,inputPlaceholder:u}),[u,s,c])},LEt=(e,t)=>{const{value:n,loading:r}=It({flag:"mention-connectors",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},DEt=()=>{const{variation:e,loading:t}=LEt(!1);return{isMentionConnectorsEnabled:e,isMentionConnectorsEnabledLoading:t}};function FEt({reason:e,isLazy:t=!0,enabled:n=!0,onMentionConnector:r}){const{$t:s}=Z(),[a,i]=f.useState(()=>!t),{isMobileStyle:l}=xe(),c=rt(),{isMentionConnectorsEnabled:u}=DEt(),d=u&&n,{enabledConnectors:m,isConnectorsLoading:p,isConnectorsStale:h,refetchConnectors:g}=_y({reason:e,enabled:n}),y=f.useMemo(()=>!n||p?[]:m.map(b=>UEt(b,r)),[n,m,p,r]),v=f.useCallback(()=>{a?h&&g():i(!0)},[a,h,g]),x=f.useMemo(()=>{if(!(!d||l||!c))return s({defaultMessage:"Ask anything or @mention a Connector",id:"DmncZv38Ur"})},[s,d,l,c]);return f.useMemo(()=>({isAtMentionConnectorsEnabled:d,mentionConnectorsOptions:y,inputPlaceholder:x,onTrigger:v}),[x,d,y,v])}function UEt(e,t){return{uuid:e.name,variant:"connector",label:Zs(e.name),src:ai(e.name)??void 0,action:()=>t?.(e.name),convertToNode:!0}}const wk=({reason:e,isLazy:t=!0,variants:n,collectionName:r})=>{const[s,a]=f.useState(""),i=Zn(),l=n===void 0||n.includes("tab"),c=n===void 0||n.includes("space"),u=n===void 0||n.includes("shortcut"),d=n===void 0||n.includes("connector"),{tabs:m,tabAttachmentsEnabled:p,inputPlaceholder:h}=OEt(i,l),{isAtMentionSpacesEnabled:g,mentionSpacesOptions:y,onTrigger:v,inputPlaceholder:x}=TEt({reason:e,collectionName:r,isLazy:t,enabled:c}),{isShortcutTasksEnabled:b,shortcutsTypeaheadOptions:_,inputPlaceholder:w,onTrigger:C}=NEt({reason:e,enabled:u}),{updateSources:S}=Dy({reason:e}),{isAtMentionConnectorsEnabled:E,mentionConnectorsOptions:M,onTrigger:k,inputPlaceholder:A}=FEt({reason:e,isLazy:t,enabled:d,onMentionConnector:N=>{S(N)}}),R=p||g||b||E,O=f.useMemo(()=>[...p&&s==="@"?m:[],...g&&s==="@"?y:[],...E&&s==="@"?M:[],...b&&s==="/"?_:[]],[p,s,m,g,y,E,M,b,_]),L=f.useCallback(N=>{a(N),N==="@"?(v(),k()):N==="/"&&C()},[C,v,k]),P=f.useMemo(()=>{try{if(typeof document>"u")return""}catch{return}return w??h??x??A},[w,x,h,A]);return f.useMemo(()=>({useLexical:R,mentionTypeaheadOptions:O,inputPlaceholder:P,onTriggerTypeahead:L}),[R,O,P,L])};function BEt(){const{value:e}=zb({flag:"enable-audio-video-uploads-attachments",subjectType:"user_nextauth_id",defaultValue:"False"});return f.useMemo(()=>({isAudioVideoFilesEnabled:e==="True"}),[e])}const dV=({reason:e})=>{const t=ht(),{mutateAsync:n}=vt({mutationKey:Bw(),mutationFn:async i=>(await JJe({request:{url:i.url,thread_id:i.thread_id},reason:e})).file_url,onSuccess:(i,l,c)=>{t.setQueryData(Bw(l.url),i),l.callback?.(i,!1)},onError:(i,l,c)=>{l.callback?.("",!1)},retry:!1}),r=f.useCallback(i=>{const l=t.getQueryData(Bw(i));return typeof l=="string"?l:null},[t]),s=f.useCallback(async i=>{i.callback?.("",!0);const l=r(i.url);if(l)return i.callback?.(l,!1),l;const c=await n(i);return i.callback?.(c,!1),c},[r,n]),a=f.useCallback(async(i,l)=>{const c=URL.createObjectURL(l);t.setQueryData(Bw(i),c)},[t]);return f.useMemo(()=>({getCachedImageDownloadUrl:r,getImageDownloadUrl:s,cacheImageDownloadUrl:a}),[a,r,s])};function VEt(){const{value:e}=It({flag:"async-file-attachments-v2",defaultValue:!1,subjectType:"user_nextauth_id"});return e}const $Et=1e4,FE=["autosuggest"],WEt=()=>{const{device:{isMobile:e}}=At(),t=ht();return f.useCallback(n=>{const r=t.getQueryData(FE),s=t.getQueryData([...FE,n]);if(s?.length&&s.length===Nh(e))return s;if(r){const a=n.replace(/\s+/g,"").toLocaleLowerCase(),i=[];for(const d of r){if(e&&d.url)continue;const[m,p]=e0e(a,d);if(m&&(i.push([p,d]),i.length===Nh(e)))break}const l=i.sort(([d],[m])=>d-m).map(([d,m])=>m),[c,u]=MP(l,e,n);if(s?.length){const d=[...s];for(const m of c)if(!d.find(p=>p.query===m.query)&&(d.push(m),d.length===Nh(e)))break;return MP(d,e,n)[1]}return u}return ue},[e,t])},HEt=()=>{const{suggestions:e}=Ws(),{setSuggestions:t}=Lo(),n=f.useRef(e);n.current=e;const r=ht(),s=WEt(),a=f.useRef(!1),{device:{isMobile:i}}=At(),l=f.useRef(null),c=f.useRef(null),u=f.useRef([]),d=f.useRef({lastMessageID:0});f.useLayoutEffect(()=>()=>{a.current=!1},[]);const m=f.useCallback((y,v=!1)=>{const x=s(y);!v&&!x.length||(n.current.length!==x.length||GRe(n.current,x,"query").length!==x.length)&&(n.current=x,t(x))},[s,t]),p=f.useCallback(y=>{try{const v=new WebSocket("wss://suggest.perplexity.ai/suggest/ws");v.onopen=()=>{y?.()},v.onmessage=x=>{let b;try{if(b=JSON.parse(x.data),b.length!==4){ne.error("Invalid autosuggest message",b);return}}catch(R){ne.error("Error parsing autosuggest message",R);return}const[_,w,C,S]=b,E=parseInt(C),M=Ilt(S),[k,A]=MP(M,i);if(r.setQueryData(FE,(R=ue)=>k.length?cie([...k,...R],"query").sort((O,L)=>O.query.localeCompare(L.query)):R),r.setQueryData([...FE,_],A),E===d.current.lastMessageID&&a.current&&m(_,!0),d.current[E]){const R=performance.now()-d.current[E];u.current.push(R)}},l.current=v}catch(v){ne.error("Error connecting to autosuggest socket",v)}},[i,m,r]),h=f.useCallback(()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{l.current&&(l.current.close(),l.current=null)},$Et)},[]);f.useEffect(()=>(p(),h(),()=>{l.current&&l.current.close(),c.current&&clearTimeout(c.current)}),[p,h]);const g=f.useCallback((y,v=!0)=>{if(a.current=!!y.trim(),!a.current)return;m(y);const x=[WebSocket.OPEN,WebSocket.CONNECTING];if(!l.current||!x.includes(l.current.readyState)){v&&p(()=>{g(y,!1)});return}else h();const b=d.current.lastMessageID+1,_=b.toString();d.current.lastMessageID=b;try{const w=JSON.stringify({q:y,uuid:_,full_completion:!0});if(l.current.readyState===WebSocket.CONNECTING)return;l.current.send(w),d.current[b]=performance.now()}catch(w){ne.error("Error sending query for autosuggest",w)}},[p,h,m]);return f.useEffect(()=>{const y=setInterval(()=>{u.current.length!==0&&(fHe({latencies:u.current,isMobile:i}),u.current=[])},klt);return()=>clearInterval(y)},[i]),f.useMemo(()=>({handleUpdateAutosuggestions:g}),[g])},zEt=({fileUploadRef:e,showFileUpload:t,attachments:n,setAttachments:r,handleChange:s,setIsUploadingFile:a,focusInput:i,onFileAttachComplete:l})=>{const{inputRef:c}=Ws(),u=cU(),[d,m]=f.useState(null),p=f.useCallback(b=>{const _=n===void 0?"paste.txt":`paste-${n.length+1}.txt`,w=new File([b],_,{type:"text/plain"}),C=new DataTransfer;C.items.add(w),m({content:b,fileName:_}),e.current?.uploadFiles(C.files)},[n,e]),h=f.useCallback(()=>{m(null)},[]),g=f.useCallback(b=>{const _=b.clipboardData;if(_&&_.items.length>0){const w=new DataTransfer;for(const C of _.items){if(C.kind==="file"){b.preventDefault();const S=C.getAsFile();S&&w.items.add(S)}if(C.type==="text/plain"){const S=b.clipboardData.getData("Text");S.length>Bf&&(b.preventDefault(),p(S))}}e.current?.uploadFiles(w.files)}requestAnimationFrame(()=>{c.current&&(c.current.trim(),s(c.current.value,c.current.json))})},[e,s,c,p]),y=f.useCallback(b=>{s(b),c.current?.focus()},[s,c]),v=f.useCallback(b=>{a(!1),b.length>0?(r(b),i(),l?.(b)):r(void 0)},[a,r,i,l]),x=f.useCallback(async b=>{const _=new DataTransfer;for(const w of b){if(w.kind==="file"){const C=w.webkitGetAsEntry();if(!C)continue;if(Xpe(C)){const S=w.getAsFile();S&&_.items.add(S)}else if(Zpe(C)){const S=await jJe(C);for(const E of S)_.items.add(E)}}if(w.type==="text/plain"&&w.getAsString(C=>{C.length>Bf?p(C):c.current&&(c.current.append(C),s(c.current.value,c.current.json))}),_.items.length>u)break}e.current?.uploadFiles(_.files)},[e,c,s,u,p]);return f.useEffect(()=>{t||(r(void 0),m(null))},[t,r]),f.useMemo(()=>({handlePaste:g,handlePasteQuery:y,handleCompleteFileUpload:v,handleFileSelect:x,autoCreatedTextFile:d,dismissNotification:h,setAutoCreatedTextFile:m}),[v,x,g,y,d,h])};function GEt(){const{value:e}=It({flag:"resize-image-attachments",defaultValue:!1,subjectType:"user_nextauth_id"});return e}function qEt(){const{value:e}=Su({flag:"attachment-token-estimation-params",defaultValue:{max_total_tokens:5e5,type_bytes_per_token:{text:4,image:500},type_subtype_bytes_per_token:{"application/pdf":200,"application/msword":500,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":500,"application/vnd.openxmlformats-officedocument.presentationml.presentation":500},default_bytes_per_token:100},subjectType:"user_nextauth_id"});return e}function KEt(e){return e.every(t=>t instanceof File)}const YEt=({fileInputRef:e,isSignedIn:t,uploadRateLimit:n,maxFilesUpload:r,attachmentTokenEstimationParams:s,forwardedRef:a,existingAttachments:i,showPrivacyWarning:l,connectorsMap:c,onFilePickerOpen:u,onStart:d,onComplete:m,openLoginModal:p,openPricingModal:h,openCompanyDataPrivacyModal:g,closeModal:y,openVisitorLoginUpsell:v,openMicrosoftPicker:x,closeMicrosoftPicker:b,errorMicrosoftPicker:_,toPickerDocument:w,setUploadRateLimit:C,isFollowUp:S,isClearAttachmentsEnabled:E=!1,forceImage:M,refreshBoxCredentials:k,logMicrosoft:A,asyncAttachmentsEnabled:R=!1,setUploadsReady:O,getImageUrl:L,isAudioVideoFilesEnabled:P=!1,reason:N,incompleteParsingEnabled:T=!1,isImageAttachmentResizingEnabled:j=!1,maxAttachmentFileSizeMB:F=TWe,specialCapabilities:U={unlimitedProSearch:!1,maxModelSelection:!1,unlimitedResearch:!1,fileUpload:!1},onRemoveFile:V})=>{const{$t:$}=Z(),[z,Q]=f.useState(null),[Y,W]=f.useState(null),[X,G]=f.useState([]),[J,q]=f.useState(X&&X.length>0?"success":"idle"),[te,re]=f.useState(null),ae=`${F}MB`,fe=f.useCallback(async(we,qe,De)=>{if(!Za(we))return null;const tt=De?{type:De}:void 0,Qe=iU(we)?we:await L?.(we)??we;if(!Qe)return new File([],qe,tt);try{const Sn=await(await fetch(Qe)).blob();return new File([Sn],qe,tt)}catch{return new File([],qe,tt)}},[L]);f.useEffect(()=>{E?G([]):(async()=>{const qe=await Promise.all((i??ue).map(async De=>{const tt=_P(De.split("/").pop()||"file"),Qe=TS(De);let Pt=new File([],tt,{type:Qe}),Sn;if(Za(Pt)){const Fn=await fe(De,tt,Qe);Pt=Fn??Pt,Sn=Fn?URL.createObjectURL(Fn):void 0}return{id:crypto.randomUUID(),file:Pt,nextURL:De,status:"success",thumbnailSource:Sn}}));G(qe)})()},[E,i,fe]),f.useEffect(()=>{if(!O)return;if(!R||!X.length){O(!0);return}const we=De=>T?De.status==="parsing"||De.status==="success"||De.status==="failed":De.status==="success"||De.status==="failed",qe=X.every(we);O(qe)},[X,R,O,T]),f.useImperativeHandle(a,()=>({uploadFiles:we=>ke(Array.from(we)),clearFiles:de}));const de=f.useCallback(()=>{G([]),q("idle"),m?.([]),e.current?.value&&(e.current.value=""),re(null)},[e,m]),ve=f.useCallback((we,qe)=>{G(De=>{let tt=De;return we?tt=De.filter(Qe=>Qe.nextURL!==we):qe&&(tt=De.filter(Qe=>!Qe.nextURL?.includes(qe))),tt.length===0&&q("idle"),m?.(tt.filter(Qe=>!!Qe.nextURL).map(Qe=>({url:Qe.nextURL??"",file:Qe.file,resizedFile:Qe.resizedFile}))??[]),V?.(we,qe),tt}),e.current?.value&&(e.current.value="")},[e,m,V]),_e=f.useCallback(()=>{G([]),q("idle"),e.current?.value&&(e.current.value=""),re(null)},[e]),Se=f.useCallback(we=>{W(null),Q(we??$(ll[Xv.generic_upload_error])),X?.length&&q("success")},[$,X?.length]),be=f.useCallback(()=>{if(!p)return;const we=$({defaultMessage:"Sign in to upload files and photos",id:"gEOi1eLJ7C"}),qe=$({defaultMessage:"Analyze files and photos for free",id:"nu4bK5/Y5T"});v?v({title:we,description:qe,origin:Oe.FILE_UPLOAD,sheetModalVariant:S?"bottom-sheet-gradient":"full-sheet"}):p({origin:Oe.FILE_UPLOAD,pitchMessage:{title:we,description:qe}})},[$,S,p,v]),me=f.useCallback(()=>{if(!h)return;const we=$({defaultMessage:"Want more uploads?",id:"iInvIJ0Dv/"}),qe=$({defaultMessage:"Upgrade access for subscribers",id:"UwiL3wLZE3"});h({pitchMessage:{title:we,description:qe},origin:Oe.FILE_UPLOAD})},[$,h]),Ae=f.useCallback(async(we,qe)=>{let De;R?De=await Yot({request:{file_uuids:[we]},reason:N}):De={file_uuid:we,success:!0,error_code:null};const tt=De.success?"success":"failed";tt==="failed"?(Se($(ll[De.error_code??xP.parsing_error],{filename:qe})),G(Qe=>Qe.filter(Pt=>Pt.file_uuid!==we))):G(Qe=>[...(Qe??[]).map(Pt=>Pt.file_uuid===we?{...Pt,status:tt}:Pt)])},[Se,R,$,N]),Ee=f.useCallback(we=>we instanceof File&&kq.includes(we.type)||!(we instanceof File)&&we.mimeType&&kq.includes(we.mimeType)?$(ll[Xv.unsupported_type]):we instanceof File&&we.size>F*Mq||!(we instanceof File)&&we.sizeBytes&&we.sizeBytes>F*Mq?$(ll[Xv.too_large],{max:ae}):we instanceof File&&we.size<Eq||!(we instanceof File)&&we.sizeBytes&&we.sizeBytes<Eq?$(ll.too_small):we.name?null:$(ll.no_name),[$,ae,F]),je=f.useCallback(async(we,qe,De,tt,Qe,Pt)=>{if(!we.ok){Se(),ne.warn(`[localAttachmentUpload] upload failed for ${Pt}, response=${we}`);return}let Sn=null;try{const cn=await we.json();if(cn?.moderation?.[0]?.status==="rejected"){Se($(ll.failed_moderation)),ne.warn(`[localAttachmentUpload] upload failed moderation for ${Pt}, response=${we}`);return}Sn=bP(cn?.eager?.[0]?.secure_url??cn?.secure_url)}catch{Sn=`${De}${tt}`.replace("${filename}",`${qe.name}`)}if(!Sn){Se();return}const Fn=em(Sn)?"success":"parsing";G(cn=>cn.map(Lr=>Lr.id===Qe?{...Lr,nextURL:Sn,file_uuid:Pt,status:Fn}:Lr)),q("success"),re("local"),Pt&&Fn=="parsing"&&await Ae(Pt,qe.name)},[Se,$,Ae]),Me=f.useCallback(async(we,qe,De)=>{if(!we?.success){Se();return}if(we.rate_limited){me(),Se($(ll.rate_limited));return}if(!we.filename||!we.url){Se();return}const tt=we.url&&em(we.url)?bP(we.url):_P(we.url),Qe=TS(tt);console.log(we.url,we.filename,Qe);const Pt=await fe(we.url,we.filename,Qe),Sn=em(we.url)?"success":"parsing";G(Fn=>Fn.map(cn=>cn.id===De?{...cn,file:Pt??cn.file,nextURL:tt,file_uuid:we.file_uuid??void 0,status:Sn,thumbnailSource:Pt?URL.createObjectURL(Pt):void 0}:cn)),q("success"),re(qe),we.file_uuid&&Sn=="parsing"&&await Ae(we.file_uuid,we.filename)},[fe,Se,me,$,Ae]),Ye=f.useCallback(async(we,qe)=>{if(we?.rate_limited){me(),Se($(ll.rate_limited));return}if(!we||!we.fields||!we.s3_bucket_url){Se();return}nhe(qe)&&G(tt=>tt.map(Qe=>Qe.id===qe.id?{...Qe,thumbnailSource:URL.createObjectURL(qe.file)}:Qe));const De=new FormData;Object.entries(we.fields).forEach(([tt,Qe])=>{De.append(tt,Qe)}),De.append("file",qe.file);try{const tt=await fetch(we.s3_bucket_url,{method:"POST",body:De});await je(tt,qe.file,we.s3_bucket_url,we.fields.key,qe.id,we.file_uuid??void 0)}catch(tt){ne.warn(`[localAttachmentUpload] upload failed for ${we.file_uuid} with error=${tt}`),Se()}},[me,Se,$,je]),at=f.useCallback(we=>{const qe=we.filter(tt=>tt.status==="success").reduce((tt,Qe)=>{const Pt=Qe.file.type,Sn=Pt.split("/")[0],Fn=s?.type_subtype_bytes_per_token?.[Pt],cn=s?.type_bytes_per_token?.[Sn],Lr=s?.default_bytes_per_token,Ts=Fn??cn??Lr,Iu=Qe.file.size,fc=Ts?Iu/Ts:0;return tt+fc},0),De=s?.max_total_tokens;return De&&qe>De},[s]);f.useEffect(()=>{if(!X.length)return;X.every(qe=>qe.status==="success"||qe.status==="failed")&&at(X)&&W($({defaultMessage:"Performance may be degraded for larger files.",id:"xwKpaJzWgU"}))},[X,at,$,z]);const it=f.useCallback((we,qe,De)=>{if(KEt(we)){let tt=0;Promise.all(we.map(async Qe=>{const Pt=Ee(Qe);if(Pt){Se(Pt);return}let Sn=Qe;if(Za(Qe))try{j&&(Sn=await Rot(Qe))}catch{ne.warn(`Unable to resize image file: ${Qe.name}`)}const Fn={id:crypto.randomUUID(),file:Sn,status:"uploading"};G(Lr=>[...Lr??[],Fn]);const cn=await gU({file:Sn,fileSource:De,forceImage:M,reason:N});Ye(cn,Fn),tt++})).then(()=>{n&&n>0&&C&&C(tt)})}else qe&&we.forEach(tt=>{const Qe=Ee(tt);if(Qe)Se(Qe);else{const Pt=TS(tt.name??""),Sn=new File([""],tt.name??"",{type:Pt}),Fn={id:tt.id,file:Sn,status:"uploading"};G(cn=>[...cn??[],Fn]),Kot({remote_file_id:tt.id,connection_type:qe.toUpperCase(),reason:N}).then(cn=>{Me(cn,qe,Fn.id)})}})},[n,C,Ee,M,N,Se,j,Ye,Me]),ke=f.useCallback((we,qe,De)=>{if(!(!we||we.length===0)){if(De!==oD){if(!t&&!U.fileUpload){be();return}if(n&&n<=0){me();return}if(we.length+(X?.length??0)>r){Q($(ll.over_file_count,{maxNumFiles:r}));return}}d?.(),q("loading"),it(we,qe,De)}},[t,n,X,r,it,d,be,me,$,U.fileUpload]),Ue=f.useCallback(async(we,qe,De)=>{try{const Qe=await(await fetch(we)).blob(),Pt=De||Qe.type||"application/octet-stream";return new File([Qe],qe,{type:Pt})}catch{return new File([],qe,De?{type:De}:void 0)}},[]),Ot=f.useCallback(async(we,qe,De)=>{const Qe=(De?De.startsWith("image/"):Za(we))?await fe(we,qe,De):await Ue(we,qe,De);Qe&&ke([Qe],"local")},[Ue,fe,ke]),{openPicker:yt,isReady:St}=Yhe({clientId:c?.google_drive?.picker_credentials?.client_id??"",apiKey:c?.google_drive?.picker_credentials?.api_key??"",loginHint:c?.google_drive?.connection_display_name??"",isAudioVideoFilesEnabled:P}),[et,He]=f.useState(!1),[Be,ut]=f.useState(""),kt=f.useCallback(()=>He(!1),[]),$t=f.useCallback(we=>{const qe=we.map(De=>({id:De.id,name:De.name,sizeBytes:De.size,mimeType:lP[De.extension]}));ke(qe,"box"),kt()},[ke,kt]),{openPicker:tn,cleanupPicker:nn}=rhe({apiKey:(Be||c?.box?.picker_credentials?.api_key)??"",mode:"attachment",isAudioVideoFilesEnabled:P,onPicked:$t,onCancel:kt}),Cn=f.useCallback(async()=>{const we=c?.box?.picker_credentials?.expires_at??"";if(we&&k){const qe=new Date(we);if(isNaN(qe.getTime())){He(!0);return}if(qe<new Date){const tt=await k();ut(tt?.api_key??"")}}He(!0)},[c?.box?.picker_credentials?.expires_at,k]);f.useEffect(()=>{et&&tn()},[et,tn]);const Pn=f.useCallback((we,qe)=>{if(!w||qe!=="onedrive"&&qe!=="sharepoint")return;const De=we.map(tt=>w(tt,qe)).filter(tt=>tt!==null);ke(De,qe),b?.()},[w,ke,b]),{openPicker:Xe}=lhe({clientId:c?.dropbox?.picker_credentials?.client_id??""}),Ve=f.useCallback(we=>{const qe=we.map(De=>{const tt=Bb(De.name);return tt?{id:De.id,name:De.name,sizeBytes:De.bytes,mimeType:lP[tt]}:null}).filter(De=>De!==null);ke(qe,"dropbox")},[ke]),lt=f.useCallback(()=>Se($({defaultMessage:"Unable to retrieve files from connector.",id:"4seKuUP1Wo"})),[Se,$]),qt=f.useCallback((we,qe)=>{if(we=="google_drive"&&St)yt({mode:"attachment",onPicked:De=>ke(De,we)});else if(we==="onedrive"||we==="sharepoint"){const De=c?.[we];x?.({connector:we,clientId:De?.picker_credentials?.client_id??"",tenantName:De?.picker_credentials?.tenant_name??"",loginHint:De?.connection_display_name??"",accountIdentifier:De?.picker_credentials?.account_identifier,webUrl:qe,mode:"attachment",isAudioVideoFilesEnabled:P,onPicked:tt=>Pn(tt,we),onError:_,onCancel:b,log:A})}else we==="dropbox"?Xe({mode:"attachment",isAudioVideoFilesEnabled:P,onPicked:Ve,onError:lt}):we=="box"&&Cn()},[St,c,yt,ke,x,Pn,b,_,Xe,Ve,lt,Cn,A,P]),ln=f.useCallback(we=>{g&&g(()=>{y?.(),!we||we==="local"?(e.current?.click(),u?.()):qt(we)})},[e,y,g,qt,u]),$n=f.useCallback(we=>{if(!t&&!U.fileUpload){be();return}if(n&&n<=0){me();return}if(l&&!jn(RR)){ln(we),Zt(RR,"true",{expires:30});return}!we||we==="local"?(e.current?.click(),u?.()):qt(we)},[t,n,l,e,be,me,ln,qt,u,U.fileUpload]);return f.useEffect(()=>{let we=null;return Y&&(we=setTimeout(()=>{W(null)},kWe)),()=>{we&&clearTimeout(we)}},[Y]),f.useEffect(()=>{X&&m?.(X.filter(we=>!!we.nextURL).map(we=>({url:we.nextURL??"",file:we.file,resizedFile:we.resizedFile})))},[X,m]),f.useMemo(()=>({errorMessage:z,warningMessage:Y,uploadedFiles:X,uploadSource:te,status:J,fileInputRef:e,handleClearFiles:de,handleRemoveFile:ve,handleStartUpload:$n,handleFileInput:ke,attachFromUrl:Ot,removeAllFiles:_e,handleOpenLoginModal:be,handleOpenPricingModal:me,isBoxOpen:et,onCloseBox:kt,cleanupBoxPicker:nn,setErrorMessage:Q}),[z,Y,X,te,J,e,de,ve,$n,ke,Ot,_e,be,me,et,kt,nn])},QEt=({fileUploadRef:e,disablePrivacyWarning:t,isAudioVideoFilesEnabled:n,isClearAttachmentsEnabled:r,isFollowUp:s,organization:a,lastResult:i,onStartFileUpload:l,onCompleteFileUpload:c,setUploadsReady:u,reason:d,incompleteParsingEnabled:m=!1,specialCapabilities:p,askInputRef:h,onRemoveFile:g})=>{const y=f.useRef(null),{inputRef:v}=Ws(),{openModal:x,closeModal:b}=xt(),_=cU(),w=qEt(),{value:C}=It({flag:"async-attachment-processing",defaultValue:!1,subjectType:"user_nextauth_id"}),S=GEt(),E=rt(),{openVisitorLoginUpsell:M}=ur({enabled:!E}),k=Ho(),{hasDataRetentionWarning:A,connectorLimits:R}=ma({reason:d}),{connectorsMap:O}=Vb({reason:d}),{uploadRateLimit:L,setUploadRateLimit:P}=Jn(),{hasActiveSubscription:N}=_t(),T=L??(N?Ade:jde),j=f.useCallback(ve=>x("loginModal",ve),[x]),F=f.useCallback(ve=>{k(ve)},[k]),U=f.useCallback(ve=>x("companyDataPrivacyModal",{organizationName:a?.display_name??"",onContinue:ve}),[x,a]),{onOpen:V,onClose:$,onError:z,toPickerDocument:Q,options:Y,onSelectSite:W,isOpen:X,log:G}=che({reason:d,mode:"attachment"}),{mutateAsync:J}=ohe({reason:d}),{getCachedImageDownloadUrl:q,getImageDownloadUrl:te}=dV({reason:d}),re=f.useCallback(async ve=>i?.backend_uuid?await te({url:ve,thread_id:i.backend_uuid}):q(ve),[q,te,i?.backend_uuid]),ae=YEt({fileInputRef:y,isSignedIn:E,uploadRateLimit:T,maxFilesUpload:_,attachmentTokenEstimationParams:w,forwardedRef:e,showPrivacyWarning:A&&!t,connectorsMap:O,onStart:l,onComplete:c,openLoginModal:j,openPricingModal:F,openCompanyDataPrivacyModal:U,closeModal:b,openVisitorLoginUpsell:M,openMicrosoftPicker:V,closeMicrosoftPicker:$,errorMicrosoftPicker:z,toPickerDocument:Q,setUploadRateLimit:P,isFollowUp:s,isClearAttachmentsEnabled:r,refreshBoxCredentials:J,logMicrosoft:G,asyncAttachmentsEnabled:C,setUploadsReady:u,getImageUrl:re,isAudioVideoFilesEnabled:n,reason:d,incompleteParsingEnabled:m,isImageAttachmentResizingEnabled:S,maxAttachmentFileSizeMB:R?.max_attachment_file_size_mb,specialCapabilities:p,onRemoveFile:g}),{attachFromUrl:fe,removeAllFiles:de}=ae;return f.useImperativeHandle(h??null,()=>({addMediaFile:async(ve,_e,Se)=>{await fe(ve,_e,Se)},focusInput:()=>{v.current?.focus()},removeAttachments:()=>{de()}}),[fe,v,de]),f.useMemo(()=>({...ae,fileInputRef:y,microsoftFilePickerOptions:Y,handleSelectSharepointSite:W,isMicrosoftFilePickerOpen:X,onCloseMicrosoft:$,addMediaFile:fe,removeAllFiles:de}),[ae,W,X,Y,$,fe,de])};var XEt={};const ZEt=({setInput:e})=>{const t=Nt();f.useEffect(()=>{if(!t||!XEt.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;const n=t.get("p_q");n&&e(n)},[t,e])},Xnn="web.frontend.realtime.voice",Znn="oai-realtime-v2v-tool-call",Jnn=4096,JEt=.7;var rte;(function(e){e.ControlBrowser="control_browser",e.CloseBrowserTabs="close_browser_tabs",e.GroupOpenBrowserTabs="group_open_browser_tabs",e.OpenNewBrowserTab="open_page",e.SearchBrowser="search_browser",e.UngroupOpenBrowserTabs="ungroup_open_browser_tabs"})(rte||(rte={}));var ste;(function(e){e.MobileWeb="mobile_web",e.Web="web",e.macOS="macos",e.iOS="ios",e.Android="android",e.Windows="windows"})(ste||(ste={}));function eMt(){return Intl.DateTimeFormat().resolvedOptions().timeZone}async function ern({body:e,reason:t}){try{const n=await se.POST("/rest/realtime/v1/session",t,{timeoutMs:Pe({productionMs:1e4,clientSideMs:1e4}),numRetries:1,body:e,headers:{"content-type":"application/json"}});if(!n.response.ok){const s=n.response.statusText||"Unknown realtime session error";return{status:n.response.status,error:`Failed to get realtime session: ${s}`}}return{data:n.data,status:n.response.status,error:null}}catch(n){return ne.error("Failed to get realtime session",n),{data:null,status:500,error:`Failed to get realtime session: ${n.message||"Internal server error"}`}}}async function tMt({body:e,reason:t}){try{const n=await se.POST("/rest/realtime/transcription-session",t,{timeoutMs:Pe({productionMs:5e3}),numRetries:1,body:e,headers:{"content-type":"application/json"}});return n.response.ok?{data:n.data,status:n.response.status,error:null}:{status:n.response.status,error:`Failed to get realtime transcription session: ${n.response.statusText}`}}catch(n){return ne.error("Failed to get realtime transcription session",n),{data:null,status:500,error:`Failed to get realtime transcription session: ${n}`}}}async function trn({body:e,reason:t}){try{const n=await se.POST("/rest/realtime/execute-tools",t,{timeoutMs:Pe({productionMs:5e3}),numRetries:1,body:e,headers:{"content-type":"application/json"}});if(!n.response.ok){const s=await n.response.text();throw new Error(`Failed to execute tools: ${s}`)}return n.data}catch(n){ne.error("Failed to execute tools",n);return}}async function nrn({entry:e,analyticsParams:t,reason:n}){try{const r=await se.POST("/rest/realtime/create-entry",n,{timeoutMs:Pe({productionMs:5e3}),numRetries:1,body:{...e,analytics_params:{...t,timezone:eMt(),visitor_id:Fb()}},headers:{"content-type":"application/json"}});if(!r.response.ok){const s=await r.response.text();throw new Error(`Failed to create entry: ${s}`)}return r.data}catch(r){ne.error("Failed to create entry",r);return}}const nMt=({callbacks:e,config:t,reason:n})=>{const[r,s]=f.useState(!1),[a,i]=f.useState(""),[l,c]=f.useState(!1),[u,d]=f.useState(null),[m,p]=f.useState(()=>{const q=Re.getItem(K4);return q?q==="true":null}),{device:{isWindowsApp:h}}=At(),{trackEvent:g}=Ne(),y=t.silenceThreshold??30,v=t.silenceDuration??5e3,x=f.useRef(null),b=f.useRef(null),_=f.useRef(""),w=f.useRef(null),C=f.useRef(!1),S=f.useRef(null),E=f.useRef(null),M=f.useRef(null),k=f.useRef(null),A=f.useRef(null),R=f.useRef(new Map),O=f.useRef(null),L=f.useRef(null),P=f.useRef(null),N=f.useRef([]),T=f.useRef(null),j=f.useCallback(async()=>{try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(te=>te.stop()),p(!0),Re.setItem(K4,"true"),!0}catch(q){return d(`Microphone permission denied. ${q}`),p(!1),Re.setItem(K4,"false"),!1}},[]),F=f.useRef(!1),U=f.useCallback(()=>{w.current&&(w.current.getTracks().forEach(q=>q.stop()),w.current=null)},[]),V=f.useCallback(()=>{if(C.current=!1,M.current&&(clearTimeout(M.current),M.current=null),S.current&&(S.current.close(),S.current=null,E.current=null),x.current&&r&&x.current.stop(),T.current&&(clearInterval(T.current),T.current=null),P.current&&(P.current.port.onmessage=null,P.current.disconnect(),P.current=null),b.current&&b.current.stop(),U(),_.current="",i(""),R.current.clear(),s(!1),A.current&&(A.current.close(),A.current=null),k.current){const q=Date.now()-k.current;g("stop transcription",{durationMs:q})}k.current=null,e?.onStop?.()},[e,U,g,r]),$=f.useCallback(q=>{if(!q||!C.current)return;const te=q.frequencyBinCount,re=new Uint8Array(te);q.getByteFrequencyData(re),re.reduce((fe,de)=>fe+de)/te<y?M.current||(M.current=setTimeout(()=>{C.current&&e?.onSilence?.()},v)):M.current&&(clearTimeout(M.current),M.current=null),C.current&&requestAnimationFrame(()=>$(q))},[e,y,v]),z=f.useCallback(()=>Array.from(R.current.values()).map(te=>te.finalTranscript||te.partialTranscript||"").join(" ").trim(),[R]),Q=f.useCallback(q=>{const{type:te,item_id:re}=q;if(!re)return;R.current.has(re)||R.current.set(re,{itemId:re,partialTranscript:"",finalTranscript:""});const ae=R.current.get(re),fe=L.current||"";switch(te){case"conversation.item.input_audio_transcription.delta":{const{delta:de}=q;fe==="whisper-1"?ae.partialTranscript=de:ae.partialTranscript+=de;break}case"conversation.item.input_audio_transcription.completed":{const{transcript:de}=q;typeof de=="string"&&(ae.finalTranscript=de);break}case"input_audio_buffer.committed":{q.previous_item_id&&(ae.previousItemId=q.previous_item_id);break}}R.current.set(re,ae),i(z())},[z]),Y=f.useCallback(async()=>{const q=await tMt({body:{source:h?y5:Ide,timezone:aD,turn_detection_threshold:JEt,response_language:"en"},reason:n});if(!q.data?.client_secret)throw ne.error("No ephemeral key from server"),new Error("Unable to start OAI session");O.current=q.data.session_id,L.current=q.data.model_name;const re=["realtime",`openai-insecure-api-key.${q.data.client_secret}`,"openai-beta.realtime-v1"],ae=new WebSocket("wss://api.openai.com/v1/realtime?intent=transcription",re);A.current=ae,ae.onopen=()=>ne.info("OpenAI WS connected (base64 PCM approach)"),ae.onerror=fe=>{ne.error("OAI WS error:",fe),d("OpenAI WS error")},ae.onclose=fe=>{ne.info("OAI WS closed:",fe.code)},ae.onmessage=fe=>{try{const de=JSON.parse(fe.data);Q(de)}catch(de){ne.error("Invalid OAI WS message:",fe.data,de)}}},[Q,h,n]),W=f.useCallback(q=>{let te=0;for(const fe of q)te+=fe.length;const re=new Int16Array(te);let ae=0;for(const fe of q)re.set(fe,ae),ae+=fe.length;return re},[]),X=f.useCallback(q=>{const te=q.buffer;let re="";const ae=new Uint8Array(te);for(const fe of ae)re+=String.fromCharCode(fe);return btoa(re)},[]),G=f.useCallback(async q=>{const te=new AudioContext;S.current=te,await te.audioWorklet.addModule("/audio-worklet.js");const re=new AudioWorkletNode(te,"pcm-worklet-processor");P.current=re,re.port.onmessage=fe=>{if(!C.current)return;const de=fe.data;N.current.push(de)},T.current||(T.current=setInterval(()=>{if(!C.current||!A.current||A.current.readyState!==WebSocket.OPEN||N.current.length===0)return;const fe=W(N.current);N.current=[];const de=X(fe),ve={event_id:`evt-${Date.now()}`,type:"input_audio_buffer.append",audio:de};A.current.send(JSON.stringify(ve))},500));const ae=te.createMediaStreamSource(q);ae.connect(re),re.connect(te.destination),E.current=te.createAnalyser(),E.current.fftSize=256,ae.connect(E.current),requestAnimationFrame(()=>$(E.current))},[$,W,X]),J=f.useCallback(async()=>{if(d(null),k.current=Date.now(),g("start transcription"),C.current=!0,(m===null||m===!1)&&(c(!0),!await j())){c(!1),d("Microphone permission is required for voice input"),e?.onStop?.(),C.current=!1;return}try{await Y();const q=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(async te=>{if(p(!1),!await j())throw te;return navigator.mediaDevices.getUserMedia({audio:!0})});w.current=q,await G(q),F.current&&b.current&&(_.current="",i(""),b.current.start(),b.current.onspeechend=()=>V()),s(!0),c(!1),e?.onStart?.()}catch(q){d(`Failed to start recording. ${q}`),C.current=!1}},[e,m,j,g,V,Y,G]);return f.useMemo(()=>({isTranscribing:r,isInitializing:l,transcription:a,error:u,startTranscription:J,stopTranscription:V}),[u,l,r,J,V,a])};function $e(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Ewe(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);n.search=r.toString(),console.warn(`Minified Lexical warning #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const ol=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,rMt=ol&&"documentMode"in document?document.documentMode:null,Ai=ol&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),jm=ol&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),UE=!(!ol||!("InputEvent"in window)||rMt)&&"getTargetRanges"in new window.InputEvent("input"),V1=ol&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Sg=ol&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,sMt=ol&&/Android/.test(navigator.userAgent),Mwe=ol&&/^(?=.*Chrome).*/i.test(navigator.userAgent),ate=ol&&sMt&&Mwe,$1=ol&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&Ai&&!Mwe;function kwe(...e){const t=[];for(const n of e)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))t.push(r);return t}const aMt=1,oMt=3,iMt=9,lMt=11,Am=0,Twe=1,Eg=2,cMt=0,uMt=1,dMt=2,BE=4,VE=8,fV=128,fMt=1792|(112|(3|BE|VE)|fV),mV=1,pV=2,hV=3,gV=4,yV=5,vV=6,Ck=V1||Sg||$1?"":"",du=`

`,mMt=jm?"":Ck,Im={bold:1,capitalize:1024,code:16,highlight:fV,italic:2,lowercase:256,strikethrough:BE,subscript:32,superscript:64,underline:VE,uppercase:512},pMt={directionless:1,unmergeable:2},ote={center:pV,end:vV,justify:gV,left:mV,right:hV,start:yV},hMt={[pV]:"center",[vV]:"end",[gV]:"justify",[mV]:"left",[hV]:"right",[yV]:"start"},gMt={normal:0,segmented:2,token:1},yMt={[cMt]:"normal",[dMt]:"segmented",[uMt]:"token"},ite="$config";function Nwe(e,t,n,r,s,a){let i=e.getFirstChild();for(;i!==null;){const l=i.__key;i.__parent===t&&(Ie(i)&&Nwe(i,l,n,r,s,a),n.has(l)||a.delete(l),s.push(l)),i=i.getNextSibling()}}const vMt=100;let o9=!1,xV=0;function xMt(e){xV=e.timeStamp}function wA(e,t,n){const r=e.nodeName==="BR",s=t.__lexicalLineBreak;return s&&(e===s||r&&e.previousSibling===s)||r&&Ak(e,n)!==void 0}function bMt(e,t,n){const r=Zl(fi(n));let s=null,a=null;r!==null&&r.anchorNode===e&&(s=r.anchorOffset,a=r.focusOffset);const i=e.nodeValue;i!==null&&LV(t,i,s,a,!1)}function _Mt(e,t,n){if(Fe(e)){const r=e.anchor.getNode();if(r.is(n)&&e.format!==r.getFormat())return!1}return ju(t)&&n.isAttached()}function wMt(e,t,n,r){for(let s=e;s&&!y5t(s);s=R_(s)){const a=Ak(s,t);if(a!==void 0){const i=_s(a,n);if(i)return Ln(i)||!Xr(s)?void 0:[s,i]}else if(s===r)return[r,SCe(n)]}}function jwe(e,t,n){o9=!0;const r=performance.now()-xV>vMt;try{wo(e,()=>{const s=nt()||function(p){return p.getEditorState().read(()=>{const h=nt();return h!==null?h.clone():null})}(e),a=new Map,i=e.getRootElement(),l=e._editorState,c=e._blockCursorElement;let u=!1,d="";for(let p=0;p<t.length;p++){const h=t[p],g=h.type,y=h.target,v=wMt(y,e,l,i);if(!v)continue;const[x,b]=v;if(g==="characterData")r&&Je(b)&&ju(y)&&_Mt(s,y,b)&&bMt(y,b,e);else if(g==="childList"){u=!0;const _=h.addedNodes;for(let S=0;S<_.length;S++){const E=_[S],M=wCe(E),k=E.parentNode;if(k!=null&&E!==c&&M===null&&!wA(E,k,e)){if(jm){const A=(Xr(E)?E.innerText:null)||E.nodeValue;A&&(d+=A)}k.removeChild(E)}}const w=h.removedNodes,C=w.length;if(C>0){let S=0;for(let E=0;E<C;E++){const M=w[E];(wA(M,y,e)||c===M)&&(y.appendChild(M),S++)}C!==S&&a.set(x,b)}}}if(a.size>0)for(const[p,h]of a)h.reconcileObservedMutation(p,e);const m=n.takeRecords();if(m.length>0){for(let p=0;p<m.length;p++){const h=m[p],g=h.addedNodes,y=h.target;for(let v=0;v<g.length;v++){const x=g[v],b=x.parentNode;b==null||x.nodeName!=="BR"||wA(x,y,e)||b.removeChild(x)}}n.takeRecords()}s!==null&&(u&&ua(s),jm&&TCe(e)&&s.insertRawText(d))})}finally{o9=!1}}function Awe(e){const t=e._observer;t!==null&&jwe(e,t.takeRecords(),t)}function Iwe(e){(function(t){xV===0&&fi(t).addEventListener("textInput",xMt,!0)})(e),e._observer=new MutationObserver((t,n)=>{jwe(e,t,n)})}function CMt(e){const t=new Map,n=new Set;for(let r=typeof e=="function"?e:e.replace;r.prototype&&r.prototype.getType!==void 0;r=Object.getPrototypeOf(r)){const{ownNodeConfig:s}=$V(r);if(s&&s.stateConfigs)for(const a of s.stateConfigs){let i;"stateConfig"in a?(i=a.stateConfig,a.flat&&n.add(i.key)):i=a,t.set(i.key,i)}}return{flatKeys:n,sharedConfigMap:t}}let SMt=class Rwe{node;knownState;unknownState;sharedNodeState;size;constructor(t,n,r=void 0,s=new Map,a=void 0){this.node=t,this.sharedNodeState=n,this.unknownState=r,this.knownState=s;const{sharedConfigMap:i}=this.sharedNodeState,l=a!==void 0?a:function(c,u,d){let m=d.size;if(u)for(const p in u){const h=c.get(p);h&&d.has(h)||m++}return m}(i,r,s);this.size=l}getValue(t){const n=this.knownState.get(t);if(n!==void 0)return n;this.sharedNodeState.sharedConfigMap.set(t.key,t);let r=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const s=this.unknownState[t.key];s!==void 0&&(r=t.parse(s)),this.updateFromKnown(t,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState},n={};for(const[r,s]of this.knownState)r.isEqual(s,r.defaultValue)?delete t[r.key]:t[r.key]=r.unparse(s);for(const r of this.sharedNodeState.flatKeys)r in t&&(n[r]=t[r],delete t[r]);return lte(t)&&(n.$=t),n}getWritable(t){if(this.node===t)return this;const{sharedNodeState:n,unknownState:r}=this,s=new Map(this.knownState);return new Rwe(t,n,function(a,i,l){let c;if(l)for(const[u,d]of Object.entries(l)){const m=a.get(u);m?i.has(m)||i.set(m,m.parse(d)):(c=c||{},c[u]=d)}return c}(n.sharedConfigMap,s,r),s,this.size)}updateFromKnown(t,n){const r=t.key;this.sharedNodeState.sharedConfigMap.set(r,t);const{knownState:s,unknownState:a}=this;s.has(t)||a&&r in a||(a&&(delete a[r],this.unknownState=lte(a)),this.size++),s.set(t,n)}updateFromUnknown(t,n){const r=this.sharedNodeState.sharedConfigMap.get(t);r?this.updateFromKnown(r,r.parse(n)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=n)}updateFromJSON(t){const{knownState:n}=this;for(const r of n.keys())n.set(r,r.defaultValue);if(this.size=n.size,this.unknownState=void 0,t)for(const[r,s]of Object.entries(t))this.updateFromUnknown(r,s)}};function EMt(e){const t=e.getWritable(),n=t.__state?t.__state.getWritable(t):new SMt(t,Pwe(t));return t.__state=n,n}function Pwe(e){return e.__state?e.__state.sharedNodeState:bCe(BV(),e.getType()).sharedNodeState}function lte(e){if(e)for(const t in e)return e}function cte(e,t,n){for(const[r,s]of t.knownState){if(e.has(r.key))continue;e.add(r.key);const a=n?n.getValue(r):r.defaultValue;if(a!==s&&!r.isEqual(a,s))return!0}return!1}function ute(e,t,n){const{unknownState:r}=t,s=n?n.unknownState:void 0;if(r){for(const[a,i]of Object.entries(r))if(!e.has(a)&&(e.add(a),i!==(s?s[a]:void 0)))return!0}return!1}function dte(e,t){const n=e.__state;return n&&n.node===e?n.getWritable(t):n}function fte(e,t){const n=e.__mode,r=e.__format,s=e.__style,a=t.__mode,i=t.__format,l=t.__style,c=e.__state,u=t.__state;return(n===null||n===a)&&(r===null||r===i)&&(s===null||s===l)&&(e.__state===null||c===u||function(d,m){if(d===m)return!0;if(d&&m&&d.size!==m.size)return!1;const p=new Set;return!(d&&cte(p,d,m)||m&&cte(p,m,d)||d&&ute(p,d,m)||m&&ute(p,m,d))}(c,u))}function mte(e,t){const n=e.mergeWithSibling(t),r=Er()._normalizedNodes;return r.add(e.__key),r.add(t.__key),n}function pte(e){let t,n,r=e;if(r.__text!==""||!r.isSimpleText()||r.isUnmergeable()){for(;(t=r.getPreviousSibling())!==null&&Je(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(fte(t,r)){r=mte(t,r);break}break}t.remove()}for(;(n=r.getNextSibling())!==null&&Je(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(n.__text!==""){if(fte(r,n)){r=mte(r,n);break}break}n.remove()}}else r.remove()}function W1(e){return hte(e.anchor),hte(e.focus),e}function hte(e){for(;e.type==="element";){const t=e.getNode(),n=e.offset;let r,s;if(n===t.getChildrenSize()?(r=t.getChildAtIndex(n-1),s=!0):(r=t.getChildAtIndex(n),s=!1),Je(r)){e.set(r.__key,s?r.getTextContentSize():0,"text",!0);break}if(!Ie(r))break;e.set(r.__key,s?r.getChildrenSize():0,"element",!0)}}let Rm,oa,H1,Sk,i9,l9,Pm,Fi,c9,z1,ls="",ml=null,pl="",Rc="",Yp=!1,$E=!1;function WE(e,t){const n=Pm.get(e);if(t!==null){const r=m9(e);r.parentNode===t&&t.removeChild(r)}if(Fi.has(e)||oa._keyToDOMMap.delete(e),Ie(n)){const r=zE(n,Pm);u9(r,0,r.length-1,null)}n!==void 0&&DV(z1,H1,Sk,n,"destroyed")}function u9(e,t,n,r){let s=t;for(;s<=n;++s){const a=e[s];a!==void 0&&WE(a,r)}}function Sf(e,t){e.setProperty("text-align",t)}const MMt="40px";function Owe(e,t){const n=Rm.theme.indent;if(typeof n=="string"){const s=e.classList.contains(n);t>0&&!s?e.classList.add(n):t<1&&s&&e.classList.remove(n)}const r=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||MMt;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${r})`)}function Lwe(e,t){const n=e.style;t===0?Sf(n,""):t===mV?Sf(n,"left"):t===pV?Sf(n,"center"):t===hV?Sf(n,"right"):t===gV?Sf(n,"justify"):t===yV?Sf(n,"start"):t===vV&&Sf(n,"end")}function d9(e,t){const n=function(r){const s=r.__dir;if(s!==null)return s;if(ds(r))return null;const a=r.getParentOrThrow();return ds(a)&&a.__dir===null?"auto":null}(t);n!==null?e.dir=n:e.removeAttribute("dir")}function HE(e,t){const n=Fi.get(e);n===void 0&&$e(60);const r=n.createDOM(Rm,oa);if(function(s,a,i){const l=i._keyToDOMMap;(function(c,u,d){const m=`__lexicalKey_${u._key}`;c[m]=d})(a,i,s),l.set(s,a)}(e,r,oa),Je(n)?r.setAttribute("data-lexical-text","true"):Ln(n)&&r.setAttribute("data-lexical-decorator","true"),Ie(n)){const s=n.__indent,a=n.__size;if(d9(r,n),s!==0&&Owe(r,s),a!==0){const l=a-1;f9(zE(n,Fi),n,0,l,n.getDOMSlot(r))}const i=n.__format;i!==0&&Lwe(r,i),n.isInline()||Dwe(null,n,r),Ik(n)&&(ls+=du,Rc+=du)}else{const s=n.getTextContent();if(Ln(n)){const a=n.decorate(oa,Rm);a!==null&&Fwe(e,a),r.contentEditable="false"}ls+=s,Rc+=s}return t!==null&&t.insertChild(r),DV(z1,H1,Sk,n,"created"),r}function f9(e,t,n,r,s){const a=ls;ls="";let i=n;for(;i<=r;++i){HE(e[i],s);const l=Fi.get(e[i]);l!==null&&Je(l)&&(ml===null&&(ml=l.getFormat()),pl===""&&(pl=l.getStyle()))}Ik(t)&&(ls+=du),s.element.__lexicalTextContent=ls,ls=a+ls}function gte(e,t){if(e){const n=e.__last;if(n){const r=t.get(n);if(r)return Fl(r)?"line-break":Ln(r)&&r.isInline()?"decorator":null}return"empty"}return null}function Dwe(e,t,n){const r=gte(e,Pm),s=gte(t,Fi);r!==s&&t.getDOMSlot(n).setManagedLineBreak(s)}function kMt(e,t,n){var r;ml=null,pl="",function(s,a,i){const l=ls,c=s.__size,u=a.__size;ls="";const d=i.element;if(c===1&&u===1){const m=s.__first,p=a.__first;if(m===p)bv(m,d);else{const g=m9(m),y=HE(p,null);try{d.replaceChild(y,g)}catch(v){if(typeof v=="object"&&v!=null){const x=`${v.toString()} Parent: ${d.tagName}, new child: {tag: ${y.tagName} key: ${p}}, old child: {tag: ${g.tagName}, key: ${m}}.`;throw new Error(x)}throw v}WE(m,null)}const h=Fi.get(p);Je(h)&&(ml===null&&(ml=h.getFormat()),pl===""&&(pl=h.getStyle()))}else{const m=zE(s,Pm),p=zE(a,Fi);if(m.length!==c&&$e(227),p.length!==u&&$e(228),c===0)u!==0&&f9(p,a,0,u-1,i);else if(u===0){if(c!==0){const h=i.after==null&&i.before==null&&i.element.__lexicalLineBreak==null;u9(m,0,c-1,h?null:d),h&&(d.textContent="")}}else(function(h,g,y,v,x,b){const _=v-1,w=x-1;let C,S,E=b.getFirstChild(),M=0,k=0;for(;M<=_&&k<=w;){const O=g[M],L=y[k];if(O===L)E=CA(bv(L,b.element)),M++,k++;else{C===void 0&&(C=new Set(g)),S===void 0&&(S=new Set(y));const N=S.has(O),T=C.has(L);if(N)if(T){const j=Om(oa,L);j===E?E=CA(bv(L,b.element)):(b.withBefore(E).insertChild(j),bv(L,b.element)),M++,k++}else HE(L,b.withBefore(E)),k++;else E=CA(m9(O)),WE(O,b.element),M++}const P=Fi.get(L);P!==null&&Je(P)&&(ml===null&&(ml=P.getFormat()),pl===""&&(pl=P.getStyle()))}const A=M>_,R=k>w;if(A&&!R){const O=y[w+1],L=O===void 0?null:oa.getElementByKey(O);f9(y,h,k,w,b.withBefore(L))}else R&&!A&&u9(g,M,_,b.element)})(a,m,p,c,u,i)}Ik(a)&&(ls+=du),d.__lexicalTextContent=ls,ls=l+ls}(e,t,t.getDOMSlot(n)),r=t,ml==null||ml===r.__textFormat||$E||r.setTextFormat(ml),function(s){pl===""||pl===s.__textStyle||$E||s.setTextStyle(pl)}(t)}function zE(e,t){const n=[];let r=e.__first;for(;r!==null;){const s=t.get(r);s===void 0&&$e(101),n.push(r),r=s.__next}return n}function bv(e,t){const n=Pm.get(e);let r=Fi.get(e);n!==void 0&&r!==void 0||$e(61);const s=Yp||l9.has(e)||i9.has(e),a=Om(oa,e);if(n===r&&!s){if(Ie(n)){const i=a.__lexicalTextContent;i!==void 0&&(ls+=i,Rc+=i)}else{const i=n.getTextContent();Rc+=i,ls+=i}return a}if(n!==r&&s&&DV(z1,H1,Sk,r,"updated"),r.updateDOM(n,a,Rm)){const i=HE(e,null);return t===null&&$e(62),t.replaceChild(i,a),WE(e,null),i}if(Ie(n)&&Ie(r)){const i=r.__indent;(Yp||i!==n.__indent)&&Owe(a,i);const l=r.__format;if((Yp||l!==n.__format)&&Lwe(a,l),s&&(kMt(n,r,a),ds(r)||r.isInline()||Dwe(n,r,a)),Ik(r)&&(ls+=du,Rc+=du),(Yp||r.__dir!==n.__dir)&&(d9(a,r),ds(r)&&!Yp))for(const c of r.getChildren())Ie(c)&&d9(Om(oa,c.getKey()),c)}else{const i=r.getTextContent();if(Ln(r)){const l=r.decorate(oa,Rm);l!==null&&Fwe(e,l)}ls+=i,Rc+=i}if(!$E&&ds(r)&&r.__cachedText!==Rc){const i=r.getWritable();i.__cachedText=Rc,r=i}return a}function Fwe(e,t){let n=oa._pendingDecorators;const r=oa._decorators;if(n===null){if(r[e]===t)return;n=CCe(oa)}n[e]=t}function CA(e){let t=e.nextSibling;return t!==null&&t===oa._blockCursorElement&&(t=t.nextSibling),t}function TMt(e,t,n,r,s,a){ls="",Rc="",Yp=r===Eg,oa=n,Rm=n._config,H1=n._nodes,Sk=oa._listeners.mutation,i9=s,l9=a,Pm=e._nodeMap,Fi=t._nodeMap,$E=t._readOnly,c9=new Map(n._keyToDOMMap);const i=new Map;return z1=i,bv("root",null),oa=void 0,H1=void 0,i9=void 0,l9=void 0,Pm=void 0,Fi=void 0,Rm=void 0,c9=void 0,z1=void 0,i}function m9(e){const t=c9.get(e);return t===void 0&&$e(75,e),t}function Yt(e){return{type:e}}const Uwe=Yt("SELECTION_CHANGE_COMMAND"),NMt=Yt("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),jMt=Yt("CLICK_COMMAND"),Dl=Yt("DELETE_CHARACTER_COMMAND"),Uh=Yt("INSERT_LINE_BREAK_COMMAND"),p9=Yt("INSERT_PARAGRAPH_COMMAND"),rm=Yt("CONTROLLED_TEXT_INSERTION_COMMAND"),T_=Yt("PASTE_COMMAND"),GE=Yt("REMOVE_TEXT_COMMAND"),Mg=Yt("DELETE_WORD_COMMAND"),kg=Yt("DELETE_LINE_COMMAND"),Hf=Yt("FORMAT_TEXT_COMMAND"),Bwe=Yt("UNDO_COMMAND"),Vwe=Yt("REDO_COMMAND"),AMt=Yt("KEYDOWN_COMMAND"),$we=Yt("KEY_ARROW_RIGHT_COMMAND"),IMt=Yt("MOVE_TO_END"),Wwe=Yt("KEY_ARROW_LEFT_COMMAND"),RMt=Yt("MOVE_TO_START"),Hwe=Yt("KEY_ARROW_UP_COMMAND"),zwe=Yt("KEY_ARROW_DOWN_COMMAND"),Tg=Yt("KEY_ENTER_COMMAND"),PMt=Yt("KEY_SPACE_COMMAND"),bV=Yt("KEY_BACKSPACE_COMMAND"),Gwe=Yt("KEY_ESCAPE_COMMAND"),_V=Yt("KEY_DELETE_COMMAND"),qwe=Yt("KEY_TAB_COMMAND"),OMt=Yt("OUTDENT_CONTENT_COMMAND"),Kwe=Yt("DROP_COMMAND"),Ywe=Yt("DRAGSTART_COMMAND"),LMt=Yt("DRAGOVER_COMMAND"),DMt=Yt("DRAGEND_COMMAND"),wV=Yt("COPY_COMMAND"),CV=Yt("CUT_COMMAND"),h9=Yt("SELECT_ALL_COMMAND"),rrn=Yt("CLEAR_EDITOR_COMMAND"),srn=Yt("CLEAR_HISTORY_COMMAND"),arn=Yt("CAN_REDO_COMMAND"),orn=Yt("CAN_UNDO_COMMAND"),FMt=Yt("FOCUS_COMMAND"),UMt=Yt("BLUR_COMMAND"),BMt=Yt("KEY_MODIFIER_COMMAND"),bc=Object.freeze({}),g9=30,y9=[["keydown",function(e,t){if(ux=e.timeStamp,Qwe=e.key,!t.isComposing()&&!mt(t,AMt,e)&&e.key!=null){if(SA&&Hte(e))return wo(t,()=>{kC(t,EA)}),SA=!1,void(EA="");if(function(n){return Wn(n,"ArrowRight",{shiftKey:"any"})}(e))mt(t,$we,e);else if(function(n){return Wn(n,"ArrowRight",Ec)}(e))mt(t,IMt,e);else if(function(n){return Wn(n,"ArrowLeft",{shiftKey:"any"})}(e))mt(t,Wwe,e);else if(function(n){return Wn(n,"ArrowLeft",Ec)}(e))mt(t,RMt,e);else if(function(n){return Wn(n,"ArrowUp",{altKey:"any",shiftKey:"any"})}(e))mt(t,Hwe,e);else if(function(n){return Wn(n,"ArrowDown",{altKey:"any",shiftKey:"any"})}(e))mt(t,zwe,e);else if(function(n){return Wn(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})}(e))dx=!0,mt(t,Tg,e);else if(function(n){return n.key===" "}(e))mt(t,PMt,e);else if(function(n){return Ai&&Wn(n,"o",{ctrlKey:!0})}(e))e.preventDefault(),dx=!0,mt(t,Uh,!0);else if(function(n){return Wn(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})}(e))dx=!1,mt(t,Tg,e);else if(function(n){return Wn(n,"Backspace",{shiftKey:"any"})||Ai&&Wn(n,"h",{ctrlKey:!0})}(e))Hte(e)?mt(t,bV,e):(e.preventDefault(),mt(t,Dl,!0));else if(function(n){return n.key==="Escape"}(e))mt(t,Gwe,e);else if(function(n){return Wn(n,"Delete",{})||Ai&&Wn(n,"d",{ctrlKey:!0})}(e))(function(n){return n.key==="Delete"})(e)?mt(t,_V,e):(e.preventDefault(),mt(t,Dl,!1));else if(function(n){return Wn(n,"Backspace",Wte)}(e))e.preventDefault(),mt(t,Mg,!0);else if(function(n){return Wn(n,"Delete",Wte)}(e))e.preventDefault(),mt(t,Mg,!1);else if(function(n){return Ai&&Wn(n,"Backspace",{metaKey:!0})}(e))e.preventDefault(),mt(t,kg,!0);else if(function(n){return Ai&&(Wn(n,"Delete",{metaKey:!0})||Wn(n,"k",{ctrlKey:!0}))}(e))e.preventDefault(),mt(t,kg,!1);else if(function(n){return Wn(n,"b",Ec)}(e))e.preventDefault(),mt(t,Hf,"bold");else if(function(n){return Wn(n,"u",Ec)}(e))e.preventDefault(),mt(t,Hf,"underline");else if(function(n){return Wn(n,"i",Ec)}(e))e.preventDefault(),mt(t,Hf,"italic");else if(function(n){return Wn(n,"Tab",{shiftKey:"any"})}(e))mt(t,qwe,e);else if(function(n){return Wn(n,"z",Ec)}(e))e.preventDefault(),mt(t,Bwe,void 0);else if(function(n){return Ai?Wn(n,"z",{metaKey:!0,shiftKey:!0}):Wn(n,"y",{ctrlKey:!0})||Wn(n,"z",{ctrlKey:!0,shiftKey:!0})}(e))e.preventDefault(),mt(t,Vwe,void 0);else{const n=t._editorState._selection;n===null||Fe(n)?zte(e)&&(e.preventDefault(),mt(t,h9,e)):function(r){return Wn(r,"c",Ec)}(e)?(e.preventDefault(),mt(t,wV,e)):function(r){return Wn(r,"x",Ec)}(e)?(e.preventDefault(),mt(t,CV,e)):zte(e)&&(e.preventDefault(),mt(t,h9,e))}(function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey})(e)&&mt(t,BMt,e)}}],["pointerdown",function(e,t){const n=e.target,r=e.pointerType;Xy(n)&&r!=="touch"&&r!=="pen"&&e.button===0&&wo(t,()=>{Bte(n)||(x9=!0)})}],["compositionstart",function(e,t){wo(t,()=>{const n=nt();if(Fe(n)&&!t.isComposing()){const r=n.anchor,s=n.anchor.getNode();Os(r.key),(e.timeStamp<ux+g9||r.type==="element"||!n.isCollapsed()||s.getFormat()!==n.format||Je(s)&&s.getStyle()!==n.style)&&mt(t,rm,mMt)}})}],["compositionend",function(e,t){jm?X0=!0:Sg||!V1&&!$1?wo(t,()=>{kC(t,e.data)}):(SA=!0,EA=e.data)}],["input",function(e,t){e.stopPropagation(),wo(t,()=>{if(Xr(e.target)&&Bte(e.target))return;const n=nt(),r=e.data,s=tCe(e);if(r!=null&&Fe(n)&&Jwe(n,s,r,e.timeStamp,!1)){X0&&(kC(t,r),X0=!1);const a=n.anchor.getNode(),i=Zl(fi(t));if(i===null)return;const l=n.isBackward(),c=l?n.anchor.offset:n.focus.offset,u=l?n.focus.offset:n.anchor.offset;UE&&!n.isCollapsed()&&Je(a)&&i.anchorNode!==null&&a.getTextContent().slice(0,c)+r+a.getTextContent().slice(c+u)===kCe(i.anchorNode)||mt(t,rm,r);const d=r.length;jm&&d>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(n.anchor.offset-=d),V1||Sg||$1||!t.isComposing()||(ux=0,Os(null))}else OV(!1,t,r!==null?r:void 0),X0&&(kC(t,r||void 0),X0=!1);(function(){Ps();const a=Er();Awe(a)})()},{event:e}),Qp=null}],["click",function(e,t){wo(t,()=>{const n=nt(),r=Zl(fi(t)),s=j_();if(r){if(Fe(n)){const a=n.anchor,i=a.getNode();if(a.type==="element"&&a.offset===0&&n.isCollapsed()&&!ds(i)&&cr().getChildrenSize()===1&&i.getTopLevelElementOrThrow().isEmpty()&&s!==null&&n.is(s))r.removeAllRanges(),n.dirty=!0;else if(e.detail===3&&!n.isCollapsed()&&i!==n.focus.getNode()){const l=si(i,c=>Ie(c)&&!c.isInline());Ie(l)&&l.select(0)}}else if(e.pointerType==="touch"||e.pointerType==="pen"){const a=r.anchorNode;(Xr(a)||ju(a))&&ua(EV(s,r,t,e))}}mt(t,jMt,e)})}],["cut",bc],["copy",bc],["dragstart",bc],["dragover",bc],["dragend",bc],["paste",bc],["focus",bc],["blur",bc],["drop",bc]];UE&&y9.push(["beforeinput",(e,t)=>function(n,r){const s=n.inputType,a=tCe(n);s==="deleteCompositionText"||jm&&TCe(r)||s!=="insertCompositionText"&&wo(r,()=>{const i=nt();if(s==="deleteContentBackward"){if(i===null){const h=j_();if(!Fe(h))return;ua(h.clone())}if(Fe(i)){const h=i.anchor.key===i.focus.key;if(l=n.timeStamp,Qwe==="MediaLast"&&l<ux+g9&&r.isComposing()&&h){if(Os(null),ux=0,setTimeout(()=>{wo(r,()=>{Os(null)})},g9),Fe(i)){const g=i.anchor.getNode();g.markDirty(),Je(g)||$e(142),eCe(i,g)}}else{Os(null),n.preventDefault();const g=i.anchor.getNode(),y=g.getTextContent(),v=g.canInsertTextAfter(),x=i.anchor.offset===0&&i.focus.offset===y.length;let b=ate&&h&&!x&&v;if(b&&i.isCollapsed()&&(b=!Ln(d5t(i.anchor,!0))),!b){mt(r,Dl,!0);const _=nt();ate&&Fe(_)&&_.isCollapsed()&&(Pf=_,setTimeout(()=>Pf=null))}}return}}var l;if(!Fe(i))return;const c=n.data;Qp!==null&&OV(!1,r,Qp),i.dirty&&Qp===null||!i.isCollapsed()||ds(i.anchor.getNode())||a===null||i.applyDOMRange(a),Qp=null;const u=i.anchor,d=i.focus,m=u.getNode(),p=d.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(n.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":mt(r,rm,n);break;case"insertFromComposition":Os(null),mt(r,rm,n);break;case"insertLineBreak":Os(null),mt(r,Uh,!1);break;case"insertParagraph":Os(null),dx&&!Sg?(dx=!1,mt(r,Uh,!1)):mt(r,p9,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":mt(r,T_,n);break;case"deleteByComposition":(function(h,g){return h!==g||Ie(h)||Ie(g)||!sm(h)||!sm(g)})(m,p)&&mt(r,GE,n);break;case"deleteByDrag":case"deleteByCut":mt(r,GE,n);break;case"deleteContent":mt(r,Dl,!1);break;case"deleteWordBackward":mt(r,Mg,!0);break;case"deleteWordForward":mt(r,Mg,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":mt(r,kg,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":mt(r,kg,!1);break;case"formatStrikeThrough":mt(r,Hf,"strikethrough");break;case"formatBold":mt(r,Hf,"bold");break;case"formatItalic":mt(r,Hf,"italic");break;case"formatUnderline":mt(r,Hf,"underline");break;case"historyUndo":mt(r,Bwe,void 0);break;case"historyRedo":mt(r,Vwe,void 0)}else{if(c===`
`)n.preventDefault(),mt(r,Uh,!1);else if(c===du)n.preventDefault(),mt(r,p9,void 0);else if(c==null&&n.dataTransfer){const h=n.dataTransfer.getData("text/plain");n.preventDefault(),i.insertRawText(h)}else c!=null&&Jwe(i,a,c,n.timeStamp,!0)?(n.preventDefault(),mt(r,rm,c)):Qp=c;Xwe=n.timeStamp}})}(e,t)]);let ux=0,Qwe=null,Xwe=0,Qp=null;const qE=new WeakMap;let v9=!1,x9=!1,dx=!1,X0=!1,SA=!1,EA="",Pf=null,Zwe=[0,"",0,"root",0];function Jwe(e,t,n,r,s){const a=e.anchor,i=e.focus,l=a.getNode(),c=Er(),u=Zl(fi(c)),d=u!==null?u.anchorNode:null,m=a.key,p=c.getElementByKey(m),h=n.length;return m!==i.key||!Je(l)||(!s&&(!UE||Xwe<r+50)||l.isDirty()&&h<2||ECe(n))&&a.offset!==i.offset&&!l.isComposing()||jc(l)||l.isDirty()&&h>1||(s||!UE)&&p!==null&&!l.isComposing()&&d!==jg(p)||u!==null&&t!==null&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||l.getFormat()!==e.format||l.getStyle()!==e.style||function(g,y){if(y.isSegmented())return!0;if(!g.isCollapsed())return!1;const v=g.anchor.offset,x=y.getParentOrThrow(),b=sm(y);return v===0?!y.canInsertTextBefore()||!x.canInsertTextBefore()&&!y.isComposing()||b||function(_){const w=_.getPreviousSibling();return(Je(w)||Ie(w)&&w.isInline())&&!w.canInsertTextAfter()}(y):v===y.getTextContentSize()&&(!y.canInsertTextAfter()||!x.canInsertTextAfter()&&!y.isComposing()||b)}(e,l)}function yte(e,t){return ju(e)&&e.nodeValue!==null&&t!==0&&t!==e.nodeValue.length}function vte(e,t,n){const{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:i}=e;v9&&(v9=!1,yte(r,s)&&yte(a,i)&&!Pf)||wo(t,()=>{if(!n)return void ua(null);if(!Nk(t,r,a))return;let l=nt();if(Pf&&Fe(l)&&l.isCollapsed()){const c=l.anchor,u=Pf.anchor;(c.key===u.key&&c.offset===u.offset+1||c.offset===1&&u.getNode().is(c.getNode().getPreviousSibling()))&&(l=Pf.clone(),ua(l))}if(Pf=null,Fe(l)){const c=l.anchor,u=c.getNode();if(l.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(l.dirty=!0);const d=fi(t).event,m=d?d.timeStamp:performance.now(),[p,h,g,y,v]=Zwe,x=cr(),b=t.isComposing()===!1&&x.getTextContent()==="";if(m<v+200&&c.offset===g&&c.key===y)$S(l,p,h);else if(c.type==="text")Je(u)||$e(141),eCe(l,u);else if(c.type==="element"&&!b){Ie(u)||$e(259);const _=c.getNode();_.isEmpty()?function(w,C){const S=C.getTextFormat(),E=C.getTextStyle();$S(w,S,E)}(l,_):$S(l,0,"")}}else{const d=c.key,m=l.focus.key,p=l.getNodes(),h=p.length,g=l.isBackward(),y=g?i:s,v=g?s:i,x=g?m:d,b=g?d:m;let _=fMt,w=!1;for(let C=0;C<h;C++){const S=p[C],E=S.getTextContentSize();if(Je(S)&&E!==0&&!(C===0&&S.__key===x&&y===E||C===h-1&&S.__key===b&&v===0)&&(w=!0,_&=S.getFormat(),_===0))break}l.format=w?_:0}}mt(t,Uwe,void 0)})}function $S(e,t,n){e.format===t&&e.style===n||(e.format=t,e.style=n,e.dirty=!0)}function eCe(e,t){$S(e,t.getFormat(),t.getStyle())}function tCe(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function kC(e,t){const n=e._compositionKey;if(Os(null),n!==null&&t!=null){if(t===""){const r=_s(n),s=jg(e.getElementByKey(n));return void(s!==null&&s.nodeValue!==null&&Je(r)&&LV(r,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const r=nt();if(Fe(r)){const s=r.focus;return r.anchor.set(s.key,s.offset,s.type),void mt(e,Tg,null)}}}OV(!0,e,t)}function nCe(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const Bh=new Map;function rCe(e){const t=h5t(e.target);if(t===null)return;const n=RV(t.anchorNode);if(n===null)return;x9&&(x9=!1,wo(n,()=>{const c=j_(),u=t.anchorNode;(Xr(u)||ju(u))&&ua(EV(c,t,n,e))}));const r=PV(n),s=r[r.length-1],a=s._key,i=Bh.get(a),l=i||s;l!==n&&vte(t,l,!1),vte(t,n,!0),n!==s?Bh.set(a,n):i&&Bh.delete(a)}function xte(e){e._lexicalHandled=!0}function bte(e){return e._lexicalHandled===!0}function VMt(e){const t=e.ownerDocument,n=qE.get(t);if(n===void 0)return;const r=n-1;r>=0||$e(164),qE.set(t,r),r===0&&t.removeEventListener("selectionchange",rCe);const s=jk(e);IV(s)?(function(i){if(i._parentEditor!==null){const l=PV(i),c=l[l.length-1]._key;Bh.get(c)===i&&Bh.delete(c)}else Bh.delete(i._key)}(s),e.__lexicalEditor=null):s&&$e(198);const a=nCe(e);for(let i=0;i<a.length;i++)a[i]();e.__lexicalEventHandles=[]}function b9(e,t,n){Ps();const r=e.__key,s=e.getParent();if(s===null)return;const a=function(l){const c=nt();if(!Fe(c)||!Ie(l))return c;const{anchor:u,focus:d}=c,m=u.getNode(),p=d.getNode();return E9(m,l)&&u.set(l.__key,0,"element"),E9(p,l)&&d.set(l.__key,0,"element"),c}(e);let i=!1;if(Fe(a)&&t){const l=a.anchor,c=a.focus;l.key===r&&(YE(l,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0),c.key===r&&(YE(c,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0)}else Zc(a)&&t&&e.isSelected()&&e.selectPrevious();if(Fe(a)&&t&&!i){const l=e.getIndexWithinParent();am(e),KE(a,s,l,-1)}else am(e);n||Qi(s)||s.canBeEmpty()||!s.isEmpty()||b9(s,t),t&&a&&ds(s)&&s.isEmpty()&&s.selectEnd()}class fd{__type;__key;__parent;__prev;__next;__state;static getType(){const{ownNodeType:t}=$V(this);return t===void 0&&$e(64,this.name),t}static clone(t){$e(65,this.name)}$config(){return{}}config(t,n){const r=n.extends||Object.getPrototypeOf(this.constructor);return Object.assign(n,{extends:r,type:t}),{[t]:n}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}static importDOM;constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),l5t(this,t)}getType(){return this.__type}isInline(){$e(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const n=_s(t);if(n===null)break;t=n.__parent}return!1}isSelected(t){const n=t||nt();if(n==null)return!1;const r=n.getNodes().some(s=>s.__key===this.__key);if(Je(this))return r;if(Fe(n)&&n.anchor.type==="element"&&n.focus.type==="element"){if(n.isCollapsed())return!1;const s=this.getParent();if(Ln(this)&&this.isInline()&&s){const a=n.isBackward()?n.focus:n.anchor;if(s.is(a.getNode())&&a.offset===s.getChildrenSize()&&this.is(s.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let n=t.getFirstChild(),r=0;for(;n!==null;){if(this.is(n))return r;r++,n=n.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:_s(t)}getParentOrThrow(){const t=this.getParent();return t===null&&$e(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const n=t.getParent();if(Qi(n))return Ie(t)||t===this&&Ln(t)||$e(194),t;t=n}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&$e(67,this.__key),t}getParents(){const t=[];let n=this.getParent();for(;n!==null;)t.push(n),n=n.getParent();return t}getParentKeys(){const t=[];let n=this.getParent();for(;n!==null;)t.push(n.__key),n=n.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:_s(t)}getPreviousSiblings(){const t=[],n=this.getParent();if(n===null)return t;let r=n.getFirstChild();for(;r!==null&&!r.is(this);)t.push(r),r=r.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:_s(t)}getNextSiblings(){const t=[];let n=this.getNextSibling();for(;n!==null;)t.push(n),n=n.getNextSibling();return t}getCommonAncestor(t){const n=Ie(this)?this:this.getParent(),r=Ie(t)?t:t.getParent(),s=n&&r?HS(n,r):null;return s?s.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){const n=HS(this,t);return n!==null&&(n.type==="descendant"||(n.type==="branch"?PCe(n)===-1:(n.type!=="same"&&n.type!=="ancestor"&&$e(279),!1)))}isParentOf(t){const n=HS(this,t);return n!==null&&n.type==="ancestor"}getNodesBetween(t){const n=this.isBefore(t),r=[],s=new Set;let a=this;for(;a!==null;){const i=a.__key;if(s.has(i)||(s.add(i),r.push(a)),a===t)break;const l=Ie(a)?n?a.getFirstChild():a.getLastChild():null;if(l!==null){a=l;continue}const c=n?a.getNextSibling():a.getPreviousSibling();if(c!==null){a=c;continue}const u=a.getParentOrThrow();if(s.has(u.__key)||r.push(u),u===t)break;let d=null,m=u;do{if(m===null&&$e(68),d=n?m.getNextSibling():m.getPreviousSibling(),m=m.getParent(),m===null)break;d!==null||s.has(m.__key)||r.push(m)}while(d===null);a=d}return n||r.reverse(),r}isDirty(){const t=Er()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=_s(this.__key);return t===null&&$e(113),t}getWritable(){Ps();const t=Qd(),n=Er(),r=t._nodeMap,s=this.__key,a=this.getLatest(),i=n._cloneNotNeeded,l=nt();if(l!==null&&l.setCachedNodes(null),i.has(s))return XE(a),a;const c=jCe(a);return i.add(s),XE(c),r.set(s,c),c}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,n){$e(70)}updateDOM(t,n,r){$e(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){$e(18,this.name)}updateFromJSON(t){return function(n,r){const s=n.getWritable(),a=r.$;let i=a;for(const l of Pwe(s).flatKeys)l in r&&(i!==void 0&&i!==a||(i={...a}),i[l]=r[l]);return(s.__state||i)&&EMt(n).updateFromJSON(i),s}(this,t)}static transform(){return null}remove(t){b9(this,!0,t)}replace(t,n){Ps();let r=nt();r!==null&&(r=r.clone()),AA(this,t);const s=this.getLatest(),a=this.__key,i=t.__key,l=t.getWritable(),c=this.getParentOrThrow().getWritable(),u=c.__size;am(l);const d=s.getPreviousSibling(),m=s.getNextSibling(),p=s.__prev,h=s.__next,g=s.__parent;if(b9(s,!1,!0),d===null?c.__first=i:d.getWritable().__next=i,l.__prev=p,m===null?c.__last=i:m.getWritable().__prev=i,l.__next=h,l.__parent=g,c.__size=u,n&&(Ie(this)&&Ie(l)||$e(139),this.getChildren().forEach(y=>{l.append(y)})),Fe(r)){ua(r);const y=r.anchor,v=r.focus;y.key===a&&Ste(y,l),v.key===a&&Ste(v,l)}return nd()===a&&Os(i),l}insertAfter(t,n=!0){Ps(),AA(this,t);const r=this.getWritable(),s=t.getWritable(),a=s.getParent(),i=nt();let l=!1,c=!1;if(a!==null){const h=t.getIndexWithinParent();if(am(s),Fe(i)){const g=a.__key,y=i.anchor,v=i.focus;l=y.type==="element"&&y.key===g&&y.offset===h+1,c=v.type==="element"&&v.key===g&&v.offset===h+1}}const u=this.getNextSibling(),d=this.getParentOrThrow().getWritable(),m=s.__key,p=r.__next;if(u===null?d.__last=m:u.getWritable().__prev=m,d.__size++,r.__next=m,s.__next=p,s.__prev=r.__key,s.__parent=r.__parent,n&&Fe(i)){const h=this.getIndexWithinParent();KE(i,d,h+1);const g=d.__key;l&&i.anchor.set(g,h+2,"element"),c&&i.focus.set(g,h+2,"element")}return t}insertBefore(t,n=!0){Ps(),AA(this,t);const r=this.getWritable(),s=t.getWritable(),a=s.__key;am(s);const i=this.getPreviousSibling(),l=this.getParentOrThrow().getWritable(),c=r.__prev,u=this.getIndexWithinParent();i===null?l.__first=a:i.getWritable().__next=a,l.__size++,r.__prev=a,s.__prev=c,s.__next=r.__key,s.__parent=r.__parent;const d=nt();return n&&Fe(d)&&KE(d,this.getParentOrThrow(),u),t}isParentRequired(){return!1}createParentElementNode(){return Cr()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,n){Ps();const r=this.getPreviousSibling(),s=this.getParentOrThrow();if(r===null)return s.select(0,0);if(Ie(r))return r.select();if(!Je(r)){const a=r.getIndexWithinParent()+1;return s.select(a,a)}return r.select(t,n)}selectNext(t,n){Ps();const r=this.getNextSibling(),s=this.getParentOrThrow();if(r===null)return s.select();if(Ie(r))return r.select(0,0);if(!Je(r)){const a=r.getIndexWithinParent();return s.select(a,a)}return r.select(t,n)}markDirty(){this.getWritable()}reconcileObservedMutation(t,n){this.markDirty()}}class Yy extends fd{static getType(){return"linebreak"}static clone(t){return new Yy(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>function(n){const r=n.parentElement;if(r!==null&&ZE(r)){const s=r.firstChild;if(s===n||s.nextSibling===n&&TC(s)){const a=r.lastChild;if(a===n||a.previousSibling===n&&TC(a))return!0}}return!1}(t)||function(n){const r=n.parentElement;if(r!==null&&ZE(r)){const s=r.firstChild;if(s===n||s.nextSibling===n&&TC(s))return!1;const a=r.lastChild;if(a===n||a.previousSibling===n&&TC(a))return!0}return!1}(t)?null:{conversion:$Mt,priority:0}}}static importJSON(t){return Do().updateFromJSON(t)}}function $Mt(e){return{node:Do()}}function Do(){return wi(new Yy)}function Fl(e){return e instanceof Yy}function TC(e){return ju(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function MA(e,t){return 16&t?"code":t&fV?"mark":32&t?"sub":64&t?"sup":null}function kA(e,t){return 1&t?"strong":2&t?"em":"span"}function sCe(e,t,n,r,s){const a=r.classList;let i=Vh(s,"base");i!==void 0&&a.add(...i),i=Vh(s,"underlineStrikethrough");let l=!1;const c=t&VE&&t&BE;i!==void 0&&(n&VE&&n&BE?(l=!0,c||a.add(...i)):c&&a.remove(...i));for(const u in Im){const d=Im[u];if(i=Vh(s,u),i!==void 0)if(n&d){if(l&&(u==="underline"||u==="strikethrough")){t&d&&a.remove(...i);continue}t&d&&(!c||u!=="underline")&&u!=="strikethrough"||a.add(...i)}else t&d&&a.remove(...i)}}function aCe(e,t,n){const r=t.firstChild,s=n.isComposing(),a=e+(s?Ck:"");if(r==null)t.textContent=a;else{const i=r.nodeValue;if(i!==a)if(s||jm){const[l,c,u]=function(d,m){const p=d.length,h=m.length;let g=0,y=0;for(;g<p&&g<h&&d[g]===m[g];)g++;for(;y+g<p&&y+g<h&&d[p-y-1]===m[h-y-1];)y++;return[g,p-g-y,m.slice(g,h-y)]}(i,a);c!==0&&r.deleteData(l,c),r.insertData(l,u)}else r.nodeValue=a}}function _te(e,t,n,r,s,a){aCe(s,e,t);const i=a.theme.text;i!==void 0&&sCe(0,0,r,e,i)}function NC(e,t){const n=document.createElement(t);return n.appendChild(e),n}class uc extends fd{__text;__format;__style;__mode;__detail;static getType(){return"text"}static clone(t){return new uc(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",n){super(n),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return yMt[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===nd()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const n=Im[t];return!!(this.getFormat()&n)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,n){return QE(this.getLatest().__format,t,n)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,n){const r=this.__format,s=MA(0,r),a=kA(0,r),i=s===null?a:s,l=document.createElement(i);let c=l;this.hasFormat("code")&&l.setAttribute("spellcheck","false"),s!==null&&(c=document.createElement(a),l.appendChild(c)),_te(c,this,0,r,this.__text,t);const u=this.__style;return u!==""&&(l.style.cssText=u),l}updateDOM(t,n,r){const s=this.__text,a=t.__format,i=this.__format,l=MA(0,a),c=MA(0,i),u=kA(0,a),d=kA(0,i);if((l===null?u:l)!==(c===null?d:c))return!0;if(l===c&&u!==d){const y=n.firstChild;y==null&&$e(48);const v=document.createElement(d);return _te(v,this,0,i,s,r),n.replaceChild(v,y),!1}let m=n;c!==null&&l!==null&&(m=n.firstChild,m==null&&$e(49)),aCe(s,m,this);const p=r.theme.text;p!==void 0&&a!==i&&sCe(0,a,i,m,p);const h=t.__style,g=this.__style;return h!==g&&(n.style.cssText=g),!1}static importDOM(){return{"#text":()=>({conversion:GMt,priority:0}),b:()=>({conversion:HMt,priority:0}),code:()=>({conversion:_c,priority:0}),em:()=>({conversion:_c,priority:0}),i:()=>({conversion:_c,priority:0}),mark:()=>({conversion:_c,priority:0}),s:()=>({conversion:_c,priority:0}),span:()=>({conversion:WMt,priority:0}),strong:()=>({conversion:_c,priority:0}),sub:()=>({conversion:_c,priority:0}),sup:()=>({conversion:_c,priority:0}),u:()=>({conversion:_c,priority:0})}}static importJSON(t){return Qn().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:n}=super.exportDOM(t);return Xr(n)||$e(132),n.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?n.style.textTransform="lowercase":this.hasFormat("uppercase")?n.style.textTransform="uppercase":this.hasFormat("capitalize")&&(n.style.textTransform="capitalize"),this.hasFormat("bold")&&(n=NC(n,"b")),this.hasFormat("italic")&&(n=NC(n,"i")),this.hasFormat("strikethrough")&&(n=NC(n,"s")),this.hasFormat("underline")&&(n=NC(n,"u")),{element:n}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,n){}setFormat(t){const n=this.getWritable();return n.__format=typeof t=="string"?Im[t]:t,n}setDetail(t){const n=this.getWritable();return n.__detail=typeof t=="string"?pMt[t]:t,n}setStyle(t){const n=this.getWritable();return n.__style=t,n}toggleFormat(t){const n=QE(this.getFormat(),t,null);return this.setFormat(n)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const n=gMt[t];if(this.__mode===n)return this;const r=this.getWritable();return r.__mode=n,r}setTextContent(t){if(this.__text===t)return this;const n=this.getWritable();return n.__text=t,n}select(t,n){Ps();let r=t,s=n;const a=nt(),i=this.getTextContent(),l=this.__key;if(typeof i=="string"){const c=i.length;r===void 0&&(r=c),s===void 0&&(s=c)}else r=0,s=0;if(!Fe(a))return lCe(l,r,l,s,"text","text");{const c=nd();c!==a.anchor.key&&c!==a.focus.key||Os(l),a.setTextNodeRange(this,r,this,s)}return a}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,n,r,s){const a=this.getWritable(),i=a.__text,l=r.length;let c=t;c<0&&(c=l+c,c<0&&(c=0));const u=nt();if(s&&Fe(u)){const m=t+l;u.setTextNodeRange(a,m,a,m)}const d=i.slice(0,c)+r+i.slice(c+n);return a.__text=d,a}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){Ps();const n=this.getLatest(),r=n.getTextContent();if(r==="")return[];const s=n.__key,a=nd(),i=r.length;t.sort((M,k)=>M-k),t.push(i);const l=[],c=t.length;for(let M=0,k=0;M<i&&k<=c;k++){const A=t[k];A>M&&(l.push(r.slice(M,A)),M=A)}const u=l.length;if(u===1)return[n];const d=l[0],m=n.getParent();let p;const h=n.getFormat(),g=n.getStyle(),y=n.__detail;let v=!1,x=null,b=null;const _=nt();if(Fe(_)){const[M,k]=_.isBackward()?[_.focus,_.anchor]:[_.anchor,_.focus];M.type==="text"&&M.key===s&&(x=M),k.type==="text"&&k.key===s&&(b=k)}n.isSegmented()?(p=Qn(d),p.__format=h,p.__style=g,p.__detail=y,p.__state=dte(n,p),v=!0):p=n.setTextContent(d);const w=[p];for(let M=1;M<u;M++){const k=Qn(l[M]);k.__format=h,k.__style=g,k.__detail=y,k.__state=dte(n,k);const A=k.__key;a===s&&Os(A),w.push(k)}const C=x?x.offset:null,S=b?b.offset:null;let E=0;for(const M of w){if(!x&&!b)break;const k=E+M.getTextContentSize();if(x!==null&&C!==null&&C<=k&&C>=E&&(x.set(M.getKey(),C-E,"text"),C<k&&(x=null)),b!==null&&S!==null&&S<=k&&S>=E){b.set(M.getKey(),S-E,"text");break}E=k}if(m!==null){(function(A){const R=A.getPreviousSibling(),O=A.getNextSibling();R!==null&&XE(R),O!==null&&XE(O)})(this);const M=m.getWritable(),k=this.getIndexWithinParent();v?(M.splice(k,0,w),this.remove()):M.splice(k,1,w),Fe(_)&&KE(_,m,k,u-1)}return w}mergeWithSibling(t){const n=t===this.getPreviousSibling();n||t===this.getNextSibling()||$e(50);const r=this.__key,s=t.__key,a=this.__text,i=a.length;nd()===s&&Os(r);const l=nt();if(Fe(l)){const m=l.anchor,p=l.focus;m!==null&&m.key===s&&Ate(m,n,r,t,i),p!==null&&p.key===s&&Ate(p,n,r,t,i)}const c=t.__text,u=n?c+a:a+c;this.setTextContent(u);const d=this.getWritable();return t.remove(),d}isTextEntity(){return!1}}function WMt(e){return{forChild:SV(e.style),node:null}}function HMt(e){const t=e,n=t.style.fontWeight==="normal";return{forChild:SV(t.style,n?void 0:"bold"),node:null}}const wte=new WeakMap;function zMt(e){if(!Xr(e))return!1;if(e.nodeName==="PRE")return!0;const t=e.style.whiteSpace;return typeof t=="string"&&t.startsWith("pre")}function GMt(e){const t=e;e.parentElement===null&&$e(129);let n=t.textContent||"";if(function(r){let s,a=r.parentNode;const i=[r];for(;a!==null&&(s=wte.get(a))===void 0&&!zMt(a);)i.push(a),a=a.parentNode;const l=s===void 0?a:s;for(let c=0;c<i.length;c++)wte.set(i[c],l);return l}(t)!==null){const r=n.split(/(\r?\n|\t)/),s=[],a=r.length;for(let i=0;i<a;i++){const l=r[i];l===`
`||l===`\r
`?s.push(Do()):l==="	"?s.push(N_()):l!==""&&s.push(Qn(l))}return{node:s}}if(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," "),n==="")return{node:null};if(n[0]===" "){let r=t,s=!0;for(;r!==null&&(r=Cte(r,!1))!==null;){const a=r.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(n=n.slice(1)),s=!1;break}}s&&(n=n.slice(1))}if(n[n.length-1]===" "){let r=t,s=!0;for(;r!==null&&(r=Cte(r,!0))!==null;)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(n=n.slice(0,n.length-1))}return n===""?{node:null}:{node:Qn(n)}}function Cte(e,t){let n=e;for(;;){let r;for(;(r=t?n.nextSibling:n.previousSibling)===null;){const a=n.parentElement;if(a===null)return null;n=a}if(n=r,Xr(n)){const a=n.style.display;if(a===""&&!T9(n)||a!==""&&!a.startsWith("inline"))return null}let s=n;for(;(s=t?n.firstChild:n.lastChild)!==null;)n=s;if(ju(n))return n;if(n.nodeName==="BR")return null}}const qMt={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function _c(e){const t=qMt[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:SV(e.style,t),node:null}}function Qn(e=""){return wi(new uc(e))}function Je(e){return e instanceof uc}function SV(e,t){const n=e.fontWeight,r=e.textDecoration.split(" "),s=n==="700"||n==="bold",a=r.includes("line-through"),i=e.fontStyle==="italic",l=r.includes("underline"),c=e.verticalAlign;return u=>(Je(u)&&(s&&!u.hasFormat("bold")&&u.toggleFormat("bold"),a&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),i&&!u.hasFormat("italic")&&u.toggleFormat("italic"),l&&!u.hasFormat("underline")&&u.toggleFormat("underline"),c!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),c!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),t&&!u.hasFormat(t)&&u.toggleFormat(t)),u)}class Qy extends uc{static getType(){return"tab"}static clone(t){return new Qy(t.__key)}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}createDOM(t){const n=super.createDOM(t),r=Vh(t.theme,"tab");return r!==void 0&&n.classList.add(...r),n}static importJSON(t){return N_().updateFromJSON(t)}setTextContent(t){return t!=="	"&&t!==""&&Ewe(126),super.setTextContent("	")}spliceText(t,n,r,s){return r===""&&n===0||r==="	"&&n===1||$e(286),this}setDetail(t){return t!==2&&$e(127),this}setMode(t){return t!=="normal"&&$e(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function N_(){return wi(new Qy)}function Ek(e){return e instanceof Qy}class KMt{key;offset;type;_selection;constructor(t,n,r){this._selection=null,this.key=t,this.offset=n,this.type=r}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:RCe(Tl(mu(this,"next")),Tl(mu(t,"next")))<0}getNode(){const t=_s(this.key);return t===null&&$e(20),t}set(t,n,r,s){const a=this._selection,i=this.key;s&&this.key===t&&this.offset===n&&this.type===r||(this.key=t,this.offset=n,this.type=r,A_()||(nd()===i&&Os(t),a!==null&&(a.setCachedNodes(null),a.dirty=!0)))}}function Xl(e,t,n){return new KMt(e,t,n)}function TA(e,t){let n=t.__key,r=e.offset,s="element";if(Je(t)){s="text";const a=t.getTextContentSize();r>a&&(r=a)}else if(!Ie(t)){const a=t.getNextSibling();if(Je(a))n=a.__key,r=0,s="text";else{const i=t.getParent();i&&(n=i.__key,r=t.getIndexWithinParent()+1)}}e.set(n,r,s)}function Ste(e,t){if(Ie(t)){const n=t.getLastDescendant();Ie(n)||Je(n)?TA(e,n):TA(e,t)}else TA(e,t)}class Mk{_nodes;_cachedNodes;dirty;constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!Zc(t))return!1;const n=this._nodes,r=t._nodes;return n.size===r.size&&Array.from(n).every(s=>r.has(s))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new Mk(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const n=this.getNodes(),r=n.length,s=n[r-1];let a;if(Je(s))a=s.select();else{const i=s.getIndexWithinParent()+1;a=s.getParentOrThrow().select(i,i)}a.insertNodes(t);for(let i=0;i<r;i++)n[i].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const n=this._nodes,r=[];for(const s of n){const a=_s(s);a!==null&&r.push(a)}return A_()||(this._cachedNodes=r),r}getTextContent(){const t=this.getNodes();let n="";for(let r=0;r<t.length;r++)n+=t[r].getTextContent();return n}deleteNodes(){const t=this.getNodes();if((nt()||j_())===this&&t[0]){const n=Vs(t[0],"next");M5t(Ad(n,n))}for(const n of t)n.remove()}}function Fe(e){return e instanceof ep}class ep{format;style;anchor;focus;_cachedNodes;dirty;constructor(t,n,r,s){this.anchor=t,this.focus=n,t._selection=this,n._selection=this,this._cachedNodes=null,this.format=r,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!Fe(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const n=function(r){const s=[],[a,i]=r.getTextSlices();a&&s.push(a.caret.origin);const l=new Set,c=new Set;for(const u of r)if(Ul(u)){const{origin:d}=u;s.length===0?l.add(d):(c.add(d),s.push(d))}else{const{origin:d}=u;Ie(d)&&c.has(d)||s.push(d)}if(i&&s.push(i.caret.origin),Ig(r.focus)&&Ie(r.focus.origin)&&r.focus.getNodeAtCaret()===null)for(let u=fu(r.focus.origin,"previous");Ul(u)&&l.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(s[s.length-1]);u=zV(u))l.delete(u.origin),s.pop();for(;s.length>1;){const u=s[s.length-1];if(!Ie(u)||c.has(u)||u.isEmpty()||l.has(u))break;s.pop()}if(s.length===0&&r.isCollapsed()){const u=Tl(r.anchor),d=Tl(r.anchor.getFlipped()),m=h=>pd(h)?h.origin:h.getNodeAtCaret(),p=m(u)||m(d)||(r.anchor.getNodeAtCaret()?u.origin:d.origin);s.push(p)}return s}(LCe(Xte(this),"next"));return A_()||(this._cachedNodes=n),n}setTextNodeRange(t,n,r,s){this.anchor.set(t.__key,n,"text"),this.focus.set(r.__key,s,"text")}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const n=t[0],r=t[t.length-1],s=this.anchor,a=this.focus,i=s.isBefore(a),[l,c]=_9(this);let u="",d=!0;for(let m=0;m<t.length;m++){const p=t[m];if(Ie(p)&&!p.isInline())d||(u+=`
`),d=!p.isEmpty();else if(d=!1,Je(p)){let h=p.getTextContent();p===n?p===r?s.type==="element"&&a.type==="element"&&a.offset!==s.offset||(h=l<c?h.slice(l,c):h.slice(c,l)):h=i?h.slice(l):h.slice(c):p===r&&(h=i?h.slice(0,c):h.slice(0,l)),u+=h}else!Ln(p)&&!Fl(p)||p===r&&this.isCollapsed()||(u+=p.getTextContent())}return u}applyDOMRange(t){const n=Er(),r=n.getEditorState()._selection,s=iCe(t.startContainer,t.startOffset,t.endContainer,t.endOffset,n,r);if(s===null)return;const[a,i]=s;this.anchor.set(a.key,a.offset,a.type,!0),this.focus.set(i.key,i.offset,i.type,!0),W1(this)}clone(){const t=this.anchor,n=this.focus;return new ep(Xl(t.key,t.offset,t.type),Xl(n.key,n.offset,n.type),this.format,this.style)}toggleFormat(t){this.format=QE(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const n=Im[t];return!!(this.format&n)}insertRawText(t){const n=t.split(/(\r?\n|\t)/),r=[],s=n.length;for(let a=0;a<s;a++){const i=n[a];i===`
`||i===`\r
`?r.push(Do()):i==="	"?r.push(N_()):r.push(Qn(i))}this.insertNodes(r)}insertText(t){const n=this.anchor,r=this.focus,s=this.format,a=this.style;let i=n,l=r;!this.isCollapsed()&&r.isBefore(n)&&(i=r,l=n),i.type==="element"&&function(v,x,b,_){const w=v.getNode(),C=w.getChildAtIndex(v.offset),S=Qn();if(S.setFormat(b),S.setStyle(_),md(C))C.splice(0,0,[S]);else{const E=ds(w)?Cr().append(S):S;C===null?w.append(E):C.insertBefore(E)}v.is(x)&&x.set(S.__key,0,"text"),v.set(S.__key,0,"text")}(i,l,s,a),l.type==="element"&&K1(l,Tl(mu(l,"next")));const c=i.offset;let u=l.offset;const d=this.getNodes(),m=d.length;let p=d[0];Je(p)||$e(26);const h=p.getTextContent().length,g=p.getParentOrThrow();let y=d[m-1];if(m===1&&l.type==="element"&&(u=h,l.set(i.key,u,"text")),this.isCollapsed()&&c===h&&(jc(p)||!p.canInsertTextAfter()||!g.canInsertTextAfter()&&p.getNextSibling()===null)){let v=p.getNextSibling();if(Je(v)&&v.canInsertTextBefore()&&!jc(v)||(v=Qn(),v.setFormat(s),v.setStyle(a),g.canInsertTextAfter()?p.insertAfter(v):g.insertAfter(v)),v.select(0,0),p=v,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&c===0&&(jc(p)||!p.canInsertTextBefore()||!g.canInsertTextBefore()&&p.getPreviousSibling()===null)){let v=p.getPreviousSibling();if(Je(v)&&!jc(v)||(v=Qn(),v.setFormat(s),g.canInsertTextBefore()?p.insertBefore(v):g.insertBefore(v)),v.select(),p=v,t!=="")return void this.insertText(t)}else if(p.isSegmented()&&c!==h){const v=Qn(p.getTextContent());v.setFormat(s),p.replace(v),p=v}else if(!this.isCollapsed()&&t!==""){const v=y.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||Ie(v)&&(!v.canInsertTextBefore()||!v.canInsertTextAfter()))return this.insertText(""),oCe(this.anchor,this.focus,null),void this.insertText(t)}if(m===1){if(sm(p)){const _=Qn(t);return _.select(),void p.replace(_)}const v=p.getFormat(),x=p.getStyle();if(c!==u||v===s&&x===a){if(Ek(p)){const _=Qn(t);return _.setFormat(s),_.setStyle(a),_.select(),void p.replace(_)}}else{if(p.getTextContent()!==""){const _=Qn(t);if(_.setFormat(s),_.setStyle(a),_.select(),c===0)p.insertBefore(_,!1);else{const[w]=p.splitText(c);w.insertAfter(_,!1)}return void(_.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}p.setFormat(s),p.setStyle(a)}const b=u-c;p=p.spliceText(c,b,t,!0),p.getTextContent()===""?p.remove():this.anchor.type==="text"&&(p.isComposing()?this.anchor.offset-=t.length:(this.format=v,this.style=x))}else{const v=new Set([...p.getParentKeys(),...y.getParentKeys()]),x=Ie(p)?p:p.getParentOrThrow();let b=Ie(y)?y:y.getParentOrThrow(),_=y;if(!x.is(b)&&b.isInline())do _=b,b=b.getParentOrThrow();while(b.isInline());if(l.type==="text"&&(u!==0||y.getTextContent()==="")||l.type==="element"&&y.getIndexWithinParent()<u)if(Je(y)&&!sm(y)&&u!==y.getTextContentSize()){if(y.isSegmented()){const M=Qn(y.getTextContent());y.replace(M),y=M}ds(l.getNode())||l.type!=="text"||(y=y.spliceText(0,u,"")),v.add(y.__key)}else{const M=y.getParentOrThrow();M.canBeEmpty()||M.getChildrenSize()!==1?y.remove():M.remove()}else v.add(y.__key);const w=b.getChildren(),C=new Set(d),S=x.is(b),E=x.isInline()&&p.getNextSibling()===null?x:p;for(let M=w.length-1;M>=0;M--){const k=w[M];if(k.is(p)||Ie(k)&&k.isParentOf(p))break;k.isAttached()&&(!C.has(k)||k.is(_)?S||E.insertAfter(k,!1):k.remove())}if(!S){let M=b,k=null;for(;M!==null;){const A=M.getChildren(),R=A.length;(R===0||A[R-1].is(k))&&(v.delete(M.__key),k=M),M=M.getParent()}}if(sm(p))if(c===h)p.select();else{const M=Qn(t);M.select(),p.replace(M)}else p=p.spliceText(c,h-c,t,!0),p.getTextContent()===""?p.remove():p.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let M=1;M<m;M++){const k=d[M],A=k.__key;v.has(A)||k.remove()}}}removeText(){const t=nt()===this;zS(this,k5t(Xte(this))),t&&nt()!==this&&ua(this)}formatText(t,n=null){if(this.isCollapsed())return this.toggleFormat(t),void Os(null);const r=this.getNodes(),s=[];for(const w of r)Je(w)&&s.push(w);const a=w=>{r.forEach(C=>{if(Ie(C)){const S=C.getFormatFlags(t,w);C.setTextFormat(S)}})},i=s.length;if(i===0)return this.toggleFormat(t),Os(null),void a(n);const l=this.anchor,c=this.focus,u=this.isBackward(),d=u?c:l,m=u?l:c;let p=0,h=s[0],g=d.type==="element"?0:d.offset;if(d.type==="text"&&g===h.getTextContentSize()&&(p=1,h=s[1],g=0),h==null)return;const y=h.getFormatFlags(t,n);a(y);const v=i-1;let x=s[v];const b=m.type==="text"?m.offset:x.getTextContentSize();if(h.is(x)){if(g===b)return;if(jc(h)||g===0&&b===h.getTextContentSize())h.setFormat(y);else{const w=h.splitText(g,b),C=g===0?w[0]:w[1];C.setFormat(y),d.type==="text"&&d.set(C.__key,0,"text"),m.type==="text"&&m.set(C.__key,b-g,"text")}return void(this.format=y)}g===0||jc(h)||([,h]=h.splitText(g),g=0),h.setFormat(y);const _=x.getFormatFlags(t,y);b>0&&(b===x.getTextContentSize()||jc(x)||([x]=x.splitText(b)),x.setFormat(_));for(let w=p+1;w<v;w++){const C=s[w],S=C.getFormatFlags(t,_);C.setFormat(S)}d.type==="text"&&d.set(h.__key,g,"text"),m.type==="text"&&m.set(x.__key,b,"text"),this.format=y|_}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const g=nt();return Fe(g)||$e(134),g.insertNodes(t)}const n=(this.isBackward()?this.focus:this.anchor).getNode(),r=si(n,Yu),s=t[t.length-1];if(Ie(r)&&"__language"in r){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const g=NA(this);r.splice(g,0,t),s.selectEnd()}return}if(!t.some(g=>(Ie(g)||Ln(g))&&!g.isInline())){Ie(r)||$e(211,n.constructor.name,n.getType());const g=NA(this);return r.splice(g,0,t),void s.selectEnd()}const a=function(g){const y=Cr();let v=null;for(let x=0;x<g.length;x++){const b=g[x],_=Fl(b);if(_||Ln(b)&&b.isInline()||Ie(b)&&b.isInline()||Je(b)||b.isParentRequired()){if(v===null&&(v=b.createParentElementNode(),y.append(v),_))continue;v!==null&&v.append(b)}else y.append(b),v=null}return y}(t),i=a.getLastDescendant(),l=a.getChildren(),c=!Ie(r)||!r.isEmpty()?this.insertParagraph():null,u=l[l.length-1];let d=l[0];var m;Ie(m=d)&&Yu(m)&&!m.isEmpty()&&Ie(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(Ie(r)||$e(211,n.constructor.name,n.getType()),r.append(...d.getChildren()),d=l[1]),d&&(r===null&&$e(212,n.constructor.name,n.getType()),function(g,y,v){const x=y.getParentOrThrow().getLastChild();let b=y;const _=[y];for(;b!==x;)b.getNextSibling()||$e(140),b=b.getNextSibling(),_.push(b);let w=g;for(const C of _)w=w.insertAfter(C)}(r,d));const p=si(i,Yu);c&&Ie(p)&&(c.canMergeWhenEmpty()||Yu(u))&&(p.append(...c.getChildren()),c.remove()),Ie(r)&&r.isEmpty()&&r.remove(),i.selectEnd();const h=Ie(r)?r.getLastChild():null;Fl(h)&&p!==r&&h.remove()}insertParagraph(){if(this.anchor.key==="root"){const i=Cr();return cr().splice(this.anchor.offset,0,[i]),i.select(),i}const t=NA(this),n=si(this.anchor.getNode(),Yu);Ie(n)||$e(213);const r=n.getChildAtIndex(t),s=r?[r,...r.getNextSiblings()]:[],a=n.insertNewAfter(this,!1);return a?(a.append(...s),a.selectStart(),a):null}insertLineBreak(t){const n=Do();if(this.insertNodes([n]),t){const r=n.getParentOrThrow(),s=n.getIndexWithinParent();r.select(s,s)}}extract(){const t=[...this.getNodes()],n=t.length;let r=t[0],s=t[n-1];const[a,i]=_9(this),l=this.isBackward(),[c,u]=l?[this.focus,this.anchor]:[this.anchor,this.focus],[d,m]=l?[i,a]:[a,i];if(n===0)return[];if(n===1){if(Je(r)&&!this.isCollapsed()){const p=r.splitText(d,m),h=d===0?p[0]:p[1];return h?(c.set(h.getKey(),0,"text"),u.set(h.getKey(),h.getTextContentSize(),"text"),[h]):[]}return[r]}if(Je(r)&&(d===r.getTextContentSize()?t.shift():d!==0&&([,r]=r.splitText(d),t[0]=r,c.set(r.getKey(),0,"text"))),Je(s)){const p=s.getTextContent().length;m===0?t.pop():m!==p&&([s]=s.splitText(m),t[t.length-1]=s,u.set(s.getKey(),s.getTextContentSize(),"text"))}return t}modify(t,n,r){if(Ite(this,t,n,r))return;const s=t==="move",a=Er(),i=Zl(fi(a));if(!i)return;const l=a._blockCursorElement,c=a._rootElement,u=this.focus.getNode();if(c===null||l===null||!Ie(u)||u.isInline()||u.canBeEmpty()||M9(l,a,c),this.dirty){let d=Om(a,this.anchor.key),m=Om(a,this.focus.key);this.anchor.type==="text"&&(d=jg(d)),this.focus.type==="text"&&(m=jg(m)),d&&m&&dCe(i,d,this.anchor.offset,m,this.focus.offset)}if(function(d,m,p,h){d.modify(m,p,h)}(i,t,n?"backward":"forward",r),i.rangeCount>0){const d=i.getRangeAt(0),m=this.anchor.getNode(),p=ds(m)?m:m5t(m);if(this.applyDOMRange(d),this.dirty=!0,!s){const h=this.getNodes(),g=[];let y=!1;for(let v=0;v<h.length;v++){const x=h[v];E9(x,p)?g.push(x):y=!0}if(y&&g.length>0)if(n){const v=g[0];Ie(v)?v.selectStart():v.getParentOrThrow().selectStart()}else{const v=g[g.length-1];Ie(v)?v.selectEnd():v.getParentOrThrow().selectEnd()}i.anchorNode===d.startContainer&&i.anchorOffset===d.startOffset||function(v){const x=v.focus,b=v.anchor,_=b.key,w=b.offset,C=b.type;b.set(x.key,x.offset,x.type,!0),x.set(_,w,C,!0)}(this)}}r==="lineboundary"&&Ite(this,t,n,r,"decorators")}forwardDeletion(t,n,r){if(!r&&(t.type==="element"&&Ie(n)&&t.offset===n.getChildrenSize()||t.type==="text"&&t.offset===n.getTextContentSize())){const s=n.getParent(),a=n.getNextSibling()||(s===null?null:s.getNextSibling());if(Ie(a)&&a.isShadowRoot())return!0}return!1}deleteCharacter(t){const n=this.isCollapsed();if(this.isCollapsed()){const r=this.anchor;let s=r.getNode();if(this.forwardDeletion(r,s,t))return;const a=qV(mu(r,t?"previous":"next"));if(a.getTextSlices().every(l=>l===null||l.distance===0)){let l={type:"initial"};for(const c of a.iterNodeCarets("shadowRoot"))if(Ul(c)){if(!c.origin.isInline()){if(c.origin.isShadowRoot()){if(l.type==="merge-block")break;if(Ie(a.anchor.origin)&&a.anchor.origin.isEmpty()){const u=Tl(c);zS(this,Ad(u,u)),a.anchor.origin.remove()}return}l.type!=="merge-next-block"&&l.type!=="merge-block"||(l={block:l.block,caret:c,type:"merge-block"})}}else{if(l.type==="merge-block")break;if(Ig(c)){if(Ie(c.origin)){if(c.origin.isInline()){if(!c.origin.isParentOf(a.anchor.origin))break}else l={block:c.origin,type:"merge-next-block"};continue}if(Ln(c.origin)){if(!c.origin.isIsolated())if(l.type==="merge-next-block"&&(c.origin.isKeyboardSelectable()||!c.origin.isInline())&&Ie(a.anchor.origin)&&a.anchor.origin.isEmpty()){a.anchor.origin.remove();const u=uCe();u.add(c.origin.getKey()),ua(u)}else c.origin.remove();return}break}}if(l.type==="merge-block"){const{caret:c,block:u}=l;return zS(this,Ad(!c.origin.isEmpty()&&u.isEmpty()?KV(Vs(u,c.direction)):a.anchor,c)),this.removeText()}}const i=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&r.offset===0&&Mte(this,r.getNode()))return}else{const l=i.type==="text"?i.getNode():null;if(s=r.type==="text"?r.getNode():null,l!==null&&l.isSegmented()){const c=i.offset,u=l.getTextContentSize();if(l.is(s)||t&&c!==u||!t&&c!==0)return void kte(l,t,c)}else if(s!==null&&s.isSegmented()){const c=r.offset,u=s.getTextContentSize();if(s.is(l)||t&&c!==0||!t&&c!==u)return void kte(s,t,c)}(function(c,u){const d=c.anchor,m=c.focus,p=d.getNode(),h=m.getNode();if(p===h&&d.type==="text"&&m.type==="text"){const g=d.offset,y=m.offset,v=g<y,x=v?g:y,b=v?y:g,_=b-1;x!==_&&function(w){return!(ECe(w)||YMt(w))}(p.getTextContent().slice(x,b))&&(u?m.set(m.key,_,m.type):d.set(d.key,_,d.type))}})(this,t)}}if(this.removeText(),t&&!n&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const r=this.anchor.getNode();r.isEmpty()&&ds(r.getParent())&&r.getPreviousSibling()===null&&Mte(this,r)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const n=this.anchor,r=n.getNode();if(this.forwardDeletion(n,r,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function Zc(e){return e instanceof Mk}function Ete(e){const t=e.offset;if(e.type==="text")return t;const n=e.getNode();return t===n.getChildrenSize()?n.getTextContent().length:0}function _9(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[n,r]=t;return n.type==="element"&&r.type==="element"&&n.key===r.key&&n.offset===r.offset?[0,0]:[Ete(n),Ete(r)]}function Mte(e,t){for(let n=t;n;n=n.getParent()){if(Ie(n)){if(n.collapseAtStart(e))return!0;if(Qi(n))break}if(n.getPreviousSibling())break}return!1}const YMt=(()=>{try{const e=new RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("")&&t("#")&&t(""))return t}catch{}return()=>!1})();function kte(e,t,n){const r=e,s=r.getTextContent().split(/(?=\s)/g),a=s.length;let i=0,l=0;for(let u=0;u<a;u++){const d=u===a-1;if(l=i,i+=s[u].length,t&&i===n||i>n||d){s.splice(u,1),d&&(l=void 0);break}}const c=s.join("").trim();c===""?r.remove():(r.setTextContent(c),r.select(l,l))}function Tte(e,t,n,r){let s,a=t;if(Xr(e)){let i=!1;const l=e.childNodes,c=l.length,u=r._blockCursorElement;a===c&&(i=!0,a=c-1);let d=l[a],m=!1;if(d===u)d=l[a+1],m=!0;else if(u!==null){const p=u.parentNode;e===p&&t>Array.prototype.indexOf.call(p.children,u)&&a--}if(s=dh(d),Je(s))a=hd(s,i?"next":"previous");else{let p=dh(e);if(p===null)return null;if(Ie(p)){const h=r.getElementByKey(p.getKey());h===null&&$e(214),[p,a]=p.getDOMSlot(h).resolveChildIndex(p,h,e,t),Ie(p)||$e(215),i&&a>=p.getChildrenSize()&&(a=Math.max(0,p.getChildrenSize()-1));let y=p.getChildAtIndex(a);if(Ie(y)&&function(v,x,b){const _=v.getParent();return b===null||_===null||!_.canBeEmpty()||_!==b.getNode()}(y,0,n)){const v=i?y.getLastDescendant():y.getFirstDescendant();v===null?p=y:(y=v,p=Ie(y)?y:y.getParentOrThrow()),a=0}Je(y)?(s=y,p=null,a=hd(y,i?"next":"previous")):y!==p&&i&&!m&&(Ie(p)||$e(216),a=Math.min(p.getChildrenSize(),a+1))}else{const h=p.getIndexWithinParent();a=t===0&&Ln(p)&&dh(e)===p?h:h+1,p=p.getParentOrThrow()}if(Ie(p))return Xl(p.__key,a,"element")}}else s=dh(e);return Je(s)?Xl(s.__key,hd(s,a,"clamp"),"text"):null}function Nte(e,t,n){const r=e.offset,s=e.getNode();if(r===0){const a=s.getPreviousSibling(),i=s.getParent();if(t){if((n||!t)&&a===null&&Ie(i)&&i.isInline()){const l=i.getPreviousSibling();Je(l)&&e.set(l.__key,l.getTextContent().length,"text")}}else Ie(a)&&!n&&a.isInline()?e.set(a.__key,a.getChildrenSize(),"element"):Je(a)&&e.set(a.__key,a.getTextContent().length,"text")}else if(r===s.getTextContent().length){const a=s.getNextSibling(),i=s.getParent();if(t&&Ie(a)&&a.isInline())e.set(a.__key,0,"element");else if((n||t)&&a===null&&Ie(i)&&i.isInline()&&!i.canInsertTextAfter()){const l=i.getNextSibling();Je(l)&&e.set(l.__key,0,"text")}}}function oCe(e,t,n){if(e.type==="text"&&t.type==="text"){const r=e.isBefore(t),s=e.is(t);Nte(e,r,s),Nte(t,!r,s),s&&t.set(e.key,e.offset,e.type);const a=Er();if(a.isComposing()&&a._compositionKey!==e.key&&Fe(n)){const i=n.anchor,l=n.focus;e.set(i.key,i.offset,i.type,!0),t.set(l.key,l.offset,l.type,!0)}}}function iCe(e,t,n,r,s,a){if(e===null||n===null||!Nk(s,e,n))return null;const i=Tte(e,t,Fe(a)?a.anchor:null,s);if(i===null)return null;const l=Tte(n,r,Fe(a)?a.focus:null,s);if(l===null)return null;if(i.type==="element"&&l.type==="element"){const c=dh(e),u=dh(n);if(Ln(c)&&Ln(u))return null}return oCe(i,l,a),[i,l]}function w9(e){return Ie(e)&&!e.isInline()}function lCe(e,t,n,r,s,a){const i=Qd(),l=new ep(Xl(e,t,s),Xl(n,r,a),0,"");return l.dirty=!0,i._selection=l,l}function cCe(){const e=Xl("root",0,"element"),t=Xl("root",0,"element");return new ep(e,t,0,"")}function uCe(){return new Mk(new Set)}function EV(e,t,n,r){const s=n._window;if(s===null)return null;const a=r||s.event,i=a?a.type:void 0,l=i==="selectionchange",c=!o9&&(l||i==="beforeinput"||i==="compositionstart"||i==="compositionend"||i==="click"&&a&&a.detail===3||i==="drop"||i===void 0);let u,d,m,p;if(Fe(e)&&!c)return e.clone();if(t===null)return null;if(u=t.anchorNode,d=t.focusNode,m=t.anchorOffset,p=t.focusOffset,l&&Fe(e)&&!Nk(n,u,d))return e.clone();const h=iCe(u,m,d,p,n,e);if(h===null)return null;const[g,y]=h;return new ep(g,y,Fe(e)?e.format:0,Fe(e)?e.style:"")}function nt(){return Qd()._selection}function j_(){return Er()._editorState._selection}function KE(e,t,n,r=1){const s=e.anchor,a=e.focus,i=s.getNode(),l=a.getNode();if(!t.is(i)&&!t.is(l))return;const c=t.__key;if(e.isCollapsed()){const u=s.offset;if(n<=u&&r>0||n<u&&r<0){const d=Math.max(0,u+r);s.set(c,d,"element"),a.set(c,d,"element"),jte(e)}}else{const u=e.isBackward(),d=u?a:s,m=d.getNode(),p=u?s:a,h=p.getNode();if(t.is(m)){const g=d.offset;(n<=g&&r>0||n<g&&r<0)&&d.set(c,Math.max(0,g+r),"element")}if(t.is(h)){const g=p.offset;(n<=g&&r>0||n<g&&r<0)&&p.set(c,Math.max(0,g+r),"element")}}jte(e)}function jte(e){const t=e.anchor,n=t.offset,r=e.focus,s=r.offset,a=t.getNode(),i=r.getNode();if(e.isCollapsed()){if(!Ie(a))return;const l=a.getChildrenSize(),c=n>=l,u=c?a.getChildAtIndex(l-1):a.getChildAtIndex(n);if(Je(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text"),r.set(u.__key,d,"text")}}else{if(Ie(a)){const l=a.getChildrenSize(),c=n>=l,u=c?a.getChildAtIndex(l-1):a.getChildAtIndex(n);if(Je(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text")}}if(Ie(i)){const l=i.getChildrenSize(),c=s>=l,u=c?i.getChildAtIndex(l-1):i.getChildAtIndex(s);if(Je(u)){let d=0;c&&(d=u.getTextContentSize()),r.set(u.__key,d,"text")}}}}function YE(e,t,n,r,s){let a=null,i=0,l=null;r!==null?(a=r.__key,Je(r)?(i=r.getTextContentSize(),l="text"):Ie(r)&&(i=r.getChildrenSize(),l="element")):s!==null&&(a=s.__key,Je(s)?l="text":Ie(s)&&(l="element")),a!==null&&l!==null?e.set(a,i,l):(i=t.getIndexWithinParent(),i===-1&&(i=n.getChildrenSize()),e.set(n.__key,i,"element"))}function Ate(e,t,n,r,s){e.type==="text"?e.set(n,e.offset+(t?0:s),"text"):e.offset>r.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function dCe(e,t,n,r,s){try{e.setBaseAndExtent(t,n,r,s)}catch{}}function QMt(e,t,n,r,s,a,i){const l=r.anchorNode,c=r.focusNode,u=r.anchorOffset,d=r.focusOffset,m=document.activeElement;if(s.has(vCe)&&m!==a||m!==null&&_Ce(m))return;if(!Fe(t))return void(e!==null&&Nk(n,l,c)&&r.removeAllRanges());const p=t.anchor,h=t.focus,g=p.key,y=h.key,v=Om(n,g),x=Om(n,y),b=p.offset,_=h.offset,w=t.format,C=t.style,S=t.isCollapsed();let E=v,M=x,k=!1;if(p.type==="text"){E=jg(v);const N=p.getNode();k=N.getFormat()!==w||N.getStyle()!==C}else Fe(e)&&e.anchor.type==="text"&&(k=!0);var A,R,O,L,P;if(h.type==="text"&&(M=jg(x)),E!==null&&M!==null&&(S&&(e===null||k||Fe(e)&&(e.format!==w||e.style!==C))&&(A=w,R=C,O=b,L=g,P=performance.now(),Zwe=[A,R,O,L,P]),u!==b||d!==_||l!==E||c!==M||r.type==="Range"&&S||(m!==null&&a.contains(m)||a.focus({preventScroll:!0}),p.type==="element"))){if(dCe(r,E,b,M,_),!s.has(n5t)&&t.isCollapsed()&&a!==null&&a===document.activeElement){const N=Fe(t)&&t.anchor.type==="element"?E.childNodes[b]||null:r.rangeCount>0?r.getRangeAt(0):null;if(N!==null){let T;if(N instanceof Text){const j=document.createRange();j.selectNode(N),T=j.getBoundingClientRect()}else T=N.getBoundingClientRect();(function(j,F,U){const V=NCe(U),$=FV(V);if(V===null||$===null)return;let{top:z,bottom:Q}=F,Y=0,W=0,X=U;for(;X!==null;){const G=X===V.body;if(G)Y=0,W=fi(j).innerHeight;else{const q=X.getBoundingClientRect();Y=q.top,W=q.bottom}let J=0;if(z<Y?J=-(Y-z):Q>W&&(J=Q-W),J!==0)if(G)$.scrollBy(0,J);else{const q=X.scrollTop;X.scrollTop+=J;const te=X.scrollTop-q;z-=te,Q-=te}if(G)break;X=R_(X)}})(n,T,a)}}v9=!0}}function NA(e){let t=e;e.isCollapsed()||t.removeText();const n=nt();Fe(n)&&(t=n),Fe(t)||$e(161);const r=t.anchor;let s=r.getNode(),a=r.offset;for(;!Yu(s);){const i=s;if([s,a]=XMt(s,a),i.is(s))break}return a}function XMt(e,t){const n=e.getParent();if(!n){const s=Cr();return cr().append(s),s.select(),[cr(),0]}if(Je(e)){const s=e.splitText(t);if(s.length===0)return[n,e.getIndexWithinParent()];const a=t===0?0:1;return[n,s[0].getIndexWithinParent()+a]}if(!Ie(e)||t===0)return[n,e.getIndexWithinParent()];const r=e.getChildAtIndex(t);if(r){const s=new ep(Xl(e.__key,t,"element"),Xl(e.__key,t,"element"),0,""),a=e.insertNewAfter(s);a&&a.append(r,...r.getNextSiblings())}return[n,e.getIndexWithinParent()+1]}function Ite(e,t,n,r,s="decorators-and-blocks"){if(t==="move"&&r==="character"&&!e.isCollapsed()){const[d,m]=n===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return m.set(d.key,d.offset,d.type),!0}const a=mu(e.focus,n?"previous":"next"),i=r==="lineboundary",l=t==="move";let c=a,u=s==="decorators-and-blocks";if(!OCe(c)){for(const d of c){u=!1;const{origin:m}=d;if(!Ln(m)||m.isIsolated()||(c=d,!i||!m.isInline()))break}if(u)for(const d of qV(a).iterNodeCarets(t==="extend"?"shadowRoot":"root")){if(Ul(d))d.origin.isInline()||(c=d);else{if(Ie(d.origin))continue;Ln(d.origin)&&!d.origin.isInline()&&(c=d)}break}}if(c===a)return!1;if(l&&!i&&Ln(c.origin)&&c.origin.isKeyboardSelectable()){const d=uCe();return d.add(c.origin.getKey()),ua(d),!0}return c=Tl(c),l&&K1(e.anchor,c),K1(e.focus,c),u||!i}let xs=null,bs=null,so=!1,jA=!1,WS=0;const Rte={characterData:!0,childList:!0,subtree:!0};function A_(){return so||xs!==null&&xs._readOnly}function Ps(){so&&$e(13)}function fCe(){WS>99&&$e(14)}function Qd(){return xs===null&&$e(195,mCe()),xs}function Er(){return bs===null&&$e(196,mCe()),bs}function mCe(){let e=0;const t=new Set,n=Ng.version;if(typeof window<"u")for(const s of document.querySelectorAll("[contenteditable]")){const a=jk(s);if(IV(a))e++;else if(a){let i=String(a.constructor.version||"<0.17.1");i===n&&(i+=" (separately built, likely a bundler configuration issue)"),t.add(i)}}let r=` Detected on the page: ${e} compatible editor(s) with version ${n}`;return t.size&&(r+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),r}function ZMt(){return bs}function Pte(e,t,n){const r=t.__type,s=bCe(e,r);let a=n.get(r);a===void 0&&(a=Array.from(s.transforms),n.set(r,a));const i=a.length;for(let l=0;l<i&&(a[l](t),t.isAttached());l++);}function Ote(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function pCe(e,t){if(!t)return;const n=e._updateTags;let r=t;Array.isArray(t)||(r=[t]);for(const s of r)n.add(s)}function JMt(e){return MV(e,Er()._nodes)}function MV(e,t){const n=e.type,r=t.get(n);r===void 0&&$e(17,n);const s=r.klass;e.type!==s.getType()&&$e(18,s.name);const a=s.importJSON(e),i=e.children;if(Ie(a)&&Array.isArray(i))for(let l=0;l<i.length;l++){const c=MV(i[l],t);a.append(c)}return a}function Lte(e,t,n){const r=xs,s=so,a=bs;xs=t,so=!0,bs=e;try{return n()}finally{xs=r,so=s,bs=a}}function Lc(e,t){const n=e._pendingEditorState,r=e._rootElement,s=e._headless||r===null;if(n===null)return;const a=e._editorState,i=a._selection,l=n._selection,c=e._dirtyType!==Am,u=xs,d=so,m=bs,p=e._updating,h=e._observer;let g=null;if(e._pendingEditorState=null,e._editorState=n,!s&&c&&h!==null){bs=e,xs=n,so=!1,e._updating=!0;try{const S=e._dirtyType,E=e._dirtyElements,M=e._dirtyLeaves;h.disconnect(),g=TMt(a,n,e,S,E,M)}catch(S){if(S instanceof Error&&e._onError(S),jA)throw S;return xCe(e,null,r,n),Iwe(e),e._dirtyType=Eg,jA=!0,Lc(e,a),void(jA=!1)}finally{h.observe(r,Rte),e._updating=p,xs=u,so=d,bs=m}}n._readOnly||(n._readOnly=!0);const y=e._dirtyLeaves,v=e._dirtyElements,x=e._normalizedNodes,b=e._updateTags,_=e._deferred;c&&(e._dirtyType=Am,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(S,E){const M=S._decorators;let k=S._pendingDecorators||M;const A=E._nodeMap;let R;for(R in k)A.has(R)||(k===M&&(k=CCe(S)),delete k[R])}(e,n);const w=s?null:Zl(fi(e));if(e._editable&&w!==null&&(c||l===null||l.dirty)&&r!==null&&!b.has(r5t)){bs=e,xs=n;try{if(h!==null&&h.disconnect(),c||l===null||l.dirty){const S=e._blockCursorElement;S!==null&&M9(S,e,r),QMt(i,l,e,w,b,r)}(function(S,E,M){let k=S._blockCursorElement;if(Fe(M)&&M.isCollapsed()&&M.anchor.type==="element"&&E.contains(document.activeElement)){const A=M.anchor,R=A.getNode(),O=A.offset;let L=!1,P=null;if(O===R.getChildrenSize())IA(R.getChildAtIndex(O-1))&&(L=!0);else{const N=R.getChildAtIndex(O);if(N!==null&&IA(N)){const T=N.getPreviousSibling();(T===null||IA(T))&&(L=!0,P=S.getElementByKey(N.__key))}}if(L){const N=S.getElementByKey(R.__key);return k===null&&(S._blockCursorElement=k=function(T){const j=T.theme,F=document.createElement("div");F.contentEditable="false",F.setAttribute("data-lexical-cursor","true");let U=j.blockCursor;if(U!==void 0){if(typeof U=="string"){const V=kwe(U);U=j.blockCursor=V}U!==void 0&&F.classList.add(...U)}return F}(S._config)),E.style.caretColor="transparent",void(P===null?N.appendChild(k):N.insertBefore(k,P))}}k!==null&&M9(k,S,E)})(e,r,l)}finally{h!==null&&h.observe(r,Rte),bs=m,xs=u}}g!==null&&function(S,E,M,k,A){const R=Array.from(S._listeners.mutation),O=R.length;for(let L=0;L<O;L++){const[P,N]=R[L];for(const T of N){const j=E.get(T);j!==void 0&&P(j,{dirtyLeaves:k,prevEditorState:A,updateTags:M})}}}(e,g,b,y,a),Fe(l)||l===null||i!==null&&i.is(l)||e.dispatchCommand(Uwe,void 0);const C=e._pendingDecorators;C!==null&&(e._decorators=C,e._pendingDecorators=null,fx("decorator",e,!0,C)),function(S,E,M){const k=Vte(E),A=Vte(M);k!==A&&fx("textcontent",S,!0,A)}(e,t||a,n),fx("update",e,!0,{dirtyElements:v,dirtyLeaves:y,editorState:n,mutatedNodes:g,normalizedNodes:x,prevEditorState:t||a,tags:b}),function(S,E){if(S._deferred=[],E.length!==0){const M=S._updating;S._updating=!0;try{for(let k=0;k<E.length;k++)E[k]()}finally{S._updating=M}}}(e,_),function(S){const E=S._updates;if(E.length!==0){const M=E.shift();if(M){const[k,A]=M;kk(S,k,A)}}}(e)}function fx(e,t,n,...r){const s=t._updating;t._updating=n;try{const a=Array.from(t._listeners[e]);for(let i=0;i<a.length;i++)a[i].apply(null,r)}finally{t._updating=s}}function Dte(e,t){const n=e._updates;let r=t||!1;for(;n.length!==0;){const s=n.shift();if(s){const[a,i]=s,l=e._pendingEditorState;let c;i!==void 0&&(c=i.onUpdate,i.skipTransforms&&(r=!0),i.discrete&&(l===null&&$e(191),l._flushSync=!0),c&&e._deferred.push(c),pCe(e,i.tag)),l==null?kk(e,a,i):a()}}return r}function kk(e,t,n){const r=e._updateTags;let s,a=!1,i=!1;n!==void 0&&(s=n.onUpdate,pCe(e,n.tag),a=n.skipTransforms||!1,i=n.discrete||!1),s&&e._deferred.push(s);const l=e._editorState;let c=e._pendingEditorState,u=!1;(c===null||c._readOnly)&&(c=e._pendingEditorState=hCe(c||l),u=!0),c._flushSync=i;const d=xs,m=so,p=bs,h=e._updating;xs=c,so=!1,e._updating=!0,bs=e;const g=e._headless||e.getRootElement()===null;jV(null);try{u&&(g?l._selection!==null&&(c._selection=l._selection.clone()):c._selection=function(b,_){const w=b.getEditorState()._selection,C=Zl(fi(b));return Fe(w)||w==null?EV(w,C,b,_):w.clone()}(e,n&&n.event||null));const v=e._compositionKey;t(),a=Dte(e,a),function(b,_){const w=_.getEditorState()._selection,C=b._selection;if(Fe(C)){const S=C.anchor,E=C.focus;let M;if(S.type==="text"&&(M=S.getNode(),M.selectionTransform(w,C)),E.type==="text"){const k=E.getNode();M!==k&&k.selectionTransform(w,C)}}}(c,e),e._dirtyType!==Am&&(a?function(b,_){const w=_._dirtyLeaves,C=b._nodeMap;for(const S of w){const E=C.get(S);Je(E)&&E.isAttached()&&E.isSimpleText()&&!E.isUnmergeable()&&pte(E)}}(c,e):function(b,_){const w=_._dirtyLeaves,C=_._dirtyElements,S=b._nodeMap,E=nd(),M=new Map;let k=w,A=k.size,R=C,O=R.size;for(;A>0||O>0;){if(A>0){_._dirtyLeaves=new Set;for(const L of k){const P=S.get(L);Je(P)&&P.isAttached()&&P.isSimpleText()&&!P.isUnmergeable()&&pte(P),P!==void 0&&Ote(P,E)&&Pte(_,P,M),w.add(L)}if(k=_._dirtyLeaves,A=k.size,A>0){WS++;continue}}_._dirtyLeaves=new Set,_._dirtyElements=new Map,R.delete("root")&&R.set("root",!0);for(const L of R){const P=L[0],N=L[1];if(C.set(P,N),!N)continue;const T=S.get(P);T!==void 0&&Ote(T,E)&&Pte(_,T,M)}k=_._dirtyLeaves,A=k.size,R=_._dirtyElements,O=R.size,WS++}_._dirtyLeaves=w,_._dirtyElements=C}(c,e),Dte(e),function(b,_,w,C){const S=b._nodeMap,E=_._nodeMap,M=[];for(const[k]of C){const A=E.get(k);A!==void 0&&(A.isAttached()||(Ie(A)&&Nwe(A,k,S,E,M,C),S.has(k)||C.delete(k),M.push(k)))}for(const k of M)E.delete(k);for(const k of w){const A=E.get(k);A===void 0||A.isAttached()||(S.has(k)||w.delete(k),E.delete(k))}}(l,c,e._dirtyLeaves,e._dirtyElements)),v!==e._compositionKey&&(c._flushSync=!0);const x=c._selection;if(Fe(x)){const b=c._nodeMap,_=x.anchor.key,w=x.focus.key;b.get(_)!==void 0&&b.get(w)!==void 0||$e(19)}else Zc(x)&&x._nodes.size===0&&(c._selection=null)}catch(v){return v instanceof Error&&e._onError(v),e._pendingEditorState=l,e._dirtyType=Eg,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void Lc(e)}finally{xs=d,so=m,bs=p,e._updating=h,WS=0}e._dirtyType!==Am||e._deferred.length>0||function(v,x){const b=x.getEditorState()._selection,_=v._selection;if(_!==null){if(_.dirty||!_.is(b))return!0}else if(b!==null)return!0;return!1}(c,e)?c._flushSync?(c._flushSync=!1,Lc(e)):u&&o5t(()=>{Lc(e)}):(c._flushSync=!1,u&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function wo(e,t,n){bs===e&&n===void 0?t():kk(e,t,n)}class mx{element;before;after;constructor(t,n,r){this.element=t,this.before=n||null,this.after=r||null}withBefore(t){return new mx(this.element,t,this.after)}withAfter(t){return new mx(this.element,this.before,t)}withElement(t){return this.element===t?this:new mx(t,this.before,this.after)}insertChild(t){const n=this.before||this.getManagedLineBreak();return n!==null&&n.parentElement!==this.element&&$e(222),this.element.insertBefore(t,n),this}removeChild(t){return t.parentElement!==this.element&&$e(223),this.element.removeChild(t),this}replaceChild(t,n){return n.parentElement!==this.element&&$e(224),this.element.replaceChild(t,n),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{const n=t==="decorator"&&($1||Sg||V1);this.insertManagedLineBreak(n)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const n=this.element,r=t.nodeName==="IMG"?t.nextSibling:null;r&&n.removeChild(r),n.removeChild(t),n.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const n=this.getManagedLineBreak();if(n){if(t===(n.nodeName==="IMG"))return;this.removeManagedLineBreak()}const r=this.element,s=this.before,a=document.createElement("br");if(r.insertBefore(a,s),t){const i=document.createElement("img");i.setAttribute("data-lexical-linebreak","true"),i.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",i.alt="",r.insertBefore(i,a),r.__lexicalLineBreak=i}else r.__lexicalLineBreak=a}getFirstChildOffset(){let t=0;for(let n=this.after;n!==null;n=n.previousSibling)t++;return t}resolveChildIndex(t,n,r,s){if(r===this.element){const c=this.getFirstChildOffset();return[t,Math.min(c+t.getChildrenSize(),Math.max(c,s))]}const a=Fte(n,r);a.push(s);const i=Fte(n,this.element);let l=t.getIndexWithinParent();for(let c=0;c<i.length;c++){const u=a[c],d=i[c];if(u===void 0||u<d)break;if(u>d){l+=1;break}}return[t.getParentOrThrow(),l]}}function Fte(e,t){const n=[];let r=t;for(;r!==e&&r!==null;r=r.parentNode){let s=0;for(let a=r.previousSibling;a!==null;a=a.previousSibling)s++;n.push(s)}return r!==e&&$e(225),n.reverse()}class Fo extends fd{__first;__last;__size;__format;__style;__indent;__dir;__textFormat;__textStyle;constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return hMt[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let n=this.getFirstChild();for(;n!==null;)t.push(n),n=n.getNextSibling();return t}getChildrenKeys(){const t=[];let n=this.getFirstChild();for(;n!==null;)t.push(n.__key),n=n.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=Er()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),n=this.getParentOrThrow().getLastChild();return n!==null&&n.is(t)}getAllTextNodes(){const t=[];let n=this.getFirstChild();for(;n!==null;){if(Je(n)&&t.push(n),Ie(n)){const r=n.getAllTextNodes();t.push(...r)}n=n.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;Ie(t);){const n=t.getFirstChild();if(n===null)break;t=n}return t}getLastDescendant(){let t=this.getLastChild();for(;Ie(t);){const n=t.getLastChild();if(n===null)break;t=n}return t}getDescendantByIndex(t){const n=this.getChildren(),r=n.length;if(t>=r){const a=n[r-1];return Ie(a)&&a.getLastDescendant()||a||null}const s=n[t];return Ie(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:_s(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&$e(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:_s(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&$e(96,this.__key),t}getChildAtIndex(t){const n=this.getChildrenSize();let r,s;if(t<n/2){for(r=this.getFirstChild(),s=0;r!==null&&s<=t;){if(s===t)return r;r=r.getNextSibling(),s++}return null}for(r=this.getLastChild(),s=n-1;r!==null&&s>=t;){if(s===t)return r;r=r.getPreviousSibling(),s--}return null}getTextContent(){let t="";const n=this.getChildren(),r=n.length;for(let s=0;s<r;s++){const a=n[s];t+=a.getTextContent(),Ie(a)&&s!==r-1&&!a.isInline()&&(t+=du)}return t}getTextContentSize(){let t=0;const n=this.getChildren(),r=n.length;for(let s=0;s<r;s++){const a=n[s];t+=a.getTextContentSize(),Ie(a)&&s!==r-1&&!a.isInline()&&(t+=du.length)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){const n=ote[t];return!!(this.getFormat()&n)}return!1}hasTextFormat(t){const n=Im[t];return!!(this.getTextFormat()&n)}getFormatFlags(t,n){return QE(this.getLatest().__textFormat,t,n)}getTextStyle(){return this.getLatest().__textStyle}select(t,n){Ps();const r=nt();let s=t,a=n;const i=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&n===0){const c=this.getFirstChild();if(Je(c)||Ie(c))return c.select(0,0)}else if(!(t!==void 0&&t!==i||n!==void 0&&n!==i)){const c=this.getLastChild();if(Je(c)||Ie(c))return c.select()}}s===void 0&&(s=i),a===void 0&&(a=i);const l=this.__key;return Fe(r)?(r.anchor.set(l,s,"element"),r.focus.set(l,a,"element"),r.dirty=!0,r):lCe(l,s,l,a,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach(n=>n.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const n=this.getWritable();return n.__dir=t,n}setFormat(t){return this.getWritable().__format=t!==""?ote[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const n=this.getWritable();return n.__textFormat=t,n}setTextStyle(t){const n=this.getWritable();return n.__textStyle=t,n}setIndent(t){return this.getWritable().__indent=t,this}splice(t,n,r){const s=r.length,a=this.getChildrenSize(),i=this.getWritable();t+n<=a||$e(226,String(t),String(n),String(a));const l=i.__key,c=[],u=[],d=this.getChildAtIndex(t+n);let m=null,p=a-n+s;if(t!==0)if(t===a)m=this.getLastChild();else{const g=this.getChildAtIndex(t);g!==null&&(m=g.getPreviousSibling())}if(n>0){let g=m===null?this.getFirstChild():m.getNextSibling();for(let y=0;y<n;y++){g===null&&$e(100);const v=g.getNextSibling(),x=g.__key;am(g.getWritable()),u.push(x),g=v}}let h=m;for(let g=0;g<s;g++){const y=r[g];h!==null&&y.is(h)&&(m=h=h.getPreviousSibling());const v=y.getWritable();v.__parent===l&&p--,am(v);const x=y.__key;if(h===null)i.__first=x,v.__prev=null;else{const b=h.getWritable();b.__next=x,v.__prev=b.__key}y.__key===l&&$e(76),v.__parent=l,c.push(x),h=y}if(t+n===a)h!==null&&(h.getWritable().__next=null,i.__last=h.__key);else if(d!==null){const g=d.getWritable();if(h!==null){const y=h.getWritable();g.__prev=h.__key,y.__next=d.__key}else g.__prev=null}if(i.__size=p,u.length){const g=nt();if(Fe(g)){const y=new Set(u),v=new Set(c),{anchor:x,focus:b}=g;Ute(x,y,v)&&YE(x,x.getNode(),this,m,d),Ute(b,y,v)&&YE(b,b.getNode(),this,m,d),p!==0||this.canBeEmpty()||Qi(this)||this.remove()}}return i}getDOMSlot(t){return new mx(t)}exportDOM(t){const{element:n}=super.exportDOM(t);if(Xr(n)){const r=this.getIndent();r>0&&(n.style.paddingInlineStart=40*r+"px");const s=this.getDirection();s&&(n.dir=s)}return{element:n}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},n=this.getTextFormat(),r=this.getTextStyle();return n!==0&&(t.textFormat=n),r!==""&&(t.textStyle=r),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,n){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,n,r){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,n){const r=this.getDOMSlot(t);let s=r.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){const i=n.getElementByKey(a.getKey());i!==null&&(s==null?(r.insertChild(i),s=i):s!==i&&r.replaceChild(i,s),s=s.nextSibling)}}}function Ie(e){return e instanceof Fo}function Ute(e,t,n){let r=e.getNode();for(;r;){const s=r.__key;if(t.has(s)&&!n.has(s))return!0;r=r.getParent()}return!1}class Tk extends fd{decorate(t,n){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function Ln(e){return e instanceof Tk}class tp extends Fo{__cachedText;static getType(){return"root"}static clone(){return new tp}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){$e(51)}getTextContent(){const t=this.__cachedText;return!A_()&&Er()._dirtyType!==Am||t===null?super.getTextContent():t}remove(){$e(52)}replace(t){$e(53)}insertBefore(t){$e(54)}insertAfter(t){$e(55)}updateDOM(t,n){return!1}splice(t,n,r){for(const s of r)Ie(s)||Ln(s)||$e(282);return super.splice(t,n,r)}static importJSON(t){return cr().updateFromJSON(t)}collapseAtStart(){return!0}}function ds(e){return e instanceof tp}function hCe(e){return new I_(new Map(e._nodeMap))}function kV(){return new I_(new Map([["root",new tp]]))}function gCe(e){const t=e.exportJSON(),n=e.constructor;if(t.type!==n.getType()&&$e(130,n.name),Ie(e)){const r=t.children;Array.isArray(r)||$e(59,n.name);const s=e.getChildren();for(let a=0;a<s.length;a++){const i=gCe(s[a]);r.push(i)}}return t}function e5t(e){return e instanceof I_}class I_{_nodeMap;_selection;_flushSync;_readOnly;constructor(t,n){this._nodeMap=t,this._selection=n||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,n){return Lte(n&&n.editor||null,this,t)}clone(t){const n=new I_(this._nodeMap,t===void 0?this._selection:t);return n._readOnly=!0,n}toJSON(){return Lte(null,this,()=>({root:gCe(cr())}))}}const t5t="historic",irn="history-push",px="history-merge",yCe="paste",vCe="collaboration",n5t="skip-scroll-into-view",r5t="skip-dom-selection";class TV extends Fo{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class np extends Fo{static getType(){return"paragraph"}static clone(t){return new np(t.__key)}createDOM(t){const n=document.createElement("p"),r=Vh(t.theme,"paragraph");return r!==void 0&&n.classList.add(...r),n}updateDOM(t,n,r){return!1}static importDOM(){return{p:t=>({conversion:s5t,priority:0})}}exportDOM(t){const{element:n}=super.exportDOM(t);if(Xr(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r)}return{element:n}}static importJSON(t){return Cr().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,n){const r=Cr();r.setTextFormat(t.format),r.setTextStyle(t.style);const s=this.getDirection();return r.setDirection(s),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,n),r}collapseAtStart(){const t=this.getChildren();if(t.length===0||Je(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function s5t(e){const t=Cr();return e.style&&(t.setFormat(e.style.textAlign),VV(e,t)),{node:t}}function Cr(){return wi(new np)}function md(e){return e instanceof np}const hs=0,G1=1,wc=2;function xCe(e,t,n,r){const s=e._keyToDOMMap;s.clear(),e._editorState=kV(),e._pendingEditorState=r,e._compositionKey=null,e._dirtyType=Am,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const a=e._observer;a!==null&&(a.disconnect(),e._observer=null),t!==null&&(t.textContent=""),n!==null&&(n.textContent="",s.set("root",n))}function NV(e){const t=e||{},n=ZMt(),r=t.theme||{},s=e===void 0?n:t.parentEditor||null,a=t.disableEvents||!1,i=kV(),l=t.namespace||(s!==null?s._config.namespace:MCe()),c=t.editorState,u=[tp,uc,Yy,Qy,np,TV,...t.nodes||[]],{onError:d,html:m}=t,p=t.editable===void 0||t.editable;let h;if(e===void 0&&n!==null)h=n._nodes;else{h=new Map;for(let y=0;y<u.length;y++){let v=u[y],x=null,b=null;if(typeof v!="function"){const E=v;v=E.replace,x=E.with,b=E.withKlass||null}const{ownNodeConfig:_}=$V(v),w=v.getType(),C=v.transform(),S=new Set;_&&_.$transform&&S.add(_.$transform),C!==null&&S.add(C),h.set(w,{exportDOM:m&&m.export?m.export.get(v):void 0,klass:v,replace:x,replaceWithKlass:b,sharedNodeState:CMt(u[y]),transforms:S})}}const g=new Ng(i,s,h,{disableEvents:a,namespace:l,theme:r},d||console.error,function(y,v){const x=new Map,b=new Set,_=w=>{Object.keys(w).forEach(C=>{let S=x.get(C);S===void 0&&(S=[],x.set(C,S)),S.push(w[C])})};return y.forEach(w=>{const C=w.klass.importDOM;if(C==null||b.has(C))return;b.add(C);const S=C.call(w.klass);S!==null&&_(S)}),v&&_(v),x}(h,m?m.import:void 0),p,e);return c!==void 0&&(g._pendingEditorState=c,g._dirtyType=Eg),g}class Ng{static version;_headless;_parentEditor;_rootElement;_editorState;_pendingEditorState;_compositionKey;_deferred;_keyToDOMMap;_updates;_updating;_listeners;_commands;_nodes;_decorators;_pendingDecorators;_config;_dirtyType;_cloneNotNeeded;_dirtyLeaves;_dirtyElements;_normalizedNodes;_updateTags;_observer;_key;_onError;_htmlConversions;_window;_editable;_blockCursorElement;_createEditorArgs;constructor(t,n,r,s,a,i,l,c){this._createEditorArgs=c,this._parentEditor=n,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=Am,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=MCe(),this._onError=a,this._htmlConversions=i,this._editable=l,this._headless=n!==null&&n._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const n=this._listeners.update;return n.add(t),()=>{n.delete(t)}}registerEditableListener(t){const n=this._listeners.editable;return n.add(t),()=>{n.delete(t)}}registerDecoratorListener(t){const n=this._listeners.decorator;return n.add(t),()=>{n.delete(t)}}registerTextContentListener(t){const n=this._listeners.textcontent;return n.add(t),()=>{n.delete(t)}}registerRootListener(t){const n=this._listeners.root;return t(this._rootElement,null),n.add(t),()=>{t(null,this._rootElement),n.delete(t)}}registerCommand(t,n,r){r===void 0&&$e(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const a=s.get(t);a===void 0&&$e(36,String(t));const i=a[r];return i.add(n),()=>{i.delete(n),a.every(l=>l.size===0)&&s.delete(t)}}registerMutationListener(t,n,r){const s=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,a=this._listeners.mutation;let i=a.get(n);i===void 0&&(i=new Set,a.set(n,i)),i.add(s);const l=r&&r.skipInitialization;return l!==void 0&&l||this.initializeMutationListener(n,s),()=>{i.delete(s),i.size===0&&a.delete(n)}}getRegisteredNode(t){const n=this._nodes.get(t.getType());return n===void 0&&$e(37,t.name),n}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,n){const r=this._editorState,s=Kte(r).get(n.getType());if(!s)return;const a=new Map;for(const i of s.keys())a.set(i,"created");a.size>0&&t(a,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,n){const r=this.getRegisteredNode(t);return r.transforms.add(n),r}registerNodeTransform(t,n){const r=this.registerNodeTransformToKlass(t,n),s=[r],a=r.replaceWithKlass;if(a!=null){const i=this.registerNodeTransformToKlass(a,n);s.push(i)}return function(i,l){const c=Kte(i.getEditorState()),u=[];for(const d of l){const m=c.get(d);m&&u.push(m)}u.length!==0&&i.update(()=>{for(const d of u)for(const m of d.keys()){const p=_s(m);p&&p.markDirty()}},i._pendingEditorState===null?{tag:px}:void 0)}(this,s.map(i=>i.klass.getType())),()=>{s.forEach(i=>i.transforms.delete(n))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,n){return mt(this,t,n)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const n=this._rootElement;if(t!==n){const r=Vh(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,xCe(this,n,t,s),n!==null&&(this._config.disableEvents||VMt(n),r!=null&&n.classList.remove(...r)),t!==null){const a=FV(t),i=t.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=a,this._dirtyType=Eg,Iwe(this),this._updateTags.add(px),Lc(this),this._config.disableEvents||function(l,c){const u=l.ownerDocument,d=qE.get(u);(d===void 0||d<1)&&u.addEventListener("selectionchange",rCe),qE.set(u,(d||0)+1),l.__lexicalEditor=c;const m=nCe(l);for(let p=0;p<y9.length;p++){const[h,g]=y9[p],y=typeof g=="function"?v=>{bte(v)||(xte(v),(c.isEditable()||h==="click")&&g(v,c))}:v=>{if(bte(v))return;xte(v);const x=c.isEditable();switch(h){case"cut":return x&&mt(c,CV,v);case"copy":return mt(c,wV,v);case"paste":return x&&mt(c,T_,v);case"dragstart":return x&&mt(c,Ywe,v);case"dragover":return x&&mt(c,LMt,v);case"dragend":return x&&mt(c,DMt,v);case"focus":return x&&mt(c,FMt,v);case"blur":return x&&mt(c,UMt,v);case"drop":return x&&mt(c,Kwe,v)}};l.addEventListener(h,y),m.push(()=>{l.removeEventListener(h,y)})}}(t,this),r!=null&&t.classList.add(...r)}else this._window=null,this._updateTags.add(px),Lc(this);fx("root",this,!1,t,n)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,n){t.isEmpty()&&$e(38);let r=t;r._readOnly&&(r=hCe(t),r._selection=t._selection?t._selection.clone():null),Awe(this);const s=this._pendingEditorState,a=this._updateTags,i=n!==void 0?n.tag:null;s===null||s.isEmpty()||(i!=null&&a.add(i),Lc(this)),this._pendingEditorState=r,this._dirtyType=Eg,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&a.add(i),this._updating||Lc(this)}parseEditorState(t,n){return function(r,s,a){const i=kV(),l=xs,c=so,u=bs,d=s._dirtyElements,m=s._dirtyLeaves,p=s._cloneNotNeeded,h=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,xs=i,so=!1,bs=s,jV(null);try{const g=s._nodes;MV(r.root,g),a&&a(),i._readOnly=!0}catch(g){g instanceof Error&&s._onError(g)}finally{s._dirtyElements=d,s._dirtyLeaves=m,s._cloneNotNeeded=p,s._dirtyType=h,xs=l,so=c,bs=u}return i}(typeof t=="string"?JSON.parse(t):t,this,n)}read(t){return Lc(this),this.getEditorState().read(t,{editor:this})}update(t,n){(function(r,s,a){r._updating?r._updates.push([s,a]):kk(r,s,a)})(this,t,n)}focus(t,n={}){const r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),wo(this,()=>{const s=nt(),a=cr();s!==null?s.dirty||ua(s.clone()):a.getChildrenSize()!==0&&(n.defaultSelection==="rootStart"?a.selectStart():a.selectEnd()),S9("focus"),f5t(()=>{r.removeAttribute("autocapitalize"),t&&t()})}),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const n=Zl(this._window);n!==null&&n.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,fx("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}Ng.version="0.36.1+prod.esm";let C9=null;function jV(e){C9=e}let a5t=1;function bCe(e,t){const n=AV(e,t);return n===void 0&&$e(30,t),n}function AV(e,t){return e._nodes.get(t)}const o5t=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function Bte(e){return Ln(Ag(e))}function _Ce(e){const t=document.activeElement;if(!Xr(t))return!1;const n=t.nodeName;return Ln(Ag(e))&&(n==="INPUT"||n==="TEXTAREA"||t.contentEditable==="true"&&jk(t)==null)}function Nk(e,t,n){const r=e.getRootElement();try{return r!==null&&r.contains(t)&&r.contains(n)&&t!==null&&!_Ce(t)&&RV(t)===e}catch{return!1}}function IV(e){return e instanceof Ng}function RV(e){let t=e;for(;t!=null;){const n=jk(t);if(IV(n))return n;t=R_(t)}return null}function jk(e){return e?e.__lexicalEditor:null}function sm(e){return Ek(e)||e.isToken()}function jc(e){return sm(e)||e.isSegmented()}function ju(e){return Xy(e)&&e.nodeType===oMt}function i5t(e){return Xy(e)&&e.nodeType===iMt}function jg(e){let t=e;for(;t!=null;){if(ju(t))return t;t=t.firstChild}return null}function QE(e,t,n){const r=Im[t];if(n!==null&&(e&r)==(n&r))return e;let s=e^r;return t==="subscript"?s&=-65:t==="superscript"?s&=-33:t==="lowercase"?(s&=-513,s&=-1025):t==="uppercase"?(s&=-257,s&=-1025):t==="capitalize"&&(s&=-257,s&=-513),s}function l5t(e,t){const n=function(){const i=C9;return C9=null,i}();if((t=t||n&&n.__key)!=null)return void(e.__key=t);Ps(),fCe();const r=Er(),s=Qd(),a=""+a5t++;s._nodeMap.set(a,e),Ie(e)?r._dirtyElements.set(a,!0):r._dirtyLeaves.add(a),r._cloneNotNeeded.add(a),r._dirtyType=Twe,e.__key=a}function am(e){const t=e.getParent();if(t!==null){const n=e.getWritable(),r=t.getWritable(),s=e.getPreviousSibling(),a=e.getNextSibling(),i=a!==null?a.__key:null,l=s!==null?s.__key:null,c=s!==null?s.getWritable():null,u=a!==null?a.getWritable():null;s===null&&(r.__first=i),a===null&&(r.__last=l),c!==null&&(c.__next=i),u!==null&&(u.__prev=l),n.__prev=null,n.__next=null,n.__parent=null,r.__size--}}function XE(e){fCe();const t=e.getLatest(),n=t.__parent,r=Qd(),s=Er(),a=r._nodeMap,i=s._dirtyElements;n!==null&&function(c,u,d){let m=c;for(;m!==null;){if(d.has(m))return;const p=u.get(m);if(p===void 0)break;d.set(m,!1),m=p.__parent}}(n,a,i);const l=t.__key;s._dirtyType=Twe,Ie(e)?i.set(l,!0):s._dirtyLeaves.add(l)}function Os(e){Ps();const t=Er(),n=t._compositionKey;if(e!==n){if(t._compositionKey=e,n!==null){const r=_s(n);r!==null&&r.getWritable()}if(e!==null){const r=_s(e);r!==null&&r.getWritable()}}}function nd(){return A_()?null:Er()._compositionKey}function _s(e,t){const n=(t||Qd())._nodeMap.get(e);return n===void 0?null:n}function wCe(e,t){const n=Ak(e,Er());return n!==void 0?_s(n,t):null}function Ak(e,t){return e[`__lexicalKey_${t._key}`]}function Ag(e,t){let n=e;for(;n!=null;){const r=wCe(n,t);if(r!==null)return r;n=R_(n)}return null}function CCe(e){const t=e._decorators,n=Object.assign({},t);return e._pendingDecorators=n,n}function Vte(e){return e.read(()=>cr().getTextContent())}function cr(){return SCe(Qd())}function SCe(e){return e._nodeMap.get("root")}function ua(e){Ps();const t=Qd();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function dh(e){const t=Er(),n=function(r,s){let a=r;for(;a!=null;){const i=Ak(a,s);if(i!==void 0)return i;a=R_(a)}return null}(e,t);return n===null?e===t.getRootElement()?_s("root"):null:_s(n)}function ECe(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function PV(e){const t=[];let n=e;for(;n!==null;)t.push(n),n=n._parentEditor;return t}function MCe(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function kCe(e){return ju(e)?e.nodeValue:null}function OV(e,t,n){const r=Zl(fi(t));if(r===null)return;const s=r.anchorNode;let{anchorOffset:a,focusOffset:i}=r;if(s!==null){let l=kCe(s);const c=Ag(s);if(l!==null&&Je(c)){if(l===Ck&&n){const u=n.length;l=n,a=u,i=u}l!==null&&LV(c,l,a,i,e)}}}function LV(e,t,n,r,s){let a=e;if(a.isAttached()&&(s||!a.isDirty())){const i=a.isComposing();let l=t;(i||s)&&t[t.length-1]===Ck&&(l=t.slice(0,-1));const c=a.getTextContent();if(s||l!==c){if(l===""){if(Os(null),V1||Sg||$1)a.remove();else{const y=Er();setTimeout(()=>{y.update(()=>{a.isAttached()&&a.remove()})},20)}return}const u=a.getParent(),d=j_(),m=a.getTextContentSize(),p=nd(),h=a.getKey();if(a.isToken()||p!==null&&h===p&&!i||Fe(d)&&(u!==null&&!u.canInsertTextBefore()&&d.anchor.offset===0||d.anchor.key===e.__key&&d.anchor.offset===0&&!a.canInsertTextBefore()&&!i||d.focus.key===e.__key&&d.focus.offset===m&&!a.canInsertTextAfter()&&!i))return void a.markDirty();const g=nt();if(!Fe(g)||n===null||r===null)return void $te(a,l,g);if(g.setTextNodeRange(a,n,a,r),a.isSegmented()){const y=Qn(a.getTextContent());a.replace(y),a=y}$te(a,l,g)}}}function $te(e,t,n){if(e.setTextContent(t),Fe(n)){const r=e.getKey();for(const s of["anchor","focus"]){const a=n[s];a.type==="text"&&a.key===r&&(a.offset=hd(e,a.offset,"clamp"))}}}function jC(e,t,n){const r=t[n]||!1;return r==="any"||r===e[n]}function c5t(e,t){return jC(e,t,"altKey")&&jC(e,t,"ctrlKey")&&jC(e,t,"shiftKey")&&jC(e,t,"metaKey")}function Wn(e,t,n){return c5t(e,n)&&e.key.toLowerCase()===t.toLowerCase()}const Ec={ctrlKey:!Ai,metaKey:Ai},Wte={altKey:Ai,ctrlKey:!Ai};function Hte(e){return e.key==="Backspace"}function zte(e){return Wn(e,"a",Ec)}function u5t(e){const t=cr();if(Fe(e)){const n=e.anchor,r=e.focus,s=n.getNode().getTopLevelElementOrThrow().getParentOrThrow();return n.set(s.getKey(),0,"element"),r.set(s.getKey(),s.getChildrenSize(),"element"),W1(e),e}{const n=t.select(0,t.getChildrenSize());return ua(W1(n)),n}}function Vh(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const n=e.__lexicalClassNameCache,r=n[t];if(r!==void 0)return r;const s=e[t];if(typeof s=="string"){const a=kwe(s);return n[t]=a,a}return s}function DV(e,t,n,r,s){if(n.size===0)return;const a=r.__type,i=r.__key,l=t.get(a);l===void 0&&$e(33,a);const c=l.klass;let u=e.get(c);u===void 0&&(u=new Map,e.set(c,u));const d=u.get(i),m=d==="destroyed"&&s==="created";(d===void 0||m)&&u.set(i,m?"updated":s)}function Gte(e,t,n){const r=e.getParent();let s=n,a=e;return r!==null&&(n===0&&(s=a.getIndexWithinParent(),a=r)),a.getChildAtIndex(s-1)}function d5t(e,t){const n=e.offset;if(e.type==="element")return Gte(e.getNode(),t,n);{const r=e.getNode();if(n===0){const s=r.getPreviousSibling();return s===null?Gte(r.getParentOrThrow(),t,r.getIndexWithinParent()+0):s}}return null}function TCe(e){const t=fi(e).event,n=t&&t.inputType;return n==="insertFromPaste"||n==="insertFromPasteAsQuotation"}function mt(e,t,n){return function(r,s,a){const i=PV(r);for(let l=4;l>=0;l--)for(let c=0;c<i.length;c++){const u=i[c],d=u._commands.get(s);if(d!==void 0){const m=d[l];if(m!==void 0){const p=Array.from(m),h=p.length;let g=!1;if(wo(u,()=>{for(let y=0;y<h;y++)if(p[y](a,r))return void(g=!0)}),g)return g}}}return!1}(e,t,n)}function Ik(e){return!ds(e)&&!e.isLastChild()&&!e.isInline()}function Om(e,t){const n=e._keyToDOMMap.get(t);return n===void 0&&$e(75,t),n}function R_(e){const t=e.assignedSlot||e.parentElement;return k9(t)?t.host:t}function NCe(e){return i5t(e)?e:Xr(e)?e.ownerDocument:null}function S9(e){Ps(),Er()._updateTags.add(e)}function f5t(e){Ps(),Er()._deferred.push(e)}function E9(e,t){let n=e.getParent();for(;n!==null;){if(n.is(t))return!0;n=n.getParent()}return!1}function FV(e){const t=NCe(e);return t?t.defaultView:null}function fi(e){const t=e._window;return t===null&&$e(78),t}function m5t(e){let t=e.getParentOrThrow();for(;t!==null;){if(Qi(t))return t;t=t.getParentOrThrow()}return t}function Qi(e){return ds(e)||Ie(e)&&e.isShadowRoot()}function wi(e){const t=Er(),n=e.getType(),r=AV(t,n);r===void 0&&$e(200,e.constructor.name,n);const{replace:s,replaceWithKlass:a}=r;if(s!==null){const i=s(e),l=i.constructor;return a!==null?i instanceof a||$e(201,a.name,a.getType(),l.name,l.getType(),e.constructor.name,n):i instanceof e.constructor&&l!==e.constructor||$e(202,l.name,l.getType(),e.constructor.name,n),i.__key===e.__key&&$e(203,e.constructor.name,n,l.name,l.getType()),i}return e}function AA(e,t){!ds(e.getParent())||Ie(t)||Ln(t)||$e(99)}function p5t(e){const t=_s(e);return t===null&&$e(63,e),t}function IA(e){return(Ln(e)||Ie(e)&&!e.canBeEmpty())&&!e.isInline()}function M9(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null;const r=e.parentElement;r!==null&&r.removeChild(e)}function Zl(e){return ol?(e||window).getSelection():null}function h5t(e){const t=FV(e);return t?t.getSelection():null}function UV(e){return Xr(e)&&e.tagName==="A"}function Xr(e){return Xy(e)&&e.nodeType===aMt}function Xy(e){return typeof e=="object"&&e!==null&&"nodeType"in e&&typeof e.nodeType=="number"}function k9(e){return Xy(e)&&e.nodeType===lMt}function T9(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function ZE(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function Yu(e){if(Ln(e)&&!e.isInline())return!0;if(!Ie(e)||Qi(e))return!1;const t=e.getFirstChild(),n=t===null||Fl(t)||Je(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&n}function BV(){return Er()}const qte=new WeakMap,g5t=new Map;function Kte(e){if(!e._readOnly&&e.isEmpty())return g5t;e._readOnly||$e(192);let t=qte.get(e);return t||(t=function(n){const r=new Map;for(const[s,a]of n._nodeMap){const i=a.__type;let l=r.get(i);l||(l=new Map,r.set(i,l)),l.set(s,a)}return r}(e),qte.set(e,t)),t}function jCe(e){const t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function VV(e,t){const n=parseInt(e.style.paddingInlineStart,10)||0,r=Math.round(n/40);t.setIndent(r)}function y5t(e){return e.__lexicalUnmanaged===!0}function Z0(e,t){return function(n,r){return Object.prototype.hasOwnProperty.call(n,r)}(e,t)&&e[t]!==fd[t]}function $V(e){const t=ite in e.prototype?e.prototype[ite]():void 0,n=function(i){if(!(i===fd||i.prototype instanceof fd)){let l="<unknown>",c="<unknown>";try{l=i.getType()}catch{}try{Ng.version&&(c=JSON.parse(Ng.version))}catch{}$e(290,i.name,l,c)}return i===Tk||i===Fo||i===fd}(e),r=!n&&Z0(e,"getType")?e.getType():void 0;let s,a=r;if(t)if(r)s=t[r];else for(const[i,l]of Object.entries(t))a=i,s=l;if(!n&&a&&(Z0(e,"getType")||(e.getType=()=>a),Z0(e,"clone")||(e.clone=i=>(jV(i),new e)),Z0(e,"importJSON")||(e.importJSON=s&&s.$importJSON||(i=>new e().updateFromJSON(i))),!Z0(e,"importDOM")&&s)){const{importDOM:i}=s;i&&(e.importDOM=()=>i)}return{ownNodeConfig:s,ownNodeType:a}}function ACe(e){const t=BV();return Ps(),new(t.resolveRegisteredNodeAfterReplacements(t.getRegisteredNode(e))).klass}const si=(e,t)=>{let n=e;for(;n!=null&&!ds(n);){if(t(n))return n;n=n.getParent()}return null},v5t={next:"previous",previous:"next"};class WV{origin;constructor(t){this.origin=t}[Symbol.iterator](){return ICe({hasNext:Ig,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return Vs(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return Vs(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,n){const r=this.getNodeAtCaret();return t.is(this.origin)||t.is(r)||(r===null?this.insert(t):r.replace(t,n)),this}splice(t,n,r="next"){const s=r===this.direction?n:Array.from(n).reverse();let a=this;const i=this.getParentAtCaret(),l=new Map;for(let c=a.getAdjacentCaret();c!==null&&l.size<t;c=c.getAdjacentCaret()){const u=c.origin.getWritable();l.set(u.getKey(),u)}for(const c of s){if(l.size>0){const u=a.getNodeAtCaret();if(u){if(l.delete(u.getKey()),l.delete(c.getKey()),!(u.is(c)||a.origin.is(c))){const d=c.getParent();d&&d.is(i)&&c.remove(),u.replace(c)}}else u===null&&$e(263,Array.from(l).join(" "))}else a.insert(c);a=Vs(c,this.direction)}for(const c of l.values())c.remove();return this}}class q1 extends WV{type="child";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:fu(t,this.direction)}getParentCaret(t="root"){return Vs(HV(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Zy(this.direction);return Vs(this.getNodeAtCaret(),t)||fu(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof q1&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const x5t={root:ds,shadowRoot:Qi};function Zy(e){return v5t[e]}function HV(e,t="root"){return x5t[t](e)?null:e}class Lm extends WV{type="sibling";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Vs(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return Ie(this.origin)?fu(this.origin,this.direction):null}getParentCaret(t="root"){return Vs(HV(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Zy(this.direction);return Vs(this.getNodeAtCaret(),t)||fu(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof Lm&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof Lm||t instanceof Dm)&&this.direction===t.direction&&this.origin.is(t.origin)}}class Dm extends WV{type="text";offset;constructor(t,n){super(t),this.offset=n}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Fm(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return Vs(HV(this.getParentAtCaret(),t),this.direction)}getFlipped(){return Fm(this.origin,Zy(this.direction),this.offset)}isSamePointCaret(t){return t instanceof Dm&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof Lm||t instanceof Dm)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return Vs(this.origin,this.direction)}}function pd(e){return e instanceof Dm}function Ig(e){return e instanceof Lm}function Ul(e){return e instanceof q1}const b5t={next:class extends Dm{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends Dm{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},_5t={next:class extends Lm{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends Lm{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},w5t={next:class extends q1{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends q1{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function Vs(e,t){return e?new _5t[t](e):null}function Fm(e,t,n){return e?new b5t[t](e,hd(e,n)):null}function hd(e,t,n="error"){const r=e.getTextContentSize();let s=t==="next"?r:t==="previous"?0:t;return(s<0||s>r)&&(n!=="clamp"&&Ewe(284,String(t),String(r),e.getKey()),s=s<0?0:r),s}function Yte(e,t){return new S5t(e,t)}function fu(e,t){return Ie(e)?new w5t[t](e):null}function C5t(e){return e&&e.getChildCaret()||e}function zV(e){return e&&C5t(e.getAdjacentCaret())}class GV{type="node-caret-range";direction;anchor;focus;constructor(t,n,r){this.anchor=t,this.focus=n,this.direction=r}getLatest(){const t=this.anchor.getLatest(),n=this.focus.getLatest();return t===this.anchor&&n===this.focus?this:new GV(t,n,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=s=>{const a=this[s].getLatest();return pd(a)?function(i,l){const{direction:c,origin:u}=i,d=hd(u,l==="focus"?Zy(c):c);return Yte(i,d-i.offset)}(a,s):null},n=t("anchor"),r=t("focus");if(n&&r){const{caret:s}=n,{caret:a}=r;if(s.isSameNodeCaret(a))return[Yte(s,a.offset-s.offset),null]}return[n,r]}iterNodeCarets(t="root"){const n=pd(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),s=pd(r),a=i=>i.isSameNodeCaret(r)?null:zV(i)||i.getParentCaret(t);return ICe({hasNext:i=>i!==null&&!(s&&r.isSameNodeCaret(i)),initial:n.isSameNodeCaret(r)?null:a(n),map:i=>i,step:a})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class S5t{type="slice";caret;distance;constructor(t,n){this.caret=t,this.distance=n}getSliceIndices(){const{distance:t,caret:{offset:n}}=this,r=n+t;return r<n?[r,n]:[n,r]}getTextContent(){const[t,n]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,n)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:n}}=this,[r,s]=this.getSliceIndices(),a=t.getTextContent();return Fm(t.setTextContent(a.slice(0,r)+a.slice(s)),n,r)}}function qV(e){return Ad(e,Vs(cr(),e.direction))}function E5t(e){return Ad(e,e)}function Ad(e,t){return e.direction!==t.direction&&$e(265),new GV(e,t,e.direction)}function ICe(e){const{initial:t,hasNext:n,step:r,map:s}=e;let a=t;return{[Symbol.iterator](){return this},next(){if(!n(a))return{done:!0,value:void 0};const i={done:!1,value:s(a)};return a=r(a),i}}}function RCe(e,t){const n=HS(e.origin,t.origin);switch(n===null&&$e(275,e.origin.getKey(),t.origin.getKey()),n.type){case"same":{const r=e.type==="text",s=t.type==="text";return r&&s?function(a,i){return Math.sign(a-i)}(e.offset,t.offset):e.type===t.type?0:r?-1:s?1:e.type==="child"?-1:1}case"ancestor":return e.type==="child"?-1:1;case"descendant":return t.type==="child"?1:-1;case"branch":return PCe(n)}}function PCe(e){const{a:t,b:n}=e,r=t.__key,s=n.__key;let a=t,i=n;for(;a&&i;a=a.getNextSibling(),i=i.getNextSibling()){if(a.__key===s)return-1;if(i.__key===r)return 1}return a===null?1:-1}function AC(e,t){return t.is(e)}function Qte(e){return Ie(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function HS(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};const n=new Map;for(let[r,s]=Qte(e);r;s=r,r=r.getParent())n.set(r,s);for(let[r,s]=Qte(t);r;s=r,r=r.getParent()){const a=n.get(r);if(a!==void 0)return a===null?(AC(e,r)||$e(276),{commonAncestor:r,type:"ancestor"}):s===null?(AC(t,r)||$e(277),{commonAncestor:r,type:"descendant"}):((Ie(a)||AC(e,a))&&(Ie(s)||AC(t,s))&&r.is(a.getParent())&&r.is(s.getParent())||$e(278),{a,b:s,commonAncestor:r,type:"branch"})}return null}function mu(e,t){const{type:n,key:r,offset:s}=e,a=p5t(e.key);return n==="text"?(Je(a)||$e(266,a.getType(),r),Fm(a,t,s)):(Ie(a)||$e(267,a.getType(),r),T5t(a,e.offset,t))}function K1(e,t){const{origin:n,direction:r}=t,s=r==="next";pd(t)?e.set(n.getKey(),t.offset,"text"):Ig(t)?Je(n)?e.set(n.getKey(),hd(n,r),"text"):e.set(n.getParentOrThrow().getKey(),n.getIndexWithinParent()+(s?1:0),"element"):(Ul(t)&&Ie(n)||$e(268),e.set(n.getKey(),s?0:n.getChildrenSize(),"element"))}function M5t(e){const t=nt(),n=Fe(t)?t:cCe();return zS(n,e),ua(n),n}function zS(e,t){K1(e.anchor,t.anchor),K1(e.focus,t.focus)}function Xte(e){const{anchor:t,focus:n}=e,r=mu(t,"next"),s=mu(n,"next"),a=RCe(r,s)<=0?"next":"previous";return Ad(Rg(r,a),Rg(s,a))}function KV(e){const{direction:t,origin:n}=e,r=Vs(n,Zy(t)).getNodeAtCaret();return r?Vs(r,t):fu(n.getParentOrThrow(),t)}function Zte(e,t="root"){const n=[e];for(let r=Ul(e)?e.getParentCaret(t):e.getSiblingCaret();r!==null;r=r.getParentCaret(t))n.push(KV(r));return n}function RA(e){return!!e&&e.origin.isAttached()}function k5t(e,t="removeEmptySlices"){if(e.isCollapsed())return e;const n="root",r="next";let s=t;const a=LCe(e,r),i=Zte(a.anchor,n),l=Zte(a.focus.getFlipped(),n),c=new Set,u=[];for(const g of a.iterNodeCarets(n))if(Ul(g))c.add(g.origin.getKey());else if(Ig(g)){const{origin:y}=g;Ie(y)&&!c.has(y.getKey())||u.push(y)}for(const g of u)g.remove();for(const g of a.getTextSlices()){if(!g)continue;const{origin:y}=g.caret,v=y.getTextContentSize(),x=KV(Vs(y,r)),b=y.getMode();if(Math.abs(g.distance)===v&&s==="removeEmptySlices"||b==="token"&&g.distance!==0)x.remove();else if(g.distance!==0){s="removeEmptySlices";let _=g.removeTextSlice();const w=g.caret.origin;if(b==="segmented"){const C=_.origin,S=Qn(C.getTextContent()).setStyle(C.getStyle()).setFormat(C.getFormat());x.replaceOrInsert(S),_=Fm(S,r,_.offset)}w.is(i[0].origin)&&(i[0]=_),w.is(l[0].origin)&&(l[0]=_.getFlipped())}}let d,m;for(const g of i)if(RA(g)){d=Tl(g);break}for(const g of l)if(RA(g)){m=Tl(g);break}const p=function(g,y,v){if(!g||!y)return null;const x=g.getParentAtCaret(),b=y.getParentAtCaret();if(!x||!b)return null;const _=x.getParents().reverse();_.push(x);const w=b.getParents().reverse();w.push(b);const C=Math.min(_.length,w.length);let S;for(S=0;S<C&&_[S]===w[S];S++);const E=(A,R)=>{let O;for(let L=S;L<A.length;L++){const P=A[L];if(Qi(P))return;!O&&R(P)&&(O=P)}return O},M=E(_,Yu),k=M&&E(w,A=>v.has(A.getKey())&&Yu(A));return M&&k?[M,k]:null}(d,m,c);if(p){const[g,y]=p;fu(g,"previous").splice(0,y.getChildren()),y.remove()}const h=[d,m,...i,...l].find(RA);if(h)return E5t(Rg(Tl(h),e.direction));$e(269,JSON.stringify(i.map(g=>g.origin.__key)))}function Tl(e){const t=function(s){let a=s;for(;Ul(a);){const i=zV(a);if(!Ul(i))break;a=i}return a}(e.getLatest()),{direction:n}=t;if(Je(t.origin))return pd(t)?t:Fm(t.origin,n,n);const r=t.getAdjacentCaret();return Ig(r)&&Je(r.origin)?Fm(r.origin,n,Zy(n)):t}function OCe(e){return pd(e)&&e.offset!==hd(e.origin,e.direction)}function Rg(e,t){return e.direction===t?e:e.getFlipped()}function LCe(e,t){return e.direction===t?e:Ad(Rg(e.focus,t),Rg(e.anchor,t))}function T5t(e,t,n){let r=fu(e,"next");for(let s=0;s<t;s++){const a=r.getAdjacentCaret();if(a===null)break;r=a}return Rg(r,n)}function lrn(e){return e}function crn(...e){return e}function urn(e){return e}function N5t(e,t){if(!t||e===t)return e;for(const n in t)if(e[n]!==t[n])return{...e,...t};return e}const N9=new Map;function DCe(e){const t={};if(!e)return t;const n=e.split(";");for(const r of n)if(r!==""){const[s,a]=r.split(/:([^]+)/);s&&a&&(t[s.trim()]=a.trim())}return t}function Jte(e){let t=N9.get(e);return t===void 0&&(t=DCe(e),N9.set(e,t)),t}function FCe(e){const t=BV().getElementByKey(e.getKey());if(t===null)return null;const n=t.ownerDocument.defaultView;return n===null?null:n.getComputedStyle(t)}function j5t(e){return FCe(ds(e)?e:e.getParentOrThrow())}function A5t(e,t){const n=e.getStartEndPoints();if(t.isSelected(e)&&!jc(t)&&n!==null){const[r,s]=n,a=e.isBackward(),i=r.getNode(),l=s.getNode(),c=t.is(i),u=t.is(l);if(c||u){const[d,m]=_9(e),p=i.is(l),h=t.is(a?l:i),g=t.is(a?i:l);let y,v=0;p?(v=d>m?m:d,y=d>m?d:m):h?(v=a?m:d,y=void 0):g&&(v=0,y=a?d:m),t.__text=t.__text.slice(v,y)}}return t}function I5t(e){const t=e.getStyle(),n=DCe(t);N9.set(t,n)}function UCe(e){const t=BCe(e);return t!==null&&t.writingMode==="vertical-rl"}function BCe(e){const t=e.anchor.getNode();return Ie(t)?FCe(t):j5t(t)}function ene(e,t){let n=UCe(e)?!t:t;VCe(e)&&(n=!n);const r=mu(e.focus,n?"previous":"next");if(OCe(r))return!1;for(const s of qV(r)){if(Ul(s))return!s.origin.isInline();if(!Ie(s.origin)){if(Ln(s.origin))return!0;break}}return!1}function R5t(e,t,n,r){e.modify(t?"extend":"move",n,r)}function VCe(e){const t=BCe(e);return t!==null&&t.direction==="rtl"}function tne(e,t,n){const r=VCe(e);let s;s=UCe(e)||r?!n:n,R5t(e,t,s,"character")}function P5t(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const YV=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,O5t=YV&&"documentMode"in document?document.documentMode:null;!(!YV||!("InputEvent"in window)||O5t)&&"getTargetRanges"in new window.InputEvent("input");const L5t=YV&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;function $Ce(...e){const t=[];for(const n of e)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))t.push(r);return t}function Jl(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}const D5t=L5t;function ec(e,...t){const n=$Ce(...t);n.length>0&&e.classList.add(...n)}function QV(e,...t){const n=$Ce(...t);n.length>0&&e.classList.remove(...n)}function F5t(e){return e?e.getAdjacentCaret():null}function U5t(e){const t=si(e,n=>Ie(n)&&!n.isInline());return Ie(t)||P5t(4,e.__key),t}function Y1(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function B5t(e,t){const n=t.body?t.body.childNodes:[];let r=[];const s=[];for(let a=0;a<n.length;a++){const i=n[a];if(!HCe.has(i.nodeName)){const l=zCe(i,e,s,!1);l!==null&&(r=r.concat(l))}}return function(a){for(const i of a)i.getNextSibling()instanceof TV&&i.insertAfter(Do());for(const i of a){const l=i.getChildren();for(const c of l)i.insertBefore(c);i.remove()}}(s),r}function V5t(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const n=document.createElement("div"),r=cr().getChildren();for(let s=0;s<r.length;s++)WCe(e,r[s],n,t);return n.innerHTML}function WCe(e,t,n,r=null){let s=r===null||t.isSelected(r);const a=Ie(t)&&t.excludeFromCopy("html");let i=t;if(r!==null){let h=jCe(t);h=Je(h)&&r!==null?A5t(r,h):h,i=h}const l=Ie(i)?i.getChildren():[],c=AV(e,i.getType());let u;u=c&&c.exportDOM!==void 0?c.exportDOM(e,i):i.exportDOM(e);const{element:d,after:m}=u;if(!d)return!1;const p=document.createDocumentFragment();for(let h=0;h<l.length;h++){const g=l[h],y=WCe(e,g,p,r);!s&&Ie(t)&&y&&t.extractWithChild(g,r,"html")&&(s=!0)}if(s&&!a){if((Xr(d)||k9(d))&&d.append(p),n.append(d),m){const h=m.call(i,d);h&&(k9(d)?d.replaceChildren(h):d.replaceWith(h))}}else n.append(p);return s}const HCe=new Set(["STYLE","SCRIPT"]);function zCe(e,t,n,r,s=new Map,a){let i=[];if(HCe.has(e.nodeName))return i;let l=null;const c=function(g,y){const{nodeName:v}=g,x=y._htmlConversions.get(v.toLowerCase());let b=null;if(x!==void 0)for(const _ of x){const w=_(g);w!==null&&(b===null||(b.priority||0)<=(w.priority||0))&&(b=w)}return b!==null?b.conversion:null}(e,t),u=c?c(e):null;let d=null;if(u!==null){d=u.after;const g=u.node;if(l=Array.isArray(g)?g[g.length-1]:g,l!==null){for(const[,y]of s)if(l=y(l,a),!l)break;l&&i.push(...Array.isArray(g)?g:[l])}u.forChild!=null&&s.set(e.nodeName,u.forChild)}const m=e.childNodes;let p=[];const h=(l==null||!Qi(l))&&(l!=null&&w9(l)||r);for(let g=0;g<m.length;g++)p.push(...zCe(m[g],t,n,h,new Map(s),l));return d!=null&&(p=d(p)),ZE(e)&&(p=$5t(e,p,h?()=>{const g=new TV;return n.push(g),g}:Cr)),l==null?p.length>0?i=i.concat(p):ZE(e)&&function(g){return g.nextSibling==null||g.previousSibling==null?!1:T9(g.nextSibling)&&T9(g.previousSibling)}(e)&&(i=i.concat(Do())):Ie(l)&&l.append(...p),i}function $5t(e,t,n){const r=e.style.textAlign,s=[];let a=[];for(let i=0;i<t.length;i++){const l=t[i];if(w9(l))r&&!l.getFormat()&&l.setFormat(r),s.push(l);else if(a.push(l),i===t.length-1||i<t.length-1&&w9(t[i+1])){const c=n();c.setFormat(r),c.append(...a),s.push(c),a=[]}}return s}function W5t(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function H5t(e,t=nt()){return t==null&&W5t(166),Fe(t)&&t.isCollapsed()||t.getNodes().length===0?"":V5t(e,t)}function nne(e,t){const n=e.getData("text/plain")||e.getData("text/uri-list");n!=null&&t.insertRawText(n)}function rne(e,t,n){const r=e.getData("application/x-lexical-editor");if(r)try{const l=JSON.parse(r);if(l.namespace===n._config.namespace&&Array.isArray(l.nodes))return j9(n,z5t(l.nodes),t)}catch{}const s=e.getData("text/html"),a=e.getData("text/plain");if(s&&a!==s)try{const l=new DOMParser().parseFromString(function(c){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(c):c}(s),"text/html");return j9(n,B5t(n,l),t)}catch{}const i=a||e.getData("text/uri-list");if(i!=null)if(Fe(t)){const l=i.split(/(\r?\n|\t)/);l[l.length-1]===""&&l.pop();for(let c=0;c<l.length;c++){const u=nt();if(Fe(u)){const d=l[c];d===`
`||d===`\r
`?u.insertParagraph():d==="	"?u.insertNodes([N_()]):u.insertText(d)}}}else t.insertRawText(i)}function j9(e,t,n){e.dispatchCommand(NMt,{nodes:t,selection:n})||(n.insertNodes(t),function(r){if(Fe(r)&&r.isCollapsed()){const s=r.anchor;let a=null;const i=mu(s,"previous");if(i)if(pd(i))a=i.origin;else{const l=Ad(i,fu(cr(),"next").getFlipped());for(const c of l){if(Je(c.origin)){a=c.origin;break}if(Ie(c.origin)&&!c.origin.isInline())break}}if(a&&Je(a)){const l=a.getFormat(),c=a.getStyle();r.format===l&&r.style===c||(r.format=l,r.style=c,r.dirty=!0)}}}(n))}function z5t(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n],s=JMt(r);Je(s)&&I5t(s),t.push(s)}return t}const G5t=Symbol.for("preact-signals");function Rk(){if(gd>1)return void gd--;let e,t=!1;for(;hx!==void 0;){let n=hx;for(hx=void 0,A9++;n!==void 0;){const r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&GCe(n))try{n.c()}catch(s){t||(e=s,t=!0)}n=r}}if(A9=0,gd--,t)throw e}function drn(e){if(gd>0)return e();gd++;try{return e()}finally{Rk()}}let Bn,hx;function sne(e){const t=Bn;Bn=void 0;try{return e()}finally{Bn=t}}let gd=0,A9=0,GS=0;function ane(e){if(Bn===void 0)return;let t=e.n;return t===void 0||t.t!==Bn?(t={i:0,S:e,p:Bn.s,n:void 0,t:Bn,e:void 0,x:void 0,r:t},Bn.s!==void 0&&(Bn.s.n=t),Bn.s=t,e.n=t,32&Bn.f&&e.S(t),t):t.i===-1?(t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=Bn.s,t.n=void 0,Bn.s.n=t,Bn.s=t),t):void 0}function ya(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}function q5t(e,t){return new ya(e,t)}function GCe(e){for(let t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function one(e){for(let t=e.s;t!==void 0;t=t.n){const n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function qCe(e){let t,n=e.s;for(;n!==void 0;){const r=n.p;n.i===-1?(n.S.U(n),r!==void 0&&(r.n=n.n),n.n!==void 0&&(n.n.p=r)):t=n,n.S.n=n.r,n.r!==void 0&&(n.r=void 0),n=r}e.s=t}function Ap(e,t){ya.call(this,void 0),this.x=e,this.s=void 0,this.g=GS-1,this.f=4,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}function KCe(e){const t=e.u;if(e.u=void 0,typeof t=="function"){gd++;const n=Bn;Bn=void 0;try{t()}catch(r){throw e.f&=-2,e.f|=8,XV(e),r}finally{Bn=n,Rk()}}}function XV(e){for(let t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,KCe(e)}function K5t(e){if(Bn!==this)throw new Error("Out-of-order effect");qCe(this),Bn=e,this.f&=-2,8&this.f&&XV(this),Rk()}function Xp(e,t){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=t?.name}function I9(e,t){const n=new Xp(e,t);try{n.c()}catch(s){throw n.d(),s}const r=n.d.bind(n);return r[Symbol.dispose]=r,r}function Y5t(e,t={}){const n={};for(const r in e){const s=t[r],a=q5t(s===void 0?e[r]:s);n[r]=a}return n}ya.prototype.brand=G5t,ya.prototype.h=function(){return!0},ya.prototype.S=function(e){const t=this.t;t!==e&&e.e===void 0&&(e.x=t,this.t=e,t!==void 0?t.e=e:sne(()=>{var n;(n=this.W)==null||n.call(this)}))},ya.prototype.U=function(e){if(this.t!==void 0){const t=e.e,n=e.x;t!==void 0&&(t.x=n,e.e=void 0),n!==void 0&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n,n===void 0&&sne(()=>{var r;(r=this.Z)==null||r.call(this)}))}},ya.prototype.subscribe=function(e){return I9(()=>{const t=this.value,n=Bn;Bn=void 0;try{e(t)}finally{Bn=n}},{name:"sub"})},ya.prototype.valueOf=function(){return this.value},ya.prototype.toString=function(){return this.value+""},ya.prototype.toJSON=function(){return this.value},ya.prototype.peek=function(){const e=Bn;Bn=void 0;try{return this.value}finally{Bn=e}},Object.defineProperty(ya.prototype,"value",{get(){const e=ane(this);return e!==void 0&&(e.i=this.i),this.v},set(e){if(e!==this.v){if(A9>100)throw new Error("Cycle detected");this.v=e,this.i++,GS++,gd++;try{for(let t=this.t;t!==void 0;t=t.x)t.t.N()}finally{Rk()}}}}),Ap.prototype=new ya,Ap.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===GS))return!0;if(this.g=GS,this.f|=1,this.i>0&&!GCe(this))return this.f&=-2,!0;const e=Bn;try{one(this),Bn=this;const t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(t){this.v=t,this.f|=16,this.i++}return Bn=e,qCe(this),this.f&=-2,!0},Ap.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(let t=this.s;t!==void 0;t=t.n)t.S.S(t)}ya.prototype.S.call(this,e)},Ap.prototype.U=function(e){if(this.t!==void 0&&(ya.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(let t=this.s;t!==void 0;t=t.n)t.S.U(t)}},Ap.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let e=this.t;e!==void 0;e=e.x)e.t.N()}},Object.defineProperty(Ap.prototype,"value",{get(){if(1&this.f)throw new Error("Cycle detected");const e=ane(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),Xp.prototype.c=function(){const e=this.S();try{if(8&this.f||this.x===void 0)return;const t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}},Xp.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,KCe(this),one(this),gd++;const e=Bn;return Bn=this,K5t.bind(this,e)},Xp.prototype.N=function(){2&this.f||(this.f|=2,this.o=hx,hx=this)},Xp.prototype.d=function(){this.f|=8,1&this.f||XV(this)},Xp.prototype.dispose=function(){this.d()};function tr(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function YCe(e,t){if(e&&t&&!Array.isArray(t)&&typeof e=="object"&&typeof t=="object"){const n=e,r=t;for(const s in r)n[s]=YCe(n[s],r[s]);return e}return t}const Hn={unmarked:0,temporary:1,permanent:2,configured:3,initialized:4,built:5,registered:6,afterRegistration:7};function PA(e){return e.id===Hn.unmarked}function QCe(e){return e.id===Hn.permanent}function Q5t(e){return function(t){return t.id===Hn.temporary}(e)||tr(305,String(e.id),String(Hn.temporary)),Object.assign(e,{id:Hn.permanent})}const X5t=new Set;let Z5t=class{builder;configs;_dependency;_peerNameSet;extension;state;_signal;constructor(t,n){this.builder=t,this.extension=n,this.configs=new Set,this.state={id:Hn.unmarked}}mergeConfigs(){let t=this.extension.config||{};const n=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):N5t;for(const r of this.configs)t=n(t,r);return t}init(t){const n=this.state;QCe(n)||tr(306,String(n.id));const r={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},s={...r,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},a=function(l,c,u){return Object.assign(l,{config:c,id:Hn.configured,registerState:u})}(n,this.mergeConfigs(),r);let i;this.state=a,this.extension.init&&(i=this.extension.init(t,a.config,r)),this.state=function(l,c,u){return Object.assign(l,{id:Hn.initialized,initResult:c,registerState:u})}(a,i,s)}build(t){const n=this.state;let r;n.id!==Hn.initialized&&tr(307,String(n.id),String(Hn.built)),this.extension.build&&(r=this.extension.build(t,n.config,n.registerState));const s={...n.registerState,getOutput:()=>r,getSignal:this.getSignal.bind(this)};this.state=function(a,i,l){return Object.assign(a,{id:Hn.built,output:i,registerState:l})}(n,r,s)}register(t,n){this._signal=n;const r=this.state;r.id!==Hn.built&&tr(308,String(r.id),String(Hn.built));const s=this.extension.register&&this.extension.register(t,r.config,r.registerState);return this.state=function(a){return Object.assign(a,{id:Hn.registered})}(r),()=>{const a=this.state;a.id!==Hn.afterRegistration&&tr(309,String(r.id),String(Hn.afterRegistration)),this.state=function(i){return Object.assign(i,{id:Hn.built})}(a),s&&s()}}afterRegistration(t){const n=this.state;let r;return n.id!==Hn.registered&&tr(310,String(n.id),String(Hn.registered)),this.extension.afterRegistration&&(r=this.extension.afterRegistration(t,n.config,n.registerState)),this.state=function(s){return Object.assign(s,{id:Hn.afterRegistration})}(n),r}getSignal(){return this._signal===void 0&&tr(311),this._signal}getInitResult(){this.extension.init===void 0&&tr(312,this.extension.name);const t=this.state;return function(n){return n.id>=Hn.initialized}(t)||tr(313,String(t.id),String(Hn.initialized)),t.initResult}getInitPeer(t){const n=this.builder.extensionNameMap.get(t);return n?n.getExtensionInitDependency():void 0}getExtensionInitDependency(){const t=this.state;return function(n){return n.id>=Hn.configured}(t)||tr(314,String(t.id),String(Hn.configured)),{config:t.config}}getPeer(t){const n=this.builder.extensionNameMap.get(t);return n?n.getExtensionDependency():void 0}getInitDependency(t){const n=this.builder.getExtensionRep(t);return n===void 0&&tr(315,this.extension.name,t.name),n.getExtensionInitDependency()}getDependency(t){const n=this.builder.getExtensionRep(t);return n===void 0&&tr(315,this.extension.name,t.name),n.getExtensionDependency()}getState(){const t=this.state;return function(n){return n.id>=Hn.afterRegistration}(t)||tr(316,String(t.id),String(Hn.afterRegistration)),t}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||X5t}getPeerNameSet(){let t=this._peerNameSet;return t||(t=new Set((this.extension.peerDependencies||[]).map(([n])=>n)),this._peerNameSet=t),t}getExtensionDependency(){if(!this._dependency){const t=this.state;(function(n){return n.id>=Hn.built})(t)||tr(317,this.extension.name),this._dependency={config:t.config,init:t.initResult,output:t.output}}return this._dependency}};const ine={tag:px};function J5t(){const e=cr();e.isEmpty()&&e.append(Cr())}const e3t={config:{setOptions:ine,updateOptions:ine},init:({$initialEditorState:e=J5t})=>({$initialEditorState:e,initialized:!1}),afterRegistration(e,{updateOptions:t,setOptions:n},r){const s=r.getInitResult();if(!s.initialized){s.initialized=!0;const{$initialEditorState:a}=s;if(e5t(a))e.setEditorState(a,n);else if(typeof a=="function")e.update(()=>{a(e)},t);else if(a&&(typeof a=="string"||typeof a=="object")){const i=e.parseEditorState(a);e.setEditorState(i,n)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[tp,uc,Yy,Qy,np]},lne=Symbol.for("@lexical/extension/LexicalBuilder");function cne(){}function t3t(e){throw e}function IC(e){return Array.isArray(e)?e:[e]}const OA="0.36.1+prod.esm";let XCe=class qS{roots;extensionNameMap;outgoingConfigEdges;incomingEdges;conflicts;_sortedExtensionReps;PACKAGE_VERSION;constructor(t){this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=OA,this.roots=t;for(const n of t)this.addExtension(n)}static fromExtensions(t){const n=[IC(e3t)];for(const r of t)n.push(IC(r));return new qS(n)}static maybeFromEditor(t){const n=t[lne];return n&&(n.PACKAGE_VERSION!==OA&&tr(292,n.PACKAGE_VERSION,OA),n instanceof qS||tr(293)),n}static fromEditor(t){const n=qS.maybeFromEditor(t);return n===void 0&&tr(294),n}constructEditor(){const{$initialEditorState:t,onError:n,...r}=this.buildCreateEditorArgs(),s=Object.assign(NV({...r,...n?{onError:a=>{n(a,s)}}:{}}),{[lne]:this});for(const a of this.sortedExtensionReps())a.build(s);return s}buildEditor(){let t=cne;function n(){try{t()}finally{t=cne}}const r=Object.assign(this.constructEditor(),{dispose:n,[Symbol.dispose]:n});return t=Jl(this.registerEditor(r),()=>r.setRootElement(null)),r}hasExtensionByName(t){return this.extensionNameMap.has(t)}getExtensionRep(t){const n=this.extensionNameMap.get(t.name);if(n)return n.extension!==t&&tr(295,t.name),n}addEdge(t,n,r){const s=this.outgoingConfigEdges.get(t);s?s.set(n,r):this.outgoingConfigEdges.set(t,new Map([[n,r]]));const a=this.incomingEdges.get(n);a?a.add(t):this.incomingEdges.set(n,new Set([t]))}addExtension(t){this._sortedExtensionReps!==void 0&&tr(296);const n=IC(t),[r]=n;typeof r.name!="string"&&tr(297,typeof r.name);let s=this.extensionNameMap.get(r.name);if(s!==void 0&&s.extension!==r&&tr(298,r.name),!s){s=new Z5t(this,r),this.extensionNameMap.set(r.name,s);const a=this.conflicts.get(r.name);typeof a=="string"&&tr(299,r.name,a);for(const i of r.conflictsWith||[])this.extensionNameMap.has(i)&&tr(299,r.name,i),this.conflicts.set(i,r.name);for(const i of r.dependencies||[]){const l=IC(i);this.addEdge(r.name,l[0].name,l.slice(1)),this.addExtension(l)}for(const[i,l]of r.peerDependencies||[])this.addEdge(r.name,i,l?[l]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;const t=[],n=(r,s)=>{let a=r.state;if(QCe(a))return;const i=r.extension.name;var l;PA(a)||tr(300,i,s||"[unknown]"),PA(l=a)||tr(304,String(l.id),String(Hn.unmarked)),a=Object.assign(l,{id:Hn.temporary}),r.state=a;const c=this.outgoingConfigEdges.get(i);if(c)for(const u of c.keys()){const d=this.extensionNameMap.get(u);d&&n(d,i)}a=Q5t(a),r.state=a,t.push(r)};for(const r of this.extensionNameMap.values())PA(r.state)&&n(r);for(const r of t)for(const[s,a]of this.outgoingConfigEdges.get(r.extension.name)||[])if(a.length>0){const i=this.extensionNameMap.get(s);if(i)for(const l of a)i.configs.add(l)}for(const[r,...s]of this.roots)if(s.length>0){const a=this.extensionNameMap.get(r.name);a===void 0&&tr(301,r.name);for(const i of s)a.configs.add(i)}return this._sortedExtensionReps=t,this._sortedExtensionReps}registerEditor(t){const n=this.sortedExtensionReps(),r=new AbortController,s=[()=>r.abort()],a=r.signal;for(const i of n){const l=i.register(t,a);l&&s.push(l)}for(const i of n){const l=i.afterRegistration(t);l&&s.push(l)}return Jl(...s)}buildCreateEditorArgs(){const t={},n=new Set,r=new Map,s=new Map,a={},i={},l=this.sortedExtensionReps();for(const d of l){const{extension:m}=d;if(m.onError!==void 0&&(t.onError=m.onError),m.disableEvents!==void 0&&(t.disableEvents=m.disableEvents),m.parentEditor!==void 0&&(t.parentEditor=m.parentEditor),m.editable!==void 0&&(t.editable=m.editable),m.namespace!==void 0&&(t.namespace=m.namespace),m.$initialEditorState!==void 0&&(t.$initialEditorState=m.$initialEditorState),m.nodes)for(const p of m.nodes){if(typeof p!="function"){const h=r.get(p.replace);h&&tr(302,m.name,p.replace.name,h.extension.name),r.set(p.replace,d)}n.add(p)}if(m.html){if(m.html.export)for(const[p,h]of m.html.export.entries())s.set(p,h);m.html.import&&Object.assign(a,m.html.import)}m.theme&&YCe(i,m.theme)}Object.keys(i).length>0&&(t.theme=i),n.size&&(t.nodes=[...n]);const c=Object.keys(a).length>0,u=s.size>0;(c||u)&&(t.html={},c&&(t.html.import=a),u&&(t.html.export=s));for(const d of l)d.init(t);return t.onError||(t.onError=t3t),t}};function mrn(e,t){const n=XCe.fromEditor(e).extensionNameMap.get(t);return n?n.getExtensionDependency():void 0}let ZCe=class JCe extends Tk{static getType(){return"horizontalrule"}static clone(t){return new JCe(t.__key)}static importJSON(t){return eSe().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:n3t,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(t){const n=document.createElement("hr");return ec(n,t.theme.hr),n}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}};function n3t(){return{node:eSe()}}function eSe(){return ACe(ZCe)}function prn(e){return e instanceof ZCe}const r3t=new Set(["http:","https:","mailto:","sms:","tel:"]);let Jy=class tSe extends Fo{__url;__target;__rel;__title;static getType(){return"link"}static clone(t){return new tSe(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",n={},r){super(r);const{target:s=null,rel:a=null,title:i=null}=n;this.__url=t,this.__target=s,this.__rel=a,this.__title=i}createDOM(t){const n=document.createElement("a");return this.updateLinkDOM(null,n,t),ec(n,t.theme.link),n}updateLinkDOM(t,n,r){if(UV(n)){t&&t.__url===this.__url||(n.href=this.sanitizeUrl(this.__url));for(const s of["target","rel","title"]){const a=`__${s}`,i=this[a];t&&t[a]===i||(i?n[s]=i:n.removeAttribute(s))}}}updateDOM(t,n,r){return this.updateLinkDOM(t,n,r),!1}static importDOM(){return{a:t=>({conversion:s3t,priority:1})}}static importJSON(t){return Pg().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){t=dne(t);try{const n=new URL(dne(t));if(!r3t.has(n.protocol))return"about:blank"}catch{return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const n=this.getWritable();return n.__url=t,n}getTarget(){return this.getLatest().__target}setTarget(t){const n=this.getWritable();return n.__target=t,n}getRel(){return this.getLatest().__rel}setRel(t){const n=this.getWritable();return n.__rel=t,n}getTitle(){return this.getLatest().__title}setTitle(t){const n=this.getWritable();return n.__title=t,n}insertNewAfter(t,n=!0){const r=Pg(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(r,n),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,n,r){if(!Fe(n))return!1;const s=n.anchor.getNode(),a=n.focus.getNode();return this.isParentOf(s)&&this.isParentOf(a)&&n.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}};function s3t(e){let t=null;if(UV(e)){const n=e.textContent;(n!==null&&n!==""||e.children.length>0)&&(t=Pg(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function Pg(e="",t){return wi(new Jy(e,t))}function ei(e){return e instanceof Jy}let ZV=class nSe extends Jy{__isUnlinked;constructor(t="",n={},r){super(t,n,r),this.__isUnlinked=n.isUnlinked!==void 0&&n.isUnlinked!==null&&n.isUnlinked}static getType(){return"autolink"}static clone(t){return new nSe(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const n=this.getWritable();return n.__isUnlinked=t,n}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,n,r){return super.updateDOM(t,n,r)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return R9().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,n=!0){const r=this.getParentOrThrow().insertNewAfter(t,n);if(Ie(r)){const s=R9(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return r.append(s),s}return null}};function R9(e="",t){return wi(new ZV(e,t))}function _l(e){return e instanceof ZV}const P9=Yt("TOGGLE_LINK_COMMAND");function une(e,t){if(e.type==="element"){const n=e.getNode();return Ie(n)||function(r,...s){const a=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",r);for(const l of s)i.append("v",l);throw a.search=i.toString(),Error(`Minified Lexical error #${r}; visit ${a.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(252),n.getChildren()[e.offset+t]||null}return null}function LA(e,t={}){let n;if(e&&typeof e=="object"){const{url:d,...m}=e;n=d,t={...m,...t}}else n=e;const{target:r,title:s}=t,a=t.rel===void 0?"noreferrer":t.rel,i=nt();if(i===null||!Fe(i)&&!Zc(i))return;if(Zc(i)){const d=i.getNodes();return d.length===0?void 0:void d.forEach(m=>{if(n===null){const p=si(m,h=>!_l(h)&&ei(h));p&&(p.insertBefore(m),p.getChildren().length===0&&p.remove())}else{const p=si(m,h=>!_l(h)&&ei(h));if(p)p.setURL(n),r!==void 0&&p.setTarget(r),a!==void 0&&p.setRel(a);else{const h=Pg(n,{rel:a,target:r});m.insertBefore(h),h.append(m)}}})}const l=i.extract();if(n===null)return void l.forEach(d=>{const m=si(d,p=>!_l(p)&&ei(p));if(m){const p=m.getChildren();for(let h=0;h<p.length;h++)m.insertBefore(p[h]);m.remove()}});const c=new Set,u=d=>{c.has(d.getKey())||(c.add(d.getKey()),d.setURL(n),r!==void 0&&d.setTarget(r),a!==void 0&&d.setRel(a),s!==void 0&&d.setTitle(s))};if(l.length===1){const d=l[0],m=si(d,ei);if(m!==null)return u(m)}(function(d){const m=nt();if(!Fe(m))return d();const p=W1(m),h=p.isBackward(),g=une(p.anchor,h?-1:0),y=une(p.focus,h?0:-1);if(d(),g||y){const v=nt();if(Fe(v)){const x=v.clone();if(g){const b=g.getParent();b&&x.anchor.set(b.getKey(),g.getIndexWithinParent()+(h?1:0),"element")}if(y){const b=y.getParent();b&&x.focus.set(b.getKey(),y.getIndexWithinParent()+(h?0:1),"element")}ua(W1(x))}}})(()=>{let d=null;for(const m of l){if(!m.isAttached())continue;const p=si(m,ei);if(p){u(p);continue}if(Ie(m)){if(!m.isInline())continue;if(ei(m)){if(!(_l(m)||d!==null&&d.getParentOrThrow().isParentOf(m))){u(m),d=m;continue}for(const g of m.getChildren())m.insertBefore(g);m.remove();continue}}const h=m.getPreviousSibling();ei(h)&&h.is(d)?h.append(m):(d=Pg(n,{rel:a,target:r,title:s}),m.insertAfter(d),d.append(m))}})}const a3t=/^\+?[0-9\s()-]{5,}$/;function dne(e){return e.match(/^[a-z][a-z0-9+.-]*:/i)||e.match(/^[/#.]/)?e:e.includes("@")?`mailto:${e}`:a3t.test(e)?`tel:${e}`:`https://${e}`}function hrn(e,t){return Jl(I9(()=>e.registerCommand(P9,n=>{const r=t.validateUrl.peek(),s=t.attributes.peek();if(n===null)return LA(null),!0;if(typeof n=="string")return!(r!==void 0&&!r(n))&&(LA(n,s),!0);{const{url:a,target:i,rel:l,title:c}=n;return LA(a,{...s,rel:l,target:i,title:c}),!0}},G1)),I9(()=>{const n=t.validateUrl.value;if(!n)return;const r=t.attributes.value;return e.registerCommand(T_,s=>{const a=nt();if(!Fe(a)||a.isCollapsed()||!Y1(s,ClipboardEvent)||s.clipboardData===null)return!1;const i=s.clipboardData.getData("text");return!!n(i)&&!a.getNodes().some(l=>Ie(l))&&(e.dispatchCommand(P9,{...r,url:i}),s.preventDefault(),!0)},G1)}))}function o3t(e,t,n={}){const r=a=>{const i=a.target;if(!Xy(i))return;const l=RV(i);if(l===null)return;let c=null,u=null;if(l.update(()=>{const p=Ag(i);if(p!==null){const h=si(p,Ie);if(!t.disabled.peek())if(ei(h))c=h.sanitizeUrl(h.getURL()),u=h.getTarget();else{const g=function(y,v){let x=y;for(;x!=null;){if(v(x))return x;x=x.parentNode}return null}(i,UV);g!==null&&(c=g.href,u=g.target)}}}),c===null||c==="")return;const d=e.getEditorState().read(nt);if(Fe(d)&&!d.isCollapsed())return void a.preventDefault();const m=a.type==="auxclick"&&a.button===1;window.open(c,t.newTab.peek()||m||a.metaKey||a.ctrlKey||u==="_blank"?"_blank":"_self"),a.preventDefault()},s=a=>{a.button===1&&r(a)};return e.registerRootListener((a,i)=>{i!==null&&(i.removeEventListener("click",r),i.removeEventListener("mouseup",s)),a!==null&&(a.addEventListener("click",r,n),a.addEventListener("mouseup",s,n))})}function grn(e,t=n=>n){return n=>{const r=e.exec(n);return r===null?null:{index:r.index,length:r[0].length,text:r[0],url:t(r[0])}}}function rSe(e,t){for(let n=0;n<t.length;n++){const r=t[n](e);if(r)return r}return null}const i3t=/[.,;\s]/;function JE(e){return i3t.test(e)}function sSe(e){return JE(e[e.length-1])}function O9(e){return JE(e[0])}function aSe(e){let t=e.getPreviousSibling();return Ie(t)&&(t=t.getLastDescendant()),t===null||Fl(t)||Je(t)&&sSe(t.getTextContent())}function oSe(e){let t=e.getNextSibling();return Ie(t)&&(t=t.getFirstDescendant()),t===null||Fl(t)||Je(t)&&O9(t.getTextContent())}function l3t(e,t,n,r){return(e>0?JE(n[e-1]):aSe(r[0]))?t<n.length?JE(n[t]):oSe(r[r.length-1]):!1}function c3t(e,t,n){const r=[],s=[],a=[];let i=0,l=0;const c=[...e];for(;c.length>0;){const u=c[0],d=u.getTextContent().length,m=l;l+d<=t?(r.push(u),i+=d):m>=n?a.push(u):s.push(u),l+=d,c.shift()}return[i,r,s,a]}function u3t(e,t,n,r){const s=R9(r.url,r.attributes);if(e.length===1){let a,i=e[0];t===0?[a,i]=i.splitText(n):[,a,i]=i.splitText(t,n);const l=Qn(r.text);return l.setFormat(a.getFormat()),l.setDetail(a.getDetail()),l.setStyle(a.getStyle()),s.append(l),a.replace(s),i}if(e.length>1){const a=e[0];let i,l=a.getTextContent().length;t===0?i=a:[,i]=a.splitText(t);const c=[];let u;for(let h=1;h<e.length;h++){const g=e[h],y=g.getTextContent().length,v=l;if(v<n)if(l+y<=n)c.push(g);else{const[x,b]=g.splitText(n-v);c.push(x),u=b}l+=y}const d=nt(),m=d?d.getNodes().find(Je):void 0,p=Qn(i.getTextContent());return p.setFormat(i.getFormat()),p.setDetail(i.getDetail()),p.setStyle(i.getStyle()),s.append(p,...c),m&&m===i&&(Fe(d)?p.select(d.anchor.offset,d.focus.offset):Zc(d)&&p.select(0,p.getTextContent().length)),i.replace(s),u}}function DA(e,t,n){const r=e.getChildren(),s=r.length;for(let c=0;c<s;c++){const u=r[c];if(!Je(u)||!u.isSimpleText())return KS(e),void n(null,e.getURL())}const a=e.getTextContent(),i=rSe(a,t);if(i===null||i.text!==a||!aSe(e)||!oSe(e))return KS(e),void n(null,e.getURL());const l=e.getURL();if(l!==i.url&&(e.setURL(i.url),n(i.url,l)),i.attributes){const c=e.getRel();c!==i.attributes.rel&&(e.setRel(i.attributes.rel||null),n(i.attributes.rel||null,c));const u=e.getTarget();u!==i.attributes.target&&(e.setTarget(i.attributes.target||null),n(i.attributes.target||null,u))}}function KS(e){const t=e.getChildren();for(let n=t.length-1;n>=0;n--)e.insertAfter(t[n]);return e.remove(),t.map(n=>n.getLatest())}const d3t={changeHandlers:[],matchers:[]};function yrn(e,t=d3t){const{matchers:n,changeHandlers:r}=t,s=(a,i)=>{for(const l of r)l(a,i)};return Jl(e.registerNodeTransform(uc,a=>{const i=a.getParentOrThrow(),l=a.getPreviousSibling();if(_l(i)&&!i.getIsUnlinked())DA(i,n,s);else if(!ei(i)){if(a.isSimpleText()&&(O9(a.getTextContent())||!_l(l))){const c=function(u){const d=[u];let m=u.getNextSibling();for(;m!==null&&Je(m)&&m.isSimpleText()&&(d.push(m),!/[\s]/.test(m.getTextContent()));)m=m.getNextSibling();return d}(a);(function(u,d,m){let p=[...u];const h=p.map(x=>x.getTextContent()).join("");let g,y=h,v=0;for(;(g=rSe(y,d))&&g!==null;){const x=g.index,b=x+g.length;if(l3t(v+x,v+b,h,p)){const[_,,w,C]=c3t(p,v+x,v+b),S=u3t(w,v+x-_,v+b-_,g);p=S?[S,...C]:C,m(g.url,null),v=0}else v+=b;y=y.substring(b)}})(c,n,s)}(function(c,u,d){const m=c.getPreviousSibling(),p=c.getNextSibling(),h=c.getTextContent();var g;!_l(m)||m.getIsUnlinked()||O9(h)&&(g=h,!(m.isEmailURI()?/^\.[a-zA-Z]{2,}/.test(g):/^\.[a-zA-Z0-9]{1,}/.test(g)))||(m.append(c),DA(m,u,d),d(null,m.getURL())),!_l(p)||p.getIsUnlinked()||sSe(h)||(KS(p),DA(p,u,d),d(null,p.getURL()))})(a,n,s)}}),e.registerCommand(P9,a=>{const i=nt();return a!==null||!Fe(i)||i.extract().forEach(l=>{const c=l.getParent();_l(c)&&(c.setIsUnlinked(!c.getIsUnlinked()),c.markDirty())}),!1},G1))}function _v(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function f3t(e){let t=1,n=e.getParent();for(;n!=null;){if(ea(n)){const r=n.getParent();if(Xn(r)){t++,n=r.getParent();continue}_v(40)}return t}return t}function wl(e){return ea(e)&&Xn(e.getFirstChild())}function fne(e){return pu().append(e)}function iSe(e,t){e.splice(e.getChildrenSize(),0,t)}function JV(e,t){const n=e.getLastChild(),r=t.getFirstChild();n&&r&&wl(n)&&wl(r)&&(JV(n.getFirstChild(),r.getFirstChild()),r.remove());const s=t.getChildren();s.length>0&&e.append(...s),t.remove()}function m3t(e){const t=e.getListType()!=="check";let n=e.getStart();for(const r of e.getChildren())ea(r)&&(r.getValue()!==n&&r.setValue(n),t&&r.getLatest().__checked!=null&&r.setChecked(void 0),Xn(r.getFirstChild())||n++)}function p3t(e){const t=new Set;if(wl(e)||t.has(e.getKey()))return;const n=e.getParent(),r=e.getNextSibling(),s=e.getPreviousSibling();if(wl(r)&&wl(s)){const a=s.getFirstChild();if(Xn(a)){a.append(e);const i=r.getFirstChild();Xn(i)&&(iSe(a,i.getChildren()),r.remove(),t.add(r.getKey()))}}else if(wl(r)){const a=r.getFirstChild();if(Xn(a)){const i=a.getFirstChild();i!==null&&i.insertBefore(e)}}else if(wl(s)){const a=s.getFirstChild();Xn(a)&&a.append(e)}else if(Xn(n)){const a=pu().setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle()),i=Bl(n.getListType()).setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle());a.append(i),i.append(e),s?s.insertAfter(a):r?r.insertBefore(a):n.append(a)}}function h3t(e){if(wl(e))return;const t=e.getParent(),n=t?t.getParent():void 0;if(Xn(n?n.getParent():void 0)&&ea(n)&&Xn(t)){const r=t?t.getFirstChild():void 0,s=t?t.getLastChild():void 0;if(e.is(r))n.insertBefore(e),t.isEmpty()&&n.remove();else if(e.is(s))n.insertAfter(e),t.isEmpty()&&n.remove();else{const a=t.getListType(),i=pu(),l=Bl(a);i.append(l),e.getPreviousSiblings().forEach(d=>l.append(d));const c=pu(),u=Bl(a);c.append(u),iSe(u,e.getNextSiblings()),n.insertBefore(i),n.insertAfter(c),n.replace(e)}}}function eM(...e){const t=[];for(const n of e)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))t.push(r);return t}let Pk=class extends Fo{__value;__checked;$config(){return this.config("listitem",{$transform:t=>{if(t.__checked==null)return;const n=t.getParent();Xn(n)&&n.getListType()!=="check"&&t.getChecked()!=null&&t.setChecked(void 0)},extends:Fo,importDOM:{li:()=>({conversion:g3t,priority:0})}})}constructor(t=1,n=void 0,r){super(r),this.__value=t===void 0?1:t,this.__checked=n}afterCloneFrom(t){super.afterCloneFrom(t),this.__value=t.__value,this.__checked=t.__checked}createDOM(t){const n=document.createElement("li");return this.updateListItemDOM(null,n,t),n}updateListItemDOM(t,n,r){(function(i,l,c){const u=l.getParent();!Xn(u)||u.getListType()!=="check"||Xn(l.getFirstChild())?(i.removeAttribute("role"),i.removeAttribute("tabIndex"),i.removeAttribute("aria-checked")):(i.setAttribute("role","checkbox"),i.setAttribute("tabIndex","-1"),c&&l.__checked===c.__checked||i.setAttribute("aria-checked",l.getChecked()?"true":"false"))})(n,this,t),n.value=this.__value,function(i,l,c){const u=[],d=[],m=l.list,p=m?m.listitem:void 0;let h;if(m&&m.nested&&(h=m.nested.listitem),p!==void 0&&u.push(...eM(p)),m){const g=c.getParent(),y=Xn(g)&&g.getListType()==="check",v=c.getChecked();y&&!v||d.push(m.listitemUnchecked),y&&v||d.push(m.listitemChecked),y&&u.push(v?m.listitemChecked:m.listitemUnchecked)}if(h!==void 0){const g=eM(h);c.getChildren().some(y=>Xn(y))?u.push(...g):d.push(...g)}d.length>0&&QV(i,...d),u.length>0&&ec(i,...u)}(n,r.theme,this);const s=t?t.__style:"",a=this.__style;s!==a&&(a===""?n.removeAttribute("style"):n.style.cssText=a),function(i,l,c){const u=Jte(l.__textStyle);for(const d in u)i.style.setProperty(`--listitem-marker-${d}`,u[d]);if(c)for(const d in Jte(c.__textStyle))d in u||i.style.removeProperty(`--listitem-marker-${d}`)}(n,this,t)}updateDOM(t,n,r){const s=n;return this.updateListItemDOM(t,s,r),!1}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const n=this.createDOM(t._config),r=this.getFormatType();r&&(n.style.textAlign=r);const s=this.getDirection();return s&&(n.dir=s),{element:n}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let n=0;n<t.length;n++){const r=t[n];if(Ie(r)&&this.canMergeWith(r)){const s=r.getChildren();this.append(...s),r.remove()}else super.append(r)}return this}replace(t,n){if(ea(t))return super.replace(t);this.setIndent(0);const r=this.getParentOrThrow();if(!Xn(r))return t;if(r.__first===this.getKey())r.insertBefore(t);else if(r.__last===this.getKey())r.insertAfter(t);else{const s=Bl(r.getListType());let a=this.getNextSibling();for(;a;){const i=a;a=a.getNextSibling(),s.append(i)}r.insertAfter(t),t.insertAfter(s)}return n&&(Ie(t)||_v(139),this.getChildren().forEach(s=>{t.append(s)})),this.remove(),r.getChildrenSize()===0&&r.remove(),t}insertAfter(t,n=!0){const r=this.getParentOrThrow();if(Xn(r)||_v(39),ea(t))return super.insertAfter(t,n);const s=this.getNextSiblings();if(r.insertAfter(t,n),s.length!==0){const a=Bl(r.getListType());s.forEach(i=>a.append(i)),t.insertAfter(a,n)}return t}remove(t){const n=this.getPreviousSibling(),r=this.getNextSibling();super.remove(t),n&&r&&wl(n)&&wl(r)&&(JV(n.getFirstChild(),r.getFirstChild()),r.remove())}insertNewAfter(t,n=!0){const r=pu().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(r,n),r}collapseAtStart(t){const n=Cr();this.getChildren().forEach(i=>n.append(i));const r=this.getParentOrThrow(),s=r.getParentOrThrow(),a=ea(s);if(r.getChildrenSize()===1)if(a)r.remove(),s.select();else{r.insertBefore(n),r.remove();const i=t.anchor,l=t.focus,c=n.getKey();i.type==="element"&&i.getNode().is(this)&&i.set(c,i.offset,"element"),l.type==="element"&&l.getNode().is(this)&&l.set(c,l.offset,"element")}else r.insertBefore(n),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const n=this.getWritable();return n.__value=t,n}getChecked(){const t=this.getLatest();let n;const r=this.getParent();return Xn(r)&&(n=r.getListType()),n==="check"?!!t.__checked:void 0}setChecked(t){const n=this.getWritable();return n.__checked=t,n}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(t===null||!this.isAttached())return this.getLatest().__indent;let n=t.getParentOrThrow(),r=0;for(;ea(n);)n=n.getParentOrThrow().getParentOrThrow(),r++;return r}setIndent(t){typeof t!="number"&&_v(117),(t=Math.floor(t))>=0||_v(199);let n=this.getIndent();for(;n!==t;)n<t?(p3t(this),n++):(h3t(this),n--);return this}canInsertAfter(t){return ea(t)}canReplaceWith(t){return ea(t)}canMergeWith(t){return ea(t)||md(t)}extractWithChild(t,n){if(!Fe(n))return!1;const r=n.anchor.getNode(),s=n.focus.getNode();return this.isParentOf(r)&&this.isParentOf(s)&&this.getTextContent().length===n.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return Bl("bullet")}canMergeWhenEmpty(){return!0}};function g3t(e){if(e.classList.contains("task-list-item")){for(const n of e.children)if(n.tagName==="INPUT")return y3t(n)}const t=e.getAttribute("aria-checked");return{node:pu(t==="true"||t!=="false"&&void 0)}}function y3t(e){return e.getAttribute("type")!=="checkbox"?{node:null}:{node:pu(e.hasAttribute("checked"))}}function pu(e){return wi(new Pk(void 0,e))}function ea(e){return e instanceof Pk}let Ok=class extends Fo{__tag;__start;__listType;$config(){return this.config("list",{$transform:t=>{(function(n){const r=n.getNextSibling();Xn(r)&&n.getListType()===r.getListType()&&JV(n,r)})(t),m3t(t)},extends:Fo,importDOM:{ol:()=>({conversion:pne,priority:0}),ul:()=>({conversion:pne,priority:0})}})}constructor(t="number",n=1,r){super(r);const s=x3t[t]||t;this.__listType=s,this.__tag=s==="number"?"ol":"ul",this.__start=n}afterCloneFrom(t){super.afterCloneFrom(t),this.__listType=t.__listType,this.__tag=t.__tag,this.__start=t.__start}getTag(){return this.getLatest().__tag}setListType(t){const n=this.getWritable();return n.__listType=t,n.__tag=t==="number"?"ol":"ul",n}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(t){const n=this.getWritable();return n.__start=t,n}createDOM(t,n){const r=this.__tag,s=document.createElement(r);return this.__start!==1&&s.setAttribute("start",String(this.__start)),s.__lexicalListType=this.__listType,mne(s,t.theme,this),s}updateDOM(t,n,r){return t.__tag!==this.__tag||t.__listType!==this.__listType||(mne(n,r.theme,this),!1)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const n=this.createDOM(t._config,t);return Xr(n)&&(this.__start!==1&&n.setAttribute("start",String(this.__start)),this.__listType==="check"&&n.setAttribute("__lexicalListType","check")),{element:n}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,n,r){let s=r;for(let a=0;a<r.length;a++){const i=r[a];ea(i)||(s===r&&(s=[...r]),s[a]=pu().append(!Ie(i)||Xn(i)||i.isInline()?i:Qn(i.getTextContent())))}return super.splice(t,n,s)}extractWithChild(t){return ea(t)}};function mne(e,t,n){const r=[],s=[],a=t.list;if(a!==void 0){const i=a[`${n.__tag}Depth`]||[],l=f3t(n)-1,c=l%i.length,u=i[c],d=a[n.__tag];let m;const p=a.nested,h=a.checklist;if(p!==void 0&&p.list&&(m=p.list),d!==void 0&&r.push(d),h!==void 0&&n.__listType==="check"&&r.push(h),u!==void 0){r.push(...eM(u));for(let g=0;g<i.length;g++)g!==c&&s.push(n.__tag+g)}if(m!==void 0){const g=eM(m);l>1?r.push(...g):s.push(...g)}}s.length>0&&QV(e,...s),r.length>0&&ec(e,...r)}function v3t(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(ea(r)){t.push(r);const s=r.getChildren();s.length>1&&s.forEach(a=>{Xn(a)&&t.push(fne(a))})}else t.push(fne(r))}return t}function pne(e){const t=e.nodeName.toLowerCase();let n=null;return t==="ol"?n=Bl("number",e.start):t==="ul"&&(n=function(r){if(r.getAttribute("__lexicallisttype")==="check"||r.classList.contains("contains-task-list"))return!0;for(const s of r.childNodes)if(Xr(s)&&s.hasAttribute("aria-checked"))return!0;return!1}(e)?Bl("check"):Bl("bullet")),{after:v3t,node:n}}const x3t={ol:"number",ul:"bullet"};function Bl(e="number",t=1){return wi(new Ok(e,t))}function Xn(e){return e instanceof Ok}function b3t(e){const t=window.location.origin,n=r=>{if(r.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const a=r.data;if(typeof a=="string"){let i;try{i=JSON.parse(a)}catch{return}if(i&&i.protocol==="nuanria_messaging"&&i.type==="request"){const l=i.payload;if(l&&l.functionId==="makeChanges"){const c=l.args;if(c){const[u,d,m,p,h]=c;e.update(()=>{const g=nt();if(Fe(g)){const y=g.anchor;let v=y.getNode(),x=0,b=0;if(Je(v)&&u>=0&&d>=0&&(x=u,b=u+d,g.setTextNodeRange(v,x,v,b)),x===b&&m===""||(g.insertRawText(m),v=y.getNode()),Je(v)){x=p,b=p+h;const _=v.getTextContentSize();x=x>_?_:x,b=b>_?_:b,g.setTextNodeRange(v,x,v,b)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}const lSe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,_3t=lSe&&"documentMode"in document?document.documentMode:null;!(!lSe||!("InputEvent"in window)||_3t)&&"getTargetRanges"in new window.InputEvent("input");let e$=class cSe extends Fo{static getType(){return"quote"}static clone(t){return new cSe(t.__key)}createDOM(t){const n=document.createElement("blockquote");return ec(n,t.theme.quote),n}updateDOM(t,n){return!1}static importDOM(){return{blockquote:t=>({conversion:w3t,priority:0})}}exportDOM(t){const{element:n}=super.exportDOM(t);if(Xr(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r);const s=this.getDirection();s&&(n.dir=s)}return{element:n}}static importJSON(t){return t$().updateFromJSON(t)}insertNewAfter(t,n){const r=Cr(),s=this.getDirection();return r.setDirection(s),this.insertAfter(r,n),r}collapseAtStart(){const t=Cr();return this.getChildren().forEach(n=>t.append(n)),this.replace(t),!0}canMergeWhenEmpty(){return!0}};function t$(){return wi(new e$)}function L9(e){return e instanceof e$}let n$=class uSe extends Fo{__tag;static getType(){return"heading"}static clone(t){return new uSe(t.__tag,t.__key)}constructor(t,n){super(n),this.__tag=t}getTag(){return this.__tag}setTag(t){const n=this.getWritable();return this.__tag=t,n}createDOM(t){const n=this.__tag,r=document.createElement(n),s=t.theme.heading;if(s!==void 0){const a=s[n];ec(r,a)}return r}updateDOM(t,n,r){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:Ip,priority:0}),h2:t=>({conversion:Ip,priority:0}),h3:t=>({conversion:Ip,priority:0}),h4:t=>({conversion:Ip,priority:0}),h5:t=>({conversion:Ip,priority:0}),h6:t=>({conversion:Ip,priority:0}),p:t=>{const n=t.firstChild;return n!==null&&hne(n)?{conversion:()=>({node:null}),priority:3}:null},span:t=>hne(t)?{conversion:n=>({node:fh("h1")}),priority:3}:null}}exportDOM(t){const{element:n}=super.exportDOM(t);if(Xr(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r);const s=this.getDirection();s&&(n.dir=s)}return{element:n}}static importJSON(t){return fh(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,n=!0){const r=t?t.anchor.offset:0,s=this.getLastDescendant(),a=!s||t&&t.anchor.key===s.getKey()&&r===s.getTextContentSize()||!t?Cr():fh(this.getTag()),i=this.getDirection();if(a.setDirection(i),this.insertAfter(a,n),r===0&&!this.isEmpty()&&t){const l=Cr();l.select(),this.replace(l,!0)}return a}collapseAtStart(){const t=this.isEmpty()?Cr():fh(this.getTag());return this.getChildren().forEach(n=>t.append(n)),this.replace(t),!0}extractWithChild(){return!0}};function hne(e){return e.nodeName.toLowerCase()==="span"&&e.style.fontSize==="26pt"}function Ip(e){const t=e.nodeName.toLowerCase();let n=null;return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6"||(n=fh(t),e.style!==null&&(VV(e,n),n.setFormat(e.style.textAlign))),{node:n}}function w3t(e){const t=t$();return e.style!==null&&(t.setFormat(e.style.textAlign),VV(e,t)),{node:t}}function fh(e="h1"){return wi(new n$(e))}function C3t(e){return e instanceof n$}var FA={exports:{}},gne;function S3t(){return gne||(gne=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,i={},l={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function b(_){return _ instanceof c?new c(_.type,b(_.content),_.alias):Array.isArray(_)?_.map(b):_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(b){return Object.prototype.toString.call(b).slice(8,-1)},objId:function(b){return b.__id||Object.defineProperty(b,"__id",{value:++a}),b.__id},clone:function b(_,w){w=w||{};var C,S;switch(l.util.type(_)){case"Object":if(S=l.util.objId(_),w[S])return w[S];C={},w[S]=C;for(var E in _)_.hasOwnProperty(E)&&(C[E]=b(_[E],w));return C;case"Array":return S=l.util.objId(_),w[S]?w[S]:(C=[],w[S]=C,_.forEach(function(M,k){C[k]=b(M,w)}),C);default:return _}},getLanguage:function(b){for(;b;){var _=s.exec(b.className);if(_)return _[1].toLowerCase();b=b.parentElement}return"none"},setLanguage:function(b,_){b.className=b.className.replace(RegExp(s,"gi"),""),b.classList.add("language-"+_)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(C){var b=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(C.stack)||[])[1];if(b){var _=document.getElementsByTagName("script");for(var w in _)if(_[w].src==b)return _[w]}return null}},isActive:function(b,_,w){for(var C="no-"+_;b;){var S=b.classList;if(S.contains(_))return!0;if(S.contains(C))return!1;b=b.parentElement}return!!w}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(b,_){var w=l.util.clone(l.languages[b]);for(var C in _)w[C]=_[C];return w},insertBefore:function(b,_,w,C){C=C||l.languages;var S=C[b],E={};for(var M in S)if(S.hasOwnProperty(M)){if(M==_)for(var k in w)w.hasOwnProperty(k)&&(E[k]=w[k]);w.hasOwnProperty(M)||(E[M]=S[M])}var A=C[b];return C[b]=E,l.languages.DFS(l.languages,function(R,O){O===A&&R!=b&&(this[R]=E)}),E},DFS:function b(_,w,C,S){S=S||{};var E=l.util.objId;for(var M in _)if(_.hasOwnProperty(M)){w.call(_,M,_[M],C||M);var k=_[M],A=l.util.type(k);A==="Object"&&!S[E(k)]?(S[E(k)]=!0,b(k,w,null,S)):A==="Array"&&!S[E(k)]&&(S[E(k)]=!0,b(k,w,M,S))}}},plugins:{},highlightAll:function(b,_){l.highlightAllUnder(document,b,_)},highlightAllUnder:function(b,_,w){var C={callback:w,container:b,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",C),C.elements=Array.prototype.slice.apply(C.container.querySelectorAll(C.selector)),l.hooks.run("before-all-elements-highlight",C);for(var S=0,E;E=C.elements[S++];)l.highlightElement(E,_===!0,C.callback)},highlightElement:function(b,_,w){var C=l.util.getLanguage(b),S=l.languages[C];l.util.setLanguage(b,C);var E=b.parentElement;E&&E.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(E,C);var M=b.textContent,k={element:b,language:C,grammar:S,code:M};function A(O){k.highlightedCode=O,l.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,l.hooks.run("after-highlight",k),l.hooks.run("complete",k),w&&w.call(k.element)}if(l.hooks.run("before-sanity-check",k),E=k.element.parentElement,E&&E.nodeName.toLowerCase()==="pre"&&!E.hasAttribute("tabindex")&&E.setAttribute("tabindex","0"),!k.code){l.hooks.run("complete",k),w&&w.call(k.element);return}if(l.hooks.run("before-highlight",k),!k.grammar){A(l.util.encode(k.code));return}if(_&&r.Worker){var R=new Worker(l.filename);R.onmessage=function(O){A(O.data)},R.postMessage(JSON.stringify({language:k.language,code:k.code,immediateClose:!0}))}else A(l.highlight(k.code,k.grammar,k.language))},highlight:function(b,_,w){var C={code:b,grammar:_,language:w};if(l.hooks.run("before-tokenize",C),!C.grammar)throw new Error('The language "'+C.language+'" has no grammar.');return C.tokens=l.tokenize(C.code,C.grammar),l.hooks.run("after-tokenize",C),c.stringify(l.util.encode(C.tokens),C.language)},tokenize:function(b,_){var w=_.rest;if(w){for(var C in w)_[C]=w[C];delete _.rest}var S=new m;return p(S,S.head,b),d(b,S,_,S.head,0),g(S)},hooks:{all:{},add:function(b,_){var w=l.hooks.all;w[b]=w[b]||[],w[b].push(_)},run:function(b,_){var w=l.hooks.all[b];if(!(!w||!w.length))for(var C=0,S;S=w[C++];)S(_)}},Token:c};r.Prism=l;function c(b,_,w,C){this.type=b,this.content=_,this.alias=w,this.length=(C||"").length|0}c.stringify=function b(_,w){if(typeof _=="string")return _;if(Array.isArray(_)){var C="";return _.forEach(function(A){C+=b(A,w)}),C}var S={type:_.type,content:b(_.content,w),tag:"span",classes:["token",_.type],attributes:{},language:w},E=_.alias;E&&(Array.isArray(E)?Array.prototype.push.apply(S.classes,E):S.classes.push(E)),l.hooks.run("wrap",S);var M="";for(var k in S.attributes)M+=" "+k+'="'+(S.attributes[k]||"").replace(/"/g,"&quot;")+'"';return"<"+S.tag+' class="'+S.classes.join(" ")+'"'+M+">"+S.content+"</"+S.tag+">"};function u(b,_,w,C){b.lastIndex=_;var S=b.exec(w);if(S&&C&&S[1]){var E=S[1].length;S.index+=E,S[0]=S[0].slice(E)}return S}function d(b,_,w,C,S,E){for(var M in w)if(!(!w.hasOwnProperty(M)||!w[M])){var k=w[M];k=Array.isArray(k)?k:[k];for(var A=0;A<k.length;++A){if(E&&E.cause==M+","+A)return;var R=k[A],O=R.inside,L=!!R.lookbehind,P=!!R.greedy,N=R.alias;if(P&&!R.pattern.global){var T=R.pattern.toString().match(/[imsuy]*$/)[0];R.pattern=RegExp(R.pattern.source,T+"g")}for(var j=R.pattern||R,F=C.next,U=S;F!==_.tail&&!(E&&U>=E.reach);U+=F.value.length,F=F.next){var V=F.value;if(_.length>b.length)return;if(!(V instanceof c)){var $=1,z;if(P){if(z=u(j,U,b,L),!z||z.index>=b.length)break;var X=z.index,Q=z.index+z[0].length,Y=U;for(Y+=F.value.length;X>=Y;)F=F.next,Y+=F.value.length;if(Y-=F.value.length,U=Y,F.value instanceof c)continue;for(var W=F;W!==_.tail&&(Y<Q||typeof W.value=="string");W=W.next)$++,Y+=W.value.length;$--,V=b.slice(U,Y),z.index-=U}else if(z=u(j,0,V,L),!z)continue;var X=z.index,G=z[0],J=V.slice(0,X),q=V.slice(X+G.length),te=U+V.length;E&&te>E.reach&&(E.reach=te);var re=F.prev;J&&(re=p(_,re,J),U+=J.length),h(_,re,$);var ae=new c(M,O?l.tokenize(G,O):G,N,G);if(F=p(_,re,ae),q&&p(_,F,q),$>1){var fe={cause:M+","+A,reach:te};d(b,_,w,F.prev,U,fe),E&&fe.reach>E.reach&&(E.reach=fe.reach)}}}}}}function m(){var b={value:null,prev:null,next:null},_={value:null,prev:b,next:null};b.next=_,this.head=b,this.tail=_,this.length=0}function p(b,_,w){var C=_.next,S={value:w,prev:_,next:C};return _.next=S,C.prev=S,b.length++,S}function h(b,_,w){for(var C=_.next,S=0;S<w&&C!==b.tail;S++)C=C.next;_.next=C,C.prev=_,b.length-=S}function g(b){for(var _=[],w=b.head.next;w!==b.tail;)_.push(w.value),w=w.next;return _}if(!r.document)return r.addEventListener&&(l.disableWorkerMessageHandler||r.addEventListener("message",function(b){var _=JSON.parse(b.data),w=_.language,C=_.code,S=_.immediateClose;r.postMessage(l.highlight(C,l.languages[w],w)),S&&r.close()},!1)),l;var y=l.util.currentScript();y&&(l.filename=y.src,y.hasAttribute("data-manual")&&(l.manual=!0));function v(){l.manual||l.highlightAll()}if(!l.manual){var x=document.readyState;x==="loading"||x==="interactive"&&y&&y.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return l}(t);e.exports&&(e.exports=n),typeof ko<"u"&&(ko.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(s,a){var i={};i["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[a]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};l["language-"+a]={pattern:/[\s\S]+/,inside:n.languages[a]};var c={};c[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:l},n.languages.insertBefore("markup","cdata",c)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,s){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:n.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var a=r.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",s=function(y,v){return" Error "+y+" while fetching file: "+v},a=" Error: File does not exist or is empty",i={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",c="loading",u="loaded",d="failed",m="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+c+'"])';function p(y,v,x){var b=new XMLHttpRequest;b.open("GET",y,!0),b.onreadystatechange=function(){b.readyState==4&&(b.status<400&&b.responseText?v(b.responseText):b.status>=400?x(s(b.status,b.statusText)):x(a))},b.send(null)}function h(y){var v=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(y||"");if(v){var x=Number(v[1]),b=v[2],_=v[3];return b?_?[x,Number(_)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(y){y.selector+=", "+m}),n.hooks.add("before-sanity-check",function(y){var v=y.element;if(v.matches(m)){y.code="",v.setAttribute(l,c);var x=v.appendChild(document.createElement("CODE"));x.textContent=r;var b=v.getAttribute("data-src"),_=y.language;if(_==="none"){var w=(/\.(\w+)$/.exec(b)||[,"none"])[1];_=i[w]||w}n.util.setLanguage(x,_),n.util.setLanguage(v,_);var C=n.plugins.autoloader;C&&C.loadLanguages(_),p(b,function(S){v.setAttribute(l,u);var E=h(v.getAttribute("data-range"));if(E){var M=S.split(/\r\n?|\n/g),k=E[0],A=E[1]==null?M.length:E[1];k<0&&(k+=M.length),k=Math.max(0,Math.min(k-1,M.length)),A<0&&(A+=M.length),A=Math.max(0,Math.min(A,M.length)),S=M.slice(k,A).join(`
`),v.hasAttribute("data-start")||v.setAttribute("data-start",String(k+1))}x.textContent=S,n.highlightElement(x)},function(S){v.setAttribute(l,d),x.textContent=S})}}),n.plugins.fileHighlight={highlight:function(v){for(var x=(v||document).querySelectorAll(m),b=0,_;_=x[b++];)n.highlightElement(_)}};var g=!1;n.fileHighlight=function(){g||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),g=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(FA)),FA.exports}S3t();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,n){var r={};r["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[n]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};s["language-"+n]={pattern:/[\s\S]+/,inside:Prism.languages[n]};var a={};a[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:s},Prism.languages.insertBefore("markup","cdata",a)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),a=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+a+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+a+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+a+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(m){d!==m&&(e.languages.markdown[d].inside.content.inside[m]=e.languages.markdown[m])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function m(p){if(!(!p||typeof p=="string"))for(var h=0,g=p.length;h<g;h++){var y=p[h];if(y.type!=="code"){m(y.content);continue}var v=y.content[1],x=y.content[3];if(v&&x&&v.type==="code-language"&&x.type==="code-block"&&typeof v.content=="string"){var b=v.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");b=(/[a-z][\w-]*/i.exec(b)||[""])[0].toLowerCase();var _="language-"+b;x.alias?typeof x.alias=="string"?x.alias=[x.alias,_]:x.alias.push(_):x.alias=[_]}}}m(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var m="",p=0,h=d.classes.length;p<h;p++){var g=d.classes[p],y=/language-(.+)/.exec(g);if(y){m=y[1];break}}var v=e.languages[m];if(v)d.content=e.highlight(u(d.content),v,m);else if(m&&m!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=x,e.plugins.autoloader.loadLanguages(m,function(){var b=document.getElementById(x);b&&(b.innerHTML=e.highlight(b.textContent,e.languages[m],m))})}}});var i=RegExp(e.languages.markup.tag.pattern.source,"gi"),l={amp:"&",lt:"<",gt:">",quot:'"'},c=String.fromCodePoint||String.fromCharCode;function u(d){var m=d.replace(i,"");return m=m.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(p,h){if(h=h.toLowerCase(),h[0]==="#"){var g;return h[1]==="x"?g=parseInt(h.slice(2),16):g=Number(h.slice(1)),c(g)}else{var y=l[h];return y||p}}),m}e.languages.md=e.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(e){var t=e.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};t.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:t},boolean:t.boolean,variable:t.variable}})(Prism);var yne={},vne;function E3t(){return vne||(vne=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),yne}E3t();var xne={},bne;function M3t(){return bne||(bne=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),xne}M3t();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=Prism.languages.swift});var _ne={},wne;function k3t(){return wne||(wne=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),_ne}k3t();var Cne={},Sne;function T3t(){return Sne||(Sne=1,function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,r={pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[r,{pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:r.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+n+/[A-Z]\w*\b/.source),lookbehind:!0,inside:r.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":r,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+n+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:r.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+n+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:r.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Prism)),Cne}T3t();var Ene={},Mne;function N3t(){return Mne||(Mne=1,function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return n})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(Prism)),Ene}N3t();function dSe(e,t){for(const n of e.childNodes){if(Xr(n)&&n.tagName===t)return!0;dSe(n,t)}return!1}const wv="data-language",J0="data-highlight-language",RC="data-theme";let r$=class fSe extends Fo{__language;__theme;__isSyntaxHighlightSupported;static getType(){return"code"}static clone(t){return new fSe(t.__language,t.__key)}constructor(t,n){super(n),this.__language=t||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}afterCloneFrom(t){super.afterCloneFrom(t),this.__language=t.__language,this.__theme=t.__theme,this.__isSyntaxHighlightSupported=t.__isSyntaxHighlightSupported}createDOM(t){const n=document.createElement("code");ec(n,t.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();r&&(n.setAttribute(wv,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(J0,r));const s=this.getTheme();s&&n.setAttribute(RC,s);const a=this.getStyle();return a&&n.setAttribute("style",a),n}updateDOM(t,n,r){const s=this.__language,a=t.__language;s?s!==a&&n.setAttribute(wv,s):a&&n.removeAttribute(wv);const i=this.__isSyntaxHighlightSupported;t.__isSyntaxHighlightSupported&&a?i&&s?s!==a&&n.setAttribute(J0,s):n.removeAttribute(J0):i&&s&&n.setAttribute(J0,s);const l=this.__theme,c=t.__theme;l?l!==c&&n.setAttribute(RC,l):c&&n.removeAttribute(RC);const u=this.__style,d=t.__style;return u?u!==d&&n.setAttribute("style",u):d&&n.removeAttribute("style"),!1}exportDOM(t){const n=document.createElement("pre");ec(n,t._config.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();r&&(n.setAttribute(wv,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(J0,r));const s=this.getTheme();s&&n.setAttribute(RC,s);const a=this.getStyle();return a&&n.setAttribute("style",a),{element:n}}static importDOM(){return{code:t=>t.textContent!=null&&(/\r?\n/.test(t.textContent)||dSe(t,"BR"))?{conversion:kne,priority:1}:null,div:()=>({conversion:j3t,priority:1}),pre:()=>({conversion:kne,priority:0}),table:t=>UA(t)?{conversion:A3t,priority:3}:null,td:t=>{const n=t,r=n.closest("table");return n.classList.contains("js-file-line")||r&&UA(r)?{conversion:Tne,priority:3}:null},tr:t=>{const n=t.closest("table");return n&&UA(n)?{conversion:Tne,priority:3}:null}}}static importJSON(t){return Gc().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language).setTheme(t.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(t,n=!0){const r=this.getChildren(),s=r.length;if(s>=2&&r[s-1].getTextContent()===`
`&&r[s-2].getTextContent()===`
`&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===s){r[s-1].remove(),r[s-2].remove();const c=Cr();return this.insertAfter(c,n),c}const{anchor:a,focus:i}=t,l=(a.isBefore(i)?a:i).getNode();if(Je(l)){let c=R3t(l);const u=[];for(;;)if(Ek(c))u.push(N_()),c=c.getNextSibling();else{if(!gSe(c))break;{let v=0;const x=c.getTextContent(),b=c.getTextContentSize();for(;v<b&&x[v]===" ";)v++;if(v!==0&&u.push(hSe(" ".repeat(v))),v!==b)break;c=c.getNextSibling()}}const d=l.splitText(a.offset)[0],m=a.offset===0?0:1,p=d.getIndexWithinParent()+m,h=l.getParentOrThrow(),g=[Do(),...u];h.splice(p,0,g);const y=u[u.length-1];y?y.select():a.offset===0?d.selectPrevious():d.getNextSibling().selectNext(0,0)}if(s$(l)){const{offset:c}=t.anchor;l.splice(c,0,[Do()]),l.select(c+1,c+1)}return null}canIndent(){return!1}collapseAtStart(){const t=Cr();return this.getChildren().forEach(n=>t.append(n)),this.replace(t),!0}setLanguage(t){const n=this.getWritable();return n.__language=t||void 0,n}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(t){const n=this.getWritable();return n.__isSyntaxHighlightSupported=t,n}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(t){const n=this.getWritable();return n.__theme=t||void 0,n}getTheme(){return this.getLatest().__theme}};function Gc(e,t){return ACe(r$).setLanguage(e).setTheme(t)}function s$(e){return e instanceof r$}function kne(e){return{node:Gc(e.getAttribute(wv))}}function j3t(e){const t=e,n=Nne(t);return n||function(r){let s=r.parentElement;for(;s!==null;){if(Nne(s))return!0;s=s.parentElement}return!1}(t)?{node:n?Gc():null}:{node:null}}function A3t(){return{node:Gc()}}function Tne(){return{node:null}}function Nne(e){return e.style.fontFamily.match("monospace")!==null}function UA(e){return e.classList.contains("js-file-line-container")}let mSe=class pSe extends uc{__highlightType;constructor(t="",n,r){super(t,r),this.__highlightType=n}static getType(){return"code-highlight"}static clone(t){return new pSe(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){const n=this.getWritable();return n.__highlightType=t||void 0,n}canHaveFormat(){return!1}createDOM(t){const n=super.createDOM(t),r=BA(t.theme,this.__highlightType);return ec(n,r),n}updateDOM(t,n,r){const s=super.updateDOM(t,n,r),a=BA(r.theme,t.__highlightType),i=BA(r.theme,this.__highlightType);return a!==i&&(a&&QV(n,a),i&&ec(n,i)),s}static importJSON(t){return hSe().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return Gc()}};function BA(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function hSe(e="",t){return wi(new mSe(e,t))}function gSe(e){return e instanceof mSe}function I3t(e,t){let n=e;for(let r=Vs(e,t);r&&(gSe(r.origin)||Ek(r.origin));r=F5t(r))n=r.origin;return n}function R3t(e){return I3t(e,"previous")}(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],s=[];/^\w+$/.test(n)||s.push(/\w+/.exec(n)[0]),n==="diff"&&s.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:s,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);function D9(e,t){const n={};for(const r of e){const s=t(r);s&&(n[s]?n[s].push(r):n[s]=[r])}return n}function ySe(e){const t=D9(e,n=>n.type);return{element:t.element||[],multilineElement:t["multiline-element"]||[],textFormat:t["text-format"]||[],textMatch:t["text-match"]||[]}}const tM=/[!-/:-@[-`{-~\s]/,P3t=/^\s{0,3}$/;function O3t(e){if(!md(e))return!1;const t=e.getFirstChild();return t==null||e.getChildrenSize()===1&&Je(t)&&P3t.test(t.getTextContent())}function L3t(e,t){const n=function(s,a){const i=s.match(a.openTagsRegExp);if(i==null)return null;for(const l of i){const c=l.replace(/^\s/,""),u=a.fullMatchRegExpByTag[c];if(u==null)continue;const d=s.match(u),m=a.transformersByTag[c];if(d!=null&&m!=null){if(m.intraword!==!1)return d;const{index:p=0}=d,h=s[p-1],g=s[p+d[0].length];if((!h||tM.test(h))&&(!g||tM.test(g)))return d}}return null}(e.getTextContent(),t);if(!n)return null;const r=n.index||0;return{endIndex:r+n[0].length,match:n,startIndex:r,transformer:t.transformersByTag[n[1]]}}function Af(e){return Je(e)&&!e.hasFormat("code")}function If(e,t,n){let r=L3t(e,t),s=function(i,l){const c=i;let u,d,m,p;for(const h of l){if(!h.replace||!h.importRegExp)continue;const g=c.getTextContent().match(h.importRegExp);if(!g)continue;const y=g.index||0,v=h.getEndIndex?h.getEndIndex(c,g):y+g[0].length;v!==!1&&(u===void 0||d===void 0||y<u&&v>d)&&(u=y,d=v,m=h,p=g)}return u===void 0||d===void 0||m===void 0||p===void 0?null:{endIndex:d,match:p,startIndex:u,transformer:m}}(e,n);if(r&&s&&(r.startIndex<=s.startIndex&&r.endIndex>=s.endIndex||s.startIndex>r.endIndex?s=null:r=null),r){const i=function(l,c,u,d,m){const p=l.getTextContent();let h,g,y;if(m[0]===p?h=l:c===0?[h,g]=l.splitText(u):[y,h,g]=l.splitText(c,u),h.setTextContent(m[2]),d)for(const v of d.format)h.hasFormat(v)||h.toggleFormat(v);return{nodeAfter:g,nodeBefore:y,transformedNode:h}}(e,r.startIndex,r.endIndex,r.transformer,r.match);Af(i.nodeAfter)&&If(i.nodeAfter,t,n),Af(i.nodeBefore)&&If(i.nodeBefore,t,n),Af(i.transformedNode)&&If(i.transformedNode,t,n)}else if(s){const i=function(l,c,u,d,m){let p,h,g;return c===0?[p,h]=l.splitText(u):[g,p,h]=l.splitText(c,u),d.replace?{nodeAfter:h,nodeBefore:g,transformedNode:d.replace(p,m)||void 0}:null}(e,s.startIndex,s.endIndex,s.transformer,s.match);if(!i)return;Af(i.nodeAfter)&&If(i.nodeAfter,t,n),Af(i.nodeBefore)&&If(i.nodeBefore,t,n),Af(i.transformedNode)&&If(i.transformedNode,t,n)}const a=e.getTextContent().replace(/\\([*_`~\\])/g,"$1").replace(/&#(\d+);/g,(i,l)=>String.fromCodePoint(l));e.setTextContent(a)}function D3t(e,t=!1){const n=ySe(e),r=function(s){const a={},i={},l=[],c="(?<![\\\\])";for(const u of s){const{tag:d}=u;a[d]=u;const m=d.replace(/(\*|\^|\+)/g,"\\$1");l.push(m),d.length===1?i[d]=new RegExp(`(?<![\\\\${m}])(${m})((\\\\${m})?.*?[^${m}\\s](\\\\${m})?)((?<!\\\\)|(?<=\\\\\\\\))(${m})(?![\\\\${m}])`):i[d]=new RegExp(`(?<!\\\\)(${m})((\\\\${m})?.*?[^\\s](\\\\${m})?)((?<!\\\\)|(?<=\\\\\\\\))(${m})(?!\\\\)`)}return{fullMatchRegExpByTag:i,openTagsRegExp:new RegExp(`${c}(${l.join("|")})`,"g"),transformersByTag:a}}(n.textFormat);return(s,a)=>{const i=s.split(`
`),l=i.length,c=a||cr();c.clear();for(let d=0;d<l;d++){const m=i[d],[p,h]=F3t(i,d,n.multilineElement,c);p?d=h:U3t(m,c,n.element,r,n.textMatch,t)}const u=c.getChildren();for(const d of u)!t&&O3t(d)&&c.getChildrenSize()>1&&d.remove();nt()!==null&&c.selectStart()}}function F3t(e,t,n,r){for(const s of n){const{handleImportAfterStartMatch:a,regExpEnd:i,regExpStart:l,replace:c}=s,u=e[t].match(l);if(!u)continue;if(a){const g=a({lines:e,rootNode:r,startLineIndex:t,startMatch:u,transformer:s});if(g===null)continue;if(g)return g}const d=typeof i=="object"&&"regExp"in i?i.regExp:i,m=i&&typeof i=="object"&&"optional"in i?i.optional:!i;let p=t;const h=e.length;for(;p<h;){const g=d?e[p].match(d):null;if(!g&&(!m||m&&p<h-1)){p++;continue}if(g&&t===p&&g.index===u.index){p++;continue}const y=[];if(g&&t===p)y.push(e[t].slice(u[0].length,-g[0].length));else for(let v=t;v<=p;v++)if(v===t){const x=e[v].slice(u[0].length);y.push(x)}else if(v===p&&g){const x=e[v].slice(0,-g[0].length);y.push(x)}else y.push(e[v]);if(c(r,null,u,g,y,!0)!==!1)return[!0,p];break}}return[!1,t]}function U3t(e,t,n,r,s,a){const i=Qn(e),l=Cr();l.append(i),t.append(l);for(const{regExp:c,replace:u}of n){const d=e.match(c);if(d&&(i.setTextContent(e.slice(d[0].length)),u(l,[i],d,!0)!==!1))break}if(If(i,r,s),l.isAttached()&&e.length>0){const c=l.getPreviousSibling();if(!a&&(md(c)||L9(c)||Xn(c))){let u=c;if(Xn(c)){const d=c.getLastDescendant();u=d==null?null:si(d,ea)}u!=null&&u.getTextContentSize()>0&&(u.splice(u.getChildrenSize(),0,[Do(),...l.getChildren()]),l.remove())}}}function B3t(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const vSe=/^(\s*)(\d{1,})\.\s/,xSe=/^(\s*)[-*+]\s/,V3t=/^(\s*)(?:-\s)?\s?(\[(\s|x)?\])\s/i,F9=/^(#{1,6})\s/,bSe=/^>\s/,_Se=/^[ \t]*```([\w-]+)?/,wSe=/[ \t]*```$/,$3t=/^[ \t]*```[^`]+(?:(?:`{1,2}|`{4,})[^`]+)*```(?:[^`]|$)/,W3t=/^(?:\|)(.+)(?:\|)\s?$/,H3t=/^(\| ?:?-*:? ?)+\|\s?$/,CSe=e=>(t,n,r,s)=>{const a=e(r);a.append(...n),t.replace(a),s||a.select(0,0)},SSe=e=>(t,n,r,s)=>{const a=t.getPreviousSibling(),i=t.getNextSibling(),l=pu(e==="check"?r[3]==="x":void 0);if(Xn(i)&&i.getListType()===e){const u=i.getFirstChild();u!==null?u.insertBefore(l):i.append(l),t.remove()}else if(Xn(a)&&a.getListType()===e)a.append(l),t.remove();else{const u=Bl(e,e==="number"?Number(r[2]):void 0);u.append(l),t.replace(u)}l.append(...n),s||l.select(0,0);const c=function(u){const d=u.match(/\t/g),m=u.match(/ /g);let p=0;return d&&(p+=d.length),m&&(p+=Math.floor(m.length/4)),p}(r[1]);c&&l.setIndent(c)},a$=(e,t,n)=>{const r=[],s=e.getChildren();let a=0;for(const i of s)if(ea(i)){if(i.getChildrenSize()===1){const d=i.getFirstChild();if(Xn(d)){r.push(a$(d,t,n+1));continue}}const l=" ".repeat(4*n),c=e.getListType(),u=c==="number"?`${e.getStart()+a}. `:c==="check"?`- [${i.getChecked()?"x":" "}] `:"- ";r.push(l+u+t(i)),a++}return r.join(`
`)},z3t={dependencies:[n$],export:(e,t)=>{if(!C3t(e))return null;const n=Number(e.getTag().slice(1));return"#".repeat(n)+" "+t(e)},regExp:F9,replace:CSe(e=>{const t="h"+e[1].length;return fh(t)}),type:"element"},G3t={dependencies:[e$],export:(e,t)=>{if(!L9(e))return null;const n=t(e).split(`
`),r=[];for(const s of n)r.push("> "+s);return r.join(`
`)},regExp:bSe,replace:(e,t,n,r)=>{if(r){const a=e.getPreviousSibling();if(L9(a))return a.splice(a.getChildrenSize(),0,[Do(),...t]),void e.remove()}const s=t$();s.append(...t),e.replace(s),r||s.select(0,0)},type:"element"},q3t={dependencies:[r$],export:e=>{if(!s$(e))return null;const t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?`
`+t:"")+"\n```"},regExpEnd:{optional:!0,regExp:wSe},regExpStart:_Se,replace:(e,t,n,r,s,a)=>{let i,l;if(!t&&s){if(s.length===1)r?(i=Gc(),l=n[1]+s[0]):(i=Gc(n[1]),l=s[0].startsWith(" ")?s[0].slice(1):s[0]);else{if(i=Gc(n[1]),s[0].trim().length===0)for(;s.length>0&&!s[0].length;)s.shift();else s[0]=s[0].startsWith(" ")?s[0].slice(1):s[0];for(;s.length>0&&!s[s.length-1].length;)s.pop();l=s.join(`
`)}const c=Qn(l);i.append(c),e.append(i)}else t&&CSe(c=>Gc(c?c[1]:void 0))(e,t,n,a)},type:"multiline-element"},K3t={dependencies:[Ok,Pk],export:(e,t)=>Xn(e)?a$(e,t,0):null,regExp:xSe,replace:SSe("bullet"),type:"element"},Y3t={dependencies:[Ok,Pk],export:(e,t)=>Xn(e)?a$(e,t,0):null,regExp:vSe,replace:SSe("number"),type:"element"},Q3t={format:["code"],tag:"`",type:"text-format"},X3t={format:["highlight"],tag:"==",type:"text-format"},Z3t={format:["bold","italic"],tag:"***",type:"text-format"},J3t={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},ekt={format:["bold"],tag:"**",type:"text-format"},tkt={format:["bold"],intraword:!1,tag:"__",type:"text-format"},nkt={format:["strikethrough"],tag:"~~",type:"text-format"},rkt={format:["italic"],tag:"*",type:"text-format"},skt={format:["italic"],intraword:!1,tag:"_",type:"text-format"},akt={dependencies:[Jy],export:(e,t,n)=>{if(!ei(e)||_l(e))return null;const r=e.getTitle(),s=t(e);return r?`[${s}](${e.getURL()} "${r}")`:`[${s}](${e.getURL()})`},importRegExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(e,t)=>{const[,n,r,s]=t,a=Pg(r,{title:s}),i=n.split("[").length-1,l=n.split("]").length-1;let c=n,u="";if(i<l)return;if(i>l){const m=n.split("[");u="["+m[0],c=m.slice(1).join("[")}const d=Qn(c);return d.setFormat(e.getFormat()),a.append(d),e.replace(a),u&&a.insertBefore(Qn(u)),d},trigger:")",type:"text-match"},okt=[z3t,G3t,K3t,Y3t],ikt=[q3t],lkt=[Q3t,Z3t,J3t,ekt,tkt,X3t,rkt,skt,nkt],ESe=[akt],MSe=[...okt,...ikt,...lkt,...ESe];function jne(e,t,n){const r=n.length;for(let s=t;s>=r;s--){const a=s-r;if(kSe(e,a,n,0,r)&&e[a+r]!==" ")return a}return-1}function kSe(e,t,n,r,s){for(let a=0;a<s;a++)if(e[t+a]!==n[r+a])return!1;return!0}function brn(e,t=MSe){const n=ySe(t),r=D9(n.textFormat,({tag:i})=>i[i.length-1]),s=D9(n.textMatch,({trigger:i})=>i);for(const i of t){const l=i.type;if(l==="element"||l==="text-match"||l==="multiline-element"){const c=i.dependencies;for(const u of c)e.hasNode(u)||B3t(173,u.getType())}}const a=(i,l,c)=>{(function(u,d,m,p){const h=u.getParent();if(!Qi(h)||u.getFirstChild()!==d)return!1;const g=d.getTextContent();if(g[m-1]!==" ")return!1;for(const{regExp:y,replace:v}of p){const x=g.match(y);if(x&&x[0].length===(x[0].endsWith(" ")?m:m-1)){const b=d.getNextSiblings(),[_,w]=d.splitText(m);if(v(u,w?[w,...b]:b,x,!1)!==!1)return _.remove(),!0}}return!1})(i,l,c,n.element)||function(u,d,m,p){const h=u.getParent();if(!Qi(h)||u.getFirstChild()!==d)return!1;const g=d.getTextContent();if(g[m-1]!==" ")return!1;for(const{regExpStart:y,replace:v,regExpEnd:x}of p){if(x&&!("optional"in x)||x&&"optional"in x&&!x.optional)continue;const b=g.match(y);if(b&&b[0].length===(b[0].endsWith(" ")?m:m-1)){const _=d.getNextSiblings(),[w,C]=d.splitText(m);if(v(u,C?[C,..._]:_,b,null,null,!1)!==!1)return w.remove(),!0}}return!1}(i,l,c,n.multilineElement)||function(u,d,m){let p=u.getTextContent();const h=m[p[d-1]];if(h==null)return!1;d<p.length&&(p=p.slice(0,d));for(const g of h){if(!g.replace||!g.regExp)continue;const y=p.match(g.regExp);if(y===null)continue;const v=y.index||0,x=v+y[0].length;let b;return v===0?[b]=u.splitText(x):[,b]=u.splitText(v,x),b.selectNext(0,0),g.replace(b,y),!0}return!1}(l,c,s)||function(u,d,m){const p=u.getTextContent(),h=d-1,g=p[h],y=m[g];if(!y)return!1;for(const v of y){const{tag:x}=v,b=x.length,_=h-b+1;if(b>1&&!kSe(p,_,x,0,b)||p[_-1]===" ")continue;const w=p[h+1];if(v.intraword===!1&&w&&!tM.test(w))continue;const C=u;let S=C,E=jne(p,_,x),M=S;for(;E<0&&(M=M.getPreviousSibling())&&!Fl(M);)if(Je(M)){if(M.hasFormat("code"))continue;const j=M.getTextContent();S=M,E=jne(j,j.length,x)}if(E<0||S===C&&E+b===_)continue;const k=S.getTextContent();if(E>0&&k[E-1]===g)continue;const A=k[E-1];if(v.intraword===!1&&A&&!tM.test(A))continue;const R=C.getTextContent(),O=R.slice(0,_)+R.slice(h+1);C.setTextContent(O);const L=S===C?O:k;S.setTextContent(L.slice(0,E)+L.slice(E+b));const P=nt(),N=cCe();ua(N);const T=h-b*(S===C?2:1)+1;N.anchor.set(S.__key,E,"text"),N.focus.set(C.__key,T,"text");for(const j of v.format)N.hasFormat(j)||N.formatText(j);N.anchor.set(N.focus.key,N.focus.offset,N.focus.type);for(const j of v.format)N.hasFormat(j)&&N.toggleFormat(j);return Fe(P)&&(N.format=P.format),!0}}(l,c,r)};return e.registerUpdateListener(({tags:i,dirtyLeaves:l,editorState:c,prevEditorState:u})=>{if(i.has(vCe)||i.has(t5t)||e.isComposing())return;const d=c.read(nt),m=u.read(nt);if(!Fe(m)||!Fe(d)||!d.isCollapsed()||d.is(m))return;const p=d.anchor.key,h=d.anchor.offset,g=c._nodeMap.get(p);!Je(g)||!l.has(p)||h!==1&&h>m.anchor.offset+1||e.update(()=>{if(!Af(g))return;const y=g.getParent();y===null||s$(y)||a(y,g,d.anchor.offset)})})}function U9(e,t=MSe,n,r=!1,s=!1){const a=r?e:function(i,l=!1){const c=i.split(`
`);let u=!1;const d=[];for(let m=0;m<c.length;m++){const p=c[m],h=d[d.length-1];$3t.test(p)?d.push(p):_Se.test(p)||wSe.test(p)?(u=!u,d.push(p)):u||p===""||h===""||!h||F9.test(h)||F9.test(p)||bSe.test(p)||vSe.test(p)||xSe.test(p)||V3t.test(p)||W3t.test(p)||H3t.test(p)||!l?d.push(p):d[d.length-1]=h+p}return d.join(`
`)}(e,s);return D3t(t,r)(a,n)}const TSe=f.createContext(null);function ckt(e,t){return{getTheme:function(){return t??null}}}function hu(){const e=f.useContext(TSe);return e==null&&function(t,...n){const r=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;s.append("code",t);for(const a of n)s.append("v",a);throw r.search=s.toString(),Error(`Minified Lexical error #${t}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),e}function ukt({newTab:e=!0,disabled:t=!1}){const[n]=hu();return f.useEffect(()=>o3t(n,Y5t({disabled:t,newTab:e})),[n,e,t]),null}const NSe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,dkt=NSe?f.useLayoutEffect:f.useEffect,PC={tag:px};function fkt({initialConfig:e,children:t}){const n=f.useMemo(()=>{const{theme:r,namespace:s,nodes:a,onError:i,editorState:l,html:c}=e,u=ckt(null,r),d=NV({editable:e.editable,html:c,namespace:s,nodes:a,onError:m=>i(m,d),theme:r});return function(m,p){if(p!==null){if(p===void 0)m.update(()=>{const h=cr();if(h.isEmpty()){const g=Cr();h.append(g);const y=NSe?document.activeElement:null;(nt()!==null||y!==null&&y===m.getRootElement())&&g.select()}},PC);else if(p!==null)switch(typeof p){case"string":{const h=m.parseEditorState(p);m.setEditorState(h,PC);break}case"object":m.setEditorState(p,PC);break;case"function":m.update(()=>{cr().isEmpty()&&p(m)},PC)}}}(d,l),[d,u]},[]);return dkt(()=>{const r=e.editable,[s]=n;s.setEditable(r===void 0||r)},[]),o.jsx(TSe.Provider,{value:n,children:t})}function mkt(){return cr().getTextContent()}function pkt(e,t=!0){if(e)return!1;let n=mkt();return t&&(n=n.trim()),n===""}function hkt(e){if(!pkt(e,!1))return!1;const t=cr().getChildren(),n=t.length;if(n>1)return!1;for(let r=0;r<n;r++){const s=t[r];if(Ln(s))return!1;if(Ie(s)){if(!md(s)||s.__indent!==0)return!1;const a=s.getChildren(),i=a.length;for(let l=0;l<i;l++){const c=a[r];if(!Je(c))return!1}}}return!0}function jSe(e){return()=>hkt(e)}const ASe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?f.useLayoutEffect:f.useEffect;function gkt({editor:e,ariaActiveDescendant:t,ariaAutoComplete:n,ariaControls:r,ariaDescribedBy:s,ariaErrorMessage:a,ariaExpanded:i,ariaInvalid:l,ariaLabel:c,ariaLabelledBy:u,ariaMultiline:d,ariaOwns:m,ariaRequired:p,autoCapitalize:h,className:g,id:y,role:v="textbox",spellCheck:x=!0,style:b,tabIndex:_,"data-testid":w,...C},S){const[E,M]=f.useState(e.isEditable()),k=f.useCallback(R=>{R&&R.ownerDocument&&R.ownerDocument.defaultView?e.setRootElement(R):e.setRootElement(null)},[e]),A=f.useMemo(()=>function(...R){return O=>{for(const L of R)typeof L=="function"?L(O):L!=null&&(L.current=O)}}(S,k),[k,S]);return ASe(()=>(M(e.isEditable()),e.registerEditableListener(R=>{M(R)})),[e]),o.jsx("div",{"aria-activedescendant":E?t:void 0,"aria-autocomplete":E?n:"none","aria-controls":E?r:void 0,"aria-describedby":s,...a!=null?{"aria-errormessage":a}:{},"aria-expanded":E&&v==="combobox"?!!i:void 0,...l!=null?{"aria-invalid":l}:{},"aria-label":c,"aria-labelledby":u,"aria-multiline":d,"aria-owns":E?m:void 0,"aria-readonly":!E||void 0,"aria-required":p,autoCapitalize:h,className:g,contentEditable:E,"data-testid":w,id:y,ref:A,role:v,spellCheck:x,style:b,tabIndex:_,...C})}const ykt=f.forwardRef(gkt);function Ane(e){return e.getEditorState().read(jSe(e.isComposing()))}const vkt=f.forwardRef(xkt);function xkt(e,t){const{placeholder:n,...r}=e,[s]=hu();return o.jsxs(o.Fragment,{children:[o.jsx(ykt,{editor:s,...r,ref:t}),n!=null&&o.jsx(bkt,{editor:s,content:n})]})}function bkt({content:e,editor:t}){const n=function(i){const[l,c]=f.useState(()=>Ane(i));return ASe(()=>{function u(){const d=Ane(i);c(d)}return u(),Jl(i.registerUpdateListener(()=>{u()}),i.registerEditableListener(()=>{u()}))},[i]),l}(t),[r,s]=f.useState(t.isEditable());if(f.useLayoutEffect(()=>(s(t.isEditable()),t.registerEditableListener(i=>{s(i)})),[t]),!n)return null;let a=null;return typeof e=="function"?a=e(r):e!==null&&(a=e),a===null?null:o.jsx("div",{"aria-hidden":!0,children:a})}const _kt=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?f.useLayoutEffect:f.useEffect;function wkt(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function Ckt(){return function(e){const[t]=hu(),n=f.useMemo(()=>e(t),[t,e]),[r,s]=f.useState(()=>n.initialValueFn()),a=f.useRef(r);return _kt(()=>{const{initialValueFn:i,subscribe:l}=n,c=i();return a.current!==c&&(a.current=c,s(c)),l(u=>{a.current=u,s(u)})},[n,e]),r}(wkt)}const Skt={name:"@lexical/react/ReactProvider"},rp=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Ekt=rp&&"documentMode"in document?document.documentMode:null,Mkt=rp&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),kkt=!(!rp||!("InputEvent"in window)||Ekt)&&"getTargetRanges"in new window.InputEvent("input"),Tkt=rp&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Ine=rp&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Nkt=rp&&/^(?=.*Chrome).*/i.test(navigator.userAgent),jkt=rp&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&Mkt&&!Nkt;function Rne(e,t){t.update(()=>{if(e!==null){const n=Y1(e,KeyboardEvent)?null:e.clipboardData,r=nt();if(r!==null&&n!=null){e.preventDefault();const s=H5t(t);s!==null&&n.setData("text/html",s),n.setData("text/plain",r.getTextContent())}}})}function Akt(e){return Jl(e.registerCommand(Dl,t=>{const n=nt();return!!Fe(n)&&(n.deleteCharacter(t),!0)},hs),e.registerCommand(Mg,t=>{const n=nt();return!!Fe(n)&&(n.deleteWord(t),!0)},hs),e.registerCommand(kg,t=>{const n=nt();return!!Fe(n)&&(n.deleteLine(t),!0)},hs),e.registerCommand(rm,t=>{const n=nt();if(!Fe(n))return!1;if(typeof t=="string")n.insertText(t);else{const r=t.dataTransfer;if(r!=null)nne(r,n);else{const s=t.data;s&&n.insertText(s)}}return!0},hs),e.registerCommand(GE,()=>{const t=nt();return!!Fe(t)&&(t.removeText(),!0)},hs),e.registerCommand(Uh,t=>{const n=nt();return!!Fe(n)&&(n.insertLineBreak(t),!0)},hs),e.registerCommand(p9,()=>{const t=nt();return!!Fe(t)&&(t.insertLineBreak(),!0)},hs),e.registerCommand(Wwe,t=>{const n=nt();if(!Fe(n))return!1;const r=t,s=r.shiftKey;return!!ene(n,!0)&&(r.preventDefault(),tne(n,s,!0),!0)},hs),e.registerCommand($we,t=>{const n=nt();if(!Fe(n))return!1;const r=t,s=r.shiftKey;return!!ene(n,!1)&&(r.preventDefault(),tne(n,s,!1),!0)},hs),e.registerCommand(bV,t=>{const n=nt();return!!Fe(n)&&(!Ine||navigator.language!=="ko-KR")&&(t.preventDefault(),e.dispatchCommand(Dl,!0))},hs),e.registerCommand(_V,t=>{const n=nt();return!!Fe(n)&&(t.preventDefault(),e.dispatchCommand(Dl,!1))},hs),e.registerCommand(Tg,t=>{const n=nt();if(!Fe(n))return!1;if(t!==null){if((Ine||Tkt||jkt)&&kkt)return!1;t.preventDefault()}return e.dispatchCommand(Uh,!1)},hs),e.registerCommand(h9,()=>(u5t(),!0),hs),e.registerCommand(wV,t=>{const n=nt();return!!Fe(n)&&(Rne(t,e),!0)},hs),e.registerCommand(CV,t=>{const n=nt();return!!Fe(n)&&(function(r,s){Rne(r,s),s.update(()=>{const a=nt();Fe(a)&&a.removeText()})}(t,e),!0)},hs),e.registerCommand(T_,t=>{const n=nt();return!!Fe(n)&&(function(r,s){r.preventDefault(),s.update(()=>{const a=nt(),i=Y1(r,ClipboardEvent)?r.clipboardData:null;i!=null&&Fe(a)&&nne(i,a)},{tag:yCe})}(t,e),!0)},hs),e.registerCommand(Kwe,t=>{const n=nt();return!!Fe(n)&&(t.preventDefault(),!0)},hs),e.registerCommand(Ywe,t=>{const n=nt();return!!Fe(n)&&(t.preventDefault(),!0)},hs))}function Ikt(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const o$=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?f.useLayoutEffect:f.useEffect;function Rkt({editor:e,ErrorBoundary:t}){return function(n,r){const[s,a]=f.useState(()=>n.getDecorators());return o$(()=>n.registerDecoratorListener(i=>{Us.flushSync(()=>{a(i)})}),[n]),f.useEffect(()=>{a(n.getDecorators())},[n]),f.useMemo(()=>{const i=[],l=Object.keys(s);for(let c=0;c<l.length;c++){const u=l[c],d=o.jsx(r,{onError:p=>n._onError(p),children:o.jsx(f.Suspense,{fallback:null,children:s[u]})}),m=n.getElementByKey(u);m!==null&&i.push(Us.createPortal(d,m,u))}return i},[r,s,n])}(e,t)}function Pkt({editor:e,ErrorBoundary:t}){return function(n){const r=XCe.maybeFromEditor(n);if(r&&r.hasExtensionByName(Skt.name)){for(const s of["@lexical/plain-text","@lexical/rich-text"])r.hasExtensionByName(s)&&Ikt(320,s);return!0}return!1}(e)?null:o.jsx(Rkt,{editor:e,ErrorBoundary:t})}function Pne(e){return e.getEditorState().read(jSe(e.isComposing()))}function Okt({contentEditable:e,placeholder:t=null,ErrorBoundary:n}){const[r]=hu();return function(s){o$(()=>Jl(Akt(s),b3t(s)),[s])}(r),o.jsxs(o.Fragment,{children:[e,o.jsx(Lkt,{content:t}),o.jsx(Pkt,{editor:r,ErrorBoundary:n})]})}function Lkt({content:e}){const[t]=hu(),n=function(s){const[a,i]=f.useState(()=>Pne(s));return o$(()=>{function l(){const c=Pne(s);i(c)}return l(),Jl(s.registerUpdateListener(()=>{l()}),s.registerEditableListener(()=>{l()}))},[s]),a}(t),r=Ckt();return n?typeof e=="function"?e(r):e:null}const One="startTransition",B9=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Dkt=B9?f.useLayoutEffect:f.useEffect;let Fkt=class{key;ref;constructor(t){this.key=t,this.ref={current:null},this.setRefElement=this.setRefElement.bind(this)}setRefElement(t){this.ref={current:t}}};const Lne=e=>{const t=document.getElementById("typeahead-menu");if(!t)return;const n=t.getBoundingClientRect();n.top+n.height>window.innerHeight&&t.scrollIntoView({block:"center"}),n.top<0&&t.scrollIntoView({block:"center"}),e.scrollIntoView({block:"nearest"})};function Dne(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return n.top>=r.top-6&&n.top<=r.bottom+6}function Ukt(e,t,n,r){const[s]=hu();f.useEffect(()=>{if(t!=null&&e!=null){const a=s.getRootElement(),i=a!=null?function(m,p){let h=getComputedStyle(m);const g=h.position==="absolute",y=/(auto|scroll)/;if(h.position==="fixed")return document.body;for(let v=m;v=v.parentElement;)if(h=getComputedStyle(v),(!g||h.position!=="static")&&y.test(h.overflow+h.overflowY+h.overflowX))return v;return document.body}(a):document.body;let l=!1,c=Dne(t,i);const u=function(){l||(window.requestAnimationFrame(function(){n(),l=!1}),l=!0);const m=Dne(t,i);m!==c&&(c=m,r?.(m))},d=new ResizeObserver(n);return window.addEventListener("resize",n),document.addEventListener("scroll",u,{capture:!0,passive:!0}),d.observe(t),()=>{d.unobserve(t),window.removeEventListener("resize",n),document.removeEventListener("scroll",u,!0)}}},[t,s,r,n,e])}const Fne=Yt("SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND");function Bkt({close:e,editor:t,anchorElementRef:n,resolution:r,options:s,menuRenderFn:a,onSelectOption:i,shouldSplitNodeWithQuery:l=!1,commandPriority:c=G1,preselectFirstItem:u=!0}){const[d,m]=f.useState(null),p=r.match&&r.match.matchingString;f.useEffect(()=>{u&&m(0)},[p,u]);const h=f.useCallback(y=>{t.update(()=>{const v=r.match!=null&&l?function(x){const b=nt();if(!Fe(b)||!b.isCollapsed())return null;const _=b.anchor;if(_.type!=="text")return null;const w=_.getNode();if(!w.isSimpleText())return null;const C=_.offset,S=w.getTextContent().slice(0,C),E=x.replaceableString.length,M=C-function(A,R,O){let L=O;for(let P=L;P<=R.length;P++)A.slice(-P)===R.substring(0,P)&&(L=P);return L}(S,x.matchingString,E);if(M<0)return null;let k;return M===0?[k]=w.splitText(C):[,k]=w.splitText(M,C),k}(r.match):null;i(y,v,e,r.match?r.match.matchingString:"")})},[t,l,r.match,i,e]),g=f.useCallback(y=>{const v=t.getRootElement();v!==null&&(v.setAttribute("aria-activedescendant","typeahead-item-"+y),m(y))},[t]);return f.useEffect(()=>()=>{const y=t.getRootElement();y!==null&&y.removeAttribute("aria-activedescendant")},[t]),Dkt(()=>{s===null?m(null):d===null&&u&&g(0)},[s,d,g,u]),f.useEffect(()=>Jl(t.registerCommand(Fne,({option:y})=>!(!y.ref||y.ref.current==null)&&(Lne(y.ref.current),!0),c)),[t,g,c]),f.useEffect(()=>Jl(t.registerCommand(zwe,y=>{const v=y;if(s!==null&&s.length){const x=d===null?0:d!==s.length-1?d+1:0;g(x);const b=s[x];b.ref!=null&&b.ref.current&&t.dispatchCommand(Fne,{index:x,option:b}),v.preventDefault(),v.stopImmediatePropagation()}return!0},c),t.registerCommand(Hwe,y=>{const v=y;if(s!==null&&s.length){const x=d===null?s.length-1:d!==0?d-1:s.length-1;g(x);const b=s[x];b.ref!=null&&b.ref.current&&Lne(b.ref.current),v.preventDefault(),v.stopImmediatePropagation()}return!0},c),t.registerCommand(Gwe,y=>{const v=y;return v.preventDefault(),v.stopImmediatePropagation(),e(),!0},c),t.registerCommand(qwe,y=>{const v=y;return s!==null&&d!==null&&s[d]!=null&&(v.preventDefault(),v.stopImmediatePropagation(),h(s[d]),!0)},c),t.registerCommand(Tg,y=>s!==null&&d!==null&&s[d]!=null&&(y!==null&&(y.preventDefault(),y.stopImmediatePropagation()),h(s[d]),!0),c)),[h,e,t,s,d,g,c]),a(n,f.useMemo(()=>({options:s,selectOptionAndCleanUp:h,selectedIndex:d,setHighlightedIndex:m}),[h,d,s]),r.match?r.match.matchingString:"")}function Une(e,t){t!=null&&(e.className=t),e.setAttribute("aria-label","Typeahead menu"),e.setAttribute("role","listbox"),e.style.display="block",e.style.position="absolute"}function Vkt({options:e,onQueryChange:t,onSelectOption:n,onOpen:r,onClose:s,menuRenderFn:a,triggerFn:i,anchorClassName:l,commandPriority:c=G1,parent:u,preselectFirstItem:d=!0,ignoreEntityBoundary:m=!1}){const[p]=hu(),[h,g]=f.useState(null),y=function(b,_,w,C=B9?document.body:void 0,S=!0){const[E]=hu(),M=B9?document.createElement("div"):null,k=f.useRef(M),A=f.useCallback(()=>{if(k.current===null||C===void 0)return;k.current.style.top=k.current.style.bottom;const O=E.getRootElement(),L=k.current,P=L.firstChild;if(O!==null&&b!==null){const{left:N,top:T,width:j,height:F}=b.getRect(),U=k.current.offsetHeight;if(L.style.top=`${T+U+3+(S?window.pageYOffset:0)}px`,L.style.left=`${N+window.pageXOffset}px`,L.style.height=`${F}px`,L.style.width=`${j}px`,P!==null){P.style.top=`${T}`;const V=P.getBoundingClientRect(),$=V.height,z=V.width,Q=O.getBoundingClientRect();N+z>Q.right&&(L.style.left=`${Q.right-z+window.pageXOffset}px`),(T+$>window.innerHeight||T+$>Q.bottom)&&T-Q.top>$+F&&(L.style.top=`${T-$-F+(S?window.pageYOffset:0)}px`)}L.isConnected||(Une(L,w),C.append(L)),L.setAttribute("id","typeahead-menu"),O.setAttribute("aria-controls","typeahead-menu")}},[E,b,S,w,C]);f.useEffect(()=>{const O=E.getRootElement();return b!==null&&A(),()=>{O!==null&&O.removeAttribute("aria-controls");const L=k.current;L!==null&&L.isConnected&&(L.remove(),L.removeAttribute("id"))}},[E,A,b]);const R=f.useCallback(O=>{b!==null&&(O||_(null))},[b,_]);return Ukt(b,k.current,A,R),M!=null&&M===k.current&&(Une(M,w),C?.append(M)),k}(h,g,l,u),v=f.useCallback(()=>{g(null),s!=null&&h!==null&&s()},[s,h]),x=f.useCallback(b=>{g(b),r!=null&&h===null&&r(b)},[r,h]);return f.useEffect(()=>{const b=p.registerUpdateListener(()=>{p.getEditorState().read(()=>{if(!p.isEditable())return void v();const _=p._window||window,w=_.document.createRange(),C=nt(),S=function(k){let A=null;return k.getEditorState().read(()=>{const R=nt();Fe(R)&&(A=function(O){const L=O.anchor;if(L.type!=="text")return null;const P=L.getNode();if(!P.isSimpleText())return null;const N=L.offset;return P.getTextContent().slice(0,N)}(R))}),A}(p);if(!Fe(C)||!C.isCollapsed()||S===null||w===null)return void v();const E=i(S,p);if(t(E?E.matchingString:null),E!==null&&(m||!function(k,A){return A===0&&k.getEditorState().read(()=>{const R=nt();if(Fe(R)){const O=R.anchor.getNode().getPreviousSibling();return Je(O)&&O.isTextEntity()}return!1})}(p,E.leadOffset))&&function(A,R,O){const L=Zl(O);if(L===null||!L.isCollapsed)return!1;const P=L.anchorNode,N=A,T=L.anchorOffset;if(P==null||T==null)return!1;try{R.setStart(P,N),R.setEnd(P,T)}catch{return!1}return!0}(E.leadOffset,w,_)!==null)return M=()=>x({getRect:()=>w.getBoundingClientRect(),match:E}),void(One in I?I[One](M):M());var M;v()})});return()=>{b()}},[p,i,t,h,v,x,m]),f.useEffect(()=>p.registerEditableListener(b=>{b||v()}),[p,v]),h===null||p===null||y.current===null?null:o.jsx(Bkt,{close:v,resolution:h,editor:p,anchorElementRef:y,options:e,menuRenderFn:a,shouldSplitNodeWithQuery:!0,onSelectOption:n,commandPriority:c,preselectFirstItem:d})}const VA=245,$A=240,i$=100,l$=["@","/"].join(""),ISe=`\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'"~=<>_:;`,RSe="[^"+l$+ISe+"\\s]",$kt="(?:\\.[ |$]| |["+ISe+"]|)",PSe=new RegExp("(^|\\s|\\()(["+l$+"]((?:"+RSe+$kt+"){0,"+i$+"}))$"),OSe=new RegExp("(^|\\s|\\()(["+l$+"]((?:"+RSe+"){0,"+i$+"}))$"),Wkt=10,Hkt={shortcut:5},c$=250,Bne={tab:0,file:1,space:2,shortcuts:3};function zkt(e,t){let n=PSe.exec(e);if(n===null&&(n=OSe.exec(e)),n!==null){const r=n[1],s=n[3];if(s.length>=t)return{leadOffset:n.index+r.length,matchingString:s,replaceableString:n[2]}}return null}class Gkt extends Fkt{uuid;variant;label;url;src;emoji;queryText;action;convertToNode;isAlwaysVisible;rightElement;className;constructor(t,n,r,s,a,i,l,c,u,d,m,p,h){super(t),this.uuid=n,this.variant=r,this.label=s,this.url=a,this.src=i,this.emoji=l,this.queryText=c,this.action=u,this.convertToNode=d,this.isAlwaysVisible=m,this.rightElement=p,this.className=h}}const LSe=I.memo(({options:e,onOpen:t=kn,onClose:n=kn,onTrigger:r=kn,ref:s})=>{const{$t:a}=Z(),[i]=hu(),[l,c]=f.useState(!1),[u,d]=f.useState(null),[m,p]=f.useState(null),[h,g]=f.useState(!1),y=f.useCallback(()=>g(!0),[]),v=f.useCallback(()=>g(!1),[]),x=f.useCallback(()=>{c(!0),t()},[t]),b=f.useCallback(()=>{c(!1),d(null),n()},[n]),_=f.useCallback(R=>{switch(R){case"tab":return a({defaultMessage:"Tabs",id:"M56d6aRPai"});case"file":return a({defaultMessage:"Files",id:"m4vqJl0/FT"});case"space":return a({defaultMessage:"Spaces",id:"ZMoczsYew9"});case"shortcut":return a({defaultMessage:"Shortcuts",id:"7FAwwkYilD"});case"connector":return a({defaultMessage:"Connectors",id:"2mMJRvsAg1"});default:return R.toLocaleUpperCase()}},[a]);f.useEffect(()=>i.registerRootListener((R,O)=>{R&&(R.addEventListener("focus",y),R.addEventListener("blur",v)),O&&(O.removeEventListener("focus",y),O.removeEventListener("blur",v))}),[i,v,y]);const w=f.useMemo(()=>{const R=m?.toLocaleLowerCase().trim();if(u==="/"&&m?.includes(" "))return[];const O=e.filter(T=>R?T.label.toLowerCase().includes(R)||T.url?.includes(R)||T.isAlwaysVisible:!0).sort((T,j)=>(Bne[T.variant]??Number.MAX_SAFE_INTEGER)-(Bne[j.variant]??Number.MAX_SAFE_INTEGER));let L="",P=0;const N=[];return O.forEach(T=>{T.variant!==L&&(L=T.variant,P=0);const j=Hkt[L]??Wkt;P>=j&&!T.isAlwaysVisible||(N.push(T),P+=1)}),N.map(T=>new Gkt(T.uuid,T.uuid,T.variant,T.label,T.url,T.src,T.emoji,T.queryText,T.action,T.convertToNode,T.isAlwaysVisible,T.rightElement,T.className))},[m,u,e]),C=f.useMemo(()=>w.some(R=>R.convertToNode===void 0||R.convertToNode),[w]),S=f.useCallback(R=>{p(R)},[]),E=f.useCallback(R=>{const O=zkt(R,0);return O?.replaceableString?.[0]&&(d(O.replaceableString[0]),r(O.replaceableString[0])),O},[r]),M=f.useCallback((R,O,L,P)=>{let N="";const T=[];return R.forEach((j,F)=>{j.variant!==N&&(N=j.variant,T.push({type:"separator",show:!0,text:_(N)})),T.push({type:"default",text:j.label,className:j.className,focused:F===O,customTextNode:o.jsx(D,{variant:"small",children:o.jsx(u$,{text:j.label,src:j.src,emoji:j.emoji,mentionVariant:j.variant,truncate:j.rightElement?"small":"medium",variant:"extraSmall",iconClassName:"mx-1 relative top-[-1.25px] h-4 w-4",emojiClassName:"mx-1 pl-[2px] align-middle shrink-0"})}),tooltipText:fg(j.queryText??"",c$),onMouseMove:()=>{P(F)},onMouseDown:U=>{U.preventDefault(),P(F),L(j)},rightElement:j.rightElement?.({focused:F===O}),preserveRightElementSpace:!j.rightElement})}),T},[_]),k=f.useCallback((R,O,L)=>{if(R.action&&(setTimeout(()=>{R.action?.()},0),R.convertToNode===!1)){L();return}i.update(()=>{const P=d$({uuid:R.uuid,variant:R.variant,text:R.label,url:R.url,src:R.src,emoji:R.emoji,queryText:R.queryText});O&&O.replace(P);const N=Qn(" ");P.insertAfter(N),N.selectEnd(),L()})},[i]),A=f.useCallback((R,{selectedIndex:O,selectOptionAndCleanUp:L,setHighlightedIndex:P})=>{const N=()=>{if(!R.current)return{isTop:!1,leftOffset:0};const F=R.current.getBoundingClientRect(),V=window.innerHeight-F.bottom<VA&&F.top>VA;let $=0;const z=F.left+$A;return z>window.innerWidth&&($=window.innerWidth-z-16),F.left+$<16&&($=16-F.left),{isTop:V,leftOffset:$}},{isTop:T,leftOffset:j}=N();return R.current&&w.length?Us.createPortal(o.jsx(jD,{removeScrollBar:!1,enabled:!0,children:o.jsx(H,{variant:m5.background,className:"shadow-overlay p-xs scrollable-container scrollbar overflow-y-auto overflow-x-hidden rounded-xl [scrollbar-gutter:stable]",style:{width:$A,minWidth:$A,maxHeight:VA,...T&&{bottom:"48px",position:"absolute"},...j!==0&&{left:`${j}px`,position:"absolute"}},children:o.jsx(Md,{items:M(w,C?O??-1:-1,L,P),disableScrollArea:!0,disableHoverStyles:C})})}),R.current):null},[w,M,C]);return f.useImperativeHandle(s,()=>({canSubmit:()=>!l||!C}),[l,C]),h?o.jsx(Vkt,{onQueryChange:S,onSelectOption:k,triggerFn:E,preselectFirstItem:C,onOpen:x,onClose:b,options:w,menuRenderFn:A}):null});LSe.displayName="MentionsPlugin";const qkt=Object.freeze(Object.defineProperty({__proto__:null,AtSignMentionsRegex:PSe,AtSignMentionsRegexAliasRegex:OSe,LENGTH_LIMIT:i$,TOOLTIP_MAX_NUM_CHARACTERS:c$,default:LSe},Symbol.toStringTag,{value:"Module"})),u$=I.memo(({className:e,textClassName:t,iconClassName:n,emojiClassName:r,text:s,src:a,color:i,truncate:l,variant:c,emoji:u,mentionVariant:d,tooltipText:m})=>{const p=f.useMemo(()=>{let h;try{h=u?String.fromCodePoint(parseInt(u,16)):null}catch{h=null}return d==="space"?h?o.jsx("span",{className:B("inline-block select-none",r),children:h}):o.jsx(ce,{icon:eo,className:B("text-quiet inline-block shrink-0 rounded-sm",n)}):a?o.jsx("i",{className:B("inline-block shrink-0 select-none rounded-sm bg-cover bg-center bg-no-repeat",n),style:{backgroundImage:`url(${a})`,fontSize:"0.78rem"}}):null},[n,r,d,a,u]);return o.jsx(bn,{tooltipText:m,showTooltip:!!m,children:o.jsxs("span",{className:B("inline-flex min-w-0 items-center align-top",{"max-w-[168px]":l==="small","max-w-[208px]":l==="medium","max-w-[250px]":l==="large"},e),spellCheck:!1,children:[p,o.jsx(D,{className:B("inline-block min-w-0 truncate",t),color:i,as:"span",variant:c,children:s})]})})});u$.displayName="MentionNodeTextContent";const DSe=I.memo(e=>o.jsx(u$,{...e,className:"px-sm border-subtlest bg-subtler dark:bg-subtle rounded-md border-[0.2px]",textClassName:"leading-[1.3]",iconClassName:"mr-1 h-[0.88rem] w-[0.88rem]",emojiClassName:"mr-1 text-[0.80rem]",truncate:"large"}));DSe.displayName="MentionNodeDecorator";function Kkt(e){const t=e.textContent,n=e.getAttribute("data-mention-uuid"),r=e.getAttribute("data-mention-variant"),s=e.getAttribute("data-mention-url")??void 0,a=e.getAttribute("data-mention-src")??void 0,i=e.getAttribute("data-mention-emoji")??void 0,l=e.getAttribute("data-mention-query-text")??void 0;return t!==null&&n!==null&&r!==null?{node:d$({uuid:n,variant:r,text:t,url:s,src:a,emoji:i,queryText:l})}:null}class Lk extends Tk{__props;static getType(){return"mention"}static clone(t){return new Lk(t.__props,t.__key)}static importJSON(t){return d$(t.props).updateFromJSON(t)}constructor(t,n){super(n),this.__props=t}exportJSON(){return{...super.exportJSON(),props:this.__props}}createDOM(){return document.createElement("span")}isIsolated(){return!0}updateDOM(){return!1}decorate(){return o.jsx(DSe,{text:this.__props.text,src:this.__props.src,emoji:this.__props.emoji,mentionVariant:this.__props.variant,tooltipText:fg(this.__props.queryText??"",c$)})}getTextContent(){switch(this.__props.variant){case"space":return"";case"shortcut":return this.__props.queryText??"";case"tab":return this.__props.url?`[${this.__props.text||this.__props.url}](${this.__props.url})`:this.__props.text;default:return this.__props.text}}exportDOM(){const t=document.createElement("span");return t.setAttribute("data-mention-uuid",this.__props.uuid),t.setAttribute("data-mention-variant",this.__props.variant),t.setAttribute("data-mention-url",this.__props.url??""),t.setAttribute("data-mention-src",this.__props.src??""),t.setAttribute("data-mention-emoji",this.__props.emoji??""),t.textContent=this.__props.text,{element:t}}static importDOM(){return{span:t=>!t.hasAttribute("data-mention-uuid")||!t.hasAttribute("data-mention-variant")?null:{conversion:Kkt,priority:4}}}}function d$(e){return wi(new Lk(e))}const FSe=[Lk,ZV,Jy],YS=[...ESe],V9=(()=>{try{return new RegExp("(?<![-.+():%])"),!0}catch{return!1}})(),Dk=e=>{if(!e)return"";const n=NV({namespace:"text-value",nodes:FSe});return n.update(()=>{const r=cr();r.clear(),V9?U9(e,YS,void 0,!0):r.append(Cr().append(Qn(e)))},{discrete:!0}),n.read(()=>cr().getTextContent())},ev=e=>{if(!e||!e.root)return"";const t=n=>{let r="";if(n.type==="text"&&"text"in n)r=n.text;else if(n.type==="linebreak")r=`
`;else{if((n.type==="link"||n.type==="autolink")&&"url"in n)return r=`[${"children"in n&&Array.isArray(n.children)&&n.children.map(t).reduce((a,i)=>(a+=i,a),"")||""}](${n.url})`,r;if(n.type==="mention"){const a=n.props;if(a.variant==="tab")return r=`[${a.text||a.url}](${a.url})`,r;if(a.variant==="space")return r="",r;if(a.variant==="shortcut")return r=a.queryText??"",r}}return"children"in n&&Array.isArray(n.children)?n.children.map(t).reduce((s,a)=>(s+=a,s),r):r};return t(e.root)},qr={outerWrapper:{base:["bg-raised","w-full","outline-none","flex","items-center","border","rounded-2xl"],darkMode:"dark:bg-offset",transition:"duration-75 transition-all"},inputWrapper:{base:"overflow-hidden relative flex h-full w-full",expanded:["col-start-1","col-end-4","pb-3"],compact:["flex-grow","flex-shrink","p-sm","order-1"],disabled:"opacity-50 pointer-events-none cursor-not-allowed"},inputElement:["overflow-auto","max-h-[45vh]","lg:max-h-[40vh]","sm:max-h-[25vh]","outline-none","font-sans","resize-none","caret-super","selection:bg-super/30","selection:text-foreground","dark:selection:bg-super/10","dark:selection:text-super","text-foreground","bg-transparent","placeholder-quieter","placeholder:select-none","scrollbar-subtle"],attribution:{left:{base:["gap-sm","flex"],expanded:"col-start-1 row-start-2 -ml-two",compact:"order-0 ml-px"},right:{base:["flex","items-center","justify-self-end"],expanded:"col-start-3 row-start-2",compact:"order-2 mr-px"}},placeholder:{base:["absolute","inset-0","pointer-events-none","select-none","text-quieter"],compact:"p-sm"}},Ykt=({isActive:e,isHighlighted:t})=>t?"border-super dark:border-super/85":e?"border-subtle":"border-subtler",Qkt=({hasShadow:e,hasQuote:t})=>e&&!t?"shadow-sm dark:shadow-md shadow-super/10 dark:shadow-black/10":"",USe=I.memo(({quote:e,onClear:t})=>e?o.jsx("div",{className:"py-sm bg-subtler dark:bg-base animate-slideDownAndFadeIn z-[49] mx-3 rounded-lg px-3",children:o.jsxs("div",{className:"gap-sm flex items-start",children:[o.jsx(D,{color:"light",className:"mt-px flex items-center pt-1",variant:"tinyRegular",children:o.jsx(ce,{icon:A8e,size:"xs",className:"rotate-180"})}),o.jsx(D,{className:"py-xs line-clamp-3 flex-1 overflow-hidden text-ellipsis",variant:"tinyRegular",color:"light",children:e}),o.jsx("div",{className:"shrink-0",children:o.jsx(Te,{icon:Rt,onClick:t,size:"tiny",pill:!0,toolTip:"Clear quote"})})]})}):null);USe.displayName="QuotePreview";const Xkt=ye(async()=>{const{HistoryPlugin:e}=await K(async()=>{const{HistoryPlugin:t}=await import("./LexicalHistoryPlugin.prod-B_L1vLOK.js");return{HistoryPlugin:t}},__vite__mapDeps([103,3,1,6,5,4]));return{default:e}}),Zkt=ye(async()=>{const{OnChangePlugin:e}=await K(async()=>{const{OnChangePlugin:t}=await import("./OnChangePlugin-CXowRJeK.js");return{OnChangePlugin:t}},__vite__mapDeps([104,3,1,6,5,4]));return{default:e}}),Jkt=ye(async()=>{const{EditorRefPlugin:e}=await K(async()=>{const{EditorRefPlugin:t}=await import("./LexicalEditorRefPlugin.prod-DQb6250Q.js");return{EditorRefPlugin:t}},__vite__mapDeps([105,3,1,6,5,4]));return{default:e}}),eTt=ye(async()=>{const{default:e}=await K(async()=>{const{default:t}=await Promise.resolve().then(()=>qkt);return{default:t}},void 0);return{default:e}}),tTt=ye(async()=>{const{default:e}=await K(async()=>{const{default:t}=await import("./AutoLinkPlugin-DuYcql8C.js");return{default:t}},__vite__mapDeps([106,3,1,6,5,4]));return{default:e}}),nTt=ye(async()=>{const{default:e}=await K(async()=>{const{default:t}=await import("./LinkPlugin-Djn8lFwl.js");return{default:t}},__vite__mapDeps([107,3,1,6,5,4]));return{default:e}}),rTt=ye(async()=>{const{MarkdownShortcutPlugin:e}=await K(async()=>{const{MarkdownShortcutPlugin:t}=await import("./LexicalMarkdownShortcutPlugin.prod-8pofusBH.js");return{MarkdownShortcutPlugin:t}},__vite__mapDeps([108,3,1,6,5,4]));return{default:e}});function sTt(e,t){switch(t.type){case"SET_EXPANDED":return{...e,isExpanded:t.payload};case"SET_ACTIVE":return{...e,isActive:t.payload};case"SET_COMPOSING":return{...e,isComposing:t.payload};default:return e}}const P_=Wt("ResizableInputContext",{state:{isExpanded:!0,isActive:!1,isComposing:!1},dispatch:()=>{}}),BSe=(e,t,n,r,s)=>{f.useEffect(()=>{const a=n?15:40;e&&e.length>a||e?.includes(`
`)?s(!0):r!==(t==="expanded")&&s(t==="expanded")},[e,t,n,r,s])},Fk=I.memo(({initialLayout:e="expanded",wrapperClass:t,size:n,hasShadow:r,isHighlighted:s,quote:a,setQuote:i,attachmentsList:l,inputWarnings:c,children:u,inputRef:d,ref:m})=>{const[p,h]=f.useReducer(sTt,{isExpanded:e==="expanded",isActive:!1,isComposing:!1}),{isActive:g,isExpanded:y}=p,v=f.useMemo(()=>{const w=Ykt({isActive:g,isHighlighted:s}),C=Qkt({hasShadow:r,hasQuote:!!a});return B(...qr.outerWrapper.base,qr.outerWrapper.darkMode,qr.outerWrapper.transition,t,w,C,{"px-0 pt-3 pb-3":n==="large"&&y,"py-sm px-0":n==="large"&&!y})},[g,t,r,a,n,y,s]),x=f.useCallback(()=>d?.current?.focus(),[d]),b=f.useCallback(w=>{const C=w.target,S=d?.current?.element();S&&C!==S&&!S.contains(C)&&w.preventDefault()},[d]),_=f.useCallback(()=>i?.(null),[i]);return o.jsx(P_.Provider,{value:{state:p,dispatch:h},children:o.jsx("div",{className:"relative rounded-2xl",ref:m,onClick:x,onMouseDownCapture:b,children:o.jsxs("div",{className:B(v,"gap-y-md grid items-center"),children:[(c||a||l)&&o.jsxs("div",{className:B({"pt-xs":!y},"gap-y-sm grid items-center"),children:[c,a&&o.jsx(USe,{quote:a,onClear:_}),l]}),o.jsx("div",{className:B({"px-3":n==="large"&&!y,"px-3.5":n==="large"&&y,flex:!y,"grid-rows-1fr-auto grid grid-cols-3":y}),children:u})]})})})});Fk.displayName="ResizeableInputWrapper";const aTt=({autoFocus:e=!1,placeholder:t="",disableInput:n=!1,value:r,initialLayout:s="expanded",minRows:a,maxRows:i,onChange:l,onClick:c,onBlur:u,onFocus:d,onKeyDown:m,onPaste:p,isMobileStyle:h,isMobileUserAgent:g,testId:y,id:v,ref:x})=>{const{state:b,dispatch:_}=f.useContext(P_),{isActive:w,isComposing:C,isExpanded:S}=b,E=f.useRef(w);E.current=w;const M=py(n),k=f.useRef(null),A=f.useMemo(()=>B(qr.inputWrapper.base,{[qr.inputWrapper.expanded.join(" ")]:S,[qr.inputWrapper.compact.join(" ")]:!S,[qr.inputWrapper.disabled]:n}),[n,S]),R=f.useMemo(()=>B(...qr.inputElement,"w-full"),[]),O=f.useCallback(W=>{_({type:"SET_EXPANDED",payload:W})},[_]),L=f.useCallback(W=>{_({type:"SET_ACTIVE",payload:W})},[_]),P=f.useCallback(W=>{_({type:"SET_COMPOSING",payload:W})},[_]),N=f.useCallback(W=>{d?.(W.nativeEvent),L(!0)},[d,L]),T=f.useCallback(W=>{u?.(W.nativeEvent)!==!1&&L(!1)},[u,L]),j=f.useCallback(()=>{if(k.current){const W=k.current.value.length;k.current.focus(),k.current.setSelectionRange(W,W),k.current.scrollTop=k.current.scrollHeight}},[]),F=f.useCallback(W=>{if(!k?.current)return!0;const X=k.current,{selectionStart:G,selectionEnd:J,value:q}=X;if(G!==J)return!1;const te=document.createElement("div"),re=window.getComputedStyle(X);te.style.position="absolute",te.style.visibility="hidden",te.style.whiteSpace=re.whiteSpace,te.style.wordWrap=re.wordWrap,te.style.font=re.font,te.style.padding=re.padding,te.style.border=re.border,te.style.width=X.offsetWidth+"px",te.style.lineHeight=re.lineHeight,document.body.appendChild(te);try{const ae=parseInt(re.lineHeight)||24,fe=q.substring(0,G);te.textContent=fe;const de=te.offsetHeight;return W==="first"?de<=ae:(te.textContent=q,te.offsetHeight-de<ae)}finally{document.body.removeChild(te)}},[]),U=f.useCallback(W=>{c?.(W.nativeEvent)},[c]),V=f.useCallback(W=>{m1(W.nativeEvent,{isMobileUserAgent:g,isComposing:C,onKeyDown:m})},[m,C,g]),$=f.useCallback(()=>iF(P),[P]),z=f.useCallback(()=>lF(P),[P]),Q=f.useCallback(W=>{p?.(W.nativeEvent)},[p]),Y=f.useCallback(W=>{l?.(W.target.value)},[l]);return f.useImperativeHandle(x,()=>{const W=k.current;return W.focusAtEnd=j,W.isFocused=()=>E.current,W.inLine=F,W.append=X=>{k.current&&(k.current.value+=X)},W.scrollToEnd=()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)},W.trim=()=>{k.current&&(k.current.value=k.current.value.trim())},W.element=()=>k.current,W},[j,F]),f.useEffect(()=>{!g&&k.current&&e&&(j(),L(!0))},[g,k,e,L,j]),f.useEffect(()=>{M!==n&&!n&&!g&&e&&setTimeout(()=>{k.current?.focus()},200)}),BSe(r,s,h,S,O),o.jsx("div",{className:A,children:o.jsx(xpe,{ref:k,placeholder:t,minRows:a,maxRows:i,value:r,onClick:U,onChange:Y,onKeyDown:V,onBlur:T,onCompositionStart:$,onCompositionEnd:z,onFocus:N,onPaste:Q,className:R,autoComplete:"off","data-test-id":y,rows:a,id:v,disabled:n,"data-1p-ignore":!0})})},$9="external-update",W9="focus",oTt="blur",iTt=new Set([$9,W9,oTt]),lTt=({autoFocus:e=!1,placeholder:t="",disableInput:n=!1,value:r,initialLayout:s="expanded",json:a,minRows:i,onChange:l,onClick:c,onBlur:u,onFocus:d,onKeyDown:m,onPaste:p,isMobileStyle:h,isMobileUserAgent:g,testId:y,id:v,namespace:x="ResizableLexicalInput",mentionTypeaheadOptions:b=ue,onMentionMenuOpen:_,onMentionMenuClose:w,onTriggerTypeahead:C,ref:S})=>{const E=f.useRef(null),[M,k]=f.useState(null),{state:A,dispatch:R}=f.useContext(P_),{isActive:O,isComposing:L,isExpanded:P}=A,N=f.useRef(L),T=f.useRef(O),j=f.useRef(""),F=f.useRef(null),U=f.useRef(e),V=f.useRef(null),$=f.useRef(l),z=f.useRef(c),Q=f.useRef(u),Y=f.useRef(d),W=f.useRef(m),X=f.useRef(p);$.current=l,z.current=c,Q.current=u,Y.current=d,W.current=m,X.current=p,N.current=L,T.current=O,U.current=e;const G=py(n),J=f.useMemo(()=>B(qr.inputWrapper.base,{[qr.inputWrapper.expanded.join(" ")]:P,[qr.inputWrapper.compact.join(" ")]:!P}),[P]),q=f.useMemo(()=>B(...qr.inputElement,"size-full"),[]),te=f.useMemo(()=>B(...qr.placeholder.base,{[qr.placeholder.compact]:!P}),[P]),re=f.useCallback(Be=>R({type:"SET_EXPANDED",payload:Be}),[R]),ae=f.useCallback(Be=>R({type:"SET_ACTIVE",payload:Be}),[R]),fe=f.useCallback(Be=>R({type:"SET_COMPOSING",payload:Be}),[R]),de=f.useCallback(Be=>{ne.error(Be)},[]),ve=f.useCallback(Be=>{Y.current?.(Be),ae(!0)},[ae]),_e=f.useCallback(Be=>{Q.current?.(Be)!==!1&&ae(!1)},[ae]),Se=f.useCallback(Be=>{X.current?.(Be)},[]),be=f.useCallback(Be=>{z.current?.(Be)},[]),me=f.useCallback((Be,ut,kt)=>{const $t=[...kt];let tn;if($t.length>0&&$t.every(nn=>iTt.has(nn)))if($t.includes(W9)){if(tn=ev(Be.toJSON()),tn===j.current)return}else return;tn===void 0&&(tn=ev(Be.toJSON())),j.current=tn??"",F.current=Be.toJSON(),$.current?.(j.current,F.current)},[]),Ae=f.useCallback(()=>fe(!0),[fe]),Ee=f.useCallback(()=>fe(!1),[fe]),je=f.useCallback(Be=>{m1(Be,{isMobileUserAgent:g,isComposing:N.current,onKeyDown:W.current})},[g]),Me=f.useCallback(()=>M?.update(()=>{S9(W9),cr().selectEnd()}),[M]),Ye=f.useCallback(Be=>M?.update(()=>{const ut=cr(),kt=Qn(Be),$t=ut.getLastChild();if(md($t))$t.append(kt);else throw new Error("Last child is not a paragraph node");ut.selectEnd()}),[M]),at=f.useCallback(()=>M?.update(()=>{const ut=cr().getLastChild();if(md(ut)){const kt=ut.getLastChild();Je(kt)&&(kt.getTextContent().trimEnd()===""?kt.remove():kt.setTextContent(kt.getTextContent().trimEnd()));const $t=ut.getFirstChild();Je($t)&&($t.getTextContent().trimStart()===""?$t.remove():$t.setTextContent($t.getTextContent().trimStart()))}else throw new Error("Last child is not a paragraph node")}),[M]),it=f.useCallback(Be=>M?M.getEditorState().read(()=>{const ut=nt();if(!Fe(ut))return!0;if(!ut.isCollapsed())return!1;const kt=window.getSelection();if(!kt||kt.rangeCount===0)return!0;const $t=kt.getRangeAt(0);let tn=$t.getBoundingClientRect();if(tn.width===0&&tn.height===0){const Pn=document.createTextNode("");$t.insertNode(Pn),tn=$t.getBoundingClientRect(),Pn.remove()}const nn=M.getElementByKey(cr().getFirstChild()?.getKey()??"")?.getBoundingClientRect();if(!nn)return!0;const Cn=4;return Be==="first"?Math.abs(tn.top-nn.top)<=Cn:Math.abs(tn.bottom-nn.bottom)<=Cn}):!0,[M]),ke=f.useCallback(()=>{_?.()},[_]),Ue=f.useCallback(()=>{w?.()},[w]),Ot=f.useCallback(Be=>{M||be(Be.nativeEvent)},[M,be]);f.useImperativeHandle(S,()=>({append:Ye,trim:at,focusAtEnd:Me,isFocused:()=>T.current,inLine:it,focus:()=>M?.focus(),blur:()=>M?.blur(),scrollIntoView:Be=>M?.getRootElement()?.scrollIntoView(Be),scrollToEnd:()=>M?.getRootElement()?.scrollIntoView({block:"end",behavior:"auto"}),element:()=>E?.current,get scrollHeight(){return M?.getRootElement()?.scrollHeight??0},get value(){return ev(M?.getEditorState()?.toJSON())},set value(Be){throw new Error("setValue is not supported in Lexical")},get json(){return M?.getEditorState().toJSON()}}),[Ye,Me,at,M,it]),BSe(r,s,h,P,re),f.useEffect(()=>{!g&&M&&e&&(Me(),ae(!0))},[g,e,ae,M,Me]),f.useEffect(()=>{G!==n&&!n&&!g&&e&&setTimeout(()=>Me(),200)}),f.useEffect(()=>M?.registerRootListener((Be,ut)=>{Be&&(Be.addEventListener("focus",ve),Be.addEventListener("blur",_e),Be.addEventListener("compositionstart",Ae),Be.addEventListener("compositionend",Ee),Be.addEventListener("keydown",je),Be.addEventListener("paste",Se),Be.addEventListener("click",be)),ut&&(ut.removeEventListener("focus",ve),ut.removeEventListener("blur",_e),ut.removeEventListener("compositionstart",Ae),ut.removeEventListener("compositionend",Ee),ut.removeEventListener("keydown",je),ut.removeEventListener("paste",Se),ut.removeEventListener("click",be))}),[_e,be,Ee,ve,je,Se,Ae,M]),f.useEffect(()=>{M&&(r&&a&&!as(a,F.current)?Promise.resolve().then(()=>{M.setEditorState(M.parseEditorState(a),{tag:$9}),U.current&&Me(),F.current=M.getEditorState().toJSON(),j.current=ev(F.current)}):j.current!==r&&(M.update(()=>{S9($9);const Be=cr();Be.clear(),V9?U9(r,YS,void 0,!0):Be.append(Cr().append(Qn(r))),U.current&&Be.selectEnd()},{discrete:!0}),F.current=M.getEditorState().toJSON(),j.current=ev(F.current)))},[r,a,M,Me]),f.useEffect(()=>{const Be=M?.registerCommand(Dl,Xe=>{const Ve=nt(),lt=Ve?.getNodes();return lt?.length===1&&Ln(lt[0])?(lt[0].remove(),!0):Fe(Ve)?(Ve.deleteCharacter(Xe),!0):Zc(Ve)?(Ve.deleteNodes(),!0):!1},wc),ut=M?.registerCommand(Mg,Xe=>{const Ve=nt();return Fe(Ve)?(Ve.deleteWord(Xe),!0):!1},wc),kt=M?.registerCommand(kg,Xe=>{const Ve=nt();return Fe(Ve)?(Ve.deleteLine(Xe),!0):!1},wc),$t=M?.registerCommand(GE,()=>{const Xe=nt();return Fe(Xe)?(Xe.removeText(),!0):!1},wc),tn=M?.registerCommand(rm,Xe=>{const Ve=nt();if(typeof Xe=="string")Ve!==null&&Ve.insertText(Xe);else{if(Ve===null)return!1;const lt=Xe.dataTransfer;if(lt!==null)rne(lt,Ve,M);else if(Fe(Ve)){const qt=Xe.data;return qt&&Ve.insertText(qt),!0}}return!0},wc),nn=M?.registerCommand(T_,Xe=>{if("clipboardData"in Xe){const lt=Xe.clipboardData?.getData("text/plain");if(lt&&lt.length>Bf)return Xe.preventDefault(),!0}const Ve=nt();return Fe(Ve)?(Xe.preventDefault(),M.update(()=>{const lt=nt(),qt=Y1(Xe,InputEvent)||Y1(Xe,KeyboardEvent)?null:"clipboardData"in Xe?Xe.clipboardData:null;if(qt&&lt){const{types:ln}=qt;if(ln.includes("text/html")||ln.includes("application/x-lexical-editor")||qt.files.length>0||!V9)rne(qt,lt,M);else{const $n=lt.clone(),we=Cr();U9(qt.getData("text/plain"),YS,we,!0);const qe=[];we.getChildren().forEach(De=>{md(De)?(qe.length&&qe.push(Do()),De.getChildren().forEach(tt=>{(Je(tt)||Ln(tt)||Fl(tt)||ei(tt))&&qe.push(tt)})):qe.push(De)}),ua($n),j9(M,qe,$n)}}},{tag:yCe}),!0):!1},wc),Cn=M?.registerCommand(bV,Xe=>{const Ve=Ag(Xe.target);if(Ln(Ve))return!1;const lt=nt();if(Fe(lt)){const{anchor:qt}=lt,ln=qt.getNode();if(lt.isCollapsed()&&qt.offset===0&&!ds(ln)&&U5t(ln).getIndent()>0)return Xe.preventDefault(),M.dispatchCommand(OMt,void 0);if(D5t&&navigator.language==="ko-KR")return!1}else if(!Zc(lt))return!1;return Xe.preventDefault(),M.dispatchCommand(Dl,!0)},wc),Pn=M?.registerCommand(_V,Xe=>{const Ve=Ag(Xe.target);if(Ln(Ve))return!1;const lt=nt();return Fe(lt)||Zc(lt)?(Xe.preventDefault(),M.dispatchCommand(Dl,!1)):!1},wc);return M?.registerNodeTransform(uc,Xe=>{Xe.getFormat()!==0&&Xe.setFormat(0)}),M?.registerNodeTransform(tp,Xe=>{if(Xe.getChildrenSize()>1){const Ve=Xe.getChildren(),lt=Cr();Ve.forEach(qt=>{Ie(qt)&&(lt.getChildren().length&&lt.append(Do()),qt.getChildren().forEach(ln=>{(Je(ln)||Ln(ln)||Fl(ln)||ei(ln))&&lt.append(ln)}))}),Xe.clear().append(lt).selectEnd()}}),M?.registerNodeTransform(np,Xe=>{const Ve=Xe.getParent();Ve instanceof Jy&&(Xe.getChildren().forEach(qt=>{Ve.append(qt)}),Xe.remove())}),()=>{Be?.(),ut?.(),kt?.(),$t?.(),tn?.(),nn?.(),Cn?.(),Pn?.()}},[M,Se]),f.useEffect(()=>{const Be=M?.registerCommand(Tg,ut=>!ut||V.current&&!V.current.canSubmit()?!1:(m1(ut,{isMobileUserAgent:g,isComposing:N.current,onKeyDown:W.current}),ut.defaultPrevented),wc);return()=>{Be?.()}},[M,Ue,g]),f.useLayoutEffect(()=>{M&&M.setEditable(!n)},[n,M]);const yt=f.useMemo(()=>({namespace:x,onError:de,nodes:FSe,theme:{link:"text-super hover:underline",text:{strikethrough:"line-through"}}}),[x,de]),St=f.useMemo(()=>({minHeight:`${(i??1)*1.5}em`}),[i]),et=f.useMemo(()=>o.jsx("div",{className:te,children:t}),[t,te]),He=f.useMemo(()=>o.jsx(vkt,{className:q,"aria-placeholder":t,placeholder:et,"data-test-id":y,id:v}),[v,t,et,q,y]);return f.useMemo(()=>o.jsx("div",{className:J,children:o.jsx("div",{className:"w-full",style:St,ref:E,onClick:Ot,children:o.jsxs(fkt,{initialConfig:yt,children:[o.jsx(Okt,{contentEditable:He,ErrorBoundary:Or}),o.jsx(Xkt,{}),o.jsx(Zkt,{onChange:me,ignoreSelectionChange:!0}),o.jsx(Jkt,{editorRef:k}),o.jsx(eTt,{ref:V,onClose:Ue,onOpen:ke,options:b,onTrigger:C}),o.jsx(tTt,{}),o.jsx(nTt,{}),o.jsx(ukt,{}),o.jsx(rTt,{transformers:YS})]})})}),[J,St,Ot,yt,He,me,Ue,ke,b,C])},Uk=e=>{const t=e.useLexical?lTt:aTt;return o.jsx(t,{...e})},VSe=I.memo(({children:e})=>{const{state:t}=f.useContext(P_),{isExpanded:n}=t;return e!==null?o.jsx("div",{className:B(...qr.attribution.left.base,{[qr.attribution.left.expanded]:n,[qr.attribution.left.compact]:!n}),children:e}):null});VSe.displayName="LeftAttribution";const $Se=I.memo(({isLoading:e,children:t})=>{const{state:n}=f.useContext(P_),{isExpanded:r}=n;return o.jsxs("div",{className:B(...qr.attribution.right.base,{[qr.attribution.right.expanded]:r,[qr.attribution.right.compact]:!r}),children:[e?o.jsx(D,{color:"light",className:"mr-3",children:o.jsx(ce,{icon:Wie,size:"xs",className:"animate-spin"})}):null,t]})});$Se.displayName="RightAttribution";const WSe=I.memo(({value:e,suggestDropdownProps:t,ResizeableInputWrapperProps:n,ResizeableInputProps:r,leftAttributionComponents:s,rightAttributionComponents:a,syncUncontrolledOnce:i})=>{const l=r.onChange,c=r.ref,u=f.useRef(null),d=f.useRef(e);d.current=e;const m=f.useRef(null),p=f.useRef(!1),h=f.useCallback(g=>{u.current=g,c instanceof Function?c(g):c&&(c.current=g)},[c]);return f.useEffect(()=>{const g=u.current?.value;g&&g!==d.current&&(!i||!p.current)&&l?.(g),i&&(p.current=!0)},[l,i]),Hm("ask-input"),o.jsx(Iy,{...t,floatingStrategy:"absolute",shouldEnableStacking:!0,portalTarget:m.current??void 0,value:e,children:o.jsxs(Fk,{...n,ref:m,children:[o.jsx(Uk,{...r,ref:h}),s,a]})})});WSe.displayName="AskInputBase";const Xd=I.memo(({size:e,inverse:t,incognitoType:n=kd.DEFAULT})=>o.jsx(H,{variant:"background",className:B("w-lg text-foreground flex aspect-square shrink-0 items-center justify-center rounded-full border",{"!w-[24px]":e==="small","!w-[16px]":e==="tiny"},{"!bg-inverse !text-inverse border-0":t}),children:n===kd.GOVERNMENT?o.jsx("svg",{width:e==="tiny"?"10":e==="small"?"12":"16",height:"auto",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{fill:"currentColor",d:"M2.75 12.5h2.5v-7h1.5v7h2.5v-7h1.5v7h2.5v-7h1.5v7H16V14H0v-1.5h1.25v-7h1.5zM16 3v1.5H0V3l8-3z"})}):o.jsx("svg",{width:e==="tiny"?"12":e==="small"?"16":"24",height:"auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.1927 4.54688C11.4375 4.71875 11.651 4.86458 12 4.86458C12.3453 4.86458 12.5529 4.72184 12.7993 4.55235L12.8073 4.54688L12.8084 4.54609C13.152 4.31187 13.5635 4.03125 14.5 4.03125C16.0885 4.03125 17.2083 6.30729 17.9375 8.6875C20.401 9.14062 22 9.875 22 10.6979C22 11.4427 20.6979 12.1094 18.6354 12.5677C18.6562 12.776 18.6667 12.9844 18.6667 13.1979C18.6667 14.0833 18.4948 14.9271 18.1823 15.6979H18.1965C17.2165 18.1697 14.8115 19.9169 12 19.9169C9.18854 19.9169 6.78355 18.1697 5.80356 15.6979H5.81771C5.50521 14.9271 5.33333 14.0833 5.33333 13.1979C5.33333 12.9844 5.34375 12.776 5.36458 12.5677C3.30208 12.1094 2 11.4427 2 10.6979C2 9.875 3.59896 9.14062 6.0625 8.6875C6.79167 6.30729 7.91146 4.03125 9.5 4.03125C10.4365 4.03125 10.848 4.31187 11.1916 4.54609L11.1927 4.54688ZM14.2708 15.6979H14.9167C16.0677 15.6979 17 14.7656 17 13.6146V12.8646C15.5312 13.0781 13.8229 13.1979 12 13.1979C10.1771 13.1979 8.46875 13.0781 7 12.8646V13.6146C7 14.7656 7.93229 15.6979 9.08333 15.6979H9.73437C10.5885 15.6979 11.3542 15.1458 11.625 14.3333C11.7448 13.9687 12.2604 13.9687 12.3802 14.3333C12.651 15.1458 13.4115 15.6979 14.2708 15.6979Z",fill:"currentColor"})})}));Xd.displayName="IncognitoIcon";const O_=I.memo(({className:e,color:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:t||"currentColor",viewBox:"0 0 66 24",className:e,children:[o.jsx("path",{d:"M33.569 17.032a1.919 1.919 0 0 1-.799-1.593c0-1.277.935-1.982 2.857-2.157l4.956-.473v.134c0 .784-.127 1.492-.378 2.105a3.958 3.958 0 0 1-1.012 1.456c-.834.753-1.993 1.15-3.354 1.15-.94 0-1.724-.215-2.27-.622Z"}),o.jsx("path",{clipRule:"evenodd",fillRule:"evenodd",d:"M60.756 1.398c1.886.991 3.382 2.457 4.443 4.353 1.03 1.813 1.55 3.918 1.55 6.257 0 2.339-.521 4.444-1.55 6.257a10.934 10.934 0 0 1-2.475 3.027l-7.77-9.445 5.845-7.145V3.92h-3.135l-.076.096-4.626 5.837h-.009l-4.626-5.837-.075-.096h-3.136v.782l5.847 7.146-5.847 7.145v.782h3.136l.075-.095 4.626-5.837h.01l7.214 9.087-.017.01c-1.293.703-1.948 1.06-3.755 1.06H.25V1.862C.25.834 1.085 0 2.113 0h52.932c2.063 0 3.985.482 5.711 1.398ZM27.842 19.773V9.272c0-1.69-.55-3.073-1.59-4.002-.954-.851-2.28-1.301-3.834-1.301-1.375 0-2.54.306-3.463.91-.62.407-1.137.946-1.572 1.642a.1.1 0 0 1-.175-.008 4.35 4.35 0 0 0-1.35-1.605c-.864-.624-1.97-.94-3.285-.94-2.436 0-3.62.89-4.327 1.824-.059.077-.181.038-.181-.06V4.32H5.063v15.452h3.09V10.71c0-1.377.358-2.442 1.064-3.166.65-.665 1.597-1.017 2.74-1.017.967 0 1.712.26 2.215.772.488.499.736 1.221.736 2.148v10.326h3.09V10.71c0-1.377.358-2.442 1.063-3.165.65-.666 1.597-1.018 2.74-1.018.967 0 1.712.26 2.215.773.489.498.736 1.221.736 2.148v10.325h3.09Zm15.8 0 .001-10.003c0-1.821-.64-3.32-1.85-4.334-1.146-.96-2.862-1.468-4.72-1.468-1.856 0-3.49.467-4.723 1.35-1.213.87-2.003 2.096-2.254 3.557-.057.331-.04.736-.04.736h3.008l.027-.22c.122-.963.521-1.708 1.185-2.213.669-.51 1.587-.768 2.738-.768s2.038.27 2.636.8c.619.55.933 1.391.933 2.502v.682l-5.356.507c-3.577.344-5.547 1.997-5.547 4.656 0 1.375.564 2.531 1.63 3.346 1.023.781 2.436 1.194 4.088 1.194 1.43 0 2.66-.304 3.656-.903a5.177 5.177 0 0 0 1.408-1.237c.059-.075.179-.033.179.063v1.753h3.002Z"})]}));O_.displayName="MaxBadge";const f$=I.memo(({className:e})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 51 24",className:e,children:[o.jsx("path",{d:"M35.069 7.954c-1.723 1.74-1.706 6.368 0 8.121 1.597 1.799 5.273 1.817 6.855 0 .873-.922 1.315-2.417 1.315-4.075 0-1.66-.442-3.144-1.317-4.048-1.584-1.853-5.256-1.834-6.853.002Z"}),o.jsx("path",{fillRule:"evenodd",d:"m48.958 5.715-.009-.015a10.792 10.792 0 0 0-4.387-4.301l-.01-.006C42.81.47 40.861 0 38.761 0H1.905C.866 0 .002.84 0 1.88V24h3.818V4.359h3.245v1.284c0 .132.161.196.252.1 2.987-3.275 9.077-2.319 11.216 1.723.725 1.234 1.092 2.759 1.092 4.534.102 4.584-3.017 8.265-7.55 8.235-2.031 0-3.629-.79-4.757-1.978a.146.146 0 0 0-.253.1V24h31.7c2.1 0 4.045-.468 5.78-1.39l.011-.005a10.795 10.795 0 0 0 4.394-4.302l.009-.016C49.98 16.483 50.5 14.368 50.5 12s-.52-4.482-1.543-6.285ZM30.112 7.42a24.93 24.93 0 0 1-.86-.003c-1.338-.02-2.845-.041-3.676.819-.549.54-.827 1.468-.827 2.759v8.809h-3.243V4.359h3.243v1.284c0 .148.194.202.271.077.314-.506.65-.852 1.012-1.05.616-.353 1.462-.532 2.514-.532h1.566V7.42Zm8.399 12.814c-4.77.033-8.068-3.395-7.973-8.235 0-1.716.348-3.21 1.033-4.442 2.714-5.062 11.157-5.068 13.852-.002.704 1.234 1.06 2.729 1.06 4.444.08 4.807-3.207 8.268-7.972 8.235Z",clipRule:"evenodd"}),o.jsx("path",{d:"M16.378 12c0 1.657-.442 3.153-1.314 4.075-1.583 1.816-5.26 1.798-6.857 0-1.706-1.753-1.722-6.381 0-8.121 1.597-1.836 5.27-1.855 6.854-.003.875.904 1.317 2.39 1.317 4.049Z"})]}));f$.displayName="ProBadge";const Cv=I.memo(({isMax:e,className:t})=>e?o.jsx("div",{style:{"--mode-color":"oklch(var(--max-color))"},children:o.jsx(O_,{className:`text-max ${t||""}`})}):o.jsx("div",{style:{"--mode-color":"oklch(var(--super-color))"},children:o.jsx(f$,{className:`text-super ${t||""}`})}));Cv.displayName="SearchModeBadge";function Dc(e){switch(e){case ie.SEARCH:return le.PRO;case ie.RESEARCH:return le.ALPHA;case ie.STUDIO:return le.BETA;case ie.STUDY:return le.STUDY;default:return le.PRO}}const HSe=I.memo(e=>{const{isFollowUp:t,value:n,onChange:r,buttonSize:s="small",variant:a="primaryGhost"}=e,i=Sy(),{$t:l}=Z(),c=Ky(),u=Pa(),d=f.useMemo(()=>n!==void 0?io[n]||ie.SEARCH:u,[n,u]),{isMax:m,hasAccessToProFeatures:p}=_t(),h=rt(),{gpt4Limit:g,pplxAlphaLimit:y,pplxBetaLimit:v}=Jn(),{specialCapabilities:x}=Zr(),{preferredSearchModels:b,actions:_}=hn(),w=fa(),C=_k(),{isMaxUpsellEnabled:S}=Eu(),[E,M]=f.useState(()=>{const N=b[ie.SEARCH];return x.unlimitedProSearch?!0:N===le.DEFAULT?!1:h});E&&g===0&&!x.unlimitedProSearch&&M(!1);const{gateSearchModeSelection:k}=k_(),A=f.useCallback(()=>{k(le.BETA,!0)},[k]),R=f.useCallback(N=>k(N?le.PRO:le.DEFAULT)?(M(!1),_.setPreferredSearchModel(ie.SEARCH,le.DEFAULT),!1):(M(N),_.setPreferredSearchModel(ie.SEARCH,N?le.PRO:le.DEFAULT),N),[_,k]),O=f.useCallback(N=>{(N===ie.SEARCH||S)&&_.setPreferredSearchMode(N);let T;switch(N){case ie.SEARCH:{E?T=b[N]??Dc(N):T=le.DEFAULT;break}case ie.RESEARCH:{S?T=b[N]??Dc(N):T=Dc(N);break}case ie.STUDIO:{S?T=b[N]??Dc(N):T=Dc(N);break}default:{T=le.DEFAULT;break}}if(!C(T)){k(T);return}r?r(T):c(T,N)},[_,S,E,r,b,c,C,k]),L=f.useMemo(()=>{function N(V,$){return{active:d===V,description:l(ss[V].description),icon:ig[V],onClick(){O(V)},text:l(ss[V].name),type:"default",...$}}const T=V=>h&&V<=10&&!m,j=[];j.push(N(ie.SEARCH,{customDescriptionNode:p?void 0:o.jsxs(o.Fragment,{children:[o.jsx(D,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:o.jsx(pe,{...ss[ie.SEARCH].description})}),o.jsxs("div",{className:"gap-md flex flex-col",children:[o.jsx("hr",{className:"border-subtler bg-subtler -mr-5 mt-3"}),o.jsxs("div",{className:"gap-sm -mr-5 flex items-start justify-between",children:[o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx("button",{onClick:()=>{k(x.unlimitedProSearch?le.PRO:le.SONAR)},type:"button",children:o.jsx(D,{className:"font-medium underline",color:"super",variant:"tiny",children:o.jsx(pe,{defaultMessage:"Try Pro Search",id:"akAejIEhqZ"})})}),o.jsx(Cv,{isMax:m,className:"h-2.5"})]}),o.jsx(D,{className:"italic",color:"super",variant:"tinyRegular",children:o.jsx(pe,{defaultMessage:"Advanced search with 10x the sources",id:"MZLTMODV37"})}),h&&g<=10&&o.jsx(D,{className:"mt-1 font-light",color:"super",variant:"tinyRegular",children:o.jsx(pe,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:g}})})]}),o.jsx(zSe,{isProSearchEnabled:E,selectSearchModel:c,selectedSearchMode:d,setIsProSearchEnabled:R})]})]})]}),customTextNode:o.jsxs("div",{className:"gap-sm mt-px flex items-center",children:[o.jsx(D,{variant:"smallBold",children:o.jsx(pe,{...ss[ie.SEARCH].name})}),o.jsx(Cv,{isMax:m,className:"h-2.5"})]})}));const F=Math.min(g,y);j.push(N(ie.RESEARCH,{customTextNode:o.jsxs("div",{className:"gap-sm mt-px flex items-center",children:[o.jsx(D,{variant:"smallBold",children:o.jsx(pe,{...ss[ie.RESEARCH].name})}),o.jsx(Cv,{isMax:m||i(ie.RESEARCH),className:"h-2.5"})]}),customDescriptionNode:o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(D,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:o.jsx(pe,{...ss[ie.RESEARCH].description})}),T(F)&&o.jsxs("div",{children:[o.jsx(D,{color:"super",variant:"tinyRegular",children:o.jsx(pe,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:F}})}),i(ie.RESEARCH)&&o.jsx(he,{onClick:A,variant:"common",size:"small",fullWidth:!0,extraCSS:"mt-sm",text:l({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"})})]})]})}));const U=Math.min(g,v);return j.push(N(ie.STUDIO,{customTextNode:o.jsxs("div",{className:"gap-sm mt-px flex items-center",children:[o.jsx(D,{variant:"smallBold",children:o.jsx(pe,{...ss[ie.STUDIO].name})}),o.jsx(Cv,{isMax:m||i(ie.STUDIO),className:"h-2.5"})]}),customDescriptionNode:o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(D,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:o.jsx(pe,{...ss[ie.STUDIO].description})}),T(U)&&o.jsxs("div",{children:[o.jsx(D,{color:"max",variant:"tinyRegular",children:o.jsx(pe,{defaultMessage:"{limit, plural, one {# query remaining this month} other {# queries remaining this month}}",id:"wlPH+sOjjI",values:{limit:U}})}),i(ie.STUDIO)&&o.jsx(he,{onClick:A,variant:"common",size:"small",fullWidth:!0,extraCSS:"mt-sm",text:l({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"})})]})]})})),j},[p,m,h,g,E,c,d,R,y,i,A,l,v,O,k,x.unlimitedProSearch]),P=f.useMemo(()=>o.jsx(ce,{icon:Dn,size:"xs",className:B("-mx-xs -mb-two opacity-50",{"-ml-sm":t})}),[t]);return o.jsx(Jt,{isMobileStyle:w,items:L,placement:"bottom-start",children:o.jsx(he,{icon:ig[d],size:s,text:t?o.jsx(o.Fragment,{children:""}):l(ss[d].name),variant:a,trailingComponent:P})})});HSe.displayName="SearchModeDropdownMenu";const zSe=I.memo(({isProSearchEnabled:e,selectSearchModel:t,selectedSearchMode:n,setIsProSearchEnabled:r})=>{const s=f.useCallback(i=>{r(i)&&n===ie.SEARCH&&t(i?le.PRO:le.DEFAULT)},[t,n,r]),a=f.useMemo(()=>({onClick(i){i.stopPropagation()}}),[]);return o.jsx(Ro,{active:e,onChange:s,size:"small",switchProps:a})});zSe.displayName="SwitchFactory";const GSe=()=>{const{base:e}=gt(),t=jt();return t===(e||"/")||t?.startsWith("/welcome")||t?.startsWith("/finance")},Vne=10,qSe=I.memo(e=>{const{children:t,tooltipContent:n,triggeredSearchModeElement:r,isOpen:s,setIsOpen:a}=e,{showSuggestDropdown:i}=Ws(),[l,c]=f.useState(!1),u=s!==void 0?s:l,d=a||c,m=f.useRef(0),[p,h]=ql(),[g,y]=ql(),x=f.useCallback(()=>{const{left:E=0,width:M=0}=r?.getBoundingClientRect()??{};return h.width===0||E===0?0:E-h.left+M/2-Vne/2},[h,r])();let b=x!==0;x!==0&&x!==m.current&&(b=m.current!==0,m.current=x);const _=f.useCallback(E=>{E||(m.current=0),d(E)},[d]),w=f.useCallback(E=>{E.preventDefault()},[]),C=f.useCallback(()=>{d(!1)},[d]),S=f.useCallback(E=>{E.preventDefault()},[]);return o.jsx(QL,{delayDuration:i?1e3:400,skipDelayDuration:100,children:o.jsxs(Yue,{onOpenChange:_,open:u,children:[o.jsx(XL,{asChild:!0,className:"focus:outline-none",onBlur:C,onClick:w,onPointerDown:S,children:t}),o.jsx(JL,{children:o.jsx(eD,{className:B("group/tooltip-content data-[state=closed]:animate-slideDownAndFadeOut data-[state=delayed-open]:animate-slideUpAndFadeIn ease-outExpo duration-300"),"data-color-scheme":"dark",sideOffset:4,side:"bottom",ref:p,children:o.jsxs(ge.div,{className:B("bg-base shadow-overlay flex w-72 flex-col rounded-lg"),animate:{height:y.height||void 0},transition:{duration:.05,ease:Nd},children:[o.jsxs(ge.div,{className:'absolute left-0 group-data-[side="bottom"]/tooltip-content:top-0 group-data-[side="top"]/tooltip-content:bottom-0',animate:{opacity:m.current?1:void 0,x:b?x:void 0},initial:{opacity:0},transition:{duration:.05,ease:Nd},style:{x,width:Vne},children:[o.jsx(E2,{className:"fill-inverse"}),o.jsx(E2,{className:"fill-inverse -translate-y-px scale-[99%]"})]}),o.jsx("div",{className:B("relative overflow-hidden"),children:o.jsx("div",{className:"whitespace-normal",ref:g,children:n})})]})})})]})})});qSe.displayName="SearchModeTooltip";const KSe={[ie.SEARCH]:le.DEFAULT,[ie.RESEARCH]:le.ALPHA,[ie.STUDIO]:le.BETA,[ie.STUDY]:le.DEFAULT},Bk=I.memo(e=>{const{children:t,className:n,searchMode:r,...s}=e,{gateSearchModeSelection:a}=k_();return o.jsx("button",{className:B("group",n),onClick:()=>{a(KSe[r],!0)},type:"button",...s,children:o.jsx(D,{className:"!text-[var(--mode-color)] underline decoration-transparent transition-[text-decoration-color] group-hover:decoration-[var(--mode-color)]",variant:"smallBold",children:t})})});Bk.displayName="SearchModeTooltipUpgradeButton";const Vk=I.memo(e=>{const{badgeNode:t,color:n,enabledText:r,isEnabled:s,upgradeButton:a,isMaxUpsell:i=!1}=e;return o.jsxs("div",{className:"gap-sm flex items-center",style:{"--mode-color":n==="super"?"oklch(var(--super-color))":"oklch(var(--max-color))"},children:[t,s?o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(D,{className:"!text-[var(--mode-color)]",variant:"smallBold",children:r}),!i&&o.jsx(Sr,{className:"text-[var(--mode-color)]",size:18})]}):o.jsx(o.Fragment,{children:a})]})});Vk.displayName="SearchModeTooltipFooter";const YSe=I.memo(e=>{const{searchMode:t}=e,{$t:n}=Z(),r=rt(),{hasAccessToProFeatures:s}=_t(),{gateSearchModeSelection:a}=k_(),i=Sy(),{specialCapabilities:l}=Zr(),c=f.useCallback(()=>{a(KSe[t],!0)},[a,t]);return i(t)?o.jsx(he,{onClick:c,variant:"maxGold",size:"small",fullWidth:!0,text:n({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"})}):l.unlimitedProSearch||l.unlimitedResearch||r&&s||t===ie.STUDY?null:o.jsx(he,{onClick:c,variant:"primary",size:"small",fullWidth:!0,testId:"upgrade-to-pro-button",text:r?o.jsx(pe,{defaultMessage:"Upgrade to Pro",id:"5N04mo7WNC"}):o.jsx(pe,{defaultMessage:"Sign in for access",id:"w6mjA9GP58"})})});YSe.displayName="SearchModeTooltipUpsellButton";const L_=I.memo(e=>{const{footerNode:t,includeNewBadge:n,searchMode:r}=e,{$t:s}=Z();return o.jsxs("div",{className:"p-md flex flex-col gap-4",children:[o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsxs("div",{className:"relative",children:[o.jsx(D,{className:"text-box-trim-both",variant:"smallExtraBold",children:s(ss[r].name)}),n&&o.jsx(H,{className:"absolute -right-1 -top-1 rounded-md px-2 py-1",variant:"subtle",children:o.jsx(D,{variant:"tiny",children:o.jsx(pe,{defaultMessage:"New",id:"bW7B87wFFp"})})})]}),o.jsx(D,{variant:"small",className:"text-pretty",children:s(ss[r].description)})]}),o.jsx("hr",{className:"border-subtler bg-subtler"}),o.jsx("div",{className:"gap-xs flex flex-col",children:t}),o.jsx(YSe,{searchMode:r})]})});L_.displayName="SearchModeTooltipContentContainer";const $k=I.memo(({isMaxUpsell:e=!1})=>{const{isMax:t,isPro:n}=_t();return t||e?o.jsx(O_,{className:"text-max h-3"}):n?o.jsx(f$,{className:"text-super h-3"}):null});$k.displayName="SearchModeBadge";const m$=({isMax:e,isPro:t,isMaxUpsell:n=!1})=>e||n?"max":"super",QSe=I.memo(e=>{const{isToggleActive:t,onToggleChange:n}=e,r=rt(),{hasAccessToProFeatures:s,isMax:a,isPro:i}=_t(),{gpt4Limit:l}=Jn(),{specialCapabilities:c,isGovernmentRequestOrigin:u}=Zr(),d=!r&&!c.unlimitedProSearch?null:s||c.unlimitedProSearch?u?o.jsx(pe,{defaultMessage:"Unlimited access for government",id:"0JftsQv9MC"}):o.jsx(pe,{defaultMessage:"Unlimited access for subscribers",id:"EvvPQiWwUI"}):l>0&&l<=10?o.jsx(pe,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:l}}):null,m=f.useMemo(()=>o.jsx($k,{}),[]),p=f.useMemo(()=>({onClick(v){v.stopPropagation()}}),[]),h=f.useMemo(()=>o.jsx(Bk,{searchMode:ie.SEARCH,children:o.jsx(pe,{defaultMessage:"Try Pro Search",id:"akAejIEhqZ"})}),[]),g=f.useMemo(()=>o.jsx(pe,{defaultMessage:"Enabled",id:"V52jNnY+6M"}),[]),y=f.useMemo(()=>o.jsxs("div",{className:"flex",children:[o.jsxs("div",{className:"gap-xs flex w-full flex-col",children:[o.jsx(Vk,{badgeNode:m,color:m$({isMax:a,isPro:i}),enabledText:g,isEnabled:s||c.unlimitedProSearch,upgradeButton:h}),o.jsx(D,{color:"default",variant:"small",className:"text-pretty",children:o.jsx(pe,{defaultMessage:"Advanced search with 10x the sources; powered by top models",id:"IKFeqUH+w0"})}),d&&o.jsx(D,{color:"default",variant:"small",className:"mt-xs opacity-60",children:d})]}),!s&&!c.unlimitedProSearch&&o.jsx("div",{children:o.jsx(Ro,{active:t,onChange:n,switchProps:p})})]}),[m,g,s,a,i,t,n,d,p,h,c.unlimitedProSearch]);return o.jsx(L_,{footerNode:y,searchMode:ie.SEARCH})});QSe.displayName="ProSearchModeTooltip";const XSe=I.memo(()=>{const e=rt(),{hasAccessToProFeatures:t,isMax:n,isPro:r}=_t(),{gpt4Limit:s,pplxAlphaLimit:a}=Jn(),{specialCapabilities:i,isGovernmentRequestOrigin:l}=Zr(),c=Sy(),u=c(ie.RESEARCH),d=!e&&!i.unlimitedResearch||Math.min(s,a)<0||c(ie.RESEARCH)?null:i.unlimitedResearch&&l?o.jsx(pe,{defaultMessage:"Unlimited access for government",id:"0JftsQv9MC"}):n?o.jsx(pe,{defaultMessage:"Unlimited access for subscribers",id:"EvvPQiWwUI"}):a<=10?o.jsx(pe,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:a}}):o.jsx(pe,{defaultMessage:"Extended access for subscribers",id:"ATGyCTI4+V"}),m=f.useMemo(()=>o.jsx($k,{isMaxUpsell:u}),[u]),p=f.useMemo(()=>u?o.jsx(pe,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):o.jsx(pe,{defaultMessage:"Enabled",id:"V52jNnY+6M"}),[u]),h=f.useMemo(()=>o.jsx(Bk,{searchMode:ie.RESEARCH,children:e?u?o.jsx(pe,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):o.jsx(pe,{defaultMessage:"Extended access for subscribers",id:"ATGyCTI4+V"}):o.jsx(pe,{defaultMessage:"Get more queries with Pro",id:"BZEuCK3Abs"})}),[e,u]),g=f.useMemo(()=>o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(Vk,{badgeNode:m,color:m$({isMax:n,isPro:r,isMaxUpsell:u}),enabledText:p,isEnabled:t||i.unlimitedResearch,upgradeButton:h,isMaxUpsell:u}),o.jsx(D,{color:"default",variant:"small",className:"text-pretty",children:o.jsx(pe,{defaultMessage:"In-depth reports with more sources, charts, and advanced reasoning",id:"9V0OqZ9HGl"})}),d&&o.jsx(D,{color:"default",variant:"small",className:"mt-xs opacity-60",children:d})]}),[m,p,t,n,r,u,d,h,i.unlimitedResearch]);return o.jsx(L_,{footerNode:g,searchMode:ie.RESEARCH})});XSe.displayName="ResearchModeTooltip";const ZSe=I.memo(()=>{const e=rt(),{hasAccessToProFeatures:t,isMax:n,isPro:r}=_t(),{gpt4Limit:s,pplxBetaLimit:a}=Jn(),i=Sy(),l=i(ie.STUDIO),c=(()=>{if(!e)return null;if(!t)return o.jsx(pe,{defaultMessage:"Upgrade to get access",id:"eRbSgHbjUP"});const h=Math.min(s,a);return h<0||i(ie.STUDIO)?null:n?o.jsx(pe,{defaultMessage:"Unlimited access for subscribers",id:"EvvPQiWwUI"}):o.jsx(pe,{defaultMessage:"{limit, plural, one {# query remaining this month} other {# queries remaining this month}}",id:"wlPH+sOjjI",values:{limit:h}})})(),u=f.useMemo(()=>o.jsx($k,{isMaxUpsell:l}),[l]),d=f.useMemo(()=>l?o.jsx(pe,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):o.jsx(pe,{defaultMessage:"Enabled",id:"V52jNnY+6M"}),[l]),m=f.useMemo(()=>o.jsx(Bk,{searchMode:ie.STUDIO,children:e?l?o.jsx(pe,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):o.jsx(pe,{defaultMessage:"Access for subscribers only",id:"Ez3b/pzas/"}):o.jsx(pe,{defaultMessage:"Get more queries with Pro",id:"BZEuCK3Abs"})}),[e,l]),p=f.useMemo(()=>o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(Vk,{badgeNode:u,color:m$({isMax:n,isPro:r,isMaxUpsell:l}),enabledText:d,isEnabled:t,upgradeButton:m,isMaxUpsell:l}),o.jsx(D,{color:"default",variant:"small",className:"text-pretty",children:l?o.jsx(pe,{defaultMessage:"Draft, design, deliver your ideas.",id:"I1aIhz4l3D"}):o.jsx(pe,{defaultMessage:"Turn your ideas into completed docs, slides, dashboards, and more",id:"WRu1tcOhoj"})}),c&&o.jsx(D,{color:"default",variant:"small",className:"mt-xs opacity-60",children:c})]}),[u,d,t,n,r,l,c,m]);return o.jsx(L_,{footerNode:p,searchMode:ie.STUDIO,includeNewBadge:!0})});ZSe.displayName="StudioModeTooltip";const JSe=I.memo(()=>{const e=I.useMemo(()=>o.jsx("div",{children:o.jsx(D,{color:"default",variant:"small",className:"text-pretty",children:o.jsx(pe,{defaultMessage:"Interactive learning and study tools that guide you toward deeper understanding beyond quick answers. ",id:"ZRKKxSc+oV"})})}),[]);return o.jsx(L_,{footerNode:e,searchMode:ie.STUDY,includeNewBadge:!0})});JSe.displayName="StudyModeTooltip";var p$="Radio",[cTt,e2e]=co(p$),[uTt,dTt]=cTt(p$),t2e=f.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:a,disabled:i,value:l="on",onCheck:c,form:u,...d}=e,[m,p]=f.useState(null),h=Vn(t,v=>p(v)),g=f.useRef(!1),y=m?u||!!m.closest("form"):!0;return o.jsxs(uTt,{scope:n,checked:s,disabled:i,children:[o.jsx(dn.button,{type:"button",role:"radio","aria-checked":s,"data-state":a2e(s),"data-disabled":i?"":void 0,disabled:i,value:l,...d,ref:h,onClick:Ft(e.onClick,v=>{s||c?.(),y&&(g.current=v.isPropagationStopped(),g.current||v.stopPropagation())})}),y&&o.jsx(s2e,{control:m,bubbles:!g.current,name:r,value:l,checked:s,required:a,disabled:i,form:u,style:{transform:"translateX(-100%)"}})]})});t2e.displayName=p$;var n2e="RadioIndicator",r2e=f.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,a=dTt(n2e,n);return o.jsx(da,{present:r||a.checked,children:o.jsx(dn.span,{"data-state":a2e(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})})});r2e.displayName=n2e;var fTt="RadioBubbleInput",s2e=f.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const i=f.useRef(null),l=Vn(i,a),c=cF(n),u=c5(t);return f.useEffect(()=>{const d=i.current;if(!d)return;const m=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&h){const g=new Event("click",{bubbles:r});h.call(d,n),d.dispatchEvent(g)}},[c,n,r]),o.jsx(dn.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});s2e.displayName=fTt;function a2e(e){return e?"checked":"unchecked"}var mTt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Wk="RadioGroup",[pTt,wrn]=co(Wk,[W3,e2e]),o2e=W3(),i2e=e2e(),[hTt,gTt]=pTt(Wk),l2e=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:a,required:i=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:m,...p}=e,h=o2e(n),g=X5(u),[y,v]=Ji({prop:a,defaultProp:s??null,onChange:m,caller:Wk});return o.jsx(hTt,{scope:n,name:r,required:i,disabled:l,value:y,onValueChange:v,children:o.jsx(_1e,{asChild:!0,...h,orientation:c,dir:g,loop:d,children:o.jsx(dn.div,{role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...p,ref:t})})})});l2e.displayName=Wk;var c2e="RadioGroupItem",u2e=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,a=gTt(c2e,n),i=a.disabled||r,l=o2e(n),c=i2e(n),u=f.useRef(null),d=Vn(t,u),m=a.value===s.value,p=f.useRef(!1);return f.useEffect(()=>{const h=y=>{mTt.includes(y.key)&&(p.current=!0)},g=()=>p.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",g)}},[]),o.jsx(w1e,{asChild:!0,...l,focusable:!i,active:m,children:o.jsx(t2e,{disabled:i,required:a.required,checked:m,...c,...s,name:a.name,ref:d,onCheck:()=>a.onValueChange(s.value),onKeyDown:Ft(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:Ft(s.onFocus,()=>{p.current&&u.current?.click()})})})});u2e.displayName=c2e;var yTt="RadioGroupIndicator",d2e=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=i2e(n);return o.jsx(r2e,{...s,...r,ref:t})});d2e.displayName=yTt;const vTt=e=>{const t=jn(e);if(!t)return 0;const n=parseInt(t);return isNaN(n)?1:n},$ne=(e,t)=>{Zt(e,t.toString(),{expires:365})},h$=({cueKey:e,impressionsLimit:t,enabled:n})=>{const[r,s]=f.useState(!1),[a,i]=f.useState(0);f.useEffect(()=>{if(!n){s(!1);return}const c=vTt(e);i(c),c<t&&(s(!0),$ne(e,c+1),i(c+1))},[e,t,n]);const l=f.useCallback(()=>{$ne(e,t),i(t),s(!1)},[e,t]);return f.useMemo(()=>({shouldShow:r,currentCount:a,setReachedImpressions:l}),[r,a,l])},xTt={xs:"px-xs py-xxs",sm:"px-sm py-xs"},bTt=e=>{switch(e){case"common":return{background:"dark bg-base",titleText:"!text-light font-semibold",subtitleText:"!text-light mt-xxs opacity-90",arrow:"dark fill-base [&>path]:stroke-subtler dark:[&>path]:stroke-1 [clip-path:inset(1px_1px_0px_1px)]",borderRadius:"rounded-md"};default:return{background:"!bg-super !shadow-none",titleText:"!text-inverse",subtitleText:"!text-inverse mt-xs opacity-90",arrow:"fill-super",borderRadius:"rounded-md"}}},Hk=I.memo(({cueKey:e,title:t,subtitle:n,children:r,enabled:s,impressionsLimit:a=1,variant:i="primary",size:l="xs",placement:c="bottom",sideOffset:u=10,className:d})=>{const[m,p]=f.useState(!1),{shouldShow:h}=h$({cueKey:e,impressionsLimit:a,enabled:s}),g=bTt(i),y=h&&!m,v=()=>!t&&!n?null:o.jsxs("div",{className:B(xTt[l],d),children:[t&&o.jsx(D,{variant:"tiny",className:g.titleText,children:t}),n&&o.jsx(D,{variant:"tiny",className:g.subtitleText,children:n})]}),x=f.useCallback(()=>{p(!0)},[]),b=f.useMemo(()=>({removeScroll:!1,animationClassName:"z-[2000]"}),[]);return o.jsx($o,{content:v(),contentClassName:g.background,arrowClassName:g.arrow,borderRadius:g.borderRadius,isOpen:s&&y,onClose:x,placement:c,sideOffset:u,overlayProps:b,children:r})});Hk.displayName="Cue";const g$=I.memo(e=>{const{className:t="",layoutKey:n="",options:r,value:s,backgroundClassName:a="",radioGroupIndicatorClassName:i="",variant:l="default",areCuesEnabled:c=!1,...u}=e,d=(()=>{switch(l){case"subtle":return"";case"default":return"bg-white dark:bg-black dark:bg-gradient-to-b dark:from-super/20 dark:to-super/20";default:Gt(l)}})(),{$t:m}=Z(),p=f.useMemo(()=>({study:m({defaultMessage:"Learn with Study Mode",id:"kJFaTtzXAA"})}),[m]),h=f.useMemo(()=>r.map(y=>{const v=y.value===s;return o.jsx(Hk,{cueKey:`segmented-control-${y.value}`,enabled:!!p[y.value]&&c,placement:"top",title:p[y.value],children:o.jsxs(u2e,{...y.elementProps,"aria-label":y.label,disabled:y.disabled??void 0,className:"segmented-control group/segmented-control relative focus:outline-none",value:y.value,children:[v&&o.jsx(d2e,{asChild:!0,className:B("pointer-events-none absolute inset-0 z-0 block",d,"border-super dark:border-super/30 border","rounded-lg","shadow-super/30 dark:shadow-super/5 shadow-[0_1px_3px_0]","dark:text-super","transition-colors duration-300","group-focus-visible/segmented-control:border-dashed",i),children:o.jsx(ge.div,{layoutId:`segmented-control-active-indicator-${n}`,transition:{duration:.1}})}),y.children]})},y.value)}),[r,s,p,c,d,i,n]),g=(()=>{switch(l){case"subtle":return"bg-subtle";case"default":return"bg-super/10 dark:bg-black/[0.18]";default:Gt(l)}})();return o.jsxs(l2e,{...u,className:B("group relative isolate flex h-fit",t),value:s,children:[o.jsx("div",{className:B("absolute inset-0",g,"dark:border dark:border-black/[0.04]","rounded-[10px]","transition-colors duration-300",a)}),o.jsx("div",{className:"p-two flex shrink-0 items-center",children:h})]})});g$.displayName="SegmentedControl";const y$=I.memo(e=>{const{className:t="",isActiveOption:n,icon:r,label:s,activeColor:a="text-super"}=e,i=B("transition-colors duration-300",{[a]:n,"text-quiet group-hover/segmented-control:text-foreground":!n});return o.jsxs("div",{className:B("relative z-10 flex h-8 min-w-9 items-center justify-center",{"py-xs gap-xs px-2.5":n||s},t),children:[r&&o.jsx(Wv,{buttonSize:"small",icon:r,iconClassName:B(i),showClicked:!1}),s&&o.jsx("div",{className:B("px-two font-sans text-sm leading-[1.125rem]",i),children:s})]})});y$.displayName="SegmentedControlOption";const f2e=I.memo(e=>{const{isFollowUp:t,layoutKey:n,value:r,onChange:s,className:a,variant:i}=e,l=Pa(),c=f.useMemo(()=>r!==void 0?io[r]||ie.SEARCH:l,[r,l]),{$t:u}=Z(),d=Ky(),m=jt(),{inputRef:p}=Ws(),h=rt(),{gpt4Limit:g}=Jn(),{specialCapabilities:y}=Zr(),v=GSe(),x=Dve(),{currentOpenedModal:b}=xt(),{preferredSearchModels:_,actions:w}=hn(),{isMaxUpsellEnabled:C}=Eu(),[S,E]=f.useState(ie.SEARCH),M=f.useRef(null),[k,A]=f.useState(!1),R=f.useRef(null);f.useEffect(()=>()=>{R.current&&clearTimeout(R.current)},[]);const{gateSearchModeSelection:O}=k_(),[L,P]=f.useState(()=>_[ie.SEARCH]===le.DEFAULT?!1:h||y.unlimitedProSearch),N=f.useCallback(W=>O(W?le.PRO:le.DEFAULT)?(P(!1),w.setPreferredSearchModel(ie.SEARCH,le.DEFAULT),!1):(P(W),w.setPreferredSearchModel(ie.SEARCH,W?le.PRO:le.DEFAULT),W),[w,O]),T=f.useCallback(W=>{switch(W){case ie.SEARCH:return L?_[W]??Dc(W):le.DEFAULT;case ie.RESEARCH:return _[W]??Dc(W);case ie.STUDIO:return _[W]??Dc(W);case ie.STUDY:return le.STUDY}},[L,_]),j=_k(),F=j(le.STUDY),U=f.useCallback(W=>{(W===ie.SEARCH||C)&&w.setPreferredSearchMode(W);const X=T(W);j(X)?(s?s(X):d(X,W),p.current?.focus(),A(!1)):O(X)},[w,j,O,T,p,C,s,d,A]),V=f.useCallback(W=>{if(N(W),c===ie.SEARCH){const X=W?le.PRO:le.DEFAULT;s?s(X):d(X)}},[s,d,c,N]),$=f.useMemo(()=>{const W=F?lK:lK.filter(G=>G!==ie.STUDY);function X(G){const{searchMode:J}=G,q=T(J),te=W.length<3&&!t;return{children:o.jsx("div",{"data-testid":`search-mode-${J}`,children:o.jsx(y$,{label:te?o.jsx(pe,{...ss[J].name}):void 0,icon:ig[J],isActiveOption:c===J})}),elementProps:{"aria-disabled":j(q)===!1?!0:void 0,onPointerEnter(re){R.current&&clearTimeout(R.current),M.current=re.currentTarget,E(J),R.current=setTimeout(()=>{A(!0)},800)},onPointerLeave(){R.current&&(clearTimeout(R.current),R.current=null)},onClick(){R.current&&(clearTimeout(R.current),R.current=null),p.current?.focus(),A(!1)}},label:u(ss[J].name),value:J}}return W.map(G=>X({searchMode:G}))},[T,t,u,c,j,p,F]);L&&g===0&&!y.unlimitedProSearch&&P(!1);let z;switch(S){case ie.SEARCH:{z=o.jsx(QSe,{isToggleActive:L,onToggleChange:V});break}case ie.RESEARCH:{z=o.jsx(XSe,{});break}case ie.STUDIO:{z=o.jsx(ZSe,{});break}case ie.STUDY:{z=o.jsx(JSe,{});break}}const Q=f.useMemo(()=>o.jsx(Ke,{initial:!1,mode:"popLayout",children:o.jsx(ge.div,{animate:{opacity:1},exit:{opacity:0},initial:{opacity:0},transition:{duration:.15},children:z},S)}),[z,S]),Y=f.useCallback(W=>{W.target.tagName===document.activeElement?.tagName&&(M.current=W.target,E(c),A(!0))},[c]);return o.jsx(qSe,{tooltipContent:Q,triggeredSearchModeElement:M.current,isOpen:k,setIsOpen:A,children:o.jsx(g$,{layoutKey:`segmented-search-mode-selector_${n??m}`,options:$,onFocus:Y,onValueChange:U,value:c,className:a,variant:i,areCuesEnabled:v&&!x&&!b})})});f2e.displayName="SegmentedSearchModeSelector";const m2e="(pointer: coarse)";function Wne(){return typeof window>"u"?!1:window.matchMedia(m2e).matches}function _Tt(){const e=fa(),[t,n]=f.useState(()=>Wne()||e);return f.useLayoutEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia(m2e);function s(){n(Wne())}return r.addEventListener("change",s),s(),function(){r.removeEventListener("change",s)}},[]),t}const v$=I.memo(({isFollowUp:e,layoutKey:t,value:n,onChange:r,className:s,buttonSize:a,variant:i="default"})=>{const l=_Tt(),c=fa();if(l||c){const u=(()=>{switch(i){case"default":return"primaryGhost";case"subtle":return"common"}})();return o.jsx(HSe,{isFollowUp:e,value:n,onChange:r,buttonSize:a,variant:u})}else return o.jsx(f2e,{isFollowUp:e,layoutKey:t,value:n,onChange:r,className:s,variant:i})});v$.displayName="SearchModeSelector";const wTt=({showIncognitoHint:e,showSearchModeSelector:t=!0,isFollowUp:n,layoutKey:r})=>{const s="ask-input-left-attributions",{$t:a}=Z(),{device:{isMacOS:i}}=At(),{isIncognito:l,incognitoType:c}=Ra({reason:s}),{isGovernmentRequestOrigin:u}=Zr();return o.jsx(VSe,{children:o.jsx(rc,{children:o.jsx("div",{className:B("gap-xs flex items-center"),children:o.jsxs(Ke,{initial:!1,mode:"popLayout",children:[l&&e&&o.jsx(ge.div,{className:"mr-xs flex shrink-0 items-center",initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},children:o.jsx(bn,{className:"max-w-[280px]",tooltipText:c===kd.GOVERNMENT?a({defaultMessage:"Zero Data Usage active",id:"9i8r+oh3pt"}):a({defaultMessage:"Create anonymous threads that don't appear in your library and expire after 24 hours.",id:"BBjMWPmxC0"}),keyboardShortcut:u?void 0:i?["",";"]:["ctrl",";"],asChild:!0,children:o.jsx("span",{children:o.jsx(Xd,{size:"small",inverse:!0,incognitoType:c})})})}),t&&o.jsx(v$,{isFollowUp:n,layoutKey:r})]})})})})},p2e=I.memo(wTt);p2e.displayName="AskInputLeftAttribution";const h2e=I.memo(({children:e,placement:t,isOpen:n,onOpen:r,onClose:s,connectorMenuItems:a,width:i="250px"})=>{const{isMobileStyle:l}=xe(),c=f.useMemo(()=>({style:{width:i}}),[i]);return o.jsx(Ke,{initial:!1,mode:"popLayout",children:o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:Nd},children:o.jsx(Jt,{placement:t,items:a,isMobileStyle:l,isOpen:n,onOpen:r,onClose:s,boxProps:c,children:e})},"attachment-selector")})});h2e.displayName="AttachmentSelector";var Hne={};const g2e=I.memo(({isOpen:e,fileType:t,size:n,tooltip:r,onOpen:s,onClose:a,onFilePickerOpen:i,onFilePickerClose:l,areFileAttachmentsAllowed:c,fileUploadErrorMessage:u,fileUploadWarningMessage:d,activeConnector:m=null,uploadedFiles:p=ue,handleStartUpload:h,handleFileInput:g,isBoxFilePickerOpen:y=!1,handleCloseBoxFilePicker:v,cleanupBoxFilePicker:x,microsoftFilePickerOptions:b=null,handleCloseMicrosoftFilePicker:_,handleSelectSharepointSite:w,isMicrosoftFilePickerOpen:C=!1,fileInputRef:S,isAudioVideoFilesEnabled:E=!1,setAttachmentErrorMessage:M})=>{const k="file-upload-button",{$t:A}=Z(),R=f.useRef(!1),{fileUploadUpsellTooltipOpen:O}=Ws(),{setFileUploadUpsellTooltipOpen:L}=Lo(),P=fa(),N=rt(),{uploadRateLimit:T}=Jn(),{hasActiveSubscription:j}=_t(),F=T??(j?Ade:jde),U=f.useCallback(Me=>Me.preventDefault(),[]),{trackEvent:V}=Ne(),{referrer:$,referrerId:z}=kF({mode:"file"}),{connectorsMap:Q}=Vb({reason:k}),{enabledFileConnectors:Y}=_y({reason:k}),{disabledFileConnectors:W}=MF({reason:k}),X=f.useMemo(()=>Q?.onedrive?.connected||Q?.sharepoint?.connected,[Q?.onedrive?.connected,Q?.sharepoint?.connected]),G=f.useCallback(()=>{switch(t){case"image":return A({defaultMessage:"images",id:"HVUWg4/ofn"});case"all":return A({defaultMessage:"files",id:"l17U7PEF+6"});default:return A({defaultMessage:"text or PDF files",id:"XFh9ob267W"})}},[A,t]),J=f.useCallback(()=>{switch(t){case"image":return IWe;case"all":return E?DWe:RWe;default:return E?OWe:AWe}},[t,E]),q=f.useCallback(Me=>{Me?V("attempt connector file attachment",{connectorName:Me}):V("opened file selector",{}),h?.(Me)},[h,V]),{handleConnect:te}=t3({reason:k}),[re,ae]=f.useState(!1),fe=f.useMemo(()=>{const Me={type:"default",text:A({defaultMessage:"Local files",id:"xMmQ4F7z3A"}),size:"small",icon:yie,onMouseDown:U,onClick:()=>q("local")},Ye=Y.map(at=>{const it=at.name;return{type:"default",text:Zs(it)??"",avatar:o.jsx("img",{src:ai(it)??"",alt:Zs(it),width:20,height:20}),onMouseDown:U,onClick:()=>q(it),show:tHe.includes(at.name)}});return W.length>0&&!P&&Ye.push({type:"nested",submenu:W.map(at=>({type:"default",size:"small",text:Zs(at.name),avatar:o.jsx("img",{src:ai(at.name)??"",alt:Zs(at.name),width:20,height:20}),rightElement:o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(ce,{icon:ao,size:"sm"})}),onClick:()=>te({connectorName:at.name,customReferrer:$??void 0,customReferrerId:z??void 0})})),isSubmenuOpen:re,onSubmenuOpen:()=>ae(!0),onSubmenuClose:()=>ae(!1),text:A({defaultMessage:"Connect files",id:"geEGjFxpOA"}),icon:R7,onMouseDown:U}),[Me,...Hne.NEXT_PUBLIC_IS_SIDECAR_BUILD?[]:Ye]},[A,Y,W,U,q,re,te,$,z,P]),de=f.useCallback(()=>{fe.length<=1||p.length>0?q(m??void 0):s?.()},[fe,p,m,q,s]),ve=f.useCallback(()=>{a?.()},[a]),_e=f.useMemo(()=>{if(r)return r;let Me=`${A({defaultMessage:"Attach",id:"Ye0Clmvfec"})} ${G()}`;return N?c?F!=null&&F>0&&F<=100?Me+=`. ${A({defaultMessage:"{remaining} left today",id:"V9HtlcGCOC"},{remaining:F})}`:jn(RR)&&(Me=A({defaultMessage:"Files attached to threads are retained for 7 days",id:"hTclTOMwb7"})):Me=A({defaultMessage:"File attachments are disabled by your organization",id:"HmmaBNCmcH"}):Me+=`. ${A({defaultMessage:"Sign in to attach files",id:"Ei6nUBg77Q"})}`,Me},[r,F,N,A,G,c]);f.useEffect(()=>{const Me=()=>{R.current&&(l?.(),R.current=!1)};return window.addEventListener("focus",Me),()=>window.removeEventListener("focus",Me)},[l]);const Se=f.useCallback(()=>{L(!1)},[L]),be=f.useCallback(()=>_?.(),[_]),me=f.useCallback(()=>v?.(),[v]),Ae=f.useCallback(Me=>w?.(Me),[w]),Ee=f.useCallback(()=>x?.(),[x]),je=f.useCallback(()=>{M?.("")},[M]);return o.jsx("div",{className:"flex items-center",children:o.jsx(bn,{tooltipText:A({defaultMessage:"Attach files",id:"8d3exg7mte"}),open:O,offset:3,closeOnClick:!0,onClickOutsideTooltip:Se,asChild:!0,children:o.jsxs("div",{children:[o.jsx(h2e,{placement:"bottom-start",connectorMenuItems:fe,isOpen:e,onOpen:de,onClose:ve,children:o.jsx(Te,{size:n,icon:L7,disabled:!c,toolTip:_e})}),o.jsx("input",{type:"file",multiple:!0,onClick:()=>{R.current=!0,i?.()},ref:S,onChange:Me=>{R.current=!1,g?.(Me.target.files?Array.from(Me.target.files):ue)},accept:J(),style:{display:"none"}}),X&&!Hne.NEXT_PUBLIC_IS_SIDECAR_BUILD&&o.jsx(BF,{options:b,isOpen:C,onClose:be,onSelectSite:Ae}),Q?.box?.connected&&o.jsx(bF,{isOpen:y,onClose:me,cleanupPicker:Ee}),o.jsx(Gl,{isVisible:!!u,variant:"error",message:u??"",handleClose:je}),o.jsx(Gl,{isVisible:!!d&&!u,variant:"warning",message:d??"",timeout:4})]})})})});g2e.displayName="FileUploadButton";var Ir;(function(e){e[e.FOCUS=0]="FOCUS",e[e.SOURCES=1]="SOURCES",e[e.RECENCY=2]="RECENCY",e[e.PRO_MODEL_PREFERENCE=3]="PRO_MODEL_PREFERENCE",e[e.ATTACHMENTS=4]="ATTACHMENTS",e[e.SEARCH_MODEL_SELECTOR=5]="SEARCH_MODEL_SELECTOR"})(Ir||(Ir={}));const zk=I.memo(({children:e,focusItems:t,placement:n,width:r="200px",isMobileStyle:s,isOpen:a=!1,onOpen:i,onClose:l,menuType:c=Ir.FOCUS,isSpace:u=!1})=>{const{$t:d}=Z(),{isMax:m}=_t(),p=Z(),h=f.useMemo(()=>{switch(c){case Ir.RECENCY:return d({defaultMessage:"Choose recency",id:"qyxEklVz9W"});case Ir.SOURCES:default:return d({defaultMessage:"Choose sources",id:"5HzLAl6K6z"})}},[c,d]),g=f.useCallback(_=>{_?.stopPropagation(),i?.()},[i]),y=f.useCallback(()=>{l?.()},[l]),v=f.useMemo(()=>o.jsx("div",{className:"gap-x-xs p-sm bg-subtle flex items-center justify-center rounded-t-xl text-center",children:o.jsx(D,{color:"light",variant:"tinyRegular",children:o.jsxs("div",{className:"gap-x-sm flex items-center",children:[o.jsx(ce,{icon:eo,size:"xs"}),p.formatMessage({defaultMessage:"Search includes all context from this space.",id:"uhJN0zDnSy"})]})})}),[p]),x=f.useMemo(()=>({width:r}),[r]),b=f.useMemo(()=>o.jsxs(H,{className:B("flex flex-col",{"max-h-[37vh]":u,"max-h-[42vh]":!u,"max-super-override":m}),style:x,children:[u&&c===Ir.SOURCES&&v,o.jsx(Wi,{orientation:"vertical",showIndicatorOnHover:!1,className:B("min-h-0 flex-1 overflow-auto",{"p-xs":u&&c===Ir.SOURCES}),children:o.jsx(Md,{items:t,disableScrollArea:!0})})]}),[v,t,u,c,x,m]);return s?o.jsxs(o.Fragment,{children:[o.jsx(en,{title:h,titleTextVariant:"baseSemi",variant:"bottom-left-sheet",actionList:ue,isOpen:a,onClose:y,noPadding:!0,children:o.jsx(Md,{textColor:"light",items:t})}),o.jsx("span",{onClick:g,children:e})]}):o.jsx($o,{isFileSearchEnabled:!0,isOpen:a,placement:n,onClose:y,onOpen:g,avoidSizeCollisions:!1,contentClassName:u&&c===Ir.SOURCES?"!p-0":"",content:b,hasInteractiveContent:!0,children:e})});zk.displayName="FocusDropdown";const y2e=I.memo(({isOpen:e,onOpen:t,onClose:n})=>{const r="recency-switcher",{$t:s}=Z(),a=Z(),{isMobileStyle:i}=xe(),l=Zi(),{trackEvent:c}=Ne(),{sources:u,recency:d,setRecency:m}=Jn(),p=Array.isArray(l?.slug)?l.slug[0]:l?.slug,{collection:h}=cc({collectionSlug:p,reason:r}),g=h?.focused_web_config?.link_configs??ue,y=u&&u.includes("web"),v=u&&g.length>0,x=!y&&!v,_=u&&u.includes("crunchbase")?!0:x,w=f.useCallback(E=>{m(E),c("search recency click",{recency:E}),n()},[c,m,n]),C=f.useMemo(()=>[{value:null,label:s({defaultMessage:"All Time",id:"52UMW3b1Z0"})},{value:"DAY",label:s({defaultMessage:"Today",id:"zWgbGgjUUg"})},{value:"WEEK",label:s({defaultMessage:"Last Week",id:"P3YB9A5Yho"})},{value:"MONTH",label:s({defaultMessage:"Last Month",id:"cfMkrE1iIn"})},{value:"YEAR",label:s({defaultMessage:"Last Year",id:"7PhUtcTRXC"})}],[s]),S=f.useMemo(()=>C.map(E=>({type:"default",text:E.label,active:d===E.value,onClick:()=>w(E.value)})),[C,d,w]);return o.jsx(zk,{focusItems:S,placement:"bottom-start",width:"200px",isMobileStyle:i,isOpen:e,onOpen:t,onClose:n,menuType:Ir.RECENCY,children:o.jsx(Te,{toolTip:a.formatMessage({defaultMessage:"Set recency for web search",id:"3/OG+oV8gT"}),size:"small",icon:Wm,disabled:_})})});y2e.displayName="RecencySwitcher";const CTt=(e,t)=>{const{value:n,loading:r}=It({flag:"search-model-reasoning-toggle",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function v2e(){const{variation:e,loading:t}=CTt(!1);return f.useMemo(()=>({isSearchModelReasoningToggleEnabled:e,isSearchModelReasoningToggleEnabledLoading:t}),[e,t])}const x2e=(e,t)=>{const{value:n,loading:r}=Su({flag:"model-outage-on-model-selector-ui",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},STt=ee({defaultMessage:"Advanced models in Perplexity {searchMode}",id:"XgqOYZp+oF"}),ETt=ee({defaultMessage:"Exclusive access for Max subscribers",id:"z2ijkWbdu6"});function b2e({reason:e,selectedSearchMode:t,currentModel:n,onModelSelect:r,isRewrite:s}){const{$t:a}=Z(),{organization:i}=_n({reason:e}),l=Ho(),c=fa(),u=i?.settings?.disabled_model_preferences??ue,{isMax:d}=_t(),{isMaxUpsellEnabled:m}=Eu(),{specialCapabilities:p}=Zr(),h=f.useRef(null),{variation:g}=x2e({}),y="left",v=0,x=f.useCallback(w=>{![le.PRO,le.ALPHA,le.BETA].includes(w)&&n!==void 0&&t===ie.SEARCH&&(h.current=w),r(w)},[r,t,n]),{menuItems:b,selectOptions:_}=f.useMemo(()=>{const w=c?"description":"tooltipText";function C(A,R){const O=[],L=[];return A.filter(P=>!R?.includes(P.search_model)).forEach(P=>{if(u.includes(P.search_model))return;const N=!!g[P.search_model];let T,j="super";P.subscription_tier===On.MAX?(T=a({defaultMessage:"max",id:"+LmzMnWE+j"}),j="maxBorder"):P.has_new_tag&&(T=a({defaultMessage:"new",id:"qlTe+eC7Ec"}),j="superBorder");const F={active:n===P.search_model,[w]:a(Yn[P.search_model]?.description),tooltipLayout:y,tooltipDelayDuration:v,bottomElement:N?o.jsx("div",{children:o.jsx(D,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"red",children:a({defaultMessage:"Temporary degraded performance",id:"Kc/pdbXoxJ"})})}):void 0,onClick(){if(m&&!d&&(t===ie.STUDIO||t===ie.RESEARCH||t===ie.SEARCH&&P.subscription_tier===On.MAX&&!p.maxModelSelection)){l({origin:s?Oe.RETRY_BUTTON:Oe.MODEL_SELECTOR,pitchMessage:{title:a(STt,{searchMode:a(ss[t].name)}),description:a(ETt)}});return}x(P.search_model)},size:"tiny",type:"default",text:a(Yn[P.search_model].name),badge:T,badgeVariant:j},U={value:P.search_model,label:a(Yn[P.search_model].name)},V=m&&!d&&P.subscription_tier===On.MAX;O.push(F),V||L.push(U)}),{menuItems:O,selectOptions:L}}const S=[],E=[],M=MTt(),k=M.filter(A=>!u.includes(A.search_model))[0]?.search_model||le.SONAR;if(t===ie.SEARCH){const A={selected:n===le.PRO,[w]:a({defaultMessage:"Selects the best model for each query",id:"TFsbkdJ4zc"}),onClick(){if(n===le.PRO){const L=h.current;x(L||k)}else x(le.PRO)},size:"tiny",text:a(Yn[le.PRO].name),type:"toggle",tooltipLayout:y,tooltipDelayDuration:v},R={value:le.PRO,label:a(Yn[le.PRO].name)};if(!s)S.push(A,{type:"separator",show:!0}),E.push(R);else{const L={active:n===le.ALPHA,[w]:a({defaultMessage:"In-depth reports on complex topics",id:"j7wjX6Ljpq"}),onClick(){x(le.ALPHA)},size:"tiny",text:a({defaultMessage:"Research",id:"JEe7dVso7F"}),type:"default",tooltipLayout:y,tooltipDelayDuration:v},P={value:le.ALPHA,label:a(Yn[le.ALPHA].name)};S.push(L),E.push(P);const N={active:n===le.BETA,[w]:a({defaultMessage:"Create projects from scratch",id:"nH9rAkplC/"}),onClick(){x(le.BETA)},size:"tiny",text:a({defaultMessage:"Labs",id:"ylFNoY79wa"}),type:"default",tooltipLayout:y,tooltipDelayDuration:v},T={value:le.BETA,label:a(Yn[le.BETA].name)};S.push(N,{type:"separator",show:!0}),E.push(T)}const O=C(M,!p.maxModelSelection&&!m&&!d?M.filter(L=>L.subscription_tier===On.MAX).map(L=>L.search_model):void 0);S.push(...O.menuItems),E.push(...O.selectOptions)}return{menuItems:S,selectOptions:E}},[u,a,t,n,g,d,m,l,x,s,c,p.maxModelSelection]);return f.useMemo(()=>({menuItems:b,selectOptions:_}),[b,_])}const MTt=()=>[...zfe],kTt=(e,t)=>{const{value:n,loading:r}=It({flag:"enable-sonar-internal-testing-in-web-frontend",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},TTt=[{label:Yn[le.SONAR].name,description:Yn[le.SONAR].description,search_model:le.SONAR,reasoning_model:null,has_new_tag:!1,subscription_tier:On.PRO},{label:Yn[le.CLAUDE_4_5_SONNET].name,description:Yn[le.CLAUDE_4_5_SONNET].description,search_model:le.CLAUDE_4_5_SONNET,reasoning_model:le.CLAUDE_4_5_SONNET_THINKING,has_new_tag:!0,subscription_tier:On.PRO},{label:Yn[le.GPT_5].name,description:Yn[le.GPT_5].description,search_model:le.GPT_5,reasoning_model:le.GPT_5_THINKING,has_new_tag:!1,subscription_tier:On.PRO},{label:Yn[le.GEMINI_2_FLASH].name,description:Yn[le.GEMINI_2_FLASH].description,search_model:null,reasoning_model:le.GEMINI_2_FLASH,has_new_tag:!1,subscription_tier:On.PRO},{label:Yn[le.GROK_4_NON_THINKING].name,description:Yn[le.GROK_4_NON_THINKING].description,search_model:le.GROK_4_NON_THINKING,reasoning_model:le.GROK_4,has_new_tag:!1,subscription_tier:On.PRO},{label:Yn[le.CLAUDE_4_1_OPUS].name,description:Yn[le.CLAUDE_4_1_OPUS].description,search_model:le.CLAUDE_4_1_OPUS,reasoning_model:le.CLAUDE_4_1_OPUS_THINKING,has_new_tag:!1,subscription_tier:On.MAX},{label:Yn[le.O3_PRO].name,description:Yn[le.O3_PRO].description,search_model:null,reasoning_model:le.O3_PRO,has_new_tag:!1,subscription_tier:On.MAX}],NTt={label:Yn[le.PPLX_SONAR_INTERNAL_TESTING].name,description:Yn[le.PPLX_SONAR_INTERNAL_TESTING].description,search_model:le.PPLX_SONAR_INTERNAL_TESTING,reasoning_model:null,has_new_tag:!1,subscription_tier:On.PRO},jTt={label:Yn[le.PPLX_SONAR_INTERNAL_TESTING_V2].name,description:Yn[le.PPLX_SONAR_INTERNAL_TESTING_V2].description,search_model:le.PPLX_SONAR_INTERNAL_TESTING_V2,reasoning_model:null,has_new_tag:!1,subscription_tier:On.PRO},_2e=e=>{const t=[...TTt];return e&&(t.push(NTt),t.push(jTt)),t},ATt=e=>_2e(e).reduce((t,n)=>(n.search_model&&(t[n.search_model]=n),n.reasoning_model&&(t[n.reasoning_model]=n),t),{}),ITt=(e,t)=>t[e],Fu=ot({best:{defaultMessage:"Best",id:"PzlMqGwwkm"},reasoning:{defaultMessage:"Reasoning",id:"Aw3qRf7hyO"},max:{defaultMessage:"max",id:"+LmzMnWE+j"},new:{defaultMessage:"new",id:"qlTe+eC7Ec"},research:{defaultMessage:"Research",id:"JEe7dVso7F"},labs:{defaultMessage:"Labs",id:"ylFNoY79wa"}}),RTt=ee({defaultMessage:"Advanced models in Perplexity {searchMode}",id:"XgqOYZp+oF"}),PTt=ee({defaultMessage:"Exclusive access for Max subscribers",id:"z2ijkWbdu6"}),OTt=ee({defaultMessage:"Temporary degraded performance",id:"Kc/pdbXoxJ"}),LTt=e=>{const{label:t,searchModel:n,reasoningModel:r,selected:s,badge:a,notice:i,onChange:l,tooltipText:c}=e,{$t:u}=Z(),d=f.useCallback(()=>{const v=n??r;if(!v){Ex.error("ModelMenuItem: No model to select",{searchModel:n,reasoningModel:r});return}l(v)},[l,n,r]),m=f.useCallback(()=>{!r||!n||l(r===s?n:r)},[l,r,n,s]),p=!n,h=s===n||s===r,g=u({defaultMessage:"Model does not have a fast model and reasoning will be used",id:"yeyas85Pgq"}),y=p?g:void 0;return o.jsxs(H,{variant:h?"subtler":void 0,className:"rounded-lg",children:[o.jsx(uF,{text:t,role:"menuitem",active:h,onClick:d,tooltipText:c,...a}),h&&i&&o.jsx(D,{className:"max-w-44 px-2 py-1 text-left",variant:"tinyRegular",color:"red",children:i}),h&&r&&o.jsx(dF,{selected:s===r,text:u({defaultMessage:"With reasoning",id:"xwd+5Brxnr"}),textClassName:"text-quiet",role:"menuitem",active:s===r,onClick:m,disabled:p,tooltipText:y})]})},QS=le.PRO,w2e=({currentModel:e,onModelSelect:t,origin:n,searchMode:r=ie.SEARCH})=>{const s="use-model-menu-items-with-reasoning",{$t:a}=Z(),{isMax:i}=_t(),{organization:l}=_n({reason:s}),{isMaxUpsellEnabled:c}=Eu(),{specialCapabilities:u}=Zr(),d=Ho(),m=f.useRef(null),{variation:p}=kTt(!1),h=f.useMemo(()=>ATt(p),[p]),{variation:g}=x2e({}),y=u.maxModelSelection||c||i,v=l?.settings?.disabled_model_preferences??ue,x=f.useCallback(E=>{const M=ITt(E,h);return c&&!i&&M.subscription_tier===On.MAX&&!u.maxModelSelection},[c,i,u.maxModelSelection,h]),b=f.useCallback(()=>{d({origin:n??Oe.MODEL_SELECTOR,pitchMessage:{title:a(RTt,{searchMode:a(ss[r].name)}),description:a(PTt)}})},[d,a,n,r]),_=f.useCallback(E=>{m.current=E,t(E)},[t]),w=f.useCallback(E=>E&&v.includes(E),[v]),C=f.useCallback(E=>E===QS||E in h,[h]),S=f.useMemo(()=>{const E=O=>{if(O.subscription_tier===On.MAX)return{badge:a(Fu.max),badgeVariant:"maxBorder"};if(O.has_new_tag)return{badge:a(Fu.new),badgeVariant:"superBorder"}},M={type:"custom",text:a(Fu.best),children:o.jsx(Yc,{type:"default",size:"tiny",text:a(Fu.best),active:e===QS,onClick:()=>{_(QS)}})},k={type:"separator",show:!0},R=_2e(p).filter(O=>!(!y&&O.subscription_tier===On.MAX||w(O.search_model)&&w(O.reasoning_model))).map(O=>{const L=w(O.search_model)?null:O.search_model,P=w(O.reasoning_model)?null:O.reasoning_model;if(!L&&!P)return null;const T=!!(L&&g[L]||P&&g[P])?a(OTt):void 0;return{type:"custom",text:a(O.label),children:o.jsx(LTt,{label:a(O.label),selected:e,searchModel:L,reasoningModel:P,notice:T,onChange:j=>{if(x(j)){b();return}_(j)},badge:E(O),tooltipText:a(O.description)})}}).filter(O=>O!==null);if(n===Oe.RETRY_BUTTON){const O={type:"custom",text:a(Fu.research),children:o.jsx(Yc,{type:"default",size:"tiny",text:a(Fu.research),active:e===le.ALPHA,onClick:()=>_(le.ALPHA)})},L={type:"custom",text:a(Fu.labs),children:o.jsx(Yc,{type:"default",size:"tiny",text:a(Fu.labs),active:e===le.BETA,onClick:()=>_(le.BETA)})};return[O,L,k,M,...R]}return[M,k,...R]},[a,n,e,y,w,g,x,b,_,p]);return f.useMemo(()=>({menuItems:S,isSupportedModel:C}),[S,C])},DTt=ot({chooseModel:{defaultMessage:"Choose a model",id:"fXlc3idTcy"}}),C2e=f.memo(({isOpen:e,onOpen:t,onClose:n,selectedModel:r,onModelChange:s})=>{const{$t:a}=Z(),{isMax:i}=_t(),{onActiveMenuChange:l}=Lo(),{activeMenu:c}=Ws(),u=Pa(),{configuredModel:d}=Jn(),m=Ky(),{isMobileStyle:p}=xe(),h=u===ie.SEARCH,g=f.useCallback(R=>{m(R,u)},[m,u]),y=f.useCallback(()=>{l(Ir.SEARCH_MODEL_SELECTOR)},[l]),v=f.useCallback(()=>{l(null)},[l]),x=r??d,b=s??g,_=e??c===Ir.SEARCH_MODEL_SELECTOR,w=t??y,C=n??v,E=!!Nt()?.get("openSearchModeSelector");f.useEffect(()=>{E&&y()},[E,y]);const{menuItems:M}=w2e({currentModel:x,onModelSelect:b,searchMode:u}),k=x===QS,A=f.useMemo(()=>({className:B("max-h-[40vh]",{"max-super-override":i})}),[i]);return o.jsx(Ke,{initial:!1,mode:"popLayout",children:h&&o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"linear"},children:o.jsx(Jt,{placement:"bottom-end",boxProps:A,items:M,isMobileStyle:p,isOpen:_,onOpen:w,onClose:C,children:o.jsx(Te,{extraCSS:"max-w-24 sm:max-w-none",icon:Hie,size:"small",textClassName:"text-[0.8125rem]",toolTip:a(k?DTt.chooseModel:Yn[x].name),variant:k?"common":"super"})})},"search-model-selector")})});C2e.displayName="SearchModelSelectorWithReasoning";const FTt=({selectedModel:e,onModelChange:t}={})=>{const n="search-model-selector",{isMobileStyle:r}=xe(),{$t:s}=Z(),{onActiveMenuChange:a}=Lo(),{activeMenu:i}=Ws(),l=Pa(),{configuredModel:c}=Jn(),u=Ky(),d=e||c,{isMax:m}=_t(),p=l===ie.SEARCH,h=[le.DEFAULT,le.PRO,le.ALPHA,le.BETA].includes(d),y=!!Nt()?.get("openSearchModeSelector");f.useEffect(()=>{y&&a(Ir.SEARCH_MODEL_SELECTOR)},[y,a]);const v=f.useCallback(C=>{u(C,l)},[u,l]),{menuItems:x}=b2e({reason:n,selectedSearchMode:l,currentModel:d,onModelSelect:t||v}),b=f.useCallback(()=>{a(Ir.SEARCH_MODEL_SELECTOR)},[a]),_=f.useCallback(()=>{a(null)},[a]),w=f.useMemo(()=>({className:B("max-h-[40vh]",{"max-super-override":m})}),[m]);return o.jsx(Ke,{initial:!1,mode:"popLayout",children:p&&o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"linear"},children:o.jsx(Jt,{placement:"bottom-end",boxProps:w,items:x,isMobileStyle:r,isOpen:i===Ir.SEARCH_MODEL_SELECTOR,onOpen:b,onClose:_,children:o.jsx(Te,{extraCSS:"max-w-24 sm:max-w-none",icon:Hie,size:"small",textClassName:"text-[0.8125rem]",toolTip:s(h?{defaultMessage:"Choose a model",id:"fXlc3idTcy"}:Yn[d].name),variant:h?"common":"super"})})},"search-model-selector")})},S2e=I.memo(({selectedModel:e,onModelChange:t})=>{const{isSearchModelReasoningToggleEnabled:n}=v2e();return n?o.jsx(C2e,{selectedModel:e,onModelChange:t}):o.jsx(FTt,{selectedModel:e,onModelChange:t})});S2e.displayName="SearchModelSelector";const E2e=I.memo(()=>{const{isMaxAssistantMode:e,actions:t}=hn(),n=LRe(),[r,s]=f.useState(!n),a=f.useRef(null),i=f.useRef(null),l=f.useCallback(()=>{t.setIsMaxAssistantModeEnabled(!e)},[t,e]),c=f.useCallback(()=>{s(!r)},[r]);f.useEffect(()=>{r&&DRe()},[r]),f.useEffect(()=>{const d=m=>{r&&i.current&&!i.current.contains(m.target)&&a.current&&!a.current.contains(m.target)&&s(!1)};return r&&document.addEventListener("mousedown",d,!0),()=>{document.removeEventListener("mousedown",d,!0)}},[r]);const u=f.useMemo(()=>o.jsxs("div",{"data-color-scheme":"dark",ref:i,className:B("bg-base absolute bottom-full left-1/2 z-50 mb-1 -translate-x-1/2 px-4 py-3","shadow-overlay w-72 rounded-lg"),children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(D,{color:"default",variant:"baseSemi",children:o.jsx(pe,{defaultMessage:"Enable Max Assistant",id:"148Ehuq5Qh"})}),o.jsx(O_,{className:"text-max h-3"})]}),o.jsx("div",{className:"flex items-center gap-6",children:o.jsx(Ro,{active:e??!1,onChange:l,size:"default"})})]}),o.jsx(D,{color:"default",variant:"small",className:"text-pretty",children:o.jsx(pe,{defaultMessage:"Thinks longer with deeper reasoning for complex workflows and questions.",id:"UOpEyLDsXA"})})]}),[e,l]);return o.jsxs("div",{className:"relative",ref:a,children:[o.jsx(Te,{size:Kt.small,variant:"common",icon:xd,onClick:c}),r&&u]})});E2e.displayName="SidecarMoreMenuButton";const M2e=I.memo(({handleFileInput:e})=>{const{$t:t}=Z(),{sidecarSourceTab:{url:n}}=Hr(),r=Zn();f.useEffect(()=>r.subscribeScreenshotCaptured(a=>{e?.([a],"local",oD)}),[r,e]);const s=f.useCallback(async()=>{r.captureSourceTabScreenshotV2({sourceTabUrl:n})},[r,n]);return o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(Te,{onClick:s,size:Kt.small,variant:"common",toolTip:t({defaultMessage:"Screenshot",id:"9a+SKtXKhe"}),icon:I8e})})});M2e.displayName="SidecarScreenshotButton";const k2e=({serverName:e,iconUrl:t,size:n="md",border:r=!1})=>t?o.jsx("img",{src:t,alt:e,className:B("object-contain",n==="sm"&&"size-5",n==="md"&&"p-xs size-11",n==="lg"&&"p-sm size-14",n==="xl"&&"p-xs size-12",r&&"ring-subtlest rounded-md ring-1")}):o.jsxs("span",{className:B("flex flex-col items-center justify-center font-medium leading-none",n==="sm"&&"size-5 text-xs",n==="md"&&"p-xs size-11 text-sm",n==="lg"&&"p-sm size-14 text-sm",n==="xl"&&"p-xs size-12 text-sm",r&&"border-subtlest bg-subtler rounded-lg border"),children:[o.jsx("span",{children:e.slice(0,2).toUpperCase()}),o.jsx("span",{className:"font-mono text-[6px]",children:"MCP"})]}),UTt=()=>typeof window<"u"&&window.location?.origin?window.location.origin:"https://www.perplexity.ai",zne=e=>{const t=UTt();return Gge(`${t}${e}`)?.href||`${t}${e}`},BTt=()=>[{id:"imessage",icon_url:zne("/static/mcpb/imessage.png"),download_url:zne("/static/mcpb/imessage_v0.0.9.mcpb"),manifest:{$schema:"https://static.modelcontextprotocol.io/schemas/2025-08-26/mcpb.manifest.schema.json",dxt_version:"0.1",name:"imessage",display_name:"Messages",version:"0.0.9",description:"Send and read messages using Apple's Messages app",long_description:`This tool lets Perplexity work with your Mac's Messages app. You can send messages, read messages, and ask Perplexity to help you understand what's important.

It uses Mac system features to connect to Messages. Your Mac will ask for permission before it can access Messages or Contacts. This is not made by Apple.`,license:"MIT",author:{name:"Perplexity Inc",email:"support@perplexity.ai",url:"https://www.perplexity.ai/"},homepage:"https://www.perplexity.ai/",icon:"icon.png",tools:[{name:"list_contacts",description:'List contacts. When query is provided, search for contacts by name. Use it first to get a handle id, phone numbers, or emails. This tool is more preferred to be used first than "list_chats" tool. If this tool returns empty results, try to use "list_chats" tool to find a contact.'},{name:"list_chats",description:"List chats from Messages. When query is provided, search for chats by phone number (preferrable) or chat name (if phone number is not available)."},{name:"create_chat",description:"Create a new chat with a specific contact"},{name:"read_chat",description:"Read Messages from a specific chat"},{name:"send_imessage",description:"Send a Message to specific chat"}],server:{type:"node",entry_point:"server/index.js",mcp_config:{command:"node",args:["${__dirname}/server/index.js"],env:{HOME:"${HOME}"}}},compatibility:{comet:">=139.0.0",platforms:["darwin"],runtimes:{node:">=22.0.0"}}}}],T2e=()=>{const e=Hr(),t=f.useMemo(()=>{if(!e.platformInfo)return;const{isMac:n,isWindows:r,isLinux:s}=e.platformInfo;if(n)return"darwin";if(r)return"win32";if(s)return"linux"},[e.platformInfo]);return We({queryKey:["comet/available_dxts",t],queryFn:async()=>BTt().filter(n=>n.manifest.compatibility?.platforms?t&&n.manifest.compatibility.platforms.includes(t):!0)})},N2e=(e,t)=>t.dxt_name?e?.find(n=>n.id===t.dxt_name)?.icon_url:void 0,x$=()=>{const{$t:e}=Z(),t=Hr(),{data:n}=T2e(),r=f.useCallback((i,l)=>i.status!=="running"||!i.tools_count?e({defaultMessage:"Server is not running",id:"uHAMkeMTHv"}):l===i.tools_count?e({defaultMessage:"{total} tools available",id:"uPrPRhtLz8"},{total:i.tools_count}):e({defaultMessage:"{enabled} of {total} tools available",id:"KLHoDUDmUH"},{enabled:l,total:i.tools_count}),[e]),s=f.useMemo(()=>Object.fromEntries(t.mcpStdioServers?.map(i=>{const l=Phe(t.installedDxts,i),c=N2e(n,i),u=l?.display_name??l?.name??i.name,d=t.mcpTools?.[i.name]??[],m=t.mcpToolsSettings?.[i.name]??{},p=d.filter(h=>{const g=h.tool?.name??h.id??"",y=m[g];return y?y.enabled!==!1:!0});return[i.name,{icon:void 0,avatar:o.jsx(k2e,{serverName:u,iconUrl:c,size:"sm"}),text:u,disabled:i.status!=="running"||!i.tools_count,description:r(i,p.length),type:"toggle"}]})??[]),[t.mcpStdioServers,t.mcpTools,t.mcpToolsSettings,t.installedDxts,n,r]),a=f.useCallback(i=>{const l=t.mcpDisabledServers??new Set,c=new Set(l);l.has(i)?c.delete(i):c.add(i),t.actions.setMcpDisabledServers(c)},[t.actions,t.mcpDisabledServers]);return f.useMemo(()=>({cometMcpSources:s,toggleCometMcpSource:a,cometMcpDisabledServers:t.mcpDisabledServers}),[s,a,t.mcpDisabledServers])},VTt=async({connectionType:e,reason:t,referrer:n,referrerId:r})=>{try{const s={connection_type:e};n&&(s.referrer=n),r&&(s.referrer_id=r);const{data:a,error:i}=await se.GET("/rest/connections/connect",t,{params:{query:s},timeoutMs:Pe()});if(i)throw new Error(`Failed to get ${e} connection url`,{cause:i});return a}catch(s){throw ne.error(`Error fetching ${e} connection url:`,s),s}},$Tt=async({connectionType:e,reason:t})=>{try{const{data:n,error:r}=await se.GET("/rest/connections/oauth_callback_merge",t,{params:{query:{connection_type:e}},timeoutMs:Pe()});if(r)throw new Error(`Failed to handle OAuth callback for ${e}`,{cause:r});return n}catch(n){throw ne.error(`Error handling OAuth callback for ${e}:`,n),n}},j2e=Wt("MergeAgentHandlerContext",null),WTt=()=>{const e=f.useContext(j2e);if(!e)throw new Error("useMergeAgentHandler must be used within a MergeAgentHandlerProvider");return e},HTt=({children:e})=>{const t=ht(),[n,r]=f.useState(null),s=f.useCallback(async()=>{const{connectionType:m,onError:p,onSuccess:h}=n??{};if(!m){const g=new Error("Connection type is not defined for OAuth callback");Ex.error("Connection type is not defined for OAuth callback"),p?.(g);return}try{await $Tt({reason:"merge_oauth_success",connectionType:m}),t.invalidateQueries({queryKey:q5()}),h?.()}catch(g){Ex.error("Failed to handle OAuth callback:",g),p?.(g)}finally{r(null)}},[n,t]),a=f.useCallback(()=>{const{onExit:m}=n??{};r(null),m?.()},[n]),{open:i,isReady:l}=jge({linkToken:n?.token||"",onSuccess:s,onExit:a});f.useEffect(()=>{l&&n?.token&&i()},[l,n?.token,i]);const c=f.useCallback(m=>{r(m)},[]),u=f.useCallback(()=>{r(null)},[]),d=f.useMemo(()=>({startMergeAuth:c,clearActiveAuth:u}),[c,u]);return o.jsx(j2e.Provider,{value:d,children:e})},zTt=({reason:e})=>{const{trackEvent:t}=Ne(),{deprecatedOpenToast:n}=gn(),{$t:r}=Z(),s=jt(),{startMergeAuth:a}=WTt(),{handleConnect:i}=t3({reason:e}),l=f.useCallback(async(c,u)=>{const d=Mot(c);if(!d){ne.error("Connection type is not defined for OAuth callback");return}if(kot(d)){try{const{redirect_url:m,token:p}=await VTt({connectionType:d,reason:e,referrer:u?.referrer,referrerId:u?.referrerId});if(m)Hi(m,"Enabling connector");else if(p)a({token:p,connectionType:d,connectorName:c});else throw new Error("No redirect URL or token received")}catch{n(r({defaultMessage:"Unable to start connection.",id:"SPIzcd/Xa2"}),"error",3)}return}if(d==="GCAL"){await i({connectorName:c,redirectPath:s||void 0,unauthedRedirectPath:s||void 0});return}await i({connectorName:c}),t("attempt connector authentication",{connectorName:c})},[r,s,e,i,n,t,a]);return f.useMemo(()=>({enableConnection:l}),[l])},yo=(e,t,n)=>{const r=ai(e),s=Zs(e),a={avatar:r?o.jsx(wt,{user:r,size:"small",rounded:!1,showBackground:!1,altText:s}):void 0,text:s};if(t)return{...a,icon:void 0,type:"toggle"};const l=olt(e)?()=>n.openModal(e):()=>n.enableConnection(e);return{...a,icon:void 0,type:"default",rightElement:o.jsx(D,{color:"light",children:o.jsx(ce,{icon:ao,size:"sm"})}),onClick:l}},GTt=({reason:e})=>{const t=Z(),n=gt(),{isMobileStyle:r}=xe(),{hasAccessToProFeatures:s}=_t(),{openModal:a,closeModal:i}=xt(),{isEnterprise:l,organization:c}=_n({reason:e}),u=UF({reason:e,feature:ld.SOURCES}),{enableConnection:d}=zTt({reason:e}),m=fn(),{enabledConnectors:p,enabledFileConnectors:h}=_y({reason:e}),g=Cu(),{isAllowed:y,isConnected:v}=Eve({reason:e}),{referrer:x,referrerId:b}=kF({mode:"file"}),[_,w]=f.useState(!1),C=f.useCallback(()=>{w(!0)},[]),S=f.useCallback(()=>{w(!1)},[]),E=f.useCallback(G=>{const J=ai(G);a("connectorsEnableModal",{connectorName:G,connectorAvatar:J,handleEnable:()=>{d(G,{referrer:x??void 0,referrerId:b??void 0}),i()}})},[a,i,d,x,b]),M=f.useMemo(()=>({enableConnection:d,openModal:E}),[d,E]),{value:k}=Rr({flag:"gcal-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:c?.uuid??""}}),{value:A}=Rr({flag:"enable-remote-mcp-tools",defaultValue:!1,extraAttributes:{orgUuid:c?.uuid??""}}),R=A&&s,O=k&&!m,{value:L}=Rr({flag:"outlook-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:c?.uuid??""}}),P=f.useCallback(G=>{G.stopPropagation(),n.push(`${g}/files`)},[n,g]),N=f.useMemo(()=>o.jsx("div",{className:"mr-sm flex",children:o.jsx(bn,{tooltipText:t.formatMessage({defaultMessage:"Manage my files",id:"o8eQg7byBv"}),children:o.jsx(D,{color:"light",onClick:P,children:o.jsx(ce,{icon:R8e,size:"sm"})})})}),[t,P]),{cometMcpSources:T,toggleCometMcpSource:j}=x$(),F=f.useMemo(()=>Object.fromEntries(Object.entries(T)?.map(([G,J])=>[`comet_mcp_${G}`,{...J,onClick:()=>{j(G)}}])),[T,j]),U=f.useMemo(()=>{const G=R&&y("linear_alt")?{linear_alt:yo("linear_alt",v("linear_alt"),M)}:{},J=y("google_drive")&&u?{google_drive:yo("google_drive",v("google_drive"),M)}:{},q=R&&y("slack")?{slack:yo("slack",v("slack"),M)}:{},te=O&&y("gcal")?{gcal:yo("gcal",v("gcal"),M)}:{},re=R&&y("notion_mcp")?{notion_mcp:yo("notion_mcp",v("notion_mcp"),M)}:{},ae=R&&y("github_mcp_direct")?{github_mcp_direct:yo("github_mcp_direct",v("github_mcp_direct"),M)}:{},fe=R&&y("asana_mcp_direct")?{asana_mcp_direct:yo("asana_mcp_direct",v("asana_mcp_direct"),M)}:{},de=R&&y("asana_mcp_merge")?{asana_mcp_merge:yo("asana_mcp_merge",v("asana_mcp_merge"),M)}:{},ve=R&&y("atlassian_mcp_direct")?{atlassian_mcp_direct:yo("atlassian_mcp_direct",v("atlassian_mcp_direct"),M)}:{},_e=R&&y("slack_direct")?{slack_direct:yo("slack_direct",v("slack_direct"),M)}:{},Se=R&&y("jira_mcp_merge")?{jira_mcp_merge:yo("jira_mcp_merge",v("jira_mcp_merge"),M)}:{},be=R&&y("confluence_mcp_merge")?{confluence_mcp_merge:yo("confluence_mcp_merge",v("confluence_mcp_merge"),M)}:{},me=R&&y("microsoft_teams_mcp_merge")?{microsoft_teams_mcp_merge:yo("microsoft_teams_mcp_merge",v("microsoft_teams_mcp_merge"),M)}:{};return{...G,...re,...ae,...q,...te,...J,...fe,...de,...ve,..._e,...Se,...be,...me,...F,...p?.some(Ee=>Ee.name==="crunchbase")?{crunchbase:{icon:void 0,avatar:o.jsx(wt,{user:x5,rounded:!1,showBackground:!1,size:"small",altText:"Crunchbase"}),text:b5,type:"toggle"}}:{},...p?.some(Ee=>Ee.name==="factset")?{factset:{icon:void 0,avatar:o.jsx(wt,{user:v5,rounded:!1,showBackground:!1,size:"small",altText:"FactSet"}),text:Pb,type:"toggle"}}:{},...p?.some(Ee=>Ee.connection_type==="ONEDRIVE")&&u?{onedrive:{icon:void 0,avatar:o.jsx(wt,{user:bo(Tt.ONEDRIVE)||"",rounded:!1,showBackground:!1,size:"small",altText:Cd}),text:Cd,type:"toggle"}}:{},...p?.some(Ee=>Ee.connection_type==="SHAREPOINT")&&u?{sharepoint:{icon:void 0,avatar:o.jsx(wt,{user:bo(Tt.SHAREPOINT)||"",rounded:!1,showBackground:!1,size:"small",altText:Sd}),text:Sd,type:"toggle"}}:{},...p?.some(Ee=>Ee.connection_type==="WILEY")&&l?{wiley:{icon:void 0,avatar:o.jsx(wt,{user:ou,rounded:!1,showBackground:!1,size:"small",altText:"Wiley"}),text:_5,type:"toggle"}}:{},...A&&y("wiley_mcp_cashmere")?{wiley_mcp_cashmere:{icon:void 0,avatar:o.jsx(wt,{user:ou,rounded:!1,showBackground:!1,size:"small",altText:Wx}),text:Wx,type:"toggle"}}:{},...A&&y("cbinsights_mcp_cashmere")?{cbinsights_mcp_cashmere:{icon:void 0,avatar:o.jsx(wt,{user:w5,rounded:!1,showBackground:!1,size:"small",altText:Hx}),text:Hx,type:"toggle"}}:{},...A&&y("pitchbook_mcp_cashmere")?{pitchbook_mcp_cashmere:{icon:void 0,avatar:o.jsx(wt,{user:C5,rounded:!1,showBackground:!1,size:"small",altText:zx}),text:zx,type:"toggle"}}:{},...A&&y("statista_mcp_cashmere")?{statista_mcp_cashmere:{icon:void 0,avatar:o.jsx(wt,{user:S5,rounded:!1,showBackground:!1,size:"small",altText:Gx}),text:Gx,type:"toggle"}}:{},...p?.some(Ee=>Ee.connection_type==="DROPBOX")&&u?{dropbox:{icon:void 0,avatar:o.jsx(wt,{user:bo(Tt.DROPBOX)||"",rounded:!1,showBackground:!1,size:"small",altText:iu}),text:iu,type:"toggle"}}:{},...p?.some(Ee=>Ee.connection_type==="OUTLOOK")&&L?{outlook:{icon:void 0,avatar:o.jsx(wt,{user:bo(Tt.OUTLOOK)||"",rounded:!1,showBackground:!1,size:"small",altText:sg}),text:sg,type:"toggle"}}:{}}},[p,l,u,O,L,R,A,y,v,F,M]),{selectedConnectors:V,excessToggleConnectors:$}=f.useMemo(()=>{const G=Object.entries(U);if(G.length===0)return{selectedConnectors:[],excessToggleConnectors:[]};const J=G.filter(([,ae])=>ae.type==="toggle"),q=G.filter(([,ae])=>ae.type==="default");if(r)return{selectedConnectors:[...J,...q],excessToggleConnectors:[]};const te=[...J.slice(0,3),...q].slice(0,3),re=J.slice(3);return{selectedConnectors:te,excessToggleConnectors:re}},[U,r]),z=f.useMemo(()=>{if($.length===0)return null;const G=$.map(([,J])=>J.avatar).filter(Boolean);return G.length===0?null:_m(G,{maxVisuals:5,size:"sm",stackDirection:"right",shape:"square",overlappingClassName:"bg-transparent ring-transparent",containerClass:"flex items-center h-5",innerClassName:"flex items-center gap-1",showRemainderCount:!1})},[$]),Q=f.useMemo(()=>({type:"default",icon:R7,text:t.formatMessage({defaultMessage:"Browse all connectors",id:"vyHg7PluiB"}),rightElement:o.jsx(D,{color:"light",children:o.jsx(ce,{icon:ao,size:"sm"})}),onClick:()=>n.push(`${g}/connectors`)}),[t,n,g]),Y=f.useMemo(()=>{if(V.length===0)return null;const G=Object.fromEntries(V);return $.length===0?G.browse_all_connectors=Q:G.more_connectors={type:"nested",text:t.formatMessage({defaultMessage:"More connectors",id:"3l4CuVEyHY"}),submenuItems:[...$,{type:"separator",show:!0},Q],isSubmenuOpen:_,onSubmenuOpen:C,onSubmenuClose:S,textTrailingElement:z,menuWidth:"300px"},{groupId:"connectors",sources:G}},[V,$,Q,t,_,C,S,z]),W=f.useMemo(()=>{const G=h.map(re=>{const ae=re.name,fe=ai(ae)??"";return o.jsx(wt,{user:fe,rounded:!1,showBackground:!1,size:"small"},ae)});let J=null;G.length>0&&(J=_m(G,{...G.length<=3&&{rightText:o.jsx(D,{color:"light",variant:"tinyRegular",children:t.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"})})},maxVisuals:G.length,size:"sm"}));const q=[],te={web:{icon:U8e,avatar:void 0,text:t.formatMessage({defaultMessage:"Web",id:"B6CB3748fZ"}),description:t.formatMessage({defaultMessage:"Search across the entire Internet",id:"L+Gw+J7uDs"}),type:"toggle"},scholar:{icon:F8e,avatar:void 0,text:t.formatMessage({defaultMessage:"Academic",id:"mbxIJyT8C5"}),description:t.formatMessage({defaultMessage:"Search academic papers",id:"IVRQQmrqTD"}),type:"toggle"},social:{icon:D8e,avatar:void 0,text:t.formatMessage({defaultMessage:"Social",id:"qOLogguG/7"}),description:t.formatMessage({defaultMessage:"Discussions and opinions",id:"g9xPuArp4v"}),type:"toggle"},edgar:{icon:L8e,avatar:void 0,text:cD,description:"Search SEC filings",type:"toggle"},...l?{org:{icon:O8e,avatar:void 0,text:t.formatMessage({defaultMessage:"Org files",id:"iWDsD738/m"}),description:t.formatMessage({defaultMessage:"Search files from your organization",id:"Ak5CW53mGi"}),type:"toggle"}}:{},...u&&l?{my_files:{icon:P8e,avatar:void 0,text:t.formatMessage({defaultMessage:"My files",id:"bYbrKKlKgS"}),description:h.length===0?t.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"}):"",bottomElement:J??void 0,rightElement:N,type:"toggle"}}:{}};return Object.keys(te).length>0&&q.push({groupId:"core",sources:te}),Y&&q.push(Y),q},[h,t,l,u,N,Y]),X=f.useMemo(()=>{const G={};return W.forEach(J=>{Object.entries(J.sources).forEach(([q,te])=>{te.type==="toggle"&&(G[q]=te)})}),G},[W]);return f.useMemo(()=>({RootSources:X,RootSourceGroups:W,ConnectionSources:U}),[U,X,W])},A2e=f.memo(({children:e})=>o.jsx("div",{className:"flex size-5 items-center justify-center",children:e}));A2e.displayName="IconWrapper";const I2e=f.memo(({isOpen:e,onOpen:t,onClose:n,defaultSource:r,selectedSources:s,onSourcesChange:a,variant:i="icon",hiddenSources:l,buttonVariant:c="default",useThreadSources:u=!1,mentionedConnectors:d=[]})=>{const m="sources-switcher",{$t:p}=Z(),{isMobileStyle:h}=xe(),{trackEvent:g}=Ne(),{fileRepoInfo:y}=nl({reason:m}),v=y?.file_repository_type==="COLLECTION",{RootSources:x,RootSourceGroups:b,ConnectionSources:_}=GTt({reason:m}),{updateSources:w}=Dy({defaultSource:r,reason:m}),{sources:C}=Jn(),{firstResult:S}=Vt(),{cometMcpSources:E,cometMcpDisabledServers:M}=x$(),k=S?.sources?.sources??ue,A=f.useMemo(()=>s??(u?k:C),[s,u,k,C]),R=a??w,O=f.useCallback($=>$.preventDefault(),[]),L=f.useCallback($=>{$.preventDefault(),$.stopPropagation()},[]),P=f.useCallback($=>{g("search source click",{source:$}),R($)},[g,R]),N=f.useMemo(()=>[...A,...Object.keys(E).filter($=>!M?.has($)).map($=>`comet_mcp_${$}`)],[A,E,M]),T=f.useCallback(($,z)=>{const Q=N?.includes($),Y=d.includes($);return{type:z.type,text:z.text,description:z.description,size:"small",selected:Q||Y,disabled:Y,tooltipText:Y?p(P2e):void 0,icon:z.icon,avatar:z.avatar,link:z.link,onMouseDown:L,onClick:()=>z.onClick?z.onClick():P($),onLinkClick:z.onLinkClick,bottomElement:z.bottomElement,rightElement:z.rightElement,testId:`source-toggle-${$}`,submenu:z.submenuItems?.map(W=>{if(Array.isArray(W)&&W.length===2){const[X,G]=W;return T(X,G)}return W}),isSubmenuOpen:z.isSubmenuOpen,onSubmenuOpen:z.onSubmenuOpen,onSubmenuClose:z.onSubmenuClose,textTrailingElement:z.textTrailingElement,menuWidth:z.menuWidth}},[N,L,P,d,p]),j=f.useMemo(()=>{const $={type:"separator",show:!0};return b.map(Y=>Object.entries(Y.sources).filter(([W])=>!l?.includes(W)).map(([W,X])=>T(W,X))).flatMap((Y,W)=>W===0?Y:[$,...Y])},[b,l,T]),F=f.useMemo(()=>{if(!N?.length)return o.jsx(ce,{icon:um,size:"sm"});const $=[];return N.forEach(z=>{let Q;if(z in x?Q=x[z]:z in _&&(Q=_[z]),Q){const Y=Q,W=Y.avatar||o.jsx(A2e,{children:Y.icon?o.jsx(ce,{icon:Y.icon,size:"sm"}):o.jsx(ce,{icon:um,size:"sm"})});$.push(W)}}),_m($,{isOverlapping:!0,maxVisuals:R2e,size:"md",stackDirection:"right"})},[N,x,_]),U=f.useMemo(()=>{if(N?.length===1){const $=N[0]??"";return $ in x?x[$]?.text:$ in _?_[$]?.text:$}return p({defaultMessage:"{count} sources",id:"l1+6PggBqU"},{count:N?.length||0})},[N,x,_,p]),V=(()=>{switch(c){case"subtle":return"bg-subtle";case"default":return"!bg-subtler";default:Gt(c)}})();return u&&(!N||N.length===0)?null:o.jsx(zk,{focusItems:j,placement:"bottom-end",width:"300px",isMobileStyle:h,isOpen:e,onOpen:u?void 0:t,onClose:n,menuType:Ir.SOURCES,isSpace:v,children:i==="button"?o.jsx(he,{text:U,extraCSS:B("px-4 w-full !h-10 border-0 !outline-none !justify-start font-normal",V),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Dn,onMouseDown:u?void 0:O,disabled:u,"data-testid":"sources-switcher-button"}):o.jsx(Te,{toolTip:p(u?{defaultMessage:"Start a new thread to change sources",id:"jKXi56aXv8"}:{defaultMessage:"Set sources for search",id:"yAyuRoLEjt"}),tooltipProps:u?{delayDuration:0}:void 0,size:"small",onMouseDown:u?void 0:O,disabled:u,"data-testid":"sources-switcher-button",variant:u?"noHover":"common",extraCSS:B("px-[4px]",{"!aspect-auto":N&&N.length>1},{"!cursor-default [&:active]:!scale-100 [&:active]:!duration-0 opacity-60":u}),leadingComponent:F})})});I2e.displayName="SourcesSwitcherV2";const qTt=(e,t)=>{const{value:n,loading:r}=It({flag:"sources-switcher-redesign",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},R2e=5,P2e=ee({defaultMessage:"This source is enabled because it is mentioned in your query",id:"EkzkLGwuYt"}),O2e=I.memo(({children:e})=>o.jsx("div",{className:"flex size-5 items-center justify-center",children:e}));O2e.displayName="IconWrapper";const L2e=I.memo(e=>{const t="sources-switcher",{$t:n}=Z(),{isOpen:r,onOpen:s,onClose:a,defaultSource:i,selectedSources:l,onSourcesChange:c,variant:u="icon",hiddenSources:d,buttonVariant:m="default",useThreadSources:p=!1,allowCometRestrictions:h=!0,mentionedConnectors:g=[]}=e,{isMobileStyle:y}=xe(),{trackEvent:v}=Ne(),{fileRepoInfo:x}=nl({reason:t}),b=x?.file_repository_type==="COLLECTION",{RootSources:_,ConnectionSources:w,NestedConnectionSources:C}=Mve({reason:t,allowCometRestrictions:h}),{updateSources:S}=Dy({defaultSource:i,reason:t}),{sources:E}=Jn(),{isEnterprise:M}=_n({reason:t}),{firstResult:k}=Vt(),A=k?.sources?.sources??ue,R=f.useMemo(()=>l??(p?A:E),[l,p,A,E]),O=c??S,L=f.useCallback(J=>J.preventDefault(),[]),P=f.useCallback(J=>{J.preventDefault(),J.stopPropagation()},[]),N=f.useCallback(J=>{v("search source click",{source:J}),O(J)},[v,O]),T=f.useCallback((J,q)=>{const te=R?.includes(J),re=g.includes(J);return{type:q.type,text:q.text,description:q.description,size:"small",selected:te||re,disabled:re,tooltipText:re?n(P2e):void 0,icon:q.icon,avatar:q.avatar,link:q.link,onMouseDown:P,onClick:()=>N(J),onLinkClick:q.onLinkClick,bottomElement:q.bottomElement,rightElement:q.rightElement,testId:`source-toggle-${J}`}},[R,P,N,g,n]),{cometMcpSources:j,toggleCometMcpSource:F,cometMcpDisabledServers:U}=x$(),V=f.useCallback((J,q)=>{const te=U?.has(J),re=()=>{F(J)};return{...T(J,q),selected:!te,testId:`comet-mcp-toggle-${J}`,onClick:re}},[T,F,U]),$=f.useMemo(()=>[...R,...Object.keys(j).filter(J=>!U?.has(J))],[R,j,U]),z=f.useMemo(()=>{const J=Object.entries(_),q=J.filter(([re])=>!d?.includes(re));return[...(d?.length?J.filter(([re])=>!d.includes(re)):q).map(([re,ae])=>T(re,ae)),...Object.entries(j).map(([re,ae])=>V(re,ae))]},[_,T,d,j,V]),Q=f.useMemo(()=>{const J=C.submenuItems.filter(q=>{if(Array.isArray(q)){const[te]=q;return!d?.includes(te)}return!0}).map(q=>{if(Array.isArray(q)){const[te,re]=q;return T(te,re)}return q});return{...C,submenu:J}},[C,T,d]),Y=f.useMemo(()=>[...z,...y||!M?[]:[{type:"separator"},Q]].filter(Boolean),[M,z,Q,y]),W=f.useMemo(()=>{if(!$?.length)return o.jsx(ce,{icon:um,size:"sm"});const J=[];return $.forEach(q=>{let te;if(q in _?te=_[q]:q in w?te=w[q]:q in j&&(te=j[q]),te){const re=te.avatar||o.jsx(O2e,{children:te.icon?o.jsx(ce,{icon:te.icon,size:"sm"}):o.jsx(ce,{icon:um,size:"sm"})});J.push(re)}}),_m(J,{isOverlapping:!0,maxVisuals:R2e,size:"md",stackDirection:"right"})},[$,_,w,j]),X=f.useMemo(()=>{if($?.length===1){const J=$[0]??"";return J in _?_[J]?.text:J in w?w[J]?.text:J in j?j[J]?.text:J}return n({defaultMessage:"{count} sources",id:"l1+6PggBqU"},{count:$?.length||0})},[$,_,w,j,n]),G=(()=>{switch(m){case"subtle":return"bg-subtle";case"default":return"!bg-subtler";default:Gt(m)}})();return p&&(!R||R.length===0)?null:o.jsx(zk,{focusItems:Y,placement:"bottom-end",width:"300px",isMobileStyle:y,isOpen:r,onOpen:p?void 0:s,onClose:a,menuType:Ir.SOURCES,isSpace:b,children:u==="button"?o.jsx(he,{text:X,extraCSS:B("px-4 w-full !h-10 border-0 !outline-none !justify-start font-normal",G),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Dn,onMouseDown:p?void 0:L,disabled:p,"data-testid":"sources-switcher-button"}):o.jsx(Te,{toolTip:p?void 0:n({defaultMessage:"Set sources for search",id:"yAyuRoLEjt"}),size:"small",onMouseDown:p?void 0:L,"data-testid":"sources-switcher-button",variant:p?"noHover":"common",extraCSS:B("px-[4px]",{"!aspect-auto":R&&R.length>1},{"!cursor-default [&:active]:!scale-100 [&:active]:!duration-0":p}),leadingComponent:W})})});L2e.displayName="SourcesSwitcherV1";const b$=I.memo(e=>{const{variation:t}=qTt(!1);return t?o.jsx(HTt,{children:o.jsx(I2e,{...e})}):o.jsx(L2e,{...e})});b$.displayName="SourcesSwitcher";const D2e=I.memo(({isTranscribing:e,isInitializing:t,startTranscription:n,stopTranscription:r,variant:s="primary"})=>{const{$t:a}=Z(),[i,l]=f.useState(t),c=()=>{l(!0),n?.()},u=()=>{l(!1),r?.()};return f.useEffect(()=>{e&&l(!1)},[e]),o.jsx(o.Fragment,{children:s==="primary"?o.jsxs("div",{className:"relative ml-2",children:[e&&o.jsx("div",{className:"bg-super/20 absolute inset-[10%] animate-[ping_1.5s_cubic-bezier(0,0,0.2,1)_infinite] rounded-full"}),o.jsx(he,{toolTip:a(e?{defaultMessage:"Stop Dictation",id:"RR4fO5+xkb"}:{defaultMessage:"Dictation",id:"0eNg7Kdki1"}),ariaLabel:"Dictation",isLoading:t||i,icon:e?zI:$H,variant:"primary",onClick:e?u:c,disabled:!1,size:Kt.small})]}):o.jsxs("div",{className:"relative",children:[e&&o.jsx("div",{className:"bg-super/20 absolute inset-[10%] animate-[ping_1.5s_cubic-bezier(0,0,0.2,1)_infinite] rounded-full"}),o.jsx(Te,{toolTip:a(e?{defaultMessage:"Stop Dictation",id:"RR4fO5+xkb"}:{defaultMessage:"Dictation",id:"0eNg7Kdki1"}),ariaLabel:"Dictation",isLoading:t||i,icon:e?zI:$H,variant:"common",onClick:e?u:c,disabled:!1,size:Kt.small})]})})});D2e.displayName="DictationButton";const KTt={hidden(){return{opacity:0,scale:.2}},visible(){return{opacity:1,scale:1}}},F2e=I.memo(({onStopButtonClick:e,variant:t="inverted"})=>{const{$t:n}=Z();return o.jsx(ge.div,{animate:"visible",exit:"hidden",initial:"hidden",variants:KTt,children:o.jsx(he,{testId:"stop-generating-response-button",toolTip:n({defaultMessage:"Stop generating response",id:"wXXKXUJh1s"}),variant:t,icon:zI,onClick:e,size:"small",extraCSS:"text-caution hover:!bg-caution hover:!text-white ml-2"})},"stop-button")});F2e.displayName="StopButton";var YTt={};const U2e=I.memo(()=>{const{openModal:e}=xt(),{$t:t}=Z(),n=rt(),r=gt(),s=f.useCallback(()=>{n?YTt.NEXT_PUBLIC_IS_SIDECAR_BUILD?r.push("/speak"):e("voiceToVoiceModal",null):e("loginModal",{origin:Oe.VOICE_TO_VOICE_BUTTON,pitchMessage:{title:"Sign in to unlock voice mode"}})},[n,e,r]);return o.jsx("div",{className:"ml-2",children:o.jsx(he,{onClick:s,size:Kt.small,icon:B8e,variant:"primary",disabled:!1,toolTip:t({defaultMessage:"Voice mode",id:"OnF9aqAuar"})})})});U2e.displayName="VoiceToVoiceButton";const B2e=(e,t)=>{const{value:n,loading:r}=It({flag:"max_assistant_tooltip_enabled",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function V2e(){const{value:e}=It({flag:"enable-clarifying-questions",subjectType:"user_nextauth_id",defaultValue:!1});return e}const $2e=I.memo(({toolTip:e,icon:t,isDisabled:n,value:r,querySource:s,size:a=Kt.small,handleSubmit:i,...l})=>o.jsx(he,{...l,ariaLabel:"Submit",toolTip:e,icon:t,variant:"primary",size:a,onClick:n?void 0:()=>i({query:r,querySource:s}),disabled:n,extraCSS:"!duration-100"}));$2e.displayName="SubmitButton";var OC={};const WA=({className:e,...t})=>o.jsx("div",{className:e,children:o.jsx($2e,{...t,value:""})}),QTt=({value:e,json:t,submitWillFork:n,isFollowUp:r,isDisabled:s,querySource:a,errorMessage:i,handleSubmit:l,fileUploadRef:c,showFileUpload:u,fileUploadTooltip:d,showStopButton:m,showModelSelector:p,onStopButtonClick:h,onFilePickerOpen:g,onFilePickerClose:y,showSources:v,useThreadSources:x,showRecency:b,disableActionButtons:_,startTranscription:w,stopTranscription:C,isTranscribing:S,isTranscriptionInitializing:E,isTranscriptionAvailable:M,fileUploadErrorMessage:k,fileUploadWarningMessage:A,activeConnector:R=null,uploadedFiles:O,handleStartUpload:L,handleFileInput:P,isBoxFilePickerOpen:N=!1,handleCloseBoxFilePicker:T,cleanupBoxFilePicker:j,microsoftFilePickerOptions:F=null,handleCloseMicrosoftFilePicker:U,handleSelectSharepointSite:V,isMicrosoftFilePickerOpen:$=!1,fileInputRef:z,hasQuery:Q,isAudioVideoFilesEnabled:Y=!1,setAttachmentErrorMessage:W,isCometHome:X,isMissionControl:G})=>{const J="ask-input-right-attributions",{isMobileStyle:q,isMobileUserAgent:te}=xe(),{screenshotToolEnabled:re}=Hr(),{openModal:ae}=xt(),{organization:fe}=_n({reason:J}),{$t:de}=Z(),ve=V2e(),{activeMenu:_e}=Ws(),{onActiveMenuChange:Se}=Lo(),{device:{isWindowsApp:be}}=At(),me=Nt(),{fileRepoInfo:Ae}=nl({reason:J}),{isMax:Ee}=_t(),je=Ae.file_repository_type==="COLLECTION",Me=b&&je&&!r,Ye=f.useRef(e),at=f.useRef(t);Ye.current=e,at.current=t;const{variation:it}=B2e(!1),ke=f.useCallback(({querySource:nn})=>{l({query:Ye.current,json:at.current,querySource:nn})},[l]),Ue=RQe(LQe),Ot=Ur(Ue?.display_model)==ie.RESEARCH||Ur(Ue?.display_model)==ie.STUDIO;f.useEffect(()=>{if(!be)return;const nn=new URLSearchParams(window.location.search);nn.get("voice-mode")?(pg({"voice-mode":void 0}),w?.()):nn.get("v2v")&&(pg({v2v:void 0}),ae("voiceToVoiceModal",null))},[me,be,w,ae]),f.useEffect(()=>{const nn=()=>{M&&(S?C?.():w?.())},Cn=()=>{ae("voiceToVoiceModal",null)};return document.addEventListener("toggleVoiceToVoice",Cn),document.addEventListener("toggleDictation",nn),()=>{document.removeEventListener("toggleDictation",nn),document.removeEventListener("toggleVoiceToVoice",Cn)}},[S,M,w,C,ae]);const yt=!G&&!r&&!X&&(!te&&!q||!!OC.NEXT_PUBLIC_IS_SIDECAR_BUILD),St=n?V8e:OC.NEXT_PUBLIC_IS_SIDECAR_BUILD||r?F7:$8e,et=m&&ve&&Ot,He=()=>{if(_)return o.jsx(WA,{className:"ml-2",isDisabled:!0,icon:St,querySource:a??"home",handleSubmit:kn});if(m){const Pn=et?"common":"inverted";return o.jsx(F2e,{onStopButtonClick:h,variant:Pn})}const nn=a&&o.jsx(WA,{className:"ml-2",toolTip:i||(n?de({defaultMessage:"Start your own thread",id:"TAA16rUT4G"}):""),icon:St,isDisabled:s,querySource:a,handleSubmit:ke,"data-testid":"submit-button"},"submit-button"),Cn=[];if(OC.NEXT_PUBLIC_IS_SIDECAR_BUILD&&Ee&&it&&Cn.push(o.jsx(E2e,{},"sidecar-more-menu-button")),OC.NEXT_PUBLIC_IS_SIDECAR_BUILD&&re&&Cn.push(o.jsx(M2e,{handleFileInput:P},"sidecar-screenshot-button")),M&&Cn.push(o.jsx(D2e,{isTranscribing:S,isInitializing:E,stopTranscription:C,startTranscription:w,variant:S?"primary":"common"},"dictation-button")),yt){const Pn=(O?.length||Q)&&a&&!S;Pn?Cn.push(nn):!S&&!Pn&&Cn.push(o.jsx(U2e,{},"voice-to-voice-button"))}else S||Cn.push(nn);return M||yt?Cn:nn},Be=f.useCallback(()=>Se(null),[Se]),ut=f.useCallback(()=>Se(Ir.SOURCES),[Se]),kt=f.useCallback(()=>Se(Ir.RECENCY),[Se]),$t=f.useCallback(()=>Se(Ir.ATTACHMENTS),[Se]),tn=f.useMemo(()=>Iyt(t?.root),[t]);return o.jsxs($Se,{children:[v&&o.jsx(b$,{isOpen:_e===Ir.SOURCES,onOpen:ut,onClose:Be,useThreadSources:x,mentionedConnectors:tn}),p&&o.jsx(S2e,{}),Me&&o.jsx(y2e,{isOpen:_e===Ir.RECENCY,onOpen:kt,onClose:Be}),u&&o.jsx(g2e,{isOpen:_e===Ir.ATTACHMENTS,onOpen:$t,onClose:Be,size:"small",forwardedRef:c,fileType:"all",tooltip:d,onFilePickerOpen:g,onFilePickerClose:y,areFileAttachmentsAllowed:fe?.settings?.file_attachments_allowed!==!1,fileUploadErrorMessage:k??null,fileUploadWarningMessage:A??null,activeConnector:R,uploadedFiles:O??ue,handleStartUpload:L,handleFileInput:P,isBoxFilePickerOpen:N,handleCloseBoxFilePicker:T,cleanupBoxFilePicker:j,microsoftFilePickerOptions:F,handleCloseMicrosoftFilePicker:U,handleSelectSharepointSite:V,isMicrosoftFilePickerOpen:$,fileInputRef:z,isAudioVideoFilesEnabled:Y,setAttachmentErrorMessage:W}),a&&o.jsxs(o.Fragment,{children:[He(),et&&o.jsx("div",{className:s?"pointer-events-none opacity-50":"",children:o.jsx(WA,{className:"ml-3",toolTip:i||de({defaultMessage:"Anything else to consider?",id:"DDAw7Ictpp"}),icon:St,querySource:a,isDisabled:!1,handleSubmit:ke})})]})]})},W2e=I.memo(QTt);W2e.displayName="AskInputRightAttribution";const H2e=I.memo(({uploadedFiles:e,onRemoveFile:t,incompleteParsingEnabled:n,ref:r})=>o.jsxs("div",{ref:r,className:"gap-x-sm scrollbar-none flex snap-x snap-mandatory overflow-x-auto",children:[o.jsx("div",{className:"w-xs shrink-0"}),e.map((s,a)=>o.jsx(z2e,{uploadedFile:s,onRemoveFile:t,incompleteParsingEnabled:n},a)),o.jsx("div",{className:"w-xs shrink-0"})]}));H2e.displayName="UploadedFilesList";const z2e=I.memo(({uploadedFile:e,onRemoveFile:t,incompleteParsingEnabled:n})=>{const r="uploaded-files-list",{trackEvent:s}=Ne(),a=n?e.status==="uploading":e.status==="uploading"||e.status==="parsing",{$t:i}=Z(),{fileRepoInfo:l}=nl({reason:r}),{saveFile:c,isLoading:u}=Amt({fileRepoInfo:l,reason:r}),{data:d}=FU({fileRepoInfo:l,fileName:e.file.name,reason:r}),m=Object.values(Xo),p=Bb(e.file.name),g=p&&!Za(e.file.name)&&m.includes(p)&&Bat(e.nextURL),y=l.file_repository_type==="COLLECTION"&&!a&&g,v=f.useMemo(()=>i(d?{defaultMessage:"File exists in Space",id:"pD1m2AH9FU"}:{defaultMessage:"Save attachment to Space",id:"/Pbth8CiTs"}),[d,i]),x=f.useMemo(()=>nhe(e)?VM:RJe(e)?W8e:PJe(e)?pb:OJe(e)?vo:cm,[e]),b=f.useCallback(()=>{s("remove attachment clicked"),e.nextURL&&t?.(e.nextURL,e.file_uuid??"")},[s,e,t]),_=f.useCallback(()=>c(e),[c,e]);return o.jsxs("div",{className:B("scroll-mx-md px-sm py-xs border-subtlest bg-subtler dark:bg-subtle gap-x-md flex h-[48px] w-fit snap-start items-center justify-between rounded-lg",{"opacity-70":a}),children:[o.jsxs("div",{className:"gap-x-md flex items-center",children:[e.thumbnailSource&&!a?o.jsx(fs,{alt:e.file.name,src:e.thumbnailSource,containerClassName:"size-8 shrink-0",imageClassName:"w-full h-full object-cover object-center",rounded:"md",includeLightBoxModal:!1}):o.jsx("div",{className:"p-sm bg-subtle dark:bg-subtler rounded-lg","data-testid":a?"file-loading-icon":"file-type-icon",children:o.jsx(ce,{icon:a?Wie:x,size:"sm",color:"#64645F",className:a?"animate-spin":void 0})}),o.jsxs("div",{className:"flex-col",children:[o.jsx(D,{variant:"tiny",color:"light",className:"text-nowrap",children:IJe(e.file.name,30)}),e.file.size>0&&o.jsx(D,{variant:"tinyRegular",color:"light",className:"text-nowrap",children:LJe(e.file.size)})]})]}),o.jsxs("div",{className:"gap-x-sm flex items-center",children:[y&&o.jsx(Te,{icon:H8e,size:"tiny",onClick:_,disabled:d||u,variant:"common",toolTip:v,isLoading:u,pill:!0,noPadding:!0}),e.nextURL&&o.jsx(Te,{icon:Rt,size:"tiny",testId:"remove-uploaded-file",onClick:b,variant:"common",pill:!0,noPadding:!0})]})]})});z2e.displayName="UploadedFilePreview";var XTt={};function ZTt({handleSubmit:e,inputQuery:t}){const{trackEvent:n}=Ne(),r=f.useRef(t);r.current=t;const s=Pa(),{sidecarSourceTab:{url:a}}=Hr();return f.useCallback((l,c)=>{const u=lo();if(n("auto suggestion accepted",{mode:"dropdown-complete",query:r.current,completion:l.query,completion_uuid:l.query_uuid,completion_position:c,url:l.url,isNavigational:!!l.url,frontendContextUUID:u,searchMode:s,isPersonalized:l.isPersonalized,sourceDomain:XTt.NEXT_PUBLIC_IS_SIDECAR_BUILD?Ta(a):void 0}),l.url){window.open(l.url,"_self");return}e({query:l.submission_query??l.query,promptSource:"autosuggest",querySource:"autosuggest",newFrontendContextUUID:u})},[e,s,n,a])}var JTt={};function e4t({inputQuery:e}){const{trackEventBatch:t}=Ne(),n=f.useRef(e);n.current=e;const r=Pa(),{sidecarSourceTab:{url:s}}=Hr();return f.useCallback(i=>{if(n.current.length!==0)return;const l=i.map((c,u)=>({name:"auto suggestion blank state viewed",data:{mode:"dropdown-complete",query:n.current,completion:c.query,completion_uuid:c.query_uuid,completion_position:u,url:c.url,isNavigational:!!c.url,searchMode:r,sourceDomain:JTt.NEXT_PUBLIC_IS_SIDECAR_BUILD?Ta(s):void 0}}));t(l)},[r,t,s])}const t4t=(e,t)=>{const{value:n,loading:r}=It({flag:"sidecar-personalized-query-suggestions",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},_$="sidecar-personalized-queries-cache",H9=1e3*60*10,n4t="sidecar";function r4t(e){try{let n=new URL(e).hostname.toLowerCase();return n.startsWith("www.")&&(n=n.slice(4)),n}catch{return""}}function s4t(){try{const e=Re.getItem(_$);if(e)return JSON.parse(e)}catch{}return null}function a4t(e){Re.setItem(_$,JSON.stringify(e))}async function o4t(e,t,n){if(e!==null&&e.nonce!==null&&e.timestamp>n-H9&&e.domain_suggestions.length>0)return{nonce:e.nonce,domain_suggestions:e.domain_suggestions};const r=await se.POST("/rest/browser/personalization/sidecar-recommended-queries",n4t,{body:{last_refresh_timestamp_ms:e?.timestamp??0,nonce:e?.nonce??"",history_items:t},timeoutMs:3e4});return r.error?(ne.error("Failed to fetch sidecar personalized queries:",r.error),{domain_suggestions:[],nonce:""}):r?.data?.domain_suggestions===null||!r?.data?.domain_suggestions?{domain_suggestions:e?.domain_suggestions??[],nonce:e?.nonce??""}:r.data}function i4t(e,t){const n=e.find(r=>r.domain===t);return n?n.suggestions.map(r=>({query:r.query})):[]}const l4t=14,c4t=1500,u4t=(e,t)=>{const{session:n}=Et(),r=Zn(!1),s=r4t(e),{variation:a,loading:i}=t4t(!1,{userEmail:n?.user?.email??""}),l=s4t(),{data:c}=We({queryKey:["sidecar-personalized-queries",t,a,i],queryFn:async()=>{if(!r||!e||!t)return[];if(!a)return i||Re.removeItem(_$),[];const u=Date.now();if(l&&l.domain_suggestions.length>0&&u-l.timestamp<H9)return l.domain_suggestions;try{const m=((await r.SearchBrowser({queries:[],sources:["HISTORY"],key:"sidecar-personalized-suggestions-history",request_id:"sidecar-personalized-suggestions",start_time:l4t*24*60*60*1e3,history_max_results:c4t,open_tabs_max_results:0,closed_tabs_max_results:0})).history_results??[]).map(g=>({url:g.url,title:g.title,last_accessed:g.last_accessed,visit_count:g.visit_count})),p=await o4t(l,m,u),h={nonce:p.nonce,timestamp:u,domain_suggestions:p.domain_suggestions};return h.domain_suggestions.length>0&&a4t(h),p.domain_suggestions}catch(d){return ne.error(d),l?.domain_suggestions??[]}},placeholderData:()=>t?l?.domain_suggestions??[]:[],refetchInterval:H9});return i4t(c??[],s)},d4t=async({query:e,keywords:t,reason:n})=>{try{const{error:r,data:s}=await se.POST("/rest/autosuggest/reformulate-query",n,{body:{query:e,keywords:t}});if(r)throw new Ce("API_CLIENTS_ERROR",{cause:r});return s.reformulated_query}catch(r){return ne.error("Failed to fetch refinement query",r),null}},f4t=async({sources:e,attachments:t,searchMode:n,sourceTabUrl:r,entropyRenderingPlace:s,reason:a})=>{try{const{error:i,data:l}=await se.POST("/rest/autosuggest/list-autosuggest",a,{body:{query:"",sources:e,attachments:t,search_mode:n,source_tab_url:r,entropy_rendering_place:s}});if(i)throw new Ce("API_CLIENTS_ERROR",{cause:i});return l.results??ue}catch(i){return ne.error(i),ue}},m4t=async({reason:e,onCreateShortcut:t})=>{try{const i=[...[...(await Gxe({reason:e}))?.tasks??[]].sort(()=>Math.random()-.5).slice(0,2).map(l=>({query:l.prompt,title:l.task_name,shouldShowTitle:!0,category:"shortcuts"}))];return t&&i.push({query:"",query_uuid:"create-shortcut-button",title:"Create a shortcut",description:"",category:"shortcuts",icon:"plus",shouldShowTitle:!0,actionHandler:t}),i}catch(n){return ne.error("Failed to fetch shortcuts suggestions",n),ue}},G2e=async({cometBrowser:e,type:t,locale:n})=>{const r=await e.getPersonalSuggestions({source:"ntp",type:t,locale:n},"get-personal-suggestions");return r.is_success?r.suggestions:[]},p4t=async(e,t)=>{const n=await G2e(e);return n.length<=t?n:uie(n).slice(0,t)},h4t=({cometBrowser:e,type:t,locale:n})=>{const{data:r=[]}=We({queryKey:["comet-personal-suggests-async",t,n],queryFn:async()=>uie(await G2e({cometBrowser:e,type:t,locale:n})),staleTime:3e5,gcTime:3e5});return r},HA=({sources:e,attachments:t,searchMode:n,focus:r,isCometHome:s,reason:a,enabled:i})=>{const{sidecarSourceTab:{url:l}}=Hr(),u=to().erp,{isMobileUserAgent:d}=xe(),m=Zn(),p=M_(),{openModal:h}=xt(),g=u4t(l||"",u==="sidecar"),y=f.useCallback(()=>{h("taskShortcutModal",{source:"suggestions_dropdown"})},[h]),v=f.useMemo(()=>s&&n===ie.SEARCH?["comet-blank-state-suggest",n,p]:r==="finance"?["finance-blank-state-suggest"]:["blank-state-suggest",e,t,n,u==="sidecar"?l:""],[e,t,n,r,s,l,u,p]);return We({queryKey:v,enabled:i,queryFn:async()=>{if(s&&n===ie.SEARCH){const[_,w]=await Promise.all([p4t({cometBrowser:m,type:"input-blank-state"},Nh(d,p)),p?m4t({reason:a,onCreateShortcut:y}):Promise.resolve([])]);return[...(_??ue).map(C=>({...C,is_comet_assistant:!0,category:"suggestion"})),...w]}if(r==="finance")return(await KP({query:"",reason:a,country:"US"})).map((C,S)=>({query:C.query||`suggestion-${S}`,title:C.title??void 0,image:C.image??void 0,description:C.description??void 0,category:C.category??void 0,query_uuid:C.query_uuid??void 0,url:C.url??void 0,metadata:C.metadata??void 0}));const[x,b]=await Promise.all([f4t({sources:e,attachments:t,searchMode:n,sourceTabUrl:u==="sidecar"?l:"",entropyRenderingPlace:u,reason:a}),u==="sidecar"?Utt({entropyBrowser:m,url:l}):Promise.resolve([])]);return[...g.map(_=>({..._,isPersonalized:!0})),...b,...x].slice(0,Nh(d))}})},g4t=e=>{const{setSuggestions:t,setBlankStateSuggestions:n}=Lo(),{sidecarSourceTab:{url:r,secondaryTab:s}}=Hr(),i=to().erp,l=f.useRef(void 0),c=f.useRef(e.selectedSearchMode),{blankStateSuggestions:u}=Ws(),d=u[e.selectedSearchMode],m=r?Ta(r):void 0,p=f.useMemo(()=>{if(e.suggestionsDisabled)return!0;const v=i==="sidecar";return v&&m&&m===l.current||v&&s},[e.suggestionsDisabled,i,m,s]);!p&&l.current!==m&&(l.current=m);const{data:h}=HA({...e,searchMode:ie.SEARCH,enabled:!p}),{data:g}=HA({...e,searchMode:ie.RESEARCH,enabled:!p}),{data:y}=HA({...e,searchMode:ie.STUDIO,enabled:!p});return f.useEffect(()=>{h&&n(h,ie.SEARCH),g&&n(g,ie.RESEARCH),y&&n(y,ie.STUDIO),p&&(n([],ie.SEARCH),n([],ie.RESEARCH),n([],ie.STUDIO))},[h,g,y,n,p]),f.useEffect(()=>{(e.query?.length??0)>0||d&&((i==="sidecar"||c.current!==e.selectedSearchMode)&&t(d),c.current=e.selectedSearchMode)},[e.query,e.selectedSearchMode,d,t,i]),null};function q2e({userInputQuery:e,userInputJson:t,suggestionsDisabled:n,suggestions:r,focusedIndex:s,setFocusedIndex:a,onChange:i,handleSuggestionSubmission:l,placement:c="bottom",inputRef:u}){const d=f.useRef(e),m=f.useRef(t),p=f.useRef(r),h=f.useRef(s);d.current=e,m.current=t,p.current=r,h.current=s;const g=f.useCallback((_,w)=>{if(w>0){const C=(h.current+1)%w,S=p.current[C];if(S?.query){const E=S.query;i(E)}return _.preventDefault(),C}return null},[i]),y=f.useCallback(_=>{let w=h.current-1;if(w<0)w=-1,h.current===0&&(_.preventDefault(),i(d.current,m.current));else{_.preventDefault();const C=p.current[w];if(C?.query){const S=C.query;i(S)}}return w},[i]),v=f.useCallback((_,w)=>{if(w>0){const C=h.current<=0?w-1:(h.current-1)%w,S=p.current[C];if(S?.query){const E=S.query;i(E)}return _.preventDefault(),C}return null},[i]),x=f.useCallback((_,w)=>{let C=h.current+1;if(C>=w||C===0)C=-1,h.current===w-1&&(_.preventDefault(),i(d.current,m.current));else{_.preventDefault();const S=p.current[C];if(S?.query){const E=S.query;i(E)}}return C},[i]);return f.useCallback(_=>{if(n)return!1;const w=ra.isArrowDown(_),C=ra.isArrowUp(_);if(w){if(c==="bottom"&&h.current===-1&&!u.current?.inLine("last"))return!1;const S=c==="bottom"?g(_,p.current.length):x(_,p.current.length);if(S!==null)return a(S),!0}else if(C){if(c==="top"&&h.current===-1&&!u.current?.inLine("first"))return!1;const S=c==="bottom"?y(_):v(_,p.current.length);if(S!==null)return a(S),!0}else if(ra.isEnterKeyWithoutShift(_)&&h.current>=0&&h.current<p.current.length){const S=p.current[h.current];if(S)return l(S,h.current),!0}return!1},[n,c,u,g,x,a,y,v,l])}var Gne={};const y4t=e=>e==="travel"||e==="shopping"||e==="academic"||e==="sports",v4t=({autosuggestionsEnabled:e=!0,inputQuery:t,inputJson:n,isInputActive:r,onChange:s,handleSuggestionSubmission:a,handleSuggestionView:i,querySource:l,hasThreadContent:c,isMentionMenuOpened:u,placement:d="bottom",inputRef:m})=>{const{isWindowsAppPanelView:p}=Gm(),[h,g]=f.useState(-1),[y,v]=f.useState(t),[x,b]=f.useState(),_=jt(),{isSuggestionsDisabled:w}=hn(),C=GSe(),S=L0e(_),E=sut(_),{activeMenu:M,suggestions:k}=Ws(),{currentOpenedModal:A}=xt(),{setSuggestions:R,setShowSuggestDropdown:O}=Lo(),L=f.useMemo(()=>w||!e||!C&&!S&&!p&&!E&&!y4t(l)&&!Gne.NEXT_PUBLIC_IS_SIDECAR_BUILD||l!=="finance"&&t.length>Mlt&&!k.some(({query:N})=>N===t)||!!Gne.NEXT_PUBLIC_IS_SIDECAR_BUILD&&c,[w,e,C,S,E,p,l,t,c,k]),P=q2e({userInputQuery:y,userInputJson:x,suggestionsDisabled:L,suggestions:k,focusedIndex:h,setFocusedIndex:g,onChange:s,handleSuggestionSubmission:a,placement:d,inputRef:m});return f.useEffect(()=>{h===-1&&(v(t),b(n))},[t,h,v,b,n]),f.useEffect(()=>{L&&(R(ue),g(-1))},[L,R,g]),f.useEffect(()=>{const N=!L&&r&&!M&&!A&&k.length>0&&!u;O(N),N&&i(k)},[L,r,M,A,k,u,O,i]),f.useMemo(()=>({focusedIndex:h,setFocusedIndex:g,suggestionsDisabled:L,userInputQuery:y,handleSuggestDropdownNavigation:P,placement:d}),[h,P,L,y,d])};class x4t{static isAnyInputElementFocused(){const t=document.activeElement;return!!(t&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.getAttribute("contenteditable")==="true"||t.getAttribute("role")==="textbox"))}}function b4t({value:e,json:t,isDisabled:n,handleSubmit:r,handleSuggestDropdownNavigation:s,querySource:a,focusInput:i,isInputActive:l}){const{isMobileUserAgent:c}=xe(),u=f.useRef(e),d=f.useRef(t);u.current=e,d.current=t;const m=f.useCallback(v=>n&&ra.isEnterKeyWithoutShift(v)?(v.preventDefault(),!0):!1,[n]),p=f.useCallback(v=>v.isComposing?(v.preventDefault(),!0):!1,[]),h=f.useCallback(v=>{ra.isEnterKeyWithoutShift(v)&&!c&&(v.preventDefault(),r({query:u.current,json:d.current,querySource:a}))},[r,a,c]),g=f.useCallback(v=>{const x=ra.isCtrlOrCmdJ(v),b=ra.isOnlySlashKey(v);if(x||b){if(l||x4t.isAnyInputElementFocused())return;v.preventDefault(),i()}},[i,l]);return f.useEffect(()=>(document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}),[g]),f.useCallback(v=>{m(v)||p(v)||s(v)||h(v)},[m,p,s,h])}const _4t=(e,t)=>{const{value:n,loading:r}=It({flag:"clear-ask-input-suggestions-when-disabled",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function w4t({value:e,json:t,querySource:n,disableSubmission:r=!1,disableInput:s=!1,autofocus:a=!0,isUploadingFile:i=!1,onChange:l,onFocus:c,handleSubmit:u,handleUpdateAutosuggestions:d,autosuggestionsEnabled:m=!0,errorMessage:p,sources:h,attachments:g,selectedSearchMode:y,isInputActive:v,setIsInputActive:x,updateOnFocus:b=!1,inFlight:_=!1,resultsLength:w=0,quote:C,isMentionMenuOpened:S,isCometHome:E=!1,reason:M,placement:k="bottom"}){const{activeMenu:A,inputRef:R}=Ws(),O=qmt(),{setShouldTriggerFocus:L}=a_(),{blankStateSuggestions:P}=Ws(),{setSuggestions:N}=Lo(),{onActiveMenuChange:T}=Lo(),{device:{isAndroid:j}}=At(),F=f.useMemo(()=>!!C||e.trim().length>0||!!g&&g.length>0,[C,e,g]),U=r||s||!!p||i||!F,V=f.useCallback(de=>{const{mentions:ve}=Yxe(t?.root);u({...de,mentions:ve.length>0?ve:void 0})},[t,u]),$=ZTt({handleSubmit:V,inputQuery:e}),z=e4t({inputQuery:e}),{focusedIndex:Q,setFocusedIndex:Y,suggestionsDisabled:W,userInputQuery:X,handleSuggestDropdownNavigation:G}=v4t({autosuggestionsEnabled:m,inputQuery:e,inputJson:t,isInputActive:v&&m,onChange:l,handleSuggestionView:z,handleSuggestionSubmission:$,querySource:n,hasThreadContent:_||w>0,isMentionMenuOpened:S,placement:k,inputRef:R});g4t({sources:h,attachments:g,selectedSearchMode:y,suggestionsDisabled:W,focus:n==="finance"?"finance":void 0,query:e,isCometHome:E,reason:M});const J=f.useCallback(()=>{R.current?.focus(),x(!0)},[R,x]),q=f.useCallback(de=>{c?.(de),x(!0),T(null),b&&d(R.current?.value??""),j&&setTimeout(()=>{R.current?.scrollIntoView({behavior:"smooth",block:"center"})},300)},[c,T,d,x,b,R,j]);f.useEffect(()=>{O&&a&&(J(),L(!1))},[O,J,L,a]);const te=f.useCallback(()=>(x(!1),Y(-1),!0),[Y,x]),{variation:re}=_4t(!1),ae=f.useCallback((de,ve)=>{if(l(de,ve),W){re&&N([]);return}de.trim().length===0&&P[y]?(N(P[y]),d(de)):Alt(de)&&d(de)},[l,W,d,P,N,y,re]),fe=b4t({value:e,json:t,isDisabled:U,handleSubmit:V,handleSuggestDropdownNavigation:G,querySource:n,focusInput:J,isInputActive:v});return f.useEffect(()=>{A!==null?R.current?.blur():a&&J()},[A,R,J,a]),f.useMemo(()=>({isDisabled:U,focusedIndex:Q,setFocusedIndex:Y,userInputQuery:X,handleSuggestionSubmission:$,handleFocus:q,handleBlur:te,handleChange:ae,handleKeyDown:fe,focusInput:J,hasQuery:F}),[J,Q,te,ae,q,fe,$,F,U,Y,X])}function C4t(){const{value:e}=It({flag:"clear-attachment-on-submission",subjectType:"user_nextauth_id",defaultValue:!1});return e}const S4t=({entropyBrowser:e,isSidecar:t,focusInput:n})=>{f.useEffect(()=>{if(!e||!t)return;const r=()=>{document.visibilityState==="visible"&&n()},s=e.subscribeQuickActionButtonFired(()=>{n()});return document.addEventListener("visibilitychange",r),()=>{s(),window.removeEventListener("visibilitychange",r)}},[e,n,t])},K2e=I.memo(function(t){const{children:n,condition:r,Wrapper:s,...a}=t;return r?o.jsx(s,{...a,children:n}):n});K2e.displayName="ConditionalWrapper";var E4t={};const M4t=({value:e,json:t,querySource:n,placeholder:r,disableSubmission:s=!1,disableInput:a=!1,initialLayout:i="expanded",minRows:l=1,isFollowUp:c=!1,submitWillFork:u=!1,showSources:d=!1,useThreadSources:m=!1,showRecency:p=!1,showModelSelector:h=!0,showSearchModeSelector:g=!0,showFileUpload:y=!1,disableActionButtons:v=!1,showIncognitoHint:x,hasShadow:b=!1,autofocus:_=!0,disablePrivacyWarning:w=!1,fileUploadTooltip:C,className:S,headerComponent:E,showStopButton:M=!1,forceHideSuggestions:k=!1,onChange:A,onFocus:R,onClick:O,onSubmit:L,onStopButtonClick:P=kn,onFilePickerOpen:N,onFilePickerClose:T,autosuggestionsEnabled:j=!0,dropdownPlacement:F="bottom",dropdownClassName:U,disableModeSelector:V=!1,useLexical:$=!1,mentionTypeaheadOptions:z,isCometHome:Q=!1,syncUncontrolledOnce:Y=!1,onTriggerTypeahead:W,layoutKey:X,isHighlighted:G,isMissionControl:J,ref:q,onRemoveFile:te,onFileAttachComplete:re,renderAttachments:ae=!0})=>{const fe=`ask-input-inner-${n}`,de=f.useRef(!1),[ve,_e]=f.useState(!1),[Se,be]=f.useState(_),{suggestions:me,blankStateSuggestions:Ae,showSuggestDropdown:Ee}=Ws(),{setSuggestions:je}=Lo(),{isMobileStyle:Me,isMobileUserAgent:Ye}=xe(),{promptSkipped:at}=mmt(),{inputRef:it}=Ws(),[ke,Ue]=f.useState(!0),Ot=f.useRef(null),{currentOpenedModal:yt}=xt(),St=!!yt,et=rt(),{quote:He,setQuote:Be}=Hs(),ut=C4t(),kt=Pa(),{sources:$t}=Jn(),{specialCapabilities:tn}=Zr(),{lastResult:nn,inFlight:Cn,resultsLength:Pn}=Vt(),Xe=Zn(),Ve=Z(),lt=f.useRef(null),[qt,ln]=f.useState(!1),$n=f.useCallback(()=>ln(!0),[]),we=f.useCallback(()=>ln(!1),[]),{cacheImageDownloadUrl:qe}=dV({reason:fe}),[De,tt]=f.useState(void 0),Qe=f.useMemo(()=>De?.map(fr=>fr.url),[De]),{value:Pt,loading:Sn}=Vhe({flag:"windows-app-dictation-config",defaultValue:Pq}),Fn=f.useMemo(()=>Sn?Pq:{eppoTranscriptionConfig:Pt,runImmediately:!0},[Pt,Sn]),cn=f.useMemo(()=>{if(e.length>Bf)return Ve.formatMessage({defaultMessage:"Query is { numCharacters } characters too long",id:"yw04s2k4La"},{numCharacters:e.length-Bf})},[e,Ve]),{handleUpdateAutosuggestions:Lr}=HEt(),Ts=f.useCallback(fr=>{if(!(de.current||!ke)){if(Lr(""),de.current=!0,!fr.query&&Qe&&Qe.length>0){const fo=p3(Qe[0]);fr.query=fo!=="File"?fo:"File Attached"}cn?de.current=!1:(setTimeout(()=>de.current=!1,tB),L?.({query:fr.query,json:fr.json,attachments:Qe,promptSource:fr.promptSource,querySource:fr.querySource,mentions:fr.mentions}),De?.forEach(fo=>{fo.file&&fo.file.size>0&&Za(fo.url)&&qe(fo.url,fo.resizedFile??fo.file)}),(ut||J)&&lt.current?.clearFiles())}},[Qe,De,qe,cn,Lr,ut,J,L,ke]);f.useEffect(()=>Xe.subscribeForceSubmitQuery(fr=>{Ts(fr)}),[Xe,Ts]);const{isDisabled:Iu,focusedIndex:fc,setFocusedIndex:Ru,userInputQuery:lp,handleSuggestionSubmission:nf,handleFocus:cp,handleBlur:f0,handleChange:ft,handleKeyDown:kr,focusInput:pa,hasQuery:rf}=w4t({value:e,json:t,querySource:n,disableSubmission:s,disableInput:a,autofocus:_,isUploadingFile:ve,onChange:A,onFocus:R,handleSubmit:Ts,handleUpdateAutosuggestions:Lr,autosuggestionsEnabled:j,errorMessage:cn,sources:$t,attachments:Qe,selectedSearchMode:kt,setIsInputActive:be,isInputActive:Se,inFlight:Cn,resultsLength:Pn,quote:He,isMentionMenuOpened:qt,isCometHome:Q,reason:fe,placement:F});ZEt({setInput:ft}),S4t({entropyBrowser:Xe,focusInput:pa,isSidecar:!!E4t.NEXT_PUBLIC_IS_SIDECAR_BUILD}),f.useEffect(()=>{at&&it.current?.focus()},[it,at]),f.useEffect(()=>{He&&pa()},[He,pa]);const{deprecatedOpenToast:il}=gn(),sf=f.useMemo(()=>({onStart:()=>{pa()},onStop:()=>{pa()},onSilence:()=>{il("No audio detected. Make sure your microphone is connected and unmuted","error",4)}}),[pa,il]),{startTranscription:m0,stopTranscription:hw,error:Fa,isTranscribing:af,isInitializing:up,transcription:mc}=nMt({callbacks:sf,config:Fn,reason:fe});f.useEffect(()=>{Fa&&il(`Audio Error: ${Fa}`,"error",4)},[Fa,il]);const of=f.useRef("");f.useEffect(()=>{if(!af){of.current="";return}if(mc&&mc!==of.current){const fr=mc.startsWith(of.current)?mc.slice(of.current.length).trim():mc;if(fr){const fo=e?` ${fr}`:fr;it.current?.trim(),it.current?.append(fo),ft(it.current?.value??"",it.current?.json)}of.current=mc}},[mc,af,e,ft,it]);const{isAudioVideoFilesEnabled:p0}=BEt(),dp=VEt(),{organization:gw}=_n({reason:fe}),yw=f.useCallback(()=>_e(!0),[]),{handlePaste:KT,handlePasteQuery:h0,handleCompleteFileUpload:fp,handleFileSelect:YT,autoCreatedTextFile:pc,dismissNotification:mp,setAutoCreatedTextFile:vw}=zEt({fileUploadRef:lt,showFileUpload:y,attachments:Qe,setAttachments:tt,handleChange:ft,setIsUploadingFile:_e,focusInput:pa,onFileAttachComplete:re}),{fileInputRef:xw,errorMessage:g0,warningMessage:dr,uploadSource:bw,uploadedFiles:hc,handleRemoveFile:lf,handleStartUpload:_w,handleFileInput:y0,isBoxOpen:xH,onCloseBox:bH,cleanupBoxPicker:_H,microsoftFilePickerOptions:wH,isMicrosoftFilePickerOpen:CH,handleSelectSharepointSite:SH,onCloseMicrosoft:EH,setErrorMessage:MH}=QEt({fileUploadRef:lt,disablePrivacyWarning:w,isAudioVideoFilesEnabled:p0,isClearAttachmentsEnabled:J||ut,isFollowUp:c,organization:gw,lastResult:nn,onStartFileUpload:yw,onCompleteFileUpload:fp,setUploadsReady:Ue,reason:fe,incompleteParsingEnabled:dp,specialCapabilities:tn,askInputRef:q,onRemoveFile:te}),kH=f.useCallback(()=>{if(pc){if(it.current?.append(pc.content),ft(it.current?.value??"",it.current?.json),Qe){const fr=Qe.find(fo=>fo.includes(pc.fileName));fr&&lf(fr)}vw(null)}},[pc,it,ft,Qe,lf,vw]),TH=f.useRef(e);TH.current=e;const NH=f.useCallback(fr=>{be(!0),TH.current.length===0&&Ae[kt]&&je(Ae[kt]),O?.(fr)},[be,je,Ae,kt,O]),jH=f.useCallback(fr=>{it.current=fr},[it]),oRe=f.useMemo(()=>({isOpen:(Ee&&!k)??!1,suggestedQueries:me,focusedIndex:fc,setFocusedIndex:Ru,handlePasteQuery:h0,handleSubmit:nf,userInputQuery:lp,placement:F,dropdownClassName:U,allowNonSequentialMatch:me!==Ae[kt],isCometHome:Q,scrollableShards:hc.length>0?[Ot]:[]}),[Ae,U,F,fc,k,h0,nf,Q,kt,Ru,Ee,me,hc,Ot,lp]),iRe=f.useMemo(()=>({initialLayout:i,wrapperClass:B({"transition-none p-lg":Ee,"border-b-none rounded-b-none":Ee&&!k&&F==="bottom","border-t-none rounded-t-none rounded-b-2xl":Ee&&!k&&F==="top","bg-base":He}),size:"large",hasShadow:b,isHighlighted:G,showStopButton:M,quote:He??void 0,inputWarnings:pc&&o.jsxs(H,{variant:"subtler",className:"mx-sm mb-xs px-sm py-xs dark:bg-base flex items-center justify-between rounded-lg",children:[o.jsx("div",{className:"gap-x-sm flex items-center",children:o.jsxs(D,{variant:"tiny",color:"light",children:["Text is"," ",Math.max(1,Math.round((pc.content.length-Bf)/Bf*100)),"% over the limit and is attached as a file."," ",o.jsx(Te,{variant:"super",size:"tiny",onClick:kH,text:"Paste as text"})]})}),o.jsx(Te,{icon:BM,size:"tiny",onClick:mp,variant:"common",pill:!0,noPadding:!0})]}),attachmentsList:hc.length>0&&ae&&o.jsx(H2e,{uploadedFiles:hc,onRemoveFile:lf,incompleteParsingEnabled:dp,ref:Ot}),setQuote:Be,inputRef:it}),[pc,mp,F,k,lf,b,i,it,dp,kH,He,Be,M,Ee,hc,G,ae]),lRe=f.useMemo(()=>({ref:jH,id:"ask-input",value:e,json:t,initialLayout:i,minRows:l,placeholder:r,disableInput:a,autoFocus:_,onClick:NH,onChange:ft,onKeyDown:kr,onBlur:f0,onFocus:cp,onPaste:KT,onMentionMenuOpen:$n,onMentionMenuClose:we,isMobileStyle:Me,isMobileUserAgent:Ye,useLexical:$,mentionTypeaheadOptions:$?z:void 0,onTriggerTypeahead:$?W:void 0}),[_,a,f0,ft,NH,cp,kr,KT,i,Me,Ye,t,z,l,we,$n,W,r,jH,$,e]),cRe=f.useMemo(()=>o.jsx(W2e,{value:e,json:t,showSources:d,useThreadSources:m,showRecency:p,submitWillFork:u,isFollowUp:c,isDisabled:Iu||!ke,querySource:n,errorMessage:cn,handleSubmit:Ts,fileUploadRef:lt,showFileUpload:y,showModelSelector:h,disableActionButtons:v,fileUploadTooltip:C,disablePrivacyWarning:w,showStopButton:M,onStopButtonClick:P,onFilePickerOpen:N,onFilePickerClose:T,startTranscription:m0,stopTranscription:hw,isTranscribing:af,isTranscriptionInitializing:up,isTranscriptionAvailable:!M,fileUploadErrorMessage:g0,fileUploadWarningMessage:dr,activeConnector:bw,uploadedFiles:hc,handleStartUpload:_w,handleFileInput:y0,isBoxFilePickerOpen:xH,handleCloseBoxFilePicker:bH,cleanupBoxFilePicker:_H,microsoftFilePickerOptions:wH,handleCloseMicrosoftFilePicker:EH,handleSelectSharepointSite:SH,isMicrosoftFilePickerOpen:CH,fileInputRef:xw,hasQuery:rf,isAudioVideoFilesEnabled:p0,setAttachmentErrorMessage:MH,isCometHome:Q,isMissionControl:J}),[bw,_H,v,w,cn,xw,g0,C,dr,bH,y0,SH,_w,Ts,rf,p0,xH,Iu,c,up,CH,af,t,wH,EH,T,N,P,n,MH,y,h,p,d,m,M,m0,hw,u,hc,ke,e,Q,J]),{isMax:uRe}=_t();return o.jsx(K2e,{condition:et&&y,Wrapper:WF,onDrop:YT,disabled:St,allowDropAnywhere:!0,children:o.jsxs(H,{variant:"subtler",className:B(S,"relative rounded-2xl",{"max-super-override":uRe}),children:[E,o.jsx(WSe,{value:e,suggestDropdownProps:oRe,ResizeableInputWrapperProps:iRe,ResizeableInputProps:lRe,syncUncontrolledOnce:Y,leftAttributionComponents:V?null:o.jsx(RU,{inRenderingPlace:"sidecar",children:o.jsx(p2e,{showIncognitoHint:x,showSearchModeSelector:g,isFollowUp:c,layoutKey:X})}),rightAttributionComponents:cRe})]})})},D_=I.memo(M4t);D_.displayName="AskInput";const k4t=(e=!1,t)=>{const{fetchVariation:n}=It({flag:"comet-onboarding",defaultValue:e,extraAttributes:t,subjectType:"comet_device_id",skip:!0});return n},T4t=(e,t)=>{const{fetchVariation:n}=It({flag:"try-assistant-page-enabled",defaultValue:e,extraAttributes:t,subjectType:"comet_device_id",skip:!0});return n};function N4t(){const{value:e}=Su({flag:"comet-ntp-welcome-suggestions",subjectType:"visitor_id",defaultValue:{groups:[]}});return e}const j4t=ye(async()=>{const{WelcomeOverlay:e}=await K(async()=>{const{WelcomeOverlay:t}=await import("./WelcomeOverlay-F-MRv5jC.js");return{WelcomeOverlay:t}},__vite__mapDeps([109,3,1,4,5,6]));return{default:e}}),A4t=e=>e.reduce((t,n)=>n.condition==="ALWAYS"?[...t,...n.suggests.map(r=>({query:r,icon:n.icon,image:n.image}))]:t,[]),Y2e=I.memo(()=>{const e=f.useRef(null),{$t:t,locale:n}=Z(),r=gt(),s=Nt(),{trackEvent:a}=Ne(),[i,l]=f.useState(!1),[c,u]=f.useState(!0),[d,m]=f.useState(!1),[p,h]=f.useState(!1),g=f.useRef(null),y=Zn(),v=f.useRef(null),{isMobileStyle:x}=xe(),b=MEt(),_=aht(),w=T4t(!1),C=k4t(!1),S=f.useRef(!1),E=rt(),{openVisitorLoginUpsell:M}=ur({enabled:!E}),k=f.useMemo(()=>Re.getItem("hasSeenSignupModal"),[]),A=f.useMemo(()=>BI()===0,[]);f.useEffect(()=>{const Y=_[0];Y&&(Us.preload(Y.videoSrc,{as:"video"}),Us.preload(Y.previewSrc,{as:"image"}))},[_]);const R=h4t({cometBrowser:y,type:"welcome-modal",locale:n}),O=N4t(),L=f.useMemo(()=>A4t(O.groups),[O]),P=f.useCallback(async Y=>{const W=await w(),X=()=>{r.push("/b/try-assistant")};if(W){try{(await y.openTab({url:`${window.location.origin}/b/try-assistant`,key:"openTryAssistant"})).is_success||X()}catch{X()}Y?.onPageOpen?.()}else c||u(!0),l(!0),Y?.onModalOpen?.()},[w,y,r,c]),N=f.useCallback(()=>{if(!E)return;const Y=Re.getItem("hasClosedWelcomeModal");if(!Re.getItem("hasSeenInviteFriendsModal")&&A){m(!0);return}Y||P({onPageOpen:()=>{Re.setItem("hasClosedWelcomeModal","true"),a("new signup ntp education viewed")},onModalOpen:()=>{Re.setItem("hasClosedWelcomeModal","true"),a("new signup ntp education viewed")}})},[E,P,a,A]),T=f.useCallback(()=>{m(!1),Re.setItem("hasSeenInviteFriendsModal","true"),N()},[N]),j=f.useCallback(()=>!E&&k!=="true"?(M({title:t({defaultMessage:"Sign in below to unlock the full potential of Comet",id:"1SCRX9DriC"}),origin:Oe.COMET_NTP,sheetModalVariant:"centered-sheet"}),Re.setItem("hasSeenSignupModal","true"),!0):!1,[E,k,M,t]);f.useEffect(()=>{const Y=FRe();A&&!Y&&!S.current&&(S.current=!0,C().then(X=>{if(URe(),X){try{y.openTab({url:`${window.location.origin}/onboarding-comet`,key:"openCometOnboarding"})}catch{window.location.href="/onboarding-comet"}return}else{if(j())return;N()}}))},[N,j,s,C,E,A,y]),f.useEffect(()=>{s?.get("tryAssistant")==="true"&&E&&(P({onPageOpen:()=>{a("new signup ntp education viewed")},onModalOpen:()=>{a("new signup ntp education viewed")}}),pg({tryAssistant:void 0}))},[s,E,a,P]);const F=f.useCallback(()=>{E?P({onPageOpen:()=>{u(!1)},onModalOpen:()=>{a("ntp education selected")}}):M({title:t({defaultMessage:"Sign in below to unlock the full potential of Comet",id:"1SCRX9DriC"}),origin:Oe.TRY_ASSISTANT_BUTTON,sheetModalVariant:"centered-sheet"})},[E,P,M,t,a]),U=Cle(),V=f.useCallback(()=>{l(!1)},[]),$=()=>{navigator.geolocation.getCurrentPosition(ne.info)},z=f.useCallback(()=>{$(),h(!0)},[]),Q=f.useMemo(()=>E&&U,[E,U]);return o.jsxs("div",{ref:e,className:"mx-auto flex size-full flex-col",style:x?void 0:{marginLeft:ih*-.5+"px"},children:[o.jsx(ge.div,{initial:{paddingBottom:80},animate:{paddingBottom:p?320:80},exit:{paddingBottom:80},transition:Po,className:"px-md relative isolate mx-auto flex w-full max-w-[800px] grow flex-col items-center justify-center pb-[80px]",children:o.jsx(wwe,{containerRef:e,editMode:p,setEditMode:h,askInput:o.jsx(w$,{})})}),o.jsxs("div",{className:"gap-sm fixed bottom-0 left-1/2 mt-auto flex w-full max-w-[800px] -translate-x-1/2 justify-center py-6 pt-12",children:[o.jsx("div",{ref:g,children:o.jsx(he,{pill:!0,size:"small",variant:"border",icon:Io,text:t({defaultMessage:"Try Assistant",id:"E4vPUv5Uqt"}),extraCSS:"z-[2] relative",onClick:F})}),Q&&o.jsx(he,{pill:!0,size:"small",variant:"border",icon:zie,text:t({defaultMessage:"Background Assistants",id:"UmjY7aC43f"}),extraCSS:"z-[2] relative",href:"/b/assistants"}),o.jsx(he,{pill:!0,size:"small",variant:"border",icon:z8e,text:t({defaultMessage:"Edit widgets",id:"T1DvA9w3pt"}),extraCSS:"z-[2] relative",onClick:z}),b&&o.jsx(Cwe,{pill:!0,size:"small",variant:"border",extraCSS:"z-[2] relative"}),o.jsx("div",{style:{maskImage:"linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 75%)"},className:"bg-base absolute inset-0"})]}),c&&Us.createPortal(o.jsx(j4t,{isOpen:i,onClose:V,suggestions:R.length?R:L,suggestionsScrollContainerRef:v,buttonRef:g}),document.body),d&&o.jsx(cxe,{isOpen:d,onClose:T})]})});Y2e.displayName="CometHomePage";const w$=I.memo(()=>o.jsx(Kl,{children:o.jsx(R4t,{})}));w$.displayName="Input";const I4t=I.memo(()=>o.jsxs(o.Fragment,{children:[o.jsx(w$,{}),o.jsx("div",{className:"pt-md h-2xl w-full",children:o.jsx(xk,{context:"sortable-widgets"})})]}));I4t.displayName="InputWrapper";const R4t=()=>{const e="comet-ask-input",{mentionTypeaheadOptions:t,inputPlaceholder:n,onTriggerTypeahead:r}=wk({reason:e,isLazy:!0}),[s,a,i]=$3({csrRedirect:!0});return o.jsx(H,{className:B("static flex w-full flex-col items-center justify-center md:mt-0","z-10"),children:o.jsx("div",{className:"mb-md w-full",children:o.jsx(D_,{...i,value:s,json:a,querySource:"home",autofocus:!0,minRows:2,hasShadow:!0,showFileUpload:!0,showIncognitoHint:!0,showSources:!0,dropdownPlacement:"bottom",useLexical:!0,mentionTypeaheadOptions:t,placeholder:n??i.placeholder,isCometHome:!0,onTriggerTypeahead:r})})})},Gk=()=>{const{value:e}=Rr({flag:"labs-side-canvas",defaultValue:!1});return e},P4t=ye(async()=>{const{SideCanvasViewer:e}=await K(async()=>{const{SideCanvasViewer:t}=await import("./SideCanvasViewer-s_W823mC.js");return{SideCanvasViewer:t}},__vite__mapDeps([110,3,1,4,111,112,5,63,17,6,18,65,62,64]));return{default:e}}),Q2e=Wt("CanvasContext",{openCanvas:()=>{},closeCanvas:()=>{},isCanvasOpen:!1,doCanvasAction:()=>{},setCanvasDispatch:()=>{},setCanvasState:()=>{}}),F_=()=>{const e=f.useContext(Q2e),t=Gk();return f.useMemo(()=>({...e,canUseCanvas:t}),[t,e])},X2e=I.memo(({children:e})=>{const[t,n]=f.useState(!1),r=f.useRef(void 0),[s,a]=f.useState(),i=gt(),l=jt(),c=Nt(),u=f.useRef(l),d=f.useRef(c);u.current=l,d.current=c;const m=f.useCallback(()=>{n(!0);const x=new URLSearchParams(d.current?.toString());x.set("preview","1"),i.replace(`${u.current}?${x.toString()}`)},[i]),p=f.useCallback(()=>{n(!1),r.current=void 0;const x=new URLSearchParams(d.current?.toString());x.delete("preview"),i.replace(`${u.current}?${x.toString()}`)},[i]),h=f.useRef([]),g=f.useCallback(x=>{r.current?r.current(x):h.current.push(x)},[]),y=f.useCallback(x=>{r.current=x,h.current.length>0&&x&&(h.current.forEach(b=>x(b)),h.current=[])},[]),v=f.useMemo(()=>({openCanvas:m,closeCanvas:p,isCanvasOpen:t,setCanvasDispatch:y,doCanvasAction:g,canvasState:s,setCanvasState:a}),[m,p,t,y,g,s]);return o.jsxs(Q2e.Provider,{value:v,children:[e,o.jsx(Ke,{children:t&&o.jsx(P4t,{})})]})});X2e.displayName="CanvasStateProvider";const Z2e=Wt("SearchSideContainerContext",{container:null,setContainer:()=>{},isOpen:!1,setIsOpen:()=>{},width:720,setWidth:()=>{},isResizing:!1,setIsResizing:()=>{}}),J2e=I.memo(({children:e})=>{const[t,n]=f.useState(null),r=720,{isXLargeScreen:s}=Jm(),[a,i]=Ty("search-side-content-width",r),[l,c]=f.useState(!1),[u,d]=f.useState(()=>{if(typeof window<"u"){const y=window.innerWidth;return a||(s?Math.min(800,y*.5):y*.6)}return r}),[m,p]=f.useState(!1),h=f.useCallback(y=>{d(y),i(y)},[i,d]),g=f.useMemo(()=>({container:t,setContainer:n,isOpen:l,setIsOpen:c,width:u,setWidth:h,isResizing:m,setIsResizing:p}),[t,n,l,c,u,h,m,p]);return o.jsx(Z2e.Provider,{value:g,children:e})});J2e.displayName="SearchSideContainerProvider";const e0=()=>f.useContext(Z2e),O4t=f.memo(({children:e,title:t,onClose:n,toolbarContent:r,resizable:s=!1,icon:a})=>{const{container:i,setIsOpen:l}=e0(),{canvasState:c}=F_();return f.useEffect(()=>{l(!0)},[l]),Hd(()=>{l(!1)}),i?Us.createPortal(o.jsx(tEe,{icon:a??c?.icon,title:t??c?.title,onClose:n,toolbarContent:r,resizable:s,children:e}),i):null}),eEe=f.memo(({containerRef:e})=>{const{setWidth:t,setIsResizing:n,isResizing:r}=e0(),s=f.useRef(null);Hd(()=>{s.current&&s.current()});const a=f.useCallback(i=>{i.preventDefault(),n(!0),document.body.style.userSelect="none",document.body.style.cursor="col-resize";const l=i.clientX,c=e.current?.offsetWidth??0,u=p=>{const h=p.clientX-l,g=c-h;t(g)},d=()=>{n(!1),document.body.style.userSelect="",document.body.style.cursor="",document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",m),document.removeEventListener("contextmenu",m),s.current=null},m=()=>{d()};document.addEventListener("mousemove",u),document.addEventListener("mouseup",m),document.addEventListener("contextmenu",m),s.current=d},[t,n,e]);return o.jsxs("div",{className:"group absolute inset-y-0 left-0 z-10 hidden cursor-col-resize xl:block",children:[o.jsx(H,{variant:"background",className:"absolute inset-y-0 left-0 h-full w-px",children:o.jsx("div",{className:B("group-hover:bg-super duration-normal bg-subtle pointer-events-none absolute inset-0 origin-center group-hover:scale-x-[250%]",{"!bg-super scale-x-[250%] delay-0":r,"delay-0 group-hover:delay-300":!r})})}),o.jsx(H,{variant:"background",className:B("left-half duration-quick absolute top-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full p-px group-hover:!opacity-0",{"!opacity-0 delay-0":r,"delay-0 group-hover:delay-300":!r}),children:o.jsx(H,{variant:"textColor",className:"w-three h-5 rounded-full opacity-20"})}),o.jsx("div",{className:"absolute top-0 h-full w-5 -translate-x-1/2 cursor-col-resize",onMouseDown:a})]})});eEe.displayName="ResizeHandle";const tEe=f.memo(({children:e,title:t,icon:n,onClose:r,toolbarContent:s,resizable:a=!1})=>{const{isResizing:i}=e0(),l=f.useRef(null),{$t:c}=Z();return o.jsxs("div",{ref:l,className:"group/search-side-content relative flex h-full min-h-0 flex-1 flex-col",children:[a&&o.jsx(eEe,{containerRef:l}),o.jsxs(H,{variant:"background",className:"h-headerHeight gap-sm px-md erp-tab:rounded-none sticky top-0 flex items-center rounded-t-lg border-b",children:[n,t&&o.jsx(D,{variant:"baseSemi",className:"min-w-0 truncate",children:t}),o.jsx("div",{className:"gap-sm flex flex-1 items-center",children:s}),o.jsx(Te,{icon:Rt,onClick:r,size:"small",pill:!0,variant:"common",extraCSS:"-mr-xs",toolTip:c({defaultMessage:"Close",id:"rbrahOGMC3"})})]}),o.jsxs(H,{variant:"background",className:"md:gap-xs erp-tab:rounded-none scrollbar-subtle relative isolate h-0 flex-1 overflow-y-auto overflow-x-hidden rounded-b-lg bg-clip-border shadow-sm",children:[e,i&&o.jsx("div",{className:"absolute inset-0"})]})]})});tEe.displayName="SearchSideContentBody";const nEe=f.memo(()=>{const{isMobileStyle:e}=xe(),{setContainer:t,isOpen:n,isResizing:r}=e0(),s=rEe(),{isXLargeScreen:a}=Jm();return e?o.jsx(en,{variant:"full-sheet",isOpen:n,headerClassname:"hidden",wrapperClassname:"flex-1 !px-0 !pb-0",modalContentClassname:"min-h-0 !flex-1 !p-0",children:o.jsx("div",{ref:t,className:"flex h-full min-h-0 flex-1 flex-col"})}):o.jsx(H,{className:B("fixed inset-y-0 right-0 z-[100] flex h-full w-[60vw] min-w-0 flex-1 flex-col text-clip border-l shadow-lg xl:border-l-0 xl:shadow-none",{"pointer-events-none w-0 translate-x-full opacity-0":!n,"duration-normal transition-transform ease-in-out":!r}),style:{width:n&&a?s:void 0},ref:t})});nEe.displayName="SearchSideContentWrapper";O4t.displayName="SearchSideContent";const rEe=()=>{const{width:e}=e0(),{width:t}=pot(),{isSidebarPinned:n}=hn();return f.useMemo(()=>`calc(max(500px,min(calc(100vw - ${n?720:520}px),${e/t*100}vw)))`,[e,t,n])},sEe=f.memo(({children:e})=>{const{isOpen:t,isResizing:n}=e0(),{isXLargeScreen:r}=Jm(),s=rEe();return o.jsx("div",{className:B("flex size-full flex-1",{"duration-0":n,"duration-normal ease-in-out":!n}),style:{transitionProperty:n?"none":"padding",paddingRight:t&&r?s:void 0},children:e})});sEe.displayName="SearchSideContentLayoutWrapper";const LC=30,qk=({autoFetch:e,reason:t})=>{const{session:n}=Et(),r=ht(),s=async({pageParam:h=0})=>{(!h||h<0)&&(h=1);const g=(h-1)*LC;return await hJe({params:{limit:LC,offset:g},reason:t})},a=xu({queryKey:pn,enabled:e&&!!n,initialPageParam:0,queryFn:({pageParam:h})=>s({pageParam:h}),getNextPageParam:(h,g)=>h&&h[0]?.has_next_page?g.length+1:void 0}),i=a.data?.pageParams?.length??1,l=a.data?.pages??ue,c=f.useMemo(()=>l.flat(),[l]),u=l[l.length-1]?.[0]?.has_next_page,d=f.useMemo(()=>({currentPage:i,hasNextPage:!!u,hasPreviousPage:i>1,getNextPage:()=>a.fetchNextPage(),getPreviousPage:()=>a.fetchPreviousPage()}),[i,u,a]),m=f.useCallback(h=>{const g=[],y=[];let v=0;for(;v<h.length;)y.push(g.length),g.push(h.slice(v,v+LC)),v+=LC;r.setQueryData(pn,{pages:g,pageParams:y})},[r]),p=f.useCallback(()=>{!d.hasNextPage||a.isLoading||d.getNextPage()},[a.isLoading,d]);return f.useMemo(()=>({...a,fetchNextPage:p,collections:c,paginationInfo:d,updateCache:m}),[c,p,d,a,m])},L4t=({reason:e})=>{const{collections:t}=qk({autoFetch:!0,reason:e}),{data:n}=cge({reason:e}),r=t?.filter(i=>!dg(i.user_permission)),s=n?.[0]?.link;return r?.length===0?"/spaces/templates/":s||"/spaces/templates/"};function D4t(e){return e==="you"||e==="top"||e==="trending"?null:e}const aEe=I.memo(e=>{const{$t:t}=Z(),{isMobileStyle:n}=xe();return o.jsx(en,{...e,title:t({defaultMessage:"Make it yours",id:"RBKgNODPrT"}),variant:n?"bottom-left-sheet":void 0,children:o.jsx("div",{className:"mb-safeAreaInsetBottom md:-m-md md:-mb-10",children:o.jsx("div",{className:"-m-md md:m-0",children:o.jsx(oEe,{title:t({defaultMessage:"Select topics and interests to customize your Discover experience",id:"EmIFJDqmup"}),onSave:e.onSave,discoverTopicMap:e.discoverTopicMap,userSelectedTopics:e.userSelectedTopics})})})})});aEe.displayName="InterestConfigurationSheet";const oEe=I.memo(({title:e,subtitle:t,onClose:n,onSave:r,discoverTopicMap:s,userSelectedTopics:a,variant:i})=>{const{$t:l}=Z(),[c,u]=f.useState(a),d=rt(),{openVisitorLoginUpsell:m}=ur({enabled:!d}),{trackEvent:p}=Ne();f.useEffect(()=>{p("discover topics picker opened",{})},[p]);const h=f.useCallback(()=>{m({title:l({defaultMessage:"Sign in to customize your Discover Feed",id:"tlclIdp++4"}),origin:Oe.DISCOVER_TOPICS,sheetModalVariant:"bottom-sheet-gradient"})},[l,m]),g=x=>{if(p(c.includes(x)?"discover topic unselected":"discover topic selected",{topicUUID:D4t(x)}),!d){h();return}u(b=>b.includes(x)?b.filter(_=>_!==x):b.concat(x))},y=f.useCallback(()=>{if(p("discover topics picker saved",{}),!d){h();return}r(c)},[c,d,r,h,p]),v=f.useCallback(x=>{x.stopPropagation()},[]);return o.jsxs(H,{variant:"background",className:"p-md relative rounded-xl",onClick:v,children:[o.jsxs("div",{className:"relative z-[2]",children:[o.jsxs("div",{className:"mb-md flex items-start justify-between",children:[o.jsxs("div",{children:[e&&o.jsx(D,{variant:"baseSemi",children:e}),t&&o.jsx(D,{color:"light",variant:"small",children:t})]}),n&&o.jsx(Te,{icon:Rt,size:"tiny",pill:!0,onClick:n,extraCSS:"-mt-sm -mr-sm hover:!bg-inverse/5"})]}),o.jsx("div",{className:"gap-sm flex flex-wrap",children:Object.values(s).map(x=>x.isAlwaysShown?null:o.jsx(iEe,{topic:x.id,topicData:x,onClick:g,selected:c.includes(x.id)},x.id))}),o.jsx("div",{className:"mt-md bg-inverse h-px opacity-10"}),o.jsx("div",{className:"mt-md",children:o.jsx(he,{text:l({defaultMessage:"Save Interests",id:"YbI1HM86Ih"}),variant:"primary",size:"small",extraCSS:"w-full",onClick:y})})]}),i==="offset"&&o.jsx("div",{className:"rounded-inherit absolute inset-0 z-[1] dark:bg-black",children:o.jsx("div",{className:"bg-super/10 dark:bg-super/25 dark:border-super/5 rounded-inherit absolute inset-0 z-[1] dark:border"})})]})});oEe.displayName="InterestConfigurationBox";const iEe=I.memo(({topic:e,topicData:t,selected:n,onClick:r})=>o.jsxs(ge.button,{className:B("px-sm py-xs inline-flex cursor-pointer items-center gap-1.5 rounded-md duration-150 active:scale-[0.95]",{"bg-super/15 dark:bg-white/5":!n},{"bg-super":n}),onClick:()=>r(e),children:[o.jsx(Ke,{mode:"popLayout",initial:!1,children:o.jsx(ge.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2,type:"spring",bounce:.2},children:o.jsx(ce,{icon:n?I7:t.icon,size:"sm",className:B({"text-quiet":!n},{"text-inverse":n})})},n?`selected-${e}`:e)}),o.jsx(D,{variant:"small",className:B({"text-quiet":!n},{"text-inverse":n}),children:t.name})]}));iEe.displayName="InterestPill";const F4t={palette:Q8e,flask:Y8e,tv:qie,microchip_ai:K8e,dollar_circle:q8e,medal:B7,plane:$M,paint_brush:Gie},U4t=({allTopics:e})=>{const{$t:t}=Z();return f.useMemo(()=>[{id:"you",slug:"you",name:t({defaultMessage:"For You",id:"5KhEnUXBTF"}),icon:G8e,description:t({defaultMessage:"Stories curated for you",id:"2sibbc2gbI"}),isAlwaysShown:!0},{id:"top",slug:"top",name:t({defaultMessage:"Top",id:"X/9XdXSCBu"}),icon:GI,isAlwaysShown:!0},...e.map(r=>({id:r.id,name:r.translated_name??r.name,icon:F4t[r.icon]??GI,slug:r.slug}))],[e,t])},B4t=({reason:e})=>{const t=ht();return vt({mutationKey:["discover_update_topics",{}],mutationFn:r=>B0t({topics:r,reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:upe()}),t.invalidateQueries({queryKey:Tc()})}})},nM=f.memo(()=>o.jsx(yn,{speed:"slow",className:"flex flex-col gap-2",children:Array.from({length:4}).map((e,t)=>o.jsxs(H,{className:B("grid place-items-center",{"w-[90%]":t===0||t===1,"w-[70%]":t===2,"w-[60%]":t===3}),children:[o.jsx(D,{variant:"small",className:"opacity-0",style:{gridArea:"1/-1"},children:""}),o.jsx(H,{variant:"subtle",className:"h-2 w-full rounded-full",style:{gridArea:"1/-1"}})]},t))}));nM.displayName="SidebarListLoader";const Q1=f.memo(({children:e})=>o.jsx("div",{className:"flex flex-col gap-[10px]",children:e}));Q1.displayName="SidebarSubMenu";const X1=f.memo(()=>o.jsx("div",{className:"bg-subtle h-px"}));X1.displayName="SidebarDivider";const Og=f.memo(({text:e,accessory:t,className:n,href:r,onClick:s,onMouseOver:a,testId:i})=>{const l=o.jsx(D,{variant:"tiny",color:"light",className:"group-hover:text-foreground",children:e}),c=r?o.jsxs(Ge,{href:r,className:"group relative block",onClick:s,onMouseOver:a,"data-testid":i||"library-button",draggable:!1,children:[o.jsx(H,{variant:"subtle",className:"-inset-y-xs -inset-x-sm duration-quick absolute rounded-md opacity-0 group-hover:opacity-100"}),o.jsxs("span",{className:"relative flex items-center gap-0.5",children:[l,o.jsx(Kn,{className:"text-quiet group-hover:text-foreground -me-xs duration-quick size-4 opacity-0 group-hover/header:opacity-100 rtl:rotate-180"})]})]}):l;return o.jsxs("div",{className:B("group/header gap-xs flex h-6 items-center justify-between",n),children:[c,o.jsx(Ke,{initial:!1,children:t&&o.jsx(ge.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"inline-flex",children:t})})]})});Og.displayName="SidebarSubMenuHeader";const z9=f.memo(({href:e,text:t,onMouseOver:n,onClick:r})=>o.jsx(Ge,{href:e,className:"block",onMouseOver:n,onClick:r,children:o.jsx(D,{variant:"tinyRegular",color:"light",className:"duration-quick hover:opacity-60",children:t})}));z9.displayName="SidebarLink";const Ls=f.memo(({href:e,text:t,icon:n,fadeOut:r,onClick:s,selected:a,deemphasized:i,menuItems:l,testId:c,sidebarOpen:u,accessory:d,loading:m,id:p})=>{const h=Py(),{openDropdownId:g,setOpenDropdownId:y}=rUt(),v=o.jsxs(o.Fragment,{children:[o.jsx(H,{variant:"subtle",className:B("-inset-y-xs -inset-x-sm duration-quick absolute rounded-md opacity-0 group-hover:opacity-100",{"opacity-100":a||g===p})}),o.jsxs(D,{className:"relative flex items-center gap-2",variant:"small",color:i?"light":void 0,children:[n&&(f.isValidElement(n)?n:o.jsx(ce,{icon:n,className:"size-[18px]"})),o.jsx("span",{className:"w-full overflow-hidden whitespace-nowrap",style:{maskImage:r?h?"linear-gradient(to left, black 85%, transparent 97%)":"linear-gradient(to right, black 85%, transparent 97%)":void 0},children:t}),o.jsx(Ke,{initial:!1,children:d&&o.jsx(ge.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"inline-flex",children:d})}),l&&u&&!m&&o.jsxs(H,{as:"span",style:{maskImage:h?"linear-gradient(to right, black 60%, transparent)":"linear-gradient(to left, black 60%, transparent)"},variant:"underlay",className:B("bg-subtle ps-md -end-xs duration-quick absolute top-1/2 inline-flex -translate-y-1/2 translate-x-px opacity-0 group-hover:opacity-100",{"opacity-100":g===p}),children:[o.jsx(H,{variant:"subtle",className:"p-xs pointer-events-none absolute inset-0 flex items-center justify-end"}),o.jsx(Jt,{isMobileStyle:!1,items:l,placement:h?"left":"right",isOpen:g===p,onOpen:()=>{y(p)},onClose:()=>{y(null)},children:o.jsx("div",{onClick:x=>{x.preventDefault()},className:"hover:bg-inverse/5 p-xs duration-quick rounded",children:o.jsx(ce,{icon:xd,size:14,className:"text-quiet"})})})]}),m&&o.jsx("span",{style:{maskImage:h?"linear-gradient(to right, black 60%, transparent)":"linear-gradient(to left, black 60%, transparent)"},className:B("group-hover:bg-subtle text-super ps-md -end-xs absolute top-1/2 -translate-x-0.5 -translate-y-1/2",{"bg-subtle":a,"bg-subtler":!a}),children:o.jsx("div",{className:"flex size-[14px] items-center justify-center",children:o.jsx($r,{size:12})})})]})]});return e?o.jsx(Ge,{href:e,className:"group relative block","data-testid":c,draggable:!1,children:o.jsx("div",{className:"group relative block",onClick:s,children:v})}):o.jsx("button",{onClick:s,className:"group relative block appearance-none text-left",type:"button","data-testid":c,children:v})});Ls.displayName="SidebarSubMenuItem";function V4t({userSelectedTopics:e,topics:t}){const n=e.map(s=>s.id);return Object.fromEntries(t.map(s=>{const a={...s,userSelected:n.includes(s.id)};return[s.id,a]}))}const qne=e=>{const t=e?.split("/").slice(1);return t?t[1]:null},lEe=f.memo(({isConfiguring:e,setConfiguring:t,sidebarOpen:n})=>{const r="discover-sidebar",s=rt(),a=jt(),{data:i,isLoading:l}=U0t(),c=rt(),u=U4t({allTopics:i?.allTopics??ue}),d=i?.userSelectedTopics??ue,m=V4t({userSelectedTopics:d,topics:u}),p=d.length>0?"selected":"default",h=f.useCallback(_=>_.id==="top"||_.id==="trending"?!0:_.id==="you"?s:p==="default"?!0:!!_.userSelected,[p,s]),g=f.useMemo(()=>{const _=[],w=[];return Object.values(m).map(C=>{const{name:S,icon:E,slug:M}=C;h(C)?_.push({text:S,icon:E,link:`/discover/${M}`,active:qne(a)===M}):w.push({text:S,icon:E,link:`/discover/${M}`,active:qne(a)===M})}),{activeItems:_,overflowItems:w}},[m,h,a]),y=d.map(_=>_.id),v=B4t({reason:r}),x=_=>{v.mutate(Array.from(_)),e&&t(!1)},{$t:b}=Z();return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-[12px]",children:[o.jsx(Og,{text:b({defaultMessage:"Topics",id:"kc79d3WUbd"})}),l?o.jsx(nM,{}):o.jsx(Q1,{children:g.activeItems.map(_=>o.jsx(Ls,{id:_.text,href:_.link??"",text:_.text,selected:_.active,icon:_.icon,sidebarOpen:n},_.text))}),g.overflowItems.length>0&&c&&o.jsxs(o.Fragment,{children:[o.jsx(Og,{text:b({defaultMessage:"More",id:"I5NMJ8llIi"})}),o.jsx(Q1,{children:g.overflowItems.map(_=>o.jsx(Ls,{id:_.text,href:_.link??"",text:_.text,selected:_.active,icon:_.icon,sidebarOpen:n},_.text))})]})]}),o.jsx(aEe,{isOpen:e,onClose:()=>t(!1),onSave:x,discoverTopicMap:m,userSelectedTopics:y})]})});lEe.displayName="DiscoverSidebar";const XS="recentItems";async function $4t({reason:e}){try{const t=await se.GET("/rest/thread/list_recent",e),n=t.data;if(!t.response.ok)throw new Error("Failed to get recent threads.");return n??ue}catch(t){return ne.error("Failed to get recent threads.",t),ue}}const W4t=({reason:e})=>{const{isIncognito:t}=Ra({reason:e}),{inFlightLatest:n}=Vt(),{session:r}=Et(),s=r?.user?.email,{data:a,refetch:i,isLoading:l}=We({queryKey:[XS,s],queryFn:async()=>!s||t?ue:await $4t({reason:e})});return f.useEffect(()=>{n||i({cancelRefetch:!1})},[n,i]),f.useMemo(()=>!s||t?{data:[],isLoading:!1}:{data:a??ue,isLoading:l},[a,s,t,l])},H4t={about:eu,born:ZT,age:ZT,died:ZT,parents:WH,siblings:WH,children:i9e,spouse:qI,spouses:qI,education:h2,educated_at:h2,net_worth:o9e,ratings:GI,directed_by:Yie,starring:eu,watch_on:jie,treatment:a9e,symptoms:s9e,specialists:r9e};function z4t(e){return e&&H4t[e]||null}const G4t={EXTERNAL_LINK_TYPE_UNSPECIFIED:Tx,PRIMARY:Tx,WIKIPEDIA:n9e,X:t9e,INSTAGRAM:e9e,TIKTOK:J8e,YOUTUBE:Kie,FACEBOOK:Z8e,MAYOCLINIC:yu,IMDB:X8e};function Kne(e){return G4t[e]}const cEe=Wt("PanelContext",{menuItems:void 0}),t0=()=>{const e=f.useContext(cEe);if(!e)throw new Error("usePanel must be used within PanelContext");return e},pr=({children:e,menuItems:t,variant:n,className:r})=>o.jsx(Or,{fallback:null,children:o.jsx(cEe.Provider,{value:{menuItems:t},children:n==="noChrome"?o.jsx(H,{className:r||"mb-md",children:e}):o.jsx(sn,{shadow:!0,className:`${r||"mb-md"} p-md`,children:e})})}),q4t=({menuItems:e,buttonClass:t,placement:n})=>{const{isMobileStyle:r}=xe();return e.length<=0?null:o.jsx(Jt,{items:e,isMobileStyle:r,placement:n,children:o.jsx(Te,{size:"tiny",pill:!0,icon:xd,extraCSS:t})})},K4t=({title:e,href:t,subtitle:n,image_url:r,links:s,children:a,entryUUID:i,data:l})=>{const{trackEvent:c}=Ne(),u=f.useCallback(d=>{c("knowledge card link clicked",{label:"social media",socialMediaType:d.type,value:d.url,entryUUID:i,type:l?.type??"",name:l?.title??"",id:l?.source_url??""})},[l?.source_url,l?.title,l?.type,i,c]);return o.jsx(H,{className:"gap-sm flex w-full justify-between",children:o.jsxs("div",{className:"gap-md flex grow items-start",children:[r?o.jsx("div",{className:"flex-none",children:o.jsx(fs,{imageClassName:"size-[120px] object-cover object-top",rounded:"md",src:r,alt:e,includeLightBoxModal:!1})}):null,o.jsxs("div",{className:"flex h-full grow flex-col",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"gap-sm mb-two flex items-start",children:[o.jsx(D,{variant:"section-title",className:"flex-1",children:t?o.jsx(Ge,{href:t,target:"_blank",className:"hover:text-super flex-1 duration-150",children:e}):e}),a]}),n&&o.jsx(D,{variant:"small",className:"mb-sm mr-sm text-pretty",children:n})]}),s&&s.length>0&&o.jsx("div",{className:"gap-sm flex flex-wrap",children:s.map(d=>o.jsx(uEe,{link:d,solo:s.length===1,handleLinkClick:u},d.type))})]})]})})},uEe=I.memo(({link:e,solo:t,handleLinkClick:n})=>{const r=f.useCallback(()=>n(e),[n,e]);return t?o.jsx(he,{icon:Kne(e.type),text:e.title,textClassName:"font-normal ml-2xs text-quiet ",size:"tiny",href:e.url,target:"_blank",onClick:r},e.url):o.jsx(he,{icon:Kne(e.type),size:"tiny",href:e.url,target:"_blank",onClick:r},e.type)});uEe.displayName="ButtonFactory";const Y4t=({name:e,title:t,value:n})=>{const r=z4t(e);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"gap-sm flex min-w-[120px]",children:[r&&o.jsx(D,{variant:"smallBold",color:"light",className:"w-5",children:o.jsx(ce,{icon:r,size:"sm"})}),o.jsx(D,{variant:"smallBold",color:"light",children:t})]}),o.jsx(D,{variant:"small",children:n})]})},Q4t=({children:e})=>o.jsx(H,{className:"pt-sm px-md border-t",children:e});pr.Title=K4t;pr.Item=Y4t;pr.Menu=q4t;pr.Footer=Q4t;const dEe=I.memo(({graphData:e})=>{const[t,n]=f.useState(!1),r=e.url,s=e.name,a=f.useCallback(()=>n(!1),[]);return o.jsxs("div",{className:"flex justify-center",children:[o.jsx("img",{src:r,alt:s,className:"max-h-[50vh] overflow-hidden rounded align-middle",onClick:()=>n(!0)}),o.jsx(fEe,{isOpen:t,onClose:a,alt:s,src:r})]})});dEe.displayName="StaticImageGraph";const fEe=I.memo(({isOpen:e,onClose:t,alt:n,src:r})=>{const s=f.useCallback(()=>t(!1),[t]);return o.jsxs(en,{onClose:s,isOpen:e,variant:"hide-chrome",disableAnimation:!1,children:[o.jsx("div",{className:"flex place-content-center",onClick:()=>t(!1),children:o.jsx("div",{className:"gap-xs p-md md:p-xl flex flex-col items-center justify-between",children:o.jsx("div",{className:"grow",children:o.jsx("img",{alt:n,src:r,className:"max-h-[50vh]"})})})}),o.jsx(he,{onClick:s,icon:Rt,extraCSS:"!fixed top-md right-md shadow-sm",size:"small",pill:!0,ariaLabel:"Close"})]})});fEe.displayName="ImageModal";const mEe=I.memo(({graphData:e})=>o.jsxs(pr,{className:"gap-md bg-subtler p-md flex flex-col rounded-md text-center",children:[o.jsx(pr.Title,{title:e.name,subtitle:""}),o.jsx(dEe,{graphData:e})]}));mEe.displayName="GraphPanel";const X4t={pendingClarifications:[],addClarification:()=>{},clearClarifications:()=>{}},pEe=Wt("DeepResearchContext",X4t),Z4t=({children:e})=>{const[t,n]=f.useState([]),r=f.useCallback(i=>{n(t.concat([i]))},[t]),s=f.useCallback(()=>{n([])},[]),a={pendingClarifications:t,clearClarifications:s,addClarification:r};return o.jsx(pEe.Provider,{value:a,children:e})},C$=()=>{const e=f.useContext(pEe);if(!e)throw new Error("useDeepResearchState must be used within DeepResearchContext");return e};var dl={},Yne;function J4t(){if(Yne)return dl;Yne=1;var e=dl&&dl.__values||function(s){var a=typeof Symbol=="function"&&s[Symbol.iterator],i=0;return a?a.call(s):{next:function(){return s&&i>=s.length&&(s=void 0),{value:s&&s[i++],done:!s}}}},t=dl&&dl.__read||function(s,a){var i=typeof Symbol=="function"&&s[Symbol.iterator];if(!i)return s;var l=i.call(s),c,u=[],d;try{for(;(a===void 0||a-- >0)&&!(c=l.next()).done;)u.push(c.value)}catch(m){d={error:m}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(d)throw d.error}}return u};Object.defineProperty(dl,"__esModule",{value:!0}),dl.selectState=function(s){return s};function n(){var s,a,i;function l(c){var u=0,d;function m(h){var g,y;s||(s={state:h,version:1}),s.state!==h&&(s.state=h,s.version+=1);var v=s.version,x;if(d){if(v===d.stateVersion)return d.value;var b=!1;try{for(var _=e(d.dependencies.entries()),w=_.next();!w.done;w=_.next()){var C=t(w.value,2),S=C[0],E=C[1];if(S(h)!==E){b=!0,x=S;break}}}catch(R){g={error:R}}finally{try{w&&!w.done&&(y=_.return)&&y.call(_)}finally{if(g)throw g.error}}if(!b)return d.value}u+=1;var M=new Map,k=Object.assign(function(R){if(M.has(R))return M.get(R);var O=R(h);return M.set(R,O),O},{reason:x}),A=i?i(function(){return c(k)},p,h,x):c(k);if(M.size===0)throw new Error("[rereselect] Selector malfunction: The selection logic must select some data by calling `query(selector)` at least once.");return d={stateVersion:v,dependencies:M,value:A},A}var p=Object.assign(function(g){return a?a(function(){return m(g)},p,g):m(g)},{selectionLogic:c,recomputations:function(){return u},resetRecomputations:function(){return u=0},introspect:function(){return d}});return p}return{makeSelector:l,setInvocationWrapper:function(c){a=c},setComputationWrapper:function(c){i=c}}}dl.createSelectionContext=n;var r=n();return dl.makeSelector=r.makeSelector,dl}var Ct=J4t();const DC=.2,hEe=I.memo(({title:e,loading:t})=>{const{isMobileStyle:n}=xe(),r=n;return o.jsx(yn,{active:t,className:"gap-sm flex w-full items-center",speed:"slow",children:o.jsx(Ke,{mode:"popLayout",initial:!1,children:o.jsx(ge.div,{initial:{y:"-50%",opacity:0},animate:{y:0,opacity:1,transition:{y:{duration:.2,ease:la,delay:DC+.1},opacity:{duration:.2,ease:"linear",delay:DC+.1}}},exit:{y:"50%",opacity:0,transition:{y:{duration:.2,ease:Dle,delay:DC},opacity:{duration:.2,ease:"linear",delay:DC}}},className:"w-full",children:o.jsx(D,{variant:r?"baseSemi":"section-title",color:t?"ultraLight":void 0,children:e})},e)})})});hEe.displayName="EntityGroupTitle";const gEe=Wt("EntityGroupContext",void 0),eNt=()=>{const e=f.useContext(gEe);if(!e)throw new Error("useEntityGroup must be used within an EntityGroupProvider");return e},yEe=I.memo(({children:e})=>{const[t,n]=f.useState(!1);return o.jsx(gEe.Provider,{value:{viewMoreOpen:t,setViewMoreOpen:n},children:e})});yEe.displayName="EntityGroupProvider";const U_=e=>{let t;if("meta_data"in e?t=e.meta_data:t=Br(e).with({place_widget_block:qc.nonNullable},n=>({...n.place_widget_block,object:"PlaceWidget"})).with({shopping_widget_block:qc.nonNullable},n=>({...n.shopping_widget_block,progress:Mc.DONE,object:"ShopifyWidget"})).with({search_result_widget_block:qc.nonNullable},n=>{const r=n.search_result_widget_block.metadata||{},s=r.object;if(s==="WeatherWidget")return{...r,progress:Mc.DONE,object:"WeatherWidget"};if(s==="TimeWidget")return{...r,progress:Mc.DONE,object:"TimeWidget"};if(s==="CalculatorWidget")return{...r,progress:Mc.DONE,object:"CalculatorWidget"};if(s==="TaskWidget")return{...r,progress:Mc.DONE,object:"TaskWidget"};if(s==="TimerWidget")return{...r,progress:Mc.DONE,object:"TimerWidget"};if(s==="CurrencyExchangeWidget")return{...r,progress:Mc.DONE,object:"CurrencyExchangeWidget"}}).otherwise(()=>{}),!!t)return t},vEe=Wt("ScrollToWidgetContext",{selectedWidgetId:void 0,scrollToWidget:()=>{},entityRefs:{}}),S$=()=>{const e=f.useContext(vEe);if(!e)throw new Error("useScrollToWidget must be used within ScrollToWidgetContext");return e},xEe=I.memo(({children:e,entities:t})=>{const[n,r]=f.useState({}),[s,a]=f.useState(void 0),{scrollContainerRef:i}=Oa(),l=f.useRef(null);f.useEffect(()=>()=>{r({})},[]),f.useEffect(()=>{r(u=>{const d=u;let m=!1;return t?.map(p=>{const h=U_(p);if(!h)return;if(h.object==="ShopifyWidget"){const y=h.id;if(!n[y]){m=!0;const v=f.createRef();d[y]=v}}}),m?d:u})},[t,n]);const c=u=>{l.current&&clearTimeout(l.current);const d=n[u]?.current;if(d&&i?.current){const p=d.getBoundingClientRect().top+i.current?.scrollTop-200;i?.current?.scrollTo({top:p,behavior:"smooth"})}a(u),l.current=setTimeout(()=>{a(void 0)},2e3)};return o.jsx(vEe.Provider,{value:{selectedWidgetId:s,scrollToWidget:c,entityRefs:n},children:e})});xEe.displayName="ScrollToWidgetProvider";const tNt=3,bEe=I.memo(({onClick:e,disabled:t,images:n})=>{const{$t:r}=Z();return o.jsx("div",{className:"flex items-center justify-center",children:o.jsxs(H,{variant:"background",bgHover:"subtler",className:B("gap-sm py-md group flex w-full cursor-pointer items-center justify-center rounded-lg border",{"pointer-events-none opacity-50":t}),onClick:e,children:[o.jsx("div",{className:"mx-xs flex items-center",children:n.slice(0,tNt).map((s,a)=>o.jsxs("div",{className:B("-ml-xs dark:ring-inverse relative size-6 shrink-0 overflow-hidden rounded bg-white p-[0.1rem] shadow-sm duration-150 dark:ring",{"group-hover:-translate-x-sm":a===1},{"group-hover:-translate-x-md":a===0}),children:[o.jsx(fs,{src:s.src,containerClassName:B("relative size-full"),alt:"",maskClassName:"!rounded-[0.18rem]",includeLightBoxModal:!1,imageClassName:"w-full h-full object-contain bg-white"}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/10 dark:border-transparent"})]},s.src))}),o.jsx(D,{variant:"smallBold",children:r({defaultMessage:"All Products",id:"enAu2bZ4pg"})})]})})});bEe.displayName="ViewAllButton";const _Ee=I.memo(()=>o.jsx(wEe,{}));_Ee.displayName="WidgetPlaceholder";const wEe=I.memo(()=>{const e=f.useMemo(()=>({maskImage:"linear-gradient(to bottom, black, transparent)"}),[]);return o.jsx(ge.div,{children:o.jsx(H,{variant:"subtler",className:"flex h-[200px] animate-pulse rounded-lg",style:e})})});wEe.displayName="HighIntentWidgetAnimationPlaceholder";const CEe=Wt("EntityContext",{entityId:"",menuItems:void 0,variant:void 0}),B_=()=>{const e=f.useContext(CEe);if(!e)throw new Error("useEntity must be used within EntityContext");return e},nNt=({children:e,id:t,menuItems:n,className:r,entityVariant:s})=>o.jsx(CEe.Provider,{value:{entityId:t,menuItems:n,variant:s},children:o.jsx(sn,{variant:s==="hide-chrome"?"transparent":void 0,className:B("group/card flex flex-col",{"p-md":s!=="hide-chrome"},r),children:e})}),rNt=({className:e,...t})=>o.jsx(H,{className:B("gap-sm md:gap-md relative flex flex-col rounded-lg md:flex-row",e),...t}),sNt=({primaryButtonText:e,onPrimaryButtonClick:t,listNumber:n,className:r,children:s,...a})=>o.jsxs("div",{className:B("relative md:w-[calc(30%_-_8px)]",r),...a,children:[o.jsxs("div",{className:"gap-md flex h-full flex-col justify-between",children:[s,e&&t&&o.jsx("div",{className:"flex flex-col items-stretch md:max-w-[160px]",children:o.jsx(he,{text:e,variant:"primary",onClick:t,pill:!0,size:"small"})})]}),typeof n=="number"&&o.jsx(D,{variant:"smallCaps",color:"light",className:"border-subtler bg-base absolute -left-1.5 -top-1.5 flex size-5 shrink-0 items-center justify-center rounded-full border shadow-sm",children:n})]}),aNt=({className:e,buttonProps:t,secondaryButtonProps:n,trailingComponent:r,children:s,...a})=>{const{menuItems:i}=B_();return o.jsx("div",{className:B("flex min-w-0 flex-1 flex-col",e),...a,children:o.jsxs("div",{className:"gap-sm md:gap-md flex flex-1 flex-col justify-between rounded-lg",children:[o.jsx("div",{className:"gap-xs flex flex-col justify-between",children:o.jsx("div",{className:B("gap-xs relative mb-4 mt-2 flex flex-col md:mt-0"),children:s})}),(t||n)&&o.jsxs("div",{className:"gap-sm flex w-full items-center",children:[t&&o.jsx(he,{variant:"primary",pill:!0,size:"small",...t,extraCSS:`${t.extraCSS} w-full max-w-[160px]`}),n&&o.jsx(he,{variant:"border",pill:!0,size:"small",...n,extraCSS:`${n.extraCSS}`}),r,i&&i.length>0&&o.jsx("div",{className:"duration-150 group-hover/card:opacity-100 md:opacity-0",children:o.jsx(pr.Menu,{menuItems:i,placement:"bottom-start"})})]})]})})},oNt=({title:e,onTitleClick:t,className:n})=>{const{selectedWidgetId:r}=S$(),{entityId:s}=B_(),{isMobileStyle:a}=xe();return o.jsx("div",{onClick:t,className:n,children:o.jsx(D,{variant:a?"section-title":"entry-title",className:B("line-clamp-3 cursor-pointer !leading-tight duration-150 hover:opacity-70 md:text-2xl"),children:o.jsx("span",{className:B("rounded-md duration-300",{"bg-super/10":r===s}),children:e})})})},iNt=({loading:e,className:t,onClick:n,trailingText:r})=>{const{$t:s}=Z();return o.jsxs(H,{className:B("group relative flex h-12 items-center",{"opacity-50":e,"cursor-pointer":!e},t),onClick:e?void 0:n,children:[!e&&o.jsx(H,{variant:"subtle",className:"inset-y-xs absolute -inset-x-3 rounded-md opacity-0 duration-150 group-hover:opacity-100"}),o.jsxs("div",{className:"relative w-full",children:[o.jsxs("div",{className:B("gap-md relative flex w-full items-center justify-between",{"opacity-0":e}),children:[o.jsx(D,{variant:"smallBold",color:"light",children:s({defaultMessage:"View More",id:"QQSdHPJWXu"})}),o.jsxs(D,{variant:"tiny",color:"light",className:"gap-sm flex items-center",children:[r,o.jsx(ce,{icon:Kn,size:"xs"})]})]}),e&&o.jsxs("div",{className:"absolute inset-0 flex items-center justify-between",children:[o.jsx(H,{className:"h-2 w-[100px] rounded-full",variant:"subtle"}),o.jsx(ce,{icon:Kn,className:"text-quietest",size:"sm"})]})]})]})},lNt=({title:e,className:t,children:n,trailingContent:r,defaultExpanded:s=!1})=>{const[a,i]=f.useState(!s);return o.jsxs(H,{className:t,children:[o.jsxs("div",{onClick:()=>i(!a),className:"group relative flex h-12 cursor-pointer select-none items-center justify-between",children:[o.jsx(H,{variant:"subtle",className:"inset-y-xs absolute -inset-x-3 rounded-md opacity-0 duration-150 group-hover:opacity-100"}),o.jsx(D,{variant:"smallBold",color:"light",className:"relative",children:e}),o.jsxs("div",{className:"gap-md relative flex items-center",children:[o.jsx("div",{className:"gap-xs flex items-stretch",children:r}),o.jsx(ce,{icon:Dn,className:B("text-foreground relative opacity-50",{"rotate-180":!a}),size:"sm"})]})]}),o.jsx(zs,{transition:{ease:oo(.16,1,.3,1),duration:.2},initial:!1,children:!a&&o.jsx(Qr,{transition:{duration:.1},exit:{y:-5,opacity:0},animate:{y:0,opacity:1},initial:{y:-5,opacity:0},children:o.jsx("div",{className:"pb-4",children:n})})})]})},SEe=nNt,Crn=rNt,Srn=oNt,Ern=lNt,Mrn=sNt,krn=aNt,Trn=iNt,Kk=I.memo(({isOpen:e,children:t,placement:n,hoverOpen:r=!1,disabled:s=!1,onOpen:a,onClose:i,content:l,contentWidth:c="360px",isMobileStyle:u,boxProps:d,canOutsideClickClose:m,removeScroll:p,ref:h,...g})=>{const[y,v]=f.useState(!1),x=f.useMemo(()=>e!==void 0,[e]),b=f.useMemo(()=>x?e:y,[x,e,y]),_=f.useCallback(()=>{!b&&!s&&(a?.(),x||v(!0))},[s,x,a,b]),w=f.useCallback(()=>{b&&!s&&(i?.(),x||v(!1))},[s,x,i,b]);f.useImperativeHandle(h,()=>({dismiss:w}),[w]);const C=f.useMemo(()=>({width:c??void 0}),[c]),S=f.useMemo(()=>o.jsx(H,{style:C,...d,children:l}),[C,d,l]),E=f.useMemo(()=>({canOutsideClickClose:m??!0,removeScroll:p}),[m,p]);return u?o.jsxs(o.Fragment,{children:[o.jsx(en,{variant:"bottom-left-sheet",actionList:ue,isOpen:b,onClose:w,children:l}),o.jsx("span",{onClick:_,children:t})]}):o.jsx($o,{isOpen:b,hoverOpen:r,placement:n,onClose:w,onOpen:_,overlayProps:E,content:S,hasInteractiveContent:!0,...g,children:t})});Kk.displayName="DropDownModal";const cNt=I.memo(({inFlight:e,chooseIfReason:t,chooseIfLeadInCopy:n,pros:r,cons:s,className:a,viewState:i="collapsed",id:l})=>{const c=!t&&e;return o.jsx(yn,{active:c,className:B("relative",a),children:o.jsx(zs,{children:o.jsx(Qr,{children:o.jsxs("div",{className:"gap-sm pb-xs relative mt-3 flex flex-col rounded-md md:mx-0",children:[o.jsx(EEe,{reason:t,leadInCopy:n,loading:c}),o.jsx(Z1,{pros:r??ue,cons:s??ue,loading:c,viewState:i,id:l})]})})})})});cNt.displayName="EntityItemGuidance";const EEe=I.memo(({reason:e,leadInCopy:t,loading:n,textVariant:r="base"})=>{const{variant:s}=B_();return!e&&!n?null:o.jsx("div",{className:B("flex items-start gap-[12px] rounded-md md:items-center"),children:o.jsx("div",{className:"w-full",children:n?o.jsxs("div",{className:"gap-sm pb-sm flex flex-col",children:[o.jsx(H,{variant:s==="hide-chrome"?"subtler":"subtle",className:"h-2 w-full rounded-full"}),o.jsx(H,{variant:s==="hide-chrome"?"subtler":"subtle",className:"h-2 rounded-full"}),o.jsx(H,{variant:s==="hide-chrome"?"subtler":"subtle",className:"h-2 w-1/2 rounded-full"})]}):o.jsxs(D,{variant:r,children:[o.jsx("span",{className:"font-medium",children:t})," ",e]})})})});EEe.displayName="EntityItemChooseIf";const MEe=3,kEe=2,Z1=I.memo(({pros:e,cons:t,loading:n,className:r,viewState:s="collapsed",id:a,scrollOnMobile:i=!0})=>!n&&e.length===0&&t.length===0?null:o.jsx("div",{className:r,children:s==="collapsed"?o.jsx(NEe,{loading:n,pros:e,cons:t,id:a,scrollOnMobile:i}):o.jsx(jEe,{loading:n,pros:e,cons:t})}));Z1.displayName="EntityItemProsCons";const TEe=I.memo(({children:e,loading:t,scrollOnMobile:n=!0})=>{const{isMobileStyle:r}=xe(),{variant:s}=B_();return r&&n?o.jsx("div",{className:"-mx-md",children:o.jsx(Wi,{orientation:"horizontal",showScrollIndicator:!1,children:o.jsx("div",{className:"flex",children:o.jsx("ul",{className:"gap-sm px-md flex shrink-0",children:e})})})}):o.jsx("ul",{className:B("flex flex-wrap",{"gap-0":s==="dense-card"&&!t,"gap-sm":s!=="dense-card"||t}),children:e})});TEe.displayName="ProsConsCollapsedContainer";const NEe=I.memo(({loading:e,pros:t,cons:n,id:r,scrollOnMobile:s=!0})=>o.jsx(TEe,{loading:e,scrollOnMobile:s,children:o.jsx(Ke,{initial:!1,children:o.jsx(rc,{children:e?Array.from({length:3}).map((a,i)=>o.jsx(ZS,{asPlaceholder:!0,text:"",type:"con",label:"",id:r},i)):o.jsxs(o.Fragment,{children:[t.map(a=>o.jsx(ZS,{text:a.description,type:"pro",label:a.label,id:r},a.label+r)).slice(0,MEe),n.map(a=>o.jsx(ZS,{text:a.description,type:"con",label:a.label,id:r},a.label+r)).slice(0,kEe)]})})})}));NEe.displayName="ProsConsCollapsed";const jEe=I.memo(({loading:e,pros:t,cons:n})=>o.jsx("div",{className:"-mx-6",children:o.jsx(Wi,{orientation:"horizontal",showScrollIndicator:!1,children:o.jsx("ul",{className:"gap-sm flex px-6",children:e?Array.from({length:3}).map((r,s)=>o.jsx(AEe,{},s)):o.jsxs(o.Fragment,{children:[t.map(r=>o.jsx(G9,{text:r.description,type:"pro",label:r.label},r.label)).slice(0,MEe),n.map(r=>o.jsx(G9,{text:r.description,type:"con",label:r.label},r.label)).slice(0,kEe)]})})})}));jEe.displayName="ProsConsExpanded";const ZS=I.memo(({text:e,label:t,type:n,asPlaceholder:r,id:s})=>{const{trackEvent:a}=Ne(),{variant:i}=B_(),l=()=>{r||a("shopping pro con hover",{type:n,label:t})},c={initial:{opacity:0,x:-3},animate:{opacity:1,x:0}},u=f.useMemo(()=>o.jsx("div",{className:B("p-sm pointer-events-none translate-y-0"),children:o.jsx(D,{variant:"small",children:e})}),[e]);return o.jsx(ge.li,{variants:c,initial:"initial",animate:"animate",transition:{duration:.1,ease:la},className:B("group inline-flex shrink-0 cursor-default rounded-full duration-150",{"gap-xs":i!=="dense-card","gap-sm":i==="dense-card","hover:bg-subtler":!r,"border-subtlest border duration-150":!r&&i!=="dense-card","!border-transparent !bg-transparent":r}),onMouseEnter:l,children:o.jsx(Kk,{hoverOpen:!0,placement:"bottom-start",contentWidth:"200px",removeScroll:!1,content:u,isMobileStyle:!1,delayTime:1,disabled:r,hasInteractiveContent:!1,childrenClassName:"inline-flex",children:o.jsxs("div",{className:B("p-xs relative inline-flex items-center pr-[10px]",{"bg-subtler dark:bg-subtle":r,"h-[26px] rounded-full":r,"gap-2xs":i==="dense-card","gap-xs":i!=="dense-card"}),children:[o.jsx("div",{className:B("size-md flex shrink-0 items-center justify-center rounded-full",{"text-super":n==="pro"},{"text-quiet":n==="con"},{"bg-transparent":r}),children:o.jsx(D,{variant:"tiny",color:n==="pro"?"super":"light",className:"inline-flex",children:o.jsx(ce,{className:r?"opacity-0":"",icon:n==="pro"?Sr:Rt,size:"xs"})})}),r?o.jsx(D,{variant:"tiny",className:"w-10 shrink-0",children:""}):o.jsx(D,{variant:"tiny",color:"light",children:o.jsx("span",{className:B({"text-super":n==="pro"}),children:t})})]})})},t+s)});ZS.displayName="EntityItemProConItem";const AEe=I.memo(()=>o.jsx(H,{className:"p-sm h-[136px] w-[200px] rounded-md",variant:"subtler"}));AEe.displayName="ExpandedLoading";const G9=I.memo(({text:e,label:t,type:n})=>o.jsxs(H,{className:"p-sm w-[200px] rounded-md",variant:"subtler",children:[o.jsxs("div",{className:"mb-2xs gap-xs flex items-center",children:[o.jsx(H,{variant:n==="pro"?"super":"textColor",className:B("size-md flex shrink-0 items-center justify-center rounded-full",{"opacity-50":n==="con"}),children:o.jsx(ce,{icon:n==="pro"?Sr:Rt,className:"text-inverse shrink-0",size:"xs"})}),o.jsx(D,{variant:"smallBold",color:n==="pro"?"super":"light",children:t})]}),o.jsx(D,{variant:"small",color:"light",children:e})]}));G9.displayName="ProConItemExpanded";const q9=f.memo(({src:e,onClick:t,showViewMore:n,onMouseEnter:r,onMouseLeave:s,className:a,imageClassName:i,albumSize:l})=>{const{$t:c}=Z();return o.jsxs("div",{onClick:t,onMouseEnter:r,onMouseLeave:s,className:B("bg-subtle group relative aspect-square size-full cursor-pointer overflow-hidden rounded duration-150",a),children:[o.jsx("img",{src:e,alt:"",className:B("m-0 size-full object-contain duration-150 group-hover:scale-[1.02]",i),sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",loading:"lazy",decoding:"async"}),l&&o.jsx("div",{className:"absolute bottom-1.5 right-1.5 flex items-center justify-center rounded-full bg-black/40",children:o.jsxs(D,{variant:"tiny",color:"white",className:"gap-sm px-sm py-xs relative flex items-center",children:[l,o.jsx(ce,{icon:l9e,size:"xs"})]})}),n&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 dark:bg-black/80",children:o.jsxs(D,{variant:"tiny",color:"white",className:"px-sm py-xs relative rounded-full",children:[o.jsx("span",{className:"rounded-inherit absolute inset-0 bg-black opacity-30 dark:bg-white dark:opacity-10"}),o.jsx("span",{className:"relative opacity-80 dark:opacity-60",children:c({defaultMessage:"View More",id:"QQSdHPJWXu"})})]})})]})});q9.displayName="EntityItemImage";const uNt=()=>{const[e,t]=f.useState(!1),n=f.useRef(null),r=f.useRef(!1),s=f.useRef({x:0,y:0}),a=f.useRef(null);f.useEffect(()=>{const c=u=>{s.current={x:u.clientX,y:u.clientY}};return document.addEventListener("mousemove",c,{passive:!0}),()=>document.removeEventListener("mousemove",c)},[]);const i=f.useCallback(()=>{if(!n.current)return;const c=n.current.getBoundingClientRect(),{x:u,y:d}=s.current,m=u>=c.left&&u<=c.right&&d>=c.top&&d<=c.bottom;r.current&&!m&&(t(!0),r.current=!1,a.current&&(clearInterval(a.current),a.current=null))},[]),l=f.useCallback(()=>{t(!1),r.current=!0,a.current=setInterval(i,50)},[i]);return f.useEffect(()=>()=>{a.current&&clearInterval(a.current)},[]),[e,n,l]},E$=f.memo(({images:e,className:t,badgeText:n,imageClassName:r})=>{const[s,a]=f.useState(0),[i,l]=f.useState(!1),c=f.useRef(null),u=4,[d,m,p]=uNt(),h=f.useCallback(()=>{i||(l(!0),c.current=setInterval(()=>{a(v=>v===e.length-1?0:v+1)},1e3))},[i,e.length]),g=f.useCallback(()=>{l(!1),c.current&&(clearInterval(c.current),c.current=null),a(0)},[]),y=f.useCallback(()=>{p(),h()},[p,h]);return f.useEffect(()=>{d&&g()},[d,g]),f.useEffect(()=>()=>{c.current&&(clearInterval(c.current),c.current=null)},[]),o.jsxs("div",{className:"relative w-full",children:[o.jsx("div",{ref:m,className:B("p-xs grid grid-cols-1 grid-rows-1 rounded bg-white",t),onMouseEnter:y,children:i?e.map((v,x)=>o.jsx(q9,{src:v,className:B("rounded-inherit col-start-1 row-start-1 bg-white !duration-100",{"opacity-0":x!==s,hidden:x!==s&&!i}),imageClassName:B(r,"!scale-100")},x)):o.jsx(q9,{src:e[s]??e[0]??"",className:"rounded-inherit col-start-1 row-start-1 bg-white",imageClassName:B(r,"!scale-100")})}),e.length>1&&o.jsx("div",{className:B("bottom-sm pointer-events-none absolute left-1/2 -translate-x-1/2 duration-150",{"translate-y-0 opacity-50":i,"translate-y-0.5 opacity-0":!i}),children:o.jsx(IEe,{images:e,activeIndex:s,maxDots:u,isAnimating:i})}),n&&o.jsx("div",{className:"gap-sm right-xs top-xs pointer-events-none absolute flex items-center",children:n&&o.jsx(D,{variant:"smallCaps",className:"bg-inverse/70 !text-inverse dark:bg-subtler dark:!text-foreground flex h-5 items-center whitespace-nowrap rounded-full px-1.5 !text-[10px] backdrop-blur-sm",children:n})})]})});E$.displayName="EntityItemImageFadeCarousel";const IEe=f.memo(({images:e,activeIndex:t,maxDots:n,isAnimating:r})=>o.jsx(ge.div,{layout:!0,layoutRoot:!0,className:"gap-xs flex items-center justify-center",children:o.jsx(Ke,{mode:"popLayout",children:e.map((s,a)=>{let i=0,l=0;return t<n?(i=Math.max(t-Math.floor(n/2),0),l=i+n):(l=Math.min(t+Math.floor(n/2),e.length-1),i=l-n),a>l||a<i?null:o.jsx(ge.div,{initial:{opacity:0,x:4},animate:{opacity:1,x:0,scale:a===t?1:.6},exit:{opacity:0,x:-4},transition:{duration:.15},layout:"position",children:o.jsx("div",{className:B("bg-dark h-1.5 rounded-full border border-white p-px duration-200",{"w-4":a===t,"w-1.5":a!==t}),children:o.jsx(ge.div,{className:"h-full rounded-full bg-white/50",initial:{width:"0",opacity:0},animate:{width:a===t&&r?"100%":"0",opacity:r?1:0},transition:{width:{duration:1},opacity:{duration:.15}}},s+"progress")})},a)})})}));IEe.displayName="AnimateDots";const dNt=25,M$=I.memo(({rating:e,className:t,reviewCount:n,size:r="xs",textVariant:s="small",reviewTextVariant:a="small",reviewTextColor:i="light",variant:l,showCount:c=!0,minReviewCount:u=dNt,showRatingLabel:d=!0,url:m,color:p="default"})=>{const h=Math.floor(e),g=e%1===0?0:1,y=5-h-g;if(e===0||!n||n<u)return null;const v=o.jsxs("div",{className:B("gap-xs flex items-center",t),children:[o.jsxs("div",{className:"flex items-center",children:[l==="truncated"?o.jsx(ce,{icon:od,size:r,className:"text-super -translate-y-px"}):Array.from({length:h}).map((x,b)=>o.jsx(ce,{icon:od,size:r,className:"text-super"},`rating-star-full-${b}`)),l!=="truncated"&&Array.from({length:g}).map((x,b)=>o.jsx(REe,{fraction:e%1,size:r},`rating-star-half-${b}`)),l!=="truncated"&&Array.from({length:y}).map((x,b)=>o.jsx("span",{className:"inline-flex opacity-20",children:o.jsx(ce,{icon:od,size:r,className:"text-super"},b)},`rating-star-empty-${b}`))]}),d&&o.jsx(D,{variant:s,className:"group-hover/link:text-super relative font-medium leading-none",color:p,children:o.jsx(XI,{value:e,maximumFractionDigits:1})}),n&&n>0&&c&&o.jsxs(D,{variant:a,color:i,className:"group-hover/link:text-super relative leading-none",children:["(",o.jsx(XI,{value:n}),")"]})]});return m?o.jsx(Ge,{href:m,target:"_blank",className:"group/link",children:v}):v});M$.displayName="EntityItemRating";const REe=I.memo(({fraction:e,size:t})=>o.jsxs("div",{className:"isolate inline-grid grid-cols-1 grid-rows-1",children:[o.jsx("span",{className:"text-foreground relative col-start-1 row-start-1 inline-flex items-center opacity-30",children:o.jsx("span",{className:"inline-flex",children:o.jsx(ce,{icon:od,size:t})})}),o.jsx("span",{className:"relative col-start-1 row-start-1 inline-flex items-center",children:o.jsx("span",{className:"text-super inline-flex overflow-hidden",style:{width:e*100+"%"},children:o.jsx(ce,{icon:od,size:t,className:"shrink-0"})})})]}));REe.displayName="HalfStar";const PEe=I.memo(()=>o.jsx("svg",{className:"h-auto w-full",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 4635.92 708.22",children:o.jsx("path",{d:"M4806.79,746.44a25,25,0,1,0,25,25A25,25,0,0,0,4806.79,746.44Zm0,46.08a21.08,21.08,0,1,1,21.08-21.07A21.09,21.09,0,0,1,4806.79,792.52Zm8.12-25.33c0-4.55-3.25-7.25-8-7.25h-8v22.77h3.94v-8.26h4.26l4.13,8.26h4.23L4811,773.6A6.59,6.59,0,0,0,4814.91,767.19Zm-8.16,3.78h-3.87v-7.55h3.87c2.63,0,4.23,1.33,4.23,3.77S4809.38,771,4806.75,771ZM569.17,605.31a97.95,97.95,0,1,1-97.94-97.94A97.94,97.94,0,0,1,569.17,605.31Zm552.18,0a97.95,97.95,0,1,1-97.95-97.94A97.95,97.95,0,0,1,1121.35,605.31ZM1099,304.09C998.87,235.77,878,195.89,747.32,195.89a619.47,619.47,0,0,0-351,108.2H195.89l90.17,98.12a274.9,274.9,0,0,0-89.89,203.66c0,152.19,123.38,275.57,275.57,275.57A274.54,274.54,0,0,0,659,808l88.34,96.12L835.66,808a274.54,274.54,0,0,0,187.23,73.4c152.19,0,275.68-123.38,275.68-275.57a274.9,274.9,0,0,0-89.89-203.66l90.17-98.12ZM471.74,792.36c-103,0-186.49-83.49-186.49-186.49s83.5-186.49,186.49-186.49,186.5,83.49,186.5,186.49S574.74,792.36,471.74,792.36ZM747.37,600.5c0-122.73-89.26-228-207-273.06a538.15,538.15,0,0,1,413.93,0C836.62,372.49,747.37,477.78,747.37,600.5Zm462,5.37c0,103-83.5,186.49-186.49,186.49s-186.5-83.49-186.5-186.49,83.5-186.49,186.5-186.49S1209.38,502.87,1209.38,605.87Zm654.11-173.45h43.37v85.84h-50.75c-39.09,0-64.17,19.18-64.17,58.28V792.36h-92.78V432.42h92.78V492.9C1800.05,450.12,1829.56,432.42,1863.49,432.42Zm186.35-85.59a56.06,56.06,0,0,1-112.12,0c0-31.72,24.34-56.8,56.06-56.8S2049.84,315.11,2049.84,346.83Zm-102.33,85.59H2040V792.36h-92.53Zm347.35-6.08a179,179,0,0,0-109.22,36.52V432.42h-92.52V898h92.52V761.92a179,179,0,0,0,109.22,36.52c102.76,0,186-83.3,186-186.05S2397.62,426.34,2294.86,426.34Zm-8.15,287.12a101.07,101.07,0,1,1,101.07-101.07A101.07,101.07,0,0,1,2286.71,713.46Zm1890.57-34.8c0,69.4-59.54,119.78-141.57,119.78-85.12,0-144.57-51.57-144.57-125.42v-2h90.54v2c0,30.82,22,51.53,54.78,51.53,31.42,0,52.53-15.33,52.53-38.14,0-21.61-14.61-33.69-53.89-44.56l-51.71-14.1c-54.34-14.71-85.5-50.12-85.5-97.14,0-60.42,57-104.27,135.57-104.27,79.3,0,132.58,43.88,132.58,109.21v2.05h-85.3v-2.05c0-22.18-20.77-39.55-47.28-39.55-27.84,0-47.28,12.78-47.28,31.09,0,18.76,13.84,29.66,49.36,38.91l54,14.81C4162.05,600.16,4177.28,644.7,4177.28,678.66Zm-1368-215.8A179,179,0,0,0,2700,426.34c-102.76,0-186.05,83.3-186.05,186.05S2597.26,798.44,2700,798.44a179,179,0,0,0,109.22-36.52v30.44h92.52V432.42h-92.52Zm0,149.54a101.07,101.07,0,1,1-101.07-101.08A101.08,101.08,0,0,1,2809.24,612.4ZM3236,462.86a179,179,0,0,0-109.22-36.52c-102.75,0-186.05,83.3-186.05,186.05s83.3,186.05,186.05,186.05A179,179,0,0,0,3236,761.92v30.44h92.53V304.3H3236Zm-101.06,250.6A101.07,101.07,0,1,1,3236,612.39,101.07,101.07,0,0,1,3134.89,713.46Zm623.34-281h92.53V792.36h-92.53Zm102.33-85.59a56.06,56.06,0,1,1-112.12,0c0-31.72,24.34-56.8,56.06-56.8S3860.56,315.11,3860.56,346.83Zm530.71,79.51c-102.75,0-186.05,83.3-186.05,186.05s83.3,186.05,186.05,186.05,186-83.3,186-186.05S4494,426.34,4391.27,426.34Zm0,287.12a101.07,101.07,0,1,1,101.07-101.07A101.06,101.06,0,0,1,4391.27,713.46ZM1744.55,386.87H1613.14V792.36h-92.22V386.87H1389.51V304.3h355Zm1877.76,45.55h97.21L3595.31,792.36H3484L3360.47,432.42h97.2L3540,693.79Zm1162.19,0h43.37v85.84h-50.75c-39.09,0-64.18,19.18-64.18,58.28V792.36h-92.77V432.42h92.77V492.9C4721.06,450.12,4750.57,432.42,4784.5,432.42Z",transform:"translate(-195.89 -195.89)",fill:"currentColor"})}));PEe.displayName="TripadvisorLogo";const OEe=I.memo(()=>o.jsxs("svg",{className:"h-auto w-full",viewBox:"0 0 1000 385",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M806.495 227.151L822.764 223.392C823.106 223.313 823.671 223.183 824.361 222.96C828.85 221.753 832.697 218.849 835.091 214.862C837.485 210.874 838.241 206.113 837.198 201.582C837.175 201.482 837.153 201.388 837.13 201.289C836.596 199.117 835.66 197.065 834.37 195.239C832.547 192.926 830.291 190.991 827.728 189.542C824.711 187.82 821.553 186.358 818.289 185.171L800.452 178.659C790.441 174.937 780.432 171.309 770.328 167.771C763.776 165.439 758.224 163.393 753.4 161.901C752.49 161.62 751.485 161.34 750.669 161.058C744.837 159.271 740.739 158.53 737.272 158.505C734.956 158.42 732.649 158.841 730.511 159.738C728.283 160.699 726.282 162.119 724.639 163.906C723.822 164.835 723.054 165.806 722.337 166.815C721.665 167.843 721.049 168.907 720.491 170.001C719.876 171.174 719.348 172.391 718.911 173.642C715.6 183.428 713.951 193.7 714.032 204.029C714.091 213.368 714.342 225.354 719.475 233.479C720.712 235.564 722.372 237.366 724.348 238.769C728.004 241.294 731.7 241.627 735.544 241.904C741.289 242.316 746.855 240.905 752.403 239.623L806.45 227.135L806.495 227.151Z",fill:"currentColor"}),o.jsx("path",{d:"M987.995 140.779C983.553 131.457 977.581 122.947 970.328 115.601C969.39 114.669 968.385 113.806 967.321 113.02C966.339 112.283 965.318 111.598 964.264 110.967C963.18 110.373 962.065 109.837 960.924 109.362C958.668 108.476 956.25 108.077 953.829 108.19C951.513 108.322 949.254 108.956 947.207 110.049C944.105 111.591 940.748 114.07 936.283 118.221C935.666 118.834 934.891 119.525 934.195 120.177C930.511 123.641 926.413 127.911 921.536 132.883C914.002 140.497 906.583 148.152 899.21 155.89L886.017 169.571C883.601 172.071 881.401 174.771 879.441 177.643C877.771 180.07 876.59 182.799 875.963 185.678C875.6 187.886 875.653 190.142 876.12 192.329C876.143 192.429 876.164 192.523 876.187 192.622C877.229 197.154 879.988 201.103 883.883 203.637C887.778 206.172 892.505 207.094 897.068 206.211C897.791 206.106 898.352 205.982 898.693 205.898L969.033 189.646C974.576 188.365 980.202 187.191 985.182 184.3C988.522 182.363 991.699 180.443 993.878 176.569C995.043 174.441 995.748 172.092 995.948 169.675C997.027 160.089 992.021 149.202 987.995 140.779Z",fill:"currentColor"}),o.jsx("path",{d:"M862.1 170.358C867.197 163.955 867.184 154.41 867.64 146.607C869.174 120.536 870.79 94.4619 872.07 68.3766C872.56 58.4962 873.624 48.7498 873.036 38.7944C872.552 30.5816 872.492 21.1521 867.307 14.4122C858.154 2.52688 838.636 3.50371 825.319 5.34732C821.239 5.91358 817.153 6.6749 813.099 7.64807C809.045 8.62124 805.033 9.6841 801.108 10.9412C788.329 15.127 770.365 22.8103 767.323 37.5341C765.608 45.858 769.672 54.3727 772.824 61.9691C776.645 71.1774 781.865 79.4721 786.622 88.1401C799.198 111.024 812.008 133.765 824.782 156.53C828.597 163.326 832.755 171.933 840.135 175.454C840.623 175.667 841.121 175.856 841.628 176.018C844.937 177.272 848.545 177.513 851.993 176.712C852.201 176.664 852.405 176.617 852.608 176.57C855.792 175.704 858.675 173.973 860.937 171.568C861.345 171.185 861.734 170.782 862.1 170.358Z",fill:"currentColor"}),o.jsx("path",{d:"M855.997 240.155C854.008 237.355 851.184 235.258 847.931 234.162C844.677 233.065 841.16 233.027 837.881 234.051C837.111 234.307 836.361 234.618 835.636 234.983C834.515 235.554 833.445 236.221 832.439 236.976C829.507 239.148 827.039 241.97 824.791 244.8C824.221 245.522 823.7 246.483 823.022 247.1L811.708 262.663C805.295 271.382 798.971 280.123 792.7 289.003C788.608 294.735 785.068 299.576 782.273 303.859C781.743 304.666 781.193 305.567 780.689 306.284C777.338 311.469 775.441 315.252 774.467 318.622C773.735 320.862 773.503 323.234 773.788 325.572C774.1 328.008 774.92 330.35 776.195 332.447C776.873 333.499 777.604 334.516 778.385 335.495C779.196 336.436 780.058 337.332 780.966 338.18C781.936 339.105 782.973 339.957 784.07 340.729C791.879 346.162 800.428 350.066 809.421 353.083C816.904 355.567 824.682 357.053 832.555 357.504C833.894 357.572 835.237 357.543 836.572 357.417C837.809 357.309 839.04 357.136 840.26 356.9C841.479 356.615 842.681 356.266 843.863 355.853C846.162 354.993 848.255 353.66 850.008 351.94C851.667 350.279 852.944 348.276 853.749 346.07C855.057 342.81 855.917 338.671 856.483 332.526C856.532 331.652 856.657 330.604 856.744 329.644C857.19 324.545 857.395 318.556 857.723 311.514C858.276 300.685 858.71 289.903 859.053 279.09C859.053 279.09 859.782 259.875 859.78 259.865C859.946 255.437 859.81 250.53 858.582 246.121C858.042 244.008 857.17 241.994 855.997 240.155V240.155Z",fill:"currentColor"}),o.jsx("path",{d:"M983.707 270.24C981.346 267.651 978 265.069 972.722 261.878C971.961 261.453 971.068 260.886 970.244 260.392C965.85 257.749 960.557 254.969 954.374 251.611C944.876 246.396 935.372 241.312 925.778 236.271L908.825 227.28C907.946 227.024 907.053 226.389 906.225 225.989C902.968 224.432 899.516 222.978 895.932 222.311C894.697 222.074 893.444 221.944 892.186 221.923C891.375 221.913 890.565 221.962 889.761 222.07C886.371 222.595 883.234 224.178 880.795 226.591C878.356 229.005 876.74 232.128 876.178 235.513C875.919 237.667 875.998 239.847 876.411 241.976C877.24 246.487 879.254 250.95 881.338 254.858L890.391 271.824C895.428 281.394 900.526 290.907 905.752 300.391C909.123 306.578 911.929 311.871 914.557 316.26C915.055 317.085 915.62 317.974 916.046 318.738C919.245 324.013 921.815 327.333 924.421 329.715C926.109 331.345 928.132 332.586 930.349 333.351C932.68 334.124 935.146 334.398 937.59 334.155C938.832 334.008 940.066 333.795 941.286 333.516C942.488 333.193 943.672 332.808 944.833 332.362C946.087 331.889 947.305 331.327 948.478 330.678C955.36 326.82 961.703 322.07 967.345 316.552C974.112 309.894 980.093 302.633 984.745 294.321C985.392 293.145 985.952 291.924 986.422 290.667C986.86 289.504 987.24 288.319 987.558 287.118C987.834 285.896 988.045 284.662 988.191 283.418C988.422 280.977 988.138 278.514 987.358 276.19C986.591 273.963 985.345 271.932 983.707 270.24V270.24Z",fill:"currentColor"}),o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M400.03 105.19C400.03 91.2089 411.42 79.7877 425.167 79.7877C438.717 79.7877 449.714 91.2089 450.303 105.387V303.682C450.303 317.663 438.913 329.084 425.167 329.084C411.027 329.084 400.03 317.663 400.03 303.682V105.19ZM376.657 227.672C376.461 231.61 375.479 238.896 370.373 244.213C364.874 249.923 357.412 251.302 353.092 251.302C335.123 251.4 317.155 251.45 299.187 251.499C281.218 251.548 263.248 251.597 245.279 251.696C246.85 256.619 249.992 264.101 257.062 270.994C261.382 275.129 265.506 277.492 267.273 278.476C269.434 279.855 276.896 283.793 286.126 283.793C295.945 283.793 304.586 280.642 313.03 276.31L313.736 275.945C319.604 272.904 325.66 269.766 332.079 268.631C338.363 267.646 345.04 268.827 349.949 273.16C355.841 278.279 358.197 285.762 356.037 293.442C353.484 302.106 346.218 309.589 338.559 314.118C334.239 316.678 329.526 318.844 324.813 320.617C318.725 322.783 312.441 324.358 306.157 325.343C299.872 326.327 293.392 326.721 286.911 326.524H286.911C283.769 326.524 280.431 326.524 277.092 326.13C273.558 325.736 270.023 324.949 266.684 324.161C261.186 322.98 256.08 321.207 250.974 318.844C246.064 316.678 241.155 313.921 236.638 310.771C232.121 307.62 227.997 303.879 224.07 299.94C220.338 296.002 216.804 291.67 213.662 286.944C203.057 270.797 198.147 250.908 199.129 231.61C199.915 212.706 206.199 193.802 217.589 178.443C218.823 176.519 220.247 174.883 221.596 173.333C222.18 172.663 222.75 172.008 223.284 171.354C237.35 154.158 256.142 148.716 263.894 146.471L264.328 146.345C286.519 140.044 304.978 144.179 312.441 146.345C316.172 147.33 337.185 153.828 353.484 171.354C354.27 172.141 356.43 174.701 359.179 178.443C369.505 192.508 373.066 205.605 374.272 210.042L374.301 210.146C375.479 214.478 376.657 220.386 376.657 227.672ZM261.382 195.181C249.992 204.436 246.85 216.251 246.064 219.992H331.686C330.901 216.448 327.562 204.436 316.172 195.181C304.586 185.925 292.41 185.335 288.679 185.335C284.948 185.335 272.772 185.925 261.382 195.181ZM586.98 142.998C564.593 142.998 544.169 153.041 529.637 169.385V168.794C529.048 155.6 518.05 144.967 504.696 144.967C490.753 144.967 479.56 156.191 479.56 170.172V359.409C479.56 373.391 490.753 384.615 504.696 384.615C518.64 384.615 529.833 373.391 529.833 359.409V352.123V300.334C544.365 316.482 564.593 326.721 587.176 326.721C632.147 326.721 668.674 285.959 668.674 235.155C668.478 184.35 631.951 142.998 586.98 142.998ZM575.983 285.566C550.453 285.566 529.637 263.314 529.637 235.549C529.637 207.586 550.257 185.335 575.983 185.335C601.512 185.335 622.328 207.586 622.328 235.549C622.132 263.314 601.512 285.566 575.983 285.566ZM161.425 248.348L153.177 266.464C149.446 274.341 145.715 282.415 142.18 290.488C141.052 292.966 139.916 295.494 138.764 298.057C123.068 332.981 104.44 374.43 63.8242 383.236C44.1861 387.568 14.5327 381.661 3.5354 363.15C-7.4619 344.443 8.83767 322.979 29.8504 327.902C33.1646 328.641 36.4235 330.266 39.7101 331.904C45.187 334.635 50.7406 337.404 56.7545 336.173C62.4495 335.188 65.9844 331.053 70.5011 325.736C76.7853 318.45 79.5346 310.771 80.7129 306.242C80.6147 306.045 80.5165 305.798 80.4183 305.552C80.3201 305.306 80.2219 305.06 80.1237 304.863C75.0117 295.326 70.5473 286.8 66.8178 279.677C64.3868 275.034 62.2681 270.987 60.4857 267.646C56.8287 260.714 54.0662 255.473 51.918 251.398C45.6449 239.497 44.609 237.532 41.8296 232.398C35.7418 220.78 29.2612 209.555 22.5843 198.331C15.3182 186.122 7.85577 172.535 13.9436 158.16C18.8531 146.542 31.4214 140.634 43.4006 144.376C56.0403 148.212 61.6377 160.239 66.8724 171.487C67.8188 173.52 68.7534 175.528 69.7156 177.458C78.16 194.196 86.4079 210.934 94.6559 227.672C95.382 229.336 96.4917 231.605 97.8402 234.362C99.0447 236.824 100.44 239.676 101.922 242.834C102.697 244.475 103.434 246.002 104.101 247.382C104.954 249.149 105.691 250.676 106.242 251.892C110.072 242.342 113.95 232.841 117.829 223.34C121.707 213.839 125.586 204.337 129.415 194.787C129.522 194.253 130.436 192.216 131.813 189.145C132.977 186.549 134.473 183.215 136.092 179.427C136.64 178.133 137.191 176.79 137.755 175.417C142.856 162.995 148.988 148.06 162.604 143.982C172.423 141.028 183.42 144.967 189.115 153.237C192.061 157.372 193.239 162.098 193.435 166.824C193.593 177.275 188.545 188.491 184.212 198.115C183.157 200.459 182.144 202.708 181.26 204.829C181.219 204.91 181.048 205.296 180.739 205.988C179.541 208.679 176.278 216.005 170.655 228.066C168.626 232.389 166.679 236.713 164.707 241.09C163.626 243.491 162.538 245.907 161.425 248.348Z",fill:"currentColor"}),o.jsx("path",{d:"M687.728 310.153H689.549C690.447 310.153 691.167 309.923 691.706 309.462C692.256 308.99 692.532 308.395 692.532 307.676C692.532 306.833 692.29 306.232 691.807 305.872C691.324 305.502 690.56 305.316 689.515 305.316H687.728V310.153ZM695.043 307.608C695.043 308.507 694.801 309.305 694.318 310.002C693.846 310.687 693.178 311.198 692.313 311.535L696.324 318.193H693.492L690.004 312.226H687.728V318.193H685.234V303.176H689.633C691.498 303.176 692.863 303.541 693.728 304.271C694.605 305.002 695.043 306.114 695.043 307.608ZM677.228 310.676C677.228 308.429 677.79 306.322 678.914 304.356C680.037 302.389 681.582 300.839 683.549 299.704C685.515 298.569 687.633 298.002 689.902 298.002C692.15 298.002 694.256 298.564 696.223 299.687C698.189 300.811 699.74 302.356 700.874 304.322C702.009 306.288 702.577 308.406 702.577 310.676C702.577 312.889 702.032 314.968 700.942 316.912C699.852 318.856 698.324 320.412 696.358 321.58C694.391 322.749 692.24 323.333 689.902 323.333C687.577 323.333 685.431 322.754 683.464 321.597C681.498 320.429 679.964 318.872 678.863 316.929C677.773 314.985 677.228 312.901 677.228 310.676ZM678.998 310.676C678.998 312.62 679.487 314.44 680.464 316.136C681.442 317.822 682.773 319.153 684.459 320.131C686.155 321.097 687.97 321.58 689.902 321.58C691.858 321.58 693.672 321.092 695.346 320.114C697.02 319.136 698.346 317.816 699.324 316.153C700.313 314.479 700.807 312.653 700.807 310.676C700.807 308.721 700.318 306.906 699.341 305.232C698.363 303.558 697.037 302.232 695.363 301.255C693.7 300.266 691.88 299.771 689.902 299.771C687.947 299.771 686.133 300.26 684.459 301.238C682.785 302.215 681.453 303.541 680.464 305.215C679.487 306.878 678.998 308.698 678.998 310.676Z",fill:"currentColor"})]}));OEe.displayName="YelpLogo";const fNt=({className:e})=>o.jsx(D,{className:B("w-10",e),children:o.jsx(OEe,{})}),mNt=({className:e})=>o.jsx(D,{className:B("w-[70px]",e),children:o.jsx(PEe,{})}),pNt=e=>{const t=f.useMemo(()=>Br(e).with(qc.string.includes("yelp.com"),()=>fNt).with(qc.string.includes("tripadvisor.com"),()=>mNt).otherwise(()=>null),[e]);return f.useMemo(()=>({SearchClientLogo:t}),[t])},hNt=({entity_id:e,entity_name:t,data_source:n,entry_uuid:r,url:s,reason:a})=>{const i=ht(),l=["place_result_reviews",`${n}_${s}`],{refetch:c,data:u,isFetching:d,error:m}=We({queryKey:l,enabled:!1,queryFn:async()=>{let p={summary:"",review_quality_score:0,pros:[],cons:[],key_features:[],review_search_results:[]},h="PENDING",g="";try{await se.SSE("/rest/sse/places_review_summary_bulk",a,{params:{places:[{entity_id:e,entity_name:t,data_source:n,entry_uuid:r,url:s}]},handlers:{message:y=>{y.blocks?.[0]?.review_summary_block&&(p={...p,...y.blocks[0].review_summary_block}),h=y.status??"FAILED",g=y.id??"",i.setQueryData(l,{review_summary:p,status:h,id:g})}}})}catch{}return{review_summary:p,status:h,id:g}}});return f.useMemo(()=>({generateReviewSummaryForPlace:c,reviewSummary:u?.review_summary,isFetching:d,error:m}),[u?.review_summary,m,c,d])};function LEe(){const{locale:e}=Z(),t=new Intl.Locale(e),{value:n,loading:r}=Rr({flag:"canonical-hotel-pages-enabled",defaultValue:!1,extraAttributes:{cfLanguage:t.language,appApiVersion:ac}});return f.useMemo(()=>({initialized:!r,value:n}),[n,r])}const DEe=I.memo(({operatingHours:e})=>{const{locale:t}=Z();return e?o.jsx("div",{className:"gap-xs flex flex-col",children:e.map(({day:n,hours:r,is_today:s})=>o.jsxs("div",{className:"gap-md flex items-center justify-between",children:[o.jsx(D,{variant:"tiny",color:"white",className:s?void 0:"opacity-50",children:tU(n,t)}),o.jsx(D,{variant:"tiny",color:"white",className:s?void 0:"opacity-50",children:r.join(", ")})]},`place-hours-${n}`))}):null});DEe.displayName="PlaceOperatingHours";var Fc;(function(e){e.DEFAULT="default",e.DALLE3="dall-e-3",e.PLAYGROUND="playground",e.FLUX="flux",e.GPT4O_IMAGE="gpt-4o",e.GEMINI_FLASH="gemini-flash"})(Fc||(Fc={}));const FEe=e=>{switch(e){case Fc.DALLE3:return"DALL-E 3";case Fc.PLAYGROUND:return"Playground";case Fc.FLUX:return"FLUX";case Fc.GPT4O_IMAGE:return"GPT-4o Image";case Fc.GEMINI_FLASH:return"Gemini Flash";default:return"AI"}},k$=e=>{if(e==="dalle"||Object.values(Fc).includes(e))return!0;const t=e.toLowerCase();return Object.values(Fc).some(n=>t.includes(n.toLowerCase()))},UEe=I.memo(({mediaItem:e})=>{const{name:t,url:n,image:r,source:s,author_name:a,author_url:i}=e,l=k$(s??""),c=n?.includes("unsplash.com"),u=a&&i;let d=t;c&&(d="Unsplash");const m=f.useCallback(p=>{p.stopPropagation()},[]);return o.jsx(Ge,{className:"cursor-pointer",target:"_blank",rel:"noopener nofollow",href:n??r??"",children:u?o.jsxs(H,{className:"flex max-w-[300px] items-stretch overflow-hidden",children:[o.jsxs("div",{className:"gap-sm hover:bg-subtler flex shrink-0 items-center rounded-md p-[7px] duration-300",children:[n&&o.jsx(zi,{domain:n}),o.jsx(D,{color:"white",variant:"tiny",className:"truncate",children:d})]}),o.jsx(Ge,{href:i,target:"_blank",className:"gap-sm p-sm hover:bg-subtler group flex items-center overflow-hidden rounded-md pr-[10px] duration-300",onClick:m,children:o.jsx(D,{color:"white",variant:"tiny",className:"truncate opacity-50 duration-300 group-hover:opacity-75",children:a})})]}):o.jsx(H,{className:"hover:bg-subtle max-w-[250px] rounded-md p-[7px] px-[10px] duration-300",variant:l?"subtler":"transparent",children:n&&o.jsx(Oo,{color:"white",url:n,source:d,truncate:!1,isAttachment:!1,variant:"tiny"})})})});UEe.displayName="ImageGalleryCitation";const T$=I.memo(({image:e,name:t,url:n,fallbackSrc:r,onClick:s,AIProps:a,softBlockSaveImage:i,imageClassName:l,includeLightBoxModal:c,lightboxSrc:u,rounded:d="sm",onFail:m,onLoad:p,className:h,style:g,containerClassName:y,maskClassName:v,ref:x})=>{const b=f.useMemo(()=>({url:n,name:t}),[t,n]),_=f.useMemo(()=>({draggable:!1}),[]);return o.jsx("div",{onClick:s,className:h,style:g,children:o.jsx(fs,{AIProps:a,origin:b,fadeIn:!1,hasShadow:!1,includeLightBoxModal:c,lightboxSrc:u,imageClassName:B("max-h-[70vh] object-cover w-full",l),imageRef:x,alt:t,src:e,fallback:null,fallbackSrc:r,softBlockSaveImage:i,rounded:d,onFail:m,onLoad:p,containerClassName:y,maskClassName:v,imageProps:_,draggable:!1},n)})});T$.displayName="RenderImage";const BEe=I.memo(({mediaItem:e,softBlockSaveImage:t})=>{const{image:n,name:r,url:s,thumbnail:a,source:i}=e,l=n??a;return l?o.jsx("div",{className:"py-md px-lg flex size-full select-none items-center justify-center","data-color-scheme":"dark",children:o.jsx(T$,{image:l,name:r,fallbackSrc:a,url:s,AIProps:i?{isAI:k$(i),AILabel:FEe(i)}:void 0,includeLightBoxModal:!1,softBlockSaveImage:t,maskClassName:"bg-subtler"})}):(ne.warn(new Error("Invalid media item in image gallery"),{extra:{mediaItem:e}}),null)});BEe.displayName="ImageGalleryMain";const VEe=I.memo(({mediaItem:e,isHighlighed:t,onClick:n,imageRef:r})=>{const{image:s,name:a,url:i,thumbnail:l,source:c}=e,u=l??s,[d,m]=f.useState(!1),[p,h]=f.useState(!1),g=f.useCallback(()=>m(!0),[]),y=f.useCallback(()=>h(!0),[]);return!u||d?(ne.warn(new Error("Invalid media item in image gallery sidebar"),{extra:{mediaItem:e}}),null):o.jsx(T$,{className:B("cursor-pointer select-none rounded-lg border-transparent transition-all duration-200 ease-in-out",{"ring-super ring-2 ring-offset-2 ring-offset-black":t,"hover:opacity-70":!t,"animate-in fade-in duration-300 ease-in":p,hidden:!p}),AIProps:c?{isAI:k$(c),AILabel:FEe(c)}:void 0,image:u,name:a,fallbackSrc:void 0,url:i,includeLightBoxModal:!1,onClick:n,maskClassName:"bg-subtler !rounded-lg",imageClassName:"select-none",onFail:g,onLoad:y,ref:r})});VEe.displayName="GalleryImage";class gNt extends I.Component{static defaultProps={columnsCount:3,gutter:"0"};getColumns(){const{children:t,columnsCount:n=3}=this.props,r=Array.from({length:n},()=>[]);let s=0;return I.Children.forEach(t,a=>{a&&I.isValidElement(a)&&(r[s%n].push(a),s++)}),r}renderColumns(){const{gutter:t="0"}=this.props;return this.getColumns().map((n,r)=>o.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch",flex:1,width:0,gap:t},children:n.map(s=>s)},r))}render(){const{columnsCount:t,gutter:n="0",style:r,...s}=this.props;return o.jsx("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"stretch",boxSizing:"border-box",width:"100%",gap:n,...r},...s,children:this.renderColumns()})}}const $Ee=I.memo(({mainIndex:e,images:t,onClick:n,mainIndexRef:r})=>o.jsx(gNt,{className:"p-sm select-none pr-1",columnsCount:2,gutter:"8px",children:t.map((s,a)=>o.jsx(WEe,{mediaItem:s,index:a,mainIndex:e,onClick:n,mainIndexRef:r},"galleryImage "+a))}));$Ee.displayName="ImageGallerySidebar";const WEe=I.memo(({mediaItem:e,index:t,mainIndex:n,onClick:r,mainIndexRef:s})=>{const a=f.useCallback(()=>r(t),[t,r]);return o.jsx(VEe,{mediaItem:e,isHighlighed:t===n,onClick:a,imageRef:t===n?s:void 0})});WEe.displayName="GalleryImageFactory";const Cl=I.memo(({children:e,isOpen:t,onClose:n,...r})=>o.jsx(cy,{isOpen:t,onClose:n,center:!1,variant:"lightbox",...r,children:o.jsx("div",{className:"flex h-screen flex-col",children:e})}));Cl.displayName="Gallery";const HEe=I.memo(({className:e="",headerText:t,children:n,onClose:r,...s})=>o.jsxs("div",{className:B("mx-md gap-md border-subtler h-headerHeight flex items-center justify-between border-b",e),"data-color-scheme":"dark",...s,children:[o.jsxs("div",{className:"gap-x-md flex items-center",children:[o.jsx(Na,{variant:"mark",color:"white",size:"tiny"}),t&&o.jsx(D,{color:"white",variant:"section-title",className:"line-clamp-1",children:t})]}),o.jsxs("div",{className:"gap-sm flex items-center",children:[n,o.jsx(he,{pill:!0,icon:Rt,onClick:r,size:"small",extraCSS:"!bg-subtle"})]})]}));HEe.displayName="GalleryHeader";const zEe=I.memo(({className:e,style:t,...n})=>o.jsx("div",{className:B("col-span-6 h-[50dvh] min-h-0 w-full flex-1 shrink-0 md:size-auto lg:col-span-7",e),style:{colorScheme:"dark",...t},...n})),GEe=I.memo(({children:e,className:t,style:n,...r})=>o.jsx("div",{className:B("col-span-4 flex h-[50dvh] min-h-0 flex-col md:h-auto lg:col-span-3",t),"data-color-scheme":"dark",style:n,...r,children:o.jsx("div",{className:"scrollbar-subtle min-h-0 flex-1 overflow-y-auto",children:e})}));GEe.displayName="GallerySidebar";zEe.displayName="GalleryMain";const qEe=I.memo(({className:e,...t})=>o.jsx("div",{className:B("gap-lg flex min-h-0 flex-1 grow flex-col md:grid md:grid-cols-10 md:gap-0",e),...t}));qEe.displayName="GalleryContent";Cl.Header=HEe;Cl.Main=zEe;Cl.Sidebar=GEe;Cl.Content=qEe;const N$=I.memo(({mainImageIndex:e,title:t,isOpen:n,onClose:r=kn,onSelect:s,images:a,softBlockSaveImage:i})=>{const[l,c]=f.useState(e),u=f.useRef(null),d=f.useCallback(({initial:x})=>{u.current?.scrollIntoView({inline:"nearest",block:x?"center":"nearest",behavior:x?"auto":"smooth"})},[u]);f.useEffect(()=>{c(e)},[e,n]),f.useEffect(()=>{d({initial:!1})},[d,l]);const m=f.useCallback(()=>{c(x=>(x+1)%a.length)},[a.length]),p=f.useCallback(()=>{c(x=>(x-1+a.length)%a.length)},[a.length]),h=f.useCallback(()=>{c(x=>{const b=x-2;return b>=0?b:x})},[]),g=f.useCallback(()=>{c(x=>{const b=x+2;return b<a.length?b:x})},[a.length]);f.useEffect(()=>{const x=b=>{n&&(b.key==="ArrowRight"?m():b.key==="ArrowLeft"?p():b.key==="ArrowUp"?(b.preventDefault(),h()):b.key==="ArrowDown"&&(b.preventDefault(),g()))};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[n,m,p,h,g]);const y=f.useCallback(x=>{a[x]&&(c(x),s?.(a[x]))},[a,s]);f.useEffect(()=>{n&&setTimeout(()=>{d({initial:!0})},0)},[n,d]);const v=a[l];return o.jsxs(Cl,{isOpen:n,onClose:r,children:[o.jsx(Cl.Header,{headerText:t,onClose:r,children:v&&o.jsx(UEe,{mediaItem:v})}),o.jsxs(Cl.Content,{children:[o.jsx(Cl.Main,{children:v&&o.jsx(BEe,{mediaItem:v,softBlockSaveImage:i})}),o.jsx(Cl.Sidebar,{children:o.jsx($Ee,{images:a,mainIndex:l,onClick:y,mainIndexRef:u})})]})]})});N$.displayName="ImageGallery";const yNt=4,KEe=I.memo(({dollarCount:e,priceRange:t,className:n="",dollarColor:r="default",textVariant:s="tiny",currencySymbol:a,...i})=>{const l=t&&/^(.+?)\s*(\1\s*)+$/.test(t.trim());return l&&(e=t.replace(/\u200A/g,"").length??0),o.jsx("div",{className:`flex items-center ${n}`,...i,children:t&&!l?o.jsx(D,{variant:s,color:r,children:t}):o.jsx("div",{className:"flex gap-px",children:Array.from({length:yNt},(c,u)=>o.jsx(D,{variant:s,className:"inline-flex",color:u<e?r:"ultraLight",children:a||"$"},u))})})});KEe.displayName="DollarRange";const YEe=I.memo(({place:e,menuItems:t,className:n,entryUUID:r,contextUUID:s,onHover:a})=>{const i="place-widget",{$t:l}=Z(),[c,u]=f.useState(!1),{SearchClientLogo:d}=pNt(e.url),m=LEe(),{generateReviewSummaryForPlace:p,reviewSummary:h,isFetching:g}=hNt({entity_id:String(e.id),entity_name:e.name,entry_uuid:r??"",data_source:e.client,url:e.url,reason:i}),{trackEvent:y}=Ne();f.useEffect(()=>{r&&y("place card viewed",{entryUUID:r,contextUUID:s??"",inline:!1,itemID:e.url})},[r,s,e.url,y]),f.useEffect(()=>{e.review_summary||h||p()},[e.review_summary,h]);const v=f.useMemo(()=>e.review_summary??h,[e.review_summary,h]),x=f.useMemo(()=>{const L=[];return e.image_url&&L.push(e.image_url),e.images&&e.images.forEach(P=>{P!==e.image_url&&L.push(P)}),L.length?L.map(P=>({image:P,url:P.includes("tripadvisor.com")?e.url:e.entity_url??e.url})):null},[e.image_url,e.images,e.url,e.entity_url]),b=f.useMemo(()=>Br(e.url).with(qc.string.includes("yelp.com"),()=>l({defaultMessage:"View on {partnerSite}",id:"Z/KOc+Wez3"},{partnerSite:"Yelp"})).with(qc.string.includes("tripadvisor.com"),()=>l({defaultMessage:"View on {partnerSite}",id:"Z/KOc+Wez3"},{partnerSite:"Tripadvisor"})).otherwise(()=>null),[l,e.url]),_=f.useCallback(()=>{const L=e.entity_url??e.url,P=m.initialized&&m.value?e.canonical_page_path??L:L;window.open(P)},[m,e.canonical_page_path,e.entity_url,e.url]),{isMobileStyle:w}=xe(),C=!!v?.summary.length,{hasProsOrCons:S,isLoadingProsCons:E}=f.useMemo(()=>{const L=v?.pros_detailed?.length??0,P=v?.cons_detailed?.length??0;return{hasProsOrCons:L||P||g,isLoadingProsCons:g&&!C&&(L+P<3||!L||!P)}},[v?.pros_detailed,v?.cons_detailed,C,g]),M=f.useCallback(L=>{L.stopPropagation()},[]),k=f.useCallback(()=>{a&&a(void 0)},[a]),A=f.useCallback(()=>{a&&a(e.url)},[a,e.url]),R=f.useCallback(()=>{_()},[_]),O=f.useCallback(()=>{u(!1)},[]);return o.jsxs(o.Fragment,{children:[o.jsx(SEe,{id:String(e.id),entityVariant:"dense-card",menuItems:t,className:"relative !p-0",children:o.jsxs(H,{as:"button","data-widget-id":e.id,className:B("group/root gap-sm p-md md:gap-md group flex h-full cursor-pointer appearance-none flex-col text-left duration-150",n),onMouseEnter:A,onMouseLeave:k,onClick:R,children:[o.jsxs("div",{className:"gap-md flex flex-1",children:[x&&x.length>0&&o.jsx("div",{className:"border-subtlest shadow-subtle size-20 shrink-0 rounded-md border bg-white md:size-28 dark:border-0",children:o.jsx(E$,{images:x.map(L=>L.image),className:"size-full bg-white",imageClassName:"object-cover"})}),o.jsxs("div",{className:"gap-sm flex flex-1 flex-col",children:[o.jsx(D,{variant:w?"baseSemi":"section-title",className:"group-hover:text-super line-clamp-3 leading-tight transition-colors duration-150",children:e.name}),!!e.operating_hours&&w&&o.jsx(K9,{place:e}),(e.rating||e.price||e.price_range)&&o.jsxs(Pl,{className:"gap-xs text-quiet text-xs",children:[!!e.operating_hours&&!w&&o.jsx(gr,{id:"is-open",children:o.jsx(K9,{place:e})}),(e.price||e.price_range)&&o.jsx(gr,{id:"price",children:o.jsx(KEe,{dollarCount:e.price?.replace(/\u200A/g,"").length??0,priceRange:e.price_range,currencySymbol:e.currency_char})}),e.rating&&o.jsx(gr,{id:"rating",children:o.jsx(M$,{minReviewCount:1,reviewCount:e.num_reviews,rating:e.rating,size:"sm",variant:"truncated",textVariant:"tiny"})}),d&&o.jsx(gr,{id:"logo",children:e.url?o.jsx(Ge,{href:e.url,target:"_blank",className:"cursor-pointer duration-150 hover:opacity-70",onClick:M,children:o.jsx(d,{})}):o.jsx(d,{})})]}),o.jsxs("div",{className:"mt-xs gap-xs flex flex-col",children:[!!e.address?.length&&o.jsx(JS,{icon:HM,href:`https://maps.google.com/?q=${e.address.join(", ")}`,target:"_blank",label:e.address.join(", ")}),!!e.phone&&o.jsx(JS,{icon:c9e,label:e.phone,href:`tel:${e.phone}`}),!!e.url&&b&&!d&&o.jsx(JS,{icon:V7,label:b,href:e.url})]})]})]}),S&&o.jsx(yn,{active:E,children:o.jsx(H,{className:"mt-xs pt-sm border-t",children:o.jsx("div",{className:"-ml-sm",children:o.jsx(Z1,{id:String(e.id),pros:v?.pros_detailed??ue,cons:v?.cons_detailed??ue,loading:E})})})})]})}),o.jsx(N$,{title:e.name,mainImageIndex:0,isOpen:c,images:x??ue,onClose:O})]})});YEe.displayName="PlaceWidget";const K9=I.memo(({place:e})=>{const{$t:t}=Z(),n=f.useMemo(()=>{if(e.is_open){const s=e.operating_hours?.find(a=>a.is_today)?.hours;return!s||s.length===0||s.length>1?null:s?.[0]?.split(" - ")[1]}return null},[e.is_open,e.operating_hours]),r=f.useMemo(()=>o.jsx(DEe,{operatingHours:e.operating_hours}),[e.operating_hours]);return o.jsx(bn,{tooltipText:r,asChild:!0,children:o.jsx(D,{variant:"tiny",color:e.is_open?"super":"red",children:e.is_open?n?t({defaultMessage:"Open until {time}",id:"abDRIJdom/"},{time:n}):t({defaultMessage:"Open",id:"JfG49wNHKP"}):t({defaultMessage:"Closed",id:"Fv1ZSzMOV6"})})})});K9.displayName="OpenUntil";const JS=I.memo(({icon:e,label:t,href:n,target:r})=>{const s=f.useCallback(i=>{i.stopPropagation()},[]),a=o.jsxs(D,{variant:"tiny",color:"light",className:"gap-xs flex items-start md:items-center",children:[o.jsx(ce,{icon:e,size:"sm",className:"-translate-x-0.5"}),t]});return n?o.jsx(Ge,{href:n,target:r,className:"cursor-pointer",onClick:s,children:o.jsx(D,{superHover:!0,color:"light",children:a})}):a});JS.displayName="MetaDataItem";const QEe=I.memo(({url:e,children:t,className:n})=>{const r=f.useCallback(s=>{s.stopPropagation()},[]);return e?o.jsx("div",{className:B("inline-flex",n),children:o.jsx(Ge,{href:e,target:"_blank",className:"inline-flex min-w-0 items-center gap-0 duration-150 hover:opacity-60",onClick:r,children:t})}):t});QEe.displayName="LogoWrapper";const XEe=I.memo(({merchantName:e,merchantDomain:t,itemUrl:n,className:r,textVariant:s,iconSize:a,faviconSize:i})=>o.jsx(QEe,{url:n??void 0,className:r,iconSize:a,children:o.jsx(ZEe,{name:e,domain:t,faviconSize:i,textVariant:s})}));XEe.displayName="EntityItemMerchantInfo";const ZEe=I.memo(({name:e,domain:t,faviconSize:n,textVariant:r="tiny"})=>o.jsxs(D,{variant:r,color:"light",className:"gap-xs flex items-center",children:[o.jsx(zi,{className:"-translate-y-half shrink-0",domain:t,size:n}),o.jsx("span",{className:"truncate whitespace-nowrap",children:e})]}));ZEe.displayName="EntityMerchantLogoName";const zA=e=>{if(e.indexOf("$")===-1)return e;const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),n=e.replace(/[$,]/g,"");return t.format(parseFloat(n))},JEe=I.memo(({price:e,comparePrice:t,soldOut:n,size:r,textVariant:s})=>{const{$t:a}=Z(),{isMobileStyle:i}=xe(),l=zA(n&&t?t:e);return o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(D,{variant:s||(i||r==="small"?"smallBold":"baseSemi"),className:n?"line-through":void 0,color:t?"default":void 0,children:l}),n?o.jsx(D,{variant:s??"small",color:"red",children:a({defaultMessage:"Sold Out",id:"MwUAGRNkR/"})}):t&&o.jsx(D,{variant:s??"small",color:"light",className:"line-through",children:zA(t)})]})});JEe.displayName="EntityItemPrice";const vNt=({enabled:e,reason:t})=>{const{data:n,isPending:r,refetch:s}=We({queryKey:["create_firmly_session"],queryFn:async()=>Xlt({reason:t}),enabled:e});return f.useMemo(()=>({createFirmlySessionData:n,isPending:r,refetch:s}),[n,r,s])},eMe=I.memo(({className:e})=>o.jsx(D,{variant:"tiny",color:"super",className:B("flex shrink-0 items-center gap-[5px] !text-[11px]",e),children:"Buy now"}));eMe.displayName="BuyWithProIndicator";const tMe=I.memo(({className:e,textVariant:t="tiny"})=>{const{$t:n}=Z();return o.jsx(bn,{asChild:!0,tooltipLayout:"top",tooltipText:n({defaultMessage:"Shipping is free while shopping with Perplexity Pro",id:"UMkYrflCjt"}),children:o.jsx(D,{color:"light",variant:t,className:e,children:n({defaultMessage:"Free Delivery",id:"d7c64sMLc7"})})})});tMe.displayName="FreeShippingIndicator";const xNt=({reason:e,enabled:t=!0})=>{const n=ht(),{data:r,isLoading:s}=We({queryKey:hN(),queryFn:()=>Qlt({reason:e}),enabled:t}),a=f.useCallback(()=>{setTimeout(()=>{n.invalidateQueries({queryKey:hN()})},3e3)},[n]),i=f.useCallback(({paymentMethodId:l,type:c="card",link:u=null,card:d=null})=>{a(),n.setQueryData(hN(),m=>m&&m.customer?{...m,customer:{...m.customer,default_payment_method_type:c,default_payment_method:c==="card"?{id:l,brand:d?.brand,last_digits:d?.last_digits}:null,default_payment_method_link:c==="link"?{id:l,email:u?.email}:null}}:m)},[a,n]);return f.useMemo(()=>({customerShoppingInfo:r,isCustomerShoppingInfoLoading:s,setDefaultPaymentMethod:i}),[r,s,i])},j$=({ref:e,onInView:t,onNotInView:n,once:r=!0})=>{const[s,a]=f.useState(!1),i=SBe(e);f.useEffect(()=>{const l=r?!s:!0;i&&l?(t(),a(!0)):!i&&l&&n&&(n(),a(!0))},[r,s,a,t,i,n])},nMe=I.memo(()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"70",height:"auto","aria-labelledby":"shop-pay-logo",viewBox:"0 0 424 102",fill:"none",children:[o.jsx("title",{id:"shop-pay-logo",children:"Shop Pay"}),o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M204.916 30.0997C208.894 25.1796 215.067 21.1016 222.436 21.1016C238.98 21.1016 252.012 34.7983 252.001 51.6974C252.001 69.3058 238.903 82.3375 223.189 82.3375C214.834 82.3375 208.44 78.06 206.102 74.4918H205.88V100.356C205.88 100.512 205.818 100.661 205.708 100.771C205.598 100.881 205.449 100.943 205.293 100.943H190.566C190.409 100.943 190.258 100.882 190.146 100.772C190.035 100.662 189.97 100.513 189.967 100.356V21.6779C189.967 21.5192 190.03 21.3669 190.143 21.2547C190.255 21.1425 190.407 21.0795 190.566 21.0795H204.329C204.486 21.0824 204.635 21.1467 204.745 21.2586C204.855 21.3705 204.916 21.5211 204.916 21.6779V30.0997ZM221.179 67.3428C219.958 67.3814 218.73 67.2768 217.521 67.0265C214.479 66.397 211.694 64.8745 209.522 62.6536C207.35 60.4328 205.89 57.6146 205.329 54.5595C205.167 53.6817 205.082 52.7958 205.072 51.9114C205.061 50.9204 205.144 49.926 205.323 48.9415C205.879 45.8886 207.331 43.0704 209.495 40.8465C211.659 38.6226 214.436 37.094 217.473 36.4557C218.689 36.2001 219.924 36.0919 221.153 36.1288C223.15 36.1534 225.123 36.5679 226.962 37.3492C228.825 38.141 230.513 39.2939 231.929 40.7413C233.344 42.1887 234.459 43.902 235.209 45.7824C235.959 47.6628 236.329 49.6731 236.299 51.6974C236.299 51.6977 236.299 51.698 236.299 51.6983C236.331 53.7263 235.962 55.7408 235.214 57.626C234.465 59.5114 233.351 61.2304 231.937 62.6843C230.522 64.1382 228.834 65.2983 226.97 66.098C225.138 66.8837 223.171 67.3063 221.179 67.3428Z",fill:"currentColor"}),o.jsx("path",{d:"M109.306 32.8701C105.904 25.7337 99.4543 21.1238 89.7359 21.1238C86.753 21.1758 83.8218 21.9123 81.1685 23.2765C78.5151 24.6406 76.2106 26.5959 74.4325 28.9916L74.0779 29.4238V1.45428C74.0779 1.29264 74.0137 1.13763 73.8994 1.02333C73.7851 0.909028 73.6301 0.844803 73.4684 0.844803H59.7275C59.5678 0.847707 59.4156 0.913196 59.3037 1.02718C59.1917 1.14117 59.1291 1.29454 59.1291 1.45428V81.6837C59.1291 81.8424 59.1921 81.9946 59.3044 82.1068C59.4166 82.219 59.5688 82.2821 59.7275 82.2821H74.4436C74.6033 82.2821 74.7567 82.2194 74.8707 82.1075C74.9847 81.9956 75.0502 81.8434 75.0531 81.6837V47.4754C75.0531 40.8265 79.4856 36.1169 86.5777 36.1169C94.3347 36.1169 96.2961 42.4998 96.2961 49.0046V81.6837C96.2961 81.8424 96.3592 81.9946 96.4714 82.1068C96.5836 82.219 96.7358 82.2821 96.8945 82.2821H111.577C111.737 82.2821 111.891 82.2194 112.004 82.1075C112.118 81.9956 112.184 81.8434 112.187 81.6837V47.0543C112.187 45.8686 112.187 44.705 112.032 43.5747C111.78 39.8707 110.856 36.2435 109.306 32.8701V32.8701Z",fill:"currentColor"}),o.jsx("path",{d:"M35.8249 44.7604C35.8249 44.7604 28.3339 42.9985 25.5746 42.2893C22.8153 41.5801 17.9949 40.073 17.9949 36.4272C17.9949 32.7814 21.8845 31.6179 25.8295 31.6179C29.7745 31.6179 34.1627 32.5709 34.5062 36.948C34.5201 37.1058 34.5927 37.2525 34.7097 37.3593C34.8267 37.466 34.9795 37.5249 35.1379 37.5243L49.6434 37.4689C49.7288 37.4691 49.8133 37.4517 49.8916 37.4178C49.9699 37.3838 50.0404 37.3341 50.0987 37.2717C50.1569 37.2093 50.2017 37.1356 50.2301 37.0551C50.2585 36.9746 50.2701 36.8891 50.264 36.804C49.3664 22.7971 37.0771 17.7883 25.7408 17.7883C12.2991 17.7883 2.46987 26.6534 2.46987 36.4272C2.46987 43.5636 4.48669 50.2568 20.3442 54.911C23.1256 55.7199 26.9044 56.7727 30.2066 57.6924C34.1738 58.8006 36.3125 60.4739 36.3125 63.1112C36.3125 66.1697 31.8799 68.2973 27.5249 68.2973C21.2196 68.2973 16.7427 65.9592 16.377 61.7593C16.358 61.6056 16.2832 61.4642 16.1667 61.362C16.0502 61.2599 15.9003 61.2041 15.7454 61.2052L1.27307 61.2717C1.18823 61.2717 1.10425 61.2887 1.02614 61.3218C0.94802 61.355 0.877379 61.4035 0.818427 61.4645C0.759474 61.5255 0.713411 61.5978 0.683003 61.677C0.652596 61.7562 0.638464 61.8407 0.641441 61.9255C1.30633 75.1456 14.0721 82.271 25.9735 82.271C43.7038 82.271 51.7156 72.2977 51.7156 62.9561C51.7378 58.5679 50.7294 48.5724 35.8249 44.7604Z",fill:"currentColor"}),o.jsx("path",{d:"M146.384 17.6442C132.654 17.6442 125.806 22.3095 120.31 26.0439L120.143 26.1547C119.86 26.3488 119.66 26.6427 119.584 26.9775C119.508 27.3124 119.562 27.6637 119.733 27.961L125.163 37.3137C125.265 37.4887 125.404 37.6391 125.571 37.754C125.738 37.869 125.928 37.9457 126.127 37.9786C126.323 38.0139 126.523 38.0053 126.715 37.9536C126.907 37.9018 127.084 37.8082 127.235 37.6794L127.668 37.3248C130.493 34.9534 135.026 31.7841 145.996 30.9197C152.102 30.4322 157.377 32.0279 161.266 35.6626C165.544 39.6076 168.104 45.9794 168.104 52.7058C168.104 65.0837 160.812 72.8629 149.099 73.018C139.447 72.9626 132.965 67.9317 132.965 60.496C132.965 56.5511 134.749 53.9802 138.228 51.4093C138.494 51.2193 138.682 50.9395 138.757 50.6217C138.832 50.304 138.79 49.9696 138.638 49.6806L133.762 40.4608C133.672 40.2958 133.551 40.1502 133.404 40.0323C133.258 39.9144 133.089 39.8266 132.909 39.7738C132.725 39.7188 132.531 39.7033 132.34 39.7281C132.149 39.7529 131.965 39.8176 131.801 39.9179C126.327 43.1647 119.611 49.1043 119.977 60.5182C120.42 75.0459 132.499 86.1384 148.201 86.5927H148.988H150.063C168.724 85.9833 182.199 72.1315 182.199 53.3485C182.199 36.1059 169.633 17.6442 146.384 17.6442Z",fill:"currentColor"}),o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M282.375 1.04428H408.027C416.699 1.04428 423.73 8.07446 423.73 16.7466V85.54C423.73 94.2121 416.699 101.242 408.027 101.242H282.375C273.703 101.242 266.673 94.2121 266.673 85.54V16.7466C266.673 8.07446 273.703 1.04428 282.375 1.04428ZM310.566 55.5316C321.049 55.5316 328.551 47.8854 328.551 37.1697C328.551 26.5093 321.049 18.8188 310.566 18.8188H292.06C291.84 18.8188 291.628 18.9064 291.473 19.0623C291.317 19.2181 291.229 19.4295 291.229 19.65V70.4361C291.232 70.6556 291.32 70.8653 291.476 71.0206C291.631 71.1758 291.841 71.2643 292.06 71.2672H299.019C299.24 71.2672 299.451 71.1796 299.607 71.0237C299.763 70.8679 299.85 70.6565 299.85 70.4361V56.3627C299.85 56.1423 299.938 55.9309 300.094 55.775C300.25 55.6191 300.461 55.5316 300.682 55.5316H310.566ZM310.034 26.5315C315.73 26.5315 319.93 31.0306 319.93 37.1697C319.93 43.3198 315.73 47.8078 310.034 47.8078H300.682C300.463 47.8078 300.253 47.7218 300.098 47.5683C299.942 47.4149 299.853 47.2063 299.85 46.9878V27.3626C299.853 27.1431 299.942 26.9334 300.097 26.7781C300.252 26.6229 300.462 26.5344 300.682 26.5315H310.034ZM330.601 61.5266C330.529 59.8838 330.868 58.2489 331.588 56.7704C332.308 55.2919 333.386 54.0167 334.724 53.0604C337.428 51.0325 341.616 49.9798 347.833 49.736L354.426 49.5144V47.564C354.426 43.6745 351.811 42.0233 347.611 42.0233C343.412 42.0233 340.763 43.5082 340.143 45.9351C340.093 46.1065 339.988 46.2564 339.843 46.3609C339.698 46.4653 339.523 46.5183 339.345 46.5113H332.84C332.72 46.5143 332.601 46.491 332.492 46.4431C332.382 46.3952 332.284 46.3238 332.205 46.2341C332.126 46.1443 332.067 46.0383 332.033 45.9235C331.999 45.8086 331.991 45.6878 332.009 45.5694C332.984 39.807 337.749 35.4299 347.911 35.4299C358.704 35.4299 362.593 40.4498 362.593 50.0352V70.4028C362.595 70.5129 362.575 70.6221 362.533 70.7243C362.492 70.8264 362.431 70.9193 362.354 70.9977C362.277 71.076 362.185 71.1382 362.083 71.1807C361.981 71.2232 361.872 71.245 361.762 71.245H355.191C355.081 71.245 354.972 71.2232 354.87 71.1807C354.769 71.1382 354.677 71.076 354.599 70.9977C354.522 70.9193 354.461 70.8264 354.42 70.7243C354.379 70.6221 354.358 70.5129 354.36 70.4028V68.8846C354.371 68.7514 354.339 68.6183 354.268 68.5049C354.197 68.3915 354.092 68.3041 353.967 68.2555C353.842 68.207 353.706 68.1999 353.577 68.2354C353.448 68.2709 353.334 68.347 353.252 68.4525C351.29 70.5912 348.099 72.1426 343.013 72.1426C335.555 72.1647 330.601 68.2641 330.601 61.5266ZM354.426 57.094V55.5205L345.894 55.9637C341.395 56.1964 338.768 58.0692 338.768 61.2163C338.768 64.0643 341.173 65.6489 345.362 65.6489C351.058 65.6489 354.426 62.5682 354.426 57.1051V57.094ZM369.198 80.7196V86.6481C369.188 86.8397 369.242 87.0293 369.353 87.1861C369.463 87.3429 369.623 87.4579 369.807 87.5124C370.966 87.8283 372.164 87.9739 373.365 87.9446C379.736 87.9446 385.554 85.6175 388.879 76.553L403.506 37.5353C403.548 37.4097 403.559 37.276 403.54 37.1451C403.52 37.0142 403.47 36.8897 403.394 36.7817C403.317 36.6738 403.216 36.5854 403.099 36.5238C402.982 36.4622 402.852 36.4291 402.719 36.4272H395.904C395.727 36.4257 395.554 36.4809 395.411 36.5845C395.267 36.6882 395.161 36.8349 395.106 37.0034L387.05 61.7149C386.989 61.8769 386.879 62.0163 386.737 62.1147C386.594 62.2131 386.425 62.2658 386.252 62.2658C386.079 62.2658 385.91 62.2131 385.767 62.1147C385.625 62.0163 385.516 61.8769 385.454 61.7149L376.168 36.9369C376.106 36.7782 375.998 36.6417 375.858 36.5449C375.718 36.4481 375.552 36.3956 375.381 36.394H368.732C368.6 36.3959 368.47 36.429 368.353 36.4906C368.236 36.5522 368.135 36.6406 368.058 36.7485C367.981 36.8564 367.931 36.9809 367.912 37.1119C367.892 37.2428 367.904 37.3765 367.946 37.5021L381.62 72.6301C381.687 72.8126 381.687 73.0129 381.62 73.1953L381.188 74.5583C380.684 76.2492 379.627 77.722 378.186 78.7407C376.746 79.7593 375.005 80.265 373.243 80.1766C372.22 80.1755 371.2 80.079 370.195 79.8885C370.073 79.8656 369.948 79.87 369.828 79.9012C369.708 79.9325 369.596 79.9898 369.501 80.0692C369.406 80.1486 369.329 80.2481 369.277 80.3605C369.224 80.4729 369.197 80.5956 369.198 80.7196Z",fill:"currentColor"})]}));nMe.displayName="ShopPayIcon";const bNt=(e,t)=>{const n=parseFloat(t.replace(/[^0-9.-]+/g,"")),r=parseFloat(e.replace(/[^0-9.-]+/g,"")),s=Math.trunc((n-r)/n*100);return s===0?null:`${s}%`},_Nt=(e,t)=>{let n;return e.thumbnails&&e.thumbnails?.length===1?n=[...e.thumbnails,...e.images]:n=e.thumbnails?.length>0?e.thumbnails:e.images,n.filter(r=>r.variants.includes(t.id)).concat(n.filter(r=>r.variants.length===0))},wNt=ye(async()=>{const{ShoppingDetailsModal:e}=await K(async()=>{const{ShoppingDetailsModal:t}=await import("./ShoppingDetailsModal-OKhzrrGu.js");return{ShoppingDetailsModal:t}},__vite__mapDeps([113,3,1,39,114,4,44,45,46,6,5,40,115,116,117,118,119,120,121]));return{default:e}}),CNt=ye(async()=>{const{ShopifyPurchaseModal:e}=await K(async()=>{const{ShopifyPurchaseModal:t}=await import("./ShopifyPurchaseModal-DeJl9V63.js");return{ShopifyPurchaseModal:t}},__vite__mapDeps([122,3,1,4,123,44,45,46,6,5,41]));return{default:e}}),SNt=(e,t)=>{switch(t.type){case"setItemDetailsOpen":return{...e,itemDetailsOpen:t.open};case"setSelectedImageIndex":return{...e,selectedImageIndex:t.index};case"setImageGalleryOpen":return{...e,imageGalleryOpen:t.open};case"setTryOnImageUrl":return{...e,tryOnImageUrl:t.url};case"setIsGeneratingTryOn":return{...e,isGeneratingTryOn:t.isGenerating}}},rMe={userDiscountOffer:null,shouldShowBuyWithPro:!1,selectedVariant:null,shopifyPurchaseModalOpen:!1,purchaseUrl:"",hideReviewSummary:!1,hasReviewSummary:!1,isShopifyPurchase:null,carouselImages:[],badgeText:"",needsUpsell:!1,showDiscountTag:!1,inViewRef:I.createRef(),reviewSummaryLoading:!1,buttonTitle:"",buttonTrailingComponent:null,selectedImageIndex:0,hasProsOrCons:!1,itemDetailsOpen:!1,imageGalleryOpen:!1,onPrimaryButtonClick:()=>{},tryOnImageUrl:null,isGeneratingTryOn:!1},ENt={setItemDetailsOpen:()=>{},setSelectedImageIndex:()=>{},setImageGalleryOpen:()=>{},setTryOnImageUrl:()=>{},setIsGeneratingTryOn:()=>{}},sMe=Wt("ShoppingWidgetDataContext",rMe),aMe=Wt("ShoppingWidgetApiContext",ENt),MNt=()=>f.useContext(sMe),kNt=()=>f.useContext(aMe),oMe=I.memo(({contextUUID:e,item:t,inFlight:n,entryUUID:r,onBuyWithProButtonClick:s,onShopifyButtonClick:a,children:i,canTryOn:l=!1})=>{const c="shopping-widget-provider",{$t:u}=Z(),[d,m]=f.useReducer(SNt,{...rMe}),[p,h]=f.useState(1),[g,y]=f.useState(!1),[v,x]=f.useState(t.variants.find(Ue=>Ue.available)||t.variants[0]),{trackEvent:b}=Ne(),{openModal:_}=xt(),{hasAccessToProFeatures:w}=_t(),C=rt(),{openVisitorLoginUpsell:S}=ur({enabled:!C}),E=Ho(),k=qm()==="US",{env:{isLocalhost:A}}=At(),R=k||A,O=f.useRef(null),{isMobileStyle:L}=xe();j$({ref:O,onInView:()=>{e&&b("shown shopping product",{contextUUID:e,entryUUID:r??"",productId:t.id,productName:t.name,productURL:t.url,client:t.client})}});const P=!!t.review_summary?.buy_if,N=!P&&n;let T=null;v?.id&&t?.merchant_info?.merchant_domain&&t.client!=="shopify_catalogue"&&(T=`https://${t.merchant_info.merchant_domain}/cart/${v.id}:${p}`);const j=f.useMemo(()=>{const Ue=v?_Nt(t,v):[];return d.tryOnImageUrl?[{src:d.tryOnImageUrl,variants:[]},...Ue]:Ue},[t,v,d.tryOnImageUrl]),F=f.useMemo(()=>{const Ue=t.images.map(Ot=>({image:Ot.src||"",url:Ot.src||""}));return d.tryOnImageUrl?[{image:d.tryOnImageUrl,url:d.tryOnImageUrl},...Ue]:Ue},[t.images,d.tryOnImageUrl]),U=f.useMemo(()=>t.merchant_info.pro_shop_enabled&&R,[t.merchant_info.pro_shop_enabled,R]),{customerShoppingInfo:V}=xNt({enabled:U??!1,reason:c}),$=f.useMemo(()=>!V?.customer?.shipping_address?.address.city,[V]),z=f.useCallback(()=>{const Ue=p+1;e&&b("shopping product quantity changed",{contextUUID:e,productName:t.name,newQuantity:Ue}),h(Ue)},[e,t.name,p,b]),Q=f.useCallback(()=>{const Ue=p>1?p-1:1;e&&b("shopping product quantity changed",{contextUUID:e,productName:t.name,newQuantity:Ue}),h(Ue)},[e,t.name,p,b]),Y=f.useCallback(async()=>{v?.price?_("shoppingPaymentModal",{product:t,onSuccess:Ue=>{_("purchaseConfirmationModal",{order:Ue})}}):window.open(t.url)},[t,_,v]),W=f.useCallback(()=>{_("shoppingOnboardingModal",{onContinue:()=>{Y()}})},[Y,_]),X=f.useCallback(()=>{e&&T&&(b("shopping modal button selected",{contextUUID:e,productURL:t.url,productId:t.id,productName:t.name,productPrice:v?.price??"",client:t.client}),window.open(T),y(!1))},[e,T,b,t.url,t.id,t.name,t.client,v]),G=f.useCallback(Ue=>{e&&t.url&&b("shopping card button selected",{contextUUID:e,productURL:t.url,productId:t.id,productName:t.name,productPrice:v?.price??"",cta:Ue,client:t.client})},[e,t.url,t.id,t.name,t.client,b,v]),J=f.useMemo(()=>{if(v?.compare_at_price&&v?.price){const Ue=bNt(v.price,v.compare_at_price);if(Ue)return u({defaultMessage:"{amount} off",id:"+Fpudsk35l"},{amount:Ue})}return null},[v,u]),q=f.useMemo(()=>!!t.review_summary&&t.review_summary.review_quality_score===0,[t.review_summary]),te=f.useCallback((Ue,Ot)=>{if(!t.variants)return;const yt=t.variants.find(St=>[St.option1,St.option2,St.option3].every((He,Be)=>Be===Ot?He===Ue:He===v?.[`option${Be+1}`]));yt&&x(yt),e&&b("shopping product option selected",{contextUUID:e,productName:t.name})},[e,t.name,t.variants,v,x,b]),re=f.useMemo(()=>T,[T]),ae=f.useMemo(()=>U&&(!C||!w),[U,C,w]),fe=f.useMemo(()=>u(U||T?{defaultMessage:"Buy with",id:"bw7bvygIAi"}:{defaultMessage:"Visit Site",id:"Ppy3I8Cd73"}),[U,T,u]),de=f.useMemo(()=>U?o.jsx(R5,{sizeVariant:"small",fillColor:"fill-inverse",width:"w-[26px] ml-0.5"}):T?o.jsx("div",{className:"h-[14px] [&>*]:ml-0.5 [&>*]:w-auto",children:o.jsx(nMe,{})}):void 0,[U,T]),ve=f.useCallback(()=>{a?a():y(!0)},[a,y]),_e=f.useCallback(()=>{if(U){if(!C){S({origin:Oe.BUY_WITH_PRO_BUTTON,description:u({defaultMessage:"Explore millions of products with free shipping on Perplexity Pro.",id:"PYA+JEZasT"}),title:u({defaultMessage:"Unlock free shipping with Perplexity",id:"dmUvYTOIgW"}),sheetModalVariant:"bottom-sheet-gradient"});return}if(!w){E({origin:Oe.BUY_WITH_PRO_BUTTON,pitchMessage:{title:u({defaultMessage:"Unlock free shipping with Perplexity",id:"dmUvYTOIgW"}),description:u({defaultMessage:"Explore millions of products with free shipping on Perplexity Pro.",id:"PYA+JEZasT"})}});return}$?W():Y(),s?.()}else re?ve():window.open(t.url)},[Y,W,ve,re,t.url,s,$,C,w,E,S,U,u]),Se=f.useCallback(()=>{G(U?"buy with pro":re?"buy with shop":"visit site")},[G,re,U]),be=f.useCallback(()=>{_e(),Se()},[_e,Se]),me=f.useMemo(()=>N?!0:(t.review_summary?.pros_detailed?.length??0)>0||(t.review_summary?.cons_detailed?.length??0)>0,[t.review_summary?.pros_detailed,t.review_summary?.cons_detailed,N]),Ae=f.useMemo(()=>({...d,shouldShowBuyWithPro:U,selectedVariant:v,shopifyPurchaseModalOpen:g,purchaseUrl:T,hideReviewSummary:q,hasReviewSummary:P,isShopifyPurchase:re,carouselImages:j,badgeText:J,needsUpsell:ae,inViewRef:O,reviewSummaryLoading:N,buttonTitle:fe,buttonTrailingComponent:de,hasProsOrCons:me,onPrimaryButtonClick:be}),[d,U,v,g,T,q,P,re,j,J,ae,O,N,fe,de,me,be]),Ee=f.useMemo(()=>({setItemDetailsOpen:Ue=>m({type:"setItemDetailsOpen",open:Ue}),setSelectedImageIndex:Ue=>m({type:"setSelectedImageIndex",index:Ue}),setImageGalleryOpen:Ue=>m({type:"setImageGalleryOpen",open:Ue}),setTryOnImageUrl:Ue=>m({type:"setTryOnImageUrl",url:Ue}),setIsGeneratingTryOn:Ue=>m({type:"setIsGeneratingTryOn",isGenerating:Ue})}),[m]),je=f.useCallback(()=>{Ee.setItemDetailsOpen(!1)},[Ee]),Me=f.useCallback(()=>{Ee.setItemDetailsOpen(!1),y(!0)},[Ee,y]),Ye=f.useCallback(()=>{Ee.setItemDetailsOpen(!1)},[Ee]),at=f.useCallback(()=>{y(!1)},[y]),it=f.useCallback(Ue=>{Ee.setSelectedImageIndex(Ue),L||requestAnimationFrame(()=>{Ee.setImageGalleryOpen(!0)})},[Ee,L]),ke=f.useCallback(()=>{Ee.setImageGalleryOpen(!1)},[Ee]);return o.jsx(sMe.Provider,{value:Ae,children:o.jsxs(aMe.Provider,{value:Ee,children:[i,o.jsx(wNt,{isOpen:d.itemDetailsOpen,onClose:je,onShopifyButtonClick:Me,inFlight:n,onBuyWithProButtonClick:Ye,item:t,canTryOn:l,menuItems:ue}),o.jsx(CNt,{open:g,onOptionSelect:te,onQuantityIncrement:z,onQuantityDecrement:Q,onClose:at,quantity:p,item:t,selectedVariant:v,handleBuyClick:X,selectedImageIndex:d.selectedImageIndex,handleImageClick:it,images:j}),o.jsx(N$,{title:t.name,mainImageIndex:d.selectedImageIndex,isOpen:d.imageGalleryOpen,images:F,onClose:ke})]})})});oMe.displayName="ShoppingWidgetProvider";const iMe=I.memo(({contextUUID:e,entryUUID:t,item:n,inFlight:r,innerRef:s,className:a,showProsCons:i=!0,context:l})=>{const{result:{answer_modes:c}}=an(),u=f.useMemo(()=>c.find(m=>m.answer_mode_type===mn.SHOPPING)?.shopping_config?.can_try_on??!1,[c]);return o.jsx(oMe,{contextUUID:e,item:n,inFlight:r,entryUUID:t,canTryOn:u,children:o.jsx(lMe,{item:n,className:a,contextUUID:e,entryUUID:t,inFlight:r,innerRef:s,showProsCons:i,context:l})})});iMe.displayName="ShoppingWidgetDense";const lMe=I.memo(({item:e,className:t,contextUUID:n,entryUUID:r,innerRef:s,showProsCons:a,context:i})=>{const l="widget-inner",{inViewRef:c,shouldShowBuyWithPro:u,carouselImages:d,badgeText:m,selectedVariant:p,reviewSummaryLoading:h,hasProsOrCons:g}=MNt(),{setItemDetailsOpen:y}=kNt(),{isMobileStyle:v}=xe(),{trackEvent:x}=Ne(),b=f.useCallback(()=>{y(!0),x("shopping card body clicked",{productId:e.id,productURL:e.url,contextUUID:n??"",client:e.client}),i==="answersMode"&&x("answer mode tab item selected",{answerMode:"shopping",entryUUID:r??"",contextUUID:n??"",itemID:e.id})},[i,n,r,e.client,e.id,e.url,y,x]);vNt({enabled:e.client==="firmly",reason:l});const _=f.useCallback(()=>{b()},[b]);return o.jsx(SEe,{id:e.id,entityVariant:"dense-card",className:B("relative !p-0",t),children:o.jsxs(H,{as:"button","data-widget-id":e.id,ref:nye([s,c]),className:B("group/root gap-sm md:gap-md flex cursor-pointer flex-col p-[10px] duration-150"),onClick:_,children:[o.jsxs("div",{className:B("md:gap-md flex flex-1 items-start gap-[12px]",{"md:items-center":!a||!g,"md:items-start":a&&g}),children:[e.image_url&&o.jsx("div",{className:"border-subtlest size-[88px] shrink-0 rounded-lg border bg-white md:size-28 dark:border-0",children:o.jsx(E$,{images:d.map(w=>w.src),className:"size-full rounded-lg bg-white",badgeText:m??void 0})}),o.jsxs("div",{className:"gap-xs flex flex-1 flex-col",children:[o.jsx("div",{className:"gap-xs flex items-start justify-between",children:o.jsxs("div",{className:"gap-xs flex flex-col",children:[e.merchant_info&&o.jsx(XEe,{merchantName:e.merchant,merchantDomain:e.merchant_info.merchant_domain,itemUrl:e.url,className:"md:mb-xs"}),u&&o.jsx("div",{className:"border-super/10 md:right-sm md:top-sm bg-super/10 md:px-sm md:py-xs absolute right-0 top-0 rounded-bl rounded-tr-[11px] border border-r-0 border-t-0 px-[6px] py-0.5 duration-150 md:rounded md:rounded-tr-[6px] md:border-r md:border-t",children:o.jsx(eMe,{})}),o.jsx(D,{variant:v?"smallBold":"baseSemi",className:"line-clamp-2 text-pretty text-left leading-tight",children:e.name}),o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(JEe,{textVariant:v?"tiny":void 0,comparePrice:p?.compare_at_price??void 0,price:e.price,size:"small"}),u&&o.jsx(tMe,{className:"inline-flex"})]}),typeof e.rating=="number"&&o.jsx(M$,{reviewCount:e.num_reviews,rating:e.rating,size:"xs",variant:"truncated",textVariant:v?"tiny":void 0})]})}),!v&&g&&a&&o.jsx(yn,{active:h,className:"-ml-xs mt-1",children:o.jsx(Z1,{pros:e.review_summary?.pros_detailed??ue,cons:e.review_summary?.cons_detailed??ue,loading:h,id:e.id})})]})]}),v&&g&&a&&o.jsx(Z1,{pros:e.review_summary?.pros_detailed??ue,cons:e.review_summary?.cons_detailed??ue,loading:h,className:"mt-2",id:e.id})]})})});lMe.displayName="WidgetInner";const TNt=ye(async()=>{const{ShoppingDetailsModal:e}=await K(async()=>{const{ShoppingDetailsModal:t}=await import("./ShoppingDetailsModal-OKhzrrGu.js");return{ShoppingDetailsModal:t}},__vite__mapDeps([113,3,1,39,114,4,44,45,46,6,5,40,115,116,117,118,119,120,121]));return{default:e}}),NNt=ye(async()=>{const{ShoppingViewMoreModal:e}=await K(async()=>{const{ShoppingViewMoreModal:t}=await import("./ShoppingViewMoreModal-zZ9hbsaI.js");return{ShoppingViewMoreModal:t}},__vite__mapDeps([124,3,1,125,4,123,44,45,46,6,5,41,126,114,40,115,116,117,118,119,120,121,127]));return{default:e}}),jNt=I.memo(({data:e,contextUUID:t,entryUUID:n,entryTitle:r,title:s,menuItemFn:a,innerRef:i,isEntryInFlight:l,entityVariant:c,includeViewAll:u,className:d,groupClassName:m,entityClassName:p,loading:h,textLoading:g,onRemoveResults:y})=>{const{$t:v}=Z(),{entityRefs:x}=S$(),{viewMoreOpen:b,setViewMoreOpen:_}=eNt(),[w,C]=f.useState(null),{trackEvent:S}=Ne(),E=f.useCallback(()=>{_(!0),n&&S("view all clicked",{entryUUID:n,src:"button"})},[n,_,S]),M=f.useMemo(()=>{const R=[],O=[],L=[];return e.forEach(P=>{const N=U_(P);if(!N)return;const T=N.object;if(T==="ShopifyWidget")R.push(P),O.push(N),ia(N.images)&&L.push(N.images[0]);else if(T==="PlaceWidget"&&(R.push(P),O.push(N),ia(N.images))){const j=N.images[0];L.push({src:j,variants:[]})}}),{widgetResults:R,widgets:O,images:L}},[e]),k=f.useCallback(()=>_(!1),[_]),A=f.useCallback(()=>C(null),[]);return o.jsxs(o.Fragment,{children:[o.jsxs(ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,ease:rn},ref:i,className:B("gap-sm relative isolate flex flex-col",m),children:[s&&o.jsxs("div",{className:"mt-md flex items-end justify-between",children:[o.jsx(hEe,{title:s,loading:h}),o.jsx("div",{className:"gap-sm flex items-center",children:o.jsxs(Ke,{mode:"popLayout",initial:!1,children:[u&&!h&&o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,ease:la},children:o.jsx(he,{text:v({defaultMessage:"View All",id:"wbcwKddwLa"}),variant:"border",size:"tiny",pill:!0,onClick:E})},"view-all-button"),!h&&y&&o.jsx(he,{variant:"border",size:"tiny",pill:!0,icon:Rt,onClick:y,toolTip:v({defaultMessage:"Remove results",id:"eLqO1aEzzN"})},"remove-results-button")]})})]}),g?o.jsx(_Ee,{}):o.jsx(cMe,{validatedWidgets:M,className:d,menuItemFn:a,contextUUID:t,entryUUID:n,isEntryInFlight:l,entityRefs:x,entityVariant:c,entityClassName:p,includeViewAll:u,onClickViewAll:E})]}),n&&o.jsxs(o.Fragment,{children:[w&&o.jsx(TNt,{isOpen:w!==null,onClose:A,item:w,onShopifyButtonClick:kn,onBuyWithProButtonClick:kn,inFlight:l,menuItems:ue}),o.jsx(NNt,{open:b,onClose:k,entryUUID:n,title:r??"",initialResults:M.widgetResults.filter(R=>"meta_data"in R)})]})]})});jNt.displayName="EntityGroup";const cMe=I.memo(({validatedWidgets:e,className:t,menuItemFn:n,contextUUID:r,entryUUID:s,isEntryInFlight:a,entityRefs:i,entityClassName:l,includeViewAll:c,onClickViewAll:u})=>o.jsxs("div",{className:B("gap-sm flex flex-col",t),children:[e.widgetResults.map((d,m)=>{const p=n?n(d):void 0,h=e.widgets[m];return Br(h).with({object:"ShopifyWidget"},g=>o.jsx(iMe,{item:g,contextUUID:r,entryUUID:s,innerRef:i[g.id],inFlight:a,className:l},g.id)).with({object:"PlaceWidget"},g=>o.jsx(YEe,{place:g,contextUUID:r,entryUUID:s,menuItems:p,inFlight:a,className:l},g.id)).otherwise(()=>null)}),c&&o.jsx(bEe,{onClick:u,disabled:a,images:e.images})]}));cMe.displayName="HighIntentWidgetGroup";const ANt=(e,t)=>e.concat(t).reduce((r,s)=>{const a=U_(s);if(!a)return r;const i=a.object;return(i==="ShopifyWidget"||i==="PlaceWidget")&&(r[i]||(r[i]=[]),r[i].push(s)),r},{}),INt=e=>{const t=U_(e);if(t)switch(t.object){case"ShopifyWidget":return!0;default:return!1}return!1},uMe=["GenericFallbackWidget"],RNt=(e,t)=>{if(!e)return;const n=e.filter(r=>r.plan_block&&r.intended_usage=="plan").map(r=>r.plan_block);if(n&&n.length>0){const r=[];let s=!1;for(const a of n){for(const i of a?.goals??[])if(i.description!==null)if(r.length==0||r[r.length-1]?.final)r.push({...i});else{const l=r[r.length-1];l&&(l.description+=i.description,l.final=i.final)}a?.final&&(s=!0)}if(r.length>0)return{goals:r,final:s,channel_uuid:"",comprehensive_mode:!1}}return t},PNt=e=>e.blocks??ue,Sv=e=>{const t=e.filter(s=>s.plan_block&&s.intended_usage=="pro_search_steps").map(s=>s.plan_block),n={};for(let s=0;s<t.length;s++)n[t[s]?.steps[0]?.uuid??""]=s;return t.filter((s,a)=>n[s.steps[0]?.uuid??""]===a).map(s=>s.steps.map(a=>({step_type:a.step_type,uuid:a.uuid??"",content:a?.initial_query_content??a?.attachment_content??a?.terminate_content??a?.search_web_content??a?.web_results_content??a?.code_content??a?.table_status_content??a?.entropy_request_content??a?.thought_content??a?.browser_search_content??a?.browser_open_tab_content??a?.browser_open_tab_results_content??a?.url_navigate_content??a?.browser_get_site_content_content??a?.user_clarification_content??a?.browser_get_history_summary_content??a?.browser_get_open_tab_content_content??a?.read_calendar_content??a?.read_calendar_response_content??a?.read_email_content??a?.read_email_response_content??a?.update_calendar_content??a?.generate_image_content??a?.generate_image_results_content??a?.generate_video_content??a?.generate_video_results_content??a?.search_tabs_content??a?.search_tabs_results_content??a?.create_app_results_content??a?.browser_close_tabs_content??a?.browser_close_tabs_results_content??a?.update_calendar_response_content??a?.browser_group_tabs_content??a?.browser_group_tabs_results_content??a?.create_chart_content??a?.get_url_content_content??a?.create_client_app_content??a?.get_user_info_content??a?.get_user_info_response_content??a?.get_free_busy_content??a?.get_free_busy_response_content??a?.send_email_content??a?.send_email_response_content??a?.browser_ungroup_content??a?.browser_search_tab_groups_content??a?.browser_search_tab_groups_result_content??a?.search_browser_content??a?.search_browser_results_content??a?.clarifying_questions_content??a?.clarifying_questions_output_content??a?.email_calendar_agent_content??a?.email_calendar_agent_response_content??a?.mcp_tool_input_content??a?.mcp_tool_output_content??a?.blocking_clarifying_questions_content??a?.create_tasks_content??a?.create_tasks_response_content??a?.flights_search_content??a?.flights_booking_content??a?.flights_search_response_content??a?.flights_booking_response_content??a?.flights_agent_content??a?.canvas_agent_content??{},assets:a.assets}))).flat()},ONt=e=>e?.filter(t=>t.reasoning_plan_block&&t.intended_usage==="reasoning_plan").map(t=>t.reasoning_plan_block),LNt=e=>{let t=!1;if(e&&e.length>0){const n=new Map;for(const a of e){if(a.goals){for(const i of a.goals)if(i.id)if(n.has(i.id)){const l=n.get(i.id);l.description+=i.description,n.set(i.id,l)}else n.set(i.id,{...i})}t=a.progress==="DONE"}const r=Array.from(n.values()),s=e.flatMap(a=>a.web_results??ue);return{goals:r,web_results:s,final:t}}};function DNt(e){const t={},n=[];return e?.forEach(r=>{if(r.widget_block){const s=t[r.intended_usage]??n.length;t[r.intended_usage]=s,n[s]=fet(n[s],r.widget_block)}}),n}function FNt(e){return(e?.filter(t=>t.media_block).flatMap(t=>t.media_block.media_items)??[]).filter(t=>!t.sponsored_uuid)}function UNt(e){return e?.filter(t=>t.media_block).flatMap(t=>t.media_block.generated_media_items)??[]}function BNt(e=ue){return e.reduce((t,n)=>{if(n.is_code_interpreter&&n.is_image)t.codeInterpreterImages.push(n);else{const r=n.meta_data?.source==="quartr"?{...n,snippet:""}:n;t.webResultsStandard.push(r)}return t},{webResultsStandard:[],codeInterpreterImages:[]})}function VNt(e){return e?.flatMap(t=>t.inline_entity_block?.knowledge_card_block?t.inline_entity_block.knowledge_card_block.knowledge_cards:t.knowledge_card_block?t.knowledge_card_block.knowledge_cards:[])??[]}function $Nt(e){return e??ue}function WNt(e){return e?.filter(t=>t.citation_block).flatMap(t=>t.citation_block.citations)??ue}function HNt(e){const t=e?.find(r=>r?.inline_entity_block?.finance_inline_block&&r.intended_usage==="answer_finance_widget")?.inline_entity_block?.finance_inline_block;return t===void 0?void 0:{object:"FinanceWidget",data:t.data_json.map(r=>JSON.parse(r)),data_v2:t?.data_json_v2?.map(r=>JSON.parse(r))}}function zNt(e){const t=e?.map(s=>s.widget_block)?.find(s=>s?.widget_type==="sports");if(!t?.sports_widget_block?.data)return;const r=t.sports_widget_block.data;switch(r.object){case"SportsEventsWidget":return r;case"SportsIndvScheduleWidget":return r;case"SportsStandingsWidget":return r;case"SportsIndvEventsWidget":return r;default:return}}function GNt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="WeatherWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function qNt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="TimeWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function KNt(e){if(!e)return;const t=e?.find(r=>r.widget_block?.search_result_widget_block?.metadata?.object==="TimerWidget");return!t||!t.widget_block?.search_result_widget_block?void 0:t.widget_block.search_result_widget_block.metadata}function YNt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="CalculatorWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function QNt(e,t){return e&&e.length>0?e.map(n=>({name:n.widget_type||"",url:"",snippet:"",timestamp:"",meta_data:{object:n.widget_type||"unknown",...n},is_attachment:!1,is_image:!1,is_code_interpreter:!1,is_knowledge_card:!1,is_navigational:!1,is_widget:!0,sitelinks:[],inline_entity_id:""})):t||[]}function XNt(e){const t=e.find(r=>r?.meta_data?.object==="TableWidget");return t?t.meta_data.search_results:ue}function ZNt(e){return e.filter(t=>uMe.includes(t?.meta_data?.object))}function JNt(e){return e.filter(t=>!uMe.includes(t?.meta_data?.object))}function ejt(e){const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="TaskWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function tjt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="FlightStatusWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function njt(e){if(!e)return;const t=e?.find(r=>r.widget_block?.search_result_widget_block?.metadata?.object==="CurrencyExchangeWidget");return!t||!t.widget_block?.search_result_widget_block?void 0:t.widget_block.search_result_widget_block.metadata}function rjt(e){if(!e?.length)return[];const t=[];return e.forEach(n=>{n.intended_usage==="pro_search_steps"&&n.plan_block?.steps&&n.plan_block.steps.forEach(r=>{r.clarifying_questions_output_content?.clarification&&t.push(r.clarifying_questions_output_content.clarification)})}),t}function sjt(e){return e?e.find(n=>n.intended_usage==="refinement_filters")?.refinement_filters_block:void 0}function ajt(e){return e?e.find(n=>n.inline_entity_block?.maps_preview_block&&n.intended_usage==="answer_maps_preview")?.inline_entity_block?.maps_preview_block:void 0}const ps=e=>e.result,Mr=Ct.makeSelector(e=>PNt(e(ps))),ojt=Ct.makeSelector(e=>{const t=e(Mr),n={};return t.forEach(r=>{r.intended_usage&&(n[r.intended_usage]=r)}),n}),ijt=Ct.makeSelector(e=>e(ps).mode),A$=Ct.makeSelector(e=>e(ps).display_model),ljt=Ct.makeSelector(e=>!!e(ps).is_pro_reasoning_mode),dMe=Ct.makeSelector(e=>e(ps).search_implementation_mode),I$=Ct.makeSelector(e=>un.isStatusFailed(e(ps))),cjt=Ct.makeSelector(e=>un.isStatusPending(e(ps))),ujt=Ct.makeSelector(e=>un.isStatusBlocked(e(ps))),djt=Ct.makeSelector(e=>e(ps).plan),fMe=Ct.makeSelector(e=>e(ps).widget_data??ue),Yk=Ct.makeSelector(e=>un.parseAskTextField(e(ps))??void 0),mMe=Ct.makeSelector(e=>un.isStatusPending(e(ps))),fjt=Ct.makeSelector(e=>Aat(e(ps))),pMe=Ct.makeSelector(e=>e(ps).expect_search_results),Y9=Ct.makeSelector(e=>{const t=e(Yk),n=un.isStatusCompleted(e(ps));return t?un.hasAnswer(t,n):!1}),hMe=Ct.makeSelector(e=>e(yMe).length>0),rM=Ct.makeSelector(e=>Sv(e(Mr))),R$=Ct.makeSelector(e=>RNt(e(Mr),e(djt))),mjt=Ct.makeSelector(e=>ONt(e(Mr))),Q9=Ct.makeSelector(e=>LNt(e(mjt))),P$=Ct.makeSelector(e=>Ur(e(A$))),pjt=Ct.makeSelector(e=>{const t=e(P$),n=e(ps),r=un.parseStructuredAnswerBlocks(n);return r!==null&&r.some(s=>s.intended_usage==="answer_generated_image"||s.intended_usage==="answer_generated_video")&&!r.some(s=>!!s.markdown_block?.answer||!!s.markdown_block?.chunks)&&t===ie.SEARCH}),gMe=Ct.makeSelector(e=>DNt(e(Mr))),yMe=Ct.makeSelector(e=>BNt(e(Yk)?.web_results).webResultsStandard),vMe=Ct.makeSelector(e=>GNt(e(Mr))),xMe=Ct.makeSelector(e=>qNt(e(Mr))),bMe=Ct.makeSelector(e=>KNt(e(Mr))),_Me=Ct.makeSelector(e=>njt(e(Mr))),wMe=Ct.makeSelector(e=>YNt(e(Mr))),CMe=Ct.makeSelector(e=>tjt(e(Mr))),Qk=Ct.makeSelector(e=>QNt(e(gMe),e(fMe))),hjt=Ct.makeSelector(e=>Iat(e(Mr),e(A$),e(rM))),gjt=Ct.makeSelector(e=>e(Yk)?.answer==="Answer skipped."||e(Mr).some(t=>t.markdown_block?.answer==="Answer skipped.")),yjt=Ct.makeSelector(e=>e(ijt)===Sh.COPILOT||e(rM)!=null&&e(rM).length>0),vjt=Ct.makeSelector(e=>e(I$)?ue:FNt(e(Mr))),xjt=Ct.makeSelector(e=>e(I$)?ue:UNt(e(Mr))),bjt=Ct.makeSelector(e=>{const t=e(R$);return e(dMe)==="fast"||!!t&&t.goals.length===1&&t.goals[0]?.description==="Searching the web"}),_jt=Ct.makeSelector(e=>e(ps).attachment_processing_progress??ue),SMe=Ct.makeSelector(e=>!!e(_jt).length),EMe=Ct.makeSelector(e=>e(ps).search_focus==="writing"),MMe=Ct.makeSelector(e=>{const t=e(mMe),n=e(pMe),r=e(EMe);return!!t&&n!=="false"&&!r}),wjt=Ct.makeSelector(e=>{const t=e(hMe),n=e(MMe);return t||n}),Cjt=Ct.makeSelector(e=>e(A$)===le.O3_PRO&&!e(Y9)?!0:e(bjt)&&!e(Q9)?!1:!!(!e(Y9)&&(e(R$)||e(Q9)||e(P$)!==ie.SEARCH||e(dMe)==="multi_step"||e(SMe)))),Sjt=Ct.makeSelector(e=>VNt(e(Mr))),Ejt=Ct.makeSelector(e=>$Nt(e(ps).related_query_items)),Mjt=Ct.makeSelector(e=>WNt(e(Mr))),kMe=Ct.makeSelector(e=>HNt(e(Mr))),TMe=Ct.makeSelector(e=>zNt(e(Mr))),NMe=Ct.makeSelector(e=>XNt(e(Qk))),kjt=Ct.makeSelector(e=>ZNt(e(Qk))),Tjt=Ct.makeSelector(e=>JNt(e(Qk))),Njt=Ct.makeSelector(e=>ANt(e(Qk),e(gMe))),jjt=Ct.makeSelector(e=>[...e(yMe),...e(NMe)]),Ajt=Ct.makeSelector(e=>ejt(e(Mr))),Ijt=Ct.makeSelector(e=>{const t=e(TMe),n=e(kMe),r=e(vMe),s=e(xMe),a=e(wMe),i=e(CMe),l=e(bMe),c=e(_Me);return!!(t||n||r||s||a||i||l||c)}),Rjt=Ct.makeSelector(e=>rjt(e(Mr))),Pjt=Ct.makeSelector(e=>sjt(e(Mr))),Ojt=Ct.makeSelector(e=>ajt(e(Mr))),jMe=e=>{const{idx:t,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:i,submitQuery:l,pendingClarifications:c=[]}=e,u=Rjt(e),d=n.backend_uuid?c.filter(h=>h.entryUUID===n.backend_uuid).map(h=>h.content):[],m=Array.from(new Set([...u,...d])),p=Pjt(e);return{idx:t,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:i,submitQuery:l,isPending:cjt(e),isBlocked:ujt(e),isFinalStep:hjt(e),isFailed:I$(e),isProReasoningMode:ljt(e),widgetData:fMe(e),response:Yk(e),isEntryInFlight:mMe(e),hasLLMToken:fjt(e),isAnswerSkipped:gjt(e),expectWebResults:pMe(e),steps:rM(e),researchPlan:R$(e),reasoningPlan:Q9(e),searchMode:P$(e),hasMediaOnlyLayout:pjt(e),hasAnswer:Y9(e),hasWebResults:hMe(e),weatherWidgetData:vMe(e),timeWidgetData:xMe(e),timerWidgetData:bMe(e),calculatorWidgetData:wMe(e),currencyExchangeWidgetData:_Me(e),flightStatusWidgetData:CMe(e),isCopilot:yjt(e),mediaItems:vjt(e),generatedMediaItems:xjt(e),hasPendingFiles:SMe(e),showAgentWorkflow:Cjt(e),knowledgeCards:Sjt(e),relatedQueryItems:Ejt(e),webResultCitations:Mjt(e),financeWidgetData:kMe(e),sportsWidgetData:TMe(e),tableWebResults:NMe(e),highPriorityWidgets:kjt(e),lowPriorityWidgets:Tjt(e),groupedEntityWidgets:Njt(e),webResults:jjt(e),taskWidgetData:Ajt(e),hasFastWidget:Ijt(e),userClarifications:m,refinementFiltersData:p,selectedFilterIds:p?.selected_filter_ids??[],focusIsWriting:EMe(e),expectSearchResults:MMe(e),hasSources:wjt(e),blocksByIntendedUsage:ojt(e),mapsPreviewData:Ojt(e)}},Ljt=e=>pi()((n,r)=>({editQueryValue:e.result?.query_str??"",isEditingQuery:!1,isStatusUpdaterOpen:!1,wasStatusUpdaterManuallyOpened:!1,selectedRefinementQuery:null,...jMe(e),actions:{setEditQueryValue:s=>n({editQueryValue:s}),setIsEditingQuery:s=>n({isEditingQuery:s}),setStatusUpdaterOpen:s=>n({isStatusUpdaterOpen:s}),setWasStatusUpdaterManuallyOpened:s=>n({wasStatusUpdaterManuallyOpened:s}),setSelectedRefinementQuery:s=>n({selectedRefinementQuery:s}),setSelectedFilterIds:s=>n({selectedFilterIds:s}),handleSourcesCuration:s=>{r().result?.frontend_context_uuid&&(r().result?.backend_uuid&&r().scrollToListItem?.(r().result.backend_uuid,{smooth:!0}),r().submitQuery({existingEntryUUID:r().result?.backend_uuid??void 0,newFrontendContextUUID:null,existingFrontendContextUUID:r().result?.frontend_context_uuid,deletedUrls:s,rawQuery:r().result?.query_str??"",existingUuid:r().result?.uuid??void 0,collection:null,promptSource:"user",querySource:"citation_modal"}))}}})),{Context:Djt,useTrackedState:Fjt}=Db("ThreadEntryContext"),O$=I.memo(({idx:e,children:t,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:i,submitQuery:l})=>{const c=f.useRef(r),{trackEvent:u}=Ay(),{pendingClarifications:d}=C$(),[m]=f.useState(()=>Ljt({idx:e,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:i,submitQuery:l,pendingClarifications:d})),h=m(g=>g.isFinalStep);return f.useEffect(()=>{const g=()=>{const x=setTimeout(()=>{u("engaged",{})},1e4);return()=>{clearTimeout(x)}},y=a&&s,v=c.current&&!r;if(y&&v&&h)return g();c.current=r},[r,h,s,a,u]),f.useEffect(()=>{m.setState(jMe({idx:e,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:i,submitQuery:l,pendingClarifications:d}))},[e,n,r,s,a,i,l,d,m]),o.jsx(Djt.Provider,{value:m,children:t})});O$.displayName="ThreadEntryProvider";const an=Fjt;function Xk(){const{result:{frontend_uuid:e,frontend_context_uuid:t}}=an(),n=Lme(),r=n(e??"")??n(t);return f.useCallback((s,a)=>r?.addTiming(s,a),[r])}function AMe(){const{result:{frontend_uuid:e,frontend_context_uuid:t}}=an(),n=Lme(),r=n(e??"")??n(t);return f.useCallback((s,a)=>r?.addTimingOnce(s,a),[r])}const Ujt=({widgetType:e,widgetName:t,widgetSize:n="full"})=>{const{trackEvent:r}=Ne(),{result:{backend_uuid:s,frontend_context_uuid:a}}=an(),i=f.useMemo(()=>({widgetType:e,widgetName:t,widgetLocation:"thread",widgetSize:n,position:0,frontendUUID:a,entryUUID:s}),[e,t,s,a,n]),l=f.useCallback(()=>{r("widget viewed",i)},[r,i]),c=f.useCallback(()=>{r("widget hovered",i)},[r,i]),u=f.useCallback(d=>{r("widget selected",{...i,widgetCTA:{type:"internal_url",permalink:d}})},[r,i]);return f.useMemo(()=>({widgetViewed:l,widgetHovered:c,widgetSelected:u}),[l,c,u])},Ci=I.memo(e=>{const{children:t,...n}=e,{widgetSelected:r,widgetViewed:s,widgetHovered:a}=Ujt(n),i=f.useRef({hovered:!1,viewed:!1}),{ref:l,isIntersecting:c}=Jge({threshold:.5,freezeOnceVisible:!0});f.useEffect(()=>{c&&!i.current.viewed&&(s(),i.current.viewed=!0)},[c,s]);const u=f.useCallback(()=>{i.current.hovered||(a(),i.current.hovered=!0)},[a]);return o.jsx("div",{ref:l,onMouseEnter:u,"data-testid":e.widgetType+"-widget",children:typeof t=="function"?t({widgetSelected:r}):t})});Ci.displayName="WithThreadWidgetInteractionEvents";const IMe=I.memo(e=>{const{data:t}=e,{menuItems:n}=t0();return t?.result==null?null:o.jsx(Ci,{widgetType:"calculator",widgetName:"calculator",widgetSize:"full",children:o.jsx(H,{className:"flex",children:o.jsxs("div",{className:"flex w-full items-center",children:[o.jsx(D,{color:"light",variant:"smallBold",children:o.jsx(ce,{className:"mt-two text-2xl leading-none",icon:u9e,size:"sm"})}),o.jsx(D,{children:o.jsx(H,{className:"pl-md font-mono text-2xl",children:Est(t.result)})}),n&&n.length>0&&o.jsx("div",{className:"flex grow items-start justify-end",children:o.jsx(pr.Menu,{menuItems:n})})]})})})});IMe.displayName="CalculatorWidget";function gu(e){return Array.isArray?Array.isArray(e):OMe(e)==="[object Array]"}function Bjt(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Vjt(e){return e==null?"":Bjt(e)}function Nl(e){return typeof e=="string"}function RMe(e){return typeof e=="number"}function $jt(e){return e===!0||e===!1||Wjt(e)&&OMe(e)=="[object Boolean]"}function PMe(e){return typeof e=="object"}function Wjt(e){return PMe(e)&&e!==null}function Co(e){return e!=null}function GA(e){return!e.trim().length}function OMe(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Hjt="Incorrect 'index' type",zjt=e=>`Invalid value for key ${e}`,Gjt=e=>`Pattern length exceeds max of ${e}.`,qjt=e=>`Missing ${e} property in key`,Kjt=e=>`Property 'weight' in key '${e}' must be a positive integer`,Qne=Object.prototype.hasOwnProperty;class Yjt{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let s=LMe(r);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function LMe(e){let t=null,n=null,r=null,s=1,a=null;if(Nl(e)||gu(e))r=e,t=Xne(e),n=X9(e);else{if(!Qne.call(e,"name"))throw new Error(qjt("name"));const i=e.name;if(r=i,Qne.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(Kjt(i));t=Xne(i),n=X9(i),a=e.getFn}return{path:t,id:n,weight:s,src:r,getFn:a}}function Xne(e){return gu(e)?e:e.split(".")}function X9(e){return gu(e)?e.join("."):e}function Qjt(e,t){let n=[],r=!1;const s=(a,i,l)=>{if(Co(a))if(!i[l])n.push(a);else{let c=i[l];const u=a[c];if(!Co(u))return;if(l===i.length-1&&(Nl(u)||RMe(u)||$jt(u)))n.push(Vjt(u));else if(gu(u)){r=!0;for(let d=0,m=u.length;d<m;d+=1)s(u[d],i,l+1)}else i.length&&s(u,i,l+1)}};return s(e,Nl(t)?t.split("."):t,0),r?n:n[0]}const Xjt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Zjt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},Jjt={location:0,threshold:.6,distance:100},eAt={useExtendedSearch:!1,getFn:Qjt,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var zt={...Zjt,...Xjt,...Jjt,...eAt};const tAt=/[^ ]+/g;function nAt(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(s){const a=s.match(tAt).length;if(n.has(a))return n.get(a);const i=1/Math.pow(a,.5*e),l=parseFloat(Math.round(i*r)/r);return n.set(a,l),l},clear(){n.clear()}}}class L${constructor({getFn:t=zt.getFn,fieldNormWeight:n=zt.fieldNormWeight}={}){this.norm=nAt(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Nl(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Nl(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Co(t)||GA(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((s,a)=>{let i=s.getFn?s.getFn(t):this.getFn(t,s.path);if(Co(i)){if(gu(i)){let l=[];const c=[{nestedArrIndex:-1,value:i}];for(;c.length;){const{nestedArrIndex:u,value:d}=c.pop();if(Co(d))if(Nl(d)&&!GA(d)){let m={v:d,i:u,n:this.norm.get(d)};l.push(m)}else gu(d)&&d.forEach((m,p)=>{c.push({nestedArrIndex:p,value:m})})}r.$[a]=l}else if(Nl(i)&&!GA(i)){let l={v:i,n:this.norm.get(i)};r.$[a]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function DMe(e,t,{getFn:n=zt.getFn,fieldNormWeight:r=zt.fieldNormWeight}={}){const s=new L$({getFn:n,fieldNormWeight:r});return s.setKeys(e.map(LMe)),s.setSources(t),s.create(),s}function rAt(e,{getFn:t=zt.getFn,fieldNormWeight:n=zt.fieldNormWeight}={}){const{keys:r,records:s}=e,a=new L$({getFn:t,fieldNormWeight:n});return a.setKeys(r),a.setIndexRecords(s),a}function FC(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:s=zt.distance,ignoreLocation:a=zt.ignoreLocation}={}){const i=t/e.length;if(a)return i;const l=Math.abs(r-n);return s?i+l/s:l?1:i}function sAt(e=[],t=zt.minMatchCharLength){let n=[],r=-1,s=-1,a=0;for(let i=e.length;a<i;a+=1){let l=e[a];l&&r===-1?r=a:!l&&r!==-1&&(s=a-1,s-r+1>=t&&n.push([r,s]),r=-1)}return e[a-1]&&a-r>=t&&n.push([r,a-1]),n}const Of=32;function aAt(e,t,n,{location:r=zt.location,distance:s=zt.distance,threshold:a=zt.threshold,findAllMatches:i=zt.findAllMatches,minMatchCharLength:l=zt.minMatchCharLength,includeMatches:c=zt.includeMatches,ignoreLocation:u=zt.ignoreLocation}={}){if(t.length>Of)throw new Error(Gjt(Of));const d=t.length,m=e.length,p=Math.max(0,Math.min(r,m));let h=a,g=p;const y=l>1||c,v=y?Array(m):[];let x;for(;(x=e.indexOf(t,g))>-1;){let E=FC(t,{currentLocation:x,expectedLocation:p,distance:s,ignoreLocation:u});if(h=Math.min(E,h),g=x+d,y){let M=0;for(;M<d;)v[x+M]=1,M+=1}}g=-1;let b=[],_=1,w=d+m;const C=1<<d-1;for(let E=0;E<d;E+=1){let M=0,k=w;for(;M<k;)FC(t,{errors:E,currentLocation:p+k,expectedLocation:p,distance:s,ignoreLocation:u})<=h?M=k:w=k,k=Math.floor((w-M)/2+M);w=k;let A=Math.max(1,p-k+1),R=i?m:Math.min(p+k,m)+d,O=Array(R+2);O[R+1]=(1<<E)-1;for(let P=R;P>=A;P-=1){let N=P-1,T=n[e.charAt(N)];if(y&&(v[N]=+!!T),O[P]=(O[P+1]<<1|1)&T,E&&(O[P]|=(b[P+1]|b[P])<<1|1|b[P+1]),O[P]&C&&(_=FC(t,{errors:E,currentLocation:N,expectedLocation:p,distance:s,ignoreLocation:u}),_<=h)){if(h=_,g=N,g<=p)break;A=Math.max(1,2*p-g)}}if(FC(t,{errors:E+1,currentLocation:p,expectedLocation:p,distance:s,ignoreLocation:u})>h)break;b=O}const S={isMatch:g>=0,score:Math.max(.001,_)};if(y){const E=sAt(v,l);E.length?c&&(S.indices=E):S.isMatch=!1}return S}function oAt(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const s=e.charAt(n);t[s]=(t[s]||0)|1<<r-n-1}return t}class FMe{constructor(t,{location:n=zt.location,threshold:r=zt.threshold,distance:s=zt.distance,includeMatches:a=zt.includeMatches,findAllMatches:i=zt.findAllMatches,minMatchCharLength:l=zt.minMatchCharLength,isCaseSensitive:c=zt.isCaseSensitive,ignoreLocation:u=zt.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:a,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:u},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(p,h)=>{this.chunks.push({pattern:p,alphabet:oAt(p),startIndex:h})},m=this.pattern.length;if(m>Of){let p=0;const h=m%Of,g=m-h;for(;p<g;)d(this.pattern.substr(p,Of),p),p+=Of;if(h){const y=m-Of;d(this.pattern.substr(y),y)}}else d(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let g={isMatch:!0,score:0};return r&&(g.indices=[[0,t.length-1]]),g}const{location:s,distance:a,threshold:i,findAllMatches:l,minMatchCharLength:c,ignoreLocation:u}=this.options;let d=[],m=0,p=!1;this.chunks.forEach(({pattern:g,alphabet:y,startIndex:v})=>{const{isMatch:x,score:b,indices:_}=aAt(t,g,y,{location:s+v,distance:a,threshold:i,findAllMatches:l,minMatchCharLength:c,includeMatches:r,ignoreLocation:u});x&&(p=!0),m+=b,x&&_&&(d=[...d,..._])});let h={isMatch:p,score:p?m/this.chunks.length:1};return p&&r&&(h.indices=d),h}}class Zd{constructor(t){this.pattern=t}static isMultiMatch(t){return Zne(t,this.multiRegex)}static isSingleMatch(t){return Zne(t,this.singleRegex)}search(){}}function Zne(e,t){const n=e.match(t);return n?n[1]:null}class iAt extends Zd{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class lAt extends Zd{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class cAt extends Zd{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class uAt extends Zd{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class dAt extends Zd{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class fAt extends Zd{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class UMe extends Zd{constructor(t,{location:n=zt.location,threshold:r=zt.threshold,distance:s=zt.distance,includeMatches:a=zt.includeMatches,findAllMatches:i=zt.findAllMatches,minMatchCharLength:l=zt.minMatchCharLength,isCaseSensitive:c=zt.isCaseSensitive,ignoreLocation:u=zt.ignoreLocation}={}){super(t),this._bitapSearch=new FMe(t,{location:n,threshold:r,distance:s,includeMatches:a,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class BMe extends Zd{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const s=[],a=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+a,s.push([r,n-1]);const i=!!s.length;return{isMatch:i,score:i?0:1,indices:s}}}const Z9=[iAt,BMe,cAt,uAt,fAt,dAt,lAt,UMe],Jne=Z9.length,mAt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,pAt="|";function hAt(e,t={}){return e.split(pAt).map(n=>{let r=n.trim().split(mAt).filter(a=>a&&!!a.trim()),s=[];for(let a=0,i=r.length;a<i;a+=1){const l=r[a];let c=!1,u=-1;for(;!c&&++u<Jne;){const d=Z9[u];let m=d.isMultiMatch(l);m&&(s.push(new d(m,t)),c=!0)}if(!c)for(u=-1;++u<Jne;){const d=Z9[u];let m=d.isSingleMatch(l);if(m){s.push(new d(m,t));break}}}return s})}const gAt=new Set([UMe.type,BMe.type]);class yAt{constructor(t,{isCaseSensitive:n=zt.isCaseSensitive,includeMatches:r=zt.includeMatches,minMatchCharLength:s=zt.minMatchCharLength,ignoreLocation:a=zt.ignoreLocation,findAllMatches:i=zt.findAllMatches,location:l=zt.location,threshold:c=zt.threshold,distance:u=zt.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:i,ignoreLocation:a,location:l,threshold:c,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=hAt(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let a=0,i=[],l=0;for(let c=0,u=n.length;c<u;c+=1){const d=n[c];i.length=0,a=0;for(let m=0,p=d.length;m<p;m+=1){const h=d[m],{isMatch:g,indices:y,score:v}=h.search(t);if(g){if(a+=1,l+=v,r){const x=h.constructor.type;gAt.has(x)?i=[...i,...y]:i.push(y)}}else{l=0,a=0,i.length=0;break}}if(a){let m={isMatch:!0,score:l/a};return r&&(m.indices=i),m}}return{isMatch:!1,score:1}}}const J9=[];function vAt(...e){J9.push(...e)}function eO(e,t){for(let n=0,r=J9.length;n<r;n+=1){let s=J9[n];if(s.condition(e,t))return new s(e,t)}return new FMe(e,t)}const sM={AND:"$and",OR:"$or"},tO={PATH:"$path",PATTERN:"$val"},nO=e=>!!(e[sM.AND]||e[sM.OR]),xAt=e=>!!e[tO.PATH],bAt=e=>!gu(e)&&PMe(e)&&!nO(e),ere=e=>({[sM.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function VMe(e,t,{auto:n=!0}={}){const r=s=>{let a=Object.keys(s);const i=xAt(s);if(!i&&a.length>1&&!nO(s))return r(ere(s));if(bAt(s)){const c=i?s[tO.PATH]:a[0],u=i?s[tO.PATTERN]:s[c];if(!Nl(u))throw new Error(zjt(c));const d={keyId:X9(c),pattern:u};return n&&(d.searcher=eO(u,t)),d}let l={children:[],operator:a[0]};return a.forEach(c=>{const u=s[c];gu(u)&&u.forEach(d=>{l.children.push(r(d))})}),l};return nO(e)||(e=ere(e)),r(e)}function _At(e,{ignoreFieldNorm:t=zt.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:a,score:i})=>{const l=s?s.weight:null;r*=Math.pow(i===0&&l?Number.EPSILON:i,(l||1)*(t?1:a))}),n.score=r})}function wAt(e,t){const n=e.matches;t.matches=[],Co(n)&&n.forEach(r=>{if(!Co(r.indices)||!r.indices.length)return;const{indices:s,value:a}=r;let i={indices:s,value:a};r.key&&(i.key=r.key.src),r.idx>-1&&(i.refIndex=r.idx),t.matches.push(i)})}function CAt(e,t){t.score=e.score}function SAt(e,t,{includeMatches:n=zt.includeMatches,includeScore:r=zt.includeScore}={}){const s=[];return n&&s.push(wAt),r&&s.push(CAt),e.map(a=>{const{idx:i}=a,l={item:t[i],refIndex:i};return s.length&&s.forEach(c=>{c(a,l)}),l})}class n0{constructor(t,n={},r){this.options={...zt,...n},this.options.useExtendedSearch,this._keyStore=new Yjt(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof L$))throw new Error(Hjt);this._myIndex=n||DMe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Co(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const a=this._docs[r];t(a,r)&&(this.removeAt(r),r-=1,s-=1,n.push(a))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:a,sortFn:i,ignoreFieldNorm:l}=this.options;let c=Nl(t)?Nl(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return _At(c,{ignoreFieldNorm:l}),a&&c.sort(i),RMe(n)&&n>-1&&(c=c.slice(0,n)),SAt(c,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(t){const n=eO(t,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:a,i,n:l})=>{if(!Co(a))return;const{isMatch:c,score:u,indices:d}=n.searchIn(a);c&&s.push({item:a,idx:i,matches:[{score:u,value:a,norm:l,indices:d}]})}),s}_searchLogical(t){const n=VMe(t,this.options),r=(l,c,u)=>{if(!l.children){const{keyId:m,searcher:p}=l,h=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(c,m),searcher:p});return h&&h.length?[{idx:u,item:c,matches:h}]:[]}const d=[];for(let m=0,p=l.children.length;m<p;m+=1){const h=l.children[m],g=r(h,c,u);if(g.length)d.push(...g);else if(l.operator===sM.AND)return[]}return d},s=this._myIndex.records,a={},i=[];return s.forEach(({$:l,i:c})=>{if(Co(l)){let u=r(n,l,c);u.length&&(a[c]||(a[c]={idx:c,item:l,matches:[]},i.push(a[c])),u.forEach(({matches:d})=>{a[c].matches.push(...d)}))}}),i}_searchObjectList(t){const n=eO(t,this.options),{keys:r,records:s}=this._myIndex,a=[];return s.forEach(({$:i,i:l})=>{if(!Co(i))return;let c=[];r.forEach((u,d)=>{c.push(...this._findMatches({key:u,value:i[d],searcher:n}))}),c.length&&a.push({idx:l,item:i,matches:c})}),a}_findMatches({key:t,value:n,searcher:r}){if(!Co(n))return[];let s=[];if(gu(n))n.forEach(({v:a,i,n:l})=>{if(!Co(a))return;const{isMatch:c,score:u,indices:d}=r.searchIn(a);c&&s.push({score:u,key:t,value:a,idx:i,norm:l,indices:d})});else{const{v:a,n:i}=n,{isMatch:l,score:c,indices:u}=r.searchIn(a);l&&s.push({score:c,key:t,value:a,norm:i,indices:u})}return s}}n0.version="7.0.0";n0.createIndex=DMe;n0.parseIndex=rAt;n0.config=zt;n0.parseQuery=VMe;vAt(yAt);const Mi=(e,t)=>{if(e==null||e===void 0)return null;let n=2;const r=2;return e>1e5&&(n=1),e.toLocaleString(t.locale,{style:t.currency?"currency":"decimal",notation:"compact",currency:t.currency,minimumFractionDigits:n,maximumFractionDigits:r})};function tre(e,t,n){return e==null||t==null?null:`${Mi(e,n)} - ${Mi(t,n)}`}const nre=(e,t,n)=>e==null||e===void 0?null:e.toLocaleString(t.locale,{style:"decimal",notation:"compact",...n});function EAt(e,t=6){if(e===0)return{minimumFractionDigits:0,maximumFractionDigits:1};let n=0,r=2;if(e!==0&&Math.abs(e)<1){let s=0,a=Math.abs(e);for(;a<1&&s<t;)a*=10,s++;n=Math.max(0,s-1),r=s}return{minimumFractionDigits:n,maximumFractionDigits:r}}const rre=(e,t,n)=>{if(e==null||e===void 0)return null;let{minimumFractionDigits:r,maximumFractionDigits:s}=EAt(e,6);return r=n?.minimumFractionDigits??r,s=n?.maximumFractionDigits??s,r>s&&(s=r),e===0?"":e.toLocaleString(t.locale,{style:"percent",...n,minimumFractionDigits:r,maximumFractionDigits:s})},_r={previousClose:e=>Mi(e.d.previousClose,e),open:e=>Mi(e.d.open,e),dayRange:e=>tre(e.d.dayLow,e.d.dayHigh,e),yearRange:e=>tre(e.d.yearLow,e.d.yearHigh,e),eps:e=>Mi(e.d.eps,e),dayHigh:e=>Mi(e.d.dayHigh,e),dayLow:e=>Mi(e.d.dayLow,e),marketCap:e=>Mi(e.d.marketCap,e),pe:e=>{const t=e.d.pe;return t&&t<0?"":nre(t,e,{minimumFractionDigits:2})},dividendYieldTTM:e=>rre(e.d.dividendYieldTTM,e,{minimumFractionDigits:2}),volume:e=>nre(e.d.volume,e),dollarVolume24h:e=>Mi(e.d.dollarVolume24h,e),yearHigh:e=>Mi(e.d.yearHigh,e),yearLow:e=>Mi(e.d.yearLow,e),fundingRate:e=>rre(e.d.fundingRate?+e.d.fundingRate*100:null,e)},MAt={previousClose:_r.previousClose,volume:_r.volume,dayHigh:_r.dayHigh,open:_r.open,dayLow:_r.dayLow,yearHigh:_r.yearHigh,yearLow:_r.yearLow},kAt={previousClose:_r.previousClose,dollarVolume24h:_r.dollarVolume24h,dayHigh:_r.dayHigh,open:_r.open,dayLow:_r.dayLow,yearHigh:_r.yearHigh,yearLow:_r.yearLow,fundingRate:_r.fundingRate},TAt={previousClose:_r.previousClose,yearRange:_r.yearRange,marketCap:_r.marketCap,open:_r.open,pe:_r.pe,dividendYieldTTM:_r.dividendYieldTTM,dayRange:_r.dayRange,volume:_r.volume,eps:_r.eps},sre={DEFAULT:TAt,CRYPTO:kAt,COMMODITY:MAt};function NAt({quote:e,type:t,currency:n,locale:r}){const s=sre[t||"DEFAULT"]??sre.DEFAULT;return Object.entries(s).map(([i,l])=>{const c=l({d:e,locale:r,currency:n});return c==null?null:{value:c,label:i,id:i}}).filter(i=>i!==null)}const jAt=({dt:e,dd:t,id:n})=>{const{isMobileStyle:r}=xe(),{breakpoint:s}=Jm(),a=["md","sm"].includes(s)&&r;return o.jsxs("div",{className:"gap-x-sm py-xs px-sm md:p-sm flex flex-col flex-wrap md:flex-row md:justify-between",children:[o.jsx("dt",{children:o.jsx(D,{variant:a?"tinyRegular":"small",color:"light",children:e})}),o.jsx("dd",{children:o.jsx(D,{variant:a?"tinyRegular":"small",children:t})})]},n)},are=({children:e})=>o.jsx(H,{variant:"raised",children:e}),$Me=I.memo(({entries:e,border:t})=>{const n=(3-e.length%3)%3;return o.jsxs(H,{className:"grid grid-cols-3 gap-px",variant:t?"subtler":"transparent",children:[e.map(({label:r,value:s})=>o.jsx(are,{children:o.jsx(jAt,{dt:r,dd:s,id:r})},r)),Array.from({length:n}).map((r,s)=>o.jsx(are,{},s))]})});$Me.displayName="FinanceGenericTable";const AAt=ot({finance:{defaultMessage:"Finance",id:"Fm3M+yFIbr"},analysis:{defaultMessage:"Analysis",id:"VMIM8/fAKn"},companyOverview:{defaultMessage:"Overview",id:"9uOFF3L8kp"},balanceSheet:{defaultMessage:"Balance Sheet",id:"ak91fL/u+x"},incomeStatement:{defaultMessage:"Income Statement",id:"HFT+V86brH"},keyStats:{defaultMessage:"Key Stats",id:"0FPlBr741P"},cashFlow:{defaultMessage:"Cash Flow",id:"mtw9A2k000"},date:{defaultMessage:"Date",id:"P7PLVjLe4f"},marketSummary:{defaultMessage:"Market Summary",id:"/4s4TMc/a+"},price:{defaultMessage:"Price",id:"b1zuN9KTHI"},symbol:{defaultMessage:"Symbol",id:"3HepmQoEZ+"},value:{defaultMessage:"Value",id:"GufXy52FNI"},percentage:{defaultMessage:"Percentage",id:"HyMpO2UIBG"},currency:{defaultMessage:"Currency",id:"55hdQy4uHO"},open:{defaultMessage:"Open",id:"JfG49wNHKP"},dayHigh:{defaultMessage:"High",id:"AxMhQrcUDC"},dayLow:{defaultMessage:"Low",id:"477I0ggSYe"},marketCap:{defaultMessage:"Market Cap",id:"9Mp3OYduig"},pe:{defaultMessage:"P/E Ratio",id:"fWnwRImZ9W"},volume24h:{defaultMessage:"24H Volume",id:"w7Tm/B63El"},dollarVolume24h:{defaultMessage:"24H Volume",id:"w7Tm/B63El"},volumeChange24h:{defaultMessage:"24H Volume Change",id:"CndnNLlEs+"},fundingRate:{defaultMessage:"Funding Rate",id:"CB1174SKrI"},volume:{defaultMessage:"Volume",id:"y867VsgbzT"},yearHigh:{defaultMessage:"Year High",id:"yh2gWeU/Gz"},yearLow:{defaultMessage:"Year Low",id:"fZpEs5CIaC"},avgVolume:{defaultMessage:"Avg. Volume",id:"MDNqWO8yDU"},dayRange:{defaultMessage:"Day Range",id:"6VJrMyvXcR"},yearRange:{defaultMessage:"52W Range",id:"FkJo44zhH6"},eps:{defaultMessage:"EPS",id:"JncK2a8+G4"},dividendYieldTTM:{defaultMessage:"Dividend Yield",id:"P3CiJnt5+6"},dividendYielTTM:{defaultMessage:"Dividend Yield",id:"P3CiJnt5+6"},previousClose:{defaultMessage:"Prev Close",id:"0jUP9zUh5z"},priceComparison:{defaultMessage:"Price Comparison",id:"MFuchsfwj7"},stockPerformance:{defaultMessage:"Stock Performance",id:"qEQxp1ikMt"},companyFinancials:{defaultMessage:"{company} Financials",id:"gWNvqjwoWh"},"13FFilings":{defaultMessage:"13F Filings",id:"XzGhyAgjmS"},pricePerformance:{defaultMessage:"Price & Performance",id:"nCv3Ti2cp5"},peers:{defaultMessage:"Peers",id:"JjgJTAa2wL"},transcriptLogin:{defaultMessage:"Login to view transcripts from {quartr}",id:"xY8csKCosL"},newsAndMarketInsights:{defaultMessage:"Latest News",id:"BlFeZAX10O"},recentTranscripts:{defaultMessage:"Recent Transcripts",id:"tiSu9ozyS4"},earnings:{defaultMessage:"Earnings",id:"14sEVuq+Kb"},related:{defaultMessage:"Related",id:"KQsZBWlEw/"},topMovers:{defaultMessage:"Top Movers",id:"e+JmwAUicC"}}),IAt=(e,t)=>{if(!t)return"";const n=AAt[t];return n?e(n):""},WMe=I.memo(({quote:e,type:t})=>{const{$t:n,locale:r}=Z(),s=f.useMemo(()=>e?NAt({quote:e,type:t,currency:e?.currency||void 0,locale:r}).map(i=>({...i,label:IAt(n,i.label),value:i.value})):[],[e,t,n,r]);return Hm("financial-profile",{skip:!s.length}),o.jsx($Me,{entries:s})});WMe.displayName="FinanceFinancialProfile";const HMe=I.memo(({quote:e,type:t})=>e?o.jsx(sn,{className:"px-sm overflow-hidden",testId:"financial-profile-box",children:o.jsx(WMe,{quote:e,type:t})}):null);HMe.displayName="FinanceFinancialProfileCard";var qA,ore;function RAt(){if(ore)return qA;ore=1,qA=e;function e(r,s,a){r instanceof RegExp&&(r=t(r,a)),s instanceof RegExp&&(s=t(s,a));var i=n(r,s,a);return i&&{start:i[0],end:i[1],pre:a.slice(0,i[0]),body:a.slice(i[0]+r.length,i[1]),post:a.slice(i[1]+s.length)}}function t(r,s){var a=s.match(r);return a?a[0]:null}e.range=n;function n(r,s,a){var i,l,c,u,d,m=a.indexOf(r),p=a.indexOf(s,m+1),h=m;if(m>=0&&p>0){for(i=[],c=a.length;h>=0&&!d;)h==m?(i.push(h),m=a.indexOf(r,h+1)):i.length==1?d=[i.pop(),p]:(l=i.pop(),l<c&&(c=l,u=p),p=a.indexOf(s,h+1)),h=m<p&&m>=0?m:p;i.length&&(d=[c,u])}return d}return qA}var KA,ire;function PAt(){if(ire)return KA;ire=1,KA=e;function e(r,s,a){r instanceof RegExp&&(r=t(r,a)),s instanceof RegExp&&(s=t(s,a));var i=n(r,s,a);return i&&{start:i[0],end:i[1],pre:a.slice(0,i[0]),body:a.slice(i[0]+r.length,i[1]),post:a.slice(i[1]+s.length)}}function t(r,s){var a=s.match(r);return a?a[0]:null}e.range=n;function n(r,s,a){var i,l,c,u,d,m=a.indexOf(r),p=a.indexOf(s,m+1),h=m;if(m>=0&&p>0){if(r===s)return[m,p];for(i=[],c=a.length;h>=0&&!d;)h==m?(i.push(h),m=a.indexOf(r,h+1)):i.length==1?d=[i.pop(),p]:(l=i.pop(),l<c&&(c=l,u=p),p=a.indexOf(s,h+1)),h=m<p&&m>=0?m:p;i.length&&(d=[c,u])}return d}return KA}var YA,lre;function OAt(){if(lre)return YA;lre=1;var e=PAt();YA=t;function t(s,a,i){var l=s;return n(s,a).reduce(function(c,u){return c.replace(u.functionIdentifier+"("+u.matches.body+")",r(u.matches.body,u.functionIdentifier,i,l,a))},s)}function n(s,a){var i=[],l=typeof a=="string"?new RegExp("\\b("+a+")\\("):a;do{var c=l.exec(s);if(!c)return i;if(c[1]===void 0)throw new Error("Missing the first couple of parenthesis to get the function identifier in "+a);var u=c[1],d=c.index,m=e("(",")",s.substring(d));if(!m||m.start!==c[0].length-1)throw new SyntaxError(u+"(): missing closing ')' in the value '"+s+"'");i.push({matches:m,functionIdentifier:u}),s=m.post}while(l.test(s));return i}function r(s,a,i,l,c){return i(t(s,c,i),a,l)}return YA}var QA,cre;function LAt(){if(cre)return QA;cre=1;var e=function(t){this.value=t};return e.math={isDegree:!0,acos:function(t){return e.math.isDegree?180/Math.PI*Math.acos(t):Math.acos(t)},add:function(t,n){return t+n},asin:function(t){return e.math.isDegree?180/Math.PI*Math.asin(t):Math.asin(t)},atan:function(t){return e.math.isDegree?180/Math.PI*Math.atan(t):Math.atan(t)},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:function(t){return Math.log(t+Math.sqrt(t*t+1))},atanh:function(t){return Math.log((1+t)/(1-t))},C:function(t,n){var r=1,s=t-n,a=n;a<s&&(a=s,s=n);for(var i=a+1;i<=t;i++)r*=i;return r/e.math.fact(s)},changeSign:function(t){return-t},cos:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.cos(t)},cosh:function(t){return(Math.pow(Math.E,t)+Math.pow(Math.E,-1*t))/2},div:function(t,n){return t/n},fact:function(t){if(t%1!==0)return"NaN";for(var n=1,r=2;r<=t;r++)n*=r;return n},inverse:function(t){return 1/t},log:function(t){return Math.log(t)/Math.log(10)},mod:function(t,n){return t%n},mul:function(t,n){return t*n},P:function(t,n){for(var r=1,s=Math.floor(t)-Math.floor(n)+1;s<=Math.floor(t);s++)r*=s;return r},Pi:function(t,n,r){for(var s=1,a=t;a<=n;a++)s*=Number(r.postfixEval({n:a}));return s},pow10x:function(t){for(var n=1;t--;)n*=10;return n},sigma:function(t,n,r){for(var s=0,a=t;a<=n;a++)s+=Number(r.postfixEval({n:a}));return s},sin:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.sin(t)},sinh:function(t){return(Math.pow(Math.E,t)-Math.pow(Math.E,-1*t))/2},sub:function(t,n){return t-n},tan:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.tan(t)},tanh:function(t){return e.sinha(t)/e.cosha(t)},toRadian:function(t){return t*Math.PI/180},and:function(t,n){return t&n}},e.Exception=function(t){this.message=t},QA=e,QA}var XA,ure;function DAt(){if(ure)return XA;ure=1;var e=LAt();function t(b,_){for(var w=0;w<b.length;w++)b[w]+=_;return b}for(var n=[{token:"sin",show:"sin",type:0,value:e.math.sin},{token:"cos",show:"cos",type:0,value:e.math.cos},{token:"tan",show:"tan",type:0,value:e.math.tan},{token:"pi",show:"&pi;",type:3,value:"PI"},{token:"(",show:"(",type:4,value:"("},{token:")",show:")",type:5,value:")"},{token:"P",show:"P",type:10,value:e.math.P},{token:"C",show:"C",type:10,value:e.math.C},{token:" ",show:" ",type:14,value:" ".anchor},{token:"asin",show:"asin",type:0,value:e.math.asin},{token:"acos",show:"acos",type:0,value:e.math.acos},{token:"atan",show:"atan",type:0,value:e.math.atan},{token:"7",show:"7",type:1,value:"7"},{token:"8",show:"8",type:1,value:"8"},{token:"9",show:"9",type:1,value:"9"},{token:"int",show:"Int",type:0,value:Math.floor},{token:"cosh",show:"cosh",type:0,value:e.math.cosh},{token:"acosh",show:"acosh",type:0,value:e.math.acosh},{token:"ln",show:" ln",type:0,value:Math.log},{token:"^",show:"^",type:10,value:Math.pow},{token:"root",show:"root",type:0,value:Math.sqrt},{token:"4",show:"4",type:1,value:"4"},{token:"5",show:"5",type:1,value:"5"},{token:"6",show:"6",type:1,value:"6"},{token:"/",show:"&divide;",type:2,value:e.math.div},{token:"!",show:"!",type:7,value:e.math.fact},{token:"tanh",show:"tanh",type:0,value:e.math.tanh},{token:"atanh",show:"atanh",type:0,value:e.math.atanh},{token:"Mod",show:" Mod ",type:2,value:e.math.mod},{token:"1",show:"1",type:1,value:"1"},{token:"2",show:"2",type:1,value:"2"},{token:"3",show:"3",type:1,value:"3"},{token:"*",show:"&times;",type:2,value:e.math.mul},{token:"sinh",show:"sinh",type:0,value:e.math.sinh},{token:"asinh",show:"asinh",type:0,value:e.math.asinh},{token:"e",show:"e",type:3,value:"E"},{token:"log",show:" log",type:0,value:e.math.log},{token:"0",show:"0",type:1,value:"0"},{token:".",show:".",type:6,value:"."},{token:"+",show:"+",type:9,value:e.math.add},{token:"-",show:"-",type:9,value:e.math.sub},{token:",",show:",",type:11,value:","},{token:"Sigma",show:"&Sigma;",type:12,value:e.math.sigma},{token:"n",show:"n",type:13,value:"n"},{token:"Pi",show:"&Pi;",type:12,value:e.math.Pi},{token:"pow",show:"pow",type:8,value:Math.pow,numberOfArguments:2},{token:"&",show:"&",type:9,value:e.math.and}],r={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0,14:-1,15:11},s=0;s<n.length;s++)n[s].precedence=r[n[s].type];var a={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0,14:!0,15:!0},i={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0,15:!0},l={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0,15:!0},c={},u={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0,15:!0},d={1:!0},m=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"," ","&"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];function p(b,_,w,C){for(var S=0;S<C;S++)if(b[w+S]!==_[S])return!1;return!0}e.tokenTypes={FUNCTION_WITH_ONE_ARG:0,NUMBER:1,BINARY_OPERATOR_HIGH_PRECENDENCE:2,CONSTANT:3,OPENING_PARENTHESIS:4,CLOSING_PARENTHESIS:5,DECIMAL:6,POSTFIX_FUNCTION_WITH_ONE_ARG:7,FUNCTION_WITH_N_ARGS:8,BINARY_OPERATOR_LOW_PRECENDENCE:9,BINARY_OPERATOR_PERMUTATION:10,COMMA:11,EVALUATED_FUNCTION:12,EVALUATED_FUNCTION_PARAMETER:13,SPACE:14},e.addToken=function(b){for(var _=0;_<b.length;_++){var w=b[_].token.length,C=-1;b[_].type===e.tokenTypes.FUNCTION_WITH_N_ARGS&&b[_].numberOfArguments===void 0&&(b[_].numberOfArguments=2),m[w]=m[w]||[];for(var S=0;S<m[w].length;S++)if(b[_].token===m[w][S]){C=h(m[w][S],n);break}C===-1?(n.push(b[_]),b[_].precedence=r[b[_].type],m.length<=b[_].token.length&&(m[b[_].token.length]=[]),m[b[_].token.length].push(b[_].token)):(n[C]=b[_],b[_].precedence=r[b[_].type])}};function h(b,_){for(var w=0;w<_.length;w++)if(_[w].token===b)return w;return-1}function g(b){for(var _=[],w=b.length,C,S,E,M=0;M<w;M++)if(!(M<w-1&&b[M]===" "&&b[M+1]===" ")){for(C="",S=b.length-M>m.length-2?m.length-1:b.length-M;S>0;S--)if(m[S]!==void 0)for(E=0;E<m[S].length;E++)p(b,m[S][E],M,S)&&(C=m[S][E],E=m[S].length,S=0);if(M+=C.length-1,C==="")throw new e.Exception("Can't understand after "+b.slice(M));_.push(n[h(C,n)])}return _}var y={value:e.math.changeSign,type:0,pre:21,show:"-"},v={value:")",show:")",type:5,pre:0},x={value:"(",type:4,pre:0,show:"("};return e.lex=function(b,_){var w=[x],C=[],S=b,E=a,M=0,k=c,A="",R;typeof _<"u"&&e.addToken(_);var O={},L=g(S);for(R=0;R<L.length;R++){var P=L[R];if(P.type===14){if(R>0&&R<L.length-1&&L[R+1].type===1&&(L[R-1].type===1||L[R-1].type===6))throw new e.Exception("Unexpected Space");continue}var N=P.token,T=P.type,j=P.value,F=P.precedence,U=P.show,V=w[w.length-1],$;for($=C.length;$--&&C[$]===0;)if([0,2,3,4,5,9,11,12,13].indexOf(T)!==-1){if(E[T]!==!0)throw new e.Exception(N+" is not allowed after "+A);w.push(v),E=i,k=u,C.pop()}if(E[T]!==!0)throw new e.Exception(N+" is not allowed after "+A);if(k[T]===!0&&(T=2,j=e.math.mul,U="&times;",F=3,R=R-1),O={value:j,type:T,pre:F,show:U,numberOfArguments:P.numberOfArguments},T===0)E=a,k=c,t(C,2),w.push(O),L[R+1].type!==4&&(w.push(x),C.push(2));else if(T===1)V.type===1?(V.value+=j,t(C,1)):w.push(O),E=i,k=l;else if(T===2)E=a,k=c,t(C,2),w.push(O);else if(T===3)w.push(O),E=i,k=u;else if(T===4)t(C,1),M++,E=a,k=c,w.push(O);else if(T===5){if(!M)throw new e.Exception("Closing parenthesis are more than opening one, wait What!!!");M--,E=i,k=u,w.push(O),t(C,1)}else if(T===6){if(V.hasDec)throw new e.Exception("Two decimals are not allowed in one number");V.type!==1&&(V={value:0,type:1,pre:0},w.push(V)),E=d,t(C,1),k=c,V.value+=j,V.hasDec=!0}else T===7&&(E=i,k=u,t(C,1),w.push(O));T===8?(E=a,k=c,t(C,P.numberOfArguments+2),w.push(O),L[R+1].type!==4&&(w.push(x),C.push(P.numberOfArguments+2))):T===9?(V.type===9?V.value===e.math.add?(V.value=j,V.show=U,t(C,1)):V.value===e.math.sub&&U==="-"&&(V.value=e.math.add,V.show="+",t(C,1)):V.type!==5&&V.type!==7&&V.type!==1&&V.type!==3&&V.type!==13?N==="-"&&(E=a,k=c,t(C,2).push(2),w.push(y),w.push(x)):(w.push(O),t(C,2)),E=a,k=c):T===10?(E=a,k=c,t(C,2),w.push(O)):T===11?(E=a,k=c,w.push(O)):T===12?(E=a,k=c,t(C,6),w.push(O),L[R+1].type!==4&&(w.push(x),C.push(6))):T===13&&(E=i,k=u,w.push(O)),t(C,-1),A=N}for($=C.length;$--;)w.push(v);if(E[5]!==!0)throw new e.Exception("complete the expression");for(;M--;)w.push(v);return w.push(v),new e(w)},XA=e,XA}var ZA,dre;function FAt(){if(dre)return ZA;dre=1;var e=DAt();return e.prototype.toPostfix=function(){for(var t=[],n,r,s,a,i,l=[{value:"(",type:4,pre:0}],c=this.value,u=1;u<c.length;u++)if(c[u].type===1||c[u].type===3||c[u].type===13)c[u].type===1&&(c[u].value=Number(c[u].value)),t.push(c[u]);else if(c[u].type===4)l.push(c[u]);else if(c[u].type===5)for(;(r=l.pop()).type!==4;)t.push(r);else if(c[u].type===11){for(;(r=l.pop()).type!==4;)t.push(r);l.push(r)}else{n=c[u],a=n.pre,i=l[l.length-1],s=i.pre;var d=i.value=="Math.pow"&&n.value=="Math.pow";if(a>s)l.push(n);else{for(;s>=a&&!d||d&&a<s;)r=l.pop(),i=l[l.length-1],t.push(r),s=i.pre,d=n.value=="Math.pow"&&i.value=="Math.pow";l.push(n)}}return new e(t)},ZA=e,ZA}var JA,fre;function UAt(){if(fre)return JA;fre=1;var e=FAt();return e.prototype.postfixEval=function(t){t=t||{},t.PI=Math.PI,t.E=Math.E;for(var n=[],r,s,a,i=this.value,l=typeof t.n<"u",c=0;c<i.length;c++)if(i[c].type===1)n.push({value:i[c].value,type:1});else if(i[c].type===3)n.push({value:t[i[c].value],type:1});else if(i[c].type===0)typeof n[n.length-1].type>"u"?n[n.length-1].value.push(i[c]):n[n.length-1].value=i[c].value(n[n.length-1].value);else if(i[c].type===7)typeof n[n.length-1].type>"u"?n[n.length-1].value.push(i[c]):n[n.length-1].value=i[c].value(n[n.length-1].value);else if(i[c].type===8){for(var u=[],d=0;d<i[c].numberOfArguments;d++)u.push(n.pop().value);n.push({type:1,value:i[c].value.apply(i[c],u.reverse())})}else i[c].type===10?(r=n.pop(),s=n.pop(),typeof s.type>"u"?(s.value=s.concat(r),s.value.push(i[c]),n.push(s)):typeof r.type>"u"?(r.unshift(s),r.push(i[c]),n.push(r)):n.push({type:1,value:i[c].value(s.value,r.value)})):i[c].type===2||i[c].type===9?(r=n.pop(),s=n.pop(),typeof s.type>"u"?(s=s.concat(r),s.push(i[c]),n.push(s)):typeof r.type>"u"?(r.unshift(s),r.push(i[c]),n.push(r)):n.push({type:1,value:i[c].value(s.value,r.value)})):i[c].type===12?(r=n.pop(),typeof r.type<"u"&&(r=[r]),s=n.pop(),a=n.pop(),n.push({type:1,value:i[c].value(a.value,s.value,new e(r))})):i[c].type===13&&(l?n.push({value:t[i[c].value],type:3}):n.push([i[c]]));if(n.length>1)throw new e.Exception("Uncaught Syntax error");return n[0].value>1e15?"Infinity":parseFloat(n[0].value.toFixed(15))},e.eval=function(t,n,r){return typeof n>"u"?this.lex(t).toPostfix().postfixEval():typeof r>"u"?typeof n.length<"u"?this.lex(t,n).toPostfix().postfixEval():this.lex(t).toPostfix().postfixEval(n):this.lex(t,n).toPostfix().postfixEval(r)},JA=e,JA}var e6,mre;function BAt(){if(mre)return e6;mre=1;var e=UAt();return e.prototype.formulaEval=function(){for(var t,n,r,s=[],a=this.value,i=0;i<a.length;i++)a[i].type===1||a[i].type===3?s.push({value:a[i].type===3?a[i].show:a[i].value,type:1}):a[i].type===13?s.push({value:a[i].show,type:1}):a[i].type===0?s[s.length-1]={value:a[i].show+(a[i].show!="-"?"(":"")+s[s.length-1].value+(a[i].show!="-"?")":""),type:0}:a[i].type===7?s[s.length-1]={value:(s[s.length-1].type!=1?"(":"")+s[s.length-1].value+(s[s.length-1].type!=1?")":"")+a[i].show,type:7}:a[i].type===10?(t=s.pop(),n=s.pop(),a[i].show==="P"||a[i].show==="C"?s.push({value:"<sup>"+n.value+"</sup>"+a[i].show+"<sub>"+t.value+"</sub>",type:10}):s.push({value:(n.type!=1?"(":"")+n.value+(n.type!=1?")":"")+"<sup>"+t.value+"</sup>",type:1})):a[i].type===2||a[i].type===9?(t=s.pop(),n=s.pop(),s.push({value:(n.type!=1?"(":"")+n.value+(n.type!=1?")":"")+a[i].show+(t.type!=1?"(":"")+t.value+(t.type!=1?")":""),type:a[i].type})):a[i].type===12&&(t=s.pop(),n=s.pop(),r=s.pop(),s.push({value:a[i].show+"("+r.value+","+n.value+","+t.value+")",type:12}));return s[0].value},e6=e,e6}var t6,pre;function VAt(){if(pre)return t6;pre=1;var e=RAt(),t=OAt(),n=BAt(),r=100,s=/(\+|\-|\*|\\|[^a-z]|)(\s*)(\()/g,a;t6=i;function i(c,u){a=0,u=Math.pow(10,u===void 0?5:u),c=c.replace(/\n+/g," ");function d(p,h,g){if(a++>r)throw a=0,new Error("Call stack overflow for "+g);if(p==="")throw new Error(h+"(): '"+g+"' must contain a non-whitespace string");p=m(p,g);var y=l(p);if(y.length>1||p.indexOf("var(")>-1)return h+"("+p+")";var v=y[0]||"";v==="%"&&(p=p.replace(/\b[0-9\.]+%/g,function(_){return parseFloat(_.slice(0,-1))*.01}));var x=p.replace(new RegExp(v,"gi"),""),b;try{b=n.eval(x)}catch{return h+"("+p+")"}return v==="%"&&(b*=100),(h.length||v==="%")&&(b=Math.round(b*u)/u),b+=v,b}function m(p,h){p=p.replace(/((?:\-[a-z]+\-)?calc)/g,"");for(var g="",y=p,v;v=s.exec(y);){v[0].index>0&&(g+=y.substring(0,v[0].index));var x=e("(",")",y.substring([0].index));if(x.body==="")throw new Error("'"+p+"' must contain a non-whitespace string");var b=d(x.body,"",h);g+=x.pre+b,y=x.post}return g+y}return t(c,/((?:\-[a-z]+\-)?calc)\(/,d)}function l(c){for(var u=[],d=[],m=/[\.0-9]([%a-z]+)/gi,p=m.exec(c);p;)!p||!p[1]||(d.indexOf(p[1].toLowerCase())===-1&&(u.push(p[1]),d.push(p[1].toLowerCase())),p=m.exec(c));return u}return t6}var $At=VAt();const n6=Bo($At);var r6,hre;function WAt(){if(hre)return r6;hre=1;var e=typeof ko=="object"&&ko&&ko.Object===Object&&ko;return r6=e,r6}var s6,gre;function D$(){if(gre)return s6;gre=1;var e=WAt(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return s6=n,s6}var a6,yre;function zMe(){if(yre)return a6;yre=1;var e=D$(),t=e.Symbol;return a6=t,a6}var o6,vre;function HAt(){if(vre)return o6;vre=1;var e=zMe(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,s=e?e.toStringTag:void 0;function a(i){var l=n.call(i,s),c=i[s];try{i[s]=void 0;var u=!0}catch{}var d=r.call(i);return u&&(l?i[s]=c:delete i[s]),d}return o6=a,o6}var i6,xre;function zAt(){if(xre)return i6;xre=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return i6=n,i6}var l6,bre;function GAt(){if(bre)return l6;bre=1;var e=zMe(),t=HAt(),n=zAt(),r="[object Null]",s="[object Undefined]",a=e?e.toStringTag:void 0;function i(l){return l==null?l===void 0?s:r:a&&a in Object(l)?t(l):n(l)}return l6=i,l6}var c6,_re;function GMe(){if(_re)return c6;_re=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return c6=e,c6}var u6,wre;function qAt(){if(wre)return u6;wre=1;var e=GAt(),t=GMe(),n="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",a="[object Proxy]";function i(l){if(!t(l))return!1;var c=e(l);return c==r||c==s||c==n||c==a}return u6=i,u6}var d6,Cre;function KAt(){if(Cre)return d6;Cre=1;var e=D$(),t=e["__core-js_shared__"];return d6=t,d6}var f6,Sre;function YAt(){if(Sre)return f6;Sre=1;var e=KAt(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return f6=n,f6}var m6,Ere;function QAt(){if(Ere)return m6;Ere=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return m6=n,m6}var p6,Mre;function XAt(){if(Mre)return p6;Mre=1;var e=qAt(),t=YAt(),n=GMe(),r=QAt(),s=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,i=Function.prototype,l=Object.prototype,c=i.toString,u=l.hasOwnProperty,d=RegExp("^"+c.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(p){if(!n(p)||t(p))return!1;var h=e(p)?d:a;return h.test(r(p))}return p6=m,p6}var h6,kre;function ZAt(){if(kre)return h6;kre=1;function e(t,n){return t?.[n]}return h6=e,h6}var g6,Tre;function qMe(){if(Tre)return g6;Tre=1;var e=XAt(),t=ZAt();function n(r,s){var a=t(r,s);return e(a)?a:void 0}return g6=n,g6}var y6,Nre;function Zk(){if(Nre)return y6;Nre=1;var e=qMe(),t=e(Object,"create");return y6=t,y6}var v6,jre;function JAt(){if(jre)return v6;jre=1;var e=Zk();function t(){this.__data__=e?e(null):{},this.size=0}return v6=t,v6}var x6,Are;function e6t(){if(Are)return x6;Are=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return x6=e,x6}var b6,Ire;function t6t(){if(Ire)return b6;Ire=1;var e=Zk(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function s(a){var i=this.__data__;if(e){var l=i[a];return l===t?void 0:l}return r.call(i,a)?i[a]:void 0}return b6=s,b6}var _6,Rre;function n6t(){if(Rre)return _6;Rre=1;var e=Zk(),t=Object.prototype,n=t.hasOwnProperty;function r(s){var a=this.__data__;return e?a[s]!==void 0:n.call(a,s)}return _6=r,_6}var w6,Pre;function r6t(){if(Pre)return w6;Pre=1;var e=Zk(),t="__lodash_hash_undefined__";function n(r,s){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&s===void 0?t:s,this}return w6=n,w6}var C6,Ore;function s6t(){if(Ore)return C6;Ore=1;var e=JAt(),t=e6t(),n=t6t(),r=n6t(),s=r6t();function a(i){var l=-1,c=i==null?0:i.length;for(this.clear();++l<c;){var u=i[l];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,C6=a,C6}var S6,Lre;function a6t(){if(Lre)return S6;Lre=1;function e(){this.__data__=[],this.size=0}return S6=e,S6}var E6,Dre;function o6t(){if(Dre)return E6;Dre=1;function e(t,n){return t===n||t!==t&&n!==n}return E6=e,E6}var M6,Fre;function Jk(){if(Fre)return M6;Fre=1;var e=o6t();function t(n,r){for(var s=n.length;s--;)if(e(n[s][0],r))return s;return-1}return M6=t,M6}var k6,Ure;function i6t(){if(Ure)return k6;Ure=1;var e=Jk(),t=Array.prototype,n=t.splice;function r(s){var a=this.__data__,i=e(a,s);if(i<0)return!1;var l=a.length-1;return i==l?a.pop():n.call(a,i,1),--this.size,!0}return k6=r,k6}var T6,Bre;function l6t(){if(Bre)return T6;Bre=1;var e=Jk();function t(n){var r=this.__data__,s=e(r,n);return s<0?void 0:r[s][1]}return T6=t,T6}var N6,Vre;function c6t(){if(Vre)return N6;Vre=1;var e=Jk();function t(n){return e(this.__data__,n)>-1}return N6=t,N6}var j6,$re;function u6t(){if($re)return j6;$re=1;var e=Jk();function t(n,r){var s=this.__data__,a=e(s,n);return a<0?(++this.size,s.push([n,r])):s[a][1]=r,this}return j6=t,j6}var A6,Wre;function d6t(){if(Wre)return A6;Wre=1;var e=a6t(),t=i6t(),n=l6t(),r=c6t(),s=u6t();function a(i){var l=-1,c=i==null?0:i.length;for(this.clear();++l<c;){var u=i[l];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,A6=a,A6}var I6,Hre;function f6t(){if(Hre)return I6;Hre=1;var e=qMe(),t=D$(),n=e(t,"Map");return I6=n,I6}var R6,zre;function m6t(){if(zre)return R6;zre=1;var e=s6t(),t=d6t(),n=f6t();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return R6=r,R6}var P6,Gre;function p6t(){if(Gre)return P6;Gre=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return P6=e,P6}var O6,qre;function eT(){if(qre)return O6;qre=1;var e=p6t();function t(n,r){var s=n.__data__;return e(r)?s[typeof r=="string"?"string":"hash"]:s.map}return O6=t,O6}var L6,Kre;function h6t(){if(Kre)return L6;Kre=1;var e=eT();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return L6=t,L6}var D6,Yre;function g6t(){if(Yre)return D6;Yre=1;var e=eT();function t(n){return e(this,n).get(n)}return D6=t,D6}var F6,Qre;function y6t(){if(Qre)return F6;Qre=1;var e=eT();function t(n){return e(this,n).has(n)}return F6=t,F6}var U6,Xre;function v6t(){if(Xre)return U6;Xre=1;var e=eT();function t(n,r){var s=e(this,n),a=s.size;return s.set(n,r),this.size+=s.size==a?0:1,this}return U6=t,U6}var B6,Zre;function x6t(){if(Zre)return B6;Zre=1;var e=m6t(),t=h6t(),n=g6t(),r=y6t(),s=v6t();function a(i){var l=-1,c=i==null?0:i.length;for(this.clear();++l<c;){var u=i[l];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,B6=a,B6}var V6,Jre;function b6t(){if(Jre)return V6;Jre=1;var e=x6t(),t="Expected a function";function n(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var a=function(){var i=arguments,l=s?s.apply(this,i):i[0],c=a.cache;if(c.has(l))return c.get(l);var u=r.apply(this,i);return a.cache=c.set(l,u)||c,u};return a.cache=new(n.Cache||e),a}return n.Cache=e,V6=n,V6}var _6t=b6t();const w6t=Bo(_6t);var ese="__react_svg_text_measurement_id";function C6t(e,t){try{var n=document.getElementById(ese);if(!n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("aria-hidden","true"),r.style.width="0",r.style.height="0",r.style.position="absolute",r.style.top="-100%",r.style.left="-100%",n=document.createElementNS("http://www.w3.org/2000/svg","text"),n.setAttribute("id",ese),r.appendChild(n),document.body.appendChild(r)}return Object.assign(n.style,t),n.textContent=e,n.getComputedTextLength()}catch{return null}}const rO=w6t(C6t,function(e,t){return e+"_"+JSON.stringify(t)});var S6t=["verticalAnchor","scaleToFit","angle","width","lineHeight","capHeight","children","style"];function E6t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function $6(e){return typeof e=="number"}function tse(e){return typeof e=="number"&&Number.isFinite(e)||typeof e=="string"}function KMe(e){var t=e.verticalAnchor,n=t===void 0?"end":t,r=e.scaleToFit,s=r===void 0?!1:r,a=e.angle,i=e.width,l=e.lineHeight,c=l===void 0?"1em":l,u=e.capHeight,d=u===void 0?"0.71em":u,m=e.children,p=e.style,h=E6t(e,S6t),g=h.x,y=g===void 0?0:g,v=h.y,x=v===void 0?0:v,b=!tse(y)||!tse(x),_=f.useMemo(function(){var k=m==null?[]:m.toString().split(/(?:(?!\u00A0+)\s+)/);return{wordsWithWidth:k.map(function(A){return{word:A,wordWidth:rO(A,p)||0}}),spaceWidth:rO("",p)||0}},[m,p]),w=_.wordsWithWidth,C=_.spaceWidth,S=f.useMemo(function(){return b?[]:i||s?w.reduce(function(k,A){var R=A.word,O=A.wordWidth,L=k[k.length-1];if(L&&(i==null||s||(L.width||0)+O+C<i))L.words.push(R),L.width=L.width||0,L.width+=O+C;else{var P={words:[R],width:O};k.push(P)}return k},[]):[{words:m==null?[]:m.toString().split(/(?:(?!\u00A0+)\s+)/)}]},[b,i,s,m,w,C]),E=f.useMemo(function(){var k=b?"":n6(n==="start"?"calc("+d+")":n==="middle"?"calc("+(S.length-1)/2+" * -"+c+" + ("+d+" / 2))":"calc("+(S.length-1)+" * -"+c+")");return k},[b,n,d,S.length,c]),M=f.useMemo(function(){var k=[];if(b)return"";if($6(y)&&$6(x)&&$6(i)&&s&&S.length>0){var A=S[0].width||1,R=s==="shrink-only"?Math.min(i/A,1):i/A,O=R,L=y-R*y,P=x-O*x;k.push("matrix("+R+", 0, 0, "+O+", "+L+", "+P+")")}return a&&k.push("rotate("+a+", "+y+", "+x+")"),k.length>0?k.join(" "):""},[b,y,x,i,s,S,a]);return{wordsByLines:S,startDy:E,transform:M}}var M6t=["dx","dy","textAnchor","innerRef","innerTextRef","verticalAnchor","angle","lineHeight","scaleToFit","capHeight","width"];function sO(){return sO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sO.apply(null,arguments)}function k6t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var T6t={overflow:"visible"};function tT(e){var t=e.dx,n=t===void 0?0:t,r=e.dy,s=r===void 0?0:r,a=e.textAnchor,i=a===void 0?"start":a,l=e.innerRef,c=e.innerTextRef;e.verticalAnchor,e.angle;var u=e.lineHeight,d=u===void 0?"1em":u;e.scaleToFit,e.capHeight,e.width;var m=k6t(e,M6t),p=m.x,h=p===void 0?0:p,g=m.fontSize,y=KMe(e),v=y.wordsByLines,x=y.startDy,b=y.transform;return I.createElement("svg",{ref:l,x:n,y:s,fontSize:g,style:T6t},v.length>0?I.createElement("text",sO({ref:c,transform:b},m,{textAnchor:i}),v.map(function(_,w){return I.createElement("tspan",{key:w,x:h,dy:w===0?x:d},_.words.join(" "))})):null)}const N6t=Object.freeze(Object.defineProperty({__proto__:null,Text:tT,getStringWidth:rO,useText:KMe},Symbol.toStringTag,{value:"Module"}));var Ca={top:"top",left:"left",bottom:"bottom"};function j6t(e){var t=e.labelOffset,n=e.labelProps,r=e.orientation,s=e.range,a=e.tickLabelFontSize,i=e.tickLength,l=r===Ca.left||r===Ca.top?-1:1,c,u,d;if(r===Ca.top||r===Ca.bottom){var m=r===Ca.bottom&&typeof n.fontSize=="number"?n.fontSize:0;c=(Number(s[0])+Number(s[s.length-1]))/2,u=l*(i+t+a+m)}else c=l*((Number(s[0])+Number(s[s.length-1]))/2),u=-(i+t),d="rotate("+l*90+")";return{x:c,y:u,transform:d}}function gx(){return gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gx.apply(null,arguments)}function A6t(e){var t=e.hideTicks,n=e.horizontal,r=e.orientation,s=e.tickClassName,a=e.tickComponent,i=e.tickLabelProps,l=e.tickStroke,c=l===void 0?"#222":l,u=e.tickTransform,d=e.ticks,m=e.strokeWidth,p=e.tickLineProps;return d.map(function(h){var g,y=h.value,v=h.index,x=h.from,b=h.to,_=h.formattedValue,w=(g=i[v])!=null?g:{},C=Math.max(10,typeof w.fontSize=="number"&&w.fontSize||0),S=b.y+(n&&r!==Ca.top?C:0);return I.createElement(ca,{key:"visx-tick-"+y+"-"+v,className:B("visx-axis-tick",s),transform:u},!t&&I.createElement(ak,gx({from:x,to:b,stroke:c,strokeWidth:m,strokeLinecap:"square"},p)),a?a(gx({},w,{x:b.x,y:S,formattedValue:_})):I.createElement(tT,gx({x:b.x,y:S},w),_))})}function yx(){return yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yx.apply(null,arguments)}var nse={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"#222"};function I6t(e){var t=e.axisFromPoint,n=e.axisLineClassName,r=e.axisToPoint,s=e.hideAxisLine,a=e.hideTicks,i=e.horizontal,l=e.label,c=l===void 0?"":l,u=e.labelClassName,d=e.labelOffset,m=d===void 0?14:d,p=e.labelProps,h=e.orientation,g=h===void 0?Ca.bottom:h,y=e.scale,v=e.stroke,x=v===void 0?"#222":v,b=e.strokeDasharray,_=e.strokeWidth,w=_===void 0?1:_,C=e.tickClassName,S=e.tickComponent,E=e.tickLineProps,M=e.tickLabelProps,k=e.tickLength,A=k===void 0?8:k,R=e.tickStroke,O=R===void 0?"#222":R,L=e.tickTransform,P=e.ticks,N=e.ticksComponent,T=N===void 0?A6t:N,j=yx({},nse,p),F=yx({},nse,typeof M=="object"?M:null),U=P.map(function($){var z=$.value,Q=$.index;return typeof M=="function"?M(z,Q,P):F}),V=Math.max.apply(Math,[10].concat(U.map(function($){return typeof $.fontSize=="number"?$.fontSize:0})));return I.createElement(I.Fragment,null,T({hideTicks:a,horizontal:i,orientation:g,scale:y,tickClassName:C,tickComponent:S,tickLabelProps:U,tickStroke:O,tickTransform:L,ticks:P,strokeWidth:w,tickLineProps:E}),!s&&I.createElement(ak,{className:B("visx-axis-line",n),from:t,to:r,stroke:x,strokeWidth:w,strokeDasharray:b}),c&&I.createElement(tT,yx({className:B("visx-axis-label",u)},j6t({labelOffset:m,labelProps:j,orientation:g,range:y.range(),tickLabelFontSize:V,tickLength:A}),j),c))}function R6t(e,t){t===void 0&&(t="center");var n=e;if(t!=="start"&&"bandwidth"in n){var r=n.bandwidth();return t==="center"&&(r/=2),n.round()&&(r=Math.round(r)),function(s){var a=n(s);return typeof a=="number"?a+r:a}}return e}function P6t(e){var t=e;return"tickFormat"in t?t.tickFormat():Obe}var tc=function(){function e(n){var r=n.x,s=r===void 0?0:r,a=n.y,i=a===void 0?0:a;this.x=0,this.y=0,this.x=s,this.y=i}var t=e.prototype;return t.value=function(){return{x:this.x,y:this.y}},t.toArray=function(){return[this.x,this.y]},e}();function O6t(e,t){return new tc({x:e.x+t.x,y:e.y+t.y})}function L6t(e,t){return new tc({x:e.x-t.x,y:e.y-t.y})}const D6t=Object.freeze(Object.defineProperty({__proto__:null,Point:tc,subtractPoints:L6t,sumPoints:O6t},Symbol.toStringTag,{value:"Module"}));function UC(e,t){var n=e.x,r=e.y;return new tc(t?{x:n,y:r}:{x:r,y:n})}function aO(){return aO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aO.apply(null,arguments)}var W6=0;function F6t(e){return e===void 0&&(e=W6),typeof e=="number"?{start:e,end:e}:aO({start:W6,end:W6},e)}var U6t=["children","axisClassName","hideAxisLine","hideTicks","hideZero","innerRef","left","numTicks","orientation","rangePadding","scale","tickFormat","tickLength","tickValues","top"];function oO(){return oO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oO.apply(null,arguments)}function B6t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function Id(e){var t=e.children,n=t===void 0?I6t:t,r=e.axisClassName,s=e.hideAxisLine,a=s===void 0?!1:s,i=e.hideTicks,l=i===void 0?!1:i,c=e.hideZero,u=c===void 0?!1:c,d=e.innerRef,m=e.left,p=m===void 0?0:m,h=e.numTicks,g=h===void 0?10:h,y=e.orientation,v=y===void 0?Ca.bottom:y,x=e.rangePadding,b=x===void 0?0:x,_=e.scale,w=e.tickFormat,C=e.tickLength,S=C===void 0?8:C,E=e.tickValues,M=e.top,k=M===void 0?0:M,A=B6t(e,U6t),R=w??P6t(_),O=v===Ca.left,L=v===Ca.top,P=L||v===Ca.bottom,N=R6t(_),T=O||L?-1:1,j=_.range(),F=F6t(b),U=UC({x:Number(j[0])+.5-F.start,y:0},P),V=UC({x:Number(j[j.length-1])+.5+F.end,y:0},P),$=(E??tk(_,g)).filter(function(Q){return!u||Q!==0&&Q!=="0"}).map(function(Q,Y){return{value:Q,index:Y}}),z=$.map(function(Q){var Y=Q.value,W=Q.index,X=b_(N(Y));return{value:Y,index:W,from:UC({x:X,y:0},P),to:UC({x:X,y:S*T},P),formattedValue:R(Y,W,$)}});return I.createElement(ca,{className:B("visx-axis",r),innerRef:d,top:k,left:p},n(oO({},A,{axisFromPoint:U,axisToPoint:V,hideAxisLine:a,hideTicks:l,hideZero:u,horizontal:P,numTicks:g,orientation:v,rangePadding:b,scale:_,tickFormat:R,tickLength:S,tickPosition:N,tickSign:T,ticks:z})))}function V6t(e){return!!e&&e instanceof Element}function $6t(e){return!!e&&(e instanceof SVGElement||"ownerSVGElement"in e)}function W6t(e){return!!e&&"createSVGPoint"in e}function H6t(e){return!!e&&"getScreenCTM"in e}function z6t(e){return!!e&&"changedTouches"in e}function G6t(e){return!!e&&"clientX"in e}function q6t(e){return!!e&&(e instanceof Event||"nativeEvent"in e&&e.nativeEvent instanceof Event)}function vx(){return vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vx.apply(this,arguments)}var H6={x:0,y:0};function K6t(e){if(!e)return vx({},H6);if(z6t(e))return e.changedTouches.length>0?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:vx({},H6);if(G6t(e))return{x:e.clientX,y:e.clientY};var t=e?.target,n=t&&"getBoundingClientRect"in t?t.getBoundingClientRect():null;return n?{x:n.x+n.width/2,y:n.y+n.height/2}:vx({},H6)}function rse(e,t){if(!e||!t)return null;var n=K6t(t),r=$6t(e)?e.ownerSVGElement:e,s=H6t(r)?r.getScreenCTM():null;if(W6t(r)&&s){var a=r.createSVGPoint();return a.x=n.x,a.y=n.y,a=a.matrixTransform(s.inverse()),new tc({x:a.x,y:a.y})}var i=e.getBoundingClientRect();return new tc({x:n.x-i.left-e.clientLeft,y:n.y-i.top-e.clientTop})}function F$(e,t){if(V6t(e)&&t)return rse(e,t);if(q6t(e)){var n=e,r=n.target;if(r)return rse(r,n)}return null}var BC={},sse;function YMe(){if(sse)return BC;sse=1,BC.__esModule=!0,BC.default=i;var e=r(Qg()),t=r(ub()),n=["from","to","fill","className","innerRef"];function r(l){return l&&l.__esModule?l:{default:l}}function s(){return s=Object.assign?Object.assign.bind():function(l){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(l[d]=u[d])}return l},s.apply(this,arguments)}function a(l,c){if(l==null)return{};var u={},d=Object.keys(l),m,p;for(p=0;p<d.length;p++)m=d[p],!(c.indexOf(m)>=0)&&(u[m]=l[m]);return u}function i(l){var c=l.from,u=c===void 0?{x:0,y:0}:c,d=l.to,m=d===void 0?{x:1,y:1}:d,p=l.fill,h=p===void 0?"transparent":p,g=l.className,y=l.innerRef,v=a(l,n),x=u.x===m.x||u.y===m.y;return e.default.createElement("line",s({ref:y,className:(0,t.default)("visx-line",g),x1:u.x,y1:u.y,x2:m.x,y2:m.y,fill:h,shapeRendering:x?"crispEdges":"auto"},v))}return BC}var Y6t=YMe();const QMe=Bo(Y6t);function XMe(e){return"bandwidth"in e?e.bandwidth():0}var Q6t=["top","left","scale","width","stroke","strokeWidth","strokeDasharray","className","children","numTicks","lineStyle","offset","tickValues"];function iO(){return iO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iO.apply(this,arguments)}function X6t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function sp(e){var t=e.top,n=t===void 0?0:t,r=e.left,s=r===void 0?0:r,a=e.scale,i=e.width,l=e.stroke,c=l===void 0?"#eaf0f6":l,u=e.strokeWidth,d=u===void 0?1:u,m=e.strokeDasharray,p=e.className,h=e.children,g=e.numTicks,y=g===void 0?10:g,v=e.lineStyle,x=e.offset,b=e.tickValues,_=X6t(e,Q6t),w=b??tk(a,y),C=(x??0)+XMe(a)/2,S=w.map(function(E,M){var k,A=((k=b_(a(E)))!=null?k:0)+C;return{index:M,from:new tc({x:0,y:A}),to:new tc({x:i,y:A})}});return I.createElement(ca,{className:B("visx-rows",p),top:n,left:s},h?h({lines:S}):S.map(function(E){var M=E.from,k=E.to,A=E.index;return I.createElement(QMe,iO({key:"row-line-"+A,from:M,to:k,stroke:c,strokeWidth:d,strokeDasharray:m,style:v},_))}))}sp.propTypes={tickValues:Le.array,width:Le.number.isRequired};var Z6t=["top","left","scale","height","stroke","strokeWidth","strokeDasharray","className","numTicks","lineStyle","offset","tickValues","children"];function lO(){return lO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lO.apply(this,arguments)}function J6t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function U$(e){var t=e.top,n=t===void 0?0:t,r=e.left,s=r===void 0?0:r,a=e.scale,i=e.height,l=e.stroke,c=l===void 0?"#eaf0f6":l,u=e.strokeWidth,d=u===void 0?1:u,m=e.strokeDasharray,p=e.className,h=e.numTicks,g=h===void 0?10:h,y=e.lineStyle,v=e.offset,x=e.tickValues,b=e.children,_=J6t(e,Z6t),w=x??tk(a,g),C=(v??0)+XMe(a)/2,S=w.map(function(E,M){var k,A=((k=b_(a(E)))!=null?k:0)+C;return{index:M,from:new tc({x:A,y:0}),to:new tc({x:A,y:i})}});return I.createElement(ca,{className:B("visx-columns",p),top:n,left:s},b?b({lines:S}):S.map(function(E){var M=E.from,k=E.to,A=E.index;return I.createElement(QMe,lO({key:"column-line-"+A,from:M,to:k,stroke:c,strokeWidth:d,strokeDasharray:m,style:y},_))}))}U$.propTypes={tickValues:Le.array,height:Le.number.isRequired};var eIt=["tooltipOpen"];function tIt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function aM(){return aM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aM.apply(null,arguments)}function B$(e){var t=f.useState(aM({tooltipOpen:!1},e)),n=t[0],r=t[1],s=f.useCallback(function(i){return r(typeof i=="function"?function(l){l.tooltipOpen;var c=tIt(l,eIt);return aM({},i(c),{tooltipOpen:!0})}:{tooltipOpen:!0,tooltipLeft:i.tooltipLeft,tooltipTop:i.tooltipTop,tooltipData:i.tooltipData})},[r]),a=f.useCallback(function(){return r({tooltipOpen:!1,tooltipLeft:void 0,tooltipTop:void 0,tooltipData:void 0})},[r]);return{tooltipOpen:n.tooltipOpen,tooltipLeft:n.tooltipLeft,tooltipTop:n.tooltipTop,tooltipData:n.tooltipData,updateTooltip:r,showTooltip:s,hideTooltip:a}}var nIt=["className","top","left","offsetLeft","offsetTop","style","children","unstyled","applyPositionStyle"];function oM(){return oM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oM.apply(null,arguments)}function rIt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var ZMe={position:"absolute",backgroundColor:"white",color:"#666666",padding:".3rem .5rem",borderRadius:"3px",fontSize:"14px",boxShadow:"0 1px 2px rgba(33,33,33,0.2)",lineHeight:"1em",pointerEvents:"none"},V$=I.forwardRef(function(e,t){var n=e.className,r=e.top,s=e.left,a=e.offsetLeft,i=a===void 0?10:a,l=e.offsetTop,c=l===void 0?10:l,u=e.style,d=u===void 0?ZMe:u,m=e.children,p=e.unstyled,h=p===void 0?!1:p,g=e.applyPositionStyle,y=g===void 0?!1:g,v=rIt(e,nIt);return I.createElement("div",oM({ref:t,className:B("visx-tooltip",n),style:oM({top:r==null||c==null?r:r+c,left:s==null||i==null?s:s+i},y&&{position:"absolute"},!h&&d)},v),m)});V$.propTypes={children:Le.node,className:Le.string,left:Le.number,offsetLeft:Le.number,offsetTop:Le.number,top:Le.number,applyPositionStyle:Le.bool,unstyled:Le.bool};V$.displayName="Tooltip";function cO(){return cO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cO.apply(null,arguments)}function sIt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,uO(e,t)}function uO(e,t){return uO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},uO(e,t)}var ase={top:0,right:0,bottom:0,left:0,width:0,height:0};function aIt(e){var t;return t=function(n){function r(a){var i;return i=n.call(this,a)||this,i.state={rect:void 0,parentRect:void 0},i.nodeRef=I.createRef(),i.getRects=i.getRects.bind(i),i}sIt(r,n);var s=r.prototype;return s.componentDidMount=function(){var i,l=this;this.node=(i=this.nodeRef)!=null&&i.current?this.nodeRef.current:oie.findDOMNode(this),this.setState(function(){return l.getRects()})},s.getRects=function(){if(!this.node)return this.state;var i=this.node,l=i.parentNode,c=i.getBoundingClientRect?i.getBoundingClientRect():ase,u=l!=null&&l.getBoundingClientRect?l.getBoundingClientRect():ase;return{rect:c,parentRect:u}},s.render=function(){return I.createElement(e,cO({nodeRef:this.nodeRef,getRects:this.getRects},this.state,this.props))},r}(I.PureComponent),t.displayName="withBoundingRects("+(e.displayName||"")+")",t}var JMe=f.createContext({isFlippedVertically:!1,isFlippedHorizontally:!1}),oIt=JMe.Provider;JMe.Consumer;var iIt=["children","getRects","left","offsetLeft","offsetTop","parentRect","rect","style","top","unstyled","nodeRef"];function iM(){return iM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iM.apply(null,arguments)}function lIt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function e5e(e){var t=e.children;e.getRects;var n=e.left,r=n===void 0?0:n,s=e.offsetLeft,a=s===void 0?10:s,i=e.offsetTop,l=i===void 0?10:i,c=e.parentRect,u=e.rect,d=e.style,m=d===void 0?ZMe:d,p=e.top,h=p===void 0?0:p,g=e.unstyled,y=g===void 0?!1:g,v=e.nodeRef,x=lIt(e,iIt),b,_=!1,w=!1;if(u&&c){var C=r,S=h;if(c.width){var E=C+a+u.width-c.width,M=u.width-C-a;_=E>0&&E>M}else{var k=C+a+u.width-window.innerWidth,A=u.width-C-a;_=k>0&&k>A}if(c.height){var R=S+l+u.height-c.height,O=u.height-S-l;w=R>0&&R>O}else w=S+l+u.height>window.innerHeight;C=_?C-u.width-a:C+a,S=w?S-u.height-l:S+l,C=Math.round(C),S=Math.round(S),b="translate("+C+"px, "+S+"px)"}return I.createElement(V$,iM({ref:v,style:iM({left:0,top:0,transform:b},!y&&m)},x),I.createElement(oIt,{value:{isFlippedVertically:!w,isFlippedHorizontally:!_}},t))}e5e.propTypes={nodeRef:Le.oneOfType([Le.string,Le.func,Le.object])};const t5e=aIt(e5e),Lg=200,cIt={top:24,right:8,bottom:24,left:16},uIt=v_("%b %d"),dIt=v_("%b"),fIt=v_("%Y");function mIt(e){return e?(e=new Date(e),(y_(e)<e?uIt:Ki(e)<e?dIt:fIt)(e)):""}const Nrn=(e,t,n)=>{if(!e&&(e!==0||!n?.renderZero))return"";const s=t&&/^[A-Z]{3}$/.test(t)?t:void 0,a=e%1===0&&!n?.alwaysShowMinor||n?.roundToMajor?0:2;let i=n?.roundToMajor?0:2;if(e>0&&e<1){const c=Math.abs(e).toExponential();i=Math.abs(parseInt(c.split("e")[1]))+1}const l=Intl.NumberFormat(void 0,{style:s?"currency":"decimal",currency:s,minimumFractionDigits:1,maximumFractionDigits:1,currencyDisplay:n?.currencyDisplay??"narrowSymbol"});return n?.truncate&&e>=1e6?`${l.format(e/1e6)}M`:n?.truncate&&e>=1e3?`${l.format(e/1e3)}k`:e.toLocaleString(void 0,{style:s?"currency":"decimal",currency:s,minimumFractionDigits:a,maximumFractionDigits:i,currencyDisplay:n?.currencyDisplay??"narrowSymbol"})};function pIt(e,t){const n=e>1?0:2;return e.toLocaleString(void 0,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:n})}const hIt={time:e=>new Date(e),linear:e=>+e,band:e=>e,ordinal:e=>e,log:e=>+e,point:e=>e};function z6(e,t){if(!e)return r=>null;if(t===void 0)return r=>r[e];const n=hIt[t]||(r=>r);return r=>n(r[e])}function Rp(e,t){return typeof t=="function"?t(e):typeof t=="string"?t.replace("%s",e):e instanceof Date?mIt(e):String(e)}const jo={time:Zm,linear:jd,band:RB,log:PB,point:x_,ordinal:OB},ose=["band","ordinal","point"];function gIt({width:e,height:t,margin:n,hasAxis:r,maxYLabelWidth:s=0}){const a=n.left+(r?s+15:0),i=e-n.right-n.left,l=t-n.bottom,c=n.top,u=[a,i],d=[l,c],m=Math.max(0,i-a);return{innerHeight:Math.max(0,l-c),innerWidth:m,xRange:u,yRange:d}}function jrn(e,t,n){const r=[];let s="";return e.forEach(a=>{const i=t(a),l=i.toISOString().slice(0,10);l!==s&&(s=l,r.push(i))}),r.filter((a,i)=>i%n===0)}function nT(e){const{colorScheme:t}=Wr(),n=Ms(),r=f.useMemo(()=>n?t==="dark":!1,[t,n]);return f.useMemo(()=>({...r?rEt:sEt,...e}),[r,e])}function rT(e){return f.useMemo(()=>e.data.map(n=>({__key:Math.random(),...n})),[e.data])}function sT({config:e}){const t=f.useMemo(()=>z6(e.x.accessor,e.x.scale),[e.x]),n=f.useMemo(()=>z6(e.y.accessor,e.y.scale),[e.y]),r=f.useMemo(()=>z6(e.z?.accessor,e.z?.scale),[e.z]);return f.useMemo(()=>({xGet:t,yGet:n,zGet:r}),[t,n,r])}function aT({config:e}){const t=f.useCallback(l=>Rp(l,e.x.format),[e.x]),n=f.useCallback(l=>Rp(l,e.y.format),[e.y]),r=f.useCallback(l=>Rp(l,e.z?.format),[e.z]),s=f.useCallback(l=>Rp(l,e.x.tooltipFormat??e.x.format),[e.x]),a=f.useCallback(l=>Rp(l,e.y.tooltipFormat??e.y.format),[e.y]),i=f.useCallback(l=>Rp(l,e.z?.tooltipFormat??e.z?.format),[e.z]);return f.useMemo(()=>({xFormat:t,yFormat:n,zFormat:r,xTooltipFormat:s,yTooltipFormat:a,zTooltipFormat:i}),[t,n,r,s,a,i])}function V_({width:e,height:t,margin:n,maxYLabelWidth:r,hasAxis:s}){return f.useMemo(()=>gIt({width:e,height:t,margin:n,maxYLabelWidth:r,hasAxis:s}),[e,t,n,r,s])}function $$({config:e,xGet:t,yGet:n,data:r,endTime:s,previousClose:a}){const i=f.useMemo(()=>{if(ose.includes(e.x.scale))return[...new Set(r.map(t))];const u=Ja(r,t);return e.x.tickValues?Ja([...e.x.tickValues,...u]):u},[e.x.tickValues,e.x.scale,r,t]),l=f.useMemo(()=>{if(ose.includes(e.y.scale))return[...new Set(r.map(n))];const d=[...Ja(r,n)];a!==void 0&&d.push(a),e.y.tickValues&&d.push(...e.y.tickValues);const[m,p]=Ja(d),g=(p-m)*.05;return[m-g,p+g]},[e.y.tickValues,e.y.scale,r,n,a]),c=f.useMemo(()=>{if(!s||!i||i.length<2||e.x.scale!=="time")return i;const[u,d]=i;return new Date(d).toDateString()!==s.toDateString()?i:Date.now()<s.getTime()&&d<s?[u,s]:i},[i,s,e.x.scale]);return f.useMemo(()=>({xDomain:c,yDomain:l}),[c,l])}function W$(e){const[t,n]=f.useState({width:0,height:0,resizing:!1});return f.useEffect(()=>{let r;const s=()=>{e.current&&(clearTimeout(r),n(a=>{const i=e.current?.offsetWidth??0,l=e.current?.offsetHeight??0,c=Math.round(a.width)!==Math.round(i);return{width:i,height:l,resizing:c}}),r=setTimeout(()=>{n(a=>({...a,resizing:!1}))},500))};return s(),window.addEventListener("resize",s),()=>{clearTimeout(r),window.removeEventListener("resize",s)}},[e]),t}const zf=30,n5e=({height:e,render:t,children:n})=>{const r=f.useRef(null),{width:s,resizing:a}=W$(r);return o.jsx("div",{style:{width:"100%",height:e},ref:r,className:B("relative"),children:o.jsx(Ke,{children:t&&!a&&o.jsx(ge.div,{className:"absolute",style:{top:0,left:0,right:0,bottom:0},initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:n(s)})})})},yIt=({children:e,style:t})=>o.jsx(H,{className:"p-sm pb-md flex h-full",children:o.jsx(H,{className:"flex size-full items-center justify-center",variant:"raised",style:t,children:o.jsx(D,{variant:"small",color:"light",children:e})})}),r5e=()=>o.jsx(yIt,{style:{height:Lg,marginBottom:zf},children:o.jsx(pe,{id:"iuY8kxCDQT",defaultMessage:"Something went wrong."})}),vIt="animate-in fade-in shadow-subtle transition-colors duration-500",H$=f.memo(({marginTop:e,tooltipLeft:t=0,innerHeight:n,color:r,strokeWidth:s=1})=>{const a=f.useMemo(()=>({x:t,y:e}),[e,t]),i=f.useMemo(()=>({x:t,y:n+e}),[n,e,t]);return isNaN(a.x+i.x+a.y+i.y)?null:o.jsx(ge.line,{x1:a.x,y1:a.y,x2:i.x,y2:i.y,stroke:r,strokeWidth:s,pointerEvents:"none",className:vIt,initial:{opacity:0,strokeWidth:0},animate:{opacity:.6,strokeWidth:s},exit:{opacity:0,strokeWidth:0},transition:{duration:.1}})});H$.displayName="YCrosshair";const xIt={pointerEvents:"none",position:"absolute",overflow:"visible"},s5e=({children:e,y:t,x:n,pill:r})=>o.jsx(t5e,{top:t,left:n,style:xIt,children:o.jsx("div",{className:B("m-xs shadow-subtle dark:bg-subtle relative border bg-white/75 backdrop-blur-sm",{"rounded-full":r,"rounded-lg":!r}),children:e})}),ise=["1d","5d"],a5e=6,o5e=(e,t,n,r,s)=>{const a=t(e);return!(a===void 0||a<r||a>n-s)},$_=(e,t,n)=>o5e(e,t,n,25,70),W_=(e,t,n)=>o5e(e,t,n,20,20),bIt=({xScale:e,width:t})=>{if("ticks"in e)return e.ticks(a5e).map(n=>({date:n,label:$_(n,e,t),line:W_(n,e,t)}))},_It=e=>{const t=e.match(/(\d{4})-(\d{2})-(\d{2})/);return t?t[0]:void 0},wIt=({history:e,xGet:t,xGetUnparsed:n,width:r,xScale:s})=>{const a=[],i=new Set;return e.forEach(l=>{const c=t(l),u=_It(n(l));u&&!i.has(u)&&(a.push({date:c,label:$_(c,s,r),line:W_(c,s,r)}),i.add(u))}),a};function CIt(e){const t=new Date(e.getFullYear(),e.getMonth(),1).getDay(),n=t===0?6:t-1;return Math.ceil((e.getDate()+n)/7)}const SIt=({history:e,xGet:t,width:n,xScale:r})=>{const s=[],a=new Set;return e.forEach(i=>{const l=t(i),c=l.getMonth(),u=CIt(l),d=`${c}-${u}`;a.has(d)||(s.push({date:l,label:$_(l,r,n),line:W_(l,r,n)}),a.add(d))}),s.filter((i,l,c)=>l?i.date.getTime()-c[l-1].date.getTime()>1e3*60*60*24*6:!0)},VC=({history:e,xGet:t,width:n,xScale:r})=>{const s=[],a=new Set;return e.forEach(i=>{const l=t(i),c=l.getMonth(),d=`${l.getFullYear()}-${c}`;a.has(d)||(s.push({date:l,label:$_(l,r,n),line:W_(l,r,n)}),a.add(d))}),s},lse=({history:e,xGet:t,width:n,xScale:r})=>{const s=[],a=new Set;return e.forEach(i=>{const l=t(i),c=l.getFullYear();a.has(c)||(s.push({date:l,label:$_(l,r,n),line:W_(l,r,n)}),a.add(c))}),s},EIt={"1d":bIt,"5d":wIt,"1m":SIt,"6m":VC,"3m":VC,ytd:VC,"1y":VC,"5y":lse,max:lse},Uu=(e,t)=>e.date.toLocaleDateString(e.locale,{timeZone:e.timezone??void 0,...t}),MIt=e=>{const t=e.date.getMinutes()!==0;return e.date.toLocaleTimeString(e.locale,{timeZone:e.timezone??void 0,hour:"numeric",minute:t?"numeric":void 0})},kIt={"1d":e=>MIt(e),"5d":e=>Uu(e,{month:"short",day:"numeric"}),"1m":e=>Uu(e,{month:"short",day:"numeric"}),"6m":e=>Uu(e,{month:"short"}),"3m":e=>Uu(e,{month:"short"}),ytd:e=>Uu(e,{month:"short"}),"1y":e=>Uu(e,{month:"short"}),"5y":e=>Uu(e,{year:"numeric"}),max:e=>Uu(e,{year:"numeric"})},i5e=({history:e,xGet:t,xGetUnparsed:n,timezone:r,locale:s,period:a,width:i,xScale:l})=>{const c=i<400?3:6,u=f.useMemo(()=>{const g=EIt[a]({history:e,xGet:t,xGetUnparsed:n,locale:s,period:a,xScale:l,width:i});return g&&(g.length>c?g.map((y,v)=>({...y,label:y.label&&v%Math.floor(g.length/c)===0})):g)},[e,t,n,s,a,l,i,c]),d=f.useMemo(()=>{const g=u?.filter(y=>y.label).map(y=>y.date);return g?.length?g:void 0},[u]),m=f.useMemo(()=>{const g=u?.filter(y=>y.line).map(y=>y.date);return g?.length?g:void 0},[u]),p=f.useCallback(g=>kIt[a]({date:g,locale:s,timezone:r}),[a,s,r]);return{xTickLabels:d,xTickFormatter:p,xTickLines:m,xTickCount:d?void 0:a5e}},rd=e=>e.close,Pp=({value:e,baseline:t,annotation:n})=>{const r=n?H2t[n.type]:void 0,s=e>=t?td.POSITIVE:td.NEGATIVE;return{...z2t(s),backgroundColor:U1[s],lineColor:U1[s],backgroundOpacity:1,valence:s,...r}},z$=(e,t)=>{const[n,r]=t;return n===r?0:(e-n)/(r-n)*100},TIt=({history:e,baseline:t,exchangeHoursAnnotations:n,xScale:r,width:s,xMaskingSupported:a})=>{if(!e?.length)return[];a||(n=[]);const i=[];e.forEach((u,d)=>{const m=e[d-1],p=Kp(n,Oc(u));if(!m){i.push({...Pp({value:rd(u),baseline:t,annotation:p}),x:0,type:p?.type});return}const h=rd(m),g=rd(u),y=Kp(n,Oc(m)),v=Kp(n,Oc(u));if(y!==v){const b=r(cs(m))??0;i.push({...Pp({value:h,baseline:t,annotation:y}),x:b,type:y?.type}),i.push({...Pp({value:g,baseline:t,annotation:Kp(n,Oc(u))}),x:b,type:v?.type})}if(y===v&&(h<t&&g>=t||h>=t&&g<t)){const x=r(cs(m))??0,b=r(cs(u))??0,_=(t-h)/(g-h),w=x+_*(b-x);i.push({...Pp({value:h,baseline:t,annotation:y}),x:w,type:y?.type}),i.push({...Pp({value:g,baseline:t,annotation:v}),x:w,type:v?.type})}});const l=e[e.length-1],c=Kp(n,Oc(l));return i.push({...Pp({value:rd(l),baseline:t,annotation:c}),x:s,type:c?.type}),i},NIt=({l:e,id:t,animationId:n,history:r,baseline:s,stops:a,yScale:i,style:l,xDomainData:c,height:u,marginBottom:d})=>{const m=f.useMemo(()=>{const h=i(s),g=e(r);return g?`${g} L ${c[1]},${h} L ${c[0]},${h} Z`:""},[e,r,i,s,c]),p=f.useMemo(()=>{const h=i.domain(),g=h[1]-h[0],y=(h[1]-s)/g*100,v=(u-d)/u*100;return y*(v/100)},[i,s,u,d]);return o.jsxs(o.Fragment,{children:[o.jsxs("defs",{children:[o.jsx("linearGradient",{id:`ticker-area-color-gradient-${t}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",colorInterpolation:"linearRGB",spreadMethod:"pad",children:a.map((h,g)=>o.jsx("stop",{offset:`${z$(h.x,c)}%`,stopColor:aa[h.backgroundColor],stopOpacity:h.backgroundOpacity},g))}),o.jsxs("linearGradient",{id:`ticker-area-opacity-gradient-${t}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0.3"}),o.jsx("stop",{offset:`${Math.max(0,p-20)}%`,stopColor:"white",stopOpacity:"0.1"}),o.jsx("stop",{offset:`${p}%`,stopColor:"white",stopOpacity:"0.00"}),o.jsx("stop",{offset:`${Math.min(100,p+20)}%`,stopColor:"white",stopOpacity:"0.1"}),o.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0.3"})]}),o.jsx("mask",{id:`ticker-area-mask-${t}`,children:o.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#ticker-area-opacity-gradient-${t})`})})]}),o.jsx("g",{mask:`url(#ticker-area-mask-${t})`,children:o.jsx(Ke,{mode:"wait",children:o.jsx(ge.path,{d:m,fill:`url(#ticker-area-color-gradient-${t})`,stroke:"none",shapeRendering:E_,style:{mixBlendMode:"multiply",...l},initial:{opacity:0},animate:{opacity:1,transition:Fh},exit:Q_e},n)})})]})},jIt=({l:e,history:t,stops:n,xDomainData:r,id:s})=>{const a=f.useMemo(()=>e(t),[e,t]),i=swe(a);return o.jsxs(o.Fragment,{children:[o.jsx("defs",{children:o.jsx("linearGradient",{id:`ticker-line-gradient-${s}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:n.map((l,c)=>o.jsx("stop",{offset:`${z$(l.x,r)}%`,stopColor:aa[l.backgroundColor],stopOpacity:l.lineOpacity},c))})}),o.jsx(Xc.path,{d:i,stroke:n?.length?`url(#ticker-line-gradient-${s})`:aa.blue,strokeWidth:1.75,fill:"none",shapeRendering:E_})]})},AIt=({id:e,stops:t,height:n,opacity:r,size:s,style:a,xBounds:i})=>o.jsxs("g",{children:[o.jsxs("defs",{children:[o.jsx("pattern",{id:`ticker-after-hours-dot-grid-${e}`,patternUnits:"userSpaceOnUse",width:s,height:s,children:o.jsx("circle",{cx:s/2,cy:s/2,r:s*.12,fill:aa.gray,opacity:r})}),o.jsx("linearGradient",{id:`ticker-after-hours-mask-gradient-${e}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:t.map((l,c)=>{const u=!!l.type;return o.jsx("stop",{offset:`${z$(l.x,i)}%`,stopColor:"white",stopOpacity:u?1:0},c)})}),o.jsx("mask",{id:`ticker-after-hours-mask-${e}`,children:o.jsx("rect",{x:0,y:"0",width:i[1],height:n,fill:`url(#ticker-after-hours-mask-gradient-${e})`})})]}),o.jsx("rect",{x:0,y:"0",style:a,width:i[1],height:n,fill:`url(#ticker-after-hours-dot-grid-${e})`,mask:`url(#ticker-after-hours-mask-${e})`})]}),IIt=({exchangeHoursAnnotations:e,data:t,xScale:n,xBounds:r})=>{const{$t:s}=Z(),{tooltipData:a,hideTooltip:i,showTooltip:l}=B$(),c=f.useCallback(u=>{const d="touches"in u;u.stopPropagation();const m=F$(u);if(!m)return;const{d:p,x:h}=aV(m.x,n,t);if(!p)return;const g=Kp(e,p.date),y=g?.type&&Zee[g.type]?s(Zee[g.type]):void 0,v=Math.min(Math.max(r[0],h),r[1]);l({tooltipData:{data:p,x:v,y:d?0:m.y,annotation:y}})},[t,n,l,e,s,r]);return f.useMemo(()=>({tooltipData:a,hideTooltip:i,showTooltip:c}),[a,i,c])},RIt=({currency:e,absoluteChange:t,relativeChange:n})=>{const{locale:r}=Z(),s=f.useMemo(()=>t===void 0?null:sV(t,e,r),[t,e,r]),a=f.useMemo(()=>n===void 0?null:n.toLocaleString(r,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"exceptZero"}),[n,r]),i=f.useMemo(()=>t?t>0?"positive":"negative":"light",[t]);return!t&&!n?null:o.jsx(H,{className:"relative border-t",children:o.jsx(D,{variant:"tinyRegular",color:i,className:"px-sm py-xs whitespace-nowrap",children:o.jsx(pe,{id:"TqEJGQaMg0",defaultMessage:"{absoluteChange} ({relativeChange})",values:{absoluteChange:s,relativeChange:a}})})})},PIt=({x:e,y:t,close:n,date:r,annotation:s,absoluteChange:a,relativeChange:i,currency:l,exchangeTimezone:c})=>{const{locale:u}=Z();return o.jsxs(s5e,{y:t,x:e,children:[o.jsxs(H,{className:"py-sm relative px-[12px]",children:[o.jsx(D,{variant:"baseSemi",children:sV(n,l,u)}),o.jsx(D,{variant:"tinyRegular",className:"whitespace-nowrap",color:"light",children:awe(r,u,c)}),o.jsx(D,{variant:"tinyRegular",color:"light",className:"whitespace-nowrap",children:s})]}),o.jsx(RIt,{currency:l,absoluteChange:a,relativeChange:i})]})},OIt=({baseline:e,history:t,yScale:n,chartWidth:r,children:s})=>{const a=f.useMemo(()=>{const l=n(e),c=10,u=25,d=t.slice(-Math.max(3,Math.floor(t.length*.1))),m=d.reduce((y,v)=>y+n(rd(v)),0)/d.length,p=Math.abs(m-l),g=!(l<u)&&(p>=c?!0:m>l);return{opacity:1,top:l,left:r-10,transform:`translate(-100%, ${g?"-100%":"0"})`}},[e,t,n,r]),i=f.useMemo(()=>({...a,opacity:0}),[a]);return r<25?null:o.jsx(ge.div,{className:"pointer-events-none absolute z-50",initial:i,animate:a,transition:{duration:.5,ease:"easeInOut"},children:s})},LIt=(e,t)=>{if(!e?.length)return;const n=Ja(e,Oc),r=Xee(n[0],t?.open??""),s=Xee(n[1],t?.close??"");let a=n[0],i=n[1];return r<a&&(a=r),s>i&&(i=s),[new Date(a),new Date(i)]},DIt=(e,t,n,r)=>{const[s,a]=f.useState(null),i=f.useCallback(()=>{e?.x&&a(e.x)},[e?.x]),l=f.useCallback(()=>{a(null)},[]),c=f.useMemo(()=>s===null?null:aV(s,t,n).d,[t,n,s]),u=f.useMemo(()=>{if(!c||!e)return null;const[v,x]=[e.data,c].sort((b,_)=>_.date.localeCompare(b.date));return{absolute:v.close-x.close,relative:(v.close-x.close)/x.close}},[c,e]),d=f.useMemo(()=>t.range()[1],[t]),m=f.useMemo(()=>!s||!c?null:t(cs(c)),[t,c,s]),p=f.useMemo(()=>!s||!c||!e?null:t(cs(e.data))??d,[t,c,s,e,d]),h=f.useMemo(()=>!c||!e||!s?`M 0 0 L ${d} 0 L ${d} ${r} L 0 ${r} Z`:`M ${m} 0 L ${p} 0 L ${p} ${r} L ${m} ${r} Z`,[c,e,s,r,m,p,d]),g="finance-chart-clip-path",y=f.useMemo(()=>({clipPath:`url(#${g})`}),[g]);return{id:g,path:h,style:y,animate:!s,absoluteChange:u?.absolute,relativeChange:u?.relative,handleMouseDown:i,handleMouseUp:l,leftX:m,rightX:p}},FIt=e=>e&&e<0?aa.red:e&&e>0?aa.blue:aa.gray,UIt=({id:e,path:t})=>o.jsx("defs",{children:o.jsx("clipPath",{id:e,children:o.jsx(Xc.path,{d:t})})}),l5e=f.memo(({symbol:e,exchangeTimezone:t,exchangeHours:n,period:r,currency:s,history:a,previousClose:i,width:l,height:c,exchangeHoursAnnotations:u=[]})=>{const{locale:d}=Z(),m=r==="1d",p=f.useMemo(()=>a.toSorted((J,q)=>J.date.localeCompare(q.date)),[a]),h=f.useMemo(()=>ise.includes(r)?rwe(p):new Set,[p,r]),g=f.useMemo(()=>p.filter(J=>!h.has(J.date)),[p,h]),y=f.useMemo(()=>rV(g,r),[g,r]),v=f.useMemo(()=>m?Zm({domain:LIt(p,n),range:[0,l]}):x_({domain:p.map(cs),range:[0,l]}),[p,l,m,n]),x=f.useMemo(()=>Ja(a,cs).map(J=>v(J)),[v,a]),b=f.useMemo(()=>[0,l],[l]),_=f.useMemo(()=>Ja(y,rd),[y]),w=i??a[a.length-1].close,C=f.useMemo(()=>{w&&(_[0]=Math.min(_[0],w),_[1]=Math.max(_[1],w));const J=_[1]-_[0];return _[0]-=J*.05,_[1]+=J*.05,jd({nice:!1,domain:_,range:[c-zf,0]})},[c,w,_]),S=f.useMemo(()=>Tu().x(J=>v(cs(J))??0).y(J=>C(rd(J))??0).curve(q_e),[v,C]),{tooltipData:E,hideTooltip:M,showTooltip:k}=IIt({data:p,exchangeHoursAnnotations:u,xScale:v,xBounds:x}),{handleMouseDown:A,handleMouseUp:R,leftX:O,rightX:L,...P}=DIt(E,v,p,c),N=FIt(P.absoluteChange),T=f.useCallback(()=>{R(),M()},[R,M]),{isMobileStyle:j}=xe(),F=j?Z_e:X_e,U=f.useMemo(()=>C.ticks(F),[C,F]),V=`${r}-${e}`,$=ise.includes(r)&&!!u.length,{xTickLabels:z,xTickFormatter:Q,xTickLines:Y,xTickCount:W}=i5e({history:p,xGet:cs,xGetUnparsed:Oc,timezone:t,locale:d,period:r,xScale:v,width:l}),X=f.useMemo(()=>TIt({xMaskingSupported:$,history:y,baseline:w,xScale:v,width:l,exchangeHoursAnnotations:u??[]}),[y,w,v,u,l,$]),G=f.useCallback(J=>ewe({tick:J,history:y,yScale:C,xScale:v,yGet:rd,baseline:w}),[y,C,v,w]);return o.jsxs("div",{className:Y_e,onMouseDown:A,onMouseMove:k,onMouseLeave:T,onMouseOut:T,onMouseUp:R,onTouchStart:k,onTouchMove:k,onTouchEnd:T,onTouchCancel:T,children:[o.jsxs("svg",{height:c,width:l,className:K_e,children:[o.jsx(Ke,{initial:!1,mode:"wait",children:!$&&o.jsxs(ge.g,{initial:{opacity:0},animate:{opacity:1},transition:Fh,children:[o.jsx(sp,{tickValues:U,scale:C,width:l,stroke:aa.gray,strokeWidth:1,opacity:.1,className:"transition-all duration-1000"}),o.jsx(U$,{scale:v,opacity:.1,height:c*2,stroke:aa.gray,style:{transform:`translateY(-${c}px)`},numTicks:W,strokeWidth:1,tickValues:Y})]},V)}),o.jsx(UIt,{id:P.id,path:P.path}),o.jsx(NIt,{l:S,id:e,animationId:V,history:y,baseline:w,stops:X,yScale:C,style:P.style,xDomainData:x,height:c,marginBottom:zf}),o.jsx(Ke,{mode:"wait",children:o.jsxs(ge.g,{initial:{opacity:0},exit:Q_e,animate:{opacity:1},transition:Fh,children:[o.jsx(AIt,{id:e,stops:X,height:c*3,style:{transform:`translateY(-${c*3/2}px)`},width:l,opacity:.33,size:5,xBounds:b}),o.jsx("g",{opacity:E?0:1,className:r9(!!E),children:o.jsx(Id,{scale:C,hideTicks:!0,hideAxisLine:!0,numTicks:F,left:nV,orientation:"right",tickLabelProps:G})}),o.jsx(Id,{scale:v,hideAxisLine:!0,hideTicks:!0,numTicks:W,tickValues:z,tickFormat:Q,orientation:"bottom",top:c-zf,tickLabelProps:twe})]},V)}),o.jsx(jIt,{l:S,id:e,history:y,baseline:w,stops:X,xDomainData:x}),o.jsx(Ke,{children:o.jsx(ge.line,{stroke:aa.gray,initial:{opacity:0},transition:{duration:gk/1e3,ease:"easeInOut"},animate:{opacity:1,x1:0,x2:l,y1:C(w),y2:C(w)},exit:{opacity:0},strokeDasharray:"4 4",strokeWidth:.8,shapeRendering:E_})}),o.jsx(Ke,{children:E&&o.jsx(H$,{marginTop:-c,tooltipLeft:E.x,innerHeight:c*3,color:N})})]}),o.jsx(Ke,{children:m&&o.jsx(OIt,{baseline:w,history:p,yScale:C,chartWidth:l,children:o.jsx(H,{className:B("m-sm px-sm py-xs shadow-subtle dark:bg-subtle relative rounded-full border bg-white/75 backdrop-blur-sm dark:shadow-md",r9(!!E)),children:o.jsx(D,{variant:"micro",color:"light",className:"relative whitespace-nowrap",children:o.jsx(pe,{id:"ZjNVXgqGKh",defaultMessage:"Prev close: {price}",values:{price:sV(w,s,d)}})})})})}),o.jsx(Ke,{children:Rv(O)&&Rv(L)&&o.jsx(ge.div,{animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"pointer-events-none absolute inset-0",style:{left:L>O?O:L,right:l-(L>O?L:O),top:-c,bottom:-c},children:o.jsx(ge.div,{className:"bg-inverse absolute inset-0 rounded-md opacity-5"})})}),o.jsx("div",{style:{height:c-zf,width:l},className:"pointer-events-none absolute inset-0",children:E&&o.jsx(PIt,{x:E.x,y:E.y,annotation:E.annotation,close:E.data.close,date:E.data.date,absoluteChange:P.absoluteChange,relativeChange:P.relativeChange,currency:s,exchangeTimezone:t??void 0})})]})});l5e.displayName="Chart";const BIt=f.memo(function({quote:t,period:n}){return o.jsx(Or,{fallback:r5e,children:o.jsx(n5e,{height:Lg,render:!!t,children:r=>!t||!n||r<100||!t.history?.length?null:o.jsx(l5e,{symbol:t.symbol,currency:t.currency,period:n,history:t.history,previousClose:t.historicalPreviousClose??void 0,exchangeHours:t.exchangeHours,exchangeTimezone:t.exchangeTimezone,exchangeHoursAnnotations:t.exchangeHoursAnnotations,width:r,height:Lg})})})}),cse=["oklch(var(--hydra-450))","oklch(var(--jenova-450))","oklch(var(--costa-400))","oklch(var(--rosa-450))","oklch(var(--kuja-450))","oklch(var(--dalmasca-400))","oklch(var(--terra-450))","oklch(var(--limsa-450))","oklch(var(--gridania-450))"],xx=e=>cse[e%cse.length],VIt=4,e2=e=>e.changesPercentage,$It=({d:e})=>{const t=swe(e??"");return e?o.jsx(Xc.path,{strokeWidth:1.75,fill:"none",shapeRendering:E_,d:t}):null},WIt=({data:e,yScale:t})=>tV(e||[],{keys:r=>r.quote.symbol,from:{r:0},enter:{r:VIt},leave:{r:0},config:{tension:400,friction:30}})((r,s)=>o.jsx(HIt,{x:s.x,yv:s.yv,color:s.quote.color,yScale:t,r:r.r.to(a=>Math.max(a,0))},s.quote.symbol)),HIt=({x:e,yv:t,color:n,yScale:r,r:s})=>{const a=eV({x:e,yv:t,opacity:1,config:{tension:400,friction:30}});return o.jsx(Xc.circle,{cx:a.x,cy:a.yv.to(i=>r(i)),r:s,opacity:a.opacity,fill:n})},zIt=({data:e,timeZone:t,locale:n,x:r})=>{const s=f.useMemo(()=>e.reduce((i,l)=>Math.abs(l.x-r)<Math.abs(i.x-r)?l:i,e[0]),[e,r]),a=f.useMemo(()=>{if(!s)return null;const i=s.date;return i?awe(i,n,t??void 0):null},[s,n,t]);return o.jsx(D,{variant:"tinyRegular",color:"light",className:"px-sm py-xs",children:a})},GIt=(e,t)=>{const n={color:e.color,symbol:e.symbol,name:e.name,exchange:e.exchange,currency:e.currency,image:e.image,imageDark:e.imageDark,exchangeTimezone:e.exchangeTimezone};return t?{quote:{...n,price:t.close,historicalChange:t.close-(e.historicalPreviousClose??0),historicalPercentChange:t.changesPercentage*100},date:t.date}:{quote:{...n,price:e.price,historicalChange:e.historicalChange??0,historicalPercentChange:e.historicalPercentChange??0},date:null}},qIt=({data:e,dataMovingAverage:t,xScale:n,xBounds:r,setHoveredComparisons:s})=>{const{tooltipData:a,hideTooltip:i,showTooltip:l}=B$(),c=f.useCallback(d=>{const m=F$(d);if(!m)return;const p=Math.min(Math.max(r[0],m.x),r[1]),h=t.map((g,y)=>{const v=aV(p,n,g.history),x=e[y].history[Math.min(v.index,e[y].history.length-1)],b=GIt(e[y],x);return{date:b.date,quote:b.quote,x:n(cs(v.d))??0,yv:e2(v.d)}});h.every(g=>g.x)&&(s(h.map(g=>g.quote)),l({tooltipData:{data:h,x:m.x,y:-30}}))},[e,t,n,l,r,s]),u=f.useCallback(()=>{i(),s([])},[i,s]);return f.useMemo(()=>({tooltipData:a,hideTooltip:u,showTooltip:c}),[a,u,c])},KIt=e=>{if(e.length===0)return!0;const t=e[0].map(cs);for(let n=1;n<e.length;++n){const r=e[n];if(r?.length!==t.length)return!1;for(let s=0;s<t.length-1;++s)if(cs(r[s]).getTime()!==t[s].getTime())return!1}return!0},YIt=(e,t)=>t?(e-t)/t:0,use=e=>{const t=e.historicalPreviousClose||e.history[0].close,n=e.history.map(r=>({...r,changesPercentage:YIt(r.close,t),change:r.close-t}));return{...e,history:n}},QIt=(e,t)=>({...e,history:rV(e.history,t)}),XIt=(e,t)=>!e||e===t?1:.2,ZIt=({quotes:e,period:t,width:n,height:r,setHoveredComparisons:s,focused:a})=>{const{locale:i,timeZone:l}=Z(),{isMobileStyle:c}=xe(),u=c?Z_e:X_e,d=f.useMemo(()=>{const N=[...new Set(e.map(T=>T.exchangeTimezone))];return N.length===1?N[0]:l},[l,e]),m=f.useMemo(()=>e.map(use),[e]),p=f.useMemo(()=>e.map(N=>use(QIt(N,t))),[e,t]),h=f.useMemo(()=>p.flatMap(N=>N.history).sort((N,T)=>cs(N).getTime()-cs(T).getTime()),[p]),g=f.useMemo(()=>jd({nice:!1,domain:Ja(m.flatMap(N=>N.history),e2),range:[r-zf,0]}),[r,m]),y=f.useMemo(()=>KIt(m.map(N=>N.history)),[m]),v=f.useMemo(()=>t==="1d"||!y?Zm({domain:Ja(h,cs),range:[0,n]}):x_({domain:Array.from(new Set(h.map(Oc))).sort().map(nwe),range:[0,n]}),[n,h,y,t]),{xTickLabels:x,xTickFormatter:b,xTickLines:_,xTickCount:w}=i5e({history:h,xGet:cs,xGetUnparsed:Oc,timezone:d,locale:i,period:t,xScale:v,width:n}),C=f.useMemo(()=>Tu().x(N=>v(cs(N))??0).y(N=>g(e2(N))??0).curve(q_e),[v,g]),S=f.useMemo(()=>p.map((N,T)=>({path:C(N.history),color:xx(T),quote:N})),[p,C]),E=f.useMemo(()=>g.ticks(u).filter(N=>N!==0),[g,u]),M=f.useMemo(()=>[...m.map(N=>N.symbol),t].join("-"),[m,t]),k=f.useMemo(()=>[0,n],[n]),{tooltipData:A,hideTooltip:R,showTooltip:O}=qIt({data:m,dataMovingAverage:p,xScale:v,xBounds:k,setHoveredComparisons:s}),L=f.useCallback(N=>N.toLocaleString(i,{style:"percent"}),[i]),P=f.useCallback(N=>{const T=p.map(j=>ewe({tick:N,history:j.history,yScale:g,xScale:v,yGet:e2}));return T.find(j=>j.opacity<1)??T[0]},[p,g,v]);return o.jsxs("div",{className:Y_e,onMouseMove:O,onMouseLeave:R,onMouseOut:R,onTouchStart:O,onTouchMove:O,onTouchEnd:R,onTouchCancel:R,children:[o.jsxs("svg",{height:r,width:n,className:K_e,children:[o.jsx(Ke,{initial:!1,mode:"wait",children:o.jsxs(ge.g,{initial:{opacity:0},animate:{opacity:1},transition:Fh,children:[o.jsx("g",{opacity:A?0:1,className:r9(!!A),children:o.jsx(Id,{scale:g,hideTicks:!0,hideAxisLine:!0,numTicks:u,tickFormat:L,left:nV,orientation:"right",tickLabelProps:P})}),o.jsx(Id,{scale:v,hideAxisLine:!0,hideTicks:!0,numTicks:w,tickValues:x,tickFormat:b,orientation:"bottom",top:r-zf,tickLabelProps:twe}),o.jsx(sp,{tickValues:E,scale:g,width:n,stroke:aa.gray,strokeWidth:1,opacity:.1,className:"transition-all duration-1000"}),o.jsx(U$,{scale:v,opacity:.1,height:r*2,stroke:aa.gray,style:{transform:`translateY(-${r}px)`},numTicks:w,strokeWidth:1,tickValues:_})]},M)}),o.jsx(Ke,{children:S.map((N,T)=>o.jsx(ge.g,{initial:{opacity:0,transition:Fh},exit:{opacity:0,transition:Fh},animate:{stroke:N.color,opacity:XIt(a,N.quote.symbol),transition:{delay:0,duration:.25}},children:o.jsx($It,{d:N.path})},T))}),o.jsx(Ke,{children:o.jsx(ge.line,{stroke:aa.gray,initial:{opacity:0},transition:{duration:gk/1e3,ease:"easeInOut"},animate:{opacity:1,x1:0,x2:n,y1:g(0),y2:g(0)},exit:{opacity:0},strokeDasharray:"4 4",strokeWidth:2,shapeRendering:E_})}),o.jsx(Ke,{children:A&&o.jsx(H$,{marginTop:-r,tooltipLeft:A.x,innerHeight:r*3,color:aa.gray})}),o.jsx(WIt,{data:A?.data,yScale:g})]}),A&&o.jsx(s5e,{x:A.x,y:A.y,pill:!0,children:o.jsx(zIt,{data:A.data,timeZone:d,x:A.x,locale:i})})]})},JIt=f.memo(function({quotes:t,period:n,focused:r,setHoveredComparisons:s}){return o.jsx(Or,{fallback:r5e,children:o.jsx(n5e,{height:Lg,render:!!t?.length,children:a=>!t?.length||!n||a<100||!t.every(i=>i?.history?.length)?null:o.jsx(ZIt,{quotes:t,period:n,width:a,height:Lg,focused:r,setHoveredComparisons:s})})})}),eRt=({root:e,quote:t,removeComparison:n,setFocused:r,className:s,href:a})=>{const i=f.useCallback(()=>{r(t.symbol)},[r,t.symbol]),l=f.useCallback(()=>{r(null)},[r]),c=f.useCallback(u=>{u.preventDefault(),u.stopPropagation(),l(),n(t.symbol)},[n,t.symbol,l]);return o.jsxs(Nu,{href:a,className:B("hover:bg-subtler flex items-center justify-start duration-150",{"bg-subtlest":e},s),onMouseEnter:i,onMouseLeave:l,children:[o.jsx(H,{className:"w-xs my-xs ml-xs shrink-0 self-stretch rounded-full",style:{background:t.color}}),o.jsxs(H,{className:"p-sm py-xs gap-sm md:gap-md flex w-full items-center justify-between",children:[o.jsxs(H,{className:B("gap-sm duration-quick grid w-full items-center transition-opacity [grid-template-columns:2fr_1fr_1fr] md:[grid-template-columns:5fr_1fr_1fr_1fr]",{"pointer-events-none opacity-0":t.loading}),children:[o.jsxs(H,{className:"gap-sm flex items-center",children:[o.jsx(H3,{symbol:t.symbol??"",src:t.image??"",srcDark:t.imageDark??""}),o.jsxs(H,{children:[o.jsx(D,{variant:"smallBold",className:"line-clamp-1 text-ellipsis",children:t.name??t.symbol}),o.jsx(D,{variant:"tinyMono",color:"light",children:o.jsx(yk,{symbol:t.symbol,exchange:t.exchange})})]})]}),o.jsx("span",{children:Rv(t.price)&&o.jsx(Nm,{variant:"small",price:t.price??0,currency:t.currency,animated:!1,className:"text-right"})}),o.jsx("span",{className:"hidden text-center md:block",children:Rv(t.historicalChange)&&o.jsx(Nm,{variant:"small",price:t.historicalChange??0,currency:t.currency,animated:!1,sign:!0})}),o.jsx("span",{children:Rv(t.historicalPercentChange)&&o.jsx(km,{change:t.historicalPercentChange??0,variant:"tiny",includeIcon:!0,mono:!1,animated:!1})})]}),o.jsx(H,{className:B("flex items-center justify-end active:scale-95",{"pointer-events-none invisible":e}),children:o.jsx(he,{onClick:c,variant:"border",icon:Rt,pill:!0,size:"tiny"},t.symbol)})]})]})},c5e=f.memo(({comparisons:e,removeComparison:t,setFocused:n})=>{const r=f.useCallback(()=>{n(null)},[n]),s=f.useCallback(a=>{const i=[a.symbol,...e.map(l=>l.symbol).filter(l=>l!==a.symbol)];return`/finance/${a.symbol}?comparing=${i.join(",")}`},[e]);return o.jsx(H,{className:"m-0 flex flex-col overflow-hidden p-0",onMouseLeave:r,children:e.map((a,i)=>o.jsx(eRt,{quote:a,root:i===0,removeComparison:t,setFocused:n,href:s(a)},`${a.symbol}-${i===0}`))})});c5e.displayName="FinanceStockHistoryComparisonList";const u5e="recent-tickers:2",tRt=5,nRt=()=>{if(typeof window>"u")return[];try{const e=Re.getItem(u5e);return e?JSON.parse(e):[]}catch{return[]}},dse=e=>{if(!(typeof window>"u"))try{Re.setItem(u5e,JSON.stringify(e))}catch{}},G$=()=>{const[e,t]=f.useState([]);f.useEffect(()=>{t(nRt())},[]);const n=f.useCallback(s=>{t(a=>{const i=a.filter(c=>c.symbol!==s.symbol),l=[s,...i].slice(0,tRt);return dse(l),l})},[]),r=f.useCallback(()=>{t([]),dse([])},[]);return f.useMemo(()=>({recentTickers:e,addRecentTicker:n,clearRecentTickers:r}),[e,n,r])},d5e=f.memo(({defaultSuggestions:e=[],placeholder:t,type:n="header",onClick:r,hideRecent:s=!1,inputClassName:a})=>{const[i,l]=f.useState(!1),[c,u]=f.useState(""),[d,m]=f.useState(null),p="finance-navigational-searchbar",{isMobileStyle:h}=xe(),{$t:g}=Z(),{country:y}=c_e(),v=ht(),{data:x,isLoading:b}=We({queryKey:kJ(c,y),queryFn:()=>KP({query:c,reason:p,country:y}),staleTime:0,enabled:i}),_=f.useRef(null),w=gt(),C=f.useCallback(G=>{G?.url&&w.push(G.url)},[w]),S=r??C,E=g(h?{defaultMessage:"Enter Symbol",id:"Z+VSV2W9rg"}:{defaultMessage:"Search for companies, tickers, or crypto",id:"qKfwse3EGh"}),M=f.useRef(c);f.useEffect(()=>{M.current=c,m(c===""?null:0)},[c]);const k=f.useMemo(()=>e?.length&&c===""?"suggestions":x?.length&&c===""?"trending":"search",[e,c,x?.length]),A=f.useMemo(()=>{if(k==="suggestions")return g({defaultMessage:"Suggested",id:"a0lFbMbzyl"});if(k==="trending")return g({defaultMessage:"Trending",id:"ll/ufR0/ED"})},[k,g]),R=f.useMemo(()=>{if(k==="suggestions")return e;const G=x?.filter(J=>J.category==="ticker");return G?G.map(J=>({symbol:J.query??"",name:J.title??"",image:J.image??"",darkImage:J.image_dark??"",url:J.url??"",exchange:J.metadata?.price_info?.exchange??"",country:J.metadata?.price_info?.exchangeCountry??"",currency:J.metadata?.price_info?.currency??"",change:J.metadata?.price_info?.changePercentage??void 0,currentPrice:J.metadata?.price_info?.currentPrice??void 0,changesPercentage:J.metadata?.price_info?.changePercentage??void 0})):[]},[x,e,k]),{recentTickers:O,addRecentTicker:L}=G$(),P=f.useMemo(()=>({recentTickers:O.length&&c===""&&!s?O:[],suggestions:R?.length?R:[]}),[O,R,c,s]),N=f.useMemo(()=>[...P.recentTickers,...P.suggestions],[P.recentTickers,P.suggestions]);f.useEffect(()=>{d!==null&&d>T.current-1&&m(Math.max(0,T.current-1))},[P,d]);const T=f.useRef(0),j=f.useRef(null),F=f.useRef(N);f.useEffect(()=>{T.current=P.recentTickers.length+P.suggestions.length},[P]),f.useEffect(()=>{j.current=d},[d]),f.useEffect(()=>{F.current=N},[N]);const U=f.useCallback(G=>{u(G)},[]),V=f.useCallback(()=>{requestAnimationFrame(()=>{_.current&&_.current.focusAtEnd()})},[]),$=f.useCallback(G=>{S(G),l(!1),u(""),G&&L({symbol:G.symbol,name:G.name,image:G.image,darkImage:G.darkImage,url:G.url,exchange:G.exchange,country:G.country,currency:G.currency,change:G.change,currentPrice:G.currentPrice,changesPercentage:G.changesPercentage})},[L,S,l,u]),z=f.useCallback(G=>{const J=T.current;G.key==="ArrowDown"?(m(q=>q===null?0:Math.min(q+1,J-1)),V()):G.key==="ArrowUp"?(m(q=>q===null?0:Math.max(q-1,0)),V()):G.key==="Enter"&&j.current!==null&&(l(!1),$(F.current[j.current]))},[V,$]),Q=f.useCallback(()=>{l(!1),m(null),window.removeEventListener("keydown",z)},[z]),Y=f.useCallback(()=>{l(!0),window.addEventListener("keydown",z),window.addEventListener("click",Q,{once:!0})},[Q,z]),W=f.useCallback(G=>{G.stopPropagation()},[]);f.useEffect(()=>{v.prefetchQuery({queryKey:kJ("",y),queryFn:()=>KP({query:"",reason:p,country:y}),staleTime:0})},[v,y,p]),Hd(()=>{window.removeEventListener("click",Q),window.removeEventListener("keydown",z)});const X=f.useCallback(()=>{l(!1),m(null)},[]);return o.jsxs("div",{className:B("relative",{"pt-one md:w-full md:max-w-[360px]":n==="header","w-full":n==="inline"}),onClick:W,children:[o.jsx(Pr,{type:"search",placeholder:t??E,isMobileUserAgent:!1,onFocus:Y,onChange:U,className:B("!focus:ring-super/50 dark:focus:!ring-super/50 bg-subtler h-9 w-full !border-none !py-0",{"!bg-subtlest":n==="inline"},a),ref:_}),o.jsx(Ke,{children:i&&o.jsx(f5e,{title:A,isLoadingSuggestions:b,items:P,value:c,focusedIndex:d,onScrimClick:X,setIsFocused:l,setValue:u,type:n,hideRecent:s,openAsset:$})})]})});d5e.displayName="FinanceNavigationalSearchbar";const f5e=f.memo(({title:e,isLoadingSuggestions:t,items:n,value:r,focusedIndex:s,onScrimClick:a,setIsFocused:i,setValue:l,type:c,hideRecent:u,openAsset:d})=>{const{recentTickers:m,clearRecentTickers:p}=G$(),{isMobileStyle:h}=xe(),{$t:g}=Z(),{inApp:y}=Vo(),v=f.useCallback(()=>{p()},[p]),x=f.useMemo(()=>o.jsx("div",{className:"flex h-0 items-center",children:o.jsx(Te,{icon:Rt,size:"tiny",pill:!0,onClick:v,extraCSS:"-mr-sm opacity-50 hover:opacity-100",toolTip:g({defaultMessage:"Clear recents",id:"4k9F3xn5kg"})})}),[v,g]);return!n.suggestions?.length&&!t?null:o.jsxs(o.Fragment,{children:[o.jsx(ge.div,{className:B({"top-headerHeight bg-base fixed inset-x-0 bottom-0 md:hidden":c==="header",hidden:c==="inline"}),onClick:a,initial:{opacity:0},animate:{opacity:.8},exit:{opacity:0},transition:{ease:rn,duration:.2}}),o.jsx(ge.div,{className:B("md:w-auto",{"top-headerHeight md:-inset-x-xl fixed inset-x-0 w-screen md:absolute md:top-full":c==="header","absolute inset-x-0 top-full":c==="inline"}),initial:{opacity:0,y:-10,scale:h?1:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:h?1:.98},transition:{ease:rn,duration:.2},children:o.jsx(H,{variant:"raised",className:B("md:translate-y-xs relative flex flex-col overflow-hidden shadow-md",{"rounded-b-xl md:rounded-xl md:border md:shadow-xl":c==="header","rounded-xl border shadow-xl":c==="inline","-mt-one":y&&c==="header"}),children:n.suggestions&&n.suggestions.length>0?o.jsxs(o.Fragment,{children:[!!m.length&&r===""&&!u&&o.jsxs(o.Fragment,{children:[o.jsx(dO,{title:g({defaultMessage:"Recent",id:"iXpep1vGVo"}),trailing:x}),o.jsx("div",{className:"gap-xs p-sm flex flex-wrap",children:n.recentTickers.map((b,_)=>o.jsx(m5e,{ticker:b,isFocused:s===_,openAsset:d},`${b.symbol}-recent`))})]}),e?o.jsx(dO,{title:e}):o.jsx(H,{className:"border-b"}),n.suggestions.map((b,_)=>o.jsx(p5e,{ticker:b,openAsset:d,isFocused:s===_+n.recentTickers.length,setIsFocused:i,setValue:l},b.symbol+"suggestion"))]}):t?o.jsx("div",{className:"p-md flex items-center justify-center opacity-50",children:o.jsx($r,{size:14})}):n.suggestions?.length===0&&r!==""?o.jsx(D,{variant:"small",color:"light",className:"p-md text-center",children:g({defaultMessage:"No results",id:"jHJmjfxD4s"})}):null})})]})});f5e.displayName="NavigationalMenu";const dO=f.memo(({title:e,trailing:t})=>o.jsxs("div",{className:"bg-subtler gap-sm px-md py-sm flex items-center justify-between",children:[o.jsx(D,{variant:"tinyMono",color:"light",children:e}),t]}));dO.displayName="Header";const m5e=f.memo(({ticker:e,isFocused:t,openAsset:n})=>o.jsxs(H,{className:"pl-xs pr-sm group relative inline-flex cursor-pointer overflow-hidden rounded-full border py-0.5",as:"button",onClick:()=>n(e),children:[o.jsx(H,{className:B("absolute inset-0 rounded-full group-hover:opacity-50",t?"opacity-50":"opacity-0"),variant:"raisedOffset"}),o.jsxs("div",{className:"gap-xs relative flex items-center",children:[o.jsx(C3,{watchlistType:"FINANCE",image:e.image,imageDark:e.darkImage,alt:e.name,imageClassName:"!size-4 overflow-hidden rounded"}),o.jsx(D,{variant:"tiny",children:e.name}),o.jsx(D,{variant:"tinyMono",color:"light",children:e.symbol})]})]}));m5e.displayName="NavigationalSearchbarRecentItem";const p5e=f.memo(({ticker:e,isFocused:t,openAsset:n})=>{const{addRecentTicker:r}=G$(),s=f.useCallback(()=>{r(e),n(e)},[r,e,n]);return o.jsxs(H,{className:"gap-sm px-md py-sm group relative flex cursor-pointer appearance-none items-center justify-between border-b text-left last:border-b-0",onClick:s,as:"button",children:[o.jsx(H,{className:B("absolute inset-0 opacity-0 group-hover:opacity-50",t&&"opacity-50"),variant:"raisedOffset"}),o.jsxs("div",{className:"gap-md relative flex w-full items-center justify-between",children:[o.jsxs("div",{className:"gap-sm flex min-w-0 items-center",children:[o.jsx(C3,{watchlistType:"FINANCE",image:e.image,imageDark:e.darkImage,alt:e.name,className:"shrink-0 overflow-hidden rounded"}),o.jsxs("div",{className:"min-w-0",children:[o.jsx(D,{variant:"smallBold",className:"truncate",children:e.name}),o.jsx(D,{variant:"tinyMono",color:"light",children:o.jsx(yk,{symbol:e.symbol,exchange:e.exchange,country:e.country})})]})]}),o.jsxs("div",{className:"gap-sm flex items-center",children:[e.currentPrice&&e.currency?o.jsx(D,{variant:"tinyMono",color:"light",children:e.currentPrice.toLocaleString("en-US",{style:"currency",currency:e.currency})}):null,e.change?o.jsx(km,{change:e.change,variant:"tinyMono",includeIcon:!0}):null,o.jsx(ce,{icon:Kn,size:"sm",className:"text-quiet -mr-xs"})]})]})]})});p5e.displayName="NavigationalSearchbarItem";const h5e=f.memo(({peers:e,addComparison:t})=>{const{$t:n}=Z(),r=f.useMemo(()=>e.map(s=>s)?.slice(0,5),[e]);return o.jsx(H,{className:"flex flex-col",children:o.jsx(H,{className:"z-10 w-full",children:o.jsx(d5e,{placeholder:n({defaultMessage:"Compare to...",id:"54IHNaS6Nj"}),hideRecent:!0,defaultSuggestions:r,type:"inline",onClick:s=>{s&&t({symbol:s.symbol,name:s.name,image:s.image,imageDark:s.darkImage,exchange:s.exchange,price:s.currentPrice,currency:s.currency,historicalChange:s.change,historicalPercentChange:s.changesPercentage})}})})})});h5e.displayName="FinanceStockHistoryChartComparisonSearch";const rRt=I.memo(({children:e})=>o.jsx(Or,{fallback:null,children:o.jsx("div",{className:"h-full",children:e})}));rRt.displayName="CanonicalSidebarSection";const sRt=I.memo(({children:e,className:t})=>o.jsx("div",{className:B("mt-md pb-lg space-y-lg",t),children:e}));sRt.displayName="CanonicalSidebarColumn";const aRt=I.memo(({children:e,className:t})=>o.jsx(D,{variant:"smallBold",className:B("pb-sm px-sm",t),children:e}));aRt.displayName="CanonicalSidebarSectionTitle";const g5e=I.memo(({children:e,className:t})=>o.jsx(sn,{className:B("py-sm",t),children:e}));g5e.displayName="CanonicalSidebarSectionContent";const oRt="-my-sm gap-x-sm grid w-full grid-cols-[1fr_min-content_min-content]",iRt=I.memo(e=>{const{isLoading:t,isStale:n,movers:r,skinny:s,approxItemCount:a,itemProps:i}=e;return o.jsx(g5e,{className:B("overflow-hidden duration-150",{"opacity-50":t}),children:o.jsxs(ge.div,{className:B(oRt,{"pointer-events-none invisible":t}),initial:{opacity:0,filter:"grayscale(0%)"},animate:{opacity:n?.75:1,filter:n?"grayscale(50%)":"grayscale(0%)"},exit:{opacity:0},transition:{duration:.5},"aria-hidden":t,children:[t&&o.jsx(lRt,{size:a??5,...e}),r?.map(l=>f.createElement(y5e,{...i,key:l.symbol,symbol:l.symbol,price:l.price,exchange:l.exchange??void 0,currency:l.currency??void 0,name:l.name??"",changesPercentage:l.changesPercentage,skinty:s,useImage:!s,image:l.image??void 0,imageDark:l.imageDark??void 0}))]},"top-mover")})});iRt.displayName="MoverTable";const y5e=e=>e.skinty?o.jsx(uRt,{...e}):o.jsx(cRt,{...e}),lRt=({size:e,...t})=>[...Array(e).fill(null)].map((n,r)=>o.jsx(y5e,{...t,symbol:"NVDA",price:110,currency:"USD",name:"XXX",changesPercentage:110,exchange:"XX",useImage:!t.skinny,skinty:t.skinny},r)),cRt=e=>o.jsx(iwe,{symbol:e.symbol,className:"col-span-3 flex min-w-0",children:o.jsx(dRt,{...e})});function uRt({symbol:e,name:t,price:n,currency:r,changesPercentage:s,trailingComponent:a}){return o.jsxs(iwe,{symbol:e,className:"col-span-3 grid grid-cols-subgrid",children:[o.jsx(owe,{name:t,variant:"small"}),o.jsx(Nm,{price:n,currency:r}),o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(H_,{changesPercentage:s,includeIcon:!0,variant:"tiny",className:"w-full"}),a&&a({symbol:e})]})]})}const H_=I.memo(({changesPercentage:e,background:t,variant:n,includeIcon:r=!1,className:s})=>o.jsx(km,{change:e,variant:n,includeIcon:r,background:t,mono:!1,className:s}));H_.displayName="FinanceMoverChange";function dRt({symbol:e,price:t,currency:n,name:r,changesPercentage:s,useImage:a=!0,exchange:i,image:l,imageDark:c,trailingComponent:u,className:d}){return o.jsxs("div",{className:B("gap-sm flex w-full min-w-0 items-center",{"-ml-xs":!!a},d),children:[a&&o.jsx(H3,{symbol:e,src:l??"",srcDark:c}),o.jsxs(H,{className:"flex min-w-0 flex-1 flex-col",children:[o.jsxs(H,{className:"gap-md flex min-w-0 items-center justify-between",children:[o.jsx(owe,{name:r}),o.jsx(Nm,{price:t,currency:n})]}),o.jsxs(H,{className:"gap-sm flex items-center justify-between text-right",children:[o.jsx(D,{variant:"tinyMono",className:"whitespace-nowrap",color:"light",children:o.jsx(yk,{symbol:e,exchange:i})}),o.jsx(H_,{changesPercentage:s,background:!1})]})]}),u&&u({symbol:e})]})}const q$=({shouldAnimate:e,animationDuration:t=1,animationName:n})=>{const r=f.useRef(0),s=f.useRef(null),[a,i]=f.useState(!1);f.useEffect(()=>{if(s.current&&(clearTimeout(s.current),s.current=null),e)i(!0),r.current=performance.now();else if(r.current>0){const m=(performance.now()-r.current)/(t*1e3)%1;s.current=setTimeout(()=>{i(!1),r.current=0,s.current=null},(1-m)*t*1e3)}else i(!1),r.current=0;return()=>{s.current&&(clearTimeout(s.current),s.current=null)}},[e,t]);const l=B(n,"fill-mode-both h-full w-auto shrink-0 transform-gpu will-change-transform"),c="h-full w-auto shrink-0 transform-gpu";return f.useMemo(()=>({_shouldAnimate:a,sequenceProps:{className:l,style:{animationDuration:`${t}s`}},staticProps:{className:c}}),[a,t,l])},oT=f.memo(({children:e,className:t,size:n,aspectRatio:r=1})=>o.jsx("div",{className:B("text-foreground flex shrink-0 items-center justify-start overflow-hidden",t),style:{height:n,aspectRatio:r},children:e}));oT.displayName="SpriteAnimationWrapper";const v5e=f.memo(({lineThickness:e,...t})=>o.jsxs("svg",{width:"2820",height:"74",viewBox:"0 0 2820 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[o.jsx("path",{d:"M29.6848 25.4603L48.3092 41.1547V64.3955L29.6848 49.0293M29.6848 25.4603L10.9465 41.2436V64.7306L29.6316 49.0293M29.6848 25.4603H3.35229V49.1113H10.3379M29.6848 25.4603H56.0553V49.1113H48.6552M29.6848 25.4603L10.9465 9.77618V24.7752M29.6848 25.4603L48.3092 9.77618V24.7591M29.6848 25.4603L29.6848 2.77313V24.382M29.6848 25.4603V49.1113M29.6848 25.4603V71.6755V49.0839",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M209.685 49.029L226.532 65.889V42.256L209.685 25.46L189.647 39.835L189.532 64.785L207.207 50.797",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M209.685 25.46L207.549 47.423V71.566L209.685 49.084M209.685 25.46L183.516 24.701V47.433L189.594 47.823M209.685 25.46L235.855 26.937V50.943L226.655 50.299M209.685 25.46L192.558 8.218V24.1M209.685 25.46L229.708 10.542V26.546M209.685 25.46L211.798 2.855V24.76M209.685 25.46V49.111M269.685 49.029L285.993 66.318V42.675L269.685 25.46L249.061 39.22V63.11L266.369 51.263",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M269.685 25.46L266.606 47.86V71.511L269.685 49.084M269.685 25.46L243.571 22.835V46.558L248.794 47.068M269.685 25.46L295.788 27.702V51.6L286.585 50.723M269.685 25.46L253.227 7.67V24.726M269.685 25.46L290.377 11.28V27.133M269.685 25.46L272.71 2.923V23.098M269.685 25.46V49.111M329.685 49.03L345.299 67.137V43.3L329.685 25.46L308.331 38.51V62.29L325.293 51.73",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M329.685 25.46L325.565 47.635V71.334L329.685 49.084M329.685 25.46L304.726 21.906V45.738L307.934 46.296M329.685 25.46L355.721 28.687V52.584L345.937 51.279M329.685 25.46L314.048 7.233V23.17M329.685 25.46L351.015 11.882V27.907M329.685 25.46L333.714 2.992V22.74M329.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M389.685 49.029L404.201 67.538L404.352 43.92L389.685 25.46L367.86 37.607V61.387L384.2 52.113",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M389.685 25.46L384.523 47.3V71.156L389.685 49.084M389.685 25.46L363.9 20.922V44.754L367.262 45.322M389.685 25.46L415.508 29.78V54.723L404.436 51.688M389.685 25.46L375.021 6.57701V22.724",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M389.685 25.46L411.715 12.838V29.235M389.685 25.46L394.754 3.19701V22.344M389.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M449.685 49.029L463.072 68.404L463.215 44.53L449.685 25.46L427.054 36.842V60.595L442.826 52.515",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M449.685 25.46L443.117 47.129V70.924L449.685 49.084M449.685 25.46L424.143 19.8V44.76L426.599 44.184M449.685 25.46L475.28 30.683V54.58L463.735 52.113M449.685 25.46L436.176 5.976V22.356",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M449.685 25.46L472.414 13.727V30.403M449.685 25.46L456.192 3.539L456.33 21.994M449.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M509.685 49.029L521.673 68.656L521.879 45.127L509.685 25.46L486.385 35.611V59.501L501.389 52.742",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M509.685 25.46L501.711 46.575V70.418L509.685 49.084M509.685 25.46L484.477 18.515V42.481L485.621 42.781M509.685 25.46L534.754 32.077V55.906L522.17 52.482",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M509.685 25.46L497.606 5.374L497.3 22.124M509.685 25.46L533.189 14.79V31.499M509.685 25.46L517.651 3.84V21.876M509.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M569.685 49.03L580.306 69.736V45.91L569.685 25.46L545.564 34.271V58.134L559.659 52.802",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M569.685 25.46L560 46.322V69.98L569.685 49.084M569.685 25.46L545.086 17.121V40.813L545.119 40.824M569.685 25.46L594.185 33.444L594.238 57.334L580.581 52.76M569.685 25.46L559.096 4.69V21.458M569.685 25.46L593.98 16.31L594.119 33.415M569.685 25.46L579.4 4.36V21.53M569.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M629.685 49.03L638.275 70.78V46.58L629.685 25.46L604.774 32.603V56.576L617.836 52.61",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M629.685 25.46L618.29 45.14V69.27L629.685 49.084M629.685 25.46L605.937 15.508V32.273M629.685 25.46L653.478 35.112V58.838L638.453 52.696M629.685 25.46L621.102 3.98V21.387",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M629.685 25.46L654.664 17.842V41.941L653.7 42.217M629.685 25.46L641.361 5.084V21.818M629.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M689.685 49.029L696.089 71.244V47.065L689.685 25.46L664.074 30.744V54.552L675.799 52.019",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M689.685 25.46L676.002 44.34V68.094L689.685 49.084M689.685 25.46L667.092 14.721V29.977M689.685 25.46L712.323 36.944V60.698L696.503 52.601M689.685 25.46L683.353 3.433V21.908",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M689.685 25.46L715.303 19.948V43.855L712.658 44.398M689.685 25.46L703.459 6.06799V22.442M689.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M749.685 49.029L753.271 71.747V47.493L749.685 25.46L723.558 28.365V52.201L733.357 51.009",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M749.685 25.46L733.714 43.157V66.918L749.685 49.084M749.685 25.46L728.673 11.707V27.76M749.685 25.46L770.772 38.83V62.694L753.503 51.57M749.685 25.46L746.12 3.05V22.72",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M749.685 25.46L775.789 22.19V46.083L771.103 46.627",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M765.679 23.49V7.408L749.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M809.685 49.029L809.977 72.045L809.685 47.568V25.46H783.345V49.467L790.992 49.34",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M809.685 25.46L791.205 41.503V64.753L809.685 49.083M809.685 25.46L790.832 9.656V25.143M809.685 25.46L828.674 41.127V64.754L809.685 49.11M809.685 25.46L809.343 2.735",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M809.685 25.46L836.063 25.033V48.753L829.072 48.848M809.685 25.46L828.172 9.24001V25.106M809.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M869.685 49.03L866.405 71.53L866.065 47.01L869.685 25.46L843.558 22.37V46.186L848.429 46.717",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M869.685 25.46L848.696 38.865V62.789L866.042 51.462M869.685 25.46L854.76 7.497V23.406M869.685 25.46L885.633 43.096V66.959L869.685 49.111M869.685 25.46L873.235 3.132V22.9",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M869.685 25.46L895.82 28.304V52.088L885.776 50.944M869.685 25.46L890.726 11.618V27.652M869.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M929.685 49.028L922.004 70.99V46.713L929.685 25.46L904.439 18.734V42.44L906.137 42.884",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M929.685 25.46L906.294 35.826V59.59L921.769 52.64M929.685 25.46L917.34 5.48701L917.202 21.692M929.685 25.46L942.076 45.065V68.9L929.685 49.111M929.685 25.46L937.401 3.78801V21.63",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M929.685 25.46L954.747 31.858V55.698L942.558 52.481M929.685 25.46L953.068 14.763V31.197M929.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M989.685 49.03L977.622 69.38V45.26L989.685 25.46L966.203 15.125V31.444",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M989.685 25.46L964.683 32.077V56.008L977.63 52.423M989.685 25.46L981.627 4.01001V21.74M989.685 25.46L997.788 46.787V70.513L989.685 49.111M989.685 25.46L1001.81 5.23701V21.8",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M989.685 25.46L1013.17 35.468V59.279L998 52.711",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1013.48 42.742L1014.79 42.37V18.372L989.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1049.68 49.029L1034.75 66.743V43.12L1049.68 25.46L1028.76 11.652V27.197",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1049.68 25.46L1023.45 28.18V52.112L1033.53 50.949M1049.68 25.46L1046.22 3.026V22.739M1049.68 25.46L1053.2 47.361V71.388L1049.68 49.111M1049.68 25.46L1065.79 7.507V23.295",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1049.68 25.46L1070.59 38.786V62.78L1053.32 51.489",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1070.94 46.661L1075.96 46.101V22.391L1049.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1108.51 49.947L1090.23 64.228V40.474L1109.68 25.46L1091.89 8.78101V24.188",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1109.68 25.46L1084.75 24.27V48.175L1090.22 48.405M1109.68 25.46L1110.87 2.862L1110.71 24.747M1109.68 25.46L1108.57 47.033V71.716L1109.68 49.111M1109.68 25.46L1129.08 10.132V25.747",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1109.68 25.46L1127.46 41.848V65.568L1109.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1127.63 49.715L1135.96 50.034V26.328L1109.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1163.88 52.298L1147.7 61.414V37.531L1169.68 25.46L1155.29 6.59399V22.504",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1169.68 25.46L1143.85 20.662V44.552L1147.51 45.194M1169.68 25.46L1175.13 3.327L1174.79 22.093M1169.68 25.46L1164.62 47.033L1164.2 71.17L1169.68 49.111L1184.23 67.947V44.145L1169.68 25.46ZM1169.68 25.46L1191.87 12.948V28.924",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1184.43 51.662L1195.53 54.743V29.828L1169.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1220.25 52.825L1206.12 58.508V34.662L1229.68 25.46L1218.52 5.036V21.422",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1229.68 25.46L1204.75 17.627V41.49L1205.54 41.7M1229.68 25.46L1238.81 4.256L1238.64 21.334M1229.68 25.46L1220.73 46.404V70.24L1229.68 49.111L1240.89 69.588V45.758L1229.68 25.46ZM1229.68 25.46L1253.58 15.873V32.521",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1241.03 52.54L1254.41 56.678V32.863L1229.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1289.68 25.46L1264.5 32.081V55.974L1277.2 52.472M1289.68 25.46L1281.65 3.97V21.309M1289.68 25.46L1266.25 14.747V31.563M1289.68 25.46L1301.82 5.35V21.67",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1289.68 49.111L1277.57 69.174V45.365L1289.68 25.46L1314.76 18.389V42.272L1314.08 42.458",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1289.68 25.46L1297.73 46.798V70.544L1289.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1297.9 52.673L1313.16 59.44V35.488L1289.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1349.68 25.46L1323.79 29.631V53.515L1334.71 51.624M1349.68 25.46L1344.45 3.259V22.232M1349.68 25.46L1327.68 12.87V28.975M1349.68 25.46L1364.34 6.717V22.43",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1349.68 49.111L1335.01 67.943V44.053L1349.68 25.46L1375.61 20.877V44.761L1372.31 45.315",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1349.68 25.46L1354.73 47.317V71.173L1349.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1354.79 52.049L1371.71 61.573V37.785L1349.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1409.68 25.46L1383.5 27.452V51.428L1392.53 50.601M1409.68 25.46L1407.03 2.95801V23.477M1409.68 25.46L1389.23 11.092V26.894M1409.68 25.46L1426.44 7.97501V23.577",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1409.68 49.112L1393.01 66.522V42.522L1409.68 25.46L1435.92 23.037V46.975L1430.43 47.422",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1409.68 25.46L1412.44 47.563V71.501L1409.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1412.62 51.087L1430.15 63.391V39.466L1409.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1469.68 25.46L1443.5 25.626V49.323L1450.99 49.239M1469.68 25.46L1469.63 2.79401V2.86401M1469.68 25.46L1450.9 9.64301V25.562M1469.68 25.46L1488.17 9.37001V24.736",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1469.68 49.112L1451.33 65.182V41.237L1469.68 25.46L1496.16 25.142V48.807L1488.91 48.89",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1469.68 25.46L1470 47.754V71.638L1469.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1469.68 49.029L1488.52 64.754V40.916L1469.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1529.68 25.46L1503.5 23.874V47.758L1509.37 48.043M1529.68 25.46L1531.55 2.84801V23.465M1529.68 25.46L1512.36 8.33001V24.23M1529.68 25.46L1549.57 10.545V26.025",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1529.68 49.111L1509.84 63.869V40.061L1529.68 25.46L1556.02 26.756V50.694L1547.51 50.182",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1529.68 25.46L1527.94 47.918V71.474L1529.68 49.111V25.46ZM1529.68 25.46L1547.05 42.091V66.098L1529.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1589.68 25.46L1563.5 22.18V46.007L1568.24 46.554M1589.68 25.46L1593.34 3.09401V22.586M1589.68 25.46L1573.79 7.40001V23.212M1589.68 25.46L1610.79 11.584V27.55",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1585.87 51.573L1568.66 62.693V38.803L1589.68 25.46L1615.89 28.242V52.307L1606.05 51.107",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1589.68 25.46L1586.05 47.645V71.31L1589.68 49.111V25.46ZM1589.68 25.46L1605.57 43.075V67.082L1589.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1649.68 25.46L1623.96 20.819V44.572L1627.42 45.172M1649.68 25.46L1654.72 3.17599V21.958M1649.68 25.46L1635.13 6.55299V22.64M1649.68 25.46L1671.73 12.842V28.897",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1644.41 52.059L1627.59 61.463V37.628L1649.68 25.46L1675.55 29.8V54.747L1664.45 51.7",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1649.68 25.46L1644.38 47.317V71.255L1649.68 49.111V25.46ZM1649.68 25.46L1664.25 44.019V67.929L1649.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1709.68 25.46L1684.35 19.59V43.25L1686.64 43.77M1709.68 25.46L1716.47 3.58701V21.618M1709.68 25.46L1696.43 5.87001V22.235M1709.68 25.46L1732.55 14.018V30.154",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1702.93 52.469L1686.93 60.424V36.452L1709.68 25.46L1735.25 31.14V54.76L1722.16 51.964",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1709.68 25.46L1702.88 47.085V70.9L1709.68 49.111V25.46ZM1709.68 25.46L1722.9 44.757V68.558L1709.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1769.68 25.46L1744.79 18.471V42.224L1746.02 42.562M1769.68 25.46L1777.81 3.99701V21.415M1769.68 25.46L1757.68 5.32301V21.924M1769.68 25.46L1793.25 15.056V31.36",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1761.32 52.76L1746.01 59.44V35.467L1769.68 25.46L1794.76 32.084V55.97L1781.58 52.363",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1769.68 25.46L1761.49 46.729V70.489L1769.68 49.111V25.46ZM1769.68 25.46L1781.63 45.222V69.146L1769.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1829.68 25.46L1805.1 17.39V41.163L1805.4 41.259M1829.68 25.46L1839 4.35201V21.335M1829.68 25.46L1818.87 4.703V21.707M1829.68 25.46L1853.83 15.986V32.568",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1820.07 52.787L1805.53 58.347V34.647L1829.68 25.46L1854.34 33.21V57.037L1841 52.75",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1829.68 25.46L1820.32 46.305V70.148L1829.68 49.111V25.46ZM1829.68 25.46L1840.49 45.66V69.638L1829.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1889.68 25.46L1865.62 16.478L1865.29 33.368M1889.68 25.46L1900.06 4.68V21.433M1889.68 25.46L1879.96 4.42V21.716M1889.68 25.46L1914.28 16.834V40.88L1914.24 40.895M1889.68 25.46L1865.16 33.554V57.444L1879.17 52.685",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1899.9 52.822L1913.91 57.912V34.058L1889.68 25.46L1879.29 45.868V69.806L1889.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1889.68 49.029L1899.43 69.806V46.015L1889.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1949.68 25.46L1925.99 15.695V31.95M1949.68 25.46L1961.1 5.063V21.494M1949.68 25.46L1940.84 4.092V21.5M1949.68 25.46L1974.68 17.79L1974.47 41.702L1973.9 41.872M1949.68 25.46L1924.76 32.706V56.596L1938.1 52.605",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1958.83 52.837L1973.52 58.814V34.733L1949.68 25.46L1938.23 45.615V69.41L1949.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1949.68 49.029L1958.5 70.298V46.37L1949.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2009.68 25.46L1986.3 14.757V31.231M2009.68 25.46L2021.92 5.44601V21.716M2009.68 25.46L2001.76 3.87401V21.862M2009.68 25.46L2034.73 18.584V42.522L2033.42 42.892M2009.68 25.46L1984.49 31.943V55.858L1997.18 52.461",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2017.96 52.797L2033.06 59.525V35.698L2009.68 25.46L1997.49 45.136V69.026L2009.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2009.68 49.029L2017.51 70.544V46.63L2009.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2069.68 25.46L2046.84 14.317V30.256M2069.68 25.46L2082.74 5.82901V21.933M2069.68 25.46L2062.64 3.71001V21.922M2069.68 25.46L2095.2 19.377V43.287L2092.94 43.803M2069.68 25.46L2044.28 31.26V55.065L2056.51 52.199",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2076.98 52.648L2092.73 60.29V36.218L2069.68 25.46L2056.73 44.713V68.576L2069.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2069.68 49.03L2076.74 70.79V47.018L2069.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2129.68 25.46L2107.19 13.74V29.597M2129.68 25.46L2143.31 6.211V22.141M2129.68 25.46L2123.43 3.464V21.942M2129.68 25.46L2155.41 20.033L2155.2 43.916L2152.65 44.436M2129.68 25.46L2103.94 30.658V54.463L2115.78 52.002",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2136.31 52.545L2152.21 60.783V36.874L2129.68 25.46L2115.95 44.384V68.274L2129.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2129.68 49.029L2135.9 70.968V47.032L2129.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2189.68 25.46L2167.64 13.069V28.892M2189.68 25.46L2204.01 6.43V22.382M2189.68 25.46L2184.31 3.3V22.194M2189.68 25.46L2215.62 20.58V44.518L2212.13 45.137M2189.68 25.46L2163.85 29.865L2163.94 53.862L2174.73 51.834",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2195.71 52.442L2211.87 61.385V37.448L2189.68 25.46L2175.33 44.111V67.974L2189.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2189.68 49.029L2195.25 71.118V47.114L2189.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2249.68 25.46L2227.97 12.556V28.31M2249.68 25.46L2264.62 6.676V22.45M2249.68 25.46L2244.76 3.08V22.463M2249.68 25.46L2275.62 21.072V45.229L2271.85 45.793M2249.68 25.46L2223.76 29.346L2223.94 53.233L2234.52 51.539",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2254.75 52.153L2271.51 61.713V37.913L2249.68 25.46L2234.72 43.728V67.618L2249.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2249.68 49.029L2254.55 71.146V47.14L2249.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2309.68 25.46L2288.37 12.072V27.909M2309.68 25.46L2325.14 7.196V22.866M2309.68 25.46L2305.5 3.026V22.507M2309.68 25.46L2335.72 21.7L2335.62 45.502L2331.57 46.066M2309.68 25.46L2284.77 28.853V52.66L2294.05 51.244",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2314.36 51.989L2331.05 62.26V38.46L2309.68 25.46L2294.2 43.51V67.29L2309.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2309.68 49.029L2313.94 71.378V47.36L2309.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2348.71 27.302V11.671L2369.68 25.46L2385.56 7.414V23.034",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2369.68 25.46L2366.04 2.944V23.073M2369.68 25.46L2395.82 22.11L2395.62 46.158L2391.12 46.671M2369.68 25.46L2343.55 28.222V52.167L2353.56 50.996",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2374.76 51.665L2390.75 62.643V38.813L2369.68 25.46L2353.78 43.14V67.003L2369.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2369.68 49.029L2373.21 71.378V47.332L2369.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2429.68 25.46L2409.04 11.326V26.962M2429.68 25.46L2446.08 7.66V23.246M2429.68 25.46L2426.62 2.944V23.177M2429.68 25.46L2455.93 22.548V46.568L2450.64 47.08M2429.68 25.46L2403.43 27.948V51.62L2413.16 50.69",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2433.12 51.449L2450.35 63.189V39.251L2429.68 25.46L2413.32 42.771V66.69L2429.68 49.112",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2429.68 49.03L2432.71 71.46V47.332L2429.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2489.68 25.46L2469.4 11.01V26.644M2489.68 25.46L2506.48 7.88001V23.456M2489.68 25.46L2487.23 2.91701V24.713M2489.68 25.46L2516 23.095V46.98L2510.45 47.43M2489.68 25.46L2463.4 27.429L2463.43 51.292L2472.71 50.521",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2492.62 51.175L2510.11 63.49V39.415L2489.68 25.46L2472.91 42.553V66.457L2489.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2489.68 49.029L2492.24 71.474V47.4L2489.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2549.68 25.46L2529.67 10.693V26.371M2549.68 25.46L2566.81 8.098V24.768M2549.68 25.46L2547.67 2.821V24.777M2549.68 25.46L2576.07 23.45V47.39L2570.31 47.765M2549.68 25.46L2523.37 27.019L2523.43 50.964L2532.28 50.339",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2551.97 50.759L2569.78 64.726V39.606L2549.68 25.46L2532.56 42.252V66.142L2549.68 49.112",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2549.68 49.029L2551.77 71.515V47.333L2549.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2609.68 25.46L2589.92 10.392V25.937M2609.68 25.46L2627.12 8.31701V23.877M2609.68 25.46L2608.05 2.80701V23.983M2609.68 25.46L2636.14 23.888V47.744L2629.74 48.075M2609.68 25.46L2583.34 26.663L2583.38 50.526L2591.88 50.069",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2611.76 50.677L2629.29 63.873V40.071L2609.68 25.46L2592.23 42.074V65.971L2609.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2609.68 49.029L2611.33 71.542V47.305L2609.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2669.68 25.46L2650.26 10.242V25.778M2669.68 25.46L2687.45 8.56301V24.107M2669.68 25.46L2668.45 2.79401V24.457M2669.68 25.46L2696.14 24.161V48.127L2689.77 48.364M2669.68 25.46L2643.32 26.335L2643.33 50.253L2651.65 49.893",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2671.01 50.121L2689.05 63.9V40.235L2669.68 25.46L2651.95 41.828V65.698L2669.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2669.68 49.029L2670.93 71.556V47.387L2669.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2729.68 25.46L2710.5 9.982V25.512M2729.68 25.46L2747.69 8.782V24.307M2729.68 25.46L2728.87 2.78V24.433M2729.68 25.46L2756.14 24.49V48.236L2749.71 48.449M2729.68 25.46L2703.29 25.782V49.597L2711.26 49.45",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2730.41 49.695L2748.94 64.53V40.59L2729.68 25.46L2711.6 41.705V65.493L2729.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2729.68 49.029L2730.61 71.638V47.606L2729.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2789.68 25.46L2770.67 9.72201V25.286M2789.68 25.46L2807.94 9.00001V24.505M2789.68 25.46L2789.16 2.76601V24.416M2789.68 25.46L2816.14 24.763V48.673L2809.16 48.789M2789.68 25.46H2763.29V49.337L2771.24 49.269",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2790.41 49.7L2808.83 64.72V40.727L2789.68 25.46L2771.41 41.493V65.383L2789.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2789.68 49.029L2790.25 71.611V47.742L2789.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M89.6848 25.4603L108.309 41.4828V65.1065L89.6848 49.0293M89.6848 25.4603L70.5359 40.7925L70.5892 64.669L89.6316 49.0293M89.6848 25.4603L89.0273 47.9151V71.6481L89.6848 49.0839M89.6848 25.4603L63.4071 24.7588V48.5542L70.0911 48.6959M89.6848 25.4603L115.988 25.7611V49.5761L108.665 49.4467M89.6848 25.4603L71.3722 9.03792L71.2884 24.5988M89.6848 25.4603L108.796 9.74877V25.4474M89.6848 25.4603L90.293 2.75943V24.3785M89.6848 25.4603V49.1113",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M149.676 25.4488L167.472 41.872L167.285 65.449L149.676 49.0179M149.676 25.4488L130.087 40.3914V64.2269L148.148 50.1661M149.676 25.4488L148.969 47.3567V71.6093L149.676 49.0725M149.676 25.4488L123.453 24.2184V47.9959L129.828 48.2643M149.676 25.4488L175.913 26.3511V50.1388L167.428 49.8028M149.676 25.4488L131.911 8.67098V24.5132M149.676 25.4488L169.243 10.0381V26.0706M149.676 25.4488L150.984 2.73438V24.3846M149.676 25.4488V49.0999",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"})]}));v5e.displayName="Sequence";const x5e=f.memo(({lineThickness:e,...t})=>o.jsx("svg",{width:"60",height:"74",viewBox:"0 0 60 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:o.jsx("path",{d:"M29.6848 25.4603L48.3092 41.4828V65.1065L29.6848 49.0293M29.6848 25.4603L10.5359 40.7925L10.5892 64.669L29.6316 49.0293M29.6848 25.4603L3.4071 24.8588V48.5542L10.0911 48.6959M29.6848 25.4603L55.9884 25.7611V49.5761L48.6649 49.4467M29.6848 25.4603L11.3722 9.03792L11.2884 24.5988M29.6848 25.4603L48.7956 9.74877V25.4474M29.6848 25.4603L29.63 2.75943M29.6848 25.4603V49.1113M29.63 71.6481L29.6848 49.0839",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"})}));x5e.displayName="Static";const fRt=e=>{switch(e){case"asIcon":return 4.7;case"normal":return 3.3}},z_=f.memo(({size:e=32,shouldAnimate:t=!0,lineThickness:n="asIcon",className:r})=>{const{_shouldAnimate:s,sequenceProps:a,staticProps:i}=q$({shouldAnimate:t,animationDuration:1,animationName:"animate-pplxIndicator"}),l=fRt(n);return o.jsx(oT,{size:e,className:r,aspectRatio:60/74,children:s?o.jsx(v5e,{lineThickness:l,...a}):o.jsx(x5e,{lineThickness:l,...i})})});z_.displayName="MarkSpinner";const b5e=Object.freeze(Object.defineProperty({__proto__:null,MarkSpinner:z_},Symbol.toStringTag,{value:"Module"})),fO="shadow-subtle rounded-lg border backdrop-blur-sm bg-white/75 dark:bg-subtlest",_5e=f.memo(()=>{const[e,t]=f.useState(!1),[n,r]=f.useState({x:0,y:0}),[s,a]=f.useState(!1),i=f.useCallback(()=>{t(!0)},[t]),l=f.useCallback(()=>{t(!1),r({x:0,y:0})},[t]),c=f.useCallback(m=>{const p=m.currentTarget.getBoundingClientRect(),h=p.width/2,g=p.height/2,y=m.clientX-p.left,v=m.clientY-p.top,x=y-h,b=v-g,_=150,w=Math.sqrt(x*x+b*b),C=Math.max(0,1-w/_)*.15,S=x*C,E=b*C;t(!0),r({x:S,y:E})},[t,r]),u=f.useCallback(m=>{m.key==="PrintScreen"&&a(!0),(m.metaKey||m.ctrlKey)&&m.shiftKey&&a(!0)},[a]),d=f.useCallback(()=>{a(!1)},[a]);return f.useEffect(()=>(document.addEventListener("keydown",u),document.addEventListener("keyup",d),()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",d)}),[u,d]),o.jsxs(H,{className:B("relative flex h-full items-center justify-center",fO),variant:"transparent",onMouseLeave:l,onMouseEnter:c,onMouseMove:c,onMouseOut:l,onMouseDown:i,onMouseUp:l,children:[o.jsx(H,{className:"flex h-full items-center justify-center",children:o.jsx(ge.div,{animate:{x:n.x,y:n.y},transition:{type:"spring",ease:"easeInOut",stiffness:200,damping:40},className:"flex aspect-square h-full items-center justify-center",children:o.jsx(z_,{size:20,shouldAnimate:e,className:"text-super"})})}),s&&o.jsx("div",{className:"hidden md:block",children:o.jsx(Na,{variant:"text",className:"-ml-1 h-4 w-auto pr-[10px] [&>svg]:h-4 [&>svg]:w-auto"})})]})});_5e.displayName="Mark";const fse=({children:e,animationId:t,showChange:n,absoluteChange:r,percentChange:s,currency:a,period:i,setPeriod:l,isLoading:c,periods:u})=>{const{isMobileStyle:d}=xe(),m=d?"tinyRegular":"small",p=d?35:38;return o.jsx(sn,{className:"overflow-hidden",children:o.jsxs(H,{className:"gap-y-sm md:gap-y-lg flex flex-col justify-between",children:[o.jsxs("div",{className:"p-md gap-sm z-[1] flex flex-wrap items-stretch justify-between md:flex-row",children:[o.jsxs("div",{className:"gap-x-sm flex h-full items-stretch",style:{height:p},children:[o.jsx(_5e,{}),o.jsx("div",{className:"gap-x-sm flex items-stretch justify-center",children:o.jsx(Gvt,{id:t,periods:u,period:i,setPeriod:l,className:fO})})]}),n&&o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:o.jsxs(H,{className:B("gap-x-sm px-sm flex items-center transition-all duration-500",fO),variant:"transparent",style:{height:p},children:[!!Number.isFinite(r)&&o.jsx(Nm,{price:r,currency:a??void 0,sign:!0,variant:m}),!!Number.isFinite(s)&&o.jsx(H_,{changesPercentage:s,background:!1,includeIcon:!0,variant:m})]})})]}),o.jsx(ge.div,{initial:{opacity:1},animate:{opacity:c?.5:1},transition:{duration:.5,delay:.5},children:e})]})})},w5e=({price:e,currency:t,change:n,percentChange:r,children:s,className:a,variant:i})=>{const l=f.useMemo(()=>({style:t?"currency":"decimal",currency:t??void 0,minimumFractionDigits:e<1e3?2:0,maximumFractionDigits:2}),[t,e]),c=i==="sm";return o.jsxs(H,{className:B("flex w-full flex-col",a),children:[o.jsxs(H,{className:"gap-sm flex w-full items-center justify-between",children:[o.jsx(D,{variant:c?"baseSemi":"entry-title-200",className:"m-0 p-0",children:o.jsx(ci,{value:e,format:l,animated:!0})}),o.jsxs(H,{className:"gap-xs flex items-center",children:[!c&&o.jsx(Nm,{price:n??0,currency:t,sign:!0,variant:c?"tiny":"base"}),o.jsx(H_,{changesPercentage:r??0,variant:i==="sm"?"tiny":"base",background:!1,includeIcon:!0})]})]}),o.jsx(H,{className:"gap-sm flex items-center justify-between",children:s})]})},C5e="flex items-center gap-xs truncate min-w-0",S5e="size-[.8rem] min-w-[.8rem] max-w-[.8rem] translate-y-[-.05rem] text-max",E5e=I.memo(({price:e,currency:t,change:n,percentChange:r,timestamp:s,open:a,closes:i,timezone:l,variant:c})=>{const{$t:u,locale:d}=Z(),m=f.useMemo(()=>{const p=s?new Date(s*1e3).toLocaleTimeString(d,{hour:"numeric",minute:"2-digit",day:"numeric",month:"short",second:c==="lg"?"2-digit":void 0,timeZoneName:"short",timeZone:l}):null;return!a&&i?c==="sm"?p:u({defaultMessage:"At close: {time}",id:"Fib7mn4gfB"},{time:p}):p},[s,d,a,u,i,l,c]);return o.jsx(w5e,{price:e,currency:t,change:n,percentChange:r,variant:c,children:o.jsxs(D,{variant:"tinyRegular",color:"light",className:C5e,children:[m,i&&o.jsx(Mie,{className:S5e})]})})});E5e.displayName="StockPriceBig";const M5e=I.memo(({price:e,currency:t,change:n,percentChange:r,timestamp:s,timezone:a,variant:i})=>{const{$t:l,locale:c}=Z(),u=new Date(s*1e3).toLocaleTimeString(c,{hour:"numeric",minute:"2-digit",day:"numeric",month:"short",second:i==="lg"?"2-digit":void 0,timeZoneName:i==="lg"?"short":void 0,timeZone:a}),d=i==="sm"?u:l({defaultMessage:"After hours: {time}",id:"elF1mrf0Os"},{time:u});return o.jsx(w5e,{price:e,currency:t,change:n,percentChange:r,variant:i,children:o.jsxs(D,{variant:"tinyRegular",color:"light",className:C5e,children:[d,o.jsx(d9e,{className:S5e})]})})});M5e.displayName="AfterHoursPriceBig";const mse=({children:e,variant:t})=>o.jsx(sn,{className:B({"flex-1":t==="sm"},"px-md py-sm rounded-md border md:min-w-[250px] md:flex-none"),children:e}),k5e=I.memo(({quote:e})=>{const t=!!e.afterHoursPrice;Hm("mini-graphs");const{isMobileStyle:n}=xe(),r=n&&t?"sm":"lg",s=f.useMemo(()=>o.jsx(E5e,{variant:r,price:e.price,currency:e.currency,change:e.change,percentChange:e.changesPercentage,timestamp:e.timestamp,open:e.isMarketOpen,closes:e.exchange!=="CRYPTO",timezone:e.exchangeTimezone??void 0}),[e,r]),a=f.useMemo(()=>o.jsx(M5e,{price:e.afterHoursPrice,change:e.afterHoursChange,percentChange:e.afterHoursPercentChange,timestamp:e.afterHoursTimestamp,currency:e.currency,timezone:e.exchangeTimezone??void 0,variant:r}),[e,r]);return o.jsxs(H,{className:"gap-sm flex flex-wrap",children:[o.jsx(mse,{variant:r,children:s}),t&&o.jsx(mse,{variant:r,children:a})]})});k5e.displayName="BeforeAfterHours";const mRt=[],pse="1y",pRt=7,mO=I1e.filter(e=>e.value!=="5d"),hRt=(e,t,n,r)=>{const s=ht(),a=f.useCallback(async l=>{const[c,u]=await Promise.all([s.ensureQueryData({queryKey:S1({symbol:e}),queryFn:()=>Td({symbol:e}),staleTime:1e4}),s.ensureQueryData({queryKey:S1({symbol:e,historyPeriod:l,withHistory:!0,historyAfterHours:!0}),queryFn:()=>Td({symbol:e,historyPeriod:l,withHistory:!0,historyAfterHours:!0}),staleTime:6e4})]);return{quote:{...c,history:u?.history,historicalChange:u?.historicalChange,historicalPercentChange:u?.historicalPercentChange,historicalPreviousClose:u?.historicalPreviousClose},period:l}},[e,s]),i=We({queryKey:["finance/quote-history",e,t],queryFn:async()=>{const l=await a(t);return!l?.quote?.history&&t!==pse?await a(pse):l},staleTime:0,refetchOnMount:!0,refetchInterval:1e3*10,placeholderData:l=>{if(l)return l;if(r)return{quote:r,period:t}},enabled:n});return{isLoading:i.isLoading,quote:i.data?.quote??void 0,period:i.data?.period??t}},gRt=(e,t,n)=>{const r=ht(),s=We({queryKey:["finance/comparison",t,...e],queryFn:async()=>{const a=t,i=e.map(async u=>await r.ensureQueryData({queryKey:S1({symbol:u,historyPeriod:t,withHistory:!0,historyAfterHours:!1}),queryFn:()=>Td({symbol:u,historyPeriod:t,withHistory:!0,historyAfterHours:!1}),staleTime:3e4}));return{quotes:(await Promise.all(i))?.filter(u=>!!u)?.map((u,d)=>({...u,color:xx(d)}))??[],period:a}},placeholderData:Ud,refetchInterval:1e3*10,enabled:n});return{isLoading:s.isLoading,quotes:s.data?.quotes??mRt,period:s.data?.period??t}},yRt=e=>{const t=jt(),n=py(t),r=Nt();f.useEffect(()=>{t&&n&&t!==n&&!r?.get("comparing")&&e([])},[t,n,r,e])},vRt=(e,t,n)=>{const r=Nt(),s=gt(),a=f.useCallback(C=>{const S=new URLSearchParams(window.location.search);S.set("comparing",C.join(",")),s.replace(`?${S.toString()}`)},[s]),[i,l]=f.useState(r?.get("comparing")?.split(",")??n??[]),c=f.useMemo(()=>[e,...i.filter(C=>C!==e)],[i,e]),u=c.length>1,[d,m]=f.useState({}),p=f.useCallback(C=>{C.symbol&&l(S=>{const E=[...new Set([e,...S,C.symbol])];return E.length>pRt&&E.splice(-2,1),a(E),m(M=>({...Object.fromEntries(Object.entries(M).filter(([k])=>E.includes(k))),[C.symbol]:C})),E})},[l,m,e,a]),h=f.useCallback(C=>{l(S=>{const E=S.filter(M=>M!==C);return a(E),E}),m(S=>{const E={...S};return delete E[C],E})},[l,m,a]),g=f.useCallback(()=>{l([])},[]);yRt(l);const y=_Rt(c,t),v=gRt(c,y,u),{comparisonQuotes:x,setHoveredComparisons:b}=bRt(c,v.quotes,d),_=xRt(e,c);return{peers:f.useMemo(()=>_.data.filter(C=>!c.includes(C.symbol)),[_.data,c]),isComparing:u,quotes:v.quotes,comparisonPeriod:v.period??y,comparisonQuotesLoading:v.isLoading,comparisonQuotes:x,setHoveredComparisons:b,addComparison:p,removeComparison:h,resetComparisons:g}},xRt=(e,t)=>{const{data:n,isLoading:r,isPlaceholderData:s}=We({queryKey:yvt(e,!0),queryFn:()=>vvt({symbol:e,index:!0}),placeholderData:Ud});return{data:f.useMemo(()=>n?.filter(i=>!t.some(l=>l===i.symbol)&&i.symbol!==e)??[],[n,t,e]),isLoading:r||s}},bRt=(e,t,n)=>{const[r,s]=f.useState([]),a=f.useMemo(()=>e.map((u,d)=>{const m=t.find(h=>h.symbol===u)??n[u];return m?{symbol:m.symbol,name:m.name,image:m.image,imageDark:m.imageDark,exchange:m.exchange,currency:m.currency||void 0,price:m.price,exchangeTimezone:m.exchangeTimezone,historicalChange:m.historicalChange,historicalPercentChange:m.historicalPercentChange,color:xx(d)}:{symbol:u,loading:!0,color:xx(d)}}),[e,t,n]),i=f.useMemo(()=>r.map((c,u)=>({...c,color:xx(u)})),[r]);return{comparisonQuotes:i.length>0?i:a,setHoveredComparisons:s}},_Rt=(e,t)=>e.length&&!mO.some(n=>n.value===t)?mO[0].value:t,wRt=e=>{const t=Nt(),n=gt(),[r,s]=f.useState(t?.get("period")??e??"1d"),a=f.useCallback(i=>{const l=new URLSearchParams(window.location.search);l.set("period",i),n.replace(`?${l.toString()}`),s(i)},[s,n]);return{period:r,setPeriod:a}},CRt=({symbol:e,comparisons:t,initialQuote:n,initialPeriod:r,search:s=!0,price:a=!0,profile:i=!0,tempHideOnEmpty:l=!1})=>{const{isMobileStyle:c}=xe(),{period:u,setPeriod:d}=wRt(r),[m,p]=f.useState(null),h=c?null:m,g=vRt(e,u,t),y=hRt(e,u,!g.isComparing,n),{$t:v}=Z();return l&&!y.isLoading&&!y.quote.history?.length?null:o.jsxs(o.Fragment,{children:[a&&o.jsx(k5e,{quote:y.quote}),g.isComparing?o.jsx(fse,{animationId:g.comparisonQuotes.map(x=>x.symbol).join("-"),showChange:!1,period:u,periods:mO,setPeriod:d,isLoading:g.comparisonQuotesLoading,children:o.jsx(JIt,{quotes:g.quotes,period:g.comparisonPeriod,focused:h,setHoveredComparisons:g.setHoveredComparisons})}):o.jsx(fse,{animationId:e,showChange:!!(y?.quote?.historicalChange||y?.quote?.historicalPercentChange),periods:I1e,absoluteChange:y?.quote?.historicalChange,percentChange:y?.quote?.historicalPercentChange,currency:y?.quote?.currency,period:u,setPeriod:d,isLoading:y.isLoading,children:o.jsx(BIt,{quote:y.quote,period:y.period})}),s&&o.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[o.jsx("div",{className:"w-full",children:o.jsx(h5e,{peers:g.peers,addComparison:g.addComparison})}),g.isComparing&&o.jsx(Te,{onClick:g.resetComparisons,size:"tiny",pill:!0,text:v({defaultMessage:"Reset",id:"jm/spnRSn+"})})]}),o.jsx(zs,{className:"-mt-sm",children:g.isComparing&&o.jsx(Qr,{className:"py-sm",children:o.jsx(c5e,{comparisons:g.comparisonQuotes,removeComparison:g.removeComparison,setFocused:p})})}),i&&o.jsx(HMe,{quote:y.quote,type:y.quote?.exchange})]})},pO=[{currencyCode:"AED",type:"fiat",currency:ee({defaultMessage:"United Arab Emirates dirham",id:"u/noLkGMVn"}),countryCode:"AE",symbol:"."},{currencyCode:"AFN",type:"fiat",currency:ee({defaultMessage:"Afghan afghani",id:"HbCn83pcga"}),countryCode:"AF",symbol:""},{currencyCode:"ALL",type:"fiat",currency:ee({defaultMessage:"Albanian lek",id:"/il1Hf7GWO"}),countryCode:"AL",symbol:"L"},{currencyCode:"AMD",type:"fiat",currency:ee({defaultMessage:"Armenian dram",id:"Sab4a7TKLH"}),countryCode:"AM",symbol:""},{currencyCode:"ARS",type:"fiat",currency:ee({defaultMessage:"Argentine peso",id:"52+/SFD8VZ"}),countryCode:"AR",symbol:"$"},{currencyCode:"AUD",type:"fiat",currency:ee({defaultMessage:"Australian dollar",id:"iWILeLEVYR"}),countryCode:"AU",symbol:"$"},{currencyCode:"AWG",type:"fiat",currency:ee({defaultMessage:"Aruban florin",id:"BEGfukujzF"}),countryCode:"AW",symbol:""},{currencyCode:"BAM",type:"fiat",currency:ee({defaultMessage:"Bosnia and Herzegovina convertible mark",id:"b09sYvQVre"}),countryCode:"BA",symbol:"KM"},{currencyCode:"BBD",type:"fiat",currency:ee({defaultMessage:"Barbadian dollar",id:"VlWuwU66Ue"}),countryCode:"BB",symbol:"$"},{currencyCode:"BDT",type:"fiat",currency:ee({defaultMessage:"Bangladeshi taka",id:"nzdEshqHWS"}),countryCode:"BD",symbol:""},{currencyCode:"BGN",type:"fiat",currency:ee({defaultMessage:"Bulgarian lev",id:"IDTjXBqV4N"}),countryCode:"BG",symbol:""},{currencyCode:"BHD",type:"fiat",currency:ee({defaultMessage:"Bahraini dinar",id:"eq8qHJx0kM"}),countryCode:"BH",symbol:".."},{currencyCode:"BIF",type:"fiat",currency:ee({defaultMessage:"Burundian franc",id:"o/KpEtmYi4"}),countryCode:"BI",symbol:"FBu"},{currencyCode:"BMD",type:"fiat",currency:ee({defaultMessage:"Bermudian dollar",id:"kO0KeiZ+IN"}),countryCode:"BM",symbol:"$"},{currencyCode:"BND",type:"fiat",currency:ee({defaultMessage:"Brunei dollar",id:"GRkirfzc48"}),countryCode:"BN",symbol:"$"},{currencyCode:"BOB",type:"fiat",currency:ee({defaultMessage:"Bolivian boliviano",id:"l7UUEAhjL1"}),countryCode:"BO",symbol:"Bs."},{currencyCode:"BRL",type:"fiat",currency:ee({defaultMessage:"Brazilian real",id:"x+BZGn5rek"}),countryCode:"BR",symbol:"R$"},{currencyCode:"BSD",type:"fiat",currency:ee({defaultMessage:"Bahamian dollar",id:"u9nfam/El1"}),countryCode:"BS",symbol:"$"},{currencyCode:"BTN",type:"fiat",currency:ee({defaultMessage:"Bhutanese ngultrum",id:"EbzIZvY2C3"}),countryCode:"BT",symbol:"Nu."},{currencyCode:"BWP",type:"fiat",currency:ee({defaultMessage:"Botswana pula",id:"TvRjxCQudG"}),countryCode:"BW",symbol:"P"},{currencyCode:"BZD",type:"fiat",currency:ee({defaultMessage:"Belize dollar",id:"tnMfFVDwiX"}),countryCode:"BZ",symbol:"$"},{currencyCode:"CAD",type:"fiat",currency:ee({defaultMessage:"Canadian dollar",id:"L4ftYFzYiG"}),countryCode:"CA",symbol:"$"},{currencyCode:"CDF",type:"fiat",currency:ee({defaultMessage:"Congolese franc",id:"6DNXExdai2"}),countryCode:"CD",symbol:"FC"},{currencyCode:"CHF",type:"fiat",currency:ee({defaultMessage:"Swiss franc",id:"113zTX3mKi"}),countryCode:"CH",symbol:"Fr."},{currencyCode:"CLP",type:"fiat",currency:ee({defaultMessage:"Chilean peso",id:"tLhKy6Swhn"}),countryCode:"CL",symbol:"$"},{currencyCode:"CNH",type:"fiat",currency:ee({defaultMessage:"Chinese yuan (offshore)",id:"wAShedQ5+o"}),countryCode:"CN",symbol:""},{currencyCode:"CNY",type:"fiat",currency:ee({defaultMessage:"Chinese yuan",id:"/sleu+8FUs"}),countryCode:"CN",symbol:""},{currencyCode:"COP",type:"fiat",currency:ee({defaultMessage:"Colombian peso",id:"KR2NhLe6wO"}),countryCode:"CO",symbol:"$"},{currencyCode:"CRC",type:"fiat",currency:ee({defaultMessage:"Costa Rican coln",id:"OLgF3rrfev"}),countryCode:"CR",symbol:""},{currencyCode:"CUP",type:"fiat",currency:ee({defaultMessage:"Cuban peso",id:"ua/JslQGFc"}),countryCode:"CU",symbol:"$"},{currencyCode:"CVE",type:"fiat",currency:ee({defaultMessage:"Cape Verdean escudo",id:"gg39Xd9NoM"}),countryCode:"CV",symbol:"$"},{currencyCode:"CYP",type:"fiat",currency:ee({defaultMessage:"Cypriot pound",id:"xJn7heFKbn"}),countryCode:"CY",symbol:""},{currencyCode:"CZK",type:"fiat",currency:ee({defaultMessage:"Czech koruna",id:"xpMdKvcamT"}),countryCode:"CZ",symbol:"K"},{currencyCode:"DJF",type:"fiat",currency:ee({defaultMessage:"Djiboutian franc",id:"WtP9AoFz2A"}),countryCode:"DJ",symbol:"Fdj"},{currencyCode:"DKK",type:"fiat",currency:ee({defaultMessage:"Danish krone",id:"Xy5G3y8jOw"}),countryCode:"DK",symbol:"kr"},{currencyCode:"DOP",type:"fiat",currency:ee({defaultMessage:"Dominican peso",id:"2i/KFaPpw5"}),countryCode:"DO",symbol:"RD$"},{currencyCode:"DZD",type:"fiat",currency:ee({defaultMessage:"Algerian dinar",id:"6sTpFM3olk"}),countryCode:"DZ",symbol:""},{currencyCode:"EGP",type:"fiat",currency:ee({defaultMessage:"Egyptian pound",id:"PxOcvtceh8"}),countryCode:"EG",symbol:""},{currencyCode:"ETB",type:"fiat",currency:ee({defaultMessage:"Ethiopian birr",id:"6VjP5tvzWg"}),countryCode:"ET",symbol:"Br"},{currencyCode:"EUR",type:"fiat",currency:ee({defaultMessage:"Euro",id:"Zz6d8XMgGD"}),countryCode:"EU",symbol:""},{currencyCode:"FJD",type:"fiat",currency:ee({defaultMessage:"Fijian dollar",id:"w33lAGgTZS"}),countryCode:"FJ",symbol:"$"},{currencyCode:"GBP",type:"fiat",currency:ee({defaultMessage:"Pound sterling",id:"uU25lEI6GM"}),countryCode:"GB",symbol:""},{currencyCode:"GEL",type:"fiat",currency:ee({defaultMessage:"Georgian lari",id:"m4gS106RpO"}),countryCode:"GE",symbol:""},{currencyCode:"GHS",type:"fiat",currency:ee({defaultMessage:"Ghanaian cedi",id:"2k7sXvkoLP"}),countryCode:"GH",symbol:""},{currencyCode:"GMD",type:"fiat",currency:ee({defaultMessage:"Gambian dalasi",id:"zT8nD3rOKp"}),countryCode:"GM",symbol:"D"},{currencyCode:"GNF",type:"fiat",currency:ee({defaultMessage:"Guinean franc",id:"kZk7wkuU9a"}),countryCode:"GN",symbol:"FG"},{currencyCode:"GTQ",type:"fiat",currency:ee({defaultMessage:"Guatemalan quetzal",id:"0eSFsz1h5U"}),countryCode:"GT",symbol:"Q"},{currencyCode:"GYD",type:"fiat",currency:ee({defaultMessage:"Guyanese dollar",id:"pvTNSDiMVb"}),countryCode:"GY",symbol:"$"},{currencyCode:"HKD",type:"fiat",currency:ee({defaultMessage:"Hong Kong dollar",id:"tSeK2eAo7a"}),countryCode:"HK",symbol:"$"},{currencyCode:"HNL",type:"fiat",currency:ee({defaultMessage:"Honduran lempira",id:"u1All4YZ/M"}),countryCode:"HN",symbol:"L"},{currencyCode:"HRK",type:"fiat",currency:ee({defaultMessage:"Croatian kuna",id:"m4/bILMdtE"}),countryCode:"HR",symbol:"kn"},{currencyCode:"HTG",type:"fiat",currency:ee({defaultMessage:"Haitian gourde",id:"fYPjhPHJw5"}),countryCode:"HT",symbol:"G"},{currencyCode:"HUF",type:"fiat",currency:ee({defaultMessage:"Hungarian forint",id:"Bhl6SxOjG0"}),countryCode:"HU",symbol:"Ft"},{currencyCode:"IDR",type:"fiat",currency:ee({defaultMessage:"Indonesian rupiah",id:"JnQBDoCEpL"}),countryCode:"ID",symbol:"Rp"},{currencyCode:"ILS",type:"fiat",currency:ee({defaultMessage:"Israeli new shekel",id:"IxD6vfIMsj"}),countryCode:"IL",symbol:""},{currencyCode:"INR",type:"fiat",currency:ee({defaultMessage:"Indian rupee",id:"XnsufP9pQC"}),countryCode:"IN",symbol:""},{currencyCode:"IQD",type:"fiat",currency:ee({defaultMessage:"Iraqi dinar",id:"rmzi7U/4iu"}),countryCode:"IQ",symbol:"."},{currencyCode:"ISK",type:"fiat",currency:ee({defaultMessage:"Icelandic krna",id:"+QCFy0sZgh"}),countryCode:"IS",symbol:"kr"},{currencyCode:"JMD",type:"fiat",currency:ee({defaultMessage:"Jamaican dollar",id:"EkOwDtWSVs"}),countryCode:"JM",symbol:"J$"},{currencyCode:"JOD",type:"fiat",currency:ee({defaultMessage:"Jordanian dinar",id:"B2GvyCUDsS"}),countryCode:"JO",symbol:"."},{currencyCode:"JPY",type:"fiat",currency:ee({defaultMessage:"Japanese yen",id:"2PiQsV1fPp"}),countryCode:"JP",symbol:""},{currencyCode:"KES",type:"fiat",currency:ee({defaultMessage:"Kenyan shilling",id:"JIjYrchwhv"}),countryCode:"KE",symbol:"KSh"},{currencyCode:"KHR",type:"fiat",currency:ee({defaultMessage:"Cambodian riel",id:"KCKOEaCtcY"}),countryCode:"KH",symbol:""},{currencyCode:"KMF",type:"fiat",currency:ee({defaultMessage:"Comorian franc",id:"WV9ZQdQeR+"}),countryCode:"KM",symbol:"CF"},{currencyCode:"KRW",type:"fiat",currency:ee({defaultMessage:"South Korean won",id:"EiHQBnRax2"}),countryCode:"KR",symbol:""},{currencyCode:"KWD",type:"fiat",currency:ee({defaultMessage:"Kuwaiti dinar",id:"fkOQdpZmRV"}),countryCode:"KW",symbol:"."},{currencyCode:"KYD",type:"fiat",currency:ee({defaultMessage:"Cayman Islands dollar",id:"RsdrXusNMV"}),countryCode:"KY",symbol:"$"},{currencyCode:"KZT",type:"fiat",currency:ee({defaultMessage:"Kazakhstani tenge",id:"2qtVTeGWCE"}),countryCode:"KZ",symbol:""},{currencyCode:"LAK",type:"fiat",currency:ee({defaultMessage:"Lao kip",id:"Fgzd1G5Yfn"}),countryCode:"LA",symbol:""},{currencyCode:"LBP",type:"fiat",currency:ee({defaultMessage:"Lebanese pound",id:"FGzeEqNQzF"}),countryCode:"LB",symbol:"."},{currencyCode:"LKR",type:"fiat",currency:ee({defaultMessage:"Sri Lankan rupee",id:"a4/joWlRVu"}),countryCode:"LK",symbol:"Rs"},{currencyCode:"LRD",type:"fiat",currency:ee({defaultMessage:"Liberian dollar",id:"FI1z5I01J6"}),countryCode:"LR",symbol:"$"},{currencyCode:"LSL",type:"fiat",currency:ee({defaultMessage:"Lesotho loti",id:"csvFpR0QuR"}),countryCode:"LS",symbol:"L"},{currencyCode:"LTL",type:"fiat",currency:ee({defaultMessage:"Lithuanian litas",id:"0eziwi9562"}),countryCode:"LT",symbol:"Lt"},{currencyCode:"LYD",type:"fiat",currency:ee({defaultMessage:"Libyan dinar",id:"MHH+Pd33wK"}),countryCode:"LY",symbol:"."},{currencyCode:"MAD",type:"fiat",currency:ee({defaultMessage:"Moroccan dirham",id:"ECYUhp5Zzw"}),countryCode:"MA",symbol:".."},{currencyCode:"MDL",type:"fiat",currency:ee({defaultMessage:"Moldovan leu",id:"b0q4AtgUSW"}),countryCode:"MD",symbol:"L"},{currencyCode:"MGA",type:"fiat",currency:ee({defaultMessage:"Malagasy ariary",id:"7X6Af0dVLl"}),countryCode:"MG",symbol:"Ar"},{currencyCode:"MKD",type:"fiat",currency:ee({defaultMessage:"Macedonian denar",id:"RCCw/rBMD7"}),countryCode:"MK",symbol:""},{currencyCode:"MMK",type:"fiat",currency:ee({defaultMessage:"Burmese kyat",id:"09O/caoUOd"}),countryCode:"MM",symbol:"K"},{currencyCode:"MOP",type:"fiat",currency:ee({defaultMessage:"Macanese pataca",id:"WSCDGHnfAP"}),countryCode:"MO",symbol:"P"},{currencyCode:"MUR",type:"fiat",currency:ee({defaultMessage:"Mauritian rupee",id:"B7EPhc2k1/"}),countryCode:"MU",symbol:""},{currencyCode:"MVR",type:"fiat",currency:ee({defaultMessage:"Maldivian rufiyaa",id:"WKep/6FHLO"}),countryCode:"MV",symbol:"Rf"},{currencyCode:"MWK",type:"fiat",currency:ee({defaultMessage:"Malawian kwacha",id:"0QSRp0Tfcl"}),countryCode:"MW",symbol:"MK"},{currencyCode:"MXN",type:"fiat",currency:ee({defaultMessage:"Mexican peso",id:"cAJvdQ+v2Y"}),countryCode:"MX",symbol:"$"},{currencyCode:"MXV",type:"fiat",currency:ee({defaultMessage:"Mexican Unidad de Inversion (UDI)",id:"pJjurDaC1J"}),countryCode:"MX",symbol:"UDI"},{currencyCode:"MYR",type:"fiat",currency:ee({defaultMessage:"Malaysian ringgit",id:"BJOmmIMKBn"}),countryCode:"MY",symbol:"RM"},{currencyCode:"MZN",type:"fiat",currency:ee({defaultMessage:"Mozambican metical",id:"KVoUcWYwrs"}),countryCode:"MZ",symbol:"MT"},{currencyCode:"NAD",type:"fiat",currency:ee({defaultMessage:"Namibian dollar",id:"ofXViiQOEO"}),countryCode:"NA",symbol:"$"},{currencyCode:"NGN",type:"fiat",currency:ee({defaultMessage:"Nigerian naira",id:"YtrB6By6fQ"}),countryCode:"NG",symbol:""},{currencyCode:"NIO",type:"fiat",currency:ee({defaultMessage:"Nicaraguan crdoba",id:"NJJMgSKcDP"}),countryCode:"NI",symbol:"C$"},{currencyCode:"NOK",type:"fiat",currency:ee({defaultMessage:"Norwegian krone",id:"X7p/vNj1w0"}),countryCode:"NO",symbol:"kr"},{currencyCode:"NPR",type:"fiat",currency:ee({defaultMessage:"Nepalese rupee",id:"KpP5Ur9yKv"}),countryCode:"NP",symbol:""},{currencyCode:"NZD",type:"fiat",currency:ee({defaultMessage:"New Zealand dollar",id:"uoVYggIiS7"}),countryCode:"NZ",symbol:"$"},{currencyCode:"OMR",type:"fiat",currency:ee({defaultMessage:"Omani rial",id:"YuZlkmlwz6"}),countryCode:"OM",symbol:".."},{currencyCode:"PAB",type:"fiat",currency:ee({defaultMessage:"Panamanian balboa",id:"WsXJoQA7BU"}),countryCode:"PA",symbol:"B/."},{currencyCode:"PEN",type:"fiat",currency:ee({defaultMessage:"Peruvian sol",id:"Gzey/zBCdq"}),countryCode:"PE",symbol:"S/."},{currencyCode:"PGK",type:"fiat",currency:ee({defaultMessage:"Papua New Guinean kina",id:"1odcdptMV2"}),countryCode:"PG",symbol:"K"},{currencyCode:"PHP",type:"fiat",currency:ee({defaultMessage:"Philippine peso",id:"Ze94/Fib/J"}),countryCode:"PH",symbol:""},{currencyCode:"PKR",type:"fiat",currency:ee({defaultMessage:"Pakistani rupee",id:"xg2ovH8pDh"}),countryCode:"PK",symbol:""},{currencyCode:"PLN",type:"fiat",currency:ee({defaultMessage:"Polish zoty",id:"5nGZooUDXi"}),countryCode:"PL",symbol:"z"},{currencyCode:"PYG",type:"fiat",currency:ee({defaultMessage:"Paraguayan guaran",id:"faGTF61Eyw"}),countryCode:"PY",symbol:""},{currencyCode:"QAR",type:"fiat",currency:ee({defaultMessage:"Qatari riyal",id:"DuHEQnjrPb"}),countryCode:"QA",symbol:"."},{currencyCode:"RON",type:"fiat",currency:ee({defaultMessage:"Romanian leu",id:"lXgl4aKBP3"}),countryCode:"RO",symbol:"lei"},{currencyCode:"RSD",type:"fiat",currency:ee({defaultMessage:"Serbian dinar",id:"giqvsRUiA5"}),countryCode:"RS",symbol:"."},{currencyCode:"RUB",type:"fiat",currency:ee({defaultMessage:"Russian ruble",id:"4U+m5Kd694"}),countryCode:"RU",symbol:""},{currencyCode:"RWF",type:"fiat",currency:ee({defaultMessage:"Rwandan franc",id:"URbs3Tt0On"}),countryCode:"RW",symbol:"FRw"},{currencyCode:"SAR",type:"fiat",currency:ee({defaultMessage:"Saudi riyal",id:"p6D2TLqko8"}),countryCode:"SA",symbol:"."},{currencyCode:"SCR",type:"fiat",currency:ee({defaultMessage:"Seychellois rupee",id:"V7Ju6HZQJK"}),countryCode:"SC",symbol:""},{currencyCode:"SDG",type:"fiat",currency:ee({defaultMessage:"Sudanese pound",id:"FsgRxw4tdm"}),countryCode:"SD",symbol:".."},{currencyCode:"SEK",type:"fiat",currency:ee({defaultMessage:"Swedish krona",id:"WoyUwT/z0X"}),countryCode:"SE",symbol:"kr"},{currencyCode:"SGD",type:"fiat",currency:ee({defaultMessage:"Singapore dollar",id:"SCjBmFU+PM"}),countryCode:"SG",symbol:"$"},{currencyCode:"SHP",type:"fiat",currency:ee({defaultMessage:"Saint Helena pound",id:"XZdS6/MxwW"}),countryCode:"SH",symbol:""},{currencyCode:"SLL",type:"fiat",currency:ee({defaultMessage:"Sierra Leonean leone",id:"DFZ4yqf1EG"}),countryCode:"SL",symbol:"Le"},{currencyCode:"SOS",type:"fiat",currency:ee({defaultMessage:"Somali shilling",id:"e7cANdrF41"}),countryCode:"SO",symbol:"Sh.So."},{currencyCode:"SVC",type:"fiat",currency:ee({defaultMessage:"Salvadoran coln",id:"A2mT13SXuX"}),countryCode:"SV",symbol:""},{currencyCode:"SZL",type:"fiat",currency:ee({defaultMessage:"Swazi lilangeni",id:"+kNQR2VJjT"}),countryCode:"SZ",symbol:"E"},{currencyCode:"THB",type:"fiat",currency:ee({defaultMessage:"Thai baht",id:"Yz36aOmXMd"}),countryCode:"TH",symbol:""},{currencyCode:"TJS",type:"fiat",currency:ee({defaultMessage:"Tajikistani somoni",id:"G3q+8He+TZ"}),countryCode:"TJ",symbol:"M"},{currencyCode:"TMT",type:"fiat",currency:ee({defaultMessage:"Turkmenistan manat",id:"iV0j+gxDPN"}),countryCode:"TM",symbol:"m"},{currencyCode:"TND",type:"fiat",currency:ee({defaultMessage:"Tunisian dinar",id:"l6iU1LyMSk"}),countryCode:"TN",symbol:"."},{currencyCode:"TRY",type:"fiat",currency:ee({defaultMessage:"Turkish lira",id:"hQ9m98Llgt"}),countryCode:"TR",symbol:""},{currencyCode:"TTD",type:"fiat",currency:ee({defaultMessage:"Trinidad and Tobago dollar",id:"Op/jRg7//J"}),countryCode:"TT",symbol:"TT$"},{currencyCode:"TWD",type:"fiat",currency:ee({defaultMessage:"New Taiwan dollar",id:"yAeWHzFY54"}),countryCode:"TW",symbol:"NT$"},{currencyCode:"TZS",type:"fiat",currency:ee({defaultMessage:"Tanzanian shilling",id:"7YNH90CDt1"}),countryCode:"TZ",symbol:"TSh"},{currencyCode:"UAH",type:"fiat",currency:ee({defaultMessage:"Ukrainian hryvnia",id:"HCy2dyACi0"}),countryCode:"UA",symbol:""},{currencyCode:"UGX",type:"fiat",currency:ee({defaultMessage:"Ugandan shilling",id:"P5STuJcFRi"}),countryCode:"UG",symbol:"USh"},{currencyCode:"USD",type:"fiat",currency:ee({defaultMessage:"United States dollar",id:"BPRJDRwXU1"}),countryCode:"US",symbol:"$"},{currencyCode:"UYU",type:"fiat",currency:ee({defaultMessage:"Uruguayan peso",id:"HtXUCx6BL1"}),countryCode:"UY",symbol:"$U"},{currencyCode:"UZS",type:"fiat",currency:ee({defaultMessage:"Uzbekistani som",id:"lv4m0Kbuw1"}),countryCode:"UZ",symbol:"so'm"},{currencyCode:"VND",type:"fiat",currency:ee({defaultMessage:"Vietnamese ng",id:"We/RqEPpOp"}),countryCode:"VN",symbol:""},{currencyCode:"XAF",type:"fiat",currency:ee({defaultMessage:"Central African CFA franc",id:"fZwFESvHCw"}),countryCode:"CF",symbol:"FCFA"},{currencyCode:"XAG",type:"commodity",currency:ee({defaultMessage:"Silver (troy ounce)",id:"XVTnv5Liuj"}),countryCode:"ZZ",symbol:"XAG"},{currencyCode:"XAU",type:"commodity",currency:ee({defaultMessage:"Gold (troy ounce)",id:"s3i6lUYb/y"}),countryCode:"ZZ",symbol:"XAU"},{currencyCode:"XCD",type:"fiat",currency:ee({defaultMessage:"East Caribbean dollar",id:"pXF3HmkspQ"}),countryCode:"AG",symbol:"$"},{currencyCode:"XDR",type:"fiat",currency:ee({defaultMessage:"Special drawing rights",id:"X4eXXVN7wq"}),countryCode:"ZZ",symbol:"SDR"},{currencyCode:"XOF",type:"fiat",currency:ee({defaultMessage:"West African CFA franc",id:"cezzLNBm20"}),countryCode:"SN",symbol:"CFA"},{currencyCode:"XPF",type:"fiat",currency:ee({defaultMessage:"CFP franc",id:"txe+aX9vvZ"}),countryCode:"PF",symbol:""},{currencyCode:"YER",type:"fiat",currency:ee({defaultMessage:"Yemeni rial",id:"lRXRuW4arm"}),countryCode:"YE",symbol:""},{currencyCode:"ZAC",type:"fiat",currency:ee({defaultMessage:"South African rand (financial)",id:"GsJykrhxvK"}),countryCode:"ZA",symbol:"R"},{currencyCode:"ZAR",type:"fiat",currency:ee({defaultMessage:"South African rand",id:"MbU2//IGEL"}),countryCode:"ZA",symbol:"R"},{currencyCode:"ZMW",type:"fiat",currency:ee({defaultMessage:"Zambian kwacha",id:"ZJnHTLBz2v"}),countryCode:"ZM",symbol:"ZK"},{currencyCode:"BTC",type:"crypto",currency:ee({defaultMessage:"Bitcoin",id:"RkW5weBw8q"}),symbol:""},{currencyCode:"ETH",type:"crypto",currency:ee({defaultMessage:"Ethereum",id:"ohE0sWxJfP"}),symbol:""},{currencyCode:"XRP",type:"crypto",currency:ee({defaultMessage:"XRP",id:"rwHxdc9N83"}),symbol:"XRP"},{currencyCode:"BNB",type:"crypto",currency:ee({defaultMessage:"BNB",id:"+x/JA+cbSg"}),symbol:"BNB"},{currencyCode:"USDT",type:"crypto",currency:ee({defaultMessage:"Tether",id:"G17JtC1DRO"}),symbol:"USDT"},{currencyCode:"SOL",type:"crypto",currency:ee({defaultMessage:"Solana",id:"RmbsLR1XI9"}),symbol:"SOL"},{currencyCode:"HYPE",type:"crypto",currency:ee({defaultMessage:"HYPE",id:"sRJuK+IQu7"}),symbol:"HYPE"},{currencyCode:"STETH",type:"crypto",currency:ee({defaultMessage:"stETH",id:"VNvqEhRv0o"}),symbol:"stETH"},{currencyCode:"WTRX",type:"crypto",currency:ee({defaultMessage:"Wrapped TRX",id:"hi8IgS7Vvh"}),symbol:"WTRX"},{currencyCode:"DOGE",type:"crypto",currency:ee({defaultMessage:"Dogecoin",id:"Q4KOhNgUFl"}),symbol:"DOGE"},{currencyCode:"ADA",type:"crypto",currency:ee({defaultMessage:"Cardano",id:"Zk+zRo7Vav"}),symbol:"ADA"},{currencyCode:"TRX",type:"crypto",currency:ee({defaultMessage:"TRON",id:"fLtNc/n43W"}),symbol:"TRX"},{currencyCode:"USDC",type:"crypto",currency:ee({defaultMessage:"USD Coin",id:"tPc0IbLJq0"}),symbol:"USDC"},{currencyCode:"WBTC",type:"crypto",currency:ee({defaultMessage:"Wrapped Bitcoin",id:"AO1Xrr+Cwk"}),symbol:"WBTC"},{currencyCode:"WSTETH",type:"crypto",currency:ee({defaultMessage:"Wrapped stETH",id:"Fg7h7ipjGE"}),symbol:"wstETH"},{currencyCode:"EDLC",type:"crypto",currency:ee({defaultMessage:"EDLC",id:"FplbXN+574"}),symbol:"EDLC"},{currencyCode:"LINK",type:"crypto",currency:ee({defaultMessage:"Chainlink",id:"d/A799ZTa/"}),symbol:"LINK"},{currencyCode:"AIC",type:"crypto",currency:ee({defaultMessage:"AIC",id:"RSOIsb9pEC"}),symbol:"AIC"},{currencyCode:"XLM",type:"crypto",currency:ee({defaultMessage:"Stellar",id:"+uYwRW10Bd"}),symbol:"XLM"},{currencyCode:"WETH",type:"crypto",currency:ee({defaultMessage:"Wrapped Ether",id:"s8UwDT+8t2"}),symbol:"WETH"},{currencyCode:"BCH",type:"crypto",currency:ee({defaultMessage:"Bitcoin Cash",id:"hLt+wzROTK"}),symbol:"BCH"},{currencyCode:"UST",type:"crypto",currency:ee({defaultMessage:"TerraUSD",id:"wot2OPkJDe"}),symbol:"UST"},{currencyCode:"AVAX",type:"crypto",currency:ee({defaultMessage:"Avalanche",id:"C9K+TI7R4G"}),symbol:"AVAX"},{currencyCode:"SUI",type:"crypto",currency:ee({defaultMessage:"Sui",id:"CvmoCbTblr"}),symbol:"SUI"},{currencyCode:"LTC",type:"crypto",currency:ee({defaultMessage:"Litecoin",id:"oyKw8Dr6hh"}),symbol:"LTC"},{currencyCode:"TON",type:"crypto",currency:ee({defaultMessage:"Toncoin",id:"V2AxdWxVB/"}),symbol:"TON"},{currencyCode:"HBAR",type:"crypto",currency:ee({defaultMessage:"Hedera",id:"yLSpOa++/L"}),symbol:"HBAR"},{currencyCode:"WHBAR",type:"crypto",currency:ee({defaultMessage:"Wrapped HBAR",id:"rfimaaddr1"}),symbol:"WHBAR"},{currencyCode:"UNI",type:"crypto",currency:ee({defaultMessage:"Uniswap",id:"hincAkLfxR"}),symbol:"UNI"},{currencyCode:"BTCB",type:"crypto",currency:ee({defaultMessage:"Bitcoin BEP2",id:"T7D16Bt6JS"}),symbol:"BTCB"},{currencyCode:"OKB",type:"crypto",currency:ee({defaultMessage:"OKB",id:"6ZLe/X3P+I"}),symbol:"OKB"},{currencyCode:"SHIB",type:"crypto",currency:ee({defaultMessage:"Shiba Inu",id:"dwuQAuovNP"}),symbol:"SHIB"},{currencyCode:"USDS",type:"crypto",currency:ee({defaultMessage:"StableUSD",id:"DAzSEb0LeA"}),symbol:"USDS"},{currencyCode:"WBT",type:"crypto",currency:ee({defaultMessage:"WhiteBIT Coin",id:"Lj9Zp416rG"}),symbol:"WBT"},{currencyCode:"BGB",type:"crypto",currency:ee({defaultMessage:"Bitget Token",id:"OEQgkmdE1O"}),symbol:"BGB"},{currencyCode:"DAI",type:"crypto",currency:ee({defaultMessage:"Dai",id:"7g+Z6oltsB"}),symbol:"DAI"},{currencyCode:"DOT",type:"crypto",currency:ee({defaultMessage:"Polkadot",id:"iS7ue2zjn0"}),symbol:"DOT"},{currencyCode:"XMR",type:"crypto",currency:ee({defaultMessage:"Monero",id:"RydJABkA4a"}),symbol:"XMR"},{currencyCode:"MNT",type:"crypto",currency:ee({defaultMessage:"MNT",id:"90qNZszLR/"}),symbol:"MNT"},{currencyCode:"PEPE",type:"crypto",currency:ee({defaultMessage:"Pepe",id:"x9wJbmzZhn"}),symbol:"PEPE"},{currencyCode:"AAVE",type:"crypto",currency:ee({defaultMessage:"Aave",id:"kFjzNltaTL"}),symbol:"AAVE"},{currencyCode:"CRO",type:"crypto",currency:ee({defaultMessage:"Cronos",id:"2cg8W1gIo3"}),symbol:"CRO"},{currencyCode:"ETC",type:"crypto",currency:ee({defaultMessage:"Ethereum Classic",id:"Bv9Xkw6kNg"}),symbol:"ETC"},{currencyCode:"FD",type:"crypto",currency:ee({defaultMessage:"FD",id:"+Q62UIi/LA"}),symbol:"FD"},{currencyCode:"TUSD",type:"crypto",currency:ee({defaultMessage:"TrueUSD",id:"whDnhXYdIe"}),symbol:"TUSD"},{currencyCode:"NEAR",type:"crypto",currency:ee({defaultMessage:"NEAR Protocol",id:"E9RsfkMwMk"}),symbol:"NEAR"},{currencyCode:"METAGAMES",type:"crypto",currency:ee({defaultMessage:"MetaGames",id:"C0GGroVhnP"}),symbol:"METAGAMES"},{currencyCode:"TAO",type:"crypto",currency:ee({defaultMessage:"Bittensor",id:"6+C0Ut5hKl"}),symbol:"TAO"},{currencyCode:"ICP",type:"crypto",currency:ee({defaultMessage:"Internet Computer",id:"q9uyMXlX+M"}),symbol:"ICP"},{currencyCode:"GT",type:"crypto",currency:ee({defaultMessage:"GateToken",id:"dSGfpIcmmI"}),symbol:"GT"},{currencyCode:"RETH",type:"crypto",currency:ee({defaultMessage:"Rocket Pool ETH",id:"pg4o1kZ2d4"}),symbol:"rETH"},{currencyCode:"MRS",type:"crypto",currency:ee({defaultMessage:"MRS",id:"CABw3watNU"}),symbol:"MRS"},{currencyCode:"APT",type:"crypto",currency:ee({defaultMessage:"Aptos",id:"/U15UItsIY"}),symbol:"APT"},{currencyCode:"KAS",type:"crypto",currency:ee({defaultMessage:"Kaspa",id:"1MwSSUoCwu"}),symbol:"KAS"},{currencyCode:"ALGO",type:"crypto",currency:ee({defaultMessage:"Algorand",id:"TijDBb1K3w"}),symbol:"ALGO"},{currencyCode:"PENGU",type:"crypto",currency:ee({defaultMessage:"PENGU",id:"esTSdYyjL9"}),symbol:"PENGU"},{currencyCode:"VET",type:"crypto",currency:ee({defaultMessage:"VeChain",id:"o3b918Uwm9"}),symbol:"VET"},{currencyCode:"OTRUMP",type:"crypto",currency:ee({defaultMessage:"OTRUMP",id:"dwjxu1ZNrs"}),symbol:"OTRUMP"},{currencyCode:"ARB",type:"crypto",currency:ee({defaultMessage:"Arbitrum",id:"2qF6KBPwqc"}),symbol:"ARB"},{currencyCode:"LUNA1",type:"crypto",currency:ee({defaultMessage:"Terra (LUNA1)",id:"g5JtKAkJm/"}),symbol:"LUNA1"},{currencyCode:"MKR",type:"crypto",currency:ee({defaultMessage:"Maker",id:"iVoUggHR7n"}),symbol:"MKR"},{currencyCode:"QNT",type:"crypto",currency:ee({defaultMessage:"Quant",id:"kZiBtRgPXK"}),symbol:"QNT"},{currencyCode:"BONK",type:"crypto",currency:ee({defaultMessage:"BONK",id:"/WOyXrLUEt"}),symbol:"BONK"},{currencyCode:"ATOM",type:"crypto",currency:ee({defaultMessage:"Cosmos",id:"VfvhDOBZSq"}),symbol:"ATOM"},{currencyCode:"FTN",type:"crypto",currency:ee({defaultMessage:"FTN",id:"+BtHlnfKBJ"}),symbol:"FTN"},{currencyCode:"KCS",type:"crypto",currency:ee({defaultMessage:"KuCoin Token",id:"J6x8n/y945"}),symbol:"KCS"},{currencyCode:"RNDR",type:"crypto",currency:ee({defaultMessage:"Render",id:"fI33PYpQj/"}),symbol:"RNDR"},{currencyCode:"BNX",type:"crypto",currency:ee({defaultMessage:"BNX",id:"/mzOvKP3DB"}),symbol:"BNX"},{currencyCode:"FIL",type:"crypto",currency:ee({defaultMessage:"Filecoin",id:"O60m1dM5+I"}),symbol:"FIL"},{currencyCode:"WBNB",type:"crypto",currency:ee({defaultMessage:"Wrapped BNB",id:"6oPoIEcEKM"}),symbol:"WBNB"},{currencyCode:"DUCK",type:"crypto",currency:ee({defaultMessage:"DUCK",id:"Wy2n2zHjyn"}),symbol:"DUCK"},{currencyCode:"ONDO",type:"crypto",currency:ee({defaultMessage:"Ondo",id:"Mdh4nCMVFp"}),symbol:"ONDO"},{currencyCode:"EZETH",type:"crypto",currency:ee({defaultMessage:"EZETH",id:"GquMfdHRpr"}),symbol:"EZETH"},{currencyCode:"DHN",type:"crypto",currency:ee({defaultMessage:"DHN",id:"3DBrwMVTuR"}),symbol:"DHN"},{currencyCode:"SPX",type:"crypto",currency:ee({defaultMessage:"SPX",id:"78Gbn14660"}),symbol:"SPX"},{currencyCode:"XDC",type:"crypto",currency:ee({defaultMessage:"XDC Network",id:"f4v54xCFpd"}),symbol:"XDC"},{currencyCode:"ENA",type:"crypto",currency:ee({defaultMessage:"ENA",id:"G6NRdu/3/f"}),symbol:"ENA"},{currencyCode:"SOLVBTCBBN",type:"crypto",currency:ee({defaultMessage:"SOLVBTCBBN",id:"U+VGyLBIbO"}),symbol:"SOLVBTCBBN"},{currencyCode:"LDO",type:"crypto",currency:ee({defaultMessage:"Lido DAO",id:"Hm40klV7dx"}),symbol:"LDO"},{currencyCode:"INJ",type:"crypto",currency:ee({defaultMessage:"Injective",id:"Zy5gqTZCK/"}),symbol:"INJ"},{currencyCode:"USD0",type:"crypto",currency:ee({defaultMessage:"USD0",id:"I8k7Is+SUX"}),symbol:"USD0"},{currencyCode:"FLR",type:"crypto",currency:ee({defaultMessage:"Flare",id:"EuWzA+LwQr"}),symbol:"FLR"},{currencyCode:"PY",type:"crypto",currency:ee({defaultMessage:"PY",id:"2WmUk53rca"}),symbol:"PY"},{currencyCode:"SEI",type:"crypto",currency:ee({defaultMessage:"Sei",id:"uIVFPKXueM"}),symbol:"SEI"},{currencyCode:"MSOL",type:"crypto",currency:ee({defaultMessage:"Marinade Staked SOL",id:"Sgo9VGem0+"}),symbol:"mSOL"},{currencyCode:"CRV",type:"crypto",currency:ee({defaultMessage:"Curve DAO Token",id:"hv2sTxuyJY"}),symbol:"CRV"},{currencyCode:"FTM",type:"crypto",currency:ee({defaultMessage:"Fantom",id:"FdV4Gc/fz2"}),symbol:"FTM"},{currencyCode:"FLOKI",type:"crypto",currency:ee({defaultMessage:"FLOKI",id:"d2sPiyXVq8"}),symbol:"FLOKI"},{currencyCode:"CMETH",type:"crypto",currency:ee({defaultMessage:"CMETH",id:"ZXQlnD2obl"}),symbol:"CMETH"},{currencyCode:"SLISBNB",type:"crypto",currency:ee({defaultMessage:"SLISBNB",id:"wqx7ZL4lbr"}),symbol:"SLISBNB"},{currencyCode:"FARTCOIN",type:"crypto",currency:ee({defaultMessage:"FARTCOIN",id:"qFlNIb5L+O"}),symbol:"FARTCOIN"},{currencyCode:"EETH",type:"crypto",currency:ee({defaultMessage:"eETH",id:"tCrC5owpVn"}),symbol:"eETH"},{currencyCode:"KAIA",type:"crypto",currency:ee({defaultMessage:"KAIA",id:"fDXZE/gzgq"}),symbol:"KAIA"},{currencyCode:"GRT",type:"crypto",currency:ee({defaultMessage:"The Graph",id:"oFrVNds2cX"}),symbol:"GRT"},{currencyCode:"IMX",type:"crypto",currency:ee({defaultMessage:"Immutable",id:"+0mthqqK1s"}),symbol:"IMX"},{currencyCode:"WIF",type:"crypto",currency:ee({defaultMessage:"WIF",id:"tK0cRtUi/S"}),symbol:"WIF"},{currencyCode:"RAY",type:"crypto",currency:ee({defaultMessage:"Raydium",id:"pSdm2ZTXHD"}),symbol:"RAY"},{currencyCode:"OP",type:"crypto",currency:ee({defaultMessage:"Optimism",id:"ghDrrz64nC"}),symbol:"OP"},{currencyCode:"XAUT",type:"crypto",currency:ee({defaultMessage:"Tether Gold",id:"pobzwuxAfg"}),symbol:"XAUT"},{currencyCode:"PENDLE",type:"crypto",currency:ee({defaultMessage:"Pendle",id:"z8diWExCd3"}),symbol:"PENDLE"}],Op=(e,t="default")=>{if(!e)return"";const n=t==="indian"?"en-IN":"en-US",r=new Intl.NumberFormat(n,{useGrouping:!0,minimumFractionDigits:0,maximumFractionDigits:100}),s=e.endsWith("."),a=e.split("."),i=a[0]||"0",l=a[1]||"",c=parseFloat(e);if(isNaN(c))return"";let d=r.format(parseFloat(i));return a.length>1?d+="."+l:s&&(d+="."),d},T5e=I.memo(({value:e,onChange:t,placeholder:n="0",disabled:r=!1,className:s="",min:a,max:i,step:l=1,formatting:c="default"})=>{const u=f.useRef(null),[d,m]=f.useState(Op(e,c)),p=f.useCallback(v=>v.replace(/,/g,""),[]),h=f.useCallback(v=>{const x=v.target.value,b=p(x),_=v.target.selectionStart||0;if(b===""||/^\d*\.?\d*$/.test(b)&&!/e/i.test(x)){const w=Op(b,c);m(w),t(b),requestAnimationFrame(()=>{if(u.current){const C=x.substring(0,_),S=p(C);let E=0,M=0;const k=S.replace(".","").length,A=S.includes(".")&&S.endsWith(".");for(let R=0;R<w.length;R++){const O=w[R];if(O==="."){if(A&&E===k){M=R+1;break}}else if(O!==","&&(E++,!A&&E===k)){M=R+1;break}}u.current.setSelectionRange(M,M)}})}},[p,t,c]),g=f.useCallback(v=>{const x=u.current;if(!x||(v.metaKey||v.ctrlKey)&&(v.key==="z"||v.key==="Z"))return;const{selectionStart:b,selectionEnd:_,value:w}=x;if(v.key==="ArrowUp"||v.key==="ArrowDown"){v.preventDefault();const C=parseFloat(p(e))||0,S=v.key==="ArrowUp"?l:-l;let E=C+S;a!==void 0&&E<a&&(E=a),i!==void 0&&E>i&&(E=i);const M=E.toString(),k=Op(M,c);m(k),t(M);return}if(v.key==="Backspace"&&b===_){if(b===null)return;if(w[b-1]===","){v.preventDefault();const S=w.substring(0,b-1),E=w.substring(b),M=S[S.length-1];if(M&&/\d/.test(M)){const k=S.slice(0,-1)+E,A=p(k),R=Op(A,c);m(R),t(A),setTimeout(()=>{const O=R.length-p(E).length;x.setSelectionRange(O,O)},0)}}}},[p,t,e,l,a,i,c]),y=f.useCallback(v=>{v.preventDefault();const x=v.clipboardData.getData("text"),b=p(x);if(/^\d*\.?\d*$/.test(b)&&!/e/i.test(x)){const _=Op(b,c);m(_),t(b)}},[p,t,c]);return I.useEffect(()=>{const v=Op(e,c);m(v)},[e,c]),o.jsx("input",{ref:u,type:"text",value:d,onChange:h,onKeyDown:g,onPaste:y,placeholder:n,disabled:r,className:s,inputMode:"decimal"})});T5e.displayName="CurrencyInput";const N5e=I.memo(e=>{const{data:t}=e,{source_currency:n,target_currency:r,source_amount:s,converted_amount:a,exchange_rate:i}=t,l=!0,{menuItems:c}=t0(),[u,d]=f.useState(s),[m,p]=f.useState(F(a)),[h,g]=f.useState(n),[y,v]=f.useState(r),[x,b]=f.useState(i),{colorScheme:_}=Wr(),w=_==="dark",{$t:C}=Z(),S=`${h}${y}`,{data:E,isLoading:M,error:k}=We({queryKey:_vt(h,y,u),queryFn:()=>wvt({sourceCurrency:h,targetCurrency:y,amount:u}),enabled:!!h&&!!y&&u>0}),A=f.useRef(E?.source_currency),R=f.useRef(E?.target_currency),O=f.useRef(E?.exchange_rate),L=f.useRef(E?.source_img),P=f.useRef(E?.source_img_dark),N=f.useRef(E?.target_img),T=f.useRef(E?.target_img_dark);f.useEffect(()=>{E&&(E?.source_currency!==A.current||E?.target_currency!==R.current)&&(p(F(E.converted_amount)),A.current=E.source_currency,R.current=E.target_currency),E&&E.exchange_rate!==O.current&&(b(E.exchange_rate),O.current=E.exchange_rate),E&&E.source_img!==L.current&&(L.current=E.source_img),E&&E.source_img_dark!==P.current&&(P.current=E.source_img_dark),E&&E.target_img!==N.current&&(N.current=E.target_img),E&&E.target_img_dark!==T.current&&(T.current=E.target_img_dark)},[E]);function j(z){return pO.find(Q=>Q.currencyCode===z)}function F(z){return z>1?parseFloat(z.toFixed(2)):parseFloat(z.toPrecision(2))}function U(z){return z==="INR"||z==="PKR"||z==="BDT"||z==="NPR"}const V=j(h),$=j(y);return o.jsx(Ci,{widgetType:"finance",widgetName:"currency_exchange",widgetSize:"full",children:o.jsxs("div",{className:"gap-sm pb-sm flex flex-col overflow-visible",children:[o.jsx(sn,{shadow:!0,className:"w-full overflow-hidden",children:o.jsxs(H,{variant:"subtler",className:"grid w-full grid-cols-1 gap-px md:grid-cols-2",children:[o.jsxs(H,{variant:"raised",className:"p-md pb-sm gap-sm flex w-full flex-col",children:[o.jsx("div",{className:"flex-1",children:o.jsxs(D,{variant:"entry-title-200",className:"flex font-mono !text-2xl",children:[o.jsx("span",{className:"text-quieter",children:V?.symbol}),o.jsx(gO,{value:u.toString(),error:!!k,onChange:z=>{const Q=parseFloat(z);d(Q),Q>0?p(F(Q*x)):p(0)},formatting:U(V?.currencyCode)?"indian":"default"})]})}),o.jsxs("div",{className:"gap-md flex items-center",children:[o.jsx(hO,{onSelect:z=>g(z),currency:V?C(V.currency):h,icon:V&&V.type==="crypto"?o.jsx(H,{variant:"subtler",className:"size-full overflow-hidden rounded-full",children:(w?P.current:L.current)&&o.jsx("img",{src:w?P.current??"":L.current??"",alt:C(V.currency),className:"size-full object-contain"})}):V&&V.type==="commodity"?o.jsx(H,{className:B("size-full rounded-full",{"!bg-[gold]":V?.currencyCode==="XAU","!bg-[silver]":V?.currencyCode==="XAG"})}):o.jsx(Cg,{className:"size-full object-contain",countryCode:V?.countryCode})}),o.jsx("div",{className:"ml-auto grid grid-cols-1 grid-rows-1 items-center",children:o.jsxs(Ke,{children:[M&&o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:Po,className:"col-start-1 row-start-1 ml-auto",children:o.jsx(D,{color:"ultraLight",children:o.jsx($r,{size:12})})},"loading"),!M&&k&&o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:Po,className:"col-start-1 row-start-1 ml-auto",children:o.jsx(D,{color:"light",variant:"small",children:C({defaultMessage:"Not supported",id:"+FiyOTaUCW"})})},"error")]})})]})]}),o.jsxs(H,{variant:"raised",className:B("p-md pb-sm gap-md flex w-full flex-col",{"!gap-sm":l}),children:[o.jsx("div",{className:"flex-1",children:o.jsxs(D,{variant:"entry-title-200",color:"default",className:"flex font-mono !text-2xl",children:[o.jsx("span",{className:"text-quieter",children:$?.symbol}),o.jsx(gO,{value:m.toString(),error:!!k,onChange:z=>{const Q=parseFloat(z);p(Q),Q>0?d(F(Q/x)):d(0)},formatting:U($?.currencyCode)?"indian":"default"})]})}),o.jsxs("div",{className:"gap-md flex items-center",children:[o.jsx(hO,{onSelect:z=>v(z),currency:$?C($.currency):y,icon:$&&$.type==="crypto"?o.jsx(H,{variant:"subtler",className:"size-full overflow-hidden rounded-full",children:(w?T.current:N.current)&&o.jsx("img",{src:w?T.current??"":N.current??"",alt:C($.currency),className:"size-full object-contain"})}):$&&$.type==="commodity"?o.jsx(H,{className:B("size-full rounded-full",{"!bg-[gold]":$?.currencyCode==="XAU","!bg-[silver]":$?.currencyCode==="XAG"})}):o.jsx(Cg,{className:"size-full object-contain",countryCode:$?.countryCode})}),c&&c.length>0&&o.jsx("div",{className:"ml-auto",children:o.jsx(pr.Menu,{menuItems:c})})]})]})]})}),o.jsx("div",{children:o.jsx(CRt,{symbol:S,initialPeriod:"1y",search:!1,price:!1,profile:!1,tempHideOnEmpty:!0})})]})})});N5e.displayName="CurrencyConversion";const hO=I.memo(({currency:e,icon:t,onSelect:n})=>{const{$t:r}=Z(),{isMobileStyle:s}=xe(),[a,i]=f.useState(""),l=f.useMemo(()=>["CNY","EUR","GBP","JPY","USD","BTC","ETH"].map(y=>pO.find(v=>v.currencyCode===y)),[]),c=f.useMemo(()=>{const g=pO.map(y=>({...y,localizedCurrency:r(y.currency)}));return new n0(g,{keys:["localizedCurrency","currencyCode","countryCode"],threshold:.3})},[r]),u=f.useMemo(()=>c.search(a)??[],[c,a]),d=f.useMemo(()=>l.map(g=>({type:"default",text:g?.currencyCode?r(g.currency):"",onClick:()=>{g?.currencyCode&&(n(g.currencyCode),i(""))}})),[l,n,r]),m=f.useMemo(()=>u.map(g=>({type:"default",text:r(g.item?.currency)??"",onClick:()=>{g?.item?.currencyCode&&(n(g.item?.currencyCode),i(""))}})),[u,n,r]),p=f.useMemo(()=>[{type:"default",text:r({defaultMessage:"No results",id:"jHJmjfxD4s"}),disabled:!0}],[r]),h=f.useMemo(()=>o.jsx(Pr,{autoFocus:!0,className:B({"!-mx-xs":s,"!px-xs py-sm mb-xs border-none !bg-transparent shadow-none outline-none focus:!ring-0":!s}),pill:!1,isMobileUserAgent:s,placeholder:r({defaultMessage:"Search currencies...",id:"fDMc8k+hJQ"}),value:a,onChange:g=>i(g),disable1pass:!0}),[s,a,r]);return o.jsx(Jt,{alwaysShowChildren:!0,placement:"bottom-start",showFooterOnMobile:!0,items:a.length>0?m.length>0?m:p:d,isMobileStyle:s,wrapperClassName:"flex",header:h,footer:s&&h,children:o.jsx(Te,{chevron:!0,noPadding:!0,extraCSS:"!px-sm -ml-sm",leadingComponent:o.jsx("div",{className:"mr-0.5 size-5",children:t}),variant:"primary",size:"small",text:e})})});hO.displayName="CurrencyPicker";const gO=I.memo(({value:e,onChange:t,error:n,formatting:r="default"})=>n?o.jsx("span",{className:"!text-quieter",children:"---"}):o.jsx(T5e,{className:B("placeholder:text-quieter w-full overflow-hidden bg-transparent transition-colors duration-200 [appearance:textfield] focus:outline-none [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none",{"!text-quieter":n}),value:e??"",disabled:n,placeholder:"0",onChange:t,min:0,formatting:r}));gO.displayName="ConversionInput";const Ev=(e,t,n)=>{const r=Oqe({start:e,end:t}),s=r.days||0,a=r.hours||0,i=r.minutes||0;return s>0?a===0&&i===0?n({id:"sSynIO3ThU",defaultMessage:"{days}d"},{days:s}):i===0?n({id:"10cSZzeWte",defaultMessage:"{days}d {hours}h"},{days:s,hours:a}):n({id:"OWk1HjddEb",defaultMessage:"{days}d {hours}h {minutes}m"},{days:s,hours:a,minutes:i.toString().padStart(2,"0")}):a===0?n({id:"VvfhE21OJI",defaultMessage:"{minutes}m"},{minutes:i}):i===0?n({id:"unuVj1l7KW",defaultMessage:"{hours}h"},{hours:a}):n({id:"0Yp4jJ7rzm",defaultMessage:"{hours}h {minutes}m"},{hours:a,minutes:i.toString().padStart(2,"0")})},j5e=I.memo(({flightMetadata:e,departureTime:t,arrivalTime:n,actualDepartureTime:r,actualArrivalTime:s,estimatedDepartureTime:a,estimatedArrivalTime:i,delayed:l=!1,rightContent:c})=>{const{$t:u,locale:d}=Z(),m=f.useMemo(()=>new Date,[]),{cancelled:p,diverted:h,status:g,flightNumber:y,departureCity:v,departureAirport:x,arrivalAirport:b,arrivalCity:_}=e,w=f.useMemo(()=>t.toLocaleDateString(d,{month:"short",day:"numeric",year:"numeric"}),[t,d]),C=r||a||t,S=s||i||n,E=f.useMemo(()=>Ev(m,C,u),[m,C,u]),M=f.useMemo(()=>Ev(C,m,u),[m,C,u]),k=f.useMemo(()=>Ev(S,m,u),[m,S,u]),A=f.useMemo(()=>Ev(m,S,u),[m,S,u]),R=C<=m,O=S<=m,L=f.useMemo(()=>O?u({id:"mtuHNb+mRc",defaultMessage:"Arrived {time} ago"},{time:k}):R?u({id:"b6q320RasU",defaultMessage:"Departed {time} ago"},{time:M}):u({id:"/JLglYfuNX",defaultMessage:"Departing in {time}"},{time:E}),[R,O,E,M,k,u]),P=f.useMemo(()=>p?u({id:"3wsVWFbC1x",defaultMessage:"Cancelled"}):h?u({id:"/N1ZeWQc8B",defaultMessage:"Diverted"}):g,[p,h,u,g]);return o.jsxs("div",{className:"gap-sm flex flex-col justify-between sm:flex-row",children:[o.jsxs("div",{children:[o.jsx(D,{variant:"section-title",children:o.jsx(pe,{id:"5KgWVKDR/R",defaultMessage:"{flightNumber}  {departureCity} ({departureAirport}) to {arrivalCity} ({arrivalAirport})",values:{flightNumber:y,departureCity:v,departureAirport:x,arrivalAirport:b,arrivalCity:_}})}),o.jsx("div",{className:"gap-sm flex flex-row",children:o.jsxs(Pl,{className:"gap-xs flex flex-row flex-wrap",children:[o.jsx(gr,{id:"day",children:o.jsx(D,{variant:"smallBold",color:"light",children:w})}),!p&&o.jsx(gr,{id:"relative-departure-time",children:o.jsx(D,{variant:"smallBold",color:"light",children:L})}),R&&!O&&!p&&o.jsx(gr,{id:"relative-arrival-time",children:o.jsx(D,{variant:"smallBold",color:"light",children:o.jsx(pe,{id:"z8jWKRSOak",defaultMessage:"Arriving in {time}",values:{time:A}})})}),o.jsx(gr,{id:"status",children:o.jsx(D,{variant:"smallBold",color:p||h||l?"negative":"super",children:P})})]})})]}),c]})});j5e.displayName="FlightHeader";const Jd=()=>{const{firstResult:{status:e,privacy_state:t}={}}=Vt(),n=hi(),{isIncognitoLocal:r}=hn();return f.useMemo(()=>{if(!e)return!1;const s=!!t&&(r&&t!==ag.INCOGNITO||!r&&t===ag.INCOGNITO);return!n&&e!==qn.PENDING||s},[r,t,n,e])},$C={initial:{opacity:0,filter:"blur(2px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(2px)"},transition:{duration:.5,ease:Ya}},K$=I.memo(({children:e,animationKey:t,...n})=>o.jsx(Ke,{mode:"popLayout",initial:!1,children:o.jsx(ge.div,{initial:$C.initial,animate:$C.animate,exit:$C.exit,transition:$C.transition,children:o.jsx(D,{...n,children:e})},t)}));K$.displayName="FlightTextSwitcher";const A5e=I.memo(({terminal:e,gate:t,alignEnd:n})=>{const{$t:r}=Z();return o.jsxs("div",{className:B("gap-lg flex w-full flex-row",n&&"justify-end"),children:[e&&o.jsx(yO,{label:r({id:"GAHVEi8lHA",defaultMessage:"Terminal"}),value:e}),t&&o.jsx(yO,{label:r({id:"W+gH70jajX",defaultMessage:"Gate"}),value:t})]})});A5e.displayName="FlightTerminalGate";const yO=I.memo(({label:e,value:t})=>o.jsxs("div",{children:[o.jsx(D,{variant:"tinyMono",color:"light",children:e}),o.jsx(K$,{animationKey:t,variant:"entry-title-200",children:t})]}));yO.displayName="FlightAttribute";const WC={initial:{opacity:0,height:0,filter:"blur(2px)"},animate:{opacity:1,height:"auto",filter:"blur(0px)"},exit:{opacity:0,height:0,filter:"blur(2px)"},transition:{duration:.3,ease:rn}},vO=I.memo(({airport:e,time:t,actualTime:n,estimatedTime:r,timezone:s,terminal:a,gate:i,variant:l="departure",delayed:c=!1,cancelled:u=!1})=>{const{locale:d,$t:m}=Z(),{submitQuery:p}=Hs(),h=Jd(),{firstResult:g}=Vt(),y=g?.frontend_context_uuid,v=f.useMemo(()=>m(l==="departure"?{id:"BtqAemWTLK",defaultMessage:"Departure"}:{id:"WOIPGxfmZn",defaultMessage:"Arrival"}),[l,m]),x=l==="arrival",b=f.useMemo(()=>{const S=n||r;return S&&S.getTime()===t.getTime()?null:S},[n,r,t]),_=f.useMemo(()=>t.toLocaleTimeString(d,{hour:"numeric",minute:"2-digit",timeZone:s}),[t,s,d]),w=f.useMemo(()=>b?.toLocaleTimeString(d,{hour:"numeric",minute:"2-digit",timeZone:s}),[b,s,d]),C=f.useCallback(()=>{const S=h,E=lo();p({fork:S,rawQuery:m({id:"xxqvnlQO57",defaultMessage:"Airport {airport}"},{airport:e}),collection:null,newFrontendContextUUID:S?E:null,existingFrontendContextUUID:S?void 0:y,promptSource:"user",querySource:"entity_link",shouldRedirectToBackendUUID:S})},[e,h,y,p,m]);return o.jsxs("div",{className:"gap-md col-span-3 flex flex-col justify-between",children:[o.jsxs("div",{className:B("gap-sm flex flex-col",x&&"items-end"),children:[o.jsxs(D,{variant:"tinyMono",color:"light",className:"gap-sm flex flex-row",children:[v,o.jsx("button",{className:"text-foreground hover:text-super cursor-pointer underline transition-colors duration-150 ease-in-out",onClick:C,children:e})]}),o.jsxs("div",{className:B("flex flex-col",x&&"items-end"),children:[o.jsx(K$,{animationKey:_,as:"span",variant:"entry-title-200",color:c?"negative":"super",className:B("-translate-y-px !font-mono transition-colors duration-500",u&&"text-quiet line-through"),children:b?w:_}),o.jsx(Ke,{initial:!1,children:b&&o.jsx(ge.div,{initial:WC.initial,animate:WC.animate,exit:WC.exit,transition:WC.transition,className:"overflow-hidden",children:o.jsx(D,{as:"span",variant:b?"small":"entry-title-200",color:"super",className:B("-translate-y-px !font-mono",b&&"!text-quiet line-through"),children:_})})})]})]}),o.jsx(A5e,{terminal:a,gate:i,alignEnd:x})]})});vO.displayName="FlightDepartureArrival";const SRt=ge(H),I5e=I.memo(({progress:e,departureTime:t,arrivalTime:n,delayed:r,cancelled:s})=>{const{$t:a}=Z(),i=f.useMemo(()=>Ev(t,n,a),[t,n,a]),l=f.useMemo(()=>e===void 0||s?0:Math.max(0,Math.min(100,e)),[e,s]),{left:c,width:u}=f.useMemo(()=>({left:`${l}%`,width:`${l}%`}),[l]),d=f.useMemo(()=>({left:0}),[]),m=f.useMemo(()=>({duration:2,ease:rn,delay:.5}),[]),p=f.useMemo(()=>({left:c,opacity:1,scale:1}),[c]),h=f.useMemo(()=>({...d,opacity:0,scale:1.2,top:"50%",translateX:"-50%",translateY:"-50%"}),[d]),g=f.useMemo(()=>({width:u}),[u]);return o.jsx("div",{className:"px-xs order-last col-span-6 flex flex-col items-center justify-center sm:order-[unset] sm:px-0",children:o.jsxs("div",{className:"gap-md flex w-full flex-col items-center",children:[o.jsx(D,{variant:"tinyMono",color:"light",children:i}),o.jsxs("div",{className:"relative flex w-full flex-1 items-center",children:[o.jsx("div",{className:"bg-inverse/10 relative h-0.5 w-full overflow-hidden rounded-full",children:o.jsx(ge.div,{className:B("!bg-inverse/50 absolute inset-y-0 left-0 transition-colors duration-500"),initial:d,animate:g,transition:m})}),o.jsx(SRt,{variant:"raised",className:"absolute left-0 flex aspect-square w-6 items-center justify-center",initial:h,animate:p,transition:m,children:o.jsx(ce,{className:B("text-quiet transition-colors duration-500",e&&e>0&&!r&&"!text-super",r&&"!text-negative",s&&"!text-quiet"),icon:$M})})]})]})})});I5e.displayName="FlightProgress";const R5e=I.memo(({departureTime:e,arrivalTime:t,actualDepartureTime:n,actualArrivalTime:r,estimatedDepartureTime:s,estimatedArrivalTime:a,flightMetadata:i,delayed:l=!1})=>{const{cancelled:c,departureAirport:u,arrivalAirport:d,departureTimezone:m,arrivalTimezone:p,terminal:h,gate:g,arrivalTerminal:y,arrivalGate:v,progressPercent:x}=i;return o.jsxs(sn,{className:"p-md gap-md grid w-full grid-cols-2 overflow-hidden shadow-sm sm:grid-cols-12",children:[o.jsx(vO,{variant:"departure",airport:u,time:e,actualTime:n,estimatedTime:s,timezone:m,terminal:h,gate:g,delayed:l,cancelled:c}),o.jsx(I5e,{departureTime:e,arrivalTime:t,progress:x,delayed:l,cancelled:c}),o.jsx(vO,{variant:"arrival",airport:d,time:t,actualTime:r,estimatedTime:a,timezone:p,terminal:y,gate:v,delayed:l,cancelled:c})]})});R5e.displayName="FlightStatusCard";const P5e=I.memo(({flights:e,selectedFlight:t,setSelectedFlight:n})=>{const{locale:r,$t:s}=Z(),{isMobileStyle:a}=xe(),i=f.useCallback(u=>{const d=new Date(u.departureTime),m=HP(d,u.departureTimezone);let p;if(LD(m)?p=s({id:"zWgbGgjUUg",defaultMessage:"Today"}):zqe(m)?p=s({id:"6dIxDP1C8c",defaultMessage:"Yesterday"}):Hqe(m)?p=s({id:"MtrTNyxuSU",defaultMessage:"Tomorrow"}):p=d.toLocaleDateString(r,{weekday:"short",month:"short",day:"numeric"}),e.filter(g=>{if(g.departureTimezone!==u.departureTimezone)return!1;const y=HP(new Date(g.departureTime),g.departureTimezone);return Ed(y).getTime()===Ed(m).getTime()}).length>1){const g=d.toLocaleTimeString(r,{hour:"numeric",minute:"2-digit"});p=s({id:"Fr3TxQz4BU",defaultMessage:"{dateString} - {timeString}"},{dateString:p,timeString:g})}return p},[r,e,s]),l=f.useMemo(()=>e.map(u=>({type:"default",text:i(u),value:u.flightAwareId,onClick:()=>n(u),active:u.flightAwareId===t?.flightAwareId})),[e,i,n,t?.flightAwareId]),c=f.useMemo(()=>t?i(t):"",[t,i]);return o.jsx("div",{children:o.jsx(Jt,{items:l,isMobileStyle:a,children:o.jsx(he,{variant:"border",text:c,chevron:!0,pill:!0})})})});P5e.displayName="FlightStatusSwitcher";const HC=new Date,O5e=I.memo(({data:e})=>{const t=f.useMemo(()=>[...e.data.flights].sort((h,g)=>new Date(h.departureTime).getTime()-new Date(g.departureTime).getTime()),[e.data.flights]),n=f.useMemo(()=>{const h=new Date().getTime();if(t.length!==0)return t.reduce((g,y)=>{const v=new Date(y.departureTime).getTime(),x=new Date(g.departureTime).getTime(),b=Math.abs(v-h),_=Math.abs(x-h);return b<_?y:g})},[t]),[r,s]=f.useState(n),{departureTime:a,arrivalTime:i,actualDepartureTime:l,actualArrivalTime:c,estimatedDepartureTime:u,estimatedArrivalTime:d}=f.useMemo(()=>{const h=g=>g?new Date(g):void 0;return r?{departureTime:new Date(r.departureTime),arrivalTime:new Date(r.arrivalTime),actualDepartureTime:h(r.actualDepartureTime),actualArrivalTime:h(r.actualArrivalTime),estimatedDepartureTime:h(r.estimatedDepartureTime),estimatedArrivalTime:h(r.estimatedArrivalTime)}:{}},[r]),m=f.useMemo(()=>c?c>i:d?d>i:!1,[c,i,d]),p=f.useMemo(()=>t.length<2?null:o.jsx(P5e,{flights:t,selectedFlight:r,setSelectedFlight:s}),[t,r,s]);return r?o.jsx(pr,{"data-testid":"flight-status-widget",className:"w-full",variant:"noChrome",children:o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsx(j5e,{flightMetadata:r,departureTime:a||HC,arrivalTime:i||HC,actualDepartureTime:l,actualArrivalTime:c,estimatedDepartureTime:u,estimatedArrivalTime:d,delayed:m,rightContent:p}),o.jsx(R5e,{departureTime:a||HC,arrivalTime:i||HC,actualDepartureTime:l,actualArrivalTime:c,estimatedDepartureTime:u,estimatedArrivalTime:d,flightMetadata:r,delayed:m})]})}):null});O5e.displayName="FlightStatusWidget";const L5e=I.memo(({children:e,entries:t,size:n="sm",footer:r})=>{const s=n!=="sm";return o.jsxs(sn,{shadow:!0,className:B("relative",s?"mb-lg pb-md":""),children:[e,o.jsx(H,{className:B("grid border-t"),children:t.map(({text:a,href:i,onClick:l})=>o.jsx("div",{className:"p-xs border-subtlest border-b last:border-b-0",onClickCapture:l,children:o.jsx(Te,{fullWidth:!0,variant:"super",chevron:!0,chevronIcon:Kn,size:"small",text:a,href:i,extraCSS:"rounded-md"})},i))}),r]})});L5e.displayName="WidgetCta";const D5e=I.memo(({data:{title:e,text:t,image_url:n,canonical_pages:r}})=>{const{$t:s}=Z();return o.jsx("div",{className:"mb-md gap-md flex flex-col",children:o.jsx(L5e,{entries:r.map(a=>({text:a.cta??s({defaultMessage:"View More",id:"QQSdHPJWXu"}),href:a.url_web})),size:"sm",children:o.jsxs("div",{className:"gap-md p-md flex items-center md:items-start",children:[n&&o.jsx("img",{alt:"",className:"max-h-[65px] rounded",src:n}),o.jsxs("div",{className:"mr-sm w-full",children:[e&&o.jsx(D,{variant:"baseSemi",children:e}),t&&o.jsx(D,{variant:"small",color:"light",children:t})]})]})})})});D5e.displayName="GenericFallbackWidget";const Vl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},F5e=Object.create(null);for(const e in Vl)Object.hasOwn(Vl,e)&&(F5e[Vl[e]]=e);const us={to:{},get:{}};us.get=function(e){const t=e.slice(0,3).toLowerCase();let n,r;switch(t){case"hsl":{n=us.get.hsl(e),r="hsl";break}case"hwb":{n=us.get.hwb(e),r="hwb";break}default:{n=us.get.rgb(e),r="rgb";break}}return n?{model:r,value:n}:null};us.get.rgb=function(e){if(!e)return null;const t=/^#([a-f\d]{3,4})$/i,n=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,s=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,a=/^(\w+)$/;let i=[0,0,0,1],l,c,u;if(l=e.match(n)){for(u=l[2],l=l[1],c=0;c<3;c++){const d=c*2;i[c]=Number.parseInt(l.slice(d,d+2),16)}u&&(i[3]=Number.parseInt(u,16)/255)}else if(l=e.match(t)){for(l=l[1],u=l[3],c=0;c<3;c++)i[c]=Number.parseInt(l[c]+l[c],16);u&&(i[3]=Number.parseInt(u+u,16)/255)}else if(l=e.match(r)){for(c=0;c<3;c++)i[c]=Number.parseInt(l[c+1],10);l[4]&&(i[3]=l[5]?Number.parseFloat(l[4])*.01:Number.parseFloat(l[4]))}else if(l=e.match(s)){for(c=0;c<3;c++)i[c]=Math.round(Number.parseFloat(l[c+1])*2.55);l[4]&&(i[3]=l[5]?Number.parseFloat(l[4])*.01:Number.parseFloat(l[4]))}else return(l=e.match(a))?l[1]==="transparent"?[0,0,0,0]:Object.hasOwn(Vl,l[1])?(i=Vl[l[1]],i[3]=1,i):null:null;for(c=0;c<3;c++)i[c]=yd(i[c],0,255);return i[3]=yd(i[3],0,1),i};us.get.hsl=function(e){if(!e)return null;const t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){const r=Number.parseFloat(n[4]),s=(Number.parseFloat(n[1])%360+360)%360,a=yd(Number.parseFloat(n[2]),0,100),i=yd(Number.parseFloat(n[3]),0,100),l=yd(Number.isNaN(r)?1:r,0,1);return[s,a,i,l]}return null};us.get.hwb=function(e){if(!e)return null;const t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){const r=Number.parseFloat(n[4]),s=(Number.parseFloat(n[1])%360+360)%360,a=yd(Number.parseFloat(n[2]),0,100),i=yd(Number.parseFloat(n[3]),0,100),l=yd(Number.isNaN(r)?1:r,0,1);return[s,a,i,l]}return null};us.to.hex=function(...e){return"#"+zC(e[0])+zC(e[1])+zC(e[2])+(e[3]<1?zC(Math.round(e[3]*255)):"")};us.to.rgb=function(...e){return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};us.to.rgb.percent=function(...e){const t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"};us.to.hsl=function(...e){return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};us.to.hwb=function(...e){let t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};us.to.keyword=function(...e){return F5e[e.slice(0,3)]};function yd(e,t,n){return Math.min(Math.max(t,e),n)}function zC(e){const t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}const U5e={};for(const e of Object.keys(Vl))U5e[Vl[e]]=e;const st={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},Jc=(6/29)**3;function $h(e){const t=e>.0031308?1.055*e**.4166666666666667-.055:e*12.92;return Math.min(Math.max(0,t),1)}function Wh(e){return e>.04045?((e+.055)/1.055)**2.4:e/12.92}for(const e of Object.keys(st)){if(!("channels"in st[e]))throw new Error("missing channels property: "+e);if(!("labels"in st[e]))throw new Error("missing channel labels property: "+e);if(st[e].labels.length!==st[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=st[e];delete st[e].channels,delete st[e].labels,Object.defineProperty(st[e],"channels",{value:t}),Object.defineProperty(st[e],"labels",{value:n})}st.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.min(t,n,r),a=Math.max(t,n,r),i=a-s;let l,c;switch(a){case s:{l=0;break}case t:{l=(n-r)/i;break}case n:{l=2+(r-t)/i;break}case r:{l=4+(t-n)/i;break}}l=Math.min(l*60,360),l<0&&(l+=360);const u=(s+a)/2;return a===s?c=0:u<=.5?c=i/(a+s):c=i/(2-a-s),[l,c*100,u*100]};st.rgb.hsv=function(e){let t,n,r,s,a;const i=e[0]/255,l=e[1]/255,c=e[2]/255,u=Math.max(i,l,c),d=u-Math.min(i,l,c),m=function(p){return(u-p)/6/d+1/2};if(d===0)s=0,a=0;else{switch(a=d/u,t=m(i),n=m(l),r=m(c),u){case i:{s=r-n;break}case l:{s=1/3+t-r;break}case c:{s=2/3+n-t;break}}s<0?s+=1:s>1&&(s-=1)}return[s*360,a*100,u*100]};st.rgb.hwb=function(e){const t=e[0],n=e[1];let r=e[2];const s=st.rgb.hsl(e)[0],a=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[s,a*100,r*100]};st.rgb.oklab=function(e){const t=Wh(e[0]/255),n=Wh(e[1]/255),r=Wh(e[2]/255),s=Math.cbrt(.4122214708*t+.5363325363*n+.0514459929*r),a=Math.cbrt(.2119034982*t+.6806995451*n+.1073969566*r),i=Math.cbrt(.0883024619*t+.2817188376*n+.6299787005*r),l=.2104542553*s+.793617785*a-.0040720468*i,c=1.9779984951*s-2.428592205*a+.4505937099*i,u=.0259040371*s+.7827717662*a-.808675766*i;return[l*100,c*100,u*100]};st.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.min(1-t,1-n,1-r),a=(1-t-s)/(1-s)||0,i=(1-n-s)/(1-s)||0,l=(1-r-s)/(1-s)||0;return[a*100,i*100,l*100,s*100]};function ERt(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}st.rgb.keyword=function(e){const t=U5e[e];if(t)return t;let n=Number.POSITIVE_INFINITY,r;for(const s of Object.keys(Vl)){const a=Vl[s],i=ERt(e,a);i<n&&(n=i,r=s)}return r};st.keyword.rgb=function(e){return Vl[e]};st.rgb.xyz=function(e){const t=Wh(e[0]/255),n=Wh(e[1]/255),r=Wh(e[2]/255),s=t*.4124564+n*.3575761+r*.1804375,a=t*.2126729+n*.7151522+r*.072175,i=t*.0193339+n*.119192+r*.9503041;return[s*100,a*100,i*100]};st.rgb.lab=function(e){const t=st.rgb.xyz(e);let n=t[0],r=t[1],s=t[2];n/=95.047,r/=100,s/=108.883,n=n>Jc?n**(1/3):7.787*n+16/116,r=r>Jc?r**(1/3):7.787*r+16/116,s=s>Jc?s**(1/3):7.787*s+16/116;const a=116*r-16,i=500*(n-r),l=200*(r-s);return[a,i,l]};st.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let s,a;if(n===0)return a=r*255,[a,a,a];const i=r<.5?r*(1+n):r+n-r*n,l=2*r-i,c=[0,0,0];for(let u=0;u<3;u++)s=t+1/3*-(u-1),s<0&&s++,s>1&&s--,6*s<1?a=l+(i-l)*6*s:2*s<1?a=i:3*s<2?a=l+(i-l)*(2/3-s)*6:a=l,c[u]=a*255;return c};st.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,s=n;const a=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,s*=a<=1?a:2-a;const i=(r+n)/2,l=r===0?2*s/(a+s):2*n/(r+n);return[t,l*100,i*100]};st.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const s=Math.floor(t)%6,a=t-Math.floor(t),i=255*r*(1-n),l=255*r*(1-n*a),c=255*r*(1-n*(1-a));switch(r*=255,s){case 0:return[r,c,i];case 1:return[l,r,i];case 2:return[i,r,c];case 3:return[i,l,r];case 4:return[c,i,r];case 5:return[r,i,l]}};st.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,s=Math.max(r,.01);let a,i;i=(2-n)*r;const l=(2-n)*s;return a=n*s,a/=l<=1?l:2-l,a=a||0,i/=2,[t,a*100,i*100]};st.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const s=n+r;let a;s>1&&(n/=s,r/=s);const i=Math.floor(6*t),l=1-r;a=6*t-i,i&1&&(a=1-a);const c=n+a*(l-n);let u,d,m;switch(i){default:case 6:case 0:{u=l,d=c,m=n;break}case 1:{u=c,d=l,m=n;break}case 2:{u=n,d=l,m=c;break}case 3:{u=n,d=c,m=l;break}case 4:{u=c,d=n,m=l;break}case 5:{u=l,d=n,m=c;break}}return[u*255,d*255,m*255]};st.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=e[3]/100,a=1-Math.min(1,t*(1-s)+s),i=1-Math.min(1,n*(1-s)+s),l=1-Math.min(1,r*(1-s)+s);return[a*255,i*255,l*255]};st.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let s,a,i;return s=t*3.2404542+n*-1.5371385+r*-.4985314,a=t*-.969266+n*1.8760108+r*.041556,i=t*.0556434+n*-.2040259+r*1.0572252,s=$h(s),a=$h(a),i=$h(i),[s*255,a*255,i*255]};st.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>Jc?t**(1/3):7.787*t+16/116,n=n>Jc?n**(1/3):7.787*n+16/116,r=r>Jc?r**(1/3):7.787*r+16/116;const s=116*n-16,a=500*(t-n),i=200*(n-r);return[s,a,i]};st.xyz.oklab=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=Math.cbrt(.8189330101*t+.3618667424*n-.1288597137*r),a=Math.cbrt(.0329845436*t+.9293118715*n+.0361456387*r),i=Math.cbrt(.0482003018*t+.2643662691*n+.633851707*r),l=.2104542553*s+.793617785*a-.0040720468*i,c=1.9779984951*s-2.428592205*a+.4505937099*i,u=.0259040371*s+.7827717662*a-.808675766*i;return[l*100,c*100,u*100]};st.oklab.oklch=function(e){return st.lab.lch(e)};st.oklab.xyz=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=(.999999998*t+.396337792*n+.215803758*r)**3,a=(1.000000008*t-.105561342*n-.063854175*r)**3,i=(1.000000055*t-.089484182*n-1.291485538*r)**3,l=1.227013851*s-.55779998*a+.281256149*i,c=-.040580178*s+1.11225687*a-.071676679*i,u=-.076381285*s-.421481978*a+1.58616322*i;return[l*100,c*100,u*100]};st.oklab.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=(t+.3963377774*n+.2158037573*r)**3,a=(t-.1055613458*n-.0638541728*r)**3,i=(t-.0894841775*n-1.291485548*r)**3,l=$h(4.0767416621*s-3.3077115913*a+.2309699292*i),c=$h(-1.2684380046*s+2.6097574011*a-.3413193965*i),u=$h(-.0041960863*s-.7034186147*a+1.707614701*i);return[l*255,c*255,u*255]};st.oklch.oklab=function(e){return st.lch.lab(e)};st.lab.xyz=function(e){const t=e[0],n=e[1],r=e[2];let s,a,i;a=(t+16)/116,s=n/500+a,i=a-r/200;const l=a**3,c=s**3,u=i**3;return a=l>Jc?l:(a-16/116)/7.787,s=c>Jc?c:(s-16/116)/7.787,i=u>Jc?u:(i-16/116)/7.787,s*=95.047,a*=100,i*=108.883,[s,a,i]};st.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let s;s=Math.atan2(r,n)*360/2/Math.PI,s<0&&(s+=360);const i=Math.sqrt(n*n+r*r);return[t,i,s]};st.lch.lab=function(e){const t=e[0],n=e[1],s=e[2]/360*2*Math.PI,a=n*Math.cos(s),i=n*Math.sin(s);return[t,a,i]};st.rgb.ansi16=function(e,t=null){const[n,r,s]=e;let a=t===null?st.rgb.hsv(e)[2]:t;if(a=Math.round(a/50),a===0)return 30;let i=30+(Math.round(s/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return a===2&&(i+=60),i};st.hsv.ansi16=function(e){return st.rgb.ansi16(st.hsv.rgb(e),e[2])};st.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];return t>>4===n>>4&&n>>4===r>>4?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)};st.ansi16.rgb=function(e){e=e[0];let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=(Math.trunc(e>50)+1)*.5,r=(t&1)*n*255,s=(t>>1&1)*n*255,a=(t>>2&1)*n*255;return[r,s,a]};st.ansi256.rgb=function(e){if(e=e[0],e>=232){const a=(e-232)*10+8;return[a,a,a]}e-=16;let t;const n=Math.floor(e/36)/5*255,r=Math.floor((t=e%36)/6)/5*255,s=t%6/5*255;return[n,r,s]};st.rgb.hex=function(e){const n=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".slice(n.length)+n};st.hex.rgb=function(e){const t=e.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!t)return[0,0,0];let n=t[0];t[0].length===3&&(n=[...n].map(l=>l+l).join(""));const r=Number.parseInt(n,16),s=r>>16&255,a=r>>8&255,i=r&255;return[s,a,i]};st.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.max(Math.max(t,n),r),a=Math.min(Math.min(t,n),r),i=s-a;let l;const c=i<1?a/(1-i):0;return i<=0?l=0:s===t?l=(n-r)/i%6:s===n?l=2+(r-t)/i:l=4+(t-n)/i,l/=6,l%=1,[l*360,i*100,c*100]};st.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let s=0;return r<1&&(s=(n-.5*r)/(1-r)),[e[0],r*100,s*100]};st.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let s=0;return r<1&&(s=(n-r)/(1-r)),[e[0],r*100,s*100]};st.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(n===0)return[r*255,r*255,r*255];const s=[0,0,0],a=t%1*6,i=a%1,l=1-i;let c=0;switch(Math.floor(a)){case 0:{s[0]=1,s[1]=i,s[2]=0;break}case 1:{s[0]=l,s[1]=1,s[2]=0;break}case 2:{s[0]=0,s[1]=1,s[2]=i;break}case 3:{s[0]=0,s[1]=l,s[2]=1;break}case 4:{s[0]=i,s[1]=0,s[2]=1;break}default:s[0]=1,s[1]=0,s[2]=l}return c=(1-n)*r,[(n*s[0]+c)*255,(n*s[1]+c)*255,(n*s[2]+c)*255]};st.hcg.hsv=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);let s=0;return r>0&&(s=t/r),[e[0],s*100,r*100]};st.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let s=0;return r>0&&r<.5?s=t/(2*r):r>=.5&&r<1&&(s=t/(2*(1-r))),[e[0],s*100,r*100]};st.hcg.hwb=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);return[e[0],(r-t)*100,(1-r)*100]};st.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,s=r-t;let a=0;return s<1&&(a=(r-s)/(1-s)),[e[0],s*100,a*100]};st.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};st.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};st.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};st.gray.hsl=function(e){return[0,0,e[0]]};st.gray.hsv=st.gray.hsl;st.gray.hwb=function(e){return[0,100,e[0]]};st.gray.cmyk=function(e){return[0,0,0,e[0]]};st.gray.lab=function(e){return[e[0],0,0]};st.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".slice(r.length)+r};st.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};function MRt(){const e={},t=Object.keys(st);for(let{length:n}=t,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}function kRt(e){const t=MRt(),n=[e];for(t[e].distance=0;n.length>0;){const r=n.pop(),s=Object.keys(st[r]);for(let{length:a}=s,i=0;i<a;i++){const l=s[i],c=t[l];c.distance===-1&&(c.distance=t[r].distance+1,c.parent=r,n.unshift(l))}}return t}function TRt(e,t){return function(n){return t(e(n))}}function NRt(e,t){const n=[t[e].parent,e];let r=st[t[e].parent][e],s=t[e].parent;for(;t[s].parent;)n.unshift(t[s].parent),r=TRt(st[t[s].parent][s],r),s=t[s].parent;return r.conversion=n,r}function jRt(e){const t=kRt(e),n={},r=Object.keys(t);for(let{length:s}=r,a=0;a<s;a++){const i=r[a];t[i].parent!==null&&(n[i]=NRt(i,t))}return n}const ws={},ARt=Object.keys(st);function IRt(e){const t=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}function RRt(e){const t=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const s=e(n);if(typeof s=="object")for(let{length:a}=s,i=0;i<a;i++)s[i]=Math.round(s[i]);return s};return"conversion"in e&&(t.conversion=e.conversion),t}for(const e of ARt){ws[e]={},Object.defineProperty(ws[e],"channels",{value:st[e].channels}),Object.defineProperty(ws[e],"labels",{value:st[e].labels});const t=jRt(e),n=Object.keys(t);for(const r of n){const s=t[r];ws[e][r]=RRt(s),ws[e][r].raw=IRt(s)}}const B5e=["keyword","gray","hex"],xO={};for(const e of Object.keys(ws))xO[[...ws[e].labels].sort().join("")]=e;const bO={};function ir(e,t){if(!(this instanceof ir))return new ir(e,t);if(t&&t in B5e&&(t=null),t&&!(t in ws))throw new Error("Unknown model: "+t);let n,r;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof ir)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){const s=us.get(e);if(s===null)throw new Error("Unable to parse color from string: "+e);this.model=s.model,r=ws[this.model].channels,this.color=s.value.slice(0,r),this.valpha=typeof s.value[r]=="number"?s.value[r]:1}else if(e.length>0){this.model=t||"rgb",r=ws[this.model].channels;const s=Array.prototype.slice.call(e,0,r);this.color=_O(s,r),this.valpha=typeof e[r]=="number"?e[r]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;const s=Object.keys(e);"alpha"in e&&(s.splice(s.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);const a=s.sort().join("");if(!(a in xO))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=xO[a];const{labels:i}=ws[this.model],l=[];for(n=0;n<i.length;n++)l.push(e[i[n]]);this.color=_O(l)}if(bO[this.model])for(r=ws[this.model].channels,n=0;n<r;n++){const s=bO[this.model][n];s&&(this.color[n]=s(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}ir.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in us.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);const n=t.valpha===1?t.color:[...t.color,this.valpha];return us.to[t.model](...n)},percentString(e){const t=this.rgb().round(typeof e=="number"?e:1),n=t.valpha===1?t.color:[...t.color,this.valpha];return us.to.rgb.percent(...n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=ws[this.model],{labels:n}=ws[this.model];for(let r=0;r<t;r++)e[n[r]]=this.color[r];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new ir([...this.color.map(ORt(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new ir([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:Tr("rgb",0,ns(255)),green:Tr("rgb",1,ns(255)),blue:Tr("rgb",2,ns(255)),hue:Tr(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:Tr("hsl",1,ns(100)),lightness:Tr("hsl",2,ns(100)),saturationv:Tr("hsv",1,ns(100)),value:Tr("hsv",2,ns(100)),chroma:Tr("hcg",1,ns(100)),gray:Tr("hcg",2,ns(100)),white:Tr("hwb",1,ns(100)),wblack:Tr("hwb",2,ns(100)),cyan:Tr("cmyk",0,ns(100)),magenta:Tr("cmyk",1,ns(100)),yellow:Tr("cmyk",2,ns(100)),black:Tr("cmyk",3,ns(100)),x:Tr("xyz",0,ns(95.047)),y:Tr("xyz",1,ns(100)),z:Tr("xyz",2,ns(108.833)),l:Tr("lab",0,ns(100)),a:Tr("lab",1),b:Tr("lab",2),keyword(e){return e!==void 0?new ir(e):ws[this.model].keyword(this.color)},hex(e){return e!==void 0?new ir(e):us.to.hex(...this.rgb().round().color)},hexa(e){if(e!==void 0)return new ir(e);const t=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),us.to.hex(...t)+n},rgbNumber(){const e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){const e=this.rgb().color,t=[];for(const[n,r]of e.entries()){const s=r/255;t[n]=s<=.04045?s/12.92:((s+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return ir.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let n=t.color[0];return n=(n+e)%360,n=n<0?360+n:n,t.color[0]=n,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const n=e.rgb(),r=this.rgb(),s=t===void 0?.5:t,a=2*s-1,i=n.alpha()-r.alpha(),l=((a*i===-1?a:(a+i)/(1+a*i))+1)/2,c=1-l;return ir.rgb(l*n.red()+c*r.red(),l*n.green()+c*r.green(),l*n.blue()+c*r.blue(),n.alpha()*s+r.alpha()*(1-s))}};for(const e of Object.keys(ws)){if(B5e.includes(e))continue;const{channels:t}=ws[e];ir.prototype[e]=function(...n){return this.model===e?new ir(this):n.length>0?new ir(n,e):new ir([...LRt(ws[this.model][e].raw(this.color)),this.valpha],e)},ir[e]=function(...n){let r=n[0];return typeof r=="number"&&(r=_O(n,t)),new ir(r,e)}}function PRt(e,t){return Number(e.toFixed(t))}function ORt(e){return function(t){return PRt(t,e)}}function Tr(e,t,n){e=Array.isArray(e)?e:[e];for(const r of e)(bO[r]||=[])[t]=n;return e=e[0],function(r){let s;return r!==void 0?(n&&(r=n(r)),s=this[e](),s.color[t]=r,s):(s=this[e]().color[t],n&&(s=n(s)),s)}}function ns(e){return function(t){return Math.max(0,Math.min(e,t))}}function LRt(e){return Array.isArray(e)?e:[e]}function _O(e,t){for(let n=0;n<t;n++)typeof e[n]!="number"&&(e[n]=0);return e}const ap=I.memo(({size:e="default",className:t,includeDot:n})=>{const{$t:r}=Z(),{isMobileStyle:s}=xe();return o.jsx("div",{className:B("flex shrink-0 items-center justify-center",t),children:o.jsxs(D,{variant:e==="tiny"||s?"micro":"tiny",color:"super",className:B("bg-superBG pt-three flex shrink-0 items-center rounded-full py-0.5 tracking-wider",{"px-2.5":e==="default","pl-2":e==="default"&&n,"px-2":e==="small","px-1.5":e==="tiny"}),children:[n&&o.jsxs("span",{className:"grid",children:[o.jsx("span",{className:"bg-super mr-1 size-1.5 rounded-full",style:{gridArea:"1/-1"}}),o.jsx("span",{className:"bg-super mr-1 size-1.5 animate-ping rounded-full",style:{gridArea:"1/-1"}})]}),r({defaultMessage:"Live",id:"Dn82ALx/+V"}).toUpperCase()]})})});ap.displayName="LiveIndicator";const DRt=["West First Round","East First Round","Western Conference Semifinals","Eastern Conference Semifinals","Western Conference Finals","Eastern Conference Finals","NBA Finals"],V5e=e=>DRt.includes(e);function FRt(e){return e!==null&&typeof e=="object"&&"is_bye_event"in e&&typeof e.is_bye_event=="boolean"}function $5e(e,t){return t.find(n=>String(n.teamId)===String(e))}const URt=e=>{switch(e){case"nba":case"wnba":case"ncaam":case"ncaaw":case"mlb":case"atp":case"wta":return"/static/images/sports/nba/logos/nba-logo-generic.png";case"nfl":return"/static/images/sports/nfl/logos/nfl-logo-generic.png";case"ipl":case"cricket":case"icc":return"/static/images/sports/cricket/logos/cricket-logo-generic.png";default:return""}},BRt="#64645F";function Dg(e,t,n){const r={teamId:e,logo:URt(n),color:BRt};return $5e(e,t)??r}function VRt(e,t){return t.find(n=>n.teamId===e)}function G_(e){return[...e].sort((t,n)=>n.teamLocationType.teamLocationTypeId-t.teamLocationType.teamLocationTypeId)}function lM(e){if(!e||e.wins+e.losses+e.ties===0)return"";const{wins:t,losses:n,ties:r}=e;return r?`${t}-${n}-${r}`:`${t}-${n}`}function $Rt(e,t){return t.winProbabilities?.find(n=>n.teamId===e)}function WRt(e,t,n,r){const s=Dg(e,n,r),a=VRt(e,t),i=t.find(c=>c.teamId===e)?.seed,l=HRt(r);return{teamId:a.teamId,logo:s.logo,color:s.color,nickname:l?a.location:a.nickname,abbreviation:a.abbreviation,record:a.record,winner:a.isWinner,score:a.score,seed:i}}const HRt=e=>e==="ncaam"||e==="ncaaw";function zRt(e,t,n,r){const s=Dg(e,n,r),a=t.find(i=>i.id===e);return a?{teamId:a.id,logo:s.logo,color:s.color,nickname:a.title??"",abbreviation:a.abbreviation??""}:{teamId:e,logo:s.logo,color:s.color,nickname:"",abbreviation:""}}function GRt(e,t,n){return G_(e)?.map(r=>WRt(r.teamId,e,t,n))}function Arn(e,t,n){return e.map(r=>zRt(r.id,e,t,n))}function Irn(e,t){for(const n of t)for(const r of n.divisions)for(const s of r.teams)if(s.teamId===e)return{conference:n.abbreviation,division:r.name};return null}const Rrn=e=>e?"nickname"in e?e.nickname:e.title:null,Prn=e=>e?"teamId"in e?e.teamId:e.id:null,Orn=e=>"score"in e?e.score:e.sub_text&&e.text?`${e.text} ${e.sub_text}`:e.text,qRt=e=>"isWinner"in e?e.isWinner:e.won,Lrn=e=>e?e.some(t=>qRt(t)):!1,Drn=e=>e?"teamId"in(e[0]??{})?e.every(t=>"teamId"in t)&&!e.some(t=>!t.teamId||String(t.teamId)==="TBD"):e.every(t=>"id"in t)&&!e.some(t=>t.id==="TBD"):!1,Frn=e=>!e.team_1||!e.team_2||FRt(e.extra)&&e.extra.is_bye_event?!1:!!(e.team_1.id&&e.team_2.id&&e.team_1.id!=="TBD"&&e.team_2.id!=="TBD"),Urn=e=>"id"in e,Brn=e=>!!e.team_1.won||!!e.team_2.won;var tv={},hse;function q_(){if(hse)return tv;hse=1,tv.__esModule=!0,tv.default=void 0;var e={top:"top",left:"left",right:"right",bottom:"bottom"};return tv.default=e,tv}var KRt=q_();const YRt=Bo(KRt);function GC(e,t,n,r,s){var a;switch(e){case"center":return s;case"min":return n??0;case"max":return r??0;case"outside":default:return(a=(t??0)<s?n:r)!=null?a:0}}function gse(e){var t=e.from,n=e.to;return{fromX:t.x,toX:n.x,fromY:t.y,toY:n.y,opacity:1}}function W5e(e){var t=e.scale,n=e.animateXOrY,r=e.animationTrajectory,s=r===void 0?"outside":r,a=n==="x";return f.useMemo(function(){var i=t.range().map(b_),l=i[0],c=i[1],u=c!=null&&l!=null&&c<l,d=u?[c,l]:[l,c],m=d[0],p=d[1],h=c!=null&&l!=null?Math.abs(c-l):0,g=(m??0)+h/2,y=s;!a&&s==="min"&&(y="max"),!a&&s==="max"&&(y="min");var v=function(b){var _=b.from,w=b.to;return{fromX:a?GC(y,_.x,m,p,g):_.x,toX:a?GC(y,_.x,m,p,g):w.x,fromY:a?_.y:GC(y,_.y,m,p,g),toY:a?w.y:GC(y,_.y,m,p,g),opacity:0}};return{from:v,leave:v,enter:gse,update:gse}},[t,a,s])}function bx(){return bx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bx.apply(null,arguments)}function QRt(e){var t=e.hideTicks,n=e.horizontal,r=e.orientation,s=e.scale,a=e.tickClassName,i=e.tickComponent,l=e.tickLabelProps,c=e.tickStroke,u=c===void 0?"#222":c,d=e.tickTransform,m=e.ticks,p=e.tickLineProps,h=e.animationTrajectory,g=tV(m,bx({},W5e({scale:s,animateXOrY:n?"x":"y",animationTrajectory:h}),{keys:function(v){return"tick-"+v.value+"-"+v.index}}));return I.createElement(I.Fragment,null,g(function(y,v,x,b){var _,w,C=y.fromX,S=y.toX,E=y.fromY,M=y.toY,k=y.opacity,A=x.key,R=(_=(w=l[b])!=null?w:l[0])!=null?_:{};return v==null||A==null?null:I.createElement(Xc.g,{key:A,className:B("visx-axis-tick",a),transform:d},!t&&I.createElement(Xc.line,bx({x1:C,x2:S,y1:E,y2:M,stroke:u,strokeLinecap:"square",strokeOpacity:k},p)),I.createElement(Xc.g,{key:b,transform:g2t([S,M],function(O,L){var P;return"translate("+O+","+(L+(r===YRt.bottom&&typeof R.fontSize=="number"?(P=R.fontSize)!=null?P:10:0))+")"}),opacity:k},i?i(bx({},R,{x:S,y:M,formattedValue:v?.formattedValue})):I.createElement(tT,R,v?.formattedValue)))}))}var qC={};const Y$=ty(Swt),Q$=ty(ywt);var KC={};const H5e=ty(nSt),z5e=ty(N6t);var YC={},yse;function XRt(){if(yse)return YC;yse=1,YC.__esModule=!0,YC.default=n;var e=t(q_());function t(r){return r&&r.__esModule?r:{default:r}}function n(r){var s=r.labelOffset,a=r.labelProps,i=r.orientation,l=r.range,c=r.tickLabelFontSize,u=r.tickLength,d=i===e.default.left||i===e.default.top?-1:1,m,p,h;if(i===e.default.top||i===e.default.bottom){var g=i===e.default.bottom&&typeof a.fontSize=="number"?a.fontSize:0;m=(Number(l[0])+Number(l[l.length-1]))/2,p=d*(u+s+c+g)}else m=d*((Number(l[0])+Number(l[l.length-1]))/2),p=-(u+s),h="rotate("+d*90+")";return{x:m,y:p,transform:h}}return YC}var QC={},vse;function ZRt(){if(vse)return QC;vse=1,QC.__esModule=!0,QC.default=c;var e=i(Qg()),t=i(ub()),n=H5e,r=Y$,s=z5e,a=i(q_());function i(u){return u&&u.__esModule?u:{default:u}}function l(){return l=Object.assign?Object.assign.bind():function(u){for(var d=1;d<arguments.length;d++){var m=arguments[d];for(var p in m)({}).hasOwnProperty.call(m,p)&&(u[p]=m[p])}return u},l.apply(null,arguments)}function c(u){var d=u.hideTicks,m=u.horizontal,p=u.orientation,h=u.tickClassName,g=u.tickComponent,y=u.tickLabelProps,v=u.tickStroke,x=v===void 0?"#222":v,b=u.tickTransform,_=u.ticks,w=u.strokeWidth,C=u.tickLineProps;return _.map(function(S){var E,M=S.value,k=S.index,A=S.from,R=S.to,O=S.formattedValue,L=(E=y[k])!=null?E:{},P=Math.max(10,typeof L.fontSize=="number"&&L.fontSize||0),N=R.y+(m&&p!==a.default.top?P:0);return e.default.createElement(r.Group,{key:"visx-tick-"+M+"-"+k,className:(0,t.default)("visx-axis-tick",h),transform:b},!d&&e.default.createElement(n.Line,l({from:A,to:R,stroke:x,strokeWidth:w,strokeLinecap:"square"},C)),g?g(l({},L,{x:R.x,y:N,formattedValue:O})):e.default.createElement(s.Text,l({x:R.x,y:N},L),O))})}return QC}var xse;function JRt(){if(xse)return KC;xse=1,KC.__esModule=!0,KC.default=d;var e=l(Qg()),t=l(ub()),n=H5e,r=z5e,s=l(XRt()),a=l(q_()),i=l(ZRt());function l(m){return m&&m.__esModule?m:{default:m}}function c(){return c=Object.assign?Object.assign.bind():function(m){for(var p=1;p<arguments.length;p++){var h=arguments[p];for(var g in h)({}).hasOwnProperty.call(h,g)&&(m[g]=h[g])}return m},c.apply(null,arguments)}var u={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"#222"};function d(m){var p=m.axisFromPoint,h=m.axisLineClassName,g=m.axisToPoint,y=m.hideAxisLine,v=m.hideTicks,x=m.horizontal,b=m.label,_=b===void 0?"":b,w=m.labelClassName,C=m.labelOffset,S=C===void 0?14:C,E=m.labelProps,M=m.orientation,k=M===void 0?a.default.bottom:M,A=m.scale,R=m.stroke,O=R===void 0?"#222":R,L=m.strokeDasharray,P=m.strokeWidth,N=P===void 0?1:P,T=m.tickClassName,j=m.tickComponent,F=m.tickLineProps,U=m.tickLabelProps,V=m.tickLength,$=V===void 0?8:V,z=m.tickStroke,Q=z===void 0?"#222":z,Y=m.tickTransform,W=m.ticks,X=m.ticksComponent,G=X===void 0?i.default:X,J=c({},u,E),q=c({},u,typeof U=="object"?U:null),te=W.map(function(ae){var fe=ae.value,de=ae.index;return typeof U=="function"?U(fe,de,W):q}),re=Math.max.apply(Math,[10].concat(te.map(function(ae){return typeof ae.fontSize=="number"?ae.fontSize:0})));return e.default.createElement(e.default.Fragment,null,G({hideTicks:v,horizontal:x,orientation:k,scale:A,tickClassName:T,tickComponent:j,tickLabelProps:te,tickStroke:Q,tickTransform:Y,ticks:W,strokeWidth:N,tickLineProps:F}),!y&&e.default.createElement(n.Line,{className:(0,t.default)("visx-axis-line",h),from:p,to:g,stroke:O,strokeWidth:N,strokeDasharray:L}),_&&e.default.createElement(r.Text,c({className:(0,t.default)("visx-axis-label",w)},(0,s.default)({labelOffset:S,labelProps:J,orientation:k,range:A.range(),tickLabelFontSize:re,tickLength:$}),J),_))}return KC}var XC={},bse;function ePt(){if(bse)return XC;bse=1,XC.__esModule=!0,XC.default=e;function e(t,n){n===void 0&&(n="center");var r=t;if(n!=="start"&&"bandwidth"in r){var s=r.bandwidth();return n==="center"&&(s/=2),r.round()&&(s=Math.round(s)),function(a){var i=r(a);return typeof i=="number"?i+s:i}}return t}return XC}var ZC={},_se;function tPt(){if(_se)return ZC;_se=1,ZC.__esModule=!0,ZC.default=t;var e=Q$;function t(n){var r=n;return"tickFormat"in r?r.tickFormat():e.toString}return ZC}var JC={};const G5e=ty(D6t);var wse;function nPt(){if(wse)return JC;wse=1,JC.__esModule=!0,JC.default=t;var e=G5e;function t(n,r){var s=n.x,a=n.y;return new e.Point(r?{x:s,y:a}:{x:a,y:s})}return JC}var Lp={},Cse;function rPt(){if(Cse)return Lp;Cse=1,Lp.__esModule=!0,Lp.default=n,Lp.defaultAxisRangePadding=void 0;function e(){return e=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)({}).hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r},e.apply(null,arguments)}var t=Lp.defaultAxisRangePadding=0;function n(r){return r===void 0&&(r=t),typeof r=="number"?{start:r,end:r}:e({start:t,end:t},r)}return Lp}var Sse;function sPt(){if(Sse)return qC;Sse=1,qC.__esModule=!0,qC.default=g,m(_U());var e=m(Qg()),t=m(ub()),n=Y$,r=Q$,s=m(JRt()),a=m(ePt()),i=m(tPt()),l=m(nPt()),c=m(q_()),u=m(rPt()),d=["children","axisClassName","hideAxisLine","hideTicks","hideZero","innerRef","left","numTicks","orientation","rangePadding","scale","tickFormat","tickLength","tickValues","top"];function m(y){return y&&y.__esModule?y:{default:y}}function p(){return p=Object.assign?Object.assign.bind():function(y){for(var v=1;v<arguments.length;v++){var x=arguments[v];for(var b in x)({}).hasOwnProperty.call(x,b)&&(y[b]=x[b])}return y},p.apply(null,arguments)}function h(y,v){if(y==null)return{};var x={};for(var b in y)if({}.hasOwnProperty.call(y,b)){if(v.includes(b))continue;x[b]=y[b]}return x}function g(y){var v=y.children,x=v===void 0?s.default:v,b=y.axisClassName,_=y.hideAxisLine,w=_===void 0?!1:_,C=y.hideTicks,S=C===void 0?!1:C,E=y.hideZero,M=E===void 0?!1:E,k=y.innerRef,A=y.left,R=A===void 0?0:A,O=y.numTicks,L=O===void 0?10:O,P=y.orientation,N=P===void 0?c.default.bottom:P,T=y.rangePadding,j=T===void 0?0:T,F=y.scale,U=y.tickFormat,V=y.tickLength,$=V===void 0?8:V,z=y.tickValues,Q=y.top,Y=Q===void 0?0:Q,W=h(y,d),X=U??(0,i.default)(F),G=N===c.default.left,J=N===c.default.top,q=J||N===c.default.bottom,te=(0,a.default)(F),re=G||J?-1:1,ae=F.range(),fe=(0,u.default)(j),de=(0,l.default)({x:Number(ae[0])+.5-fe.start,y:0},q),ve=(0,l.default)({x:Number(ae[ae.length-1])+.5+fe.end,y:0},q),_e=(z??(0,r.getTicks)(F,L)).filter(function(be){return!M||be!==0&&be!=="0"}).map(function(be,me){return{value:be,index:me}}),Se=_e.map(function(be){var me=be.value,Ae=be.index,Ee=(0,r.coerceNumber)(te(me));return{value:me,index:Ae,from:(0,l.default)({x:Ee,y:0},q),to:(0,l.default)({x:Ee,y:$*re},q),formattedValue:X(me,Ae,_e)}});return e.default.createElement(n.Group,{className:(0,t.default)("visx-axis",b),innerRef:k,top:Y,left:R},x(p({},W,{axisFromPoint:de,axisToPoint:ve,hideAxisLine:w,hideTicks:S,hideZero:M,horizontal:q,numTicks:L,orientation:N,rangePadding:j,scale:F,tickFormat:X,tickLength:$,tickPosition:te,tickSign:re,ticks:Se})))}return qC}var aPt=sPt();const oPt=Bo(aPt);var iPt=["animationTrajectory","tickComponent"];function cM(){return cM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cM.apply(null,arguments)}function lPt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function cPt(e){var t=e.animationTrajectory,n=e.tickComponent,r=lPt(e,iPt),s=f.useMemo(function(){return function(i){return I.createElement(QRt,cM({},i,{tickComponent:n,animationTrajectory:t}))}},[t,n]);return I.createElement(oPt,cM({},r,{ticksComponent:s}))}var eS={},tS={},Ese;function uPt(){if(Ese)return tS;Ese=1,tS.__esModule=!0,tS.default=e;function e(t){return"bandwidth"in t?t.bandwidth():0}return tS}var Mse;function dPt(){if(Mse)return eS;Mse=1,eS.__esModule=!0,eS.default=p;var e=u(_U()),t=u(Qg()),n=u(ub()),r=u(YMe()),s=Y$,a=G5e,i=Q$,l=u(uPt()),c=["top","left","scale","width","stroke","strokeWidth","strokeDasharray","className","children","numTicks","lineStyle","offset","tickValues"];function u(h){return h&&h.__esModule?h:{default:h}}function d(){return d=Object.assign?Object.assign.bind():function(h){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(h[v]=y[v])}return h},d.apply(this,arguments)}function m(h,g){if(h==null)return{};var y={},v=Object.keys(h),x,b;for(b=0;b<v.length;b++)x=v[b],!(g.indexOf(x)>=0)&&(y[x]=h[x]);return y}function p(h){var g=h.top,y=g===void 0?0:g,v=h.left,x=v===void 0?0:v,b=h.scale,_=h.width,w=h.stroke,C=w===void 0?"#eaf0f6":w,S=h.strokeWidth,E=S===void 0?1:S,M=h.strokeDasharray,k=h.className,A=h.children,R=h.numTicks,O=R===void 0?10:R,L=h.lineStyle,P=h.offset,N=h.tickValues,T=m(h,c),j=N??(0,i.getTicks)(b,O),F=(P??0)+(0,l.default)(b)/2,U=j.map(function(V,$){var z,Q=((z=(0,i.coerceNumber)(b(V)))!=null?z:0)+F;return{index:$,from:new a.Point({x:0,y:Q}),to:new a.Point({x:_,y:Q})}});return t.default.createElement(s.Group,{className:(0,n.default)("visx-rows",k),top:y,left:x},A?A({lines:U}):U.map(function(V){var $=V.from,z=V.to,Q=V.index;return t.default.createElement(r.default,d({key:"row-line-"+Q,from:$,to:z,stroke:C,strokeWidth:E,strokeDasharray:M,style:L},T))}))}return p.propTypes={tickValues:e.default.array,width:e.default.number.isRequired},eS}var fPt=dPt();const mPt=Bo(fPt);var pPt=["scale","lines","animationTrajectory","animateXOrY","lineKey","lineStyle"];function uM(){return uM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uM.apply(null,arguments)}function hPt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function q5e(e){var t=e.scale,n=e.lines,r=e.animationTrajectory,s=e.animateXOrY,a=e.lineKey,i=e.lineStyle,l=hPt(e,pPt),c=tV(n,uM({},W5e({scale:t,animateXOrY:s,animationTrajectory:r}),{key:a}));return I.createElement(I.Fragment,null,c(function(u,d,m){var p=u.fromX,h=u.toX,g=u.fromY,y=u.toY,v=u.opacity,x=m.key;return I.createElement(Xc.line,uM({key:x,x1:p,x2:h,y1:g,y2:y,strokeOpacity:v,style:i},l))}))}q5e.propTypes={lineKey:Le.func.isRequired};var gPt=["scale","width","numTicks","tickValues","offset","className","animationTrajectory","top","left"];function wO(){return wO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wO.apply(null,arguments)}function yPt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function K5e(e){var t=e.scale,n=e.width,r=e.numTicks,s=e.tickValues,a=e.offset,i=e.className,l=e.animationTrajectory,c=e.top,u=e.left,d=yPt(e,gPt);return I.createElement(mPt,{scale:t,width:n,numTicks:r,tickValues:s,className:i,top:c,left:u,offset:a},function(m){var p=m.lines;return I.createElement(q5e,wO({scale:t,lines:p,animationTrajectory:l,animateXOrY:"y",lineKey:function(g){var y,v;return"row-"+((y=g==null||(v=g.from)==null?void 0:v.y)!=null?y:"")+"-"+g.index}},d))})}function kse({ref:e}){const t=e.current,[n,r,s]=f.useMemo(()=>{if(t){const a=t.querySelectorAll(".visx-axis-tick"),i=Array.from(a).map(l=>{const{width:c,height:u}=l.getBBox();return[c,u]});if(i.length){const l=Math.max(...i.map(u=>u[0])),c=Math.max(...i.map(u=>u[1]));return[l,c,i.length*l]}}return[0,0,0]},[t]);return f.useMemo(()=>({minRequiredWidth:s,maxLabelWidth:n,maxLabelHeight:r}),[r,n,s])}function iT(){const e=f.useRef(null),{maxLabelWidth:t,minRequiredWidth:n}=kse({ref:e}),r=f.useRef(null),{maxLabelWidth:s}=kse({ref:r});return f.useMemo(()=>({xAxisRef:e,yAxisRef:r,maxXLabelWidth:t,maxYLabelWidth:s,minXRequiredWidth:n}),[t,s,n])}const Tse=40,G6=e=>typeof e=="number";function lT({config:e,innerWidth:t,innerHeight:n,maxXLabelWidth:r}){let s=Math.floor(t/(r+Tse));G6(e?.x?.numTicks)&&G6(s)&&(s=Math.min(s,e.x.numTicks)),r||(s=void 0);let a=Math.floor(n/Tse);return G6(e?.y?.numTicks)&&(a=Math.min(a,e.y.numTicks)),{xTiltTicks:!1,xNumTicks:s,yNumTicks:a}}const Y5e="fill-quiet font-mono text-xs font-bold truncate max-w-[100px]",Nse="fill-quiet text-xs font-semibold font-sans",vPt=(e,t,n)=>n?{transform:"rotate(-10deg)",transformOrigin:`${e}px ${t}px`,textAnchor:"end"}:{textAnchor:"middle"};function xPt(e){const{shouldTilt:t,x:n,y:r,formattedValue:s,style:a,className:i,...l}=e;return o.jsx("text",{...l,x:n,y:r,dy:"2px",className:B(Y5e,i),style:{...a,...vPt(n,r,t)},children:s})}const K_=I.memo(function(t){const{margin:n,height:r,width:s,xScale:a,yScale:i,xFormat:l,yFormat:c,yNumTicks:u,xNumTicks:d,xTickValues:m,yTickValues:p,xTiltTicks:h,animated:g,tickColor:y,axisColor:v,xAxisRef:x,yAxisRef:b,xAxisLabel:_,yAxisLabel:w,gridDashed:C=!1,gridStrokeWidth:S=.5}=t,E=Ms(),M=g?cPt:Id,k=g?K5e:sp,A=f.useCallback(O=>o.jsx(xPt,{...O,shouldTilt:h}),[h]),R=f.useMemo(()=>({className:Y5e,textAnchor:"start",dx:"0.75em",dy:"-0.25em"}),[]);return o.jsxs(o.Fragment,{children:[o.jsx(Id,{orientation:Ca.bottom,top:r-n.bottom,scale:a,stroke:v,hideAxisLine:!0,label:_,labelClassName:Nse,tickFormat:l,numTicks:d,tickStroke:y,innerRef:x,tickValues:m,tickComponent:A,axisClassName:"select-none"}),o.jsx(M,{orientation:Ca.left,left:n.left,hideAxisLine:!0,label:w,labelOffset:7.5,labelClassName:Nse,scale:i,tickFormat:c,stroke:v,tickStroke:y,hideTicks:!0,innerRef:b,tickLabelProps:R,numTicks:u,tickValues:p,axisClassName:"select-none"}),E&&o.jsx(k,{left:n.left,scale:i,width:s-n.right-n.left*2,strokeDasharray:C?"8,4":void 0,stroke:v,strokeWidth:S,numTicks:u})]})});K_.displayName="Axes";const Q5e=I.memo(({color:e})=>o.jsx("div",{className:"size-[14px] rounded-full",style:{backgroundColor:e}}));Q5e.displayName="Tile";const Y_=I.memo(({entries:e})=>o.jsx("ol",{className:"my-sm gap-x-md gap-y-xs flex flex-wrap",children:e.map(({key:t,color:n})=>o.jsxs("li",{className:"gap-xs fade-in flex items-center transition-all duration-200",children:[o.jsx(Q5e,{color:n}),o.jsx(D,{variant:"tiny",color:"light",children:String(t)})]},String(t)))}));Y_.displayName="Legend";const r0=I.memo(({width:e,height:t,children:n,ref:r})=>{const s=f.useMemo(()=>({position:"relative",height:t,overflow:"visible"}),[t]);return o.jsx(H,{style:s,children:o.jsx("svg",{width:e,ref:r,height:t,style:{position:"absolute",left:0,top:0,overflow:"visible"},children:n})})});r0.displayName="Svg";function jse(e){return function(){return e}}function bPt(e){return e[0]}function _Pt(e){return e[1]}function dM(){this._=null}function cT(e){e.U=e.C=e.L=e.R=e.P=e.N=null}dM.prototype={constructor:dM,insert:function(e,t){var n,r,s;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Ase(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(s=r.R,s&&s.C?(n.C=s.C=!1,r.C=!0,e=r):(e===n.R&&(nv(this,n),e=n,n=e.U),n.C=!1,r.C=!0,rv(this,r))):(s=r.L,s&&s.C?(n.C=s.C=!1,r.C=!0,e=r):(e===n.L&&(rv(this,n),e=n,n=e.U),n.C=!1,r.C=!0,nv(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,r=e.L,s=e.R,a,i;if(r?s?a=Ase(s):a=r:a=s,t?t.L===e?t.L=a:t.R=a:this._=a,r&&s?(i=a.C,a.C=e.C,a.L=r,r.U=a,a!==s?(t=a.U,a.U=e.U,e=a.R,t.L=e,a.R=s,s.U=a):(a.U=t,t=a,e=a.R)):(i=e.C,e=a),e&&(e.U=t),!i){if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){if(n=t.R,n.C&&(n.C=!1,t.C=!0,nv(this,t),n=t.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,rv(this,n),n=t.R),n.C=t.C,t.C=n.R.C=!1,nv(this,t),e=this._;break}}else if(n=t.L,n.C&&(n.C=!1,t.C=!0,rv(this,t),n=t.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,nv(this,n),n=t.L),n.C=t.C,t.C=n.L.C=!1,rv(this,t),e=this._;break}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};function nv(e,t){var n=t,r=t.R,s=n.U;s?s.L===n?s.L=r:s.R=r:e._=r,r.U=s,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function rv(e,t){var n=t,r=t.L,s=n.U;s?s.L===n?s.L=r:s.R=r:e._=r,r.U=s,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ase(e){for(;e.L;)e=e.L;return e}function Mv(e,t,n,r){var s=[null,null],a=Js.push(s)-1;return s.left=e,s.right=t,n&&fM(s,e,t,n),r&&fM(s,t,e,r),Eo[e.index].halfedges.push(a),Eo[t.index].halfedges.push(a),s}function sv(e,t,n){var r=[t,n];return r.left=e,r}function fM(e,t,n,r){!e[0]&&!e[1]?(e[0]=r,e.left=t,e.right=n):e.left===n?e[1]=r:e[0]=r}function wPt(e,t,n,r,s){var a=e[0],i=e[1],l=a[0],c=a[1],u=i[0],d=i[1],m=0,p=1,h=u-l,g=d-c,y;if(y=t-l,!(!h&&y>0)){if(y/=h,h<0){if(y<m)return;y<p&&(p=y)}else if(h>0){if(y>p)return;y>m&&(m=y)}if(y=r-l,!(!h&&y<0)){if(y/=h,h<0){if(y>p)return;y>m&&(m=y)}else if(h>0){if(y<m)return;y<p&&(p=y)}if(y=n-c,!(!g&&y>0)){if(y/=g,g<0){if(y<m)return;y<p&&(p=y)}else if(g>0){if(y>p)return;y>m&&(m=y)}if(y=s-c,!(!g&&y<0)){if(y/=g,g<0){if(y>p)return;y>m&&(m=y)}else if(g>0){if(y<m)return;y<p&&(p=y)}return!(m>0)&&!(p<1)||(m>0&&(e[0]=[l+m*h,c+m*g]),p<1&&(e[1]=[l+p*h,c+p*g])),!0}}}}}function CPt(e,t,n,r,s){var a=e[1];if(a)return!0;var i=e[0],l=e.left,c=e.right,u=l[0],d=l[1],m=c[0],p=c[1],h=(u+m)/2,g=(d+p)/2,y,v;if(p===d){if(h<t||h>=r)return;if(u>m){if(!i)i=[h,n];else if(i[1]>=s)return;a=[h,s]}else{if(!i)i=[h,s];else if(i[1]<n)return;a=[h,n]}}else if(y=(u-m)/(p-d),v=g-y*h,y<-1||y>1)if(u>m){if(!i)i=[(n-v)/y,n];else if(i[1]>=s)return;a=[(s-v)/y,s]}else{if(!i)i=[(s-v)/y,s];else if(i[1]<n)return;a=[(n-v)/y,n]}else if(d<p){if(!i)i=[t,y*t+v];else if(i[0]>=r)return;a=[r,y*r+v]}else{if(!i)i=[r,y*r+v];else if(i[0]<t)return;a=[t,y*t+v]}return e[0]=i,e[1]=a,!0}function SPt(e,t,n,r){for(var s=Js.length,a;s--;)(!CPt(a=Js[s],e,t,n,r)||!wPt(a,e,t,n,r)||!(Math.abs(a[0][0]-a[1][0])>or||Math.abs(a[0][1]-a[1][1])>or))&&delete Js[s]}function EPt(e){return Eo[e.index]={site:e,halfedges:[]}}function MPt(e,t){var n=e.site,r=t.left,s=t.right;return n===s&&(s=r,r=n),s?Math.atan2(s[1]-r[1],s[0]-r[0]):(n===r?(r=t[1],s=t[0]):(r=t[0],s=t[1]),Math.atan2(r[0]-s[0],s[1]-r[1]))}function X5e(e,t){return t[+(t.left!==e.site)]}function kPt(e,t){return t[+(t.left===e.site)]}function TPt(){for(var e=0,t=Eo.length,n,r,s,a;e<t;++e)if((n=Eo[e])&&(a=(r=n.halfedges).length)){var i=new Array(a),l=new Array(a);for(s=0;s<a;++s)i[s]=s,l[s]=MPt(n,Js[r[s]]);for(i.sort(function(c,u){return l[u]-l[c]}),s=0;s<a;++s)l[s]=r[i[s]];for(s=0;s<a;++s)r[s]=l[s]}}function NPt(e,t,n,r){var s=Eo.length,a,i,l,c,u,d,m,p,h,g,y,v,x=!0;for(a=0;a<s;++a)if(i=Eo[a]){for(l=i.site,u=i.halfedges,c=u.length;c--;)Js[u[c]]||u.splice(c,1);for(c=0,d=u.length;c<d;)g=kPt(i,Js[u[c]]),y=g[0],v=g[1],m=X5e(i,Js[u[++c%d]]),p=m[0],h=m[1],(Math.abs(y-p)>or||Math.abs(v-h)>or)&&(u.splice(c,0,Js.push(sv(l,g,Math.abs(y-e)<or&&r-v>or?[e,Math.abs(p-e)<or?h:r]:Math.abs(v-r)<or&&n-y>or?[Math.abs(h-r)<or?p:n,r]:Math.abs(y-n)<or&&v-t>or?[n,Math.abs(p-n)<or?h:t]:Math.abs(v-t)<or&&y-e>or?[Math.abs(h-t)<or?p:e,t]:null))-1),++d);d&&(x=!1)}if(x){var b,_,w,C=1/0;for(a=0,x=null;a<s;++a)(i=Eo[a])&&(l=i.site,b=l[0]-e,_=l[1]-t,w=b*b+_*_,w<C&&(C=w,x=i));if(x){var S=[e,t],E=[e,r],M=[n,r],k=[n,t];x.halfedges.push(Js.push(sv(l=x.site,S,E))-1,Js.push(sv(l,E,M))-1,Js.push(sv(l,M,k))-1,Js.push(sv(l,k,S))-1)}}for(a=0;a<s;++a)(i=Eo[a])&&(i.halfedges.length||delete Eo[a])}var Z5e=[],X$;function jPt(){cT(this),this.x=this.y=this.arc=this.site=this.cy=null}function mh(e){var t=e.P,n=e.N;if(!(!t||!n)){var r=t.site,s=e.site,a=n.site;if(r!==a){var i=s[0],l=s[1],c=r[0]-i,u=r[1]-l,d=a[0]-i,m=a[1]-l,p=2*(c*m-u*d);if(!(p>=-1e-12)){var h=c*c+u*u,g=d*d+m*m,y=(m*h-u*g)/p,v=(c*g-d*h)/p,x=Z5e.pop()||new jPt;x.arc=e,x.site=s,x.x=y+i,x.y=(x.cy=v+l)+Math.sqrt(y*y+v*v),e.circle=x;for(var b=null,_=J1._;_;)if(x.y<_.y||x.y===_.y&&x.x<=_.x)if(_.L)_=_.L;else{b=_.P;break}else if(_.R)_=_.R;else{b=_;break}J1.insert(b,x),b||(X$=x)}}}}function Hh(e){var t=e.circle;t&&(t.P||(X$=t.N),J1.remove(t),Z5e.push(t),cT(t),e.circle=null)}var J5e=[];function APt(){cT(this),this.edge=this.site=this.circle=null}function Ise(e){var t=J5e.pop()||new APt;return t.site=e,t}function q6(e){Hh(e),zh.remove(e),J5e.push(e),cT(e)}function IPt(e){var t=e.circle,n=t.x,r=t.cy,s=[n,r],a=e.P,i=e.N,l=[e];q6(e);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<or&&Math.abs(r-c.circle.cy)<or;)a=c.P,l.unshift(c),q6(c),c=a;l.unshift(c),Hh(c);for(var u=i;u.circle&&Math.abs(n-u.circle.x)<or&&Math.abs(r-u.circle.cy)<or;)i=u.N,l.push(u),q6(u),u=i;l.push(u),Hh(u);var d=l.length,m;for(m=1;m<d;++m)u=l[m],c=l[m-1],fM(u.edge,c.site,u.site,s);c=l[0],u=l[d-1],u.edge=Mv(c.site,u.site,null,s),mh(c),mh(u)}function RPt(e){for(var t=e[0],n=e[1],r,s,a,i,l=zh._;l;)if(a=e3e(l,n)-t,a>or)l=l.L;else if(i=t-PPt(l,n),i>or){if(!l.R){r=l;break}l=l.R}else{a>-1e-6?(r=l.P,s=l):i>-1e-6?(r=l,s=l.N):r=s=l;break}EPt(e);var c=Ise(e);if(zh.insert(r,c),!(!r&&!s)){if(r===s){Hh(r),s=Ise(r.site),zh.insert(c,s),c.edge=s.edge=Mv(r.site,c.site),mh(r),mh(s);return}if(!s){c.edge=Mv(r.site,c.site);return}Hh(r),Hh(s);var u=r.site,d=u[0],m=u[1],p=e[0]-d,h=e[1]-m,g=s.site,y=g[0]-d,v=g[1]-m,x=2*(p*v-h*y),b=p*p+h*h,_=y*y+v*v,w=[(v*b-h*_)/x+d,(p*_-y*b)/x+m];fM(s.edge,u,g,w),c.edge=Mv(u,e,null,w),s.edge=Mv(e,g,null,w),mh(r),mh(s)}}function e3e(e,t){var n=e.site,r=n[0],s=n[1],a=s-t;if(!a)return r;var i=e.P;if(!i)return-1/0;n=i.site;var l=n[0],c=n[1],u=c-t;if(!u)return l;var d=l-r,m=1/a-1/u,p=d/u;return m?(-p+Math.sqrt(p*p-2*m*(d*d/(-2*u)-c+u/2+s-a/2)))/m+r:(r+l)/2}function PPt(e,t){var n=e.N;if(n)return e3e(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var or=1e-6,zh,Eo,J1,Js;function OPt(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function LPt(e,t){return t[1]-e[1]||t[0]-e[0]}function CO(e,t){var n=e.sort(LPt).pop(),r,s,a;for(Js=[],Eo=new Array(e.length),zh=new dM,J1=new dM;;)if(a=X$,n&&(!a||n[1]<a.y||n[1]===a.y&&n[0]<a.x))(n[0]!==r||n[1]!==s)&&(RPt(n),r=n[0],s=n[1]),n=e.pop();else if(a)IPt(a.arc);else break;if(TPt(),t){var i=+t[0][0],l=+t[0][1],c=+t[1][0],u=+t[1][1];SPt(i,l,c,u),NPt(i,l,c,u)}this.edges=Js,this.cells=Eo,zh=J1=Js=Eo=null}CO.prototype={constructor:CO,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(r){return X5e(t,e[r])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(l=(a=n.halfedges).length)for(var s=n.site,a,i=-1,l,c,u=t[a[l-1]],d=u.left===s?u.right:u.left;++i<l;)c=d,u=t[a[i]],d=u.left===s?u.right:u.left,c&&d&&r<c.index&&r<d.index&&OPt(s,c,d)<0&&e.push([s.data,c.data,d.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r=this,s,a=r._found||0,i=r.cells.length,l;!(l=r.cells[a]);)if(++a>=i)return null;var c=e-l.site[0],u=t-l.site[1],d=c*c+u*u;do l=r.cells[s=a],a=null,l.halfedges.forEach(function(m){var p=r.edges[m],h=p.left;if(!((h===l.site||!h)&&!(h=p.right))){var g=e-h[0],y=t-h[1],v=g*g+y*y;v<d&&(d=v,a=h.index)}});while(a!==null);return r._found=s,n==null||d<=n*n?l.site:null}};function DPt(){var e=bPt,t=_Pt,n=null;function r(s){return new CO(s.map(function(a,i){var l=[Math.round(e(a,i,s)/or)*or,Math.round(t(a,i,s)/or)*or];return l.index=i,l.data=a,l}),n)}return r.polygons=function(s){return r(s).polygons()},r.links=function(s){return r(s).links()},r.triangles=function(s){return r(s).triangles()},r.x=function(s){return arguments.length?(e=typeof s=="function"?s:jse(+s),r):e},r.y=function(s){return arguments.length?(t=typeof s=="function"?s:jse(+s),r):t},r.extent=function(s){return arguments.length?(n=s==null?null:[[+s[0][0],+s[0][1]],[+s[1][0],+s[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(s){return arguments.length?(n=s==null?null:[[0,0],[+s[0],+s[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}var Rse=1;function FPt(e){var t=e.width,n=t===void 0?0:t,r=e.height,s=r===void 0?0:r,a=e.x,i=e.y,l=DPt();return a&&l.x(a),i&&l.y(i),l.extent([[-1,-1],[n+Rse,s+Rse]]),l}function uT({data:e,innerHeight:t,innerWidth:n,xScale:r,yScale:s,xGet:a,yGet:i,voronoiRadius:l=void 0}){const{showTooltip:c,hideTooltip:u,tooltipData:d}=B$(),m=f.useMemo(()=>FPt({width:n,height:t,x:g=>r(a(g)),y:g=>s(i(g))})(e),[e,n,t,r,s,a,i]),p=f.useCallback(h=>{const{x:g,y}=F$(h)??{x:0,y:0},v=m.find(g,y,l);if(!v)return u();c({tooltipData:{localPoint:{x:g,y},voronoiSite:v}})},[c,u,m,l]);return f.useMemo(()=>({showTooltip:c,hideTooltip:u,handleTooltip:p,tooltipData:d}),[p,u,c,d])}const Q_=I.memo(function({margin:t,height:n,width:r,tooltipHandle:s,tooltipHide:a,maxYLabelWidth:i}){const c=f.useCallback(()=>a(),[a]);return o.jsx(Gy,{x:t.left+i-2.5,y:t.top,width:r-t.right-t.left*2-i+2.5*2,height:n-t.bottom-t.top,fill:"transparent",onTouchStart:s,onTouchMove:s,onMouseMove:s,onMouseLeave:c})});Q_.displayName="TooltipListener";const eb=I.memo(({cx:e,cy:t,color:n,r=3})=>o.jsx("circle",{cx:e,cy:t,r,fill:n,stroke:n,strokeWidth:1}));eb.displayName="YDot";const Fg=I.memo(({marginTop:e,tooltipLeft:t=0,innerHeight:n,color:r,strokeWidth:s=1,dotted:a=!1})=>{const i=f.useMemo(()=>({x:t,y:e}),[e,t]),l=f.useMemo(()=>({x:t,y:n+e}),[n,e,t]);return o.jsx("g",{children:o.jsx(ak,{from:i,to:l,stroke:r,strokeWidth:s,strokeDasharray:a?"4 4":void 0,pointerEvents:"none",className:"animate-in fade-in duration-300"})})});Fg.displayName="YCrosshair";const K6=e=>e,t3e=I.memo(({entry:e,xFormat:t=K6,yFormat:n=K6,zFormat:r=K6,xGet:s,yGet:a,zGet:i})=>{const l=[{value:t(s(e))},{value:n(a(e))}];i&&l.unshift({value:r(i(e))});const c=l.filter(u=>u.value);return o.jsx(H,{children:c.map(({value:u},d)=>o.jsx(D,{variant:"tiny",className:"py-two",children:String(u)},d))})});t3e.displayName="InnerToolTip";const n3e=I.memo(({tooltipTop:e=0,tooltipLeft:t=0,children:n})=>{const r=f.useMemo(()=>({position:"absolute",pointerEvents:"none"}),[]);return o.jsx(t5e,{top:e,left:t,style:r,children:o.jsx(H,{variant:"background",className:"p-sm dark:border-inverse rounded-md border shadow-sm",children:n})})});n3e.displayName="Tooltip";const X_=I.memo(({tooltipTop:e,tooltipLeft:t,entry:n,data:r,config:s,UserToolTip:a,xFormat:i,yFormat:l,zFormat:c,zGet:u,xGet:d,yGet:m})=>o.jsx(n3e,{tooltipTop:e,tooltipLeft:t,children:a?o.jsx(a,{entry:n,config:s,data:r}):o.jsx(t3e,{entry:n,config:s,xFormat:i,yFormat:l,zFormat:c,zGet:u,xGet:d,yGet:m})}));X_.displayName="ComposedTooltip";const Dp=0,r3e=I.memo(function(t){const{width:n,height:r,margin:s,config:a,tooltip:i,colors:l,axes:c=!0}=t,{colorSchema:u,axisColor:d,tickColor:m}=nT(l),p=Ms(),h=rT({data:t.data}),{xAxisRef:g,yAxisRef:y,maxYLabelWidth:v,maxXLabelWidth:x,minXRequiredWidth:b}=iT(),{innerHeight:_,innerWidth:w,xRange:C,yRange:S}=V_({width:n,height:r,margin:s,maxYLabelWidth:v,hasAxis:c}),{xNumTicks:E,yNumTicks:M,xTiltTicks:k}=lT({config:a,innerWidth:w,innerHeight:_,maxXLabelWidth:x}),{xGet:A,yGet:R,zGet:O}=sT({config:a}),{xFormat:L,yFormat:P,xTooltipFormat:N,yTooltipFormat:T,zTooltipFormat:j}=aT({config:a}),F=f.useMemo(()=>{if(!a?.z?.accessor)return[{key:"default",data:h}];const de=a.z.accessor,ve=u1(h,_e=>String(_e[de]));return Object.entries(ve).map(([_e,Se])=>({key:_e,data:Se}))},[h,a.z]),U=F.length>1,V=U?F.map(({key:de})=>de):h.map(A),$=jo.band({range:C,domain:V,padding:.4}),z=[...new Set(h.map(A))],Q=jo.band({range:[0,$.bandwidth()],domain:z,padding:.1}),Y=f.useMemo(()=>{const[de,ve]=Ja(h,R),_e=Math.min(Dp,de),Se=Math.max(Dp,ve);return[_e,Se]},[h,R]),W=f.useMemo(()=>jo.linear({range:S,domain:Y}),[S,Y]),X=jo.ordinal({range:u.slice(0,z.length),domain:U?z:V}),{tooltipData:G,hideTooltip:J,handleTooltip:q}=uT({data:h,innerHeight:_,innerWidth:w,xScale:U?Q:$,yScale:W,xGet:A,yGet:R}),re=f.useCallback(({localPoint:de})=>{const ve=U?Q:$,_e=ve.bandwidth(),Se=(ve.step()-_e)/4;if(isNaN(de?.x??NaN)||isNaN(de?.y??NaN))return null;const be=de?.x,me=de?.y;return h.reduce((Ae,Ee)=>{let je=ve(A(Ee))||0;const Me=W(R(Ee)),Ye=Math.abs(Me-W(0));return U&&(je+=$(Ee.z)||0),je!==void 0&&Me!==void 0&&be>=je-Se&&be<=je+_e+Se&&me>=Me-Ye&&me<=Me+Ye?{x:je,y:Me,data:Ee}:Ae},null)},[h,$,A,W,R,U,Q])({localPoint:G?.localPoint}),ae=f.useMemo(()=>({marginLeft:s.left,marginRight:s.right}),[s.left,s.right]),fe=f.useMemo(()=>[Dp],[]);return o.jsxs(H,{className:"relative",children:[U&&z.length>1&&o.jsx(H,{style:ae,children:o.jsx(Y_,{entries:z.map(de=>({key:de,color:X(de)}))})}),o.jsxs(r0,{width:n,height:r,children:[o.jsx(K_,{xScale:$,yScale:W,xFormat:L,yFormat:P,width:n,height:r,margin:s,yNumTicks:M,xNumTicks:E,yTickValues:a.y.tickValues,xTickValues:a.x.tickValues,xAxisLabel:a.x.label,yAxisLabel:a.y.label,animated:!0,tickColor:m,axisColor:d,xAxisRef:g,yAxisRef:y,xTiltTicks:k}),p&&o.jsx(K5e,{left:s.left,scale:W,width:n-s.right-s.left*2,stroke:d,tickValues:fe,strokeWidth:2}),F.map(({key:de,data:ve})=>o.jsx(ca,{left:$(de),children:ve.map((_e,Se)=>{const be=U?Q:$;return o.jsx(ge.rect,{rx:2,ry:2,x:be(A(_e)),width:be.bandwidth(),fill:X(U?Se:de),initial:{y:W(Dp),height:0,opacity:0},animate:{y:W(Math.max(Dp,R(_e))),height:Math.abs(W(R(_e))-W(Dp)),opacity:1},transition:{duration:.5,ease:"easeInOut"}},Se)})},de)),o.jsx(Q_,{margin:s,tooltipHandle:q,tooltipHide:J,height:r,width:n,maxYLabelWidth:v})]}),re&&G&&o.jsx(X_,{UserToolTip:i,tooltipTop:G?.localPoint?.y,tooltipLeft:G?.localPoint?.x,entry:re.data,data:h,config:a,xFormat:N,yFormat:T,zFormat:j,zGet:O,xGet:A,yGet:R})]})});r3e.displayName="BarChart";function UPt({xScale:e,xPosition:t}){const n=e.domain(),[r,s]=e.range(),a=(s-r)/(n.length-1),i=Math.min(Math.max(Math.round((t-r)/a),0),n.length-1);return n[i]}function BPt({tooltipData:e,config:t,groups:n,xScale:r,xGet:s}){const a=t.z?.accessor?e?.voronoiSite?.data?.[t.z?.accessor]:"",i=f.useMemo(()=>[...(n.find(({key:m})=>m===a)||n[0])?.d||[]].sort((m,p)=>s(m)-s(p)),[a,n,s]),l=e?.localPoint.x,c=f.useMemo(()=>i.map(s),[i,s]);return f.useMemo(()=>{if(l==null)return;if("invert"in r){const p=r.invert(l),h=Wy(c,p);if(h<=0)return i[0];if(h>=c.length)return i[c.length-1];const g=i[h-1],y=i[h];return Math.abs(s(g)-p)<Math.abs(s(y)-p)?g:y}const d=UPt({xScale:r,xPosition:l}),m=i.find(p=>String(s(p))===String(d));return m||i.reduce((p,h)=>Math.abs(s(h)-d)<Math.abs(s(p)-d)?h:p,i[0])},[l,r,i,s,c])}const s3e=I.memo(function(t){const{$t:n}=Z(),{width:r,height:s,margin:a={top:0,right:0,bottom:0,left:0},config:i,tooltip:l,axes:c=!0,colors:u,animate:d=!0,includeLegend:m=!0,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y=!1,children:v}=t,[x,b]=f.useState(null),_=rT({data:t.data}),w=f.useRef(new Set),{colorSchema:C,tickColor:S,axisColor:E,textColor:M}=nT(u),{colorScheme:k}=Wr(),A=k==="dark",{xAxisRef:R,yAxisRef:O,maxYLabelWidth:L,maxXLabelWidth:P,minXRequiredWidth:N}=iT(),{xGet:T,yGet:j,zGet:F}=sT({config:i}),{xFormat:U,yFormat:V,xTooltipFormat:$,yTooltipFormat:z,zTooltipFormat:Q}=aT({config:i}),{xDomain:Y,yDomain:W}=$$({config:i,data:_,xGet:T,yGet:j,endTime:p,previousClose:h}),{innerHeight:X,innerWidth:G,xRange:J,yRange:q}=V_({width:r,height:s,margin:a,maxYLabelWidth:L,hasAxis:c}),{xNumTicks:te,yNumTicks:re,xTiltTicks:ae}=lT({config:i,innerWidth:G,innerHeight:X,maxXLabelWidth:P}),fe=f.useMemo(()=>jo[i.x.scale]({range:[J[0],P?J[1]-P/2:J[1]],domain:Y}),[i.x.scale,J,Y,P]),de=f.useMemo(()=>{const et=i.y.scale==="log";return jo[i.y.scale]({range:q,domain:W,base:et?2:void 0,nice:!et,round:!0})},[i.y.scale,q,W]),ve=f.useMemo(()=>{if(!i.z?.accessor)return[{key:"",d:_}];const et=i.z.accessor,He=u1(_,Be=>String(Be[et]));return Object.entries(He).map(([Be,ut])=>({key:Be,d:ut}))},[_,i?.z?.accessor]),_e=f.useMemo(()=>{if(ve.length<=1)return null;const et=new Map;return ve.forEach(Be=>{Be.d.forEach(ut=>{const kt=T(ut);et.set(kt,ut)})}),Array.from(et.values()).sort((Be,ut)=>T(Be)-T(ut))},[ve,T]),{tooltipData:Se,hideTooltip:be,handleTooltip:me}=uT({data:_,innerHeight:X,innerWidth:G,xScale:fe,yScale:de,xGet:T,yGet:j}),Ae=BPt({tooltipData:Se,config:i,groups:ve,xScale:fe,xGet:T}),Ee=f.useMemo(()=>!y||!ve.length||!ve[0].d.length?null:ve[0].d.at(-1),[ve,y]),je=f.useMemo(()=>Tu().x(et=>fe(T(et))).y(et=>de(j(et))).curve(Em),[fe,de,T,j]),Me=f.useMemo(()=>jo.ordinal({domain:ve.map(({key:et})=>et),range:C}),[C,ve]),Ye=f.useCallback(()=>{Se&&b(Ae||null)},[Se,Ae]),at=f.useCallback(()=>{b(null)},[]),it=f.useMemo(()=>{const et={};if(!x||!Ae||!ve.length)return et;const He=T(x),Be=T(Ae),[ut,kt]=He<Be?[He,Be]:[Be,He],$t=Cn=>{const Pn=i.z?.accessor?Cn[i.z.accessor]:ve[0].key,Xe=ve.find(({key:Ve})=>Ve===Pn);return Xe?Xe.d.filter(Ve=>{const lt=T(Ve);return lt>=ut&&lt<=kt}):[]},tn=i.z?.accessor?x[i.z.accessor]:ve[0].key;et[tn]=$t(x);const nn=i.z?.accessor?Ae[i.z.accessor]:ve[0].key;return tn!==nn&&(et[nn]=$t(Ae)),et},[x,Ae,ve,T,i.z?.accessor]),ke=f.useMemo(()=>{const et=it[i.z?.accessor?x?.[i.z.accessor]:ve[0]?.key]||[],He=it[i.z?.accessor?Ae?.[i.z.accessor]:ve[0]?.key]||[],Be=[...et,...He],ut=new Map;return Be.forEach($t=>{ut.set(T($t),$t)}),Array.from(ut.values()).sort(($t,tn)=>T($t)-T(tn))},[it,i.z?.accessor,x,Ae,ve,T]),Ue=f.useMemo(()=>({marginLeft:a.left,marginRight:a.right}),[a.left,a.right]),Ot=f.useMemo(()=>[h],[h]),yt=f.useCallback(et=>fe(T(et))??0,[fe,T]),St=f.useCallback(et=>de(j(et))??0,[de,j]);return o.jsxs(H,{children:[i.z&&ve?.length>1&&m&&o.jsx(H,{style:Ue,children:o.jsx(Y_,{entries:ve.map(({key:et})=>({key:et,color:Me(et)}))})}),o.jsxs(H,{className:"relative",onMouseDown:Ye,onMouseUp:at,onMouseLeave:at,children:[o.jsxs(r0,{width:r,height:s,children:[c&&o.jsx(K_,{width:r,height:s,margin:a,xScale:fe,yScale:de,xFormat:U,yFormat:V,yNumTicks:re,xNumTicks:te,yTickValues:i.y.tickValues,xTickValues:i.x.tickValues,tickColor:S,axisColor:E,xAxisRef:R,yAxisRef:O,xTiltTicks:ae,xAxisLabel:i.x.label,yAxisLabel:i.y.label}),v&&v({xScale:fe,yScale:de,xGet:T,yGet:j}),h&&o.jsx("text",{x:r-a.right-10,y:de(h)-5,fill:M,fontSize:12,className:"font-mono",textAnchor:"end",children:g==="CRYPTO"?n({defaultMessage:"Prev day: {value}",id:"7i8MvDtMyq"},{value:typeof i.y.format=="function"?i.y.format(h):h}):n({defaultMessage:"Prev close: {value}",id:"uRPxTu0cgj"},{value:typeof i.y.format=="function"?i.y.format(h):h})}),h&&o.jsx(sp,{left:a.left,scale:de,width:r-a.right-a.left*2,stroke:M,tickValues:Ot,strokeWidth:2,strokeDasharray:"2,6",opacity:A?.6:1}),Ae&&o.jsx(Fg,{marginTop:a.top,tooltipLeft:fe(T(Ae)),innerHeight:X,color:E,strokeWidth:1}),x&&o.jsx(Fg,{marginTop:a.top,tooltipLeft:fe(T(x)),innerHeight:X,color:E,strokeWidth:1}),_e&&ve.length>1&&ve[1]?.key&&o.jsx(ge.path,{d:je(_e),stroke:Me(ve[1].key),strokeWidth:1.5,fill:"none",shapeRendering:"geometricPrecision",initial:d?{pathLength:d?0:1,opacity:d?0:1}:void 0,animate:d?{pathLength:1,opacity:1}:void 0,transition:d?{duration:.8,ease:Ya}:void 0}),ve.map(({d:et,key:He},Be)=>{const ut=w.current.has(He),kt=ut||!d?{initial:void 0,animate:{pathLength:1,opacity:1}}:{initial:{pathLength:d?0:1,opacity:d?0:1},animate:{pathLength:1,opacity:1},transition:{duration:.8,ease:Ya,delay:Be/ve.length}};return ut||w.current.add(He),o.jsx(ge.path,{d:je(et),stroke:Me(He),strokeWidth:2,fill:"none",shapeRendering:"geometricPrecision",...kt},He)}),(Ae||Ee)&&o.jsxs(ge.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0,delay:.8},children:[o.jsx(eb,{cx:fe(T(Ae||Ee)),cy:de(j(Ae||Ee)),color:Me(i.z?.accessor?(Ae||Ee)?.[i.z.accessor]:""),r:5}),x&&Ae&&o.jsxs(o.Fragment,{children:[o.jsx(eb,{cx:fe(T(x)),cy:de(j(x)),color:Me(i.z?.accessor?x[i.z.accessor]:""),r:5}),ke.length>1&&o.jsx(_g,{data:ke,x:yt,y:St,fill:Me(ve[0].key),fillOpacity:.2,stroke:"none",yScale:de,curve:Em})]})]}),(ve.length===1||ve.length===2)&&ve.map(({d:et,key:He},Be)=>{const ut=Me(He);return o.jsx(ge.g,{initial:d?{opacity:0,clipPath:"inset(0% 100% 0% 0%)"}:void 0,animate:d?{opacity:1,clipPath:"inset(0% 0% 0% 0%)"}:void 0,transition:d?{duration:.8,ease:Ya,delay:Be/ve.length}:void 0,children:!x&&(ve.length===1||Be===0)&&o.jsxs(o.Fragment,{children:[o.jsx(z3,{from:`${ut}22`,to:`${ut}00`,id:He}),o.jsx(_g,{data:et,x:yt,y:St,strokeWidth:0,yScale:de,fill:`url('#${He}')`},He)]})},He)}),o.jsx(Q_,{margin:a,tooltipHandle:me,tooltipHide:be,height:s,width:r,maxYLabelWidth:L})]}),Ae&&Se&&o.jsx(X_,{tooltipTop:Se.localPoint.y,tooltipLeft:Se.localPoint.x,entry:Ae,UserToolTip:l?et=>o.jsx(l,{...et,comparisonEntry:x||void 0}):void 0,data:_,config:i,xFormat:$,yFormat:z,zFormat:Q,zGet:F,xGet:T,yGet:j})]})]})});s3e.displayName="CompositeLineChart";function VPt({xScale:e,xPosition:t}){const n=e.domain(),[r,s]=e.range(),a=(s-r)/(n.length-1),i=Math.min(Math.max(Math.round((t-r)/a),0),n.length-1);return n[i]}function $Pt({tooltipData:e,config:t,groups:n,xScale:r,xGet:s}){const a=t.z?.accessor?e?.voronoiSite?.data?.[t.z?.accessor]:"",i=f.useMemo(()=>[...(n.find(({key:d})=>d===a)||n[0])?.d||[]].sort((d,m)=>s(d)-s(m)),[a,n,s]),l=e?.localPoint.x;return f.useMemo(()=>{if(!l)return;if("invert"in r){const m=r.invert(l),p=Wy(i.map(s),m);return i?.[p-1]}const u=VPt({xScale:r,xPosition:l});return i.find(m=>String(s(m))===String(u))},[l,r,i,s])}const a3e=I.memo(e=>{const{$t:t}=Z(),{enableComparison:n=!0,width:r,height:s,margin:a={top:0,right:0,bottom:0,left:0},config:i,tooltip:l,axes:c=!0,colors:u,animate:d=!0,includeLegend:m=!0,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y=!1,children:v}=e,[x,b]=f.useState(null),_=rT({data:e.data}),w=Ms(),{colorSchema:C,tickColor:S,axisColor:E,textColor:M}=nT(u),{colorScheme:k}=Wr(),A=f.useMemo(()=>w?k==="dark":!1,[k,w]),{xAxisRef:R,yAxisRef:O,maxYLabelWidth:L,maxXLabelWidth:P,minXRequiredWidth:N}=iT(),{xGet:T,yGet:j,zGet:F}=sT({config:i}),{xFormat:U,yFormat:V,xTooltipFormat:$,yTooltipFormat:z,zTooltipFormat:Q}=aT({config:i}),{xDomain:Y,yDomain:W}=$$({config:i,data:_,xGet:T,yGet:j,endTime:p,previousClose:h}),{innerHeight:X,innerWidth:G,xRange:J,yRange:q}=V_({width:r,height:s,margin:a,maxYLabelWidth:L,hasAxis:c}),{xNumTicks:te,yNumTicks:re,xTiltTicks:ae}=lT({config:i,innerWidth:G,innerHeight:X,maxXLabelWidth:P}),fe=f.useMemo(()=>jo[i.x.scale]({range:[J[0],P?J[1]-P/2:J[1]],domain:Y}),[i.x.scale,J,Y,P]),de=f.useMemo(()=>{const yt=i.y.scale==="log";return jo[i.y.scale]({range:q,domain:W,base:yt?2:void 0,nice:!yt,round:!0})},[i.y.scale,q,W]),ve=f.useMemo(()=>{if(!i.z?.accessor)return[{key:"",d:_}];const yt=i.z.accessor,St=u1(_,et=>String(et[yt]));return Object.entries(St).map(([et,He])=>({key:et,d:He}))},[_,i?.z?.accessor]),{tooltipData:_e,hideTooltip:Se,handleTooltip:be}=uT({data:_,innerHeight:X,innerWidth:G,xScale:fe,yScale:de,xGet:T,yGet:j}),me=$Pt({tooltipData:_e,config:i,groups:ve,xScale:fe,xGet:T}),Ae=f.useMemo(()=>!y||!ve.length||!ve[0].d.length?null:ve[0].d.at(-1),[ve,y]),Ee=f.useMemo(()=>Tu().x(yt=>fe(T(yt))).y(yt=>de(j(yt))).curve(Em),[fe,de,T,j]),je=f.useMemo(()=>jo.ordinal({range:C}),[C]),Me=f.useCallback(()=>{!_e||!n||b(me||null)},[n,_e,me]),Ye=f.useCallback(()=>{n&&b(null)},[n]),at=f.useMemo(()=>{if(!x||!me||!ve.length)return[];const yt=ve[0],St=T(x),et=T(me),[He,Be]=St<et?[St,et]:[et,St];return yt.d.filter(ut=>{const kt=T(ut);return kt>=He&&kt<=Be})},[x,me,ve,T]),it=f.useMemo(()=>({marginLeft:a.left,marginRight:a.right}),[a.left,a.right]),ke=f.useCallback(yt=>fe(T(yt))??0,[fe,T]),Ue=f.useCallback(yt=>de(j(yt))??0,[de,j]),Ot=f.useMemo(()=>[h],[h]);return o.jsxs(H,{children:[i.z&&ve?.length>1&&m&&o.jsx(H,{style:it,children:o.jsx(Y_,{entries:ve.map(({key:yt})=>({key:yt,color:je(yt)}))})}),o.jsxs(H,{className:"relative",onMouseDown:Me,onMouseUp:Ye,onMouseLeave:Ye,children:[o.jsxs(r0,{width:r,height:s,children:[c&&o.jsx(K_,{width:r,height:s,margin:a,xScale:fe,yScale:de,xFormat:U,yFormat:V,yNumTicks:re,xNumTicks:te,yTickValues:i.y.tickValues,xTickValues:i.x.tickValues,tickColor:S,axisColor:E,xAxisRef:R,yAxisRef:O,xTiltTicks:ae,xAxisLabel:i.x.label,yAxisLabel:i.y.label}),v&&v({xScale:fe,yScale:de,xGet:T,yGet:j}),h&&o.jsx("text",{x:r-a.right-10,y:de(h)-5,fill:M,fontSize:12,className:"font-mono",textAnchor:"end",children:g==="CRYPTO"?t({defaultMessage:"Prev day: {value}",id:"7i8MvDtMyq"},{value:typeof i.y.format=="function"?i.y.format(h):h}):t({defaultMessage:"Prev close: {value}",id:"uRPxTu0cgj"},{value:typeof i.y.format=="function"?i.y.format(h):h})}),h&&o.jsx(sp,{left:a.left,scale:de,width:r-a.right-a.left*2,stroke:M,tickValues:Ot,strokeWidth:2,strokeDasharray:"2,6",opacity:A?.6:1}),me&&o.jsx(Fg,{marginTop:a.top,tooltipLeft:fe(T(me)),innerHeight:X,color:E,strokeWidth:1}),x&&o.jsx(Fg,{marginTop:a.top,tooltipLeft:fe(T(x)),innerHeight:X,color:E,strokeWidth:1}),(me||Ae)&&o.jsxs(ge.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0,delay:.8},children:[o.jsx(eb,{cx:fe(T(me||Ae)),cy:de(j(me||Ae)),color:je(i.z?.accessor?(me||Ae)?.[i.z.accessor]:""),r:5}),x&&me&&at.length>0&&o.jsxs(o.Fragment,{children:[o.jsx(eb,{cx:fe(T(x)),cy:de(j(x)),color:je(i.z?.accessor?x[i.z.accessor]:""),r:5}),o.jsx(_g,{data:at,x:ke,y:Ue,fill:je(i.z?.accessor?x[i.z.accessor]:""),fillOpacity:.2,stroke:"none",yScale:de,curve:Em})]})]}),ve.length===1&&ve.map(({d:yt,key:St},et)=>{const He=je(St);return o.jsx(ge.g,{initial:d?{opacity:0,clipPath:"inset(0% 100% 0% 0%)"}:void 0,animate:d?{opacity:1,clipPath:"inset(0% 0% 0% 0%)"}:void 0,transition:d?{duration:.8,ease:"easeInOut",delay:et/ve.length}:void 0,children:!x&&o.jsxs(o.Fragment,{children:[o.jsx(z3,{from:`${He}22`,to:`${He}00`,id:St}),o.jsx(_g,{data:yt,x:ke,y:Ue,strokeWidth:0,yScale:de,fill:`url('#${St}')`},St)]})},St)}),ve.map(({d:yt,key:St},et)=>o.jsx(ge.path,{d:Ee(yt),stroke:je(St),strokeWidth:2,fill:"none",shapeRendering:"geometricPrecision",initial:d?{pathLength:0,opacity:0}:void 0,animate:d?{pathLength:1,opacity:1}:void 0,transition:d?{duration:.8,ease:"easeInOut",delay:et/ve.length}:void 0},St)),o.jsx(Q_,{margin:a,tooltipHandle:be,tooltipHide:Se,height:s,width:r,maxYLabelWidth:L})]}),me&&_e&&o.jsx(X_,{tooltipTop:_e.localPoint.y,tooltipLeft:_e.localPoint.x,entry:me,UserToolTip:l?yt=>o.jsx(l,{...yt,comparisonEntry:x||void 0}):void 0,data:_,config:i,xFormat:$,yFormat:z,zFormat:Q,zGet:F,xGet:T,yGet:j})]})]})});a3e.displayName="LineChart";const o3e=I.memo(e=>{const{width:t,height:n,margin:r,config:s,tooltip:a,colors:i,axes:l=!0}=e,c=3,u=rT({data:e.data}),{colorSchema:d,tickColor:m,axisColor:p}=nT(i),{xAxisRef:h,yAxisRef:g,maxYLabelWidth:y,maxXLabelWidth:v,minXRequiredWidth:x}=iT(),{innerHeight:b,innerWidth:_,xRange:w,yRange:C}=V_({width:t,height:n,margin:r,maxYLabelWidth:y,hasAxis:l}),{xNumTicks:S,yNumTicks:E,xTiltTicks:M}=lT({config:s,innerWidth:_,innerHeight:b,maxXLabelWidth:v}),{xGet:k,yGet:A,zGet:R}=sT({config:s}),{xFormat:O,yFormat:L,xTooltipFormat:P,yTooltipFormat:N,zTooltipFormat:T}=aT({config:s}),{xDomain:j,yDomain:F}=$$({data:u,config:s,xGet:k,yGet:A}),U=f.useMemo(()=>jo[s.x.scale]({range:w,domain:j}),[s.x.scale,w,j]),V=f.useMemo(()=>jo[s.y.scale]({range:C,domain:F,nice:!0,round:!0}),[s.y.scale,C,F]),{tooltipData:$,handleTooltip:z,hideTooltip:Q}=uT({data:u,innerHeight:b,innerWidth:_,xScale:U,yScale:V,xGet:k,yGet:A,voronoiRadius:c*2}),Y=f.useMemo(()=>jo.ordinal({range:d}),[d]),W=f.useMemo(()=>{if(!s.z?.accessor)return[];const J=new Set([]);return u.forEach(q=>J.add(q[s?.z?.accessor])),Array.from(J)},[u,s.z]),X=$?.voronoiSite,G=f.useMemo(()=>({marginLeft:r.left,marginRight:r.right}),[r.left,r.right]);return o.jsxs(H,{children:[W.length>1&&o.jsx(H,{style:G,children:o.jsx(Y_,{entries:W.map(J=>({key:J,color:Y(J)}))})}),o.jsxs(H,{className:"relative",children:[o.jsxs(r0,{width:t,height:n,children:[o.jsx(K_,{xScale:U,yScale:V,xFormat:O,yFormat:L,width:t,height:n,margin:r,yTickValues:s.y.tickValues,xTickValues:s.x.tickValues,tickColor:m,axisColor:p,xAxisRef:h,yAxisRef:g,yNumTicks:E,xNumTicks:S,xTiltTicks:M}),X&&o.jsx(Fg,{marginTop:r.top,tooltipLeft:X[0],innerHeight:b,color:p}),o.jsx("g",{children:u.map((J,q)=>{const te=X?.data?.__key==J.__key,re=s.z?.accessor?Y(J[s.z.accessor]):Y("");return o.jsx(ge.circle,{"data-hint":`${k(J)}: ${A(J)}`,cx:U(k(J)),cy:V(A(J)),r:c,strokeWidth:c/2,stroke:re,fill:te?"transparent":re,initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,ease:"easeInOut",delay:q/u.length}},J.__key)})}),o.jsx(Q_,{margin:r,tooltipHandle:z,tooltipHide:Q,height:n,width:t,maxYLabelWidth:y})]}),X&&o.jsx(X_,{tooltipTop:X?.[1],tooltipLeft:X?.[0],UserToolTip:a,entry:X.data,data:u,config:s,xFormat:P,yFormat:N,zFormat:T,zGet:R,xGet:k,yGet:A})]})]})});o3e.displayName="ScatterChart";function WPt(e){const{type:t,config:n,width:r,data:s,height:a,margin:i,tooltip:l,axes:c,colors:u,animate:d,includeLegend:m,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y,children:v,enableComparison:x}=e;return t==="line"?o.jsx(a3e,{data:s,config:n,width:r,height:a,margin:i,tooltip:l,axes:c,colors:u,animate:d,includeLegend:m,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y,enableComparison:x,children:v}):t==="bar"?o.jsx(r3e,{data:s,config:n,width:r,height:a,margin:i,tooltip:l,colors:u,includeLegend:m}):t==="scatter"?o.jsx(o3e,{data:s,config:n,width:r,height:a,margin:i,tooltip:l,colors:u,includeLegend:m}):t==="compositeLine"?o.jsx(s3e,{data:s,config:n,width:r,height:a,margin:i,tooltip:l,axes:c,colors:u,animate:d,includeLegend:m,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y,children:v}):null}const i3e=I.memo(function({type:t,config:n,data:r,tooltip:s,height:a=Lg,margin:i=cIt,axes:l,className:c,colors:u,includeLegend:d,endTime:m,previousClose:p,exchangeName:h,showLastPoint:g,animate:y,children:v,enableComparison:x}){const b=f.useRef(null),{width:_}=W$(b);return o.jsx("div",{ref:b,className:c,children:o.jsx(WPt,{type:t,data:r,config:n,width:_,height:a,margin:i,tooltip:s,axes:l,colors:u,includeLegend:d,endTime:m,previousClose:p,exchangeName:h,showLastPoint:g,animate:y,enableComparison:x,children:v})})});i3e.displayName="Chart";const Vrn=({data:e,brands:t,teams:n,isLive:r,isFinal:s,startLabel:a,endLabel:i,nowLabel:l,shouldAdjustColors:c=!0,nicknameFormatter:u,tooltip:d})=>{const m=f.useMemo(()=>n.map((N,T)=>({...N,uniqueName:N.name+"".repeat(T+1)})),[n]),{teamsData:p}=f.useMemo(()=>({teamsData:m.map(N=>{const T=N.brand||$5e(N.id,t),j=e[N.id]?.candlesticks||[];return{id:N.id,name:N.name,uniqueName:N.uniqueName,brand:T,candlesticks:j}})}),[m,e,t]),{colorScheme:h,isColorSchemeReady:g}=Wr(),{earliestTimestamp:y,latestTimestamp:v}=f.useMemo(()=>{let N=1/0,T=0;return p.forEach(j=>{if(j.candlesticks.length>0){const F=j.candlesticks[0]?.timestamp,U=j.candlesticks[j.candlesticks.length-1]?.timestamp;F&&(N=Math.min(N,F)),U&&(T=Math.max(T,U))}}),{earliestTimestamp:N===1/0?0:N,latestTimestamp:T}},[p]),x=f.useMemo(()=>y?new Date(y*1e3):null,[y]),b=f.useMemo(()=>v?new Date(v*1e3):null,[v]),_=f.useMemo(()=>p.flatMap(N=>N.candlesticks.map(T=>({timestamp:new Date(T.timestamp*1e3),value:(T.price.open+T.price.close)/2,team:N.uniqueName}))),[p]),{locale:w}=Z(),C=!r&&!s,[S,E]=f.useState(!1),{isMobileStyle:M}=xe();f.useEffect(()=>{E(!0)},[]);const k=f.useMemo(()=>{const N=[];if((r||s)&&x&&b)N.push(x,b);else if(C&&x&&b){const T=b.getTime()-x.getTime();N.push(x,new Date(x.getTime()+T/2),b)}return N},[r,s,C,x,b]),R={x:{accessor:"timestamp",scale:"time",format:f.useMemo(()=>{const N=k.map((T,j)=>{const F=j===0||j>0&&T.toDateString()!==k[j-1]?.toDateString();return{date:T,shouldShowDate:F}});return T=>C?N.find(U=>U.date.getTime()===T.getTime())?.shouldShowDate??!0?M?T.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(":00","").replace(" AM","a").replace(" PM","p"):T.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):M?T.toLocaleString(w,{hour:"numeric",minute:"numeric",hour12:!0}).replace(":00","").replace(" AM","a").replace(" PM","p"):T.toLocaleString(w,{hour:"numeric",minute:"numeric"}):!x||!b?"":T.getTime()===x.getTime()?a:T.getTime()===b.getTime()?s?i:r?l:"":M?T.toLocaleString(w,{hour:"numeric",minute:"numeric",hour12:!0}).replace(":00","").replace(" AM","a").replace(" PM","p"):r?T.toLocaleString(w,{hour:"numeric",minute:"numeric"}):T.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},[k,C,M,w,x,b,s,r,a,i,l]),tickValues:k.length>0?k:void 0,tooltipFormat:N=>N.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},y:{accessor:"value",scale:"linear",format:N=>pIt(N/100)},z:{accessor:"team",scale:"ordinal",label:"team",format:N=>N.replace(/\u200B/g,"")}},O=f.useMemo(()=>{if(!S||!c)return p.map(j=>j.brand?.color||"#4a90e2");let N=null;return p.map(j=>{const F=ir(j.brand?.color||"#4a90e2"),U=mM(F,h==="dark"),V=ir(j.brand?.color||"#4a90e2"),$=mM(V,h==="dark"),z=SO(U,$,h==="dark",2);if(N){const Q=SO(z,N,z.isDark(),2);return N=Q,Q.hex()}return N=z,z.hex()}).map(j=>j.toString())},[p,h,g,S,c]),{$t:L}=Z(),P=n.length>2;return o.jsxs("div",{children:[o.jsxs(H,{className:B("mb-sm pb-sm -mx-md -mt-sm px-md flex border-b",{"flex-col":P,"items-center justify-between":!P}),children:[o.jsx(D,{variant:"baseSemi",className:P?"mb-sm":void 0,children:L({id:"J3+o0a6LLR",defaultMessage:"Odds to win"})}),o.jsx("div",{className:B("gap-md flex items-center",{"flex-wrap":P}),children:p.map((N,T)=>o.jsx(qPt,{nickname:u?u(N.name):N.name,color:O[T]||"#4a90e2"},N.id))})]}),o.jsx(i3e,{type:"line",data:_,config:R,height:200,margin:HPt,className:"w-full",includeLegend:!1,colors:{colorSchema:O},enableComparison:!1,tooltip:d})]})},HPt={top:16,right:-6,bottom:10,left:8},mM=(e,t)=>{const n="#f7f1f2",r="#1f2121";return e?SO(e,ir(t?r:n),t):ir(n)},SO=(e,t,n,r=3)=>{if(!e)return ir(t);let s=ir(e),a=0,i=0;for(;s.contrast(ir(t))<r&&(s=n?zPt(s,a):GPt(s,a),a+=.01,i++,!(i>20)););return s};function zPt(e,t){const n=e.lightness();return e.lightness(n+(100-n)*t)}function GPt(e,t){const n=e.lightness();return e.lightness(n-n*t)}const qPt=({nickname:e,color:t})=>o.jsxs(H,{className:"gap-xs flex items-center",children:[o.jsx(H,{className:"size-2 rounded-full",style:{backgroundColor:t}}),o.jsx(D,{variant:"small",children:e})]}),KPt=({event:e})=>{const t=e.event.status==="live",n=e.event.extra.pitch_outcome,r=n?.count?.outs??0,s=n?.count?.balls??0,a=n?.count?.strikes??0,i=n?.runners,l=n?.count,c=n?.type!=="half_over"&&r!==3&&s!==4&&a!==3;return t?o.jsxs("div",{className:"mt-lg md:mt-md flex flex-col items-center gap-0",children:[o.jsx(YPt,{runners:i}),o.jsx(QPt,{outs:r}),o.jsx(XPt,{count:l,show:c})]}):null},YPt=({runners:e})=>{const t=e?.filter(n=>!n.out).map(n=>n.ending_base);return o.jsx("div",{style:{transformStyle:"preserve-3d",perspective:"1000px"},className:"inline-flex",children:o.jsx("div",{style:{transform:"rotateX(45deg)"},children:o.jsxs("div",{className:"gap-three grid rotate-45 grid-cols-2 grid-rows-2",children:[o.jsx(Y6,{active:t?.includes(2)??!1}),o.jsx(Y6,{active:t?.includes(1)??!1}),o.jsx(Y6,{active:t?.includes(3)??!1})]})})})},Y6=({active:e})=>o.jsx("div",{className:B("size-3 duration-150 md:size-4",e?"bg-super":"bg-inverse/25")}),QPt=({outs:e})=>o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Q6,{filled:e>=1}),o.jsx(Q6,{filled:e>=2}),o.jsx(Q6,{filled:e>=3})]}),Q6=({filled:e})=>o.jsx("div",{className:B("relative size-1 rounded-full duration-150",e?"bg-inverse":"bg-inverse/25"),children:e&&o.jsx("div",{className:"bg-inverse repeat-1 absolute inset-0 animate-ping rounded-full"})}),XPt=({count:e,show:t})=>{const n=e?.balls??0,r=e?.strikes??0,s=n===0&&r===0;return o.jsx(D,{variant:"micro",color:s?"ultraLight":"light",className:B("mt-1 duration-150",t?"opacity-100":"opacity-0"),children:o.jsx("span",{className:"font-mono",children:t?`${n}-${r}`:o.jsx(o.Fragment,{children:""})})})};function ZPt({children:e,className:t}){return o.jsx(D,{variant:"micro",className:B("py-xs !font-mono uppercase",t),color:"light",children:e})}const $rn="[&_tr>td:first-child]:pl-md [&_tr>th:first-child]:pl-md [&_tr>td:last-child]:pr-md [&_tr>th:last-child]:pr-md",Z_=({className:e,textCenter:t,finalText:n})=>{const{$t:r}=Z(),{isMobileStyle:s}=xe();return o.jsx("div",{className:B("flex items-center justify-center",e),children:o.jsx(D,{variant:s?"micro":"tiny",color:"light",className:"bg-subtler dark:bg-subtle pt-three rounded-full px-2.5 py-0.5",textCenter:t,children:n?n.toUpperCase():r({defaultMessage:"Final",id:"6/JzkWi0di"}).toUpperCase()})})},l3e=({className:e,textCenter:t=!1})=>{const{$t:n}=Z(),{isMobileStyle:r}=xe();return o.jsx("div",{className:B("flex items-center justify-center",e),children:o.jsx(D,{variant:r?"micro":"tiny",color:"light",className:"bg-subtler dark:bg-subtle pt-three rounded-full px-2.5 py-0.5",textCenter:t,children:n({defaultMessage:"Upcoming",id:"6/aEFZbs2i"}).toUpperCase()})})},c3e=I.memo(function({attributions:t}){const{$t:n}=Z(),r=t.join("  ");return o.jsxs(H,{className:"mt-md pt-md pb-lg flex flex-col gap-1 border-t",children:[o.jsx(D,{variant:"smallBold",color:"light",className:"text-center",children:r}),o.jsx(D,{variant:"small",color:"light",className:"text-center",children:n({defaultMessage:"{perplexity} is not affiliated with, endorsed by, or sponsored by any sports leagues or teams. All trademarks, team names, logos, and player images are the property of their respective owners. The content provided on this page is for informational purposes only and is intended to help users follow sports news and updates.",id:"M0PBu8vKH2"},{perplexity:"Perplexity"})})]})});c3e.displayName="SportsSources";const u3e=I.memo(({children:e,innerRef:t,canScrollLeft:n,canScrollRight:r,fadeOut:s})=>o.jsx("div",{className:"gap-md flex w-full flex-col overflow-hidden",children:o.jsxs(Wi,{orientation:"horizontal",viewportRef:t,showScrollIndicator:!1,className:"relative",children:[o.jsx("div",{className:"p-md pt-0",children:e}),n&&s&&o.jsx(H,{className:"w-xl to-offset pointer-events-none absolute inset-y-0 left-0 bg-gradient-to-l from-transparent"}),r&&s&&o.jsx(H,{className:"w-xl from-offset pointer-events-none absolute inset-y-0 right-0 bg-gradient-to-l to-transparent"})]})}));u3e.displayName="CanonicalScroll";const dT=I.memo(({title:e,subtitle:t,children:n,scrollable:r,fadeOut:s,trailing:a,titleClassName:i})=>{const l=f.useRef(null),[c,u]=f.useState(!1),[d,m]=f.useState(!1),p=f.useCallback(()=>{l.current?.scrollTo({left:l.current.scrollLeft-l.current.clientWidth,behavior:"smooth"})},[l]),h=f.useCallback(()=>{l.current?.scrollTo({left:l.current.scrollLeft+l.current.clientWidth,behavior:"smooth"})},[l]),g=f.useCallback(()=>{l.current&&(u(l.current.scrollLeft>0),m(l.current.scrollLeft+l.current.clientWidth+10<l.current.scrollWidth&&l.current.scrollWidth>l.current.clientWidth))},[l]);return f.useEffect(()=>{const y=l.current;return y?.addEventListener("scroll",g),()=>{y?.removeEventListener("scroll",g)}},[g,l]),f.useEffect(()=>{const y=new ResizeObserver(g);return y.observe(window.document.body),()=>{y.disconnect()}},[g,l]),f.useEffect(()=>{g()},[g]),o.jsxs(H,{className:"gap-md flex flex-col",children:[o.jsxs(d3e,{title:e,subtitle:t,className:i,children:[a,r&&o.jsxs("div",{className:"-mr-sm flex items-center",children:[o.jsx(Te,{icon:fb,size:"small",onClick:p,disabled:!c,variant:c?void 0:"noHover"}),o.jsx(Te,{icon:Kn,size:"small",onClick:h,disabled:!d,variant:d?void 0:"noHover"})]})]}),r?o.jsx(u3e,{innerRef:l,canScrollLeft:c,canScrollRight:d,fadeOut:s,children:n}):o.jsx("div",{ref:l,className:"gap-md px-md pb-md flex flex-col",children:n})]})});dT.displayName="CanonicalSection";const d3e=I.memo(({children:e,title:t,subtitle:n,className:r})=>o.jsxs(H,{className:B("gap-md px-md py-sm flex items-center justify-between border-b",r),children:[o.jsxs(H,{className:"flex items-center justify-between",children:[t&&o.jsx(D,{variant:"baseSemi",children:t}),n&&o.jsx(D,{variant:"smallCaps",color:"light",children:n})]}),e]}));d3e.displayName="SectionTitle";const JPt={tiny:"size-[16px]",small:"size-[24px]",medium:"size-[32px]",large:"xl:size-[64px] size-[50px]"},e8t={tiny:"p-[0.5px]",small:"p-[0.5px]",medium:"p-[0.5px]",large:"p-[0.5px]"},t8t={tiny:"border-[1px]",small:"border-[1px]",medium:"border-[2px]",large:"border-[4px]"},Es=f.memo(({includeStripe:e=!0,includeShadow:t=!1,className:n,includeBackground:r=!1,size:s="large",logo:a,color:i,...l})=>{const c=f.useMemo(()=>{let u=JPt[s];return r&&(u+=` ${e8t[s]}`),u},[r,s]);return o.jsx("div",{className:B(c,{"shadow-subtle":t&&r,"border-subtlest rounded-full border bg-white dark:border-transparent":r},n),...l,children:o.jsx("div",{className:B("rounded-inherit relative flex size-full items-center justify-center",{[t8t[s]]:e&&r}),style:{borderColor:r?i:void 0},children:o.jsx("img",{src:a,alt:"",width:r?"70%":"100%",height:"auto"})})})});Es.displayName="SportsTeamLogo";function Ug(e,t){return e=Math.abs(e/100),e.toLocaleString(t,{style:"percent",maximumFractionDigits:0})}const n8t=new Map([["one","st"],["two","nd"],["few","rd"],["other","th"]]),r8t=new Intl.PluralRules("en-US",{type:"ordinal"});function f3e(e){if(!e&&e!==0||isNaN(e))return"";const t=n8t.get(r8t.select(e));return`${e}${t}`}function s8t(e,t){if(t!=="upcoming"||e<new Date)return!1;const n=new Date;return Math.abs(+e-+n)<1e3*60*60*24}function Wrn(e){return new Date(e.toLocaleDateString(void 0,{timeZone:"UTC"}))}function pM(e,t){const n=eye();return f.useMemo(()=>!n||!t?e:mM(ir(e),t==="dark").toString(),[e,t,n])}const Hrn=(e,t,n,r)=>{if(!e||!t)return n;const s=new Date(e),a=new Date(t),i={month:"short",day:"numeric"};s.getFullYear()!==a.getFullYear()&&(i.year="numeric");const l=s.toLocaleDateString(r,i),c=a.toLocaleDateString(r,{...i,year:"numeric"});return s.toDateString()===a.toDateString()?c:s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()?`${s.toLocaleDateString(r,{month:"short"})} ${s.getDate()}-${a.getDate()}, ${a.getFullYear()}`:`${l} - ${c}`},a8t=(e,t)=>({title:null,team_1_super_text:null,team_2_super_text:null,team_1_text:e,team_2_text:t,team_1_emphasis:!1,team_2_emphasis:!1,isTextColorSuper:!0}),zrn=e=>{const t=e.stat_columns||[],n=[{show:e.team_1.text&&e.team_2.text,team1:e.team_1.text,team2:e.team_2.text},{show:e.team_1.sub_text&&e.team_2.sub_text,team1:e.team_1.sub_text,team2:e.team_2.sub_text}].filter(r=>r.show).map(r=>a8t(r.team1,r.team2));return[...t,...n]},m3e=I.memo(({variant:e="common",active:t,vertical:n,onClick:r,indicatorPos:s="bottom",extraCSS:a,showNewIndicator:i,styleProps:l,isNewRedesign:c=!1,disabled:u,innerRef:d,...m})=>{const p=B("absolute",{"right-0 h-full w-[3px] rounded-l-sm":s=="right","left-0 h-full w-[3px] rounded-l-sm":s=="left","bottom-0 left-0 right-0 h-[3px] rounded-t-sm":s=="bottom","top-0 left-0 right-0 h-[3px] rounded-b-sm":s=="top","bg-inverse":e==="primary","bg-inverse/70":e==="common"},l?.indicatorClass),h=B({"px-xs transition duration-300 relative ":n,"flex items-center":t&&n,"justify-center px-xs":!n,"!cursor-not-allowed":u,"my-0.5 [&_*]:!font-normal [&_*]:!text-foreground [&_a]:hover:bg-subtler":c,"[&_a]:bg-subtle [&_a]:text-foreground [&_a]:hover:bg-subtle":c&&t,"opacity-70 cursor-not-allowed":u},t?l?.activeBgClass:l?.bgClass);return o.jsxs("div",{onClick:u?void 0:r,className:h,children:[i&&o.jsx("div",{className:"right-md top-sm text-super absolute z-10",children:""}),o.jsx(Te,{variant:u?"noHover":t?"primary":"common",...m,fullWidth:!0,extraCSS:B("py-md focus-visible:!bg-transparent before:absolute before:opacity-0 focus-visible:before:opacity-100 before:ring-super/50 before:ring-[1.5px] before:inset-y-0 before:inset-x-[-10px] before:rounded-md",{"cursor-not-allowed":u},a),noXPadding:!n,disabled:u,ref:d??void 0}),t&&!u&&o.jsx(ge.div,{layout:"position",layoutId:"tab-indicator",className:p,transition:{duration:.1,ease:"easeOut"}})]})});m3e.displayName="TabButton";const J_=I.memo(({actionList:e,size:t=Kt.regular,variant:n="primary",fillSpace:r=!1,vertical:s=!1,layout:a="left",indicatorPos:i,iconOnly:l,allowScroll:c,tabClass:u,testId:d,layoutGroupId:m,styleProps:p,isNewRedesign:h=!1,activeTabRef:g})=>{const y=B({"w-full":r&&!c,"flex w-auto":c,"justify-center":a==="center","justify-end":a==="right"},p?.wrapperClass),v=B("items-center relative",{"justify-center":a==="center","flex-1":r,"w-full":r&&!c,"w-auto overflow-hidden flex":c},p?.innerClass),x=B("flex",{"w-full":r&&!c,"w-auto overflow-x-auto overflow-y-hidden flex-1 scrollbar-none":c},p?.scrollClass),b=B("items-center relative scrollbar-none",{"flex-1":r,"space-y-xs":s&&!h,"gap-x-md flex h-14":!s&&t!=="tiny","gap-x-sm flex h-10":!s&&t==="tiny","w-full":!s&&!c,"flex px-md w-auto overflow-x-auto":c},p?.scrollInnerClass),_=B("relative",{"h-full flex items-center":!s,"justify-center":r,"w-full":r&&!c,"flex-1 shrink-0":c},p?.itemClass);return o.jsx("div",{className:y,"data-test-id":d,children:o.jsx("div",{className:v,children:o.jsx("div",{className:x,children:o.jsx("div",{className:b,children:o.jsx(rc,{id:m,children:e.map(w=>w.show?o.jsxs(H,{className:_,children:[o.jsx(m3e,{testId:w.testId,ariaLabel:w.ariaLabel,vertical:s,text:l?void 0:w.text,size:t,variant:n,onClick:w.onClick,fullWidth:r,active:w.active,icon:w.icon,href:w.href,target:w.target,layout:a,tooltipLayout:i==="right"?"right":"top",toolTip:w.tooltip,indicatorPos:i,trailingComponent:w.trailingComponent,extraCSS:u,showNewIndicator:w.showNewIndicator,styleProps:p?.tabButton,isNewRedesign:h,disabled:w.disabled,innerRef:w.active?g:void 0}),!l&&w.badge&&o.jsx(D,{className:"bg-super pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 rounded-md px-1 py-0.5 text-white",variant:"tiny",children:w.badge}),w.children&&o.jsx(o.Fragment,{children:w.children})]},w.key??w.text):null)})})})})})});J_.displayName="TabBar";const o8t=[17,16];function Grn({event:e,brands:t,isLive:n}){const{$t:r}=Z(),[s,a]=f.useState(!1),[i,l]=f.useState("all"),c=f.useMemo(()=>(e.matchEvents?e.matchEvents.liveData.event:[]).filter(d=>i==="all"?!0:o8t.includes(d.typeId[0])).reduce((d,m)=>(d[m.periodId[1].toString()]=d[m.periodId[1].toString()]||[],d[m.periodId[1].toString()]?.push(m),d),{}),[e?.matchEvents,i]),u=f.useMemo(()=>[{text:r({defaultMessage:"All Plays",id:"lVQ27GyPmi"}),onClick:()=>l("all"),show:!0,active:i==="all"},{text:r({defaultMessage:"Key Plays",id:"CyNRXF54hv"}),onClick:()=>l("key"),show:!0,active:i==="key"}],[i,r]);return o.jsxs(o.Fragment,{children:[o.jsx(H,{variant:"raised",className:"rounded-xl border",children:o.jsx(dT,{title:r(n?{defaultMessage:"Play by Play",id:"g2y6uMg3RU"}:{defaultMessage:"Play Summary",id:"HtqDGZkC7q"}),trailing:o.jsx("div",{className:"-mb-sm",children:o.jsx(J_,{actionList:u,layoutGroupId:"soccer-play-summary-tab-bar",layout:"right",size:"tiny"})}),children:o.jsx("div",{className:"-my-md",children:o.jsx(Z$,{plays:c,event:e,onViewAll:()=>a(!0),playsToRender:6,reverse:!0,brands:t,inModal:!1})})})}),s&&o.jsx(u8t,{plays:c,isOpen:s,onClose:()=>a(!1),event:e,brands:t,reverse:!0,setOpen:a})]})}const p3e=({isRed:e,className:t})=>o.jsx("svg",{width:"16",height:"19",viewBox:"0 0 16 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:B("shrink-0",t),children:o.jsx("rect",{x:"4.29248",y:"0.726685",width:"12",height:"15",rx:"2",transform:"rotate(14.6454 4.29248 0.726685)",fill:e?"#EB4E45":"#f6c825"})}),Z$=f.memo(({plays:e,onViewAll:t,playsToRender:n=1/0,reverse:r=!0,brands:s,inModal:a=!1})=>{const{$t:i}=Z(),l=r?[...Object.keys(e)].reverse():Object.keys(e),c=f.useMemo(()=>{let u=n;return o.jsxs(H,{children:[l.map(d=>{let m=0;const p=e[d]?.length??0;return u<=0?null:(u<p?(m=u,u=0):(m=p,u-=p),o.jsx(i8t,{plays:e[d]??ue,playsToRender:m,period:d,reverse:r,brands:s},d))}),!a&&t&&o.jsx("div",{className:"-mx-sm py-sm flex items-center justify-center",children:o.jsx(Te,{variant:"super",chevron:!0,chevronIcon:Kn,text:i({defaultMessage:"View All",id:"wbcwKddwLa"}),fullWidth:!0,size:"small",onClick:t})})]})},[e,n,r,a,t,i,l,s]);return a?c:o.jsx(zs,{className:"relative isolate",mode:"popLayout",transition:{duration:.2,ease:rn},children:o.jsx(Qr,{children:c})})});Z$.displayName="PlaysByPeriod";function i8t({plays:e,playsToRender:t,period:n,reverse:r,brands:s}){const a=f.useMemo(()=>r?[...e].reverse():e,[e,r]),i=Ms();return o.jsxs(H,{children:[t>0&&o.jsx(H,{variant:"subtle",className:B("-mx-md px-md py-sm sticky top-0 z-10 flex items-center justify-between"),children:o.jsx(D,{variant:"smallCaps",color:"light",children:n})}),o.jsx(rc,{children:o.jsx(ge.div,{layout:!0,layoutRoot:!0,children:a.slice(0,t).map(l=>o.jsx(h3e,{play:l,brands:s,parentHasMounted:i},l.id))})})]})}const h3e=f.memo(({play:e,brands:t,parentHasMounted:n})=>{const{$t:r}=Z(),s=f.useRef(!n),a=Dg(e.contestantId,t,"soccer"),{colorScheme:i}=Wr(),l=pM(a.color,i).toString();return o.jsxs(ge.div,{className:"-mx-md border-subtlest p-md relative border-b",initial:s.current?void 0:{opacity:0},animate:s.current?void 0:{opacity:1},transition:{layout:{duration:.2,ease:rn},opacity:{duration:.2,ease:la}},layout:"position",children:[o.jsx("div",{className:"left-xs inset-y-xs absolute w-1 rounded-full opacity-50",style:{backgroundColor:l}}),!s.current&&o.jsx(ge.div,{className:"bg-super/15 absolute inset-0",initial:{opacity:1},animate:{opacity:0},transition:{duration:1,ease:la,delay:.2}}),o.jsxs("div",{className:"gap-md relative flex items-center",children:[o.jsx(Es,{logo:a.logo,color:a.color,size:"small",includeStripe:!1}),o.jsxs("div",{className:"gap-sm flex flex-1 flex-row items-center",children:[o.jsxs("div",{className:"gap-md flex items-baseline",children:[o.jsx(D,{variant:"tiny",color:"light",className:"whitespace-nowrap",children:e.periodId[1]==="PENALTIES"?`${r({defaultMessage:"PK",id:"mG6A02k2Ar"})} ${e.timeMin}`:`${e.timeMin}'`}),o.jsx(D,{variant:"small",children:e.commentary_text})]}),l8t(e)&&o.jsx(p3e,{isRed:c8t(e)==="red"})]})]})]})});h3e.displayName="Play";const l8t=e=>e.typeId[0]===17,c8t=e=>{const t=e.commentary_text.toLowerCase();return t.includes("second yellow card")||t.includes("red card")?"red":t.includes("yellow card")?"yellow":null},u8t=({plays:e,isOpen:t,setOpen:n,event:r,brands:s,reverse:a})=>{const i=f.useRef(null),{isMobileStyle:l}=xe();return o.jsx(en,{modalContentClassname:"!py-0 mb-0 min-h-0",modalClassname:"[&_>div]:min-h-0",isOpen:t,onClose:()=>n(!1),variant:l?"bottom-sheet":"side-sheet",includeBlur:!1,children:o.jsxs("div",{className:"flex min-h-0 flex-1 flex-col",children:[o.jsx(D,{variant:"section-title",className:"py-sm -mt-sm -mx-md px-md border-subtlest shadow-subtle border-b",children:"Play by Play"}),o.jsx("div",{ref:i,className:"-mx-md px-md scrollbar-subtle flex min-h-0 flex-1 flex-col overflow-y-auto overflow-x-hidden",children:o.jsx(Z$,{plays:e,event:r,brands:s,inModal:!0,reverse:a})})]})})},d8t=({event:e})=>{const n=[...e.matchStats?.contestantStats.map(r=>{const s=r.goal_events.map(i=>({type:"goal",event:i})),a=r.red_card_events.map(i=>({type:"red_card",event:i}));return[...s,...a]})??[]].map(r=>r.sort((s,a)=>s.event[0]-a.event[0]));return!n||n.length===0?null:o.jsx("div",{className:"gap-md p-md grid grid-cols-2",children:n.map((r,s)=>o.jsx(f8t,{events:r,position:s===0?"left":"right"},s))})},f8t=({events:e,position:t})=>o.jsx("div",{className:B("gap-xs flex flex-col",{"items-start":t==="left","items-end":t==="right"}),children:e.map((n,r)=>o.jsx(m8t,{event:n,position:t},r))}),m8t=({event:e,position:t})=>o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsxs(D,{variant:"tiny",className:B("flex items-center gap-1",{"flex-row-reverse":t==="right"}),children:[o.jsx(p8t,{event:e})," ",e.event[1]]}),o.jsxs(D,{variant:"tiny",color:"light",children:[e.event[0],"'"]})]}),p8t=({event:e})=>e.type!=="goal"?o.jsx(p3e,{isRed:!0,className:"size-md inline-block"}):o.jsx("div",{className:"size-md inline-block",children:""}),g3e=I.memo(()=>o.jsx("div",{}));g3e.displayName="SportsWidgetErrorFallback";const Pse=new Set,h8t=e=>e.status==="live"||e.status==="upcoming";function g8t({widget:e}){const{isMobileStyle:t}=xe(),{result:{backend_uuid:n,mode:r}}=an(),s=Xk();if(f.useEffect(()=>{!n||!e||!e?.events?.length||Pse.has(n)||(s("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:r}),Pse.add(n))},[n,e?.events?.length,r,e,s]),!e?.events?.length)return null;const a=e.canonical_pages?.[0]?.url_web,i=e.events.at(0),l=!t&&(i&&h8t(i)||e.events.length<5),c=e.league??"nba";return o.jsx(Or,{fallback:g3e,children:o.jsx(Ci,{widgetType:"sports",widgetName:e.object,children:({widgetSelected:u})=>o.jsx(y3e,{canonicalPageLink:a,children:o.jsx(w8t,{events:e.events,showHero:l,widgetSelected:u,league:c})})})})}const y3e=({children:e,canonicalPageLink:t})=>{const{$t:n}=Z();return o.jsxs(H,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?o.jsx(Ge,{href:t,children:o.jsxs(D,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),o.jsx(Kn,{size:18})]})}):null]})},v3e=({initialData:e,refetch:t=!1,reason:n})=>We({initialData:e,queryKey:["sports/events/widget",e.id],queryFn:async()=>{if(!e.refetch_url)return e;const r=await nie({urlPath:e.refetch_url,timeoutMs:0,reason:n});if(!r.ok)throw ne.error("Failed to fetch sport event",{url:e.refetch_url,status:r.status,statusText:r.statusText}),new Error(`Failed to fetch sport event ${r.status} ${r.statusText}`);return await r.json()},refetchInterval:r=>r.state.data?.refetch_url?r.state.data?.refetch_interval_secs*1e3:!1,enabled:!!e.refetch_url&&t}),y8t=({event:e,onClick:t,eventCount:n,league:r})=>{const{data:s}=v3e({initialData:e,refetch:!0,reason:"sports-event-row"}),a=x3e(),i=r==="nba"&&V5e(s.title[0]??""),l=C3e(s.team_1,s.team_2),c=i?l:null,u=f.useMemo(()=>[{title:s.team_1.title,score:s.team_1.text,subscore:s.team_1.sub_text,image:s.team_1.img,emphasized:s.team_1.won,period:s.period_text},{title:s.team_2.title,score:s.team_2.text,subscore:s.team_2.sub_text,image:s.team_2.img,emphasized:s.team_2.won,period:s.period_text}],[s]);return o.jsx(w3e,{href:s.url?.url_web,onClick:()=>t(s.url?.url_web),children:o.jsx(E8t,{title:s.status==="live"?"LIVE":a(s.datetime,s.datetime_tba,s.datetime_end),isLive:s.status==="live",items:u,period:b3e(s.period_text,s.period_time,r)??null,eventCount:n,subtitle:c??void 0},s.id)})},v8t=({events:e,onClick:t,league:n})=>o.jsx("div",{className:B("bg-subtlest grid grid-cols-1 rounded-b-lg md:grid-cols-2",{"lg:grid-cols-3":e.length>2}),children:e.map(r=>o.jsx(y8t,{event:r,onClick:t,eventCount:e.length,league:n},r.id))}),x8t=e=>{const{locale:t}=Z();return e?new Date(e).toLocaleTimeString(t,{hour:"numeric",minute:"numeric",timeZoneName:"short"}):""},b8t=e=>e.join("  "),x3e=({includeTime:e=!0}={})=>{const{$t:t}=Z(),{locale:n}=Z();return f.useCallback((r,s,a)=>{if(a){if(!r&&s)return t({defaultMessage:"TBA",id:"ZfAWFLTzx/"});if(!r)return"";const m=new Date(r),p=new Date(a),h=m.getFullYear();if(!(h===new Date().getFullYear())){const w=m.toLocaleDateString(n,{month:"short"}),C=p.toLocaleDateString(n,{month:"short"}),S=m.getDate(),E=p.getDate();return w===C?`${w} ${S}-${E}, ${h}`:`${w} ${S}-${C} ${E}, ${h}`}const y=m.toLocaleDateString(n,{month:"short"}),v=p.toLocaleDateString(n,{month:"short"}),x=m.getDate(),b=p.getDate();let _;if(y===v?_=`${y} ${x}-${b}`:_=`${y} ${x}-${v} ${b}`,e){const w=s?"TBA":m.toLocaleTimeString(n,{hour:"numeric",minute:"numeric",timeZoneName:"short"});return`${_}, ${w}`}return _}if(!r&&s)return t({defaultMessage:"TBA",id:"ZfAWFLTzx/"});if(!r)return"";const i=new Date(r),l=r&&s,c=i.toLocaleTimeString(n,{hour:"numeric",minute:"numeric",timeZoneName:"short"});if(v3(i))return e?`${t({defaultMessage:"Today",id:"zWgbGgjUUg"})}, ${c}`:t({defaultMessage:"Today",id:"zWgbGgjUUg"});if(tit(i))return e?`${t({defaultMessage:"Yesterday",id:"6dIxDP1C8c"})}, ${c}`:t({defaultMessage:"Yesterday",id:"6dIxDP1C8c"});if(Sye(i))return e?`${t({defaultMessage:"Tomorrow",id:"MtrTNyxuSU"})}, ${c}`:t({defaultMessage:"Tomorrow",id:"MtrTNyxuSU"});if(i.getFullYear()!==new Date().getFullYear())return new Date(i).toLocaleDateString(n,{month:"short",day:"numeric",year:"numeric"});const u=i.toLocaleDateString(n,{month:"short",day:"numeric"});if(!e)return u;const d=l?"TBA":i.toLocaleTimeString(n,{hour:"numeric",minute:"numeric",timeZoneName:"short"});return`${u}, ${d}`},[n,t,e])},b3e=(e,t,n)=>{if(n==="mlb")return _8t(e);if(!e||typeof t?.seconds!="number"&&typeof t?.minutes!="number")return e;const r=t?.seconds?.toString().padStart(2,"0")??"00",s=t?.minutes??0;return`${e} ${s}:${r}`},_8t=e=>e?.replace("Top","").replace("Bot",""),w8t=({events:e,showHero:t,widgetSelected:n,league:r})=>{const s=f.useMemo(()=>t?e.slice(1):e,[e,t]),{data:a}=v3e({initialData:e[0],refetch:t,reason:"sports-widget-dense"});return o.jsxs(H,{children:[t&&o.jsxs(w3e,{href:a?.url?.url_web,onClick:()=>{n(a?.url?.url_web)},children:[o.jsx(C8t,{event:a,includeBorder:s.length>0,league:r,statusExtra:a&&r==="mlb"&&a.status==="live"?o.jsx(KPt,{event:{event:a}}):null}),r==="championsleague"&&a&&o.jsx(d8t,{event:{event:a,brands:[],candlestickData:null,matchEvents:null,matchStats:a.extra?.match_stats??null,eventExtra:null}})]}),o.jsx(v8t,{events:s,onClick:n,league:r})]})},_3e=()=>o.jsx("span",{className:"text-quietest",children:""}),w3e=({children:e,href:t,onClick:n})=>t?o.jsx(Ge,{href:t,className:"group/link group",onClick:n,children:e}):o.jsx("div",{className:"group",onClick:n,children:e}),C3e=(e,t)=>{const{$t:n}=Z(),r=e.subtitle?.split("-"),s=t.subtitle?.split("-"),a=ia(r)?+r[0]:null,i=ia(s)?+s[0]:null,l=4;if(a===null||i===null)return null;const c=a>i?e.abbreviation:t.abbreviation,u=a>i?a:i,d=a>i?i:a;return a>=l||i>=l?n({defaultMessage:"{leadingTeam} Wins {leadingScore}-{trailingScore}",id:"T1UC+k87MZ"},{leadingTeam:c,leadingScore:u,trailingScore:d}):a===i?n({defaultMessage:"Series Tied {team1Record}-{team2Record}",id:"Liahhq+hIg"},{team1Record:a,team2Record:i}):n({defaultMessage:"{leadingTeam} Leads {leadingScore}-{trailingScore}",id:"oO28OWtTlZ"},{leadingTeam:c,leadingScore:u,trailingScore:d})},C8t=({event:e,includeBorder:t=!1,className:n,league:r,scoreExtra:s,statusExtra:a})=>{const{$t:i}=Z(),l=e.team_1.title,c=e.team_2.title,u=e.team_1.text,d=e.team_1.sub_text,m=e.team_2.text,p=e.team_2.sub_text,h=r==="nba"&&V5e(e.title[0]??""),g=C3e(e.team_1,e.team_2),y=h?g:null,v=x3e({includeTime:!1}),x=x8t(e.datetime),b=e.datetime_tba?i({defaultMessage:"TBA",id:"ZfAWFLTzx/"}):x,_=b8t(e.title),w=eye(),{colorScheme:C}=Wr(),S=b3e(e.period_text,e.period_time,r),E=e.team_1.won||e.team_2.won,M=f.useMemo(()=>{let k;return E?(e.team_1.won?k=e.team_1.color:k=e.team_2.color,w?mM(k?ir(k):null,C==="dark"):k):null},[e.team_1.won,e.team_1.color,e.team_2.color,C,E,w]);return o.jsxs(H,{className:B(n,"rounded-inherit relative",{"border-b":t}),children:[E&&o.jsx("div",{className:"rounded-inherit pointer-events-none absolute inset-0 overflow-hidden",style:{color:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"},children:o.jsx(kU,{className:"-inset-xl rounded-inherit !absolute ![--dog-bg-highlight:currentColor]",dotClassName:"!text-[currentColor]",highlightClassName:"!bg-black/5 dark:!bg-white/5"})}),o.jsx("div",{className:"px-md gap-sm relative flex items-start justify-between pt-[12px]",children:o.jsxs(D,{variant:"tiny",color:"light",children:[_,y&&" "+y]})}),o.jsxs("div",{className:"p-md md:px-lg md:py-md gap-sm relative grid grid-cols-[1fr_auto_1fr] items-center justify-start md:justify-between md:gap-[12px]",children:[o.jsxs("div",{className:"gap-md flex flex-col-reverse items-center justify-start md:flex-row md:justify-start md:gap-[12px]",children:[o.jsx(Dse,{record:e.team_1.subtitle,name:l,logo:e.team_1.img}),o.jsx("div",{className:"md:mx-auto",children:o.jsx(Ose,{position:"leading",score:u,subscore:d,isWinner:e.team_1.won,hasWinner:E,scoreExtra:s,team:e.team_1,teamIdx:0,league:r})})]}),o.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[o.jsx(S8t,{status:e.status,date:v(e.datetime,e.datetime_tba,e.datetime_end),time:b,isUpcoming:e.datetime?s8t(new Date(e.datetime),e.status):void 0,period:S??null}),a]}),o.jsxs("div",{className:"gap-md flex flex-col-reverse items-center justify-start md:flex-row-reverse md:gap-[12px]",children:[o.jsx(Dse,{record:e.team_2.subtitle,name:c,logo:e.team_2.img}),o.jsx("div",{className:"md:mx-auto",children:o.jsx(Ose,{score:m,subscore:p,position:"trailing",isWinner:e.team_2.won,hasWinner:E,scoreExtra:s,team:e.team_2,teamIdx:1,league:r})})]})]}),e.live_text&&o.jsx("div",{className:"bg-subtlest px-md relative py-[12px]",children:o.jsxs(D,{variant:"tiny",color:"light",className:"gap-sm line-clamp-1 flex items-start md:items-center",children:[o.jsx(f9e,{size:16,className:"opacity-80 md:-translate-y-px"}),e.live_text]})}),E&&o.jsx("div",{className:"rounded-inherit pointer-events-none absolute inset-0 opacity-20 mix-blend-multiply dark:opacity-60 dark:mix-blend-soft-light",style:{backgroundColor:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"}}),!t&&E&&o.jsx("div",{className:"pointer-events-none absolute -inset-px rounded-[12px] border opacity-40",style:{borderColor:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"}}),!t&&E&&o.jsx("div",{className:"pointer-events-none absolute -inset-px rounded-[13px] border opacity-20 dark:opacity-40",style:{borderColor:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"}})]})},Ose=({score:e,subscore:t,position:n,emptyPlaceholder:r=o.jsx(_3e,{}),isWinner:s,hasWinner:a,scoreExtra:i,team:l,teamIdx:c,league:u})=>{const{isMobileStyle:d}=xe(),m=u==="ipl"||u==="cricket"||u==="icc"||u==="atp"||u==="wta";return o.jsxs("div",{className:B("md:gap-xs flex flex-col items-center justify-center",{"items-start":n==="leading","items-end":n==="trailing","opacity-50":a&&!s}),children:[o.jsxs(D,{variant:d?m?"section-title":"display":"section-title",className:"gap-xs md:gap-sm flex items-center sm:!text-2xl lg:!text-3xl",children:[s&&n==="trailing"&&o.jsx(Lse,{className:"size-3 rotate-180 md:size-4"}),o.jsxs("span",{className:"font-mono",children:[i&&o.jsx("span",{className:"mr-xs",children:i(l,c)}),e??r]}),s&&n==="leading"&&o.jsx(Lse,{className:"size-2.5 md:size-4"})]}),t&&o.jsx(D,{variant:"tiny",color:"light",children:o.jsx("span",{className:"font-mono",children:t})})]})},Lse=({className:e})=>o.jsx("svg",{width:"6",viewBox:"0 0 18 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 0.322327L0.822266 17.5L18 34.6777V0.322327Z",className:"fill-foreground"})}),Dse=({name:e,logo:t,record:n})=>e?o.jsxs("div",{className:"gap-sm flex flex-col items-center justify-between md:gap-0",children:[t&&o.jsx(Es,{logo:t,color:"#000000"}),o.jsx(D,{variant:"baseSemi",children:e}),n&&o.jsx(D,{variant:"tiny",color:"light",children:o.jsx("span",{className:"font-mono",children:n})})]}):null,S8t=({status:e,date:t,time:n,isUpcoming:r,variant:s="stacked",period:a})=>{const i=e==="live",l=e==="final",{isMobileStyle:c}=xe();return o.jsx("div",{className:B("gap-sm flex",{"flex-row items-center":s==="row","flex-col items-center justify-center":s==="stacked"}),children:i?o.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[o.jsx(ap,{size:c?"small":"default",includeDot:!0}),a&&o.jsx(D,{variant:"tiny",color:"light",children:a})]}):o.jsxs("div",{className:B("gap-xs flex",{"flex-col":s==="stacked","flex-row items-center":s==="row"}),children:[r&&o.jsx(l3e,{textCenter:!0,className:"mb-1 hidden md:block"}),l&&o.jsx(Z_,{textCenter:!0,className:"-mt-0.5 md:mb-1 md:mt-0 md:block"}),o.jsx(D,{variant:"tiny",color:"light",className:"w-full whitespace-nowrap text-center",children:t}),n&&!l&&o.jsx(D,{variant:"tiny",color:"light",className:"w-full whitespace-nowrap text-center",children:n})]})})},E8t=({items:e,title:t,subtitle:n,isLive:r,period:s,eventCount:a})=>{const i=e.some(d=>d.emphasized),{isMobileStyle:l}=xe(),{isLargeScreen:c,isMediumScreen:u}=Jm();return o.jsx(H,{variant:"raised",className:B("px-md h-full py-[12px]",{"border-b border-r-0 group-last:border-b-0 group-even:border-r-0":l,"border-b group-odd:border-r":u&&!c,"group-[&:nth-child(2n):nth-last-child(-n+3)~a]:border-b-0":u&&!c&&a>2,"border-b border-r group-[&:nth-child(3n)]:border-r-0":c,"group-[&:nth-child(3n):nth-last-child(-n+4)~a]:border-b-0":c&&a>3,"!border-b-0":c&&a<=3||u&&!c&&a<=2}),children:o.jsxs("div",{className:"gap-sm flex size-full flex-col items-start justify-between duration-150 group-hover/link:opacity-75",children:[r?o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(ap,{size:"small",className:"-ml-1"}),s&&o.jsx(D,{variant:"tiny",color:"super",children:s})]}):t?o.jsx(D,{variant:"tinyRegular",color:"light",children:t}):null,o.jsx("div",{className:"w-full",children:e.map((d,m)=>o.jsx(M8t,{item:d,anyEmphasized:i},d.title+m))}),n&&o.jsx(D,{variant:"tinyRegular",color:"light",children:n})]})})},M8t=({item:e,anyEmphasized:t})=>{const n=f.useMemo(()=>e.score?e.subscore?`${e.score} ${e.subscore}`:e.score:o.jsx(_3e,{}),[e.score,e.subscore]);return o.jsxs(H,{className:"flex w-full items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[e.image&&o.jsx("img",{src:e.image,alt:e.title,className:"size-[24px]"}),o.jsx(D,{variant:e.emphasized?"smallBold":"small",color:t&&!e.emphasized?"light":"default",children:e.title})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[e.emphasized&&o.jsx(zM,{size:14,className:"text-super -translate-y-half"}),o.jsx(D,{variant:e.emphasized?"smallBold":"small",color:t&&!e.emphasized?"light":"default",children:n})]})]})},S3e=I.memo(()=>o.jsx("div",{children:"Error loading individual event widget."}));S3e.displayName="IndvEventsWidgetErrorFallback";const Fse=new Set,k8t=({children:e,canonicalPageLink:t})=>{const{$t:n}=Z();return o.jsxs(H,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?o.jsx(Ge,{href:t,children:o.jsxs(D,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),o.jsx(Kn,{size:18})]})}):null]})},T8t=(e,t)=>{if(!e)return"";try{return new Date(e).toLocaleDateString(t,{month:"short",day:"numeric"})}catch{return""}},N8t=(e,t)=>{if(!e)return"";try{return new Date(e).toLocaleTimeString(t,{hour:"numeric",minute:"2-digit",hour12:!0}).replace(/^0+/,"")}catch{return""}},E3e=({competitor:e})=>o.jsxs(H,{className:"gap-sm border-subtlest px-md py-sm flex items-center border-b last:border-b-0",children:[o.jsx(D,{className:"w-4 text-center",children:e.rank}),o.jsxs("div",{className:"gap-sm flex grow items-center",children:[e.primary_img_url?o.jsx(Es,{logo:e.primary_img_url,color:"transparent",size:"small",className:"shrink-0"}):o.jsx(H,{className:"flex h-5 w-8 shrink-0 items-center justify-center rounded-sm bg-[#44403c] text-xs",children:e.abbreviation}),o.jsxs("div",{className:"flex grow flex-col",children:[o.jsx(D,{variant:"smallBold",children:e.title}),o.jsxs(D,{variant:"tiny",color:"light",children:[e.metadata[0]," "]})]})]}),o.jsxs(H,{className:"flex flex-col items-end text-right",children:[o.jsx(D,{variant:"smallBold",children:e.metadata[1]}),o.jsx(D,{variant:"tiny",color:"light",children:e.metadata[2]})]})]},e.id),j8t=({event:e,league:t})=>{const{locale:n}=Z(),r=e.subtitle,{$t:s}=Z(),a=N8t(e.datetime,n),i=e.datetime?LD(new Date(e.datetime))?s({defaultMessage:"Today",id:"zWgbGgjUUg"}):Sye(new Date(e.datetime))?s({defaultMessage:"Tomorrow",id:"MtrTNyxuSU"}):new Date(e.datetime).toLocaleDateString(n,{weekday:"short",month:"short",day:"numeric"}):"";return o.jsxs(H,{className:"flex flex-col",children:[o.jsxs(H,{className:"p-md border-subtler flex items-end justify-between border-b",children:[o.jsxs(H,{className:"flex flex-col",children:[o.jsx(D,{variant:"baseSemi",children:e.title.join(" ")}),o.jsxs(D,{variant:"small",color:"light",children:[t.toUpperCase(),r&&`${r}`]})]}),o.jsxs("div",{className:"flex flex-col items-end",children:[o.jsx(D,{variant:"small",children:i}),o.jsx(D,{variant:"small",color:"light",children:a})]})]}),e.image_url&&o.jsx(H,{className:"aspect-video w-full overflow-hidden rounded-lg bg-[#292524]",children:o.jsx(fs,{src:e.image_url,alt:`${e.title.join(" ")} circuit map`,className:"size-full object-contain"})}),o.jsx(H,{className:"gap-xs p-md flex flex-col",children:e.metadata?.map((l,c)=>o.jsxs(H,{className:"flex justify-between",children:[o.jsx(D,{className:"text-sm",color:"light",children:l[0]}),o.jsx(D,{className:"text-sm",children:l[1]})]},c))})]})},A8t=({event:e,league:t})=>{const{locale:n}=Z(),r=T8t(e.datetime,n),s=e.competitors.slice(0,3),a=e.subtitle;return o.jsxs(H,{className:"flex flex-col",children:[o.jsxs(H,{className:"border-subtler px-md py-sm gap-md flex items-center justify-between border-b",children:[o.jsxs("div",{children:[o.jsx(D,{variant:"baseSemi",className:"flex justify-between",children:o.jsx("span",{children:e.title.join(" ")})}),o.jsxs(D,{variant:"small",color:"light",children:[t.toUpperCase(),a&&`${a}`]})]}),o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(D,{variant:"small",color:"light",children:r}),o.jsx(Z_,{})]})]}),o.jsx(H,{className:"flex flex-col",children:s.map(i=>o.jsx(E3e,{competitor:i},i.id))})]})},I8t=({event:e,league:t})=>{const n=e.competitors.slice(0,3),r=e.subtitle;return o.jsxs(H,{className:"flex flex-col",children:[o.jsxs(H,{className:"border-subtler px-md py-sm gap-md flex items-center justify-between border-b",children:[o.jsxs("div",{children:[o.jsx(D,{variant:"baseSemi",className:"flex justify-between",children:o.jsx("span",{children:e.title.join(" ")})}),o.jsx("div",{children:o.jsxs(D,{variant:"small",color:"light",children:[t.toUpperCase(),r&&`${r}`]})})]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(ap,{includeDot:!0}),e.period_text&&o.jsx(D,{color:"light",variant:"small",children:e.period_text})]})]}),o.jsx(H,{className:"flex flex-col",children:n.map(s=>o.jsx(E3e,{competitor:s},s.id))})]})},R8t=({event:e,league:t})=>{switch(e.status){case"upcoming":return o.jsx(j8t,{event:e,league:t});case"live":return o.jsx(I8t,{event:e,league:t});case"final":return o.jsx(A8t,{event:e,league:t});default:return null}};function P8t({widgetData:e}){const{result:{backend_uuid:t,mode:n}}=an(),r=Xk(),s=f.useMemo(()=>e?.event,[e]),a=f.useMemo(()=>e?.league,[e]);if(f.useEffect(()=>{!t||!e||!s||Fse.has(t)||(r("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:n}),Fse.add(t))},[t,s,n,e,r]),!e||!s)return null;const i=e.canonical_page?.url_web,l=`indv-event-${s.id??"unknown"}`;return o.jsx(Or,{fallback:S3e,children:o.jsx(Ci,{widgetType:"sports",widgetName:l,children:({})=>o.jsx(k8t,{canonicalPageLink:i,children:o.jsx(R8t,{event:s,league:a})})})})}const M3e=I.memo(()=>o.jsx("div",{children:"Error loading individual schedule widget."}));M3e.displayName="IndvScheduleWidgetErrorFallback";const Use=new Set,O8t=({children:e,canonicalPageLink:t})=>{const{$t:n}=Z();return o.jsxs(H,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?o.jsx(Ge,{href:t,children:o.jsxs(D,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),o.jsx(Kn,{size:18})]})}):null]})},L8t=(e,t,n)=>{if(!e)return t.replace(/^(0)(\d:[0-5]\d\s+[AP]M)$/,"$2");try{return new Date(e).toLocaleTimeString(n,{hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"}).replace(/^0+/,"")}catch{return t.replace(/^(0)(\d:[0-5]\d\s+[AP]M)$/,"$2")}},X6=({event:e,isFinal:t,isLive:n})=>{const{locale:r}=Z(),s=e.metadata?.[0],a=e.metadata?.[1]??"",i=L8t(e.datetime,a,r),{isMobileStyle:l}=xe(),c=!!e.url?.url_web,u=o.jsxs(o.Fragment,{children:[o.jsxs(H,{className:"p-md col-span-3 grid grid-cols-subgrid items-center md:col-span-4",children:[o.jsx(H,{className:"flex flex-col items-start",children:o.jsx(F8t,{date:e.datetime??""})}),o.jsxs(H,{className:"gap-xs flex flex-col md:gap-0",children:[o.jsx(D,{variant:"baseSemi",className:"text-base leading-snug",children:e.title.join(" ")}),s&&o.jsxs(D,{variant:l?"tiny":"small",className:"mt-0 pt-0",color:"light",children:[!t&&!n&&o.jsxs(o.Fragment,{children:[i,"  "]}),s]})]}),o.jsx("div",{className:"hidden md:block",children:e.live_text&&o.jsx(D,{variant:"small",className:"text-right",children:e.live_text})}),o.jsx("div",{children:t?o.jsx(Z_,{}):n?o.jsx(ap,{includeDot:!0}):null})]}),o.jsx("div",{className:"p-md -mt-sm col-span-2 col-start-2 pl-0 pt-0 md:hidden",children:e.live_text&&o.jsx(D,{variant:"tiny",className:"border-subtlest p-xs px-sm rounded border",color:"light",children:e.live_text})})]}),d="col-span-3 grid grid-cols-subgrid border-b border-subtlest last:border-b-0 md:col-span-4";return c?o.jsx(Ge,{href:e.url?.url_web??"",className:B(d,"hover:bg-subtler duration-150"),children:u}):o.jsx(H,{className:d,children:u})};function D8t({widgetData:e}){const{result:{backend_uuid:t,mode:n}}=an(),r=Xk(),s=f.useMemo(()=>e?.events??[],[e]);if(f.useEffect(()=>{!t||!e||!s?.length||Use.has(t)||(r("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:n}),Use.add(t))},[t,e,s,n,r]),!e||!s||s.length===0)return null;const a=e.canonical_page?.url_web,i=`indv-schedule-${e.league??"unknown"}`;return o.jsx(Or,{fallback:M3e,children:o.jsx(Ci,{widgetType:"sports",widgetName:i,children:({})=>o.jsx(O8t,{canonicalPageLink:a,children:o.jsx(H,{className:"gap-x-md grid grid-cols-[min-content,1fr,min-content] md:grid-cols-[min-content,1fr,1fr,min-content]",children:s.map(l=>{switch(l.status){case"upcoming":return o.jsx(X6,{event:l},l.id);case"live":return o.jsx(X6,{event:l,isLive:!0},l.id);case"final":return o.jsx(X6,{event:l,isFinal:!0},l.id);default:return null}})})})})})}const F8t=({date:e})=>{const{locale:t}=Z(),n=new Date(e).toLocaleDateString(t,{day:"numeric"}),r=new Date(e).toLocaleDateString(t,{month:"short"}),{isMobileStyle:s}=xe();return o.jsxs("div",{className:"dark:bg-subtle bg-subtler py-xs flex w-full flex-col items-center justify-center rounded-lg px-0.5 md:p-[6px]",children:[o.jsx(D,{className:"px-sm -mb-0.5 rounded-full text-center",variant:"tinyRegular",color:"light",children:r}),o.jsx(D,{className:"px-sm -mb-1 text-center",variant:s?"baseSemi":"section-title",children:n})]})},U8t=({result:e})=>{let t="",n=null;return e==="W"?(t="bg-[#059669] text-white",n=Sr):e==="D"?(t="bg-[#64748b] text-white",n=GM):e==="L"&&(t="bg-[#e11d48] text-white",n=Rt),o.jsx("div",{className:B("flex size-4 items-center justify-center rounded-full",t),children:n&&o.jsx(n,{size:12,strokeWidth:2.5})})},J$=({form:e})=>{const t=String(e).replace(/\s/g,"");return o.jsx("div",{className:"flex gap-0.5",children:t.split("").map((n,r)=>o.jsx(U8t,{result:n},r))})};J$.displayName="FormDisplay";const B8t={form:e=>{const t=e.display_value??e.value??"";return o.jsx(J$,{form:String(t)})},movement:e=>{const t=e.display_value??e.value??"";return o.jsx(V8t,{value:String(t)})}},V8t=({value:e})=>{const t=e.includes(""),n=e.includes(""),r=e==="-",s=e.replace(/[^0-9]/g,"");return o.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[o.jsx(ce,{icon:t?m9e:n?p9e:GM,size:"sm",className:B("scale-90",{"text-quietest":r,"text-positive":t,"text-negative":n})}),!r&&o.jsx(D,{variant:"tinyMono",color:t?"positive":"negative",className:"w-[2ch] shrink-0 text-left",children:s})]})};J$.displayName="FormDisplay";const k3e=(e="left")=>{switch(e){case"center":return"text-center";case"right":return"text-right";case"left":default:return"text-left"}},$8t=(e=!1)=>e?"w-full":"w-0",Z6=(e="normal",t)=>{if(t==="pos")return"smallCaps";switch(e){case"bold":return"smallBold";case"normal":default:return"small"}},W8t=(e="")=>e==="pos"?"light":"default",H8t=({cell:e,column:t,columnRenderers:n=B8t})=>{const{inApp:r}=Vo();if(!e)return o.jsx("td",{className:"md:px-md p-sm"});let s;const a=t.column_type??"text",i=e.display_value??e.value??"-";t.column_id&&n[t.column_id]?s=n[t.column_id]?.(e,t):(a==="entity"||a==="image")&&e.image_url?s=o.jsxs("div",{className:"md:gap-md gap-sm flex items-center",children:[o.jsx(Es,{logo:e.image_url,color:"transparent",size:"small",className:"shrink-0"}),o.jsxs("div",{children:[o.jsx(D,{variant:Z6(t.font_weight??"normal",t.column_id),children:i}),a==="entity"&&e.sub_text&&o.jsx(D,{variant:"tiny",color:"light",children:e.sub_text})]})]}):a==="entity"&&!e.image_url?s=o.jsxs("div",{children:[o.jsx(D,{variant:Z6(t.font_weight??"normal",t.column_id),children:i}),e.sub_text&&o.jsx(D,{variant:"tiny",color:"light",children:e.sub_text})]}):s=o.jsx(D,{variant:Z6(t.font_weight??"normal",t.column_id),color:W8t(t.column_id),children:i});const l=B("md:pl-md pl-sm last:px-sm md:last:px-md py-sm align-middle",k3e(t.alignment),$8t(t.should_fill_width));return e.canonical_page?o.jsx("td",{className:l,children:o.jsx(Nu,{href:r?e.canonical_page.url_app:e.canonical_page.url_web,className:"block",children:s})}):o.jsx("td",{className:l,children:s})},z8t=({row:e,columns:t,columnRenderers:n})=>{const r=new Map(e.cells.map(s=>[s.column_id,s]));return o.jsx("tr",{className:B("border-subtlest border-b last:border-b-0"),children:t.map(s=>o.jsx(H8t,{cell:r.get(s.column_id),column:s,columnRenderers:n},s.column_id))})},G8t=({table:e,variant:t="subtler",title:n,className:r,noWrapTitle:s=!1,onGroupClick:a,columnRenderers:i})=>{const[l,c]=f.useState(e?.groups?.[0]?.group_id??""),[u,d]=f.useState(!1),{$t:m}=Z();if(Hm("standings"),!e||!e.groups?.length)return null;const p=n??e.title??"Standings",h=e.groups.find(x=>x.group_id===l),g=e.groups.length>1;if(!h)return null;const y=u?h.rows:h.rows.slice(0,10),v=e.groups.map(x=>({type:"default",text:x.title??x.group_id,onClick:()=>{c(x.group_id),a?.(x.group_id)},active:l===x.group_id,show:!0}));return o.jsx(sn,{className:r,header:o.jsxs("div",{className:"md:pl-md gap-sm sm:gap-md mb-sm flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[o.jsx(D,{variant:"baseSemi",className:B(s?"flex-shrink-0":void 0,"max-sm:pl-sm"),children:p}),g?o.jsx(Jt,{items:v,isMobileStyle:!1,wrapperClassName:"min-w-0",children:o.jsx(he,{text:h.title??h.group_id,chevron:!0,size:"small",extraCSS:"w-full"})}):o.jsx("div",{className:"invisible min-h-10"})]}),children:o.jsxs("div",{className:"rounded-inherit",children:[o.jsx("div",{className:"rounded-t-inherit overflow-hidden",children:o.jsx(Wi,{orientation:"horizontal",children:o.jsxs("table",{className:B("w-full table-auto border-collapse"),children:[o.jsx(H,{as:"thead",variant:t==="raised"?"raisedOffset":"subtle",children:o.jsx("tr",{children:h.columns.map(x=>o.jsx("th",{className:B("md:pl-md pl-sm last:px-sm md:last:px-md py-xs whitespace-nowrap align-middle",k3e(x.alignment)),children:o.jsx(ZPt,{className:B({"w-[200px] md:w-auto":x.should_fill_width}),children:x.header_label})},x.column_id))})}),o.jsx("tbody",{children:y.map(x=>o.jsx(z8t,{row:x,columns:h.columns,columnRenderers:i},x.row_id))})]})})}),h.rows.length>10&&o.jsx(H,{className:"p-xs border-t",children:o.jsx(Te,{text:m(u?{id:"UOYN/MXiOT",defaultMessage:"View Less"}:{id:"wbcwKddwLa",defaultMessage:"View All"}),size:"small",fullWidth:!0,onClick:()=>d(x=>!x)})})]},h.group_id)})},T3e=I.memo(()=>o.jsx("div",{children:"Error loading standings widget."}));T3e.displayName="StandingsWidgetErrorFallback";const q8t=new Set,K8t=({children:e,canonicalPageLink:t})=>{const{$t:n}=Z();return o.jsxs(H,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?o.jsx(Ge,{href:t,children:o.jsxs(D,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),o.jsx(Kn,{size:18})]})}):null]})};function Y8t({widgetData:e}){const{result:{backend_uuid:t,mode:n}}=an(),r=Xk(),s=f.useMemo(()=>e?.standings_table?e.standings_table:null,[e]);if(f.useEffect(()=>{!t||!e||!s||q8t.has(t)||r("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:n})},[t,s,n,e,r]),!e||!s)return null;const a=e.canonical_pages?.[0]?.url_web,i=`standings-${s.table_id??"unknown"}`;return o.jsx(Or,{fallback:T3e,children:o.jsx(Ci,{widgetType:"sports",widgetName:i,children:({})=>o.jsx(K8t,{canonicalPageLink:a,children:o.jsx(G8t,{table:s,variant:"raised",className:"!rounded-none border-0"})})})})}const tb={staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0},Q8t=({headshotImageUrl:e,flagUrl:t,name:n,isCompositeFlag:r})=>!e&&!t?null:o.jsxs("div",{className:"relative size-6 shrink-0 rounded md:size-8",children:[o.jsx("img",{src:e??t,alt:n,className:B("rounded-inherit relative size-full shrink-0",{"object-contain":r,"object-cover":!r})}),!r&&o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/10 dark:border-white/10"}),e&&o.jsxs("div",{className:"ml-xs ring-raised absolute right-[90%] top-[90%] size-3 shrink-0 -translate-y-1/2 translate-x-1/2 rounded-full ring-2 md:size-4",children:[o.jsx("img",{src:t,alt:n,className:"rounded-inherit relative size-full shrink-0 object-cover"}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/10 dark:border-white/10"})]})]}),N3e=({event:e,team1:t,team2:n,isLive:r})=>{const s=e.datetime&&new Date(e.datetime)>new Date,a=r?t.sub_text:null,i=r?n.sub_text:null,{isMobileStyle:l}=xe(),c=f.useMemo(()=>e?.stat_columns?.map(d=>({team1:{score:d.team_1_text,scoreSuper:d.team_1_super_text,emphasis:d.team_1_emphasis,super:!1},team2:{score:d.team_2_text,scoreSuper:d.team_2_super_text,emphasis:d.team_2_emphasis,super:!1}})),[e?.stat_columns]),u=f.useMemo(()=>r?[...c??[],{team1:{score:t.text,scoreSuper:null,emphasis:!1,super:!0},team2:{score:n.text,scoreSuper:null,emphasis:!1,super:!0}}]:c,[c,r,t.text,n.text]);return s?o.jsxs("div",{className:"gap-sm pr-sm flex h-full flex-col justify-around",children:[o.jsx(D,{variant:"base",color:"ultraLight",className:"opacity-50",children:""}),o.jsx(D,{variant:"base",color:"ultraLight",className:"opacity-50",children:""})]}):c?o.jsxs("div",{className:B("gap-x-md grid h-16 auto-cols-auto grid-flow-col",{"gap-x-sm":l}),children:[u?.map((d,m)=>o.jsxs("div",{className:"gap-sm grid h-full grid-cols-subgrid",children:[o.jsx("div",{className:"flex items-center",children:o.jsxs(D,{variant:l?"smallBold":"section-title",className:"min-w-[2ch] text-center !font-mono leading-none",color:d.team1.super&&d.team1.score?"super":d.team1.emphasis?"default":"ultraLight",children:[d.team1.score??"",d.team1.scoreSuper&&o.jsx("sup",{className:"-translate-y-sm text-2xs !font-mono tracking-tight",children:d.team1.scoreSuper})]})}),o.jsx("div",{className:"flex items-center",children:o.jsxs(D,{variant:l?"smallBold":"section-title",className:"min-w-[2ch] text-center !font-mono leading-none",color:d.team2.super&&d.team2.score?"super":d.team2.emphasis?"default":"ultraLight",children:[d.team2.score??"",d.team2.scoreSuper&&o.jsx("sup",{className:"-translate-y-sm text-2xs !font-mono tracking-tight",children:d.team2.scoreSuper})]})})]},m)),(a||i)&&o.jsxs("div",{className:"gap-sm grid h-full grid-cols-subgrid place-items-center",children:[o.jsx(Bse,{score:a}),o.jsx(Bse,{score:i})]})]}):null},Bse=({score:e})=>{const{isMobileStyle:t}=xe();return o.jsx(H,{variant:"superLight",className:B("px-xs flex w-full items-center justify-center rounded py-0.5",{"opacity-0":!e}),children:o.jsx(D,{variant:t?"smallBold":"section-title",color:"super",className:"flex min-w-[2ch] items-center justify-center",children:o.jsx("span",{className:"font-mono",children:e??""})})})},X8t=({children:e,className:t})=>o.jsx(ge.div,{layout:!0,layoutRoot:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{ease:rn,duration:.5},className:B("p-sm isolate flex-col items-end md:flex",t),children:o.jsx("ul",{className:"-mb-xs flex w-full flex-col items-start",children:o.jsx(rc,{id:"index",children:e})})}),j3e=I.memo(({extraCss:e})=>o.jsx(H,{className:`h-[12px] w-[60px] rounded-full ${e}`,variant:"subtler"}));j3e.displayName="ArticleSkeletonItem";const Z8t=({widgetData:e,onClick:t,highlighted:n,idx:r})=>o.jsxs("div",{className:"gap-xs pt-sm ml-6 flex items-center",onClick:t.bind(null,e.id),children:[o.jsx(D,{className:B("border-subtler bg-base relative -top-px inline-flex size-4 shrink-0 scale-[.85] items-center justify-center rounded-full border shadow-sm duration-150",{"border-foreground bg-inverse !text-inverse opacity-70":n}),variant:"smallCaps",color:"light",children:r+1}),o.jsx(D,{variant:"tiny",color:n?void 0:"light",className:B("line-clamp-1 cursor-pointer opacity-80 duration-150 hover:!opacity-100",{"!opacity-100":n}),children:e.name})]}),J8t=({highlighted:e,scrollTopOffset:t,scrollThumbHeight:n,widgets:r,loading:s})=>o.jsxs("div",{className:B("bg-base w-two absolute inset-y-0 left-0 z-[2] rounded-full",{"opacity-0 delay-1000":!e}),children:[o.jsx("div",{className:B("absolute inset-0 overflow-hidden duration-150",{"opacity-0":r.length===0||!e,"opacity-1":r.length>0}),children:o.jsx("div",{className:B("absolute left-0 top-0 w-full rounded-full",{"bg-inverse/70":s},{"bg-inverse":!s}),style:{top:`min(${t}%, calc(100% - 8px - ${n}%))`,height:n+"%"}})}),o.jsx("div",{className:"bg-inverse/10 absolute inset-0 rounded-full"})]}),A3e=(e,t,n=100)=>{const s=e.getBoundingClientRect().top,a=t.clientHeight/2;return s-a<=n},e9t=({title:e,onClick:t,idx:n,onWidgetClick:r,highlighted:s=!1,isStaged:a,loading:i,id:l,widgets:c=ue,ref:u,testId:d})=>{const m=s&&!i,[p,h]=f.useState(0),[g,y]=f.useState(0),[v,x]=f.useState(""),b=2,{entityRefs:_}=S$(),{scrollContainerRef:w}=Oa(),C=f.useRef(null),S=f.useCallback(()=>{const k=u?.current;if(k){const A=k.getBoundingClientRect().height,R=k.getBoundingClientRect().top;h(Math.max((1-(A+R)/A)*100,0))}},[u]),E=f.useMemo(()=>Xg(()=>{let k=[];Object.keys(_).map(A=>{_[A]?.current&&w?.current&&A3e(_[A]?.current,w.current)&&(k=[...k,A])}),x(k[k.length-1]??"")},100),[x,_,w]);f.useEffect(()=>{const k=w.current;if(k)return c&&c.length>=b&&s?(k.addEventListener("scroll",E),k.addEventListener("scroll",S)):(k.removeEventListener("scroll",E),k.removeEventListener("scroll",S)),()=>{k.removeEventListener("scroll",E),k.removeEventListener("scroll",S)}},[s,E,S,c,w]),f.useEffect(()=>{const k=u?.current;if(C.current&&(C.current.disconnect(),C.current=null),k?.nodeType===Node.ELEMENT_NODE){const A=new ResizeObserver(([R])=>{if(R&&ia(R.borderBoxSize)){const{blockSize:O}=R.borderBoxSize[0];y(window.innerHeight/O*100)}});A.observe(k),C.current=A}return()=>{C.current?.disconnect(),C.current=null}},[u,n]);const M=f.useMemo(()=>c.length>=b&&o.jsx("span",{className:"ml-xs inline-flex",children:o.jsx(ce,{icon:Dn,size:"xs"})}),[c.length,b]);return o.jsxs(yn,{as:"li",active:i,speed:"slow",className:"group relative flex select-none flex-col",children:[o.jsx(zs,{mode:"popLayout",initial:!0,children:o.jsx(Qr,{children:a&&!e?o.jsx("div",{className:"ml-md flex h-[20px] items-center",children:o.jsx(j3e,{extraCss:"!w-[100px] !h-[10px]"})}):o.jsxs("div",{children:[o.jsx("div",{onClick:t.bind(null,n),"data-testid":d,children:o.jsxs(D,{variant:"small",color:m?"default":a?"ultraLight":"light",className:B("gap-xs pl-md line-clamp-2 cursor-pointer opacity-80 duration-150 group-hover:opacity-100",{"font-[450] !opacity-100":m}),children:[e,M]})}),s&&!a&&c.length>=b&&o.jsx(ge.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0,transition:{delay:.15}},exit:{opacity:0,y:-4},className:"pb-1",children:c.map((k,A)=>{const R=k.meta_data;return R.object==="ShopifyWidget"?o.jsx(Z8t,{widgetData:R,onClick:r,idx:A,highlighted:!i&&v===k.meta_data?.id},k.meta_data?.id):null})},e)]})},a&&!e?"placeholder":e)}),o.jsx("div",{className:"h-sm text-inverse relative z-[5] inline-flex w-full",children:o.jsx("svg",{width:"2",height:"10",viewBox:"0 0 2 10",fill:"none",className:"inline-flex",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M2 0C2 0.552284 1.55228 1 1 1C0.447716 1 0 0.552284 0 0V10C0 9.44772 0.447716 9 1 9C1.55228 9 2 9.44772 2 10V0Z",fill:"currentColor"})})}),i&&o.jsx("div",{className:"w-two absolute inset-y-0 left-0 z-[4] animate-pulse rounded-full",children:o.jsx("div",{className:B("bg-inverse absolute inset-0 opacity-10")})}),o.jsx("div",{className:B("bg-base w-two absolute inset-y-0 left-0 z-[3] opacity-0 duration-150",{"!opacity-100":a})}),c.length>=b&&o.jsx(J8t,{highlighted:s,scrollTopOffset:p,scrollThumbHeight:g,widgets:c,loading:i??!1}),s&&o.jsx(ge.div,{layoutId:"layout"+l,transition:{ease:rn,duration:.3},className:B("bg-inverse w-two absolute inset-y-0 left-0 z-[1] rounded-full",{"!bg-inverse/70":a||i},{"opacity-0 delay-100":c.length>=b})}),o.jsx("div",{className:B("bg-inverse w-two absolute inset-y-0 left-0 z-[1] rounded-full opacity-10 duration-150")})]})},t9t=({items:e,sectionRefs:t,onItemClick:n,onWidgetClick:r,className:s,id:a})=>{const[i,l]=f.useState(0),c=h=>{r?.(h)},{scrollContainerRef:u}=Oa(),d=h=>{n(h)},m=f.useMemo(()=>Xg(()=>{if(!u?.current)return;const h=u.current;if((h?.scrollTop??0)===0){l(0);return}if(LE(h)){l(e.length-1);return}let y=[];Array.from({length:Object.keys(t).length}).map((v,x)=>{const b=t?.[x]?.current;b&&A3e(b,h,0)&&(y=[...y,x])}),l(y[y.length-1]??0)},100),[t,l,e.length,u]),p=f.useCallback(()=>{m()},[m]);return f.useEffect(()=>{const h=u?.current;return h?.addEventListener("scroll",p),()=>{h?.removeEventListener("scroll",p)}},[p,u]),o.jsx(X8t,{className:s,children:e.filter(h=>h.show).map((h,g)=>o.jsx(e9t,{title:h.title,onClick:d,onWidgetClick:c,idx:g,loading:h.loading,highlighted:g===i,isStaged:h.staged,id:a,testId:h.testId,widgets:h.widgets,ref:t[g]},h.id))})},I3e=I.memo(()=>o.jsx("div",{}));I3e.displayName="MenuSectionErrorFallback";const R3e=I.memo(({children:e,entries:t,className:n,showMenu:r=!0,header:s,footer:a,variant:i="default",id:l})=>{const{isMobileStyle:c}=xe();return o.jsxs("div",{className:B(n,"mx-md mb-md max-w-threadWidth gap-x-lg md:mx-lg relative md:grid",{"grid-cols-4":i==="default","grid-cols-3":i==="twoThirds"}),children:[o.jsx("div",{className:B("space-y-md pt-md",{"col-span-3":i==="default","col-span-2":i==="twoThirds"}),children:e}),o.jsx("div",{className:B("relative",{"col-span-1 col-start-4":i==="default","col-span-1":i==="twoThirds"}),children:r&&!c&&o.jsxs("div",{className:"sticky top-0",children:[s&&o.jsx("div",{children:s}),o.jsx(P3e,{entries:t,id:l}),a&&o.jsx("div",{children:a})]})})]})});R3e.displayName="WithMenu";const J6=({children:e,className:t,show:n=!0,ref:r})=>n?o.jsx(Or,{fallback:I3e,children:o.jsx("div",{ref:r,className:t,children:e})}):null,P3e=I.memo(({entries:e,id:t})=>{const{scrollContainerRef:n}=Oa();I.useEffect(()=>{const i=window.location.hash.slice(1);if(i){const l=e.find(c=>c.id===i);l?.ref.current&&Vse(l.ref.current,!1,n.current)}},[e,n]);const r=f.useMemo(()=>Object.fromEntries(e.filter(i=>i.show).map((i,l)=>[l,i.ref])),[e]),s=f.useMemo(()=>e.map(i=>({title:i.title,id:i.id,loading:!1,show:i.show??!0})).filter(i=>i.show),[e]),a=f.useCallback(i=>{r[i]?.current&&Vse(r[i].current,!0,n.current)},[r,n]);return o.jsx(t9t,{className:"pt-md",items:s,sectionRefs:r,onItemClick:a,id:`menu-list-${t}`})});P3e.displayName="MenuList";function Vse(e,t=!0,n){const r=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--header-height"))||50,s=parseFloat(window.getComputedStyle(e).marginTop),{top:a}=e.getBoundingClientRect();if(!n)return;const i=a+n.scrollTop-r-s;n.scrollTo({top:i,behavior:t?"smooth":"auto"})}async function n9t(){const{error:e,data:t}=await se.GET("/rest/sports/f1/","f1-index",{timeoutMs:0});if(e)throw new Ce("API_CLIENTS_ERROR",{details:{league:"f1"}});return t?.data}async function r9t(){const{error:e,data:t}=await se.GET("/rest/sports/nba","nba-index",{timeoutMs:0});if(e)throw new Ce("API_CLIENTS_ERROR",{details:{league:"nba"}});return t?.data??null}async function s9t(){const{error:e,data:t}=await se.GET("/rest/sports/wnba/","wnba-index",{timeoutMs:0});if(e)throw new Ce("API_CLIENTS_ERROR",{details:{league:"wnba"}});return t?.data}async function a9t(){const{error:e,data:t}=await se.GET("/rest/sports/pga/","pga-index",{timeoutMs:0});if(e)throw new Ce("API_CLIENTS_ERROR",{details:{league:"pga"}});return t?.data}async function o9t(){const{error:e,data:t}=await se.GET("/rest/sports/european_tour/","european-tour-index",{timeoutMs:0});if(e)throw new Ce("API_CLIENTS_ERROR",{details:{league:"european_tour"}});return t?.data}async function i9t(e){const{error:t,data:n}=await se.GET("/rest/sports/tennis/{league}",`${e}-index-client-page`,{params:{path:{league:e}},timeoutMs:3e4});if(t)throw new Ce("API_CLIENTS_ERROR",{cause:t,details:{league:e}});return n?.data}async function l9t(){const{error:e,data:t}=await se.GET("/rest/sports/mlb","mlb-index",{timeoutMs:0});if(e)throw new Ce("API_CLIENTS_ERROR",{details:{league:"mlb"}});return t?.data}async function c9t(){const{error:e,data:t}=await se.GET("/rest/sports/ipl","ipl-index",{timeoutMs:0});if(e)throw new Ce("API_CLIENTS_ERROR",{details:{league:"ipl"}});return t?.data??null}async function u9t(){const e=await se.GET("/rest/sports/cricket/icc","icc-index",{timeoutMs:0,numRetries:0});if(e.error)throw new Ce("API_CLIENTS_ERROR",{details:{league:"icc"}});return e.data}const d9t=e=>["sports/",e],O3e=e=>["wsc-story",e];async function L3e({eventId:e,headers:t}){const n=await se.GET("/rest/sports/wsc/story/{event_id}","wsc-story-fetch",{params:{path:{event_id:String(e)}},headers:t,timeoutMs:0});if(n.error)throw new Ce("API_CLIENTS_ERROR",{details:{eventId:e,endpoint:"/rest/sports/wsc/story"}});if(!n.data)throw new Error(`No URL found in WSC story response for event ${e}`);return n.data}async function D3e({league:e,headers:t,reason:n}){try{const{error:r,data:s}=await se.GET("/rest/sports/{league}/hype",n,{params:{path:{league:e}},headers:t,timeoutMs:0});if(r)throw new Ce("API_CLIENTS_ERROR",{details:{league:e,reason:n}});return s.data}catch(r){return ne.error(r),null}}async function f9t({headers:e,reason:t}){try{const{error:n,data:r}=await se.GET("/rest/sports/hype",t,{headers:e,timeoutMs:0});if(n)throw new Ce("API_CLIENTS_ERROR",{details:{reason:t}});return r.data}catch(n){return ne.error(n),null}}const m9t=()=>["sports/","hype"];async function p9t({headers:e,reason:t}){try{const{error:n,data:r}=await se.GET("/rest/sports/manifest",t,{headers:e,timeoutMs:0});if(n)throw new Ce("API_CLIENTS_ERROR",{details:{endpoint:"/rest/sports/manifest",reason:t}});return r}catch(n){return ne.error(n),null}}const h9t=()=>["sports/","manifest"],qrn=Object.freeze(Object.defineProperty({__proto__:null,getConsolidatedSportsHype:f9t,getConsolidatedSportsHypeKey:m9t,getEuropeanTourIndex:o9t,getF1Index:n9t,getICCIndex:u9t,getIPLIndex:c9t,getMLBIndex:l9t,getNBAIndex:r9t,getPGAIndex:a9t,getSportsLeagueHype:D3e,getSportsManifest:p9t,getSportsManifestKey:h9t,getTennisIndex:i9t,getWNBAIndex:s9t,getWscStory:L3e,sportsIndexKey:d9t,wscStoryKey:O3e},Symbol.toStringTag,{value:"Module"})),F3e=I.memo(({query:e,children:t,nofollow:n=!0,sources:r,...s})=>{const a=`/search/new?q=${encodeURIComponent(e)}${r?`&sources=${r.join(",")}`:""}`,i=f.useCallback(()=>M7e({query:e}),[e]);return o.jsx(Ge,{href:E7e()?void 0:a,rel:n?"nofollow":void 0,onClick:i,...s,children:t})});F3e.displayName="CanonicalQuery";var eI,fT="HoverCard",[U3e,Krn]=co(fT,[iy]),mT=iy(),[g9t,pT]=U3e(fT),B3e=e=>{const{__scopeHoverCard:t,children:n,open:r,defaultOpen:s,onOpenChange:a,openDelay:i=700,closeDelay:l=300}=e,c=mT(t),u=f.useRef(0),d=f.useRef(0),m=f.useRef(!1),p=f.useRef(!1),[h,g]=Ji({prop:r,defaultProp:s??!1,onChange:a,caller:fT}),y=f.useCallback(()=>{clearTimeout(d.current),u.current=window.setTimeout(()=>g(!0),i)},[i,g]),v=f.useCallback(()=>{clearTimeout(u.current),!m.current&&!p.current&&(d.current=window.setTimeout(()=>g(!1),l))},[l,g]),x=f.useCallback(()=>g(!1),[g]);return f.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(d.current)},[]),o.jsx(g9t,{scope:t,open:h,onOpenChange:g,onOpen:y,onClose:v,onDismiss:x,hasSelectionRef:m,isPointerDownOnContentRef:p,children:o.jsx(zL,{...c,children:n})})};B3e.displayName=fT;var V3e="HoverCardTrigger",$3e=f.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,s=pT(V3e,n),a=mT(n);return o.jsx(u5,{asChild:!0,...a,children:o.jsx(dn.a,{"data-state":s.open?"open":"closed",...r,ref:t,onPointerEnter:Ft(e.onPointerEnter,gM(s.onOpen)),onPointerLeave:Ft(e.onPointerLeave,gM(s.onClose)),onFocus:Ft(e.onFocus,s.onOpen),onBlur:Ft(e.onBlur,s.onClose),onTouchStart:Ft(e.onTouchStart,i=>i.preventDefault())})})});$3e.displayName=V3e;var eW="HoverCardPortal",[y9t,v9t]=U3e(eW,{forceMount:void 0}),W3e=e=>{const{__scopeHoverCard:t,forceMount:n,children:r,container:s}=e,a=pT(eW,t);return o.jsx(y9t,{scope:t,forceMount:n,children:o.jsx(da,{present:n||a.open,children:o.jsx(Ab,{asChild:!0,container:s,children:r})})})};W3e.displayName=eW;var hM="HoverCardContent",H3e=f.forwardRef((e,t)=>{const n=v9t(hM,e.__scopeHoverCard),{forceMount:r=n.forceMount,...s}=e,a=pT(hM,e.__scopeHoverCard);return o.jsx(da,{present:r||a.open,children:o.jsx(x9t,{"data-state":a.open?"open":"closed",...s,onPointerEnter:Ft(e.onPointerEnter,gM(a.onOpen)),onPointerLeave:Ft(e.onPointerLeave,gM(a.onClose)),ref:t})})});H3e.displayName=hM;var x9t=f.forwardRef((e,t)=>{const{__scopeHoverCard:n,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,...l}=e,c=pT(hM,n),u=mT(n),d=f.useRef(null),m=Vn(t,d),[p,h]=f.useState(!1);return f.useEffect(()=>{if(p){const g=document.body;return eI=g.style.userSelect||g.style.webkitUserSelect,g.style.userSelect="none",g.style.webkitUserSelect="none",()=>{g.style.userSelect=eI,g.style.webkitUserSelect=eI}}},[p]),f.useEffect(()=>{if(d.current){const g=()=>{h(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{document.getSelection()?.toString()!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",g),()=>{document.removeEventListener("pointerup",g),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),f.useEffect(()=>{d.current&&w9t(d.current).forEach(y=>y.setAttribute("tabindex","-1"))}),o.jsx(Nb,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:Ft(a,g=>{g.preventDefault()}),onDismiss:c.onDismiss,children:o.jsx(GL,{...u,...l,onPointerDown:Ft(l.onPointerDown,g=>{g.currentTarget.contains(g.target)&&h(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:m,style:{...l.style,userSelect:p?"text":void 0,WebkitUserSelect:p?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),b9t="HoverCardArrow",_9t=f.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,s=mT(n);return o.jsx(qL,{...s,...r,ref:t})});_9t.displayName=b9t;function gM(e){return t=>t.pointerType==="touch"?void 0:e()}function w9t(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t}var z3e=B3e,G3e=$3e,q3e=W3e,K3e=H3e;const tI="text-foreground text-left hover:text-super focus:text-super mb-xs transition-color line-clamp-2 cursor-pointer font-sans text-sm font-medium duration-150",Bg=I.memo(({hideHoverCard:e=!1,children:t,contentProps:n,linkProps:r,result:s,webResultCitation:a,timestampComponent:i,trackEvent:l,getAttachmentUrl:c})=>{const u=s?.is_conversation_history??!1,d=s?.is_memory??!1,m=u||d,[p,h]=f.useState(!1),[g,y]=f.useState(null),v=s.is_attachment??!1,x=Ey(s),b=Za(s.url),_=f.useCallback(async()=>{if(!c)return;const Q=await c(s.url);b&&(y(Q),h(!0),A(!1),R.current=!1)},[c,s.url,b]),w=Zb(s),C=_ye(s),S=C||m&&!w?null:s.meta_data?.generated_file_title??s.name,E=a?.cited_texts??[],M=s.meta_data?.generated_file_description??s.snippet,[k,A]=f.useState(!1),R=f.useRef(!1),[O,L]=f.useState(!1),P=!!(s.url&&My(s.url)),N=Tb(),T=s.meta_data?.authors,j=typeof s.meta_data?.wiley_book_uuid=="string",F=typeof s.meta_data?.domain_name=="string"?s.meta_data?.domain_name:void 0,U=f.useMemo(()=>oU(s),[s]);f.useEffect(()=>{if(typeof window>"u")return;function Q(){R.current=!1}return document.addEventListener("visibilitychange",Q),()=>{window.removeEventListener("visibilitychange",Q)}},[]);const V=s.url||w,$=f.useCallback(()=>h(!1),[]),z=f.useMemo(()=>({src:g??void 0}),[g]);return o.jsxs(z3e,{onOpenChange:Q=>{!Q&&R.current||A(e?!1:Q)},open:k,openDelay:200,closeDelay:200,children:[P&&s.url&&o.jsx(Jb,{isOpen:O,name:S,setisOpen:L,url:s.url}),b&&g&&o.jsx(Xb,{isOpen:p,onClose:$,imgProps:z}),o.jsx(G3e,{asChild:!0,"aria-label":S,onPointerEnter:()=>{R.current=!0},onClick:()=>{A(!1),R.current=!1},onPointerLeave:()=>{R.current=!1},children:t}),o.jsx(q3e,{children:o.jsx(K3e,{className:B({"data-open:animate-in data-open:zoom-in-[0.97] data-open:fade-in data-closed:animate-out data-closed:zoom-out-[0.97] data-closed:fade-out data-[side=bottom]:origin-top data-[side=top]:origin-bottom":!N}),side:"bottom",sideOffset:8,...n,children:o.jsxs("div",{className:"bg-base dark:border-subtler px-md w-80 rounded-xl border py-3 shadow-lg",children:[m&&!w?o.jsx(bU,{variant:"medium",searchType:d?"memory":"conversation-history"}):o.jsxs("div",{className:"gap-sm flex flex-col",children:[(V||i)&&o.jsxs("div",{className:"flex items-center justify-between",children:[V&&o.jsx(Oo,{className:"text-right",variant:"tiny",color:"light",url:s.url,isAttachment:v,source:F,connectionType:s.meta_data?.connection_type}),i]}),P?o.jsx("button",{className:tI,onClick:()=>{L(!0)},children:S}):x?o.jsx("button",{className:tI,onClick:_,children:S}):U?o.jsx(xU,{className:tI,result:s,trackEvent:l,...r,children:S}):o.jsx("span",{className:"text-foreground mb-xs line-clamp-2 text-left font-sans text-sm",children:S})]}),T?o.jsx(D,{color:"light",variant:"small",className:"line-clamp-3",children:T.join(", ")}):null,C?o.jsx(D,{variant:"small",color:"light",children:o.jsx(pe,{defaultMessage:"This is a private source.",id:"jKReyt0qq8",description:"Text shown when a source is private and obfuscated"})}):null,S!==s.name&&!d&&!C?o.jsx(D,{variant:"small",color:"light",children:s.name}):null,E.length>0?o.jsx("ul",{children:E.map((Q,Y)=>o.jsx("li",{className:"border-b last:border-b-0",children:o.jsx(D,{variant:"small",className:"line-clamp-[20] italic",children:Q})},Y))}):M&&o.jsx(D,{variant:"small",className:"line-clamp-4 whitespace-pre-wrap",children:M}),j?o.jsxs(H,{className:"gap-xs pt-sm mt-sm flex items-center border-t",children:[o.jsx(D,{variant:"tiny",color:"super",children:o.jsx(ce,{size:"sm",icon:kie})}),o.jsx(D,{variant:"tiny",color:"super",children:o.jsx(pe,{defaultMessage:"Premium Source",id:"K/sjkPqxv7",description:"title"})})]}):null,w&&!C?o.jsxs(H,{className:"gap-xs pt-sm mt-sm flex items-center border-t",children:[o.jsx(D,{variant:"tiny",color:"super",children:o.jsx(ce,{size:"sm",icon:Ov})}),o.jsx(D,{variant:"tiny",color:"super",children:o.jsx(pe,{defaultMessage:"Personal Search",id:"7+aLCEyqS2",description:"title"})})]}):null]})})})]})});Bg.displayName="CitationHoverCard";const $l=I.memo(({variant:e=m5.subtle,label:t,accessory:n,onClick:r,className:s,size:a="default",textColor:i="default",icon:l,iconClassName:c,iconOnly:u=!1,tooltip:d,truncate:m=!1,hover:p=!0,href:h,linkBehavior:g="none",trackEvent:y})=>{const v=f.useCallback(w=>{g==="external"&&h&&y&&y("click citation",{source:"inline",citation_url:h}),g!=="external"&&r?.(w)},[r,g,h,y]),x=o.jsxs(H,{as:"span",variant:e,className:B("text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums",{"py-[0.1875rem] leading-snug":a==="default","py-[0.175rem] leading-none":a==="small","py-[0.125rem] leading-none":a==="extraSmall"},{"px-[0.3rem]":!u,"inline-block px-[0.1875rem]":u,"[@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white":p}),onClick:g==="external"?void 0:r,children:[l&&o.jsx(ce,{icon:l,size:"2xs",className:B("-mt-px inline-block align-middle opacity-80",{"mr-xs":!u},c)}),o.jsx("span",{ref:w=>{if(w&&m){const C=w.scrollWidth>w.clientWidth;w.style.maskImage=C?"linear-gradient(to right, black 70%, transparent 100%)":""}},className:B("relative -mt-px inline-block align-middle",{"max-w-[25ch] overflow-hidden":m}),children:t}),!!n&&o.jsx("span",{className:"ml-xs -mt-px mr-px inline-block align-middle",children:n})]}),b=d?o.jsx(bn,{tooltipText:d,tooltipLayout:"top",asChild:!0,children:x}):x,_=o.jsx(D,{as:"span",color:i,className:B("relative -mt-px select-none whitespace-nowrap",{"-top-px":a==="default","-top-[3px] leading-none":a==="small","-top-two leading-none":a==="extraSmall"},s),children:b});return g==="external"&&h?o.jsx(Ge,{href:h,target:"_blank",rel:"noopener",className:"inline",onClick:v,children:_}):_});$l.displayName="CitationBubble";const hT=I.memo(e=>o.jsx($l,{...e}));hT.displayName="CitationNumberBubble";const tW=I.memo(({sources:e,count:t,variant:n="default",className:r})=>{const s="clip-path-small",a="clip-path-default",i=Math.min(e.length,t),l=f.useMemo(()=>e.slice(0,i),[e,i]);return i===0?null:o.jsxs(o.Fragment,{children:[o.jsx("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:o.jsx("defs",{children:o.jsx("clipPath",{id:a,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0635 0.704214C9.13824 0.253115 8.09868 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C8.09868 14 9.13824 13.7469 10.0635 13.2958C8.19825 11.8312 7 9.55552 7 7C7 4.44448 8.19825 2.16882 10.0635 0.704214Z",fill:"#D9D9D9"})})})}),o.jsx("svg",{width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:o.jsx("defs",{children:o.jsx("clipPath",{id:s,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.57242 0.57787C7.7928 0.20734 6.92062 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12C6.92062 12 7.7928 11.7927 8.57242 11.4221C7.00228 10.1385 6 8.18628 6 6C6 3.81372 7.00228 1.86154 8.57242 0.57787Z",fill:"#D9D9D9"})})})}),o.jsx("div",{className:B("gap-xs relative flex shrink-0 items-center",r),children:o.jsx("div",{className:"ml-xs flex",children:l.map((c,u)=>o.jsx(zi,{domain:c,size:n==="small"?12:14,className:B("bg-subtle relative z-0 shrink-0",{"-ml-[5px]":n==="default"},{"-ml-xs":n==="small"}),style:u!==i-1?{clipPath:`url(#${n==="small"?s:a})`}:void 0},u))})})]})});tW.displayName="CitationPile";function C9t(e,t){return e==null?1:t==null?-1:e==null&&t==null?0:!isNaN(Number(e))&&!isNaN(Number(t))?Number(e)-Number(t):String(e).localeCompare(String(t))}const S9t=({children:e,...t})=>o.jsx("table",{...t,children:e}),E9t=({children:e,...t})=>o.jsx("tr",{...t,children:e}),M9t=({children:e,index:t,id:n,data:r,...s})=>o.jsx("td",{...s,children:o.jsx(D,{variant:"tiny",className:B({"font-normal":t}),children:e})}),k9t=({SortButton:e,children:t})=>o.jsx("th",{className:"py-sm pr-sm text-left align-text-top outline-none",children:o.jsxs(H,{className:B("group relative flex items-center justify-between"),children:[o.jsx(D,{variant:"tiny",color:"light",children:t}),e]})}),Y3e=I.memo(function({name:t,setSortDescriptor:n}){return o.jsx("button",{className:"right-sm absolute opacity-0 transition-opacity duration-200 group-hover:opacity-100",onClick:()=>{n(r=>({...r,column:t,reverse:!r.reverse}))},children:o.jsx(D,{variant:"tiny",color:"super",children:o.jsx(ce,{icon:h9e,size:"xs"})})})});Y3e.displayName="SortButton";const Q3e=I.memo(({collapsed:e,setCollapsed:t,viewMoreText:n,viewLessText:r})=>{const s=f.useCallback(()=>{t(a=>!a)},[t]);return o.jsx(H,{className:"pb-sm",children:o.jsx(he,{pill:!0,variant:"border",size:"tiny",chevron:!0,chevronIcon:e?Dn:ey,text:e?n:r,onClick:s})})});Q3e.displayName="ResponsiveTableExpander";const $se="focus-visible:outline-super focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-0",X3e=I.memo(function(t){const{data:n,columns:r,compareFunction:s,RowCell:a,HeaderCell:i,Row:l,Table:c,limit:u}=t,[d,m]=f.useState({column:void 0,reverse:!1}),p=n.at(0),h=f.useMemo(()=>r??Object.keys(p??{}).map(w=>({name:w})),[p,r]),g=s??C9t,y=f.useMemo(()=>{const w=n.map(C=>({data:C,key:C.key??Math.random().toString(36).substring(7)}));return d.column&&w.sort((C,S)=>g(C.data[d.column],S.data[d.column])*(d.reverse?-1:1)),w.slice(0,u||w.length)},[n,u,d,g]),v=i??k9t,x=c??S9t,b=l??E9t,_=a??M9t;return o.jsx("div",{className:"overflow-x-auto",children:o.jsxs(x,{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsx(b,{id:"_header",children:h.map((w,C)=>o.jsx(Z3e,{index:C,HeaderCell:v,setSortDescriptor:m,...w},w.name))})}),o.jsx("tbody",{children:y.map(w=>o.jsx(b,{id:w.key,className:B("group",$se,"border-subtlest border-t border-dashed !outline-none first:border-solid"),children:h.map(({name:C},S)=>o.jsx(_,{id:C,index:S,data:w.data,className:B("pr-sm align-text-top last:pr-0",$se,'group-data-[selected="true"]:first:border-l-super py-sm group-data-[selected="true"]:border-super group-data-[selected="true"]:bg-super/10 group-data-[selected="true"]:first:pl-xs group-data-[selected="true"]:last:pr-xs dark:group-data-[selected="true"]:bg-super/10 rounded-sm outline-none transition-all duration-300 ease-in-out group-data-[selected="true"]:first:border-l-2 group-data-[selected="true"]:last:border-r-2'),children:String(w.data[C])},C))},w.key))})]})})});X3e.displayName="ResponsiveTable";const Z3e=I.memo(({index:e,HeaderCell:t,setSortDescriptor:n,...r})=>{const s=f.useMemo(()=>o.jsx(Y3e,{name:r.name,setSortDescriptor:n}),[r.name,n]);return o.jsx(t,{index:e,id:r.name,data:r,SortButton:s,children:r.label??r.name},r.name)});Z3e.displayName="HeaderCellFactory";const EO=3,yM=I.memo(({children:e})=>o.jsx(D,{variant:"tinyRegular",color:"light",children:o.jsx("time",{className:"text-nowrap",children:e})}));yM.displayName="Timestamp";const J3e=I.memo(({source:e,includeRootLink:t=!0})=>{const{$t:n}=Z(),{trackEvent:r}=Ne(),s=f.useMemo(()=>({onClick(){r("click citation",{source:"hoverCard",citation_url:e.url})}}),[e.url,r]),a=f.useMemo(()=>({color:"light"}),[]);return o.jsx(Bg,{timestampComponent:e.timestamp?o.jsx(x3,{recentlyUpdatedLabel:n({defaultMessage:"just now",id:"I90sbWU03C"}),timestamp:e.timestamp,timestampProps:a,children:n({defaultMessage:"Updated",id:"xrk6zgu9jU"})}):null,linkProps:s,result:e,children:o.jsx(T9t,{url:t?e.url:void 0,children:o.jsx(hT,{label:`${e.id}`,className:"mb-xs"})})})});J3e.displayName="Citation";const T9t=({children:e,url:t,ref:n,...r})=>t!==void 0?o.jsx(Ge,{href:t,target:"_blank",rel:"noopener nofollow",ref:n,...r,children:e}):o.jsx("span",{ref:n,...r,children:e}),N9t=(e,t)=>{if(!e)return"";const n=new Date(e),r=new Date;return Math.abs(+n-+r)<1e3*60*60*24?new Intl.RelativeTimeFormat(t,{localeMatcher:"best fit",numeric:"auto",style:"long"}).format(0,"day"):n.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},eke=I.memo(({post:e})=>{const{locale:t}=Z(),{isMobileStyle:n}=xe(),r=f.useMemo(()=>e.timestamp?N9t(e.timestamp,t):"",[e.timestamp,t]);return o.jsx(H,{children:o.jsx(F3e,{query:e.headline,nofollow:!0,children:o.jsxs("span",{className:"group/post pb-xs cursor-pointer",children:[o.jsxs(D,{variant:n?"smallBold":"baseSemi",className:"mb-xs gap-sm flex items-baseline justify-between",children:[o.jsx("span",{className:"leading-snug duration-150",children:e.headline}),o.jsxs("div",{className:"flex translate-x-1 items-center gap-0.5",children:[e.timestamp&&!n&&o.jsx(H,{className:"gap-sm capitalize",children:o.jsx(yM,{children:r})}),o.jsx(ce,{icon:Kn,size:"sm",className:"text-quiet group-hover/post:text-foreground translate-y-1 opacity-75 duration-150 md:translate-y-0"})]})]}),o.jsxs(D,{variant:n?"small":"base",className:"text-pretty leading-tight",children:[o.jsx("span",{className:"opacity-75",children:e.text}),o.jsx("span",{className:"ml-xs inline-flex",children:e.sources.map((s,a)=>o.jsx("span",{className:"mr-xs",children:o.jsx(J3e,{source:s,includeRootLink:!1},s.id)},a))})]}),e.timestamp&&n&&o.jsxs(H,{className:"mt-sm gap-xs flex items-center capitalize",children:[o.jsx(Wm,{className:"text-quiet opacity-80",size:16}),o.jsx(yM,{children:r})]})]})})})});eke.displayName="Post";const tke=I.memo(({created:e,posts:t,title:n,variant:r})=>{const{$t:s}=Z(),[a,i]=f.useState(!0),[l,c]=f.useState(!1),{locale:u}=Z(),[d,m]=f.useState(Date.now());f.useEffect(()=>{const b=setInterval(()=>m(Date.now()),15e3);return()=>clearInterval(b)},[]);const p=Ms(),h=f.useMemo(()=>{if(!e||!p)return"";const b=Date.parse(e),_=d-b;let w=_/6e4,C="days";w<1?(w=_/1e3,C="seconds"):w<60?(w=_/6e4,C="minutes"):w<1440?(w=_/36e5,C="hours"):(w=_/864e5,C="days"),w=-Math.abs(Math.floor(w));const S=new Intl.RelativeTimeFormat(u,{localeMatcher:"best fit",numeric:"auto",style:"short"});return s({defaultMessage:"Updated {time}",id:"0aJxT29U/1"},{time:S.format(w,C)})},[e,d,s,u,p]),g=f.useMemo(()=>{if(!t?.length)return[];const b=t.flatMap(_=>_.sources).map(_=>[_.id,_]);return Object.values(Object.fromEntries(b))},[t]),y=f.useMemo(()=>g.map(b=>b.url),[g]),v=f.useCallback(()=>c(!0),[]),x=f.useCallback(()=>c(!1),[]);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsxs(H,{className:B("gap-xs px-md py-sm flex flex-wrap items-center justify-between",{"border-b":r!=="raised"}),children:[o.jsxs(D,{variant:"baseSemi",color:t.length>0?"super":"ultraLight",className:"gap-sm flex items-center",as:"h2",children:[o.jsx(I9t,{animate:t.length>0}),o.jsx("span",{children:n??s({defaultMessage:"What's Happening",id:"wVxgwE2ray"})})]}),o.jsx(yM,{children:h})]}),o.jsxs(H,{variant:r,className:B({"rounded-xl border":r==="raised"}),children:[o.jsx(zs,{transition:{ease:rn,duration:.2},children:o.jsx(Qr,{children:t.length===0?o.jsx(j9t,{}):o.jsx("ul",{className:"pb-md grid",children:t.slice(0,a?EO:t.length).map((b,_)=>o.jsx(ge.li,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{y:{ease:rn,duration:.2}},className:"mx-md border-subtlest py-md block border-b last:border-b-0 last:pb-0",children:o.jsx(eke,{post:b},_)},b.headline))})})}),t.length>0&&o.jsxs(o.Fragment,{children:[t.length>EO&&o.jsx(H,{className:"px-md",children:o.jsx(Q3e,{collapsed:a,setCollapsed:i,viewMoreText:s({defaultMessage:"View More",id:"QQSdHPJWXu"}),viewLessText:s({defaultMessage:"View Less",id:"UOYN/MXiOT"})})}),o.jsx("div",{className:"pb-md pl-md",children:o.jsxs(H,{as:"button",bgHover:"subtle",className:"gap-sm px-sm inline-flex items-center rounded-full border py-1.5",onClick:v,children:[o.jsx(tW,{sources:y,count:4}),o.jsxs(D,{variant:"tiny",color:"light",children:[g.length," Sources"]})]})})]})]})]}),o.jsx(SU,{isOpen:l,onClose:x,webResults:g})]})});tke.displayName="WhatsHappening";const j9t=()=>o.jsx(yn,{className:"px-md",children:o.jsx("div",{className:"divide-y",style:{maskImage:"linear-gradient(to bottom, black 50%, transparent)"},children:Array.from({length:EO}).map((e,t)=>o.jsx(A9t,{},t))})}),A9t=()=>o.jsxs(H,{className:"gap-sm py-md flex flex-col",children:[o.jsx(H,{className:"mb-sm h-2 w-4/5 rounded-full",variant:"subtle"}),o.jsx(H,{className:"h-2 w-3/5 rounded-full",variant:"subtle"}),o.jsx(H,{className:"h-2 w-3/5 rounded-full",variant:"subtle"}),o.jsx(H,{className:"h-2 w-2/5 rounded-full",variant:"subtle"})]}),nS=(e,t)=>t?{initial:{opacity:0},animate:{opacity:1},transition:{duration:1,repeat:1/0,repeatDelay:5,ease:la,delay:e}}:{opacity:1},I9t=({animate:e})=>o.jsx("svg",{viewBox:"0 0 576 512",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-super inline-block h-[1em] overflow-visible align-[-0.125em]",children:o.jsxs("g",{children:[o.jsx(ge.path,{d:"M99.8 69.4C110 77.8 111.4 93 103 103.2C68.6 144.7 48 197.9 48 256C48 314.1 68.6 367.3 103 408.8C111.4 419 110 434.1 99.8 442.6C89.6 451.1 74.5 449.6 66 439.4C24.8 389.6 0 325.7 0 256C0 186.3 24.8 122.4 66 72.6C74.4 62.4 89.6 61 99.8 69.4ZM476.3 69.4C486.5 61 501.6 62.4 510.1 72.6C551.3 122.4 576.1 186.4 576.1 256C576.1 325.6 551.3 389.6 510.1 439.4C501.7 449.6 486.5 451 476.3 442.6C466.1 434.2 464.7 419 473.1 408.8C507.4 367.3 528.1 314.1 528.1 256C528.1 197.9 507.5 144.7 473.1 103.2C464.7 93 466.1 77.9 476.3 69.4Z",fill:"currentColor",...nS(.3,e)}),o.jsx(ge.path,{...nS(.15,e),d:"M160 256C160 226.4 170 199.2 186.9 177.5C195 167 193.2 151.9 182.7 143.8C172.2 135.7 157.1 137.5 149 148C125.8 177.8 112 215.3 112 256C112 296.7 125.8 334.2 149 364C157.2 374.5 172.2 376.4 182.7 368.2C193.2 360 195 345 186.9 334.5C170 312.8 160 285.6 160 256Z",fill:"currentColor"}),o.jsx(ge.path,{...nS(.15,e),d:"M464 256C464 215.3 450.2 177.8 427 148C418.8 137.5 403.8 135.6 393.3 143.8C382.8 152 381 167 389.1 177.5C406 199.2 416 226.4 416 256C416 285.6 406 312.8 389.1 334.5C381 345 382.8 360.1 393.3 368.2C403.8 376.3 418.9 374.5 427 364C450.2 334.2 464 296.7 464 256Z",fill:"currentColor"}),o.jsx(ge.path,{...nS(0,e),d:"M259.716 227.716C252.214 235.217 248 245.391 248 256C248 266.609 252.214 276.783 259.716 284.284C267.217 291.786 277.391 296 288 296C298.609 296 308.783 291.786 316.284 284.284C323.786 276.783 328 266.609 328 256C328 245.391 323.786 235.217 316.284 227.716C308.783 220.214 298.609 216 288 216C277.391 216 267.217 220.214 259.716 227.716Z",fill:"currentColor"})]})}),R9t=({hype:e,title:t,variant:n})=>o.jsx(tke,{title:t,created:e?.created,posts:e?.posts??ue,variant:n}),P9t=({hype:e,variant:t="subtler",className:n})=>{const{$t:r}=Z(),s=r({defaultMessage:"Latest News",id:"BlFeZAX10O"});return o.jsx(Or,{children:o.jsx(H,{variant:t==="raised"?"transparent":"subtler",className:B("rounded",n),children:o.jsx(R9t,{variant:t!=="raised"?"transparent":t,hype:e,title:s})})})},O9t=({eventId:e,enabled:t})=>We({queryKey:O3e(e??""),queryFn:()=>L3e({eventId:e??""}),enabled:!!e&&!!t,retry:!1,staleTime:5*60*1e3}),Yrn=({league:e,story:t})=>o.jsx(rke,{league:e,story:t,children:o.jsxs(H,{className:"bg-subtle hover:bg-subtler gap-sm py-xs flex w-fit place-items-center rounded-full pl-3 pr-2 transition-colors",variant:"subtle",children:[o.jsx(D,{variant:"smallBold",color:"light",children:o.jsx(pe,{defaultMessage:"Watch the highlights",id:"Z2uaDmB5pt"})}),o.jsx(nke,{story:t,className:"p-two size-9",border:!1})]})}),nke=({story:e,className:t,border:n=!0})=>{const r=e?.storyThumbnailUrls?.find(s=>s.aspectRatio==="1x1")?.url||e?.storyThumbnailUrl;return o.jsx(H,{variant:"super",className:B("group rounded-full",{"p-one sm:p-three":n},t),children:o.jsx(H,{className:B({"p-two rounded-full bg-white dark:bg-black":n}),children:o.jsx(H,{className:"relative overflow-hidden rounded-full",children:o.jsx("img",{src:r,alt:e.title||"",className:B("aspect-square object-cover transition-opacity group-hover:opacity-80"),loading:"lazy"})})})})},rke=({league:e,story:t,children:n})=>{const{trackEvent:r}=Ne(),{inApp:s}=Vo(),a=f.useCallback(()=>{r("sports wsc story clicked",{eventId:t.id,league:e})},[r,e,t?.id]);return o.jsx("a",{href:t.storyUrl,target:s?void 0:"_blank",onClick:a,className:"cursor-pointer",children:n})};function L9t({className:e,league:t,story:n}){return n?.id?o.jsx(rke,{league:t,story:n,children:o.jsx(nke,{story:n,className:e})}):null}function D9t({type:e,season:t,imgUrl:n,eventId:r}){Hm("header");const{$t:s}=Z(),a="#84754E",{data:i}=O9t({eventId:r,enabled:!!r}),l=f.useCallback(p=>{if(!p)return null;const h=new Date(p+"T00:00:00");return isNaN(h.getTime())?null:h.toLocaleDateString("en-US",{month:"short",day:"numeric"})},[]),c=l(t.start_date),u=l(t.end_date),d=f.useMemo(()=>[c&&u?s({defaultMessage:"{startDate} - {endDate},",id:"uLiKxHxStJ"},{startDate:c,endDate:u}):c||u,t.year].filter(Boolean).join(" "),[c,u,t.year,s]),m=t?e==="season"?s({defaultMessage:"{year} Season",id:"oERTY0/4Zj"},{year:t.year}):e==="tournament"?d:null:null;return o.jsxs("div",{className:"gap-sm p-md relative flex h-[120px] items-end overflow-hidden rounded-xl",style:{"--header-bg":a},children:[o.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-xl dark:after:absolute dark:after:inset-0 dark:after:rounded-xl dark:after:border dark:after:border-white/10",children:o.jsx(kU,{className:"-inset-xl !absolute !bg-[var(--header-bg,#84754E)] ![--dot-bg:var(--header-bg,#84754E)]",dotClassName:"!text-[white]",highlightClassName:"!bg-white/10"})}),o.jsx("div",{className:"gap-md flex items-end md:items-center",children:o.jsxs("div",{className:"gap-sm relative flex flex-col items-start",children:[o.jsx("img",{className:"relative w-[180px]",src:n,alt:"Laver Cup Logo"}),o.jsx(D,{variant:"small",color:"white",className:"leading-tight opacity-80",children:m}),i&&o.jsx(L9t,{league:"atp",story:i})]})})]})}function ske({src:e,name:t,onBroken:n,className:r}){const[s,a]=f.useState(void 0),i=f.useRef(null),l=()=>{a(!0),n?.()},c=()=>{i.current&&i.current.naturalHeight>0&&a(!1)};return f.useEffect(()=>{i.current&&(i.current.complete&&i.current.naturalHeight===0?(a(!0),n?.()):a(!1))},[i,n]),s||!e?o.jsxs("svg",{viewBox:"0 0 62 62",children:[o.jsx("mask",{id:"mask0_634_1278",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"62",height:"62",children:o.jsx("path",{d:"M31 62C48.1208 62 62 48.1208 62 31C62 13.8792 48.1208 0 31 0C13.8792 0 0 13.8792 0 31C0 48.1208 13.8792 62 31 62Z"})}),o.jsxs("g",{mask:"url(#mask0_634_1278)",children:[o.jsx("path",{d:"M31 62C48.1208 62 62 48.1208 62 31C62 13.8792 48.1208 0 31 0C13.8792 0 0 13.8792 0 31C0 48.1208 13.8792 62 31 62Z",className:"fill-subtle"}),o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31 44C39.8366 44 47 36.165 47 26.5C47 16.835 39.8366 9 31 9C22.1634 9 15 16.835 15 26.5C15 36.165 22.1634 44 31 44ZM-11 70.5C-11 57.1768 1.57462 45.9165 18.8426 42.2547C22.1373 45.2176 26.3757 47 31 47C35.6243 47 39.8627 45.2176 43.1574 42.2547C60.4254 45.9165 73 57.1768 73 70.5C73 86.7924 54.196 100 31 100C7.80404 100 -11 86.7924 -11 70.5Z",className:"fill-foreground opacity-10"})]})]}):o.jsx("img",{ref:i,src:e,className:B(r,{"opacity-0":s===void 0}),alt:t,onError:l,onLoad:c})}const Qrn=({style:e,...t})=>o.jsx("div",{className:"bg-subtle relative size-10 shrink-0 overflow-hidden rounded-full md:size-[60px]",style:e,children:o.jsx(ske,{...t,className:"block size-full object-cover object-center"})}),F9t=(e,t,n)=>{if(!e||!t)return null;try{return e.toLocaleString(n,{style:"currency",currency:t,notation:"compact",compactDisplay:"short"})}catch{return null}},U9t=({title:e=!0,tournamentInfo:t})=>{const{$t:n}=Z(),{season:r}=t,{info:s,competition:a}=r,{isMobileStyle:i}=xe(),l=f.useMemo(()=>[{label:n({defaultMessage:"Location",id:"rvirM238ZE"}),value:s?.complex},{label:n({defaultMessage:"Surface",id:"/AElfCMvxg"}),value:s?.surface_text},{label:n({defaultMessage:"Competitors",id:"GnmePy5BjJ"}),value:s?.number_of_competitors},{label:n({defaultMessage:"Prize Money",id:"bFVLOCMwiJ"}),value:F9t(s?.prize_money,s?.prize_currency)},{label:n({defaultMessage:"Level",id:"y1Qr811Pys"}),value:a?.level_text}].filter(c=>c.value!=null&&c.value!==""),[s,a,n]);return i?o.jsx("div",{children:o.jsx(V9t,{children:l.map(c=>o.jsx(vM,{...c},c.label))})}):o.jsx(sn,{header:e&&o.jsx(D,{variant:"baseSemi",className:"ml-md mb-sm",children:n({defaultMessage:"Tournament Info",id:"Z/95hzDc2J"})}),children:o.jsx(B9t,{children:l.map(c=>o.jsx(vM,{...c},c.label))})})},B9t=({children:e})=>o.jsx("div",{className:"p-md gap-sm flex flex-col overflow-hidden",children:o.jsx(H,{className:"gap-sm grid grid-cols-[1fr_1fr_1fr] lg:grid-cols-[1fr_1fr_1fr_1fr]",children:e})}),V9t=({children:e})=>o.jsx("div",{className:"gap-sm -mx-md scrollbar-none flex overflow-x-auto",children:o.jsx("div",{className:"px-md gap-sm flex",children:e})});function vM({label:e,value:t,className:n}){const{isMobileStyle:r}=xe(),s=r?sn:H,a=r?"py-sm px-[12px]":void 0;return t==null||t===""?null:o.jsxs(s,{className:B(a,n),children:[o.jsx(D,{variant:r?"tinyRegular":"small",color:"light",className:r?"whitespace-nowrap":void 0,children:e}),o.jsx(D,{variant:"smallBold",children:t})]})}function $9t({teams:e}){const{europe:t,world:n}=ew();return o.jsxs(H,{className:"gap-lg mt-lg flex flex-col",children:[o.jsxs(H,{children:[o.jsx(Wse,{name:"europe",color:t,prevWinner:!0}),o.jsx(Hse,{config:e.europe,color:t,team:"europe"})]}),o.jsxs(H,{children:[o.jsx(Wse,{name:"world",color:n}),o.jsx(Hse,{config:e.world,color:n,team:"world"})]})]})}const Wse=({name:e,color:t,prevWinner:n})=>{const r=e==="europe"?"Europe":"World",{$t:s}=Z();return o.jsxs("div",{className:"gap-sm mb-sm pl-sm md:pl-md flex items-center",children:[o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx("div",{className:"flex size-6 items-center justify-center rounded-md",style:{backgroundColor:t},children:o.jsx("img",{src:ike[e],alt:e})}),o.jsx(D,{variant:"baseSemi",children:s({defaultMessage:"Team {name}",id:"HTz+p5sZsy"},{name:r})})]}),n&&o.jsxs(H,{className:"px-sm py-xs gap-xs ml-auto flex items-center rounded-full border",children:[o.jsx(ce,{icon:zM,size:"2xs",className:"opacity-50"}),o.jsx(D,{variant:"tinyRegular",color:"light",children:s({defaultMessage:"Defending Champion",id:"4+F8AQjH+h"})})]})]})},Hse=({config:e,color:t,team:n})=>{const{$t:r}=Z(),{captain:s,viceCaptain:a,players:i}=e;return o.jsxs(sn,{className:"p-md relative overflow-hidden border-none",children:[o.jsx("div",{className:"absolute inset-0 opacity-10 dark:opacity-25",style:{backgroundColor:t,maskImage:"linear-gradient(to bottom right, black, transparent 40%, rgba(0, 0, 0, 0))"}}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border opacity-10",style:{borderColor:t,maskImage:"linear-gradient(to bottom right, black, transparent 40%, rgba(0, 0, 0, 0))"}}),o.jsx(H,{className:"rounded-inherit absolute inset-0 border"}),o.jsxs("div",{className:"relative",children:[o.jsxs(W9t,{children:[o.jsx(vM,{label:r({defaultMessage:"Captain",id:"n47Ce9YDZE"}),value:s,className:"gap-sm items-center !bg-transparent md:flex"}),o.jsx(vM,{label:r({defaultMessage:"Vice Captain",id:"M46+waT3VZ"}),value:a,className:"gap-sm items-center !bg-transparent md:flex"})]}),o.jsx(H,{className:"gap-md flex flex-col",children:i.map(l=>o.jsx(H9t,{...l,team:n},l.name))})]})]})},W9t=({children:e})=>{const{isMobileStyle:t}=xe();return t?o.jsx(H,{className:"pb-md mb-md gap-sm flex border-b",children:e}):o.jsx(H,{className:"pb-md mb-md gap-lg flex items-center border-b",children:e})},zse='path(evenodd, "M -10 -10 L 58 -10 L 58 68 L -10 68 Z M 18 40 Q 14 40 14 44 L 14 56 Q 14 60 18 60 L 30 60 Q 34 60 34 56 L 34 44 Q 34 40 30 40 Z")',H9t=({name:e,img:t,rank:n,country:r,description:s,team:a})=>{const{europe:i,world:l}=ew(),c=a==="europe"?i:l;return o.jsxs(H,{className:"grid grid-cols-[1fr_auto] gap-3",children:[o.jsxs(H,{className:"size-xl relative translate-y-1",children:[o.jsx("div",{className:"shadow-overlay aspect-square overflow-hidden rounded-full",style:{clipPath:zse,WebkitClipPath:zse},children:o.jsx(ske,{src:t,name:e,className:"block size-full"})}),o.jsx(Cg,{countryCode:r,className:"shadow-subtle absolute left-1/2 top-full w-4 -translate-x-1/2 -translate-y-1/2 rounded-sm"})]}),o.jsxs(H,{children:[o.jsxs(H,{className:"gap-sm flex items-center justify-start",children:[o.jsx(D,{variant:"baseSemi",children:e}),o.jsxs(D,{variant:"tiny",color:"light",className:"relative rounded-md px-[6px] py-0.5",children:[o.jsx("span",{className:"rounded-inherit mix-blend-hardlight absolute inset-0 opacity-10 dark:opacity-20",style:{backgroundColor:c}}),o.jsx("span",{className:"relative inline-flex translate-y-px",style:{color:c},children:n})]})]}),o.jsx(D,{variant:"small",color:"light",children:s})]})]})},ake=I.memo(({children:e,maxFaces:t=3,showMore:n=!0,clickable:r=!1,size:s="medium",onAvatarClick:a,backgroundClass:i})=>{const l=I.Children.count(e);return o.jsxs(H,{onClick:r?a:void 0,bgHover:r?"subtler":void 0,className:B("group flex items-center",{"p-xs cursor-pointer rounded-full transition-all":r}),children:[I.Children.map(e,(c,u)=>u<t?o.jsx(H,{variant:"background",className:B("rounded-full group-hover:bg-transparent",{"relative transition-all duration-200 ease-in-out":u!==0,"p-two group-hover:-ml-xs -ml-[10px]":u!==0&&s==="small","p-two group-hover:-ml-sm -ml-[16px]":u!==0&&s==="medium"},i),children:o.jsx("div",{children:c})},u):null),n&&l>t&&o.jsx(H,{children:o.jsxs(D,{variant:"smallCaps",color:"light",className:"px-xs",children:["+",l-t]})})]})});ake.displayName="AvatarList";const Gse=({score:e,team:t,players:n,last:r,winner:s,loser:a})=>{const{$t:i}=Z(),{isMobileStyle:l}=xe(),c=ike[t.toLowerCase()],{europe:u,world:d}=ew(),m=t.toLowerCase()==="europe"?u:d;return o.jsxs(sn,{className:B("relative flex items-center overflow-hidden border-none",{"flex-row-reverse":r,"gap-sm p-[12px]":l,"p-md gap-md":!l,"opacity-50":a}),children:[o.jsxs("div",{className:"rounded-inherit absolute inset-0",children:[o.jsx("div",{className:"rounded-inherit absolute inset-0 opacity-10 dark:opacity-25",style:{backgroundColor:m,maskImage:r?"linear-gradient(to right, transparent, black)":"linear-gradient(to left, transparent, black)"}}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border opacity-10",style:{borderColor:m}})]}),o.jsxs("div",{className:B("relative flex aspect-square w-12 items-center justify-center rounded-md",{hidden:l}),style:{backgroundColor:m},children:[o.jsx("img",{src:c,alt:t,className:"relative h-auto w-10 object-contain"}),s&&o.jsx(H,{className:B("p-xs absolute top-0 z-10 -translate-y-1/3 rounded-full border",{"left-0 -translate-x-1/3":!r,"right-0 translate-x-1/3":r}),style:{borderColor:"white",borderWidth:1,backgroundColor:m},children:o.jsx(zM,{size:15,color:"white"})})]}),o.jsx("div",{className:"gap-sm relative flex flex-col items-center",children:o.jsxs("div",{className:B("gap-xs flex flex-col",{"items-end":r,"items-start":!r}),children:[o.jsx(H,{className:"gap-xs flex items-center",children:o.jsx(D,{variant:"smallBold",className:"whitespace-nowrap",children:i({defaultMessage:"Team {team}",id:"5gr4uNrlJ2"},{team:t})})}),n&&o.jsx(H,{className:"gap-sm flex flex-col",children:o.jsx(ake,{size:"small",backgroundClass:"bg-transparent",showMore:!1,maxFaces:6,children:n.filter(p=>p.img).map(p=>o.jsx(wt,{size:"small",user:p.img??"",className:"shadow-overlay rounded-full bg-white",showBackground:!1},p.img))})})]})}),o.jsxs("div",{className:B("-mt-xs relative flex flex-col items-center",{"mr-sm ml-auto":!r,"ml-sm mr-auto":r}),children:[o.jsx(D,{variant:l?"section-title":"page-title",className:"leading-none",color:e>0?"default":"light",children:o.jsx(ci,{animated:!0,value:e,format:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}})}),o.jsx(D,{variant:l?"tinyRegular":"small",color:"light",className:B("leading-none",{"-mt-xs":!l}),children:i({defaultMessage:"{count, plural, one {point} other {points}}",id:"OTgg6EBiyt"},{count:e})})]})]})};function z9t({scoreEurope:e,scoreWorld:t,teams:n}){const{$t:r}=Z(),{europe:s,world:a}=ew(),i=e>=13||t>=13,l=i&&e>t,c=i&&t>e;return o.jsxs(H,{className:"grid grid-cols-[1fr_auto_1fr] items-center",children:[o.jsx(Gse,{loser:c,winner:l,score:e,team:r({defaultMessage:"Europe",id:"X3AIiKlYIf"}),players:n?.europe.players}),o.jsxs(H,{className:"relative z-10 mx-[-12px] flex size-8 items-center justify-center rounded-full shadow-md",variant:"raised",children:[o.jsxs("div",{className:"absolute inset-0 opacity-25",children:[o.jsx("div",{className:"absolute inset-0 rounded-full border",style:{borderColor:a,maskImage:"linear-gradient(to right, transparent, black)"}}),o.jsx("div",{className:"absolute inset-0 rounded-full border",style:{borderColor:s,maskImage:"linear-gradient(to left, transparent, black)"}})]}),o.jsx(D,{variant:"smallCaps",color:"light",className:"relative text-center",children:"VS"})]}),o.jsx(Gse,{loser:l,winner:c,score:t,team:r({defaultMessage:"World",id:"jqdzk6QquP"}),players:n?.world.players,last:!0})]})}const oke="laver-cup-client-page",G9t=async e=>{const{error:t,data:n}=await se.GET("/rest/sports/tennis/atp/tournaments/lavercup",oke,{params:{query:{year:e}},timeoutMs:0});if(t)throw new Ce("API_CLIENTS_ERROR",{cause:t,details:{year:e}});return n},rS={europe:{light:"#003359",dark:"#006CBD"},world:{light:"#782327",dark:"#C53A40"}},ew=()=>{const{colorScheme:e}=Wr();return{europe:e==="dark"?rS.europe.dark:rS.europe.light,world:e==="dark"?rS.world.dark:rS.world.light}},ike={europe:"https://lavercup.com/wp-content/themes/lavercup_spark/assets/graphics/trophy-europe-no-text.svg",world:"https://lavercup.com/wp-content/themes/lavercup_spark/assets/graphics/trophy-world-no-text.svg"},q9t=()=>+(Nt().get("year")??new Date().getFullYear());function Xrn(){const e=q9t(),{data:t,isLoading:n}=We({...tb,queryFn:()=>G9t(e),queryKey:["/sports/atp/tournaments/lavercup"]}),{data:r}=We({...tb,queryFn:()=>D3e({league:`${e} Laver Cup`,reason:oke}),queryKey:["/sports/hype/lavercup"]}),{$t:s}=Z(),a=f.useMemo(()=>({tournamentInfo:{title:s({defaultMessage:"Tournament Info",id:"Z/95hzDc2J"}),id:"tournamentInfo",ref:f.createRef(),show:!0},schedule:{title:s({defaultMessage:"Schedule",id:"hGQqkWwmJD"}),id:"schedule",ref:f.createRef(),show:!!t?.events&&t?.events?.length>0},participants:{title:s({defaultMessage:"Participants",id:"zx0myyxie/"}),id:"participants",ref:f.createRef(),show:!!t?.teams},latestNews:{title:s({defaultMessage:"Latest News",id:"BlFeZAX10O"}),id:"latestNews",show:!0,ref:f.createRef()}}),[s,t?.teams,t?.events]),i=f.useMemo(()=>Object.values(a),[a]);if(!t?.tournamentInfo||n)return null;const l=t.events.map(p=>p.team_1.id),c=t.events.map(p=>p.team_2.id),u=t.brands.filter(p=>c.includes(String(p.teamId))),d=t.brands.filter(p=>l.includes(String(p.teamId))),m={world:u,europe:d};return o.jsx("div",{children:o.jsxs(R3e,{entries:i,children:[o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsx(D9t,{season:t.tournamentInfo.season,league:"atp",type:"tournament",imgUrl:"/static/images/sports/atp/laver-cup-logo.svg",eventId:"lavercup"}),o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsx(U9t,{tournamentInfo:t.tournamentInfo,title:!1}),o.jsx(z9t,{scoreEurope:t.scoreEurope,scoreWorld:t.scoreWorld,teams:t.teams})]})]}),o.jsx(J6,{ref:a.schedule?.ref,show:a.schedule?.show,children:o.jsx(FOt,{events:t.events,players:m})}),o.jsx(J6,{ref:a.participants?.ref,show:a.participants?.show,children:o.jsx($9t,{teams:t.teams})}),o.jsx(J6,{show:a.latestNews?.show,ref:a.latestNews?.ref,children:o.jsx(P9t,{hype:r??null,variant:"raised"})}),o.jsx(c3e,{attributions:[s({defaultMessage:"Data: {provider}",id:"dSwg4JBLt6"},{provider:"Sportradar"})]})]})})}const K9t=e=>{try{const t=e.split("-").map(Number);if(t.length!==3||t.some(isNaN))return null;const[n,r,s]=t;return new Date(n,r-1,s)}catch{return null}},Y9t=({selectedDate:e,eventsByDay:t,setSelectedDate:n})=>{const r=f.useMemo(()=>Object.keys(t),[t]),{$t:s}=Z();return!r.length||r?.length<=1?o.jsx(D,{variant:"baseSemi",className:"ml-md mb-sm",children:s({defaultMessage:"Schedule",id:"hGQqkWwmJD"})}):o.jsx("div",{className:"mb-sm gap-sm flex flex-row justify-around",children:r.map(a=>{const i=K9t(a);return i?o.jsx(Q9t,{date:i,selected:e.toDateString()===i.toDateString(),onClick:()=>n(i)},a):null})})},Q9t=({date:e,selected:t,onClick:n})=>{const r=e.toLocaleDateString("en-US",{weekday:"short"}),s=e.toLocaleDateString("en-US",{day:"numeric"}),{isMobileStyle:a}=xe();return o.jsxs("button",{className:"group flex flex-1 appearance-none flex-col items-center gap-1 rounded-lg",onClick:n,children:[o.jsx(H,{className:B("flex items-center justify-center rounded-full duration-150",{"group-hover:bg-subtler":!t,"size-8":a,"size-10":!a}),variant:t?"textColor":"transparent",children:o.jsx(D,{variant:a?"baseSemi":"section-title",color:t?"defaultInverted":"default",children:s})}),o.jsx(D,{variant:t?"tiny":"tinyRegular",color:t?"default":"light",children:r})]})},MO=({value:e,digitClassName:t,className:n})=>{const[r,s]=f.useState(!1),a=String(e).split("");return f.useEffect(()=>{s(!0)},[]),o.jsx("div",{className:B("flex",n),children:a.map((i,l)=>isNaN(parseInt(i))?o.jsx("span",{className:t,children:i},l):o.jsx(X9t,{className:t,value:parseInt(i),animate:r,idx:l,hasValue:+e.replace(/[^\d.-]/g,"")>0},l))})},X9t=({value:e,className:t,hasValue:n,animate:r,idx:s})=>{const[a,{height:i}]=ql();return o.jsxs("div",{className:"relative overflow-hidden",style:{maskImage:"linear-gradient(to bottom, transparent, black 4px, black calc(100% - 4px), transparent)"},children:[o.jsx("div",{className:"pointer-events-none flex opacity-0",ref:a,children:o.jsx("span",{className:t,children:"0"})}),o.jsx("div",{className:"absolute inset-0",children:o.jsx(ge.div,{initial:{opacity:.25},animate:{opacity:r&&n?1:void 0,y:r?-1*e*i:void 0},className:"flex flex-col",transition:{y:{ease:rn,duration:1,delay:s*.1},opacity:{ease:"linear",duration:.5}},children:Array.from({length:10}).map((l,c)=>o.jsx("span",{className:B("flex",t),children:c},c))})})]})};function qse(e){return!isNaN(new Date(e).getTime())}function Kse(e){const t=e+"+00:00";return qse(t)?t:qse(e)?e:null}function Z9t(e){if(typeof e.startDate=="string")return{full:Kse(e.startDate)??"",dateType:"UTC",year:0,month:0,date:0,hour:0,minute:0};const t=e.startDate?.find(r=>r.dateType==="UTC");if(!t)return;const n=Kse(t.full);if(n)return{...t,full:n}}function Zrn(e){return!isNaN(e.hour)&&!isNaN(e.minute)}function J9t(e){const t=e?.tvStations?.[0]?.name;switch(t){case"Amazon Prime Video":return"Prime Video";default:return t}}function eOt(e){return e?.venue?.name||""}function tOt(e){return[e?.venue?.city,e?.venue?.state?.abbreviation].filter(Boolean).join(", ")}function nOt(e,t){const n=e?.[0]?.forecasts?.[0],r=n?.condition;return{temperature:n?.temperature?.find(a=>a.temperatureScaleId===(t?2:1)),weatherCondition:r}}function s0(e){return typeof e.eventStatus=="string"?e.eventStatus==="live":e?.eventStatus?.eventStatusId===2}function Um(e){return typeof e.eventStatus=="string"?e.eventStatus==="final":e.eventStatus?.eventStatusId===4}function Jrn(e){return s0(e)||Um(e)}function esn(e,t){return G_(e.teams)[1]?.teamId===t.teamId}function lke(e,t=4){return t===2?e.period===1&&e.minutes===0&&e.seconds===0&&e.isActive===!1:e.period===2&&e.minutes===0&&e.seconds===0&&e.isActive===!1}function tsn(e){return e.status==="live"}function nsn(e){return e.status==="final"}function rsn(e){return"id"in e}function ssn(e,t){return new Date(e.datetime).toLocaleString(t,{month:"short",day:"numeric"})}const rOt=ot({perplexitySports:{defaultMessage:"{pplx} Sports",id:"K65/hgZBjY"},teamVsTeam:{defaultMessage:"{team1} vs {team2}",id:"lyaxuodMxh"},nfl:{defaultMessage:"NFL",id:"Lv6pQppd/V"},nba:{defaultMessage:"NBA",id:"D+pbqZQpNj"},wnba:{defaultMessage:"WNBA",id:"avDAamqQm4"},ncaam:{defaultMessage:"NCAAM",id:"gC9NSK3/R6"},ncaaw:{defaultMessage:"NCAAW",id:"eERAIF8MIh"},cricket:{defaultMessage:"Cricket",id:"hJ+aKKEPPW"},conference:{defaultMessage:"Conference",id:"E0mu0BuhfL"},division:{defaultMessage:"Division",id:"dETzL9JuSD"},league:{defaultMessage:"League",id:"P3y4FpCWKK"},nflByeNote:{defaultMessage:"Plays lowest remaining seed",id:"ivzjhdMH5D"},playoffBracket:{defaultMessage:"Playoff Bracket",id:"5T8u2ZRrKO"},watchOn:{defaultMessage:"Watch on {network}",id:"yCXRhFX8Qz"},overview:{defaultMessage:"Overview",id:"9uOFF3L8kp"},highlights:{defaultMessage:"Highlight Videos",id:"J4ZW4MNVky"},moreAboutNfl:{defaultMessage:"More about the NFL",id:"JGDrER55OW"},pregameHighlights:{defaultMessage:"Pregame Highlights",id:"pTASonM2gu"},gameHighlights:{defaultMessage:"Game Highlights",id:"nX0XrAiLIA"},final:{defaultMessage:"Final",id:"6/JzkWi0di"},videos:{defaultMessage:"Videos",id:"4XfMuxy3FO"},playerPhotos:{defaultMessage:"{player} Photos",id:"YRfYXYpNfE"},noInjuries:{defaultMessage:"No Team Injuries",id:"9D6SP/NB3G"},seasonLeaders:{defaultMessage:"Season Leaders",id:"lT3vL7pgxM"},gameLeaders:{defaultMessage:"Game Leaders",id:"BpPX7CGEMm"},bettingOdds:{defaultMessage:"Betting Odds",id:"taELAJbik0"},teamComparisons:{defaultMessage:"Team Comparison",id:"KdREfWZdzQ"},seasonComparisons:{defaultMessage:"Season Comparison",id:"1fVXZNAk6A"},seasonPerformance:{defaultMessage:"Season Performance",id:"+XGEnxB3qU"},injuries:{defaultMessage:"Injuries",id:"+9VW01o/qa"},nextGame:{defaultMessage:"Next Game",id:"GHv/zzzbyP"},gameWinnerOdds:{defaultMessage:"Game Winner Odds",id:"Ar4Hgi5LK/"},offense:{defaultMessage:"Offense",id:"gkhnHmdS3n"},pointsPerGame:{defaultMessage:"Points Per Game",id:"oiTKA0iiEO"},totalYardsPerGame:{defaultMessage:"Total Yards Per Game",id:"1hUUAbKwNU"},passingYardsPerGame:{defaultMessage:"Passing Yards Per Game",id:"NZ1ECBKywu"},rushingYardsPerGame:{defaultMessage:"Rushing Yards Per Game",id:"XaZf8sSKrF"},thirdDownConversionRate:{defaultMessage:"Third Down Conversion Rate",id:"ffvMztEyfa"},redZoneEfficiency:{defaultMessage:"Red Zone Efficiency",id:"KD1EYvEBXL"},freeThrowsMade:{defaultMessage:"Free Throws Made",id:"qngxYnoujX"},fieldGoalsMade:{defaultMessage:"Field Goals Made",id:"8hkrjZ6IYu"},turnovers:{defaultMessage:"Turnovers",id:"ix10Ldc+00"},blocks:{defaultMessage:"Blocked Shots",id:"H+onZtcuVa"},steals:{defaultMessage:"Steals",id:"6WYTxwolV8"},threePointFieldGoalsMade:{defaultMessage:"Three Point Field Goals Made",id:"sHR4TS9YOq"},defense:{defaultMessage:"Defense",id:"7Y+mK49r3z"},pointsAllowed:{defaultMessage:"Points Allowed",id:"oIj9CdpmXY"},turnoverDiff:{defaultMessage:"Turnover Diff",id:"XAiSFr028u"},pointsAllowedPerGame:{defaultMessage:"Points Allowed Per Game",id:"crP3Q4G1sg"},assistsPerGame:{defaultMessage:"Assists Per Game",id:"iVrCmaL1xp"},reboundsPerGame:{defaultMessage:"Rebounds Per Game",id:"luHpkidK/P"},fieldGoalPercentage:{defaultMessage:"Field Goal Percentage",id:"eFfteQzdQj"},blocksPerGame:{defaultMessage:"Blocks Per Game",id:"GZdk7v9wsc"},stealsPerGame:{defaultMessage:"Steals Per Game",id:"AsfNOOP1Pv"},threePointPercentage:{defaultMessage:"Three Point Percentage",id:"47T2zZRSFt"},freeThrowPercentage:{defaultMessage:"Free Throw Percentage",id:"/G3PY4IYf7"},yardsAllowedPerGame:{defaultMessage:"Yards Allowed Per Game",id:"B15PuOjR7R"},passingYardsAllowed:{defaultMessage:"Passing Yards Allowed",id:"0HGZ3V81cB"},rushingYardsAllowed:{defaultMessage:"Rushing Yards Allowed",id:"ftA+LXAEQL"},firstDowns:{defaultMessage:"First Downs",id:"aHqkLRqHjr"},penalties:{defaultMessage:"Penalties",id:"fa38C8rLbM"},penaltyYards:{defaultMessage:"Penalty Yards",id:"ZC7MShyuR1"},possessionMinutes:{defaultMessage:"Possession Minutes",id:"khpuL1ieoV"},fumblesLost:{defaultMessage:"Fumbles Lost",id:"IzuROyqz+7"},interceptionsThrown:{defaultMessage:"Interceptions Thrown",id:"tmQq6pHbYi"},other:{defaultMessage:"Other",id:"/VnDMl81rh"},totalYards:{defaultMessage:"Total Yards",id:"veZmYTt6MN"},points:{defaultMessage:"Points",id:"P0PLlQxVoe"},turnoversPerGame:{defaultMessage:"Turnovers Per Game",id:"uTgBwtAPGV"},foulsPerGame:{defaultMessage:"Fouls Per Game",id:"SMqdG+QmGB"},penaltiesPerGame:{defaultMessage:"Penalties Per Game",id:"9wKTlQSR/j"},penaltyYardsPerGame:{defaultMessage:"Penalty Yards Per Game",id:"Jm5WpbiViO"},gamePreview:{defaultMessage:"Game Preview",id:"GvobedfNcN"},gameSummary:{defaultMessage:"Game Summary",id:"+eeGQlcxzW"},gameLive:{defaultMessage:"LIVE",id:"UqyNCCygYW"},carries:{defaultMessage:"{value} carries",id:"rq9+96YlFa"},receptions:{defaultMessage:"{value} rec",id:"sTvPmiSZD7"},pointsStat:{defaultMessage:"{value} points",id:"UrDn6NGZfb"},reboundsStat:{defaultMessage:"{value} rebounds",id:"9vdJ9I7bdt"},assists:{defaultMessage:"Assists",id:"PqEAty/m8X"},rebounds:{defaultMessage:"Rebounds",id:"VXRs2esXLO"},assistsStat:{defaultMessage:"{value} assists",id:"bWLYwKNgJ3"},passingYards:{defaultMessage:"Passing Yards",id:"aQGqkCWSsl"},rushingYards:{defaultMessage:"Rushing Yards",id:"MpZ23vuQex"},receivingYards:{defaultMessage:"Receiving Yards",id:"GbfiEHr37J"},bettingOddsSpread:{defaultMessage:"Spread",id:"B7hDsYrvQe"},bettingOddsTotal:{defaultMessage:"Total",id:"MJ2jZQxQnT"},bettingOddsMoneyline:{defaultMessage:"Money Line",id:"kW0GAibgTH"},injuryReport:{defaultMessage:"Injury Report",id:"/YN/gLAPJU"},player:{defaultMessage:"Player",id:"1AGL1rdLFR"},position:{defaultMessage:"Position",id:"U6qGuOVs+L"},injury:{defaultMessage:"Injury",id:"PQiOxuIu/I"},status:{defaultMessage:"Status",id:"tzMNF3jWoU"},noRelatedGames:{defaultMessage:"No related games",id:"Ot5mpNSKsp"},teamComparison:{defaultMessage:"Team Comparison",id:"KdREfWZdzQ"},noUpdatesAvailable:{defaultMessage:"No updates available",id:"0Pg/1iJOgA"},halftime:{defaultMessage:"Halftime",id:"iC0AL294Dr"},viewMatchDetails:{defaultMessage:"View Game Details",id:"jBJqA9z9lD"},viewStandings:{defaultMessage:"View Standings",id:"oaPWiK0oYi"},followGameLive:{defaultMessage:"Follow Game Live",id:"CWFVI1BPrZ"},latestNews:{defaultMessage:"Latest News",id:"BlFeZAX10O"},imageSource:{defaultMessage:"Image source: {source}",id:"O/d/1HvfyG"},week:{defaultMessage:"Week {week}",id:"RE27WbGe9C"},total:{defaultMessage:"T",id:"sjlqAC/nrs"},team:{defaultMessage:"Team",id:"wsUmh9XWBm"},sources:{defaultMessage:"Data: Stats Perform  Player Photos: Associated Press",id:"g0CN3T/ISr"},nflSeason:{defaultMessage:"{year} NFL Season",id:"n6vqth75CA"},nbaSeason:{defaultMessage:"{year} NBA Season",id:"rrCa+R0f7X"},undrafted:{defaultMessage:"Undrafted",id:"ZpiNk0Z5Np"},pre:{defaultMessage:"Pre",id:"hMX10Ja0Xm"},preseason:{defaultMessage:"Preseason",id:"HENGOVahPR"},regularSeason:{defaultMessage:"Regular Season",id:"Ea9LD9vfyQ"},postSeason:{defaultMessage:"Postseason",id:"xvhy/ycHzu"},proBowl:{defaultMessage:"Pro Bowl",id:"pxho4sLngT"},wildCardPlayoff:{defaultMessage:"Wild Card Playoff",id:"EvhXzrm4Ix"},divisionalPlayoff:{defaultMessage:"Divisional Playoff",id:"p1LmAErYhB"},conferenceChampionship:{defaultMessage:"Conference Championship",id:"AVW9uMIxMK"},superBowl:{defaultMessage:"Super Bowl",id:"khEvs6DTrv"},relatedGames:{defaultMessage:"Related Games",id:"Vii6YKE9t9"},noEvents:{defaultMessage:"No events",id:"xPFOlw/kys"},showAllTeams:{defaultMessage:"Show all teams",id:"k112pFsCZU"},tba:{defaultMessage:"TBA",id:"ZfAWFLTzx/"},live:{defaultMessage:"Live",id:"Dn82ALx/+V"},standings:{defaultMessage:"Standings",id:"o2v7SB+ObO"},schedule:{defaultMessage:"Schedule",id:"hGQqkWwmJD"},wins:{defaultMessage:"Wins",id:"f++h1REg9b"},losses:{defaultMessage:"Losses",id:"eQJCl5DaWL"},ties:{defaultMessage:"Ties",id:"LYMVZdnuVv"},winPct:{defaultMessage:"Win Pct",id:"sHcBpWJlFR"},pointsFor:{defaultMessage:"PF",id:"zG5bX7TOdX"},pointsAgainst:{defaultMessage:"PA",id:"+09k0C5AlI"},streak:{defaultMessage:"Str",id:"/K3fzWE90S"},teamSchedule:{defaultMessage:"{year} {team} Schedule",id:"1Z4UTJhHPZ"},home:{defaultMessage:"Home",id:"ejEGdxSUGs"},away:{defaultMessage:"Away",id:"0JXAskjV4d"},previous:{defaultMessage:"Previous",id:"JJNc3cbYIJ"},upcoming:{defaultMessage:"Upcoming",id:"6/aEFZbs2i"},relatedTeams:{defaultMessage:"Related Teams",id:"ZzOufqyGoL"},seasonStats:{defaultMessage:"{year} Season Stats",id:"0p+BU5Jj9p"},coachName:{defaultMessage:"Coach",id:"uQg6UcdK4Y"},diff:{defaultMessage:"Diff",id:"Fm3StihZV6"},teams:{defaultMessage:"Teams",id:"DNeuzb5ky2"},seasonHighlights:{defaultMessage:"Season Highlights",id:"u0NXd7YWeO"},playByPlay:{defaultMessage:"Play by Play",id:"g2y6uMg3RU"},playSummary:{defaultMessage:"Play Summary",id:"HtqDGZkC7q"},activeDrive:{defaultMessage:"Active Drive",id:"9WRCeRXYnG"},drive:{defaultMessage:"Drive",id:"1YAWJ379IQ"},gameDown:{defaultMessage:"{down} Down",id:"D6NiYuphxA"},noLeader:{defaultMessage:"No Leader",id:"nEuoHaJ7ix"},endOfPeriod:{defaultMessage:"End of Quarter",id:"tY+g5ifXSh"},playSubtitle:{defaultMessage:"{count, plural, one {# Play} other {# Plays}}, {yards, plural, one {# Yard} other {# Yards}}, {duration}",id:"segO/liubc"},downloadIosNotificationCta:{defaultMessage:"Download the app to get live game updates",id:"TbQ0fq8jWR"},downloadIosNotificationCtaSub:{defaultMessage:"Scan the QR code to download the app",id:"1j+FmhPZ8J"},iosNotificationsCta:{defaultMessage:"Turn on live game updates",id:"B3DARItQiv"},iosNotificationsCtaOff:{defaultMessage:"Turn off live game updates",id:"MJ3BTMxxFR"},iosNotificationsCtaSub:{defaultMessage:"Real-time game updates",id:"qeSXEmN+v2"},iosNotificationsCtaSubOff:{defaultMessage:"You are subscribed to live game alerts.",id:"ESQg4GtLBi"},moreGames:{defaultMessage:"More Games",id:"ssuX7Q5/hn"},goals:{defaultMessage:"Goals",id:"XHLYdJ4a0Y"},shots:{defaultMessage:"Shots",id:"MtAfOi/9Z4"},shotsOnTarget:{defaultMessage:"Shots on Target",id:"XypPx7GnSa"},fouls:{defaultMessage:"Fouls",id:"ULgxB5+kkl"},yellowCards:{defaultMessage:"Yellow Cards",id:"OgfXSatXn2"},redCards:{defaultMessage:"Red Cards",id:"iM3q/GTmBa"},corners:{defaultMessage:"Corners",id:"SG1mA2ViLF"},saves:{defaultMessage:"Saves",id:"OXuG5Tbo0I"},passes:{defaultMessage:"Passes",id:"zt/qs3N6e3"},pointsWon:{defaultMessage:"Points Won",id:"XinSz02Vcr"},totalWinners:{defaultMessage:"Winners",id:"upRjwyuG/1"},forehandWinners:{defaultMessage:"Forehand Winners",id:"dhq2amJ4Pc"},backhandWinners:{defaultMessage:"Backhand Winners",id:"7LkIR0bV+s"},aces:{defaultMessage:"Aces",id:"sZJa/S3ekv"},doubleFaults:{defaultMessage:"Double Faults",id:"+3VTXdG9VS"},firstServePercentage:{defaultMessage:"First Serve %",id:"L5NV6vruFx"},firstServePointsWonPercentage:{defaultMessage:"First Serve Points Won %",id:"QOFjHS/pnz"},secondServePointsWonPercentage:{defaultMessage:"Second Serve Points Won %",id:"GfQX2xkNys"},breakpointsWon:{defaultMessage:"Break Points Won",id:"vuAxPAew9k"},totalUnforcedErrors:{defaultMessage:"Unforced Errors",id:"4F6jzAUiDp"}}),cke=(e,t,n)=>{if(!t)return"";const r=rOt[t];return r?e(r,n):""};function sOt(e,t){const{$t:n}=Z();if(t){if(e==="nfl")switch(t){case 19:return"Wildcard Round";case 20:return"Divisional Round";case 21:return"Conference Round";case 22:return"Super Bowl";default:return n({defaultMessage:"Week {week}",id:"RE27WbGe9C"},{week:t})}return n({defaultMessage:"Week {week}",id:"RE27WbGe9C"},{week:t})}}function aOt(e,t){return GRt(e.event.teams,e.brands,t).map(s=>{const a=$Rt(s.teamId,e);return{...s,winProbability:a?.probability??0}})}function uke({event:e,league:t}){const{$t:n,formatNumber:r}=Z(),s=J9t(e?.event),{isMobileStyle:a}=xe(),i=s?a?s:n({defaultMessage:"Watch on {network}",id:"yCXRhFX8Qz"},{network:s}):"",l=cke(n,t),c=eOt(e.event),u=tOt(e.event),{locale:d}=Z(),[m,p]=f.useState(!1),{temperature:h,weatherCondition:g}=nOt(e.weather,m),y=h?.degrees?r(h?.degrees,{style:"unit",unit:m?"celsius":"fahrenheit"}):"",[v,x]=aOt(e,t),b=sOt(t,e.event.week),_=e.event.eventRound?.name||null;return{whereToWatch:i,league:t,gameVenue:c,gameLocation:u,roundName:_,locale:d,celcius:m,setCelcius:p,weatherCondition:g,degrees:y,team1:v,team2:x,weekLabel:b,leagueName:l}}const dke=({event:e,final:t,className:n,isLive:r})=>{const{$t:s}=Z(),{locale:a}=Z(),{isMobileStyle:i}=xe(),l=Z9t(e);if(!l)return null;const c=l.year===new Date().getFullYear(),u=lke(e.eventStatus,e.scheduledPeriods),d=v3(new Date(l.full))?s({defaultMessage:"Today",id:"zWgbGgjUUg"}):new Date(l.full).toLocaleString(a,{weekday:c||i?void 0:"short",month:i?"numeric":"short",day:"numeric",year:c?void 0:"numeric"}),m=e?.scheduledPeriods==2?`H${e.eventStatus?.period}`:`Q${e.eventStatus?.period}`;return o.jsxs(H,{className:B("gap-xs p-sm md:px-sm flex flex-1 flex-col items-center justify-center",n),children:[!r&&o.jsx(D,{variant:"smallBold",className:"text-center leading-tight",children:d}),r?o.jsxs("div",{className:"gap-xs flex flex-col items-center",children:[o.jsxs(Pl,{className:"gap-xs text-super",children:[o.jsx(gr,{id:"period",children:o.jsx(D,{variant:"smallBold",color:"super",className:"text-center uppercase leading-tight",children:u?s({defaultMessage:"Halftime",id:"iC0AL294Dr"}):m})}),!u&&o.jsx(gr,{id:"time",children:o.jsxs(D,{variant:"smallBold",color:"super",className:"text-center",children:[e.eventStatus.minutes,":",e.eventStatus.seconds?.toString()?.padStart?.(2,"0")]})})]}),o.jsx(ap,{includeDot:!0})]}):t?o.jsx(Z_,{}):o.jsx(D,{color:"light",variant:i?"tiny":"small",className:"text-center",children:l.full&&!e.isTba?new Date(l.full).toLocaleTimeString(a,{hour:"numeric",minute:"numeric",timeZoneName:"short"}):"TBA"})]})},asn=({seriesEvents:e,league:t,eventId:n,gameLabel:r})=>{const{isMobileStyle:s}=xe(),{inApp:a}=Vo(),i=Nt(),l=gt(),{$t:c}=Z(),u=c({defaultMessage:"Game",id:"Am8glJTtny"}),d=r??u,m=f.useMemo(()=>!e?.length||!t?[]:e.map((g,y)=>{const v=g.eventId===n,x=DB({href:`/sports/${t}/events/${g.eventId}`,inApp:a,queryParams:i});return{type:"default",text:`${d} ${y+1}`,onClick:()=>{!v&&x&&l.push(x)},active:v}}),[e,t,l,n,d,a,i]);if(!e?.length)return null;const p=n?e.findIndex(g=>g.eventId===n):0,h=n?p+1:1;return o.jsx(Jt,{items:m,isMobileStyle:s,menuItemClassName:"items-center",children:o.jsx(he,{size:"small",chevron:!0,text:`${d} ${h}`})})},fke=({gameLocation:e,roundName:t,setCelcius:n,weatherCondition:r,degrees:s,whereToWatch:a,weekLabel:i,isFinal:l,league:c})=>{const{locale:u}=Z(),d=r&&s,m=a&&!l||i;return o.jsxs(H,{className:"gap-lg p-md flex items-center justify-between",children:[o.jsxs("div",{className:"gap-xs flex flex-col items-start",children:[o.jsxs(Pl,{className:"gap-xs text-quiet",children:[o.jsx(gr,{id:"league",children:o.jsx(D,{variant:"tiny",color:"light",className:"gap-xs flex truncate whitespace-nowrap",children:c.toUpperCase()})}),i&&o.jsx(gr,{id:"week",children:o.jsx(D,{variant:"tiny",color:"light",className:"gap-sm flex items-center truncate whitespace-nowrap",children:i})}),t&&o.jsx(gr,{id:"round",children:o.jsx(D,{variant:"tiny",color:"light",className:"gap-sm flex items-center truncate whitespace-nowrap",children:t})})]}),m&&o.jsxs(Pl,{className:"gap-xs text-quiet",children:[a&&!l&&o.jsx(gr,{id:"watch",children:o.jsxs(D,{variant:"tiny",color:"light",className:"gap-xs flex truncate whitespace-nowrap",children:[o.jsx(qie,{size:14,className:"mb-xs"}),a]})}),i&&o.jsx(gr,{id:"week",children:o.jsx(D,{variant:"tiny",color:"light",className:"gap-sm flex items-center truncate whitespace-nowrap",children:i})})]})]}),o.jsx("button",{className:"flex min-w-0 flex-col items-end",onClick:()=>n(p=>!p),children:d?o.jsxs(Pl,{className:"gap-xs text-quiet text-xs",children:[u.startsWith("en-")&&r&&o.jsx(gr,{id:"condition",children:o.jsx(D,{variant:"tiny",color:"light",className:"gap-xs flex items-center whitespace-nowrap",children:r})}),s&&o.jsx(gr,{id:"temperature",children:o.jsx(D,{variant:"tiny",color:"light",className:"gap-xs flex items-center",children:s})})]}):o.jsx(D,{variant:"tiny",color:"light",className:"w-full min-w-0 truncate whitespace-nowrap text-end",children:e})})]})},oOt=Wt("BlazeSDKContext",{blazeSDK:null,isBlazeSDKReady:!1}),iOt=()=>f.useContext(oOt);function lOt(e,t){const n=e.Theme(t?"row-rectangle":"row-rectangle-horizontal");return n.layoutStyle.borderRadius="5px",n.layoutStyle.statusLiveStyle.isVisible=!1,n.layoutStyle.statusLiveUnreadStyle.isVisible=!1,n.layoutStyle.statusReadStyle.isVisible=!1,n.layoutStyle.statusUnreadStyle.isVisible=!1,n.playerStyle.titleFont="var(--font-fk-grotesk-neue)",n.playerStyle.publishedDateFont="var(--font-fk-grotesk-neue)",n.layoutStyle.labelStyle.font="var(--font-fk-grotesk-neue)",n.layoutStyle.labelStyle.fontSize=".75rem",n.playerStyle.iconsButton=[{value:"MUTE_UNMUTE",isVisible:!0},{value:"EXIT_PLAYER",isVisible:!0}],n}function cOt(e,t){return LM(t)?e.LabelBuilder().singleLabel(t[0]):e.LabelBuilder().mustInclude(t?.join?.(" , "))}function uOt(e,{isMobile:t,labels:n,maxItems:r,onData:s}){const a=e.DataSourceBuilder().labels({labels:cOt(e,n),maxItems:r,orderType:"RecentlyUpdatedFirst"}),i=lOt(e,t);e.WidgetRowView("stories-container",{dataSource:a,theme:i,contentType:"story",delegates:{[e.Delegations.onWidgetDataLoadCompleted]:l=>{s?.({detail:l.detail,error:null})},[e.Delegations.onErrorThrown]:l=>{s?.({error:l,detail:null})}}})}function dOt({labels:e,maxItems:t,onData:n,style:r,className:s}){const{isMobileStyle:a}=xe(),{blazeSDK:i,isBlazeSDKReady:l}=iOt(),c=f.useRef(!1);return f.useEffect(()=>{if(!(!l||c.current))try{uOt(i,{isMobile:a,labels:e,maxItems:t,onData:n}),c.current=!0}catch(u){n?.({error:u,detail:null})}},[i,l,a,t,n,c]),o.jsx("div",{id:"stories-container",className:B("overrides [&_blaze-widget-layout]:p-0",s),style:r},a?"m":"d")}async function fOt({url:e}){const{default:t}=await K(async()=>{const{default:r}=await import("./qrcode-DzQwd33t.js").then(s=>s.q);return{default:r}},__vite__mapDeps([128,1])),n=t(0,"M");return n.addData(e.toString()),n.make(),n.createSvgTag(2,0)}async function mOt({deviceId:e,liveEventId:t,reason:n}){const r=await se.GET("/rest/live-events/subscription",n,{params:{query:{device_id:e,live_event_id:t}}});return r.error?(ne.error(`Failed to get subscription status: ${e}`),!1):r.data?.subscribed??!1}async function pOt({apns:e}){const t=JM({type:"pplx.sports.notifications",data:{apns:e}});return await new Promise(n=>setTimeout(n,500)),t||ne.error("Failed to subscribe user to event."),t}async function hOt({liveEventId:e,deviceId:t,apns:n}){try{const{error:r}=await se.DELETE("/rest/live-events/subscription","sports-ios-notification-sub-unsubscribe",{params:{query:{device_id:t,live_event_id:e}}});if(JM({type:"pplx.sports.notifications.unsubscribe",data:{apns:n}}),r)throw new Ce("API_CLIENTS_ERROR",{cause:r});return!0}catch(r){return ne.error(r),!1}}const mke=(e,t)=>["events/subscription",e,t];function gOt({apns:e,liveEventId:t,deviceId:n}){const r=ht(),s=mke(n,t);return vt({mutationFn:async a=>a.subscribe?pOt({apns:e}):await hOt({liveEventId:t,deviceId:n,apns:e}),onMutate:async a=>{await r.cancelQueries({queryKey:s});const i=r.getQueryData(s);return r.setQueryData(s,a),{prevState:i}},onError:(a,i,l)=>{r.setQueryData(s,l?.prevState)},onSettled:()=>{r.invalidateQueries({queryKey:s})}})}const yOt=({apns:e,deviceId:t})=>{const n="sports-ios-notification-sub",r=e.attributes?.live_event_id,{trackEvent:s}=Ne(),{data:a}=We({queryKey:mke(t,r),queryFn:()=>mOt({deviceId:t,liveEventId:r,reason:n}),staleTime:0}),{mutate:i,isPending:l}=gOt({apns:e,liveEventId:r,deviceId:t}),c=f.useRef(null);return l3(c,()=>{s("live event subscribe toggle impression",{deviceId:t,liveEventId:r,subscribed:!!a})},{threshold:.5}),o.jsx("div",{ref:c,className:"gap-x-sm flex items-center pl-4",children:o.jsx(Ro,{active:!!a,onChange:()=>i({subscribe:!a}),disabled:l})})},vOt=({url:e})=>{const[t,n]=f.useState("");return f.useEffect(()=>{fOt({url:e}).then(n).catch(ne.error)},[e]),t?o.jsx(H,{variant:"background",className:"p-xs shadow-subtle aspect-square w-full rounded border",children:o.jsx("div",{className:"[&_path]:fill-foreground [&_rect]:fill-inverse flex items-center justify-center [&_svg]:h-auto [&_svg]:w-full",dangerouslySetInnerHTML:{__html:t}})}):o.jsx(yn,{className:"bg-subtler block aspect-square w-full rounded"})},nW=({title:e,subtitle:t="",children:n,className:r,expandedCta:s=!1})=>o.jsxs(H,{className:B("mx-md gap-sm md:-mt-md md:px-md grid border-t",r),children:[o.jsxs(H,{className:"gap-md flex min-h-[50px] items-center justify-between",children:[o.jsxs(H,{children:[o.jsx(D,{variant:"smallBold",children:e}),o.jsx(D,{variant:"small",color:"light",children:t})]}),n]}),s&&o.jsx(xOt,{})]}),xOt=()=>{const{isMobileStyle:e}=xe(),{actions:t,isSportsIosCtaDismissed:n}=hn();return o.jsx(o.Fragment,{children:!n&&e&&o.jsxs(H,{className:"relative block overflow-hidden rounded","aria-hidden":"true",children:[o.jsx(H,{className:"p-sm absolute right-0 top-0",children:o.jsx("button",{onClick:()=>t.setIsSportsIosCtaDismissed(!0),children:o.jsx(Rt,{color:"white"})})}),o.jsx("img",{className:"max-h-[200px] w-full object-cover object-[0_90%]",src:"https://r2cdn.perplexity.ai/images/ios-live-game-alerts-promo.jpg",alt:""})]})})},bOt={SportsEventAttributes:"2.37.1",SportsIndividualEventAttributes:"2.45.0"};function pke({apns:e,containerClassName:t,title:n,subtitle:r}){const{$t:s}=Z(),{device:{isAndroid:a}}=At(),{inApp:i,appVersion:l,deviceId:c}=Vo(),{handleAppDownloadClicked:u}=zd("sports-ios-notification-sub"),{isMobileStyle:d}=xe();if(a||!e)return null;if(n=n||s({defaultMessage:"Turn on live game updates",id:"B3DARItQiv"}),r=r||s({defaultMessage:"Real-time game updates",id:"qeSXEmN+v2"}),i){const m=bOt[e.attributesType];return m?k7e(l,m)?o.jsx(wOt,{containerClassName:t,onClick:u}):!e||!c?null:o.jsx(nW,{title:n,subtitle:r,className:t,children:o.jsx(f.Suspense,{children:o.jsx(yOt,{apns:e,deviceId:c})})}):null}return d?o.jsx(_Ot,{containerClassName:t,onClick:u}):null}const _Ot=({containerClassName:e,onClick:t})=>{const{$t:n}=Z();return o.jsx(nW,{title:n({defaultMessage:"Download the app to get live updates during the event",id:"vBmN5Ou5qa"}),className:e,children:o.jsx(he,{size:"small",pill:!0,variant:"primary",icon:yb,text:n({defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),onClick:t})})},wOt=({containerClassName:e,onClick:t})=>{const{$t:n}=Z();return o.jsx(nW,{title:n({defaultMessage:"Update the app to follow the event live",id:"DKTCeuOgpP"}),className:e,children:o.jsx(he,{size:"small",pill:!0,variant:"primary",icon:yb,text:n({defaultMessage:"Update App",id:"NEMhhhqxf3"}),onClick:t})})};function osn({apns:e}){const{$t:t}=Z(),{downloadAppLink:n}=zd("sports-ios-notification-sub"),{isMobileStyle:r}=xe(),{actions:s,isSportsIosCtaDismissed:a}=hn(),i=f.useCallback(()=>{s.setIsSportsIosCtaDismissed(!0)},[s]);return a||r||!e?null:o.jsxs(H,{variant:"raised",className:"ml-sm mt-md p-md shadow-subtle relative flex max-w-[160px] flex-col items-center rounded-xl border",children:[o.jsx("div",{className:"mb-sm flex w-full justify-center",children:o.jsx(vOt,{url:n})}),o.jsx(D,{variant:"smallBold",className:"text-center leading-tight",children:t({defaultMessage:"Download the app to get live game updates",id:"TbQ0fq8jWR"})}),o.jsx(Te,{size:"tiny",pill:!0,icon:Rt,extraCSS:"!absolute -top-0.5 opacity-50 hover:opacity-100 -right-0.5",onClick:i,variant:"noBackground"}),o.jsxs(H,{className:"mt-sm px-sm gap-xs mx-auto inline-flex items-center justify-center rounded-full border py-1",children:[o.jsx(od,{size:12,className:"text-quiet"}),o.jsxs("div",{className:"flex gap-px",children:[o.jsx(D,{variant:"smallCaps",color:"light",className:"whitespace-nowrap text-center",children:"4.9"}),o.jsx(D,{variant:"smallCaps",color:"ultraLight",className:"whitespace-nowrap text-center",children:""}),o.jsx(D,{variant:"smallCaps",color:"light",className:"text-center",children:"100k+"})]})]})]})}function COt({team1:e,team2:t}){const{$t:n}=Z(),[r,s]=f.useState(!1),{colorScheme:a}=Wr(),i=f.useRef(null);j$({ref:i,onInView:()=>{s(!0)}});const l=oo(.16,1,.3,1),{locale:c}=Z(),u=pM(e.color,a),d=pM(t.color,a);return o.jsxs("div",{className:"gap-sm px-md pb-md mx-auto flex flex-col items-center",ref:i,children:[o.jsx(yn,{className:"w-full shrink-0",active:!r,children:o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:B("relative flex h-2 w-full shrink-0 justify-between overflow-hidden rounded-full duration-150",{"bg-subtle":!r}),children:[o.jsx(ge.div,{className:"absolute inset-y-0 left-0 h-full rounded-full",style:{background:t.winProbability?d:"#00000010",boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, 0.1)"},animate:{width:r?`calc(${t.winProbability}%)`:0,left:r?`calc(${e.winProbability}% + 1px)`:0},transition:{ease:l,duration:.5}}),o.jsx(ge.div,{className:"relative h-full rounded-full",style:{background:e.winProbability?u:"#00000010",boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, 0.1)"},animate:{width:r?`calc(${e.winProbability}% - 1px)`:0},transition:{ease:l,duration:.5}})]}),o.jsx("div",{className:"bg-base from-subtler to-subtler p-two absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r",children:o.jsx("div",{className:"bg-inverse/70 h-4 w-[1.5px] rounded-full"})})]})}),o.jsxs("div",{className:"grid w-full grid-cols-3",children:[o.jsx(D,{variant:"small",className:"text-left",children:o.jsx(MO,{value:Ug(e.winProbability,c),digitClassName:"font-mono",className:"inline-flex"})}),o.jsx(D,{variant:"tinyRegular",color:"light",className:"mt-px text-center",children:n({defaultMessage:"Game Winner Odds",id:"Ar4Hgi5LK/"})}),o.jsx(D,{variant:"small",className:"text-right",children:o.jsx(MO,{value:Ug(t.winProbability,c),digitClassName:"font-mono",className:"inline-flex"})})]})]})}const SOt=({width:e,height:t,fraction:n,className:r,colors:s,onAnimationEnd:a,onArcSelect:i,onArcDeselect:l,selectedArc:c,animate:u})=>{const m=Math.PI*2*(1-n),[p,h]=f.useState(!1),[g,y]=f.useState(!1);f.useEffect(()=>{p&&g&&a?.()},[p,g,a]);const v=b=>{i?.(b)},x=()=>{l?.()};return o.jsx("svg",{width:e,height:t,viewBox:`0 0 ${e} ${t}`,className:r,children:o.jsxs(ca,{top:t/2,left:e/2,children:[o.jsx(Yse,{startAngle:0,endAngle:m,outerRadius:e/2,innerRadius:e/2-(c===0?12:10),padAngle:.04,cornerRadius:999,fill:s[1],onAnimationEnd:()=>h(!0),onMouseEnter:()=>v(0),onMouseLeave:x,animationEnded:p&&g,className:c===1?"opacity-20":void 0,animate:u}),o.jsx(Yse,{startAngle:m,endAngle:Math.PI*2,padAngle:.02,outerRadius:e/2,innerRadius:e/2-(c===1?12:10),cornerRadius:999,fill:s[0],onAnimationEnd:()=>y(!0),onMouseEnter:()=>v(1),onMouseLeave:x,animationEnded:p&&g,className:c===0?"opacity-20":void 0,animate:u})]})})},EOt=Xc(Ube),Yse=({startAngle:e,endAngle:t,onAnimationEnd:n,animationEnded:r,className:s,animate:a,...i})=>{const l=eV({to:{startAngle:a?e:Math.PI*2,endAngle:a?t:Math.PI*2},from:{startAngle:Math.PI*2,endAngle:Math.PI*2},delay:200,onRest:m=>{m.finished===!0&&n?.()}}),{colorScheme:c,isColorSchemeReady:u}=Wr({addSecondPass:!0}),d=u&&c==="dark"?"stroke-white/5":void 0;return o.jsx(EOt,{...i,startAngle:a?l.startAngle:0,endAngle:a?l.endAngle:0,className:B(d,r?"duration-200 ease-out":"",s)})},MOt=({className:e,team1:t,team2:n,size:r=150})=>{const[s,a]=f.useState(!1),[i,l]=f.useState(!1),[c,u]=f.useState(null),d=f.useRef(null),m=f.useRef(null),p="duration-200",h=f.useRef(null),[g,y]=f.useState(!1),{locale:v}=Z(),{isMobileStyle:x}=xe(),b=f.useMemo(()=>[t.winProbability?t.color:"#00000010",n.winProbability?n.color:"#00000010"],[t,n]);j$({ref:h,onInView:()=>{a(!0),tq(Math.max(t.winProbability-30,0),t.winProbability,{duration:2,ease:"easeOut",onUpdate:S=>{d.current&&(d.current.textContent=Ug(S,v))}}),tq(Math.max(n.winProbability-20,0),n.winProbability,{duration:2,ease:"easeOut",onUpdate:S=>{m.current&&(m.current.textContent=Ug(S,v))}}),y(!0)}});const _=S=>{u(S)},w=()=>{u(null)},C=Math.abs(t.winProbability/100);return o.jsx("div",{className:e,ref:h,children:o.jsxs("div",{className:"gap-sm md:gap-md isolate grid w-full grid-cols-[1fr,auto,1fr] items-center",children:[o.jsx(Qse,{innerRef:d,show:s,textBlockVariant:x?"smallBold":"baseSemi",className:B("translate-x-md self-start text-right !delay-0 !ease-out md:translate-x-0 md:self-center",p,{"scale-110":c===1,"opacity-20":c===0}),onMouseEnter:()=>_(1),onMouseLeave:w}),o.jsxs("div",{className:"relative",style:{width:r,height:r},children:[o.jsx(SOt,{height:r,width:r,fraction:C,animate:g,className:"relative z-[2] size-full",colors:b,onAnimationEnd:()=>l(!0),onArcSelect:S=>{u(S)},onArcDeselect:()=>u(null),selectedArc:c}),o.jsx(yn,{active:!s,className:"absolute inset-0 z-[1]",children:o.jsx("div",{className:B("border-subtlest absolute inset-0 rounded-full border-[10px]",p,{"opacity-0":s})})}),o.jsx("div",{className:B("absolute inset-0 z-[1] rounded-full opacity-10 blur-md dark:opacity-20",p,{"!opacity-0":!i}),style:{backgroundImage:`conic-gradient(${t.color} 0deg, ${n.color} 10deg, ${n.color} ${(1-C)*360-10}deg, ${t.color} ${(1-C)*360}deg)`,maskImage:"radial-gradient(transparent, black)"}}),o.jsx("div",{className:"absolute inset-0 z-[3] flex items-center justify-center",children:o.jsxs("div",{className:"gap-sm flex size-full items-center justify-center",children:[o.jsx("div",{onMouseEnter:()=>_(1),onMouseLeave:w,className:"flex size-full items-center justify-end",children:o.jsx(Es,{color:t.color,logo:t.logo,includeStripe:!1,size:"medium",className:B("pointer-events-auto ease-out",p,c===1?"scale-110":void 0,c===0?"opacity-20":void 0)})}),o.jsx(H,{className:"h-lg hidden border-l md:block"}),o.jsx("div",{onMouseEnter:()=>_(0),onMouseLeave:w,className:"flex size-full items-center justify-start",children:o.jsx(Es,{color:n.color,logo:n.logo,includeStripe:!1,size:"medium",className:B("pointer-events-auto ease-out",p,c===0?"scale-110":void 0,c===1?"opacity-20":void 0)})})]})})]}),o.jsx(Qse,{innerRef:m,show:s,textBlockVariant:x?"smallBold":"baseSemi",className:B("-translate-x-md self-end !delay-0 !ease-out md:-translate-x-0 md:self-center",p,{"scale-110":c===0,"opacity-20":c===1}),onMouseEnter:()=>_(0),onMouseLeave:w})]})})},Qse=({innerRef:e,show:t,className:n,textBlockVariant:r="section-title",...s})=>{const{locale:a}=Z();return o.jsx("div",{className:B("flex-1 cursor-default",{"translate-y-2 opacity-0":!t},n),...s,children:o.jsxs(D,{variant:r,className:B("relative !font-mono"),children:[o.jsx("span",{ref:e,className:"absolute inset-0",children:Ug(0,a)}),o.jsx("span",{className:"opacity-0",children:Ug(100,a)})]})})},kOt=({watchlistType:e,identifier:t,category:n,modalOrigin:r,loginPrompt:s,reason:a})=>{const{$t:i}=Z(),l=ht(),c=rt(),{openModal:u}=xt(),d=f.useRef(!1),[m,p]=f.useState(!1),[h,g]=f.useState(!1),[y,v]=f.useState(!1),{data:x,isLoading:b}=EU({watchlistType:e,reason:a}),{mutate:_}=zye({watchlistType:e,queryClient:l,reason:a}),{mutate:w}=Gye({watchlistType:e,queryClient:l,reason:a}),C=f.useCallback(S=>{const{invalidateOnSuccess:E=!0}=S??{};if(g(!1),v(!1),!c){const M=i({defaultMessage:"Sign in to follow your interests",id:"ebRSvhaBXI"});u("loginModal",{pitchMessage:{title:s||M},origin:r});return}m?(w({identifier:t,category:n}),v(!0)):(_({identifier:t,category:n}),g(!0)),p(!m),E&&l.invalidateQueries({queryKey:[mg]})},[i,_,n,t,m,c,s,r,u,l,w]);return f.useEffect(()=>{if(!d.current&&!b&&x){d.current=!0;const S=M=>{const k=M.identifier===t;return n?k&&M.category===n:k},E=x.some(S);p(E)}},[b,x,t,n]),f.useMemo(()=>({isFollowed:m,toggleFollow:C,showFollowToast:h,showUnfollowToast:y,setShowFollowToast:g,setShowUnfollowToast:v,isLoadingSubscriptions:b}),[m,b,h,y,C])},hke=I.memo(({isFollowed:e,toggleFollow:t,iconOnly:n=!1,size:r="small",selectedButtonClassName:s,unselectedButtonClassName:a,tooltip:i,variant:l})=>{const c=Z(),{isMobileStyle:u}=xe();return o.jsx(Ke,{mode:"wait",children:e?o.jsx(ge.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:rn},children:o.jsx(he,{variant:l??"primaryGhost",pill:!0,size:r,text:u||n?void 0:c.formatMessage({defaultMessage:"Following",id:"cPIKU2QdyN"}),onClick:t,extraCSS:s,toolTip:i,icon:od})},"confirmed"):o.jsx(ge.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:rn},children:o.jsx(he,{pill:!0,variant:l,icon:ar,size:r,text:u||n?void 0:c.formatMessage({defaultMessage:"Follow",id:"ieGrWod3CN"}),onClick:t,extraCSS:a,toolTip:i})},"follow")})});hke.displayName="FollowButton";const TOt=({team:e,size:t,variant:n,league:r="nfl"})=>{const[s,a]=f.useState(0),i=f.useMemo(()=>{switch(t){case"large":return s>=1280?64:50;case"medium":default:return 32;case"small":return 20}},[t,s]),l=()=>{a(window.innerWidth)};f.useEffect(()=>(window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)),[]),f.useEffect(()=>{a(window.innerWidth)},[]);const c=6,u=32,d=u/2,m=Math.sin(Math.PI/u),p=i*m,[h,g]=f.useState(!1),[y,v]=f.useState(0),x=1600,b=n==="angled-first"?20:n==="angled-last"?-20:0;f.useEffect(()=>{h&&(v(w=>w+(n==="angled-last"?-360:360)*2),setTimeout(()=>{g(!1)},x))},[h,n]);const _=()=>{g(!0)};return o.jsxs(ge.div,{onMouseEnter:_,transition:{ease:la,duration:1},className:B("wrapper transition-opacity duration-150",{"opacity-0":s===0}),style:{width:i,height:i},children:[o.jsx("div",{className:"shadow"}),o.jsxs(ge.div,{className:B("coin size-full"),initial:{rotateY:"0deg"},animate:{rotateY:`${y+b}deg`},transition:{rotateY:{ease:sL,duration:x/1e3}},children:[o.jsx("div",{className:"front flex items-center justify-center bg-white",style:{width:i,height:i,transform:`translateZ(${c/2}px)`},children:o.jsx(Es,{color:e.color,logo:e.logo,size:t})}),o.jsx("div",{className:"back border-subtler flex items-center justify-center border bg-white dark:border-transparent",style:{width:i,height:i,transform:`translateZ(${c/-2}px) rotateY(180deg)`},children:r==="nfl"?o.jsx(NOt,{className:"h-auto w-2/5 opacity-40 grayscale"}):o.jsx(jOt,{className:"h-[70%] w-auto opacity-40 grayscale"})}),o.jsx("div",{className:"side",style:{transform:`translateX(${i*.5-c/2}px)`},children:Array.from({length:d}).map((w,C)=>o.jsxs("div",{className:"spoke",style:{width:c,height:i,transform:`rotateY(90deg) rotateX(calc((180deg / ${d}) * ${C+1}))`},children:[o.jsx("div",{className:"facet",style:{height:p,width:c,transform:`rotateX(calc(((180deg - (360deg / ${u})) / 2)))`}}),o.jsx("div",{className:"facet",style:{height:p,width:c,transform:`rotateX(calc(((180deg - (360deg / ${u})) / 2)))`}})]},C))})]})]})},NOt=({className:e})=>o.jsx("img",{alt:"",className:e,src:"https://upload.wikimedia.org/wikipedia/en/a/a2/National_Football_League_logo.svg"}),jOt=({className:e})=>o.jsx("img",{alt:"",className:e,src:"https://upload.wikimedia.org/wikipedia/en/0/03/National_Basketball_Association_logo.svg"}),isn=({eventId:e,league:t,children:n,...r})=>e?o.jsx(Nu,{...r,href:`/sports/${t}/events/${e}`,children:n}):o.jsx(o.Fragment,{children:n}),AOt=({teamId:e,league:t,children:n,...r})=>t==="ncaam"||t==="ncaaw"||t==="championsleague"||t==="wnba"||t==="atp"||t==="wta"?o.jsx(D,{children:n}):o.jsx(Nu,{...r,href:`/sports/${t}/teams/${e}`,className:"cursor-pointer duration-150 hover:opacity-60",children:n}),lsn=({playerId:e,league:t,children:n,...r})=>t==="ncaam"||t==="ncaaw"||t==="wnba"||t==="atp"||t==="wta"?o.jsx(D,{children:n}):o.jsx(Nu,{...r,href:`/sports/${t}/players/${e}`,children:n}),kO=I.memo(({message:e,isVisible:t=!1,timeout:n,onSettingsClick:r,onTimeout:s=kn,icon:a,...i})=>{const[l,c]=f.useState(t),u=f.useRef(null),{$t:d}=Z();f.useEffect(()=>{c(t)},[t]);const m=f.useCallback(()=>{u.current&&clearTimeout(u.current)},[]),p=f.useCallback(h=>{h?.stopPropagation(),c(!1),s(),m()},[s,m]);return f.useEffect(()=>(t&&n&&(u.current=setTimeout(()=>{p()},n*1e3)),()=>{m()}),[l,n,t,s,p,m]),o.jsx(Bd,{children:o.jsx(Ke,{children:l&&o.jsx(ge.div,{className:"right-toastHMargin top-toastVMargin fixed z-30 flex items-center justify-center",initial:{opacity:0,x:6},animate:{opacity:1,x:0},exit:{opacity:0,x:6},transition:Po,...i,children:o.jsxs(H,{variant:"raised",className:B("shadow-subtle gap-sm flex items-stretch rounded-xl border pl-[12px] dark:shadow-[0_4px_12px_rgba(0,0,0,0.5)]"),children:[a&&o.jsx("div",{className:"p-sm bg-subtler dark:bg-subtle my-[12px] flex aspect-square items-center justify-center rounded-md",children:o.jsx(ce,{icon:a,className:"text-quiet",size:"md"})}),o.jsxs("div",{className:"flex flex-1 flex-row items-center justify-between",children:[o.jsx(D,{variant:"tiny",color:"default",className:"pl-sm max-w-[200px] shrink-0 pr-[12px]",children:e}),o.jsxs(H,{className:"flex h-full flex-col items-stretch justify-center border-l",children:[o.jsx(Te,{size:"tiny",variant:"noHover",text:d({defaultMessage:"Settings",id:"D3idYvSLF9"}),onClick:r,extraCSS:"!px-[12px] flex-1 hover:opacity-60"}),o.jsx(H,{className:"border-t"}),o.jsx(Te,{size:"tiny",variant:"noHover",text:d({defaultMessage:"Dismiss",id:"TDaF6JVgG6"}),onClick:p,extraCSS:"!px-[12px] flex-1 hover:opacity-60"})]})]})]})},"toast")})})});kO.displayName="FollowConfirmationToast";const xM=({team:e,metadata:t,className:n,logoClassName:r,textClassName:s,nameClassName:a,size:i="large",coinLogoProps:l,hasPosession:c,posessionIndicatorClassName:u,league:d,position:m})=>{const p="team-info",{isMobileStyle:h}=xe(),g=Z(),y=gt(),v=Cu(),{inApp:x}=Vo(),{isFollowed:b,toggleFollow:_,showFollowToast:w,showUnfollowToast:C,setShowFollowToast:S,setShowUnfollowToast:E,isLoadingSubscriptions:M}=kOt({watchlistType:"SPORTS",identifier:e.teamId.toString(),category:d.toLowerCase(),modalOrigin:Oe.SPORTS_WATCHLIST,loginPrompt:"Sign in to follow your teams",reason:p});return o.jsxs("div",{className:B("gap-sm flex min-w-0 flex-col items-center",n),children:[o.jsx(kO,{message:g.formatMessage({defaultMessage:"Added {team} to your watchlist",id:"ASZzl0rkyl"},{team:e.nickname}),isVisible:w,onSettingsClick:()=>{y.push(`${v}/personalize?watchlistModal=sports`)},timeout:5,onTimeout:()=>S(!1)}),o.jsx(kO,{message:g.formatMessage({defaultMessage:"Removed {team} from your watchlist",id:"9NeRSAm+wb"},{team:e.nickname}),isVisible:C,onSettingsClick:()=>{y.push(`${v}/personalize?watchlistModal=sports`)},timeout:5,onTimeout:()=>E(!1)}),o.jsxs("div",{className:"relative shrink-0",children:[l?o.jsx(TOt,{...l,team:e,size:i,league:d}):o.jsx(Es,{className:B("shrink-0",r),logo:e.logo,color:e.color,size:i}),!M&&!x&&o.jsx("div",{className:B("absolute bottom-1/2",m==="left"?"-translate-x-xs right-full":"translate-x-xs left-full"),children:o.jsx(hke,{isFollowed:b,toggleFollow:_,size:"tiny",iconOnly:!0,selectedButtonClassName:"!bg-inverse/5 !border-transparent !text-foreground scale-[0.85]",unselectedButtonClassName:"!bg-transparent border-subtlest !text-quiet border scale-[0.85]",tooltip:b?g.formatMessage({defaultMessage:"Following",id:"cPIKU2QdyN"}):g.formatMessage({defaultMessage:"Follow Team",id:"QrB7VHb46Y"})})})]}),o.jsxs("div",{className:B("flex flex-col items-center",s),children:[o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:B("-translate-x-xs text-super absolute right-full top-1/2 -translate-y-1/2 text-base",u),children:c&&o.jsx(B7,{size:h?12:16,className:"relative"})}),o.jsx(AOt,{teamId:e.teamId,league:d,children:o.jsxs("div",{className:"gap-sm flex items-center",children:[e.seed&&o.jsx(D,{variant:"tinyRegular",color:"light",children:e.seed}),o.jsx(D,{variant:"baseSemi",className:B("truncate xl:!text-lg",a),children:e.nickname})]})})]}),t&&o.jsx(D,{variant:"smallCaps",color:"light",className:"text-center",children:t})]})]})},csn=({event:e,showWsc:t,onWscData:n,league:r})=>{const[s,a]=f.useState(!1),{whereToWatch:i,gameLocation:l,setCelcius:c,weatherCondition:u,degrees:d,team1:m,team2:p,weekLabel:h,roundName:g}=uke({event:e,league:r});f.useEffect(()=>{const v=new ResizeObserver(()=>{a(window.innerWidth<1e3)});return v.observe(document.body),()=>{v.disconnect()}},[]);const y=(m?.winProbability??0)>0||(p?.winProbability??0)>0;return o.jsxs(H,{variant:"raised",className:"relative rounded-xl border",children:[o.jsx(fke,{league:r,gameLocation:l,roundName:g,setCelcius:c,weatherCondition:u??"",degrees:d,whereToWatch:i,weekLabel:h,isFinal:Um(e.event)}),o.jsx(H,{className:"mx-md border-t"}),o.jsx(H,{children:o.jsxs("div",{className:"gap-xs p-md md:gap-md grid grid-cols-3",children:[o.jsx("div",{className:"gap-lg flex items-center justify-center",children:m&&o.jsx(xM,{team:m,league:r,metadata:lM(m.record),position:"left"})}),o.jsx(dke,{event:e.event}),o.jsx("div",{className:"gap-lg flex items-center justify-center",children:p&&o.jsx(xM,{team:p,league:r,metadata:lM(p.record),position:"right"})})]})}),o.jsx(IOt,{showWsc:t,predictionExists:y,narrowWindow:s,team1:m,team2:p,wsc:e.wsc,onWscData:n}),o.jsx(pke,{apns:e.apns})]})};function IOt({predictionExists:e,showWsc:t,narrowWindow:n,team1:r,team2:s,wsc:a,onWscData:i}){const{$t:l}=Z();return!r||!s?null:t?o.jsxs("div",{className:"gap-md md:pb-md grid grid-cols-2 md:gap-0",children:[e&&o.jsxs("div",{className:"gap-md p-md md:gap-sm md:p-lg md:pb-md flex flex-col-reverse items-center md:flex-col",children:[o.jsx("div",{className:"flex flex-1 items-center justify-center",children:o.jsx(MOt,{size:n?115:140,team1:r,team2:s})}),o.jsx(D,{color:"light",variant:"tiny",children:l({defaultMessage:"Game Winner Odds",id:"Ar4Hgi5LK/"})})]}),t&&o.jsx(gke,{wsc:a,onWscData:i})]}):e?o.jsx(H,{className:"md:mx-md pt-md border-t",children:o.jsx(COt,{team1:r,team2:s})}):null}const usn=({title:e,subtitle:t,children:n})=>o.jsxs(H,{className:"gap-md flex flex-col",children:[o.jsxs(H,{className:"px-md py-sm flex items-center justify-between border-b",children:[e&&o.jsx(D,{variant:"baseSemi",children:e}),t&&o.jsx(D,{variant:"smallCaps",color:"light",className:"gap-xs flex items-center",children:t})]}),o.jsx("div",{className:"gap-md px-md pb-md flex flex-col",children:n})]});function gke({wsc:e,onWscData:t,wscTitle:n,includeLabel:r=!0}){const{$t:s}=Z(),a=e?.labels,i=f.useRef(null),[l,c]=f.useState({width:0,height:0}),{isMobileStyle:u}=xe(),d=n||s({defaultMessage:"Pregame Highlights",id:"pTASonM2gu"}),m=e?.labels?.length>0;return f.useEffect(()=>{const p=new ResizeObserver(()=>{c({width:i.current?.clientWidth||0,height:i.current?.clientHeight||0})});return p.observe(document.body),()=>{p.disconnect()}},[]),m?o.jsxs(H,{className:"gap-md p-md md:gap-sm md:p-lg md:pb-md flex flex-col-reverse items-center justify-center md:flex-col md:border-l",children:[o.jsx("div",{className:"flex w-full flex-1 items-center justify-center",ref:i,children:o.jsx("div",{className:"flex aspect-video h-full items-center justify-center",children:l.width>0?o.jsx(dOt,{labels:a,onData:t,style:{width:u?void 0:l.width,height:u?l.height:void 0},className:"rounded shadow-md duration-200 ease-in-out hover:scale-[1.02]"}):o.jsx(yn,{className:"bg-subtle size-full self-stretch rounded-md"})})}),r&&o.jsx(D,{variant:"tiny",color:"light",className:"text-center",children:d})]}):null}const dsn=({event:e,onWscData:t,showWsc:n,league:r})=>{const{$t:s}=Z(),{isMobileStyle:a}=xe(),{setCelcius:i,weatherCondition:l,degrees:c,team1:u,team2:d,weekLabel:m,whereToWatch:p,gameLocation:h,roundName:g}=uke({event:e,league:r}),y=[u?.winner?u.color:"transparent","transparent",d?.winner?d.color:"transparent"],v=s0(e.event);return o.jsxs(sn,{className:"overflow-hidden",children:[!v&&o.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-r opacity-10 dark:opacity-20",style:{background:`linear-gradient(100deg, ${y.join(" , ")})`}}),o.jsx(fke,{roundName:g,setCelcius:i,weatherCondition:l??"",degrees:c,weekLabel:m,whereToWatch:p,gameLocation:h,isFinal:Um(e.event),league:r}),o.jsx(H,{className:"mx-md border-t"}),o.jsx(H,{children:o.jsxs("div",{className:"gap-xs p-md md:gap-md relative grid grid-cols-[1fr,1fr,1fr] overflow-hidden md:grid-cols-[1fr,3fr,1fr]",children:[o.jsxs("div",{className:"gap-md flex min-w-0 flex-col items-center justify-center md:flex-row",children:[o.jsx("div",{className:"block md:hidden",children:u&&o.jsx(sS,{team:u,isLive:v,position:"left"})}),u&&o.jsx(xM,{team:u,metadata:lM(u.record),hasPosession:v&&u.teamId===e.event.eventStatus.teamPossessionId,league:r,position:"left"})]}),o.jsxs("div",{className:"gap-sm flex items-center md:gap-0",children:[o.jsx("div",{className:"hidden flex-1 items-center justify-start md:flex",children:u&&o.jsx(sS,{team:u,isLive:v,position:"left"})}),o.jsx(dke,{event:e.event,final:Um(e.event),isLive:v}),o.jsx("div",{className:"hidden flex-1 items-center justify-end md:flex",children:d&&o.jsx(sS,{team:d,isLive:v,position:"right"})})]}),o.jsxs("div",{className:"gap-md flex min-w-0 flex-col items-center justify-center md:flex-row",children:[o.jsx("div",{className:"block md:hidden",children:d&&o.jsx(sS,{team:d,isLive:v,position:"right"})}),d&&o.jsx(xM,{team:d,metadata:lM(d.record),hasPosession:v&&d.teamId===e.event.eventStatus.teamPossessionId,league:r,position:"right"})]})]})}),o.jsx(H,{className:"mx-md border-t"}),o.jsxs("div",{className:B("md:pb-md grid",{"grid-cols-[65%,35%]":n}),children:[o.jsx("div",{className:"py-sm md:p-md flex w-full flex-1 items-center justify-center md:pb-0",children:o.jsx(ROt,{event:e,isLive:v})}),n&&o.jsx(gke,{wsc:e.wsc,onWscData:t,wscTitle:s({defaultMessage:"Game Highlights",id:"nX0XrAiLIA"}),includeLabel:!a})]}),v&&o.jsx(pke,{apns:e.apns})]})},sS=({team:e,isLive:t,position:n})=>o.jsxs(D,{variant:"page-title",color:e.winner||t?void 0:"light",className:"relative",children:[o.jsx(MO,{value:String(e.score),digitClassName:"font-mono"}),e.winner&&!t&&o.jsx(TO,{className:B("absolute top-1/2 -translate-y-1/2",{"-left-sm -translate-x-full rotate-180":n==="right","-right-sm translate-x-full":n==="left"})})]}),TO=({className:e})=>o.jsx("svg",{width:"6",viewBox:"0 0 18 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 0.322327L0.822266 17.5L18 34.6777V0.322327Z",className:"fill-foreground"})}),yke="text-right ml-4",vke="text-left",nI=({children:e,right:t,light:n,bold:r})=>o.jsx(H,{as:"th",className:"border-b border-dashed",children:o.jsx(D,{variant:"smallCaps",color:n?"light":void 0,className:B("pb-sm",{[yke]:t,[vke]:!t}),children:o.jsx("span",{className:r?"font-semibold":"",children:e})})}),rI=({children:e,right:t,bold:n,light:r,className:s})=>o.jsx("td",{children:o.jsx(D,{variant:n?"smallBold":"small",color:r?"light":void 0,className:B("pt-xs",{[yke]:t,[vke]:!t},s),children:e})});function ROt({event:e,isLive:t}){const{$t:n}=Z(),{locale:r}=Z(),{isMobileStyle:s}=xe(),a=e.event.scheduledPeriods??4,i=e.event.eventStatus.period&&e.event.eventStatus.period>a?e.event.eventStatus.period:a,l=G_(e.event.teams);return o.jsxs("table",{className:"p-md w-full border-separate",cellPadding:0,cellSpacing:0,children:[o.jsx("colgroup",{children:o.jsx("col",{className:"w-full"})}),o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx(nI,{light:!0,children:n({defaultMessage:"Team",id:"wsUmh9XWBm"})}),Array.from({length:i}).map((c,u)=>o.jsx(nI,{right:!0,light:!0,children:u<a?(u+1).toLocaleString(r):u===a?"OT":`${u-a+1}OT`},u)),o.jsx(nI,{right:!0,bold:!0,children:n({defaultMessage:"T",id:"sjlqAC/nrs"})})]})}),o.jsx("tbody",{children:l.map(({location:c,nickname:u,teamId:d,abbreviation:m,score:p,linescores:h})=>{const g=Object.fromEntries(h.map(({period:y,score:v})=>[y,v]));return o.jsxs("tr",{children:[o.jsxs(rI,{bold:!0,className:"relative",children:[t&&d===e.event.eventStatus.teamPossessionId&&o.jsx("span",{className:"-translate-x-xs pt-xs absolute right-full top-0 flex h-[1lh] items-center",children:o.jsx("span",{className:"size-xs bg-inverse inline-flex translate-y-px rounded-full"})}),o.jsx("span",{className:s?"uppercase":"",children:s?m:`${c} ${u}`})]}),Array.from({length:i}).map((y,v)=>o.jsx(rI,{right:!0,light:!0,children:o.jsx("span",{className:g[v+1]!==void 0?"":"opacity-50",children:g[v+1]??""})},v)),o.jsx(rI,{bold:!0,right:!0,children:p??""})]},u)})})]})}const xke=e=>!!e.extra.team_1_competitor_types?.map(n=>n.type).includes("team");function fsn({event:e}){const t=e.event.extra,n=xke(e.event),r=e.event.status==="live";return o.jsx("div",{className:"px-md flex w-full flex-col pb-3 pt-2",children:o.jsxs("div",{className:"gap-lg relative flex w-full items-center",children:[o.jsx("div",{className:"gap-sm flex flex-1",children:o.jsxs("div",{className:"flex flex-1 flex-col sm:gap-3",children:[o.jsx(Zse,{team:e.event.team_1,isDoubles:!!n,teamCompetitorTypes:t?.team_1_competitor_types,brands:e.brands}),o.jsx("div",{className:"bg-subtle my-1.5 h-px w-full sm:hidden"}),o.jsx(Zse,{team:e.event.team_2,isDoubles:!!n,teamCompetitorTypes:t?.team_2_competitor_types,brands:e.brands})]})}),o.jsx("div",{className:"flex h-full items-center justify-end",children:o.jsxs("div",{className:"gap-x-md relative grid h-full auto-cols-auto grid-flow-col",children:[o.jsx(N3e,{event:e.event,team1:e.event.team_1,team2:e.event.team_2,isLive:r}),(e.event.team_1.won||e.event.team_2.won)&&o.jsx(DOt,{event:e})]})})]})})}const Xse=(e,t={includeFirstInitial:!0})=>{const n=e.trim().split(/\s+/);if(n.length===0)return"";const[r,...s]=n,a=t.includeFirstInitial&&r?r[0]?.toUpperCase()+".":"";return s.length>0?`${a}${a?" ":""}${s.join(" ")}`:a.trim()},POt=(e,t={includeFirstInitial:!0})=>{try{const n=e.split(" / ");if(n.length!==2)return e;const[r="",s=""]=n;return`${Xse(r,t)} / ${Xse(s,t)}`}catch{return e}};function Zse({team:e,isDoubles:t,teamCompetitorTypes:n,brands:r}){const{isMobileStyle:s}=xe(),a=e.emphasis,i=t?o.jsx(o.Fragment,{children:POt(e.title??"",{includeFirstInitial:!0})}):s?e.abbreviation??e.title:e.title;return o.jsx("div",{className:"relative flex items-center",children:o.jsxs("div",{className:B("relative flex items-center",{"gap-md":t,"gap-sm":!t}),children:[t?o.jsx(LOt,{competitorTypes:n,brands:r}):e.img&&e.color&&o.jsx(Es,{logo:e.img,color:e.color,size:"small"}),e.seed&&o.jsx(D,{variant:"tinyRegular",color:"light",children:e.seed}),o.jsxs(D,{variant:"base",className:"font-regular max-sm:text-sm",children:[i,a&&" "]})]})})}const OOt="polygon(0 0, 100% 0, 100% calc(100% - 7px), calc(100% - 12px) calc(100% - 7px), calc(100% - 12px) 100%, 0 100%)",LOt=({competitorTypes:e,brands:t,className:n,topFlagClass:r})=>{const s=e?.filter(i=>i.type==="player").map(i=>t.find(c=>c.teamId===i.id));if(!s)return null;const a='after:content-[" "] after:absolute after:inset-0 after:border after:border-black/10';return o.jsxs("div",{className:B("-translate-y-three grid grid-cols-1 grid-rows-1 place-items-center",n),children:[o.jsx(Es,{logo:s[0]?.logo??"",color:s[0]?.color??"",size:"tiny",className:B(a,"relative col-start-1 row-start-1 !h-auto"),style:{clipPath:OOt}}),o.jsx(Es,{logo:s[1]?.logo??"",color:s[1]?.color??"",size:"tiny",className:B(a,"col-start-1 row-start-1 !h-auto translate-x-[6px] translate-y-[6px]",r)})]})},DOt=({event:e})=>o.jsxs("div",{className:"-right-md gap-sm absolute grid h-full grid-rows-2",children:[o.jsx("div",{className:"flex items-center",children:e.event.team_1.won&&o.jsx(TO,{className:"shrink-0"})}),o.jsx("div",{className:"flex items-center",children:e.event.team_2.won&&o.jsx(TO,{className:"shrink-0"})})]}),bke=({event:e,subtitles:t,headshots:n})=>{const{locale:r}=Z(),s=f.useMemo(()=>{if(!e.datetime)return null;const m=new Date(e.datetime);return isNaN(m.getTime())?null:m.toLocaleTimeString(r,{hour:"numeric",minute:"numeric",hour12:!0})},[e.datetime,r]),a=e.status==="live",i=e.status==="final",l=e.datetime&&new Date(e.datetime)>new Date,c=e.team_1.won||e.team_2.won,{isMobileStyle:u}=xe(),d=xke(e);return o.jsxs(H,{className:"group relative",children:[o.jsx(H,{className:"bg-subtler duration-quick absolute inset-0 opacity-0 transition-opacity group-hover:opacity-50",variant:"subtle"}),o.jsxs(Nu,{href:`/sports/atp/events/${e.id}`,className:B("p-md gap-y-md relative grid w-full flex-col",{"gap-y-sm":u}),children:[o.jsxs("div",{className:"gap-md flex items-center justify-between",children:[o.jsx(D,{variant:u?"tinyRegular":"small",color:"light",children:e.title[0]}),l?o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(D,{variant:u?"tinyRegular":"small",color:"light",children:s}),o.jsx(l3e,{className:"-mr-0.5"})]}):a?o.jsx(ap,{className:"-mr-0.5",includeDot:!0}):i&&o.jsx(Z_,{className:"-mr-0.5"})]}),o.jsxs(H,{className:"gap-lg flex w-full items-center",children:[o.jsx("div",{className:"gap-sm flex flex-1",children:o.jsxs("div",{className:B("flex flex-1 flex-col gap-[12px]",{"gap-sm":u}),children:[o.jsx(Jse,{team:e.team_1,headshotImageUrl:n?.team1??null,anyWinner:c,subtitle:t?.team1,isDoubles:d,serving:e.team_1.emphasis,isLive:a}),o.jsx(Jse,{team:e.team_2,headshotImageUrl:n?.team2??null,anyWinner:c,subtitle:t?.team2,isDoubles:d,serving:e.team_2.emphasis,isLive:a})]})}),o.jsx("div",{className:"flex h-full items-center justify-end",children:o.jsx(N3e,{event:e,team1:e.team_1,team2:e.team_2,isLive:a})})]})]})]})},Jse=({team:e,headshotImageUrl:t,anyWinner:n,subtitle:r,isDoubles:s,serving:a,isLive:i})=>{const l=e.won,{isMobileStyle:c}=xe();return o.jsxs("div",{className:B("gap-sm flex items-center",{"opacity-30 grayscale":n&&!l}),children:[o.jsx(Q8t,{headshotImageUrl:t??void 0,flagUrl:e.img??void 0,name:e.title??"",isCompositeFlag:s}),o.jsxs("div",{children:[o.jsxs(D,{variant:c?"smallBold":"baseSemi",className:"gap-xs flex items-center",children:[e.title,l&&o.jsx(H,{variant:"superLight",className:"p-xs ml-auto inline-flex aspect-square rounded-full",children:o.jsx(zM,{size:12,className:"text-super"})}),a&&i&&o.jsx(ce,{icon:g9e,size:14,className:"text-super"})]}),typeof r=="string"?o.jsx(D,{variant:"micro",color:"light",className:"-mt-0.5",children:r}):r]})]})},eae=e=>e.toISOString().split("T")[0];function FOt({events:e,players:t}){const n=f.useMemo(()=>e.reduce((l,c)=>{let u="";if(c.datetime){const d=new Date(c.datetime),m=d.getFullYear(),p=String(d.getMonth()+1).padStart(2,"0"),h=String(d.getDate()).padStart(2,"0");u=`${m}-${p}-${h}`}return l[u]=l[u]||[],l[u]?.push(c),l},{}),[e]),r=f.useMemo(()=>{const l=new Date,c=eae(l),u=Object.keys(n);return u.length===0?c:u.reduce((d,m)=>{const p=new Date(m+"T00:00:00"),h=new Date(d+"T00:00:00"),g=Math.abs(p.getTime()-l.getTime()),y=Math.abs(h.getTime()-l.getTime());return g<y?m:d})},[n]),[s,a]=f.useState(new Date(r+"T00:00:00")),i=n[eae(s)??""];return!i||i?.length===0?null:o.jsxs(H,{className:"mt-lg",children:[o.jsx(Y9t,{selectedDate:s,setSelectedDate:a,eventsByDay:n}),o.jsx(sn,{className:"overflow-hidden",children:o.jsx("div",{className:"grid",children:o.jsx(UOt,{events:i??[],players:t})})})]})}const UOt=({events:e,players:t})=>{const{locale:n}=Z(),r=f.useCallback(a=>{if(!a)return null;const i=new Date(a);if(isNaN(i.getTime()))return null;const l=new Date,c=i.getFullYear()!==l.getFullYear();return i.toLocaleDateString(n,{month:"short",day:"numeric",...c?{year:"numeric"}:{}})},[n]),{isMobileStyle:s}=xe();return o.jsxs("div",{className:"grid",children:[o.jsxs(H,{className:"px-md py-sm gap-sm flex w-full flex-row items-center justify-between",variant:"subtler",children:[o.jsx(D,{variant:s?"tiny":"smallBold",children:r(e[0]?.datetime)}),o.jsx(D,{variant:s?"tinyRegular":"small",color:"light",children:e[0]?.title[1]})]}),o.jsx("div",{className:"grid divide-y",children:e.map(a=>o.jsx(BOt,{event:a,players:t},a.id))})]})},BOt=({event:e,players:t})=>{const{europe:n,world:r}=ew(),s={team1:o.jsx(D,{variant:"micro",color:"light",className:"-mt-0.5",style:{color:n},children:"Team Europe"}),team2:o.jsx(D,{variant:"micro",color:"light",className:"-mt-0.5",style:{color:r},children:"Team World"})},a=t.world.concat(t.europe),i=a.find(u=>u.teamId===e.team_1.id),l=a.find(u=>u.teamId===e.team_2.id),c={team1:i?.logo_secondary??null,team2:l?.logo_secondary??null};return o.jsx(bke,{event:e,subtitles:s,headshots:c})},VOt=async(e,t)=>{if(!t)return null;const n=await se.POST("/rest/sports/{league}/widget","sports-widget",{body:t,params:{path:{league:e}}});if(n?.error)throw new Ce("API_CLIENTS_ERROR",{cause:n.error,details:t});return n.data},$Ot=({data:e})=>{const{data:t}=We({...tb,queryKey:["/sports/widget",e.events.map(r=>r.id).join(",")],queryFn:()=>VOt(e.league,e.debug_fn_args),placeholderData:Ud,refetchInterval:3e4}),n=t||e;return n?.object!==e.object?null:o.jsx(y3e,{canonicalPageLink:n?.canonical_pages?.[0]?.url_web,children:o.jsx("div",{className:"divide-y overflow-hidden",children:n?.events?.map(r=>o.jsx(bke,{event:r},r.id))})})},kv=I.memo(({data:e})=>Br(e).with({object:"SportsEventsWidget"},t=>t.league==="atp"||t.league==="wta"?o.jsx($Ot,{data:t}):o.jsx(g8t,{widget:t})).with({object:"SportsStandingsWidget"},t=>o.jsx(Y8t,{widgetData:t})).with({object:"SportsIndvScheduleWidget"},t=>o.jsx(D8t,{widgetData:t})).with({object:"SportsIndvEventsWidget"},t=>o.jsx(P8t,{widgetData:t})).exhaustive());kv.displayName="SportsWidget";function WOt({csvString:e,filename:t="perplexity.csv"}){if(typeof window>"u")throw new Error("Attempting to download a CSV file in a server context.");try{const n=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(n){throw n}}function HOt(){return f.useCallback(e=>{WOt(e)},[])}var sI,tae;function zOt(){if(tae)return sI;tae=1;var e=typeof Element<"u",t=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(a,i){if(a===i)return!0;if(a&&i&&typeof a=="object"&&typeof i=="object"){if(a.constructor!==i.constructor)return!1;var l,c,u;if(Array.isArray(a)){if(l=a.length,l!=i.length)return!1;for(c=l;c--!==0;)if(!s(a[c],i[c]))return!1;return!0}var d;if(t&&a instanceof Map&&i instanceof Map){if(a.size!==i.size)return!1;for(d=a.entries();!(c=d.next()).done;)if(!i.has(c.value[0]))return!1;for(d=a.entries();!(c=d.next()).done;)if(!s(c.value[1],i.get(c.value[0])))return!1;return!0}if(n&&a instanceof Set&&i instanceof Set){if(a.size!==i.size)return!1;for(d=a.entries();!(c=d.next()).done;)if(!i.has(c.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(i)){if(l=a.length,l!=i.length)return!1;for(c=l;c--!==0;)if(a[c]!==i[c])return!1;return!0}if(a.constructor===RegExp)return a.source===i.source&&a.flags===i.flags;if(a.valueOf!==Object.prototype.valueOf&&typeof a.valueOf=="function"&&typeof i.valueOf=="function")return a.valueOf()===i.valueOf();if(a.toString!==Object.prototype.toString&&typeof a.toString=="function"&&typeof i.toString=="function")return a.toString()===i.toString();if(u=Object.keys(a),l=u.length,l!==Object.keys(i).length)return!1;for(c=l;c--!==0;)if(!Object.prototype.hasOwnProperty.call(i,u[c]))return!1;if(e&&a instanceof Element)return!1;for(c=l;c--!==0;)if(!((u[c]==="_owner"||u[c]==="__v"||u[c]==="__o")&&a.$$typeof)&&!s(a[u[c]],i[u[c]]))return!1;return!0}return a!==a&&i!==i}return sI=function(i,l){try{return s(i,l)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},sI}var GOt=zOt();const qOt=Bo(GOt),_ke=I.memo(({domain:e,url:t,suffix:n,overflowCount:r,...s})=>{if(!t&&!e)return null;const a=e||aU(t).replace(/^[a-z]{1,2}\./i,""),i=n?`${a}.${n}`:a,l=r&&r>0?o.jsxs("span",{className:"opacity-50",children:["+",r]}):void 0;return o.jsx($l,{label:i,accessory:l,truncate:!0,...s})});_ke.displayName="CitationDomainBubble";const wke=I.memo(function({href:t,overflowCount:n,getAttachmentUrl:r,onCitationClick:s,...a}){const[i,l]=f.useState(!1),[c,u]=f.useState(null),d=f.useCallback(async y=>{if(s?.(y),y?.defaultPrevented||!t||!r)return;const v=await r(t);Za(t)&&(u(v),l(!0))},[s,r,t]),m=n&&n>0?o.jsxs("span",{className:"opacity-50",children:["+",n]}):void 0,p=f.useCallback(()=>l(!1),[]),h=f.useMemo(()=>({src:c??void 0}),[c]);return Yb(t||"")?o.jsx($l,{accessory:m,icon:bie,className:"cursor-pointer",truncate:!0,onClick:d,...a}):o.jsxs(o.Fragment,{children:[o.jsx($l,{accessory:m,icon:L7,className:"cursor-pointer",truncate:!0,onClick:d,...a}),c&&o.jsx(Xb,{isOpen:i,onClose:p,imgProps:h})]})});wke.displayName="FileCitationBubble";const Cke=I.memo(({children:e,webResults:t,citationGroup:n,contentProps:r,hideHoverCard:s=!1,trackEvent:a,getAttachmentUrl:i,openMemorySearchHistoryModal:l,onCitationClick:c,forceExternalHandler:u})=>{const[d,m]=f.useState(!1),[p,h]=f.useState(!1),[g,y]=f.useState(null),[v,x]=f.useState(!1),[b,_]=f.useState(null),w=Tb(),C=Z(),{isMobileStyle:S}=xe(),E=f.useCallback(()=>x(!1),[]),M=f.useMemo(()=>({src:b??void 0}),[b]),k=f.useMemo(()=>t.every(L=>L.is_conversation_history),[t]),A=f.useCallback(()=>{if(k)return C.formatMessage({defaultMessage:"Library",id:"StcK672jB9"});switch(n.category){case"memory":return C.formatMessage({defaultMessage:"Memory",id:"dVx3yznM2C"});case"attachment":return C.formatMessage({defaultMessage:"Attachments",id:"Vlx13nOMtX"});case"youtube":return C.formatMessage({defaultMessage:"YouTube",id:"zuA3BgDC6u"});default:return C.formatMessage({defaultMessage:"Sources",id:"fhwTpAcBLC"})}},[n.category,k,C]),R=f.useCallback(L=>async P=>{if(P.preventDefault(),L.is_conversation_history||L.is_memory)if(c){c(L,P);return}else if(l){l(L);return}else{console.warn("Memory/conversation history modal handler not provided");return}if(L.url?My(L.url):null){y(L),h(!0),m(!1);return}const T=L.is_attachment||!1,j=Za(L.url);if(T&&j&&i){const F=await i(L.url);_(F),x(!0),m(!1);return}if(T&&Ey(L)&&i){const F=await i(L.url);window.open(F,"_blank");return}if(a&&L.url&&a("click citation",{source:"grouped_hovercard",citation_url:L.url}),u&&c){c(L,P);return}oU(L)&&window.open(L.url,"_blank")},[c,l,a,i,u]),O=f.useCallback(L=>{const P=L.is_memory?o.jsx(ce,{icon:Kc,size:"sm"}):L.is_conversation_history?o.jsx(ce,{icon:Zg,size:"sm"}):o.jsx(Oo.Icon,{url:L.url,isAttachment:L.is_attachment||!1,connectionType:L.meta_data?.connection_type}),N=L.meta_data?.connection_type,T=N==="WILEY"?"Wiley":N||L.is_memory||L.is_conversation_history?L.name:void 0,j=L.is_memory?L.snippet:L.name;return o.jsxs("div",{className:"hover:bg-subtler relative flex min-w-0 cursor-pointer select-none items-start gap-3 rounded-lg px-2 py-1.5 align-top",children:[o.jsx("span",{className:"mt-two shrink-0",children:P}),o.jsxs("span",{className:B("flex min-w-0 select-none",{"gap-two flex-col items-start":L.is_memory,"gap-xs items-center":!L.is_memory}),children:[j&&o.jsx(D,{className:B("min-w-0 shrink",{"truncate text-ellipsis":!L.is_memory},{"line-clamp-2":L.is_memory}),variant:"small",as:"span",children:j}),!k&&o.jsx(D,{variant:"tinyMono",color:"light",className:"shrink-0",children:o.jsx(Oo.Source,{url:L.url,source:T,isAttachment:L.is_attachment||!1,connectionType:L.meta_data?.connection_type,isMemory:L.is_memory||!1,isConversationHistory:L.is_conversation_history||!1})})]})]})},[k]);return o.jsxs(o.Fragment,{children:[g&&g.url&&o.jsx(Jb,{isOpen:p,name:g.name,setisOpen:h,url:g.url}),b&&o.jsx(Xb,{isOpen:v,onClose:E,imgProps:M}),o.jsxs(z3e,{onOpenChange:L=>{m(s?!1:L)},open:d,openDelay:0,closeDelay:S?0:200,children:[o.jsx(G3e,{asChild:!0,onPointerDown:L=>{(S||L.pointerType==="touch")&&m(!0)},children:e}),o.jsx(q3e,{children:o.jsx(K3e,{className:B({"data-open:animate-in data-open:zoom-in-[0.97] data-open:fade-in data-closed:animate-out data-closed:zoom-out-[0.97] data-closed:fade-out data-[side=bottom]:origin-top data-[side=top]:origin-bottom":!w}),side:"bottom",sideOffset:8,collisionPadding:S?8:10,align:S?"center":"start",...r,children:o.jsxs("div",{className:B("bg-base dark:border-subtler rounded-xl border pt-3 shadow-lg",{"w-96":!S,"w-[calc(100vw-16px)]":S}),children:[o.jsxs("div",{className:"gap-two flex px-5 pb-2 pt-1",children:[o.jsx(D,{variant:"tinyMono",children:A()}),o.jsx(D,{variant:"tinyMono",as:"span",color:"light",className:"mx-two",children:""}),o.jsx(D,{variant:"tinyMono",color:"light",children:n.totalCount||t.length})]}),o.jsx("div",{className:"max-h-60 overflow-y-auto px-3 pb-3 [scrollbar-gutter:stable]",children:o.jsx("div",{className:"space-y-px",children:t.map((L,P)=>o.jsx(Ge,{className:"block",href:L.url||"#",target:"_blank",rel:"noopener nofollow",onClick:R(L),children:O(L)},L.url||P))})})]})})})]})]})});Cke.displayName="GroupedCitationHoverCard";const Ske=I.memo(({ytID:e,timestamp:t,overflowCount:n,...r})=>{const[s,a]=f.useState(!1),i=f.useCallback(()=>a(!0),[]),l=n&&n>0?o.jsxs("span",{className:"opacity-50",children:["+",n]}):void 0;return o.jsxs(o.Fragment,{children:[o.jsx($l,{label:"youtube",accessory:l,icon:Kie,onClick:i,className:"cursor-pointer",...r}),e&&o.jsx(Jb,{url:`https://www.youtube.com/watch?v=${e}`,name:"",isOpen:s,setisOpen:a,timestamp:t})]})});Ske.displayName="YoutubeCitationBubble";const KOt="_entity_chip",nae="pplx-entity-id";function msn(e){const t=e.match(/^pplx:\/\/entity_chip\/(?<id>.+)$/);if(!(!t||!t.groups?.id))return t.groups.id}const YOt={side:"bottom",align:"start"};var Ga;(function(e){e.YOUTUBE="youtube",e.FILE="file",e.MEMORY="memory",e.CONVERSATION_HISTORY="conversation_history",e.WEB="web",e.NUMBERED="numbered"})(Ga||(Ga={}));function QOt(e){if(e){if(e.is_memory)return Kc;if(e.is_conversation_history)return Zg}}function XOt(e){const{ytID:t,isMobileStyle:n,isFile:r,isMemory:s,isConversationHistory:a,enableCitationGrouping:i}=e;return t&&!n?Ga.YOUTUBE:r?Ga.FILE:i?s?Ga.MEMORY:a?Ga.CONVERSATION_HISTORY:Ga.WEB:Ga.NUMBERED}function ZOt(e){const t=e.indexOf("&t=");return t!==-1?e.substring(t+3):void 0}function JOt({count:e}){return!e||e<=0?null:o.jsxs("span",{className:"pl-two opacity-50",children:["+",e]})}const rW=I.memo(e=>{const{str:t,href:n,className:r,trackEvent:s,isFile:a,isDownloadable:i,citationSize:l,onCitationClick:c,getAttachmentUrl:u,isMemory:d,isConversationHistory:m,citationGroup:p,enableCitationGrouping:h,citationDomain:g,fileName:y,webResult:v,ref:x,forceExternalHandler:b,..._}=e,{isMobileStyle:w}=xe(),C=e3.test(t),S=f.useCallback(()=>{s?.("click citation",{source:"inline",citation_url:n})},[n,s]),E=f.useMemo(()=>{const F=p?.overflowCount;return!F||F<=0?null:o.jsx(JOt,{count:F})},[p?.overflowCount]);if(!C)return o.jsx("span",{children:t});const M=ZOt(n),k=My(n),A=t.replace(/\[|\]|,.*$/g,""),O=!!(n&&!d&&!m&&(!(k||i)||w)),L=XOt({ytID:k,isMobileStyle:w,isFile:a,isMemory:d,isConversationHistory:m,enableCitationGrouping:h}),P=h&&p&&p.citations.length>1,N=w&&P,T=!O||N||b?"onClick":"external";let j;switch(L){case Ga.YOUTUBE:j=k&&o.jsx(Ske,{...!h&&{label:A},ytID:k,overflowCount:p?.overflowCount??0,timestamp:M,size:l});break;case Ga.FILE:j=o.jsx(wke,{label:h?y??A:A,overflowCount:p?.overflowCount??0,size:l,href:n,getAttachmentUrl:i?u:void 0,onCitationClick:c});break;case Ga.NUMBERED:{const F=QOt(v);j=F?o.jsx($l,{label:A,icon:F,size:l,onClick:c,href:n,linkBehavior:T,trackEvent:s}):o.jsx(hT,{label:A,size:l,onClick:c,href:n,linkBehavior:T,trackEvent:s});break}case Ga.MEMORY:j=o.jsx($l,{label:v?.name.toLocaleLowerCase(),icon:Kc,accessory:E,size:l,truncate:!0,onClick:c,linkBehavior:"onClick"});break;case Ga.CONVERSATION_HISTORY:j=o.jsx($l,{label:"library",icon:Zg,accessory:E,size:l,truncate:!1,onClick:c,linkBehavior:"onClick"});break;case Ga.WEB:default:j=o.jsx(_ke,{domain:g,url:n,overflowCount:p?.overflowCount??0,size:l,href:n,linkBehavior:T,trackEvent:s,onClick:N||b?c:S})}return o.jsx("span",{className:B(r,"citation inline"),ref:x,..._,children:j})});rW.displayName="MdStringToLink";const e7t=function(t){const{ref:n,...r}=t,{anchor:s,className:a,...i}=r,l=d=>{const m=document.getElementById(d);m&&m.scrollIntoView({behavior:"smooth"})},c=s.replace(/\[|\]/g,""),u=f.useCallback(()=>l(`#search${s}`),[s]);return o.jsx(Ge,{href:`#search${s}`,onClick:u,className:a,ref:n,...i,children:o.jsx(hT,{label:c})})},psn=e=>{const{hideHoverCard:t=!1,trackEvent:n,citationSize:r,onCitationClick:s,getAttachmentUrl:a,enableCitationGrouping:i=!1,webResults:l=[],EntityChipComponent:c,inlineTokenAnnotationsLookup:u,forceExternalHandler:d}=e;return I.memo(p=>{const{className:h,href:g,title:y,children:v,target:x="_blank",node:b,ref:_,...w}=p,C=b?.data?.webResult,S=C?.is_attachment??!1,E=b?.data?.webResultCitation,M=C?.is_memory??!1,k=C?.is_conversation_history??!1,{$t:A}=Z(),R=i&&b?.data?b.data.citationGroup:void 0,{isMobileStyle:O}=xe(),L=f.useCallback(V=>{if(R&&R.citations.length>1&&O){V?.preventDefault();return}if(i&&R&&R.citations.length>0&&(C?.is_memory||C?.is_conversation_history)){const z=R.citations[0],Q=l?.[z-1];Q&&s&&s(Q,V)}else C&&s&&s(C,V)},[C,R,O]),P=f.useMemo(()=>{if(!b||!u||!(nae in b.properties))return;const V=b.properties[nae];if(typeof V!="string")return;const $=u[V];if($&&$.annotation_type===Vq.FINANCE){const z=$.data;return z?.symbol?{id:$.id,annotation_type:$.annotation_type,symbol:z.symbol,quoteUrl:z.quote_url||""}:void 0}},[b]),N=f.useCallback(()=>{n&&P&&n("click entity chip",{type:P.annotation_type,symbol:P.symbol})},[P]),T=f.useMemo(()=>({side:"bottom"}),[]),j=f.useMemo(()=>C?{onClick(V){n&&n("click citation",{source:"inline hoverCard",citation_url:C.url}),L(V)}}:void 0,[C,L]),F=f.useMemo(()=>({color:"light"}),[]);let U;switch(y){case"_citation":{if(R?.isHidden)return null;U=o.jsx(rW,{isMemory:M,isConversationHistory:k,onCitationClick:L,className:h,str:I.Children.toArray(v).join(""),href:g,rel:"nofollow noopener",trackEvent:n,isFile:S,isDownloadable:C?Ey(C):!1,citationSize:r,getAttachmentUrl:a,citationGroup:R,enableCitationGrouping:i,citationDomain:C?.meta_data?.citation_domain_name,fileName:C?.name,webResult:C,ref:_,forceExternalHandler:d});break}case"_anchor_citation":{U=o.jsx(e7t,{anchor:I.Children.toArray(v).join(""),className:h,ref:_,...w});break}case KOt:return!P||!c?null:o.jsx(c,{type:Vq.FINANCE,data:P,className:h,onClick:N,ref:_});default:{const{"aria-label":V,onClick:$,...z}=w,Q=(()=>{if(!(!l?.length||!g))return l.find(G=>G.url===g)})(),Y=Q!==void 0,W=!!(!Y&&y),X=o.jsx(mve,{variant:"inline",href:g,target:x,title:W?y:void 0,rel:"nofollow noopener",ref:_,bold:!0,__dangerousDoNotUseOnClick:$,...z,children:v});Y?U=o.jsx(Bg,{result:Q,contentProps:YOt,children:X}):U=X}}if(C){if(i&&R&&R.citations.length>1){const $=R.citations.map(z=>l[z-1]).filter(z=>z!==void 0);return o.jsx(Cke,{webResults:$,citationGroup:R,hideHoverCard:t,trackEvent:n,getAttachmentUrl:a,onCitationClick:s,contentProps:T,forceExternalHandler:d,children:U})}return o.jsx(Bg,{hideHoverCard:t,contentProps:T,linkProps:j,result:C,trackEvent:n,timestampComponent:b3.isRecentlyTrending(C)?o.jsx(x3,{recentlyUpdatedLabel:A({defaultMessage:"Just now",description:"Label for recently updated content",id:"FlgDFQFpF1"}),timestamp:C.meta_data?.published_date,timestampProps:F,children:"Updated"}):null,webResultCitation:E,getAttachmentUrl:a,children:U})}return U},qOt)},Eke=I.memo(({status:e})=>o.jsx(D,{as:"span",variant:"smallBold",color:e?"super":"light",children:o.jsx(ce,{icon:e?Sr:Rt,size:"md"})}));Eke.displayName="BoolCell";const Mke=I.memo(({url:e})=>o.jsx(Ge,{href:e,target:"_blank",rel:"noopener",className:"top-xs relative inline-block transition-opacity duration-300 hover:opacity-50",children:o.jsx(Oo,{color:"light",variant:"tiny",url:e,isAttachment:!1})}));Mke.displayName="LinkCell";const t2=I.memo(({text:e})=>o.jsx(D,{as:"span",variant:"tiny",className:"text-pretty break-words font-normal",children:e}));t2.displayName="TextCell";const kke=function(e){if(e==null)return s7t;if(typeof e=="function")return gT(e);if(typeof e=="object")return Array.isArray(e)?t7t(e):n7t(e);if(typeof e=="string")return r7t(e);throw new Error("Expected function, string, or object as test")};function t7t(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=kke(e[n]);return gT(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function n7t(e){const t=e;return gT(n);function n(r){const s=r;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function r7t(e){return gT(t);function t(n){return n&&n.type===e}}function gT(e){return t;function t(n,r,s){return!!(a7t(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function s7t(){return!0}function a7t(e){return e!==null&&typeof e=="object"&&"type"in e}const Tke=[],o7t=!0,rae=!1,i7t="skip";function l7t(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const a=kke(s),i=r?-1:1;l(e,void 0,[])();function l(c,u,d){const m=c&&typeof c=="object"?c:{};if(typeof m.type=="string"){const h=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(c.type+(h?"<"+h+">":""))+")"})}return p;function p(){let h=Tke,g,y,v;if((!t||a(c,u,d[d.length-1]||void 0))&&(h=c7t(n(c,d)),h[0]===rae))return h;if("children"in c&&c.children){const x=c;if(x.children&&h[0]!==i7t)for(y=(r?x.children.length:-1)+i,v=d.concat(x);y>-1&&y<x.children.length;){const b=x.children[y];if(g=l(b,y,v)(),g[0]===rae)return g;y=typeof g[1]=="number"?g[1]:y+i}}return h}}}function c7t(e){return Array.isArray(e)?e:typeof e=="number"?[o7t,e]:e==null?Tke:[e]}function Fp(e,t,n,r){let s,a,i;typeof t=="function"&&typeof n!="function"?(a=void 0,i=t,s=n):(a=t,i=n,s=r),l7t(e,a,l,s);function l(c,u){const d=u[u.length-1],m=d?d.children.indexOf(c):void 0;return i(c,m,d)}}class sae{static stringArrayToCSV(t){return t.map(this.escapeCSVString).join(",")}static escapeCSVString(t){return`"${t.replace(/"/g,'""')}"`}static tableCellToText(t){const n=[];let r="";return Fp(t,[{type:"text"},{tagName:"br"},{tagName:"a"}],s=>{if(s.type==="element"&&s.tagName==="br"){n.push(`
`);return}s.type==="element"&&s.tagName==="a"&&s.properties?.href&&(r=String(s.properties.href)),s.type==="text"&&n.push(s.value.trim())}),r||n.join("")}static tableToCSV(t){if(t.tagName!=="table")throw new Error("Attempting to convert node of wrong tagName to CSV from 'table'");try{const n=[];let r="";return Fp(t,{tagName:"thead"},s=>{const a=[];Fp(s,{tagName:"th"},i=>{const l=this.tableCellToText(i);a.push(l)}),n.push(this.stringArrayToCSV(a)),r+=a.join("-").replace(/[^a-z0-9\\-]/gi,"")}),Fp(t,{tagName:"tbody"},s=>{Fp(s,{tagName:"tr"},a=>{const i=[];Fp(a,{tagName:"td"},l=>{const c=this.tableCellToText(l);i.push(c)}),n.push(this.stringArrayToCSV(i))})}),{csvString:n.join(`
`),filename:r}}catch(n){throw new Error(`Error attempting to convert table node to CSV string: ${n}`)}}}const Nke=I.memo(({tableData:e,citationOffset:t})=>{const{$t:n}=Z(),{trackEvent:r}=Ne(),{data:s,column_metadata:a,search_results:i}=e,l=f.useMemo(()=>a.reduce((g,{name:y,display_name:v})=>(g[y]=v,g),{}),[a]),c=f.useMemo(()=>a.reduce((g,{name:y,display_format:v})=>(g[y]=v,g),{}),[a]),u=f.useCallback((g,y)=>g.value===null&&y.value===null?0:g.value===null?-1:y.value===null?1:typeof g.value=="string"?String(g.value).localeCompare(String(y.value)):Number(g.value)-Number(y.value),[]),d=f.useCallback(({data:g,id:y,...v})=>{const x=c[y],b=g[y]?.citation_index??null,_=b!==null?i[b]:null,w=_?.is_attachment??!1,C=g[y]?.value;let S=o.jsx(t2,{text:String(C)});return x==="url"&&(S=o.jsx(Mke,{url:String(C)})),x==="boolean"&&(S=o.jsx(Eke,{status:!!C})),x==="long_text"&&(S=o.jsx(t2,{text:String(C)})),x==="date"&&(S=o.jsx(t2,{text:String(C)})),C===null?o.jsx("td",{...v,children:o.jsx(D,{variant:"tiny",color:"ultraLight",children:o.jsx(ce,{icon:GM,size:"xs"})})}):o.jsxs("td",{...v,children:[o.jsx("span",{children:S}),x!=="url"&&_&&_.url&&b!==null&&o.jsx(Bg,{result:_,children:o.jsx(rW,{str:`[${b+t+1}]`,href:_.url,isFile:w,isDownloadable:Ey(_),className:B("citation ml-xs inline")})})]})},[i,c,t]),m=f.useMemo(()=>a.map(({name:g})=>({name:g,label:l[g],sortable:!0,resizable:!0})),[a,l]),p=HOt(),h=f.useCallback(()=>{const g=a.reduce((b,_)=>(b.push(_.name),b),[]).join("-"),y=a.map(({display_name:b})=>sae.escapeCSVString(b)).join(","),v=s.map(b=>a.map(({name:_})=>sae.escapeCSVString(String(b[_]?.value))).join(",")),x=[y,...v].join(`
`);return r("clicked download table as csv",{source:"widget"}),p({csvString:x,filename:g})},[a,s,p,r]);return o.jsx(Ci,{widgetType:"table",widgetName:"table",widgetSize:"full",children:o.jsxs(H,{variant:"subtler",className:"px-md pb-xs rounded-lg",children:[o.jsx(X3e,{data:s,columns:m,RowCell:d,compareFunction:u}),o.jsx(H,{className:"border-subtlest py-sm flex justify-end border-t",children:o.jsx(Te,{icon:mb,variant:"super",onClick:h,pill:!0,size:"tiny",text:n({defaultMessage:"Export CSV",id:"TE51b7zSWC"}),toolTip:n({defaultMessage:"Download Table as CSV",id:"X3dYB0f+/Q"})})})]})})});Nke.displayName="TableWidget";const jke=f.memo(({children:e,defaultExpanded:t=!1,title:n})=>{const{$t:r}=Z(),[s,a]=f.useState(t),i=f.useCallback(()=>{a(c=>!c)},[]),l=f.useMemo(()=>s?Dn:Kn,[s]);return o.jsx(zs,{className:"overflow-hidden",transition:{duration:.3,ease:rn},children:o.jsxs("div",{children:[o.jsx(he,{variant:"common",text:n??r({defaultMessage:"Advanced",id:"3Rx6Qo1x+1"}),onClick:i,size:"tiny",icon:l,noPadding:!0,extraCSS:"!bg-transparent hover:!bg-subtler"}),o.jsx(Qr,{children:s&&o.jsx("div",{className:"pt-2",children:e})})]})})});jke.displayName="AutomationAdvancedSection";const u7t=[{value:"ONCE",label:"Once"},{value:"DAILY",label:"Daily"},{value:"WEEKLY",label:"Weekly"},{value:"WEEKDAYS",label:"Every weekday"},{value:"MONTHLY",label:"Monthly"},{value:"YEARLY",label:"Yearly"}],d7t=[{value:"0",label:"Sunday"},{value:"1",label:"Monday"},{value:"2",label:"Tuesday"},{value:"3",label:"Wednesday"},{value:"4",label:"Thursday"},{value:"5",label:"Friday"},{value:"6",label:"Saturday"}],f7t=[...Array(31)].map((e,t)=>({value:String(t+1),label:String(t+1)})),m7t=[{value:"0",label:"January"},{value:"1",label:"February"},{value:"2",label:"March"},{value:"3",label:"April"},{value:"4",label:"May"},{value:"5",label:"June"},{value:"6",label:"July"},{value:"7",label:"August"},{value:"8",label:"September"},{value:"9",label:"October"},{value:"10",label:"November"},{value:"11",label:"December"}];var Dt=function(){return Dt=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Dt.apply(this,arguments)};function p7t(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Ake(e,t,n){for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function tw(e){return e.mode==="multiple"}function nw(e){return e.mode==="range"}function yT(e){return e.mode==="single"}var h7t={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function g7t(e,t){return _u(e,"LLLL y",t)}function y7t(e,t){return _u(e,"d",t)}function v7t(e,t){return _u(e,"LLLL",t)}function x7t(e){return"".concat(e)}function b7t(e,t){return _u(e,"cccccc",t)}function _7t(e,t){return _u(e,"yyyy",t)}var w7t=Object.freeze({__proto__:null,formatCaption:g7t,formatDay:y7t,formatMonthCaption:v7t,formatWeekNumber:x7t,formatWeekdayName:b7t,formatYearCaption:_7t}),C7t=function(e,t,n){return _u(e,"do MMMM (EEEE)",n)},S7t=function(){return"Month: "},E7t=function(){return"Go to next month"},M7t=function(){return"Go to previous month"},k7t=function(e,t){return _u(e,"cccc",t)},T7t=function(e){return"Week n. ".concat(e)},N7t=function(){return"Year: "},j7t=Object.freeze({__proto__:null,labelDay:C7t,labelMonthDropdown:S7t,labelNext:E7t,labelPrevious:M7t,labelWeekNumber:T7t,labelWeekday:k7t,labelYearDropdown:N7t});function A7t(){var e="buttons",t=h7t,n=Ffe,r={},s={},a=1,i={},l=new Date;return{captionLayout:e,classNames:t,formatters:w7t,labels:j7t,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:a,styles:i,today:l,mode:"default"}}function I7t(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,s=e.toMonth,a=e.fromDate,i=e.toDate;return r?a=no(r):t&&(a=new Date(t,0,1)),s?i=B5(s):n&&(i=new Date(n,11,31)),{fromDate:a?Ed(a):void 0,toDate:i?Ed(i):void 0}}var Ike=f.createContext(void 0);function R7t(e){var t,n=e.initialProps,r=A7t(),s=I7t(n),a=s.fromDate,i=s.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!a||!i)&&(l="buttons");var c;(yT(n)||tw(n)||nw(n))&&(c=n.onSelect);var u=Dt(Dt(Dt({},r),n),{captionLayout:l,classNames:Dt(Dt({},r.classNames),n.classNames),components:Dt({},n.components),formatters:Dt(Dt({},r.formatters),n.formatters),fromDate:a,labels:Dt(Dt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Dt(Dt({},r.modifiers),n.modifiers),modifiersClassNames:Dt(Dt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Dt(Dt({},r.styles),n.styles),toDate:i});return I.createElement(Ike.Provider,{value:u},e.children)}function xr(){var e=f.useContext(Ike);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function Rke(e){var t=xr(),n=t.locale,r=t.classNames,s=t.styles,a=t.formatters.formatCaption;return I.createElement("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id},a(e.displayMonth,{locale:n}))}function P7t(e){return I.createElement("svg",Dt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e),I.createElement("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"}))}function Pke(e){var t,n,r=e.onChange,s=e.value,a=e.children,i=e.caption,l=e.className,c=e.style,u=xr(),d=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:P7t;return I.createElement("div",{className:l,style:c},I.createElement("span",{className:u.classNames.vhidden},e["aria-label"]),I.createElement("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:r},a),I.createElement("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true"},i,I.createElement(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})))}function O7t(e){var t,n=xr(),r=n.fromDate,s=n.toDate,a=n.styles,i=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return I.createElement(I.Fragment,null);if(!s)return I.createElement(I.Fragment,null);var m=[];if($fe(r,s))for(var p=no(r),h=r.getMonth();h<=s.getMonth();h++)m.push(iN(p,h));else for(var p=no(new Date),h=0;h<=11;h++)m.push(iN(p,h));var g=function(v){var x=Number(v.target.value),b=iN(no(e.displayMonth),x);e.onChange(b)},y=(t=u?.Dropdown)!==null&&t!==void 0?t:Pke;return I.createElement(y,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:i})},m.map(function(v){return I.createElement("option",{key:v.getMonth(),value:v.getMonth()},l(v,{locale:i}))}))}function L7t(e){var t,n=e.displayMonth,r=xr(),s=r.fromDate,a=r.toDate,i=r.locale,l=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,p=[];if(!s)return I.createElement(I.Fragment,null);if(!a)return I.createElement(I.Fragment,null);for(var h=s.getFullYear(),g=a.getFullYear(),y=h;y<=g;y++)p.push(iK(CGe(new Date),y));var v=function(b){var _=iK(no(n),Number(b.target.value));e.onChange(_)},x=(t=u?.Dropdown)!==null&&t!==void 0?t:Pke;return I.createElement(x,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:v,value:n.getFullYear(),caption:d(n,{locale:i})},p.map(function(b){return I.createElement("option",{key:b.getFullYear(),value:b.getFullYear()},d(b,{locale:i}))}))}function D7t(e,t){var n=f.useState(e),r=n[0],s=n[1],a=t===void 0?r:t;return[a,s]}function F7t(e){var t=e.month,n=e.defaultMonth,r=e.today,s=t||n||r||new Date,a=e.toDate,i=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(a&&og(a,s)<0){var u=-1*(c-1);s=$i(a,u)}return i&&og(s,i)<0&&(s=i),no(s)}function U7t(){var e=xr(),t=F7t(e),n=D7t(t,e.month),r=n[0],s=n[1],a=function(i){var l;if(!e.disableNavigation){var c=no(i);s(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,a]}function B7t(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,s=no(e),a=no($i(s,r)),i=og(a,s),l=[],c=0;c<i;c++){var u=$i(s,c);l.push(u)}return n&&(l=l.reverse()),l}function V7t(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,s=t.numberOfMonths,a=s===void 0?1:s,i=r?a:1,l=no(e);if(!n)return $i(l,i);var c=og(n,e);if(!(c<a))return $i(l,i)}}function $7t(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,s=t.numberOfMonths,a=s===void 0?1:s,i=r?a:1,l=no(e);if(!n)return $i(l,-i);var c=og(l,n);if(!(c<=0))return $i(l,-i)}}var Oke=f.createContext(void 0);function W7t(e){var t=xr(),n=U7t(),r=n[0],s=n[1],a=B7t(r,t),i=V7t(r,t),l=$7t(r,t),c=function(m){return a.some(function(p){return OD(m,p)})},u=function(m,p){c(m)||(p&&Bfe(m,p)?s($i(m,1+t.numberOfMonths*-1)):s(m))},d={currentMonth:r,displayMonths:a,goToMonth:s,goToDate:u,previousMonth:l,nextMonth:i,isDateDisplayed:c};return I.createElement(Oke.Provider,{value:d},e.children)}function rw(){var e=f.useContext(Oke);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function aae(e){var t,n=xr(),r=n.classNames,s=n.styles,a=n.components,i=rw().goToMonth,l=function(d){i(d)},c=(t=a?.CaptionLabel)!==null&&t!==void 0?t:Rke,u=I.createElement(c,{id:e.id,displayMonth:e.displayMonth});return I.createElement("div",{className:r.caption_dropdowns,style:s.caption_dropdowns},I.createElement("div",{className:r.vhidden},u),I.createElement(O7t,{onChange:l,displayMonth:e.displayMonth}),I.createElement(L7t,{onChange:l,displayMonth:e.displayMonth}))}function H7t(e){return I.createElement("svg",Dt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e),I.createElement("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"}))}function z7t(e){return I.createElement("svg",Dt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e),I.createElement("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"}))}var bM=f.forwardRef(function(e,t){var n=xr(),r=n.classNames,s=n.styles,a=[r.button_reset,r.button];e.className&&a.push(e.className);var i=a.join(" "),l=Dt(Dt({},s.button_reset),s.button);return e.style&&Object.assign(l,e.style),I.createElement("button",Dt({},e,{ref:t,type:"button",className:i,style:l}))});function G7t(e){var t,n,r=xr(),s=r.dir,a=r.locale,i=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return I.createElement(I.Fragment,null);var p=u(e.previousMonth,{locale:a}),h=[i.nav_button,i.nav_button_previous].join(" "),g=d(e.nextMonth,{locale:a}),y=[i.nav_button,i.nav_button_next].join(" "),v=(t=m?.IconRight)!==null&&t!==void 0?t:z7t,x=(n=m?.IconLeft)!==null&&n!==void 0?n:H7t;return I.createElement("div",{className:i.nav,style:l.nav},!e.hidePrevious&&I.createElement(bM,{name:"previous-month","aria-label":p,className:h,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick},s==="rtl"?I.createElement(v,{className:i.nav_icon,style:l.nav_icon}):I.createElement(x,{className:i.nav_icon,style:l.nav_icon})),!e.hideNext&&I.createElement(bM,{name:"next-month","aria-label":g,className:y,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick},s==="rtl"?I.createElement(x,{className:i.nav_icon,style:l.nav_icon}):I.createElement(v,{className:i.nav_icon,style:l.nav_icon})))}function oae(e){var t=xr().numberOfMonths,n=rw(),r=n.previousMonth,s=n.nextMonth,a=n.goToMonth,i=n.displayMonths,l=i.findIndex(function(g){return OD(e.displayMonth,g)}),c=l===0,u=l===i.length-1,d=t>1&&(c||!u),m=t>1&&(u||!c),p=function(){r&&a(r)},h=function(){s&&a(s)};return I.createElement(G7t,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:m,nextMonth:s,previousMonth:r,onPreviousClick:p,onNextClick:h})}function q7t(e){var t,n=xr(),r=n.classNames,s=n.disableNavigation,a=n.styles,i=n.captionLayout,l=n.components,c=(t=l?.CaptionLabel)!==null&&t!==void 0?t:Rke,u;return s?u=I.createElement(c,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?u=I.createElement(aae,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?u=I.createElement(I.Fragment,null,I.createElement(aae,{displayMonth:e.displayMonth,id:e.id}),I.createElement(oae,{displayMonth:e.displayMonth,id:e.id})):u=I.createElement(I.Fragment,null,I.createElement(c,{id:e.id,displayMonth:e.displayMonth}),I.createElement(oae,{displayMonth:e.displayMonth,id:e.id})),I.createElement("div",{className:r.caption,style:a.caption},u)}function K7t(e){var t=xr(),n=t.footer,r=t.styles,s=t.classNames.tfoot;return n?I.createElement("tfoot",{className:s,style:r.tfoot},I.createElement("tr",null,I.createElement("td",{colSpan:8},n))):I.createElement(I.Fragment,null)}function Y7t(e,t,n){for(var r=n?ym(new Date):zl(new Date,{locale:e,weekStartsOn:t}),s=[],a=0;a<7;a++){var i=Ds(r,a);s.push(i)}return s}function Q7t(){var e=xr(),t=e.classNames,n=e.styles,r=e.showWeekNumber,s=e.locale,a=e.weekStartsOn,i=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=Y7t(s,a,i);return I.createElement("tr",{style:n.head_row,className:t.head_row},r&&I.createElement("td",{style:n.head_cell,className:t.head_cell}),u.map(function(d,m){return I.createElement("th",{key:m,scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(d,{locale:s})},l(d,{locale:s}))}))}function X7t(){var e,t=xr(),n=t.classNames,r=t.styles,s=t.components,a=(e=s?.HeadRow)!==null&&e!==void 0?e:Q7t;return I.createElement("thead",{style:r.head,className:n.head},I.createElement(a,null))}function Z7t(e){var t=xr(),n=t.locale,r=t.formatters.formatDay;return I.createElement(I.Fragment,null,r(e.date,{locale:n}))}var sW=f.createContext(void 0);function J7t(e){if(!tw(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return I.createElement(sW.Provider,{value:t},e.children)}return I.createElement(eLt,{initialProps:e.initialProps,children:e.children})}function eLt(e){var t=e.initialProps,n=e.children,r=t.selected,s=t.min,a=t.max,i=function(u,d,m){var p,h;(p=t.onDayClick)===null||p===void 0||p.call(t,u,d,m);var g=!!(d.selected&&s&&r?.length===s);if(!g){var y=!!(!d.selected&&a&&r?.length===a);if(!y){var v=r?Ake([],r):[];if(d.selected){var x=v.findIndex(function(b){return Fs(u,b)});v.splice(x,1)}else v.push(u);(h=t.onSelect)===null||h===void 0||h.call(t,v,u,d,m)}}},l={disabled:[]};r&&l.disabled.push(function(u){var d=a&&r.length>a-1,m=r.some(function(p){return Fs(p,u)});return!!(d&&!m)});var c={selected:r,onDayClick:i,modifiers:l};return I.createElement(sW.Provider,{value:c},n)}function aW(){var e=f.useContext(sW);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function tLt(e,t){var n=t||{},r=n.from,s=n.to;if(!r)return{from:e,to:void 0};if(!s&&Fs(r,e))return{from:r,to:e};if(!s&&Bfe(e,r))return{from:e,to:r};if(!s)return{from:r,to:e};if(!(Fs(s,e)&&Fs(r,e))){if(Fs(s,e))return{from:s,to:void 0};if(!Fs(r,e))return Ufe(r,e)?{from:e,to:s}:{from:r,to:e}}}var oW=f.createContext(void 0);function nLt(e){if(!nw(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return I.createElement(oW.Provider,{value:t},e.children)}return I.createElement(rLt,{initialProps:e.initialProps,children:e.children})}function rLt(e){var t=e.initialProps,n=e.children,r=t.selected,s=r||{},a=s.from,i=s.to,l=t.min,c=t.max,u=function(h,g,y){var v,x;(v=t.onDayClick)===null||v===void 0||v.call(t,h,g,y);var b=tLt(h,r);(x=t.onSelect)===null||x===void 0||x.call(t,b,h,g,y)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a&&(d.range_start=[a],i?(d.range_end=[i],Fs(a,i)||(d.range_middle=[{after:a,before:i}])):d.range_end=[a]),l&&(a&&!i&&d.disabled.push({after:BR(a,l-1),before:Ds(a,l-1)}),a&&i&&d.disabled.push({after:a,before:Ds(a,l-1)})),c&&(a&&!i&&(d.disabled.push({before:Ds(a,-c+1)}),d.disabled.push({after:Ds(a,c-1)})),a&&i)){var m=El(i,a)+1,p=c-m;d.disabled.push({before:BR(a,p)}),d.disabled.push({after:Ds(i,p)})}return I.createElement(oW.Provider,{value:{selected:r,onDayClick:u,modifiers:d}},n)}function iW(){var e=f.useContext(oW);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function n2(e){return Array.isArray(e)?Ake([],e):e!==void 0?[e]:[]}function sLt(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],s=n[1];t[r]=n2(s)}),t}var Xi;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Xi||(Xi={}));var aLt=Xi.Selected,Cc=Xi.Disabled,oLt=Xi.Hidden,iLt=Xi.Today,aI=Xi.RangeEnd,oI=Xi.RangeMiddle,iI=Xi.RangeStart,lLt=Xi.Outside;function cLt(e,t,n){var r,s=(r={},r[aLt]=n2(e.selected),r[Cc]=n2(e.disabled),r[oLt]=n2(e.hidden),r[iLt]=[e.today],r[aI]=[],r[oI]=[],r[iI]=[],r[lLt]=[],r);return e.fromDate&&s[Cc].push({before:e.fromDate}),e.toDate&&s[Cc].push({after:e.toDate}),tw(e)?s[Cc]=s[Cc].concat(t.modifiers[Cc]):nw(e)&&(s[Cc]=s[Cc].concat(n.modifiers[Cc]),s[iI]=n.modifiers[iI],s[oI]=n.modifiers[oI],s[aI]=n.modifiers[aI]),s}var Lke=f.createContext(void 0);function uLt(e){var t=xr(),n=aW(),r=iW(),s=cLt(t,n,r),a=sLt(t.modifiers),i=Dt(Dt({},s),a);return I.createElement(Lke.Provider,{value:i},e.children)}function Dke(){var e=f.useContext(Lke);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function dLt(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function fLt(e){return!!(e&&typeof e=="object"&&"from"in e)}function mLt(e){return!!(e&&typeof e=="object"&&"after"in e)}function pLt(e){return!!(e&&typeof e=="object"&&"before"in e)}function hLt(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function gLt(e,t){var n,r=t.from,s=t.to;if(!r)return!1;if(!s&&Fs(r,e))return!0;if(!s)return!1;var a=El(s,r)<0;a&&(n=[s,r],r=n[0],s=n[1]);var i=El(e,r)>=0&&El(s,e)>=0;return i}function yLt(e){return AD(e)}function vLt(e){return Array.isArray(e)&&e.every(AD)}function xLt(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(yLt(n))return Fs(e,n);if(vLt(n))return n.includes(e);if(fLt(n))return gLt(e,n);if(hLt(n))return n.dayOfWeek.includes(e.getDay());if(dLt(n)){var r=El(n.before,e),s=El(n.after,e),a=r>0,i=s<0,l=Ufe(n.before,n.after);return l?i&&a:a||i}return mLt(n)?El(e,n.after)>0:pLt(n)?El(n.before,e)>0:typeof n=="function"?n(e):!1})}function lW(e,t,n){var r=Object.keys(t).reduce(function(a,i){var l=t[i];return xLt(e,l)&&a.push(i),a},[]),s={};return r.forEach(function(a){return s[a]=!0}),n&&!OD(e,n)&&(s.outside=!0),s}function bLt(e,t){for(var n=no(e[0]),r=B5(e[e.length-1]),s,a,i=n;i<=r;){var l=lW(i,t),c=!l.disabled&&!l.hidden;if(!c){i=Ds(i,1);continue}if(l.selected)return i;l.today&&!a&&(a=i),s||(s=i),i=Ds(i,1)}return a||s}var _Lt=365;function Fke(e,t){var n=t.moveBy,r=t.direction,s=t.context,a=t.modifiers,i=t.retry,l=i===void 0?{count:0,lastFocused:e}:i,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,m=s.locale,p={day:Ds,week:I2,month:$i,year:sGe,startOfWeek:function(v){return s.ISOWeek?ym(v):zl(v,{locale:m,weekStartsOn:c})},endOfWeek:function(v){return s.ISOWeek?Pfe(v):PD(v,{locale:m,weekStartsOn:c})}},h=p[n](e,r==="after"?1:-1);r==="before"&&u?h=aGe([u,h]):r==="after"&&d&&(h=oGe([d,h]));var g=!0;if(a){var y=lW(h,a);g=!y.disabled&&!y.hidden}return g?h:l.count>_Lt?l.lastFocused:Fke(h,{moveBy:n,direction:r,context:s,modifiers:a,retry:Dt(Dt({},l),{count:l.count+1})})}var Uke=f.createContext(void 0);function wLt(e){var t=rw(),n=Dke(),r=f.useState(),s=r[0],a=r[1],i=f.useState(),l=i[0],c=i[1],u=bLt(t.displayMonths,n),d=s??(l&&t.isDateDisplayed(l))?l:u,m=function(){c(s),a(void 0)},p=function(v){a(v)},h=xr(),g=function(v,x){if(s){var b=Fke(s,{moveBy:v,direction:x,context:h,modifiers:n});Fs(s,b)||(t.goToDate(b,s),p(b))}},y={focusedDay:s,focusTarget:d,blur:m,focus:p,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return I.createElement(Uke.Provider,{value:y},e.children)}function cW(){var e=f.useContext(Uke);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function CLt(e,t){var n=Dke(),r=lW(e,n,t);return r}var uW=f.createContext(void 0);function SLt(e){if(!yT(e.initialProps)){var t={selected:void 0};return I.createElement(uW.Provider,{value:t},e.children)}return I.createElement(ELt,{initialProps:e.initialProps,children:e.children})}function ELt(e){var t=e.initialProps,n=e.children,r=function(a,i,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,a,i,l),i.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,a,i,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,a,a,i,l)},s={selected:t.selected,onDayClick:r};return I.createElement(uW.Provider,{value:s},n)}function Bke(){var e=f.useContext(uW);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function MLt(e,t){var n=xr(),r=Bke(),s=aW(),a=iW(),i=cW(),l=i.focusDayAfter,c=i.focusDayBefore,u=i.focusWeekAfter,d=i.focusWeekBefore,m=i.blur,p=i.focus,h=i.focusMonthBefore,g=i.focusMonthAfter,y=i.focusYearBefore,v=i.focusYearAfter,x=i.focusStartOfWeek,b=i.focusEndOfWeek,_=function(j){var F,U,V,$;yT(n)?(F=r.onDayClick)===null||F===void 0||F.call(r,e,t,j):tw(n)?(U=s.onDayClick)===null||U===void 0||U.call(s,e,t,j):nw(n)?(V=a.onDayClick)===null||V===void 0||V.call(a,e,t,j):($=n.onDayClick)===null||$===void 0||$.call(n,e,t,j)},w=function(j){var F;p(e),(F=n.onDayFocus)===null||F===void 0||F.call(n,e,t,j)},C=function(j){var F;m(),(F=n.onDayBlur)===null||F===void 0||F.call(n,e,t,j)},S=function(j){var F;(F=n.onDayMouseEnter)===null||F===void 0||F.call(n,e,t,j)},E=function(j){var F;(F=n.onDayMouseLeave)===null||F===void 0||F.call(n,e,t,j)},M=function(j){var F;(F=n.onDayPointerEnter)===null||F===void 0||F.call(n,e,t,j)},k=function(j){var F;(F=n.onDayPointerLeave)===null||F===void 0||F.call(n,e,t,j)},A=function(j){var F;(F=n.onDayTouchCancel)===null||F===void 0||F.call(n,e,t,j)},R=function(j){var F;(F=n.onDayTouchEnd)===null||F===void 0||F.call(n,e,t,j)},O=function(j){var F;(F=n.onDayTouchMove)===null||F===void 0||F.call(n,e,t,j)},L=function(j){var F;(F=n.onDayTouchStart)===null||F===void 0||F.call(n,e,t,j)},P=function(j){var F;(F=n.onDayKeyUp)===null||F===void 0||F.call(n,e,t,j)},N=function(j){var F;switch(j.key){case"ArrowLeft":j.preventDefault(),j.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":j.preventDefault(),j.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":j.preventDefault(),j.stopPropagation(),u();break;case"ArrowUp":j.preventDefault(),j.stopPropagation(),d();break;case"PageUp":j.preventDefault(),j.stopPropagation(),j.shiftKey?y():h();break;case"PageDown":j.preventDefault(),j.stopPropagation(),j.shiftKey?v():g();break;case"Home":j.preventDefault(),j.stopPropagation(),x();break;case"End":j.preventDefault(),j.stopPropagation(),b();break}(F=n.onDayKeyDown)===null||F===void 0||F.call(n,e,t,j)},T={onClick:_,onFocus:w,onBlur:C,onKeyDown:N,onKeyUp:P,onMouseEnter:S,onMouseLeave:E,onPointerEnter:M,onPointerLeave:k,onTouchCancel:A,onTouchEnd:R,onTouchMove:O,onTouchStart:L};return T}function kLt(){var e=xr(),t=Bke(),n=aW(),r=iW(),s=yT(e)?t.selected:tw(e)?n.selected:nw(e)?r.selected:void 0;return s}function TLt(e){return Object.values(Xi).includes(e)}function NLt(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var s=e.modifiersClassNames[r];if(s)n.push(s);else if(TLt(r)){var a=e.classNames["day_".concat(r)];a&&n.push(a)}}),n}function jLt(e,t){var n=Dt({},e.styles.day);return Object.keys(t).forEach(function(r){var s;n=Dt(Dt({},n),(s=e.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function ALt(e,t,n){var r,s,a,i=xr(),l=cW(),c=CLt(e,t),u=MLt(e,c),d=kLt(),m=!!(i.onDayClick||i.mode!=="default");f.useEffect(function(){var S;c.outside||l.focusedDay&&m&&Fs(l.focusedDay,e)&&((S=n.current)===null||S===void 0||S.focus())},[l.focusedDay,e,n,m,c.outside]);var p=NLt(i,c).join(" "),h=jLt(i,c),g=!!(c.outside&&!i.showOutsideDays||c.hidden),y=(a=(s=i.components)===null||s===void 0?void 0:s.DayContent)!==null&&a!==void 0?a:Z7t,v=I.createElement(y,{date:e,displayMonth:t,activeModifiers:c}),x={style:h,className:p,children:v,role:"gridcell"},b=l.focusTarget&&Fs(l.focusTarget,e)&&!c.outside,_=l.focusedDay&&Fs(l.focusedDay,e),w=Dt(Dt(Dt({},x),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=_||b?0:-1,r)),u),C={isButton:m,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:w,divProps:x};return C}function ILt(e){var t=f.useRef(null),n=ALt(e.date,e.displayMonth,t);return n.isHidden?I.createElement("div",{role:"gridcell"}):n.isButton?I.createElement(bM,Dt({name:"day",ref:t},n.buttonProps)):I.createElement("div",Dt({},n.divProps))}function RLt(e){var t=e.number,n=e.dates,r=xr(),s=r.onWeekNumberClick,a=r.styles,i=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!s)return I.createElement("span",{className:i.weeknumber,style:a.weeknumber},d);var m=c(Number(t),{locale:l}),p=function(h){s(t,n,h)};return I.createElement(bM,{name:"week-number","aria-label":m,className:i.weeknumber,style:a.weeknumber,onClick:p},d)}function PLt(e){var t,n,r=xr(),s=r.styles,a=r.classNames,i=r.showWeekNumber,l=r.components,c=(t=l?.Day)!==null&&t!==void 0?t:ILt,u=(n=l?.WeekNumber)!==null&&n!==void 0?n:RLt,d;return i&&(d=I.createElement("td",{className:a.cell,style:s.cell},I.createElement(u,{number:e.weekNumber,dates:e.dates}))),I.createElement("tr",{className:a.row,style:s.row},d,e.dates.map(function(m){return I.createElement("td",{className:a.cell,style:s.cell,key:Tqe(m),role:"presentation"},I.createElement(c,{displayMonth:e.displayMonth,date:m}))}))}function iae(e,t,n){for(var r=n?.ISOWeek?Pfe(t):PD(t,n),s=n?.ISOWeek?ym(e):zl(e,n),a=El(r,s),i=[],l=0;l<=a;l++)i.push(Ds(s,l));var c=i.reduce(function(u,d){var m=n?.ISOWeek?Mqe(d):Iqe(d,n),p=u.find(function(h){return h.weekNumber===m});return p?(p.dates.push(d),u):(u.push({weekNumber:m,dates:[d]}),u)},[]);return c}function OLt(e,t){var n=iae(no(e),B5(e),t);if(t?.useFixedWeeks){var r=Pqe(e,t);if(r<6){var s=n[n.length-1],a=s.dates[s.dates.length-1],i=I2(a,6-r),l=iae(I2(a,1),i,t);n.push.apply(n,l)}}return n}function LLt(e){var t,n,r,s=xr(),a=s.locale,i=s.classNames,l=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,m=s.weekStartsOn,p=s.firstWeekContainsDate,h=s.ISOWeek,g=OLt(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:h,locale:a,weekStartsOn:m,firstWeekContainsDate:p}),y=(t=d?.Head)!==null&&t!==void 0?t:X7t,v=(n=d?.Row)!==null&&n!==void 0?n:PLt,x=(r=d?.Footer)!==null&&r!==void 0?r:K7t;return I.createElement("table",{className:i.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"]},!c&&I.createElement(y,null),I.createElement("tbody",{className:i.tbody,style:l.tbody,role:"rowgroup"},g.map(function(b){return I.createElement(v,{displayMonth:e.displayMonth,key:b.weekNumber,dates:b.dates,weekNumber:b.weekNumber})})),I.createElement(x,{displayMonth:e.displayMonth}))}function DLt(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var FLt=DLt()?f.useLayoutEffect:f.useEffect,lI=!1,ULt=0;function lae(){return"react-day-picker-".concat(++ULt)}function BLt(e){var t,n=e??(lI?lae():null),r=f.useState(n),s=r[0],a=r[1];return FLt(function(){s===null&&a(lae())},[]),f.useEffect(function(){lI===!1&&(lI=!0)},[]),(t=e??s)!==null&&t!==void 0?t:void 0}function VLt(e){var t,n,r=xr(),s=r.dir,a=r.classNames,i=r.styles,l=r.components,c=rw().displayMonths,u=BLt(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),d=[a.month],m=i.month,p=e.displayIndex===0,h=e.displayIndex===c.length-1,g=!p&&!h;s==="rtl"&&(t=[p,h],h=t[0],p=t[1]),p&&(d.push(a.caption_start),m=Dt(Dt({},m),i.caption_start)),h&&(d.push(a.caption_end),m=Dt(Dt({},m),i.caption_end)),g&&(d.push(a.caption_between),m=Dt(Dt({},m),i.caption_between));var y=(n=l?.Caption)!==null&&n!==void 0?n:q7t;return I.createElement("div",{key:e.displayIndex,className:d.join(" "),style:m},I.createElement(y,{id:u,displayMonth:e.displayMonth}),I.createElement(LLt,{"aria-labelledby":u,displayMonth:e.displayMonth}))}function $Lt(e){var t=e.initialProps,n=xr(),r=cW(),s=rw(),a=f.useState(!1),i=a[0],l=a[1];f.useEffect(function(){n.initialFocus&&r.focusTarget&&(i||(r.focus(r.focusTarget),l(!0)))},[n.initialFocus,i,r.focus,r.focusTarget,r]);var c=[n.classNames.root,n.className];n.numberOfMonths>1&&c.push(n.classNames.multiple_months),n.showWeekNumber&&c.push(n.classNames.with_weeknumber);var u=Dt(Dt({},n.styles.root),n.style),d=Object.keys(t).filter(function(m){return m.startsWith("data-")}).reduce(function(m,p){var h;return Dt(Dt({},m),(h={},h[p]=t[p],h))},{});return I.createElement("div",Dt({className:c.join(" "),style:u,dir:n.dir,id:n.id},d),I.createElement("div",{className:n.classNames.months,style:n.styles.months},s.displayMonths.map(function(m,p){return I.createElement(VLt,{key:p,displayIndex:p,displayMonth:m})})))}function WLt(e){var t=e.children,n=p7t(e,["children"]);return I.createElement(R7t,{initialProps:n},I.createElement(W7t,null,I.createElement(SLt,{initialProps:n},I.createElement(J7t,{initialProps:n},I.createElement(nLt,{initialProps:n},I.createElement(uLt,null,I.createElement(wLt,null,t)))))))}function HLt(e){return I.createElement(WLt,Dt({},e),I.createElement($Lt,{initialProps:e}))}const Vke=I.memo(({className:e,showOutsideDays:t=!0,...n})=>{const r=I.useMemo(()=>({months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-between relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:"h-7 w-7 p-0 rounded hover:bg-subtle flex items-center justify-center bg-subtler [&_*]:fill-quiet",table:"w-full border-collapse",head_row:"flex",head_cell:"text-quiet rounded-md w-8 font-normal text-sm font-mono",row:"flex w-full mt-1",cell:B("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected].day-range-end)]:rounded-r-full",n.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-full [&:has([aria-selected])]:bg-superBG [&:has(>.day-range-start)]:rounded-l-full first:[&:has([aria-selected])]:rounded-l-full last:[&:has([aria-selected])]:rounded-r-full":"[&:has([aria-selected])]:rounded-md"),day:B("size-8 p-0 font-normal select-none aria-selected:opacity-100 flex items-center justify-center rounded-full hover:bg-subtler cursor-pointer"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:B(n.mode==="range"?"[&.day-range-start]:!bg-super [&.day-range-start]:!text-inverse [&.day-range-start]:hover:!bg-super [&.day-range-end]:!bg-super [&.day-range-end]:!text-inverse [&.day-range-end]:hover:!bg-super":"!bg-super !text-inverse hover:!bg-super"),day_today:"bg-superBG text-super hover:bg-superBG",day_outside:"day-outside text-quiet aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-quiet opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...B}),[n.mode]),s=f.useMemo(()=>({IconLeft:({className:a,...i})=>o.jsx(ce,{icon:fb,className:a,size:"sm",...i}),IconRight:({className:a,...i})=>o.jsx(ce,{icon:Kn,className:a,size:"sm",...i})}),[]);return o.jsx(HLt,{showOutsideDays:t,className:B("p-3 font-sans text-base",e),classNames:r,components:s,...n})});Vke.displayName="Calendar";var vT="Popover",[$ke,hsn]=co(vT,[iy]),sw=iy(),[zLt,ef]=$ke(vT),Wke=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!1}=e,l=sw(t),c=f.useRef(null),[u,d]=f.useState(!1),[m,p]=Ji({prop:r,defaultProp:s??!1,onChange:a,caller:vT});return o.jsx(zL,{...l,children:o.jsx(zLt,{scope:t,contentId:bh(),triggerRef:c,open:m,onOpenChange:p,onOpenToggle:f.useCallback(()=>p(h=>!h),[p]),hasCustomAnchor:u,onCustomAnchorAdd:f.useCallback(()=>d(!0),[]),onCustomAnchorRemove:f.useCallback(()=>d(!1),[]),modal:i,children:n})})};Wke.displayName=vT;var Hke="PopoverAnchor",GLt=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=ef(Hke,n),a=sw(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=s;return f.useEffect(()=>(i(),()=>l()),[i,l]),o.jsx(u5,{...a,...r,ref:t})});GLt.displayName=Hke;var zke="PopoverTrigger",Gke=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=ef(zke,n),a=sw(n),i=Vn(t,s.triggerRef),l=o.jsx(dn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Xke(s.open),...r,ref:i,onClick:Ft(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(u5,{asChild:!0,...a,children:l})});Gke.displayName=zke;var dW="PopoverPortal",[qLt,KLt]=$ke(dW,{forceMount:void 0}),qke=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,a=ef(dW,t);return o.jsx(qLt,{scope:t,forceMount:n,children:o.jsx(da,{present:n||a.open,children:o.jsx(Ab,{asChild:!0,container:s,children:r})})})};qke.displayName=dW;var Vg="PopoverContent",Kke=f.forwardRef((e,t)=>{const n=KLt(Vg,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,a=ef(Vg,e.__scopePopover);return o.jsx(da,{present:r||a.open,children:a.modal?o.jsx(QLt,{...s,ref:t}):o.jsx(XLt,{...s,ref:t})})});Kke.displayName=Vg;var YLt=Fx("PopoverContent.RemoveScroll"),QLt=f.forwardRef((e,t)=>{const n=ef(Vg,e.__scopePopover),r=f.useRef(null),s=Vn(t,r),a=f.useRef(!1);return f.useEffect(()=>{const i=r.current;if(i)return ife(i)},[]),o.jsx(yD,{as:YLt,allowPinchZoom:!0,children:o.jsx(Yke,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ft(e.onCloseAutoFocus,i=>{i.preventDefault(),a.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Ft(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Ft(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),XLt=f.forwardRef((e,t)=>{const n=ef(Vg,e.__scopePopover),r=f.useRef(!1),s=f.useRef(!1);return o.jsx(Yke,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;n.triggerRef.current?.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),Yke=f.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...m}=e,p=ef(Vg,n),h=sw(n);return Qde(),o.jsx(hD,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(Nb,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:o.jsx(GL,{"data-state":Xke(p.open),role:"dialog",id:p.contentId,...h,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Qke="PopoverClose",ZLt=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=ef(Qke,n);return o.jsx(dn.button,{type:"button",...r,ref:t,onClick:Ft(e.onClick,()=>s.onOpenChange(!1))})});ZLt.displayName=Qke;var JLt="PopoverArrow",eDt=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=sw(n);return o.jsx(qL,{...s,...r,ref:t})});eDt.displayName=JLt;function Xke(e){return e?"open":"closed"}var tDt=Wke,nDt=Gke,rDt=qke,sDt=Kke;const fW=I.memo(({children:e,content:t,isOpen:n,onClose:r,onOpen:s})=>o.jsxs(tDt,{open:n,onOpenChange:a=>{a?s?.():r?.()},children:[o.jsx(nDt,{asChild:!0,children:e}),o.jsx(rDt,{children:o.jsx(sDt,{asChild:!0,sideOffset:4,side:"bottom",align:"start",children:o.jsx(H,{variant:"background",className:B("p-xs relative rounded-lg border shadow-sm","min-w-[var(--radix-popover-trigger-width)]","data-close:zoom-out-95 data-close:fade-out data-close:animate-out","data-open:duration-150 data-open:ease-in-out data-open:animate-in data-open:fade-in data-open:zoom-in-95"),children:t})})})]}));fW.displayName="Popover";const aDt=e=>e.toLocaleDateString();function _M({value:e,onChange:t,placeholder:n="Select date",formatDate:r=aDt,showIcon:s=!0,buttonClassName:a,variant:i="default",trailingIcon:l,fromDate:c,endDate:u}){const[d,m]=f.useState(!1),p=()=>{m(!d)},h=v=>{t(v),m(!1)},g=f.useMemo(()=>{const v=new Date;return v.setHours(0,0,0,0),v},[]),y=(()=>{switch(i){case"subtle":return"bg-subtle";case"default":return"bg-subtler";default:Gt(i)}})();return o.jsx("div",{className:"relative size-full",children:o.jsx(fW,{isOpen:d,onOpen:()=>m(!0),onClose:()=>m(!1),content:o.jsx(Vke,{mode:"single",selected:e,onSelect:h,disabled:[{before:c??g,after:u}],fromDate:c??g}),children:o.jsxs("div",{role:"button",tabIndex:0,onClick:()=>p(),className:B(y,"flex cursor-pointer items-center justify-between rounded-lg px-4 font-sans","hover:border-subtler focus:border-subtler border border-transparent","transition-colors duration-200 ease-out","size-full","outline-none focus:outline-none focus:ring-0",a),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[s&&o.jsx(hb,{size:16,className:"text-foreground"}),o.jsx("span",{className:"text-foreground text-sm",children:e?r(e):n})]}),l]})})})}const cae=({hour:e,minute:t})=>`${e%12||12}:${t.toString().padStart(2,"0")} ${e>=12?"PM":"AM"}`,uae=e=>{const t=e.trim().match(/^((?:0?[1-9]|1[0-2])):([0-5]\d)\s*([ap]m)$/i);if(!t||t.length!==4)return null;const n=parseInt(t[1]??"",10),r=parseInt(t[2]??"",10);if(isNaN(n)||isNaN(r))return null;const s=t[3]?.toLowerCase();return s==="pm"&&n!==12?{hour:n+12,minute:r}:s==="am"&&n===12?{hour:0,minute:r}:{hour:n,minute:r}},oDt=(e,t)=>e.hour===t.hour&&e.minute===t.minute,iDt=Array.from({length:48},(e,t)=>({hour:Math.floor(t/2),minute:t%2*30}));function lDt({value:e,onChange:t,placeholder:n="Select time",variant:r="default",withIcon:s}){const[a,i]=f.useState(""),[l,c]=f.useState(!1),u=f.useRef(null),d=a.trim()!==""&&!uae(a),m=f.useRef(null),p=e?cae(e):n,h=f.useMemo(()=>iDt.map(C=>({key:`${C.hour}:${C.minute}`,label:cae(C),value:C})),[]),g=f.useCallback(C=>{C&&l&&e&&m.current&&m.current?.scrollIntoView({behavior:"instant",block:"start"})},[l,e]),y=()=>{const C=uae(a);C&&t(C),i("")},v=C=>{t(C),i(""),c(!1)},x=()=>{c(!l)},b=()=>{c(!l),setTimeout(()=>{u.current&&u.current.focus()},0)},_=(()=>{switch(r){case"subtle":return"bg-subtle";case"default":return"bg-subtler";default:Gt(r)}})(),w=f.useMemo(()=>o.jsx(ce,{icon:Wm,size:"sm"}),[]);return o.jsx("div",{className:"relative size-full",children:o.jsx(fW,{isOpen:l,onOpen:()=>c(!0),onClose:()=>c(!1),content:o.jsx("div",{ref:g,className:"p-xs scrollbar-subtle max-h-64 overflow-y-auto",children:h.map(C=>o.jsx("div",{ref:e&&oDt(C.value,e)?m:null,role:"button",tabIndex:0,onClick:()=>v(C.value),className:B("px-sm text-foreground cursor-pointer rounded-lg py-1.5","hover:bg-subtler"),children:o.jsx(D,{variant:"extraSmall",children:C.label})},C.key))}),children:o.jsxs("div",{role:"button",tabIndex:0,onClick:x,className:B(_,"text-foreground flex size-full cursor-pointer items-center gap-2 rounded-lg px-4 font-sans","border transition-colors duration-200 ease-out","outline-none focus:outline-none focus:ring-0","hover:border-subtler focus-within:border-subtler border-transparent",{"!border-negative":d}),children:[s&&w,o.jsx("input",{ref:u,type:"text",value:a||p,placeholder:n,onChange:C=>i(C.target.value),onBlur:y,onClick:b,className:"w-full bg-transparent text-sm focus:outline-none"}),o.jsx(ce,{size:"xs",icon:Dn,className:"right-sm pointer-events-none absolute text-inherit opacity-50"})]})})})}const $g=f.memo(({children:e})=>o.jsx("div",{className:"min-w-0 flex-1 rounded-md",children:e}));$g.displayName="InputWrapper";const Tv=f.memo(({options:e,value:t,onChange:n,isMobileStyle:r,variant:s="default"})=>{const a=Z(),i=f.useMemo(()=>e.map(p=>({type:"default",text:p.label,onClick:()=>n(p.value),active:p.value===t,role:"menuitemradio"})),[n,e,t]),c=f.useMemo(()=>e.find(p=>p.value===t),[e,t])?.label||a.formatMessage({defaultMessage:"Select...",id:"724CrE1YuG"}),u=f.useMemo(()=>({className:"w-full"}),[]),d=f.useMemo(()=>({matchTargetWidth:!0,avoidPositionCollisions:!1}),[]),m=(()=>{switch(s){case"subtle":return"";case"default":return"!bg-subtler";default:Gt(s)}})();return o.jsx($g,{children:o.jsx(Jt,{items:i,isMobileStyle:r,placement:"bottom",contentClassName:"w-full",boxProps:u,popoverProps:d,children:o.jsx(he,{text:c,extraCSS:B("px-4 size-full !h-10 border-0 !outline-none !justify-start font-normal",m),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Dn})})})});Tv.displayName="FormSelect";const mW=f.memo(({schedule:e,onScheduleChange:t,variant:n="default"})=>{const{formatMessage:r}=Z(),{isMobileStyle:s}=xe(),a=f.useMemo(()=>new Date(e.year,e.month,e.day,e.hour,e.minute),[e.year,e.month,e.day,e.hour,e.minute]),{kind:i}=e,l=i==="ONCE",c=i==="WEEKLY",u=i==="MONTHLY"||i==="YEARLY",d=i==="YEARLY",m=f.useCallback(b=>{t({kind:b})},[t]),p=f.useCallback(b=>{t({dayOfWeek:parseInt(b,10)})},[t]),h=f.useCallback(b=>{t({month:parseInt(b,10)})},[t]),g=f.useCallback(b=>{t({day:parseInt(b,10)})},[t]),y=f.useCallback(b=>{b&&t({day:b.getDate(),month:b.getMonth(),year:b.getFullYear()})},[t]),v=f.useCallback(b=>{t({hour:b.hour,minute:b.minute})},[t]),x=f.useMemo(()=>({hour:e.hour,minute:e.minute}),[e.hour,e.minute]);return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(D,{variant:"tiny",color:"light",className:"select-none",children:r({defaultMessage:"Schedule",id:"hGQqkWwmJD"})}),o.jsxs("div",{className:"flex h-10 flex-wrap gap-3",children:[o.jsx(Tv,{options:u7t,value:e.kind,onChange:m,isMobileStyle:s,variant:n}),c&&o.jsx(Tv,{options:d7t,value:String(e.dayOfWeek),onChange:p,isMobileStyle:s,variant:n}),d&&o.jsx(Tv,{options:m7t,value:String(e.month),onChange:h,isMobileStyle:s,variant:n}),u&&o.jsx(Tv,{options:f7t,value:String(e.day),onChange:g,isMobileStyle:s,variant:n}),l&&o.jsx($g,{children:o.jsx(_M,{value:a,onChange:y,variant:n})}),o.jsx($g,{children:o.jsx(lDt,{value:x,onChange:v,variant:n})})]})]})});mW.displayName="ScheduleSelect";const cDt=ot({selectModel:{defaultMessage:"Select model...",id:"XZsGHYyuKM"}}),uDt=({selectedModel:e,onModelChange:t,variant:n="default"})=>{const r="task-modal-model-selector",s=e||le.PRO,{$t:a}=Z(),{isMobileStyle:i}=xe(),{isSearchModelReasoningToggleEnabled:l}=v2e(),{selectOptions:c}=b2e({reason:r,selectedSearchMode:ie.SEARCH,currentModel:s,onModelSelect:g=>{t?.(g)}}),{menuItems:u}=w2e({searchMode:ie.SEARCH,currentModel:s,onModelSelect:g=>{t?.(g)}}),d=f.useMemo(()=>c.map(g=>({type:"default",text:g.label,onClick:()=>t?.(g.value),active:g.value===s})),[c,s,t]),m=f.useMemo(()=>l?u:d,[l,u,d]),p=Yn[s].name||cDt.selectModel,h=(()=>{switch(n){case"subtle":return"bg-subtle";case"default":return"!bg-subtler";default:Gt(n)}})();return o.jsx(Jt,{items:m,isMobileStyle:i,placement:"bottom",contentClassName:"w-full",boxProps:{className:"w-full"},popoverProps:{matchTargetWidth:!0,avoidPositionCollisions:!1},children:o.jsx(he,{text:a(p),extraCSS:B("px-4 size-full !h-10 border-0 !outline-none !justify-start font-normal",h),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Dn})})};function dDt(e,t){if(e.includes(t)){let n=e.filter(r=>r!==t);return t==="web"&&e.includes("crunchbase")&&(n=n.filter(r=>r!=="crunchbase")),n}else{const n=[...e];return t==="crunchbase"&&!n.includes("web")&&n.push("web"),n.push(t),n}}function fDt({sources:e,onChange:t,variant:n="default"}){const[r,s]=f.useState(!1),a=f.useCallback(i=>{const l=dDt(e,i);t(l)},[t,e]);return o.jsx(b$,{isOpen:r,onOpen:()=>s(!0),onClose:()=>s(!1),selectedSources:e,onSourcesChange:a,variant:"button",buttonVariant:n,hiddenSources:[bl.org,bl.google_drive,bl.onedrive,bl.sharepoint,bl.my_files],allowCometRestrictions:!1})}const xT=f.memo(({searchModel:e,onSearchModelChange:t,sources:n,onSourcesChange:r,variant:s="default"})=>{const a=io[e]??ie.SEARCH,{hasActiveSubscription:i}=_t();return o.jsx("div",{className:"flex w-full flex-col gap-2",children:o.jsxs("div",{className:"flex gap-3",children:[i&&o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(D,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(pe,{defaultMessage:"Mode",id:"mrOnjMzgC4"})}),o.jsx("div",{className:"h-full w-fit",children:o.jsx(v$,{value:e,onChange:t,layoutKey:"task-modal",className:"h-full",variant:s,buttonSize:"regular"})})]}),i&&a===ie.SEARCH&&o.jsxs("div",{className:"flex min-w-[100px] flex-1 flex-col gap-2",children:[o.jsx(D,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(pe,{defaultMessage:"Model",id:"rhSI1/3g21"})}),o.jsx($g,{children:o.jsx(uDt,{selectedModel:e,onModelChange:t,variant:s})})]}),i&&o.jsxs("div",{className:"flex min-w-[100px] flex-col gap-2",children:[o.jsx(D,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(pe,{defaultMessage:"Sources",id:"fhwTpAcBLC"})}),o.jsx($g,{children:o.jsx(fDt,{sources:n,onChange:r,variant:s})})]})]})})});xT.displayName="QuerySearchConfigurationSelector";const Zke=f.memo(({query:e,onQueryChange:t})=>{const{$t:n}=Z(),{hasActiveSubscription:r}=_t(),s=f.useCallback(l=>{t({...e,searchModel:l})},[t,e]),a=f.useCallback(l=>{t({...e,sources:l})},[t,e]);if(!r)return null;const i=n({defaultMessage:"Model options",id:"ObVxV7yacw"});return o.jsx(jke,{title:i,children:o.jsx(xT,{searchModel:e.searchModel,onSearchModelChange:s,sources:e.sources??Lb(),onSourcesChange:a,variant:"subtle"})})});Zke.displayName="ScheduledAutomationAdvancedConfiguration";const Jke=f.memo(({trigger:e,query:t,onQueryChange:n})=>{switch(e.type){case ct.SCHEDULED:return o.jsx(Zke,{query:t,onQueryChange:n});case ct.PRICE_ALERT:case ct.SHORTCUT:return null;default:Gt(e)}});Jke.displayName="AutomationAdvancedSettingsConfiguration";const eTe=f.memo(({expiryDate:e,onExpiryDateChange:t,schedule:n})=>{const{$t:r}=Z(),s=f.useCallback(l=>{l.stopPropagation(),t(null)},[t]),a=f.useMemo(()=>o.jsx(he,{type:"button",onClick:s,icon:Rt,size:"tiny",variant:"common"}),[s]),i=f.useMemo(()=>{if(e===null)return;const l=n?WD(n):void 0;return l?Ds(l,1):void 0},[e,n]);return o.jsx(_M,{value:e===null?void 0:e,onChange:t,buttonClassName:"w-full py-sm bg-subtle",trailingIcon:a,fromDate:i,placeholder:r({defaultMessage:"None selected",id:"7MYtB45RD0"})})});eTe.displayName="AutomationExpiryDatePicker";const tTe=f.memo(({defaultExpiryDate:e,expiryDate:t,onExpiryDateChange:n,schedule:r})=>{const s=f.useCallback(a=>{n?.(a)},[n]);return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(D,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(pe,{defaultMessage:"Expiration date",id:"CICBj0Td+l"})}),o.jsx(eTe,{expiryDate:t||e,onExpiryDateChange:s,schedule:r})]})});tTe.displayName="ExpiryDateSection";const nTe=f.memo(({trigger:e,onTriggerChange:t})=>{const n=f.useCallback(r=>{e.type===ct.SCHEDULED&&t({...e,type:ct.SCHEDULED,expiryDate:r})},[t,e]);switch(e.type){case ct.SCHEDULED:return e.schedule.kind!=="ONCE"?o.jsx(tTe,{defaultExpiryDate:e.defaultExpiryDate,expiryDate:e.expiryDate,onExpiryDateChange:n,schedule:e.schedule}):null;case ct.PRICE_ALERT:case ct.SHORTCUT:return null;default:Gt(e)}});nTe.displayName="AutomationExpiryDateConfiguration";const mDt=({options:e,selectedValues:t,onSelectionChange:n,placeholder:r="Select options...",disabled:s=!1})=>{const a=Z(),{isMobileStyle:i}=xe(),[l,c]=f.useState(!1),u=f.useCallback(v=>{const b=t.includes(v)?t.filter(_=>_!==v):[...t,v];n(b)},[t,n]),d=f.useMemo(()=>e.map(v=>{const x=t.includes(v.value);return{type:"multiSelect",text:v.label,onClick:()=>{u(v.value)},selected:x,iconVariant:"check",disableActiveStyles:!0}}),[e,t,u]),m=f.useMemo(()=>{if(t.length===0)return r;const v=t.map(x=>e.find(b=>b.value===x)?.label).filter(Boolean);return new Intl.ListFormat(a.locale,{style:"long",type:"conjunction"}).format(v)},[t,e,r,a.locale]),p=f.useCallback(()=>c(!0),[]),h=f.useCallback(()=>c(!1),[]),g=f.useMemo(()=>({className:"w-[180px]"}),[]),y=f.useMemo(()=>({matchTargetWidth:!1,avoidPositionCollisions:!1}),[]);return o.jsx(Jt,{isOpen:l,onOpen:p,onClose:h,items:d,isMobileStyle:i,placement:"bottom-end",contentClassName:"w-full",boxProps:g,popoverProps:y,disabled:s,alwaysShowChildren:!0,children:o.jsx(he,{text:m,extraCSS:B("px-4 w-full !h-10 border-0 !outline-none !justify-start font-normal"),textClassName:"text-left text-foreground text-sm font-normal truncate",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Dn,disabled:s})})},rTe=(e,t)=>{const{value:n,loading:r}=It({flag:"app-notifications",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},sTe=f.memo(({notificationSettings:e,onNotificationSettingsChange:t,disabled:n})=>{const{$t:r}=vle(),{variation:s,loading:a}=rTe(!1),i=f.useMemo(()=>{const u=[];return s&&!a&&u.push({value:"in_app",label:r({defaultMessage:"In-app",id:"E7zWOQXV+k"})}),u.push({value:"email",label:r({defaultMessage:"Email",id:"sy+pv5U9ls"})},{value:"push",label:r({defaultMessage:"Mobile",id:"GWtmtuCmOx"})}),u},[r,s,a]),l=f.useMemo(()=>{const u=[];return s&&!a&&e.should_send_in_app&&u.push("in_app"),e.should_send_email&&u.push("email"),e.should_send_push&&u.push("push"),u},[e,s,a]),c=f.useCallback(u=>{t({should_send_email:u.includes("email"),should_send_push:u.includes("push"),should_send_in_app:u.includes("in_app")})},[t]);return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(D,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(pe,{defaultMessage:"Notification platform",id:"L9evilaxeT"})}),o.jsx(mDt,{options:i,selectedValues:l,onSelectionChange:c,placeholder:r({defaultMessage:"Select platform",id:"Gl5w1+hLYC"}),disabled:n})]})});sTe.displayName="AutomationNotificationConfiguration";const qa=`
`;function aTe({baseInstructions:e,additionalInstructions:t}){let n=e+qa;return t&&(n+=t),n}function dae({prompt:e,baseInstructions:t}){if(!e||!t)return"";const n=e.replace(/\\n/g,qa),r=t.replace(/\\n/g,qa),s=r+qa;if(n.startsWith(s))return n.slice(s.length);if(n.startsWith(r)){const l=n.slice(r.length);if(l.startsWith(qa))return l.slice(qa.length);if(l.trim()==="")return""}return n.startsWith(r)?"":n}function pDt(e){const t=e.split(qa),n=t[0]||"",r=t.length>1?t.slice(1).join(qa):"";return{baseInstructions:n,additionalInstructions:r}}function hDt(e,t){let n=e;for(const[r,s]of Object.entries(t))n=n.replaceAll(r,s);return n}function fae({rawInstructions:e,symbol:t,quoteName:n="",eventValue:r,direction:s}){return hDt(e,{"\\\\n":`
`,"{symbol}":t,"{quoteName}":n,"{{event_value}}":r,"{{direction}}":s})}function oTe({prompt:e,symbol:t,quoteName:n=""}){if(!t||!e)return"";let r=e;r.startsWith('"')&&r.endsWith('"')&&(r=r.slice(1,-1));const s="Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent {{direction}} to {{event_value}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.",a="Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent {{event_value}}% {{direction}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.";let i=r;if(i.startsWith(s+qa))i=i.slice((s+qa).length);else if(i.startsWith(a+qa))i=i.slice((a+qa).length);else if(i===s||i===a)return"";if(i.includes(qa)){const l=i.split(qa);i=l[l.length-1]??i}return i}function NO({selectedSymbol:e,symbol:t,quote:n,isLoading:r=!1,alertType:s,priceValue:a,percentValue:i,currencySymbol:l,$t:c}){const u=e??t,d=n?.name?` (${n.name})`:"",m=f.useMemo(()=>s==="price"?gDt({symbol:u,quoteName:d,priceValue:a,currencySymbol:l,$t:c}):yDt({symbol:u,quoteName:d,percentValue:i,$t:c}),[s,u,d,a,l,c,i]),p=f.useMemo(()=>!u||!n?"":s==="price"?bT({symbol:u,quoteName:d}):_T({symbol:u,quoteName:d}),[u,n,s,d]),h=!r&&n?.name;return f.useMemo(()=>({shouldShowDisplayInstructions:h,displayInstructions:m,baseInstructions:p,effectiveSymbol:u,quoteName:d}),[p,m,u,d,h])}function bT({symbol:e,quoteName:t,$t:n}){return n?n({id:"0J1c9pn78+",defaultMessage:"Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent '{{direction}}' to '{{event_value}}'. Contextualize this price movement within the last few weeks of price movement and investor narrative."},{symbol:e||"",quoteName:t||""}):`Explain the factors driving the latest movement of ${e}${t||""}, including its recent {{direction}} to {{event_value}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.`}function _T({symbol:e,quoteName:t,$t:n}){return n?n({id:"9XAm3nfaVB",defaultMessage:"Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent '{{event_value}}%' '{{direction}}'. Contextualize this price movement within the last few weeks of price movement and investor narrative."},{symbol:e||"",quoteName:t||""}):`Explain the factors driving the latest movement of ${e}${t||""}, including its recent {{event_value}}% {{direction}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.`}function gDt({symbol:e,quoteName:t,priceValue:n,currencySymbol:r,$t:s}){if(!e)return s({id:"39tYCstx5d",defaultMessage:"Explain the factors driving the latest movement of this asset, including its recent rise/fall. Contextualize this price movement within the last few weeks of price movement and investor narrative."});const a=n&&n!=="$"?s({defaultMessage:" to {currencySymbol}{priceValue}",id:"zSy/VeEpR9"},{priceValue:n,currencySymbol:r}):"",i=s({defaultMessage:"rise/fall",id:"+dqzTFX/gy"});return bT({symbol:e,quoteName:t,$t:s}).replace(" to {{event_value}}",a).replace("{{direction}}",i)}function yDt({symbol:e,quoteName:t,percentValue:n,$t:r}){if(!e)return r({id:"pP0ylRs8IX",defaultMessage:"Explain the factors driving the latest movement of this asset, including its recent increase/decrease. Contextualize this price movement within the last few weeks of price movement and investor narrative."});const s=r({id:"QBY86oKDNP",defaultMessage:"increase/decrease"});return _T({symbol:e,quoteName:t,$t:r}).replace(" {{event_value}}%",n?` ${parseFloat(n).toFixed(2)}%`:"").replace("{{direction}}",s)}const Rd=1e9,Pd=-1e9;function jO({symbol:e,alertType:t,priceValue:n,priceThreshold:r,percentValue:s,positiveSelected:a=!0,negativeSelected:i=!0,baseInstructions:l,additionalInstructions:c=""}){let u,d="";if(t==="price"){if(!n||!r)return null;const p=parseFloat(n.replace(/[^0-9.]/g,""));if(isNaN(p))return null;u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_TARGET",value_lower_bound:r==="below"?p:Pd,value_upper_bound:r==="above"?p:Rd},d=`Alert when ${e} is ${r} ${n}`}else if(t==="movement"){if(!s)return null;const p=parseFloat(s);if(isNaN(p))return null;a&&i?(u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_MOVEMENT",value_lower_bound:-p,value_upper_bound:p},d=`Alert when ${e} moves +${s}% or -${s}% in a day`):a?(u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_MOVEMENT",value_lower_bound:Pd,value_upper_bound:p},d=`Alert when ${e} moves +${s}% in a day`):i&&(u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_MOVEMENT",value_lower_bound:-p,value_upper_bound:Rd},d=`Alert when ${e} moves -${s}% in a day.`)}if(!u)return null;const m=aTe({baseInstructions:l,additionalInstructions:c});return{task_name:d,prompt:m,event_subscription:u,model_preference:"turbo"}}const wT="5";function AO(e){const t={selectedSymbol:e.symbol,additionalInstructions:"",selectedOption:"price",priceValue:"",percentValue:"",positiveSelected:!0,negativeSelected:!0};switch(e.alertType){case Vr.TARGET_PRICE:return{...t,selectedOption:"price",priceValue:e.price===0?"":e.price.toString()};case Vr.MOVEMENT_AMOUNT:{const n=e.percentageDecimalUpperBound>0&&e.percentageDecimalUpperBound!==Rd/100,r=e.percentageDecimalLowerBound<0&&e.percentageDecimalLowerBound!==Pd/100;let s="";return n?s=(e.percentageDecimalUpperBound*100).toFixed(2):r&&(s=(Math.abs(e.percentageDecimalLowerBound)*100).toFixed(2)),s?{...t,selectedOption:"movement",percentValue:s,positiveSelected:n,negativeSelected:r}:{...t,selectedOption:"movement",percentValue:wT,positiveSelected:!0,negativeSelected:!0}}default:Gt(e)}}function vDt(e){switch(e.selectedOption){case"price":{const t=parseFloat(e.priceValue.replace(/[^0-9.]/g,""));return{type:ct.PRICE_ALERT,alertType:Vr.TARGET_PRICE,symbol:e.selectedSymbol??"",price:t||0,currency:"usd"}}case"movement":{const n=(parseFloat(e.percentValue)||0)/100;let r=0,s=0;return e.positiveSelected&&e.negativeSelected?(r=n,s=-n):e.positiveSelected?r=n:e.negativeSelected&&(s=-n),{type:ct.PRICE_ALERT,alertType:Vr.MOVEMENT_AMOUNT,symbol:e.selectedSymbol??"",percentageDecimalUpperBound:r,percentageDecimalLowerBound:s}}default:Gt(e.selectedOption)}}function xDt({trigger:e,onTriggerChange:t}){const[n,r]=f.useState(()=>AO(e)),s=f.useMemo(()=>e.alertType===Vr.TARGET_PRICE?`${e.symbol}-${e.alertType}-${e.price}`:`${e.symbol}-${e.alertType}-${e.percentageDecimalUpperBound}-${e.percentageDecimalLowerBound}`,[e]),a=f.useRef(s);f.useEffect(()=>{s!==a.current&&(r(AO(e)),a.current=s)},[s,e]);const i=f.useCallback(y=>{const v=vDt(y);t(v)},[t]),l=f.useCallback(y=>{r(v=>{const x=y(v);return i(x),x})},[i]),c=f.useCallback(y=>{l(v=>({...v,selectedSymbol:y}))},[l]),u=f.useCallback((y,v="")=>{l(x=>{switch(y){case"price":return{...x,selectedOption:y,priceValue:v};case"movement":return{...x,selectedOption:y,percentValue:wT,positiveSelected:!0,negativeSelected:!0};default:Gt(y)}})},[l]),d=f.useCallback(y=>{l(v=>({...v,priceValue:typeof y=="function"?y(v.priceValue):y}))},[l]),m=f.useCallback(y=>{l(v=>({...v,percentValue:typeof y=="function"?y(v.percentValue):y}))},[l]),p=f.useCallback(y=>{l(v=>({...v,positiveSelected:y}))},[l]),h=f.useCallback(y=>{l(v=>({...v,negativeSelected:y}))},[l]),g=f.useCallback(y=>{r(v=>({...v,additionalInstructions:y}))},[]);return f.useMemo(()=>({formState:n,onSymbolChange:c,onOptionChange:u,onPriceValueChange:d,onPercentValueChange:m,onPositiveChange:p,onNegativeChange:h,onAdditionalInstructionsChange:g}),[n,c,u,d,m,p,h,g])}const aw=({symbol:e,enabled:t=!!e,onInitialSuccess:n})=>{const r=f.useRef(!1),s=We({enabled:t&&!!e,queryKey:S1({symbol:e}),queryFn:()=>Td({symbol:e}),refetchInterval:5*1e3});return f.useEffect(()=>{s.isSuccess&&s.data&&!r.current&&n&&(r.current=!0,n(s.data))},[s.isSuccess,s.data,n]),s},bDt=async({query:e,locale:t,reason:n})=>{try{const{data:r,error:s}=await se.GET("/rest/autosuggest/finance/tasks-autosuggest",n,{params:{query:{query:e}},headers:{"accept-language":t}});if(s)throw new Ce("API_CLIENTS_ERROR",{message:"Failed to get finance tasks suggestions",cause:s});return"results"in r?r.results:[]}catch(r){return ne.error(r),[]}},iTe="[&_textarea]:placeholder:!text-quietest placeholder:!text-quietest hover:!border-subtler focus-within:!border-subtler !border !border-transparent",_Dt=e=>/^(\d+(\.\d{0,2})?|\.\d{1,2})$/.test(e),wDt=e=>/^(\d+(\.\d{0,1})?|\.\d{0,1})$/.test(e),CT=(e,t)=>{try{return new Intl.NumberFormat(t,{style:"currency",currency:e.toUpperCase(),currencyDisplay:"symbol"}).format(0).replace(/[0-9.,\s]/g,"").trim()||"$"}catch{return"$"}},CDt=({currentPrice:e,value:t,onChange:n,variant:r="default",currency:s="USD"})=>{const{isMobileUserAgent:a}=xe(),{locale:i,$t:l}=Z(),c=f.useMemo(()=>CT(s,i),[s,i]),u=f.useMemo(()=>e?.toLocaleString(i,{style:"currency",currency:s.toUpperCase()}),[e,i,s]),d=f.useCallback(y=>{n(v=>{if(y===c)return y;const x=y.replace(c,"");return _Dt(x)||y===""?c+x:v})},[n,c]),m=f.useCallback(()=>{t===""&&n(c)},[n,t,c]),p=f.useCallback(()=>{t===c&&n("")},[n,t,c]),h=(()=>{switch(r){case"default":return"bg-subtler [&_textarea]:bg-subtler";case"subtle":return"bg-subtle [&_textarea]:bg-subtle";default:Gt(r)}})(),g=B(iTe,h);return o.jsxs("div",{className:"gap-sm flex flex-col items-start",children:[o.jsx(D,{variant:"tiny",color:"light",children:u?l({id:"74LVOPcS2E",defaultMessage:"Target Price (currently {formattedPrice})"},{formattedPrice:u}):l({id:"xPMPP84OOV",defaultMessage:"Target Price"})}),o.jsx("div",{className:"gap-sm flex items-stretch",children:o.jsx(Pr,{placeholder:c,className:B(g,"p-sm !rounded-md"),variant:"monospace",isMobileUserAgent:a,value:t,onChange:d,onFocus:m,onBlur:p,disable1pass:!0,colorVariant:r})})]})},SDt=({value:e,onChange:t,positiveSelected:n,onPositiveChange:r,negativeSelected:s,onNegativeChange:a,variant:i="default"})=>{const{isMobileUserAgent:l}=xe(),{$t:c}=Z(),u=f.useCallback(()=>{a(!s)},[s,a]),d=f.useCallback(()=>{r(!n)},[r,n]),m=f.useCallback(y=>{t(v=>wDt(y)||y===""?y:v)},[t]),p=f.useMemo(()=>({delayDuration:100}),[]),h=(()=>{switch(i){case"default":return"bg-subtler [&_textarea]:bg-subtler";case"subtle":return"bg-subtle [&_textarea]:bg-subtle";default:Gt(i)}})(),g=B(iTe,h);return o.jsx("div",{className:"gap-md flex flex-col",children:o.jsxs("div",{className:"gap-sm flex flex-col items-start",children:[o.jsx(D,{variant:"tiny",color:"light",children:c({id:"agMnIX4PMS",defaultMessage:"Movement Amount (%)"})}),o.jsxs("div",{className:"gap-md flex h-full items-center",children:[o.jsxs("div",{className:"gap-sm flex h-full items-center",children:[o.jsx(he,{variant:s?"primaryGhost":"border",size:"small",onClick:u,pill:!0,icon:GM,toolTip:c({id:"M9L9vXrgoN",defaultMessage:"Negative Movement"}),tooltipProps:p}),o.jsx(he,{variant:n?"primaryGhost":"border",size:"small",onClick:d,pill:!0,icon:ar,toolTip:c({id:"iFYP+IX00i",defaultMessage:"Positive Movement"}),tooltipProps:p})]}),o.jsx(Pr,{className:B(g,"p-sm !rounded-md"),variant:"monospace",isMobileUserAgent:l,value:e,onChange:m,disable1pass:!0,colorVariant:i})]})]})})},pW=I.memo(e=>{const{selectedSymbol:t,selectedOption:n,onSymbolChange:r,onOptionChange:s,showSymbolInput:a=!0,currentPrice:i,priceValue:l,onPriceValueChange:c,percentValue:u,onPercentValueChange:d,positiveSelected:m,onPositiveChange:p,negativeSelected:h,onNegativeChange:g,externalInputValue:y,variant:v,colorVariant:x="default",currency:b,isAssetSelected:_=!0}=e,w=()=>{switch(v){case"full":return{additionalInstructions:e.additionalInstructions,onAdditionalInstructionsChange:e.onAdditionalInstructionsChange,displayPriceInstructions:e.displayPriceInstructions,displayMovementInstructions:e.displayMovementInstructions};case"trigger":return{additionalInstructions:"",onAdditionalInstructionsChange:()=>{},displayPriceInstructions:void 0,displayMovementInstructions:void 0};default:return Gt(v)}},{additionalInstructions:C,onAdditionalInstructionsChange:S,displayPriceInstructions:E,displayMovementInstructions:M}=w(),{isMobileUserAgent:k}=xe(),{$t:A,locale:R}=Z(),[O,L]=f.useState(!1),[P,N]=f.useState(0),[T,j]=f.useState(""),[F,U]=f.useState([]),V=f.useRef(null),$=ht(),z=f.useRef(T);z.current=T,f.useEffect(()=>{j(y??"")},[y]),f.useEffect(()=>{if(b&&l){const be=CT(b.toUpperCase(),R);if(/^\d+(\.\d+)?$/.test(l)){c(be+l);return}const Ae=l.replace(/[^0-9.]/g,"");l.replace(/[0-9.]/g,"").trim()!==be&&Ae&&c(be+Ae)}},[b,R,l,c]);const Q=f.useMemo(()=>[{label:A({id:"xPMPP84OOV",defaultMessage:"Target Price"}),value:"price"},{label:A({id:"24152tl1L3",defaultMessage:"Movement Amount"}),value:"movement"}].map(me=>({label:me.label,value:me.value,children:o.jsx("div",{className:"w-full flex-1",children:o.jsx(y$,{label:me.label,isActiveOption:n===me.value})})})),[n,A]),Y=f.useCallback(async be=>{const Ae=(await $.fetchQuery({queryKey:["finance-tasks-autosuggest",be],queryFn:()=>bDt({query:be,reason:"finance-add-alert"}),staleTime:0})).map(Ee=>({query:Ee.title??"",title:Ee.title??"",image:Ee.image??"",imageDark:Ee.image_dark??"",description:Ee.description??"",identifier:Ee.title??""}));U(Ae)},[$]),W=$s(Y,100,{leading:!0,trailing:!0}),X=f.useCallback(be=>{W(be)},[W]),G=f.useCallback(()=>{L(!0),N(-1),X(z.current)},[X]),J=f.useCallback(()=>{L(!1)},[]),q=f.useCallback(be=>{const me=be;j(me),X(me),me.trim()===""&&(r(null),c(""),d(""))},[X,r,c,d]),te=f.useCallback(be=>{r(be.identifier??null),j(be.title??""),L(!1),V.current?.blur()},[r]),re=q2e({userInputQuery:T,suggestionsDisabled:!O||F.length===0,suggestions:F,focusedIndex:P,setFocusedIndex:N,onChange:be=>{j(be)},handleSuggestionSubmission:te,inputRef:V}),ae=f.useCallback(be=>{s(be)},[s]),fe=f.useCallback(be=>{S?.(be)},[S]),de=B("h-10 rounded-md dark:border-0 dark:border-transparent dark:bg-subtle p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":O&&F.length>0}),ve=f.useMemo(()=>({image:be,imageDark:me,alt:Ae})=>o.jsx(C3,{image:be,imageDark:me,alt:Ae,watchlistType:"FINANCE",className:"bg-subtler mr-sm !size-8 rounded",imageClassName:"inset-xs"}),[]),_e=({onClear:be})=>o.jsx(Te,{icon:Rt,size:"tiny",pill:!0,onClick:be}),Se=f.useMemo(()=>({RightIconComponent:()=>null,LeftIconComponent:ve}),[ve]);return o.jsxs("div",{className:"flex flex-col gap-3",children:[a&&o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(D,{variant:"tiny",color:"light",children:o.jsx(pe,{defaultMessage:"Find a stock, token, or fund...",id:"DTOgClV6qi"})}),o.jsx(Iy,{isOpen:O&&F.length>0,suggestedQueries:F,focusedIndex:P,setFocusedIndex:N,handlePasteQuery:kn,handleSubmit:te,value:T,components:Se,dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full",dropdownType:"select",popoverClassName:"dark:!border-none",children:o.jsx(Pr,{autoFocus:!t,onFocus:G,onBlur:J,onKeyDown:re,className:de,pill:!1,ref:V,isMobileUserAgent:k,placeholder:A({defaultMessage:"Search for any asset",id:"BeYic/1TvC"}),value:T,onChange:q,ClearIcon:_e,colorVariant:x})})]}),o.jsxs("div",{className:B("flex flex-col gap-3 sm:flex-row",!_&&"pointer-events-none opacity-50"),children:[o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(D,{variant:"tiny",color:"light",children:o.jsx(pe,{defaultMessage:"Alert criteria",id:"h44KqVtM6/"})}),o.jsx(ge.div,{layout:!0,layoutRoot:!0,children:o.jsx(g$,{layoutKey:"task",options:Q,value:n,onValueChange:ae,className:"p-three inline-flex",variant:x})})]}),o.jsxs("div",{className:"gap-md flex flex-col",children:[n==="price"&&o.jsx(CDt,{currentPrice:i,value:l,onChange:c,variant:x,currency:b}),n==="movement"&&o.jsx(SDt,{value:u,onChange:d,positiveSelected:m,onPositiveChange:p,negativeSelected:h,onNegativeChange:g,variant:x})]})]}),v==="full"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[o.jsx("div",{className:"gap-xs flex w-full items-center",children:o.jsx(D,{variant:"smallBold",color:"light",className:"flex shrink-0 items-center",children:A({id:"qax5d8pQCh",defaultMessage:"Default Query"})})}),o.jsx("div",{className:"w-full [&>*]:w-full",children:o.jsx(D,{variant:"small",color:"light",className:"pl-sm border-subtlest border-l-2",children:n==="price"?E:M})})]}),o.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[o.jsx("div",{className:"gap-xs flex w-full items-center",children:o.jsx(D,{variant:"smallBold",color:"light",className:"flex shrink-0 items-center",children:A({id:"QFuOkrgHHJ",defaultMessage:"Additional Instructions (optional)"})})}),o.jsx("div",{className:"w-full [&>*]:w-full",children:o.jsx(Aa,{value:C,onChange:fe,isMobileUserAgent:k,isMobileStyle:!1,minRows:3,placeholder:A({id:"DtwY5RHKrT",defaultMessage:"Check news and social media sentiment to assess consensus or controversy"})})})]})]})]})});pW.displayName="FinanceAlertForm";const lTe=f.memo(({trigger:e,prompt:t,onPromptChange:n,error:r,variant:s="default",disabled:a})=>{const{isMobileUserAgent:i}=xe(),{$t:l,locale:c}=Z(),u=AO(e),{selectedSymbol:d,priceValue:m,percentValue:p}=u,{data:h,isLoading:g}=aw({symbol:u.selectedSymbol}),y=e.alertType===Vr.TARGET_PRICE?"price":"movement",v=h?.currency?CT(h?.currency,c):"$",{displayInstructions:x}=NO({selectedSymbol:d,quote:h,isLoading:g,alertType:y,priceValue:m,percentValue:p,currencySymbol:v,$t:l});return o.jsxs("div",{className:B("gap-md flex flex-col",a&&"pointer-events-none opacity-50"),children:[o.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[o.jsx("div",{className:"gap-xs flex w-full items-center",children:o.jsx(D,{variant:"tiny",color:"light",className:"flex shrink-0 items-center",children:o.jsx(pe,{defaultMessage:"Default query",id:"7SalR4PwjB"})})}),o.jsx("div",{className:"w-full [&>*]:w-full",children:o.jsx(D,{variant:"small",color:"light",className:"pl-sm border-subtlest border-l-2",children:x})})]}),o.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[o.jsx("div",{className:"gap-xs flex w-full items-center",children:o.jsx(D,{variant:"tiny",color:"light",className:"flex shrink-0 items-center",children:o.jsx(pe,{defaultMessage:"Additional Instructions (optional)",id:"QFuOkrgHHJ"})})}),o.jsx("div",{className:"w-full [&>*]:w-full",children:o.jsx(Aa,{value:t,onChange:n,isMobileUserAgent:i,isMobileStyle:!1,minRows:3,maxLength:Nde,className:B("[&_textarea]:placeholder:!text-quietest placeholder:!text-quietest hover:!border-subtler focus-within:!border-subtler !border !border-transparent","w-full"),placeholder:"Check news and social media sentiment to assess consensus or controversy",variant:s,disabled:a})})]}),r&&o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(Dd,{size:12,className:"text-caution"}),o.jsx(D,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:r})]})]})});lTe.displayName="PriceAlertQueryPromptInput";const cTe=f.memo(({trigger:e,prompt:t,onPromptChange:n,error:r,variant:s,disabled:a})=>{const{data:i}=aw({symbol:e.symbol}),l=f.useMemo(()=>{if(!e.symbol)return"";const d=i?.name?` (${i.name})`:"";return e.alertType===Vr.TARGET_PRICE?bT({symbol:e.symbol,quoteName:d}):_T({symbol:e.symbol,quoteName:d})},[e.symbol,e.alertType,i?.name]),c=f.useMemo(()=>{const d=i?.name?` (${i.name})`:"";return oTe({prompt:t,symbol:e.symbol,quoteName:d})},[t,e.symbol,i?.name]),u=d=>{const m=aTe({baseInstructions:l,additionalInstructions:d});n(m)};return o.jsx(lTe,{trigger:e,prompt:c,onPromptChange:u,error:r,variant:s,disabled:a})});cTe.displayName="PriceAlertPromptWrapper";const ST=f.memo(({trigger:e,prompt:t,onPromptChange:n,placeholder:r,error:s,variant:a="default",disabled:i})=>{const{isMobileUserAgent:l}=xe(),c=(()=>{switch(a){case"default":return"bg-subtler [&_textarea]:bg-transparent";case"subtle":return"bg-subtle [&_textarea]:bg-transparent";default:Gt(a)}})();switch(e.type){case ct.SCHEDULED:case ct.SHORTCUT:return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(D,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(pe,{defaultMessage:"Instructions",id:"sV2v5LjRpX"})}),o.jsx(Aa,{placeholder:r,value:t,onChange:n,isMobileUserAgent:l,isMobileStyle:!1,minRows:3,maxLength:Nde,allowEnterNewlines:!0,className:B("hover:!border-subtler focus-within:!border-subtler !border !border-transparent",c),variant:a,disabled:i}),s&&o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(Dd,{size:12,className:"text-caution"}),o.jsx(D,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:s})]})]});case ct.PRICE_ALERT:return o.jsx(cTe,{trigger:e,prompt:t,onPromptChange:n,error:s,variant:a,disabled:i});default:Gt(e)}});ST.displayName="QueryPromptInput";const uTe=f.memo(({trigger:e,query:t,onQueryChange:n})=>{const{$t:r}=Z(),s=f.useCallback(c=>{n({...t,prompt:c})},[n,t]),a=f.useCallback(c=>{n({...t,searchModel:c})},[n,t]),i=f.useCallback(c=>{n({...t,sources:c})},[n,t]),l=f.useMemo(()=>{switch(e.type){case ct.SCHEDULED:return null;case ct.PRICE_ALERT:return null;case ct.SHORTCUT:return o.jsx(xT,{searchModel:t.searchModel,onSearchModelChange:a,sources:t.sources??Lb(),onSourcesChange:i,variant:"subtle"});default:Gt(e)}},[a,i,t.searchModel,t.sources,e]);return e.type===ct.PRICE_ALERT?null:o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsx(ST,{trigger:e,prompt:t.prompt,placeholder:r({defaultMessage:"Describe what you want to automate",id:"79ZUaZU8Ho"}),onPromptChange:s,variant:"subtle"}),l]})});uTe.displayName="AutomationQueryConfiguration";const dTe=f.memo(({trigger:e,onTriggerChange:t,isEditing:n,defaultTargetPriceValue:r})=>{const{formState:s,onSymbolChange:a,onOptionChange:i,onPriceValueChange:l,onPercentValueChange:c,onPositiveChange:u,onNegativeChange:d}=xDt({trigger:e,onTriggerChange:t}),m=f.useCallback(v=>r||(v.price?EDt(v.price):""),[r]),p=f.useCallback(v=>{switch(s.selectedOption){case"price":{if(v&&!s.priceValue){const x=m(v);x&&l(x)}break}case"movement":break;default:Gt(s.selectedOption)}},[s.priceValue,s.selectedOption,m,l]),{data:h}=aw({symbol:s.selectedSymbol,onInitialSuccess:p}),g=f.useCallback(v=>{let x="";switch(v){case"price":{x=s.priceValue,h&&(x=m(h));break}case"movement":break;default:Gt(v)}i(v,x)},[s.priceValue,m,i,h]),y=!!e.symbol&&e.symbol.trim()!=="";return o.jsx("div",{children:o.jsx(pW,{variant:"trigger",externalInputValue:s.selectedSymbol??void 0,selectedSymbol:s.selectedSymbol,selectedOption:s.selectedOption,onSymbolChange:a,onOptionChange:g,showSymbolInput:!n,currentPrice:h?.price,priceValue:s.priceValue,onPriceValueChange:l,percentValue:s.percentValue,onPercentValueChange:c,positiveSelected:s.positiveSelected,onPositiveChange:u,negativeSelected:s.negativeSelected,onNegativeChange:d,colorVariant:"subtle",currency:h?.currency??void 0,isAssetSelected:y})})});dTe.displayName="PriceAlertTriggerConfiguration";function EDt(e){return(e*(1+parseInt(wT,10)/100)).toFixed(2)}const IO=f.memo(({trigger:e,onTriggerChange:t})=>{const n=f.useMemo(()=>e?.schedule??js(),[e?.schedule]),r=f.useCallback(s=>{t({type:ct.SCHEDULED,...e,schedule:{...n,...s}})},[t,n,e]);return o.jsx(mW,{schedule:n,onScheduleChange:r,variant:"subtle"})});IO.displayName="ScheduledAutomationTriggerConfiguration";const fTe=f.memo(()=>o.jsx("div",{children:"Shortcut Trigger Configuration"}));fTe.displayName="ShortcutTriggerAutomationConfiguration";const mTe=f.memo(({trigger:e,onTriggerChange:t,isEditing:n=!1,defaultTargetPriceValue:r})=>{if(!e)return o.jsx(IO,{trigger:null,onTriggerChange:t});switch(e.type){case ct.SCHEDULED:return o.jsx(IO,{trigger:e,onTriggerChange:t});case ct.PRICE_ALERT:return o.jsx(dTe,{trigger:e,onTriggerChange:t,isEditing:n,defaultTargetPriceValue:r});case ct.SHORTCUT:return o.jsx(fTe,{});default:Gt(e)}});mTe.displayName="AutomationTriggerConfiguration";const MDt=(e,t)=>{const{value:n,loading:r}=It({flag:"tasks-notification-settings-enabled",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},ET=f.memo(({configuration:e,onConfigurationChange:t,errorMessage:n,onError:r})=>{const s=!!e.id,a=f.useCallback(m=>{let p=e.query;switch(m.type){case ct.PRICE_ALERT:{p={...e.query,prompt:e.query.prompt};break}case ct.SCHEDULED:case ct.SHORTCUT:break;default:Gt(m)}const h={...e,trigger:m,query:p};r?.(null),t(h)},[e,t,r]),i=f.useCallback(m=>{const p={...e,query:m};t(p)},[e,t]),l=f.useCallback(m=>{const p={...e,notificationSettings:m};t(p)},[e,t]),{variation:c,loading:u}=MDt(!0),d=e.trigger.type===ct.PRICE_ALERT&&(!e.trigger.symbol||e.trigger.symbol.trim()==="");return o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(uTe,{trigger:e.trigger,query:e.query,onQueryChange:i}),o.jsx(mTe,{trigger:e.trigger,onTriggerChange:a,isEditing:s,defaultTargetPriceValue:e.defaultTargetPriceValue}),o.jsx(nTe,{trigger:e.trigger,onTriggerChange:a}),!u&&c&&o.jsx(sTe,{notificationSettings:e.notificationSettings??$d,onNotificationSettingsChange:l,disabled:d}),e.trigger.type===ct.PRICE_ALERT&&o.jsx("div",{className:"flex flex-col gap-2",children:o.jsx(ST,{trigger:e.trigger,prompt:e.query.prompt,onPromptChange:m=>i({...e.query,prompt:m}),variant:"subtle",disabled:d})}),o.jsx(Jke,{trigger:e.trigger,query:e.query,onQueryChange:i}),n&&o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(Dd,{size:12,className:"text-caution"}),o.jsx(D,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:n})]})]})});ET.displayName="AutomationConfiguration";function kDt(e,t,n){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,schedule:Kv(e.schedule),task_name:"",expiry_date:tme(e.expiryDate??e.defaultExpiryDate),notification_settings:n}}function TDt(e,t){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,task_name:e.shortcut,schedule:{rrule:"",start_at:"",tzid:""}}}function pTe({trigger:e,query:t,quote:n}){const{symbol:r}=e,s=n?.name?` (${n.name})`:void 0;switch(e.alertType){case Vr.TARGET_PRICE:{const a=n?.price||0,i=bT({symbol:r,quoteName:s}),l=e.price>a?"above":"below",c=fae({rawInstructions:i,symbol:r,quoteName:s||"",eventValue:`$${e.price}`,direction:l}),u=dae({prompt:t.prompt,baseInstructions:c});return jO({symbol:r,alertType:"price",priceValue:`$${e.price}`,priceThreshold:l,baseInstructions:c,additionalInstructions:u})}case Vr.MOVEMENT_AMOUNT:{const a=_T({symbol:r,quoteName:s}),i=e.percentageDecimalUpperBound>0&&e.percentageDecimalUpperBound!==Rd/100,l=e.percentageDecimalLowerBound<0&&e.percentageDecimalLowerBound!==Pd/100;let c,u;i&&l?(c=(e.percentageDecimalUpperBound*100).toFixed(2),u="increase or decrease"):i?(c=(e.percentageDecimalUpperBound*100).toFixed(2),u="increase"):l?(c=(Math.abs(e.percentageDecimalLowerBound)*100).toFixed(2),u="decrease"):(c="0.00",u="change");const d=fae({rawInstructions:a,symbol:r,quoteName:s||"",eventValue:c,direction:u}),m=dae({prompt:t.prompt,baseInstructions:d});return jO({symbol:r,alertType:"movement",percentValue:c,positiveSelected:i,negativeSelected:l,baseInstructions:d,additionalInstructions:m})}default:Gt(e)}}function NDt(e,t,n,r){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,status:n==="COMPLETED"?"PAUSED":n,schedule:Kv(e.schedule),expiry_date:tme(e.expiryDate??e.defaultExpiryDate),clear_expiry:e.expiryDate===null?!0:void 0,notification_settings:r}}function jDt(e,t,n){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,status:n==="COMPLETED"?"PAUSED":n,task_name:e.shortcut}}function ADt({trigger:e,query:t,status:n,quote:r}){const s=pTe({trigger:e,query:t,quote:r});return s?{task_name:s.task_name,prompt:s.prompt,event_subscription:s.event_subscription,model_preference:s.model_preference,status:n==="COMPLETED"?"PAUSED":n}:null}function hTe({onCreateSuccess:e,onCreateError:t,onUpdateSuccess:n,onUpdateError:r,onDeleteSuccess:s,onDeleteError:a}={}){const{$t:i}=Z(),l=ht(),c=vt({mutationFn:p=>Cyt({payload:p,reason:"finance-add-alert"}),onSuccess:()=>{l.invalidateQueries({queryKey:CS()}),e?.()},onError:p=>t?.(p)}),u=vt({mutationFn:({taskId:p,payload:h})=>Syt({taskId:p,payload:h,reason:"finance-edit-alert"}),onSuccess:()=>{l.invalidateQueries({queryKey:CS()}),n?.()},onError:p=>{if(p instanceof Error)switch(p.name){case"TimeoutError":r?.({detail:i({defaultMessage:"Network Timeout",id:"Z+mLGQc4GD"})});break;default:ne.error(`Unknown error occured: ${p.name}`),r?.({detail:i({defaultMessage:"Unknown error occurred",id:"y1q3uzCFY6"})})}else r?.(p)}}),d=vt({mutationFn:p=>zxe({taskId:p,reason:"finance-delete-alert"}),onSuccess:()=>{l.invalidateQueries({queryKey:CS()}),s?.()},onError:()=>a?.()}),m=c.isPending||u.isPending||d.isPending;return f.useMemo(()=>({createMutation:c,updateMutation:u,deleteMutation:d,isMutationLoading:m}),[c,u,d,m])}const IDt=()=>{const{formatMessage:e}=Z();return{getErrorMessage:n=>{switch(n?.detail?.error_code){case tJ.TASK_LIMIT_EXCEEDED:return e({defaultMessage:"You have reached the maximum of number of active tasks of this type for your subscription level.",id:"3H43PMJpfD"});case tJ.SHORTCUT_NAME_ALREADY_EXISTS:return e({defaultMessage:"A shortcut with this name already exists. Please choose a different name.",id:"GpnXJDWEkN"});default:return e({defaultMessage:"Something went wrong. Please try again.",id:"W/5hwrn09m"})}}}},RDt={settings_create:!0,settings_edit:!0,settings_suggest:!0,settings_primer:!0,task_widget:!0,discover_task_widget:!0,thread_dropdown:!0,typeahead_create:!0,notifications_panel:!0,router:!0};function RO(e){return e in RDt}const PDt={settings_create:!0,settings_edit:!0,settings_suggest:!0,finance_home_page:!0,finance_asset_page:!0};function mae(e){return e in PDt}const ODt={settings_create:!0,settings_edit:!0,typeahead_create:!0,thread_create:!0,suggestions_dropdown:!0,notifications_panel:!0,typeahead_edit:!0,shortcut_widget:!0,settings_paste:!0,try_assistant_suggestions:!0,thread_upsell_create:!0};function pae(e){return e in ODt}const LDt={created:!0,updated:!0,deleted:!0,paused:!0,resumed:!0,skipped:!0};function gTe(e){return e in LDt}const DDt={created:!0,updated:!0,deleted:!0,paused:!0,resumed:!0,skipped:!0};function FDt(e){return e in DDt}const UDt={created:!0,updated:!0,deleted:!0,copied:!0,skipped:!0};function BDt(e){return e in UDt}function yTe({reason:e,source:t,onSuccess:n,onError:r}){const s=ht(),{trackEvent:a}=Ne(),{getErrorMessage:i}=IDt(),l=f.useCallback((g,y)=>{s.invalidateQueries({queryKey:CS()}),y&&s.invalidateQueries({queryKey:sF(y)}),n?.(g)},[s,n]),c=f.useCallback((g,y)=>{RO(t)&&gTe(g)&&a("task modal action",{source:t,action:g}),l(g,y)},[t,a,l]),u=vt({mutationFn:g=>wyt({payload:g,reason:e}),onSuccess:g=>c("created",g.task_id),onError:g=>r(i(g))}),d=vt({mutationFn:({id:g,payload:y})=>$P({taskId:g,payload:y,reason:e}),onSuccess:g=>c("updated",g.task.task_id),onError:g=>r(i(g))}),m=vt({mutationFn:({id:g,newStatus:y})=>$P({taskId:g,payload:{status:y},reason:e}),onSuccess:g=>{c(g.task.status==="PAUSED"?"paused":"resumed",g.task.task_id)},onError:g=>r(i(g))}),p=vt({mutationFn:g=>zxe({taskId:g,reason:e}),onSuccess:()=>c("deleted"),onError:g=>r(i(g))}),h=u.isPending||d.isPending||m.isPending||p.isPending;return{createMutation:u,updateMutation:d,toggleMutation:m,deleteMutation:p,isMutationLoading:h,invalidateAndClose:l}}function VDt({initialConfiguration:e,isModalOpened:t,reason:n,source:r,onSuccess:s,onError:a}){const{$t:i}=Z(),{hasActiveSubscription:l}=_t(),[c,u]=f.useState(HD(e??V5(l))),d=f.useCallback(M=>{u(M)},[]),m=(()=>{switch(c.trigger.type){case ct.PRICE_ALERT:return c.trigger.symbol;case ct.SCHEDULED:case ct.SHORTCUT:return null;default:Gt(c.trigger)}})(),{data:p,isLoading:h}=aw({symbol:m,enabled:!!m&&t}),g=yTe({reason:n,source:r,onSuccess:s,onError:a}),y=hTe({onCreateSuccess:()=>s("created"),onCreateError:M=>a(`Failed to create price alert - ${M.detail}`),onUpdateSuccess:()=>s("updated"),onUpdateError:M=>a(`Failed to update price alert - ${M.detail}`),onDeleteSuccess:()=>s("deleted"),onDeleteError:()=>a("Failed to delete price alert")}),v=h||g.isMutationLoading||y.isMutationLoading,x=f.useCallback(M=>{const k=M?{...c,...M}:c;if(k.id)switch(k.trigger.type){case ct.SCHEDULED:g.updateMutation.mutate({id:k.id,payload:NDt(k.trigger,k.query,k.status,k.notificationSettings)});break;case ct.PRICE_ALERT:{const A=ADt({trigger:k.trigger,query:k.query,status:k.status,quote:p});A?y.updateMutation.mutate({taskId:k.id,payload:A}):a(i({defaultMessage:"Failed to update price alert payload - Missing inputs",id:"293dgMfZdE"}));break}case ct.SHORTCUT:g.updateMutation.mutate({id:k.id,payload:jDt(k.trigger,k.query,k.status)});break;default:Gt(k.trigger)}else switch(k.trigger.type){case ct.SCHEDULED:g.createMutation.mutate(kDt(k.trigger,k.query,k.notificationSettings??$d));break;case ct.PRICE_ALERT:{const A=pTe({trigger:k.trigger,query:k.query,quote:p});A?y.createMutation.mutate(A):a(i({defaultMessage:"Failed to create price alert payload - Missing inputs",id:"Fimh9vZMY/"}));break}case ct.SHORTCUT:g.createMutation.mutate(TDt(k.trigger,k.query));break;default:Gt(k.trigger)}},[c,g.updateMutation,g.createMutation,p,y.updateMutation,y.createMutation,a,i]),b=f.useCallback(()=>{x()},[x]),_=f.useCallback(M=>{if(!c.id)return;x({status:M?"ACTIVE":"PAUSED"})},[c.id,x]),w=f.useCallback(()=>{if(c.id)switch(c.trigger.type){case ct.SCHEDULED:g.deleteMutation.mutate(c.id);break;case ct.PRICE_ALERT:y.deleteMutation.mutate(c.id);break;case ct.SHORTCUT:g.deleteMutation.mutate(c.id);break;default:Gt(c.trigger)}},[c.id,c.trigger,y.deleteMutation,g.deleteMutation]),C=vTe({isLoading:v,currentConfiguration:c}),S=f.useMemo(()=>{switch(c.trigger.type){case ct.SCHEDULED:case ct.SHORTCUT:return;case ct.PRICE_ALERT:return C?i({defaultMessage:"Select stock, token or fund to begin",id:"x/nyvvB4aQ"}):void 0;default:Gt(c.trigger)}},[i,c.trigger,C]),E=c.status==="ACTIVE";return{currentConfiguration:c,setCurrentConfiguration:d,onClickSave:b,onClickToggle:_,onClickDelete:w,isEnabled:E,isLoading:v,isSaveDisabled:C,saveButtonTooltipText:S}}function vTe({isLoading:e,currentConfiguration:t}){if(e)return!0;switch(t.trigger.type){case ct.SCHEDULED:case ct.SHORTCUT:return!t.query.prompt;case ct.PRICE_ALERT:{const n=t.trigger;if(!n.symbol||n.symbol.trim()==="")return!0;switch(n.alertType){case Vr.TARGET_PRICE:if(!n.price||n.price<=0)return!0;break;case Vr.MOVEMENT_AMOUNT:{const r=n.percentageDecimalLowerBound!==Pd/100&&n.percentageDecimalLowerBound!==0;if(!(n.percentageDecimalUpperBound!==Rd/100&&n.percentageDecimalUpperBound!==0)&&!r)return!0;break}default:Gt(n)}break}default:Gt(t.trigger)}return!1}const $Dt=(e,t)=>{if(!e?.id)return!1;const{status:n,...r}=e,{status:s,...a}=t;return as(r,a)&&n!==s},MT=f.memo(({open:e,onClose:t,initialConfiguration:n,onSave:r,source:s,trackEvent:a,errorMessage:i})=>{const l=vle(),{$t:c}=l,u="automation-modal",[d,m]=f.useState(!1),[p,h]=f.useState(null),[g,y]=f.useState(!1),v=f.useCallback(()=>{h(null),t()},[t]),{currentConfiguration:x,setCurrentConfiguration:b,onClickSave:_,onClickDelete:w,isLoading:C,isSaveDisabled:S,saveButtonTooltipText:E}=VDt({initialConfiguration:n,isModalOpened:e,reason:u,source:s,onSuccess:L=>{let P=L;L==="updated"&&$Dt(n,x)&&(P=x.status==="PAUSED"?"paused":"resumed"),r?.(P),v(),m(P)},onError:h});f.useEffect(()=>{e&&(RO(s)?a?.("task modal opened",{source:s}):mae(s)?a?.("price alert modal opened",{source:s}):pae(s)&&a?.("shortcut modal opened",{source:s}))},[e,s,a]);const M=f.useMemo(()=>{const L=[];return x.id&&L.push({text:c({defaultMessage:"Delete",id:"K3r6DQW7h+"}),variant:"rejecter",onClick:w,disabled:C}),L.push({text:c({defaultMessage:"Cancel",id:"47FYwba+bI"}),variant:"common",onClick:v}),L.push({text:c({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:"primary",onClick:_,disabled:S,tooltipText:E}),L},[c,x.id,C,S,w,_,v,E]),k=f.useCallback(L=>{const P=L?"ACTIVE":"PAUSED",N=P==="PAUSED"?"paused":"resumed";switch(b({...x,status:P}),x.trigger.type){case ct.SCHEDULED:RO(s)&&gTe(N)&&a?.("task modal action",{source:s,action:N});break;case ct.PRICE_ALERT:mae(s)&&FDt(N)&&a?.("price alert modal action",{source:s,action:N});break;case ct.SHORTCUT:pae(s)&&BDt(N)&&a?.("shortcut modal action",{source:s,action:N});break;default:Gt(x.trigger)}},[x,b,s,a]),A=f.useMemo(()=>{if(!x.id||x.trigger.type===ct.PRICE_ALERT)return null;const L=x.status!=="PAUSED";return o.jsx(Ro,{active:L,text:L?"Active":"Paused",onChange:k,disabled:C,testId:"automation-status-switch"})},[x.id,x.status,x.trigger.type,k,C]),R=f.useCallback(L=>{const P=HD(L);b(P)},[b]),O=f.useCallback(()=>{m(!1)},[]);return f.useEffect(()=>{n&&!g&&e&&(R(n),y(!0))},[R,g,n,e]),f.useEffect(()=>{e||y(!1)},[e]),o.jsxs(o.Fragment,{children:[o.jsx(en,{isOpen:e,onClose:v,title:iYe({intl:l,triggerType:x.trigger.type}),titleTextVariant:"base",footerContent:A,actionList:M,footerClassname:"!pt-4",wrapperClassname:"!w-full",children:o.jsx(ET,{configuration:x,onConfigurationChange:R,errorMessage:(i||p)??void 0,onError:h})}),o.jsx(Gl,{message:d?lYe({intl:l,triggerType:x.trigger.type,actionPerformed:d}):"",variant:"success",isVisible:!!d,handleClose:O})]})});MT.displayName="AutomationModal";const WDt=Object.freeze(Object.defineProperty({__proto__:null,AutomationModal:MT},Symbol.toStringTag,{value:"Module"})),xTe=(e,t)=>{const{value:n,loading:r}=It({flag:"tasks-price-alerts-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},kT=(e,t)=>{const{value:n,loading:r}=It({flag:"tasks-settings-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},HDt=(e,t)=>{const n={selectedOption:"price",priceValue:"",percentValue:wT,positiveSelected:!0,negativeSelected:!0,additionalInstructions:"",selectedSymbol:t??null,inputValue:t??""};if(!e)return n;const{subscription:r,prompt:s}=e,a=r?oTe({prompt:s,symbol:r.event_entity}):pDt(s).additionalInstructions,i={...n,additionalInstructions:a};if(!r)return i;const{event_type:l,value_lower_bound:c,value_upper_bound:u,event_entity:d}=r;if(i.selectedSymbol=d??null,i.inputValue=d??"",l==="STOCK_PRICE_TARGET")i.selectedOption="price",u&&u!==Rd?i.priceValue=`$${u}`:c&&c!==Pd&&(i.priceValue=`$${c}`);else if(l==="STOCK_PRICE_MOVEMENT"){i.selectedOption="movement";const m=u!=null&&u!==Rd,p=c!=null&&c!==Pd;i.positiveSelected=m,i.negativeSelected=p,m?i.percentValue=`${u}`:p&&(i.percentValue=`${Math.abs(c)}`)}return i},bTe=I.memo(({symbol:e,buttonProps:t,watchlistAddedForSymbol:n,modalOpenedSource:r})=>{const{trackEvent:s}=Ne(),a=f.useMemo(()=>{try{return decodeURIComponent(e.toUpperCase())}catch{return e.toUpperCase()}},[e]),{data:i,isLoading:l}=We({queryKey:["getFinanceTicker",a],queryFn:()=>Eyt({ticker:a,reason:"finance-ticker-supported-check"}),staleTime:1/0}),[c,u]=f.useState(!1),{isMobileStyle:d}=xe(),{$t:m}=Z(),p=!!i?.supported,h=!!(i?.supported&&n),g=n?`finance-alert-watchlist-${a}`:"finance-alert-page-visit",y=(p||h)&&!c,{variation:v,loading:x}=kT(!1),{variation:b,loading:_}=xTe(!1),w=f.useCallback(()=>u(!1),[]),C=f.useCallback(()=>{s("price alert modal opened",{source:r}),u(!0)},[r,s]);return l||!i?.supported||x||_?null:o.jsxs(o.Fragment,{children:[o.jsx(Hk,{cueKey:g,title:m({defaultMessage:"Set an alert for {ticker}",id:"bb+ueMBxHa"},{ticker:a}),enabled:y,placement:"bottom",size:"sm",children:o.jsx(he,{text:d?void 0:m({id:"hrmMcFoV7/",defaultMessage:"Price Alert"}),size:"small",variant:"border",icon:Qie,onClick:C,...t})},g),v&&b?o.jsx(MT,{open:c,onClose:w,source:"settings_create",initialConfiguration:ome({symbol:e})}):o.jsx(TT,{isOpen:c,onClose:w,symbol:a})]})});bTe.displayName="FinanceAddAlertIfSupported";const TT=I.memo(({isOpen:e,onClose:t,symbol:n,task:r})=>{const s=gt(),{deprecatedOpenToast:a}=gn(),i=!!r,[l,c]=f.useState(null),[u,d]=f.useState("price"),{isMobileStyle:m}=xe(),[p,h]=f.useState(""),{$t:g}=Z(),[y,v]=f.useState(n??null),[x,b]=f.useState(!1),{data:_}=We({queryKey:S1({symbol:y}),queryFn:()=>Td({symbol:y}),enabled:!!y&&e,refetchInterval:5*1e3}),[w,C]=f.useState(""),[S,E]=f.useState(""),[M,k]=f.useState(!0),[A,R]=f.useState(!0),O=f.useMemo(()=>{if(u!=="price"||!_?.price)return;const re=parseFloat(w.replace(/[^0-9.]/g,""));if(!(isNaN(re)||re===_.price))return re>_.price?"above":"below"},[w,_?.price,u]),L=f.useCallback(()=>{b(!1),v(n??null)},[n]),{createMutation:P,updateMutation:N,deleteMutation:T}=hTe({onCreateSuccess:()=>{t(),b(!1),L(),a(g({defaultMessage:"Price alert created",id:"YccmIRCItP"}),"success",3,void 0,g({defaultMessage:"Manage Alerts",id:"t6akfMv9BC"}),()=>{s.push("/account/tasks?tab=alerts")})},onCreateError:()=>{a(g({defaultMessage:"Failed to create price alert",id:"vkLT4iLR3O"}),"error",3,g({defaultMessage:"Please try again",id:"fHqssj/1KO"})),b(!1)},onUpdateSuccess:()=>{t(),b(!1),L(),a(g({defaultMessage:"Price alert updated",id:"wTPvmuiyuE"}),"success",3,void 0,g({defaultMessage:"Manage Alerts",id:"t6akfMv9BC"}),()=>{s.push("/account/tasks?tab=alerts")})},onUpdateError:()=>{a(g({defaultMessage:"Failed to update price alert",id:"Fpz5cXYABV"}),"error",3,g({defaultMessage:"Please try again",id:"fHqssj/1KO"})),b(!1)},onDeleteSuccess:()=>{t()}}),j=f.useCallback(()=>{t(),L()},[t,L]),F=f.useCallback(()=>{r&&T.mutate(r.id)},[r,T]),U=NO({selectedSymbol:y,symbol:n,quote:_,alertType:"price",priceValue:w,$t:g}),V=NO({selectedSymbol:y,symbol:n,quote:_,alertType:"movement",percentValue:S,$t:g}),$=U.baseInstructions,z=U.displayInstructions,Q=V.baseInstructions,Y=V.displayInstructions;f.useEffect(()=>{if(e){const re=HDt(r,n);c(re),d(re.selectedOption),C(re.priceValue),E(re.percentValue),k(re.positiveSelected),R(re.negativeSelected),h(re.additionalInstructions),v(re.selectedSymbol)}else c(null),L()},[e,r,n,L]);const{locale:W}=Z();f.useEffect(()=>{if(i&&_?.currency&&w&&w.startsWith("$")){const re=CT(_.currency,W);re!=="$"&&C(w.replace("$",re))}},[i,_?.currency,W,w]);const X=f.useCallback(()=>{b(!0);const re=y??n;if(!re){b(!1);return}const fe=jO({symbol:re,alertType:u,priceValue:w,priceThreshold:O,percentValue:S,positiveSelected:M,negativeSelected:A,baseInstructions:u==="price"?$:Q,additionalInstructions:p});if(!fe){b(!1);return}i&&r?N.mutate({taskId:r.id,payload:fe}):P.mutate(fe)},[i,r,y,n,u,w,O,S,M,A,p,$,Q,P,N]),G=f.useMemo(()=>{if(!i||!l)return!0;const re={selectedOption:u,priceValue:w,percentValue:S,positiveSelected:M,negativeSelected:A,additionalInstructions:p,selectedSymbol:y},{inputValue:ae,...fe}=l;return!as(re,fe)},[i,l,u,w,S,M,A,p,y]),J=f.useMemo(()=>{const re=w.replace(/[^0-9.]/g,""),ae=S.replace("%","");return u==="price"?!y||!re||!O:!y||!ae},[y,u,w,S,O]),q=f.useMemo(()=>J||!G,[J,G]),te=f.useMemo(()=>[{text:g({id:"47FYwba+bI",defaultMessage:"Cancel"}),onClick:j,variant:"border"},{text:g(i?{id:"KjhtiKJItq",defaultMessage:"Edit Alert"}:{id:"KHrQobwBBl",defaultMessage:"Add Alert"}),onClick:X,variant:"primary",disabled:i?q:J,isLoading:x}],[X,g,J,x,j,i,q]);return o.jsxs(en,{isOpen:e,onClose:t,title:g({id:"hrmMcFoV7/",defaultMessage:"Price Alert"}),variant:m?"bottom-sheet":"default",children:[o.jsx("div",{className:"gap-md flex min-h-[60vh] flex-col md:min-h-0",children:o.jsx(pW,{variant:"full",selectedSymbol:y,selectedOption:u,onSymbolChange:v,onOptionChange:d,showSymbolInput:!i,currentPrice:_?.price,priceValue:w,onPriceValueChange:C,percentValue:S,onPercentValueChange:E,positiveSelected:M,onPositiveChange:k,negativeSelected:A,onNegativeChange:R,additionalInstructions:p,onAdditionalInstructionsChange:h,displayPriceInstructions:z,displayMovementInstructions:Y,externalInputValue:l?.inputValue,currency:_?.currency??void 0})}),o.jsxs("div",{className:"mt-md flex w-full items-center justify-between",children:[o.jsx("div",{children:i&&o.jsx(he,{text:g({id:"K3r6DQW7h+",defaultMessage:"Delete"}),variant:"border",onClick:F,isLoading:T.isPending})}),o.jsx("div",{className:"gap-sm md:-mb-md flex items-center",children:te.map(re=>o.jsx(he,{text:re.text,onClick:re.onClick,variant:re.variant,disabled:re.disabled,isLoading:re.isLoading},re.text))})]})]})});TT.displayName="FinanceAlertModal";const zDt=Object.freeze(Object.defineProperty({__proto__:null,FinanceAddAlertIfSupported:bTe,FinanceAlertModal:TT},Symbol.toStringTag,{value:"Module"})),op=(e,t)=>{const{value:n,loading:r}=It({flag:"tasks-automations-rename",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},_Te=I.memo(({isOpened:e,onOpen:t,onClose:n,onEdit:r})=>{const s=Z(),a=gt(),{isMobileStyle:i}=xe(),{variation:l,loading:c}=op(!1),u=f.useMemo(()=>[{type:"default",text:s.formatMessage({defaultMessage:"Edit",id:"wEQDC6Wv3/"}),onClick:r,testId:"task-widget-edit"},{type:"default",text:l?s.formatMessage({defaultMessage:"View Automations",id:"ykWUMgOBHX"}):s.formatMessage({defaultMessage:"View Tasks",id:"L3nFsHqlqm"}),rightElement:o.jsx("div",{className:"flex items-center",children:o.jsx(Kn,{size:16})}),onClick:()=>{a.push("/account/tasks")},testId:"task-widget-view-tasks"}],[s,r,l,a]);return c?null:o.jsx(Jt,{placement:"bottom-start",items:u,onOpen:t,onClose:n,isMobileStyle:i,children:o.jsx(Te,{size:"tiny",icon:Eie,extraCSS:B("",{"!text-foreground !bg-subtle":e})})})});_Te.displayName="TaskWidgetMenu";const GDt=e=>({id:e.id,title:e.title,prompt:e.prompt,schedule:B2(e.scheduleInfo),searchModel:e.searchModel,sources:e.sources||["web"]}),hae=(e={})=>e.prefill?e.prefill:e.initial?GDt(e.initial):{...JKe(),searchModel:le.PRO},Nv=({text:e,onClick:t,variant:n="secondary",disabled:r=!1})=>o.jsx(he,{text:e,onClick:t,disabled:r,testId:`task-modal-${e.toLowerCase()}-button`,variant:n==="secondary"?"common":"inverted",extraCSS:B("min-w-[100px]")}),qDt=(e,t)=>e.schedule.kind==="ONCE"&&new Date(e.schedule.year,e.schedule.month,e.schedule.day,e.schedule.hour,e.schedule.minute)<=new Date(Date.now())?{ok:!1,message:t({defaultMessage:"Please schedule this task for a future time.",id:"loBg9tvLRE"})}:{ok:!0};function hW({open:e,onClose:t,onSuccess:n,initial:r,prefill:s,errorMessage:a,source:i}){const l="task-modal",{formatMessage:c}=Z(),{trackEvent:u}=Ne(),{configuredModel:d}=Jn();f.useEffect(()=>{e&&u("task modal opened",{source:i})},[e,i,u]);const[m,p]=f.useState(a),{createMutation:h,updateMutation:g,deleteMutation:y,isMutationLoading:v,invalidateAndClose:x}=yTe({reason:l,source:i,onSuccess:f.useCallback(N=>{n?.(N),t?.()},[n,t]),onError:p}),b=f.useRef(r?PH(r):void 0);f.useEffect(()=>{e&&(b.current=r?PH(r):void 0)},[e,r]);const[_,w]=f.useState(()=>hae({initial:r,prefill:s})),C=f.useMemo(()=>io[_.searchModel]??ie.SEARCH,[_.searchModel]);f.useEffect(()=>{p(e?a:void 0)},[e,a]),f.useEffect(()=>{e&&w(hae({initial:r,prefill:s}))},[e,r,s,d]),f.useEffect(()=>{const N=Dc(C);w(T=>({...T,searchModel:N}))},[C]);const S=!!b.current,E=b.current?.status==="PAUSED",M=b.current?.status==="COMPLETED",k=N=>w(T=>({...T,...N})),A=N=>w(T=>({...T,schedule:{...T.schedule,...N}})),R=()=>{p(void 0);const N=qDt(_,c);if(!N.ok){p(N.message);return}S?g.mutate({id:b.current.id,payload:{task_name:_.title,prompt:_.prompt,schedule:Kv(_.schedule),status:"ACTIVE",model_preference:_.searchModel,sources:_.sources}},{onSuccess:()=>{u("task modal action",{source:i,action:"updated"}),x("updated",b.current.id)}}):h.mutate({task_id:_.id,task_name:_.title,prompt:_.prompt,schedule:Kv(_.schedule),model_preference:_.searchModel,sources:_.sources},{onSuccess:()=>{u("task modal action",{source:i,action:"created"})}})},O=f.useMemo(()=>{if(!S)return!0;const N=_.prompt!==b.current?.prompt,T=b.current.scheduleInfo,j=Kv(_.schedule),F=!as(j.rrule,T.rrule)||!as(j.tzid,T.tzid),U=_.schedule.kind==="ONCE"&&j.start_at!==T.start_at,V=_.searchModel!==b.current?.searchModel,$=!as(_.sources||["web"],b.current?.sources||["web"]);return N||(F||U||V)||$},[S,_,b]),{variation:L,loading:P}=op(!1);return P?null:o.jsx(en,{isOpen:e,onClose:t,title:c(L?{defaultMessage:"Automation",id:"Fn4YKyl4lm"}:{defaultMessage:"Task",id:"0wJ7N+noSq"}),titleTextVariant:"base",modalContentClassname:"!pb-4 md:!pb-4",children:o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsx(ST,{trigger:{type:ct.SCHEDULED,schedule:_.schedule},prompt:_.prompt,onPromptChange:N=>k({prompt:N}),error:m}),o.jsx(mW,{schedule:_.schedule,onScheduleChange:A}),o.jsx(xT,{searchModel:_.searchModel,onSearchModelChange:N=>k({searchModel:N}),sources:_.sources||["web"],onSourcesChange:N=>k({sources:N})}),o.jsxs(H,{variant:"background",className:"mt-md pt-md -mx-md px-md flex items-center justify-between border-t",children:[S&&o.jsxs("div",{className:"flex gap-4",children:[!M&&o.jsx(Nv,{text:c(E?{defaultMessage:"Resume",id:"3y9DGgura7"}:{defaultMessage:"Pause",id:"tFFMkFDBMO"}),onClick:()=>g.mutate({id:b.current.id,payload:{status:E?"ACTIVE":"PAUSED"}},{onSuccess:()=>{const N=E?"resumed":"paused";u("task modal action",{source:i,action:N}),x(N,b.current.id)}}),disabled:v}),o.jsx(Nv,{text:c({defaultMessage:"Delete",id:"K3r6DQW7h+"}),onClick:()=>y.mutate(b.current.id),disabled:v})]}),o.jsxs("div",{className:"ml-auto flex gap-4",children:[o.jsx(Nv,{text:c({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:()=>t?.()}),o.jsx(Nv,{text:c({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:"primary",disabled:v||!_.prompt||!O,onClick:R})]})]})]})})}const KDt=Object.freeze(Object.defineProperty({__proto__:null,FormButton:Nv,default:hW},Symbol.toStringTag,{value:"Module"}));var gae={};const YDt=()=>o.jsxs(yn,{className:"flex w-full items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"bg-subtle size-4 shrink-0 rounded"}),o.jsx("div",{className:"bg-subtle h-4 w-32 rounded"})]}),o.jsx("div",{className:"bg-subtle h-4 w-20 rounded"})]}),wTe=I.memo(({data:e})=>{const{$t:t}=Z(),{suggested_prompt:n,suggested_schedule:r,widget_uuid:s}=e,a=f.useMemo(()=>({id:s,title:"",prompt:n,schedule:r?B2(r):js(),searchModel:le.PRO}),[n,r,s]),i=Zn(),l=f.useCallback(()=>{if(!gae.NEXT_PUBLIC_IS_SIDECAR_BUILD)throw new Error("handleOpenTaskFromSidecar can only be called in sidecar mode");i.openTab({url:`${window.location.origin}${Xt.Tasks.href}`})},[i]),[c,u]=f.useState(!1),[d,m]=f.useState(!1),[p,h]=f.useState(!1),[g,y]=f.useState(null),[v,x]=f.useState(!1);f.useEffect(()=>{if(!g)return;const V=setTimeout(()=>{y(null)},2e3);return()=>clearTimeout(V)},[g]);const b=Z(),{data:_,isLoading:w}=We({queryKey:sF(s),queryFn:()=>B3({taskId:s,reason:"task-widget"})}),C=f.useCallback(()=>{_?.type==="ALERT"&&_?.subscription?h(!0):m(!0)},[_]),S=f.useMemo(()=>{if(!_)return null;if(_.type==="ALERT"&&_.subscription)return Zze({..._.subscription,event_type:_.subscription.event_type},b);const V=B2(_.scheduleInfo);return{kind:eYe(V.kind,b),friendly:XKe(V,b),isRecurring:V.kind!=="ONCE"}},[_,b]),E=f.useMemo(()=>{if(!_)return"";if(_.type==="ALERT"&&_.subscription){const{subscription:V}=_,$=V.event_entity||"",z=V.event_type==="STOCK_PRICE_TARGET",Q=V.event_type==="STOCK_PRICE_MOVEMENT";if(z){const Y=V.value_upper_bound||V.value_lower_bound;if(Y)return`${$} reaches $${Y}`}else if(Q){const Y=V.value_upper_bound||0,W=V.value_lower_bound||0,X=Y>0,G=W<0;if(X&&G)return`${$} moves ${Y}%`;if(X)return`${$} rises ${Y}%`;if(G)return`${$} falls ${Math.abs(W)}%`}return`Price alert for ${$}`}return _.prompt},[_]),M=f.useMemo(()=>{if(!g)return null;const V=g==="created"?o.jsx(pe,{defaultMessage:"Task created",id:"991WgJt61N"}):g==="updated"?o.jsx(pe,{defaultMessage:"Task updated",id:"sQGGdcVjgL"}):g==="deleted"?o.jsx(pe,{defaultMessage:"Task deleted",id:"kGP3l1jr/4"}):g==="paused"?o.jsx(pe,{defaultMessage:"Task paused",id:"Ryhxeg2OIZ"}):o.jsx(pe,{defaultMessage:"Task resumed",id:"fqAqWnF85q"});return o.jsx(ge.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:rn},children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ka,{className:"text-super",size:16}),o.jsx(D,{variant:"small",color:"super",className:"truncate",children:V})]})},"confirmed")},[g]),{variation:k,loading:A}=op(!1),R=f.useCallback(()=>{x(!1)},[]),O=f.useCallback(()=>x(!0),[]),L=f.useMemo(()=>t(k?{defaultMessage:"Automation",id:"Fn4YKyl4lm"}:{defaultMessage:"Task",id:"0wJ7N+noSq"}),[t,k]),P=f.useMemo(()=>o.jsx(ar,{size:12}),[]),N=f.useCallback(()=>{m(!1),x(!1)},[]),T=f.useCallback(()=>{h(!1),x(!1)},[]),j=f.useCallback(V=>{m(!1),x(!1),y(V)},[]),F=f.useCallback(()=>{u(!0)},[]),U=f.useCallback(()=>{u(!1)},[]);return A?null:o.jsx(Ci,{widgetType:"task",widgetName:"task",widgetSize:"mini",children:o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-subtler border-subtlest p-md group relative flex h-14 items-center justify-between gap-2 rounded-xl border transition-transform duration-200 hover:scale-[1.01] hover:transform",onMouseEnter:O,onMouseLeave:R,children:o.jsx(Ke,{mode:"wait",children:w?o.jsx(YDt,{}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex min-w-0 shrink items-center gap-2",children:[o.jsx("div",{className:"bg-subtle flex size-8 items-center justify-center rounded-lg",children:_?.type==="ALERT"&&_?.subscription?o.jsx(Qie,{size:16,className:"text-quiet shrink-0"}):o.jsx(Wm,{size:16,className:"text-quiet shrink-0"})}),o.jsx("div",{className:"flex w-full min-w-0 flex-col items-start",children:_?o.jsx(D,{variant:"small",color:"default",className:"w-full truncate",children:E}):o.jsxs(o.Fragment,{children:[o.jsx(D,{variant:"small",color:"default",className:"w-full truncate",children:n}),o.jsx(D,{variant:"tinyRegular",color:"light",className:"truncate",children:o.jsx(pe,{defaultMessage:"Create a task to get this sent automatically.",id:"1AmBIpC9N9"})})]})})]}),gae.NEXT_PUBLIC_IS_SIDECAR_BUILD?o.jsx(Te,{size:"tiny",icon:vu,onClick:l}):o.jsx(Ke,{mode:"wait",children:M||(S?o.jsx("div",{className:"flex min-w-0 shrink-0 items-center gap-1.5",children:(v||c)&&_?o.jsx(_Te,{isOpened:c,onOpen:F,onClose:U,onEdit:C}):o.jsxs(o.Fragment,{children:[S.isRecurring&&o.jsx(y9e,{size:16,className:"shrink-0"}),o.jsx(D,{className:"truncate",variant:"small",children:S.kind}),o.jsx(D,{className:"truncate",variant:"small",color:"light",children:S.friendly})]})}):o.jsx(ge.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:rn},children:o.jsx(he,{text:L,leadingComponent:P,size:"small",onClick:C})},"default"))})]})})}),o.jsx(Kl,{children:o.jsx(hW,{source:"task_widget",open:d,prefill:_?void 0:a,initial:_??void 0,onClose:N,onSuccess:j})}),_&&o.jsx(TT,{isOpen:p,onClose:T,task:_,symbol:_.subscription?.event_entity})]})})});wTe.displayName="TaskWidget";const CTe=I.memo(e=>{const{data:t}=e,{menuItems:n}=t0();return o.jsx(Ci,{widgetType:"time",widgetName:"time",widgetSize:"full",children:o.jsxs(H,{className:"flex w-full",children:[o.jsx(D,{children:o.jsx(H,{className:"mr-md pr-md border-r font-mono text-4xl",children:t.time})}),o.jsxs("div",{children:[o.jsx(D,{variant:"smallBold",children:t.date}),o.jsx(D,{variant:"small",color:"light",children:t.location?`${t.location}`:null})]}),n&&n.length>0&&o.jsx("div",{className:"-mr-sm -mt-sm flex grow justify-end",children:o.jsx("div",{children:o.jsx(pr.Menu,{menuItems:n})})})]})})});CTe.displayName="TimeWidget";const STe=I.memo(e=>{const{data:t}=e,{duration_seconds:n}=t,{menuItems:r}=t0(),{result:s}=an(),a=s?.uuid,i=f.useMemo(()=>`timer_widget_state_${a}_${n}`,[a,n]),[l,c]=f.useState(!1),[u,d]=f.useState(!1),[m,p]=f.useState(null),[h,g]=f.useState(n*1e3),[y,v]=f.useState(!0),[x,b]=f.useState(!1),_=f.useRef(void 0),w=f.useRef(void 0),C=f.useRef(!1),S=f.useRef(null);f.useEffect(()=>{if(!a)return;const P=Re.getItem(i);if(P)try{const N=JSON.parse(P),T=Date.now();if(N.status==="expired"){d(!0),g(0),p(null);return}if(N.pausedAt&&N.remainingMillis!==void 0)c(!0),g(N.remainingMillis),p(null);else if(N.endTime){const j=N.endTime-T;if(j>0)p(N.endTime),g(j),c(!1);else{g(0),p(null),d(!0);const F={status:"expired",endTime:0,remainingMillis:0};Re.setItem(i,JSON.stringify(F))}}}catch{Re.removeItem(i)}else{const N=Date.now()+n*1e3;p(N),c(!1)}},[i,n,a]),f.useEffect(()=>{if(!a||u)return;const P=l?{status:"paused",endTime:0,pausedAt:Date.now(),remainingMillis:h}:{status:"running",endTime:m||Date.now()+h};Re.setItem(i,JSON.stringify(P))},[h,l,m,i,u,a]);const E=f.useCallback(()=>{if(C.current||u)return;C.current=!0,g(0),p(null),d(!0),b(!0);const P={status:"expired",endTime:0,remainingMillis:0};Re.setItem(i,JSON.stringify(P)),!y&&S.current&&S.current.play().catch(()=>{})},[i,u,y]),M=f.useCallback(()=>{if(!l&&m){const P=Date.now(),N=m-P;N>0?(g(N),_.current=requestAnimationFrame(M)):E()}},[l,m,E]);f.useEffect(()=>{if(!l&&m&&h>0&&!u){_.current=requestAnimationFrame(M);const P=m-Date.now();P>0&&(w.current=window.setTimeout(E,P))}return()=>{_.current&&cancelAnimationFrame(_.current),w.current&&clearTimeout(w.current)}},[l,m,h,u,M,E]),f.useEffect(()=>{const P=()=>{if(!document.hidden&&!l&&m){const N=Date.now(),T=m-N;T>0?g(T):E()}};return document.addEventListener("visibilitychange",P),()=>{document.removeEventListener("visibilitychange",P)}},[l,m,E]);const k=f.useCallback(()=>{if(!u)if(l){const P=Date.now()+h;p(P),c(!1)}else c(!0),p(null)},[u,l,h]),A=f.useCallback(()=>{_.current&&(cancelAnimationFrame(_.current),_.current=void 0),w.current&&(clearTimeout(w.current),w.current=void 0),C.current=!1;const P=Date.now()+n*1e3;d(!1),c(!1),g(n*1e3),p(P)},[n]),R=f.useCallback(()=>{v(P=>!P)},[]),O=f.useCallback(()=>{b(!1),S.current&&(S.current.pause(),S.current.currentTime=0)},[]),L=f.useMemo(()=>{const P=Math.ceil(h/1e3),N=Math.floor(P/3600),T=Math.floor(P%3600/60),j=Math.floor(P%60),F=T.toString().padStart(2,"0"),U=j.toString().padStart(2,"0");return N>0?`${N}:${F}:${U}`:`${F}:${U}`},[h]);return o.jsx(Ci,{widgetType:"timer",widgetName:"timer",widgetSize:"full",children:o.jsxs(H,{className:B("relative flex transition-all duration-200",{"hover:scale-[1.01]":x}),children:[x&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"-m-md absolute inset-0 z-20 cursor-pointer rounded-xl",onClick:O,title:"Click anywhere to stop alarm","aria-label":"Stop alarm"}),o.jsx("div",{className:"-m-md to-attention/20 from-negative/20 absolute inset-0 animate-pulse rounded-xl bg-gradient-to-br"})]}),o.jsxs("div",{className:"relative z-10 flex w-full items-center",children:[o.jsxs(H,{className:"gap-sm flex items-center",children:[o.jsx(he,{variant:"primaryGhost",size:"small",onClick:k,icon:l?wie:_ie,disabled:u,pill:!0}),o.jsx(he,{variant:"primaryGhost",size:"small",onClick:A,icon:v9e,"aria-label":"Restart timer",disabled:x,pill:!0})]}),o.jsx(D,{className:"flex-1",children:o.jsx(H,{className:`pl-lg font-mono text-2xl ${x?"text-negative":""}`,children:L})}),o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(Hk,{cueKey:`timer-unmute-${a}`,title:"Tap to unmute",enabled:y&&!u,placement:"top",sideOffset:8,variant:"common",size:"xs",children:o.jsx(he,{variant:"primaryGhost",size:"small",onClick:R,icon:y?Cie:Sie,disabled:u,pill:!0})}),r&&r.length>0&&o.jsx(pr.Menu,{menuItems:r})]})]}),o.jsx("audio",{ref:S,src:"https://r2cdn.perplexity.ai/Hole_In_One.wav?v=1",preload:"auto",style:{display:"none"},loop:!0})]})})});STe.displayName="TimerWidget";function ETe(){const[e,t]=f.useState(!1),n=qm(),r=f.useCallback(s=>{Zt(OK,s.toString()),t(s)},[t]);return f.useEffect(()=>{const s=jn(OK);t(s==="true"||s===void 0&&n!=="US")},[n]),f.useMemo(()=>({prefersMetric:e,setPrefersMetric:r}),[e,r])}const MTe=I.memo(({day:e,icon:t,high:n,low:r,selected:s})=>o.jsxs("div",{className:"relative col-span-1",children:[s&&o.jsx("div",{className:"-inset-sm right-md absolute",children:o.jsx("div",{className:"absolute inset-0 rounded-md bg-white opacity-10"})}),o.jsxs("div",{className:"relative flex flex-col items-start",children:[o.jsx(D,{color:"white",children:o.jsx(ce,{icon:t,size:"xl",className:"mb-xs -ml-two"})}),o.jsx(D,{variant:"smallBold",color:"white",children:e}),o.jsxs("div",{className:"mt-xs gap-x-xs flex",children:[o.jsx(D,{variant:"smallCaps",color:"white",className:"gap-x-two flex",children:o.jsxs("span",{children:[n,""]})}),o.jsx(D,{variant:"smallCaps",color:"white",className:"gap-x-two flex opacity-75",children:o.jsxs("span",{children:[r,""]})})]})]})]}));MTe.displayName="ForecastItem";const yae=e=>e.time,vae=e=>e.temp,QDt="white",xae="white",cI="rgba(255, 255, 255, 0.5)",bae="rgba(255, 255, 255, 0.3)",_ae="font-mono text-[11px]",av={top:30,right:0,bottom:5,left:0},XDt=100,ZDt=35,JDt=40,gW=130,kTe=I.memo(({forecast:e,activeDay:t,isMetric:n})=>{const{locale:r}=Z(),s=f.useMemo(()=>e.map(S=>S?.hour?.map(E=>({time:new Date(E.time),temp:n?E.temp_c:E.temp_f}))),[e,n]),a=f.useMemo(()=>Ja(s.flat(),vae),[s]),i=f.useMemo(()=>s[t]??[],[t,s]),l=f.useRef(null),{width:c,height:u}=W$(l),d=c/XDt,{xRange:m,yRange:p}=V_({width:c,height:u,margin:av,maxYLabelWidth:ZDt}),h=f.useMemo(()=>Zm({range:m,domain:Ja(i,yae),round:!0}),[i,m]),g=u/JDt,y=f.useMemo(()=>jd({range:p,domain:a,nice:!0,round:!0}),[p,a]),v=f.useMemo(()=>Tu().x(S=>h(yae(S))).y(S=>y(vae(S))).curve(Wxt),[h,y]),x=f.useMemo(()=>v(i),[v,i]),b=f.useCallback(S=>`${S}`,[]),_=f.useCallback(S=>typeof S=="number"?S.toString():S.toLocaleString(r,{hour:"numeric",minute:"numeric",hour12:!0}).replace(":00",""),[r]),w=f.useCallback((S,E,M)=>({className:_ae,fill:xae,dx:E===0?"-0.3em":E===M.length-1?"0.3em":"0",dy:"0.3em",textAnchor:E===0?"start":E===M.length-1?"end":"middle"}),[]),C=f.useMemo(()=>({className:_ae,textAnchor:"start",dx:"0.75em",dy:"-0.5em",fill:xae}),[]);return o.jsx("div",{className:"relative",ref:l,style:{height:gW},children:o.jsxs(r0,{width:c,height:u,children:[o.jsx(Id,{orientation:Ca.bottom,scale:h,top:u,stroke:cI,hideAxisLine:!0,numTicks:d,tickStroke:bae,tickLabelProps:w,tickFormat:_}),o.jsx(Id,{orientation:Ca.left,left:av.left,hideAxisLine:!0,tickFormat:b,scale:y,stroke:cI,tickStroke:bae,hideTicks:!0,tickLabelProps:C,numTicks:g}),o.jsx(sp,{left:av.left,scale:y,width:c-av.right-av.left*2,strokeDasharray:"2,2",stroke:cI,pointerEvents:"none",numTicks:g}),o.jsx("path",{d:x,stroke:QDt,strokeWidth:2,fill:"none",strokeLinecap:"round",shapeRendering:"geometricPrecision"})]})})});kTe.displayName="HourlyTemperature";const eFt=Object.freeze(Object.defineProperty({__proto__:null,HOURLY_TEMPERATURE_HEIGHT:gW,HourlyTemperature:kTe},Symbol.toStringTag,{value:"Module"})),tFt=ye(async()=>{const{HourlyTemperature:e}=await K(async()=>{const{HourlyTemperature:t}=await Promise.resolve().then(()=>eFt);return{HourlyTemperature:t}},void 0);return{default:e}},{loading:()=>o.jsx("div",{style:{height:gW}})}),TTe=I.memo(e=>{const{$t:t}=Z(),{prefersMetric:n,setPrefersMetric:r}=ETe(),s=n,[a,i]=f.useState(0),[l,c]=f.useState(!1),u=e,{menuItems:d}=t0(),{openModal:m}=xt(),{permissionStatus:p}=Ny(),{submitQuery:h}=Hs(),{trackEvent:g}=Ne(),{locale:y}=Z(),{value:v}=zb({flag:"weather-provider",defaultValue:"weatherapi",subjectType:"visitor_id"}),x=f.useCallback(()=>{g("precise location modal opened",{origin:"weather_widget"}),m("locationPermissionModal",{onPermissionGranted:A=>{c(!1);const R=lo();h({rawQuery:"weather",copilotOverride:!1,attachments:[],collection:null,newFrontendContextUUID:R,promptSource:"device_location_request",querySource:"device_location_request",deviceLocation:{latitude:A.coords.latitude,longitude:A.coords.longitude},shouldRedirectToBackendUUID:!0})},origin:"weather_widget"})},[g,m,h]);f.useEffect(()=>{p!==void 0&&p!=="granted"&&c(!0)},[p]);const b=f.useCallback(()=>{window.open(u.url||"https://www.accuweather.com/","_blank")},[u.url]);if(!u||!u.current||!u.location)return null;const{current:_,location:w,forecast:C}=u,S=C[0],E=_.condition?.icon,M=OM(bk,E)?B1[E]:vb,k="col-span-1";return o.jsx(Ci,{widgetType:"weather",widgetName:"weather_forecast",widgetSize:"full",children:o.jsxs(H,{className:"p-md relative select-none",children:[o.jsx(DE,{variant:a===0?_.condition?.icon||"clear-day":C[a]?.icon||"clear-day"}),o.jsxs(H,{className:"gap-md relative flex flex-col drop-shadow-sm",children:[o.jsxs("div",{className:"gap-x-lg flex",children:[o.jsx(H,{className:k,children:o.jsx("div",{className:"flex h-full items-center",children:o.jsxs(D,{className:"gap-x-md flex items-center",color:"white",children:[o.jsx(ce,{icon:M,size:40,className:"-mt-xs -ml-two"}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("div",{className:"font-mono text-4xl",children:o.jsx(ci,{value:s?_.temp_c??0:_.temp_f??0,suffix:""})}),o.jsxs("div",{className:"ml-xs mt-two flex",children:[o.jsx("button",{onClick:()=>r(!1),className:"cursor-pointer appearance-none",children:o.jsx(D,{color:"white",className:s?"opacity-60":void 0,children:o.jsx("div",{className:"font-mono",children:"F"})})}),o.jsx("button",{onClick:()=>r(!0),className:"ml-xs cursor-pointer appearance-none",children:o.jsx(D,{color:"white",className:s?void 0:"opacity-60",children:o.jsx("div",{className:"font-mono",children:"C"})})})]})]})]})})}),o.jsxs(H,{className:k,children:[_.condition&&o.jsx(D,{variant:"section-title",color:"white",children:_.condition.text}),o.jsx("div",{className:"gap-x-sm flex",children:o.jsxs("div",{className:"gap-x-xs flex",children:[o.jsx(D,{variant:"smallCaps",color:"white",children:o.jsx(ci,{value:s?S?.maxtemp_c??0:S?.maxtemp_f??0,suffix:""})}),o.jsx(D,{variant:"smallCaps",className:"flex opacity-70",color:"white",children:o.jsx(ci,{value:s?S?.mintemp_c??0:S?.mintemp_f??0,suffix:""})})]})})]})]}),o.jsxs("div",{className:"gap-sm flex",children:[o.jsxs(H,{className:"flex flex-col items-start justify-center",children:[o.jsx("div",{className:"gap-sm relative flex items-center",children:o.jsxs(Pl,{className:"gap-xs text-xs text-white",children:[o.jsx(gr,{id:"location-name",children:o.jsxs(D,{variant:"smallBold",className:"text-right",color:"white",children:[w.name,w.is_usa?w.region?`, ${w.region}`:"":`, ${w.country}`]})}),l&&o.jsx(gr,{id:"precise",children:o.jsx(Te,{onClick:x,size:"small",extraCSS:"!text-white hover:underline hover:opacity-100 !p-0 !h-0 decoration-white/50 decoration-offset-[4px] opacity-70 !font-normal",pill:!0,variant:"noBackground",text:t({defaultMessage:"Use precise location",id:"Si49wMl5CP"})})})]})}),w.localtime&&o.jsx(D,{variant:"tiny",color:"white",className:"opacity-75",children:Sst(w.localtime,y)})]}),d&&d?.length>0&&o.jsx("div",{className:"absolute right-0 top-0",children:o.jsx(pr.Menu,{buttonClass:"!text-white opacity-40 hover:opacity-100 hover:!bg-white/10",menuItems:d})})]})]}),o.jsx(H,{className:"mt-xl relative grid grid-cols-3 gap-x-4 gap-y-6 drop-shadow-sm md:grid-cols-6 md:gap-0",children:C.map((A,R)=>o.jsx("button",{onClick:()=>i(R),className:R!==a?"duration-150 hover:opacity-70 active:scale-[0.98]":"",children:o.jsx(MTe,{day:tU(A.dow??"",y),high:(s?A.maxtemp_c:A.maxtemp_f)??0,low:(s?A.mintemp_c:A.mintemp_f)??0,icon:B1[A.icon],selected:a===R})},R))}),o.jsx(H,{className:"mt-sm",children:o.jsx(tFt,{forecast:C,activeDay:a,isMetric:s})}),v==="accuweather"&&o.jsx(H,{className:"mt-lg flex cursor-pointer justify-end",onClick:b,children:o.jsxs(D,{variant:"micro",color:"white",className:"mt-xs gap-xs -mb-sm -mr-xs flex items-center opacity-65 hover:opacity-40",children:["The AccuWeather",o.jsx("sup",{className:"-ml-xs",children:""})," Forecast",o.jsx(ce,{icon:ao,size:"xs"})]})})]})})});TTe.displayName="WeatherWidget";const NTe=()=>null,nFt=ye(()=>K(()=>import("./index-DVIXI4Xq.js"),__vite__mapDeps([129,3,1,4,6,5])),{loading:()=>o.jsx(NTe,{})}),rFt=ye(async()=>{const{CharityWidget:e}=await K(async()=>{const{CharityWidget:t}=await import("./CharityWidget-CuygT3U1.js");return{CharityWidget:t}},__vite__mapDeps([130,3,1,4,115,116,117,118,5,6]));return{default:e}},{loading:()=>o.jsx(NTe,{})}),jTe=I.memo(({widgetData:e,menuItems:t,tableCitationOffset:n})=>{const r=U_(e);return r?Br(r).with({object:"CalculatorWidget"},s=>o.jsx(pr,{menuItems:t,children:o.jsx(IMe,{...s})})).with({object:"FinanceWidget"},()=>null).with({object:"CrunchbaseWidget"},s=>o.jsx(pr,{menuItems:t,variant:"noChrome",children:o.jsx(nFt,{...s})})).with({object:"PlaceWidget"},()=>null).with({object:"ShopifyWidget"},()=>null).with({object:"JobsWidget"},()=>null).with({object:"TimeWidget"},s=>o.jsx(pr,{menuItems:t,children:o.jsx(CTe,{...s})})).with({object:"TimerWidget"},s=>o.jsx(pr,{menuItems:t,children:o.jsx(STe,{...s})})).with({object:"CurrencyExchangeWidget"},s=>o.jsx(pr,{menuItems:t,className:"overflow-hidden !p-0",variant:"noChrome",children:o.jsx(N5e,{...s})})).with({object:"WeatherWidget"},s=>o.jsx(pr,{menuItems:t,variant:"noChrome",children:o.jsx(TTe,{...s})})).with({object:"TableWidget"},s=>o.jsx(pr,{menuItems:t,variant:"noChrome",children:o.jsx(Nke,{tableData:s,citationOffset:n??0})})).with({object:"SportsEventsWidget"},s=>o.jsx(kv,{data:s})).with({object:"SportsIndvScheduleWidget"},s=>o.jsx(kv,{data:s})).with({object:"SportsStandingsWidget"},s=>o.jsx(kv,{data:s})).with({object:"SportsIndvEventsWidget"},s=>o.jsx(kv,{data:s})).with({object:"FlightStatusWidget"},s=>o.jsx(O5e,{data:s})).with({object:"CharityWidget"},s=>o.jsx(pr,{menuItems:t,variant:"noChrome",children:o.jsx(rFt,{...s})})).with({object:"TaskWidget"},s=>o.jsx(wTe,{data:s})).with({object:"GenericFallbackWidget"},s=>o.jsx(D5e,{...s})).otherwise(()=>(ne.warn(new Error(`No PanelComponent found for livePanelType: ${r.object}`),{widgetData:e}),null)):null});jTe.displayName="LivePanel";const ATe=I.memo(({name:e,title:t,values:n,onEntityClick:r})=>{const{inFlight:s}=Vt(),a=f.useCallback(c=>{s||r(c)},[s,r]),i=B("underline-offset-2 cursor-pointer decoration-subtler hover:text-super hover:decoration-super group transition-colors duration-200 ease-in-out",{underline:!s}),l=f.useCallback(({content:c,href:u})=>{const d=u||(c.startsWith("http://")||c.startsWith("https://")?c:`https://${c}`);return o.jsxs(Ge,{href:d,target:"_blank",rel:"noopener",className:i,children:[c,o.jsx(D,{className:"ml-xs inline",color:"light",variant:"tiny",children:o.jsx(ce,{icon:Tx,size:"xs"})})]})},[i]);return o.jsx(pr.Item,{name:e,title:t,value:n.map((c,u)=>o.jsx(ITe,{attributeValue:c,index:u,totalValues:n.length,entityStyling:i,handleEntityClick:a,renderLink:l},`${c.id}-${u}`))},e)});ATe.displayName="WikiPanelItem";const ITe=I.memo(({attributeValue:e,index:t,totalValues:n,entityStyling:r,handleEntityClick:s,renderLink:a})=>{const i=f.useMemo(()=>()=>o.jsx("div",{children:e.value}),[e.value]),l=f.useCallback(()=>s(e.value),[e.value,s]),c=f.useMemo(()=>o.jsxs(Or,{fallback:i,children:[e.value&&o.jsx(o.Fragment,{children:e.clickable_entity?o.jsx("span",{className:r,onClick:l,children:e.value}):e.value}),e.detail&&o.jsxs("span",{className:"text-quiet ml-1",children:["(",e.source?a({content:e.detail,href:e.source}):e.detail,")"]})]}),[e.clickable_entity,e.detail,e.source,e.value,r,i,l,a]);return o.jsxs("span",{children:[c,t<n-1&&", "]})});ITe.displayName="RenderedValueFactory";const wae=0,RTe=I.memo(({data:e,isReadonly:t,submit:n,entryUUID:r})=>{const{$t:s}=Z(),{title:a,subtitle:i,attributes:l,image_url:c,source_url:u}=e,{trackEvent:d}=Ne(),{firstResult:{frontend_context_uuid:m}={}}=Vt(),p=gt(),h=l.length,[g,y]=f.useState(h),v=g===h,x=l.length>2,{menuItems:b}=t0(),_=f.useCallback(()=>{d("click toggle on knowledge card",{newState:v?"collapsed":"expanded",entryUUID:r??"",type:e.type,id:e.source_url,name:e.title}),y(k=>k===wae?h:wae)},[d,v,h,r,e]),[w,{height:C}]=ql(),S=t,E=lo(),M=f.useCallback(k=>{if(d("knowledge card link clicked",{entryUUID:r??"",type:e.type,id:e.source_url,name:e.title,label:"attributes",value:k}),n({fork:S,rawQuery:k,collection:null,newFrontendContextUUID:S?E:null,existingFrontendContextUUID:S?void 0:m,promptSource:"user",querySource:"entity_link"}),S){const A=new URLSearchParams({q:k,newFrontendContextUUID:E}),R=new URL(window.location.href);R.pathname="search/new",R.search=A.toString();const O=R.toString();p.push(O)}},[n,S,E,m,p,r,e,d]);return f.useEffect(()=>{d("knowledge card shown",{entryUUID:r??"",type:e.type,id:e.source_url,name:e.title})},[]),o.jsx("div",{className:"relative",children:o.jsx(ge.div,{animate:C>0?{height:C}:{},transition:{type:"spring",bounce:.2,duration:.2},className:"overflow-hidden",children:o.jsxs("div",{ref:w,className:"gap-md relative flex flex-col",children:[o.jsx("div",{className:"flex items-end justify-between",children:o.jsx(pr.Title,{title:a,subtitle:i,image_url:c,href:u,links:e.links,entryUUID:r??"",data:e,children:o.jsx("div",{className:"flex items-start",children:o.jsx("div",{className:"gap-sm flex items-center",children:b&&b?.length>0&&o.jsx(pr.Menu,{menuItems:b,buttonClass:"opacity-0 pointer-events-none"})})})})}),v&&o.jsx("div",{className:"gap-sm border-subtlest pt-md md:gap-x-md grid grid-cols-[auto,1fr] border-t",children:l.slice(0,g).map(k=>o.jsx(ATe,{name:k.key,title:k.title,values:k.values,onEntityClick:M},k.key))}),o.jsx("div",{children:x&&o.jsx("div",{className:"flex justify-end",children:o.jsx(he,{variant:"border",fullWidth:!0,text:s(v?{defaultMessage:"Less",id:"mFYgAXM/x4"}:{defaultMessage:"More",id:"I5NMJ8llIi"}),size:"tiny",pill:!0,onClick:_,icon:v?ey:Dn,extraCSS:"pl-xs w-[76px]"})})})]})})})});RTe.displayName="WikiPanel";function sFt(e){if(!e||!e.card_type)return null;const{primaryLink:t,otherLinks:n}=e.links.reduce((s,a)=>(a.type==="PRIMARY"&&!s.primaryLink?s.primaryLink=a:s.otherLinks.push(a),s),{primaryLink:null,otherLinks:[]}),r=e?.media_items?.[0]?.image??e?.image_urls?.[0]??"";return{source_url:t?.url??"",image_url:r,title:e?.title??"",subtitle:e.description??"",attributes:e.attributes??[],type:e.card_type,links:n}}const PTe=I.memo(({knowledgePanelData:e,isReadonly:t,submit:n,menuItems:r,entryUUID:s,className:a})=>{const i=f.useMemo(()=>e?sFt(e):null,[e]);return i?o.jsx(pr,{menuItems:r,className:a,children:o.jsx(RTe,{data:i,submit:n,isReadonly:t,entryUUID:s??""})}):null});PTe.displayName="StaticPanel";function PO(e){return e&&"is_widget"in e&&e.is_widget===!0}function aFt(e){return e&&"card_type"in e}function Cae(e){return"is_code_interpreter"in e&&e.is_code_interpreter===!0&&e.is_image}const OTe=I.memo(({data:e,submit:t,isReadonly:n=!1,menuItems:r,tableCitationOffset:s,entryUUID:a})=>o.jsxs(o.Fragment,{children:[!Cae(e)&&PO(e)&&o.jsx(jTe,{widgetData:e,menuItems:r??ue,tableCitationOffset:s}),aFt(e)&&o.jsx(PTe,{knowledgePanelData:e,summaryData:null,submit:t,isReadonly:n,menuItems:r??ue,entryUUID:a??""}),Cae(e)&&o.jsx(mEe,{graphData:e})]}));OTe.displayName="ThreadEntryPanel";const ow=({reason:e})=>{const t=ht(),{searchTerm:n}=qF(),r=[xm,{search_term:n??""}],s=Omt(),a=Pme(),i=hi(),{mutate:l}=vt({mutationKey:["removeWidget"],mutationFn:async({entryUUID:m,data:p})=>PO(p)?WJe({backendUUID:m,url:p.url,rwToken:i,reason:e}):Promise.resolve(),onMutate:async({entryUUID:m,data:p})=>{await t.cancelQueries({queryKey:["results"]}),a(m,h=>PO(p)?{...h,widget_data:h.widget_data?.filter(g=>g.url!==p.url)}:h)}}),{mutate:c}=vt({mutationFn:async m=>{try{await se.DELETE("/rest/thread/delete_all_threads",e,{body:{delete_all:m==="all"},timeoutMs:0})}catch(p){ne.error(p)}},onMutate:async m=>{await t.cancelQueries({queryKey:r}),await t.cancelQueries({queryKey:pn});const p=t.getQueryData(r),h=t.getQueryData(pn);return m==="all"?(t.setQueryData(pn,g=>{const y=g.pages.map(v=>v.map(x=>({...x,thread_count:0})));return{...g,pages:y}}),t.setQueryData(r,g=>({...g,pages:[]}))):m==="standalone"&&t.setQueryData(r,g=>({...g,pages:g.pages.map(y=>y.filter(v=>v.collection?.uuid))})),{previousThreads:p,previousCollections:h}},onSettled:(m,p,h,g)=>{p?(t.setQueryData(r,g?.previousThreads),t.setQueryData(pn,g?.previousCollections)):(t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:pn}),t.invalidateQueries({queryKey:[Vc]}),t.invalidateQueries({queryKey:[XS]}),s())}}),{mutate:u}=vt({mutationFn:async({entryUUID:m,callback:p})=>{p?.(),await $Je({entryUUID:m,rwToken:i,callback:p,reason:e})},onMutate:async({entryUUID:m,collectionSlug:p})=>{await t.cancelQueries({queryKey:r}),await t.cancelQueries({queryKey:pn});const h=t.getQueryData(r),g=t.getQueryData(pn);return t.setQueryData(r,y=>{y=y||{pages:[],pageParams:[]};const v=y.pages.map(x=>x.filter(b=>b.uuid!==m));return{...y,pages:v}}),p&&(t.setQueryData(pn,y=>{y=y||{pages:[],pageParams:[]};const v=y.pages.map(x=>x.map(b=>b.slug===p?{...b,thread_count:b.thread_count-1}:b));return{...y,pages:v}}),t.setQueryData([Vc,{collection_slug:p.slice(-22)}],y=>{y=y||{pages:[],pageParams:[]};const v=y.pages.map(x=>x.filter(b=>b.uuid!==m));return{...y,pages:v}})),{previousThreads:h,previousCollections:g}},onSettled:(m,p,{entryUUID:h},g)=>{p?(t.setQueryData(r,g?.previousThreads),t.setQueryData(pn,g?.previousCollections)):(t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:pn}),t.invalidateQueries({queryKey:[Vc]}),t.invalidateQueries({queryKey:[XS]}),s(h))}}),{mutate:d}=vt({mutationFn:async({entryUUIDs:m,callback:p})=>{p?.(),await VJe({entryUUIDs:m,rwToken:i,reason:e})},onMutate:async({entryUUIDs:m})=>{await t.cancelQueries({queryKey:r});const p=t.getQueryData(r),h=t.getQueryData(pn);return t.setQueryData(r,g=>{g=g||{pages:[],pageParams:[]};const y=g.pages.map(v=>v.filter(x=>!m.includes(x.uuid)));return{...g,pages:y}}),{previousThreads:p,previousCollections:h}},onSettled:(m,p,{entryUUIDs:h},g)=>{p?t.setQueryData(r,g?.previousThreads):(t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:[XS]}),h.forEach(y=>s(y)))}});return f.useMemo(()=>({removeWidgetFromEntry:l,deleteAllThreads:c,deleteThread:u,deleteThreads:d}),[c,u,d,l])};function oFt({queryKey:e,pageSize:t,fetchFn:n,autoFetch:r,nextPageAccessor:s,initialData:a,args:i}){const l=f.useMemo(()=>i||[],[i]),c=f.useCallback(async({pageParam:u=1})=>{(!u||u<1)&&(u=1);const m={offset:(u-1)*t,...l};return n(m)},[l,n,t]);return xu({enabled:r,queryKey:e,queryFn:c,placeholderData:Ud,refetchOnReconnect:"always",networkMode:"offlineFirst",initialData:a,initialPageParam:1,getNextPageParam:(u,d)=>s(u,d)})}const iFt=(e,t)=>e&&e[0]?.has_next_page?t.length+1:void 0,yW=(e,t,n,r,s)=>{const a=ht(),{searchTerm:i}=qF(),l=f.useMemo(()=>({search_term:i,with_temporary_threads:t,ascending:r,query_source_filter:n,thread_type_filter:s}),[i,t,r,n,s]),c=f.useCallback(async v=>lme({timeoutMs:5e3,paginationParams:v,ascending:r,reason:e}),[r,e]),u=oFt({queryKey:[xm,l],pageSize:ime,fetchFn:c,autoFetch:!0,nextPageAccessor:iFt,args:l}),d=f.useCallback(()=>{a.invalidateQueries({queryKey:[xm,l]})},[a,l]),m=u.data?.pageParams?.length??1,p=u.data?.pages??[],h=p.flat(),g=p[p.length-1]?.[0]?.has_next_page,y=f.useMemo(()=>({currentPage:m,hasNextPage:!!g,hasPreviousPage:m>1,getNextPage:()=>u.fetchNextPage(),getPreviousPage:()=>u.fetchPreviousPage()}),[g,m,u]);return f.useMemo(()=>({...u,data:h,paginationInfo:y,invalidateThreadsQuery:d}),[y,u,h,d])};function lFt({reason:e}){const t=ht();return f.useCallback(()=>{t.prefetchInfiniteQuery({queryKey:[xm,{search_term:""}],initialPageParam:0,queryFn:()=>lme({timeoutMs:5e3,paginationParams:{offset:0},reason:e})})},[t,e])}const LTe="fetch_bookmarks";async function cFt({reason:e}){try{const{data:t,error:n}=await se.GET("/rest/collections/list_bookmarks",e);if(n)throw new Ce("API_CLIENTS_ERROR",{cause:n,details:{reason:e}});return t}catch(t){return ne.error("Failed to get bookmarks.",t),null}}const uFt=({reason:e,enabled:t=!0})=>{const{isIncognito:n}=Ra({reason:e}),{session:r}=Et(),s=r?.user?.email,{data:a,refetch:i,isLoading:l}=We({queryKey:[LTe,s],queryFn:async()=>s?await cFt({reason:e}):null,enabled:t&&!n&&!!s,refetchOnMount:!1,refetchOnWindowFocus:!0,placeholderData:null});return f.useMemo(()=>!s||n?{data:null,isLoading:!1,refetch:kn}:{data:a,isLoading:l,refetch:i},[a,s,n,l,i])},dFt=()=>{const e=ht();return f.useCallback(()=>{e.invalidateQueries({queryKey:[LTe]})},[e])};function fFt({activeStreams:e,streams:t,threads:n,entries:r}){return Array.from(e).reverse().map(s=>{const a=t[s];if(!a)return;const i=a.threadId,c=n.find(u=>u.id===i)?.entryIds?.[0];if(c&&i){const u=r[c];return u?{id:i,slug:u.thread_url_slug,title:u.thread_title??u.query_str??a.placeholderChunk?.query_str??"",rwToken:u.read_write_token,lastUpdated:u.updated_datetime,contextUUID:u.context_uuid,collectionInfo:u.collection_info,displayModel:u.display_model,entryUUID:u.uuid,socialInfo:u.social_info,focus:u.search_focus,mode:u.mode,source:u.source,streamCreatedAt:u.stream_created_at,streamId:a.id,frontendContextUUID:u.frontend_context_uuid}:void 0}else return{id:"",slug:void 0,title:a.placeholderChunk?.query_str??"",rwToken:null,lastUpdated:null,contextUUID:null,collectionInfo:null,displayModel:null,entryUUID:null,socialInfo:null,focus:null,mode:null,source:null,streamCreatedAt:new Date().toISOString(),streamId:a.id,frontendContextUUID:a.placeholderChunk?.frontend_context_uuid}}).filter(s=>s!=null)}function mFt({activeStreams:e,streams:t,threads:n,entries:r}){return Array.from(e).reverse().map(s=>{const a=t[s];if(!a)return;const i=a.threadId;if(!i)return;const c=n.find(d=>d.id===i)?.entryIds?.[0];if(!c)return;const u=r[c];if(u)return{id:i,slug:u.thread_url_slug,title:u.thread_title??u.query_str??a.placeholderChunk?.query_str??"",rwToken:u.read_write_token,lastUpdated:u.updated_datetime,contextUUID:u.context_uuid,collectionInfo:u.collection_info,displayModel:u.display_model,entryUUID:u.uuid,socialInfo:u.social_info,focus:u.search_focus,mode:u.mode,source:u.source,streamCreatedAt:u.stream_created_at}}).filter(s=>s!=null)}function pFt(){const e=uo(),{activeStreams:t,streams:n,threads:r,entries:s}=e.getState();return f.useMemo(()=>{const a=mFt({activeStreams:t,streams:n,threads:r,entries:s}),i=new Set;return a.filter(l=>!l.slug||i.has(l.slug)?!1:(i.add(l.slug),!0))},[t,n,r,s])}function DTe({reason:e}){const{data:t,isLoading:n}=W4t({reason:e}),r=pFt();return f.useMemo(()=>({isLoading:n,data:[...r.filter(s=>!t.some(a=>a.link.split("/").pop()===s.slug)).filter(s=>!t.some(a=>a.uuid===s.id)).filter(s=>s.slug!==null).map(s=>({uuid:s.id,variant:"thread",link:`/search/${s.slug}`,title:s.title??"",isStreaming:!0,unread:!1})),...t]}),[t,r,n])}const hFt="fetch_sidebar_hubs",OO=["SIDEBAR_FINANCE","SIDEBAR_SHOPPING","SIDEBAR_TRAVEL","SIDEBAR_ACADEMIC","SIDEBAR_SPORTS"],Sae=(e,t)=>t?.sidebar_hubs.includes(e)??!1,LO=[hFt];async function gFt({reason:e}){try{return(await se.GET("/rest/user/get_user_sidebar_hubs",e)).data||{sidebar_hubs:ue}}catch(t){return ne.error("Failed to get sidebar hubs.",t),{sidebar_hubs:ue}}}const FTe=({reason:e})=>{const{data:t,refetch:n,isLoading:r}=We({queryKey:LO,queryFn:()=>gFt({reason:e})});return f.useMemo(()=>({data:t,isLoading:r,refetch:n}),[t,r,n])},yFt=({reason:e})=>{const{actions:t}=hn(),{data:n}=FTe({reason:e});f.useEffect(()=>{if(!n)return;const r=OO.filter(s=>!n.sidebar_hubs.includes(s));t.setSidebarHiddenHubs(r)},[n,t])},UTe=({reason:e})=>{const t=ht(),{actions:n,sidebarHiddenHubs:r}=hn(),s=f.useCallback(async i=>{try{return await se.POST("/rest/user/subscribe_user_sidebar_hub/{hub_type}",e,{params:{path:{hub_type:i}}}),t.invalidateQueries({queryKey:LO}),n.setSidebarHiddenHubs(r.filter(l=>l!==i)),!0}catch{return!1}},[t,n,r,e]),a=f.useCallback(async i=>{try{return await se.POST("/rest/user/unsubscribe_user_sidebar_hub/{hub_type}",e,{params:{path:{hub_type:i}}}),t.invalidateQueries({queryKey:LO}),n.setSidebarHiddenHubs([...r,i]),!0}catch{return!1}},[t,n,r,e]);return f.useMemo(()=>({subscribeToHub:s,unsubscribeFromHub:a}),[s,a])},ov=e=>{const t=e?.split("/").slice(1);return ia(t)?["finance"].includes(t[0])?"finance":["travel"].includes(t[0])?"travel":["shopping"].includes(t[0])?"shopping":["academic"].includes(t[0])?"academic":["sports"].includes(t[0])?"sports":null:null},vFt=()=>{const{$t:e}=Z();return[{id:"SIDEBAR_FINANCE",name:e({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),icon:gb},{id:"SIDEBAR_TRAVEL",name:e({defaultMessage:"Travel",id:"z1QN2qSnI/"}),icon:Xie},{id:"SIDEBAR_SHOPPING",name:e({defaultMessage:"Shopping",id:"my1MLnIMoS"}),icon:Zie},{id:"SIDEBAR_ACADEMIC",name:e({defaultMessage:"Academic",id:"mbxIJyT8C5"}),icon:T7},{id:"SIDEBAR_SPORTS",name:e({defaultMessage:"Sports",id:"qEuXjx1B4z"}),icon:Jie}]},xFt=({isOpen:e,onClose:t,availableHubs:n})=>{const r="home-sidebar-configure-overlay",s=vFt(),{data:a}=FTe({reason:r}),{subscribeToHub:i,unsubscribeFromHub:l}=UTe({reason:r}),{$t:c}=Z(),u=f.useMemo(()=>s.filter(d=>n.includes(d.id)),[n,s]);return o.jsxs(en,{title:c({defaultMessage:"Customize Sidebar",id:"/4kt7TXcZf"}),isOpen:e,onClose:t,variant:"default",children:[o.jsx(D,{variant:"base",color:"light",className:"mb-sm",children:c({defaultMessage:"Select the items that appear in your sidebar.",id:"I+JwmwJnZQ"})}),o.jsx(H,{className:"mb-[-24px] flex flex-col divide-y",children:u.map(d=>o.jsx(bFt,{hub:d,enabled:Sae(d.id,a),onToggle:()=>{Sae(d.id,a)?l(d.id):i(d.id)}},d.id))})]})},bFt=({hub:e,enabled:t,onToggle:n})=>o.jsxs("div",{className:"flex h-12 items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ce,{icon:e.icon,size:"base"}),o.jsx(D,{variant:"baseSemi",children:e.name})]}),o.jsx(Ro,{active:t,onChange:n})]}),BTe=I.memo(({item:{title:e,link:t},position:n})=>{const{trackEvent:r}=Ne(),{setMobileSidebarOpen:s}=Mu(),a=f.useCallback(()=>{s(!1),r("click recent collection",{title:e,link:t,position:n})},[t,n,s,e,r]);return o.jsx(Ge,{href:t,className:"group block cursor-pointer",onClick:a,children:o.jsx(H,{className:"p-xs rounded",bgHover:"subtle",children:o.jsx(D,{variant:"tiny",className:"gap-x-xs flex items-center justify-between",color:"light",children:o.jsx("div",{className:"flex w-full items-center",children:o.jsx("span",{className:"w-full overflow-hidden whitespace-nowrap",style:{maskImage:"linear-gradient(to right, black 85%, transparent 97%)"},children:e})})})})})});BTe.displayName="CollectionHistoryItem";const VTe=({show:e,data:t,type:n,HistoryComponent:r,wrapperClassName:s,id:a})=>{const i="recent-items",{isIncognito:l}=Ra({reason:i}),c=(u,d="")=>"link"in u?u.link+d:"uuid"in u?u.uuid+d:"slug"in u?u.slug+d:d;return!e||!t?.length?null:o.jsx("div",{className:"group/history",children:o.jsx(Ke,{initial:!1,mode:"wait",children:l?o.jsx(DO,{className:"px-sm",direction:"in",children:o.jsx(H,{className:"mx-md mb-lg mt-sm p-md rounded-md border border-dashed",children:o.jsx(D,{color:"ultraLight",variant:"tiny",className:"gap-sm flex flex-col items-start text-left",children:o.jsx("span",{children:n==="thread"?o.jsx(pe,{defaultMessage:"Library disabled while incognito",id:"OUt8F76OaH"}):o.jsx(pe,{defaultMessage:"Spaces disabled while incognito",id:"kdu3grXdAD"})})})})},"empty"):o.jsx(DO,{direction:"out",children:o.jsx(ge.div,{layout:!0,layoutRoot:!0,className:B("mb-md mt-xs space-y-xs border-subtlest pr-sm dark:border-subtle relative ml-[26px] border-l pl-[14px] duration-200",s),children:o.jsx(rc,{children:o.jsx(Ke,{initial:!1,mode:"popLayout",children:t.map((u,d)=>o.jsx(ge.div,{layout:"position",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:0},transition:{ease:rn,duration:.3},children:o.jsx(r,{item:u,position:d})},c(u,a)))})})})},"history")})})},nb=f.memo(VTe);VTe.displayName="RecentItems";const DO=f.memo(({children:e,className:t,direction:n})=>o.jsx(ge.div,{initial:{x:n==="in"?20:-20,opacity:0},animate:{x:0,opacity:1},exit:{x:n==="in"?20:-20,opacity:0,transition:{ease:oo(.7,0,.84,0),duration:.1}},transition:{x:{ease:oo(.16,1,.3,1),duration:.2},opacity:{ease:la,duration:.15}},className:t,children:e}));DO.displayName="SlideItem";const $Te=I.memo(({item:{variant:e,title:t,link:n},position:r})=>{const{trackEvent:s}=Ne(),{setMobileSidebarOpen:a}=Mu(),{actualQuery:i}=cu(t),l=i||t,c=f.useCallback(()=>{a(!1),s("click recent thread",{title:t,link:n,variant:e,position:r})},[n,r,a,t,s,e]);return o.jsx(Ge,{href:n,className:"group block cursor-pointer",onClick:c,children:o.jsx(H,{className:"p-xs rounded",bgHover:"subtle",children:o.jsx(D,{variant:"tiny",className:"gap-x-xs flex items-center justify-between",color:"light",children:o.jsxs("div",{className:"flex w-full items-center",children:[o.jsx("span",{className:"w-full overflow-hidden whitespace-nowrap",style:{maskImage:"linear-gradient(to right, black 85%, transparent 97%)"},children:l}),o.jsx(ce,{icon:e==="article"?ele:z7,size:"sm",className:"min-w-0 shrink basis-0 scale-90 opacity-0 duration-300 ease-out group-hover:block group-hover:shrink-0 group-hover:basis-auto group-hover:scale-100 group-hover:opacity-100"})]})})})})});$Te.displayName="ThreadHistoryItem";const NT=I.memo(({vertical:e=!0,size:t,collapsed:n,actionList:r,...s})=>o.jsx(J_,{layout:n?"center":"left",size:t,iconOnly:n,vertical:e,actionList:r??ue,indicatorPos:n?"right":"none",fillSpace:!0,...s}));NT.displayName="SiteTabs";const WTe=f.memo(({vertical:e=!0,size:t,collapsed:n,incognito:r,animationId:s})=>{const a="ask-site-tabs",{$t:i}=Z(),l=rt(),{isMobileStyle:c}=xe(),{trackEvent:u}=Ne(),{allowArticleCreation:d}=ma({reason:a}),m=jt(),{openVisitorLoginUpsell:p}=ur({enabled:!l}),{shouldShowLossAversionModal:h,handleOpenLossAversion:g}=Oy(),{data:y}=cge({reason:a}),{data:v}=DTe({reason:a}),{setMobileSidebarOpen:x}=Mu(),b=f.useCallback(M=>{x(!1),h&&(M.preventDefault(),g({args:{origin:Oe.DISCOVER_BUTTON}}))},[h,g,x]),_=f.useCallback(()=>{u("spaces click",{}),x(!1),l||p({title:i({defaultMessage:"Focus your Perplexity experience in Spaces",id:"spZP/TobF9"}),origin:Oe.SPACES_PAGE})},[u,l,p,i,x]),w=f.useCallback(()=>{u("library click",{}),x(!1),l||p({title:i({defaultMessage:"Organize your search history by signing up",id:"PMTP+jTgx8"}),origin:Oe.LIBRARY_PAGE})},[u,l,p,i,x]),C=f.useCallback(()=>{u("finance click",{}),x(!1)},[x,u]),S=f.useCallback(()=>{x(!1)},[x]),E=f.useMemo(()=>{const M=[{icon:tle,text:i({defaultMessage:"Home",id:"ejEGdxSUGs"}),href:"/",show:!0,active:m==="/",ariaLabel:i({defaultMessage:"Home",id:"ejEGdxSUGs"}),testId:"home-tab",onClick:S,tooltip:n?i({defaultMessage:"Home",id:"ejEGdxSUGs"}):void 0},{icon:nle,text:i({defaultMessage:"Discover",id:"cE4HfwyEyr"}),show:!0,active:m?.startsWith("/discover"),ariaLabel:i({defaultMessage:"Discover",id:"cE4HfwyEyr"}),testId:"discover-tab",href:h?void 0:"/discover",onClick:b,tooltip:n?i({defaultMessage:"Discover",id:"cE4HfwyEyr"}):void 0},{icon:eo,text:i({defaultMessage:"Spaces",id:"ZMoczsYew9"}),href:l?"/spaces":void 0,onClick:_,show:!0,active:m?.startsWith("/spaces"),ariaLabel:i({defaultMessage:"Spaces",id:"ZMoczsYew9"}),testId:"spaces-tab",tooltip:n?i({defaultMessage:"Spaces",id:"ZMoczsYew9"}):void 0,children:!n&&l&&o.jsx(nb,{show:!0,data:y,type:"collection",HistoryComponent:BTe})},{icon:x9e,text:i({defaultMessage:"Library",id:"StcK672jB9"}),href:l?"/library":void 0,onClick:w,show:!0,testId:"library-tab",trailingComponent:!r&&d&&!n?o.jsx(vW,{}):void 0,active:m?.startsWith("/library"),ariaLabel:i({defaultMessage:"Library",id:"StcK672jB9"}),tooltip:n?i({defaultMessage:"Library",id:"StcK672jB9"}):void 0,children:!n&&l&&o.jsx(nb,{show:!0,data:v,type:"thread",HistoryComponent:$Te})},{icon:gb,text:i({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),show:!0,active:m?.startsWith("/finance"),ariaLabel:i({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),testId:"finance-tab",href:"/finance",onClick:C,tooltip:n?i({defaultMessage:"Finance",id:"Fm3M+yFIbr"}):void 0}];return n&&M.push({icon:eu,text:i({defaultMessage:"Sign in",id:"SQJto27U8S"}),onClick:()=>{u("login click",{}),p({origin:Oe.LOGIN_BUTTON})},show:!l,active:m?.startsWith("/login"),testId:"sign-in-tab",ariaLabel:"Sign in",tooltip:n?i({defaultMessage:"Sign In",id:"Ub+AGcdPg6"}):void 0}),M},[m,n,i,l,r,d,b,C,_,w,u,p,y,v,h,S]);return o.jsx(NT,{isMobileStyle:c,size:t,vertical:e,collapsed:n,actionList:E,layoutGroupId:s})});WTe.displayName="AskSiteTabs";const vW=f.memo(({defaultHidden:e=!0,buttonClassName:t})=>{const{$t:n}=Z(),[r,s]=f.useState(!1),{openModal:a}=xt(),{trackEvent:i}=Ne(),l=gt(),c=rt(),u=v=>{v.preventDefault(),v.stopPropagation(),s(!r)},d=()=>{s(!1)},m=()=>{s(!0)},p=f.useCallback(v=>{v.stopPropagation(),c?l.push("/page/new"):a("loginModal",{pitchMessage:{title:n({defaultMessage:"Sign in to create a {page}",id:"MsQ6yWbdOY"},{page:"Page"})},origin:Oe.ARTICLE_NEW}),v.preventDefault()},[l,c,n,a]),h=f.useCallback(v=>{v.preventDefault(),v.stopPropagation(),i("new thread click on threads page",{}),l.push("/",void 0,"New thread (library)")},[i,l]),g=f.useMemo(()=>[{type:"default",text:n({defaultMessage:"Thread",id:"6dmn4mbc3j"}),icon:z7,onClick:h,testId:"library-dropdown-new-thread"},{type:"default",text:n({defaultMessage:"Page",id:"wFmAFCPAci"}),icon:ele,onClick:p,testId:"library-dropdown-new-page"}],[h,p,n]),y=Py();return o.jsx("div",{className:"ltr:-mr-sm rtl:-ml-sm flex w-full flex-1 justify-end",children:o.jsx(Jt,{placement:y?"left":"right",items:g,isMobileStyle:!1,onClose:d,onOpen:m,isOpen:r,children:o.jsx(H,{onClick:u,"data-testid":"library-add-button",className:B("text-foreground flex h-[24px] w-[27px] items-center justify-center rounded-md duration-150 hover:bg-black/5 dark:hover:bg-white/5",{"opacity-0 group-hover/button:opacity-100":e,"!text-foreground !bg-black/5 !opacity-100 dark:!bg-white/5":r},t),children:o.jsx(ce,{icon:ar,size:14})})})})});vW.displayName="LibraryDropdown";const Eae=(e,t)=>t?t===e.link:!1,HTe=I.memo(({item:e,position:t,onDeleteClick:n,sidebarOpen:r})=>{const{trackEvent:s}=Ne(),a=jt(),{title:i,link:l,variant:c,isStreaming:u,unread:d}=e,m=c==="thread",{actualQuery:p}=cu(i),h=p||i,{$t:g}=Z(),y=f.useCallback(()=>{s("click recent thread",{title:i,link:l,variant:c,position:t})},[l,t,i,s,c]),v=f.useMemo(()=>[{text:g({defaultMessage:"Delete {item}",id:"rdK9AWns19"},{item:m?"Thread":"Page"}),icon:vd,onClick:x=>{x.stopPropagation(),n(e)},type:"default"}],[g,m,e,n]);return o.jsx(Ls,{id:`SIDEBAR_THREAD_${e.uuid}`,href:l,text:h,fadeOut:!0,onClick:y,sidebarOpen:r,selected:Eae(e,a),menuItems:v,testId:`thread-title-${h}`,loading:u,accessory:d&&!Eae(e,a)?o.jsx("div",{className:"bg-super size-1.5 rounded-full"}):null})});HTe.displayName="ThreadHistoryItemV2";const _Ft=(e,t)=>{const{value:n,loading:r}=It({flag:"sports-landing-page",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Mae=10,wFt=({isOpen:e,onCreateClick:t,onDeleteThreadOrBookmark:n,isConfiguring:r,setIsConfiguring:s})=>{const a="home-sidebar",{data:i,isLoading:l}=DTe({reason:a}),{data:c,refetch:u}=uFt({reason:a,enabled:e}),{sidebarHiddenHubs:d}=hn(),{unsubscribeFromHub:m}=UTe({reason:a}),{bookmarks:p,bookmarks_collection_slug:h,bookmarks_collection_uuid:g}=c||{},v=qm()==="US",{variation:x}=_Ft(!1),b=lFt({reason:a}),{deleteThread:_}=ow({reason:a}),{trackEvent:w}=Ne(),{$t:C}=Z(),S=rt(),{openVisitorLoginUpsell:E}=ur({enabled:!S}),M=gt(),k=jt(),{removeThreadFromCollection:A}=Cy({reason:a});yFt({reason:a});const[R,O]=f.useState([]),[L,P]=f.useState([]),N=f.useMemo(()=>p?.filter(q=>!R.includes(q))??[],[p,R]),T=f.useMemo(()=>i?.filter(q=>!L.includes(q))??[],[i,L]),j=f.useCallback(q=>{const te=g;n(),w("unbookmark item from sidebar",{collectionUUID:te??void 0}),O(re=>[...re,q]),A({entryUUID:q.uuid,oldCollectionUUID:te??void 0,callback:()=>{u()}})},[A,u,n,g,w]),F=f.useCallback(q=>{n(),w("delete thread from sidebar",{entryUUID:q.uuid}),P(te=>[...te,q]),O(te=>[...te,{uuid:q.uuid,mode:q.variant==="article"?"article":"thread",title:q.title,slug:q.link}]),_({entryUUID:q.uuid,callback:()=>{q.link===k&&M.push("/")}})},[k,M,_,n,w]),U=f.useCallback(q=>{n(),O(te=>[...te,q]),P(te=>[...te,{uuid:q.uuid,link:q.slug,variant:q.mode==="article"?"article":"thread",title:q.title}]),w("delete bookmark from sidebar",{entryUUID:q.uuid}),_({entryUUID:q.uuid,callback:()=>{q.slug===k?.replace("/search/","").replace("/page/","")&&M.push("/")}})},[n,w,k,M,_]),V=f.useCallback(q=>{m(q)},[m]),$=f.useMemo(()=>({text:C({defaultMessage:"Hide from sidebar",id:"bt2xOtkULy"}),icon:Rt,type:"default",size:Kt.small,show:!0}),[C]),z=f.useMemo(()=>[{...$,onClick:q=>{q.stopPropagation(),V("SIDEBAR_FINANCE")}}],[V,$]),Q=f.useMemo(()=>[{...$,onClick:q=>{q.stopPropagation(),V("SIDEBAR_TRAVEL")}}],[V,$]),Y=f.useMemo(()=>[{...$,onClick:q=>{q.stopPropagation(),V("SIDEBAR_SHOPPING")}}],[V,$]),W=f.useMemo(()=>[{...$,onClick:q=>{q.stopPropagation(),V("SIDEBAR_ACADEMIC")}}],[V,$]),X=f.useMemo(()=>[{...$,onClick:q=>{q.stopPropagation(),V("SIDEBAR_SPORTS")}}],[V,$]),G=f.useMemo(()=>v?OO:OO.filter(q=>q!=="SIDEBAR_SHOPPING"),[v]),J=f.useMemo(()=>S?G.filter(q=>!d.includes(q)):G,[d,S,G]);return o.jsxs("div",{className:"flex flex-col gap-[12px]",children:[J.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs(Q1,{children:[J.includes("SIDEBAR_FINANCE")&&o.jsx(Ls,{id:"SIDEBAR_FINANCE",href:"/finance",text:C({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),icon:gb,selected:ov(k)==="finance",menuItems:S?z:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"finance"})}}),J.includes("SIDEBAR_TRAVEL")&&o.jsx(Ls,{id:"SIDEBAR_TRAVEL",href:"/travel",text:C({defaultMessage:"Travel",id:"z1QN2qSnI/"}),icon:Xie,selected:ov(k)==="travel",menuItems:S?Q:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"travel"})}}),J.includes("SIDEBAR_SHOPPING")&&o.jsx(Ls,{id:"SIDEBAR_SHOPPING",href:"/shopping",text:C({defaultMessage:"Shopping",id:"my1MLnIMoS"}),icon:Zie,selected:ov(k)==="shopping",menuItems:S?Y:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"shopping"})}}),J.includes("SIDEBAR_ACADEMIC")&&o.jsx(Ls,{id:"SIDEBAR_ACADEMIC",href:"/academic",text:C({defaultMessage:"Academic",id:"mbxIJyT8C5"}),icon:T7,selected:ov(k)==="academic",menuItems:S?W:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"academic"})}}),J.includes("SIDEBAR_SPORTS")&&x&&o.jsx(Ls,{id:"SIDEBAR_SPORTS",href:"/sports",text:C({defaultMessage:"Sports",id:"qEuXjx1B4z"}),icon:Jie,selected:ov(k)==="sports",menuItems:S?X:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"sports"})}})]}),o.jsx(X1,{})]}),o.jsx(Og,{href:"/library",onClick:q=>{S||(q.preventDefault(),E({title:C({defaultMessage:"Organize your search history by signing up",id:"PMTP+jTgx8"}),origin:Oe.LIBRARY_PAGE}))},onMouseOver:b,text:C({defaultMessage:"Library",id:"StcK672jB9"}),className:"-mb-xs",testId:"library-button",accessory:i&&e&&T.length>0?o.jsx(vW,{defaultHidden:!1,buttonClassName:"text-quiet hover:text-foreground duration-150"}):o.jsx("div",{className:"size-[24px]"})}),l?null:T.length===0?o.jsx(Ls,{id:"SIDEBAR_CREATE_THREAD",icon:ar,href:"/",text:C({defaultMessage:"Create a Thread",id:"6naN9kZFw2"}),deemphasized:!0,onClick:()=>{const q=document.getElementById("ask-input");q&&(q.focus(),t())},sidebarOpen:e}):o.jsx(nb,{show:!0,data:T,type:"thread",HistoryComponent:({item:q,position:te})=>o.jsx(HTe,{item:q,position:te,onDeleteClick:F,sidebarOpen:e}),wrapperClassName:"!m-0 !px-0 !border-0 flex flex-col gap-1.5 space-y-0 !-mt-[2px]",id:"recent-threads"}),T?.length>=Mae&&o.jsx(z9,{href:"/library",text:C({defaultMessage:"View All",id:"wbcwKddwLa"}),onMouseOver:b}),S&&c!==null&&o.jsx(o.Fragment,{children:N.length>0&&o.jsxs(o.Fragment,{children:[o.jsx(X1,{}),o.jsx(Og,{href:h?`/spaces/${h}`:void 0,text:C({defaultMessage:"Bookmarks",id:"nGBrvwYczX"}),className:"-mb-xs",testId:"bookmarks-button"}),o.jsx(nb,{show:!0,data:N,type:"thread",HistoryComponent:({item:q})=>o.jsx(CFt,{item:q,onRemoveClick:j,onDeleteClick:U,sidebarOpen:e}),wrapperClassName:"!m-0 !px-0 !border-0 flex flex-col gap-1.5 space-y-0 !-mt-[2px]",id:"recent-bookmarks"}),N.length>=Mae&&h&&o.jsx(z9,{href:`/spaces/${h}`,text:C({defaultMessage:"View All",id:"wbcwKddwLa"})})]})}),o.jsx(xFt,{isOpen:r,onClose:()=>s(!1),availableHubs:G})]})},CFt=({item:e,onRemoveClick:t,onDeleteClick:n,sidebarOpen:r})=>{const s=e.mode==="article",i=`/${s?"page":"search"}/${e.slug}`,l=jt(),{$t:c}=Z();return o.jsx(Ls,{id:`SIDEBAR_BOOKMARK_${e.uuid}`,href:i,text:e.title||e.slug,fadeOut:!0,selected:i===l,sidebarOpen:r,testId:`thread-title-${e.title||e.slug}`,menuItems:[{text:c({defaultMessage:"Remove Bookmark",id:"RokVj/Gv4U"}),icon:b9e,onClick:u=>{u.stopPropagation(),t(e)},type:"default"},{text:c({defaultMessage:"Delete {item}",id:"rdK9AWns19"},{item:s?"Page":"Thread"}),icon:vd,onClick:u=>{u.stopPropagation(),n(e)},type:"default"}]})},xW=I.memo(({showAvatar:e,showCreatorLabel:t,showEdit:n,isCurrentUser:r=!0,textClassName:s="",textColor:a,textVariant:i="smallBold",username:l,image:c,anon:u,avatarSize:d="small",isAlwaysEditing:m=!1,onButtonClick:p=kn,className:h})=>{const{$t:g}=Z(),{update:y}=Et(),{session:v}=Et(),[x,b]=I.useState(m),[_,w]=I.useState(l??(r?v?.user?.username:"Anonymous")),[C,S]=I.useState(),{isMobileUserAgent:E}=xe(),M=async()=>fetch("/api/user",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:_})}),{mutate:k,isPending:A}=vt({mutationFn:M,onSuccess:N=>{N.json().then(T=>{if(N.status!==200){S(T.message);return}b(!1),S(void 0),y(),p()})}});f.useEffect(()=>{w(l??(r?v?.user?.username:"Anonymous"))},[l,r,v?.user?.username]);const R=f.useCallback(()=>b(!0),[]),O=f.useCallback(()=>k(),[k]),L=f.useCallback(()=>{w(v?.user?.username??""),m||b(!1),p()},[m,p,v?.user?.username]),P=f.useMemo(()=>v?o.jsxs("div",{className:"ml-sm mt-sm gap-x-sm flex items-center",children:[o.jsx(he,{text:g({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:_===v.user.username||_===""||A?"common":"primary",size:"small",disabled:_===v.user.username||_===""||A,onClick:O}),o.jsx(he,{text:g({defaultMessage:"Cancel",id:"47FYwba+bI"}),size:"small",disabled:A,onClick:L})]}):null,[g,L,O,A,v,_]);return o.jsxs("div",{className:B("gap-x-xs relative flex items-center",h),children:[e&&o.jsx(wt,{size:d,anon:u,user:c??(r?v?.user.image??void 0:void 0)}),x?o.jsx(Pr,{isMobileUserAgent:E,value:_,disabled:A,errorText:C??(_===""?g({id:"ekGO8lFf3J",defaultMessage:"Username cannot be empty"}):""),onChange:w,className:"md:min-w-[300px]",inlineEditBlock:P,errorPlacement:Zf.LABEL,wrapperClassName:"w-full",pill:!1}):o.jsx(D,{variant:i,color:a,className:B("line-clamp-1 break-all",s),children:u?"Anonymous":_}),t&&o.jsx(H,{variant:"subtler",className:"px-sm py-xs rounded-full",children:o.jsx(D,{variant:"tiny",color:"light",className:s,children:g({id:"tWkQ2JF/jQ",defaultMessage:"Author"})})}),n&&!x&&o.jsx(Te,{pill:!0,size:"small",icon:vu,onClick:R})]})});xW.displayName="Username";const zTe=({session:e,onClick:t})=>{const n="sidebar-incognito-menu",{$t:r}=Z(),{isIncognito:s,incognitoType:a}=Ra({reason:n}),{actions:i}=hn(),{hasAccessToProFeatures:l,isPro:c,isMax:u}=_t(),d=f.useCallback(()=>{i.setIsIncognito(!1),t()},[i,t]),m=f.useCallback(()=>{i.setIsIncognito(!0),t()},[i,t]);return o.jsxs("div",{className:"flex flex-col items-stretch",children:[o.jsx(kae,{onClick:d,icon:o.jsx("div",{className:`relative inline-flex ${l?"-top-two":""}`,children:o.jsx(wt,{size:"medium",user:e?.user?.image,showProBadge:c,showMaxBadge:u,className:"!text-inverse",showBackground:!1})}),label:o.jsx("div",{className:"gap-sm flex items-center",children:o.jsx(xW,{username:e?.user?.username})}),selected:!s},"user"),o.jsx(kae,{onClick:m,icon:o.jsx(Xd,{inverse:!0,incognitoType:a}),label:a===kd.GOVERNMENT?o.jsxs("div",{className:"flex flex-col items-start",children:[o.jsx(D,{variant:"smallBold",children:r({defaultMessage:"Government",id:"bh4rlKfcgE"})}),o.jsx(D,{variant:"micro",color:"light",children:r({defaultMessage:"Zero Data Usage",id:"JHS3rmaYsL"})})]}):r({defaultMessage:"Incognito",id:"Sp8UUpZ0at"}),selected:s,showTooltip:!0,incognitoType:a},"incognito")]})},kae=({onClick:e,label:t,selected:n,icon:r,showTooltip:s,incognitoType:a})=>{const{$t:i}=Z(),{isGovernmentRequestOrigin:l}=Zr(),{device:{isMacOS:c}}=At();return o.jsxs(H,{as:"button",bgHover:"subtler",className:"gap-sm p-sm pr-md flex items-center rounded-md active:scale-[.98]",onClick:e,children:[r,typeof t=="string"?o.jsx(D,{variant:"smallBold",children:t}):t,o.jsx("div",{className:"flex-1"}),n?o.jsx("span",{className:"text-super",children:o.jsx(ce,{icon:Sr,size:"sm"})}):s&&o.jsx(bn,{className:"max-w-[280px]",tooltipText:a===kd.GOVERNMENT?i({defaultMessage:"Zero Data Usage active",id:"9i8r+oh3pt"}):i({defaultMessage:"Create anonymous threads that don't appear in your library and expire after 24 hours.",id:"BBjMWPmxC0"}),keyboardShortcut:l?void 0:c?["",";"]:["ctrl",";"],tooltipLayout:"right",asChild:!0,children:o.jsx(D,{color:"light",className:"opacity-50 duration-150 hover:opacity-100",children:o.jsx(ce,{icon:Nie,size:"sm"})})})]})},GTe=I.memo(({backgroundVariant:e="subtler"})=>o.jsx(H,{variant:e,className:"inline-flex h-5 items-center rounded px-[6px] py-px",children:o.jsx(D,{color:"light",variant:"micro",className:"translate-y-half uppercase tracking-wider",children:o.jsx(pe,{defaultMessage:"Beta",id:"riw/yc06Nq"})})}));GTe.displayName="BetaBadge";const qTe=I.memo(()=>o.jsx("div",{className:"bg-super dark inline-flex h-5 items-center justify-center rounded px-[6px] py-px",children:o.jsx(D,{color:"white",variant:"tinyRegular",children:o.jsx(pe,{defaultMessage:"New",id:"bW7B87wFFp"})})}));qTe.displayName="NewBadge";const SFt=(e,t)=>{const{value:n,loading:r}=It({flag:"new-memory-v2-overview-page",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},gsn=({children:e,card:t=!0,title:n,id:r})=>o.jsxs("div",{id:r,children:[n&&o.jsx(D,{variant:"baseSemi",className:"pl-sm",children:n}),o.jsx(H,{variant:t?"subtler":void 0,className:B("mb-lg mt-sm divide-y",{"px-md py-sm rounded-lg":t}),children:e})]}),EFt=({children:e,title:t,noPadding:n=!1,subTitle:r,cta:s,titleAccessory:a})=>o.jsxs("div",{className:"pb-md flex flex-col",children:[o.jsx(H,{className:"pb-md flex flex-col gap-1 border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(D,{variant:"baseSemi",children:t}),a]}),r&&o.jsx(D,{variant:"tinyRegular",color:"light",children:r})]}),s&&s]})}),o.jsx("div",{className:B("gap-md flex flex-col",{"py-md":!n}),children:e})]}),uI=({label:e,value:t,valueColor:n="light",cta:r,shouldWrapInMobile:s=!0})=>o.jsxs("div",{className:B("gap-md flex justify-between sm:flex-row sm:flex-nowrap sm:items-center",s&&"flex-col flex-wrap"),children:[o.jsxs("div",{children:[e&&o.jsx(D,{variant:"small",children:e}),t&&o.jsx(D,{variant:"tinyRegular",color:n,children:t})]}),o.jsx("div",{children:r})]}),MFt={memory_enabled:!1,conversation_history_enabled:!1,citations_enabled:!1},kFt=()=>{const{value:e}=It({flag:"memory-search-beta",defaultValue:!1,subjectType:"user_nextauth_id"});return e},KTe=({reason:e})=>{const{isEnterprise:t}=_n({reason:e}),{value:n,loading:r}=It({flag:"memory-experiment",defaultValue:!1,extraAttributes:{isEnterprise:t??!1},subjectType:"user_nextauth_id"}),{value:s,loading:a}=Su({flag:"memory-search-history",defaultValue:MFt,extraAttributes:{isEnterprise:t??!1,dependent_flag:"memory-experiment",variation_served:n},subjectType:"user_nextauth_id"});return a||r?!1:"memory_enabled"in s&&"conversation_history_enabled"in s&&"citations_enabled"in s?s?.memory_enabled&&s?.conversation_history_enabled&&s?.citations_enabled:!1},ysn=()=>{const e="personal-search-settings-main",t=kFt(),{$t:n}=Z(),r=ht(),s=Xxe({reason:e}),{openModal:a}=xt(),{trackEvent:i}=Ne(),l=Nt(),c=gt(),{session:u}=Et(),{variation:d}=SFt(!1,{userEmail:u?.user?.email??""});f.useEffect(()=>{l?.get("modal")==="memory"&&a("memoryListModal",{isMemoryEnabled:!0})},[]);const{mutate:m,isPending:p}=vt({mutationFn:b=>rY({type:"memory",value:b,reason:e}),onSuccess:b=>{b&&r.setQueryData(aP(),b)}}),{mutate:h,isPending:g}=vt({mutationFn:b=>rY({type:"searchHistory",value:b,reason:e}),onSuccess:b=>{b&&r.setQueryData(aP(),b)}}),y=f.useCallback(b=>{m(b),i("toggle memory",{memoryToggleState:b?"on":"off"})},[m,i]),v=f.useCallback(b=>{h(b),i("toggle search history",{searchHistoryToggleState:b?"on":"off"})},[h,i]),x=f.useCallback(()=>{d?c.push("/account/personalize/memories"):(i("viewed memory list modal"),a("memoryListModal",{isMemoryEnabled:!0}))},[d,a,c,i]);return o.jsxs(EFt,{title:n({defaultMessage:"Memory",id:"dVx3yznM2C"}),titleAccessory:t?o.jsx(GTe,{}):o.jsx(qTe,{}),children:[o.jsx(uI,{label:n({defaultMessage:"Reference search library",id:"SwsY8rd34h"}),value:n({defaultMessage:"Let Perplexity use previous searches when answering.",id:"ex3azVKEwb"}),cta:o.jsx(Ro,{active:s.use_search_history===null?!0:s.use_search_history??!1,onChange:v,disabled:g})}),o.jsx(uI,{label:n({defaultMessage:"Reference saved memories",id:"jT78QtuUtA"}),value:o.jsx("div",{className:"flex flex-col",children:o.jsx(D,{className:"inline",variant:"tinyRegular",color:"light",children:o.jsx(pe,{defaultMessage:"Let Perplexity save and use memories when answering. Incognito searches are never stored. ",id:"B53ddA1KtU"})})}),cta:o.jsx(Ro,{active:s.use_memory??!1,onChange:y,disabled:p})}),o.jsx(uI,{label:o.jsx("div",{className:"gap-sm flex items-center",children:o.jsx(D,{variant:"small",children:n({defaultMessage:"Edit your saved memories",id:"xuzqKrNHGC"})})}),cta:o.jsx(he,{extraCSS:"w-fit",variant:"border",size:"small",text:n({defaultMessage:"Manage",id:"0AzlrbMWV9"}),trailingComponent:o.jsx(Kn,{size:16}),onClick:x})})]})},Ko="default",YTe=({trigger:e,popoverPlacement:t="top-start"})=>{const[n,r]=f.useState(!1),s=rt(),a=M_(),{isMaxUpsellEnabled:i}=Eu(),l=KTe({reason:"sidebar-bottom-popover"}),c=Ho(),u=f.useRef(JD().sidebar),{openVisitorLoginUpsell:d}=ur({enabled:!s}),{device:{isWindowsApp:m}}=At(),{isGovernmentRequestOrigin:p}=Zr(),h=P0e(),{isEnterpriseMax:g}=_t(),{$t:y}=Z(),v=wP(),[x,b]=f.useState(m),[_,w]=f.useState(!1),{keysRequiringRerender:C,removeKeyRequiringRerender:S}=Wd(),E=l&&!u.current&&ope(),M=fXe(),{variation:k,loading:A}=op(!1);f.useEffect(()=>{!u.current&&n&&dXe("sidebar",!0)},[n]);const R=f.useMemo(()=>[{icon:HH,show:!0,text:y({defaultMessage:"Account",id:"TwyMauNL3r"}),type:Ko,href:Xt.Account.href,target:"_self",testId:"sidebar-my-account"},{icon:KI,show:!0,text:y({defaultMessage:"Preferences",id:"PCSt5TwTnx"}),type:Ko,href:Xt.Preferences.href,target:"_self",testId:"sidebar-preferences"},{icon:_9e,show:!0,text:y({defaultMessage:"Personalization",id:"FAejG+JVWn"}),type:Ko,href:Xt.Personalize.href,target:"_self",testId:"sidebar-personalize",...E&&{rightElement:o.jsx(ce,{icon:zH,color:"currentColor",className:"text-super"})}},{icon:Jg,show:!0,text:y({defaultMessage:"Assistant",id:"wSAvhubuX6"}),type:Ko,href:Xt.Assistant.href,target:"_self",testId:"sidebar-assistant"},{icon:G7,show:a,text:y({defaultMessage:"Shortcuts",id:"7FAwwkYilD"}),type:Ko,href:Xt.Shortcuts.href,target:"_self",testId:"sidebar-shortcuts"},{icon:Yh,text:y(k?{defaultMessage:"Automations",id:"ORNSnD2XJb"}:{defaultMessage:"Tasks",id:"yhU1etXT1A"}),type:Ko,href:Xt.Tasks.href,target:"_self",testId:"sidebar-tasks",...!M&&{rightElement:o.jsx(ce,{icon:zH,color:"currentColor",className:"text-super"})}},{icon:xb,show:!0,text:y({defaultMessage:"Notifications",id:"NAidKbB0vi"}),type:Ko,href:Xt.Notifications.href,target:"_self",testId:"sidebar-notifications"},{icon:qM,show:!0,text:y({defaultMessage:"Connectors",id:"2mMJRvsAg1"}),type:Ko,href:Xt.Connectors.href,target:"_self",testId:"sidebar-connectors"},{icon:w9e,show:!0,text:y({defaultMessage:"API",id:"xwEc8KM8zK"}),type:Ko,href:Xt.API.href,target:"_self",testId:"sidebar-api"},{icon:C9e,show:!0,text:y({defaultMessage:"Pro Perks",id:"x69637XBwS"}),type:Ko,href:Xt.ProPerks.href,target:"_self",testId:"sidebar-pro-perks"},{icon:rle,show:!0,text:y({defaultMessage:"All settings",id:"IzEySeOy5/"}),type:Ko,href:Xt.Account.href,target:"_self",testId:"sidebar-settings"},{type:"separator",show:i&&!g,className:"!border-b-subtlest !border-b !-mx-1 mb-1"},{icon:S9e,show:i&&!g,text:y({defaultMessage:"View plans",id:"EaucLAoHiC"}),type:Ko,onClick:()=>{c({origin:Oe.SIDEBAR_BOTTOM_POPOVER,pitchMessage:{title:y({defaultMessage:"Select your plan",id:"kujKpiV0z4"})}})},testId:"sidebar-view-plans"}],[y,E,a,k,M,i,c,g]);f.useEffect(()=>{C.includes("sidebar-sign-in-button")&&b(!0),S("sidebar-sign-in-button")},[S,C]),f.useEffect(()=>{v||b(!0)},[v]),f.useEffect(()=>{!h&&p&&b(!0)},[h,p]),f.useEffect(()=>{requestAnimationFrame(()=>{w(!0)})},[]);const{trackEvent:O}=Ne();return!s&&!x||A?null:s?o.jsx(Jt,{placement:t,items:R,footer:o.jsx(TFt,{handleClick:()=>r(!1)}),isMobileStyle:!1,isOpen:n,onOpen:()=>r(!0),onClose:()=>r(!1),menuItemClassName:"gap-md",wrapperClassName:"inline-flex",children:o.jsx("div",{onClick:()=>r(!n),className:"inline-flex w-full","data-testid":"sidebar-popover-trigger-signed-in",children:e(n)})}):o.jsx("div",{className:"relative inline-flex justify-center duration-150 hover:opacity-80",children:o.jsxs(ge.button,{initial:_?{opacity:0,scale:.5}:void 0,animate:_?{opacity:1,scale:1}:void 0,className:"inline-flex appearance-none flex-col items-center justify-center",onClick:()=>{O("sidebar sign in button clicked"),d({origin:Oe.SIGNUP_BUTTON})},children:[o.jsx("div",{className:"p-1",children:o.jsx(H,{variant:"super",className:"flex size-8 items-center justify-center rounded-full",children:o.jsx(HH,{className:"text-inverse size-5"})})}),o.jsx(D,{variant:"tinyRegular",className:"text-center",color:"super",children:y({defaultMessage:"Sign In",id:"Ub+AGcdPg6"})})]})})},TFt=({handleClick:e})=>{const{session:t}=Et();return o.jsx("div",{className:"border-subtlest w-full border-t pt-1",children:t&&o.jsx(zTe,{session:t,onClick:e})})},QTe=({showBottomLabels:e})=>{const t="sidebar-v2-account-menu",{$t:n}=Z(),{isIncognito:r,incognitoType:s}=Ra({reason:t}),{session:a}=Et(),{isPro:i,isMax:l,hasAccessToProFeatures:c}=_t(),u=KTe({reason:t}),d=JD().sidebar,m=u&&!d&&ope(),p=f.useCallback(h=>o.jsx(bn,{showTooltip:!!a?.user?.username&&!e,tooltipText:n({defaultMessage:"Account & Settings",id:"zWaEuojd3m"}),tooltipLayout:"right",arrowClassName:" ",delayDuration:0,offset:-2,asChild:!0,children:o.jsxs("div",{className:"gap-xs group flex w-full cursor-pointer flex-col items-center",children:[o.jsxs("div",{className:"duration-quick relative select-none group-hover:opacity-80",children:[r?o.jsx(Xd,{inverse:!0,incognitoType:s}):o.jsx(wt,{size:"medium",showProBadge:i,showMaxBadge:l,badgeProps:{show:m,className:"bg-super border-subtlest"},user:a?.user?.image}),o.jsx(Dn,{className:B("text-quietest group-hover:text-quiet duration-quick absolute right-0 top-1/2 size-3 -translate-y-1/2 translate-x-[calc(100%+2px)]",{"!text-quiet -translate-y-[calc(50%-2px)]":h})})]}),e&&o.jsx(D,{variant:"micro",color:"light",className:B("px-xs w-full truncate text-center",{"mt-two":c}),children:n({defaultMessage:"Account",id:"TwyMauNL3r"})})]})}),[e,a?.user?.username,n,r,i,l,a?.user?.image,m,c,s]);return o.jsx(YTe,{trigger:p})};QTe.displayName="SidebarAccountMenu";const Tae="#FF3B30",jT=I.memo(({variant:e})=>e==="iconOnly"?o.jsx("div",{className:"bg-base from-subtler to-subtler p-two absolute -right-2.5 -top-2.5 rounded-full bg-gradient-to-r",children:o.jsx("div",{className:"size-2 rounded-full",style:{backgroundColor:Tae}})}):o.jsx("div",{className:"absolute -right-1 -top-1 size-2 rounded-full",style:{backgroundColor:Tae}}));jT.displayName="NotificationBadge";const bW=I.memo(({text:e,variant:t})=>{const{openModal:n}=xt(),{trackEvent:r}=Ne(),[s,a]=f.useState(!1),i=w7();f.useEffect(()=>{a(i>5&&!Kh())},[i]);const l=f.useCallback(()=>{PM(),r("homepage footer download menu opened",{}),n("platformOptionsModal")},[n,r]),c=f.useMemo(()=>o.jsxs("div",{className:"relative ml-auto",children:[o.jsx(ce,{icon:mb,className:"size-4"}),s&&o.jsx(jT,{variant:t})]}),[s,t]);return o.jsx(he,{size:"small",text:t==="iconOnly"?void 0:e,trailingComponent:c,pill:t==="iconOnly",fullWidth:t!=="iconOnly",onClick:l})});bW.displayName="SideDownloadPrompt";const NFt=()=>{const{$t:e}=Z();return o.jsx(bn,{tooltipText:e({defaultMessage:"Download",id:"5q3qC0sC3r"}),className:"inline-flex",tooltipLayout:"right",asChild:!0,children:o.jsxs("div",{className:"gap-xs flex flex-col items-center [@media(max-height:680px)]:hidden",children:[o.jsx(bW,{variant:"iconOnly"}),o.jsx(D,{variant:"micro",color:"light",className:"px-xs w-full truncate text-center",children:e({defaultMessage:"Install",id:"ubmFc8rrea"})})]})})},XTe=()=>{const e="sidebar-v2-enterprise-menu",{$t:t}=Z(),{organization:n}=_n({reason:e}),r=Cu();return o.jsx(bn,{tooltipText:n?.display_name,tooltipLayout:"right",arrowClassName:" ",delayDuration:0,offset:-2,asChild:!0,children:o.jsx(Ge,{href:`${r}/org`,className:"duration-quick flex select-none justify-center hover:opacity-80",children:n?.logo?o.jsx(wt,{size:"medium",user:n?.logo,altText:"Logo"}):o.jsx(he,{ariaLabel:t({defaultMessage:"Organization settings",id:"8JjaslSBQx"}),icon:yu,pill:!0,size:"small",variant:"inverted"})})})};XTe.displayName="SidebarV2EnterpriseMenu";const jFt="gov_free_year",dI="gov",AFt=()=>{const e="sidebar-gov-badge",{isGovernmentRequestOrigin:t}=Zr(),{$t:n}=Z(),r=rt(),{hasAccessToProFeatures:s}=_t(),a=N0e({reason:e}),i=gt(),[l,c]=f.useState(!1),[u,d]=f.useState(!1),{shouldShow:m}=h$({cueKey:"gov-badge",impressionsLimit:3,enabled:!0}),h=a.campaignId===jFt&&!s,g=r&&h,y=m&&!l?!0:void 0,v=f.useCallback(()=>{c(!0)},[]),x=f.useCallback(async()=>{if(!u){d(!0);try{const b=await g0e({reason:"sidebar-gov-badge-activation"});if(b?.status==="success")i.push(`/join/p/${dI}/welcome`);else{const _=b?.error_code||"UNKNOWN_ERROR";i.push(`/join/p/${dI}?error=${_}`)}}catch{i.push(`/join/p/${dI}?error=UNKNOWN_ERROR`)}finally{d(!1)}}},[i,u]);return t?o.jsx($o,{hoverOpen:y?void 0:!0,isOpen:y,onClose:v,sideOffset:5,forceDarkMode:!0,content:o.jsxs("div",{className:"gap-md p-sm max-w-sideBarWidthXL flex flex-col",children:[o.jsx("img",{src:"/static/images/us-gov.png",alt:"GOV",className:"h-14 w-full rounded-md object-cover"}),o.jsxs("div",{children:[o.jsx(D,{variant:"baseSemi",className:"mb-1 leading-tight",children:n({defaultMessage:"Thank you for your service!",id:"VZuM94AjHT"})}),o.jsx(D,{variant:"small",className:"leading-snug",color:"light",children:n(g?{defaultMessage:"Government users get Pro, premium models, and zero data usage.",id:"RgHwMywuQP"}:r?{defaultMessage:"Government users get premium models and zero data usage.",id:"FacxoKMcak"}:{defaultMessage:"Government visitors get premium models and zero data usage.",id:"gG23ZhCcKn"})})]}),o.jsxs("div",{className:"gap-sm flex flex-col",children:[g&&o.jsx(he,{variant:"primary",size:"small",text:n(u?{defaultMessage:"Activating...",id:"Hg2ZHpJ5KZ"}:{defaultMessage:"Activate Pro",id:"MCY2gI+lUl"}),onClick:x,disabled:u}),o.jsx(he,{variant:"common",size:"small",text:n({defaultMessage:"Learn more",id:"TdTXXf940t"}),onClick:()=>window.open("https://www.perplexity.ai/hub/blog/introducing-perplexity-for-government","_blank")})]})]}),arrowClassName:"!fill-inverse [&>path:last-of-type]:stroke-borderMain/50",placement:"right",childrenClassName:"inline-flex mt-sm items-center justify-center",children:o.jsxs(H,{variant:"textColor",className:"px-sm gap-xs ring-subtlest relative flex cursor-pointer items-center justify-center rounded py-1 ring-1",children:[o.jsx(Cg,{countryCode:"US",className:"relative w-3.5"}),o.jsx(D,{variant:"tiny",color:"defaultInverted",className:"-translate-y-half relative !font-mono",children:"GOV"})]})}):null},ZTe=f.memo(({isOpen:e,children:t,title:n,onPin:r,pinned:s,canPin:a,onMouseEnter:i,onMouseLeave:l,accessory:c,actions:u,appContentWrapperRef:d})=>{const{$t:m}=Z(),p=f.useMemo(()=>Xg(g=>{d.current?.contains(g.target)&&(window.removeEventListener("mousemove",p),e&&l())},100,{leading:!0,trailing:!0}),[l,d,e]);f.useEffect(()=>{e&&!s?window.addEventListener("mousemove",p):window.removeEventListener("mousemove",p)},[e,s,p]),Hd(()=>{window.removeEventListener("mousemove",p)});const h=Py();return o.jsx("div",{className:"group/sidebar-menu pointer-events-none absolute inset-y-0 start-0 overflow-hidden ltr:-translate-x-px rtl:translate-x-px",style:{width:aE+(s?0:16)+ih},children:o.jsxs(H,{className:B("inset-y-0 border-transparent duration-100 dark:border-transparent","end-md absolute start-0 flex flex-col border-e pe-[20px]",{"erp-tab:pt-two pt-[10px]":s,"ease-inCubic pointer-events-none opacity-0 ltr:-translate-x-[4%] rtl:translate-x-[4%]":!e&&!s,"!border-subtlest ease-outCubic shadow-xl":e&&!s,"pointer-events-auto":e||s}),variant:"underlay",onMouseEnter:i,onMouseLeave:l,style:{paddingLeft:h?void 0:ih+12,paddingRight:h?ih+12:void 0,width:aE+ih},children:[!s&&e&&o.jsx("div",{className:"absolute inset-y-0 -end-[24px] start-0"}),o.jsxs(H,{className:"group/sidebar-menu-header relative mb-[12px] flex min-h-0 items-center justify-between border-b py-[12px]",children:[u&&e?o.jsx(Jt,{items:u,isMobileStyle:!1,placement:"bottom-start",children:o.jsxs(D,{variant:"smallBold",className:"group relative cursor-pointer select-none",children:[o.jsx("span",{className:"bg-subtle -inset-x-sm -inset-y-xs absolute rounded-md opacity-0 duration-100 group-hover:opacity-100"}),o.jsxs("span",{className:"gap-xs relative flex items-center",children:[n,o.jsx(Dn,{className:"text-quietest group-hover:text-quiet size-4 opacity-0 duration-100 group-hover/sidebar-menu-header:opacity-100"})]})]})}):o.jsx(D,{variant:"smallBold",children:n}),o.jsxs("div",{className:"flex min-h-[24px] items-center",children:[o.jsx(Ke,{initial:!1,children:c&&o.jsx(ge.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"inline-flex",children:c})}),a&&o.jsx(Te,{size:"tiny",icon:s?E9e:M9e,onClick:r,extraCSS:"!-me-sm",toolTip:m(s?{defaultMessage:"Unpin Sidebar",id:"0ms2vDE7D8"}:{defaultMessage:"Pin Sidebar",id:"rPlnyNxMsY"}),tooltipLayout:"bottom",testId:"sidebar-pin-sidebar"})]})]}),o.jsx(Ke,{initial:!1,mode:"popLayout",children:o.jsx(ge.div,{initial:{opacity:0,x:h?10:-10},animate:{opacity:1,x:0},exit:{opacity:0},transition:{duration:.1,ease:rn},className:"relative flex min-h-0 flex-1 flex-col",children:o.jsx("div",{className:"scrollbar-subtle mx-[-12px] mt-[-12px] flex min-h-0 flex-1 overflow-y-auto overflow-x-hidden p-[12px]",children:o.jsx("div",{className:"w-full",children:t})})},n)})]})})});ZTe.displayName="SidebarMenu";const IFt=(e,t)=>{const{value:n,loading:r}=It({flag:"app-notifications-polling",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},RFt=Gqe(5),JTe=({reason:e})=>{const{variation:t}=IFt(!1),n=We({queryKey:$Xe(),queryFn:async()=>(await se.GET("/rest/notifications/in-app/unread-count",e)).data.unread_count,staleTime:1e3*60*5,refetchInterval:()=>t?RFt:!1});return f.useMemo(()=>{const{data:r,...s}=n;return{count:r??0,...s}},[n])},PFt=e=>typeof e=="object"&&e!==null&&"pages"in e&&Array.isArray(e.pages)&&e.pages.every(t=>"has_more"in t&&typeof t.has_more=="boolean"&&"next_cursor"in t&&(typeof t.next_cursor=="string"||t.next_cursor===null)&&"notifications"in t&&Array.isArray(t.notifications)&&t.notifications.every(n=>typeof n=="object"&&n!==null&&"notification_id"in n&&typeof n.notification_id=="string"&&"type"in n&&typeof n.type=="string"&&"is_read"in n&&typeof n.is_read=="boolean")),OFt=({enabled:e=!0,reason:t})=>{const n=xu({enabled:e,queryKey:Ku(),queryFn:async({pageParam:h})=>(await se.GET("/rest/notifications/in-app",t,{params:{query:{cursor:h}}})).data,getNextPageParam:h=>!h||h.notifications.length===0?null:h.next_cursor,initialPageParam:""}),{data:r,error:s,isError:a,refetch:i,isLoading:l,isFetching:c,hasNextPage:u,fetchNextPage:d,isFetchingNextPage:m}=n,p=f.useMemo(()=>r?.pages.flatMap(h=>h?.notifications??[])??[],[r]);return f.useMemo(()=>({refetch:i,error:s,isError:a,isLoading:l,isFetching:c,fetchNextPage:d,isFetchingNextPage:m,hasNextPage:u,notifications:p}),[i,s,a,p,u,d,m,l,c])};function AT({reason:e}){const t=ht(),n=vt({mutationFn:i=>se.POST("/rest/notifications/in-app/bulk-read",e,{body:{notification_ids:i?.notificationIds}}),onMutate:()=>{t.setQueryData(Ku(),i=>PFt(i)?{...i,pages:i?.pages.map(l=>({...l,notifications:l.notifications.map(c=>({...c,is_read:!0}))}))}:i)},onSuccess:()=>{t.invalidateQueries({queryKey:Ku()})}}),r=vt({mutationFn:i=>se.POST("/rest/notifications/in-app/{notification_id}/read",e,{params:{path:{notification_id:i.notificationId}}}),onSuccess:()=>{t.invalidateQueries({queryKey:Ku()})}}),s=vt({mutationFn:i=>se.DELETE("/rest/notifications/in-app/bulk-delete",e,{body:{notification_ids:[i.notificationId]}}),onSuccess:()=>{t.invalidateQueries({queryKey:Ku()})}}),a=vt({mutationFn:()=>se.DELETE("/rest/notifications/in-app/read",e),onSuccess:()=>{t.invalidateQueries({queryKey:Ku()})}});return f.useMemo(()=>({markAllAsRead:n,markAsRead:r,markAsDeleted:s,markAllReadAsDeleted:a}),[n,r,s,a])}const e4e=Wt("SidebarNotificationsContext",null),LFt=({children:e})=>{const t="sidebar-notifications-provider",{openModal:n}=xt(),[r,s]=f.useState(!1),[a,i]=f.useState(null),[l,c]=f.useState(null),{markAllAsRead:u}=AT({reason:t}),d=f.useMemo(()=>a===null&&l===null,[a,l]),m=f.useCallback(v=>l===v,[l]),p=f.useCallback(()=>{s(!0)},[]),h=f.useCallback(()=>{d&&(s(!1),u.mutate())},[d,u]),g=f.useCallback(()=>{s(!r)},[r]),y=f.useCallback((v,x)=>{i(v),n(v,{...x,onClose:(...b)=>{x?.onClose?.(...b),i(null)}})},[n]);return o.jsx(e4e.Provider,{value:{isOpen:r,isMenuOpen:m,setOpenMenu:c,open:p,close:h,toggle:g,openModal:y},children:e})},Au=()=>{const e=f.useContext(e4e);if(!e)throw new Error("useSidebarNotifications must be used within a SidebarNotificationsProvider");return e},t4e=({visible:e})=>e?o.jsx(H,{variant:"underlay",className:"p-two rounded-full",children:o.jsx(H,{variant:"super",className:B("group-hover:ring-subtlest pointer-events-none size-2 rounded-full opacity-0 ring-2 ring-transparent transition-opacity duration-300",{"opacity-100":e})})}):null,n4e=()=>{const{$t:e}=Z(),{trackEvent:t}=Ne(),{toggle:n,isOpen:r}=Au(),{count:s}=JTe({reason:"SidebarNotificationsButton"}),a=f.useCallback(()=>{r||t("inbox opened",{unreadCount:s}),n()},[r,t,s,n]);return o.jsx("div",{className:"-mb-xs flex w-full flex-col items-center justify-center",children:o.jsx("div",{className:"flex flex-col items-center justify-center",children:o.jsx(bn,{tooltipText:e({defaultMessage:"Notifications",id:"NAidKbB0vi"}),tooltipLayout:"right",arrowClassName:" ",delayDuration:0,offset:16,asChild:!0,children:o.jsxs("div",{className:"group relative size-9 rounded-full",children:[o.jsx(Te,{icon:mie,onClick:a,pill:!0,extraCSS:"!size-full",testId:"sidebar-new-thread",size:"large"}),o.jsx(r4e,{})]})})})})};n4e.displayName="SidebarNotificationsButton";const r4e=()=>{const{count:e,refetch:t}=JTe({reason:"SidebarNotificationsButtonCounter"}),{isOpen:n}=Au(),r=f.useRef(null),[s,a]=f.useState(null);return f.useEffect(()=>{if(n){a(!1),r.current&&clearTimeout(r.current);return}return a(i=>i===null?e>0:(r.current=setTimeout(()=>{a(e>0)},1e3),i)),()=>{r.current&&clearTimeout(r.current)}},[e,n]),f.useEffect(()=>{n&&t()},[n,t]),o.jsx("div",{className:"right-xs top-xs pointer-events-none absolute -translate-x-px translate-y-px",children:o.jsx(t4e,{visible:!!s})})};r4e.displayName="SidebarNotificationsButtonCounter";function FO({menuId:e,items:t,menu:n,children:r,onClose:s,onOpen:a}){const i=fa(),{isMenuOpen:l,setOpenMenu:c}=Au(),u=f.useCallback(()=>{c(e),a?.()},[e,c,a]),d=f.useCallback(()=>{l(e)&&c(null)},[e,c,l]);return f.useEffect(()=>{l(e)||s?.()},[l,e,s]),n?n({onOpen:u,onClose:d}):o.jsx(Jt,{isOpen:l(e),items:t??[],isMobileStyle:i,boxProps:{className:"shrink-0"},onOpen:u,onClose:d,children:r??o.jsx(Te,{size:"tiny",icon:xd})})}const DFt=e=>[e.deleteNotification],s4e=({notification:e,focused:t,onOpen:n,onClose:r,getMenuItems:s=DFt})=>{const{$t:a}=Z(),{markAsDeleted:i}=AT({reason:"SidebarNotificationsListItemMenu"}),l=f.useMemo(()=>({type:"default",text:a({defaultMessage:"Delete notification",id:"+Nk8iq3V1o"}),icon:vd,onClick:()=>{i.mutate({notificationId:e.notification_id})}}),[i,a,e.notification_id]),c=f.useMemo(()=>s({deleteNotification:l}),[s,l]);return o.jsx("div",{className:B("pointer-events-auto col-start-1 row-start-1 flex items-center justify-center justify-self-end opacity-0 group-hover/notification-list-item:opacity-100",{"opacity-100":t}),children:o.jsx(FO,{menuId:e.notification_id,items:c,onOpen:n,onClose:r})})};s4e.displayName="SidebarNotificationsListItemMenu";const FFt=(e,t)=>{const r=Date.now()-t,s=Math.floor(r/6e4),a=Math.floor(s/60);return s<1?e.formatNumber(1,{style:"unit",unit:"minute",unitDisplay:"narrow"}):s<60?e.formatNumber(s,{style:"unit",unit:"minute",unitDisplay:"narrow"}):LD(new Date(t))?e.formatNumber(a,{style:"unit",unit:"hour"}):Wqe(new Date(t))?e.formatDate(new Date(t),{month:"short",day:"numeric"}):e.formatDate(new Date(t),{year:"numeric",month:"short",day:"numeric"})},UFt=({notification:e,className:t,focused:n})=>{const r=Z(),s=f.useMemo(()=>FFt(r,e.created_at_ms),[r,e.created_at_ms]);return o.jsxs("div",{className:B("col-start-1 row-start-1 flex items-center justify-end gap-1 text-nowrap group-hover/notification-list-item:opacity-0",t,{"opacity-0":n}),children:[o.jsx(D,{variant:"tinyRegular",color:"light",children:s}),o.jsx(t4e,{visible:!e.is_read})]})},a0=({notification:e,getMenuItems:t,children:n})=>{const[r,s]=f.useState(!1),[a,i]=f.useState(!1),l=f.useCallback(()=>{s(!0)},[]),c=f.useCallback(()=>{s(!1)},[]);return o.jsxs(H,{variant:r||a?"subtler":"transparent",className:"group/notification-list-item grid grid-cols-[1fr_max-content] grid-rows-1 gap-2 rounded-lg p-2",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[o.jsx(a4e,{notification:e,className:"col-span-full row-start-1",children:n}),o.jsxs("div",{className:"col-start-2 row-start-1 grid grid-cols-1 grid-rows-1 items-center",children:[o.jsx(UFt,{notification:e,focused:r}),o.jsx(s4e,{notification:e,focused:r,getMenuItems:t,onOpen:l,onClose:c})]})]})};a0.displayName="SidebarNotificationsListItemContainer";const a4e=({notification:e,className:t,children:n})=>{const{close:r}=Au(),{trackEvent:s}=Ne(),{markAsRead:a}=AT({reason:"SidebarNotificationsListItemContainer"}),i=f.useCallback(c=>{s("inbox notification clicked",{notificationId:e.notification_id,notificationType:e.type,wasUnread:!e.is_read,deeplinkPath:e.deeplink_path||void 0}),!(c.metaKey||c.ctrlKey)&&e.deeplink_path&&r(),!e.is_read&&a.mutate({notificationId:e.notification_id})},[s,e.notification_id,e.type,e.is_read,e.deeplink_path,r,a]),l=f.useMemo(()=>B("grid gap-2 text-left grid-cols-subgrid",t),[t]);return e.deeplink_path?o.jsx(Ge,{href:e.deeplink_path,className:l,onClick:i,children:o.jsx("div",{className:"col-start-1 row-start-1 flex min-w-0 gap-2",children:n})}):o.jsx("button",{type:"button",className:l,onClick:i,children:o.jsx("div",{className:"col-start-1 row-start-1 flex min-w-0 gap-2",children:n})})};a4e.displayName="SidebarNotificationsListItemAction";const o0=({title:e})=>o.jsx(D,{variant:"small",className:"line-clamp-1 text-left",children:e});o0.displayName="SidebarNotificationsListItemTitle";const i0=({primaryIcon:e,secondaryIcon:t})=>o.jsxs("div",{className:"relative flex size-9 shrink-0 items-center",children:[o.jsx("div",{className:"bg-subtle flex size-8 items-center justify-center rounded-full",children:o.jsx(ce,{icon:e,size:"md"})}),o.jsx("div",{className:"bg-base absolute bottom-0 right-0 flex size-4 items-center justify-center rounded-full",children:o.jsx(ce,{icon:t,size:"xs"})})]});i0.displayName="SidebarNotificationsListItemIcon";const iw=({items:e})=>{const t=o.jsx("span",{className:"mx-1 inline-block size-0.5 shrink-0 -translate-y-0.5 bg-current"});return o.jsx(D,{variant:"tinyRegular",color:"light",className:"min-w-0 truncate",children:e.map((n,r)=>o.jsxs(f.Fragment,{children:[r>0&&t,n]},r))})};iw.displayName="SidebarNotificationsListItemMeta";const BFt=({notification:e})=>{const{$t:t}=Z(),{deprecatedOpenToast:n}=gn(),{openModal:r}=Au(),s=f.useCallback(a=>[{type:"default",text:t({defaultMessage:"Edit alert",id:"84mzvWHJ9O"}),icon:vu,onClick:async()=>{const l=await B3({taskId:e.metadata.task_id,reason:"SidebarNotificationsListItemFinanceAlert"});if(!l){n(t({defaultMessage:"Can not edit alert. Alert has been deleted.",id:"ZXF6i2Ca2v"}),"error");return}r("financeAlertModal",{task:l})}},a.deleteNotification],[t,e.metadata.task_id,r,n]);return o.jsxs(a0,{notification:e,getMenuItems:s,children:[o.jsx(i0,{primaryIcon:gb,secondaryIcon:xb}),o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[o.jsx(o0,{title:e.title}),o.jsx(iw,{items:[t({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),e.body]})]})]})},VFt=({notification:e})=>{const{$t:t}=Z(),{deprecatedOpenToast:n}=gn(),{openModal:r}=Au(),s=gt(),{variation:a,loading:i}=kT(!1),l=f.useMemo(()=>FD(e.metadata.model_preference)??le.DEFAULT,[e.metadata.model_preference]),c=Wfe(l),u=f.useCallback(async h=>{const g=await B3({taskId:e.metadata.task_id,reason:"SidebarNotificationsListItemFinanceAlert"});return g||(n(h,"error"),null)},[e.metadata.task_id,n]),d=f.useCallback(async()=>{const h=await u(t({defaultMessage:"Can not edit task. Task has been deleted.",id:"AsFehDyYGj"}));if(!h)return;const g=y=>{y==="updated"&&n(t({defaultMessage:"Task edited",id:"18F/N84T3b"}),"success",5,void 0,t({defaultMessage:"View Tasks",id:"L3nFsHqlqm"}),()=>s.push("/account/tasks"))};!i&&a?r("automationModal",{initial:h,source:"notifications_panel",initialConfiguration:ame({selectedTask:h}),onSuccess:g}):r("scheduledTaskModal",{initial:h,source:"notifications_panel",onSuccess:g})},[u,r,a,i,n,t,s]),m=f.useCallback(async()=>{const h=await u(t({defaultMessage:"Can not turn off task. Task has been deleted.",id:"GqnRiHY3AK"}));if(h)try{await $P({taskId:h.id,payload:{status:"PAUSED"},reason:"SidebarNotificationsListItemScheduledTaskComplete"}),n(t({defaultMessage:"Task paused",id:"Ryhxeg2OIZ"}),"success",5,void 0,t({defaultMessage:"View Tasks",id:"L3nFsHqlqm"}),()=>s.push("/account/tasks"))}catch(g){ne.error(g),n(t({defaultMessage:"Failed to turn off task",id:"0sPa5XFHCj"}),"error")}},[u,n,t,s]),p=f.useCallback(h=>{const g={type:"default",text:t({defaultMessage:"Turn off task",id:"+H7RughJHn"}),icon:k9e,onClick:m},y={type:"default",text:t({defaultMessage:"Edit task",id:"dsTLW1Kx6B"}),icon:vu,onClick:d};return[g,y,h.deleteNotification]},[t,m,d]);return o.jsxs(a0,{notification:e,getMenuItems:p,children:[o.jsx(i0,{primaryIcon:c,secondaryIcon:hb}),o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[o.jsx(o0,{title:e.title}),o.jsx(iw,{items:[t(ss[DD(l)].name),e.body]})]})]})},$Ft=({notification:e})=>{const{$t:t}=Z(),n=f.useMemo(()=>FD(e.metadata.model_preference)??le.DEFAULT,[e.metadata.model_preference]),r=f.useMemo(()=>DD(n),[n]),s=Wfe(n);return o.jsxs(a0,{notification:e,children:[o.jsx(i0,{primaryIcon:s,secondaryIcon:Sr}),o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[o.jsx(o0,{title:e.title}),o.jsx(iw,{items:[t(ss[r].name),e.body]})]})]})},o4e=({notification:e})=>{switch(e.type){case"SCHEDULED_TASK_COMPLETE":return o.jsx(VFt,{notification:e});case"THREAD_COMPLETE":return o.jsx($Ft,{notification:e});case"FINANCE_ALERT":return o.jsx(BFt,{notification:e});case"ORG_INVITATION":return o.jsx(i4e,{notification:e});default:return o.jsx(WFt,{notification:e})}},WFt=({notification:e})=>o.jsxs(a0,{notification:e,children:[o.jsx(i0,{primaryIcon:xb,secondaryIcon:Sr}),o.jsxs("div",{className:"flex flex-1 flex-col",children:[o.jsx(o0,{title:e.title}),o.jsx(D,{variant:"tiny",color:"light",className:"line-clamp-1",children:e.body})]})]});o4e.displayName="SidebarNotificationsListItem";const i4e=f.memo(({notification:e})=>{const{$t:t}=Z(),n=f.useCallback(s=>[{type:"default",text:t({defaultMessage:"View invite",id:"TDWT6zhMKG"}),icon:Jg,onClick:()=>{e.deeplink_path&&(window.location.href=e.deeplink_path)}},s.deleteNotification],[t,e.deeplink_path]),r=f.useMemo(()=>[e.body],[e.body]);return o.jsxs(a0,{notification:e,getMenuItems:n,children:[o.jsx(i0,{primaryIcon:yu,secondaryIcon:eu}),o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[o.jsx(o0,{title:e.title}),o.jsx(iw,{items:r})]})]})});i4e.displayName="SidebarNotificationsListItemOrgInvitation";const l4e=()=>{const{isOpen:e}=Au(),{notifications:t,refetch:n,isError:r,isLoading:s,isFetching:a,hasNextPage:i,fetchNextPage:l,isFetchingNextPage:c}=OFt({enabled:e,reason:"SidebarNotificationsList"}),u=ht(),{ref:d,isIntersecting:m}=Jge({threshold:.5});f.useEffect(()=>{m&&i&&!c&&l()},[m,i,c,l]);const p=f.useCallback(()=>{u.setQueryData(Ku(),h=>{if(!(!h||h.pages.length===0))return{pages:[h.pages[0]],pageParams:[h.pageParams[0]]}})},[u]);return f.useEffect(()=>{e&&(p(),n())},[e,p,n]),s||r&&a?o.jsx("div",{className:"flex items-center justify-center p-4",children:o.jsx($r,{size:16})}):r?o.jsx(zFt,{refetch:n}):t.length===0?o.jsx(HFt,{}):o.jsxs("div",{className:"scrollbar-subtle pt-xs overflow-y-auto",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[t.map(h=>o.jsx(o4e,{notification:h},h.notification_id)),c&&o.jsx("div",{className:"flex items-center justify-center",children:o.jsx($r,{size:16})})]}),o.jsx("div",{ref:d})]})};l4e.displayName="SidebarNotificationsList";const HFt=()=>{const{$t:e}=Z();return o.jsxs(D,{variant:"tinyRegular",color:"light",className:"flex flex-col items-center justify-center gap-2 p-4 opacity-70",children:[o.jsx(ce,{icon:T9e,size:"2xl"}),o.jsx("span",{className:"w-36 text-center",children:e({defaultMessage:"Your notifications will appear here",id:"byRgJ1ceG3"})})]})},zFt=({refetch:e})=>{const{$t:t}=Z();return o.jsxs(D,{variant:"tinyRegular",color:"light",className:"flex flex-col items-center justify-center gap-2 pb-4",children:[o.jsx(ce,{icon:sle,size:"2xl",className:"opacity-70"}),o.jsx("span",{className:"mb-2 w-40 text-center opacity-70",children:t({defaultMessage:"There was an error loading your notifications",id:"CSvXfEOB3Y"})}),o.jsx(he,{size:"small",variant:"border",text:t({defaultMessage:"Try again",id:"FazwRldA7z"}),onClick:()=>{e()}})]})};function GFt({source:e,onOpen:t,onClose:n,openModal:r,children:s}){const{$t:a}=Z(),i=fa(),{openModal:l}=xt(),{hasActiveSubscription:c}=_t(),{variation:u,loading:d}=kT(!1),{variation:m,loading:p}=xTe(!1),h=r??l,g=[{type:"default",text:a({defaultMessage:"Scheduled",id:"cXAlMRerxW"}),icon:Yh,onClick:()=>{!d&&u?h("automationModal",{source:e,initialConfiguration:V5(c)}):h("scheduledTaskModal",{source:e})}},{type:"default",text:a({defaultMessage:"Price alert",id:"XMapyUiPpV"}),icon:xb,onClick:()=>{!p&&m?h("automationModal",{source:e,initialConfiguration:ome()}):h("financeAlertModal",{})}}];return o.jsx(Jt,{items:g,isMobileStyle:i,boxProps:{className:"shrink-0"},onOpen:t,onClose:n,children:s??o.jsx(he,{variant:"border",size:"small",icon:ar})})}const qFt="notifications-panel-header-menu",KFt="notifications-panel-header-create-task-menu",c4e=()=>{const{$t:e}=Z(),{openModal:t}=Au(),{markAllReadAsDeleted:n}=AT({reason:"SidebarNotificationsPanelHeader"}),r=[{type:"default",text:e({defaultMessage:"Delete all read",id:"CpNQrgahgD"}),icon:vd,onClick:()=>{n.mutate()}}];return o.jsxs(H,{className:"gap-md px-sm pt-xs pb-sm -mx-xs flex items-center justify-between border-b",children:[o.jsx("div",{className:"ml-xs flex items-center gap-1",children:o.jsx(D,{variant:"smallBold",children:e({defaultMessage:"Notifications",id:"NAidKbB0vi"})})}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(FO,{menuId:qFt,items:r}),o.jsx(FO,{menuId:KFt,menu:({onOpen:s,onClose:a})=>o.jsx(GFt,{source:"notifications_panel",onOpen:s,onClose:a,openModal:t,children:o.jsx(Te,{size:"tiny",icon:Yh,toolTip:e({defaultMessage:"Schedule a notification",id:"7Zbhtucuv7"})})})})]})]})};c4e.displayName="SidebarNotificationsPanelHeader";const u4e=({ref:e})=>o.jsx("div",{ref:e,className:"group/sidebar-notifications max-h-[50vh] w-[400px]",children:o.jsxs("div",{className:"grid h-full grid-cols-1 grid-rows-[min-content_1fr]",children:[o.jsx(c4e,{}),o.jsx(l4e,{})]})});u4e.displayName="SidebarNotifications";const d4e=({ref:e})=>{const{variation:t,loading:n}=rTe(!1),r=rt(),{isOpen:s,close:a}=Au(),i=Py();return n||!t||!r?null:o.jsx("div",{className:"relative flex flex-col items-center justify-center",children:o.jsx($o,{isOpen:s,onClose:a,placement:i?"top-end":"top-start",content:o.jsx(u4e,{ref:e}),contentClassName:"inline-flex",childrenClassName:"inline-flex w-full",sideOffset:5,children:o.jsx(n4e,{})})})};d4e.displayName="SidebarNotifications";const f4e=f.memo(({icon:e,selected:t,hovered:n,iconSize:r=24,showBadge:s=!1,className:a})=>o.jsxs(H,{className:"grid size-[40px] place-items-center",children:[o.jsx(H,{variant:"subtle",className:B("size-[90%] rounded-md duration-100 [grid-area:1/-1] group-hover:opacity-100",{"opacity-0":!t&&!n},a)}),o.jsxs("div",{className:"relative [grid-area:1/-1]",children:[o.jsx(ce,{icon:e,size:r,className:B("duration-100 group-hover:scale-110",{"text-foreground":t,"text-quiet":!t,"scale-110":t||n})}),s&&o.jsx(jT,{variant:"iconOnly"})]})]}));f4e.displayName="SidebarTabButton";const m4e=f.memo(({icon:e,title:t,selected:n,hovered:r,href:s,onHover:a,onLeave:i,onClick:l,showBadge:c=!1})=>o.jsxs(Ge,{href:s,"data-testid":`sidebar-${t.toLowerCase()}`,className:"p-sm group flex w-full flex-col items-center justify-center gap-0.5",onMouseEnter:a,onMouseLeave:i,onClick:l,children:[o.jsx(f4e,{icon:e,selected:n,hovered:r,showBadge:c}),o.jsx(D,{variant:"micro",color:n?"default":"light",className:B("line-clamp-2 w-full text-ellipsis text-center leading-[1.1]",{"font-medium":n}),children:t})]}));m4e.displayName="SidebarTab";const p4e=()=>{const{$t:e}=Z(),{trackEvent:t}=Ne(),n=Ho(),{shouldShow:r,setReachedImpressions:s}=h$({cueKey:"sidebar-upgrade-badge",impressionsLimit:10,enabled:!0}),a=f.useCallback(()=>{t("sidebar pro upsell clicked"),s(),n({origin:Oe.SIDEBAR_PRO_UPSELL})},[t,s,n]);return o.jsxs("button",{className:"gap-xs group inline-flex appearance-none flex-col items-center [@media(max-height:680px)]:hidden",onClick:a,"data-testid":"sidebar-upgrade-button",children:[o.jsx(H,{variant:"subtle",className:"flex size-8 items-center justify-center rounded-full duration-100 group-hover:opacity-80",children:o.jsxs("div",{className:"relative",children:[o.jsx(Rie,{className:"size-4"}),r&&o.jsx(jT,{variant:"iconOnly"})]})}),o.jsx(D,{variant:"micro",color:"light",className:"px-xs w-full truncate text-center",children:e({defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})]})};p4e.displayName="SidebarUpgradeButton";const YFt=({category:e})=>{const{$t:t}=Z();let n="/spaces";return e==="invited"?n="/spaces#invites":e==="organization"?n="/spaces#organization":(e==="private"||e==="saved"||e==="shared")&&(n="/spaces#my-spaces"),o.jsx(Ge,{href:n,className:"m-0 w-full border-none bg-transparent p-0 text-left no-underline",children:o.jsx(D,{variant:"tinyRegular",color:"light",className:"duration-200 hover:opacity-60",children:t({defaultMessage:"View All",id:"wbcwKddwLa"})})})},h4e=I.memo(({item:{title:e,slug:t,emoji:n},sidebarOpen:r})=>{const{setMobileSidebarOpen:s}=Mu(),a=jt(),i=`/spaces/${t}`,l=f.useCallback(()=>{s(!1)},[s]);return o.jsx(Ls,{id:`SIDEBAR_SPACE_${t}`,href:i,text:e,fadeOut:!0,selected:a===i,sidebarOpen:r,onClick:l,icon:n?o.jsx("div",{className:"flex size-[12px] items-center justify-center",children:o.jsx(Gd,{unified:n,size:"tiny"})}):o.jsx("div",{className:"flex size-[12px] items-center justify-center",children:o.jsx(ce,{icon:eo,className:"text-quiet size-4 shrink-0"})})})});h4e.displayName="SpaceHistoryItem";const Nae={organization:{defaultMessage:"Organization",id:"K56Dims7Up"},private:{defaultMessage:"Private",id:"viXE3205/2"},shared:{defaultMessage:"Shared",id:"kWI6zXRaHY"},saved:{defaultMessage:"Saved",id:"fsB/4pdUqN"},invited:{defaultMessage:"Invites",id:"Wy+IdbkBFc"}},QFt={organization:"/spaces#organization",private:"/spaces#my-spaces",shared:"/spaces#my-spaces",saved:"/spaces#my-spaces",invited:"/spaces#invites"};function XFt({category:e,accessory:t,sidebarOpen:n,isLastCategory:r}){const s="spaces-sidebar-section",{$t:a}=Z(),{data:i,isLoading:l}=srt({category:e,reason:s}),c=f.useMemo(()=>i?.pages.flatMap(u=>u).filter(u=>u!==void 0)??ue,[i?.pages]);return l||c.length===0?null:o.jsxs(o.Fragment,{children:[o.jsx(Og,{href:QFt[e]||"/spaces",text:a(Nae[e]||Nae.private),accessory:t}),o.jsx(nb,{show:!0,data:c,type:"space_navbar_item",HistoryComponent:({item:u,position:d})=>o.jsx(h4e,{item:u,position:d,sidebarOpen:n}),wrapperClassName:"!m-0 !px-0 !border-0 flex flex-col gap-1.5"}),c[c.length-1]?.has_next_page&&o.jsx(YFt,{category:e}),!r&&o.jsx(X1,{})]})}const g4e=I.memo(({item:{title:e,slug:t,emoji:n,user_permission:r},sidebarOpen:s})=>{const{setMobileSidebarOpen:a}=Mu(),i=`/spaces/${t}`,l=f.useCallback(()=>{a(!1)},[a]),c=dg(r),u=jt();return o.jsx(Ls,{id:`SIDEBAR_COLLECTION_${t}`,href:i,text:e,fadeOut:!0,selected:u===i,sidebarOpen:s,onClick:l,icon:c?o.jsx("div",{className:"flex size-[12px] items-center justify-center",children:o.jsx(ce,{icon:q7,className:"text-quiet size-4 shrink-0"})}):n?o.jsx("div",{className:"flex size-[12px] items-center justify-center",children:o.jsx(Gd,{unified:n,size:"tiny"})}):o.jsx("div",{className:"flex size-[12px] items-center justify-center",children:o.jsx(ce,{icon:eo,className:"text-quiet size-4 shrink-0"})})})});g4e.displayName="CollectionHistoryItemV2";const jae="pb-lg flex flex-col gap-[12px]",y4e=f.memo(({sidebarOpen:e})=>{const t="spaces-sidebar",{data:n,isLoading:r}=rrt({reason:t}),s=rt(),{$t:a}=Z(),i=Zi(),{openModal:l}=xt(),c=rU(),u=Array.isArray(i?.slug)?i.slug[0]:i?.slug,{collection:d}=cc({collectionSlug:u,reason:t}),{handleCreateNewSpace:m}=nU(),{templateSpace:p}=fge({collectionSlug:u??"",reason:t}),h=f.useCallback(()=>{l("spaceCreate",{existingCollection:null,onCreate:null})},[l]),g=f.useCallback(()=>{c?m():h()},[c,m,h]),{openVisitorLoginUpsell:y}=ur({enabled:!s}),x=!(n!==void 0&&((n.organization_spaces?.length??0)>0||(n.saved_spaces?.length??0)>0||(n.private_spaces?.length??0)>0||(n.invited_spaces?.length??0)>0||(n.shared_spaces?.length??0)>0)),b=JQ.filter(_=>{const w=(()=>{switch(_){case"private":return n?.private_spaces;case"shared":return n?.shared_spaces;case"saved":return n?.saved_spaces;case"organization":return n?.organization_spaces;case"invited":return n?.invited_spaces;default:return[]}})();return w&&w.length>0});return x?o.jsxs("div",{className:jae,children:[o.jsx(Ls,{id:"SIDEBAR_WELCOME",href:"/spaces/templates",text:a({defaultMessage:"Welcome",id:"PwaN2oE2pC"}),icon:o.jsx(ce,{icon:eo,size:"sm"}),sidebarOpen:e}),r?o.jsx(nM,{}):o.jsx(Ls,{id:"SIDEBAR_CREATE_SPACE",icon:ar,onClick:_=>{s?(_.preventDefault(),g()):(_.preventDefault(),y({title:a({defaultMessage:"Focus your Perplexity experience in Spaces",id:"spZP/TobF9"}),origin:Oe.SPACES_PAGE}))},text:a({defaultMessage:"Create a Space",id:"SqVNRzqwJz"}),deemphasized:!0,testId:"create-space-button",sidebarOpen:e})]}):o.jsxs("div",{className:jae,children:[o.jsxs(Q1,{children:[o.jsx(Ls,{id:"SIDEBAR_TEMPLATES",href:"/spaces/templates",text:a({defaultMessage:"Templates",id:"A3ptulOTB3"}),icon:o.jsx(ce,{icon:N9e}),sidebarOpen:e}),!!p&&d&&o.jsx(g4e,{item:d,position:0,sidebarOpen:e}),o.jsx(Ls,{id:"SIDEBAR_CREATE_SPACE",onClick:g,text:a({defaultMessage:"Create new Space",id:"ZyNYnZRkPz"}),icon:ar,sidebarOpen:e,testId:"create-space-button"})]}),o.jsx(X1,{}),r?o.jsx(nM,{}):JQ.map(_=>o.jsx(XFt,{category:_,sidebarOpen:e,accessory:_==="private"?o.jsx(Te,{toolTip:a({defaultMessage:"Create new Space",id:"ZyNYnZRkPz"}),icon:ar,size:"tiny",extraCSS:"-mr-sm",onClick:g,testId:"create-space-button"}):void 0,isLastCategory:_===b[b.length-1]},_))]})});y4e.displayName="SpacesSidebar";const v4e=()=>{const[e,t]=f.useState(!1),[n,r]=f.useState(!1),[s,a]=f.useState(""),i=f.useCallback(()=>{r(!0),setTimeout(()=>{r(!1)},2e3)},[]),l=f.useCallback(()=>{a("Brandmark copied to clipboard"),t(!1),i()},[i]),c=f.useCallback(()=>{a("Logo copied to clipboard"),t(!1),i()},[i]),u=f.useCallback(()=>{a("Brand kit downloading..."),t(!1),i()},[i]),d=f.useCallback(()=>{t(!1)},[]);return f.useMemo(()=>({toastCopy:s,toastVisible:n,isBrandDropdownOpen:e,setBrandDropdownOpen:t,handleBrandCopy:l,handleLogoCopy:c,handleDownload:u,handlePopoverClose:d}),[l,u,c,d,e,s,n])},ZFt=ye(()=>K(()=>import("./BrandPopoverContent-BWAazDhZ.js"),__vite__mapDeps([131,3,1,5,6,4])),{loading:()=>o.jsx("div",{className:"w-[200px]",children:o.jsxs(H,{className:"gap-sm p-sm flex flex-col",children:[o.jsx(li,{noLines:!0,size:"tiny"}),o.jsx(li,{noLines:!0,size:"tiny"}),o.jsx(li,{noLines:!0,size:"tiny"})]})})}),JFt=I.memo(()=>o.jsx("svg",{className:"h-auto w-[14px]",width:"278",height:"330",viewBox:"0 0 278 330",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M126.99 83.0617L37.008 0.156738V98.524H0V240.866H37.11V329.64L126.99 250.476V325.948H150.506V249.154L241.005 328.664V240.866H278V98.524H240.891V0.156755L150.506 83.4328V4.1913H126.99V83.0617ZM109.019 121.826L37.088 187.144V217.564H23.5159V121.826H109.019ZM151.01 137.113L217.396 197.396V240.866H217.489V276.862L151.01 218.454V137.113ZM241.005 186.421L169.711 121.826H254.484V217.564H241.005V186.421ZM60.625 197.477L126.99 137.199V219.3L60.625 277.752V197.477ZM168.661 98.524L217.375 53.6415V98.524H168.661ZM60.524 53.6416L109.238 98.524H60.524V53.6416Z",fill:"currentColor"})}));JFt.displayName="Brandmark";const _W=I.memo(({children:e,onLogoCopy:t,onBrandmarkCopy:n,onDownload:r,...s})=>{const a=f.useMemo(()=>o.jsx(ZFt,{onLogoCopy:t,onBrandmarkCopy:n,onDownload:r}),[n,r,t]);return o.jsx($o,{content:a,placement:"right-start",...s,children:e})});_W.displayName="BrandPopover";const eUt=()=>{const{isMax:e}=_t(),{isEnterprise:t,isFetching:n}=Y5({reason:"sidebar-v2"}),s=rt()&&!n&&!t;return f.useMemo(()=>s&&!e,[e,s])},tUt=e=>{switch(e?.split("/").slice(1)?.[0]??""){case"":case"search":case"page":return"home";case"spaces":case"collections":return"spaces";case"discover":return"discover";default:return"home"}},x4e=f.memo(({appContentWrapperRef:e,minimalMode:t})=>{const n="sidebar-v2",[r,s]=f.useState(null),a=jt(),i=f.useRef(null),l=f.useRef(null),c=f.useRef(null),u=f.useRef(null),d=f.useRef(null),m=f.useRef(null),{isSidebarPinned:p,actions:h}=hn(),{isIncognito:g}=Ra({reason:n}),y=f.useRef(null),[v,x]=f.useState(null),[b,_]=f.useState(!1),w=gt(),C=rt(),{openVisitorLoginUpsell:S}=ur({enabled:!C}),E=L4t({reason:n}),k=Nt()?.get("spaces_created")==="true",A=f.useRef(null),R=f.useRef(null),[O,L]=f.useState(!1),[P,N]=f.useState(!1),T=p&&!t,{setBrandDropdownOpen:j,handleBrandCopy:F,handleDownload:U,handleLogoCopy:V,isBrandDropdownOpen:$,handlePopoverClose:z,toastCopy:Q,toastVisible:Y}=v4e(),W=fn(),{device:{isWindowsApp:X}}=At(),{handleShowPanel:G}=Gm(),{shouldShowLossAversionModal:J,handleOpenLossAversion:q}=Oy(),{isEnterprise:te}=Y5({reason:"sidebar-v2"}),re=He=>{He.button===2&&(He.preventDefault(),j(!0))},ae=He=>{l.current=setTimeout(()=>{s(He)},100),i.current&&clearTimeout(i.current),d.current&&clearTimeout(d.current),c.current&&clearTimeout(c.current),m.current&&clearTimeout(m.current)},fe=v||tUt(a),{$t:de}=Z(),ve=()=>{l.current&&clearTimeout(l.current),i.current=setTimeout(()=>{s(null)},500)},_e=()=>{h.setIsSidebarPinned(!p)},Se=f.useCallback(()=>{s(null),_(!1)},[s,_]),be=()=>{i.current&&clearTimeout(i.current),d.current&&clearTimeout(d.current),c.current&&clearTimeout(c.current),m.current&&clearTimeout(m.current)},me=()=>{l.current&&clearTimeout(l.current),c.current=setTimeout(()=>{s(null)},150),d.current=setTimeout(()=>{_(!1)},150)},Ae=f.useMemo(()=>{if(r||b){const He=r??fe;return y.current=He,He}return y.current&&!T?(setTimeout(()=>{y.current=null},500),y.current):T||b?fe:"home"},[r,fe,T,b]),Ee=f.useCallback(()=>{if(Se(),X)G();else if(J)q({args:{callback:()=>{w.push("/")},origin:Oe.NEW_THREAD_BUTTON}});else{w.push("/");const He=document.getElementById("ask-input");He&&He.focus()}},[J,q,w,X,G,Se]);f.useEffect(()=>{x(null)},[a]);const je=r!==null||T||b,Me=f.useCallback(()=>{m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{Se()},1e3)},[Se]),Ye=f.useMemo(()=>[{id:"home",title:de({defaultMessage:"Home",id:"ejEGdxSUGs"}),icon:tle,menuComponent:o.jsx(wFt,{isOpen:je,onCreateClick:Se,onDeleteThreadOrBookmark:Me,isConfiguring:P,setIsConfiguring:N}),href:"/",actions:[{text:de({defaultMessage:"Customize Sidebar",id:"/4kt7TXcZf"}),onClick:()=>{N(!0)},show:!0,type:"default",size:Kt.small,icon:KI}]},{id:"discover",title:de({defaultMessage:"Discover",id:"cE4HfwyEyr"}),icon:nle,accessoryIcon:KI,accessoryClick:He=>{C?L(!0):(He.preventDefault(),S({title:de({defaultMessage:"Sign in to customize your Discover Feed",id:"tlclIdp++4"}),origin:Oe.DISCOVER_TOPICS}))},accessoryTooltip:de({defaultMessage:"Personalize Discover",id:"d0oRgWBA8Q"}),href:"/discover",menuComponent:o.jsx(lEe,{isConfiguring:O,setConfiguring:L,sidebarOpen:je})},{id:"spaces",title:de({defaultMessage:"Spaces",id:"ZMoczsYew9"}),icon:eo,menuComponent:o.jsx(y4e,{sidebarOpen:je}),href:E,requireLogin:!0,showBadge:k}],[O,L,de,C,S,je,Se,Me,P,N,E,k]),at=f.useMemo(()=>Ye.find(He=>He.id===Ae),[Ae,Ye]),it=He=>{const Be=A.current&&A.current.contains(He.target);if(Be){Ue();return}R.current&&R.current.contains(He.target)&&!Be&&ke(He)},ke=He=>{d.current&&clearTimeout(d.current),!(A.current&&A.current.contains(He.target))&&(u.current=setTimeout(()=>{_(!0)},100),m.current&&clearTimeout(m.current))},Ue=()=>{u.current&&clearTimeout(u.current),d.current=setTimeout(()=>{_(!1)},100)},Ot=f.useCallback(He=>{(He.metaKey||He.ctrlKey)&&He.key===";"&&(He.preventDefault(),h.setIsIncognito(!g))},[h,g]);f.useEffect(()=>(document.addEventListener("keydown",Ot),()=>{document.removeEventListener("keydown",Ot)}),[Ot]);const yt=eUt(),St=!t&&!X&&!W&&C,et=Py();return o.jsx(nUt,{isOpen:je,children:o.jsxs(H,{variant:"transparent",className:B("group/sidebar relative z-10 hidden min-h-0 flex-none flex-row-reverse md:flex",{"duration-100":t}),children:[t&&o.jsx(H,{variant:"background",className:"absolute inset-y-0 -right-px left-0"}),o.jsx(ZTe,{isOpen:je,title:at?.title??"closed",onPin:_e,pinned:T,onMouseEnter:be,onMouseLeave:me,appContentWrapperRef:e,actions:at?.actions,canPin:!t,accessory:at?.accessoryIcon&&o.jsx(Te,{icon:at.accessoryIcon,onClick:at.accessoryClick,size:"tiny",toolTip:at.accessoryTooltip,tooltipLayout:"bottom"}),children:at?.menuComponent}),o.jsxs(H,{ref:R,variant:"transparent",style:{width:ih},className:"py-md scrollbar-none relative flex h-full flex-col items-center overflow-y-auto overflow-x-hidden",children:[o.jsx(_W,{onLogoCopy:V,onBrandmarkCopy:F,onDownload:U,onClose:z,isOpen:$,children:o.jsx(Ge,{href:"/",className:B("mt-xs active:ease-outExpo block duration-100 ease-out active:scale-[0.97]",{"opacity-50 duration-100":t,"!opacity-100":t&&je}),onContextMenu:re,children:o.jsx(Na,{variant:"mark",size:"small",includeEffects:!0})})}),o.jsxs("div",{onMouseEnter:t?ke:void 0,onMouseOver:t?it:void 0,onMouseLeave:t?Ue:void 0,className:B("pt-sm relative flex w-full flex-1 flex-col items-center",{"opacity-0 transition-opacity duration-100":t,"opacity-100":t&&je}),children:[o.jsx(he,{icon:ar,onClick:Ee,pill:!0,extraCSS:"my-lg hover:scale-105",toolTip:de({defaultMessage:"New Thread",id:"76XSxT3hV8"}),tooltipLayout:et?"left":"right",testId:"sidebar-new-thread"}),o.jsx("div",{className:"pb-xl w-full",onMouseEnter:t?void 0:ke,onMouseOver:t?void 0:it,onMouseLeave:t?void 0:Ue,children:Ye.map(He=>o.jsx(m4e,{icon:He.icon,title:He.title,selected:fe===He.id,hovered:r===He.id,href:He.href,onHover:()=>ae(He.id),onLeave:ve,showBadge:He.showBadge,onClick:Be=>{He.requireLogin&&!C?(Be.preventDefault(),S({title:de({defaultMessage:"Focus your Perplexity experience in Spaces",id:"spZP/TobF9"}),origin:Oe.SPACES_PAGE})):x(He.id)}},He.id))})]}),o.jsxs("div",{className:"pb-sm gap-md mt-auto flex w-full min-w-0 flex-col items-center justify-center [&>*]:w-full",children:[o.jsx(d4e,{ref:A}),o.jsx(AFt,{}),o.jsx(QTe,{showBottomLabels:yt}),te&&o.jsx(XTe,{}),yt&&o.jsx(p4e,{}),yt&&St&&o.jsx(NFt,{})]})]}),o.jsx(Gl,{message:Q,variant:"success",isVisible:Y,timeout:2})]})})});x4e.displayName="SidebarV2";const b4e=Wt("SidebarDesktopContext",void 0),nUt=({children:e,isOpen:t})=>{const[n,r]=f.useState(null),s=f.useCallback(a=>{r(a)},[]);return f.useEffect(()=>{t||r(null)},[t]),o.jsx(b4e.Provider,{value:{openDropdownId:n,setOpenDropdownId:s},children:e})},rUt=()=>{const e=f.useContext(b4e);if(!e)throw new Error("useSidebarDesktop must be used within a SidebarDesktopProvider");return e},_4e=I.memo(({collapsed:e})=>{const{$t:t}=Z(),{device:{isMacOS:n,isWindowsApp:r}}=At(),{handleShowPanel:s}=Gm(),{shouldShowLossAversionModal:a,handleOpenLossAversion:i}=Oy(),l=gt(),c=OP(h=>h.globalShortcuts[br.NEW_THREAD]),u=n?zn.MACOS:zn.WINDOWS,d=f.useMemo(()=>c[u],[u,c]),m=f.useMemo(()=>d.map(h=>fJe(h)),[d]),p=f.useCallback(()=>{r?s():a?i({args:{callback:()=>{l.push("/",void 0,"New thread loss aversion")},origin:Oe.NEW_THREAD_BUTTON}}):l.push("/",void 0,"New thread button")},[r,a,s,i,l]);return o.jsx("div",{onClick:p,className:e?"-mb-sm py-lg":"pt-sm",children:e?o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(he,{tooltipLayout:"right",icon:ar,pill:!0,toolTip:t({defaultMessage:"New Thread",id:"76XSxT3hV8"})})}):o.jsx("div",{className:"ml-xs",children:o.jsxs(H,{variant:"background",className:"mx-md py-sm pl-md pr-sm hover:ring-super group flex flex-none cursor-pointer select-none items-center justify-between rounded-full border ring-1 ring-transparent transition duration-200",children:[o.jsx(D,{variant:"smallBold",color:"light",className:"line-clamp-1 overflow-hidden text-clip",children:t({defaultMessage:"New Thread",id:"76XSxT3hV8"})}),o.jsx(D,{variant:"tiny",color:"light",className:"flex items-center gap-0 whitespace-nowrap",children:m.map(h=>o.jsx(H,{className:B("flex items-center justify-center rounded border font-mono",{"text-xs":h!=="","px-xs h-4 min-w-4":m.length<=2,"px-xs h-3.5 min-w-3.5":m.length===3}),children:h},h))})]})})})});_4e.displayName="NewThreadButton";const sUt=({isEnterprise:e})=>{const t="enterprise-or-social",{$t:n}=Z(),{organization:r,isLoading:s}=_n({reason:t}),{device:{isWindowsApp:a}}=At(),i=Cu();return s&&!a?o.jsx(yn,{className:"p-sm divide-subtlest border-subtlest ring-subtlest h-14 border-t",children:o.jsx("div",{className:"bg-subtle h-8 w-full rounded-md"})}):o.jsxs("div",{className:e||!a?"h-14 items-stretch":"",children:[e&&o.jsx(H,{className:"p-sm h-full border-t",children:o.jsx(Ge,{href:e?`${i}/org`:"",children:o.jsxs(H,{className:"gap-sm p-sm flex cursor-pointer items-center rounded-full",bgHover:"subtle",children:[r?.logo?o.jsx(wt,{size:"small",user:r?.logo,altText:"Logo"}):o.jsx(D,{children:o.jsx(ce,{icon:yu})}),o.jsx(D,{variant:"smallBold",className:"line-clamp-1 grow",children:r?.display_name})]})})}),!e&&!a&&o.jsx(H,{className:"p-sm border-t",children:o.jsx(bW,{text:n({defaultMessage:"Download",id:"5q3qC0sC3r"})})})]})},aUt=({children:e})=>{const[t,n]=f.useState(!1),{session:r}=Et(),s=()=>{n(!1)};return o.jsx($o,{childrenClassName:"inline-flex min-w-0",placement:"top-start",isOpen:t,onOpen:()=>{n(!0)},onClose:()=>{n(!1)},content:o.jsx(zTe,{session:r,onClick:s}),children:e})};function oUt({reason:e}){const{organization:t}=_n({reason:e}),n=t?.uuid??"",{value:r}=It({flag:"org-connectors-blocklist",subjectType:"user_nextauth_id",defaultValue:!1,extraAttributes:{orgUuid:n}});return r}const iUt=({reason:e})=>{const{organization:t}=_n({reason:e}),n=t?.settings?.disabled_connectors,r=n?.includes(Tt.GOOGLE_DRIVE)&&n?.includes(Tt.ONEDRIVE)&&n?.includes(Tt.SHAREPOINT);return f.useMemo(()=>({allFileConnectorsDisabled:r,disabledConnectors:n}),[r,n])},lUt=({imageProps:e,title:t,description:n,buttonText:r,buttonVariant:s,onClick:a,onDismiss:i,useBackgroundImage:l=!1,buttonSize:c="small"})=>{const{image:u,imageAlt:d,imageHeight:m,imageWidth:p,imageClassName:h,imageIsRoundedFull:g}=e;return o.jsx("div",{className:"m-1",children:o.jsxs(H,{variant:l?"subtle":"background",className:B("relative",l?"mx-md p-md animate-in fade-in rounded-[12px] border duration-300 ease-out":"mx-sm rounded-lg p-[10px]"),children:[l&&o.jsxs(o.Fragment,{children:[o.jsx("img",{src:KWe,alt:Iq,className:"absolute inset-0 rounded-[12px] object-cover dark:hidden"}),o.jsx("img",{src:YWe,alt:Iq,className:"light:hidden absolute inset-0 rounded-[12px] object-cover"})]}),o.jsx("img",{src:u,alt:d,className:B("mb-md",g?"rounded-full":"rounded",h),height:m,width:p}),o.jsx(D,{variant:"smallBold",className:"mb-xs text-center",children:t}),o.jsx(D,{color:"light",variant:"small",className:"mb-md text-center leading-tight",children:n}),o.jsx("div",{className:"w-full",children:o.jsx(he,{fullWidth:!0,text:r,variant:s,size:c,onClick:a})}),i&&o.jsx("div",{className:"right-xs top-xs absolute",children:o.jsx(Te,{icon:Rt,size:"small",onClick:i})})]})})},w4e=I.memo(()=>{const e=Z(),{trackEvent:t}=Ne(),n=gt(),{actions:r}=hn(),s=Cu(),a=f.useCallback(()=>{r.setIsSidebarConnectorsAdDismissed(!0),t("sidebar connectors upsell clicked",{}),n.push(`${s}/connectors`)},[r,t,n,s]),i=f.useCallback(()=>{t("sidebar connectors upsell dismissed",{}),r.setIsSidebarConnectorsAdDismissed(!0)},[r,t]),l=f.useMemo(()=>({image:JWe,imageAlt:"Sidebar connectors showcase image",imageHeight:128,imageWidth:128,imageClassName:"mx-auto mt-md"}),[]);return o.jsx(lUt,{imageProps:l,title:e.formatMessage({defaultMessage:"Connect your files",id:"tQyDiwqfQw"}),description:"",buttonText:e.formatMessage({defaultMessage:"Get started",id:"/aBLH2Kytu"}),buttonVariant:"primary",buttonSize:"regular",onClick:a,onDismiss:i,useBackgroundImage:!0})});w4e.displayName="SidebarConnectorsAd";const cUt=()=>{const{$t:e}=Z(),{actions:t}=hn(),{isEnterpriseAdDismissed:n}=hn(),{handleSidebarAdClick:r}=jU();return n?null:o.jsxs(H,{className:"px-md pb-sm",children:[o.jsxs("div",{className:"gap-x-xs flex items-center justify-between",children:[o.jsx(D,{variant:"smallBold",className:"inline",children:o.jsx(Ge,{onClick:r,className:"hover:text-super duration-300",children:e({defaultMessage:"Invite your teammates",id:"P1ZqgVAx88"})})}),o.jsx("div",{className:"-mr-sm",children:o.jsx(Te,{ariaLabel:e({defaultMessage:"Close",id:"rbrahOGMC3"}),icon:Rt,size:"small",pill:!0,onClick:()=>t.setIsEnterpriseAdDismissed(!0)})})]}),o.jsx(D,{color:"light",variant:"small",className:"-mt-xs",children:e({defaultMessage:"Want to use Perplexity with your team or business?",id:"6vISFfmj6M"})}),o.jsx("div",{className:"mt-sm gap-x-sm flex",children:o.jsx(he,{size:"small",onClick:r,fullWidth:!0,chevron:!0,chevronIcon:Kn,text:e({defaultMessage:"Learn More",id:"7DIW6+rckr"})})})]})},uUt=()=>{const e="subs-ad",[t,n]=f.useState(!1),{hasActiveSubscription:r}=_t(),{trackEvent:s}=Ne(),[a,i]=f.useState({bannerTitleText:"",bannerBodyText:"",bannerButtonText:"",buttonVariant:"tonal"}),{value:l}=Su({flag:"pro-upsell-banner-customization-flag",subjectType:"user_nextauth_id",defaultValue:{bannerTitleText:"",bannerBodyText:"",bannerButtonText:"",buttonVariant:"tonal"}});if(f.useEffect(()=>{(async()=>{const p=await o0e({originalContent:l,keysToTranslate:["bannerTitleText","bannerBodyText","bannerButtonText"],reason:e});i(p),n(!0)})()},[l]),f.useEffect(()=>{r||s("sidebar pro upsell viewed",{})},[r,s]),r)return null;const{bannerTitleText:c,bannerBodyText:u,bannerButtonText:d}=a;return!t||!c||!u||!d?null:o.jsxs(H,{className:"px-md pb-sm animate-in fade-in duration-200",children:[o.jsx("div",{children:o.jsx(D,{variant:"smallBold",className:"inline",children:o.jsx(Ge,{href:"/pro",className:"hover:text-super duration-300",children:c})})}),o.jsx(D,{color:"light",variant:"small",children:u}),o.jsx("div",{className:"mt-xs",children:o.jsx(J0e,{text:d,origin:Oe.LEFT_HAND_NAV,variant:l.buttonVariant})})]})},dUt=()=>{const e="sidebar-ads",{hasAccessToProFeatures:t}=_t(),{isEnterprise:n,orgUser:r,isLoading:s}=_n({reason:e}),a=r?.role==="MEMBER",i=rt(),{hasLoadedSettings:l}=ma({reason:e}),{isSidebarConnectorsAdDismissed:c}=hn(),u=oUt({reason:e}),{allFileConnectorsDisabled:d}=iUt({reason:e});if(s||!l)return null;const m=i&&!a,p=!n&&!s&&t;return n&&t&&!s&&!c&&!u&&!d?o.jsx(w4e,{}):!m&&!p?null:o.jsxs(o.Fragment,{children:[m&&o.jsx(uUt,{}),p&&o.jsx(cUt,{})]})},fUt="pplx.first-purchase-tooltip",mUt=()=>{const e="collapsed-bottom-items",t=rt(),{organization:n,isEnterprise:r}=_n({reason:e}),{isIncognito:s,incognitoType:a}=Ra({reason:e}),i=Cu();return o.jsx(o.Fragment,{children:t&&o.jsxs(H,{className:"mb-md gap-sm pt-sm flex flex-col items-center justify-center border-t",children:[o.jsx(YTe,{trigger:()=>o.jsx(pUt,{isIncognito:s,incognitoType:a})}),r&&o.jsx(H,{className:"px-two pb-sm pt-md flex justify-center border-t",children:o.jsx(Ge,{href:`${i}/org`,children:n?.logo?o.jsx(wt,{size:"medium",user:n?.logo,altText:"Logo"}):o.jsx(he,{ariaLabel:"Organization settings",pill:!0,size:"small",variant:"inverted",icon:$I})})})]})})},pUt=({isIncognito:e,incognitoType:t})=>{const{session:n}=Et(),{isMax:r,isPro:s,hasAccessToProFeatures:a}=_t();return o.jsx(H,{as:"button",bgHover:"subtle",className:"my-xs gap-x-sm relative flex items-center justify-between rounded-full",children:o.jsx("div",{className:"flex items-center gap-px",children:o.jsxs("div",{className:"p-xs relative flex",children:[e?o.jsx("div",{className:"w-[32px]",children:o.jsx(Xd,{inverse:!0,incognitoType:t})}):o.jsx(wt,{size:"medium",user:n?.user?.image,showProBadge:s,showMaxBadge:r}),!a&&o.jsx(D,{color:"ultraLight",className:"bg-subtler -translate-y-two p-two absolute bottom-0 right-20 inline-flex translate-x-[4px] rounded-full",children:o.jsx(ce,{icon:Dn,size:"xs"})})]})})})},hUt=()=>{const e="uncollapsed-bottom-items",{$t:t}=Z(),{isPro:n,isMax:r}=_t(),{isEnterprise:s}=_n({reason:e}),a=rt(),{session:i,status:l}=Et(),{isIncognito:c,incognitoType:u}=Ra({reason:e}),d=gt(),{isMobileStyle:m}=xe(),[p,,h]=dU(fUt,null);f.useEffect(()=>{p&&setTimeout(()=>{h()},5e3)},[h,p]);const g=ret(),y=()=>{p&&h(),d.push(g)};return l==="loading"&&o.jsx("div",{className:"p-5",children:o.jsx(H,{variant:"background",className:"h-[20px] w-full rounded-full"})}),o.jsxs("div",{className:"gap-md flex flex-col",children:[o.jsx("div",{className:"hidden md:[@media(min-height:670px)]:block",children:o.jsx("div",{className:"opacity-0 transition-opacity duration-300 ease-in-out [@media(min-height:700px)]:opacity-100",children:o.jsx(dUt,{})})}),o.jsxs("div",{children:[a&&o.jsx("div",{children:o.jsx(H,{className:"py-sm w-full border-t md:mb-0",children:o.jsxs(H,{className:"mx-sm gap-xs flex items-center justify-between",children:[o.jsx(aUt,{children:o.jsxs(H,{variant:"subtler",bgHover:"subtle",className:B("gap-sm pr-sm inline-flex w-full cursor-pointer select-none items-center justify-start rounded-full p-1 transition !duration-150",{"!bg-inverse":c}),children:[c?o.jsxs(o.Fragment,{children:[o.jsx(Xd,{incognitoType:u}),o.jsx(D,{variant:"smallBold",className:"!text-inverse truncate",children:t({defaultMessage:"Incognito",id:"Sp8UUpZ0at"})})]}):o.jsxs(o.Fragment,{children:[o.jsx(wt,{size:"medium",showProBadge:n,showMaxBadge:r,user:i?.user?.image}),o.jsx(xW,{username:i?.user?.username})]}),o.jsx("span",{className:B("text-inverse relative top-px opacity-50",{"!text-quiet !opacity-100":!c}),children:o.jsx(ce,{icon:Dn,size:"sm"})})]})}),o.jsx(gUt,{text:t({defaultMessage:"Track purchase status in settings",id:"dt0t5ILzKX"}),open:!!p,children:o.jsx(Te,{ariaLabel:t({defaultMessage:"Settings",id:"D3idYvSLF9"}),pill:!0,icon:rle,onClick:y,size:"small",extraCSS:"aspect-square min-h-[unset] shrink-0 h-[32px] -mr-xs"})})]})})}),!m&&o.jsx(sUt,{isEnterprise:!!s})]})]})},gUt=({children:e,text:t,open:n})=>o.jsx(bn,{bodyClassName:"!bg-super !p-md",bodyTextClassName:"!text-base !text-white",tooltipText:t,arrowClassName:"!fill-super !w-4 translate-x-[1px] !h-auto",open:n,asChild:!0,children:e}),yUt=()=>{const e="sidebar-bottom",{$t:t}=Z(),{isIncognito:n}=Ra({reason:e}),{isCollapsed:r,actions:s}=hn(),{isMobileStyle:a}=xe(),i=r&&!a,l=f.useCallback(c=>{(c.metaKey||c.ctrlKey)&&c.key===";"&&(c.preventDefault(),s.setIsIncognito(!n))},[s,n]);return f.useEffect(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}),[l]),o.jsxs("div",{className:B("flex flex-col",{"items-center justify-center":i}),children:[i&&o.jsx("div",{className:"pb-md flex items-center justify-center",children:o.jsx(he,{pill:!0,ariaLabel:"Expand sidebar",icon:j9e,onClick:()=>s.setIsCollapsed(!1),toolTip:t({defaultMessage:"Expand",id:"0oLj/toqZk"}),tooltipLayout:"right"})}),i?o.jsx(mUt,{}):o.jsx(hUt,{})]})},vUt=()=>{const{$t:e}=Z(),{setBrandDropdownOpen:t,handleBrandCopy:n,handleDownload:r,handleLogoCopy:s,isBrandDropdownOpen:a,handlePopoverClose:i,toastCopy:l,toastVisible:c}=v4e(),{isCollapsed:u,actions:d}=hn(),{isMobileUserAgent:m}=xe(),{setMobileSidebarOpen:p}=Mu(),{isMobileStyle:h}=xe(),g=_=>{_.button===2&&(_.preventDefault(),t(!0))},y=()=>{p(!1),b.push("/")},v=()=>{p(!1)},x=u&&!h,b=gt();return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:`my-sm md:my-md flex items-center ${x?"justify-center":"justify-between"}`,children:[o.jsx(_W,{onBrandmarkCopy:n,onLogoCopy:s,onDownload:r,isOpen:a,onClose:i,children:o.jsx(Ge,{"aria-label":"Perplexity",href:"/",className:"block",onContextMenu:g,onClick:v,children:x?o.jsx(Na,{includeEffects:!0,size:"md",variant:"mark"}):o.jsx("div",{className:"ml-xs pl-md pr-sm pt-xs",children:o.jsx(Na,{includeEffects:!0,color:"mixed",isPro:!0,size:"small"})})})}),!x&&!m&&o.jsx("div",{className:"mr-xs pt-two",children:o.jsx(Te,{ariaLabel:e({defaultMessage:"Collapse",id:"W/V6+Y+Vy2"}),icon:A9e,size:"small",pill:!0,onClick:()=>{p(!1),d.setIsCollapsed(!0)},toolTip:e({defaultMessage:"Collapse",id:"W/V6+Y+Vy2"}),tooltipLayout:"bottom"})}),m&&o.jsx("div",{className:"mr-xs pt-two",children:o.jsx(Te,{icon:ar,pill:!0,onClick:y})})]}),o.jsx(Gl,{message:l,variant:"success",isVisible:c,timeout:2})]})},xUt=(e,t)=>e&&!t?"w-collapsedSideBarWidth":"w-sideBarWidth",C4e=f.memo(()=>{const e="sidebar",{$t:t}=Z(),n=rt(),{trackEvent:r}=Ne(),{isCollapsed:s}=hn(),{isIncognito:a}=Ra({reason:e}),{openVisitorLoginUpsell:i}=ur({enabled:!n}),{setMobileSidebarOpen:l}=Mu(),{isMobileStyle:c}=xe(),u=xUt(s,c),d=s&&!c;return o.jsx("div",{"data-testid":Sge.SIDEBAR,className:B("group/bar isolate h-full shrink-0 transition-all duration-300 ease-in-out md:hidden md:h-auto",u),children:o.jsx(H,{className:B("h-full transition-all duration-300 ease-in-out",u),children:o.jsxs("div",{className:B("flex h-full min-h-0 flex-1 flex-col"),children:[o.jsx(vUt,{}),!c&&o.jsx(_4e,{collapsed:s}),o.jsx("div",{className:"pt-md scrollbar min-h-0 flex-1 overflow-y-auto overflow-x-hidden",children:o.jsx(WTe,{collapsed:d,incognito:a,animationId:"sidebar-tabs"})}),!n&&!d&&o.jsx("div",{className:"m-md md:mb-lg",children:o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(he,{variant:"primary",size:"small",extraCSS:"h-[44px]",fullWidth:!0,text:t({defaultMessage:"Sign Up",id:"39AHJmowNE"}),onClick:()=>{l(!1),r("signup click",{}),i({origin:Oe.SIGNUP_BUTTON})}}),o.jsx(he,{variant:"common",size:"small",extraCSS:"h-[44px]",fullWidth:!0,text:t({defaultMessage:"Log in",id:"odXlk858Gb"}),onClick:()=>{l(!1),r("login click",{}),i({origin:Oe.LOGIN_BUTTON})}})]})}),n||d?o.jsx(yUt,{}):null]})})})});C4e.displayName="SidebarMobile";const bUt=({appContentWrapperRef:e,minimalMode:t})=>{const{isMobileStyle:n}=xe({evaluateOnInit:!0});return n?o.jsx(C4e,{}):o.jsx(LFt,{children:o.jsx(x4e,{minimalMode:t,appContentWrapperRef:e})})};function _Ut({children:e}){const t=f.useRef(null),n=jt(),r=f.useMemo(()=>n?.startsWith("/b/"),[n]),s=f.useMemo(()=>n?.startsWith("/b/zen")||n?.startsWith("/b/try-assistant"),[n]);return o.jsx(out,{children:o.jsx(sEe,{children:o.jsxs(rc,{children:[!s&&o.jsx(iut,{children:o.jsx(bUt,{minimalMode:r,appContentWrapperRef:t})}),o.jsxs(lut,{hasSidebar:!s,ref:t,children:[e,o.jsx(nEe,{})]})]})})})}const wUt=["header","ask-input","mini-graphs","watchlist","market-summary","financial-profile"],vsn=["ask-input","mini-graphs","watchlist","financial-profile"],CUt=["header","schedule","standings"],SUt=["header","bracket"],Aae=["ask-input"],EUt=["thread-title"],MUt=["ask-input","article-list"],Iae=["topic-list"],wW=I.memo(function(){const t="stripe-wrapper",n=Nt(),r=n?.get("stripe_checkout"),s=n?.get("referral_status");return f.useLayoutEffect(()=>{(r||s)&&EF({reason:t})},[r,s]),null});wW.displayName="StripeStatusRefresher";const S4e=I.memo(e=>{const t=e.metadata?.title||"Perplexity";return f.useEffect(()=>{const n=document.head?document.head.getElementsByTagName("title"):document.getElementsByTagName("title");for(const r of n)r.textContent=t},[t]),null});S4e.displayName="DocumentTitle";function E4e({href:e=aut()}){const{isMobileStyle:t}=xe();return t?o.jsx(Te,{icon:P7,href:e,extraCSS:"mt-sm -ml-sm",pill:!0}):o.jsxs(Ge,{href:e,className:"gap-xs hover:bg-subtle px-sm py-xs pl-xs -ml-xs -mt-xs group flex items-center rounded-md duration-150",children:[o.jsx(ce,{icon:I9e,size:"sm",className:"text-quiet group-hover:text-foreground duration-150"}),o.jsx(D,{variant:"small",color:"light",className:"group-hover:!text-foreground duration-150",children:o.jsx(pe,{defaultMessage:"Back",id:"cyR7KhiuaU"})})]})}const kUt=()=>{const{isMobileStyle:e}=xe(),t=jt();return e&&t!==Nn?o.jsx(E4e,{href:Nn}):null},fI="selectedApiGroupId",aS=["selected-api-group"],wM=()=>["api-groups"],TUt=async({reason:e})=>await p0e({reason:e}),NUt=async({name:e,address:t,description:n,contactInfo:r,reason:s})=>m0e({displayName:e,address:t,description:n,contactInfo:r,reason:s}),M4e=({reason:e})=>{const t=ht(),{data:n,isLoading:r,isFetching:s,isFetched:a,error:i,refetch:l}=We({queryKey:wM(),queryFn:()=>TUt({reason:e})}),{mutateAsync:c,isPending:u,error:d}=vt({mutationFn:NUt,onSuccess:()=>{t.invalidateQueries({queryKey:wM()})}});return f.useMemo(()=>({groups:n??ue,isLoading:r,isFetching:s,isFetched:a,error:i,refetch:l,createGroup:c,isCreating:u,createError:d}),[d,c,i,n,u,a,s,r,l])},k4e=({reason:e})=>{const t=ht(),{data:n,isFetched:r,isLoading:s,isFetching:a,error:i,refetch:l}=We({queryKey:wM(),queryFn:async()=>{const{getAPIGroupsV2:h}=await K(async()=>{const{getAPIGroupsV2:g}=await Promise.resolve().then(()=>rZ);return{getAPIGroupsV2:g}},void 0);return h({reason:e})}}),{mutateAsync:c,isPending:u,error:d}=vt({mutationFn:async({name:h,address:g,description:y,contactInfo:v,reason:x})=>{const{createApiGroupV2:b}=await K(async()=>{const{createApiGroupV2:_}=await Promise.resolve().then(()=>rZ);return{createApiGroupV2:_}},void 0);return b({displayName:h,address:g,description:y,contactInfo:v,reason:x})},onSuccess:()=>{t.invalidateQueries({queryKey:wM()})}}),{data:m}=We({queryKey:aS,queryFn:async()=>null,enabled:!0,staleTime:1/0,gcTime:1/0});f.useEffect(()=>{const h=n??[];if(!(!r||h.length===0)&&m==null){const g=Re.getItem(fI),y=h.find(v=>v.api_org_id===g);if(y)t.setQueryData(aS,y);else if(ia(h)){const v=h[0];Re.setItem(fI,v?.api_org_id),t.setQueryData(aS,v)}}},[n,r,t,m]);const p=f.useCallback(h=>{h&&(Re.setItem(fI,h.api_org_id),t.setQueryData(aS,h),t.invalidateQueries({predicate:g=>g.queryKey.includes(h.api_org_id)}))},[t]);return f.useMemo(()=>({group:m??null,isFetched:r,isLoading:s,isFetching:a,error:i,refetch:l,createGroup:c,isCreating:u,createError:d,setSelectedGroup:p}),[d,c,i,r,a,s,u,l,m,p])},jUt=async({orgId:e,reason:t})=>await h0e({orgId:e,reason:t}),AUt=e=>["selected-api-groups","customer-info",e??"no-group-id"],IUt=({reason:e})=>{const t=ht(),{group:n}=k4e({reason:e}),r=AUt(n?.api_org_id),s=We({queryKey:r,queryFn:()=>jUt({orgId:n?.api_org_id,reason:e})}),a=f.useCallback(i=>{const l=()=>{t.invalidateQueries({queryKey:r})};i&&i>0?setTimeout(l,i):l()},[t,r]);return f.useMemo(()=>({...s,apiOrganization:s?.data?.apiOrganization,customerInfo:s?.data?.customerInfo,hasDefaultPaymentMethod:s?.data?.hasDefaultPaymentMethod??!1,taxInfo:s?.data?.taxInfo,invalidateCustomerInfo:a,isMember:s?.data?.apiOrganization?.user_role==="MEMBER",isAdmin:s?.data?.apiOrganization?.user_role==="ADMIN"}),[a,s])},nr=(e,t)=>t===e,RUt=(e,t)=>{const{value:n,loading:r}=It({flag:"account-settings-api-playground",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function PUt(){const{value:e}=zb({flag:"sonar-file-search-gate",defaultValue:"disabled",subjectType:"visitor_id"});return e==="enabled"}const T4e=()=>{const e="api-settings",{groups:t}=M4e({reason:e}),{customerInfo:n,isAdmin:r,isLoading:s}=IUt({reason:e}),a=n?.customer_portal_url||"",{group:i,setSelectedGroup:l,isLoading:c}=k4e({reason:e}),u=Z(),d=jt(),m=gt(),[p,h]=f.useState(!1),{isMobileStyle:g}=xe(),y=PUt(),{variation:v}=RUt(!1),x=f.useMemo(()=>({title:u.formatMessage({defaultMessage:"API",id:"xwEc8KM8zK"}),tabs:{isMobileStyle:!1,actionList:[{text:u.formatMessage({defaultMessage:"API group",id:"vzhpEeLnGg"}),...Gs.APIGroup,active:nr(Gs.APIGroup.href,d)},{text:u.formatMessage({defaultMessage:"API members",id:"9T3yfgfdEe"}),...Gs.APIMembers,active:nr(Gs.APIMembers.href,d)},{text:u.formatMessage({defaultMessage:"API billing",id:"kq1Eo7ekVC"}),...Gs.APIBilling,active:nr(Gs.APIBilling.href,d),show:r},{text:u.formatMessage({defaultMessage:"Usage metrics",id:"rmhlHSzjT6"}),...Gs.UsageMetrics,trailingComponent:Gs.UsageMetrics.trailingComponent,show:!!a&&r,onClick:()=>{window.open(a,"_blank","noopener,noreferrer")}},{text:u.formatMessage({defaultMessage:"Account limits",id:"4Krk/t2RZ4"}),...Gs.AccountLimits,active:nr(Gs.AccountLimits.href,d),show:!1},{text:u.formatMessage({defaultMessage:"API keys",id:"yOFPA6eD9X"}),...Gs.APIKeys,active:nr(Gs.APIKeys.href,d)},{text:u.formatMessage({defaultMessage:"API files",id:"B/bk1JrYzU"}),...Gs.APIFiles,active:!!d?.startsWith(Gs.APIFiles.href),show:y},{text:u.formatMessage({defaultMessage:"API playground",id:"GWFtC6WH+w"}),...Gs.APIPlayground,active:nr(Gs.APIPlayground.href,d),show:v}]}}),[u,d,r,a,y,v]),b=t.map(M=>({type:"default",text:M.display_name||M.api_org_id,onClick:()=>{m.push("/account/api/group"),l(M),h(!1)},selected:i?.api_org_id===M.api_org_id,active:i?.api_org_id===M.api_org_id})),_={type:"default",text:"New API Group",leftElement:o.jsx(ar,{size:16}),onClick:()=>{m.push("/account/api/group?create=true"),h(!1)}},w={type:"separator",show:t.length>0},C=[...b,w,_],S=()=>{h(!p)},E=!c&&(!!i||t.length===0);return t&&t.length>0?o.jsxs("div",{className:"flex flex-col",children:[o.jsxs(H,{className:"flex items-center justify-between gap-3 px-3 py-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(D,{variant:g?"small":"tinyRegular",color:"light",children:x.title}),o.jsx("div",{className:"size-2.5",children:s&&o.jsx($r,{size:10})})]}),E&&o.jsx(Jt,{items:C,isMobileStyle:!1,isOpen:p,onOpen:S,onClose:()=>h(!1),wrapperClassName:"min-w-0",children:o.jsx(he,{size:"tiny",text:i?.display_name||i?.api_org_id||"Select API Group",variant:"border",chevron:!0,extraCSS:"max-w-full min-w-0"})})]}),!s&&o.jsx(NT,{fillSpace:!0,vertical:!0,layoutGroupId:`settings-sidebar-${x.title}`,collapsed:!1,size:g?"regular":"small",isNewRedesign:!0,...x.tabs})]}):null},CW=()=>{const{session:e}=Et();return Rr({flag:"api-groups-and-settings-enabled",defaultValue:!0,extraAttributes:{organizationUUID:e?.user?.org_uuid??"none"}})},N4e=({reason:e})=>{const{groups:t}=M4e({reason:e}),n=Z(),r=jt(),{value:s}=CW();return f.useMemo(()=>({text:n.formatMessage({defaultMessage:"API",id:"xwEc8KM8zK"}),...Xt.API,show:s&&t.length<1,href:`${Nn}/api/group?create=true`,active:nr(Xt.API.href,r)}),[n,r,t.length,s])},lw=({title:e,tabs:t,shouldRenderInMobile:n})=>{const{isMobileStyle:r}=xe();return o.jsxs("div",{className:"flex flex-col",children:[o.jsx(D,{className:"px-3 py-2",variant:r?"small":"tinyRegular",color:"light",children:e}),o.jsx(NT,{isMobileStyle:n,fillSpace:!0,vertical:!0,layoutGroupId:`settings-sidebar-${e}`,collapsed:!1,size:r?"regular":"small",isNewRedesign:!0,...t})]},e)},OUt=()=>{const e="consumer-workspace-settings",t=Z(),n=N4e({reason:e}),{handleSettingsHeaderAdClick:r}=jU(),s=f.useMemo(()=>({title:t.formatMessage({defaultMessage:"Workspace",id:"rOZptgrtp0"}),tabs:{isMobileStyle:!1,actionList:[n,{text:t.formatMessage({defaultMessage:"Enterprise",id:"CDLJ0Wjq0x"}),...Xt.Enterprise,onClick:r,href:void 0,active:!1}]}}),[t,n,r]);return s?.tabs?.actionList?.some(i=>i.show)??!1?o.jsx(lw,{title:s.title,tabs:s.tabs,shouldRenderInMobile:!1}):null},LUt=({isEnterpriseAdmin:e,showMembersTab:t,showOrgFilesTab:n,showInsightsTab:r})=>{const s=Z(),a=jt(),i=fa(),l=f.useMemo(()=>({title:s.formatMessage({defaultMessage:"Enterprise",id:"CDLJ0Wjq0x"}),tabs:{isMobileStyle:!1,actionList:[{text:s.formatMessage({defaultMessage:"Organization",id:"K56Dims7Up"}),active:nr(Ba.Organization.href,a),...Ba.Organization},{text:s.formatMessage({defaultMessage:"Members",id:"+a+2ugZ5sB"}),active:nr(Ba.Members.href,a),...Ba.Members,show:t},{text:s.formatMessage({defaultMessage:"User access",id:"a0UwG9o6Tr"}),active:nr(Ba["User access"].href,a),...Ba["User access"],show:e},{text:s.formatMessage({defaultMessage:"Permissions",id:"SFuk1vRI4X"}),active:nr(Ba.Permissions.href,a),...Ba.Permissions,show:e},{text:s.formatMessage({defaultMessage:"Insights",id:"xK7rmdSjmz"}),active:nr(Ba.Insights.href,a),...Ba.Insights,show:r},{text:s.formatMessage({defaultMessage:"Org Connectors",id:"FVJIMTlwBP"}),active:nr(Ba["Org Connectors"].href,a),...Ba["Org Connectors"],show:e},{text:s.formatMessage({defaultMessage:"Org files",id:"iWDsD738/m"}),active:nr(Ba["Org Imports"].href,a),...Ba["Org Imports"],show:n&&!i}]}}),[s,a,e,t,n,i,r]);return o.jsx(lw,{title:l.title,tabs:l.tabs,shouldRenderInMobile:!1})},DUt=()=>{const e="enterprise-workspace-settings",t=Z(),n=N4e({reason:e}),r=f.useMemo(()=>({title:t.formatMessage({defaultMessage:"Developers",id:"aMWgjX56nj"}),tabs:{isMobileStyle:!1,actionList:[n]}}),[t,n]);return r?.tabs?.actionList?.some(a=>a.show)??!1?o.jsx(lw,{title:r.title,tabs:r.tabs,shouldRenderInMobile:!1}):null};function FUt({reason:e}){const{value:t}=LEe(),{locale:n}=Z(),r=new Intl.Locale(n),{uuid:s}=GXe({reason:e}),{value:a,loading:i}=Rr({flag:"can-book-hotels",defaultValue:!1,extraAttributes:{cfLanguage:r.language,appApiVersion:ac,dependent_flag:"canonical-hotel-pages-enabled",variation_served:t,orgUUID:s??""}});return f.useMemo(()=>({initialized:!i,value:a}),[i,a])}const UUt=()=>{const{session:e}=Et(),{value:t,loading:n}=Rr({flag:"shopping-enabled",defaultValue:!1,extraAttributes:{orgUUID:e?.user?.org_uuid??""}});return f.useMemo(()=>!n&&t,[n,t])},j4e=()=>{const e="purchase-settings",t=Z(),n=jt(),{value:r,initialized:s}=FUt({reason:e}),a=r&&s,i=UUt(),l=f.useMemo(()=>({title:t.formatMessage({defaultMessage:"Transactions",id:"/jJLYymnae"}),tabs:{isMobileStyle:!1,actionList:[{text:t.formatMessage({defaultMessage:"Purchases",id:"abfoNg9A1k"}),active:nr(Xt.Products.href,n),...Xt.Products,show:i},{text:t.formatMessage({defaultMessage:"Reservations",id:"PnzGcgLznk"}),...Xt.Reservations,active:nr(Xt.Reservations.href,n),show:a}]}}),[t,n,i,a]);return f.useMemo(()=>l.tabs.actionList.some(u=>u.show),[l.tabs.actionList])?o.jsx(lw,{title:l.title,tabs:l.tabs,shouldRenderInMobile:!1}):null},BUt=(e,t)=>{const{value:n,loading:r}=It({flag:"site-specific-prompt-teachers",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},A4e=()=>{const e="base-user-settings",{$t:t}=Z(),n=jt(),{isEnterprise:r,organization:s}=_n({reason:e}),a=fa(),{value:i}=It({flag:"pro-perks-settings-flag",defaultValue:!1,subjectType:"user_nextauth_id",extraAttributes:{isEnterprise:r??!1,orgUUID:s?.uuid??""}}),{variation:l,loading:c}=op(!1),{variation:u}=BUt(!1),d=M_(),m=f.useMemo(()=>({title:t({defaultMessage:"Account",id:"TwyMauNL3r"}),tabs:{isMobileStyle:!1,actionList:[{text:t({defaultMessage:"Account",id:"TwyMauNL3r"}),active:nr(Xt.Account.href,n),...Xt.Account},{text:t({defaultMessage:"Preferences",id:"PCSt5TwTnx"}),...Xt.Preferences,active:nr(Xt.Preferences.href,n)},{text:t({defaultMessage:"Personalization",id:"FAejG+JVWn"}),...Xt.Personalize,active:nr(Xt.Personalize.href,n)},{text:t({defaultMessage:"Assistant",id:"wSAvhubuX6"}),...Xt.Assistant,active:nr(Xt.Assistant.href,n)},{text:t({defaultMessage:"Shortcuts",id:"7FAwwkYilD"}),...Xt.Shortcuts,active:nr(Xt.Shortcuts.href,n),show:d},{text:t({defaultMessage:"Site-Specific Instructions",id:"yhS5llp8gM"}),...Xt.SiteInstructions,active:nr(Xt.SiteInstructions.href,n),show:u},{text:t(l?{defaultMessage:"Automations",id:"ORNSnD2XJb"}:{defaultMessage:"Tasks",id:"yhU1etXT1A"}),...Xt.Tasks,href:Xt.Tasks.href,active:nr(Xt.Tasks.href,n)},{text:t({defaultMessage:"Notifications",id:"NAidKbB0vi"}),...Xt.Notifications,active:nr(Xt.Notifications.href,n)},{text:t({defaultMessage:"Connectors",id:"2mMJRvsAg1"}),...Xt.Connectors,active:nr(Xt.Connectors.href,n)},{text:t({defaultMessage:"Files",id:"m4vqJl0/FT"}),...Xt.Imports,active:nr(Xt.Imports.href,n),show:r&&!a},...i?[{text:t({defaultMessage:"Pro Perks",id:"x69637XBwS"}),active:nr(Xt.ProPerks.href,n),...Xt.ProPerks}]:[]]}}),[t,n,d,u,l,r,a,i]);return c?null:o.jsx(lw,{title:m.title,tabs:m.tabs,shouldRenderInMobile:!1})},VUt=()=>{const{value:e}=CW();return o.jsxs(o.Fragment,{children:[o.jsx(A4e,{}),o.jsx(j4e,{}),o.jsx(OUt,{}),e&&o.jsx(T4e,{})]})},$Ut=({isEnterpriseAdmin:e,showMembersTab:t,showOrgFilesTab:n,showInsightsTab:r})=>{const{value:s}=CW();return o.jsxs(o.Fragment,{children:[o.jsx(A4e,{}),o.jsx(j4e,{}),o.jsx(DUt,{}),s&&o.jsx(T4e,{}),o.jsx(LUt,{isEnterpriseAdmin:e,showMembersTab:t,showOrgFilesTab:n,showInsightsTab:r})]})},I4e=I.memo(function({shouldRenderInMobile:t=!1,isMobileStyle:n=!1}){const{isEnterprisePro:r,isEnterpriseMax:s}=_t(),a=_n({reason:"settings-sidebar"}),i=a.isEnterprise??!1,l=a.orgUser?.role==="ADMIN",c=l||(a?.organization?.settings?.member_invites_allowed??!1),u=l||(a?.organization?.settings?.members_can_modify_org_files??!1),{value:d}=It({flag:"enterprise-insights",subjectType:"user_nextauth_id",defaultValue:!1}),{value:m}=It({flag:"enterprise-premium-secure",subjectType:"user_nextauth_id",defaultValue:!1}),{value:p}=It({flag:"enterprise-insights-special-access",subjectType:"user_nextauth_id",defaultValue:!1}),h=(r||s)&&l&&(d&&m||p),g=B("flex flex-col gap-2 -mx-sm md:mx-0",{"border-r py-4 w-sideBarWidth":!t});return n&&!t?null:o.jsxs(H,{className:g,children:[o.jsx("div",{className:"mb-3 ml-2 flex md:px-2",children:o.jsx(E4e,{})}),o.jsx("div",{className:"scrollbar-subtle overflow-y-auto md:px-2",children:i?o.jsx($Ut,{isEnterpriseAdmin:l,showMembersTab:c,showOrgFilesTab:u,showInsightsTab:h}):o.jsx(VUt,{})})]})});I4e.displayName="SettingsSidebar";const mI={apiPlaygroundTitle:ee({id:"qqVf+xnImI",defaultMessage:"Sign in to manage to see the API playground"}),proPerksTitle:ee({id:"UfIxhPDVtn",defaultMessage:"Sign in to Perplexity to see available Perks"}),defaultAccountTitle:ee({id:"ZEOKCVFSgA",defaultMessage:"Sign in to manage your account"})},WUt=(e,t)=>t(e==="/account/api/playground/search"?mI.apiPlaygroundTitle:e==="/account/pro-perks"?mI.proPerksTitle:mI.defaultAccountTitle),HUt=()=>{const e=gt(),t=jt(),{$t:n}=Z(),{openVisitorLoginUpsell:r}=ur({enabled:!0});return f.useEffect(()=>{const s=WUt(t,n);r({title:s,origin:Oe.SETTINGS,closeCallback:()=>{e.push("/")}})},[r,e,t,n]),null};function zUt(){return o.jsx("div",{children:o.jsx(H,{className:"mx-auto size-full max-w-screen-md",variant:"background",children:o.jsxs(yn,{className:"mt-lg gap-lg flex flex-col",children:[o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsxs(D,{variant:"baseSemi",className:"ml-sm relative",children:["",o.jsx(oS,{className:"absolute left-0 top-1/2 h-4 w-[100px] -translate-y-1/2"})]}),o.jsx(oS,{className:"h-[170px] rounded-md"})]}),o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsxs(D,{variant:"baseSemi",className:"ml-sm relative",children:["",o.jsx(oS,{className:"absolute left-0 top-1/2 h-4 w-[100px] -translate-y-1/2"})]}),o.jsx(oS,{className:"h-[170px] rounded-md"})]})]})})})}const oS=({className:e})=>o.jsx("div",{className:B("bg-subtler rounded-full",e)}),R4e=I.memo(({children:e,childrenWidth:t})=>{const{session:n,status:r}=Et(),{isMobileStyle:s}=xe();return r==="loading"?o.jsx(zUt,{}):n?.user?o.jsxs(o.Fragment,{children:[o.jsx(wW,{}),o.jsxs("div",{className:"grid h-screen grid-cols-1 grid-rows-[min-content_1fr] gap-2 p-2",children:[o.jsx("div",{className:"flex w-full flex-col",children:o.jsx(I0e,{})}),o.jsxs(H,{variant:"background",className:"flex min-h-0 rounded-md border",children:[o.jsx(I4e,{shouldRenderInMobile:!1,isMobileStyle:s}),o.jsxs(s_,{childrenWidth:t,children:[o.jsx(kUt,{}),o.jsx("div",{className:"md:p-md md:pt-xl",children:e})]})]})]})]}):o.jsx(HUt,{})});R4e.displayName="SettingsDevLayout";const SW=I.memo(()=>o.jsxs(o.Fragment,{children:[o.jsx("script",{id:"reddit-pixel-script",src:"/pixel/reddit.js",async:!0}),o.jsx("script",{id:"facebook-pixel-script",src:"/pixel/meta.js",async:!0}),o.jsx("script",{id:"podscribe-pixel-script",src:"/pixel/podscribe.js",async:!0}),o.jsx("script",{id:"amazon-twitch-pixel-script",src:"/pixel/amazon.js",async:!0})]}));SW.displayName="AfterInteractivePixels";const EW=fy("HomepageComponentsContext",e=>pi(t=>({homepageTitle:e?.homepageTitle||"",actions:{onHomepageTitleChange:n=>{t({homepageTitle:n})}}}))),GUt=EW.Provider,qUt=EW.useSelector,KUt=EW.useTrackedState,YUt=()=>qUt(e=>e.actions),QUt=KUt,XUt={hidden:{},visible:{transition:{staggerChildren:.025}}},ZUt={hidden:{opacity:0},visible:{opacity:1,transition:{type:"tween",duration:.3}},exit:{opacity:0,transition:{duration:.05}}},P4e=I.memo(()=>{const{homepageTitle:e}=QUt(),t=f.useRef(!0),[n,r]=f.useState(!0),{hasAccessToProFeatures:s,isPro:a,isMax:i,isEnterprise:l}=_t(),c=Ms(),{isMobileStyle:u}=xe(),d=f.useMemo(()=>{const m=e.split(" ");return m.map((p,h)=>h===m.length-1?p:`${p} `)},[e]);return f.useEffect(()=>{if(c){if(t.current){t.current=!1;return}r(!1)}},[e,c]),o.jsx("div",{className:"mb-lg bottom-0 flex w-full items-center justify-center pb-3 text-center md:absolute",children:o.jsx(Ke,{mode:"wait",children:n&&!u?o.jsx(ge.div,{initial:{opacity:1},exit:{opacity:0,transition:{duration:.2}},children:o.jsx(Na,{variant:"text",isPro:a,isMax:i,isEnterprise:l,size:s?"xl":"large"})}):o.jsx(ge.span,{variants:XUt,initial:n?!1:"hidden",animate:"visible",exit:"hidden","aria-hidden":"true",className:"inline-block",children:o.jsx(D,{children:o.jsx("span",{className:"font-display inline-block text-3xl md:text-4xl","aria-label":e,children:d.map((m,p)=>o.jsx(ge.span,{variants:ZUt,className:"inline-block",style:{whiteSpace:"pre"},children:m},`${m}-${p}`))})})},e)})})});P4e.displayName="HomepageTitle";const Up=["SMALL","MEDIUM","LARGE"],O4e=I.memo(({widget:e,size:t})=>{const n=Up.includes(t)?"linear-gradient(to bottom, black, transparent)":"linear-gradient(to right, transparent, black 50%)",r="absolute inset-0 size-full object-cover object-center",s=f.useMemo(()=>o.jsxs("div",{className:"relative h-full",children:[o.jsx("img",{src:e.image_url_light,className:B(r,"block dark:hidden"),alt:e.title,style:{maskImage:n,WebkitMaskImage:n}}),o.jsx("img",{src:e.image_url_dark,className:B(r,"hidden dark:block"),alt:e.title,style:{maskImage:n,WebkitMaskImage:n}})]}),[r,e.image_url_dark,e.image_url_light,e.title,n]),a=f.useMemo(()=>o.jsx("div",{className:"p-sm flex h-full flex-col justify-center",children:o.jsxs("div",{className:"gap-2xs p-xs flex flex-col items-start",children:[o.jsx(D,{className:"line-clamp-2 text-ellipsis leading-tight",variant:Up.includes(t)?"tinyRegular":"small",color:Up.includes(t)?"white":void 0,children:e.title}),o.jsx(D,{className:B("line-clamp-2 text-ellipsis leading-tight",{"text-white/70":Up.includes(t)}),variant:"tiny",color:"light",children:o.jsx("span",{className:"font-normal",children:e.text})})]})}),[t,e.title,e.text]);return o.jsx("div",{className:B("relative size-full",{"bg-inverse dark:bg-subtler":Up.includes(t)}),children:Up.includes(t)?o.jsxs(o.Fragment,{children:[s,o.jsx("div",{className:"absolute inset-x-0 bottom-0",children:a})]}):o.jsxs("div",{className:"grid h-full grid-cols-3 grid-rows-1",children:[o.jsx("div",{className:"col-span-2",children:o.jsx("div",{className:"flex h-full flex-row items-center",children:a})}),o.jsx("div",{className:"col-span-1",children:s})]})})});O4e.displayName="AnnouncementHomepageWidget";const L4e=I.memo(({widget:e,size:t})=>{const{colorScheme:n}=Wr(),r=t=="LARGE"?"grid grid-rows-3":"flex flex-row items-center",s=t=="LARGE"?"row-span-1":"",a=t=="LARGE"?"row-span-3":"",i=f.useMemo(()=>o.jsx("div",{className:B("relative",a),children:o.jsx("img",{src:n==="light"?e.image_url_light:e.image_url_dark,className:"size-full object-cover",alt:e.title,style:{maskImage:"linear-gradient(to bottom, black 75%, transparent)"}})}),[a,n,e.image_url_light,e.image_url_dark,e.title]),l=f.useMemo(()=>o.jsx("div",{className:B(a,"pl-[12px]"),children:o.jsx("div",{className:"relative size-[40px] overflow-hidden rounded-md",children:o.jsx("img",{src:n==="light"?e.image_url_light:e.image_url_dark,alt:e.title,className:"size-full object-cover"})})}),[a,n,e.image_url_light,e.image_url_dark,e.title]),c=f.useMemo(()=>o.jsx("div",{className:B("p-sm flex h-full flex-col justify-center",s,t!=="LARGE"&&"pt-sm"),children:o.jsx(D,{className:"px-xs line-clamp-2 text-ellipsis leading-tight",variant:"tinyRegular",children:e.title})}),[t,s,e.title]);return o.jsx("div",{className:B("size-full",r),children:t=="LARGE"?o.jsxs(o.Fragment,{children:[i,c]}):o.jsxs(o.Fragment,{children:[l,c]})})});L4e.displayName="DiscoverHomepageWidget";const IT=({onRequest:e,onSuccess:t,onError:n,origin:r})=>{const{$t:s}=Z(),{trackEvent:a}=Ne();return f.useCallback(()=>{e?.(),navigator.geolocation?navigator.geolocation.getCurrentPosition(i=>{t(i),a("precise location granted",{origin:r})},i=>{let l;switch(i.code){case i.PERMISSION_DENIED:n(s({defaultMessage:"Looks like permission was denied. Please allow location access in your browser site settings.",id:"9P7nG1a2Cl"})),l="permission_denied";break;case i.POSITION_UNAVAILABLE:n(s({defaultMessage:"Unable to determine your location. Please try again.",id:"VLgkyqQ5LO"})),l="position_unavailable";break;case i.TIMEOUT:n(s({defaultMessage:"Request timed out. Please try again.",id:"VIQi5rKvh3"})),l="timeout";break;default:n(s({defaultMessage:"An error occurred while getting your location. Please try again.",id:"oOu0W+N9Re"})),l="unsupported"}a("precise location modal denied",{origin:r,reason:l})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):(n(s({defaultMessage:"Location services are not supported by your browser.",id:"1eN9TO+Fjt"})),a("precise location modal denied",{origin:r,reason:"unsupported"}))},[s,n,t,e,r,a])},D4e=I.memo(({isOpen:e,onClose:t,onPermissionGranted:n,origin:r})=>{const{$t:s}=Z(),[a,i]=f.useState(!1),[l,c]=f.useState(null),u=IT({onSuccess:g=>{n(g),i(!1),c(null),t()},onError:g=>{i(!1),c(g)},origin:r}),d=f.useCallback(()=>{i(!0),c(null),u()},[u]),{colorScheme:m}=Wr(),{isMobileStyle:p}=xe(),h=f.useMemo(()=>[{text:s({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,disabled:a},{text:s({defaultMessage:"Allow",id:"y/bmsG8rnv"}),onClick:d,isLoading:a,variant:"primary",disabled:a}],[s,d,a,t]);return o.jsx(en,{isOpen:e,onClose:t,variant:p?"bottom-sheet":"small",actionList:h,children:o.jsxs(H,{className:"flex flex-col",children:[o.jsx("div",{className:"-mt-md mb-md bg-subtler flex h-24 w-full items-center justify-center overflow-hidden rounded-md bg-cover bg-center",style:{backgroundImage:m==="dark"?"url('/static/images/location-share-dialog-map-dark.jpg')":"url('/static/images/location-share-dialog-map.jpg')"},children:o.jsxs(H,{className:"size-xl relative flex items-center justify-center rounded-full border",children:[o.jsx(H,{className:"absolute left-1/2 top-1/2 size-full -translate-x-1/2 -translate-y-1/2 rounded-full",variant:"super"}),o.jsx(H,{variant:"super",className:"!border-super absolute left-1/2 top-1/2 size-[140%] -translate-x-1/2 -translate-y-1/2 rounded-full border opacity-20"}),o.jsx(H,{variant:"super",className:"!border-super absolute left-1/2 top-1/2 size-[180%] -translate-x-1/2 -translate-y-1/2 rounded-full border opacity-10"}),o.jsx(H,{variant:"super",className:"!border-super absolute left-1/2 top-1/2 size-[220%] -translate-x-1/2 -translate-y-1/2 rounded-full border opacity-5"}),o.jsx(ce,{icon:ale,size:"lg",className:"text-inverse relative"})]})}),o.jsx(D,{variant:"section-title",className:"text-center",children:s({defaultMessage:"Enable Precise Location",id:"/JAfaukfkx"})}),o.jsx(D,{variant:"small",color:"light",className:"text-center",children:s({defaultMessage:"To provide you with accurate local weather information, Perplexity needs access to your device location.",id:"0A/wGwJkVw"})}),l&&o.jsx(H,{className:"mt-md",children:o.jsx(D,{variant:"smallBold",color:"red",className:"text-center",children:l})})]})})});D4e.displayName="LocationPermissionModal";const JUt=Object.freeze(Object.defineProperty({__proto__:null,LocationPermissionModal:D4e,useRequestLocation:IT},Symbol.toStringTag,{value:"Module"})),F4e=I.memo(({setShowCTA:e})=>{const{$t:t}=Z(),{deprecatedOpenToast:n}=gn(),r=ht(),s=f.useCallback(()=>{r.invalidateQueries({queryKey:[MU]}),e(!1)},[r,e]),i=IT({onSuccess:s,onError:c=>{n(c,"error",5)},origin:"homepage_weather"}),l=f.useCallback(()=>{i()},[i]);return o.jsxs(ge.div,{whileTap:{scale:.98,transition:{ease:rn,duration:.15}},className:"bg-subtle flex w-full cursor-pointer flex-row items-center justify-center rounded-full p-3",onClick:l,children:[o.jsx(ce,{icon:ale,size:"sm",className:"text-foreground relative"}),o.jsx(D,{variant:"smallBold",color:"default",className:"ml-2",children:t({defaultMessage:"Use precise location",id:"Si49wMl5CP"})})]})});F4e.displayName="EnableLocationCTA";const U4e=I.memo(({widget:e,size:t})=>{const n="leading-none",r=e.profiles[0]?.image,s=e.profiles[0]?.displayName??e.profiles[0]?.symbol,a=e.profiles[0]?.companyName,i=e.quotes[0]?.price,l=e.profiles[0]?.currency,c=e.quotes[0]?.changesPercentage,u=(c??0)>0,{locale:d}=Z(),m=f.useMemo(()=>B({"!text-[#20808D] dark:!text-[#1FB8CD]":u,"!text-[#A84B2F] dark:!text-[#9C4153]":!u}),[u]),p=f.useMemo(()=>i?i>=1e5?(i/1e3).toLocaleString(d,{minimumFractionDigits:2,maximumFractionDigits:2})+"k":i.toLocaleString(d,{minimumFractionDigits:2,maximumFractionDigits:2}):"",[i,d]),h=f.useMemo(()=>c?`${u?"+":""}${c?.toFixed(2)}%`:"",[c,u]),g=f.useMemo(()=>t==="MEDIUM"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"gap-xs flex items-center",children:[r&&o.jsx("img",{src:r??"",alt:a??"",className:"-mt-two size-[16px] rounded-sm"}),o.jsx(D,{variant:"tinyRegular",color:"light",className:n,children:s})]}),o.jsxs("div",{className:"gap-sm flex flex-row items-baseline",children:[o.jsxs(D,{variant:"tinyRegular",className:n,children:[l==="USD"?"$":"",p,l!=="USD"&&o.jsxs("span",{className:"text-quiet text-[11px]",children:[" ",l]})]}),o.jsx(D,{variant:"tinyRegular",className:B(n,m,"ml-auto"),children:h})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(D,{variant:"tinyRegular",className:n,children:s}),o.jsx(D,{variant:"tinyRegular",className:n,children:p}),o.jsx(D,{variant:"tinyRegular",className:m,children:h})]}),[h,m,a,l,r,p,t,s]),y=f.useMemo(()=>o.jsx("div",{className:B("bg-subtle flex items-center justify-center rounded-full",{"size-[18px]":t==="SMALL","size-[20px]":t!=="SMALL"}),children:o.jsx(ce,{icon:u?F7:R9e,className:m,size:"xs"})}),[u,t,m]);return o.jsxs("div",{className:B("p-sm flex h-full flex-row items-center",{"py-sm":t==="SMALL"}),children:[o.jsx("div",{className:B("pl-xs flex flex-col",t==="MEDIUM"?"gap-sm":"gap-xs"),children:g}),o.jsx("div",{className:B("ml-auto",{"mr-sm":t==="MEDIUM"}),children:y})]})});U4e.displayName="FinanceHomepageWidget";const eBt={SMALL:"col-span-1 row-span-1",MEDIUM:"col-span-2 row-span-1",LARGE:"col-span-2 row-span-2",ROW:"col-span-6 row-span-1"},tBt=e=>e.some(t=>t.type==="QUERY"&&t.educational_type==="comet"),nBt=e=>e.some(t=>t.type==="QUERY"&&t.educational_type==="project"),UO=e=>e.type==="QUERY"&&e.educational_type==="primer",B4e={Ask:Rs,"Email & Communication Management":Jg,"Finance & Budgeting":G9e,"Work & Research":Iie,"Shopping & Deals":HI,"Social & Personal Life":Aie,"Time Management & Productivity":hb,"Travel & Events":$M,Research:Rs,"Current Events":$m,Recommend:WI,Travel:O9e,Shopping:HI,Finance:P9e,Sports:pS,Local:ile,"Make a plan":z9e,Analyze:H9e,Summarize:W9e,"Fact Check":die,Learn:$9e,Health:qI,"What is Perplexity":Die,Troubleshoot:ole,Compare:GH,Parenting:V9e,Create:VM,Study:U7,"Get a job":B9e,Flashcards:U9e,"Practice test":K7,Law:GH,Technology:F9e,Science:D9e,Humanities:L9e},MW=I.memo(({widget:e,showPadding:t=!0,restrictTwoRows:n=!0,tooltipText:r,icon:s})=>{const a=t?"px-sm py-xs":"",i=t?"p-xs":"",l=f.useMemo(()=>({lineHeight:1.3}),[]);return o.jsx("div",{className:`relative h-full ${a}`,children:o.jsx("div",{className:`flex h-full flex-col ${i}`,children:o.jsxs("div",{className:"flex grow items-center gap-2",children:[o.jsx("div",{className:"bg-subtle flex size-6 shrink-0 items-center justify-center rounded-md",children:o.jsx(ce,{icon:(s||B4e[e.prompt])??Rs,color:"#8D9191",size:"sm"})}),r?o.jsx(bn,{tooltipText:r,asChild:!0,children:o.jsx(D,{className:B("text-ellipsis",{"line-clamp-2":n}),variant:"tinyRegular",style:l,children:e.query})}):o.jsx(D,{className:B("text-ellipsis text-pretty",{"line-clamp-2":n}),variant:"tinyRegular",style:l,children:e.query})]})})})});MW.displayName="QueryHomepageWidget";const V4e=ge.create(Ge),rBt={suggested:$m,trending:lle},$4e=I.memo(({prompt:e})=>{switch(e){case"suggested":return o.jsx(D,{variant:"tinyRegular",color:"light",children:o.jsx(pe,{defaultMessage:"Suggested",id:"a0lFbMbzyl"})});case"trending":return o.jsx(D,{variant:"tinyRegular",color:"light",children:o.jsx(pe,{defaultMessage:"Trending",id:"ll/ufR0/ED"})});default:return o.jsx(D,{variant:"tinyRegular",color:"light",children:"Ask"})}});$4e.displayName="WidgetTitle";const W4e=I.memo(({widget:e,onQueryClick:t,onQueryHover:n})=>{const{queries:r}=e,s=LM(r),a=B("px-[12px] pt-[12px]"),i=e.prompt.toLowerCase(),l=rBt[i];return o.jsxs("div",{className:a,children:[o.jsxs("div",{className:"gap-x-xs flex",children:[o.jsx(ce,{icon:l,color:"#8D9191",size:"sm"}),o.jsx(D,{variant:"tinyRegular",color:"light",children:o.jsx($4e,{prompt:i})})]}),o.jsx("div",{children:s?o.jsx(BO,{query:r[0],restrictTwoRows:!1,onQueryClick:t,onQueryHover:n,widget:e},r[0]):o.jsx("div",{children:r.map(c=>o.jsx(BO,{query:c,onQueryClick:t,onQueryHover:n,widget:e},c))})})]})});W4e.displayName="MultiQueryHomepageWidget";const BO=I.memo(({query:e,restrictTwoRows:t,onQueryClick:n,onQueryHover:r,widget:s})=>{const a=f.useMemo(()=>({query:e,prompt:s.prompt}),[e,s]),i=f.useMemo(()=>({opacity:.5}),[]),l=f.useMemo(()=>({opacity:1}),[]),c=f.useMemo(()=>({opacity:.75,transition:{duration:.15,ease:la}}),[]);return o.jsx(V4e,{href:`/search/new?q=${e}&source=homepage_widget`,initial:i,animate:l,whileHover:c,children:o.jsx("div",{className:"mt-4",onClick:u=>{u.preventDefault(),n(e)},onMouseEnter:()=>r(e),children:o.jsx(MW,{widget:a,size:"MEDIUM",showPadding:!1,restrictTwoRows:t})})})});BO.displayName="MotionLinkFactory";const H4e=I.memo(({widget:e,onClick:t,onMouseEnter:n,index:r=0,buttonClassName:s})=>o.jsx("div",{onMouseEnter:n,children:o.jsx(Ke,{children:o.jsx(ge.div,{initial:{opacity:0,scale:.7,y:14},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.7},transition:{delay:r*.025,duration:.3,type:"spring",stiffness:400,damping:30},children:o.jsx(he,{variant:"border",size:"small",text:e.query,icon:B4e[e.prompt]??Rs,onClick:t,extraCSS:s},e.query)},e.uuid)})}));H4e.displayName="QueryPrimerHomepageWidget";const z4e=I.memo(({widget:e})=>{const t=f.useMemo(()=>({lineHeight:1.3}),[]);return o.jsxs("div",{className:"flex size-full grow items-center gap-2",children:[o.jsx("div",{className:"bg-subtle ml-3 flex size-[40px] shrink-0 items-center justify-center rounded-md",children:e.icon_url?o.jsx(fs,{src:e.icon_url,alt:e.prompt,includeLightBoxModal:!1}):o.jsx(ce,{icon:Rs,color:"#8D9191",size:"sm"})}),o.jsxs("div",{className:"my-auto mr-1 flex flex-col overflow-hidden",children:[o.jsx(D,{variant:"tiny",children:e.prompt}),o.jsx(D,{className:B("line-clamp-2 text-ellipsis text-pretty"),variant:"tinyRegular",style:t,children:e.query})]})]})});z4e.displayName="QueryProjectHomepageWidget";const G4e=I.memo(({widget:e})=>{const t=f.useMemo(()=>({lineHeight:1.3}),[]);return o.jsx("div",{className:"px-sm py-xs relative h-full",children:o.jsx("div",{className:"p-xs flex h-full flex-col",children:o.jsxs("div",{className:"flex grow items-center gap-2",children:[o.jsx("div",{className:"bg-subtle flex size-8 shrink-0 items-center justify-center rounded-md",children:o.jsx(Gd,{unified:e.emoji,size:"small"})}),o.jsx(D,{className:"line-clamp-2 text-ellipsis text-pretty",variant:"tinyRegular",style:t,children:e.title})]})})})});G4e.displayName="SpaceHomepageWidget";const xsn=({event:e})=>{const[t,n]=f.useState("scoring"),{$t:r}=Z(),s=G_(e.event.teams),a=e.event.pbp,i=s0(e.event),l=f.useMemo(()=>a.reduce((c,u)=>(c[u.period]||(c[u.period]=[]),c[u.period]?.push(u),c),{}),[a]);return o.jsx(H,{variant:"subtler",className:"rounded-md",children:o.jsx(dT,{title:t==="all"?"Play-by-Play":"Scoring Plays",titleClassName:"!py-0",trailing:o.jsx(J_,{size:"small",actionList:[{text:r({defaultMessage:"Scoring Plays",id:"DpgdMYgrGb"}),show:!0,onClick:()=>n("scoring"),active:t==="scoring"},{text:r({defaultMessage:"All Plays",id:"lVQ27GyPmi"}),show:!0,onClick:()=>n("all"),active:t==="all"}],layoutGroupId:"nfl-play-summary-tab-bar",layout:"right"}),children:o.jsx("div",{className:"-my-md",children:o.jsx(sBt,{plays:l,teams:s,brands:e.brands,drives:e.event.driveChart,mode:t,isLive:i})})})})},sBt=({plays:e,teams:t,brands:n,drives:r,mode:s,isLive:a})=>{const i=a?[...Object.keys(e)].reverse():Object.keys(e);return o.jsx("div",{children:i.map(l=>o.jsx("div",{children:o.jsx(aBt,{plays:e[parseInt(l)]??ue,teams:t,brands:n,drives:r,mode:s,isLive:a,period:parseInt(l)})},l+s))})},aBt=({plays:e,teams:t,brands:n,drives:r,mode:s,isLive:a,period:i})=>{const[l,c]=f.useState(!1),u=f.useMemo(()=>Object.values(e).flat().reduce((p,h)=>(p[h.driveId]||(p[h.driveId]=[]),p[h.driveId]?.push(h),p),{}),[e]),d=()=>{c(!0)};return!Object.keys(u).some(p=>r.find(h=>h.driveId===parseInt(p))?.driveStats.isScoringDrive==="true")&&s==="scoring"?null:o.jsxs(o.Fragment,{children:[o.jsx(D,{variant:"smallCaps",color:"light",className:"-mx-md bg-subtle p-xs px-md",children:kW(i,{asOrdinal:!0})}),o.jsx("div",{className:B("group/plays flex flex-col",{"flex-col-reverse":a}),children:Object.keys(u).map(p=>{const h=r.find(g=>g.driveId===parseInt(p));return s==="scoring"&&h?.driveStats.isScoringDrive==="false"?null:o.jsx(cBt,{brands:n,teams:t,plays:u[parseInt(p)]??ue,drives:r,isLive:a,period:i,onExpand:d,hasExpanded:l},p)})})]})},oBt=e=>{if(!e)return;const t=+e.driveStats.timeOfPossession.seconds;return t<10?`${e.driveStats.timeOfPossession.minutes}:0${t}`:`${e.driveStats.timeOfPossession.minutes}:${t}`},iBt=e=>e?e.driveEnd.playType.playTypeId===20:!1,lBt=e=>e?e.driveEnd.gameClock.minutes!==null:!1,cBt=({brands:e,teams:t,plays:n,drives:r,isLive:s,period:a,onExpand:i,hasExpanded:l})=>{const{$t:c}=Z(),u=r.find(x=>x.driveId===n[0]?.driveId),d=lBt(u),[m,p]=f.useState(!1),h=Dg(u?.teamId??n[0]?.endPossession.teamId??"",e,"nfl"),g=f.useMemo(()=>{const x=oBt(u);return c({defaultMessage:"{count, plural, one {# Play} other {# Plays}}, {yards, plural, one {# Yard} other {# Yards}}, {duration}",id:"segO/liubc"},{count:u?.driveStats.plays,yards:u?.driveStats.yards,duration:x})},[c,u]),y=f.useMemo(()=>u?.driveEnd.period&&u.driveEnd.period!==a?c({defaultMessage:"End of Quarter",id:"tY+g5ifXSh"}):u?.driveEnd.driveChartPlayName??c({defaultMessage:"Active Drive",id:"9WRCeRXYnG"}),[c,u,a]),v=iBt(u)?Dg(t.find(x=>x.teamId!==h.teamId)?.teamId??h.teamId,e,"nfl"):h;return f.useEffect(()=>{s&&!d&&!l&&!m&&p(!0)},[]),f.useEffect(()=>{d&&!l&&p(!1)},[d,l]),o.jsxs(H,{className:B("py-sm relative border-b",{"!border-transparent":m},{"first:border-b-0":s},{"last:border-b-0":!s}),children:[o.jsx("div",{className:B("-inset-x-md bg-subtler absolute inset-y-0 duration-200",{"opacity-0":!m})}),u&&u.driveEnd.period>a&&o.jsx("div",{className:B("bg-inverse/25 w-two absolute left-[calc(12px-1px)]",{"top-lg bottom-0":!s,"h-lg top-0":s})}),u&&u.driveStart.period<a&&o.jsx("div",{className:B("bg-inverse/25 w-two absolute left-[calc(12px-1px)]",{"h-lg top-0":!s,"top-lg bottom-0":s})}),o.jsxs("div",{className:"gap-md relative flex cursor-pointer items-center",onClick:()=>{p(!m),i()},children:[o.jsx(Es,{size:"small",logo:v.logo,color:v.color,className:"!border-subtlest relative"}),o.jsxs("div",{className:"flex-1",children:[o.jsx(D,{variant:"smallBold",children:o.jsx("span",{className:"uppercase",children:y})}),o.jsx(D,{variant:"tiny",color:"light",children:g})]}),o.jsxs("div",{className:"gap-lg grid grid-cols-2",children:[t[0]&&o.jsx(Rae,{team:t[0],score:n[n.length-1]?.awayScoreAfter??0,didScore:(n[n.length-1]?.awayScoreAfter??0)>(n[0]?.awayScoreBefore??0)}),t[1]&&o.jsx(Rae,{team:t[1],score:n[n.length-1]?.homeScoreAfter??0,didScore:(n[n.length-1]?.homeScoreAfter??0)>(n[0]?.homeScoreBefore??0)})]}),o.jsx(D,{variant:"small",className:"flex items-center",children:o.jsx(ce,{icon:m?ey:Dn,size:"sm",className:"text-quiet"})})]}),o.jsx(zs,{className:"relative",mode:"popLayout",transition:{duration:.2,ease:rn},children:m&&o.jsx(Qr,{className:"w-full",initial:{opacity:0,y:-5},animate:{opacity:1,y:0,transition:{duration:.2,ease:rn,delay:.05}},exit:{opacity:0,y:-5,transition:{duration:.2,ease:rn}},children:o.jsx(ge.div,{layout:!0,layoutRoot:!0,children:(s?[...n].reverse():n).map(x=>o.jsx(dBt,{play:x},x.playId))})})})]})},Rae=({team:e,score:t,didScore:n})=>o.jsxs("div",{children:[o.jsx(D,{variant:"small",color:"light",className:"text-right uppercase",children:e.abbreviation}),o.jsxs(D,{variant:"small",className:"text-right align-baseline",color:n?"super":void 0,children:[n&&o.jsx(ce,{icon:cle,className:"mr-xs inline-block size-2"}),o.jsx("span",{className:"font-mono",children:t})]})]}),uBt=e=>{const t=e.match(/([A-Za-z]+)(\d+)/);if(!t)return e;const[n,r,s]=t;return`${r} ${s}`},kW=(e,t)=>[1,2,3,4].includes(e)?t?.asOrdinal?f3e(e):`Q${e}`:"OT",dBt=({play:e})=>o.jsxs(ge.div,{layout:"position",initial:{opacity:0},animate:{opacity:1},className:"gap-md group flex w-full",children:[o.jsx("div",{className:"w-[24px] shrink-0"}),o.jsx(H,{className:"gap-md py-sm group-last:-mb-sm flex flex-1 border-b group-last:border-b-0",children:o.jsxs("div",{children:[o.jsxs(D,{variant:"small",children:[e.down&&e.distance&&`${f3e(e.down)} & ${e.distance} at `,o.jsx("span",{className:"uppercase",children:uBt(e.yardLine)})]}),o.jsxs(D,{variant:"small",color:"light",children:["(",e.time," - ",kW(e.period),") ",e.playText]})]})})]});function bsn({event:e,brands:t,isLive:n}){const{$t:r}=Z(),[s,a]=f.useState(!1),[i,l]=f.useState("all"),c=f.useMemo(()=>e.pbp.filter(d=>i==="all"?Pae(d):Pae(d)&&mBt(d)).reduce((d,m)=>(d[m.period]=d[m.period]||[],d[m.period]?.push(m),d),{}),[e?.pbp,i]),u=f.useMemo(()=>[{text:r({defaultMessage:"All Plays",id:"lVQ27GyPmi"}),onClick:()=>l("all"),show:!0,active:i==="all"},{text:r({defaultMessage:"Scoring Plays",id:"DpgdMYgrGb"}),onClick:()=>l("scoring"),show:!0,active:i==="scoring"}],[i,r]);return o.jsxs(o.Fragment,{children:[o.jsx(H,{variant:"subtler",className:"rounded-md",children:o.jsx(dT,{title:r(n?{defaultMessage:"Play by Play",id:"g2y6uMg3RU"}:{defaultMessage:"Play Summary",id:"HtqDGZkC7q"}),trailing:o.jsx("div",{className:"-mb-sm",children:o.jsx(J_,{actionList:u,layoutGroupId:"nba-play-summary-tab-bar",layout:"right",size:"tiny"})}),children:o.jsx("div",{className:"-my-md",children:o.jsx(TW,{plays:c,event:e,onViewAll:()=>a(!0),playsToRender:6,reverse:n,brands:t,inModal:!1})})})}),s&&o.jsx(pBt,{plays:c,isOpen:s,onClose:()=>a(!1),event:e,brands:t,reverse:n})]})}const TW=f.memo(({plays:e,event:t,onViewAll:n,playsToRender:r=1/0,reverse:s=!1,brands:a,inModal:i=!1})=>{const{$t:l}=Z(),c=G_(t.teams),u=s?[...Object.keys(e)].reverse():Object.keys(e),d=f.useMemo(()=>{let m=r;return o.jsxs(H,{children:[u.map(p=>{let h=0;const g=e[p]?.length??0;return m<=0?null:(m<g?(h=m,m=0):(h=g,m-=g),o.jsx(fBt,{plays:e[p]??ue,playsToRender:h,teamsSorted:c,period:p,reverse:s,brands:a},p))}),!i&&n&&o.jsx("div",{className:"-mx-sm py-sm flex items-center justify-center",children:o.jsx(Te,{variant:"super",chevron:!0,chevronIcon:Kn,text:l({defaultMessage:"View All",id:"wbcwKddwLa"}),fullWidth:!0,size:"small",onClick:n})})]})},[e,r,c,s,i,n,l,u,a]);return i?d:o.jsx(zs,{className:"relative",mode:"popLayout",transition:{duration:.2,ease:rn},children:o.jsx(Qr,{children:d})})});TW.displayName="PlaysByPeriod";function fBt({plays:e,playsToRender:t,teamsSorted:n,period:r,reverse:s,brands:a}){const i=f.useMemo(()=>s?[...e].reverse():e,[e,s]),l=Ms();return o.jsxs(H,{children:[t>0&&o.jsx("div",{children:o.jsxs(H,{variant:"subtle",className:B("-mx-md px-md py-sm flex items-center justify-between"),children:[o.jsx(D,{variant:"smallCaps",color:"light",children:kW(parseInt(r))}),o.jsxs("div",{className:"gap-md flex items-center",children:[o.jsx(Lae,{team:n[0]?.abbreviation??""}),o.jsx(Lae,{team:n[1]?.abbreviation??""})]})]})}),o.jsx(rc,{children:o.jsx(ge.div,{layout:!0,layoutRoot:!0,children:i.slice(0,t).map((c,u)=>{const d=i[u-(s?-1:1)]?.visitorScore??0,m=i[u-(s?-1:1)]?.homeScore??0;return o.jsx(K4e,{play:c,previousHomeScore:m,previousVisitorScore:d,brands:a,parentHasMounted:l},c.playId)})})})]})}function q4e(e){const t=e?.minutes||0,n=Math.ceil(e.seconds??0)?.toString().padStart(2,"0")||"00";return`${`${t}:`}${n}`}const Pae=e=>e.playText!=="Starting Lineup",mBt=e=>e.playEvent.playEventId===3||e.playEvent.playEventId===1,K4e=f.memo(({play:e,previousHomeScore:t,previousVisitorScore:n,brands:r,parentHasMounted:s})=>{const a=f.useRef(!s),i=t!==void 0&&t!==e.homeScore,l=n!==void 0&&n!==e.visitorScore,c=i||l,u=Dg(e.teamId,r,"nba"),{colorScheme:d}=Wr(),m=pM(u.color,d);return o.jsxs(ge.div,{className:"-mx-md border-subtlest p-md relative border-b",initial:a.current?void 0:{opacity:0},animate:a.current?void 0:{opacity:1},transition:{layout:{duration:.2,ease:rn},opacity:{duration:.2,ease:la}},layout:"position",children:[c&&o.jsx("div",{className:"w-xs absolute inset-y-1 left-1 rounded-full opacity-50",style:{backgroundColor:m}}),!a.current&&o.jsx(ge.div,{className:"bg-super/15 absolute inset-0",initial:{opacity:1},animate:{opacity:0},transition:{duration:1,ease:la,delay:.2}}),o.jsxs("div",{className:"gap-md relative flex items-center",children:[o.jsx(Es,{logo:u.logo,color:u.color,size:"small",includeStripe:!1}),o.jsxs("div",{className:"gap-xs flex flex-1 flex-col items-start",children:[o.jsx(D,{variant:"smallCaps",color:"light",children:q4e(e.time)}),o.jsx(D,{variant:"small",children:e.playText})]}),o.jsxs("div",{className:"gap-md flex items-center",children:[o.jsx(Oae,{score:e.visitorScore,didScore:l}),o.jsx(Oae,{score:e.homeScore,didScore:i})]})]})]})});K4e.displayName="Play";const Oae=({score:e,didScore:t})=>o.jsxs(D,{variant:"small",className:"relative w-[40px] text-right align-baseline",color:t?"super":void 0,children:[t&&o.jsx(ce,{icon:cle,className:"mr-xs inline-block size-2"}),o.jsx("span",{className:"font-mono",children:e})]}),Lae=({team:e})=>o.jsx(D,{variant:"smallCaps",className:"w-[40px] shrink-0 text-right",children:e}),pBt=({plays:e,isOpen:t,onClose:n,event:r,brands:s,reverse:a})=>{const{isMobileStyle:i}=xe();return o.jsx(en,{isOpen:t,onClose:n,variant:i?"bottom-sheet":"side-sheet",children:o.jsx("div",{className:"min-h-full",children:o.jsx(TW,{plays:e,event:r,brands:s,inModal:!0,reverse:a})})})},Y4e=I.memo(({widget:e})=>{const{data:t}=e;return t.event_status.eventStatusId===2||t.event_status.eventStatusId===4?o.jsx(X4e,{widget:e}):o.jsx(Q4e,{widget:e})});Y4e.displayName="SportsHomepageWidget";const Q4e=I.memo(({widget:e})=>{const{$t:t}=Z(),{data:n}=e,{away_team:r,home_team:s}=n,{locale:a}=Z(),i=f.useMemo(()=>{const l=new Date(n.start_date);return v3(l)?`${l.toLocaleString(a,{hour:"numeric",minute:"2-digit"})}, ${t({defaultMessage:"Today",id:"zWgbGgjUUg"})}`:l.toLocaleString(a,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})},[n,a,t]);return o.jsxs("div",{className:B("py-sm flex h-full flex-col items-center justify-center px-[12px]"),children:[o.jsxs("div",{className:"grid w-full grid-cols-[1fr_auto_1fr] items-center",children:[o.jsx("div",{className:"flex items-center justify-start",children:o.jsx(Es,{logo:r.logo,color:r.color,size:"small"})}),o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(D,{variant:"tinyRegular",className:"truncate",children:i})}),o.jsx("div",{className:"flex items-center justify-end",children:o.jsx(Es,{logo:s.logo,color:s.color,size:"small"})})]}),o.jsxs("div",{className:"mt-xs flex w-full items-center justify-between",children:[o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx(D,{variant:"tinyRegular",className:"truncate text-start leading-tight",color:"light",children:r.nickname})}),o.jsx("div",{className:"px-2",children:o.jsx(D,{variant:"tinyRegular",className:"truncate leading-tight",color:"light",children:"vs"})}),o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx(D,{variant:"tinyRegular",className:"truncate text-end leading-tight",color:"light",children:s.nickname})})]})]})});Q4e.displayName="PreviewContent";const X4e=I.memo(({widget:e})=>{const{$t:t}=Z(),{data:n}=e,{away_team:r,home_team:s,event_status:a,league:i}=n,{minutes:l,seconds:c}=a,u=a.eventStatusId===2,d=a.eventStatusId===4,m=cke(t,i.toLowerCase()),p=d?t({defaultMessage:"Final",id:"6/JzkWi0di"}):l!=null&&c!=null?q4e({minutes:l,seconds:c}):null,h=d||!a.period?null:`Q${a.period}`,y=lke(a)?t({defaultMessage:"Halftime",id:"iC0AL294Dr"}):d?t({defaultMessage:"Final",id:"6/JzkWi0di"}):h&&p?`${h} ${p}`:"";return o.jsxs("div",{className:B("p-sm flex h-full flex-col items-center justify-center"),children:[o.jsxs("div",{className:"grid w-full grid-cols-[1fr_auto_1fr] items-center",children:[o.jsxs("div",{className:"flex items-center justify-start",children:[o.jsx(Es,{logo:r.logo,color:r.color,size:"small"}),r.score!==void 0&&o.jsxs("div",{className:"ml-sm flex flex-col items-center justify-center",children:[o.jsx(D,{variant:r.sub_score?"tinyRegular":"base",className:"truncate leading-tight",color:"default",children:r.score}),r.sub_score&&o.jsx(D,{variant:"tinyRegular",color:"light",className:"truncate",children:r.sub_score})]})]}),o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(D,{variant:"tinyRegular",className:"truncate",children:y})}),o.jsxs("div",{className:"flex items-center justify-end",children:[s.score!==void 0&&o.jsxs("div",{className:"mr-sm flex flex-col items-center",children:[o.jsx(D,{variant:s.sub_score?"tinyRegular":"base",className:"truncate leading-tight",color:"default",children:s.score}),s.sub_score&&o.jsx(D,{variant:"tinyRegular",color:"light",className:"truncate",children:s.sub_score})]}),o.jsx(Es,{logo:s.logo,color:s.color,size:"small"})]})]}),o.jsxs("div",{className:"mt-xs flex w-full items-center justify-between",children:[o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx(D,{variant:"tinyRegular",className:"truncate text-start leading-tight",color:"light",children:r.nickname})}),o.jsx("div",{className:"px-2",children:u?o.jsx(Z4e,{}):d&&o.jsx(D,{variant:"tinyRegular",className:"truncate leading-tight",color:"light",children:m})}),o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx(D,{variant:"tinyRegular",className:"truncate text-end leading-tight",color:"light",children:s.nickname})})]})]})});X4e.displayName="SummaryContent";const Z4e=I.memo(()=>o.jsx(D,{variant:"tinyRegular",color:"super",className:"bg-super/10 truncate rounded-full px-2 py-0.5 leading-tight",children:"Live"}));Z4e.displayName="LiveIndicator";const hBt={SPORTS:K9e,FINANCE:q9e},gBt="#8D9191",yBt=({watchlistType:e})=>{const t=hBt[e];return o.jsx(ce,{icon:t,color:gBt})},J4e=I.memo(({widget:e})=>{const{$t:t}=Z(),n=e.watchlist_type.toLowerCase(),r=t(Jv[n].title),s=t(Jv[n].widgetDescription);return o.jsxs("div",{className:"flex h-full flex-col items-start justify-between p-[12px]",children:[o.jsxs("div",{className:"gap-x-xs flex items-center",children:[o.jsx(yBt,{watchlistType:e.watchlist_type}),o.jsx(D,{variant:"tinyRegular",color:"light",children:r})]}),o.jsx("div",{children:o.jsx(D,{variant:"tinyRegular",children:s})})]})});J4e.displayName="WatchlistWidget";const eNe=I.memo(({location:e,forecast:t,prefersMetric:n})=>{const r="leading-none line-clamp-1",{$t:s}=Z(),a=n?t?.[0]?.maxtemp_c:t?.[0]?.maxtemp_f,i=n?t?.[0]?.mintemp_c:t?.[0]?.mintemp_f,l=s({defaultMessage:"H: {high} L: {low}",id:"JyTe6EoY40"},{high:a,low:i});return f.useMemo(()=>o.jsxs("div",{className:"mt-sm gap-sm flex flex-row items-baseline justify-between",children:[o.jsx(D,{variant:"tinyRegular",className:r,color:"light",children:e?.name}),o.jsx(D,{variant:"tinyRegular",className:B(r,"min-w-max"),color:"ultraLight",children:l})]}),[l,e?.name,r])});eNe.displayName="WeatherBottomSection";const vBt=({icon:e})=>{const t=OM(bk,e)?B1[e]:vb;return o.jsx(ce,{icon:t,size:"md",className:"self-start"})},tNe=I.memo(({forecast:e,prefersMetric:t})=>{const{locale:n}=Z(),r="row-span-3",s="leading-none line-clamp-1";return o.jsx("div",{className:B(r,"mt-sm flex flex-grow justify-between"),children:e?.slice(0,5).map((a,i)=>{const l=t?a.maxtemp_c:a.maxtemp_f;return o.jsxs(ge.div,{className:"gap-xs flex flex-col items-start",initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{delay:.025*i,ease:Ya},children:[o.jsx(D,{className:"leading-none",children:o.jsx(vBt,{icon:a.icon})}),o.jsxs(D,{variant:"tinyRegular",className:B(s,"mt-xs"),children:[l,""]}),o.jsx(D,{variant:"tinyRegular",className:s,color:"light",children:tU(a.dow??"",n)})]},a.dow)})})});tNe.displayName="WeatherForecast";const xBt=({icon:e})=>{const t=OM(bk,e)?B1[e]:vb;return o.jsx(ce,{icon:t,size:"md",className:"-mt-two mr-xs self-start"})},nNe=I.memo(({current:e,prefersMetric:t,setPrefersMetric:n})=>{const r="leading-none line-clamp-1",s=t?e?.temp_c:e?.temp_f,a=e?.condition?.text??"Sunny";return o.jsxs("div",{className:"gap-sm flex flex-row items-center justify-between",children:[o.jsx(D,{variant:"base",className:B(r,"min-w-max"),children:o.jsxs("div",{className:"gap-xs flex flex-row items-center justify-center",children:[o.jsx("div",{children:o.jsx(xBt,{icon:e?.condition?.icon})}),o.jsx(D,{variant:"base",className:"tabular-nums",children:o.jsx(ci,{value:s??0,suffix:""})}),o.jsxs("div",{className:"flex",children:[o.jsx("button",{onClick:()=>n(!1),className:"cursor-pointer appearance-none",children:o.jsx(D,{variant:"tiny",color:t?"light":"default",className:B("transition-opacity",t?"opacity-50 hover:opacity-70":"opacity-100"),children:"F"})}),o.jsx(D,{variant:"tiny",color:"light",className:"opacity-50",children:"/"}),o.jsx("button",{onClick:()=>n(!0),className:"cursor-pointer appearance-none",children:o.jsx(D,{variant:"tiny",color:t?"default":"light",className:B("transition-opacity",t?"opacity-100":"opacity-50 hover:opacity-70"),children:"C"})})]})]})}),o.jsx(D,{variant:"tinyRegular",color:"light",className:r,children:a})]})});nNe.displayName="WeatherTopSection";const rNe=I.memo(({data:e,isLoading:t,error:n,size:r="LARGE"})=>{const{prefersMetric:s,setPrefersMetric:a}=ETe();return t?o.jsx(sNe,{size:r}):n||!e?o.jsx(aNe,{}):o.jsx(NW,{data:e,size:r,prefersMetric:s,setPrefersMetric:a})});rNe.displayName="WeatherDisplay";const NW=I.memo(({data:e,prefersMetric:t,setPrefersMetric:n,size:r="LARGE"})=>{const{current:s,location:a,forecast:i}=e;return o.jsxs(ge.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)",transition:{opacity:{ease:Ya,duration:.4},filter:{ease:Ya,duration:.4}}},exit:{opacity:0,filter:"blur(2px)",transition:{opacity:{ease:Ya,duration:.3},filter:{ease:Ya,duration:.3}}},className:B("gap-sm grid size-full",r==="LARGE"?"grid-rows-4":"grid-rows-2"),children:[o.jsx(nNe,{current:s,prefersMetric:t,setPrefersMetric:n}),o.jsx(eNe,{location:a,forecast:i,prefersMetric:t}),r==="LARGE"&&o.jsx(tNe,{forecast:i,prefersMetric:t})]},"success")});NW.displayName="WeatherInner";const bBt={action:{type:"CREATE_THREAD",query:"weather",prefer_pro:!1},uuid:"123",type:"WEATHER",current:{temp_c:20,temp_f:68,condition:{text:"Sunny",icon:"sun",code:"sun"}},location:{name:"San Francisco",region:"California",country:"USA"},forecast:[],is_metric_preferred:!1},sNe=I.memo(({size:e="LARGE"})=>{const t=f.useCallback(()=>{},[]);return o.jsxs(yn,{className:B("relative"),children:[o.jsx("div",{className:"invisible",children:o.jsx(NW,{data:bBt,size:e,prefersMetric:!0,setPrefersMetric:t})}),o.jsxs("div",{className:B("gap-sm absolute inset-0 grid size-full",e==="LARGE"?"grid-rows-4":"grid-rows-2"),children:[o.jsxs("div",{className:"gap-sm flex flex-row items-center justify-between",children:[o.jsxs("div",{className:"gap-sm flex flex-row items-center",children:[o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle size-4 rounded-full"}),o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-5 w-12 rounded"})]}),o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-4 w-20 rounded"})]}),o.jsxs("div",{className:"gap-sm flex flex-row items-baseline justify-between",children:[o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-3 w-16 rounded"}),o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-3 w-14 rounded"})]}),e==="LARGE"&&o.jsx("div",{className:B("row-span-3 flex flex-grow justify-between"),children:[1,2,3,4,5].map(n=>o.jsxs("div",{className:"gap-xs flex flex-col items-start",children:[o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle size-4 rounded-full"}),o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle mt-xs h-3 w-6 rounded"}),o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-3 w-8 rounded"})]},n))})]})]})});sNe.displayName="WeatherSkeleton";const aNe=I.memo(()=>o.jsx("div",{className:"gap-sm py-md flex size-full flex-col items-center justify-center",children:o.jsxs("div",{className:"gap-xs flex flex-col items-center text-center",children:[o.jsx(ce,{icon:Pie,size:"lg",className:"opacity-50"}),o.jsx(D,{variant:"tinyRegular",color:"light",className:"mt-sm leading-tight",children:o.jsx(pe,{defaultMessage:"Unable to load weather",id:"uwWuSjxDbt"})}),o.jsx(D,{variant:"tinyRegular",color:"ultraLight",className:"leading-tight",children:o.jsx(pe,{defaultMessage:"Please try again later",id:"aoWE202GwV"})})]})}));aNe.displayName="WeatherError";const oNe=I.memo(({widget:e,setShowCTA:t,size:n})=>{const{location:r,permissionStatus:s}=Ny(),a=r?.latitude??null,i=r?.longitude??null,{locale:l}=Z(),{data:c,isLoading:u,error:d}=We({queryKey:[MU,a,i].map(String),queryFn:()=>s0e({locale:l,location:r,reason:"weather-homepage-widget"})??e,initialData:e,refetchInterval:1e3*60*5,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0});return f.useEffect(()=>{s!==void 0&&s!=="granted"&&t(!0)},[s,t]),o.jsx("div",{className:"px-sm pt-xs",children:o.jsx(rNe,{data:c,isLoading:u,error:d,size:n})})});oNe.displayName="WeatherHomepageWidget";const Dae=e=>Br(e).with({type:"ANNOUNCEMENT"},()=>"announcement").with({type:"DISCOVER"},()=>"discover_single_page").with({type:"QUERY"},t=>t.prompt.toLowerCase()).with({type:"WEATHER"},()=>"weather_current").with({type:"FINANCE"},()=>"finance_ticker").with({type:"SPORTS"},()=>"sports_game").with({type:"WATCHLIST"},()=>"watchlist").with({type:"MULTIQUERY"},t=>(t.prompt??"Ask").toLowerCase()).with({type:"SPACE"},t=>t.title.toLowerCase()).exhaustive(),_Bt=(e,t,n,r="home")=>{const{trackEvent:s}=Ne(),[a,i]=f.useState(!1),l=f.useMemo(()=>{const v=Br(e).with({type:"ANNOUNCEMENT"},b=>({title:b.title,text:b.text,variant:b.variant})).with({type:"DISCOVER"},b=>({title:b.title})).with({type:"QUERY"},b=>({prompt:b.prompt,query:b.query,uuid:b.uuid,educational_type:b.educational_type})).with({type:"WEATHER"},b=>({location:b.location.name})).with({type:"FINANCE"},b=>({ticker:b.quotes[0]?.symbol,is_implicit:b.is_implicit??!1})).with({type:"WATCHLIST"},b=>({type:b.watchlist_type})).with({type:"SPACE"},b=>({title:b.title})).otherwise(()=>({})),x=e.action.type==="MULTIQUERY"?e.action.actions.map(b=>({...b,type:b.type.toLowerCase()})):{...e.action,type:e.action.type.toLowerCase()};return{widgetType:e.type.toLowerCase(),widgetName:Dae(e),widgetCTA:x,widgetLocation:r,widgetSize:`grid_${(e.size??"MEDIUM").toLowerCase()}`,position:t,frontendUUID:n,metadata:v,uuid:e.uuid}},[e,t,n,r]),c=f.useCallback(()=>{a||(s("widget viewed",l),i(!0))},[l,s,a]),u=f.useCallback(()=>{s("widget selected",l)},[l,s]),d=f.useCallback(()=>{s("widget dismissed",l)},[l,s]),m=f.useCallback(()=>{s("widget hovered",l)},[l,s]),p=f.useCallback(v=>{if(e.type!=="MULTIQUERY")return;const x=e.action.actions.find(b=>b.query===v);if(x)return{widgetType:e.type.toLowerCase(),widgetName:Dae(e),widgetLocation:r,widgetSize:`grid_${(e.size??"MEDIUM").toLowerCase()}`,position:t,frontentUUID:n,metadata:{prompt:e.prompt,query:x.query,uuid:x.uuid??null}}},[e,t,n,r]),h=f.useCallback(v=>{const x=p(v);x&&s("widget selected",x)},[p,s]),g=f.useCallback(v=>{const x=p(v);x&&s("widget hovered",x)},[p,s]),y=f.useCallback(v=>{const x=p(v);x&&s("widget viewed",x)},[p,s]);return f.useMemo(()=>({trackView:c,trackClick:u,trackDismiss:d,trackHover:m,trackMultiQueryClick:h,trackMultiQueryHover:g,trackMultiQueryView:y}),[u,d,m,h,g,y,c])},wBt=()=>{const{submitQuery:e}=Hs(),t=gt(),{openModal:n}=xt(),r=Swe(),{device:{isWindowsApp:s}}=At(),{setUserInput:a,setShouldTriggerFocus:i}=a_(),{blankStateSuggestions:l}=Ws(),{setSuggestions:c}=Lo(),u=Pa(),{onHomepageTitleChange:d}=YUt(),{setFileUploadUpsellTooltipOpen:m}=Lo(),{deprecatedOpenToast:p}=gn(),h=rt(),{hasAccessToProFeatures:g}=_t(),{session:y}=Et(),v=y?.user?.email??"",{isStudent:x}=f3({email:v,reason:"study-mode-access"}),_=IT({onSuccess:kn,onError:T=>{p(T,"error",5)},origin:"homepage_primer"}),w=f.useCallback(T=>{const j=lo();e({rawQuery:T.query,copilotOverride:T.prefer_pro,attachments:T.attachments,collection:null,newFrontendContextUUID:j,promptSource:"homepage_widget",querySource:"homepage_widget",sourcesOverride:["web"],modelPreferenceOverride:T.prefer_pro?"pplx_pro":"turbo",shouldRedirectToBackendUUID:!0})},[e]),C=f.useCallback(T=>{a(T.input_prefix),i(!0),T.suggestions&&T.suggestions.length>0?c(T.suggestions.map(({query:j,submission_query:F})=>({query:j,submission_query:F??void 0}))):T.suggestions&&T.suggestions.length===0&&l[u]&&c(l[u]),T.homepage_tagline&&d(T.homepage_tagline),T.trigger_location_prompt&&_(),T.trigger_file_tooltip&&m(!0),T.trigger_deep_research&&h&&r(le.ALPHA,ie.RESEARCH),T.trigger_labs&&h&&g&&r(le.BETA,ie.STUDIO),T.trigger_study_mode&&h&&x&&r(le.STUDY,ie.STUDY)},[a,i,h,c,l,d,_,m,r,u,g,x]),S=f.useCallback((T,j)=>{const F=T.find(U=>U.query===j);F&&w(F)},[w]),E=f.useCallback(T=>{t.push(`/page/${T.page_slug}`)},[t]),M=f.useCallback(T=>{s?J2(T):window.open(T,"_blank")},[s]),k=f.useCallback((T,j)=>{const F=T.should_interpolate_template&&j?zge(T.permalink,j):T.permalink;M(F)},[M]),A=f.useCallback(T=>{s?J2(T.permalink):t.push(T.permalink)},[t,s]),R=f.useCallback(()=>{t.push("/pro")},[t]),O=f.useCallback(T=>{T.deep_research?r(le.ALPHA):r(le.PRO)},[r]),L=f.useCallback(T=>{n("watchlistModal",{origin:"home",watchlistType:T.watchlist_type})},[n]),P=f.useCallback(T=>{n("spaceCreate",{existingCollection:null,onCreate:null,content:{title:T.space_title??void 0,description:T.space_description??void 0,instructions:T.space_instructions??void 0,emoji:T.space_emoji??void 0}})},[n]),N=f.useCallback(T=>{T.modal_name&&n(T.modal_name)},[n]);return f.useMemo(()=>({createThreadAction:w,populateInputAction:C,multiQueryCreateThreadAction:S,openPageAction:E,openExternalUrlAction:k,openInternalUrlAction:A,openPaywallAction:R,enableProAction:O,openWatchlistModalAction:L,createSpaceAction:P,openModalAction:N}),[P,w,O,S,k,A,N,E,R,L,C])},CBt=e=>["ANNOUNCEMENT","QUERY"].includes(e.type),iNe=I.memo(({onClick:e,onMouseEnter:t,href:n,className:r,children:s,disableHoverAnimation:a=!1})=>{const i=n?V4e:ge.div,l=f.useMemo(()=>({opacity:.5}),[]),c=f.useMemo(()=>({opacity:1}),[]),u=f.useMemo(()=>({scale:.98,transition:{ease:rn,duration:.15}}),[]),d=f.useMemo(()=>({scale:{ease:rn,duration:.3},opacity:{ease:Ya,duration:.3}}),[]);return o.jsx(i,{initial:l,animate:c,whileHover:a?void 0:{opacity:.75,transition:{duration:.15,ease:la}},whileTap:u,transition:d,className:B(r,a?"":"cursor-pointer"),href:n,onClick:e,onMouseEnter:t,children:o.jsx(H,{variant:"subtler",className:"relative size-full select-none overflow-hidden rounded-lg",children:s})})});iNe.displayName="AnimatedWidgetContainer";const lNe=I.memo(({widget:e,size:t,position:n,frontendSessionUUID:r,widgetLocation:s="home"})=>{const a="homepage-widget-base",[i,l]=f.useState(!1),[c,u]=f.useState(!1),d=rt(),{showSuggestDropdown:m}=Ws(),{trackView:p,trackHover:h,trackClick:g,trackDismiss:y,trackMultiQueryClick:v,trackMultiQueryHover:x,trackMultiQueryView:b}=_Bt(e,n,r,s),{createThreadAction:_,openPageAction:w,openExternalUrlAction:C,openInternalUrlAction:S,openPaywallAction:E,enableProAction:M,openWatchlistModalAction:k,multiQueryCreateThreadAction:A,populateInputAction:R,createSpaceAction:O,openModalAction:L}=wBt(),{mutate:P}=Wlt({widget:e,reason:a}),N=Wo(),{session:T}=Et(),j=f.useMemo(()=>({email:T?.user?.email??"",deviceId:N?.device_id??"",browserVersion:N?.browser_version??"",osName:void 0??""}),[T?.user?.email,N?.device_id,N?.browser_version]),U=(X=>Br(X).with({type:"CREATE_THREAD"},G=>`/search/new?q=${G.query}&source=homepage_widget`).with({type:"OPEN_PAGE"},G=>`/page/${G.page_slug}`).with({type:"EXTERNAL_URL"},G=>G.should_interpolate_template?zge(G.permalink,j):G.permalink).with({type:"INTERNAL_URL"},G=>G.permalink).otherwise(()=>{}))(e.action),V=f.useRef(!1);f.useEffect(()=>{if(!V.current){if(e.type!=="MULTIQUERY")p();else for(const X of e.queries)b(X);V.current=!0}},[p,e,b]);const $=UO(e),z=f.useCallback(X=>{U&&X.preventDefault(),Br(e.action).with({type:"CREATE_THREAD"},G=>{_(G)}).with({type:"OPEN_PAGE"},G=>w(G)).with({type:"EXTERNAL_URL"},G=>C(G,j)).with({type:"PAYWALL"},E).with({type:"INTERNAL_URL"},G=>S(G)).with({type:"ENABLE_PRO"},G=>M(G)).with({type:"OPEN_WATCHLIST_MODAL"},G=>k(G)).with({type:"MULTIQUERY"},()=>{}).with({type:"POPULATE_INPUT"},G=>{R(G)}).with({type:"CREATE_SPACE"},G=>{O(G)}).with({type:"OPEN_MODAL"},G=>{L(G)}).exhaustive(),CBt(e)&&e.dismissable&&d&&(P(),y()),e.type!=="MULTIQUERY"&&g()},[U,e,E,d,_,w,C,j,S,M,k,O,R,P,y,g,L]),Q=f.useCallback(()=>{e.type!=="MULTIQUERY"&&h()},[e.type,h]),Y=f.useMemo(()=>Br(e).with({type:"ANNOUNCEMENT"},X=>o.jsx(O4e,{widget:X,size:t})).with({type:"DISCOVER"},X=>o.jsx(L4e,{widget:X,size:t})).with({type:"QUERY",educational_type:"primer"},X=>o.jsx(H4e,{widget:X,onClick:z,onMouseEnter:Q,index:n})).with({type:"QUERY",educational_type:"project"},X=>o.jsx(z4e,{widget:X})).with({type:"QUERY"},X=>o.jsx(MW,{widget:X,size:t})).with({type:"WEATHER"},X=>o.jsx(oNe,{widget:X,setShowCTA:u,size:t})).with({type:"FINANCE"},X=>o.jsx(U4e,{widget:X,size:t})).with({type:"SPORTS"},X=>o.jsx(Y4e,{widget:X,size:t})).with({type:"WATCHLIST"},X=>o.jsx(J4e,{widget:X,size:t})).with({type:"SPACE"},X=>o.jsx(G4e,{widget:X,size:t})).with({type:"MULTIQUERY"},X=>o.jsx(W4e,{widget:X,onQueryClick:G=>{A(X.action.actions,G),v(G)},onQueryHover:G=>x(G)})).otherwise(()=>(ne.error(new Error(`No HomepageWidget found for type: ${e.type}`)),null)),[e,t,z,Q,n,A,v,x]),W=f.useMemo(()=>Br(e.type).with("WEATHER",()=>o.jsx(F4e,{setShowCTA:u})).otherwise(()=>null),[e.type]);return!Y||m?null:o.jsxs("div",{className:B("relative",eBt[t]),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[$?Y:o.jsx(iNe,{href:U,onClick:z,onMouseEnter:Q,className:"size-full",disableHoverAnimation:e.type==="MULTIQUERY",children:Y}),o.jsx(Ke,{children:c&&i&&o.jsx(ge.div,{initial:{opacity:.5},animate:{opacity:1},exit:{opacity:0},transition:{scale:{ease:rn,duration:.2},opacity:{ease:Ya,duration:.2}},className:B("bg-subtler absolute inset-0 flex justify-center rounded-lg p-[12px]",t==="LARGE"?"items-end":"items-center"),children:W})})]})});lNe.displayName="HomepageWidgetBase";let Fae=1234567;function SBt(e){e!==void 0&&(Fae=e);let t=Fae+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}const EBt=5,cNe=f.memo(({children:e})=>o.jsx("div",{className:"gap-sm grid grid-cols-6",style:{gridTemplateRows:"repeat(auto-fit, 64px)",gridAutoRows:"64px"},children:e}));cNe.displayName="GridContainer";const MBt=({children:e})=>o.jsx("div",{className:"gap-sm flex h-[32px] flex-row flex-wrap justify-center overflow-hidden",children:e});var Od;(function(e){e[e.Comet=0]="Comet",e[e.Project=1]="Project"})(Od||(Od={}));const kBt=e=>{switch(e){case Od.Comet:return o.jsx(pe,{defaultMessage:"See what Comet can do",id:"TO5vylizup"});case Od.Project:return o.jsx(pe,{defaultMessage:"Projects created with Perplexity",id:"6XX3tVQOXy"})}},TBt=e=>{switch(e){case Od.Comet:return o.jsx(Io,{size:16});case Od.Project:return o.jsx(DM,{size:16})}},NBt=({variant:e,children:t})=>{const n=ht(),{$t:r}=Z(),s=f.useCallback(()=>{n.invalidateQueries({queryKey:[mg]})},[n]);return e?o.jsxs("div",{children:[o.jsxs("div",{className:"gap-sm pb-sm flex items-center justify-between",children:[o.jsxs("div",{className:"gap-xs flex flex-row items-center",children:[o.jsx(D,{variant:"smallBold",color:"super",children:TBt(e)}),o.jsx(D,{variant:"smallBold",color:"light",children:kBt(e)})]}),o.jsx("div",{children:o.jsx(Te,{size:"tiny",onClick:s,text:r({defaultMessage:"See more",id:"yoLwRWw99S"}),icon:j7})})]}),t]}):t},uNe=f.memo(({widgets:e,widgetLocation:t="home"})=>{const n=f.useMemo(()=>lo(),[]),r=not(),s=e.length>0;f.useEffect(()=>{s&&r("web.frontend.homepage_widgets_ttv")},[r,s]);const{flexWidgets:a,gridWidgets:i,headingVariant:l}=f.useMemo(()=>{const d=e.filter(UO).sort((h,g)=>SBt(h.seed)-.5).slice(0,EBt),m=e.filter(h=>!UO(h)),p=tBt(e)?Od.Comet:nBt(e)?Od.Project:void 0;return{flexWidgets:d,gridWidgets:m,headingVariant:p}},[e]),c=f.useCallback(u=>u.map((d,m)=>o.jsx(lNe,{widget:d,size:d.size??"MEDIUM",position:m,frontendSessionUUID:n,widgetLocation:t},d.uuid)),[n,t]);return o.jsx(Ke,{initial:!1,children:o.jsx(NBt,{variant:l,children:o.jsxs("div",{className:"gap-md grid grid-cols-1",children:[a.length>0&&o.jsx(MBt,{children:c(a)}),i.length>0&&o.jsx(cNe,{children:c(i)})]})})})});uNe.displayName="WidgetsClient";const dNe=f.memo(()=>{const e="homepage-widgets-wrapper",{locale:t}=Z(),n=rt(),r=Pa(),s=f.useMemo(()=>r!==ie.STUDIO?{}:{searchMode:ie.STUDIO},[r]),{data:a}=We({queryKey:[mg],queryFn:()=>n?Blt({searchMode:r,reason:e}):Vlt({params:{isComet:fn(),lang:t,lifecycle:Ult(w7())},reason:e}),gcTime:1/0}),i=ht(),l=f.useRef(!1);return f.useEffect(()=>{if(!l.current){l.current=!0;return}i.invalidateQueries({queryKey:[mg]})},[i,s]),a?o.jsx(uNe,{widgets:a}):null});dNe.displayName="HomepageWidgetsWrapper";const fNe=f.memo(()=>{const{isHomepageWidgetsDisabled:e}=hn();return e?null:o.jsx(Or,{children:o.jsx("div",{className:"animate-in fade-in duration-300",children:o.jsx(dNe,{})})})});fNe.displayName="HomepageWidgets";const jBt=()=>{const e=f.useRef(!1),t=Ms(),n=rt(),{openVisitorLoginUpsell:r}=ur({enabled:!n}),{data:s}=NU({enabled:t&&!e.current}),a=Qb(s??void 0);f.useEffect(()=>{e.current||t&&s&&s.app_location===Ic.MODAL&&(a(),e.current=!0)},[t,n,r,s,a])},pI=ot({[BWe]:{id:"Sj7bs8Ti07",defaultMessage:"Sign in with your school email to unlock one month free of Perplexity Pro"},[VWe]:{id:"8MOEZchxNH",defaultMessage:"Sign in with your USC email to unlock one month free of Perplexity Pro"},[$We]:{id:"4d/Zn7HZQx",defaultMessage:"Sign in with your UC Berkeley email to unlock one month free of Perplexity Pro"},[WWe]:{id:"DXeXI7X4DZ",defaultMessage:"Sign in with your IITM email to unlock one year free of Perplexity Pro"},[HWe]:{id:"sBfq8LkRp0",defaultMessage:"Sign in with your ac.kr email to unlock one year free of Perplexity Pro"}}),ABt=()=>{const e=Nt(),{$t:t}=Z(),{openModal:n}=xt(),r=Ho(),{device:{userAgent:s}}=At(),[a,i]=f.useState(!1),l=rt(),{trackEvent:c}=Ne(),{openVisitorLoginImageUpsell:u}=ur({enabled:!0});f.useEffect(()=>{if(typeof window>"u")return;const d=e?.get(UWe),m=[];if(e?.get(Tq)&&(m.push(Tq),n("onboardingModal",{userAgent:s})),e?.get(Nq)&&(m.push(Nq),c("default search extension uninstalled",{isBrowserExtension:!0})),e?.get(Aq)&&(m.push(Aq),r({origin:Oe.MAX_URL_PAYWALL,pitchMessage:{title:t({defaultMessage:"Introducing Perplexity Max",id:"v1bpoVO4Rq"}),description:t({defaultMessage:"Maximize your curiosity with unlimited access to Perplexity Labs",id:"AX3/N9NedQ"})}})),d&&gXe(d),!a&&(e?.get(FWe)||d&&pI[d])){if(l)return;i(!0);const p=d&&pI[d]?t(pI[d]):t({defaultMessage:"Sign in with your school email to unlock one month free of Perplexity Pro",id:"Sj7bs8Ti07"});u({origin:Oe.BACK_TO_SCHOOL,title:p,image:GWe,imageAlt:qWe,loginButtonsStyle:"highlightBackToSchool"})}if(m.length>0){const p=Array.from(e?.entries()??[]).filter(([g])=>!m.includes(g)),h=new URLSearchParams;p.forEach(([g,y])=>{h.set(g,y)}),Ry(Object.fromEntries(p))}},[e,n,r,s,a,l,t,c,u])},IBt=()=>{const e=rt(),{openModal:t}=xt(),{$t:n}=Z(),{openVisitorLoginUpsell:r}=ur({enabled:!0}),s=f.useCallback(a=>{if(ne.info("Thread access not allowed",{uuidOrSlug:a,isUserLoggedIn:e}),e)t("requestAccessModal",{uuidOrSlug:a});else{const i=`${window.location.origin}/search/${a}`;r({origin:Oe.REQUEST_ACCESS_LOGIN_GATE,title:n({defaultMessage:"This thread is private",id:"PX12OU86rT"}),description:n({defaultMessage:"Sign in if you are the owner of this thread, or to request access",id:"/A9MF2B0ub"}),sheetModalVariant:"centered-sheet",overrideRedirectUrl:i})}},[n,e,t,r]);return f.useMemo(()=>({handleRequestAccess:s}),[s])};function mNe(){const{isSplashPageDismissed:e}=hn(),t=sXe(),{isMobileUserAgent:n}=xe(),r=rt(),s=jt(),a=Nt(),i=JF(),l=s==="/"&&(a===null||a.size===0);return!(!n||r||e||!l||t||i||Kh())}const RBt="https://services.sheerid.com/verify",PBt="681d40e03e7a8077098cb1b6",OBt="685b438c24925a24c23ef56f",LBt="68a6465511f17709c2395bc2",DBt="68a6466f11f17709c2395d7c",Uae={prod:{student:PBt,educator:LBt},test:{student:OBt,educator:DBt}},FBt="referral_code",pNe="externalUserId",UBt="sheerid_url",BBt="country",VBt="locale",$Bt="verificationId",Bae="https://services.sheerid.com",WBt={en:"en-US",es:"es-ES",bn:"bn-IN",hi:"hi-IN"};function HBt(e){const t=e?new Intl.Locale(e).language:null;return t?WBt[t]||t:null}function _sn(e){const{verificationType:t,userId:n,referralCode:r,hostname:s,countryCode:a,locale:i}=e,l=i?HBt(i):null,d=(!s||exe(s)||Kve(s)?Uae.prod:Uae.test)[t],m=new URL(`${RBt}/${d}/`);return m.searchParams.set(pNe,n),a&&m.searchParams.set(BBt,a),l&&m.searchParams.set(VBt,l),r&&m.searchParams.set(FBt,r),m}const zBt=e=>{if(e==="pro"||e==="max")return e},hNe=({confirmationRedirectsToHomepage:e}={})=>{const t=Nt(),n=t?.get("stripe_checkout"),r=t?.get("upsell"),s=t?.get("flow_type"),a=t?.get("upgrade_max"),i=t?.get("subscription_tier"),l=Ho(),{openModal:c}=xt(),{formatMessage:u}=Z(),{session:d}=Et(),m=d?.user?.id,p=t?.get(pNe),h=t?.get($Bt),g=t?.get(UBt),y=f.useCallback(()=>{const E=s??"unknown",M=a==="success",k=zBt(i);c("subSuccessModal",{flowType:E,upgradeMax:M,subscriptionTier:k,confirmationRedirectsToHomepage:e})},[s,c,a,i,e]),v=f.useCallback(({isTasksAutomationsRenameEnabled:E})=>{mXe(!0),l({origin:Oe.TASKS_PAGE,pitchMessage:E?{title:u({defaultMessage:"Want to use Perplexity Automations?",id:"uujTvYgZRp"}),description:u({defaultMessage:"Upgrade to Pro to create and manage automations.",id:"9vQrVenMdj"})}:{title:u({defaultMessage:"Want to use Perplexity Tasks?",id:"u3CPeNV09q"}),description:u({defaultMessage:"Upgrade to Pro to create and manage tasks.",id:"oUsys+n/zQ"})}})},[u,l]),x=f.useCallback(E=>{c("referralSuccessModal",{monthsAwarded:E})},[c]),b=f.useCallback(async()=>{const E=await Yst({verificationId:h,reason:"referral-success-modal"});x(E.months_awarded)},[h,x]),_=f.useCallback(()=>{const E=setTimeout(()=>{c("referralErrorModal",null)},1e3);return()=>clearTimeout(E)},[c]),w=f.useCallback(()=>{if(g)try{const E=new URL(g.toString());E.hostname===new URL(Bae).hostname&&E.protocol===new URL(Bae).protocol&&c("sheerIdRedirectModal",{sheerIdUrl:E.toString()})}catch{ne.warn("Invalid SheerId redirect URL",{sheerIdRedirectParam:g})}},[c,g]),{variation:C,loading:S}=op(!1);f.useEffect(()=>{(n==="success"||a==="success")&&y(),r==="tasks"&&(S||v({isTasksAutomationsRenameEnabled:C})),g&&w(),h&&(!!p&&!!h&&p===m?b():_())},[m,n,r,p,h,g,a,y,v,x,_,w,b,C,S])},gNe=I.memo(({dismiss:e})=>{const t=t_({origin:"mweb-splash"}),n=f.useMemo(()=>o.jsx(pe,{id:"Wpt2mdD04V",defaultMessage:"Chat now"}),[]);return o.jsxs("div",{className:B("p-lg fixed inset-0 mb-auto flex h-full flex-col items-center justify-between overflow-y-auto"),children:[o.jsx("div",{className:"right-sm top-sm absolute",children:o.jsx(Te,{pill:!0,variant:"noBackground",size:"small",icon:Rt,extraCSS:"text-foreground md:hover:text-quiet ",onClick:e})}),o.jsx(M3,{}),o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx("div",{className:"aspect-square size-20 overflow-hidden rounded-full shadow-lg",children:o.jsx("img",{src:"https://r2cdn.perplexity.ai/whatsapp.jpg",alt:"WhatsApp"})}),o.jsxs("div",{className:B("flex flex-col items-center"),children:[o.jsx(D,{variant:"entry-title",color:"default",textCenter:!0,children:o.jsx(pe,{id:"2WQt3MyLfa",defaultMessage:"Ask anything, anywhere"})}),o.jsx(D,{variant:"base",color:"light",textCenter:!0,className:"mt-4 max-w-[400px]",children:o.jsx(pe,{id:"ZTpOAItHHA",defaultMessage:"We're on WhatsApp"})}),o.jsx(D,{variant:"smallMono",color:"super",textCenter:!0,className:"mt-4",children:o.jsx(pe,{id:"b0JEE9uTQq",defaultMessage:"+1 (833) 436-3285"})})]})]}),o.jsx("div",{className:"flex w-full flex-col items-center",children:o.jsx(he,{variant:"inverted",size:"large",onClick:t,icon:W7,text:n})})]})});gNe.displayName="WhatsAppInterstitial";const GBt=1;function qBt({}){const[e,t]=f.useState(!1),{actions:n}=hn(),{trackEvent:r}=Ne(),{$t:s}=Z(),a=()=>{t(!1),n.setIsSplashPageDismissed(!0,GBt),r("mweb splash page dismissed",{}),document.head.querySelector("[name='theme-color']")?.remove()},{mwebUpsellWhatsApp:i,loadingMwebUpsellWhatsApp:l}=r_();f.useEffect(()=>{l||t(!0)},[l]);const c=f.useMemo(()=>({title_1:s({defaultMessage:"Start searching with AI",id:"xADWoMp8Ck"}),subtext_1:s({defaultMessage:"It's better in the app.",id:"E7ck+HTwLo"}),button_text:s({defaultMessage:"Download now",id:"OmsvLbYdpQ"}),button_link:"http://perplexity.ai/download"}),[s]);return o.jsx("div",{className:B("bg-base fixed inset-0 flex size-full flex-grow flex-col md:hidden"),children:o.jsx(MD,{open:e,children:o.jsx(kD,{children:o.jsxs(D5,{children:[o.jsxs(KL,{children:[o.jsx(F5,{children:s({defaultMessage:"Know it all",id:"F6NJO530sQ"})}),o.jsx(TD,{children:s({defaultMessage:"Search and discover with AI",id:"ydYv4/6Poi"})})]}),o.jsx("div",{className:B("bg-base fixed inset-0 flex size-full flex-grow flex-col","z-10"),children:i?o.jsx(gNe,{dismiss:a}):o.jsx(S0e,{dismiss:a,campaignData:c,translated:!0})})]})})})})}function KBt({}){return mNe()?o.jsx(qBt,{}):null}const YBt=({reason:e})=>{const t=ht(),n=Nt(),r=n?.get("stripe_checkout"),s=n?.get("is_enterprise")==="true",{trackEvent:a}=Ne(),i=r!=null,l=r==="success";f.useEffect(()=>{i&&s&&(async()=>{try{const[u,d]=await Promise.all([l?t.fetchQuery({queryKey:["refresh-org-subscription-status"],queryFn:()=>lpe({reason:e})}):null,t.fetchQuery({queryKey:["user-org-data"],queryFn:()=>G5({reason:e})})]),m=d?.organization?.uuid;m!=null&&m!==void 0&&a("org payment portal returned",{stripeResult:r??"",orgUUID:m??"",source:n?.get("origin")??""})}catch(u){ne.log("Failed to refresh org subscription:",u)}})()},[])};var Ti={};const QBt=ot({threadAccessNotAllowed:{defaultMessage:"Cannot view this thread.",id:"PWzBFTUMYQ"},threadExpired:{defaultMessage:"This thread is expired and cannot be viewed.",id:"kxDY3MhDfI"},invalidThread:{defaultMessage:"This thread does not exist.",id:"mTtce3cuRp"},threadStreamError:{defaultMessage:"Unable to start thread.",id:"d3yfUXi5SD"},pageAccessNotAllowed:{defaultMessage:"Cannot view this page.",id:"2AsVl5rMny"},spaceAccessNotAllowed:{defaultMessage:"Cannot view this Space.",id:"kUZg0JvZI+"},subscriptionAlreadyActive:{defaultMessage:"Unable to apply discount code to an active subscription.",id:"o2MqqftZuL"},unableToGrantAccess:{defaultMessage:"Unable to make this thread shareable, ensure you are logged in as the owner of the thread.",id:"F8a+v/zyZO"},collectionAccessNotAllowed:{defaultMessage:"Cannot view this collection.",id:"miGPZEm/qm"},invalidCollection:{defaultMessage:"This collection does not exist.",id:"IKZz6s6MYd"}}),XBt=ye(async()=>{const{CDN:e}=await K(async()=>{const{CDN:t}=await import("./cdn-B8XnoTtL.js");return{CDN:t}},__vite__mapDeps([132,3,1,6,5,4]));return{default:e,critical:!0}}),yNe=I.memo(function(){const t="home-ask-input",[n,r,s]=$3({csrRedirect:!0}),{isMobileStyle:a}=xe(),{currentOpenedModal:i}=xt(),l=Nt(),c=mNe(),d=f.useMemo(()=>l?.get("openSearchModeSelector"),[l])==="true",{mentionTypeaheadOptions:m,inputPlaceholder:p,onTriggerTypeahead:h}=wk({reason:t,isLazy:!0});return o.jsxs(o.Fragment,{children:[o.jsx(D_,{...s,value:n,json:r,querySource:"home",autofocus:!a&&i===null&&!c&&!d,initialLayout:Ti.NEXT_PUBLIC_IS_SIDECAR_BUILD?"compact":"expanded",minRows:Ti.NEXT_PUBLIC_IS_SIDECAR_BUILD?1:2,hasShadow:!0,showFileUpload:!0,showIncognitoHint:!0,showSources:!Ti.NEXT_PUBLIC_IS_SIDECAR_BUILD,autosuggestionsEnabled:!Ti.NEXT_PUBLIC_IS_SIDECAR_BUILD,dropdownPlacement:Ti.NEXT_PUBLIC_IS_SIDECAR_BUILD||a?"top":"bottom",dropdownClassName:Ti.NEXT_PUBLIC_IS_SIDECAR_BUILD||a?"shadow-[0_-30px_30px_oklch(var(--background-base-color))]":void 0,useLexical:!0,mentionTypeaheadOptions:m,placeholder:p??s.placeholder,onTriggerTypeahead:h,layoutKey:"home-ask-input",disableModeSelector:!!Ti.NEXT_PUBLIC_IS_SIDECAR_BUILD}),o.jsx(XBt,{})]})});yNe.displayName="HomeAskInput";const vNe=I.memo(function(){const{$t:t}=Z(),{hasAccessToProFeatures:n}=_t(),r=rt(),{actions:{clearCurrentStreamId:s,clearCurrentThreadId:a}}=Vt(),{device:{isIOS:i},env:{isLocalhost:l}}=At(),{isMobileUserAgent:c,isMobileStyle:u}=xe(),[d,m]=f.useState(null),{openModal:p}=xt(),{handleRequestAccess:h}=IBt(),{trackEvent:g}=Ne(),y=Nt(),{mwebUpsellWhatsApp:v,loadingMwebUpsellWhatsApp:x}=r_(),{handleAppDownloadClicked:b}=zd("mobile-header"),_=t_({origin:"mobile-header"});jBt();const w=fn(),{openVisitorLoginUpsell:C}=ur({enabled:!0}),S=f.useRef(null),E=f.useMemo(()=>y?.get("error"),[y]),M=f.useMemo(()=>y?.get("id"),[y]),k=hn(),A=f.useRef(!1),R=f.useMemo(()=>!!(y?.get(oc)||y?.get(zWe)==="deep_research"),[y]);hNe({confirmationRedirectsToHomepage:!0}),YBt({reason:"search-inner-home"}),ABt(),f.useEffect(()=>{s(),a()},[s,a]),f.useEffect(()=>{A.current||k.welcomeBackGateImpressions>=lD||w||r||c||l||C7()&&S7()&&(C({origin:Oe.WELCOME_BACK,title:t({defaultMessage:"Welcome back!",id:"0MXX5Bf7Ca"}),description:t({defaultMessage:"Log in to continue your journey.",id:"lSkVbenSxm"}),sheetModalVariant:"centered-sheet"}),A.current=!0,k.actions.setWelcomeBackGateImpressions(k.welcomeBackGateImpressions+1))},[w,l,c,r,p,t,k.welcomeBackGateImpressions,k.actions,C]),f.useEffect(()=>{if(E){const N=E,T=M;N===Jf.ThreadAccessNotAllowed&&T?h(T):(ne.info("Error redirect",{errorQueryParam:E}),m(t(QBt[N]))),Mct()}},[E,h,M,p,t]);const O=f.useCallback(()=>{if(v){_();return}g("app download button clicked",{origin:"mobile-header"}),b()},[b,_,v,g]),L=f.useMemo(()=>({homepageTitle:t({defaultMessage:"What do you want to know?",id:"CMjGvpa5Fr"})}),[t]),P=f.useMemo(()=>v?W7:i?yb:$7,[v,i]);return o.jsxs(o.Fragment,{children:[o.jsx(s_,{childrenWidth:Ti.NEXT_PUBLIC_IS_SIDECAR_BUILD?"none":"default",mobileHeader:!1,children:o.jsxs("div",{className:"erp-sidecar:px-md sm:px-md md:px-lg isolate mx-auto size-full sm:max-w-screen-md",children:[o.jsxs("div",{className:"relative flex h-full flex-col",children:[o.jsxs(H,{className:"py-md h-headerHeight flex items-center justify-between border-b md:hidden",children:[o.jsxs("div",{className:"gap-x-xs -ml-sm flex items-center",children:[o.jsx(AU,{}),o.jsx(Na,{color:"mixed",isPro:n,size:"small"})]}),o.jsx("div",{className:"gap-x-sm flex items-center",children:c&&!x&&o.jsx(Di,{isSamsungBrowser:!0,isComet:!0,isFirefoxDefaultSearch:!0,children:o.jsx("div",{className:"animate-in fade-in duration-300",children:o.jsx(he,{size:"small",icon:P,text:t(v?{defaultMessage:"Chat in WhatsApp",id:"jXqSBQcpKC"}:{defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),pill:!0,variant:"primary",onClick:O})})})})]}),o.jsx(GUt,{initialValue:L,children:o.jsxs(H,{className:B("static w-full grow flex-col items-center justify-center md:mt-0 md:flex","z-10"),ref:S,children:[o.jsx("div",{className:"px-md relative flex size-full flex-col justify-center md:h-auto md:px-0",children:o.jsx(P4e,{})}),o.jsxs(Kl,{children:[o.jsx("div",{className:B("w-full",{"bottom-md absolute":!!Ti.NEXT_PUBLIC_IS_SIDECAR_BUILD||u,"bottom-md mb-md animate-in fade-in fill-mode-both slide-in-from-bottom absolute delay-200 duration-300 ease-in-out":!!Ti.NEXT_PUBLIC_IS_SIDECAR_BUILD}),children:o.jsx(yNe,{})}),c?null:o.jsx("div",{className:"relative w-full",children:o.jsx("div",{className:"mt-lg absolute w-full",children:o.jsx(fNe,{})})})]})]})})]}),o.jsx(Gl,{isVisible:d!=null,variant:"error",message:d,timeout:7})]})}),R&&o.jsx(SW,{}),!Ti.NEXT_PUBLIC_IS_SIDECAR_BUILD&&o.jsx(Di,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,isPartnershipCampaign:!0,children:o.jsx(KBt,{})})]})});vNe.displayName="Home";const ZBt={activeStreamingThreads:[],entries:{},refreshState:()=>{},queuedThreadParams:[],enqueueThreadParams:()=>{},cancelQueuedThread:()=>{},recentlyBlockedEntries:[],recentlyCompletedEntries:[],handleStreamCompletion:()=>{},removeRecentlyBlockedEntry:()=>{},isDragging:!1,setIsDragging:()=>{}},xNe=Wt("MissionControlContext",ZBt),JBt=({children:e})=>{const{session:t}=Et(),n=f.useMemo(()=>{switch(t?.user.subscription_tier){case"max":return 10;case"pro":return 5;default:return 3}},[t?.user.subscription_tier]),r=uo(),{trackEvent:s}=Ne(),{submitQuery:a}=Hs(),{data:i=[]}=yW("mission_control_active",void 0,void 0,!1,void 0),[l,c]=f.useState([]),[u,d]=f.useState([]),[m,p]=f.useState([]),[h,g]=f.useState(!1),y=L=>{L?.status===qn.BLOCKED?d(P=>P.some(T=>T.message.backend_uuid===L.backend_uuid)?P:[...P,{message:L}]):L?.status===qn.COMPLETED&&(d(P=>P.filter(N=>N.message.backend_uuid!==L.backend_uuid&&!i.some(T=>T.context_uuid===N.message.context_uuid))),p(P=>{const N=P.some(j=>j.message.backend_uuid===L.backend_uuid),T=P.filter(j=>!i.some(F=>F.context_uuid===j.message.context_uuid));return N?T:[...T,{message:L}]}))},v=L=>{d(P=>P.filter(N=>N.message.backend_uuid!==L))},[x,b]=f.useState(()=>r.getState()),_=f.useCallback(()=>{b(r.getState())},[r]);f.useEffect(()=>r.subscribe(P=>{b(P)}),[r]);const{activeStreams:w,streams:C,threads:S,entries:E}=x,M=f.useMemo(()=>fFt({activeStreams:w,streams:C,threads:S,entries:E}),[w,C,S,E]),k=f.useCallback(L=>{const P=L.newFrontendContextUUID||crypto.randomUUID();a({newFrontendContextUUID:P,rawQuery:L.query,attachments:L.attachments,promptSource:"user",querySource:"mission-control",mentions:L.mentions,collection:null,cometIsMissionControl:!0,maxAssistantEnabled:L.maxAssistantEnabled}),s("mission control query submitted",{frontendContextUUID:P,numberOfActiveThreads:M.length+1})},[a,s,M.length]);f.useEffect(()=>{if(M.length<n&&ia(l)){const L=l[0];c(P=>P.slice(1)),k(L)}},[M.length,k,l,n]);const A=f.useCallback(L=>{if(M.length<n)k(L);else{const P=crypto.randomUUID();c(N=>(s("mission control query enqueued",{frontendContextUUID:P,numberOfActiveThreads:M.length,numberOfQueuedThreads:N.length+1}),N.concat([{...L,newFrontendContextUUID:P}])))}},[M.length,k,s,n]),O={activeStreamingThreads:M,entries:E,refreshState:_,queuedThreadParams:l,enqueueThreadParams:A,cancelQueuedThread:L=>{c(P=>P.filter(N=>N.newFrontendContextUUID!==L))},recentlyBlockedEntries:u,recentlyCompletedEntries:m,handleStreamCompletion:y,removeRecentlyBlockedEntry:v,isDragging:h,setIsDragging:g};return o.jsx(xNe.Provider,{value:O,children:e})},RT=()=>{const e=f.useContext(xNe);if(!e)throw new Error("useUserInput must be used within UserInputProvider");return e},bNe=I.memo(({needsAttentionFilter:e=!1,onNeedsAttentionFilterChange:t,needsAttentionCount:n=0})=>{const{$t:r}=Z(),s=r({defaultMessage:"Background Assistants",id:"UmjY7aC43f"}),a=r({defaultMessage:"Monitor and collaborate with your active assistants",id:"AGtMyJq7fo"}),i=r({defaultMessage:"Unread",id:"jabB4CFkPh"});return o.jsxs("div",{className:"px-md md:px-lg gap-sm flex flex-col justify-between sm:flex-row md:flex md:items-center",children:[o.jsxs("div",{className:"gap-x-md flex items-center",children:[o.jsx(ce,{icon:zie,size:"xl"}),o.jsxs("div",{children:[o.jsx(D,{variant:"page-title",children:s}),o.jsx(D,{variant:"base",color:"light",children:a})]})]}),t&&n>0&&o.jsx(Ro,{text:`${i} (${n})`,active:e,onChange:t})]})});bNe.displayName="MissionControlHeader";const eVt="mission-control-reconnect",tVt=20,_Ne=[{query:"Check Amazon wishlist book price, using my browser, add to cart if under $15"},{query:"Book 4.5+ star Austin restaurant for 2 using my browser at 7pm tomorrow"},{query:"Find weekend Airbnbs under $200/night using my browser within 3 hours drive"},{query:"Compare Tokyo flights next month using my browser, email me best options"}],wNe=f.memo(({placeholder:e,suggestions:t})=>{const{enqueueThreadParams:n}=RT(),[r,s,{onChange:a,onSubmit:i}]=nB({onSubmit:n}),l="mission-control-input",{setSuggestions:c,setBlankStateSuggestions:u}=Lo(),d=Pa(),[m,p]=f.useState(d),{mentionTypeaheadOptions:h,onTriggerTypeahead:g}=wk({reason:l,isLazy:!0});f.useEffect(()=>{u(t,ie.SEARCH)},[u,t]),f.useEffect(()=>{m!==d&&(p(d),r.length===0&&d===ie.SEARCH&&c(t))},[r,d,m,c,t]);const y=f.useCallback(()=>{r.length===0&&d===ie.SEARCH&&c(t)},[r,c,d,t]),v=f.useCallback(x=>{i({...x,maxAssistantEnabled:!0}),c([])},[i,c]);return o.jsx(D_,{value:r,json:s,onChange:a,onSubmit:v,onClick:y,placeholder:e,disableInput:!1,className:"relative w-full transition-none",hasShadow:!0,autosuggestionsEnabled:!0,querySource:"mission-control",isMissionControl:!0,showFileUpload:!0,useLexical:!0,showSearchModeSelector:!1,showModelSelector:!1,mentionTypeaheadOptions:h,onTriggerTypeahead:g,layoutKey:"mission-control-input",minRows:2})});wNe.displayName="MissionControlInput";const nVt=({suggestion:e,onClick:t})=>o.jsx(sn,{shadow:!0,className:"aspect-square w-full cursor-pointer select-none overflow-hidden !rounded-2xl",onClick:()=>t(e),children:o.jsx(yn,{hoverOnly:!0,className:"size-full",children:o.jsx(H,{variant:"raised",className:"hover:bg-subtler dark:hover:bg-subtle size-full transition duration-300",children:o.jsxs("div",{className:"flex size-full flex-col p-3",children:[o.jsx(D,{color:"super",children:o.jsx(ce,{icon:Io,size:"lg"})}),o.jsx(D,{variant:"smallBold",color:"default",className:"mt-auto line-clamp-5 text-balance",children:e})]})})})}),CNe=()=>{const{$t:e}=Z(),{enqueueThreadParams:t}=RT(),n=r=>{t({query:r,maxAssistantEnabled:!0})};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"gap-sm grid w-full grid-cols-4",children:_Ne.map((r,s)=>o.jsx(nVt,{suggestion:r.query,onClick:n},s))}),o.jsx(H,{className:"gap-md relative divide-y overflow-hidden rounded-xl border",variant:"raised",children:o.jsx("div",{className:"space-y-md flex w-full flex-col items-center justify-center p-10",children:o.jsxs("div",{className:"space-y-xs text-center",children:[o.jsx(D,{variant:"section-title",children:e({id:"aojEGT2eHI",defaultMessage:"No activity yet"})}),o.jsx(D,{variant:"small",color:"light",children:e({id:"524FDhfuRR",defaultMessage:"Ask your Assistant to handle any taskor several at once. Check here for updates or your input is needed."})})]})})})]})};CNe.displayName="MissionControlEmpty";const SNe=I.memo(({items:e})=>e.length===0?o.jsx(CNe,{}):o.jsx("div",{className:"flex flex-col divide-y",children:e.map(t=>t.item)}));SNe.displayName="MissionControlItemList";const rVt=e=>e?e.filter(t=>t.image_mode_block).flatMap(t=>t.image_mode_block.media_items??ue):ue,sVt=e=>e?e.filter(t=>t.video_mode_block).flatMap(t=>t.video_mode_block.media_items??ue):ue,aVt=e=>e?e.filter(t=>t.shopping_mode_block).flatMap(t=>t.shopping_mode_block.shopping_widgets??ue):ue,oVt=e=>e?e.filter(t=>t.jobs_mode_block).flatMap(t=>t.jobs_mode_block.jobs_blocks??ue):ue,iVt=e=>e?e.filter(t=>t.maps_mode_block).flatMap(t=>t.maps_mode_block.places??ue):ue,lVt=e=>{const t=(e??ue).filter(i=>i.sources_mode_block).flatMap(i=>i.sources_mode_block),n=t.at(-1),r=new Set,s=[];for(const i of t)for(const l of i.web_results)r.has(l.url)||(s.push(l),r.add(l.url));const a=n?.result_count??0;return{count:Math.max(s.length,a),progress:n?.progress,results:s,rows:n?.rows}},cVt=(e,{orderedByPriority:t=!1}={})=>{if(!e)return ue;const n=e.filter(r=>r.assets_mode_block).flatMap(r=>r.assets_mode_block.assets??ue);return t?[...n].sort((r,s)=>r.is_primary_asset===s.is_primary_asset?0:r.is_primary_asset?-1:1):n},va={default:"d",shopping:"s",jobs:"j",hotels:"h",places:"p",images:"i",videos:"v",sources:"r",assets:"a",apps:"c",tasks:"t",search:"se",chat:"ch"},Vae=e=>Object.entries(va).find(([t,n])=>n===e)?.[0],PT=(e,t)=>{const r=new URLSearchParams(t?.toString()).get(e.toString());if(r)return typeof r=="string"?Vae(r):Array.isArray(r)?Vae(r[0]):void 0},uVt=e=>e==="default"||e==="sources",dVt=e=>Br(e).with("default",()=>"default").with("shopping",()=>"wide").with("jobs",()=>"wide").with("hotels",()=>"full").with("places",()=>"full").with("images",()=>"full").with("videos",()=>"full").with("sources",()=>"default").with("assets",()=>"full").with("apps",()=>"full").with("tasks",()=>"default").with("search",()=>"default").otherwise(()=>"default"),hI=e=>({mode:e,width:dVt(e)}),fVt=()=>{const e=Nt();return f.useCallback(t=>PT(t,e),[e])},mVt=()=>{const e=Nt(),t=jt(),n=gt();return f.useCallback((r,s)=>{if(PT(r,e)===s)return;const a=new URLSearchParams(e?.toString());a.set(r.toString(),va[s]),n.replace(`${t}?${a.toString()}`)},[t,n,e])},pVt=({items:e,inFlight:t,inFlightLatest:n,rwToken:r,contentHasMounted:s,hasHeader:a=!0})=>{const{scrollContainerRef:i}=Oa(),l=Ms(),c=f.useMemo(()=>{if(typeof window>"u")return 0;const b=a?getComputedStyle(document.documentElement).getPropertyValue("--header-height"):"0";return parseInt(b)},[a]),u=f.useRef(!0),d=f.useMemo(()=>!r&&e.every(b=>!un.isStatusPending(b)),[e,r]),m=f.useMemo(()=>e.some(b=>un.isStatusPending(b)),[e]),p=f.useRef({}),h=f.useRef({});f.useEffect(()=>()=>{p.current={},h.current={}},[]);const g=f.useCallback((b,{smooth:_=!0,anchor:w=!1}={smooth:!0,anchor:!1})=>{const C=typeof b=="number"?p.current?.[b]?.current:h.current?.[b]?.current;if(C){const S=C.getBoundingClientRect().top,E=i?.current?.scrollTop??0,M=S+E-c;if(M+E>document.body.scrollHeight&&w){const k=i?.current?.scrollHeight??0,A=i?.current?.clientHeight??0,R=k-A-.1;requestAnimationFrame(()=>i?.current?.scrollTo({top:R,behavior:_?"smooth":"auto"}))}else i?.current?.scrollTo({top:M,behavior:_?"smooth":"auto"})}},[i,c]),y=f.useCallback(()=>{g(e.length-1)},[g,e.length]);f.useEffect(()=>{const b={...p.current},_={};e.forEach((C,S)=>{const E=S,M=C.backend_uuid;if(M)if(!b[E]||!b[E].current){const k=I.createRef();b[E]=k,_[M]=k}else _[M]=b[E]});const w=e.length;Object.keys(b).forEach(C=>{Number(C)>=w&&delete b[Number(C)]}),h.current=_,p.current=b},[e.length,m]);const v=e.at(-1)?.query_source==="edit";f.useEffect(()=>{if(e.length<=1||!l||!s)return;const b=window.location.hash;if(b&&!t&&u.current){try{const _=b.slice(1);_.length>3?g(_,{smooth:!1}):g(Number(_),{smooth:!1})}catch(_){ne.error(_)}return}n&&!v&&g(e.length-1,{anchor:!0})},[t,n,d,e.length,l,g,s,v]);const x=p.current;return f.useMemo(()=>({refs:x,scrollToLatestItem:y,scrollToListItem:g}),[x,y,g])},ENe=Wt("ScrollToEntityContext",{refs:{},scrollToListItem:()=>{},setContentHasMounted:()=>{},contentHasMounted:!1}),MNe=I.memo(({children:e})=>{const t=hi(),{results:n=[],inFlight:r,inFlightLatest:s}=Vt(),[a,i]=f.useState(!1),{isMobileStyle:l}=xe(),c=f.useMemo(()=>e1e(n).map(p=>p.length?p[0]:void 0).filter(p=>p!==void 0),[n]),{refs:u,scrollToListItem:d}=pVt({items:c,inFlight:r,inFlightLatest:s,rwToken:t,contentHasMounted:a,hasHeader:l});return o.jsx(ENe.Provider,{value:{scrollToListItem:d,refs:u,setContentHasMounted:i,contentHasMounted:a},children:e})});MNe.displayName="ScrollToThreadEntryProvider";const OT=()=>{const e=f.useContext(ENe);if(!e)throw new Error("useScrollToEntity must be used within ScrollToEntityContext");return e},kNe=Wt("SearchPageContext",{activeMode:"default",setActiveMode:()=>{},activeEntryIdx:0,pinnedEntryIdx:-1,viewTitle:null,setViewTitle:()=>{}}),cw=()=>{const e=f.useContext(kNe);if(!e)throw new Error("useSearchPage must be used within an SearchPageProvider");return e},TNe=I.memo(({children:e})=>{const t=fVt(),[n,r]=f.useState(t(0)??"default"),[s,a]=f.useState(0),[i,l]=f.useState(-1),[c,u]=f.useState(null),{refs:d}=OT(),m=gt(),{scrollContainerRef:p}=Oa(),h=f.useCallback(()=>{if(Object.keys(d).length===0||!p.current)return;const g=p.current.clientHeight,y=p.current.scrollTop;if(y===0){a(0),l(-1);return}const v=y+g/2;let x=s,b=-1,_=1/0;Object.entries(d).forEach(([w,C])=>{if(C.current){const S=C.current.getBoundingClientRect(),E=S.top+y+S.height/2,M=Math.abs(E-v);S.top<-100&&S.bottom>100&&(b=parseInt(w)),M<_&&(_=M,x=parseInt(w))}}),a(x),l(b)},[d,a,p,s,l]);return f.useEffect(()=>{if(!p?.current)return;const g=p.current,y=Xg(h,50,{leading:!1,trailing:!0});return g.addEventListener("scroll",y),h(),()=>{g.removeEventListener("scroll",y),y.cancel()}},[h,p]),f.useEffect(()=>{u(null)},[m]),o.jsx(kNe.Provider,{value:{activeMode:n,setActiveMode:r,activeEntryIdx:s,pinnedEntryIdx:i,viewTitle:c,setViewTitle:u},children:e})});TNe.displayName="SearchPageProvider";const hVt=({idx:e,searchParams:t,blocks:n})=>pi()((r,s)=>({answerModeActionList:[],currentModeData:hI(PT(e,t)??"default"),...jNe(n),actions:{updateCurrentMode:a=>{const i=s(),l=i.defaultModeOverride&&a==="default"?i.defaultModeOverride:a;r({currentModeData:hI(l)})},setOverrideMode:a=>{const i=a;r({defaultModeOverride:i,currentModeData:hI(i??"default")})}}})),{Context:gVt,useTrackedState:yVt}=Db("AnswerModeContext"),NNe=Wt("AnswerModeApiContext",void 0),vVt=({children:e,scrollToListItem:t})=>{const n=Nt(),{setActiveMode:r,activeEntryIdx:s}=cw(),{idx:a,result:{backend_uuid:i,context_uuid:l}}=an(),{actions:{updateCurrentMode:c,setOverrideMode:u},currentModeData:d}=tf(),m=mVt(),{trackEvent:p}=Ne(),h=f.useCallback(y=>{y!==d.mode&&(m(a,y),c(y),s===a&&r(y),requestAnimationFrame(()=>{t(a,{smooth:!0})}),p("answer mode tab selected",{answerMode:y,entryUUID:i,contextUUID:l}))},[d.mode,m,a,c,s,p,i,l,r,t]);f.useEffect(()=>{s===a&&r(d.mode)},[s,a,r,d.mode]),f.useEffect(()=>{const y=PT(a,n);y&&h(y)},[a,h,n]);const g=f.useMemo(()=>({updateCurrentMode:v=>{h(v)},setOverrideMode:u}),[h,u]);return o.jsx(NNe.Provider,{value:g,children:e})};function jNe(e){const t=rVt(e),n=sVt(e),r=aVt(e),s=oVt(e),a=iVt(e),i=lVt(e),l=cVt(e,{orderedByPriority:!0});return{images:t,videos:n,shopping:r,jobs:s,places:a,sources:i,assets:l}}const jW=I.memo(({children:e,scrollToListItem:t})=>{const{$t:n}=Z(),r=Nt(),{idx:s,searchMode:a,hasAnswer:i,researchPlan:l,reasoningPlan:c,showAgentWorkflow:u,result:{answer_modes:d,blocks:m,attachments:p,read_write_token:h},isLastResult:g,hasSources:y}=an(),v=Gk(),x=fn(),[b]=f.useState(()=>hVt({idx:s,searchParams:r,blocks:m}));f.useEffect(()=>{m||ne.error("No blocks found for entry",m)},[m]),f.useEffect(()=>{const E=b.getState(),{images:M,videos:k,shopping:A,jobs:R,places:O,sources:L,assets:P}=jNe(m),N=as(E.images,M)?E.images:M,T=as(E.videos,k)?E.videos:k,j=as(E.shopping,A)?E.shopping:A,F=as(E.jobs,R)?E.jobs:R,U=as(E.places,O)?E.places:O,V=as(E.sources,L)?E.sources:L,$=as(E.assets,P)?E.assets:P;(N!==E.images||T!==E.videos||j!==E.shopping||F!==E.jobs||U!==E.places||V!==E.sources||$!==E.assets)&&b.setState({images:N,videos:T,shopping:j,jobs:F,places:U,sources:V,assets:$})},[m,b]);const _=b.getState().sources,w=f.useMemo(()=>({[mn.SHOPPING]:{text:n({defaultMessage:"Shopping",id:"my1MLnIMoS"}),show:!0,icon:X9e,id:va.shopping,mode:"shopping",testId:ga.ANSWER_MODE_TABS.SHOPPING},[mn.JOBS]:{text:n({defaultMessage:"Jobs",id:"9AcATFXaoo"}),show:!0,icon:Q9e,id:va.jobs,mode:"jobs",testId:ga.ANSWER_MODE_TABS.JOBS},[mn.HOTELS]:{text:n({defaultMessage:"Hotels",id:"+dqK4hw0if"}),show:!0,icon:yu,id:va.hotels,mode:"hotels",testId:ga.ANSWER_MODE_TABS.HOTELS},[mn.MAPS]:{text:n({defaultMessage:"Places",id:"QQInFSbbwr"}),show:!0,icon:HM,id:va.places,mode:"places",testId:ga.ANSWER_MODE_TABS.PLACES},[mn.IMAGE]:{text:n({defaultMessage:"Images",id:"Fip4H8CuWD"}),show:!0,icon:VM,id:va.images,mode:"images",testId:ga.ANSWER_MODE_TABS.IMAGES},[mn.VIDEO]:{text:n({defaultMessage:"Videos",id:"4XfMuxy3FO"}),show:!0,icon:Yie,id:va.videos,mode:"videos",testId:ga.ANSWER_MODE_TABS.VIDEOS},[mn.SOURCES]:{text:n({defaultMessage:"Sources",id:"fhwTpAcBLC"}),show:!0,icon:um,id:va.sources,mode:"sources",testId:ga.ANSWER_MODE_TABS.SOURCES,count:_.count||p?.length||0,disabled:_.progress!==Mc.DONE&&!p?.length},[mn.ASSETS]:{text:n({defaultMessage:"Assets",id:"d1uESJO+TH"}),show:!0,icon:Y9e,id:va.assets,mode:"assets",testId:ga.ANSWER_MODE_TABS.ASSETS},[mn.APPS]:{text:n({defaultMessage:"App",id:"2rUVsUf259"}),show:!v,icon:ule,id:va.apps,mode:"apps",testId:ga.ANSWER_MODE_TABS.APPS},[mn.TASKS]:{text:n({defaultMessage:"Steps",id:"huCHmkVjex"}),show:!0,icon:qH,id:va.tasks,mode:"tasks",testId:ga.ANSWER_MODE_TABS.TASKS},[mn.SEARCH]:{text:n({defaultMessage:"Search",id:"xmcVZ0BU63"}),show:!!h&&g&&!y,icon:Rs,id:va.search,mode:"search",testId:ga.ANSWER_MODE_TABS.SEARCH},[mn.CHAT]:{text:n({defaultMessage:"Chat",id:"WTrOy36sdu"}),show:!!h&&g,icon:V7,id:va.chat,mode:"chat",testId:ga.ANSWER_MODE_TABS.CHAT}}),[n,p?.length,_.count,_.progress,h,g,y,v]),C=f.useMemo(()=>n(x?{defaultMessage:"Assistant",id:"wSAvhubuX6"}:{defaultMessage:"Answer",id:"DwjT1HpUgU"}),[n,x]),S=f.useMemo(()=>{switch(a){case ie.SEARCH:return x?Io:void 0;case ie.STUDIO:case ie.RESEARCH:return;default:return ig[a]}},[x,a]);return f.useEffect(()=>{const E=d?.map(O=>Br(O.answer_mode_type).with(mn.SHOPPING,()=>w[mn.SHOPPING]).with(mn.JOBS,()=>w[mn.JOBS]).with(mn.HOTELS,()=>w[mn.HOTELS]).with(mn.MAPS,()=>w[mn.MAPS]).with(mn.IMAGE,()=>w[mn.IMAGE]).with(mn.VIDEO,()=>w[mn.VIDEO]).with(mn.SOURCES,()=>w[mn.SOURCES]).with(mn.ASSETS,()=>w[mn.ASSETS]).with(mn.APPS,()=>w[mn.APPS]).with(mn.TASKS,()=>w[mn.TASKS]).with(mn.SEARCH,()=>w[mn.SEARCH]).with(mn.CHAT,()=>w[mn.CHAT]).otherwise(L=>(ne.warn("Unsupported Answer Mode",{mode:L.valueOf()}),null))).filter(O=>!!O),M=[{text:a===ie.SEARCH?C:n(ss[a].name),icon:S,id:"d",mode:"default",testId:ga.ANSWER_MODE_TABS.ANSWER(a)},...(E??[]).filter(O=>(O.mode!=="tasks"||i)&&(O.show===void 0||O.show===!0))],k=M.some(O=>O.mode==="tasks"),A=(l?.goals?.length??0)+(c?.goals?.length?c.goals.length-1:0);!k&&A>0&&!u&&i&&M.push({text:n({defaultMessage:"Steps",id:"huCHmkVjex"}),icon:qH,id:va.tasks,mode:"tasks",testId:ga.ANSWER_MODE_TABS.TASKS});const R=b.getState();as(R.answerModeActionList,M)||b.setState({answerModeActionList:M})},[n,d,i,w,c?.goals?.length,l?.goals?.length,a,x,C,S,u,b]),o.jsx(gVt.Provider,{value:b,children:o.jsx(vVt,{scrollToListItem:t,children:e})})});jW.displayName="AnswerModeProvider";const tf=yVt,uw=()=>{const e=f.useContext(NNe);if(!e)throw new Error("useAnswerModeApi must be used within an AnswerModeProvider");return e},jv=I.memo(({title:e,footer:t,onClick:n,state:r,isSelected:s=!1,entryUUID:a,invalidateThreadsQuery:i,queuedId:l,onCancelQueued:c,firstAnswer:u,customIcon:d,customDescription:m,customActions:p})=>{const h=f.useMemo(()=>{if(m)return m;switch(r){case"queued":return"Queued";case"in-progress":return"In progress";case"action-required":return"Action required";case"completed-unread":case"completed-read":{if(!u)return"";const v=dhe(u);return v||""}default:return""}},[r,m,u]),g=f.useMemo(()=>{if(d)return d;switch(r){case"queued":return o.jsx($r,{size:16,className:"text-quietest"});case"in-progress":return o.jsx($r,{size:16,className:"text-super"});case"action-required":return o.jsx(Z9e,{size:20,className:"text-attention"});case"completed-unread":return o.jsx(ka,{size:20,className:"text-positive"});case"completed-read":return o.jsx(I7,{size:20,className:"text-quietest"});default:return null}},[r,d]),y=f.useMemo(()=>{if(p)return p;switch(r){case"queued":return!l||!c?[]:[{icon:KH,label:"Cancel",onClick:v=>{v.stopPropagation(),c(l)}}];case"in-progress":case"action-required":return a?[{icon:KH,label:"Stop",onClick:async v=>{v.stopPropagation();try{await lu({entryUUID:a,reason:"mission-control-terminate"}),i?.()}catch(x){ne.error("Failed to terminate entry:",x)}}}]:[];default:return[]}},[r,a,i,p,l,c]);return o.jsx(H,{onClick:n,className:`gap-md group relative cursor-pointer overflow-hidden transition-all duration-300 ease-in-out ${s?"ring-subtler !bg-raised -mx-md px-md my-4 !border-transparent shadow-lg ring-1 first:mt-0 last:mb-0 md:rounded-2xl":""}`,children:o.jsxs("div",{className:"gap-md py-md group relative flex",children:[g&&o.jsx("div",{className:"mt-[13px] flex size-5 flex-shrink-0 items-center justify-center",children:g}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"gap-md flex",children:[o.jsxs("div",{className:"space-y-2xs flex-1",children:[o.jsx(D,{variant:"baseSemi",className:"group-hover:text-super line-clamp-2 overflow-hidden text-pretty",children:e}),o.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${s&&(r==="completed-unread"||r==="completed-read")?"max-h-20":"max-h-5"}`,children:o.jsx(D,{variant:"small",color:"light",className:`${s&&(r==="completed-unread"||r==="completed-read")?"line-clamp-4":"line-clamp-1"}`,children:h||"Answer skipped."})})]}),y.length>0&&o.jsx("div",{className:"gap-xs flex items-center",children:y.map((v,x)=>o.jsx(he,{variant:"common",size:"small",pill:!0,icon:v.icon,onClick:b=>{b.stopPropagation(),v.onClick(b)},toolTip:v.label,tooltipLayout:"top"},x))})]}),o.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${t&&s?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:o.jsx("div",{className:"overflow-hidden",children:o.jsx("div",{onClick:v=>v.stopPropagation(),className:"mt-md",children:t})})})]})]})})});jv.displayName="MissionControlItem";const $ae="/static/images/agent-favicons/gmail.svg",xVt="/static/images/data-connectors/microsoft/outlook-avatar.svg",Gh={click:{message:ee({defaultMessage:"Clicking",id:"n43/KMHgLD"}),icon:lOe},paused:{message:ee({defaultMessage:"Paused",id:"C2iTEHtK//"}),icon:iOe},fill:{message:ee({defaultMessage:"Filling out a form",id:"5i0X5DesMM"}),icon:oOe},search:{message:ee({defaultMessage:"Searching",id:"IfE0if3ytt"}),icon:Rs},navigate:{message:ee({defaultMessage:"Navigating",id:"3O6LMNhb0M"}),icon:ile},press_key:{message:ee({defaultMessage:"Pressing key",id:"R6bmgzv6Xs"}),icon:aOe},scroll_page:{message:ee({defaultMessage:"Scrolling",id:"/UUUqdefcb"}),icon:sOe},reasoning:{message:ee({defaultMessage:"Reasoning",id:"Aw3qRf7hyO"}),icon:Kc},considering_clarification:{message:ee({defaultMessage:"Considering your clarification",id:"xvwGmM2LU3"}),icon:Kc},working:{message:ee({defaultMessage:"Working",id:"gAR0atqpRn"}),icon:rOe},finished:{message:ee({defaultMessage:"Done",id:"JXdbo8Vnlw"}),icon:Sr},reading:{message:ee({defaultMessage:"Reading",id:"MOK/yKIpYX"}),icon:vo},reading_browser:{message:ee({defaultMessage:"Reviewing your tabs and browser history",id:"P+tFAY9IRT"}),icon:vo},getting_source:{message:ee({defaultMessage:"Getting source",id:"Z1eFpRpq7v"}),icon:vo},getting_sources:{message:ee({defaultMessage:"Getting sources",id:"Jv/OJ6AjyO"}),icon:vo},reviewing_source:{message:ee({defaultMessage:"Reviewing source",id:"ymFEF2YHhs"}),icon:vo},reviewing_sources:{message:ee({defaultMessage:"Reviewing sources",id:"/NZJDBzKok"}),icon:vo},reviewing_memory:{message:ee({defaultMessage:"Reviewing memory",id:"piUVOodSmM"}),icon:vo},reviewing_memories:{message:ee({defaultMessage:"Reviewing memories",id:"VgUfUXIIey"}),icon:vo},reviewing_conversation_history:{message:ee({defaultMessage:"Reviewing past queries",id:"RfG7EQT3IO"}),icon:vo},reading_tabs:{message:ee({defaultMessage:"Reviewing your tabs",id:"cE3TzCT3eK"}),icon:vo},building_app:{message:ee({defaultMessage:"Building application",id:"qK6gEQyvil"}),icon:QH},creating_chart:{message:ee({defaultMessage:"Creating chart",id:"yc5YxtS5VS"}),icon:YH},creating_pdf:{message:ee({defaultMessage:"Creating PDF",id:"NcD2ia4Hrn"}),icon:dm},creating_docx:{message:ee({defaultMessage:"Creating DOCX",id:"GIUtasyzkA"}),icon:KM},creating_xlsx:{message:ee({defaultMessage:"Creating XLSX",id:"ZyT2MB8/KD"}),icon:pb},thinking:{message:ee({defaultMessage:"Thinking",id:"AHQWDTo4+e"}),icon:Kc},reading_history:{message:ee({defaultMessage:"Reviewing your browser history",id:"7cZkJ7qeNW"}),icon:JT},searching_browser:{message:ee({defaultMessage:"Searching your browser",id:"i91D1hXua6"}),icon:JT},searching_open_tabs:{message:ee({defaultMessage:"Searching open tabs",id:"xHbSQOjdLq"}),icon:nOe},opening_tab:{message:ee({defaultMessage:"Opening tab",id:"ySnoI+lduZ"}),icon:QI},closing_tabs:{message:ee({defaultMessage:"Closing your tabs",id:"2KnXtfjRKV"}),icon:YI},searching_gmail:{message:ee({defaultMessage:"Searching your email",id:"X1ami4cm1T"}),icon:e4},emailing:{message:ee({defaultMessage:"Emailing",id:"QRygokyD+u"}),icon:e4},searching_calendar:{message:ee({defaultMessage:"Searching your calendar",id:"nH9G8cL0Ys"}),icon:t4},conclusion:{message:ee({defaultMessage:"Wrapping up",id:"DN3hjkyzeT"}),icon:null},generating_images:{message:ee({defaultMessage:"Generating",id:"NAZfqr2apb"}),icon:dle},presenting_images:{message:ee({defaultMessage:"Presenting",id:"BlxYo7+tmK"}),icon:tOe},grouping_tabs:{message:ee({defaultMessage:"Grouping tabs",id:"Fg6l7eg2HV"}),icon:eOe},ungrouping_tabs:{message:ee({defaultMessage:"Ungrouping tab groups",id:"dbpFCBu2NQ"}),icon:J9e},searching_tab_groups:{message:ee({defaultMessage:"Searching tab groups",id:"V+4/ioYMPd"}),icon:Rs},getting_freebusy:{message:ee({defaultMessage:"Checking availability",id:"ZamRNp2QgI"}),icon:t4},getting_user_info:{message:ee({defaultMessage:"Searching your contacts",id:"gPpZJKZdnL"}),icon:Rf},found_contacts:{message:ee({defaultMessage:"Found contacts",id:"2zmZgbYnmk"}),icon:Rf},no_contacts_found:{message:ee({defaultMessage:"No contacts found",id:"JhY7bAH15Y"}),icon:Rf},selecting_contacts:{message:ee({defaultMessage:"Selecting contacts",id:"OQhQc1Jomc"}),icon:Rf},getting_contact_details:{message:ee({defaultMessage:"Getting contact details",id:"p391mWkGfv"}),icon:Rf},scheduling:{message:ee({defaultMessage:"Scheduling",id:"5lQx5rgTEW"}),icon:XH},scheduled:{message:ee({defaultMessage:"Scheduled",id:"cXAlMRerxW"}),icon:XH},reading_events:{message:ee({defaultMessage:"Getting event details",id:"0QgD+ftRet"}),icon:t4},reading_emails:{message:ee({defaultMessage:"Reviewing emails",id:"f/yAuwo+Vl"}),icon:e4},OPEN_TAB:{message:ee({defaultMessage:"Open tabs",id:"KO2pxljl8b"}),icon:QI},RECENTLY_CLOSED_TAB:{message:ee({defaultMessage:"Recently closed tabs",id:"GrcBtKIzPh"}),icon:YI},BROWSER_HISTORY:{message:ee({defaultMessage:"Browser history",id:"DtBSny6kw5"}),icon:JT},MCP_TOOL:{message:ee({defaultMessage:"Connecting to {appName}",id:"w+iLkzBJV0"}),icon:QH},searching_flights:{message:ee({defaultMessage:"Searching flights",id:"9+i0zI94jg"}),icon:Rs},reviewing_booking_options:{message:ee({defaultMessage:"Reviewing options",id:"hEF13crkAK"}),icon:Rs},looking_for_booking_options:{message:ee({defaultMessage:"Looking for booking options",id:"KIKXHtHJvz"}),icon:Rs},redirecting_to_booking:{message:ee({defaultMessage:"Redirecting to booking site",id:"y/a1lYMfGW"}),icon:Rs},setting_up_price_alert_automation:{message:ee({defaultMessage:"Setting up PriceAlertAutomation",id:"+7IqVk27BT"}),icon:YH}},Wg={initial:{opacity:0,position:"absolute",width:"100%"},animate:{opacity:1,position:"relative",transition:{opacity:{duration:.3}}},exit:{opacity:0,position:"absolute",width:"100%",transition:{opacity:{duration:.3}}}},Gf=I.memo(e=>{const{isFinished:t,className:n,count:r,showAnimation:s,isPaused:a,...i}=e,l=Z(),c=e.action?Gh[e.action]?l.formatMessage(Gh[e.action].message):"":e.title,u=e.action?Gh[e.action]?.icon:e.icon,d=t||a;return o.jsx(Ke,{mode:"popLayout",children:o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:s?0:.2,ease:"easeInOut"},className:B("gap-sm group flex cursor-pointer flex-col",n),children:o.jsxs(D,{variant:"tinyRegular",color:t?"light":"super",className:"flex items-center gap-1 py-1.5",children:[u&&o.jsx(ce,{icon:u,size:"2xs",className:"-mt-px opacity-80"}),o.jsxs(yn,{variant:"super",active:!d,as:"span",speed:"slow",children:[c,r!==void 0&&r>0&&`  ${r}`]})]})},i.key)})});Gf.displayName="StepActionLabel";const Is=I.memo(({icon:e,text:t,favicon:n,className:r,iconClassName:s,url:a})=>{const i=o.jsx(H,{variant:"subtler",className:B("py-xs inline-block rounded-lg px-2",{"hover:bg-super group cursor-pointer":a},r),children:o.jsxs(D,{variant:"tinyMono",className:B("gap-x-xs flex pb-px !text-[0.68rem] leading-4",{"group-hover:text-inverse dark:group-hover:text-inverse":a}),children:[(n||e)&&o.jsx("div",{className:"h-4 pt-px",children:n?o.jsx("img",{src:n,alt:t,className:"size-[14px]"}):e?o.jsx(ce,{icon:e,size:"xs",className:s}):null}),o.jsx("p",{className:"px-two",children:t})]})});return a?o.jsx(Ge,{href:a,target:"_blank",rel:"noopener",children:i}):i});Is.displayName="BotLabel";const bVt=()=>{const e=ht(),t=q5(),n=f.useMemo(()=>e.getQueryData(t),[e,t]),{connectors:r}=ma({reason:"useHasUnauthenticatedGmailGcal"});return f.useMemo(()=>{const s=!!r?.connectors.find(a=>a.name==="gcal"&&(!a.connected||a.has_required_scopes===!1));return!(!n||!s)},[n,r])},_Vt=1e4,wVt=1e3*60,CVt=["comet-default-browser-status"],SVt=()=>{const e=Zn(),{data:t=null,isLoading:n}=We({queryKey:CVt,queryFn:async()=>{try{return await e.getIsCometDefaultBrowser("check_default_browser")}catch{return null}},refetchInterval:r=>r?.state?.data?wVt:_Vt,refetchIntervalInBackground:!0,staleTime:0});return{isDefaultBrowser:t,isDefaultBrowserLoading:n}},ANe=()=>{const{session:e}=Et(),{firstResult:{author_username:t}={},inFlight:n}=Vt();return e?.user?.username===t||n};var EVt={};const MVt=({position:e,inFlight:t,isLastResult:n,upsellInformation:r,backendUuid:s})=>{const[a,i]=f.useState(!1),[l,c]=f.useState(null),u=fn(),d=EVt.NEXT_PUBLIC_IS_SIDECAR_BUILD?"sidecar_thread":u?"search_results_page":void 0,{trackEventOnce:m,trackEvent:p}=Ne(),h=ANe(),g=bVt(),{subscriptionTier:y}=_t(),{isDefaultBrowser:v}=SVt(),x=f.useMemo(()=>{if(a||!r||e==="top"&&r.app_location!=="IN_THREAD"||e==="bottom"&&r.app_location!=="IN_THREAD_BOTTOM"||e==="input"&&r.app_location!=="IN_THREAD_INPUT"||e==="connector_auth"&&r.app_location!=="UPSELL_APP_LOCATION_UNSPECIFIED")return!1;const w=s;return!(!w||w===l||!n&&(!r.is_persistent||e==="input"||e==="router_steps"||e==="connector_auth")||e==="bottom"&&t||r.is_persistent&&(!h||r.name==="gmail_gcal_connector"&&!g||r.name==="comet_set_default_browser"&&v!==!1))},[a,r,e,s,l,n,t,h,g,v]);f.useEffect(()=>{if(!x||!r)return;const w=s;c(w),i(!0),m("thread upsell banner viewed",{entryUUID:w,upsellType:r.upsell_type,upsellName:r.name,cometSurface:d,subscriptionTier:y})},[s,x,m,r,d,y]);const b=f.useCallback(({hideBanner:w=!0}={})=>{w&&i(!1);const C=r,S=s;if(S&&C?.upsell_type){p("thread upsell banner dismissed",{entryUUID:S,upsellType:C.upsell_type,upsellName:C.name,cometSurface:d,subscriptionTier:y});const E=C.cta==="SHORTCUT_MODAL"?C.cta_information?.recommended_shortcut?.name:void 0;h3(C.name,E)}},[s,p,r,d,y]),_=f.useCallback(()=>{i(!1)},[]);return f.useMemo(()=>({show:a,handleDismiss:b,handleHide:_}),[b,a,_])},kVt=({icon_reference:e,icon_image:t})=>{if(t)return o.jsx(H,{variant:"subtle",className:"p-xs rounded-md border",children:o.jsx("img",{src:t.url,alt:t.alt,width:40,height:40,className:"rounded"})});const n={pro:o.jsx(ce,{icon:Pc.pro,size:"lg"}),collection:o.jsx(ce,{icon:Pc.collection,size:"lg"}),gmail_gcal:o.jsx(H,{variant:"subtle",className:"p-xs rounded-md border",children:o.jsx("img",{src:M5,alt:"Gmail Gcal Upsell Banner",width:40,height:40})}),research:o.jsx(ce,{icon:Pc.research,size:"lg"}),labs:o.jsx(ce,{icon:Pc.labs,size:"lg"}),max:o.jsx(YF,{width:"w-8"}),shortcut:o.jsx(ce,{icon:G7,size:"lg"}),comet_login:o.jsx(H,{variant:"super",className:"p-xs rounded-md border",children:o.jsx(D,{color:"defaultInverted",children:o.jsx(Io,{size:24})})})};return e==="comet_download"?null:n[e||""]||o.jsx(ce,{icon:Pc.pro,size:"lg"})},l0=I.memo(({position:e,upsellInformation:t,inFlight:n,isLastResult:r,backendUuid:s,animateExpand:a=!0,hideOnAccept:i=!0,hideOnReject:l=!0,isSkipping:c=!1,onAccept:u,onReject:d,className:m})=>{const{$t:p}=Z(),{show:h,handleDismiss:g,handleHide:y}=MVt({position:e,inFlight:n,isLastResult:r,upsellInformation:t,backendUuid:s}),v=f.useCallback(()=>{g({hideBanner:l}),d?.()},[g,d,l]),x=f.useCallback(()=>{g({hideBanner:i}),u?.()},[g,u,i]),_=Nt()?.get("handle_upsell");f.useEffect(()=>{if(h&&_){const E=new URLSearchParams(window.location.search);E.delete("handle_upsell");const M=Object.fromEntries(E.entries());Ry(M),x()}},[x,h,_]);const w=rt();if(!h||!t||w&&t.upsell_type===j2.LOGIN)return null;const C=kVt(t),S=e==="router_steps"||e==="connector_auth";return o.jsx(Ke,{children:o.jsx(ge.div,{initial:a?{height:0}:{opacity:0},animate:a?{height:"auto"}:{opacity:1},exit:a?{height:0}:{opacity:0},transition:{duration:.2},children:o.jsx("div",{className:"bg-base",children:o.jsxs(H,{variant:t.background_super?"superLight":"subtler",className:B("gap-sm mb-md p-md md:gap-md relative flex w-full flex-col items-center rounded-md md:flex-row",{"rounded-xl shadow-xl ring-1":e==="input"||e==="router_steps"},m),children:[o.jsx("div",{className:"right-md top-md absolute z-10 md:hidden",children:o.jsx(Te,{icon:Rt,size:"small",onClick:v,noPadding:!0})}),C&&o.jsx(D,{color:"default",className:"mr-sm hidden md:block",children:C}),o.jsxs("div",{className:"md:mr-sm relative flex w-full flex-col",children:[o.jsx(D,{variant:"smallBold",className:B("mr-lg md:mr-0",{"line-clamp-2":t.upsell_type===j2.CREATE_SHORTCUT}),children:t.title}),o.jsx(D,{variant:"small",color:"light",className:"mb-0 font-normal leading-[1.3]",children:t.description})]}),o.jsxs("div",{className:"md:gap-sm flex size-full items-end justify-end md:w-auto md:flex-row md:items-center",children:[S&&o.jsx(Te,{text:p({defaultMessage:"Skip",id:"/4tOwTiCH6"}),size:"small",onClick:v,variant:"common",isLoading:c}),t.button_text&&o.jsx(g3,{upsellInformation:t,inFlight:n,position:e,hideUpsell:y}),!S&&o.jsx("div",{className:"mt-sm hidden md:block",children:o.jsx(Te,{icon:Rt,size:"small",onClick:v,noPadding:!0})})]})]})})})})});l0.displayName="ThreadUpsell";const TVt=()=>{const{$t:e}=Z();return f.useMemo(()=>({success:e({defaultMessage:"Success",id:"xrKHS6mnOh"}),couldNotFinish:e({defaultMessage:"Could not finish",id:"Sz8oY2B0GK"}),allEmail:e({defaultMessage:"All Emails",id:"xe3SFk3aV+"}),allTabs:e({defaultMessage:"All tabs",id:"vYBCIf+wNz"}),failedClosedTabs:e({defaultMessage:"Could not close tabs",id:"hjoQ7gU34V"}),results:e({defaultMessage:"Results",id:"yaMHMBMsQ7"}),continue:e({defaultMessage:"Continue",id:"acrOozm08x"}),skip:e({defaultMessage:"Skip",id:"/4tOwTiCH6"}),foundInfo:e({defaultMessage:"Details retrieved",id:"YCMMMHEIKw"}),allTabGroups:e({defaultMessage:"All tab groups",id:"YL1jEopcqf"}),gmailNotAuthenticated:e({defaultMessage:"Gmail not connected",id:"Zj8MiXlulR"}),googleCalendarNotAuthenticated:e({defaultMessage:"Google Calendar not connected",id:"PH33AilmeW"}),matchesFound:t=>t===0?e({defaultMessage:"No matches found",id:"KeJh7yZCu8"}):e({defaultMessage:"{count, plural, one {One match found} other {# matches found}}",id:"ji6QO7fi7u"},{count:t}),emailsFound:t=>t===0?e({defaultMessage:"No emails found",id:"suW4stNi19"}):e({defaultMessage:"{count, plural, one {# email} other {# emails}}",id:"Rh0ulH+p+5"},{count:t}),eventsFound:t=>t===0?e({defaultMessage:"No events found",id:"GDgEmCHaVM"}):e({defaultMessage:"{count, plural, one {# event} other {# events}}",id:"HhJ8RP7qsx"},{count:t}),availableTimesFound:t=>t===0?e({defaultMessage:"No available times found",id:"2jnY2Ky2Nv"}):e({defaultMessage:"{count, plural, one {# available time} other {# available times}}",id:"5yH+BVFO1f"},{count:t}),selectedContacts:t=>e({defaultMessage:"Selected {count, plural, one {# contact} other {# contacts}}",id:"4kDAeuSFTs"},{count:t}),skippedContacts:e({defaultMessage:"Skipped selecting contacts",id:"IXqYGlHPpF"}),noAvailabilityFound:e({defaultMessage:"No availability",id:"x2vleFRn/L"})}),[e])},NVt=async(e,t)=>{try{return await se.POST("/rest/sse/handle_perplexity_blocking_clarifying_answers","blocking-clarifying-questions",{body:{result:{tool_uuid:t,answers:e}}})}catch(n){ne.log(n);return}},jVt=()=>vt({mutationFn:({answers:e,toolUuid:t})=>NVt(e,t)}),AVt=async(e,t,n)=>{const r=await se.POST("/rest/sse/handle_tool_user_approval_response","mcp-tool-user-approval",{body:{result:{uuid:e,allow_tool_call:t,user_revision:n}}});if(r.error)throw r.error;return r},IVt=()=>vt({mutationFn:({uuid:e,allowToolCall:t,userRevision:n})=>AVt(e,t,n)}),INe=I.memo(e=>{const{questions:t,answers:n,toolUuid:r,isFinished:s}=e,{$t:a}=Z(),{isMobileStyle:i,isMobileUserAgent:l}=xe(),{mutate:c,isSuccess:u}=jVt(),[d,m]=f.useState(()=>n.length===0||n.length!==t.length?t.map(()=>""):[...n]),p=f.useCallback((g,y)=>{m(v=>{const x=[...v];return x[g]=y,x})},[]),h=f.useCallback(()=>{c({answers:d,toolUuid:r})},[d,r,c]);return t.length===0?null:o.jsxs(H,{variant:"subtler",className:"p-md rounded-md",children:[t.map((g,y)=>o.jsx(RNe,{question:g,index:y,value:d[y]??"",onChange:p,isMobileStyle:i,isMobileUserAgent:l,isDisabled:u||s},y)),o.jsx(he,{extraCSS:"!px-lg mt-md",variant:"primary",text:a({defaultMessage:"Submit",id:"wSZR47Y5kj"}),onClick:h,disabled:s||u,type:"submit"})]})});INe.displayName="BlockingClarifyingQuestions";const RNe=I.memo(({question:e,index:t,value:n,onChange:r,isMobileStyle:s,isMobileUserAgent:a,isDisabled:i})=>{const l=f.useCallback(c=>{r(t,c)},[t,r]);return o.jsxs(H,{className:"gap-sm mt-md flex flex-col",children:[o.jsx(D,{variant:"small",children:e}),o.jsx(Aa,{value:n,onChange:l,isMobileStyle:s,isMobileUserAgent:a,disabled:i})]},t)});RNe.displayName="QuestionInput";const PNe=I.memo(({mediaItems:e,className:t})=>{const n=e?.[e?.length-1],r=n?.media_item,s=r?.image||r?.thumbnail,a=f.useMemo(()=>({url:r?.url,name:r?.name}),[r?.name,r?.url]);return n?o.jsxs("div",{className:B("@xs:px-md @xs:pb-md px-sm pb-sm relative flex flex-col gap-1.5",t),children:[o.jsx(Ke,{mode:"wait",children:o.jsx(ge.div,{className:"after:ring-subtler @xs:w-20 md:@xs:w-60 relative overflow-hidden rounded after:pointer-events-none after:absolute after:inset-0 after:rounded-md after:ring-1 after:ring-inset after:ring-opacity-50 md:w-full dark:after:ring-0",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.1,ease:"easeOut"},children:o.jsx(fs,{src:r?.thumbnail,lightboxSrc:s,alt:r?.name,origin:a,includeLightBoxModal:!0,rounded:!0,imageClassName:"object-cover w-full text-[0] dark:mix-blend-normal",containerClassName:"h-full w-full",maskClassName:"bg-subtler"})},r?.thumbnail)}),r?.url&&o.jsx("div",{children:o.jsx(Ge,{href:r?.url,target:"_blank",children:o.jsx(Te,{icon:ao,variant:"common",size:"tiny",text:"Open page",extraCSS:"group",iconClassName:"group-hover:text-super",textClassName:"group-hover:text-super font-normal",noPadding:!0})})})]}):null});PNe.displayName="StepCardMedia";const AW=f.memo(({count:e,className:t})=>o.jsx(H,{className:B("flex select-none items-center pt-px text-center font-mono text-xs tabular-nums leading-none",t),as:"span",children:o.jsx(ci,{value:e})}));AW.displayName="AnimatedCounter";const c0=I.memo(({favicon:e,description:t,descriptionClassName:n,title:r,descriptionFooter:s,count:a,url:i,media:l,children:c,className:u,showMedia:d=!0,onClick:m,isMissionControlSummary:p,accessory:h})=>{const g=d&&l&&l.length>0;return o.jsxs(H,{variant:"raised",className:B("@container group/step-card relative isolate flex flex-col gap-1.5 overflow-hidden rounded-xl border shadow-sm",u),onClick:m,children:[h&&o.jsx("div",{className:"absolute right-2 top-2",children:h}),(r||e)&&o.jsxs("div",{className:B("@xs:px-md px-sm @xs:pt-3 @xs:gap-3 gap-sm flex min-w-0 items-center pt-2"),children:[i&&e?o.jsx(Ge,{href:i,target:"_blank",rel:"noopener",className:"@xs:size-4 inline-flex size-3 shrink-0 items-center justify-center overflow-hidden rounded",children:e}):e,o.jsxs("div",{className:"@xs:text-sm flex min-w-0 flex-1 items-baseline text-xs",children:[r&&o.jsx("div",{className:"relative flex min-w-0 flex-1",children:o.jsx(D,{variant:"tiny",className:"@xs:text-sm min-w-0 flex-1 truncate",children:r})}),a&&o.jsxs("div",{className:"relative flex items-center",children:[o.jsx("span",{className:"px-xs ml-px leading-none opacity-35",children:""}),o.jsx(AW,{count:a,className:"opacity-65"})]})]})]}),o.jsxs("div",{className:"@xs:gap-sm @xs:flex-row flex flex-col gap-0",children:[o.jsxs("div",{className:"flex min-w-0 grow flex-col gap-1.5",children:[t&&o.jsx(o.Fragment,{children:p?o.jsx(ONe,{description:t}):o.jsx(D,{variant:"tinyRegular",className:B("px-md @xs:text-sm text-pretty",e?"@xs:ml-7 ml-4":void 0,n),children:t})}),s&&o.jsx("div",{className:"px-md @xs:ml-7 ml-4",children:s}),c]}),g&&o.jsx(PNe,{mediaItems:l})]})]})});c0.displayName="StepCard";const ONe=I.memo(({description:e})=>{const[t,n]=f.useState(!1),{$t:r}=Z(),s=f.useCallback(a=>{a.stopPropagation(),n(!t)},[t]);return o.jsxs(D,{variant:"tinyRegular",className:B("px-md mb-sm @xs:text-sm @xs:ml-7 relative ml-4 line-clamp-2 text-pretty",t&&"line-clamp-none"),children:[o.jsxs("span",{className:B("relative",{"select-none":!t}),children:[e,t&&o.jsxs(D,{inline:!0,variant:"tinyRegular",color:"light",className:"hover:text-super inline-flex select-none items-center opacity-0 group-hover/step-card:opacity-100",onClick:s,children:["",r({id:"mFYgAXM/x4",defaultMessage:"Less"}),o.jsx(ce,{icon:ey,size:"xs"})]})]}),!t&&o.jsxs(o.Fragment,{children:[o.jsx(H,{className:"absolute inset-0",variant:"raised",style:{maskImage:"linear-gradient(to bottom, transparent 0%, black 100%)"}}),o.jsxs(D,{variant:"tinyRegular",color:"light",className:"right-md hover:text-super bg-raised pl-xs absolute bottom-0 hidden translate-x-2 select-none items-center group-hover/step-card:inline-flex",onClick:s,children:[r({id:"I5NMJ8llIi",defaultMessage:"More"}),o.jsx(ce,{icon:Dn,size:"xs"})]})]})]})});ONe.displayName="ExpandableDescription";const iS=20,RVt=220,r2=I.memo(({position:e,opacity:t,height:n,offset:r=0})=>o.jsx("div",{className:`dark:from-offset pointer-events-none absolute inset-x-0 from-white to-white/0 dark:to-transparent ${e==="top"?"bg-gradient-to-b":"bottom-0 bg-gradient-to-t"} z-20 backdrop-blur-[0.25px] transition-opacity duration-150`,style:{opacity:t,height:n??(e==="top"?24:16),top:e==="top"?`${r}px`:void 0}}));r2.displayName="ScrollGradient";const dw=I.memo(({children:e,className:t,scrollContainerClassName:n,maxHeight:r=RVt,showTopGradient:s=!0,showBottomGradient:a=!0,autoScroll:i=!0,topGradientOffset:l=0})=>{const c=f.useRef(null),[u,d]=f.useState(1),[m,p]=f.useState(0),h=f.useCallback(()=>{const g=c.current;if(!g)return;const y=Math.abs(g.scrollTop),v=Math.max(0,g.scrollHeight-g.clientHeight);i?(d(Math.min(1,Math.max(0,v-y)/iS)),p(Math.min(1,y/iS))):(d(Math.min(1,y/iS)),p(Math.min(1,Math.max(0,v-y)/iS)))},[i]);return f.useEffect(()=>{h(),p(1)},[h]),f.useEffect(()=>{const g=c.current;if(g)return g.addEventListener("scroll",h),()=>g.removeEventListener("scroll",h)},[h]),f.useEffect(()=>{h();const g=c.current;if(!g)return;const y=new MutationObserver(h);return y.observe(g,{childList:!0,subtree:!0,characterData:!0}),()=>y.disconnect()},[e,h]),o.jsxs(H,{className:B("relative",t),children:[s&&o.jsxs(o.Fragment,{children:[o.jsx(r2,{position:"top",opacity:u,offset:l}),o.jsx(r2,{position:"top",opacity:u,height:6,offset:l})]}),o.jsx("div",{ref:c,className:B(i?"flex-col-reverse":"flex-col","scrollbar-subtle pb-sm relative flex overflow-y-auto pl-3 pr-1 [scrollbar-gutter:stable]",n),style:{maxHeight:r},children:e}),a&&o.jsx(r2,{position:"bottom",opacity:m})]})});dw.displayName="StepCardScrollableContent";const LNe=I.memo(({form_items:e,taskUuid:t})=>{const n=e?.[0]?.text_area_item,r=n?.placeholder,s=n?.text,[a,i]=f.useState(r||""),l="agent-form",c=f.useCallback(async h=>{try{await se.POST("/rest/browser/agent_confirmation",l,{body:{task_uuid:t,status:h,message:a},backOffTime:100,numRetries:2,headers:{"Content-Type":"application/json"}})}catch(g){ne.error("Error sending agent confirmation",g)}},[t,a,l]),{$t:u}=Z(),d=f.useCallback(h=>{ra.isEnterKeyWithoutShift(h)&&c("accept")},[c]),m=f.useCallback(h=>{h.stopPropagation(),c("accept")},[c]),p=f.useCallback(h=>{h.stopPropagation(),c("reject")},[c]);return o.jsxs(H,{className:"flex flex-col gap-3",children:[o.jsx(D,{color:"light",variant:"small",children:s}),o.jsx(Aa,{isMobileStyle:!1,isMobileUserAgent:!1,placeholder:r,value:a,onChange:i,onKeyDown:d}),o.jsxs("div",{className:"gap-sm py-sm flex items-center",children:[o.jsx(he,{size:"small",variant:"inverted",text:u({defaultMessage:"Continue",id:"acrOozm08x"}),type:"submit",disabled:!1,onClick:m}),o.jsx(Te,{size:"small",text:u({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:p})]})]})});LNe.displayName="AgentForm";const PVt=1e3,DNe=I.memo(({message:e,isFinished:t,isPaused:n,isPendingClarification:r})=>{const[s,a]=f.useState(!1),i=f.useRef(e.thought||""),[l,c]=f.useState("working");f.useEffect(()=>{if(t){a(!1);return}e.thought!==i.current&&(i.current=e.thought,a(!1));const m=setTimeout(()=>{!t&&!e.action&&a(!0)},PVt);return()=>clearTimeout(m)},[e.thought,e.action,t]);const u=!e.action&&!e.thought&&e.url;return f.useEffect(()=>{let m="working";t?m="finished":n?m="paused":r?m="considering_clarification":u?m="reasoning":s&&!e.action?m="working":e.action&&e.action in Gh&&(m=e.action),c(m)},[t,u,s,e.action,n,r]),!t&&(r||e.action||u||s&&!e.action)&&o.jsx(Gf,{action:l,isFinished:t,isPaused:n,className:"pl-8"})});DNe.displayName="AgentStatusManager";var OVt={};const FNe=I.memo(({citationUrl:e})=>{const t=f.useCallback(()=>{window.open(e,"_blank","noopener,noreferrer")},[e]);return o.jsx($l,{icon:ao,iconClassName:"-ml-px",className:"animate-in fade-in duration-150",size:"extraSmall",textColor:"light",iconOnly:!0,tooltip:"Open page",onClick:t})});FNe.displayName="ExternalCitationBubble";const UNe=I.memo(({message:e,task:t})=>{const n=e.url||t.start_url,r=e.url?o.jsx(FNe,{citationUrl:n}):null;return o.jsx(Qr,{children:e.thought&&o.jsxs("div",{className:"pl-xs flex gap-3",children:[o.jsx(D,{color:"light",variant:"small",className:"size-4 py-1.5",children:r}),o.jsx(D,{color:"light",variant:"small",className:"py-1.5",children:e.thought})]})})});UNe.displayName="MessageItem";const BNe=I.memo(({task:e,isFinished:t,isPaused:n})=>{const r=e.agent_messages[e.agent_messages.length-1];return o.jsx(dw,{children:o.jsxs(zs,{mode:"sync",initial:!1,children:[e.agent_messages.length>0&&e.agent_messages.map((s,a)=>o.jsx(Qr,{children:o.jsx(UNe,{message:s,task:e})},a)),o.jsx(Qr,{children:o.jsx("div",{children:o.jsx(DNe,{message:e.agent_messages.length>0?r:{action:"working",thought:"",url:"",answer:"",uuid:"",value:""},isFinished:t||e.clarification_status==="STOPPED_TASK",isPaused:n,isPendingClarification:e.clarification_status==="PENDING"})})})]})})});BNe.displayName="ScrollableContent";const VNe=I.memo(({lastMessage:e,taskUuid:t})=>e.form?o.jsx("div",{className:"px-md py-sm ml-7",children:o.jsx(LNe,{form_items:e.form.form_items,taskUuid:t})}):null);VNe.displayName="FormContent";const VO=I.memo(({task:e,isFinished:t,index:n,isMissionControl:r})=>{const s=e.agent_messages[e.agent_messages.length-1],a=s?.form,i=e.uuid,{taskScreenshots:{[i]:l},tasksState:{[i]:{is_paused:c=!1}={}},taskTabs:u}=Hr(),{$t:d}=Z(),m=Zn(),{result:p}=an(),h=f.useMemo(()=>u?.some(E=>E.taskUuid===i)??!1,[u,i]),g=f.useMemo(()=>l?[{media_item:{thumbnail:l,image:l,name:d({defaultMessage:"Screenshot",id:"9a+SKtXKhe"})},task_uuid:i,message_uuid:""}]:ue,[d,l,i]),y=f.useMemo(()=>o.jsx(zi,{domain:e.start_url}),[e.start_url]),v=f.useMemo(()=>e.agent_messages.filter(M=>M.screenshot).map(M=>({media_item:{thumbnail:M.screenshot,image:M.screenshot,name:d({defaultMessage:"Screenshot",id:"9a+SKtXKhe"})},task_uuid:e.uuid,message_uuid:""})),[d,e.uuid,e.agent_messages]),x=f.useMemo(()=>a?ue:e.media&&e.media.length?e.media:v.length?v:g,[a,v,g,e.media]),b=f.useCallback(async E=>{if(!(t&&r&&!h)){if(E.stopPropagation(),t)if(r){if(!h)return}else return;OVt.NEXT_PUBLIC_IS_SIDECAR_BUILD?await m.makeTaskVisible(i):await m.moveThreadToSidecar({activeTaskUuid:i,isMissionControl:r,entryId:p?.backend_uuid,reason:"move-browser-step"})}},[m,i,t,r,h,p?.backend_uuid]),_=r&&t,w=e.clarification_status,C=E=>{switch(E){case"UPDATED_TASK":return d({defaultMessage:"Updated per your clarification",id:"UmUpwNXXy9"});case"STOPPED_TASK":return d({defaultMessage:"Stopped per your clarification",id:"Uura7/Ftc2"});default:return""}},S=w&&w!=="PENDING"?o.jsxs(D,{variant:"tinyRegular",className:"gap-xs py-xs text-super flex",children:[o.jsx(ce,{icon:cOe,size:"xs"}),o.jsx("span",{className:"text-pretty",children:C(w)})]}):null;return o.jsx(c0,{favicon:y,title:aU(e.start_url),accessory:h&&_?o.jsx(ce,{icon:ao,size:"xs",className:"group-hover/step-card:text-super opacity-60 group-hover/step-card:opacity-100"}):void 0,media:x,description:e.task,descriptionFooter:S,showMedia:!a,onClick:b,className:B("border transition-colors duration-150 hover:!transition-none",h&&"hover:border-super/75 group/step-card cursor-pointer"),isMissionControlSummary:_,children:_?null:a&&s&&!t?o.jsx(VNe,{lastMessage:s,taskUuid:e.uuid}):o.jsx(BNe,{task:e,isFinished:t,isPaused:c})},n)});VO.displayName="TaskStep";const $Ne=I.memo(({step:e,isFinished:t,isMissionControl:n})=>o.jsx(LVt,{tasks:e.content.tasks,isMissionControl:n,isFinished:t})),LVt=({tasks:e,isMissionControl:t,isFinished:n})=>t&&n&&e.length>1?o.jsx("div",{className:"-mx-sm",children:o.jsx(Wi,{orientation:"horizontal",viewportClassName:"px-sm",showScrollIndicator:!1,children:o.jsxs(H,{className:"gap-sm flex flex-row",children:[e.map((s,a)=>o.jsx("div",{className:"w-3/4 shrink-0",children:o.jsx(VO,{task:s,isFinished:n,index:a,isMissionControl:t})},a)),o.jsx("div",{className:"w-px shrink-0"})]})})}):o.jsx(H,{className:"gap-y-md flex flex-col",children:e.map((s,a)=>o.jsx(VO,{task:s,isFinished:n,index:a,isMissionControl:t},a))});$Ne.displayName="BrowserStep";const WNe=I.memo(({disabled:e,onClick:t})=>o.jsx(he,{disabled:e,onClick:t,icon:fb,variant:"common",size:"small"}));WNe.displayName="CardPaginationPrevious";const HNe=I.memo(({disabled:e,onClick:t})=>o.jsx(he,{disabled:e,onClick:t,icon:Kn,variant:"common",size:"small"}));HNe.displayName="CardPaginationNext";const wsn=e=>[...e].sort((t,n)=>{const r=new Date(t.start_date_time||"").getTime(),s=new Date(n.start_date_time||"").getTime();return r-s}),Csn=e=>{if(e.length<=1)return!1;const t=new Date(e[0]?.start_date_time||""),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return e.some(r=>{const s=new Date(r.start_date_time||"");return new Date(s.getFullYear(),s.getMonth(),s.getDate()).getTime()!==n})},DVt={"#AC725E":"#79554B","#D06B64":"#E67399","#F83A22":"#D50000","#FA573C":"#F4511E","#FF7537":"#EF6C00","#FFAD46":"#F09300","#42D692":"#009688","#16A765":"#0B8043","#7BD148":"#7CB342","#B3DC6C":"#C0CA33","#FBE983":"#E4C441","#FAD165":"#F6BF26","#92E1C0":"#039BE5","#9FE1E7":"#4285F4","#9FC6E7":"#3F51B5","#4986E7":"#7986CB","#9A9CFF":"#B39DDB","#C2C2C2":"#616161","#CABDBF":"#A79B8E","#CCA6AC":"#AD1457","#F691B2":"#D81B60","#CD74E6":"#8E24AA","#A47AE2":"#7B1FA2"},FVt="#039BE5",zNe=e=>DVt[e.toUpperCase()]??FVt,GNe=e=>{const t=e.replace("#",""),n=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),s=parseInt(t.substring(4,6),16),a=m=>{const p=m/255;return p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4)},i=a(n),l=a(r),c=a(s),u=.2126*i+.7152*l+.0722*c,d=(Math.max(u,1)+.05)/(Math.min(u,1)+.05);return d>=7?"AAA":d>=4.5?"AA":d>=3?"A":"Fail"},UVt=e=>typeof e=="string"?{email:e,response_status:void 0,photo_url:void 0,display_name:void 0}:{email:e.email,response_status:e.response_status,photo_url:e.photo_url,display_name:e.display_name},Wae=e=>e?e.map(UVt):[],BVt=e=>{if(!e||e.trim()==="")return"";const t=e.trim().split(/\s+/);return LM(t)?t[0].charAt(0).toUpperCase():((t[0]?.charAt(0)??"")+(t[t.length-1]?.charAt(0)??"")).toUpperCase()},IW=(e,t)=>t.formatDate(e,{timeZoneName:"short"}).split(", ").pop()||"",VVt=()=>Intl.DateTimeFormat().resolvedOptions().timeZone.split("/").pop()?.replace(/_/g," ")||"",$Vt=(e,t)=>t.formatDate(e,{timeZoneName:"shortOffset"}).split(", ").pop()||"",WVt=()=>{const{formatDate:e}=Z(),t=f.useCallback((s,a=!0)=>e(s,{month:"long",day:"numeric",...a&&{year:"numeric"}}),[e]),n=f.useCallback(s=>e(s,{weekday:"long",month:"long",day:"numeric"}),[e]),r=f.useCallback(s=>e(s,{weekday:"short",month:"long",day:"numeric"}),[e]);return f.useMemo(()=>({formatEventDate:t,formatEventDay:n,formatEventDayShort:r}),[t,n,r])},_x=I.memo(({startDate:e,endDate:t,isAllDay:n,showDate:r=!1,includeYear:s=!0})=>{const{$t:a}=Z();if(n){const i=a({defaultMessage:"All day",id:"Vob6h4Xsl3"});return r?o.jsxs(o.Fragment,{children:[o.jsx(n4,{from:e,to:e,...s&&{year:"numeric"},month:"long",day:"numeric"}),", ",i]}):o.jsx(o.Fragment,{children:i})}return r?o.jsx(n4,{from:e,to:t,...s&&{year:"numeric"},month:"long",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}):o.jsx(n4,{from:e,to:t,hour:"numeric",minute:"2-digit",timeZoneName:"short"})});_x.displayName="EventTimeRange";const Ld=I.memo(({oldText:e,newText:t,isDeletion:n=!1})=>!e&&!t?null:n&&(e||t)?o.jsx(D,{as:"span",color:"ultraLight",className:"line-through",children:e||t}):!e&&t?o.jsx(D,{as:"span",color:"default",className:"bg-[#facc15]/25",children:t}):!t&&e?e:e&&t&&e===t?o.jsx(D,{as:"span",color:"default",children:e}):e&&t&&e!==t?o.jsxs(o.Fragment,{children:[o.jsx(D,{as:"span",color:"ultraLight",className:"line-through",children:e}),"",o.jsx(D,{as:"span",color:"default",className:"bg-[#facc15]/25",children:t})]}):null);Ld.displayName="DiffedText";const So=I.memo(({children:e,icon:t,alignCenter:n=!1,iconSize:r="sm"})=>o.jsxs("div",{className:B("flex flex-row items-start gap-3",{"items-center":n}),children:[o.jsx(ce,{icon:t,size:r,className:"mt-px shrink-0"}),o.jsx("div",{className:"min-w-0 flex-1",children:e})]}));So.displayName="EventAttribute";const qNe=I.memo(({attendee:e,showRsvp:t=!1})=>o.jsxs("div",{className:"relative w-5",children:[e.photo_url?o.jsx(sn,{fullBleed:!0,className:"absolute inset-0 mt-px size-5 overflow-hidden !rounded-full",children:o.jsx("img",{src:e.photo_url,className:"size-full object-cover",alt:e.display_name||e.email||""})}):o.jsx(H,{variant:"subtle",className:"absolute inset-0 mt-px flex size-5 items-center justify-center rounded-full",children:o.jsx(D,{variant:"tinyMono",color:"light",className:"translate-y-half",children:BVt(e.display_name||e.email||"")})}),t&&(e.response_status==="accepted"||e.response_status==="declined")&&o.jsx(H,{variant:"background",className:"p-two absolute bottom-[-4px] right-[-4px] z-10 rounded-full",children:o.jsx(D,{color:e.response_status==="accepted"?"super":e.response_status==="declined"?"red":"light",className:B("bg-base border-subtlest flex size-3 items-center justify-center rounded-full border",{"!bg-super/20 !border-super/10 border":e.response_status==="accepted","!bg-negative/20 !border-negative/10":e.response_status==="declined"}),children:o.jsx(ce,{icon:e.response_status==="accepted"?Sr:e.response_status==="declined"?Rt:uOe,size:"2xs",stroke:2.125})})})]}));qNe.displayName="AttendeeAvatar";const KNe=I.memo(({attendees:e,newAttendees:t,truncateAttendees:n,showRsvp:r=!1,isDeletion:s=!1})=>{const[a,i]=f.useState(!1),c=Wae(e).filter(g=>!g.email?.includes("@resource.calendar.google"));let u;t&&(u=Wae(t).filter(y=>!y.email?.includes("@resource.calendar.google")));const d=(g,y)=>{const v=g?.map(x=>{let b;return y?b=y?.find(_=>_.email===x.email)??{email:" ",response_status:void 0,photo_url:void 0,display_name:" "}:b=x,{oldValue:x,newValue:b}})??[];return y&&(g?y.filter(b=>!g.some(_=>_.email===b.email)):y).forEach(b=>{v.push({oldValue:void 0,newValue:b})}),v},m=u||c,p=d(c,u),h=f.useCallback(()=>i(!a),[a]);return o.jsxs("div",{className:"min-w-0",children:[(()=>{const g=m?.length??0;return o.jsx(D,{variant:"small",color:g>0?"default":"light",className:s?"line-through":"",children:g>0?`${g} ${g===1?"Guest":"Guests"}`:"No Guests"})})(),p&&p.length>0&&o.jsxs("div",{className:"gap-sm my-sm flex flex-col",children:[p.slice(0,n&&!a?n:void 0).map(g=>o.jsxs("div",{className:"gap-sm flex flex-row",children:[o.jsx(qNe,{attendee:g.newValue,showRsvp:r}),o.jsx(D,{variant:"small",color:"default",className:"line-clamp-1 text-ellipsis break-all",children:o.jsx(Ld,{oldText:g.oldValue?.display_name||g.oldValue?.email,newText:g.newValue?.display_name||g.newValue?.email,isDeletion:s})})]},g.oldValue?.email??g.newValue?.email)),n&&p.length>n&&o.jsx(D,{as:"button",variant:"small",color:"default",className:"w-fit text-left hover:underline",onClick:h,children:a?"Show less":"Show all"})]})]})});KNe.displayName="AttendeeList";const YNe=I.memo(({videoEntryPoint:e,isDeletion:t})=>{const{$t:n}=Z(),r=f.useCallback(()=>window.open(e?.uri,"_blank","noopener,noreferrer"),[e?.uri]);return!e||t?null:o.jsx(So,{icon:Y7,alignCenter:!0,children:o.jsx(he,{variant:"primary",pill:!0,text:n({defaultMessage:"Join Meeting",id:"HK25u5mIfw"}),onClick:r,size:"small"})})});YNe.displayName="EventVideoEntry";const QNe=I.memo(({location:e,newLocation:t,isDeletion:n=!1})=>e?o.jsx(So,{icon:HM,children:o.jsx(D,{variant:"small",color:"light",className:"line-clamp-1",children:o.jsx(Ld,{oldText:e,newText:t,isDeletion:n})})}):null);QNe.displayName="EventLocation";const XNe=I.memo(({description:e,newDescription:t,isDeletion:n=!1})=>{const[r,s]=f.useState(!1),a=f.useCallback(()=>s(!r),[r]);return e?o.jsx(So,{icon:fle,children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx(D,{variant:"small",className:B("break-words",{"line-clamp-2":!r}),children:o.jsx(Ld,{oldText:e,newText:t,isDeletion:n})}),e.length>150&&o.jsx(D,{as:"button",variant:"small",color:"default",className:"mt-1 w-fit text-left hover:underline",onClick:a,children:r?"Show less":"Show more"})]})}):null});XNe.displayName="EventDescription";const ZNe=I.memo(({startDate:e,endDate:t,newStartDateObj:n,newEndDateObj:r,newEvent:s,is_all_day:a,formatEventDayShort:i,isDeletion:l=!1})=>{const c=Z(),u=s&&n?n:e,d=s&&r?r:t,m=s?s.is_all_day||!1:a;return o.jsxs("div",{className:"gap-two flex flex-col",children:[o.jsx(D,{variant:"smallBold",color:"default",className:"line-clamp-1",children:o.jsx(Ld,{oldText:i(e),newText:s&&n?i(n):void 0,isDeletion:l})}),o.jsx(D,{variant:"small",color:"light",children:o.jsxs("span",{className:l?"line-through":"",children:[o.jsx(_x,{startDate:u,endDate:d,isAllDay:m}),!m&&` (${IW(u,c)})`]})})]})});ZNe.displayName="SingleDayDisplay";const JNe=I.memo(({startDate:e,endDate:t,newStartDateObj:n,newEndDateObj:r,newEvent:s,formatEventDayShort:a,isDeletion:i=!1})=>{const l=Z(),c=s&&r?r:t,u=s&&s.is_all_day||!1;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"gap-two flex flex-col",children:[o.jsx(D,{variant:"smallBold",color:"default",className:"line-clamp-1",children:o.jsx(Ld,{oldText:a(e),newText:s&&n?a(n):void 0,isDeletion:i})}),o.jsx(D,{variant:"small",color:"light",children:o.jsx("span",{className:i?"line-through":"",children:!s?.is_all_day&&o.jsx(ZI,{value:s&&n?n:e,hour:"numeric",minute:"2-digit"})})})]}),o.jsx(D,{color:"light",className:"pt-two flex justify-center",children:o.jsx(ce,{icon:WM,size:"sm"})}),o.jsxs("div",{className:"gap-two flex flex-col",children:[o.jsx(D,{variant:"smallBold",color:"default",className:"line-clamp-1",children:o.jsx(Ld,{oldText:a(t),newText:s&&r?a(r):void 0,isDeletion:i})}),o.jsx(D,{variant:"small",color:"light",children:o.jsx("span",{className:i?"line-through":"",children:!u&&o.jsxs(o.Fragment,{children:[o.jsx(ZI,{value:c,hour:"numeric",minute:"2-digit"}),` (${IW(c,l)})`]})})})]})]})});JNe.displayName="MultiDayDisplay";const eje=I.memo(({startDate:e,endDate:t,newStartDateObj:n,newEndDateObj:r,newEvent:s,is_all_day:a,formatEventDayShort:i,isDeletion:l=!1})=>{const c=eit(e,t);return o.jsx(So,{icon:Wm,children:o.jsxs("div",{className:"gap-sm flex",children:[c&&o.jsx(ZNe,{startDate:e,endDate:t,newStartDateObj:n,newEndDateObj:r,newEvent:s,is_all_day:a,formatEventDayShort:i,isDeletion:l}),!c&&o.jsx(JNe,{startDate:e,endDate:t,newStartDateObj:n,newEndDateObj:r,newEvent:s,formatEventDayShort:i,isDeletion:l})]})})});eje.displayName="EventDateDisplay";const HVt=I.memo(({startDate:e,newStartDate:t})=>{const n=Z();if(!e)return null;const r=t||e,s=$Vt(r,n),a=VVt(),i=IW(r,n);return o.jsx(So,{icon:$m,alignCenter:!0,children:o.jsxs("div",{children:[o.jsxs(D,{as:"span",variant:"small",color:"light",children:[s," "]}),o.jsx(D,{as:"span",variant:"small",children:a}),o.jsxs(D,{as:"span",variant:"small",color:"light",children:[" ","(",i,")"]})]})})});HVt.displayName="EventTimezone";const tje=I.memo(({event:e,newEvent:t,className:n,truncateAttendees:r,showRsvp:s=!1,action:a})=>{const{start_date_time:i,end_date_time:l,attendees:c,description:u,location:d,conference_data:m,is_all_day:p}=e,h=a==="DELETE",{formatEventDayShort:g}=WVt(),y=f.useMemo(()=>new Date(i||""),[i]),v=f.useMemo(()=>new Date(l||""),[l]),x=f.useMemo(()=>{if(t&&t.start_date_time)return new Date(t.start_date_time||"")},[t]),b=f.useMemo(()=>{if(t&&t.end_date_time)return new Date(t.end_date_time||"")},[t]),_=m?.entry_points?.find(w=>w.entry_point_type==="video");return o.jsxs("div",{className:B("gap-md flex h-full flex-col",n),children:[o.jsx(eje,{startDate:y,endDate:v,newStartDateObj:x,newEndDateObj:b,newEvent:t,is_all_day:p??!1,formatEventDayShort:g,isDeletion:h}),o.jsx(YNe,{videoEntryPoint:_,isDeletion:h}),o.jsx(QNe,{location:d,newLocation:t?.location,isDeletion:h}),o.jsx(XNe,{description:u,newDescription:t?.description,isDeletion:h}),o.jsx(So,{icon:eu,children:o.jsx(KNe,{attendees:c,newAttendees:t?.attendees,truncateAttendees:r,showRsvp:s,isDeletion:h})})]})});tje.displayName="EventDetails";const Hae=e=>e?e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):"",zae="border-subtler bg-subtler text-foreground focus:border-super !h-9 rounded-lg border px-3 py-1 text-sm focus:outline-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-inner-spin-button]:hidden [&::-webkit-outer-spin-button]:hidden bg-transparent",Gae="data-[state=closed]:border-subtler data-[state=open]:border-super data-[state=open]:hover:border-super !px-3 !h-9 bg-transparent",nje=f.memo(({startDateTime:e,endDateTime:t,onStartDateChange:n,onEndDateChange:r,onStartTimeChange:s,onEndTimeChange:a})=>{const{$t:i}=Z(),l=f.useMemo(()=>e?new Date(e):void 0,[e]),c=f.useMemo(()=>t?new Date(t):void 0,[t]),u=f.useCallback(v=>{if(!v)return;const x=new Date(l||"");if(!isNaN(x.getTime())){if(x.setDate(v.getDate()),x.setMonth(v.getMonth()),x.setFullYear(v.getFullYear()),c&&c.getTime()<x.getTime()){const b=new Date(x.getTime());b.setHours(c.getHours()),b.setMinutes(c.getMinutes()),b.setSeconds(c.getSeconds()),r(b)}n(x)}},[l,c,n,r]),d=f.useCallback(v=>{if(!v)return;const x=new Date(c||"");isNaN(x.getTime())||(x.setDate(v.getDate()),x.setMonth(v.getMonth()),x.setFullYear(v.getFullYear()),l&&x<l&&n(x),r(x))},[l,c,n,r]),m=f.useCallback(v=>{s(v)},[s]),p=f.useCallback(v=>{if(!l)return;const[x,b]=v.split(":").map(Number);if(x===void 0||b===void 0)return;const _=new Date(l);isNaN(_.getTime())||(_.setHours(x),_.setMinutes(b),!isNaN(_.getTime())&&(c&&_.getTime()>c.getTime()&&r(_),n(_)))},[l,c,n,r]),h=f.useCallback(v=>{a(v)},[a]),g=f.useCallback(v=>{if(!c)return;const[x,b]=v.split(":").map(Number);if(x===void 0||b===void 0)return;const _=new Date(c);isNaN(_.getTime())||(_.setHours(x),_.setMinutes(b),!isNaN(_.getTime())&&(l&&_.getTime()<l.getTime()&&n(_),r(_)))},[l,c,n,r]),y=f.useCallback(v=>v.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),[]);return o.jsxs("div",{className:"flex flex-col items-center gap-2 md:flex-row",children:[o.jsxs("div",{className:"flex w-full items-center gap-2",children:[o.jsx(_M,{buttonClassName:Gae,value:l,onChange:u,placeholder:i({defaultMessage:"Select start date",id:"oUUhTXC2Mx"}),formatDate:y,showIcon:!1}),o.jsx("input",{type:"time",value:Hae(l),onChange:v=>m(v.target.value),onBlur:v=>p(v.target.value),className:zae})]}),o.jsx("span",{className:"text-quieter mx-1 text-sm",children:i({defaultMessage:"to",id:"NLeFGnA9M4"})}),o.jsxs("div",{className:"flex w-full items-center gap-2",children:[o.jsx("input",{type:"time",value:Hae(c),onChange:v=>h(v.target.value),onBlur:v=>g(v.target.value),className:zae}),o.jsx(_M,{buttonClassName:Gae,value:c,onChange:d,placeholder:i({defaultMessage:"Select end date",id:"0A4/NpHFx/"}),formatDate:y,showIcon:!1})]})]})});nje.displayName="CalendarTimeEditable";const CM=I.memo(({id:e,label:t,extraCSS:n,options:r,activeKey:s,onOptionChange:a,isDisabled:i=!1,testId:l,defaultOption:c,icon:u,...d})=>{c&&(r=[{label:c,value:""}].concat(r));const m=p=>{a(c&&p===""?null:p)};return o.jsxs("div",{children:[o.jsx(Ub,{withMargin:!1,label:t}),o.jsx(D,{variant:"small",className:t&&"mt-sm",children:o.jsxs("div",{className:"relative flex items-center",children:[o.jsx("select",{"data-testid":l,id:e,onChange:p=>m(p.target.value),value:s??"",className:B("border-subtler bg-base p-sm pr-lg outline-super ring-subtler dark:border-subtle dark:bg-subtler dark:ring-subtle w-full appearance-none rounded border transition duration-300 focus:outline-none",{"cursor-pointer hover:ring-1":!i,"pl-lg":u},n),disabled:i,...d,children:r.map(p=>o.jsx("option",{value:p.value,className:"pl-sm",children:p.label},p.value))}),u&&o.jsx("div",{className:"left-sm absolute",children:u}),o.jsx(D,{color:"light",variant:"small",className:"right-sm pointer-events-none absolute",children:o.jsx(ce,{icon:Dn,size:"md"})})]})})]})});CM.displayName="Select";const s2={frequency:"WEEKLY",endType:"never",interval:"1"},zVt=["DAILY","WEEKLY","MONTHLY","YEARLY"],lS=ot({day:{id:"ruG8dNqKt0",defaultMessage:"{count, plural, one {Day} other {Days}}"},week:{id:"cR0w/cReH+",defaultMessage:"{count, plural, one {Week} other {Weeks}}"},month:{id:"svowrjAWNi",defaultMessage:"{count, plural, one {Month} other {Months}}"},year:{id:"OPfd4WaWUE",defaultMessage:"{count, plural, one {Year} other {Years}}"}}),GVt=e=>[{label:e({defaultMessage:"Daily",id:"zxvhnETmn2"}),value:"DAILY"},{label:e({defaultMessage:"Weekly",id:"/clOBUs/wZ"}),value:"WEEKLY"},{label:e({defaultMessage:"Monthly",id:"wYsv4ZHu+B"}),value:"MONTHLY"},{label:e({defaultMessage:"Yearly",id:"dqD39hnoA/"}),value:"YEARLY"}],qVt=e=>[{label:e({defaultMessage:"Never",id:"du1laW45Py"}),value:"never"},{label:e({defaultMessage:"After",id:"4X+U8o+ztO"}),value:"after"}],KVt=e=>[{label:e({defaultMessage:"Mo",id:"EIk6EqFZZN"}),value:"MO"},{label:e({defaultMessage:"Tu",id:"dswupo3WZd"}),value:"TU"},{label:e({defaultMessage:"We",id:"p02wWlGXK3"}),value:"WE"},{label:e({defaultMessage:"Th",id:"Ee4Ne0CnpN"}),value:"TH"},{label:e({defaultMessage:"Fr",id:"pCVXo8kVuW"}),value:"FR"},{label:e({defaultMessage:"Sa",id:"QJaSgEWRy1"}),value:"SA"},{label:e({defaultMessage:"Su",id:"n4xx4rvq9+"}),value:"SU"}],YVt=e=>{try{let t=`RRULE:FREQ=${e.frequency}`;return e.interval&&e.interval!=="1"&&(t+=`;INTERVAL=${e.interval}`),e.byDay&&e.byDay.length>0&&(t+=`;BYDAY=${e.byDay.join(",")}`),e.endType==="after"&&e.count&&(t+=`;COUNT=${e.count}`),t}catch{return null}},QVt=e=>{try{if(!e.startsWith("RRULE:"))return null;const n=e.substring(6).split(";"),r=s2;for(const s of n){const[a,i]=s.split("=");switch(a){case"FREQ":zVt.includes(i)&&(r.frequency=i);break;case"INTERVAL":r.interval=i;break;case"BYDAY":r.byDay=i?.split(",");break;case"COUNT":r.count=i,r.endType="after";break}}return r}catch{return null}},XVt=e=>{if(!e.frequency||e.frequency==="WEEKLY"&&(!e.byDay||e.byDay.length===0))return!1;if(e.interval){const t=parseInt(e.interval,10);if(isNaN(t)||t<1)return!1}if(e.endType==="after"){if(!e.count)return!1;const t=parseInt(e.count,10);if(isNaN(t)||t<1)return!1}return!0},ZVt=(e,t)=>({MO:t({defaultMessage:"Mon",id:"T8JZHei06V"}),TU:t({defaultMessage:"Tue",id:"C4ENlvYIEr"}),WE:t({defaultMessage:"Wed",id:"2NqUghZFW1"}),TH:t({defaultMessage:"Thu",id:"FC0AP4JIua"}),FR:t({defaultMessage:"Fri",id:"hFYE2MSlqH"}),SA:t({defaultMessage:"Sat",id:"3Hv4FbI9Kl"}),SU:t({defaultMessage:"Sun",id:"1Aday2s3it"})})[e]||e,rje=f.memo(({value:e,onChange:t})=>{const{$t:n}=Z(),[r,s]=f.useState(!1),[a,i]=f.useState(s2);f.useEffect(()=>{if(ia(e)&&!r){const v=QVt(e[0]);v&&(i(v),s(!0))}},[e,r]);const l=f.useMemo(()=>GVt(n),[n]),c=f.useMemo(()=>qVt(n),[n]),u=f.useMemo(()=>KVt(n),[n]),d=parseInt(a.interval||"1",10),m={DAILY:n(lS.day,{count:d}),WEEKLY:n(lS.week,{count:d}),MONTHLY:n(lS.month,{count:d}),YEARLY:n(lS.year,{count:d})},p=v=>{if(XVt(v)){const x=YVt(v);x&&t([x])}},h=v=>{const x={...a,...v};i(x),p(x)},g=v=>{const x=a.byDay||[],b=x.includes(v)?x.filter(w=>w!==v):[...x,v],_={...a,byDay:b};i(_),p(_)},y=()=>{s(!1),i(s2),t([])};return o.jsxs(H,{className:"space-y-1 pl-1",children:[!r&&e.length===0&&o.jsx(H,{className:"flex items-center justify-between pl-1",children:o.jsx(Te,{onClick:()=>{s(!0),i(s2)},noPadding:!0,variant:"noBackground",text:n({defaultMessage:"Repeat",id:"tw5j2+ZRIB"}),leadingComponent:o.jsx(ar,{size:16}),size:"tiny"})}),r&&o.jsxs(H,{className:"flex flex-col gap-2 rounded",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-quieter whitespace-nowrap pr-1 text-xs",children:n({defaultMessage:"Every",id:"JE2YVbgaBx"})}),o.jsx(Pr,{pill:!1,isMobileUserAgent:!1,min:1,max:99,type:"number",value:a.interval?.toString()||"1",onChange:v=>h({interval:v}),className:"focus:!border-super !w-16 rounded-lg !px-3 focus:!ring-transparent"}),o.jsx(CM,{id:"frequency-select",activeKey:a.frequency||"WEEKLY",options:l.map(v=>({...v,label:m[v.value]})),onOptionChange:v=>h({frequency:v}),extraCSS:"rounded-lg"}),o.jsx("span",{className:"text-quieter whitespace-nowrap pl-2 pr-1 text-xs",children:n({defaultMessage:"Ends",id:"04xGLEkMMo"})}),o.jsx(CM,{id:"end-type-select",activeKey:a.endType||"never",options:c,onOptionChange:v=>h({endType:v,count:v==="after"?"1":void 0}),extraCSS:"rounded-lg w-full"}),a.endType==="after"&&o.jsxs(o.Fragment,{children:[o.jsx(Pr,{pill:!1,isMobileUserAgent:!1,min:1,max:99,type:"number",value:a.count||"1",onChange:v=>h({count:v}),className:"focus:!border-super !w-16 rounded-lg !px-3 focus:!ring-transparent"}),o.jsx("span",{className:"text-quieter pr-sm whitespace-nowrap text-xs",children:a.count==="1"?n({defaultMessage:"time",id:"nTBG1bRQLC"}):n({defaultMessage:"times",id:"KSQJ7UVwln"})})]}),o.jsx(he,{onClick:y,text:n({defaultMessage:"Cancel",id:"47FYwba+bI"}),variant:"common",extraCSS:"px-3 py-1 text-xs ml-auto"})]}),a.frequency==="WEEKLY"&&o.jsxs(H,{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-quieter w-9 whitespace-nowrap text-xs",children:n({defaultMessage:"On",id:"Zh+5A6yahu"})}),o.jsx("div",{className:"flex gap-2",children:u.map(v=>o.jsx(he,{onClick:()=>g(v.value),text:v.label,size:"tiny",pill:!0,variant:a.byDay?.includes(v.value)?"inverted":"common",ariaLabel:n({defaultMessage:"Toggle {day}",id:"i/JqE0BlGw"},{day:ZVt(v.value,n)}),noPadding:!0,extraCSS:"w-8 h-8 !p-0 !text-2xs"},v.value))})]})]})]})});rje.displayName="RecurrenceEditor";const sje=I.memo(({tag:e,onDelete:t,onClick:n,onMouseDown:r,className:s,testId:a,selected:i=!1,disabled:l=!1})=>{const{$t:c}=Z(),u=f.useCallback(p=>{p.stopPropagation(),t?.(e)},[t,e]),d=f.useCallback(p=>{p.stopPropagation(),n?.(e,{shiftKey:p.shiftKey,metaKey:p.metaKey,ctrlKey:p.ctrlKey})},[n,e]),m=t&&!l;return o.jsxs("span",{className:"relative flex h-6",children:[o.jsx(H,{className:B("h-full rounded-lg border px-2 text-sm",{"pr-[24px]":m},{"cursor-default":l},s),variant:i?"superBorder":"subtler","data-test-id":a,onClick:l?void 0:d,onMouseDown:l?void 0:r,as:"button",bgHover:l?void 0:"subtle",children:o.jsx(D,{variant:"small",children:e.label})}),m&&o.jsx(H,{variant:"transparent",onClick:u,tabIndex:0,"aria-label":c({defaultMessage:"Remove",id:"G/yZLul6P1"}),as:"button",bgHover:"subtle",className:"top-three right-three absolute rounded-md p-0.5",children:o.jsx(ce,{icon:Rt,size:"xs"})})]})});sje.displayName="EditableTag";function JVt(e,t=!0){const n=f.useRef(null);return f.useEffect(()=>{if(!t)return;const r=s=>{n.current&&!n.current.contains(s.target)&&e()};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[t,e]),n}const Ssn=async(e,t)=>{if(!t){await $O(e);return}try{const n=new Blob([t],{type:"text/html"}),r=new Blob([e],{type:"text/plain"});await navigator.clipboard.write([new ClipboardItem({"text/html":n,"text/plain":r})])}catch{await $O(e)}},$O=async e=>{try{await navigator.clipboard.writeText(e)}catch{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},RW=I.memo(({tags:e,limit:t=1/0,isMobileUserAgent:n,onAdd:r,onDelete:s,validator:a,placeholder:i,disabled:l=!1,testId:c,children:u,className:d,tagClassName:m,inputClassName:p,placeholderOnFocusOnly:h=!1})=>{const[g,y]=f.useState(""),[v,x]=f.useState(!1),[b,_]=f.useState([]),w=f.useRef(null),C=JVt(()=>{_([])}),S=f.useCallback(()=>{const N=g.trim();if(N===""||e.find(T=>T.value===N))return!1;if(a){const T=a(N);if(typeof T=="string"||!T)return!1}return y(""),r([N]),!0},[g,r,e,a]);f.useEffect(()=>{b.length>0&&C.current&&C.current.focus()},[b,C]);const E=f.useCallback(N=>{if((N.metaKey||N.ctrlKey)&&N.key==="a"&&g){N.stopPropagation();return}if(N.key==="Enter"||N.key==="Tab"||N.key===" "||N.key===","||N.key===";"){if(!S())return;N.preventDefault(),x(!0);return}if(N.key==="Escape"){y(""),x(!1);return}if(N.key==="Backspace"){if(b.length>0)return;if(!g&&!b.length){N.stopPropagation(),N.preventDefault();const T=e[e.length-1];T&&_([T.value]),x(!1)}return}if((N.key==="ArrowLeft"||N.key==="ArrowRight")&&!g){if(N.preventDefault(),N.stopPropagation(),N.key==="ArrowLeft"&&e.length>0){const T=e[e.length-1];T&&(_([T.value]),x(!1))}return}},[S,b,g,e]),M=(N,T)=>{_(j=>{const F=T.shiftKey,U=T.metaKey,V=T.ctrlKey;return U||V?j.includes(N.value)?j.filter($=>$!==N.value):[...j,N.value]:F?j.includes(N.value)?j:[...j,N.value]:j.includes(N.value)?j.filter($=>$!==N.value):[N.value]})},k=N=>{s([N.value]),_(T=>T.filter(j=>j!==N.value)),x(!0)},A=f.useCallback(N=>{N.preventDefault()},[]),R=f.useCallback(()=>{g.trim()!==""&&!S()||x(!1)},[g,S]),O=f.useCallback(()=>{$O(b.join(","))},[b]),L=f.useCallback(N=>{const{metaKey:T,ctrlKey:j,key:F}=N;if((T||j)&&F==="a"){if(v&&g)return;N.preventDefault(),_(e.map(U=>U.value)),v&&x(!1);return}if((T||j)&&F==="c"&&b.length>0){N.preventDefault(),O();return}if((T||j)&&F==="x"&&b.length>0){N.preventDefault(),O();const U=[...b];_([]),s(U),x(!0);return}if(F==="Backspace"&&b.length>0&&!g){N.preventDefault();const U=[...b];_([]),s(U),x(!0);return}if(F==="ArrowLeft"||F==="ArrowRight"){if(document.activeElement===w.current?.element())return;N.preventDefault();const V=F==="ArrowLeft",$=F==="ArrowRight",z=Q=>{const Y=e[Q];Y&&_([Y.value])};if(b.length===0)e.length>0&&z(V?e.length-1:0);else{const Q=b.map(Y=>e.findIndex(W=>W.value===Y)).filter(Y=>Y!==-1).sort((Y,W)=>Y-W);if(Q.length>0){const Y=V?Q[0]:Q[Q.length-1];if(Y!==void 0)if($&&Y===e.length-1)_([]),x(!0);else{const W=V?Math.max(0,Y-1):Math.min(e.length-1,Y+1);z(W)}}}return}},[b,s,e,v,g,O]),P=f.useCallback(N=>{const j=N.clipboardData.getData("text").split(/[,;\n\t]+/).map(F=>F.trim()).filter(Boolean);if(j.length>1){const F=[];if(j.forEach(U=>{a?a(U)===!0&&F.push(U):F.push(U)}),F.length>0)N.preventDefault(),N.stopPropagation(),r(F);else return}},[a,r]);return o.jsxs("div",{ref:C,tabIndex:0,className:B("flex min-h-10 w-full flex-row flex-wrap items-center gap-1 py-2 focus:outline-none",d),"data-test-id":c,onKeyDown:L,onPointerDown:N=>{v&&N.target===C.current&&N.preventDefault()},onClick:N=>{v||(N.stopPropagation(),N.preventDefault(),!l&&e.length<t&&(_([]),x(!0)))},children:[e.map(N=>o.jsx(sje,{tag:N,className:m,selected:b.includes(N.value),onDelete:k,onClick:M,onMouseDown:A,disabled:l},N.value)),!l&&e.length<t&&(h?v:v||e.length===0)&&o.jsx("div",{className:"min-w-40 flex-1",children:o.jsx(Pr,{ref:w,name:"tag",placeholder:i,autoFocus:!0,className:B("h-6 w-full !rounded-none border-none !bg-transparent !p-0 focus:border-none focus:!ring-0",p),size:"sm",pill:!1,isMobileUserAgent:n,value:g,onBlur:R,onChange:y,onKeyDown:E,onPaste:P})}),u]})});RW.displayName="EditableTagInput";const WO=f.memo(({event:e,newEvent:t,onEventChange:n,isEditable:r=!0,truncateAttendees:s,noWrapper:a=!1,action:i})=>{const{$t:l}=Z(),[c,u]=f.useState({event_id:e.event_id,title:e.title,start_date_time:e.start_date_time,end_date_time:e.end_date_time,attendees:e.attendees?.map(k=>({email:k.email,optional:k.optional})),organizer:e.organizer,description:e.description,location:e.location,link:e.link,calendar_color:e.calendar_color,event_color:e.event_color,conference_data:e.conference_data,creator:e.creator,html_description:e.html_description,is_all_day:e.is_all_day,recurrence:e.recurrence?.map(k=>k.toString())}),d=f.useRef(null);f.useEffect(()=>{n?.(c)},[c,n]);const m=f.useCallback(k=>{k&&u(A=>({...A,start_date_time:k.toISOString()}))},[]),p=f.useCallback(k=>{k&&u(A=>({...A,end_date_time:k.toISOString()}))},[]),h=f.useCallback(k=>{u(A=>{const R=new Date(A.start_date_time||""),[O,L]=k.split(":").map(Number);return O===void 0||L===void 0||(R.setHours(O),R.setMinutes(L),isNaN(R.getTime()))?A:{...A,start_date_time:R.toISOString()}})},[]),g=f.useCallback(k=>{u(A=>{const R=new Date(A.end_date_time||""),[O,L]=k.split(":").map(Number);return O===void 0||L===void 0||(R.setHours(O),R.setMinutes(L),isNaN(R.getTime()))?A:{...A,end_date_time:R.toISOString()}})},[]),y=(k,A,R)=>{u(O=>{const L=[...O.attendees||[]];switch(k){case"add":L.some(P=>P.email===A)||L.push({email:A});break;case"delete":return{...O,attendees:L.filter(P=>P.email!==A)};case"edit":return{...O,attendees:L.map(P=>P.email===A?{...P,email:R}:P)}}return{...O,attendees:L}})},v=zNe(e?.calendar_color?.background??"#AC725E"),x=GNe(v),b=f.useCallback(k=>u(A=>({...A,title:k})),[]),_=f.useCallback(k=>{k.forEach(A=>y("add",A))},[]),w=f.useCallback(k=>{k.forEach(A=>y("delete",A))},[]),C=f.useCallback(k=>u(A=>({...A,location:k})),[]),S=f.useCallback(k=>{u(A=>({...A,recurrence:k}))},[]),E=f.useCallback(k=>{const A=k==="google_meet";u(R=>({...R,conference_data:A?{conference_id:crypto.randomUUID(),entry_points:[],solution:{name:"Google Meet",icon_uri:"",key_type:"hangoutsMeet"}}:void 0}))},[]),M=f.useMemo(()=>[{label:l({defaultMessage:"Google Meet",id:"crZ+Bimh7N"}),value:"google_meet"},{label:l({defaultMessage:"No video conferencing",id:"PYY40S2Jrm"}),value:"none"}],[l]);if(!r){const{title:k}=e;if((!e.attendees||e.attendees.length==0)&&!e.start_date_time&&!e.end_date_time&&!e.title)return null;const A=o.jsxs("div",{className:"gap-md relative flex",children:[o.jsx("div",{className:B("inset-y-xs absolute left-0 w-1 shrink-0 self-stretch rounded-full",{"brightness-[0.8]":x==="Fail"}),style:{backgroundColor:v}}),o.jsxs("div",{className:"gap-md flex flex-col pl-5",children:[o.jsx(Ld,{oldText:k,newText:t?.title??void 0,isDeletion:i==="DELETE"}),o.jsx(tje,{event:e,newEvent:t,action:i,truncateAttendees:s})]})]});return a?o.jsx("div",{className:"p-md relative overflow-hidden",children:A}):o.jsx(sn,{fullBleed:!0,className:"p-md relative overflow-hidden",roundedClass:"rounded-md",children:A})}return o.jsxs(sn,{fullBleed:!0,className:"relative flex flex-col gap-4 overflow-hidden px-8 py-2",roundedClass:"rounded-md",fullBleedBorderClassname:"border-none",children:[o.jsx("div",{className:"shrink-none left-xs absolute bottom-2 top-2 w-1.5 self-stretch rounded-full"+(x==="Fail"?" brightness-[0.8]":""),style:{backgroundColor:v}}),o.jsx(Pr,{size:"md",type:"text",value:c.title||"",pill:!1,onChange:b,className:"border-subtler text-foreground w-full rounded-none rounded-t-md border-x-0 border-b border-t-0 pb-2 pl-0 pr-4 font-medium shadow-none focus:!outline-none focus:!ring-0",placeholder:l({defaultMessage:"Add title",id:"k09nVJqic1"}),isMobileUserAgent:!1}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(So,{icon:Wm,alignCenter:!0,iconSize:"sm",children:o.jsx(nje,{startDateTime:c.start_date_time,endDateTime:c.end_date_time,onStartDateChange:m,onEndDateChange:p,onStartTimeChange:h,onEndTimeChange:g})}),o.jsx(So,{icon:dOe,iconSize:"sm",children:o.jsx(rje,{value:c.recurrence||[],onChange:S})}),o.jsx(So,{icon:eu,iconSize:"sm",alignCenter:!0,children:o.jsx("div",{className:B("border-subtler text-foreground focus-within:border-super w-full rounded-lg border px-2",{"!px-3":!c.attendees?.length}),children:o.jsx(RW,{tags:(c.attendees??[]).map(k=>k.email?{label:k.email,value:k.email}:void 0).filter(k=>k!==void 0),isMobileUserAgent:!1,onAdd:_,onDelete:w,validator:tft,placeholder:l({defaultMessage:"Add guests",id:"pP5ifNp+MS"})})})}),o.jsx(So,{icon:HM,iconSize:"sm",alignCenter:!0,children:o.jsx(Pr,{pill:!1,type:"text",value:c.location||"",onChange:C,placeholder:l({defaultMessage:"Add rooms or location",id:"bb7ELr4Sk+"}),className:"focus:!border-super rounded-lg !px-3 focus:!ring-transparent",isMobileUserAgent:!1})}),o.jsx(So,{icon:Y7,iconSize:"sm",alignCenter:!0,children:o.jsx(CM,{id:"video-conferencing-select",activeKey:c.conference_data?"google_meet":"none",options:M,onOptionChange:E,extraCSS:"rounded-lg pl-3 [&+div]:right-3"})}),o.jsx(So,{icon:fle,iconSize:"sm",children:o.jsx(Fk,{wrapperClass:"bg-transparent focus-within:!border-super rounded-md px-3 py-2 text-sm focus-within:!ring-transparent",inputRef:d,children:o.jsx(Uk,{value:c.description||"",onChange:k=>u(A=>({...A,description:k})),placeholder:l({defaultMessage:"Add a description",id:"bocXKEDBwm"}),minRows:4,isMobileStyle:!1,isMobileUserAgent:!1,ref:d})})})]})]})});WO.displayName="CalendarEventLarge";var ph;(function(e){e.CREATED="CREATED",e.UPDATED="UPDATED",e.DELETED="DELETED",e.REJECTED="REJECTED"})(ph||(ph={}));const aje=I.memo(({operation:e,isShowEditableComponentsEnabled:t,buttonVariant:n,buttonText:r,onConfirm:s,onSkip:a})=>{const{$t:i}=Z(),[l,c]=f.useState();f.useEffect(()=>{c(void 0)},[e]);const u=f.useMemo(()=>{if(e?.update){const y=e.update.event,v=e.update.new_event;return y&&v?{...y,...Object.fromEntries(Object.entries(v).filter(([b,_])=>_!==null))}:v||y}return e?.add?.event||e?.delete?.event},[e]),d=f.useCallback(y=>{c(y)},[]),m=f.useCallback(y=>[{...e,...y&&{...e.add&&{add:{event:y}},...e.update&&{update:{event:y}},...e.delete&&{delete:{event:y,delete_scope:e.delete?.delete_scope}}},status:y.status.toUpperCase()}],[e]),p=f.useCallback((y,v)=>{const x=v||{...l||u,status:y};return{confirmed:!0,operations:x?m(x):[]}},[l,u,m]),h=f.useCallback(()=>{let y=ph.CREATED;e.update?y=ph.UPDATED:e.delete&&(y=ph.DELETED),s(p(y))},[p,s,e]),g=f.useCallback(()=>{a(p(ph.REJECTED))},[p,a]);return o.jsxs(o.Fragment,{children:[u&&e.delete&&o.jsx(H,{className:"px-sm mb-sm",children:o.jsx(WO,{event:u,newEvent:e.update?.new_event,isEditable:!1})}),u&&!e.delete&&o.jsx(H,{className:"px-md py-sm",children:o.jsx(WO,{event:u,newEvent:e.update?.new_event,onEventChange:d,isEditable:t})}),o.jsx("form",{onSubmit:y=>{y.preventDefault(),h()},children:o.jsx(H,{className:"px-md py-sm gap-4 border-t pt-4",children:o.jsx("div",{className:"gap-sm flex items-center justify-between",children:o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(he,{size:"small",variant:n,text:r,type:"submit"}),o.jsx(Te,{size:"small",text:i({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:g})]})})})})]})});aje.displayName="CalendarOperationItem";function e$t(){const{value:e}=Rr({flag:"show-editable-calendar-components",defaultValue:!1});return e}const t$t=({result:e,isDeleteOperation:t})=>{const{$t:n}=Z();return e?.confirmed===!0?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ka,{size:14,className:"shrink-0 text-[#16a34a]",title:"Confirmed"}),o.jsx("span",{className:"text-xs font-medium leading-none text-[#16a34a]",children:n(t?{defaultMessage:"Deleted",id:"KQvWvDRI1B"}:{defaultMessage:"Accepted",id:"aFyFm0PsCy"})})]}):e?.confirmed===!1?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Rt,{size:14,className:"text-negative shrink-0",title:"Skipped"}),o.jsx("span",{className:"text-negative text-xs font-medium leading-none",children:n({defaultMessage:"Skipped",id:"djZCU5enGS"})})]}):null},oje=I.memo(({calendarOperations:e,sendStepResult:t,isFinished:n})=>{const r="calendar-operation-step",[s,a]=f.useState(n??!1),{$t:i}=Z(),l=e$t(),[c,u]=f.useState(0),[d,m]=f.useState(()=>Array(e.length).fill(null)),p=f.useRef(!1),h=f.useMemo(()=>e[c],[e,c]),g=f.useMemo(()=>h?.delete?.event?"rejected":"inverted",[h?.delete?.event]),y=f.useMemo(()=>h?h.delete?.event?i({defaultMessage:"Delete",id:"K3r6DQW7h+"}):i({defaultMessage:"Schedule",id:"hGQqkWwmJD"}):i({defaultMessage:"Schedule",id:"hGQqkWwmJD"}),[h,i]),v=e.length>1,x=f.useMemo(()=>({position:"absolute",bottom:16,right:16,zIndex:10}),[]),b=f.useCallback(()=>{u(S=>Math.max(S-1,0))},[]),_=f.useCallback(()=>{u(S=>Math.min(S+1,e.length-1))},[e.length]),w=f.useCallback(S=>{m(E=>{const M=[...E];M[c]=S;const k=M.findIndex(R=>R===null);if(M.every(R=>R!==null)&&!p.current){p.current=!0;const R=M.map(O=>O?.operations).filter(O=>Array.isArray(O)).flat();R.length>0?t({confirmed:!0,operations:R},r,!1):t({confirmed:!1},r,!1),a(!0)}else k!==-1&&u(k);return M})},[c,t,r]),C=f.useCallback(S=>{w(S)},[w]);return s?o.jsx(Is,{icon:ka,iconClassName:"text-super",text:i({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):h?o.jsxs(H,{variant:"raised",className:"py-sm relative rounded-lg border",children:[o.jsx(aje,{operation:JSON.parse(JSON.stringify(h)),isShowEditableComponentsEnabled:l,buttonVariant:g,buttonText:y,onConfirm:w,onSkip:C},`operation-${c}`),v&&o.jsxs(H,{style:x,className:"flex items-center gap-4",children:[o.jsx(t$t,{result:d[c]??null,isDeleteOperation:!!h?.delete?.event}),o.jsxs("span",{className:"text-xs font-medium",children:[o.jsx("span",{className:"text-foreground",children:c+1}),o.jsxs("span",{children:[" of ",e.length]})]}),o.jsxs(H,{className:"flex gap-2",children:[o.jsx(WNe,{disabled:c===0,onClick:b}),o.jsx(HNe,{disabled:c===e.length-1,onClick:_})]})]})]}):o.jsx(H,{variant:"raised",className:"py-sm relative rounded-lg border",children:o.jsx("div",{className:"p-4 text-center",children:i({defaultMessage:"No calendar operation available",id:"Hm6yv1Uz2P"})})})});oje.displayName="CalendarOperationStep";const iv=.03,n$t=3,ip=I.memo(({items:e,initialDisplayCount:t=n$t,stepDelay:n=iv,isFinished:r=!1,vertical:s=!1,truncate:a=!0,onCountChange:i})=>{const[l,c]=f.useState([]),[u,d]=f.useState(!1),m=f.useRef(null),p=f.useRef(!0),h=f.useRef(r),g=f.useRef(0);f.useEffect(()=>()=>{m.current&&clearTimeout(m.current)},[]),f.useEffect(()=>{if(i){const S=a&&(n!==iv?r&&l.length<e.length:l.length<e.length)?e.length:l.length;i(S)}},[l.length,e.length,r,n,a,i]),f.useEffect(()=>{const w=a?t:e.length;if(p.current)if(p.current=!1,e.length>0)if(r){const S=Math.min(w,e.length);c(e.slice(0,S)),g.current=S}else c([e[0]]),g.current=1;else c([]),g.current=0;if(u){c(e),g.current=e.length;return}if(r&&!h.current&&(m.current&&(clearTimeout(m.current),m.current=null),c(()=>{const S=Math.min(w,e.length),E=e.slice(0,S);return g.current=E.length,E})),h.current=r,m.current&&(clearTimeout(m.current),m.current=null),g.current>=w||g.current>=e.length)return;const C=()=>{let S=0;if(c(E=>E.length<e.length&&E.length<w?(S=E.length+1,g.current=S,[...E,e[E.length]]):(S=E.length,g.current=S,E)),S<e.length&&S<w){const E=r?iv:n;m.current=setTimeout(C,E*1e3)}};if(g.current>0){const S=r?iv:n;m.current=setTimeout(C,S*1e3)}else e.length>0&&(c([e[0]]),g.current=1)},[e,t,n,r,u,a]);const y={initial:{opacity:0,x:-3},animate:{opacity:1,x:0}},v=()=>{d(!0)},b=a&&(n!==iv?r&&l.length<e.length:l.length<e.length),_=f.useCallback(w=>{w.stopPropagation(),v()},[]);return o.jsxs("div",{className:`flex items-center ${s?"flex-col items-start gap-px":"gap-sm flex-wrap"}`,children:[l.map((w,C)=>o.jsx(ge.div,{className:s?"w-full":"inline-flex",variants:y,initial:"initial",animate:"animate",transition:{duration:.1,ease:la},children:w},C)),b&&o.jsx(H,{variant:"subtler",bgHover:"subtle",className:"py-xs cursor-pointer rounded-lg px-2.5",onClick:_,children:o.jsx(D,{variant:"tinyMono",className:"!text-[0.68rem]",children:o.jsx(pe,{defaultMessage:"+{count} more",id:"/zFGgPmQSV",values:{count:e.length-l.length}})})})]})});ip.displayName="ResultsRenderer";const xa=I.memo(({queries:e,icon:t=Rs,stepDelay:n,isFinished:r,initialDisplayCount:s=12,enableQueryLinks:a=!1})=>{const i=e.map((l,c)=>o.jsx(Is,{icon:t,text:l,url:a?`/search/new?q=${encodeURIComponent(l)}`:void 0},c));return o.jsx("div",{className:"gap-sm flex flex-wrap",children:o.jsx(ip,{items:i,initialDisplayCount:s,stepDelay:n,isFinished:r})})});xa.displayName="SearchWebStep";const ije=I.memo(({operations:e})=>{const{$t:t,formatMessage:n}=Z(),r=f.useMemo(()=>{const i={created:0,updated:0,deleted:0,rejected:0};return e.forEach(l=>{switch(l.status?.toUpperCase()){case"CREATED":i.created++;break;case"UPDATED":i.updated++;break;case"DELETED":i.deleted++;break;case"REJECTED":i.rejected++;break}}),i},[e]),s=f.useMemo(()=>{const i=[];return r.created>0&&i.push({count:r.created,label:t({defaultMessage:"Created",id:"ORGv1Q6rL/"})}),r.updated>0&&i.push({count:r.updated,label:t({defaultMessage:"Updated",id:"xrk6zgu9jU"})}),r.deleted>0&&i.push({count:r.deleted,label:t({defaultMessage:"Deleted",id:"KQvWvDRI1B"})}),r.rejected>0&&i.push({count:r.rejected,label:t({defaultMessage:"Rejected",id:"5qaD7sDVxu"})}),i},[r,t]),a=f.useMemo(()=>s.length===0?[]:[s.map(i=>n({defaultMessage:"{count} {status}",id:"e6QlErEcyz"},{count:i.count,status:i.label})).join(", ")],[s,n]);return a.length===0?null:o.jsx(xa,{icon:hb,queries:a})});ije.displayName="CalendarStatusSummary";const lje=I.memo(({step:e})=>{const t=e.content.clarification;return t?o.jsx("div",{className:"gap-sm flex flex-row",children:o.jsx(Is,{icon:fOe,text:t})}):null});lje.displayName="ClarificationStep";const PW=e=>{const{$t:t}=Z();return Br(e?.asset_type).with(Bt.CODE_ASSET,()=>({description:t({defaultMessage:"Programming",id:"4MsdoHG9QN"}),title:t({defaultMessage:"Python",id:"/Z1NW3qKj6"}),Icon:m2})).with(Bt.CHART,()=>({description:t({defaultMessage:"Code Interpreter Graph",id:"F3E5l9GC7U"}),title:t({defaultMessage:"Chart",id:"nFVuBOECC+"}),Icon:mOe})).with(Bt.CODE_FILE,()=>({description:t({defaultMessage:"Generated File",id:"x6KEQZ7oaM"}),title:e?.code_file?.name??"",Icon:cm})).with(Bt.APP,()=>({description:t({defaultMessage:"Generated App",id:"t7mMyC1O7+"}),title:e?.app?.name??"",Icon:ule})).with(Bt.SLIDES,()=>({description:t({defaultMessage:"Presentation",id:"7zHbpiyvPE"}),title:e?.app?.description??"",Icon:pOe})).with(Bt.GENERATED_IMAGE,()=>({description:"",title:t({defaultMessage:"Generated Image",id:"Kt4lbw5KkH"}),Icon:hOe})).with(Bt.GENERATED_VIDEO,()=>({description:"",title:t({defaultMessage:"Generated Video",id:"Gh4spqP8w0"}),Icon:Y7})).with(Bt.PDF_FILE,()=>({description:t({defaultMessage:"PDF Document",id:"Idloyb3SW4"}),title:e?.pdf_file?.name??t({defaultMessage:"PDF Document",id:"Idloyb3SW4"}),Icon:dm})).with(Bt.DOCX_FILE,()=>({description:t({defaultMessage:"Word Document",id:"q+bgjo7qbJ"}),title:e?.docx_file?.name??"",Icon:KM})).with(Bt.XLSX_FILE,()=>({description:t({defaultMessage:"Excel Spreadsheet",id:"eMPZOuxga0"}),title:e?.xlsx_file?.name??"",Icon:pb})).otherwise(()=>({description:"",title:t({defaultMessage:"Generated Asset",id:"Kc1J25+bKt"}),Icon:cm}))};var SM;(function(e){e.Preview="preview",e.Assets="assets"})(SM||(SM={}));function Esn(){return{loading:!1,activeTab:SM.Preview,title:void 0,icon:void 0}}const Msn=(e,t)=>Br(t).with({type:"setLoading"},({loading:n,assetType:r})=>({...e,loading:n,loadingAssetType:r})).with({type:"setAsset"},({asset:n,title:r,result:s})=>({...e,asset:n,title:r,assetResult:s})).with({type:"setTitle"},({title:n,icon:r})=>({...e,title:n,icon:r})).with({type:"setTab"},({tab:n})=>({...e,activeTab:n})).exhaustive();function r$t(e,t,n){const r=new Blob([n],{type:"text/plain"});OW(e,t,r)}function OW(e,t,n){const r=document.createElement("a"),s=URL.createObjectURL(n);r.href=s,r.download=t,e.appendChild(r),r.click(),URL.revokeObjectURL(s),e.removeChild(r)}const s$t=new Set(["markdown","md"]);function cje(e){if(e?.asset_type==Bt.CODE_FILE&&e.code_file?.url&&s$t.has(e.code_file.name.split(".").at(-1)))return{filenamePrefix:e.code_file.name.slice(0,e.code_file.name.lastIndexOf(".")),url:e.code_file.url}}function ksn(e){return cje(e)!==void 0}function a$t(e){return!!(e?.asset_type===Bt.SLIDES&&e.app?.url&&e.app.name)}function o$t(e){if(e)return e.find(t=>t.asset_type===Bt.CODE_FILE&&t.code_file?.name?.endsWith(".pptx"))}function i$t(e){return o$t(e)?.code_file?.url}function Tsn(e){return e?.asset_type?[Bt.GENERATED_IMAGE,Bt.CHART,Bt.CODE_FILE,Bt.CODE_ASSET].includes(e.asset_type):!1}function l$t(e){return e?.asset_type?[Bt.CHART,Bt.GENERATED_IMAGE,Bt.GENERATED_VIDEO,Bt.PDF_FILE].includes(e.asset_type):!1}function Nsn({asset:e,reason:t}){const n=f.useCallback(async(r,s)=>{const a=cje(e);if(!a)return;const{filenamePrefix:i,url:l}=a,c=i+"."+r,u=await Vot({request:{filename:c,format:r,url:l},reason:t});OW(s||document.body,c,u)},[e,t]);return f.useMemo(()=>({exportAsset:n}),[n])}function c$t({reason:e,entryUUID:t}){const[n,r]=f.useState(!1),s=f.useCallback(async a=>{r(!0);try{const i=await $ot({request:{entry_uuid:t},reason:e});OW(a||document.body,"exported-assets.zip",i)}finally{r(!1)}},[t,e]);return f.useMemo(()=>({exportAllAssets:s,isExporting:n}),[s,n])}function u$t({asset:e,reason:t,answerMode:n,context:r,entryUUID:s}){const{downloadS3Asset:a,downloadImageAsset:i,downloadMediaAsset:l}=lye({reason:t}),{trackEvent:c}=Ne(),u=f.useCallback(async d=>{if(e)if(r==="canvas"?c("canvas content downloaded",{contentType:e.asset_type,entryUUID:s,assetUUID:e.uuid}):n&&c("generated asset downloaded",{assetType:e.asset_type,answerMode:n,entryUUID:s,reason:t}),e.asset_type===Bt.GENERATED_IMAGE)e.generated_image?.url&&await i(e.generated_image.url,"generated-image.png",d||document.body);else if(e.asset_type===Bt.GENERATED_VIDEO)e.generated_video?.url&&await l(e.generated_video.url,"generated-video.mp4",d||document.body);else for(const m of e.download_info)m.url?await a({url:m.url,filename:m.filename}):m.text_content&&r$t(d||document.body,m.filename,m.text_content)},[e,r,n,c,s,t,i,l,a]);return f.useMemo(()=>({downloadAsset:u}),[u])}var Lf;(function(e){e[e.UNCOPIED=0]="UNCOPIED",e[e.COPYING=1]="COPYING",e[e.FAILED=2]="FAILED",e[e.SUCCEEDED=3]="SUCCEEDED"})(Lf||(Lf={}));var Df;(function(e){e[e.UNLINKED=0]="UNLINKED",e[e.LINKING=1]="LINKING",e[e.FAILED=2]="FAILED",e[e.SUCCEEDED=3]="SUCCEEDED"})(Df||(Df={}));function jsn({asset:e,reason:t}){const[n,r]=f.useState(Lf.UNCOPIED),{$t:s}=Z(),{deprecatedOpenToast:a}=gn(),i=f.useCallback(async()=>{if(e){r(Lf.COPYING);try{await d$t({asset:e,reason:t}),a(s({defaultMessage:"Copied to the clipboard!",id:"WWy0tPuRW8"}),"success",3),r(Lf.SUCCEEDED)}catch{a(s({defaultMessage:"Failed to copy the asset",id:"HHPhgIZj9h"}),"error",3),r(Lf.FAILED)}setTimeout(()=>r(Lf.UNCOPIED),2e3)}},[s,a,r,e,t]);return f.useMemo(()=>({copyStatus:n,copyAsset:i}),[n,i])}function Asn({asset:e}){const[t,n]=f.useState(Df.UNLINKED),{$t:r}=Z(),{deprecatedOpenToast:s}=gn(),a=f.useCallback(async()=>{if(!(!e||!l$t(e))){n(Df.LINKING);try{let i;if(e.asset_type===Bt.CHART&&e.chart?.url)i=e.chart.url;else if(e.asset_type===Bt.GENERATED_IMAGE&&e.generated_image?.url)i=e.generated_image.url;else if(e.asset_type===Bt.GENERATED_VIDEO&&e.generated_video?.url)i=e.generated_video.url;else if(e.asset_type===Bt.PDF_FILE&&e.pdf_file?.url)i=e.pdf_file.url;else throw new Error("Asset is not linkable or URL not found");await navigator.clipboard.writeText(i),s(r({defaultMessage:"Link copied to clipboard!",id:"PsDXPeXpVG"}),"success",3),n(Df.SUCCEEDED)}catch{s(r({defaultMessage:"Failed to copy link",id:"ruCwQMVFzJ"}),"error",3),n(Df.FAILED)}setTimeout(()=>n(Df.UNLINKED),2e3)}},[e,r,s]);return f.useMemo(()=>({linkStatus:t,linkAsset:a}),[t,a])}async function d$t({asset:e,reason:t}){let n;if(e.asset_type==Bt.CODE_ASSET)n={"text/plain":e.code?.script??""};else if(e.asset_type==Bt.CHART&&e.chart?.url){const s=await zp({request:{url:e.chart.url,filename:"chart.png"},reason:t});n={"image/png":await(await fetch(s)).blob()}}else if(e.asset_type==Bt.CODE_FILE&&e.code_file?.url){const s=await zp({request:{url:e.code_file.url,filename:e.code_file.name},reason:t});n={"text/plain":await(await fetch(s)).text()}}else if(e.asset_type==Bt.GENERATED_IMAGE&&e.generated_image?.url){const s=e.generated_image.url;n={"image/png":await(await fetch(s)).blob()}}else if(e.asset_type==Bt.GENERATED_VIDEO&&e.generated_video?.url){const s=e.generated_video.url;n={"video/mp4":await(await fetch(s,{mode:"cors",cache:"no-cache"})).blob()}}else if(e.asset_type==Bt.PDF_FILE&&e.pdf_file?.url){const s=await zp({request:{url:e.pdf_file.url,filename:e.pdf_file.name},reason:t});n={"application/pdf":await(await fetch(s)).blob()}}else if(e.asset_type==Bt.DOCX_FILE&&e.docx_file?.url){const s=await zp({request:{url:e.docx_file.url,filename:e.docx_file.name},reason:t});n={"application/vnd.openxmlformats-officedocument.wordprocessingml.document":await(await fetch(s)).blob()}}else if(e.asset_type==Bt.XLSX_FILE&&e.xlsx_file?.url){const s=await zp({request:{url:e.xlsx_file.url,filename:e.xlsx_file.name},reason:t});n={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":await(await fetch(s)).blob()}}if(!n)throw new Error("Failed to find anything to copy");const r=new ClipboardItem(n);await navigator.clipboard.write([r])}const f$t=({asset:e})=>{const{openCanvas:t,closeCanvas:n,doCanvasAction:r,canvasState:s,isCanvasOpen:a}=F_(),{title:i}=PW(e),{result:l,result:{context_uuid:c,backend_uuid:u}}=an(),{trackEvent:d}=Ne(),m=f.useCallback(()=>{a&&e.uuid===s?.asset?.uuid?n():(t(),r({type:"setAsset",asset:e,title:i,result:l}),r({type:"setTab",tab:SM.Preview}),d("canvas opened",{source:"click",contextUUID:c,entryUUID:u,contentType:e.asset_type,assetUUID:e.uuid}))},[t,n,r,e,i,l,a,s?.asset?.uuid,d,c,u]);return f.useMemo(()=>m,[m])};var mr="-ms-",wx="-moz-",Un="-webkit-",uje="comm",LT="rule",LW="decl",m$t="@import",dje="@keyframes",p$t="@layer",fje=Math.abs,DW=String.fromCharCode,HO=Object.assign;function h$t(e,t){return ys(e,0)^45?(((t<<2^ys(e,0))<<2^ys(e,1))<<2^ys(e,2))<<2^ys(e,3):0}function mje(e){return e.trim()}function Ac(e,t){return(e=t.exec(e))?e[0]:e}function on(e,t,n){return e.replace(t,n)}function a2(e,t,n){return e.indexOf(t,n)}function ys(e,t){return e.charCodeAt(t)|0}function Hg(e,t,n){return e.slice(t,n)}function xl(e){return e.length}function pje(e){return e.length}function Av(e,t){return t.push(e),e}function g$t(e,t){return e.map(t).join("")}function qae(e,t){return e.filter(function(n){return!Ac(n,t)})}var DT=1,zg=1,hje=0,mi=0,Kr=0,u0="";function FT(e,t,n,r,s,a,i,l){return{value:e,root:t,parent:n,type:r,props:s,children:a,line:DT,column:zg,length:i,return:"",siblings:l}}function Wu(e,t){return HO(FT("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Bp(e){for(;e.root;)e=Wu(e.root,{children:[e]});Av(e,e.siblings)}function y$t(){return Kr}function v$t(){return Kr=mi>0?ys(u0,--mi):0,zg--,Kr===10&&(zg=1,DT--),Kr}function Ui(){return Kr=mi<hje?ys(u0,mi++):0,zg++,Kr===10&&(zg=1,DT++),Kr}function om(){return ys(u0,mi)}function o2(){return mi}function UT(e,t){return Hg(u0,e,t)}function zO(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function x$t(e){return DT=zg=1,hje=xl(u0=e),mi=0,[]}function b$t(e){return u0="",e}function gI(e){return mje(UT(mi-1,GO(e===91?e+2:e===40?e+1:e)))}function _$t(e){for(;(Kr=om())&&Kr<33;)Ui();return zO(e)>2||zO(Kr)>3?"":" "}function w$t(e,t){for(;--t&&Ui()&&!(Kr<48||Kr>102||Kr>57&&Kr<65||Kr>70&&Kr<97););return UT(e,o2()+(t<6&&om()==32&&Ui()==32))}function GO(e){for(;Ui();)switch(Kr){case e:return mi;case 34:case 39:e!==34&&e!==39&&GO(Kr);break;case 40:e===41&&GO(e);break;case 92:Ui();break}return mi}function C$t(e,t){for(;Ui()&&e+Kr!==57;)if(e+Kr===84&&om()===47)break;return"/*"+UT(t,mi-1)+"*"+DW(e===47?e:Ui())}function S$t(e){for(;!zO(om());)Ui();return UT(e,mi)}function E$t(e){return b$t(i2("",null,null,null,[""],e=x$t(e),0,[0],e))}function i2(e,t,n,r,s,a,i,l,c){for(var u=0,d=0,m=i,p=0,h=0,g=0,y=1,v=1,x=1,b=0,_="",w=s,C=a,S=r,E=_;v;)switch(g=b,b=Ui()){case 40:if(g!=108&&ys(E,m-1)==58){a2(E+=on(gI(b),"&","&\f"),"&\f",fje(u?l[u-1]:0))!=-1&&(x=-1);break}case 34:case 39:case 91:E+=gI(b);break;case 9:case 10:case 13:case 32:E+=_$t(g);break;case 92:E+=w$t(o2()-1,7);continue;case 47:switch(om()){case 42:case 47:Av(M$t(C$t(Ui(),o2()),t,n,c),c);break;default:E+="/"}break;case 123*y:l[u++]=xl(E)*x;case 125*y:case 59:case 0:switch(b){case 0:case 125:v=0;case 59+d:x==-1&&(E=on(E,/\f/g,"")),h>0&&xl(E)-m&&Av(h>32?Yae(E+";",r,n,m-1,c):Yae(on(E," ","")+";",r,n,m-2,c),c);break;case 59:E+=";";default:if(Av(S=Kae(E,t,n,u,d,s,l,_,w=[],C=[],m,a),a),b===123)if(d===0)i2(E,t,S,S,w,a,m,l,C);else switch(p===99&&ys(E,3)===110?100:p){case 100:case 108:case 109:case 115:i2(e,S,S,r&&Av(Kae(e,S,S,0,0,s,l,_,s,w=[],m,C),C),s,C,m,l,r?w:C);break;default:i2(E,S,S,S,[""],C,0,l,C)}}u=d=h=0,y=x=1,_=E="",m=i;break;case 58:m=1+xl(E),h=g;default:if(y<1){if(b==123)--y;else if(b==125&&y++==0&&v$t()==125)continue}switch(E+=DW(b),b*y){case 38:x=d>0?1:(E+="\f",-1);break;case 44:l[u++]=(xl(E)-1)*x,x=1;break;case 64:om()===45&&(E+=gI(Ui())),p=om(),d=m=xl(_=E+=S$t(o2())),b++;break;case 45:g===45&&xl(E)==2&&(y=0)}}return a}function Kae(e,t,n,r,s,a,i,l,c,u,d,m){for(var p=s-1,h=s===0?a:[""],g=pje(h),y=0,v=0,x=0;y<r;++y)for(var b=0,_=Hg(e,p+1,p=fje(v=i[y])),w=e;b<g;++b)(w=mje(v>0?h[b]+" "+_:on(_,/&\f/g,h[b])))&&(c[x++]=w);return FT(e,t,n,s===0?LT:l,c,u,d,m)}function M$t(e,t,n,r){return FT(e,t,n,uje,DW(y$t()),Hg(e,2,-2),0,r)}function Yae(e,t,n,r,s){return FT(e,t,n,LW,Hg(e,0,r),Hg(e,r+1,-1),r,s)}function gje(e,t,n){switch(h$t(e,t)){case 5103:return Un+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Un+e+e;case 4789:return wx+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Un+e+wx+e+mr+e+e;case 5936:switch(ys(e,t+11)){case 114:return Un+e+mr+on(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Un+e+mr+on(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Un+e+mr+on(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Un+e+mr+e+e;case 6165:return Un+e+mr+"flex-"+e+e;case 5187:return Un+e+on(e,/(\w+).+(:[^]+)/,Un+"box-$1$2"+mr+"flex-$1$2")+e;case 5443:return Un+e+mr+"flex-item-"+on(e,/flex-|-self/g,"")+(Ac(e,/flex-|baseline/)?"":mr+"grid-row-"+on(e,/flex-|-self/g,""))+e;case 4675:return Un+e+mr+"flex-line-pack"+on(e,/align-content|flex-|-self/g,"")+e;case 5548:return Un+e+mr+on(e,"shrink","negative")+e;case 5292:return Un+e+mr+on(e,"basis","preferred-size")+e;case 6060:return Un+"box-"+on(e,"-grow","")+Un+e+mr+on(e,"grow","positive")+e;case 4554:return Un+on(e,/([^-])(transform)/g,"$1"+Un+"$2")+e;case 6187:return on(on(on(e,/(zoom-|grab)/,Un+"$1"),/(image-set)/,Un+"$1"),e,"")+e;case 5495:case 3959:return on(e,/(image-set\([^]*)/,Un+"$1$`$1");case 4968:return on(on(e,/(.+:)(flex-)?(.*)/,Un+"box-pack:$3"+mr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Un+e+e;case 4200:if(!Ac(e,/flex-|baseline/))return mr+"grid-column-align"+Hg(e,t)+e;break;case 2592:case 3360:return mr+on(e,"template-","")+e;case 4384:case 3616:return n&&n.some(function(r,s){return t=s,Ac(r.props,/grid-\w+-end/)})?~a2(e+(n=n[t].value),"span",0)?e:mr+on(e,"-start","")+e+mr+"grid-row-span:"+(~a2(n,"span",0)?Ac(n,/\d+/):+Ac(n,/\d+/)-+Ac(e,/\d+/))+";":mr+on(e,"-start","")+e;case 4896:case 4128:return n&&n.some(function(r){return Ac(r.props,/grid-\w+-start/)})?e:mr+on(on(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return on(e,/(.+)-inline(.+)/,Un+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xl(e)-1-t>6)switch(ys(e,t+1)){case 109:if(ys(e,t+4)!==45)break;case 102:return on(e,/(.+:)(.+)-([^]+)/,"$1"+Un+"$2-$3$1"+wx+(ys(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~a2(e,"stretch",0)?gje(on(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return on(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,s,a,i,l,c,u){return mr+s+":"+a+u+(i?mr+s+"-span:"+(l?c:+c-+a)+u:"")+e});case 4949:if(ys(e,t+6)===121)return on(e,":",":"+Un)+e;break;case 6444:switch(ys(e,ys(e,14)===45?18:11)){case 120:return on(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Un+(ys(e,14)===45?"inline-":"")+"box$3$1"+Un+"$2$3$1"+mr+"$2box$3")+e;case 100:return on(e,":",":"+mr)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return on(e,"scroll-","scroll-snap-")+e}return e}function EM(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function k$t(e,t,n,r){switch(e.type){case p$t:if(e.children.length)break;case m$t:case LW:return e.return=e.return||e.value;case uje:return"";case dje:return e.return=e.value+"{"+EM(e.children,r)+"}";case LT:if(!xl(e.value=e.props.join(",")))return""}return xl(n=EM(e.children,r))?e.return=e.value+"{"+n+"}":""}function T$t(e){var t=pje(e);return function(n,r,s,a){for(var i="",l=0;l<t;l++)i+=e[l](n,r,s,a)||"";return i}}function N$t(e){return function(t){t.root||(t=t.return)&&e(t)}}function j$t(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case LW:e.return=gje(e.value,e.length,n);return;case dje:return EM([Wu(e,{value:on(e.value,"@","@"+Un)})],r);case LT:if(e.length)return g$t(n=e.props,function(s){switch(Ac(s,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Bp(Wu(e,{props:[on(s,/:(read-\w+)/,":"+wx+"$1")]})),Bp(Wu(e,{props:[s]})),HO(e,{props:qae(n,r)});break;case"::placeholder":Bp(Wu(e,{props:[on(s,/:(plac\w+)/,":"+Un+"input-$1")]})),Bp(Wu(e,{props:[on(s,/:(plac\w+)/,":"+wx+"$1")]})),Bp(Wu(e,{props:[on(s,/:(plac\w+)/,mr+"input-$1")]})),Bp(Wu(e,{props:[s]})),HO(e,{props:qae(n,r)});break}return""})}}var A$t={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},xo={},Gg=typeof process<"u"&&xo!==void 0&&(xo.REACT_APP_SC_ATTR||xo.SC_ATTR)||"data-styled",yje="active",vje="data-styled-version",BT="6.1.15",FW=`/*!sc*/
`,MM=typeof window<"u"&&"HTMLElement"in window,I$t=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&xo!==void 0&&xo.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&xo.REACT_APP_SC_DISABLE_SPEEDY!==""?xo.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&xo.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&xo!==void 0&&xo.SC_DISABLE_SPEEDY!==void 0&&xo.SC_DISABLE_SPEEDY!==""&&xo.SC_DISABLE_SPEEDY!=="false"&&xo.SC_DISABLE_SPEEDY),VT=Object.freeze([]),qg=Object.freeze({});function xje(e,t,n){return n===void 0&&(n=qg),e.theme!==n.theme&&e.theme||t||n.theme}var bje=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),R$t=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,P$t=/(^-|-$)/g;function Qae(e){return e.replace(R$t,"-").replace(P$t,"")}var O$t=/(a)(d)/gi,cS=52,Xae=function(e){return String.fromCharCode(e+(e>25?39:97))};function qO(e){var t,n="";for(t=Math.abs(e);t>cS;t=t/cS|0)n=Xae(t%cS)+n;return(Xae(t%cS)+n).replace(O$t,"$1-$2")}var yI,_je=5381,hh=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},wje=function(e){return hh(_je,e)};function L$t(e){return qO(wje(e)>>>0)}function Cje(e){return e.displayName||e.name||"Component"}function vI(e){return typeof e=="string"&&!0}var Sje=typeof Symbol=="function"&&Symbol.for,Eje=Sje?Symbol.for("react.memo"):60115,D$t=Sje?Symbol.for("react.forward_ref"):60112,F$t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},U$t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Mje={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},B$t=((yI={})[D$t]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},yI[Eje]=Mje,yI);function Zae(e){return("type"in(t=e)&&t.type.$$typeof)===Eje?Mje:"$$typeof"in e?B$t[e.$$typeof]:F$t;var t}var V$t=Object.defineProperty,$$t=Object.getOwnPropertyNames,Jae=Object.getOwnPropertySymbols,W$t=Object.getOwnPropertyDescriptor,H$t=Object.getPrototypeOf,eoe=Object.prototype;function UW(e,t,n){if(typeof t!="string"){if(eoe){var r=H$t(t);r&&r!==eoe&&UW(e,r,n)}var s=$$t(t);Jae&&(s=s.concat(Jae(t)));for(var a=Zae(e),i=Zae(t),l=0;l<s.length;++l){var c=s[l];if(!(c in U$t||n&&n[c]||i&&c in i||a&&c in a)){var u=W$t(t,c);try{V$t(e,c,u)}catch{}}}}return e}function Kg(e){return typeof e=="function"}function BW(e){return typeof e=="object"&&"styledComponentId"in e}function qf(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function toe(e,t){if(e.length===0)return"";for(var n=e[0],r=1;r<e.length;r++)n+=e[r];return n}function rb(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function KO(e,t,n){if(n===void 0&&(n=!1),!n&&!rb(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=KO(e[r],t[r]);else if(rb(t))for(var r in t)e[r]=KO(e[r],t[r]);return e}function VW(e,t){Object.defineProperty(e,"toString",{value:t})}function fw(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var z$t=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var n=0,r=0;r<t;r++)n+=this.groupSizes[r];return n},e.prototype.insertRules=function(t,n){if(t>=this.groupSizes.length){for(var r=this.groupSizes,s=r.length,a=s;t>=a;)if((a<<=1)<0)throw fw(16,"".concat(t));this.groupSizes=new Uint32Array(a),this.groupSizes.set(r),this.length=a;for(var i=s;i<a;i++)this.groupSizes[i]=0}for(var l=this.indexOfGroup(t+1),c=(i=0,n.length);i<c;i++)this.tag.insertRule(l,n[i])&&(this.groupSizes[t]++,l++)},e.prototype.clearGroup=function(t){if(t<this.length){var n=this.groupSizes[t],r=this.indexOfGroup(t),s=r+n;this.groupSizes[t]=0;for(var a=r;a<s;a++)this.tag.deleteRule(r)}},e.prototype.getGroup=function(t){var n="";if(t>=this.length||this.groupSizes[t]===0)return n;for(var r=this.groupSizes[t],s=this.indexOfGroup(t),a=s+r,i=s;i<a;i++)n+="".concat(this.tag.getRule(i)).concat(FW);return n},e}(),l2=new Map,kM=new Map,c2=1,uS=function(e){if(l2.has(e))return l2.get(e);for(;kM.has(c2);)c2++;var t=c2++;return l2.set(e,t),kM.set(t,e),t},G$t=function(e,t){c2=t+1,l2.set(e,t),kM.set(t,e)},q$t="style[".concat(Gg,"][").concat(vje,'="').concat(BT,'"]'),K$t=new RegExp("^".concat(Gg,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Y$t=function(e,t,n){for(var r,s=n.split(","),a=0,i=s.length;a<i;a++)(r=s[a])&&e.registerName(t,r)},Q$t=function(e,t){for(var n,r=((n=t.textContent)!==null&&n!==void 0?n:"").split(FW),s=[],a=0,i=r.length;a<i;a++){var l=r[a].trim();if(l){var c=l.match(K$t);if(c){var u=0|parseInt(c[1],10),d=c[2];u!==0&&(G$t(d,u),Y$t(e,d,c[3]),e.getTag().insertRules(u,s)),s.length=0}else s.push(l)}}},noe=function(e){for(var t=document.querySelectorAll(q$t),n=0,r=t.length;n<r;n++){var s=t[n];s&&s.getAttribute(Gg)!==yje&&(Q$t(e,s),s.parentNode&&s.parentNode.removeChild(s))}};function X$t(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var kje=function(e){var t=document.head,n=e||t,r=document.createElement("style"),s=function(l){var c=Array.from(l.querySelectorAll("style[".concat(Gg,"]")));return c[c.length-1]}(n),a=s!==void 0?s.nextSibling:null;r.setAttribute(Gg,yje),r.setAttribute(vje,BT);var i=X$t();return i&&r.setAttribute("nonce",i),n.insertBefore(r,a),r},Z$t=function(){function e(t){this.element=kje(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,s=0,a=r.length;s<a;s++){var i=r[s];if(i.ownerNode===n)return i}throw fw(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,n){try{return this.sheet.insertRule(n,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var n=this.sheet.cssRules[t];return n&&n.cssText?n.cssText:""},e}(),J$t=function(){function e(t){this.element=kje(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,n){if(t<=this.length&&t>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),eWt=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,n){return t<=this.length&&(this.rules.splice(t,0,n),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),roe=MM,tWt={isServer:!MM,useCSSOMInjection:!I$t},Tje=function(){function e(t,n,r){t===void 0&&(t=qg),n===void 0&&(n={});var s=this;this.options=Mo(Mo({},tWt),t),this.gs=n,this.names=new Map(r),this.server=!!t.isServer,!this.server&&MM&&roe&&(roe=!1,noe(this)),VW(this,function(){return function(a){for(var i=a.getTag(),l=i.length,c="",u=function(m){var p=function(x){return kM.get(x)}(m);if(p===void 0)return"continue";var h=a.names.get(p),g=i.getGroup(m);if(h===void 0||!h.size||g.length===0)return"continue";var y="".concat(Gg,".g").concat(m,'[id="').concat(p,'"]'),v="";h!==void 0&&h.forEach(function(x){x.length>0&&(v+="".concat(x,","))}),c+="".concat(g).concat(y,'{content:"').concat(v,'"}').concat(FW)},d=0;d<l;d++)u(d);return c}(s)})}return e.registerId=function(t){return uS(t)},e.prototype.rehydrate=function(){!this.server&&MM&&noe(this)},e.prototype.reconstructWithOptions=function(t,n){return n===void 0&&(n=!0),new e(Mo(Mo({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(n){var r=n.useCSSOMInjection,s=n.target;return n.isServer?new eWt(s):r?new Z$t(s):new J$t(s)}(this.options),new z$t(t)));var t},e.prototype.hasNameForId=function(t,n){return this.names.has(t)&&this.names.get(t).has(n)},e.prototype.registerName=function(t,n){if(uS(t),this.names.has(t))this.names.get(t).add(n);else{var r=new Set;r.add(n),this.names.set(t,r)}},e.prototype.insertRules=function(t,n,r){this.registerName(t,n),this.getTag().insertRules(uS(t),r)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(uS(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),nWt=/&/g,rWt=/^\s*\/\/.*$/gm;function Nje(e,t){return e.map(function(n){return n.type==="rule"&&(n.value="".concat(t," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(t," ")),n.props=n.props.map(function(r){return"".concat(t," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=Nje(n.children,t)),n})}function sWt(e){var t,n,r,s=qg,a=s.options,i=a===void 0?qg:a,l=s.plugins,c=l===void 0?VT:l,u=function(p,h,g){return g.startsWith(n)&&g.endsWith(n)&&g.replaceAll(n,"").length>0?".".concat(t):p},d=c.slice();d.push(function(p){p.type===LT&&p.value.includes("&")&&(p.props[0]=p.props[0].replace(nWt,n).replace(r,u))}),i.prefix&&d.push(j$t),d.push(k$t);var m=function(p,h,g,y){h===void 0&&(h=""),g===void 0&&(g=""),y===void 0&&(y="&"),t=y,n=h,r=new RegExp("\\".concat(n,"\\b"),"g");var v=p.replace(rWt,""),x=E$t(g||h?"".concat(g," ").concat(h," { ").concat(v," }"):v);i.namespace&&(x=Nje(x,i.namespace));var b=[];return EM(x,T$t(d.concat(N$t(function(_){return b.push(_)})))),b};return m.hash=c.length?c.reduce(function(p,h){return h.name||fw(15),hh(p,h.name)},_je).toString():"",m}var aWt=new Tje,YO=sWt(),jje=I.createContext({shouldForwardProp:void 0,styleSheet:aWt,stylis:YO});jje.Consumer;I.createContext(void 0);function soe(){return f.useContext(jje)}var oWt=function(){function e(t,n){var r=this;this.inject=function(s,a){a===void 0&&(a=YO);var i=r.name+a.hash;s.hasNameForId(r.id,i)||s.insertRules(r.id,i,a(r.rules,i,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=n,VW(this,function(){throw fw(12,String(r.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=YO),this.name+t.hash},e}(),iWt=function(e){return e>="A"&&e<="Z"};function aoe(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(n===1&&r==="-"&&e[0]==="-")return e;iWt(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var Aje=function(e){return e==null||e===!1||e===""},Ije=function(e){var t,n,r=[];for(var s in e){var a=e[s];e.hasOwnProperty(s)&&!Aje(a)&&(Array.isArray(a)&&a.isCss||Kg(a)?r.push("".concat(aoe(s),":"),a,";"):rb(a)?r.push.apply(r,f2(f2(["".concat(s," {")],Ije(a),!1),["}"],!1)):r.push("".concat(aoe(s),": ").concat((t=s,(n=a)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||t in A$t||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function im(e,t,n,r){if(Aje(e))return[];if(BW(e))return[".".concat(e.styledComponentId)];if(Kg(e)){if(!Kg(a=e)||a.prototype&&a.prototype.isReactComponent||!t)return[e];var s=e(t);return im(s,t,n,r)}var a;return e instanceof oWt?n?(e.inject(n,r),[e.getName(r)]):[e]:rb(e)?Ije(e):Array.isArray(e)?Array.prototype.concat.apply(VT,e.map(function(i){return im(i,t,n,r)})):[e.toString()]}function lWt(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Kg(n)&&!BW(n))return!1}return!0}var cWt=wje(BT),uWt=function(){function e(t,n,r){this.rules=t,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&lWt(t),this.componentId=n,this.baseHash=hh(cWt,n),this.baseStyle=r,Tje.registerId(n)}return e.prototype.generateAndInjectStyles=function(t,n,r){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))s=qf(s,this.staticRulesId);else{var a=toe(im(this.rules,t,n,r)),i=qO(hh(this.baseHash,a)>>>0);if(!n.hasNameForId(this.componentId,i)){var l=r(a,".".concat(i),void 0,this.componentId);n.insertRules(this.componentId,i,l)}s=qf(s,i),this.staticRulesId=i}else{for(var c=hh(this.baseHash,r.hash),u="",d=0;d<this.rules.length;d++){var m=this.rules[d];if(typeof m=="string")u+=m;else if(m){var p=toe(im(m,t,n,r));c=hh(c,p+d),u+=p}}if(u){var h=qO(c>>>0);n.hasNameForId(this.componentId,h)||n.insertRules(this.componentId,h,r(u,".".concat(h),void 0,this.componentId)),s=qf(s,h)}}return s},e}(),$W=I.createContext(void 0);$W.Consumer;var xI={};function dWt(e,t,n){var r=BW(e),s=e,a=!vI(e),i=t.attrs,l=i===void 0?VT:i,c=t.componentId,u=c===void 0?function(w,C){var S=typeof w!="string"?"sc":Qae(w);xI[S]=(xI[S]||0)+1;var E="".concat(S,"-").concat(L$t(BT+S+xI[S]));return C?"".concat(C,"-").concat(E):E}(t.displayName,t.parentComponentId):c,d=t.displayName,m=d===void 0?function(w){return vI(w)?"styled.".concat(w):"Styled(".concat(Cje(w),")")}(e):d,p=t.displayName&&t.componentId?"".concat(Qae(t.displayName),"-").concat(t.componentId):t.componentId||u,h=r&&s.attrs?s.attrs.concat(l).filter(Boolean):l,g=t.shouldForwardProp;if(r&&s.shouldForwardProp){var y=s.shouldForwardProp;if(t.shouldForwardProp){var v=t.shouldForwardProp;g=function(w,C){return y(w,C)&&v(w,C)}}else g=y}var x=new uWt(n,p,r?s.componentStyle:void 0);function b(w,C){return function(S,E,M){var k=S.attrs,A=S.componentStyle,R=S.defaultProps,O=S.foldedComponentIds,L=S.styledComponentId,P=S.target,N=I.useContext($W),T=soe(),j=S.shouldForwardProp||T.shouldForwardProp,F=xje(E,N,R)||qg,U=function(W,X,G){for(var J,q=Mo(Mo({},X),{className:void 0,theme:G}),te=0;te<W.length;te+=1){var re=Kg(J=W[te])?J(q):J;for(var ae in re)q[ae]=ae==="className"?qf(q[ae],re[ae]):ae==="style"?Mo(Mo({},q[ae]),re[ae]):re[ae]}return X.className&&(q.className=qf(q.className,X.className)),q}(k,E,F),V=U.as||P,$={};for(var z in U)U[z]===void 0||z[0]==="$"||z==="as"||z==="theme"&&U.theme===F||(z==="forwardedAs"?$.as=U.forwardedAs:j&&!j(z,V)||($[z]=U[z]));var Q=function(W,X){var G=soe(),J=W.generateAndInjectStyles(X,G.styleSheet,G.stylis);return J}(A,U),Y=qf(O,L);return Q&&(Y+=" "+Q),U.className&&(Y+=" "+U.className),$[vI(V)&&!bje.has(V)?"class":"className"]=Y,M&&($.ref=M),f.createElement(V,$)}(_,w,C)}b.displayName=m;var _=I.forwardRef(b);return _.attrs=h,_.componentStyle=x,_.displayName=m,_.shouldForwardProp=g,_.foldedComponentIds=r?qf(s.foldedComponentIds,s.styledComponentId):"",_.styledComponentId=p,_.target=r?s.target:e,Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(w){this._foldedDefaultProps=r?function(C){for(var S=[],E=1;E<arguments.length;E++)S[E-1]=arguments[E];for(var M=0,k=S;M<k.length;M++)KO(C,k[M],!0);return C}({},s.defaultProps,w):w}}),VW(_,function(){return".".concat(_.styledComponentId)}),a&&UW(_,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),_}function ooe(e,t){for(var n=[e[0]],r=0,s=t.length;r<s;r+=1)n.push(t[r],e[r+1]);return n}var ioe=function(e){return Object.assign(e,{isCss:!0})};function fWt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Kg(e)||rb(e))return ioe(im(ooe(VT,f2([e],t,!0))));var r=e;return t.length===0&&r.length===1&&typeof r[0]=="string"?im(r):ioe(im(ooe(r,t)))}function QO(e,t,n){if(n===void 0&&(n=qg),!t)throw fw(1,t);var r=function(s){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];return e(t,n,fWt.apply(void 0,f2([s],a,!1)))};return r.attrs=function(s){return QO(e,t,Mo(Mo({},n),{attrs:Array.prototype.concat(n.attrs,s).filter(Boolean)}))},r.withConfig=function(s){return QO(e,t,Mo(Mo({},n),s))},r}var Rje=function(e){return QO(dWt,e)},$T=Rje;bje.forEach(function(e){$T[e]=Rje(e)});function mWt(e){var t=I.forwardRef(function(n,r){var s=xje(n,I.useContext($W),e.defaultProps);return I.createElement(e,Mo({},n,{theme:s,ref:r}))});return t.displayName="WithTheme(".concat(Cje(e),")"),UW(t,e)}function pWt(e,t){if(e==null)return{};var n,r,s=vpe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function hWt(e){if(Array.isArray(e))return FR(e)}function gWt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yWt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XO(e){return hWt(e)||gWt(e)||Lqe(e)||yWt()}function loe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function gh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?loe(Object(n),!0).forEach(function(r){kc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):loe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vWt(e){var t=e.length;if(t===0||t===1)return e;if(t===2)return[e[0],e[1],"".concat(e[0],".").concat(e[1]),"".concat(e[1],".").concat(e[0])];if(t===3)return[e[0],e[1],e[2],"".concat(e[0],".").concat(e[1]),"".concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[0]),"".concat(e[1],".").concat(e[2]),"".concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[1],".").concat(e[0])];if(t>=4)return[e[0],e[1],e[2],e[3],"".concat(e[0],".").concat(e[1]),"".concat(e[0],".").concat(e[2]),"".concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[0]),"".concat(e[1],".").concat(e[2]),"".concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[1]),"".concat(e[2],".").concat(e[3]),"".concat(e[3],".").concat(e[0]),"".concat(e[3],".").concat(e[1]),"".concat(e[3],".").concat(e[2]),"".concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[1],".").concat(e[3]),"".concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[2],".").concat(e[3]),"".concat(e[0],".").concat(e[3],".").concat(e[1]),"".concat(e[0],".").concat(e[3],".").concat(e[2]),"".concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[1],".").concat(e[2],".").concat(e[3]),"".concat(e[1],".").concat(e[3],".").concat(e[0]),"".concat(e[1],".").concat(e[3],".").concat(e[2]),"".concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[0],".").concat(e[3]),"".concat(e[2],".").concat(e[1],".").concat(e[0]),"".concat(e[2],".").concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[3],".").concat(e[0]),"".concat(e[2],".").concat(e[3],".").concat(e[1]),"".concat(e[3],".").concat(e[0],".").concat(e[1]),"".concat(e[3],".").concat(e[0],".").concat(e[2]),"".concat(e[3],".").concat(e[1],".").concat(e[0]),"".concat(e[3],".").concat(e[1],".").concat(e[2]),"".concat(e[3],".").concat(e[2],".").concat(e[0]),"".concat(e[3],".").concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[1],".").concat(e[2],".").concat(e[3]),"".concat(e[0],".").concat(e[1],".").concat(e[3],".").concat(e[2]),"".concat(e[0],".").concat(e[2],".").concat(e[1],".").concat(e[3]),"".concat(e[0],".").concat(e[2],".").concat(e[3],".").concat(e[1]),"".concat(e[0],".").concat(e[3],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[3],".").concat(e[2],".").concat(e[1]),"".concat(e[1],".").concat(e[0],".").concat(e[2],".").concat(e[3]),"".concat(e[1],".").concat(e[0],".").concat(e[3],".").concat(e[2]),"".concat(e[1],".").concat(e[2],".").concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[2],".").concat(e[3],".").concat(e[0]),"".concat(e[1],".").concat(e[3],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[3],".").concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[0],".").concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[0],".").concat(e[3],".").concat(e[1]),"".concat(e[2],".").concat(e[1],".").concat(e[0],".").concat(e[3]),"".concat(e[2],".").concat(e[1],".").concat(e[3],".").concat(e[0]),"".concat(e[2],".").concat(e[3],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[3],".").concat(e[1],".").concat(e[0]),"".concat(e[3],".").concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[3],".").concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[3],".").concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[3],".").concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[3],".").concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[3],".").concat(e[2],".").concat(e[1],".").concat(e[0])]}var bI={};function xWt(e){if(e.length===0||e.length===1)return e;var t=e.join(".");return bI[t]||(bI[t]=vWt(e)),bI[t]}function bWt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.filter(function(a){return a!=="token"}),s=xWt(r);return s.reduce(function(a,i){return gh(gh({},a),n[i])},t)}function coe(e){return e.join(" ")}function _Wt(e,t){var n=0;return function(r){return n+=1,r.map(function(s,a){return Pje({node:s,stylesheet:e,useInlineStyles:t,key:"code-segment-".concat(n,"-").concat(a)})})}}function Pje(e){var t=e.node,n=e.stylesheet,r=e.style,s=r===void 0?{}:r,a=e.useInlineStyles,i=e.key,l=t.properties,c=t.type,u=t.tagName,d=t.value;if(c==="text")return d;if(u){var m=_Wt(n,a),p;if(!a)p=gh(gh({},l),{},{className:coe(l.className)});else{var h=Object.keys(n).reduce(function(x,b){return b.split(".").forEach(function(_){x.includes(_)||x.push(_)}),x},[]),g=l.className&&l.className.includes("token")?["token"]:[],y=l.className&&g.concat(l.className.filter(function(x){return!h.includes(x)}));p=gh(gh({},l),{},{className:coe(y)||void 0,style:bWt(l.className,Object.assign({},l.style,s),n)})}var v=m(t.children);return I.createElement(u,f1({key:i},p),v)}}const wWt=function(e,t){var n=e.listLanguages();return n.indexOf(t)!==-1};var CWt=["language","children","style","customStyle","codeTagProps","useInlineStyles","showLineNumbers","showInlineLineNumbers","startingLineNumber","lineNumberContainerStyle","lineNumberStyle","wrapLines","wrapLongLines","lineProps","renderer","PreTag","CodeTag","code","astGenerator"];function uoe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function sd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uoe(Object(n),!0).forEach(function(r){kc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uoe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var SWt=/\n/g;function EWt(e){return e.match(SWt)}function MWt(e){var t=e.lines,n=e.startingLineNumber,r=e.style;return t.map(function(s,a){var i=a+n;return I.createElement("span",{key:"line-".concat(a),className:"react-syntax-highlighter-line-number",style:typeof r=="function"?r(i):r},"".concat(i,`
`))})}function kWt(e){var t=e.codeString,n=e.codeStyle,r=e.containerStyle,s=r===void 0?{float:"left",paddingRight:"10px"}:r,a=e.numberStyle,i=a===void 0?{}:a,l=e.startingLineNumber;return I.createElement("code",{style:Object.assign({},n,s)},MWt({lines:t.replace(/\n$/,"").split(`
`),style:i,startingLineNumber:l}))}function TWt(e){return"".concat(e.toString().length,".25em")}function Oje(e,t){return{type:"element",tagName:"span",properties:{key:"line-number--".concat(e),className:["comment","linenumber","react-syntax-highlighter-line-number"],style:t},children:[{type:"text",value:e}]}}function Lje(e,t,n){var r={display:"inline-block",minWidth:TWt(n),paddingRight:"1em",textAlign:"right",userSelect:"none"},s=typeof e=="function"?e(t):e,a=sd(sd({},r),s);return a}function u2(e){var t=e.children,n=e.lineNumber,r=e.lineNumberStyle,s=e.largestLineNumber,a=e.showInlineLineNumbers,i=e.lineProps,l=i===void 0?{}:i,c=e.className,u=c===void 0?[]:c,d=e.showLineNumbers,m=e.wrapLongLines,p=e.wrapLines,h=p===void 0?!1:p,g=h?sd({},typeof l=="function"?l(n):l):{};if(g.className=g.className?[].concat(XO(g.className.trim().split(/\s+/)),XO(u)):u,n&&a){var y=Lje(r,n,s);t.unshift(Oje(n,y))}return m&d&&(g.style=sd({display:"flex"},g.style)),{type:"element",tagName:"span",properties:g,children:t}}function Dje(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=0;r<e.length;r++){var s=e[r];if(s.type==="text")n.push(u2({children:[s],className:XO(new Set(t))}));else if(s.children){var a=t.concat(s.properties.className);Dje(s.children,a).forEach(function(i){return n.push(i)})}}return n}function NWt(e,t,n,r,s,a,i,l,c){var u,d=Dje(e.value),m=[],p=-1,h=0;function g(C,S){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return u2({children:C,lineNumber:S,lineNumberStyle:l,largestLineNumber:i,showInlineLineNumbers:s,lineProps:n,className:E,showLineNumbers:r,wrapLongLines:c,wrapLines:t})}function y(C,S){if(r&&S&&s){var E=Lje(l,S,i);C.unshift(Oje(S,E))}return C}function v(C,S){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return t||E.length>0?g(C,S,E):y(C,S)}for(var x=function(){var S=d[h],E=S.children[0].value,M=EWt(E);if(M){var k=E.split(`
`);k.forEach(function(A,R){var O=r&&m.length+a,L={type:"text",value:"".concat(A,`
`)};if(R===0){var P=d.slice(p+1,h).concat(u2({children:[L],className:S.properties.className})),N=v(P,O);m.push(N)}else if(R===k.length-1){var T=d[h+1]&&d[h+1].children&&d[h+1].children[0],j={type:"text",value:"".concat(A)};if(T){var F=u2({children:[j],className:S.properties.className});d.splice(h+1,0,F)}else{var U=[j],V=v(U,O,S.properties.className);m.push(V)}}else{var $=[L],z=v($,O,S.properties.className);m.push(z)}}),p=h}h++};h<d.length;)x();if(p!==d.length-1){var b=d.slice(p+1,d.length);if(b&&b.length){var _=r&&m.length+a,w=v(b,_);m.push(w)}}return t?m:(u=[]).concat.apply(u,m)}function jWt(e){var t=e.rows,n=e.stylesheet,r=e.useInlineStyles;return t.map(function(s,a){return Pje({node:s,stylesheet:n,useInlineStyles:r,key:"code-segement".concat(a)})})}function Fje(e){return e&&typeof e.highlightAuto<"u"}function AWt(e){var t=e.astGenerator,n=e.language,r=e.code,s=e.defaultCodeValue;if(Fje(t)){var a=wWt(t,n);return n==="text"?{value:s,language:"text"}:a?t.highlight(n,r):t.highlightAuto(r)}try{return n&&n!=="text"?{value:t.highlight(r,n)}:{value:s}}catch{return{value:s}}}function IWt(e,t){return function(r){var s=r.language,a=r.children,i=r.style,l=i===void 0?t:i,c=r.customStyle,u=c===void 0?{}:c,d=r.codeTagProps,m=d===void 0?{className:s?"language-".concat(s):void 0,style:sd(sd({},l['code[class*="language-"]']),l['code[class*="language-'.concat(s,'"]')])}:d,p=r.useInlineStyles,h=p===void 0?!0:p,g=r.showLineNumbers,y=g===void 0?!1:g,v=r.showInlineLineNumbers,x=v===void 0?!0:v,b=r.startingLineNumber,_=b===void 0?1:b,w=r.lineNumberContainerStyle,C=r.lineNumberStyle,S=C===void 0?{}:C,E=r.wrapLines,M=r.wrapLongLines,k=M===void 0?!1:M,A=r.lineProps,R=A===void 0?{}:A,O=r.renderer,L=r.PreTag,P=L===void 0?"pre":L,N=r.CodeTag,T=N===void 0?"code":N,j=r.code,F=j===void 0?(Array.isArray(a)?a[0]:a)||"":j,U=r.astGenerator,V=pWt(r,CWt);U=U||e;var $=y?I.createElement(kWt,{containerStyle:w,codeStyle:m.style||{},numberStyle:S,startingLineNumber:_,codeString:F}):null,z=l.hljs||l['pre[class*="language-"]']||{backgroundColor:"#fff"},Q=Fje(U)?"hljs":"prismjs",Y=h?Object.assign({},V,{style:Object.assign({},z,u)}):Object.assign({},V,{className:V.className?"".concat(Q," ").concat(V.className):Q,style:Object.assign({},u)});if(k?m.style=sd({whiteSpace:"pre-wrap"},m.style):m.style=sd({whiteSpace:"pre"},m.style),!U)return I.createElement(P,Y,$,I.createElement(T,m,F));(E===void 0&&O||k)&&(E=!0),O=O||jWt;var W=[{type:"text",value:F}],X=AWt({astGenerator:U,language:s,code:F,defaultCodeValue:W});X.language===null&&(X.value=W);var G=X.value.length;G===1&&X.value[0].type==="text"&&(G=X.value[0].value.split(`
`).length);var J=G+_,q=NWt(X,E,R,y,x,_,J,S,k);return I.createElement(P,Y,I.createElement(T,m,!x&&$,O({rows:q,stylesheet:l,useInlineStyles:h})))}}function doe(e,t,n,r,s,a,i){try{var l=e[a](i),c=l.value}catch(u){return void n(u)}l.done?t(c):Promise.resolve(c).then(r,s)}function Uje(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var a=e.apply(t,n);function i(c){doe(a,r,s,i,l,"next",c)}function l(c){doe(a,r,s,i,l,"throw",c)}i(void 0)})}}function ZO(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ZO=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,s=Object.defineProperty||function(T,j,F){T[j]=F.value},a=typeof Symbol=="function"?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(T,j,F){return Object.defineProperty(T,j,{value:F,enumerable:!0,configurable:!0,writable:!0}),T[j]}try{u({},"")}catch{u=function(F,U,V){return F[U]=V}}function d(T,j,F,U){var V=j&&j.prototype instanceof x?j:x,$=Object.create(V.prototype),z=new P(U||[]);return s($,"_invoke",{value:A(T,F,z)}),$}function m(T,j,F){try{return{type:"normal",arg:T.call(j,F)}}catch(U){return{type:"throw",arg:U}}}t.wrap=d;var p="suspendedStart",h="suspendedYield",g="executing",y="completed",v={};function x(){}function b(){}function _(){}var w={};u(w,i,function(){return this});var C=Object.getPrototypeOf,S=C&&C(C(N([])));S&&S!==n&&r.call(S,i)&&(w=S);var E=_.prototype=x.prototype=Object.create(w);function M(T){["next","throw","return"].forEach(function(j){u(T,j,function(F){return this._invoke(j,F)})})}function k(T,j){function F(V,$,z,Q){var Y=m(T[V],T,$);if(Y.type!=="throw"){var W=Y.arg,X=W.value;return X&&ja(X)=="object"&&r.call(X,"__await")?j.resolve(X.__await).then(function(G){F("next",G,z,Q)},function(G){F("throw",G,z,Q)}):j.resolve(X).then(function(G){W.value=G,z(W)},function(G){return F("throw",G,z,Q)})}Q(Y.arg)}var U;s(this,"_invoke",{value:function($,z){function Q(){return new j(function(Y,W){F($,z,Y,W)})}return U=U?U.then(Q,Q):Q()}})}function A(T,j,F){var U=p;return function(V,$){if(U===g)throw Error("Generator is already running");if(U===y){if(V==="throw")throw $;return{value:e,done:!0}}for(F.method=V,F.arg=$;;){var z=F.delegate;if(z){var Q=R(z,F);if(Q){if(Q===v)continue;return Q}}if(F.method==="next")F.sent=F._sent=F.arg;else if(F.method==="throw"){if(U===p)throw U=y,F.arg;F.dispatchException(F.arg)}else F.method==="return"&&F.abrupt("return",F.arg);U=g;var Y=m(T,j,F);if(Y.type==="normal"){if(U=F.done?y:h,Y.arg===v)continue;return{value:Y.arg,done:F.done}}Y.type==="throw"&&(U=y,F.method="throw",F.arg=Y.arg)}}}function R(T,j){var F=j.method,U=T.iterator[F];if(U===e)return j.delegate=null,F==="throw"&&T.iterator.return&&(j.method="return",j.arg=e,R(T,j),j.method==="throw")||F!=="return"&&(j.method="throw",j.arg=new TypeError("The iterator does not provide a '"+F+"' method")),v;var V=m(U,T.iterator,j.arg);if(V.type==="throw")return j.method="throw",j.arg=V.arg,j.delegate=null,v;var $=V.arg;return $?$.done?(j[T.resultName]=$.value,j.next=T.nextLoc,j.method!=="return"&&(j.method="next",j.arg=e),j.delegate=null,v):$:(j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,v)}function O(T){var j={tryLoc:T[0]};1 in T&&(j.catchLoc=T[1]),2 in T&&(j.finallyLoc=T[2],j.afterLoc=T[3]),this.tryEntries.push(j)}function L(T){var j=T.completion||{};j.type="normal",delete j.arg,T.completion=j}function P(T){this.tryEntries=[{tryLoc:"root"}],T.forEach(O,this),this.reset(!0)}function N(T){if(T||T===""){var j=T[i];if(j)return j.call(T);if(typeof T.next=="function")return T;if(!isNaN(T.length)){var F=-1,U=function V(){for(;++F<T.length;)if(r.call(T,F))return V.value=T[F],V.done=!1,V;return V.value=e,V.done=!0,V};return U.next=U}}throw new TypeError(ja(T)+" is not iterable")}return b.prototype=_,s(E,"constructor",{value:_,configurable:!0}),s(_,"constructor",{value:b,configurable:!0}),b.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(T){var j=typeof T=="function"&&T.constructor;return!!j&&(j===b||(j.displayName||j.name)==="GeneratorFunction")},t.mark=function(T){return Object.setPrototypeOf?Object.setPrototypeOf(T,_):(T.__proto__=_,u(T,c,"GeneratorFunction")),T.prototype=Object.create(E),T},t.awrap=function(T){return{__await:T}},M(k.prototype),u(k.prototype,l,function(){return this}),t.AsyncIterator=k,t.async=function(T,j,F,U,V){V===void 0&&(V=Promise);var $=new k(d(T,j,F,U),V);return t.isGeneratorFunction(j)?$:$.next().then(function(z){return z.done?z.value:$.next()})},M(E),u(E,c,"Generator"),u(E,i,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(T){var j=Object(T),F=[];for(var U in j)F.push(U);return F.reverse(),function V(){for(;F.length;){var $=F.pop();if($ in j)return V.value=$,V.done=!1,V}return V.done=!0,V}},t.values=N,P.prototype={constructor:P,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!j)for(var F in this)F.charAt(0)==="t"&&r.call(this,F)&&!isNaN(+F.slice(1))&&(this[F]=e)},stop:function(){this.done=!0;var j=this.tryEntries[0].completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var F=this;function U(W,X){return z.type="throw",z.arg=j,F.next=W,X&&(F.method="next",F.arg=e),!!X}for(var V=this.tryEntries.length-1;V>=0;--V){var $=this.tryEntries[V],z=$.completion;if($.tryLoc==="root")return U("end");if($.tryLoc<=this.prev){var Q=r.call($,"catchLoc"),Y=r.call($,"finallyLoc");if(Q&&Y){if(this.prev<$.catchLoc)return U($.catchLoc,!0);if(this.prev<$.finallyLoc)return U($.finallyLoc)}else if(Q){if(this.prev<$.catchLoc)return U($.catchLoc,!0)}else{if(!Y)throw Error("try statement without catch or finally");if(this.prev<$.finallyLoc)return U($.finallyLoc)}}}},abrupt:function(j,F){for(var U=this.tryEntries.length-1;U>=0;--U){var V=this.tryEntries[U];if(V.tryLoc<=this.prev&&r.call(V,"finallyLoc")&&this.prev<V.finallyLoc){var $=V;break}}$&&(j==="break"||j==="continue")&&$.tryLoc<=F&&F<=$.finallyLoc&&($=null);var z=$?$.completion:{};return z.type=j,z.arg=F,$?(this.method="next",this.next=$.finallyLoc,v):this.complete(z)},complete:function(j,F){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&F&&(this.next=F),v},finish:function(j){for(var F=this.tryEntries.length-1;F>=0;--F){var U=this.tryEntries[F];if(U.finallyLoc===j)return this.complete(U.completion,U.afterLoc),L(U),v}},catch:function(j){for(var F=this.tryEntries.length-1;F>=0;--F){var U=this.tryEntries[F];if(U.tryLoc===j){var V=U.completion;if(V.type==="throw"){var $=V.arg;L(U)}return $}}throw Error("illegal catch attempt")},delegateYield:function(j,F,U){return this.delegate={iterator:N(j),resultName:F,nextLoc:U},this.method==="next"&&(this.arg=e),v}},t}function RWt(e,t,n){return t=O2(t),Uqe(e,Bje()?Reflect.construct(t,n||[],O2(e).constructor):t.apply(e,n))}function Bje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bje=function(){return!!e})()}const PWt=function(e){var t,n=e.loader,r=e.isLanguageRegistered,s=e.registerLanguage,a=e.languageLoaders,i=e.noAsyncLoadingLanguages,l=function(c){function u(){return Bqe(this,u),RWt(this,u,arguments)}return Fqe(u,c),$qe(u,[{key:"componentDidUpdate",value:function(){!u.isRegistered(this.props.language)&&a&&this.loadLanguage()}},{key:"componentDidMount",value:function(){var m=this;u.astGeneratorPromise||u.loadAstGenerator(),u.astGenerator||u.astGeneratorPromise.then(function(){m.forceUpdate()}),!u.isRegistered(this.props.language)&&a&&this.loadLanguage()}},{key:"loadLanguage",value:function(){var m=this,p=this.props.language;p!=="text"&&u.loadLanguage(p).then(function(){return m.forceUpdate()}).catch(function(){})}},{key:"normalizeLanguage",value:function(m){return u.isSupportedLanguage(m)?m:"text"}},{key:"render",value:function(){return I.createElement(u.highlightInstance,f1({},this.props,{language:this.normalizeLanguage(this.props.language),astGenerator:u.astGenerator}))}}],[{key:"preload",value:function(){return u.loadAstGenerator()}},{key:"loadLanguage",value:function(){var d=Uje(ZO().mark(function p(h){var g;return ZO().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(g=a[h],typeof g!="function"){v.next=5;break}return v.abrupt("return",g(u.registerLanguage));case 5:throw new Error("Language ".concat(h," not supported"));case 6:case"end":return v.stop()}},p)}));function m(p){return d.apply(this,arguments)}return m}()},{key:"isSupportedLanguage",value:function(m){return u.isRegistered(m)||typeof a[m]=="function"}},{key:"loadAstGenerator",value:function(){return u.astGeneratorPromise=n().then(function(m){u.astGenerator=m,s&&u.languages.forEach(function(p,h){return s(m,h,p)})}),u.astGeneratorPromise}}])}(I.PureComponent);return t=l,kc(l,"astGenerator",null),kc(l,"highlightInstance",IWt(null,{})),kc(l,"astGeneratorPromise",null),kc(l,"languages",new Map),kc(l,"supportedLanguages",e.supportedLanguages||Object.keys(a||{})),kc(l,"isRegistered",function(c){if(i)return!0;if(!s)throw new Error("Current syntax highlighter doesn't support registration of languages");return t.astGenerator?r(t.astGenerator,c):t.languages.has(c)}),kc(l,"registerLanguage",function(c,u){if(!s)throw new Error("Current syntax highlighter doesn't support registration of languages");if(t.astGenerator)return s(t.astGenerator,c,u);t.languages.set(c,u)}),l};function JO(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */JO=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,s=Object.defineProperty||function(T,j,F){T[j]=F.value},a=typeof Symbol=="function"?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(T,j,F){return Object.defineProperty(T,j,{value:F,enumerable:!0,configurable:!0,writable:!0}),T[j]}try{u({},"")}catch{u=function(F,U,V){return F[U]=V}}function d(T,j,F,U){var V=j&&j.prototype instanceof x?j:x,$=Object.create(V.prototype),z=new P(U||[]);return s($,"_invoke",{value:A(T,F,z)}),$}function m(T,j,F){try{return{type:"normal",arg:T.call(j,F)}}catch(U){return{type:"throw",arg:U}}}t.wrap=d;var p="suspendedStart",h="suspendedYield",g="executing",y="completed",v={};function x(){}function b(){}function _(){}var w={};u(w,i,function(){return this});var C=Object.getPrototypeOf,S=C&&C(C(N([])));S&&S!==n&&r.call(S,i)&&(w=S);var E=_.prototype=x.prototype=Object.create(w);function M(T){["next","throw","return"].forEach(function(j){u(T,j,function(F){return this._invoke(j,F)})})}function k(T,j){function F(V,$,z,Q){var Y=m(T[V],T,$);if(Y.type!=="throw"){var W=Y.arg,X=W.value;return X&&ja(X)=="object"&&r.call(X,"__await")?j.resolve(X.__await).then(function(G){F("next",G,z,Q)},function(G){F("throw",G,z,Q)}):j.resolve(X).then(function(G){W.value=G,z(W)},function(G){return F("throw",G,z,Q)})}Q(Y.arg)}var U;s(this,"_invoke",{value:function($,z){function Q(){return new j(function(Y,W){F($,z,Y,W)})}return U=U?U.then(Q,Q):Q()}})}function A(T,j,F){var U=p;return function(V,$){if(U===g)throw Error("Generator is already running");if(U===y){if(V==="throw")throw $;return{value:e,done:!0}}for(F.method=V,F.arg=$;;){var z=F.delegate;if(z){var Q=R(z,F);if(Q){if(Q===v)continue;return Q}}if(F.method==="next")F.sent=F._sent=F.arg;else if(F.method==="throw"){if(U===p)throw U=y,F.arg;F.dispatchException(F.arg)}else F.method==="return"&&F.abrupt("return",F.arg);U=g;var Y=m(T,j,F);if(Y.type==="normal"){if(U=F.done?y:h,Y.arg===v)continue;return{value:Y.arg,done:F.done}}Y.type==="throw"&&(U=y,F.method="throw",F.arg=Y.arg)}}}function R(T,j){var F=j.method,U=T.iterator[F];if(U===e)return j.delegate=null,F==="throw"&&T.iterator.return&&(j.method="return",j.arg=e,R(T,j),j.method==="throw")||F!=="return"&&(j.method="throw",j.arg=new TypeError("The iterator does not provide a '"+F+"' method")),v;var V=m(U,T.iterator,j.arg);if(V.type==="throw")return j.method="throw",j.arg=V.arg,j.delegate=null,v;var $=V.arg;return $?$.done?(j[T.resultName]=$.value,j.next=T.nextLoc,j.method!=="return"&&(j.method="next",j.arg=e),j.delegate=null,v):$:(j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,v)}function O(T){var j={tryLoc:T[0]};1 in T&&(j.catchLoc=T[1]),2 in T&&(j.finallyLoc=T[2],j.afterLoc=T[3]),this.tryEntries.push(j)}function L(T){var j=T.completion||{};j.type="normal",delete j.arg,T.completion=j}function P(T){this.tryEntries=[{tryLoc:"root"}],T.forEach(O,this),this.reset(!0)}function N(T){if(T||T===""){var j=T[i];if(j)return j.call(T);if(typeof T.next=="function")return T;if(!isNaN(T.length)){var F=-1,U=function V(){for(;++F<T.length;)if(r.call(T,F))return V.value=T[F],V.done=!1,V;return V.value=e,V.done=!0,V};return U.next=U}}throw new TypeError(ja(T)+" is not iterable")}return b.prototype=_,s(E,"constructor",{value:_,configurable:!0}),s(_,"constructor",{value:b,configurable:!0}),b.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(T){var j=typeof T=="function"&&T.constructor;return!!j&&(j===b||(j.displayName||j.name)==="GeneratorFunction")},t.mark=function(T){return Object.setPrototypeOf?Object.setPrototypeOf(T,_):(T.__proto__=_,u(T,c,"GeneratorFunction")),T.prototype=Object.create(E),T},t.awrap=function(T){return{__await:T}},M(k.prototype),u(k.prototype,l,function(){return this}),t.AsyncIterator=k,t.async=function(T,j,F,U,V){V===void 0&&(V=Promise);var $=new k(d(T,j,F,U),V);return t.isGeneratorFunction(j)?$:$.next().then(function(z){return z.done?z.value:$.next()})},M(E),u(E,c,"Generator"),u(E,i,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(T){var j=Object(T),F=[];for(var U in j)F.push(U);return F.reverse(),function V(){for(;F.length;){var $=F.pop();if($ in j)return V.value=$,V.done=!1,V}return V.done=!0,V}},t.values=N,P.prototype={constructor:P,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!j)for(var F in this)F.charAt(0)==="t"&&r.call(this,F)&&!isNaN(+F.slice(1))&&(this[F]=e)},stop:function(){this.done=!0;var j=this.tryEntries[0].completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var F=this;function U(W,X){return z.type="throw",z.arg=j,F.next=W,X&&(F.method="next",F.arg=e),!!X}for(var V=this.tryEntries.length-1;V>=0;--V){var $=this.tryEntries[V],z=$.completion;if($.tryLoc==="root")return U("end");if($.tryLoc<=this.prev){var Q=r.call($,"catchLoc"),Y=r.call($,"finallyLoc");if(Q&&Y){if(this.prev<$.catchLoc)return U($.catchLoc,!0);if(this.prev<$.finallyLoc)return U($.finallyLoc)}else if(Q){if(this.prev<$.catchLoc)return U($.catchLoc,!0)}else{if(!Y)throw Error("try statement without catch or finally");if(this.prev<$.finallyLoc)return U($.finallyLoc)}}}},abrupt:function(j,F){for(var U=this.tryEntries.length-1;U>=0;--U){var V=this.tryEntries[U];if(V.tryLoc<=this.prev&&r.call(V,"finallyLoc")&&this.prev<V.finallyLoc){var $=V;break}}$&&(j==="break"||j==="continue")&&$.tryLoc<=F&&F<=$.finallyLoc&&($=null);var z=$?$.completion:{};return z.type=j,z.arg=F,$?(this.method="next",this.next=$.finallyLoc,v):this.complete(z)},complete:function(j,F){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&F&&(this.next=F),v},finish:function(j){for(var F=this.tryEntries.length-1;F>=0;--F){var U=this.tryEntries[F];if(U.finallyLoc===j)return this.complete(U.completion,U.afterLoc),L(U),v}},catch:function(j){for(var F=this.tryEntries.length-1;F>=0;--F){var U=this.tryEntries[F];if(U.tryLoc===j){var V=U.completion;if(V.type==="throw"){var $=V.arg;L(U)}return $}}throw Error("illegal catch attempt")},delegateYield:function(j,F,U){return this.delegate={iterator:N(j),resultName:F,nextLoc:U},this.method==="next"&&(this.arg=e),v}},t}const oe=function(e,t){return function(){var n=Uje(JO().mark(function r(s){var a;return JO().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,t();case 2:a=l.sent,s(e,a.default||a);case 4:case"end":return l.stop()}},r)}));return function(r){return n.apply(this,arguments)}}()},OWt={abap:oe("abap",function(){return K(()=>import("./abap-xXO2ZNBr.js").then(e=>e.a),__vite__mapDeps([133,1]))}),abnf:oe("abnf",function(){return K(()=>import("./abnf-Cpr-RfZc.js").then(e=>e.a),__vite__mapDeps([134,1]))}),actionscript:oe("actionscript",function(){return K(()=>import("./actionscript-7IoedjRX.js").then(e=>e.a),__vite__mapDeps([135,1]))}),ada:oe("ada",function(){return K(()=>import("./ada-DvJpapMr.js").then(e=>e.a),__vite__mapDeps([136,1]))}),agda:oe("agda",function(){return K(()=>import("./agda-CXQhj6q_.js").then(e=>e.a),__vite__mapDeps([137,1]))}),al:oe("al",function(){return K(()=>import("./al-Dn94UNn4.js").then(e=>e.a),__vite__mapDeps([138,1]))}),antlr4:oe("antlr4",function(){return K(()=>import("./antlr4-D_WJe1oO.js").then(e=>e.a),__vite__mapDeps([139,1]))}),apacheconf:oe("apacheconf",function(){return K(()=>import("./apacheconf-BxdI37fF.js").then(e=>e.a),__vite__mapDeps([140,1]))}),apex:oe("apex",function(){return K(()=>import("./apex-DSxd3UGl.js").then(e=>e.a),__vite__mapDeps([141,1,142]))}),apl:oe("apl",function(){return K(()=>import("./apl-BhX0_fkh.js").then(e=>e.a),__vite__mapDeps([143,1]))}),applescript:oe("applescript",function(){return K(()=>import("./applescript-mDtPbSw7.js").then(e=>e.a),__vite__mapDeps([144,1]))}),aql:oe("aql",function(){return K(()=>import("./aql-CCmuoNOQ.js").then(e=>e.a),__vite__mapDeps([145,1]))}),arduino:oe("arduino",function(){return K(()=>import("./arduino-BOTCtVXt.js").then(e=>e.a),__vite__mapDeps([146,1,147,148]))}),arff:oe("arff",function(){return K(()=>import("./arff-LHIGEhob.js").then(e=>e.a),__vite__mapDeps([149,1]))}),asciidoc:oe("asciidoc",function(){return K(()=>import("./asciidoc-DUL3t6uM.js").then(e=>e.a),__vite__mapDeps([150,1]))}),asm6502:oe("asm6502",function(){return K(()=>import("./asm6502-B_69y3yN.js").then(e=>e.a),__vite__mapDeps([151,1]))}),asmatmel:oe("asmatmel",function(){return K(()=>import("./asmatmel-LW8Eoafy.js").then(e=>e.a),__vite__mapDeps([152,1]))}),aspnet:oe("aspnet",function(){return K(()=>import("./aspnet-3TSffHQD.js").then(e=>e.a),__vite__mapDeps([153,1,154]))}),autohotkey:oe("autohotkey",function(){return K(()=>import("./autohotkey-DDP9Pz17.js").then(e=>e.a),__vite__mapDeps([155,1]))}),autoit:oe("autoit",function(){return K(()=>import("./autoit-B6rX58wf.js").then(e=>e.a),__vite__mapDeps([156,1]))}),avisynth:oe("avisynth",function(){return K(()=>import("./avisynth-Dm_4mu0N.js").then(e=>e.a),__vite__mapDeps([157,1]))}),avroIdl:oe("avroIdl",function(){return K(()=>import("./avro-idl-UlEGCRi0.js").then(e=>e.a),__vite__mapDeps([158,1]))}),bash:oe("bash",function(){return K(()=>import("./bash-BDr8_71o.js").then(e=>e.b),__vite__mapDeps([159,1,160]))}),basic:oe("basic",function(){return K(()=>import("./basic-BBt5kyDw.js").then(e=>e.b),__vite__mapDeps([161,1,162]))}),batch:oe("batch",function(){return K(()=>import("./batch-Cj3BSbMY.js").then(e=>e.b),__vite__mapDeps([163,1]))}),bbcode:oe("bbcode",function(){return K(()=>import("./bbcode-DpxtQw0_.js").then(e=>e.b),__vite__mapDeps([164,1]))}),bicep:oe("bicep",function(){return K(()=>import("./bicep-CmgEE0U9.js").then(e=>e.b),__vite__mapDeps([165,1]))}),birb:oe("birb",function(){return K(()=>import("./birb-Dars3CuK.js").then(e=>e.b),__vite__mapDeps([166,1]))}),bison:oe("bison",function(){return K(()=>import("./bison-DX1VDlfk.js").then(e=>e.b),__vite__mapDeps([167,1,148]))}),bnf:oe("bnf",function(){return K(()=>import("./bnf-B6-zmMw4.js").then(e=>e.b),__vite__mapDeps([168,1]))}),brainfuck:oe("brainfuck",function(){return K(()=>import("./brainfuck-EZxQTWZ8.js").then(e=>e.b),__vite__mapDeps([169,1]))}),brightscript:oe("brightscript",function(){return K(()=>import("./brightscript-MwC7Espe.js").then(e=>e.b),__vite__mapDeps([170,1]))}),bro:oe("bro",function(){return K(()=>import("./bro-JV1z53-B.js").then(e=>e.b),__vite__mapDeps([171,1]))}),bsl:oe("bsl",function(){return K(()=>import("./bsl-Cd53xDCy.js").then(e=>e.b),__vite__mapDeps([172,1]))}),c:oe("c",function(){return K(()=>import("./c-CxGDiPNH.js").then(e=>e.c),__vite__mapDeps([173,1,148]))}),cfscript:oe("cfscript",function(){return K(()=>import("./cfscript-B9mkrBpQ.js").then(e=>e.c),__vite__mapDeps([174,1]))}),chaiscript:oe("chaiscript",function(){return K(()=>import("./chaiscript-Dof1nfTW.js").then(e=>e.c),__vite__mapDeps([175,1,147,148]))}),cil:oe("cil",function(){return K(()=>import("./cil-Bn3Q2E1W.js").then(e=>e.c),__vite__mapDeps([176,1]))}),clike:oe("clike",function(){return K(()=>import("./clike-DDqLwGhR.js").then(e=>e.c),__vite__mapDeps([177,1,178]))}),clojure:oe("clojure",function(){return K(()=>import("./clojure-C8Cgr9xq.js").then(e=>e.c),__vite__mapDeps([179,1]))}),cmake:oe("cmake",function(){return K(()=>import("./cmake-BO229LM_.js").then(e=>e.c),__vite__mapDeps([180,1]))}),cobol:oe("cobol",function(){return K(()=>import("./cobol-ncmGEesi.js").then(e=>e.c),__vite__mapDeps([181,1]))}),coffeescript:oe("coffeescript",function(){return K(()=>import("./coffeescript-D_XUmKs0.js").then(e=>e.c),__vite__mapDeps([182,1]))}),concurnas:oe("concurnas",function(){return K(()=>import("./concurnas-TfeVZMOZ.js").then(e=>e.c),__vite__mapDeps([183,1]))}),coq:oe("coq",function(){return K(()=>import("./coq-B5z9RsQ6.js").then(e=>e.c),__vite__mapDeps([184,1]))}),cpp:oe("cpp",function(){return K(()=>import("./cpp-Chcfrze0.js").then(e=>e.c),__vite__mapDeps([185,1,147,148]))}),crystal:oe("crystal",function(){return K(()=>import("./crystal-Dynhbd61.js").then(e=>e.c),__vite__mapDeps([186,1,187]))}),csharp:oe("csharp",function(){return K(()=>import("./csharp-BhqpJkpq.js").then(e=>e.c),__vite__mapDeps([188,1,154]))}),cshtml:oe("cshtml",function(){return K(()=>import("./cshtml-BWGfxKn4.js").then(e=>e.c),__vite__mapDeps([189,1,154]))}),csp:oe("csp",function(){return K(()=>import("./csp-BoPMW3Ei.js").then(e=>e.c),__vite__mapDeps([190,1]))}),cssExtras:oe("cssExtras",function(){return K(()=>import("./css-extras-Hsmrym8x.js").then(e=>e.c),__vite__mapDeps([191,1]))}),css:oe("css",function(){return K(()=>import("./css-DY8FYVYE.js").then(e=>e.c),__vite__mapDeps([192,1,193]))}),csv:oe("csv",function(){return K(()=>import("./csv-C7m4DnSA.js").then(e=>e.c),__vite__mapDeps([194,1]))}),cypher:oe("cypher",function(){return K(()=>import("./cypher-l75AB8hd.js").then(e=>e.c),__vite__mapDeps([195,1]))}),d:oe("d",function(){return K(()=>import("./d-CDO8utOJ.js").then(e=>e.d),__vite__mapDeps([196,1]))}),dart:oe("dart",function(){return K(()=>import("./dart-PPmz7K9W.js").then(e=>e.d),__vite__mapDeps([197,1]))}),dataweave:oe("dataweave",function(){return K(()=>import("./dataweave-DSq9Bs2g.js").then(e=>e.d),__vite__mapDeps([198,1]))}),dax:oe("dax",function(){return K(()=>import("./dax-Ql7iF31E.js").then(e=>e.d),__vite__mapDeps([199,1]))}),dhall:oe("dhall",function(){return K(()=>import("./dhall-D8AlcFmH.js").then(e=>e.d),__vite__mapDeps([200,1]))}),diff:oe("diff",function(){return K(()=>import("./diff-DxjKD27r.js").then(e=>e.d),__vite__mapDeps([201,1]))}),django:oe("django",function(){return K(()=>import("./django-DdNzo2Lw.js").then(e=>e.d),__vite__mapDeps([202,1,203]))}),dnsZoneFile:oe("dnsZoneFile",function(){return K(()=>import("./dns-zone-file-CPg1_KvB.js").then(e=>e.d),__vite__mapDeps([204,1]))}),docker:oe("docker",function(){return K(()=>import("./docker-CVuCFm8y.js").then(e=>e.d),__vite__mapDeps([205,1]))}),dot:oe("dot",function(){return K(()=>import("./dot-Cv30q0-0.js").then(e=>e.d),__vite__mapDeps([206,1]))}),ebnf:oe("ebnf",function(){return K(()=>import("./ebnf-D4d3p3sx.js").then(e=>e.e),__vite__mapDeps([207,1]))}),editorconfig:oe("editorconfig",function(){return K(()=>import("./editorconfig-svCLfWhT.js").then(e=>e.e),__vite__mapDeps([208,1]))}),eiffel:oe("eiffel",function(){return K(()=>import("./eiffel-DhOhlUP9.js").then(e=>e.e),__vite__mapDeps([209,1]))}),ejs:oe("ejs",function(){return K(()=>import("./ejs-CuszUXEo.js").then(e=>e.e),__vite__mapDeps([210,1,203]))}),elixir:oe("elixir",function(){return K(()=>import("./elixir-CZtOXY6s.js").then(e=>e.e),__vite__mapDeps([211,1]))}),elm:oe("elm",function(){return K(()=>import("./elm-BcYqZUmH.js").then(e=>e.e),__vite__mapDeps([212,1]))}),erb:oe("erb",function(){return K(()=>import("./erb-D4Jx3m2Q.js").then(e=>e.e),__vite__mapDeps([213,1,187,203]))}),erlang:oe("erlang",function(){return K(()=>import("./erlang-Bs9TEZ3l.js").then(e=>e.e),__vite__mapDeps([214,1]))}),etlua:oe("etlua",function(){return K(()=>import("./etlua-C0lc7-1S.js").then(e=>e.e),__vite__mapDeps([215,1,216,203]))}),excelFormula:oe("excelFormula",function(){return K(()=>import("./excel-formula-CzIhBLjN.js").then(e=>e.e),__vite__mapDeps([217,1]))}),factor:oe("factor",function(){return K(()=>import("./factor-WaebLdn4.js").then(e=>e.f),__vite__mapDeps([218,1]))}),falselang:oe("falselang",function(){return K(()=>import("./false-ShlVddT_.js").then(e=>e._),__vite__mapDeps([219,1]))}),firestoreSecurityRules:oe("firestoreSecurityRules",function(){return K(()=>import("./firestore-security-rules-4moqVYWI.js").then(e=>e.f),__vite__mapDeps([220,1]))}),flow:oe("flow",function(){return K(()=>import("./flow-CXLXbYk5.js").then(e=>e.f),__vite__mapDeps([221,1]))}),fortran:oe("fortran",function(){return K(()=>import("./fortran-BND3_knE.js").then(e=>e.f),__vite__mapDeps([222,1]))}),fsharp:oe("fsharp",function(){return K(()=>import("./fsharp-BFha84XY.js").then(e=>e.f),__vite__mapDeps([223,1]))}),ftl:oe("ftl",function(){return K(()=>import("./ftl-GB7jbcGS.js").then(e=>e.f),__vite__mapDeps([224,1,203]))}),gap:oe("gap",function(){return K(()=>import("./gap-Dpz_lRLC.js").then(e=>e.g),__vite__mapDeps([225,1]))}),gcode:oe("gcode",function(){return K(()=>import("./gcode-C7ldqsmu.js").then(e=>e.g),__vite__mapDeps([226,1]))}),gdscript:oe("gdscript",function(){return K(()=>import("./gdscript-B9Bfhib1.js").then(e=>e.g),__vite__mapDeps([227,1]))}),gedcom:oe("gedcom",function(){return K(()=>import("./gedcom-btzlAVde.js").then(e=>e.g),__vite__mapDeps([228,1]))}),gherkin:oe("gherkin",function(){return K(()=>import("./gherkin-DXkOYSMV.js").then(e=>e.g),__vite__mapDeps([229,1]))}),git:oe("git",function(){return K(()=>import("./git-Bi1kQND6.js").then(e=>e.g),__vite__mapDeps([230,1]))}),glsl:oe("glsl",function(){return K(()=>import("./glsl-BYO0fWe4.js").then(e=>e.g),__vite__mapDeps([231,1,148]))}),gml:oe("gml",function(){return K(()=>import("./gml-Dcj75dEM.js").then(e=>e.g),__vite__mapDeps([232,1]))}),gn:oe("gn",function(){return K(()=>import("./gn-C5jCMEGg.js").then(e=>e.g),__vite__mapDeps([233,1]))}),goModule:oe("goModule",function(){return K(()=>import("./go-module-DS88Hgar.js").then(e=>e.g),__vite__mapDeps([234,1]))}),go:oe("go",function(){return K(()=>import("./go-Bb8GlO4U.js").then(e=>e.g),__vite__mapDeps([235,1]))}),graphql:oe("graphql",function(){return K(()=>import("./graphql-BqELzFSN.js").then(e=>e.g),__vite__mapDeps([236,1]))}),groovy:oe("groovy",function(){return K(()=>import("./groovy-CZHQRD2T.js").then(e=>e.g),__vite__mapDeps([237,1]))}),haml:oe("haml",function(){return K(()=>import("./haml-D4Cu9GWy.js").then(e=>e.h),__vite__mapDeps([238,1,187]))}),handlebars:oe("handlebars",function(){return K(()=>import("./handlebars-C4Zm0IB3.js").then(e=>e.h),__vite__mapDeps([239,1,203]))}),haskell:oe("haskell",function(){return K(()=>import("./haskell-qrj8ifSK.js").then(e=>e.h),__vite__mapDeps([240,1,241]))}),haxe:oe("haxe",function(){return K(()=>import("./haxe-ChRoPNLt.js").then(e=>e.h),__vite__mapDeps([242,1]))}),hcl:oe("hcl",function(){return K(()=>import("./hcl-DW5WNCe3.js").then(e=>e.h),__vite__mapDeps([243,1]))}),hlsl:oe("hlsl",function(){return K(()=>import("./hlsl-BedTSN1F.js").then(e=>e.h),__vite__mapDeps([244,1,148]))}),hoon:oe("hoon",function(){return K(()=>import("./hoon-BwAkIC7V.js").then(e=>e.h),__vite__mapDeps([245,1]))}),hpkp:oe("hpkp",function(){return K(()=>import("./hpkp-KfxxGNng.js").then(e=>e.h),__vite__mapDeps([246,1]))}),hsts:oe("hsts",function(){return K(()=>import("./hsts-BSN3uVd1.js").then(e=>e.h),__vite__mapDeps([247,1]))}),http:oe("http",function(){return K(()=>import("./http-FRE2So_Y.js").then(e=>e.h),__vite__mapDeps([248,1]))}),ichigojam:oe("ichigojam",function(){return K(()=>import("./ichigojam-68yjR9qP.js").then(e=>e.i),__vite__mapDeps([249,1]))}),icon:oe("icon",function(){return K(()=>import("./icon-DMVM2VVb.js").then(e=>e.i),__vite__mapDeps([250,1]))}),icuMessageFormat:oe("icuMessageFormat",function(){return K(()=>import("./icu-message-format-D6wK9nFS.js").then(e=>e.i),__vite__mapDeps([251,1]))}),idris:oe("idris",function(){return K(()=>import("./idris-DVPeRJob.js").then(e=>e.i),__vite__mapDeps([252,1,241]))}),iecst:oe("iecst",function(){return K(()=>import("./iecst-CVU0L1v2.js").then(e=>e.i),__vite__mapDeps([253,1]))}),ignore:oe("ignore",function(){return K(()=>import("./ignore-CWbAeMHy.js").then(e=>e.i),__vite__mapDeps([254,1]))}),inform7:oe("inform7",function(){return K(()=>import("./inform7-D7YCc5AS.js").then(e=>e.i),__vite__mapDeps([255,1]))}),ini:oe("ini",function(){return K(()=>import("./ini-DTjpb4oT.js").then(e=>e.i),__vite__mapDeps([256,1]))}),io:oe("io",function(){return K(()=>import("./io-DyJVvRKM.js").then(e=>e.i),__vite__mapDeps([257,1]))}),j:oe("j",function(){return K(()=>import("./j-B1KsJ8Lh.js").then(e=>e.j),__vite__mapDeps([258,1]))}),java:oe("java",function(){return K(()=>import("./java-C8KDVoMm.js").then(e=>e.j),__vite__mapDeps([259,1,260]))}),javadoc:oe("javadoc",function(){return K(()=>import("./javadoc-Be5z3uxJ.js").then(e=>e.j),__vite__mapDeps([261,1,260,262]))}),javadoclike:oe("javadoclike",function(){return K(()=>import("./javadoclike-AcPh5e5A.js").then(e=>e.j),__vite__mapDeps([263,1,262]))}),javascript:oe("javascript",function(){return K(()=>import("./javascript-C1hWj-gL.js").then(e=>e.j),__vite__mapDeps([264,1,265]))}),javastacktrace:oe("javastacktrace",function(){return K(()=>import("./javastacktrace-l5DDWqnd.js").then(e=>e.j),__vite__mapDeps([266,1]))}),jexl:oe("jexl",function(){return K(()=>import("./jexl-CPewgw8R.js").then(e=>e.j),__vite__mapDeps([267,1]))}),jolie:oe("jolie",function(){return K(()=>import("./jolie-oDW4xHAj.js").then(e=>e.j),__vite__mapDeps([268,1]))}),jq:oe("jq",function(){return K(()=>import("./jq-DCybKO55.js").then(e=>e.j),__vite__mapDeps([269,1]))}),jsExtras:oe("jsExtras",function(){return K(()=>import("./js-extras-Dt3p3jFp.js").then(e=>e.j),__vite__mapDeps([270,1]))}),jsTemplates:oe("jsTemplates",function(){return K(()=>import("./js-templates-C36cwUgG.js").then(e=>e.j),__vite__mapDeps([271,1]))}),jsdoc:oe("jsdoc",function(){return K(()=>import("./jsdoc-D9b2eQCX.js").then(e=>e.j),__vite__mapDeps([272,1,262,273]))}),json:oe("json",function(){return K(()=>import("./json-DxuiKECE.js").then(e=>e.j),__vite__mapDeps([274,1,275]))}),json5:oe("json5",function(){return K(()=>import("./json5-xjq_y-Ab.js").then(e=>e.j),__vite__mapDeps([276,1,275]))}),jsonp:oe("jsonp",function(){return K(()=>import("./jsonp-O-R2QEUD.js").then(e=>e.j),__vite__mapDeps([277,1,275]))}),jsstacktrace:oe("jsstacktrace",function(){return K(()=>import("./jsstacktrace-AwxS9N4y.js").then(e=>e.j),__vite__mapDeps([278,1]))}),jsx:oe("jsx",function(){return K(()=>import("./jsx-oDQJXXbV.js").then(e=>e.j),__vite__mapDeps([279,1,280]))}),julia:oe("julia",function(){return K(()=>import("./julia-CSbapaXD.js").then(e=>e.j),__vite__mapDeps([281,1]))}),keepalived:oe("keepalived",function(){return K(()=>import("./keepalived-QNLh4sKY.js").then(e=>e.k),__vite__mapDeps([282,1]))}),keyman:oe("keyman",function(){return K(()=>import("./keyman-Dekq-H3g.js").then(e=>e.k),__vite__mapDeps([283,1]))}),kotlin:oe("kotlin",function(){return K(()=>import("./kotlin-luLWldVW.js").then(e=>e.k),__vite__mapDeps([284,1]))}),kumir:oe("kumir",function(){return K(()=>import("./kumir-gJ2eR1Bt.js").then(e=>e.k),__vite__mapDeps([285,1]))}),kusto:oe("kusto",function(){return K(()=>import("./kusto-B8-0f2WS.js").then(e=>e.k),__vite__mapDeps([286,1]))}),latex:oe("latex",function(){return K(()=>import("./latex-naZEwrIf.js").then(e=>e.l),__vite__mapDeps([287,1]))}),latte:oe("latte",function(){return K(()=>import("./latte-CuYvwG6d.js").then(e=>e.l),__vite__mapDeps([288,1,203,289]))}),less:oe("less",function(){return K(()=>import("./less-IPZUooSX.js").then(e=>e.l),__vite__mapDeps([290,1]))}),lilypond:oe("lilypond",function(){return K(()=>import("./lilypond-Ca27w2l1.js").then(e=>e.l),__vite__mapDeps([291,1,292]))}),liquid:oe("liquid",function(){return K(()=>import("./liquid-CqfwnlE8.js").then(e=>e.l),__vite__mapDeps([293,1,203]))}),lisp:oe("lisp",function(){return K(()=>import("./lisp-DS6a9sOI.js").then(e=>e.l),__vite__mapDeps([294,1]))}),livescript:oe("livescript",function(){return K(()=>import("./livescript-BtvwBPLA.js").then(e=>e.l),__vite__mapDeps([295,1]))}),llvm:oe("llvm",function(){return K(()=>import("./llvm-DJuz_f_4.js").then(e=>e.l),__vite__mapDeps([296,1]))}),log:oe("log",function(){return K(()=>import("./log-vpDuJ6s7.js").then(e=>e.l),__vite__mapDeps([297,1]))}),lolcode:oe("lolcode",function(){return K(()=>import("./lolcode-D7zlseNY.js").then(e=>e.l),__vite__mapDeps([298,1]))}),lua:oe("lua",function(){return K(()=>import("./lua-CrdnDpZs.js").then(e=>e.l),__vite__mapDeps([299,1,216]))}),magma:oe("magma",function(){return K(()=>import("./magma-CXc54FID.js").then(e=>e.m),__vite__mapDeps([300,1]))}),makefile:oe("makefile",function(){return K(()=>import("./makefile-TgER5D3-.js").then(e=>e.m),__vite__mapDeps([301,1]))}),markdown:oe("markdown",function(){return K(()=>import("./markdown-BBUfvsG3.js").then(e=>e.m),__vite__mapDeps([302,1]))}),markupTemplating:oe("markupTemplating",function(){return K(()=>import("./markup-templating-DkjQpHey.js").then(e=>e.m),__vite__mapDeps([303,1,203]))}),markup:oe("markup",function(){return K(()=>import("./markup-DvUfpNsN.js").then(e=>e.m),__vite__mapDeps([304,1,305]))}),matlab:oe("matlab",function(){return K(()=>import("./matlab-D8KyOrZZ.js").then(e=>e.m),__vite__mapDeps([306,1]))}),maxscript:oe("maxscript",function(){return K(()=>import("./maxscript-BLMZLNdj.js").then(e=>e.m),__vite__mapDeps([307,1]))}),mel:oe("mel",function(){return K(()=>import("./mel-Ck2zZU6-.js").then(e=>e.m),__vite__mapDeps([308,1]))}),mermaid:oe("mermaid",function(){return K(()=>import("./mermaid-BbVwv4sI.js").then(e=>e.m),__vite__mapDeps([309,1]))}),mizar:oe("mizar",function(){return K(()=>import("./mizar-C5pIb6PU.js").then(e=>e.m),__vite__mapDeps([310,1]))}),mongodb:oe("mongodb",function(){return K(()=>import("./mongodb-BP-_FLZQ.js").then(e=>e.m),__vite__mapDeps([311,1]))}),monkey:oe("monkey",function(){return K(()=>import("./monkey-CJMClX9N.js").then(e=>e.m),__vite__mapDeps([312,1]))}),moonscript:oe("moonscript",function(){return K(()=>import("./moonscript-B3F4_gd_.js").then(e=>e.m),__vite__mapDeps([313,1]))}),n1ql:oe("n1ql",function(){return K(()=>import("./n1ql-DEwy8oY_.js").then(e=>e.n),__vite__mapDeps([314,1]))}),n4js:oe("n4js",function(){return K(()=>import("./n4js-DosTxUWO.js").then(e=>e.n),__vite__mapDeps([315,1]))}),nand2tetrisHdl:oe("nand2tetrisHdl",function(){return K(()=>import("./nand2tetris-hdl-BaEjoK_-.js").then(e=>e.n),__vite__mapDeps([316,1]))}),naniscript:oe("naniscript",function(){return K(()=>import("./naniscript-CwUM2gJ6.js").then(e=>e.n),__vite__mapDeps([317,1]))}),nasm:oe("nasm",function(){return K(()=>import("./nasm-BBm4hQNa.js").then(e=>e.n),__vite__mapDeps([318,1]))}),neon:oe("neon",function(){return K(()=>import("./neon-D7ky2QYE.js").then(e=>e.n),__vite__mapDeps([319,1]))}),nevod:oe("nevod",function(){return K(()=>import("./nevod-ytlw2XDY.js").then(e=>e.n),__vite__mapDeps([320,1]))}),nginx:oe("nginx",function(){return K(()=>import("./nginx-BAoSqL21.js").then(e=>e.n),__vite__mapDeps([321,1]))}),nim:oe("nim",function(){return K(()=>import("./nim-vhNCNa0d.js").then(e=>e.n),__vite__mapDeps([322,1]))}),nix:oe("nix",function(){return K(()=>import("./nix-UkDV490L.js").then(e=>e.n),__vite__mapDeps([323,1]))}),nsis:oe("nsis",function(){return K(()=>import("./nsis-CB_gSgbd.js").then(e=>e.n),__vite__mapDeps([324,1]))}),objectivec:oe("objectivec",function(){return K(()=>import("./objectivec-COnIeXKs.js").then(e=>e.o),__vite__mapDeps([325,1,148]))}),ocaml:oe("ocaml",function(){return K(()=>import("./ocaml-p7XlZdCt.js").then(e=>e.o),__vite__mapDeps([326,1]))}),opencl:oe("opencl",function(){return K(()=>import("./opencl-DpkpHOKT.js").then(e=>e.o),__vite__mapDeps([327,1,148]))}),openqasm:oe("openqasm",function(){return K(()=>import("./openqasm-BUO-RrFI.js").then(e=>e.o),__vite__mapDeps([328,1]))}),oz:oe("oz",function(){return K(()=>import("./oz-BKi7Vu9u.js").then(e=>e.o),__vite__mapDeps([329,1]))}),parigp:oe("parigp",function(){return K(()=>import("./parigp-Q2v1bPZv.js").then(e=>e.p),__vite__mapDeps([330,1]))}),parser:oe("parser",function(){return K(()=>import("./parser-CuIfV_M8.js").then(e=>e.p),__vite__mapDeps([331,1]))}),pascal:oe("pascal",function(){return K(()=>import("./pascal-BiB8a1yc.js").then(e=>e.p),__vite__mapDeps([332,1]))}),pascaligo:oe("pascaligo",function(){return K(()=>import("./pascaligo-Bbe6k1sN.js").then(e=>e.p),__vite__mapDeps([333,1]))}),pcaxis:oe("pcaxis",function(){return K(()=>import("./pcaxis-Cjwjh94y.js").then(e=>e.p),__vite__mapDeps([334,1]))}),peoplecode:oe("peoplecode",function(){return K(()=>import("./peoplecode-hzUErX2R.js").then(e=>e.p),__vite__mapDeps([335,1]))}),perl:oe("perl",function(){return K(()=>import("./perl-B1D9cLJK.js").then(e=>e.p),__vite__mapDeps([336,1]))}),phpExtras:oe("phpExtras",function(){return K(()=>import("./php-extras-CZ7KxjqE.js").then(e=>e.p),__vite__mapDeps([337,1,289,203]))}),php:oe("php",function(){return K(()=>import("./php-Dk7MEIvs.js").then(e=>e.p),__vite__mapDeps([338,1,289,203]))}),phpdoc:oe("phpdoc",function(){return K(()=>import("./phpdoc-FxciP3cA.js").then(e=>e.p),__vite__mapDeps([339,1,289,203,262]))}),plsql:oe("plsql",function(){return K(()=>import("./plsql-DvVXY7wu.js").then(e=>e.p),__vite__mapDeps([340,1,142]))}),powerquery:oe("powerquery",function(){return K(()=>import("./powerquery-Btcc8rhQ.js").then(e=>e.p),__vite__mapDeps([341,1]))}),powershell:oe("powershell",function(){return K(()=>import("./powershell-AWIxkKNB.js").then(e=>e.p),__vite__mapDeps([342,1]))}),processing:oe("processing",function(){return K(()=>import("./processing-B76ABtt6.js").then(e=>e.p),__vite__mapDeps([343,1]))}),prolog:oe("prolog",function(){return K(()=>import("./prolog-BkajrflI.js").then(e=>e.p),__vite__mapDeps([344,1]))}),promql:oe("promql",function(){return K(()=>import("./promql-NkmAc1R6.js").then(e=>e.p),__vite__mapDeps([345,1]))}),properties:oe("properties",function(){return K(()=>import("./properties-Xjh-xSf6.js").then(e=>e.p),__vite__mapDeps([346,1]))}),protobuf:oe("protobuf",function(){return K(()=>import("./protobuf-BI4CAp9r.js").then(e=>e.p),__vite__mapDeps([347,1]))}),psl:oe("psl",function(){return K(()=>import("./psl-aZe3ORrd.js").then(e=>e.p),__vite__mapDeps([348,1]))}),pug:oe("pug",function(){return K(()=>import("./pug-CoMAP1Jj.js").then(e=>e.p),__vite__mapDeps([349,1]))}),puppet:oe("puppet",function(){return K(()=>import("./puppet-D22HavK3.js").then(e=>e.p),__vite__mapDeps([350,1]))}),pure:oe("pure",function(){return K(()=>import("./pure-BCQxrhr5.js").then(e=>e.p),__vite__mapDeps([351,1]))}),purebasic:oe("purebasic",function(){return K(()=>import("./purebasic-CS3SBoo5.js").then(e=>e.p),__vite__mapDeps([352,1]))}),purescript:oe("purescript",function(){return K(()=>import("./purescript-kPZQhZXw.js").then(e=>e.p),__vite__mapDeps([353,1,241]))}),python:oe("python",function(){return K(()=>import("./python-dI9O2OOO.js").then(e=>e.p),__vite__mapDeps([354,1]))}),q:oe("q",function(){return K(()=>import("./q-BM_OsTRZ.js").then(e=>e.q),__vite__mapDeps([355,1]))}),qml:oe("qml",function(){return K(()=>import("./qml-6uNzUUZ_.js").then(e=>e.q),__vite__mapDeps([356,1]))}),qore:oe("qore",function(){return K(()=>import("./qore-CT2dtVvu.js").then(e=>e.q),__vite__mapDeps([357,1]))}),qsharp:oe("qsharp",function(){return K(()=>import("./qsharp-CUW6Vzvu.js").then(e=>e.q),__vite__mapDeps([358,1]))}),r:oe("r",function(){return K(()=>import("./r-CxoAQyfy.js").then(e=>e.r),__vite__mapDeps([359,1]))}),racket:oe("racket",function(){return K(()=>import("./racket-Ce6iEwSg.js").then(e=>e.r),__vite__mapDeps([360,1,292]))}),reason:oe("reason",function(){return K(()=>import("./reason-C3OtRNQn.js").then(e=>e.r),__vite__mapDeps([361,1]))}),regex:oe("regex",function(){return K(()=>import("./regex-24inC6Mm.js").then(e=>e.r),__vite__mapDeps([362,1]))}),rego:oe("rego",function(){return K(()=>import("./rego-DIGNi3rm.js").then(e=>e.r),__vite__mapDeps([363,1]))}),renpy:oe("renpy",function(){return K(()=>import("./renpy-2_7A_zWP.js").then(e=>e.r),__vite__mapDeps([364,1]))}),rest:oe("rest",function(){return K(()=>import("./rest-DhkPHUyy.js").then(e=>e.r),__vite__mapDeps([365,1]))}),rip:oe("rip",function(){return K(()=>import("./rip-NrUmeF-B.js").then(e=>e.r),__vite__mapDeps([366,1]))}),roboconf:oe("roboconf",function(){return K(()=>import("./roboconf-BemhCpww.js").then(e=>e.r),__vite__mapDeps([367,1]))}),robotframework:oe("robotframework",function(){return K(()=>import("./robotframework-53wxIqzy.js").then(e=>e.r),__vite__mapDeps([368,1]))}),ruby:oe("ruby",function(){return K(()=>import("./ruby-C6pGL11I.js").then(e=>e.r),__vite__mapDeps([369,1,187]))}),rust:oe("rust",function(){return K(()=>import("./rust-BHPZBpz7.js").then(e=>e.r),__vite__mapDeps([370,1]))}),sas:oe("sas",function(){return K(()=>import("./sas-yB8mv_pf.js").then(e=>e.s),__vite__mapDeps([371,1]))}),sass:oe("sass",function(){return K(()=>import("./sass-DgOtzGEh.js").then(e=>e.s),__vite__mapDeps([372,1]))}),scala:oe("scala",function(){return K(()=>import("./scala-c85IbDKx.js").then(e=>e.s),__vite__mapDeps([373,1,260]))}),scheme:oe("scheme",function(){return K(()=>import("./scheme-DujsssZ_.js").then(e=>e.s),__vite__mapDeps([374,1,292]))}),scss:oe("scss",function(){return K(()=>import("./scss-N9CyGJ1A.js").then(e=>e.s),__vite__mapDeps([375,1]))}),shellSession:oe("shellSession",function(){return K(()=>import("./shell-session-CfJU-2jh.js").then(e=>e.s),__vite__mapDeps([376,1,160]))}),smali:oe("smali",function(){return K(()=>import("./smali-7KK8MopY.js").then(e=>e.s),__vite__mapDeps([377,1]))}),smalltalk:oe("smalltalk",function(){return K(()=>import("./smalltalk-DJTW1rgy.js").then(e=>e.s),__vite__mapDeps([378,1]))}),smarty:oe("smarty",function(){return K(()=>import("./smarty-CswuHGTf.js").then(e=>e.s),__vite__mapDeps([379,1,203]))}),sml:oe("sml",function(){return K(()=>import("./sml-4a7AgiKJ.js").then(e=>e.s),__vite__mapDeps([380,1]))}),solidity:oe("solidity",function(){return K(()=>import("./solidity-DEN_xXGX.js").then(e=>e.s),__vite__mapDeps([381,1]))}),solutionFile:oe("solutionFile",function(){return K(()=>import("./solution-file-DWy8oS52.js").then(e=>e.s),__vite__mapDeps([382,1]))}),soy:oe("soy",function(){return K(()=>import("./soy-BX0S4Ybl.js").then(e=>e.s),__vite__mapDeps([383,1,203]))}),sparql:oe("sparql",function(){return K(()=>import("./sparql-B-dncyn2.js").then(e=>e.s),__vite__mapDeps([384,1,385]))}),splunkSpl:oe("splunkSpl",function(){return K(()=>import("./splunk-spl-BL9M6RFD.js").then(e=>e.s),__vite__mapDeps([386,1]))}),sqf:oe("sqf",function(){return K(()=>import("./sqf-B-w3EaXj.js").then(e=>e.s),__vite__mapDeps([387,1]))}),sql:oe("sql",function(){return K(()=>import("./sql-CSwhl0T2.js").then(e=>e.s),__vite__mapDeps([388,1,142]))}),squirrel:oe("squirrel",function(){return K(()=>import("./squirrel-C5_0fEts.js").then(e=>e.s),__vite__mapDeps([389,1]))}),stan:oe("stan",function(){return K(()=>import("./stan-BkKsrDj5.js").then(e=>e.s),__vite__mapDeps([390,1]))}),stylus:oe("stylus",function(){return K(()=>import("./stylus-2Q_1bI5O.js").then(e=>e.s),__vite__mapDeps([391,1]))}),swift:oe("swift",function(){return K(()=>import("./swift-d0VCk99T.js").then(e=>e.s),__vite__mapDeps([392,1]))}),systemd:oe("systemd",function(){return K(()=>import("./systemd-B69haCtV.js").then(e=>e.s),__vite__mapDeps([393,1]))}),t4Cs:oe("t4Cs",function(){return K(()=>import("./t4-cs-CLTzhrWu.js").then(e=>e.t),__vite__mapDeps([394,1,395,154]))}),t4Templating:oe("t4Templating",function(){return K(()=>import("./t4-templating-CInlPI0-.js").then(e=>e.t),__vite__mapDeps([396,1,395]))}),t4Vb:oe("t4Vb",function(){return K(()=>import("./t4-vb-CEKPTSWr.js").then(e=>e.t),__vite__mapDeps([397,1,395,398,162]))}),tap:oe("tap",function(){return K(()=>import("./tap-3j2EobdJ.js").then(e=>e.t),__vite__mapDeps([399,1,400]))}),tcl:oe("tcl",function(){return K(()=>import("./tcl-zimK4Rb-.js").then(e=>e.t),__vite__mapDeps([401,1]))}),textile:oe("textile",function(){return K(()=>import("./textile-7onSDWIs.js").then(e=>e.t),__vite__mapDeps([402,1]))}),toml:oe("toml",function(){return K(()=>import("./toml-B0WKHIUt.js").then(e=>e.t),__vite__mapDeps([403,1]))}),tremor:oe("tremor",function(){return K(()=>import("./tremor-DTcir1gV.js").then(e=>e.t),__vite__mapDeps([404,1]))}),tsx:oe("tsx",function(){return K(()=>import("./tsx-C2pKQQQ0.js").then(e=>e.t),__vite__mapDeps([405,1,280,273]))}),tt2:oe("tt2",function(){return K(()=>import("./tt2-C4s6UOud.js").then(e=>e.t),__vite__mapDeps([406,1,203]))}),turtle:oe("turtle",function(){return K(()=>import("./turtle-BYwbX2lo.js").then(e=>e.t),__vite__mapDeps([407,1,385]))}),twig:oe("twig",function(){return K(()=>import("./twig-DALNrbqc.js").then(e=>e.t),__vite__mapDeps([408,1,203]))}),typescript:oe("typescript",function(){return K(()=>import("./typescript-hEHsyI9-.js").then(e=>e.t),__vite__mapDeps([409,1,273]))}),typoscript:oe("typoscript",function(){return K(()=>import("./typoscript-C_RZnLUi.js").then(e=>e.t),__vite__mapDeps([410,1]))}),unrealscript:oe("unrealscript",function(){return K(()=>import("./unrealscript-DO0UKSEs.js").then(e=>e.u),__vite__mapDeps([411,1]))}),uorazor:oe("uorazor",function(){return K(()=>import("./uorazor-Cw2oyUim.js").then(e=>e.u),__vite__mapDeps([412,1]))}),uri:oe("uri",function(){return K(()=>import("./uri-Cla3Mizl.js").then(e=>e.u),__vite__mapDeps([413,1]))}),v:oe("v",function(){return K(()=>import("./v-BsukdtQB.js").then(e=>e.v),__vite__mapDeps([414,1]))}),vala:oe("vala",function(){return K(()=>import("./vala-C185s0T4.js").then(e=>e.v),__vite__mapDeps([415,1]))}),vbnet:oe("vbnet",function(){return K(()=>import("./vbnet-CJSJpYVN.js").then(e=>e.v),__vite__mapDeps([416,1,398,162]))}),velocity:oe("velocity",function(){return K(()=>import("./velocity-CyQirldx.js").then(e=>e.v),__vite__mapDeps([417,1]))}),verilog:oe("verilog",function(){return K(()=>import("./verilog-DM4rVBaH.js").then(e=>e.v),__vite__mapDeps([418,1]))}),vhdl:oe("vhdl",function(){return K(()=>import("./vhdl-B2ul-nke.js").then(e=>e.v),__vite__mapDeps([419,1]))}),vim:oe("vim",function(){return K(()=>import("./vim-D2bsD5Qn.js").then(e=>e.v),__vite__mapDeps([420,1]))}),visualBasic:oe("visualBasic",function(){return K(()=>import("./visual-basic-DNYvyv_b.js").then(e=>e.v),__vite__mapDeps([421,1]))}),warpscript:oe("warpscript",function(){return K(()=>import("./warpscript-DjoJn5rp.js").then(e=>e.w),__vite__mapDeps([422,1]))}),wasm:oe("wasm",function(){return K(()=>import("./wasm-BbdpnjqR.js").then(e=>e.w),__vite__mapDeps([423,1]))}),webIdl:oe("webIdl",function(){return K(()=>import("./web-idl-BniNXYF8.js").then(e=>e.w),__vite__mapDeps([424,1]))}),wiki:oe("wiki",function(){return K(()=>import("./wiki-mlk-5nnD.js").then(e=>e.w),__vite__mapDeps([425,1]))}),wolfram:oe("wolfram",function(){return K(()=>import("./wolfram-qZAo5rwv.js").then(e=>e.w),__vite__mapDeps([426,1]))}),wren:oe("wren",function(){return K(()=>import("./wren-BqEZDn1c.js").then(e=>e.w),__vite__mapDeps([427,1]))}),xeora:oe("xeora",function(){return K(()=>import("./xeora-Cnf6lXKg.js").then(e=>e.x),__vite__mapDeps([428,1]))}),xmlDoc:oe("xmlDoc",function(){return K(()=>import("./xml-doc-Bt7GfDs3.js").then(e=>e.x),__vite__mapDeps([429,1]))}),xojo:oe("xojo",function(){return K(()=>import("./xojo-DJ-XOrAn.js").then(e=>e.x),__vite__mapDeps([430,1]))}),xquery:oe("xquery",function(){return K(()=>import("./xquery-DijxsTGH.js").then(e=>e.x),__vite__mapDeps([431,1]))}),yaml:oe("yaml",function(){return K(()=>import("./yaml-uyIc--AI.js").then(e=>e.y),__vite__mapDeps([432,1,400]))}),yang:oe("yang",function(){return K(()=>import("./yang-BSK0EYb5.js").then(e=>e.y),__vite__mapDeps([433,1]))}),zig:oe("zig",function(){return K(()=>import("./zig-C5U7OOzb.js").then(e=>e.z),__vite__mapDeps([434,1]))})},LWt=PWt({loader:function(){return K(()=>import("./core-Ce8M0wN-.js").then(t=>t.c),__vite__mapDeps([435,1,305,193,178,265])).then(function(t){return t.default||t})},isLanguageRegistered:function(t,n){return t.registered(n)},languageLoaders:OWt,registerLanguage:function(t,n,r){return t.register(r)}}),DWt="light";function FWt(e){return{mode:DWt,...e?.theme}}function En(e){var t=e;return function(n){var r=FWt(n);let s=r.mode;return t[s]}}const UWt=e=>{const t={theme:e};return{lineNumberColor:En({light:"#383a42",dark:"#abb2bf"})(t),lineNumberBgColor:En({light:"#fafafa",dark:"#282c34"})(t),backgroundColor:En({light:"#fafafa",dark:"#282c34"})(t),textColor:En({light:"#383a42",dark:"#abb2bf"})(t),substringColor:En({light:"#e45649",dark:"#e06c75"})(t),keywordColor:En({light:"#a626a4",dark:"#c678dd"})(t),attributeColor:En({light:"#50a14f",dark:"#98c379"})(t),selectorAttributeColor:En({light:"#e45649",dark:"#e06c75"})(t),docTagColor:En({light:"#a626a4",dark:"#c678dd"})(t),nameColor:En({light:"#e45649",dark:"#e06c75"})(t),builtInColor:En({light:"#c18401",dark:"#e6c07b"})(t),literalColor:En({light:"#0184bb",dark:"#56b6c2"})(t),bulletColor:En({light:"#4078f2",dark:"#61aeee"})(t),codeColor:En({light:"#383a42",dark:"#abb2bf"})(t),additionColor:En({light:"#50a14f",dark:"#98c379"})(t),regexpColor:En({light:"#50a14f",dark:"#98c379"})(t),symbolColor:En({light:"#4078f2",dark:"#61aeee"})(t),variableColor:En({light:"#986801",dark:"#d19a66"})(t),templateVariableColor:En({light:"#986801",dark:"#d19a66"})(t),linkColor:En({light:"#4078f2",dark:"#61aeee"})(t),selectorClassColor:En({light:"#986801",dark:"#d19a66"})(t),typeColor:En({light:"#986801",dark:"#d19a66"})(t),stringColor:En({light:"#50a14f",dark:"#98c379"})(t),selectorIdColor:En({light:"#4078f2",dark:"#61aeee"})(t),quoteColor:En({light:"#a0a1a7",dark:"#5c6370"})(t),templateTagColor:En({light:"#383a42",dark:"#abb2bf"})(t),deletionColor:En({light:"#e45649",dark:"#e06c75"})(t),titleColor:En({light:"#4078f2",dark:"#61aeee"})(t),sectionColor:En({light:"#e45649",dark:"#e06c75"})(t),commentColor:En({light:"#a0a1a7",dark:"#5c6370"})(t),metaKeywordColor:En({light:"#383a42",dark:"#abb2bf"})(t),metaColor:En({light:"#4078f2",dark:"#61aeee"})(t),functionColor:En({light:"#383a42",dark:"#abb2bf"})(t),numberColor:En({light:"#986801",dark:"#d19a66"})(t)}},TM="inherit",WW="inherit",BWt={fontSize:WW,fontFamily:TM,lineHeight:20/12,padding:8},VWt=e=>({fontSize:WW,lineHeight:20/14,color:e.lineNumberColor,backgroundColor:e.lineNumberBgColor,flexShrink:0,padding:8,textAlign:"right",userSelect:"none"}),Vje=e=>({key:{color:e.keywordColor,fontWeight:"bolder"},keyword:{color:e.keywordColor,fontWeight:"bolder"},"attr-name":{color:e.attributeColor},selector:{color:e.selectorTagColor},comment:{color:e.commentColor,fontFamily:TM,fontStyle:"italic"},"block-comment":{color:e.commentColor,fontFamily:TM,fontStyle:"italic"},"function-name":{color:e.sectionColor},"class-name":{color:e.sectionColor},doctype:{color:e.docTagColor},substr:{color:e.substringColor},namespace:{color:e.nameColor},builtin:{color:e.builtInColor},entity:{color:e.literalColor},bullet:{color:e.bulletColor},code:{color:e.codeColor},addition:{color:e.additionColor},regex:{color:e.regexpColor},symbol:{color:e.symbolColor},variable:{color:e.variableColor},url:{color:e.linkColor},"selector-attr":{color:e.selectorAttributeColor},"selector-pseudo":{color:e.selectorPseudoColor},type:{color:e.typeColor},string:{color:e.stringColor},quote:{color:e.quoteColor},tag:{color:e.templateTagColor},deletion:{color:e.deletionColor},title:{color:e.titleColor},section:{color:e.sectionColor},"meta-keyword":{color:e.metaKeywordColor},meta:{color:e.metaColor},italic:{fontStyle:"italic"},bold:{fontWeight:"bolder"},function:{color:e.functionColor},number:{color:e.numberColor}}),$je=e=>({fontSize:WW,fontFamily:TM,background:e.backgroundColor,color:e.textColor,borderRadius:3,display:"flex",lineHeight:20/14,overflowX:"auto",whiteSpace:"pre"}),$Wt=e=>({'pre[class*="language-"]':$je(e),...Vje(e)}),WWt=e=>({'pre[class*="language-"]':{...$je(e),padding:"2px 4px",display:"inline",whiteSpace:"pre-wrap"},...Vje(e)});function Wje(e={mode:"light"}){const t={...UWt(e),...e};return{lineNumberContainerStyle:VWt(t),codeBlockStyle:$Wt(t),inlineCodeStyle:WWt(t),codeContainerStyle:BWt}}const HWt=Object.freeze([{name:"PHP",alias:["php","php3","php4","php5"],value:"php"},{name:"Java",alias:["java"],value:"java"},{name:"CSharp",alias:["csharp","c#","cs"],value:"csharp"},{name:"Python",alias:["python","py"],value:"python"},{name:"JavaScript",alias:["javascript","js"],value:"javascript"},{name:"XML",alias:["xml"],value:"xml"},{name:"HTML",alias:["html","htm"],value:"markup"},{name:"C++",alias:["c++","cpp","clike"],value:"cpp"},{name:"Ruby",alias:["ruby","rb","duby"],value:"ruby"},{name:"Objective-C",alias:["objective-c","objectivec","obj-c","objc"],value:"objectivec"},{name:"C",alias:["c"],value:"cpp"},{name:"Swift",alias:["swift"],value:"swift"},{name:"TeX",alias:["tex","latex"],value:"tex"},{name:"Shell",alias:["shell","sh","ksh","zsh"],value:"bash"},{name:"Scala",alias:["scala"],value:"scala"},{name:"Go",alias:["go"],value:"go"},{name:"ActionScript",alias:["actionscript","actionscript3","as"],value:"actionscript"},{name:"ColdFusion",alias:["coldfusion"],value:"xml"},{name:"JavaFX",alias:["javafx","jfx"],value:"java"},{name:"VbNet",alias:["vbnet","vb.net"],value:"vbnet"},{name:"JSON",alias:["json"],value:"json"},{name:"MATLAB",alias:["matlab"],value:"matlab"},{name:"Groovy",alias:["groovy"],value:"groovy"},{name:"SQL",alias:["sql","postgresql","postgres","plpgsql","psql","postgresql-console","postgres-console","tsql","t-sql","mysql","sqlite"],value:"sql"},{name:"R",alias:["r"],value:"r"},{name:"Perl",alias:["perl","pl"],value:"perl"},{name:"Lua",alias:["lua"],value:"lua"},{name:"Delphi",alias:["delphi","pas","pascal","objectpascal"],value:"delphi"},{name:"XML",alias:["xml"],value:"xml"},{name:"TypeScript",alias:["typescript","ts","tsx"],value:"typescript"},{name:"CoffeeScript",alias:["coffeescript","coffee-script","coffee"],value:"coffeescript"},{name:"Haskell",alias:["haskell","hs"],value:"haskell"},{name:"Puppet",alias:["puppet"],value:"puppet"},{name:"Arduino",alias:["arduino"],value:"arduino"},{name:"Fortran",alias:["fortran"],value:"fortran"},{name:"Erlang",alias:["erlang","erl"],value:"erlang"},{name:"PowerShell",alias:["powershell","posh","ps1","psm1"],value:"powershell"},{name:"Haxe",alias:["haxe","hx","hxsl"],value:"haxe"},{name:"Elixir",alias:["elixir","ex","exs"],value:"elixir"},{name:"Verilog",alias:["verilog","v"],value:"verilog"},{name:"Rust",alias:["rust"],value:"rust"},{name:"VHDL",alias:["vhdl"],value:"vhdl"},{name:"Sass",alias:["sass"],value:"less"},{name:"OCaml",alias:["ocaml"],value:"ocaml"},{name:"Dart",alias:["dart"],value:"dart"},{name:"CSS",alias:["css"],value:"css"},{name:"reStructuredText",alias:["restructuredtext","rst","rest"],value:"rest"},{name:"ObjectPascal",alias:["objectpascal"],value:"delphi"},{name:"Kotlin",alias:["kotlin"],value:"kotlin"},{name:"D",alias:["d"],value:"d"},{name:"Octave",alias:["octave"],value:"matlab"},{name:"QML",alias:["qbs","qml"],value:"qml"},{name:"Prolog",alias:["prolog"],value:"prolog"},{name:"FoxPro",alias:["foxpro","vfp","clipper","xbase"],value:"vbnet"},{name:"Scheme",alias:["scheme","scm"],value:"scheme"},{name:"CUDA",alias:["cuda","cu"],value:"cpp"},{name:"Julia",alias:["julia","jl"],value:"julia"},{name:"Racket",alias:["racket","rkt"],value:"lisp"},{name:"Ada",alias:["ada","ada95","ada2005"],value:"ada"},{name:"Tcl",alias:["tcl"],value:"tcl"},{name:"Mathematica",alias:["mathematica","mma","nb"],value:"mathematica"},{name:"Autoit",alias:["autoit"],value:"autoit"},{name:"StandardML",alias:["standardmL","sml","standardml"],value:"sml"},{name:"Objective-J",alias:["objective-j","objectivej","obj-j","objj"],value:"objectivec"},{name:"Smalltalk",alias:["smalltalk","squeak","st"],value:"smalltalk"},{name:"Vala",alias:["vala","vapi"],value:"vala"},{name:"ABAP",alias:["abap"],value:"sql"},{name:"LiveScript",alias:["livescript","live-script"],value:"livescript"},{name:"XQuery",alias:["xquery","xqy","xq","xql","xqm"],value:"xquery"},{name:"PlainText",alias:["text","plaintext"],value:"text"},{name:"Yaml",alias:["yaml","yml"],value:"yaml"},{name:"GraphQL",alias:["graphql","gql"],value:"graphql"}]),zWt=e=>{if(!e)return"";const t=HWt.find(n=>n.name===e||n.alias.includes(e));return t?t.value:e||"text"};class Hje extends f.PureComponent{constructor(){super(...arguments),this._isMounted=!1}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}getLineOpacity(t){if(!this.props.highlight)return 1;const n=this.props.highlight.split(",").map(r=>{if(r.indexOf("-")>0){const[s,a]=r.split("-").map(Number).sort();return Array(a+1).fill(void 0).map((i,l)=>l).slice(s,a+1)}return Number(r)}).reduce((r,s)=>r.concat(s),[]);return n.length===0||n.includes(t)?1:.3}render(){const{inlineCodeStyle:t}=Wje(this.props.theme),r={language:zWt(this.props.language),PreTag:this.props.preTag,style:this.props.codeStyle||t,showLineNumbers:this.props.showLineNumbers,startingLineNumber:this.props.startingLineNumber,codeTagProps:this.props.codeTagProps,wrapLongLines:this.props.wrapLongLines};return I.createElement(LWt,Object.assign({},r,{wrapLines:!!this.props.highlight,customStyle:this.props.customStyle,lineProps:s=>({style:{opacity:this.getLineOpacity(s),...this.props.lineNumberContainerStyle}})}),this.props.text)}}Hje.defaultProps={theme:{},showLineNumbers:!1,wrapLongLines:!1,startingLineNumber:1,lineNumberContainerStyle:{},codeTagProps:{},preTag:"span",highlight:"",customStyle:{}};const zje="text";let HW=class extends f.PureComponent{constructor(){super(...arguments),this._isMounted=!1,this.handleCopy=t=>{const n=t.nativeEvent.clipboardData;if(n){t.preventDefault();const r=window.getSelection();if(r===null)return;const s=r.toString(),a=`<!doctype html><html><head></head><body><pre>${s}</pre></body></html>`;n.clearData(),n.setData("text/html",a),n.setData("text/plain",s)}}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){var t,n,r,s;const{lineNumberContainerStyle:a,codeBlockStyle:i,codeContainerStyle:l}=Wje(this.props.theme),c={language:this.props.language||zje,codeStyle:{...i,...(t=this.props)===null||t===void 0?void 0:t.codeBlockStyle},customStyle:(n=this.props)===null||n===void 0?void 0:n.customStyle,showLineNumbers:this.props.showLineNumbers,startingLineNumber:this.props.startingLineNumber,codeTagProps:{style:{...l,...(r=this.props)===null||r===void 0?void 0:r.codeContainerStyle}},lineNumberContainerStyle:{...a,...(s=this.props)===null||s===void 0?void 0:s.lineNumberContainerStyle},text:this.props.text.toString(),highlight:this.props.highlight,wrapLongLines:this.props.wrapLongLines};return I.createElement(Hje,Object.assign({},c))}};HW.displayName="CodeBlock";HW.defaultProps={text:"",showLineNumbers:!0,wrapLongLines:!1,startingLineNumber:1,language:zje,theme:{},highlight:"",lineNumberContainerStyle:{},customStyle:{},codeBlockStyle:{}};var GWt=mWt(HW);$T.button`
  position: absolute;
  top: 0.5em;
  right: 0.75em;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  background: ${e=>e.theme.backgroundColor};
  margin-top: 0.15rem;
  border-radius: 0.25rem;
  max-height: 2rem;
  max-width: 2rem;
  padding: 0.25rem;
  &:hover {
    opacity: ${e=>e.copied?1:.5};
  }
  &:focus {
    outline: none;
    opacity: 1;
  }
  .icon {
    width: 1rem;
    height: 1rem;
  }
`;$T.div`
  position: relative;
  background: ${e=>e.theme.backgroundColor};
  border-radius: 0.25rem;
  padding: ${e=>e.codeBlock?"0.25rem 0.5rem 0.25rem 0.25rem":"0.25rem"};
`;$T.div`
    position: relative;
    width: ${({width:e})=>e||"auto"};
    max-width: 100%;
    padding: 8pt;
    padding-right: calc(2 * 16pt);
    color: ${({style:e})=>e.color};
    background-color: ${({style:e})=>e.bgColor};
    border: 1px solid ${({style:e})=>e.border};
    border-radius: 5px;
  pre {
    margin: 0;
    padding: 0;
    border: none;
    background-color: transparent;
    color: ${({style:e})=>e.color};
    font-size: 0.8125rem;
  }
  pre::before {
    content: '$ ';
    user-select: none;
  }
  pre :global(*) {
    margin: 0;
    padding: 0;
    font-size: inherit;
    color: inherit;
  }
  .copy {
    position: absolute;
    right: 0;
    top: -2px;
    transform: translateY(50%);
    background-color: ${({style:e})=>e.bgColor};
    display: inline-flex;
    justify-content: center;
    align-items: center;
    width: calc(2 * 16pt);
    color: inherit;
    transition: opacity 0.2s ease 0s;
    border-radius: 5px;
    cursor: pointer;
    user-select: none;
  }
  .copy:hover {
    opacity: 0.7;
  }
`;var qWt={lineNumberColor:"#c5c8c6",lineNumberBgColor:"#1d1f21",backgroundColor:"#1d1f21",textColor:"#c5c8c6",substringColor:"#c5c8c6",keywordColor:"#b294bb",attributeColor:"#f0c674",selectorAttributeColor:"#b294bb",docTagColor:"#c5c8c6",nameColor:"#cc6666",builtInColor:"#de935f",literalColor:"#de935f",bulletColor:"#b5bd68",codeColor:"#c5c8c6",additionColor:"#b5bd68",regexpColor:"#cc6666",symbolColor:"#b5bd68",variableColor:"#cc6666",templateVariableColor:"#cc6666",linkColor:"#de935f",selectorClassColor:"#cc6666",typeColor:"#de935f",stringColor:"#b5bd68",selectorIdColor:"#cc6666",quoteColor:"#969896",templateTagColor:"#c5c8c6",deletionColor:"#cc6666",titleColor:"#81a2be",sectionColor:"#81a2be",commentColor:"#969896",metaKeywordColor:"#c5c8c6",metaColor:"#de935f",functionColor:"#c5c8c6",numberColor:"#de935f"},KWt={lineNumberColor:"#4d4d4c",lineNumberBgColor:"white",backgroundColor:"white",textColor:"#4d4d4c",substringColor:"#4d4d4c",keywordColor:"#8959a8",attributeColor:"#eab700",selectorAttributeColor:"#8959a8",docTagColor:"#4d4d4c",nameColor:"#c82829",builtInColor:"#f5871f",literalColor:"#f5871f",bulletColor:"#718c00",codeColor:"#4d4d4c",additionColor:"#718c00",regexpColor:"#c82829",symbolColor:"#718c00",variableColor:"#c82829",templateVariableColor:"#c82829",linkColor:"#f5871f",selectorClassColor:"#c82829",typeColor:"#f5871f",stringColor:"#718c00",selectorIdColor:"#c82829",quoteColor:"#8e908c",templateTagColor:"#4d4d4c",deletionColor:"#c82829",titleColor:"#4271ae",sectionColor:"#4271ae",commentColor:"#8e908c",metaKeywordColor:"#4d4d4c",metaColor:"#f5871f",functionColor:"#4d4d4c",numberColor:"#f5871f"};const sb=I.memo(e=>{const{children:t,className:n,codeBlockProps:r,hideTools:s,trackEvent:a,...i}=e,{language:l="text",showLineNumbers:c,text:u,theme:d,wrapLongLines:m,...p}=r,{colorScheme:h}=Wr({addSecondPass:!0}),g=f.useMemo(()=>{let C;return d?C=d:(C=h==="dark"?qWt:KWt,C.backgroundColor="transparent",C.lineNumberBgColor="transparent"),C},[h,d]),y=B("codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded font-mono text-sm font-normal",n),v=f.useCallback(()=>{navigator.clipboard.writeText(String(t)),a?.("click code block copy",{language:l??"text"})},[t,l,a]),x=f.useMemo(()=>({scrollbarWidth:"thin"}),[]),[b,_]=f.useState(!!(m??l==="text")),w=f.useCallback(()=>{_(C=>{const S=!C;return a?.("click code block wrap toggle",{wrap:S}),S})},[a]);return o.jsxs("div",{className:y,...i,children:[o.jsx("div",{className:"translate-y-xs -translate-x-xs bottom-xl mb-xl sticky top-0 flex h-0 items-start justify-end",children:!s&&o.jsxs(o.Fragment,{children:[o.jsx(Te,{icon:b?gOe:yOe,size:"small",pill:!0,onClick:w,testId:"toggle-wrap-code-button",ariaLabel:b?"Unwrap":"Wrap"}),o.jsx(Te,{icon:mle,size:"small",pill:!0,clickFeedback:!0,onClick:v,testId:"copy-code-button",ariaLabel:"Copy"})]})}),o.jsxs("div",{className:"-mt-xl",children:[l&&!s&&o.jsx("div",{children:o.jsx("div",{"data-testid":"code-language-indicator",className:"text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-[3px] font-thin",children:l})}),o.jsx("div",{className:"pr-lg",children:o.jsx(GWt,{as:void 0,forwardedAs:void 0,language:l,showLineNumbers:!1,text:String(t),theme:g,customStyle:x,wrapLongLines:b,...p})})]})]})});sb.displayName="CodeBlock";const Gje=I.memo(({step:e,action:t})=>{const{$t:n}=Z(),[r,s]=f.useState(!1),{final:a,status:i,script:l,output:c,stdout:u}=e.content,d=!a,m=i==="generating"||i==="executing",p=f.useCallback(()=>{s(v=>!v)},[]),h=u&&c?u+`
`+c:u||c||"",g=f.useMemo(()=>({language:"python"}),[]),y=!!l;return o.jsxs("div",{children:[o.jsx(he,{onClick:p,text:t,icon:vOe,isLoading:d,size:"tiny",pill:!0,chevron:y,chevronIcon:r?ey:Dn}),o.jsx(Ke,{children:r&&y&&o.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1,transition:{ease:"easeIn",duration:.15}},className:"mb-sm space-y-sm",children:[o.jsx(sb,{className:"text-xs",codeBlockProps:g,children:l}),!m&&o.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1,transition:{ease:"easeIn",duration:.15}},children:[o.jsx(D,{variant:"tiny",color:"light",children:n(h?{defaultMessage:"Output",id:"fio5opLcOZ"}:{defaultMessage:"This code did not produce an output",id:"UgqMuAXFKs"})}),i!=="error"&&h&&o.jsx(sb,{className:B("scrollbar-subtle max-h-[220px] overflow-y-auto text-xs",i==="success"),codeBlockProps:g,children:h})]})]})})]})});Gje.displayName="CodeStep";const qje=I.memo(({asset:e})=>{const{result:{backend_uuid:t}}=an(),{closeModal:n,openModal:r}=xt(),{updateCurrentMode:s}=uw(),a=Gk(),{isCanvasOpen:i,canvasState:l}=F_(),c=f.useMemo(()=>i&&e.uuid===l?.asset?.uuid,[e.uuid,l?.asset?.uuid,i]),{title:u,description:d,Icon:m}=PW(e),p=f$t({asset:e}),h=f.useCallback(async()=>{if(a){p();return}e.asset_type===Bt.APP||e.asset_type===Bt.SLIDES?(n(),s("apps")):r("searchStepsAssetsModal",{backendUUID:e.backend_uuid??t,assetUUID:e.uuid,answerMode:"tasks"})},[a,e,n,t,s,r,p]);return o.jsxs(H,{onClick:h,role:"button",tabIndex:0,variant:m5.subtler,className:B("flex w-fit items-center rounded-lg p-1.5",c&&"ring-super !ring-1"),children:[o.jsx(H,{variant:"super",className:"m-1 flex size-8 items-center justify-center rounded-md p-2",children:o.jsx(m,{color:"background",size:16})}),o.jsxs("div",{className:"flex flex-col gap-0.5 px-2",children:[o.jsx(D,{variant:"small",color:"default",className:"!font-display !text-[0.8125rem] font-medium",children:u}),o.jsx(D,{variant:"tinyRegular",color:"light",className:"!font-display !text-[0.6875rem] leading-none",children:d})]})]})},({asset:e,...t},{asset:n,...r})=>kge(t,r)&&as(e,n));qje.displayName="AssetToken";const Kje=I.memo(({step:e,action:t})=>{const{final:n,file_name:r,page_count:s,word_count:a}=e.content,i=!n;let l=t;return r&&n&&(l=r,s!=null?(l+=` (${s} pages`,a!=null&&(l+=`, ${a} words`),l+=")"):a!=null&&(l+=` (${a} words)`)),o.jsx(he,{text:t,icon:KM,isLoading:i,size:"tiny",pill:!0,toolTip:l,tooltipLayout:"top"})});Kje.displayName="DocxStep";const Yje=I.memo(({status:e})=>{const{$t:t}=Z();let n=ka,r=t({defaultMessage:"Done",id:"JXdbo8Vnlw"});switch(e){case"SENT":n=ka,r=t({defaultMessage:"Email sent",id:"as7ksh6tP3"});break;case"FORWARDED":n=xOe,r=t({defaultMessage:"Email forwarded",id:"QUWo2L2sfE"});break;case"REJECTED":n=Rt,r=t({defaultMessage:"Email rejected",id:"+469cQAaqI"});break;default:n=ka,r=t({defaultMessage:"Done",id:"JXdbo8Vnlw"});break}return o.jsx(Is,{icon:n,iconClassName:"text-super",text:r})});Yje.displayName="EmailStatusStep";const Qje=I.memo(({onClick:e,urls:t})=>{const n=f.useMemo(()=>t.map(r=>o.jsx(Xje,{url:r,onClick:e},r)),[e,t]);return o.jsx("div",{className:"gap-sm flex flex-wrap",children:o.jsx(ip,{items:n,initialDisplayCount:1})})});Qje.displayName="GeneratedImageResultsStep";const Xje=I.memo(({url:e,onClick:t})=>{const n=f.useCallback(()=>{t?.(e)},[e,t]);return o.jsx(Ge,{className:"block",href:e,target:"_blank",rel:"noopener nofollow",onClick:n,children:o.jsx(H,{variant:"subtler",bgHover:"subtle",className:"py-xs rounded-lg pl-1.5 pr-2.5",children:o.jsx(Oo,{variant:"tinyMono",className:"!text-[0.7rem]",url:e,isAttachment:!1,connectionType:Tt.GENERATED_IMAGE,source:"Generated Image"})})},e)});Xje.displayName="LinkFactory";const Zje=I.memo(({onClick:e,urls:t})=>{const n=f.useMemo(()=>t.map(r=>o.jsx(Jje,{url:r,onClick:e},r)),[e,t]);return o.jsx("div",{className:"gap-sm flex flex-wrap",children:o.jsx(ip,{items:n,initialDisplayCount:1})})});Zje.displayName="GeneratedVideoResultsStep";const Jje=I.memo(({url:e,onClick:t})=>{const n=f.useCallback(()=>{t?.(e)},[e,t]);return o.jsx(Ge,{className:"block",href:e,target:"_blank",rel:"noopener nofollow",onClick:n,children:o.jsx(H,{variant:"subtler",bgHover:"subtle",className:"py-xs rounded-lg pl-1.5 pr-2.5",children:o.jsx(Oo,{variant:"tinyMono",className:"!text-[0.7rem]",url:e,isAttachment:!1,connectionType:Tt.GENERATED_VIDEO,source:"Generated Video"})})},e)});Jje.displayName="LinkFactory";const e7=I.memo(({color:e,title:t})=>{const n="bg-[#13343B] dark:bg-[#F5F5F5]",s=(a=>a?{red:"bg-[#C0152F] dark:bg-[#FF5459]",maroon:"bg-[#944454] dark:bg-[#B3C901]",orange:"bg-[#DB7100] dark:bg-[#FFAB44]",teal:"bg-[#21808D] dark:bg-[#32B8C6]",grey:n,brown:"bg-[#A84B2F] dark:bg-[#E68161]",green:"bg-[#848456] dark:bg-[#B4B662]",gold:"bg-[#D39900] dark:bg-[#F0B435]",purple:"bg-[#865D95] dark:bg-[#C48ED8]",blue:"bg-[#19789E] dark:bg-[#54B4E3]"}[a]??n:n)(e);return o.jsx("div",{className:B("py-xs w-fit rounded-md px-2.5",s),children:o.jsx(D,{className:"translate-y-half",variant:"tiny",color:"defaultInverted",children:t})})});e7.displayName="GroupingTabsStep";const dS=(e,t)=>{if(typeof e=="object"&&e!==null&&t in e){const n=e[t];return typeof n=="string"?n:void 0}},YWt=(e,t)=>{if(e.step_type!=="MCP_TOOL_INPUT"||t.step_type!=="MCP_TOOL_OUTPUT")return!1;const n=dS(e.content,"goal_id"),r=dS(t.content,"goal_id");if(n&&r)return n===r;const s=dS(e.content,"tool_name"),a=dS(t.content,"tool_name");return!!(s&&a&&s===a)},Rsn=e=>{if(!e?.length)return[];if(!e.some(s=>s.step_type==="MCP_TOOL_INPUT"||s.step_type==="MCP_TOOL_OUTPUT"))return e;let n=-1;return e.reduce((s,a,i)=>{if(i<=n||a.step_type==="MCP_TOOL_OUTPUT")return s;const l=e[i+1];return a.step_type==="MCP_TOOL_INPUT"&&l&&YWt(a,l)?(s.push({...a,mcp_tool_output_content:l.content}),n=i+1,s):(s.push({...a}),s)},[])},eAe=e=>{switch(e){case"Notion":return Ob;case"Linear":return Kx;case"GitHub":return j5;case"Asana":return Jx;case"Atlassian":return A5;case"Slack":return Yx;case"Wiley":return ou;case"CB Insights":return w5;case"PitchBook":return C5;case"Statista":return S5;default:return null}};function tAe(e){return JSON.stringify(e,null,2)}const QWt=(e,t=1e4,{showTruncationIndicator:n=!0,format:r=!1}={})=>{if(e.length<=t)return r?nAe(e):e;let s=t;const a=Math.max(0,t-100);for(let c=t-1;c>=a;c--){const u=e[c];if(u===","||u===`
`||u===" "||u==="	"){s=c;break}}const i=e.substring(0,s).trim(),l=r?XWt(e,i):i;if(n){const c=`

// Content truncated at ${s} characters (original: ${e.length} chars)`;return l+c}return l};function nAe(e){try{return tAe(JSON.parse(e))}catch{return e}}function XWt(e,t){const n=nAe(e),r=t.replace(/\s/g,"").length;let s=0,a=n;for(let l=0;l<n.length;l++)/\s/.test(n[l]??"")||(s++,s===r&&(a=n.substring(0,l+1)));const i=t.at(-1);for(let l=a.length-1;l>=0;l--)if(a[l]===i){a=a.substring(0,l+1);break}return a}const ZWt={language:"json"},JWt=2e3,ab=({content:e,title:t,maxContentLength:n=JWt,truncationOptions:r={showTruncationIndicator:!1,format:!0},className:s,isError:a=!1,showTruncationMessage:i=!0})=>{const{formatNumber:l}=Z(),{processedContent:c,originalLength:u}=f.useMemo(()=>{if(typeof e=="string")return{processedContent:QWt(e,n,r),originalLength:e.length};if(e&&typeof e=="object"){const p=tAe(e);return{processedContent:p,originalLength:p.length}}const m=String(e);return{processedContent:m,originalLength:m.length}},[e,n,r]),d=u>n;return o.jsxs(H,{className:B("rounded-lg",s),variant:"subtler",children:[o.jsx(D,{variant:"tiny",className:B("p-md pb-0",a&&"text-negative"),children:t}),o.jsx(sb,{className:"p-sm !my-0 pt-0 text-xs",codeBlockProps:ZWt,hideTools:!0,children:c||"No content"}),i&&d&&o.jsx("div",{className:"bg-subtler flex items-center justify-center rounded-b p-2",children:o.jsx(D,{variant:"tiny",color:"light",children:o.jsx(pe,{defaultMessage:"Content truncated at {truncatedSize} (original size: {originalSize})",id:"ipA00V5aGw",values:{truncatedSize:l(n/1024,{maximumFractionDigits:0,style:"unit",unit:"kilobyte",unitDisplay:"narrow"}),originalSize:l(u/1024,{maximumFractionDigits:0,style:"unit",unit:"kilobyte",unitDisplay:"narrow"})}})})})]})},eHt=async({uuid:e,content:t,isError:n=!1})=>{await se.POST("/rest/sse/perplexity_mcp_response","local-mcp-step",{body:{result:{content:t,is_error:n,uuid:e}}})},rAe=I.memo(e=>{const{step:t,server:n,isFinished:r}=e,{$t:s}=Z(),[a,i]=f.useState(!1),[l,c]=f.useState(!1),[u,d]=f.useState(!1),m=Zn(),{mcpTools:p,installedDxts:h,actions:g,mcpToolsSettings:y}=Hr(),{data:v}=T2e(),{tool_id:x,tool_name:b,tool_args:_}=t.content,w=t.mcp_tool_output_content,C=n.name,E=f.useMemo(()=>p?.[C]?.find(({id:$})=>$===x)?.tool,[C,p,x])?.description,M=f.useMemo(()=>!C||!b?!1:(y?.[C]??{})[b]?.executePermissions==="allow-always",[C,b,y]),k=!r&&!w&&!u,A=k&&!M,R=f.useMemo(()=>{if(!E)return"";const $=E.split(`
`);return!($.length>3)||a?E:$.slice(0,3).join(`
`)+"..."},[E,a]),O=f.useCallback(async $=>{if(t.uuid){c(!0),d(!0),i(!1);try{await eHt({...$,uuid:t.uuid})}finally{c(!1)}}},[t.uuid]),L=f.useCallback(async()=>{if(!(!C||!b||!t.uuid)){c(!0),d(!0);try{const $=await m.callMcpTool({mcpServerName:C,toolName:b,toolArgs:_},{step_uuid:t.uuid});await O({content:$.content.map(z=>z.text).filter(Boolean).join(`

`)})}catch($){await O({content:`The MCP tool call failed: ${$ instanceof Error?$.message:"Unknown error"}`,isError:!0})}finally{c(!1)}}},[m,O,C,b,_,t.uuid]),P=f.useCallback(()=>{L()},[L]),N=f.useCallback(()=>{!C||!b||(g.setMcpToolExecutePermissions(C,b,"allow-always"),L())},[L,C,b,g]),T=f.useCallback(()=>{O({content:'The MCP tool call was rejected by the user (refer to them as "you" or use the appropriate equivalent in their language when mentioning this)'})},[O]),j=f.useCallback(()=>{i($=>!$)},[]);f.useEffect(()=>{k&&M&&L()},[k,M,L]);const F=f.useMemo(()=>Phe(h,n),[h,n]),U=F?.display_name??F?.name??C,V=f.useMemo(()=>N2e(v,n),[v,n]);return o.jsx(H,{variant:"background",className:"rounded-lg border p-4",onClick:j,children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(H,{className:"text-super flex size-5 items-center justify-center rounded-lg",children:o.jsx(k2e,{serverName:U,iconUrl:V,size:"sm"})}),o.jsxs("div",{className:"min-w-0 flex-1 flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(D,{variant:"base",className:"font-medium",children:U}),o.jsx(Kn,{size:20,className:`text-quiet shrink-0 transition-transform ${a?"rotate-90":""}`})]}),a&&o.jsx(H,{className:"mt-3 overflow-hidden rounded-lg border p-3",children:o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex cursor-pointer items-center",children:o.jsxs("div",{className:"flex-1",children:[o.jsx(D,{variant:"smallMono",className:"font-medium",children:b}),o.jsx(D,{variant:"tinyMono",color:"light",className:"mt-1",children:R})]})}),o.jsxs(H,{className:"mt-3 overflow-hidden",noBorder:!1,children:[o.jsx(ab,{title:o.jsx(pe,{defaultMessage:"Request",id:"p1P+hQq6tY"}),content:_,showTruncationMessage:!1}),w&&o.jsx(ab,{className:"mt-3",title:w.status==="success"?o.jsx(pe,{defaultMessage:"Response",id:"MgdnPiJHcj"}):o.jsx(pe,{defaultMessage:"Error",id:"KN7zKn8z4F"}),content:w.content,isError:w.status!=="success"})]})]})}),A&&o.jsxs("div",{className:"mt-5 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(he,{variant:"inverted",size:"small",disabled:l,text:s({defaultMessage:"Allow once",id:"O2tb5KUxpc"}),onClick:P}),o.jsx(he,{variant:"inverted",size:"small",disabled:l,text:s({defaultMessage:"Allow always",id:"F8zkKBCp6U"}),onClick:N})]}),o.jsx(Te,{size:"small",disabled:l,text:s({defaultMessage:"Reject",id:"VzIOKf1uNn"}),onClick:T})]})]})]})})});rAe.displayName="LocalMcpStep";const sAe=I.memo(({step:e,isFinished:t})=>{const{$t:n}=Z(),[r,s]=f.useState(!1),{isMobileStyle:a,isMobileUserAgent:i}=xe(),[l,c]=f.useState(!1),[u,d]=f.useState(""),[m,p]=f.useState(null),h=IVt(),g=e.content.tool_input_summary||n({defaultMessage:"This tool will perform an action",id:"m3EA/HeMzd"}),y=e.content,v=e.mcp_tool_output_content,x=y.request_user_approval?.uuid,b=h.isPending,_=b||t||!!m,w=y.logo_url||eAe(y.app||""),C=y.app||"",S=f.useCallback(()=>{p(null)},[]),E=f.useCallback(R=>{if(x){if(R==="MODIFY"){c(!0);return}p(R),h.mutate({uuid:x,allowToolCall:R},{onError:()=>{S()}})}},[x,h,S]),M=f.useCallback(()=>{!x||!u.trim()||(p("MODIFY"),h.mutate({uuid:x,allowToolCall:"MODIFY",userRevision:u},{onError:()=>{S()}}))},[x,u,h,S]),k=f.useCallback(()=>{c(!1),d(""),p(null)},[]),A=f.useCallback(()=>s(R=>!R),[]);return o.jsxs(H,{className:"p-sm group-hover:bg-background grid grid-cols-[max-content_1fr] gap-x-2 gap-y-1 rounded-lg border pb-7 pl-4",variant:"raised",children:[o.jsxs("div",{className:"col-span-full grid cursor-pointer grid-cols-subgrid items-center",onClick:A,children:[w&&o.jsx("img",{src:w,alt:`${y.app} Logo`,className:"size-4 rounded object-cover"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(D,{variant:"smallBold",children:C}),o.jsx("div",{className:"ml-auto flex items-center gap-2",children:o.jsx(Te,{size:"small",pill:!0,icon:r?Dn:Kn})})]})]}),o.jsxs("div",{className:"col-start-2 col-end-3 flex min-w-0 flex-col",children:[o.jsx(D,{variant:"small",className:"text-pretty sm:pr-8",children:g}),o.jsx(cAe,{isExpanded:r,mcpContent:y,mcpOutputContent:v}),o.jsx(zs,{mode:"popLayout",initial:!1,transition:{duration:.2,ease:rn},children:l&&o.jsx(Qr,{children:o.jsx(Aa,{value:u,onChange:d,placeholder:n({defaultMessage:"What would you like to change?",id:"VkWAi878bt"}),isMobileStyle:a,isMobileUserAgent:i,disabled:b,minRows:3,className:"mt-4"})})}),o.jsx(H,{className:"mt-4 flex items-center gap-2",children:l?o.jsxs(o.Fragment,{children:[o.jsx(he,{variant:"inverted",size:"small",text:n({defaultMessage:"Continue",id:"acrOozm08x"}),onClick:M,disabled:_||!u.trim()}),o.jsx(he,{variant:"border",size:"small",text:n({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:k,disabled:b,extraCSS:"bg-transparent"})]}):o.jsxs(o.Fragment,{children:[o.jsx(he,{variant:"inverted",size:"small",text:n({defaultMessage:"Approve",id:"WCaf5CZSTt"}),onClick:()=>E("ALLOW"),disabled:_}),o.jsx(he,{variant:"common",size:"small",text:n({defaultMessage:"Refine",id:"EBZvikr2Av"}),onClick:()=>E("MODIFY"),disabled:_}),o.jsx(he,{variant:"border",size:"small",text:n({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:()=>E("DENY"),disabled:_,extraCSS:"ml-auto border-none bg-transparent mr-2"})]})})]})]})});sAe.displayName="McpToolApprovalStep";const tHt=e=>e?e.toLowerCase().replace(/[\s-]/g,"_").replace(/([a-z])([A-Z])/g,"$1_$2").replace(/^_+|_+$/g,"").replace(/_+/g,"_"):"",aAe=I.memo(({tool_logo_url:e,app:t,merge_extra_args:n,step_uuid:r,backend_uuid:s})=>{const{$t:a}=Z(),i=tHt(t||""),l=f.useCallback(async()=>{await cpe({uuid:r,success:!1,reason:"User skipped authentication"})},[r]),c=f.useMemo(()=>({name:"mcp_connector_auth",upsell_type:"CONNECT_TO_CONNECTOR",app_location:"UPSELL_APP_LOCATION_UNSPECIFIED",title:a({defaultMessage:"Connect your {appName} account",id:"YPjv1DRLLL"},{appName:i}),description:a({defaultMessage:"Connect your {appName} account to get started",id:"MtMLxu8Eaj"},{appName:i}),cta:"MERGE_AUTH_CONNECTOR",icon_reference:i,...e&&{icon_image:{url:e,alt:i}},button_color:"INVERTED",button_text:"Connect",cta_information:{merge_auth_token:n?.auth_info?.auth_token,merge_auth_callback_uuid:r},show_in_comet:!0,is_persistent:!0,backend_uuid:s,image_asset:"",image_asset_low_res:"",image_asset_dark:"",image_asset_low_res_dark:"",background_super:!1}),[i,s,e,a,n?.auth_info?.auth_token,r]);return o.jsx(l0,{position:"router_steps",upsellInformation:c,backendUuid:s,isLastResult:!0,hideOnAccept:!1,hideOnReject:!1,onReject:l})});aAe.displayName="UnauthenticatedMcpToolInput";const nHt={language:"json"},oAe=I.memo(e=>{const{tool_args:t,tool_name:n}=e,[r,s]=f.useState(!1),a=f.useCallback(()=>s(i=>!i),[]);return o.jsx(H,{className:"border-subtlest p-sm rounded-lg border",children:!!(t&&typeof t=="object"&&t!==null)&&o.jsxs(H,{className:"border-subtlest p-sm rounded-lg border",children:[o.jsxs(H,{className:"flex items-center justify-between",children:[o.jsx(D,{variant:"smallMono",children:n}),o.jsx(Te,{size:"small",icon:r?Dn:Kn,onClick:a})]}),o.jsx(zs,{mode:"popLayout",transition:{duration:.2,ease:rn},children:r&&o.jsx(Qr,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.15,ease:rn},children:o.jsxs(H,{className:"mt-sm rounded-lg",variant:"subtler",children:[o.jsx(D,{variant:"tiny",className:"p-md pb-0",children:o.jsx(pe,{defaultMessage:"Request",id:"p1P+hQq6tY"})}),o.jsx(sb,{className:"scrollbar-subtle my-0 max-h-[200px] overflow-y-auto text-xs",codeBlockProps:nHt,hideTools:!0,children:t&&typeof t=="object"?JSON.stringify(t):"No instructions"})]})})})]})})});oAe.displayName="AuthenticatedMcpToolInput";const iAe=I.memo(e=>{const{authenticated:t}=e;return t?o.jsx(oAe,{...e}):o.jsx(aAe,{...e})});iAe.displayName="McpToolInput";const rHt=(e,t)=>{const{value:n,loading:r}=It({flag:"comet-mcp-enabled",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},sHt=()=>{const{variation:e}=rHt(!1),{mcpStdioServers:t}=Hr();return Xa()&&e&&t!==void 0},lAe=I.memo(({step:e,isFinished:t})=>{const{lastResult:n}=Vt(),{submitQuery:r}=Hs(),s=e.content,a=e.mcp_tool_output_content,[i,l]=f.useState(!1),c=f.useMemo(()=>!!a?.should_rerun_query,[a]),u=f.useCallback(async()=>{n?.query_str&&(await lu({entryUUID:n.backend_uuid,reason:"mcp-tool-output-merge-api"}),r({rawQuery:n.query_str,existingEntryUUID:n.backend_uuid,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:n.frontend_context_uuid,promptSource:"user",querySource:"mcp-tool-input",attachments:[],modelPreferenceOverride:"pplx_pro",sourcesOverride:V2(n.sources?.sources)}))},[r,n]);f.useEffect(()=>{c&&u()},[u,c]);const d=f.useCallback(()=>l(x=>!x),[]),m=Hr(),p=sHt(),h=f.useMemo(()=>!p||s.mcp_server_type!=="MCP_SERVER_TYPE_LOCAL"||!s.app?null:m.mcpStdioServers?.find(x=>x.name===s.app),[p,s.mcp_server_type,s.app,m.mcpStdioServers]);if(h)return o.jsx(rAe,{server:h,step:e,isFinished:t});if(s.request_user_approval?.request_user_approval===!0)return o.jsx(sAe,{step:e,isFinished:t});if(s.authenticated===void 0||s.authenticated===null)return null;const g=s.authenticated===!0,y=s.logo_url||eAe(s.app||""),v=s.app||"";return g?o.jsxs(H,{className:"p-sm hover:bg-raised grid grid-cols-[max-content_1fr] gap-x-2 rounded-lg border pl-4",variant:i?"raised":void 0,children:[o.jsxs("div",{className:"col-span-full grid cursor-pointer grid-cols-subgrid items-center",onClick:d,children:[y&&o.jsx("img",{src:y,alt:`${s.app} Logo`,className:"size-4 rounded object-cover"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(D,{variant:"smallBold",children:v}),o.jsx("div",{className:"ml-auto flex items-center gap-2",children:o.jsx(Te,{size:"small",pill:!0,icon:i?Dn:Kn})})]})]}),o.jsx("div",{className:"col-start-2 col-end-3 min-w-0",children:o.jsx(cAe,{isExpanded:i,mcpContent:s,mcpOutputContent:a})})]}):o.jsx(iAe,{...s,step_uuid:e.uuid??"",backend_uuid:n?.backend_uuid??"",authenticated:g,tool_args:s.tool_args,tool_logo_url:y??void 0})}),cAe=({isExpanded:e,mcpContent:t,mcpOutputContent:n})=>o.jsx(zs,{mode:"popLayout",initial:!1,transition:{duration:.2,ease:rn},children:e&&o.jsx(Qr,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.15,ease:rn},children:o.jsx("div",{className:"mt-sm",children:o.jsx(dw,{maxHeight:400,autoScroll:!1,scrollContainerClassName:"scrollbar-subtle !pl-0",showTopGradient:!1,showBottomGradient:!1,children:o.jsxs("div",{className:"flex flex-col gap-2 pt-1",children:[o.jsx(D,{variant:"tinyMono",children:t.tool_name}),!!(t.tool_args&&typeof t.tool_args=="object"&&t.tool_args!==null)&&o.jsx(ab,{title:o.jsx(pe,{defaultMessage:"Request",id:"J+m4xH5bwC",description:"Request"}),content:t.tool_args,showTruncationMessage:!1}),n&&o.jsx(ab,{title:o.jsx(pe,{defaultMessage:"Response",id:"UC/2Eq4W+h",description:"Response"}),content:n.content})]})})})})});lAe.displayName="McpInputOutputStep";const uAe=I.memo(e=>{const{content:t,shouldRerunQuery:n=!1}=e,{lastResult:r}=Vt(),{submitQuery:s}=Hs(),a=f.useCallback(async()=>{r?.query_str&&(await lu({entryUUID:r.backend_uuid,reason:"mcp-tool-output-merge-api"}),s({rawQuery:r.query_str,existingEntryUUID:r.backend_uuid,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:r.frontend_context_uuid,promptSource:"user",querySource:"mcp-tool-input",attachments:[],modelPreferenceOverride:"pplx_pro"}))},[s,r]);return f.useEffect(()=>{n&&a()},[a,n]),o.jsx(H,{className:"border-subtlest p-sm rounded-lg border",children:o.jsx(ab,{title:o.jsx(pe,{defaultMessage:"Response",id:"MgdnPiJHcj"}),content:t})})});uAe.displayName="McpToolOutput";const dAe=I.memo(({step:e,action:t})=>{const{final:n}=e.content,r=!n;return o.jsx(he,{text:t,icon:dm,isLoading:r,size:"tiny",pill:!0})});dAe.displayName="PdfStep";const foe=["start","end"],fAe=I.memo(({attachments:e,attachmentProcessingProgress:t})=>{const{$t:n}=Z(),s=e.filter(m=>em(m)).length+t.length,a=e.length+foe.length,i=Math.min(s/a*100,100),l=t.filter(m=>!m.success),c=f.useMemo(()=>!!t.filter(m=>m.file_url==="end").length,[t]),u=f.useCallback(m=>{const p=p3(m.file_url??"");let h;switch(m.error_code){case"token_limit_exceeded":h=n({defaultMessage:"{filename} exceeds the model's token limit.",id:"60iyTByOrX"},{filename:p});break;case"file_type_not_supported":h=n({defaultMessage:"{filename} is of an unsupported file type. It will not be included in the results.",id:"sB9AI6thAL"},{filename:p});break;case"no_data_received":h=n({defaultMessage:"{filename} has timed out.",id:"/wyRgEWdz7"},{filename:p});break;default:h=n({defaultMessage:"{filename} could not be read. It will not be included in the results.",id:"7w0MjjvHs3"},{filename:p});break}return h},[n]),d=f.useMemo(()=>{const m=l.map((h,g)=>o.jsx(t7,{icon:Dd,text:u(h)},g)),p=o.jsx(t7,{icon:Sr,text:n({defaultMessage:"Successfully read {numAttachments} attached files.",id:"5VxFwE1ux3"},{numAttachments:s-l.length-foe.length})});return[...m,...c?[p]:[]]},[l,n,s,c,u]);return o.jsx(c0,{className:"pt-md pb-xs px-xs !border-[#32B8C6]",children:o.jsx(dw,{maxHeight:250,autoScroll:!1,children:o.jsxs("div",{className:"pr-md gap-x-md flex w-full",children:[o.jsx(D,{className:"bg-super flex size-8 flex-none items-center justify-center rounded-md border-[0.75px] border-[#05FFFF]/20 shadow-[0px_1px_4px_0px_rgba(0,0,0,0.24)]",children:o.jsx(ce,{icon:bOe,size:"md",className:"text-inverse"})}),o.jsxs("div",{className:"gap-y-xs flex grow flex-col",children:[o.jsx(D,{variant:"smallBold",children:n({defaultMessage:"Reading {numAttachments} attached {numAttachments, plural, one {file} other {files}}",id:"BqiTCbmvgp"},{numAttachments:e.length})}),o.jsx("div",{className:"h-2 w-full rounded-[37px] bg-[#60584D]/[0.06]",children:o.jsx("div",{className:"h-2 rounded-[37px] bg-[#32B8C6] transition-all duration-300",style:{width:`${i}%`}})}),o.jsxs("div",{className:"pt-xs",children:[o.jsx(ip,{items:d,vertical:!0,truncate:!1}),!c&&o.jsx(yn,{variant:"super",active:!c,as:"span",className:"pt-xs",children:o.jsx(D,{variant:"small",color:"super",children:n({defaultMessage:"Reading...",id:"IvE1kfOWAz"})})})]})]})]})})})});fAe.displayName="PendingFilesStep";const t7=I.memo(({icon:e,text:t})=>o.jsxs("div",{className:"py-xs gap-x-sm flex",children:[o.jsx(D,{className:"flex items-center justify-center",children:o.jsx(ce,{icon:e,size:"sm"})}),o.jsx(D,{variant:"small",color:"light",children:t})]}));t7.displayName="PendingFilesItem";const mAe=I.memo(({user:e,onRemove:t})=>{const n=f.useCallback(()=>{t(e)},[t,e]);return o.jsxs("div",{className:"border-subtlest gap-two pr-three flex h-8 items-center justify-between rounded-lg border pl-1.5 font-sans shadow-sm",children:[o.jsxs("div",{className:"gap-xs px-xs flex min-w-0 flex-row text-left",children:[o.jsx(D,{variant:"small",as:"span",children:e.display_name}),o.jsx(D,{variant:"small",color:"light",className:"truncate",as:"span",children:e.email_address})]}),o.jsx(Te,{variant:"common",size:"tiny",onClick:n,icon:Rt,extraCSS:"rounded-md","aria-label":`Remove ${e.display_name}`})]})});mAe.displayName="UserPill";const pAe=I.memo(({goalId:e,foundUsers:t,names:n,sendStepResult:r})=>{const{$t:s}=Z(),[a,i]=f.useState([]),l=f.useRef(null);f.useEffect(()=>{l.current&&l.current.focus()},[]);const c=f.useCallback(y=>{const v=y.map(x=>({...x,selected:!0}));i(v)},[]),u=f.useCallback(async()=>{await r({goal_id:e,selected_users:a,submitted:!0},"User selected contacts and clicked continue",!1)},[e,a,r]),d=f.useCallback(y=>{ra.isEnterKeyWithoutShift(y.nativeEvent)&&a.length>0&&(y.preventDefault(),u())},[a.length,u]),m=f.useMemo(()=>({chooseContacts:s({defaultMessage:"Confirm or change contacts",id:"j4L7Bt/R+D"}),moreContacts:s({defaultMessage:"More contacts...",id:"XqmjEIgTyk"}),pickContacts:s({defaultMessage:"Pick contacts...",id:"dAWwl8XInO"}),continue:s({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),skip:s({defaultMessage:"Skip",id:"/4tOwTiCH6"})}),[s]),p=f.useMemo(()=>(t??[]).map(y=>({type:"default",text:y.display_name??"",description:y.email_address??"",active:a.some(v=>v.email_address===y.email_address),preserveRightElementSpace:!0,onClick:()=>{const v=a.some(x=>x.email_address===y.email_address);c(v?a.filter(x=>x.email_address!==y.email_address):[...a,y])}})),[t,a,c]);f.useEffect(()=>{if(t&&t.length>0&&a.length===0){const y=t.filter(v=>v.selected);if(y.length>0)c(y);else{const v=Math.min(n?.length||1,t.length);c(t.slice(0,v))}}},[t]);const h=f.useCallback(y=>{c(a.filter(v=>v.email_address!==y.email_address))},[a,c]),g=f.useCallback(async()=>{await r({goal_id:e,selected_users:t,submitted:!1},"User clicked skip",!1)},[t,e,r]);return o.jsxs(sn,{ref:l,className:"py-2 pt-4 outline-none",onKeyDown:d,tabIndex:0,children:[o.jsxs("div",{className:"gap-md flex flex-col px-4",children:[o.jsx(D,{variant:"smallBold",children:m.chooseContacts}),o.jsxs("div",{className:"gap-sm flex flex-wrap items-stretch",children:[a.map(y=>o.jsx(mAe,{user:y,onRemove:h},y.email_address)),a.length<(t?.length??0)&&o.jsx(Jt,{items:p,isMobileStyle:!1,placement:"bottom-start",children:o.jsx(he,{variant:"border",size:"small",icon:ar,"aria-label":a.length===0?m.moreContacts:m.pickContacts})})]})]}),o.jsxs("div",{className:"gap-sm mt-4 flex items-center px-4 py-2",children:[o.jsx(he,{size:"small",variant:"inverted",text:m.continue,disabled:a.length===0,onClick:u}),o.jsx(Te,{size:"small",text:m.skip,onClick:g})]})]})});pAe.displayName="PickContactsStep";const hAe=I.memo(({stepUUID:e,goalId:t,foundBookingOptions:n,isSubmitted:r})=>{const{$t:s}=Z(),[a,i]=f.useState(n?.[0]),[l,c]=f.useState(0),u=f.useRef(null),d=f.useRef([]),m=f.useMemo(()=>({title:s({defaultMessage:"Choose booking options",id:"5yyo9+Yhan"}),description:s({defaultMessage:"Select your preferred booking provider",id:"gnnwIHEPAG"}),continue:s({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),confirmed:s({defaultMessage:"Confirmed",id:"dX7+RvbH/9"}),skip:s({defaultMessage:"Skip",id:"/4tOwTiCH6"})}),[s]),p=f.useCallback(async()=>{await o1({stepUUID:e,result:{goal_id:t,selected_booking_options:a,submitted:!0},reason:"User selected booking and clicked continue"})},[e,t,a]),h=f.useCallback(async()=>{await o1({stepUUID:e,result:{goal_id:t,selected_booking_options:void 0,submitted:!1},reason:"User clicked skip"})},[t,e]),g=f.useCallback(x=>{i(x)},[]),y=f.useCallback(x=>{c(x)},[]),v=f.useCallback((x,b)=>{d.current[b]=x},[]);return f.useEffect(()=>{if(!n?.length||r)return;const x=_=>{const w=C=>{_.preventDefault(),c(S=>{const E=C==="down"?Math.min(S+1,n.length-1):Math.max(S-1,0);return d.current[E]?.focus(),E})};switch(_.key){case"ArrowDown":w("down");break;case"ArrowUp":w("up");break;case"Enter":case" ":_.preventDefault(),l>=0&&l<n.length&&i(n[l]);break}},b=u.current;if(b)return b.addEventListener("keydown",x),()=>b.removeEventListener("keydown",x)},[n,l,r]),o.jsxs(c0,{className:"pb-2 outline-none",title:m.title,description:m.description,descriptionClassName:"text-quiet",children:[o.jsx("div",{className:"gap-md mt-md flex flex-col px-4",children:o.jsx("div",{ref:u,className:"gap-xs flex flex-col",tabIndex:-1,role:"listbox","aria-label":"Booking options",children:(n??[]).map((x,b)=>{const _=a===x,w=B("group flex w-full items-center rounded-none border outline-none transition-[border-color,border-radius,box-shadow] duration-200 hover:transition-none",!r&&"cursor-pointer","border-t-subtlest border-x-transparent","last:border-b-subtlest [&:not(:last-child)]:border-b-transparent",_&&["!border-super/75 dark:bg-black bg-gradient-to-r from-super/25 to-super/25 !rounded-lg shadow-sm"],!_&&!r&&["hover:!border-subtlest hover:bg-subtler hover:rounded-lg","focus-visible:!border-subtlest focus-visible:bg-subtler focus-visible:rounded-lg"],!r&&'[&:is(:hover,:focus-visible,[data-selected="true"])+div:not(:hover):not(:focus-visible):not([data-selected="true"])]:border-t-transparent [&:is(:hover,:focus-visible,[data-selected="true"])+div:not(:hover):not(:focus-visible):not([data-selected="true"])]:transition-none');return o.jsx("div",{ref:C=>v(C,b),tabIndex:r?-1:0,role:"option","aria-selected":_,"data-selected":_,className:w,onClick:()=>!r&&g(x),onFocus:()=>!r&&y(b),children:o.jsxs("div",{className:"flex w-full items-center justify-between px-5 py-4",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[x?.together?.airline_logos?.[0]&&o.jsx("img",{src:x.together.airline_logos[0],alt:"airline logo",className:"-mt-two size-6 rounded object-contain"}),o.jsx("div",{className:"flex flex-col items-start gap-px",children:o.jsxs(D,{variant:"baseSemi",children:[x?.together?.book_with||"Flight",x?.together?.option_title?` (${x.together.option_title})`:""]})})]}),x?.together?.price&&o.jsxs(D,{variant:"baseSemi",className:"font-bold",children:["$",x.together.price]})]})},b)})})}),o.jsxs("div",{className:"gap-sm mt-sm flex items-center px-4 py-2",children:[o.jsx(he,{size:"small",variant:"inverted",text:r?m.confirmed:m.continue,icon:r?Sr:void 0,disabled:!a||r,onClick:p}),o.jsx(Te,{size:"small",text:m.skip,disabled:r,onClick:h})]})]})});hAe.displayName="PickFlightsBookingStep";const moe={weekday:"short",month:"short",day:"numeric",year:"numeric"},aHt={hour:"numeric",minute:"2-digit",hour12:!0},n7="en-US",poe=e=>{if(!e)return"00:00 AM";try{return new Date(e).toLocaleTimeString(n7,aHt).toUpperCase()}catch{return"00:00 AM"}},oHt=e=>{if(!e)return"";const t=Math.floor(e/60),n=e%60;return`${t}h ${n}m`},iHt=e=>{if(!e||e.length===0)return"Nonstop";const t=e.length;return`${t} Stop${t>1?"s":""}`},hoe=e=>{if(!e||e.length===0)return null;if(e.length===1){const t=e[0]?.duration||0,n=Math.floor(t/60),r=t%60;return`${n}h ${r}m ${e[0]?.id}`}return e.map(t=>t.id).join(", ")},lHt=(e,t,n)=>{if(!e)return"";const s=new Date(e).toLocaleDateString(n7,moe);if(n==="ROUND_TRIP"&&t){const l=new Date(t).toLocaleDateString(n7,moe);return`  ${s}  ${l}`}return`  ${s}`},gAe=I.memo(({flight:e,index:t,isSelected:n,isSubmitted:r,onSelect:s,onFocus:a,setRef:i})=>{const l=e.flights?.[0]?.departure_airport?.time,c=e.flights?.[e.flights.length-1]?.arrival_airport?.time,u=e.flights?.[0]?.departure_airport?.id||"XXX",d=e.flights?.[e.flights.length-1]?.arrival_airport?.id||"XXX",m=e.flights?.[0]?.airline,p=B("group flex w-full items-center rounded-none border outline-none transition-[border-color,border-radius,box-shadow] duration-200 hover:transition-none",!r&&"cursor-pointer","border-t-subtlest border-x-transparent","last:border-b-subtlest [&:not(:last-child)]:border-b-transparent",n&&["!border-super/75 dark:bg-black bg-gradient-to-r from-super/25 to-super/25 !rounded-lg shadow-sm"],!n&&!r&&["hover:!border-subtlest hover:bg-subtler hover:rounded-lg","focus-visible:!border-subtlest focus-visible:bg-subtler focus-visible:rounded-lg"],!r&&'[&:is(:hover,:focus-visible,[data-selected="true"])+div:not(:hover):not(:focus-visible):not([data-selected="true"])]:border-t-transparent [&:is(:hover,:focus-visible,[data-selected="true"])+div:not(:hover):not(:focus-visible):not([data-selected="true"])]:transition-none');return o.jsx("div",{ref:h=>i(h,t),tabIndex:r?-1:0,role:"option","aria-selected":n,"data-selected":n,className:p,onClick:()=>!r&&s(e),onFocus:()=>!r&&a(t),children:o.jsxs("div",{className:"grid w-full grid-cols-[auto_1fr_88px_88px_88px] items-start gap-6 px-5 py-4",children:[o.jsx("div",{className:"pt-two flex self-stretch",children:e.airline_logo&&o.jsx("img",{src:e.airline_logo,alt:"airline logo",className:"size-10 rounded object-contain"})}),o.jsxs("div",{className:"flex flex-col items-start gap-px",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(D,{variant:"baseSemi",children:poe(l)}),o.jsx("span",{className:"text-quieter px-1",children:""}),o.jsx(D,{variant:"baseSemi",children:poe(c)})]}),m&&o.jsx(D,{variant:"tinyMono",color:"light",children:m})]}),o.jsxs("div",{className:"flex flex-col items-start gap-px",children:[o.jsx(D,{variant:"baseSemi",children:oHt(e.total_duration)}),o.jsxs(D,{variant:"tinyMono",color:"light",children:[u,"",d]})]}),o.jsxs("div",{className:"flex flex-col items-start gap-px",children:[o.jsx(D,{variant:"baseSemi",children:iHt(e.layovers)}),hoe(e.layovers)&&o.jsx(D,{variant:"tinyMono",color:"light",children:hoe(e.layovers)})]}),o.jsxs("div",{className:"flex flex-col items-end justify-end gap-px",children:[e.price&&o.jsxs(D,{variant:"baseSemi",className:"font-bold",children:["$",e.price]}),o.jsx(D,{variant:"tinyMono",color:"light",children:e.type})]})]})},`flight-${t}`)});gAe.displayName="FlightCard";const yAe=I.memo(({stepUUID:e,goalId:t,foundFlights:n,isSubmitted:r,outboundDate:s,returnDate:a,flightType:i})=>{const{$t:l}=Z(),[c,u]=f.useState(n?.length>0?0:-1),[d,m]=f.useState(0),p=f.useRef(null),h=f.useRef([]),g=f.useMemo(()=>lHt(s,a,i),[s,a,i]),y=f.useMemo(()=>({title:l({defaultMessage:"Top departing flights",id:"tHwLRV4b68"})+g,description:l({defaultMessage:"Ranked by price and convenience. Prices include taxes and fees for one adult.",id:"cAxRMXuRMO"}),continue:l({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),confirmed:l({defaultMessage:"Confirmed",id:"dX7+RvbH/9"}),skip:l({defaultMessage:"Skip",id:"/4tOwTiCH6"})}),[l,g]),v=f.useCallback(async()=>{const C=c>=0&&n?n[c]:void 0;await o1({stepUUID:e,result:{goal_id:t,selected_flight:C,submitted:!0},reason:"User selected flight and clicked continue"})},[e,t,c,n]),x=f.useCallback(async()=>{await o1({stepUUID:e,result:{goal_id:t,selected_flight:void 0,submitted:!1},reason:"User clicked skip"})},[t,e]),b=f.useCallback(C=>{const S=n?.findIndex(E=>E===C)??-1;u(S)},[n]),_=f.useCallback(C=>{m(C)},[]),w=f.useCallback((C,S)=>{h.current[S]=C},[]);return f.useEffect(()=>{if(!n?.length||r)return;const C=E=>{const M=k=>{E.preventDefault(),m(A=>{const R=k==="down"?Math.min(A+1,n.length-1):Math.max(A-1,0);return h.current[R]?.focus(),R})};switch(E.key){case"ArrowDown":M("down");break;case"ArrowUp":M("up");break;case"Enter":case" ":E.preventDefault(),d>=0&&d<n.length&&u(d);break}},S=p.current;if(S)return S.addEventListener("keydown",C),()=>S.removeEventListener("keydown",C)},[n,d,r]),o.jsxs(c0,{className:"pb-2 outline-none",title:y.title,description:y.description,descriptionClassName:"text-quiet",children:[o.jsx("div",{className:"gap-md mt-md flex flex-col px-4",children:o.jsx("div",{ref:p,className:"gap-xs flex flex-col",tabIndex:-1,role:"listbox","aria-label":"Flight options",children:(n??[]).map((C,S)=>o.jsx(gAe,{flight:C,index:S,isSelected:c===S,isSubmitted:r,onSelect:b,onFocus:_,setRef:w},S))})}),o.jsxs("div",{className:"gap-sm mt-sm flex items-center px-4 py-2",children:[o.jsx(he,{size:"small",variant:"inverted",text:r?y.confirmed:y.continue,icon:r?Sr:void 0,disabled:c<0||r,onClick:v}),o.jsx(Te,{size:"small",text:y.skip,disabled:r,onClick:x})]})]})});yAe.displayName="PickFlightsSearchStep";const vAe=({onSkip:e,onConfirm:t,disabled:n=!1,isLoading:r=!1,result:s=null,buttonText:a,loadingText:i})=>{const{$t:l}=Z();return s!==null?o.jsx(H,{className:"bg-base border-t pt-4",children:o.jsx("div",{className:"text-quiet text-sm",children:s?.confirmed===!0?l({defaultMessage:"Task will be created",id:"+A0SHGFNa7"}):l({defaultMessage:"Task was skipped",id:"uRAWVsTn39"})})}):o.jsx(H,{className:"bg-base border-t pt-4",children:o.jsx("div",{className:"flex items-center justify-between gap-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(he,{size:"small",variant:"primary",text:r?i||l({defaultMessage:"Creating...",id:"mRL9Vh/e/Z"}):a||l({defaultMessage:"Create Task",id:"4+iiEILSrA"}),onClick:t,disabled:n||r}),o.jsx(Te,{size:"small",text:l({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:e,disabled:n||r})]})})})},goe="usd";function fS(e){return e!=null&&e!==Rd&&e!==Pd&&e!==DR&&e!==-1&&Math.abs(e)!==DR}function cHt(e,t){const n=t.target_price!=null,r=t.movement_percent!=null,s=t.target_price?.toString(),a={query:{prompt:e.prompt||"",searchModel:e.model_preference||le.DEFAULT},status:"ACTIVE",notificationSettings:$d,defaultTargetPriceValue:s};if(n)return{...a,trigger:{type:ct.PRICE_ALERT,alertType:Vr.TARGET_PRICE,price:t.target_price,currency:goe,symbol:t.ticker_symbol}};if(r){const i=t.movement_percent/100;return{...a,trigger:{type:ct.PRICE_ALERT,alertType:Vr.MOVEMENT_AMOUNT,percentageDecimalLowerBound:t.negative_direction?-i:0,percentageDecimalUpperBound:t.positive_direction?i:0,symbol:t.ticker_symbol}}}else return{...a,trigger:{type:ct.PRICE_ALERT,alertType:Vr.TARGET_PRICE,price:0,currency:goe,symbol:t.ticker_symbol}}}const uHt=({result:e})=>e?.confirmed===!0?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ka,{size:14,className:"text-super shrink-0",title:"Confirmed"}),o.jsx("span",{className:"text-super text-xs font-medium leading-none",children:o.jsx(pe,{defaultMessage:"Alert confirmed",id:"0wByyMUPxz"})})]}):e?.confirmed===!1?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Rt,{size:14,className:"text-negative shrink-0",title:"Skipped"}),o.jsx("span",{className:"text-negative text-xs font-medium leading-none",children:o.jsx(pe,{defaultMessage:"Alert skipped",id:"AYQONqG1U3"})})]}):null,xAe=I.memo(({sendStepResult:e,taskAction:t,priceAlertData:n,stepUUID:r,isFinished:s=!1})=>{const{$t:a}=Z(),{trackEvent:i}=Ne(),l="settings_create",[c,u]=f.useState(()=>cHt(t,n)),[d,m]=f.useState(null),[p,h]=f.useState(null),[g,y]=f.useState(null),v=f.useRef(!1),x="price_alert_operation";f.useEffect(()=>{(async()=>{if(!n.ticker_symbol||s){h(!0);return}try{await Td({symbol:n.ticker_symbol})===null?(h(!1),e({confirmed:!1,user_input:a({defaultMessage:'The stock symbol "{symbol}" could not be found. Please verify the ticker symbol is correct.',id:"yWihQJNDOI"},{symbol:n.ticker_symbol})},x,!1)):h(!0)}catch(M){ne.error("Failed to validate ticker",{ticker:n.ticker_symbol,error:M}),h(!1),e({confirmed:!1,user_input:a({defaultMessage:'Unable to validate the stock symbol "{symbol}" due to a network error. Please try again.',id:"C0nM7QfjoN"},{symbol:n.ticker_symbol})},x,!1)}})()},[n.ticker_symbol]),f.useEffect(()=>{t&&!s&&p===!0&&!v.current&&(i("price alert modal opened",{source:l}),v.current=!0)},[p]),f.useEffect(()=>{(async()=>{if(n.ticker_symbol&&p===!0&&c.trigger.type===ct.PRICE_ALERT)try{const M=await Cvt(n.ticker_symbol);u(k=>({...k,trigger:{...k.trigger,currency:M}}))}catch(M){ne.warn("Failed to fetch currency for ticker",{ticker:n.ticker_symbol,error:M})}})()},[n.ticker_symbol,p,c.trigger.type]);const b=f.useMemo(()=>a({defaultMessage:"Create Price Alert",id:"WY6/zFtq4x"}),[a]),_=f.useCallback(E=>{m(E),E.confirmed?(i("price alert modal action",{source:l,action:"created"}),e({confirmed:!0,task_action:E.task_action},x,!1)):(i("price alert modal action",{source:l,action:"deleted"}),e({confirmed:!1},x,!1))},[e,x,i,l]),w=f.useCallback(()=>{m({confirmed:!1}),i("price alert modal action",{source:l,action:"skipped"}),e({confirmed:!1},x,!1)},[i,l,e,x]),C=f.useCallback(()=>{const E=c.trigger;let M={task_name:`Price Alert: ${n.ticker_symbol}`,prompt:c.query?.prompt,model_preference:c.query?.searchModel||le.DEFAULT,schedule:void 0,expiry_date:void 0,event_entity:n.ticker_symbol};switch(E.alertType){case Vr.TARGET_PRICE:{M={...M,event_type:"STOCK_PRICE_TARGET",target_price:E.price,current_price:n.current_price};break}case Vr.MOVEMENT_AMOUNT:{const k=E.percentageDecimalUpperBound,A=E.percentageDecimalLowerBound;M={...M,event_type:"STOCK_PRICE_MOVEMENT",upper_bound:k&&k>0?k*100:void 0,lower_bound:A&&A<0?A*100:void 0};break}default:Gt(E)}_({confirmed:!0,task_action:M})},[c,_,n]),S=f.useMemo(()=>s?!0:vTe({isLoading:!1,currentConfiguration:c}),[c,s]);return!t||!n?null:s?o.jsx(Is,{icon:ka,iconClassName:"text-super",text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):p===null||p===!1?null:o.jsxs("div",{className:"bg-subtler border-subtlest transform rounded-xl border transition-transform duration-200",children:[o.jsxs("div",{className:"flex items-center justify-between rounded-t-lg px-4 py-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-subtle flex size-8 items-center justify-center rounded-lg",children:o.jsx(lle,{size:16,className:"text-quiet"})}),o.jsx("h3",{className:"text-foreground text-sm font-medium",children:b})]}),o.jsx(uHt,{result:d})]}),o.jsx("div",{className:"p-4",children:o.jsx(Kl,{children:o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(ET,{configuration:c,onConfigurationChange:u,errorMessage:g??void 0,onError:y}),g&&o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(Dd,{size:12,className:"text-caution"}),o.jsx(D,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:g})]}),o.jsx(vAe,{onSkip:w,onConfirm:C,disabled:S,result:d,buttonText:b})]})})})]})});xAe.displayName="PriceAlertOperationStep";const dHt=e=>{const[t,n]=f.useState([]),r=f.useRef(e);f.useEffect(()=>{r.current=e},[e]);const s=f.useCallback((l,c)=>{n(u=>{const d=[...u];return d[l]=c,d})},[]),a=f.useMemo(()=>new Map,[]);f.useEffect(()=>{const l=t.reduce((c,u)=>c+u,0);l>0&&r.current?.(l)},[t]);const i=f.useCallback(l=>(a.has(l)||a.set(l,c=>{s(l,c)}),a.get(l)),[a,s]);return f.useMemo(()=>({groupCounts:t,handleGroupCountChange:s,getGroupHandler:i}),[t,s,i])},bAe=I.memo(({result:e,textClassName:t})=>{const n=f.useMemo(()=>e.start?new Date(e.start):null,[e.start]),r=f.useMemo(()=>e.end?new Date(e.end):null,[e.end]),s=e.is_all_day===!0,a=zNe(e.calendar_color?.background||"oklch(var(--super-color))"),i=GNe(a),l=f.useMemo(()=>r?new Date(r.getTime()-24*60*60*1e3):null,[r]),c=()=>n?s?(r?Math.round((r.getTime()-n.getTime())/864e5):1)<=1?o.jsx(_x,{startDate:n,endDate:n,isAllDay:!0,showDate:!0,includeYear:!1}):o.jsx(_x,{startDate:n,endDate:l,isAllDay:!0,showDate:!0,includeYear:!1}):o.jsx(_x,{startDate:n,endDate:r||n,isAllDay:!1,showDate:!0,includeYear:!1}):null;return o.jsx("div",{className:"hover:bg-subtler dark:hover:bg-subtle relative flex min-w-0 cursor-pointer gap-3 rounded-lg px-2 py-1.5",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("div",{className:"py-xs relative w-1",children:o.jsx("div",{className:B("inset-y-two absolute w-1 shrink-0 self-stretch rounded-full",{"brightness-[0.8]":i==="Fail"}),style:{backgroundColor:a}})}),o.jsxs("div",{className:"gap-two flex min-w-0 flex-1 flex-col",children:[o.jsx("div",{className:"flex min-w-0 items-center justify-between gap-2",children:e.title&&o.jsx(D,{variant:"smallBold",className:"shrink-0",as:"span",children:e.title})}),o.jsx("div",{className:"flex min-w-0 items-center gap-2",children:n&&o.jsx(D,{className:B("min-w-0 shrink text-ellipsis",t),variant:"tinyMono",color:"light",as:"span",children:c()})})]})]})})});bAe.displayName="CalendarResult";const fHt=e=>{const t=e.match(/^(.+?)\s*<(.+)>$/);return t?t[1]?.trim().replace(/^["']|["']$/g,"")||t[2]?.trim()||"":e.trim().replace(/^["']|["']$/g,"")},mHt=e=>e==="GCAL"?{src:$ae,alt:"Gmail"}:e==="OUTLOOK"?{src:xVt,alt:"Outlook"}:{src:$ae,alt:"Gmail"},pHt=e=>{const t=Date.now(),n=new Date(e),r=t-n.getTime();if(r<0)return"";const s=1e3*60,a=s*60,i=a*24,l=i*7,c=i*30,u=i*365;return r<s?"1m":r<a?`${Math.floor(r/s)}m`:r<i?`${Math.floor(r/a)}h`:r<l?`${Math.floor(r/i)}d`:r<c?`${Math.floor(r/l)}w`:r<u?`${Math.floor(r/c)}mo`:`${Math.floor(r/u)}y`},_Ae=I.memo(({result:e,textClassName:t,icon:n})=>{const r=mHt(e.connection_type),s=n?o.jsx(ce,{icon:n,size:"xs"}):o.jsx("img",{src:r.src,alt:r.alt,className:"size-[16px]"}),a=e.date?pHt(e.date):null;return o.jsxs("div",{className:"hover:bg-subtler dark:hover:bg-subtle relative flex min-w-0 cursor-pointer gap-3 rounded-lg px-2 py-1.5",children:[o.jsx("span",{className:"mt-two shrink-0",children:s}),o.jsxs("div",{className:"gap-two flex min-w-0 flex-1 flex-col",children:[o.jsx("div",{className:"flex min-w-0 items-center justify-between gap-2",children:e.sender&&o.jsx(D,{variant:"smallBold",className:"shrink-0",as:"span",children:fHt(e.sender)})}),o.jsx("div",{className:"flex min-w-0 items-center gap-2",children:e.subject&&o.jsx(D,{className:B("min-w-0 shrink text-ellipsis font-medium",t),variant:"small",as:"span",children:e.subject})}),o.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[e.snippet&&o.jsx(D,{variant:"tinyMono",className:"min-w-0 shrink truncate",color:"light",as:"span",children:e.snippet}),a&&o.jsx(D,{variant:"tinyMono",className:"shrink-0 text-right",color:"light",as:"span",children:a})]})]})]})});_Ae.displayName="EmailSearchResult";const wAe=I.memo(({result:e,textClassName:t,icon:n})=>{const r=n?o.jsx(ce,{icon:n,size:"xs"}):o.jsx(ce,{icon:eu,size:"xs"}),s=("display_name"in e?e.display_name:void 0)||("name"in e?e.name:void 0)||"",a=("email_address"in e?e.email_address:void 0)||("url"in e?e.url:void 0)||"";return o.jsxs("div",{className:"hover:bg-subtler dark:hover:bg-subtle relative flex min-w-0 cursor-pointer items-center gap-3 rounded-lg px-2 py-1.5",children:[o.jsx("span",{className:"shrink-0",children:r}),o.jsxs("span",{className:"gap-xs flex min-w-0 items-center",children:[s&&o.jsx(D,{className:B("min-w-0 shrink text-ellipsis",t),variant:"small",as:"span",children:s||(a?a.split("@")[0]:"")}),a&&o.jsx(D,{variant:"tinyMono",className:"mt-px min-w-0 shrink truncate",color:"light",as:"span",children:a})]})]})});wAe.displayName="UserInfoSearchResult";const CAe=I.memo(({result:e,textClassName:t,icon:n})=>{const r=m3(e.url),s=Qpe(e,r),a=n?o.jsx(ce,{icon:n,size:"xs"}):o.jsx(Oo.Icon,{url:e.url,isAttachment:e.is_attachment||!1,connectionType:r,isMemory:e.is_memory||!1,isConversationHistory:e.is_conversation_history||!1,isClientContext:e.is_client_context||!1,isInlineAttachment:!1}),i=e.url?o.jsx(Oo.Source,{url:e.url,source:s,isAttachment:e.is_attachment||!1,connectionType:r,isMemory:e.is_memory||!1,isConversationHistory:e.is_conversation_history||!1,snippet:e.snippet}):null,l=e.is_memory?e.snippet:e.name;return o.jsxs("div",{className:"hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5",children:[o.jsx("div",{className:"mt-two shrink-0",children:a}),o.jsxs("div",{className:"gap-sm flex min-w-0 flex-1 items-start",children:[o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[l&&o.jsx(D,{className:B("min-w-0 shrink truncate break-words",t),variant:"small",as:"span",children:l}),e.is_conversation_history&&o.jsx(D,{variant:"tinyMono",color:"light",className:"pt-two line-clamp-1",children:e.snippet})]}),!e.is_conversation_history&&o.jsx(D,{variant:"tinyMono",className:"overflow-wrap-anywhere mt-px break-words text-right lowercase",color:"light",as:"span",children:i})]})]})});CAe.displayName="WebSearchResult";const zW=()=>{const{openModal:e}=xt(),{trackEvent:t}=Ne();return f.useCallback(r=>{if(Zb(r))return;const s=Vye(r);e("memorySearchHistoryModal",s);const a=s.type,i=s.memoryKey,l=s.entryUuid;t("viewed memory search history modal",{type:a,...a==="memory"&&{memory_key:i},...a==="conversation_history"&&{entry_uuid:l}})},[e,t])},hHt=({heading:e,groupIndex:t})=>o.jsxs(o.Fragment,{children:[t>0&&o.jsx("div",{className:"border-subtlest border-b"}),o.jsx(H,{variant:"raised",className:"-mx-xs pl-sm pb-sm sticky top-0 z-30 flex items-center gap-3 pt-3",children:o.jsx(D,{variant:"tinyMono",children:e})})]}),Hu=I.memo(({onClick:e,stepDelay:t,isFinished:n,results:r,textClassName:s,groupBy:a,onCountChange:i,icon:l,resultType:c="web",maxHeight:u=250})=>{const{getGroupHandler:d}=dHt(i),m=Zn(),p=zW(),h=f.useCallback(v=>{(v.is_memory||v.is_conversation_history)&&p(v)},[p]),g=f.useCallback(v=>x=>{if("is_conversation_history"in v){if(v.is_conversation_history||v.is_memory){x.preventDefault(),h(v);return}if(v.is_attachment||v.is_memory)return x.preventDefault();u3(x)&&(x.preventDefault(),m.openTab({url:v.url,tabId:v.tab_id}))}if(c==="email"||c==="calendar"){if(e){x.preventDefault();const _="url"in v?v.url:"";e(_||"")}return}const b="url"in v?v.url:"";e?.(b||"")},[m,e,c,h]);if(!r||r.length===0)return null;let y=[];if(a){const v=r,x=new Map;v.forEach(w=>{const C=w.category;x.has(C)||x.set(C,[]),x.get(C).push(w)});const b={open_tab:{heading:"Opened tabs",icon:o.jsx(ce,{icon:QI})},closed_tab:{heading:"Recently closed tabs",icon:o.jsx(ce,{icon:YI})},history:{heading:"Browser history",icon:o.jsx(ce,{icon:_Oe})}},_=x.size>1;y=Array.from(x.entries()).map(([w,C])=>{const S=b[w];return{heading:_?S?.heading||w:void 0,icon:_?S?.icon:void 0,results:C}})}else r.length>0&&r[0]&&"results"in r[0]?y=r.map(b=>({heading:b.heading,results:b.results})):y=[{results:[...r]}];return o.jsx(c0,{children:o.jsx(dw,{maxHeight:u,autoScroll:!1,topGradientOffset:y.length>1?36:0,scrollContainerClassName:y.length===1?"pt-sm":void 0,children:o.jsx("div",{className:"flex flex-col gap-px",children:y.map((v,x)=>{const b=v.results.map((w,C)=>{const S="url"in w?w.url:"",E=()=>{const M={result:w,textClassName:typeof s=="function"?s(w):s,icon:l};switch(c){case"web":return o.jsx(CAe,{...M});case"userinfo":return o.jsx(wAe,{...M});case"email":return o.jsx(_Ae,{...M});case"calendar":return o.jsx(bAe,{...M});default:return null}};return o.jsx(Ge,{className:"-ml-xs block",href:S||"#",target:"_blank",rel:"noopener nofollow",onClick:g(w),children:E()},`${x}-${S||C}-${C}`)}),_=d(x);return o.jsxs("div",{className:"mb-sm last:mb-0",children:[v.heading&&y.length>1&&o.jsx(hHt,{heading:v.heading,groupIndex:x}),o.jsx(ip,{items:b,stepDelay:t,isFinished:n,vertical:!0,truncate:!1,onCountChange:_})]},x)})})})})});Hu.displayName="SearchResultsListStep";const yh=I.memo(({result:e,onClick:t,visualStyle:n,showName:r,className:s})=>{const a=Zn(),i=m3(e.url),l=Qpe(e,i),c=zW(),u=f.useCallback(()=>{(e.is_memory||e.is_conversation_history)&&c(e)},[c,e]),d=f.useCallback(m=>{if(e.is_conversation_history||e.is_memory){m.preventDefault(),u();return}if(e.is_attachment||e.is_memory)return m.preventDefault();u3(m)&&(m.preventDefault(),a.openTab({url:e.url,tabId:e.tab_id})),t?.(e.url)},[a,t,e.is_attachment,e.is_memory,e.tab_id,e.url,u,e.is_conversation_history]);return o.jsx(Ge,{className:B("inline-block max-w-full",s),href:e.url,target:"_blank",rel:"noopener nofollow",onClick:d,children:o.jsx(H,{variant:"subtler",bgHover:"subtle",className:"py-xs rounded-lg pl-1.5 pr-2.5",children:o.jsx(Oo,{variant:"tinyMono",className:B("!text-[0.7rem]",{"!line-through":n==="closedTab"}),url:e.url,name:r?e.name:void 0,isAttachment:e.is_attachment,connectionType:i,source:l,isMemory:e.is_memory,isConversationHistory:e.is_conversation_history})})})});yh.displayName="SearchResultBubble";const gHt=I.memo(({onClick:e,webResults:t,initialDisplayCount:n=12,stepDelay:r,isFinished:s=!1})=>{const a=f.useMemo(()=>t.map(i=>o.jsx(SAe,{result:i,onClick:e},i.url)),[e,t]);return o.jsx("div",{className:"gap-sm flex flex-wrap",children:o.jsx(ip,{items:a,initialDisplayCount:n,stepDelay:r,isFinished:s})})});gHt.displayName="SearchResultsStep";const SAe=I.memo(({result:e,onClick:t})=>{const n=Zn(),r=f.useMemo(()=>({onClick(s){u3(s)&&(s.preventDefault(),n.openTab({url:e.url,tabId:e.tab_id}))}}),[n,e.tab_id,e.url]);return o.jsx(Bg,{result:e,linkProps:r,children:o.jsx(yh,{result:e,onClick:t})},e.url)});SAe.displayName="CitationHoverCardFactory";const yHt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9-]*\.)+[A-Z]{2,}$/i;function EAe(e){return typeof e!="string"?!1:yHt.test(e)}const _I=({label:e,tags:t,onAdd:n,onDelete:r,isMobileUserAgent:s=!1,children:a,placeholder:i})=>o.jsxs("div",{className:"border-subtlest flex min-h-10 flex-1 items-center border-b p-0 px-2",children:[o.jsx(D,{variant:"small",color:"light",className:"w-10 min-w-[32px] select-none",children:e}),o.jsx("div",{className:"flex-1",children:o.jsx(RW,{tags:t,isMobileUserAgent:s,onAdd:n,onDelete:r,placeholder:i,validator:EAe,placeholderOnFocusOnly:!0})}),a]}),MAe=I.memo(({email:e,onChange:t,onSend:n})=>{const r=e?.cc??[],s=e?.bcc??[],a=e?.to??[],[i,l]=f.useState(r.length>0),[c,u]=f.useState(s.length>0),{isMobileUserAgent:d}=xe(),m=()=>{(!r||r.length===0)&&(!s||s.length===0)&&(l(!1),u(!1))},{$t:p}=Z(),h={to:p({defaultMessage:"To",id:"9j3hXO4Ojb"}),cc:p({defaultMessage:"Cc",id:"J1CYkLdqdy"}),bcc:p({defaultMessage:"Bcc",id:"qLl3P2UOlZ"}),addRecipient:p({defaultMessage:"Add recipient",id:"o2g2HQVmtC"}),subject:p({defaultMessage:"Subject",id:"LLtKhppiyE"}),writeMessage:p({defaultMessage:"Write your message...",id:"yoP6t+NY/q"})},g=f.useCallback((C,S)=>{t({...e,[C]:S})},[e,t]),y=f.useCallback(C=>({onAdd:M=>{const k=e?.[C]??[],A=M.filter(R=>EAe(R)&&!k.includes(R));A.length>0&&g(C,[...k,...A])},onDelete:M=>{const k=e?.[C]??[];g(C,k.filter(A=>!M.includes(A)))}}),[e,g]),v=y("to"),x=y("cc"),b=y("bcc"),_=f.useCallback(C=>g("subject",C),[g]),w=f.useCallback(C=>g("body",C.target.value),[g]);return o.jsxs("div",{className:"dark:bg-subtler flex w-full flex-col",children:[o.jsx(_I,{label:h.to,tags:a.map(C=>({label:C,value:C})),onAdd:v.onAdd,onDelete:v.onDelete,isMobileUserAgent:d,placeholder:h.addRecipient,children:o.jsxs("div",{className:"gap-two ml-2 flex",children:[!i&&o.jsx("button",{type:"button",className:"hover:bg-subtler text-quiet rounded-lg px-2 py-1 font-sans text-sm",onClick:()=>l(!0),children:h.cc}),!c&&o.jsx("button",{type:"button",className:"hover:bg-subtler text-quiet rounded-lg px-2 py-1 font-sans text-sm",onClick:()=>u(!0),children:h.bcc})]})}),i&&o.jsx(_I,{label:h.cc,tags:r.map(C=>({label:C,value:C})),onAdd:x.onAdd,onDelete:x.onDelete,isMobileUserAgent:d,placeholder:h.addRecipient}),c&&o.jsx(_I,{label:h.bcc,tags:s.map(C=>({label:C,value:C})),onAdd:b.onAdd,onDelete:b.onDelete,isMobileUserAgent:d,placeholder:h.addRecipient}),o.jsx(Pr,{isMobileUserAgent:d,name:"subject-input",type:"text",value:e?.subject,onChange:_,placeholder:h.subject,className:"border-subtlest text-foreground min-h-10 w-full !rounded-none border-0 border-b !bg-transparent !p-2 focus:outline-none focus:!ring-0","aria-label":h.subject}),o.jsx("textarea",{name:"body",value:e?.body,onChange:w,placeholder:h.writeMessage,rows:8,className:"text-foreground placeholder:text-quieter min-h-[180px] w-full resize-none border-0 bg-transparent p-2 font-sans text-sm shadow-none focus:outline-none focus:ring-0","aria-label":h.writeMessage,onFocus:m})]})});MAe.displayName="EmailCard";const kAe=I.memo(({emailAction:e,sendStepResult:t,isFinished:n})=>{const r="send-email-step",[s,a]=f.useState(n??!1),i=f.useMemo(()=>{if(e?.send)return e.send.email;if(e?.forward)return e.forward.email},[e]),[l,c]=f.useState(i),{$t:u}=Z(),d=f.useMemo(()=>!!(l?.to&&l.to.length===0),[l]),m=f.useMemo(()=>u({defaultMessage:"Send",id:"9WRlF4R2gm"}),[u]),[p,h]=f.useState(""),[g,y]=f.useState(!1),v=f.useCallback(()=>{a(!0),t({confirmed:!1},r,!1)},[t,r]),x=f.useCallback((E,M)=>{!E&&(!M||!M.trim())||(a(!0),t({confirmed:E,...M&&{user_input:M.trim()},...l&&{email:l}},r,!1),!E&&M&&(y(!1),h("")))},[t,r,l]),b=f.useCallback(()=>x(!0),[x]),_=f.useCallback(()=>x(!1,p),[x,p]),w=f.useCallback(E=>{ra.isEnterKeyWithoutShift(E)&&(E.preventDefault(),_())},[_]),C=f.useCallback(()=>{y(!1),h("")},[]),S=f.useCallback(E=>{E.preventDefault(),y(!0)},[]);return s?o.jsx(Is,{icon:ka,iconClassName:"text-super",text:u({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):o.jsxs(H,{variant:"raised",className:"rounded-lg border",children:[l&&o.jsx(H,{children:o.jsx(MAe,{email:l,onChange:c})}),g&&o.jsxs("form",{onSubmit:_,children:[o.jsx(H,{className:"px-md py-sm gap-4 border-t",children:o.jsx(Aa,{isMobileStyle:!1,isMobileUserAgent:!1,placeholder:u({defaultMessage:"What would you like to change about this email?",id:"lrZrku1OFD"}),value:p,onChange:h,onKeyDown:w,minRows:3,className:"mt-sm !pl-3",autoFocus:!0})}),o.jsxs("div",{className:"gap-sm p-md pt-sm flex items-center justify-between",children:[o.jsxs("div",{className:"gap-sm flex",children:[o.jsx(he,{size:"small",variant:"inverted",text:u({defaultMessage:"Continue",id:"acrOozm08x"}),type:"submit"}),o.jsx(Te,{variant:"negative",size:"small",text:u({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:C})]}),o.jsx(Te,{size:"small",text:u({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:v})]})]}),!g&&o.jsx("form",{onSubmit:b,children:o.jsxs("div",{className:"gap-sm p-md flex items-center justify-between border-t",children:[o.jsxs("div",{className:"gap-sm flex",children:[o.jsx(he,{size:"small",variant:"inverted",text:m,type:"submit",disabled:d}),o.jsx(he,{size:"small",variant:"common",text:u({defaultMessage:"Refine email",id:"xTUBb7cWyO"}),onClick:S})]}),o.jsx(Te,{size:"small",text:u({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:v})]})})]})});kAe.displayName="SendEmailStep";const vHt=({result:e})=>{const{$t:t}=Z();return e?.confirmed===!0?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ka,{size:14,className:"shrink-0 text-[#16a34a]",title:"Confirmed"}),o.jsx("span",{className:"text-xs font-medium leading-none text-[#16a34a] dark:text-[#4ade80]",children:t({defaultMessage:"Task confirmed",id:"oLLCmoruP6"})})]}):e?.confirmed===!1?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Rt,{size:14,className:"text-negative shrink-0",title:"Skipped"}),o.jsx("span",{className:"text-negative text-xs font-medium leading-none",children:t({defaultMessage:"Task skipped",id:"uMaJWuUUvD"})})]}):null},TAe=I.memo(({sendStepResult:e,taskAction:t,stepUUID:n,isFinished:r=!1})=>{const{$t:s}=Z(),{trackEvent:a}=Ne(),i="router",l=f.useMemo(()=>{const w=t.expiry_date?new Date(t.expiry_date):void 0;return{trigger:{type:ct.SCHEDULED,schedule:bHt(t.schedule),expiryDate:w},query:{prompt:t.prompt||"",searchModel:t.model_preference||le.DEFAULT},status:"ACTIVE",notificationSettings:$d}},[t]),[c,u]=f.useState(HD(l??V5())),[d,m]=f.useState(null),[p,h]=f.useState(null),g="task_operation";f.useEffect(()=>{t&&!r&&a("task modal opened",{source:i})},[t,r,a,i]),ne.error("TaskOperationStep rendered",{stepUUID:n,hasTaskAction:!!t,isFinished:r,taskAction:t,taskActionType:typeof t,taskActionKeys:t?Object.keys(t):[],source:i});const y=f.useMemo(()=>s({defaultMessage:"Create Task",id:"4+iiEILSrA"}),[s]),v=f.useCallback(w=>{m(w),w.confirmed?(a("task modal action",{source:i,action:"created"}),e({confirmed:!0,task_action:w.task_action},g,!1)):(a("task modal action",{source:i,action:"deleted"}),e({confirmed:!1},g,!1))},[e,g,a]),x=f.useCallback(()=>{v({confirmed:!1})},[v]),b=f.useCallback(()=>{const w={task_name:c.query?.prompt||"Untitled Task",prompt:c.query?.prompt,model_preference:c.query?.searchModel||le.DEFAULT,schedule:c.trigger.type===ct.SCHEDULED?xHt(c.trigger.schedule):void 0,expiry_date:t.expiry_date};v({confirmed:!0,task_action:w})},[c,v,t.expiry_date]),_=f.useCallback(w=>{u(w)},[]);return t?r?o.jsx(Is,{icon:ka,iconClassName:"text-super",text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):o.jsxs("div",{className:"bg-subtler border-subtlest transform overflow-hidden rounded-xl border transition-transform duration-200",children:[o.jsxs("div",{className:"bg-subtler border-subtler flex items-center justify-between border-b px-4 py-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-subtle flex size-8 items-center justify-center rounded-lg",children:o.jsx(Wm,{size:16,className:"text-quiet"})}),o.jsx("h3",{className:"text-foreground text-sm font-medium",children:y})]}),o.jsx(vHt,{result:d})]}),o.jsx("div",{className:"bg-base p-4",children:o.jsx(Kl,{children:o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(ET,{configuration:c,onConfigurationChange:_}),p&&o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(Dd,{size:12,className:"text-caution"}),o.jsx(D,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:p})]}),o.jsx(vAe,{onSkip:x,onConfirm:b,disabled:r,result:d})]})})})]}):(ne.error("TaskOperationStep received null/undefined taskAction - will not render",{stepUUID:n,taskAction:t,isFinished:r,source:i}),null)});TAe.displayName="TaskOperationStep";function xHt(e){const t=`${e.hour.toString().padStart(2,"0")}:${e.minute.toString().padStart(2,"0")}`;switch(e.kind){case"ONCE":return{one_time:{datetime:new Date(e.year,e.month,e.day,e.hour,e.minute).toISOString()}};case"DAILY":return{daily:{time:t}};case"WEEKLY":return{weekly:{time:t,day_of_week:(e.dayOfWeek+6)%7}};case"MONTHLY":return{monthly:{time:t,day_of_month:e.day}};case"YEARLY":return{yearly:{time:t,day_of_month:e.day,month_of_year:e.month+1}};case"WEEKDAYS":return{weekdays:{time:t}};default:return{daily:{time:t}}}}function bHt(e){if(!e)return js();if(e.one_time){const t=e.one_time.datetime;if(!t)return js();const n=new Date(t);return{kind:"ONCE",minute:n.getMinutes(),hour:n.getHours(),day:n.getDate(),month:n.getMonth(),year:n.getFullYear(),dayOfWeek:n.getDay()}}else if(e.daily){const t=e.daily.time;if(!t)return js();const[n="",r=""]=t.split(":"),s=parseInt(n,10),a=parseInt(r,10);if(isNaN(s)||isNaN(a))return js();const i=new Date;return{kind:"DAILY",minute:a,hour:s,day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),dayOfWeek:i.getDay()}}else if(e.weekly){const t=e.weekly.time,n=e.weekly.day_of_week;if(!t||n==null)return js();const[r="",s=""]=t.split(":"),a=parseInt(r,10),i=parseInt(s,10);if(isNaN(a)||isNaN(i))return js();const l=(n+1)%7,c=new Date;return{kind:"WEEKLY",minute:i,hour:a,day:c.getDate(),month:c.getMonth(),year:c.getFullYear(),dayOfWeek:l}}else if(e.monthly){const t=e.monthly.time,n=e.monthly.day_of_month;if(!t||n==null)return js();const[r="",s=""]=t.split(":"),a=parseInt(r,10),i=parseInt(s,10);if(isNaN(a)||isNaN(i))return js();const l=new Date;return{kind:"MONTHLY",minute:i,hour:a,day:n,month:l.getMonth(),year:l.getFullYear(),dayOfWeek:l.getDay()}}else if(e.yearly){const t=e.yearly.time,n=e.yearly.month_of_year,r=e.yearly.day_of_month;if(!t||n==null||r==null)return js();const[s="",a=""]=t.split(":"),i=parseInt(s,10),l=parseInt(a,10);if(isNaN(i)||isNaN(l))return js();const c=new Date;return{kind:"YEARLY",minute:l,hour:i,day:r,month:n-1,year:c.getFullYear(),dayOfWeek:c.getDay()}}else if(e.weekdays){const t=e.weekdays.time;if(!t)return js();const[n="",r=""]=t.split(":"),s=parseInt(n,10),a=parseInt(r,10);if(isNaN(s)||isNaN(a))return js();const i=new Date;return{kind:"WEEKDAYS",minute:a,hour:s,day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),dayOfWeek:i.getDay()}}return js()}const r7=I.memo(({question:e,sendStepResult:t,isFinished:n})=>{const r="user-clarification-step",[s,a]=f.useState(n??!1),[i,l]=f.useState(""),{$t:c}=Z(),u=f.useCallback(()=>{a(!0),t({confirmed:!1,user_input:i.length>0?i:"The user chose to confirm with the information provided"},r,!1)},[i,t]),d=f.useCallback(()=>{a(!0),t({confirmed:!1},r,!1)},[t]),m=f.useCallback(p=>{ra.isEnterKeyWithoutShift(p)&&(p.preventDefault(),u())},[u]);return s?o.jsx(Is,{icon:ka,iconClassName:"text-super",text:c({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):o.jsx(H,{variant:"raised",className:"py-sm rounded-lg border",children:o.jsxs("form",{onSubmit:u,children:[e&&o.jsxs("div",{className:"px-md pt-sm",children:[o.jsx(D,{variant:"small",children:e}),o.jsx("div",{className:"gap-sm mt-3 flex items-center",children:o.jsx("div",{className:"grow",children:o.jsx(Aa,{isMobileStyle:!1,isMobileUserAgent:!1,placeholder:c({defaultMessage:"Add details",id:"GTIJ9uAEMf"}),value:i,onChange:l,onKeyDown:m,minRows:3,className:"!pl-3",autoFocus:!0})})})]}),o.jsxs("div",{className:"gap-sm px-md py-sm mt-4 flex items-center",children:[o.jsx(he,{size:"small",variant:"inverted",text:c({defaultMessage:"Continue",id:"acrOozm08x"}),type:"submit"}),o.jsx(Te,{size:"small",text:c({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:d})]})]})})});r7.displayName="UserClarificationStep";const NAe=I.memo(({step:e,action:t})=>{const{final:n,file_name:r,sheet_count:s,row_count:a}=e.content,i=!n;let l=t;return r&&n&&(l=r,s!=null?(l+=` (${s} sheets`,a!=null&&(l+=`, ${a} rows`),l+=")"):a!=null&&(l+=` (${a} rows)`)),o.jsx(he,{text:t,icon:pb,isLoading:i,size:"tiny",pill:!0,toolTip:l,tooltipLayout:"top"})});NAe.displayName="XlsxStep";const _Ht=e=>e.toLowerCase().replace(/_/g," ").replace(/^\w/,t=>t.toUpperCase()),wHt={FINANCE:"FINANCE"},CHt={STOCK_PRICE_MOVEMENT:"STOCK_PRICE_MOVEMENT"},NM=e=>{const{searchMode:t,hasAnswer:n,result:r}=an(),{submitQuery:s}=Hs(),a=t===ie.STUDIO,{$t:i}=Z(),{step:l,onStepClick:c,isFinished:u,stepDelay:d,motionProps:m,isNested:p=!1,showAllNestedSteps:h=!0,isMissionControl:g=!1}=e,[y,v]=f.useState(void 0),x=`resuming-step:${e.step.uuid??""}`,[b,_]=f.useState(()=>{try{return Re.getItem(x)==="1"}catch{return!1}});f.useEffect(()=>{try{_(Re.getItem(x)==="1")}catch{_(!1)}},[x]);const w=f.useCallback(async(G,J,q=!1)=>{l.uuid&&await o1({contextUUID:r?.context_uuid,stepUUID:l.uuid,result:G,reason:J}).then(te=>{if(te&&!q){Re.setItem(x,"1"),_(!0);const re=r?{...r,status:"RESUMING"}:void 0;s({rawQuery:r?.query_str??"",existingEntryUUID:r?.backend_uuid,existingFrontendContextUUID:r?.context_uuid,frontendUUID:r?.frontend_uuid,promptSource:"user",resumingQuery:!0,resumeFromUuid:l.uuid,resumeFromPlaceholder:re,collection:null,newFrontendContextUUID:null})}})},[l.uuid,s,r,x]),C=f.useCallback(async()=>{await w({confirmed:!0},"thread-upsell-accepted",!0)},[w]),S=f.useCallback(async()=>{await w({confirmed:!1},"thread-upsell-dismissed",!0)},[w]),E=(G,J)=>{const q=Gh[G]?.message;return q?J?i(q,J):i(q):""},M=G=>{const J=[];let q=0;for(;q<G.length;){const te=G[q],re=G[q+1];te?.step_type==="GET_FREEBUSY_RESPONSE"?q+=1:te?.step_type==="GET_FREEBUSY"&&re?.step_type==="GET_FREEBUSY_RESPONSE"?(J.push({...te,get_free_busy_response_content:re.get_free_busy_response_content,originalEndIndex:q+1}),q+=2):(J.push({...te,originalEndIndex:q}),q+=1)}return J},k=G=>G.map((J,q)=>({...J,originalEndIndex:q})),A=TVt(),R=l.assets&&l.assets.length>0?o.jsx("div",{className:"gap-sm my-sm flex flex-row flex-wrap",children:l.assets.map(G=>o.jsx(qje,{asset:G},G.uuid))}):null,O=l.step_type,L=l.content.should_show_upsell??!1,P=l.content.upsell_information,N=o.jsx(l0,{position:"router_steps",upsellInformation:P,inFlight:!u,stepUUID:l.uuid,backendUuid:P?.backend_uuid,isLastResult:!0,onAccept:C,onReject:S}),j=(()=>{switch(O){case"SEARCH_WEB":return{title:E("search"),content:o.jsx(xa,{queries:l.content.queries.map(G=>G.query),stepDelay:a?2:void 0,isFinished:u})};case"SEARCH_RESULTS":{let J=function(te){return te.length===0?"reviewing_sources":te.every(re=>re.is_memory)?G.length===1?"reviewing_memory":"reviewing_memories":te.every(re=>re.is_conversation_history)?"reviewing_conversation_history":G.length===1?"reviewing_source":"reviewing_sources"};const G=l.content.web_results;return{title:E(J(G)),count:G.length>1?y:void 0,content:G.length===0?o.jsx(Is,{icon:ZH,text:i({defaultMessage:"No sources found",id:"yWSiuEkfbY"})}):LM(G)?o.jsx(yh,{result:G[0],showName:!0,onClick:c}):o.jsx(Hu,{onClick:c,results:G,stepDelay:a?2:void 0,isFinished:u,onCountChange:v})}}case"ENTROPY_REQUEST":return{content:o.jsx($Ne,{step:l,isFinished:u??!1,isMissionControl:g})};case"CODE":return{content:!R&&o.jsx(Gje,{action:E("working"),step:l})};case"PDF":return{content:!R&&o.jsx(dAe,{action:E("creating_pdf"),step:l})};case"DOCX":return{content:!R&&o.jsx(Kje,{action:E("creating_docx"),step:l})};case"XLSX":return{content:!R&&o.jsx(NAe,{action:E("creating_xlsx"),step:l})};case"CREATE_APP_RESULT":return{content:null};case"CREATE_CLIENT_APP":return{title:E("building_app"),content:o.jsx(D,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.caption})};case"CREATE_CHART":return{title:E("creating_chart"),content:o.jsx(D,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.caption})};case"GET_URL_CONTENT":{const G=l.content.pages;return{title:E(G.length>1?"getting_sources":"getting_source"),count:G.length>1?y:void 0,content:G.length===0?o.jsx(Is,{icon:EOe,text:i({defaultMessage:"No content found",id:"JlMgLJz0nd"})}):o.jsx("div",{className:"flex flex-wrap gap-2",children:G.map((J,q)=>o.jsx(yh,{result:{name:"",snippet:"",is_attachment:!1,url:J.url},showName:!1,onClick:c},J.url||q))})}}case"CLARIFYING_QUESTIONS_OUTPUT":return l.content.clarification?{content:o.jsx(lje,{step:l})}:null;case"THOUGHT":return{title:E("thinking"),content:o.jsx(H,{variant:"subtler",className:"py-xs inline-block rounded-lg px-2.5",children:o.jsx(D,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.thought})})};case"URL_NAVIGATE":return{title:E("navigate"),content:o.jsx(xa,{queries:l.content.urls})};case"BROWSER_OPEN_TAB_RESULTS":return{title:E("opening_tab"),content:o.jsx(yh,{result:{name:l.content.tab.title,url:l.content.tab.url,snippet:"",is_attachment:!1,is_client_context:!0,tab_id:l.content.tab.id},showName:!0,onClick:c})};case"BROWSER_CLOSE_TABS_RESULTS":{const G=l.content.tabs;return{title:E("closing_tabs"),content:G.length===0?o.jsx(xa,{queries:[A.failedClosedTabs],icon:ez}):o.jsx(Hu,{results:G.map(J=>({name:J.title,url:J.url,snippet:"",is_attachment:!1})),textClassName:J=>{const q="url"in J&&J.url,te="name"in J&&J.name;return q||te?"opacity-65 line-through":""}})}}case"READ_GMAIL":case"READ_EMAIL":{const G=l.content.queries?.length?l.content.queries:[A.allEmail];return{title:E("searching_gmail"),content:o.jsx(xa,{queries:G,icon:Ov})}}case"READ_GMAIL_RESPONSE":case"READ_EMAIL_RESPONSE":{const G=l.content;return{title:G?.authenticated?G?.count===0?A.emailsFound(0):E("reading_emails"):A.gmailNotAuthenticated,content:G.authenticated&&G.count>0&&G.results?o.jsx(Hu,{results:G.results,resultType:"email",onClick:c,stepDelay:d,isFinished:u,maxHeight:400}):null}}case"READ_CALENDAR":return{title:E("searching_calendar"),content:o.jsx(xa,{queries:l.content.queries??[],icon:Ov})};case"READ_CALENDAR_RESPONSE":return{title:l.content.authenticated?l.content.count===0?A.eventsFound(0):E("reading_events"):A.googleCalendarNotAuthenticated,content:l.content.authenticated&&(l.content.count??0)>0&&l.content.results?o.jsx(Hu,{results:l.content.results,resultType:"calendar",onClick:c,stepDelay:d,isFinished:u,maxHeight:400}):null};case"UPDATE_CALENDAR":return{title:E("scheduling"),isFinished:!0,content:l.content?.clarification?o.jsx(r7,{isFinished:b,question:l.content.clarification,sendStepResult:w}):l.content?.operations?o.jsx(oje,{isFinished:b,calendarOperations:l.content.operations,sendStepResult:w}):null};case"UPDATE_CALENDAR_RESPONSE":return{title:E("scheduling"),isFinished:!0,content:(()=>{const G=l.content?.operations;return!G||G.length===0?o.jsx(Is,{icon:ka,iconClassName:"text-super",text:i({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):o.jsx(ije,{operations:G})})()};case"CREATE_TASKS":{const J=l.content?.task_action;if(!J)return null;if(J.event_group===wHt.FINANCE&&J.event_type&&J.event_entity){const q={ticker_symbol:J.event_entity,target_price:J.target_price,current_price:J.current_price,...J.event_type===CHt.STOCK_PRICE_MOVEMENT&&{movement_percent:fS(J.upper_bound)?J.upper_bound:fS(J.lower_bound)?Math.abs(J.lower_bound):void 0,positive_direction:fS(J.upper_bound),negative_direction:fS(J.lower_bound)}};return{title:i({defaultMessage:"Setting up price alert",id:"JGiR4/dpaV"}),isFinished:!0,content:o.jsx(xAe,{taskAction:J,priceAlertData:q,stepUUID:l.uuid??"",isFinished:u||b,sendStepResult:w})}}return{title:E("scheduling"),isFinished:!0,content:o.jsx(TAe,{taskAction:J,stepUUID:l.uuid??"",isFinished:u||b,sendStepResult:w})}}case"CREATE_TASKS_RESPONSE":return{title:E("scheduled"),isFinished:!0,content:o.jsx(Is,{icon:ka,iconClassName:"text-super",text:"Done"})};case"SEND_GMAIL":case"SEND_EMAIL":return n?null:{title:E("emailing"),content:l.content?.clarification?o.jsx(r7,{isFinished:b,question:l.content.clarification,sendStepResult:w}):l.content?o.jsx(kAe,{isFinished:b,emailAction:l.content.action,sendStepResult:w}):null};case"SEND_GMAIL_RESPONSE":case"SEND_EMAIL_RESPONSE":return{title:E("emailing"),isFinished:!0,content:o.jsx(Yje,{status:l.content?.status})};case"EMAIL_CALENDAR_AGENT_RESPONSE":case"GMAIL_GCAL_AGENT_RESPONSE":return{title:l.content.authenticated?void 0:A.gmailNotAuthenticated,content:null};case"EMAIL_CALENDAR_AGENT":case"GMAIL_GCAL_AGENT":{const G=M(l.content.steps??[]),J=h?G:G.slice(-1);return{content:o.jsx(o.Fragment,{children:J.map(q=>{const te={step_type:q.step_type||"EMAIL_CALENDAR_AGENT",content:q.step_type==="GET_FREEBUSY"&&q.get_free_busy_response_content?{...q.get_free_busy_content,...q.get_free_busy_response_content}:q.get_free_busy_content??q.get_user_info_content??q.get_user_info_response_content??q.send_email_content??q.update_calendar_content??q.update_calendar_response_content??q.send_email_response_content??q.get_free_busy_response_content??q.read_calendar_content??q.read_calendar_response_content??q.read_email_content??q.read_email_response_content??{},uuid:q.uuid||"",assets:void 0},re=h?u||q.originalEndIndex<(l.content.steps?.length??0)-1:u;return o.jsx(NM,{step:te,isFinished:re,isNested:p,onStepClick:c,showAllNestedSteps:h},q.uuid)})}),skipWrapper:!0}}case"FLIGHTS_SEARCH":{const G=l.content;if(!G)return null;const J=G.found_flights,q=J&&J.length>0,te=G.submitted;return{title:E("searching_flights"),isFinished:q,content:q&&!te?o.jsx(yAe,{stepUUID:l.uuid??"",goalId:G.goal_id??"",foundFlights:G.found_flights,isSubmitted:te??!1,outboundDate:G.outbound_date,returnDate:G.return_date,flightType:G.flight_type}):null}}case"FLIGHTS_SEARCH_RESPONSE":{const{selected_flight:G,submitted:J}=l.content??{},q=E("looking_for_booking_options"),te=G?.flights?.map(me=>me.airline).filter(Boolean).join(", ")||"",re=G?.flights?.[0]?.departure_airport?.id||"",ae=G?.flights?.[G.flights.length-1]?.arrival_airport?.id||"",fe=G?.total_duration||0,de=Math.floor(fe/60),ve=fe%60,_e=de>0?`${de}h ${ve}min`:`${ve}min`;let Se=re;if(G?.flights&&G.flights.length>1)for(let me=1;me<G.flights.length;me++){const Ae=G.flights[me]?.departure_airport?.id;Ae&&Ae!==Se.split(" -> ").pop()&&(Se+=` -> ${Ae}`)}Se+=` -> ${ae}`;const be=`${te} (${Se}): ${_e}`;return J&&G?{title:q,isFinished:u||n,content:o.jsx(xa,{queries:[be],icon:SOe})}:null}case"FLIGHTS_BOOKING":{const G=l.content;if(!G)return null;const J=G.found_booking_options,q=J&&J.length>0,te=G.submitted;return{title:E("reviewing_booking_options"),isFinished:q,content:q?o.jsx(hAe,{stepUUID:l.uuid??"",goalId:G.goal_id??"",foundBookingOptions:G.found_booking_options,isSubmitted:te??!1}):null}}case"FLIGHTS_BOOKING_RESPONSE":{const{selected_booking_options:G,submitted:J}=l.content??{},q=E("redirecting_to_booking");return J&&G?{title:q,isFinished:u||n,content:(()=>{const te=re=>{const ae=[];return re.together?.book_with?ae.push(re.together.book_with):(re.departing?.book_with&&ae.push(`Departing: ${re.departing.book_with}`),re.returning?.book_with&&ae.push(`Returning: ${re.returning.book_with}`)),ae.join(" | ")||"Booking options"};return o.jsx(xa,{queries:[te(G)],icon:COe})})()}:null}case"FLIGHTS_AGENT":{const G=k(l.content.steps??[]),J=h?G:G.slice(-1);return{content:o.jsx(o.Fragment,{children:J.map(q=>{const te={step_type:q.step_type||"FLIGHTS_AGENT",content:q.browser_open_tab_content??q.browser_open_tab_results_content??q.flights_search_content??q.flights_booking_content??q.flights_search_response_content??q.flights_booking_response_content??{},uuid:q.uuid||"",assets:void 0},re=h?u||q.originalEndIndex<(l.content.steps?.length??0)-1:u;return o.jsx(NM,{step:te,isFinished:re,isNested:p,onStepClick:c,showAllNestedSteps:h},q.uuid)})}),skipWrapper:!0}}case"TERMINATE":return{title:E("conclusion"),content:l.content.reason?o.jsx(H,{variant:"subtler",className:"py-xs inline-block rounded-lg px-2.5",children:o.jsx(D,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.reason})}):null};case"CANVAS_AGENT":{const G=l.content.asset_types??[],J=G[G.length-1];return{title:`Creating ${J?{CODE_FILE:"a file",PDF_FILE:"a PDF",DOCX_FILE:"a document",XLSX_FILE:"a spreadsheet",APP:"an app",SLIDES:"slides"}[J]||J.toLowerCase():"an asset"}`,content:null,motionProps:{key:J||"canvas-agent-default"}}}case"GENERATE_IMAGE":return{title:E("generating_images"),content:o.jsx(D,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.prompt})};case"GENERATE_IMAGE_RESULTS":return{title:E("presenting_images"),content:!R&&o.jsx(Qje,{urls:l.content.image_results.map(G=>G.url)})};case"GENERATE_VIDEO":return{title:E("generating_images"),content:o.jsx(D,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.prompt})};case"GENERATE_VIDEO_RESULTS":return{title:E("presenting_images"),content:!R&&o.jsx(Zje,{urls:l.content.video_results.map(G=>G.url??""),onClick:c})};case"BROWSER_GROUP_TABS":return{title:E("grouping_tabs"),content:l.content.payloads?.length>0?o.jsx("div",{className:"gap-sm flex flex-row flex-wrap",children:l.content.payloads.map((G,J)=>o.jsx(e7,{color:G.color,title:G.title??""},J))}):null};case"BROWSER_GROUP_TABS_RESULTS":return{content:l.content.success?null:o.jsx(Is,{icon:ez,text:A.couldNotFinish})};case"BROWSER_UNGROUP":return{title:E("ungrouping_tabs"),content:l.content.payload?.groups_metadata&&l.content.payload.groups_metadata.length>0?(()=>{const G=l.content.payload.groups_metadata.map((J,q)=>({name:J.title||`Group ${q+1}`,url:"",source:J.title||`Group ${q+1}`}));return G.length===1?o.jsx(xa,{queries:l.content.payload.groups_metadata.map(J=>J.title||"Unnamed Group"),initialDisplayCount:3,icon:JH}):o.jsx(Hu,{results:G,icon:JH,textClassName:"opacity-65 line-through decoration-subtle"})})():null};case"BROWSER_SEARCH_TAB_GROUPS":return{title:E("searching_tab_groups"),content:o.jsx(xa,{queries:l.content.payload?.queries?.length?l.content.payload.queries:[A.allTabGroups],icon:Ov})};case"BROWSER_SEARCH_TAB_GROUPS_RESULT":return{title:E("reading"),content:l.content.results.length>0?o.jsx("div",{className:"gap-sm flex flex-row flex-wrap",children:l.content.results.map((G,J)=>o.jsx(e7,{color:G.color,title:G.title??""},J))}):null};case"GET_USER_INFO":{const G=l.content;if(!G||!G.names)return null;const J=G.found_users,q=J&&J.length>0,te=G.submitted;return{title:q&&!te?void 0:E("getting_user_info"),content:q&&!te?o.jsx(pAe,{goalId:G.goal_id??"",foundUsers:G.found_users,names:G.names,sendStepResult:w}):o.jsx(xa,{queries:G.names,icon:kx})}}case"GET_USER_INFO_RESPONSE":{const{submitted:G,selected_users:J}=l.content??{},q=J?.some(te=>te.selected===!0);return G&&J?{title:J?.some(te=>te.selected===!0)?E("selecting_contacts"):E("getting_contact_details"),content:J.length===0?o.jsx(xa,{queries:[E("no_contacts_found")],icon:wOe}):J.length===1?o.jsx(xa,{queries:J.map(te=>`${te.display_name||""} ${te.email_address?`(${te.email_address})`:""}`.trim()),icon:Rf}):o.jsx(Hu,{results:J.map(te=>({...te,url:te.email_address?`mailto:${te.email_address}`:void 0})),icon:Rf,resultType:"userinfo",textClassName:te=>{const re="email_address"in te?te.email_address:void 0,ae=J?.find(fe=>fe.email_address===re);return q&&ae?.selected===!1?"opacity-65 line-through decoration-subtle":""}})}:null}case"GET_FREEBUSY":{const G=l.content;return{title:E("getting_freebusy"),content:(()=>{const J=G.free_busy_response?.available_periods?.length??0;let q,te;return!G.authenticated&&u?(q=A.googleCalendarNotAuthenticated,te=ww):J===0&&u?(q=A.noAvailabilityFound,te=ww):J>0&&(q=A.availableTimesFound(J),te=tz),q?o.jsx(Is,{text:q,icon:te}):null})()}}case"GET_FREEBUSY_RESPONSE":return{title:E("getting_freebusy"),content:(()=>{const G=l.content.free_busy_response?.available_periods?.length??0;let J,q;return!l.content.authenticated&&u?(J=A.googleCalendarNotAuthenticated,q=ww):G===0&&u?(J=A.noAvailabilityFound,q=ww):G>0&&(J=A.availableTimesFound(G),q=tz),J?o.jsx(Is,{text:J,icon:q}):null})()};case"PENDING_FILES":return{content:o.jsx(fAe,{attachments:l.content.attachments,attachmentProcessingProgress:l.content.attachmentProcessingProgress})};case"SEARCH_BROWSER":{const G=l.content.queries?.filter(q=>q!=null&&q.trim()!=="")||[],J=G.length>0?G:l.content.browser_content_sources?.map(q=>q in Gh?E(q):_Ht(q))||[];return{title:E("searching_browser"),content:o.jsx(xa,{queries:J,isFinished:u})}}case"SEARCH_BROWSER_RESULTS":return{title:E("reading_browser"),count:y,content:(()=>{const{open_tabs:G,recently_closed_tabs:J,history:q}=l.content,te=(G?.length||0)+(J?.length||0)+(q?.length||0);if(te===0)return o.jsx(Is,{icon:ZH,text:i({defaultMessage:"No sources found",id:"yWSiuEkfbY"})});if(te===1){const ae=G?.[0]||J?.[0]||q?.[0];return o.jsx(yh,{result:{...ae},showName:!0,onClick:c})}const re=[];return G&&G.length>0&&re.push(...G.map(ae=>({...ae,category:"open_tab"}))),J&&J.length>0&&re.push(...J.map(ae=>({...ae,category:"closed_tab"}))),q&&q.length>0&&re.push(...q.map(ae=>({...ae,category:"history"}))),o.jsx(Hu,{onClick:c,results:re,groupBy:"category",stepDelay:a?2:void 0,isFinished:u,onCountChange:v})})()};case"MCP_TOOL_INPUT":{const G=l.content;if("authenticated"in G&&(G.authenticated===void 0||G.authenticated===null))return null;let J=i({id:"bTDpQ+Tk24",defaultMessage:"external service"});return G.mcp_server_type==="MCP_SERVER_TYPE_LOCAL"?J=i({id:"0asQ8snMnq",defaultMessage:"local MCP"}):G?.app&&(J=G.app),{title:E("MCP_TOOL",{appName:J}),content:o.jsx(lAe,{step:l,isFinished:u})}}case"MCP_TOOL_OUTPUT":{const G=l.content;return{title:E("MCP_TOOL"),content:o.jsx(uAe,{content:G.content||"",shouldRerunQuery:!!G.should_rerun_query})}}case"BLOCKING_CLARIFYING_QUESTIONS":{const G=l.content.clarifying_questions||[],J=l.content.clarifying_answers||[];return{title:"Additional Information Needed",content:o.jsx(INe,{questions:G,toolUuid:l.uuid,isFinished:u,answers:J})}}default:return null}})();if(!j)return g?o.jsx(Gf,{title:E("working"),showAnimation:!0,className:"mt-sm"}):null;if(j.skipWrapper)return L&&P?o.jsxs(o.Fragment,{children:[N,j.content]}):O==="GMAIL_GCAL_AGENT"&&l.content.steps?.length===0&&g?o.jsx(Gf,{title:E("working"),showAnimation:!0,className:"mt-sm"}):j.content;const{title:F,content:U,count:V,isFinished:$}=j,z=L&&P?!0:$??(u||b)??!1,Q={key:l.uuid,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"mt-1.5"},Y={...Q,...m,className:m?.className?`${Q.className} ${m.className}`:Q.className},{key:W,...X}=Y;return o.jsxs(ge.div,{...b?{}:X,children:[F&&o.jsx(Gf,{title:F,isFinished:z,className:"mb-two",count:V,showAnimation:b}),!F&&g&&!z&&O!=="ENTROPY_REQUEST"&&o.jsx(Gf,{title:E("working"),showAnimation:!0,className:"mb-two"}),L&&P?N:U,R]},W)};NM.displayName="StepRenderer";function SHt({step:e,isFinished:t=!1}){const{$t:n}=Z();switch(e.step_type){case"INITIAL_QUERY":return o.jsx(Gf,{title:n({id:"8ZN5O/Kt3k",defaultMessage:"Starting up"}),showAnimation:!0,className:"mt-sm"});default:return o.jsx(NM,{step:e,isFinished:t,isMissionControl:!0})}}function EHt(e){return e&&typeof e=="object"&&"entryUUID"in e&&"displayModel"in e}var MHt={};const kHt=({activeStreamingThreads:e,blockedThreads:t,entries:n,initiallyLoadedBlockedEntries:r,recentlyBlockedEntries:s,recentlyCompletedEntries:a,queuedThreadParams:i,selectedItemId:l,onItemSelect:c})=>{const u=Z(),{$t:d}=u,{cancelQueuedThread:m}=RT(),p=d({id:"I90sbWU03C",defaultMessage:"just now"}),[h,g]=f.useState(void 0),{taskTabs:y}=Hr(),v=Zn(),{trackEvent:x}=Ne(),b=f.useCallback(({thread:N,taskUUID:T,entryBackendUUID:j,threadUUID:F,threadActive:U,date:V})=>{const $=V?jy(u,V,{style:"narrow"}):p,z=y?.some(X=>X.taskUuid===T)??!1,Q="context_uuid"in N?N.context_uuid:N.contextUUID||"",Y="frontend_context_uuid"in N?N.frontend_context_uuid||"":"frontendContextUUID"in N&&N.frontendContextUUID||"",W=j||F;return o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-quiet text-xs",children:$}),o.jsxs("div",{children:[o.jsx(Te,{text:"Open full thread",icon:Tx,size:"small",onClick:X=>{X.stopPropagation(),window.open(`/search/${N.slug}`,"_blank"),x("mission control open full thread clicked",{contextUUID:Q,frontendContextUUID:Y})}}),T&&W&&o.jsx(Te,{text:"Switch to tab",icon:Tx,size:"small",variant:"super",disabled:!z&&!U,toolTip:!z&&!U?"Tab no longer available":void 0,onClick:async X=>{X.stopPropagation(),MHt.NEXT_PUBLIC_IS_SIDECAR_BUILD?await v.makeTaskVisible(T):await v.moveThreadToSidecar({activeTaskUuid:T,isMissionControl:!0,entryId:W,reason:"move-browser-step"}),x("mission control switch to tab clicked",{contextUUID:Q,frontendContextUUID:Y})}})]})]})},[u,p,y,v,x]),_=f.useCallback(({stepRenderer:N,thread:T,taskUUID:j,entryBackendUUID:F,date:U})=>{const V="contextUUID"in T?T.contextUUID:"context_uuid"in T?T.context_uuid:void 0;return o.jsxs("div",{className:"space-y-md",children:[N,o.jsx(b,{thread:T,threadUUID:V,entryBackendUUID:F,taskUUID:j,threadActive:!0,date:U})]})},[b]),{data:w=[],invalidateThreadsQuery:C}=yW("mission_control_active",void 0,void 0,!1,void 0),S=w.filter(N=>N.is_mission_control||N.is_personal_intent),E=f.useCallback(N=>{if(N)return!N.endsWith("Z")&&!N.includes("+")?N+"Z":N},[]),M=N=>{const T=Sv(N?.blocks||[]),j=T.length>0?T[T.length-1]:null;let F=!1;return j?.step_type==="ENTROPY_REQUEST"&&j.content.tasks.forEach(U=>{U.agent_messages.length>0&&(F=U.agent_messages[U.agent_messages.length-1]?.form!==void 0)}),F},k=f.useCallback(async(N,T,j)=>{if(N===j)return;const U=await a1({slugOrUUID:T,reason:"mission-control-completed-thread-entry"});if(!U?.entries||U.entries.length==0)return;const V=U.entries[U.entries.length-1];if(!V)return;const z=(V&&V.blocks?Sv(V.blocks):[]).filter(W=>W.step_type==="ENTROPY_REQUEST");if(z.length==0)return;const Q=z[z.length-1]?.content.tasks;if(!Q||Q.length==0)return;const Y=Q[Q.length-1]?.uuid;Y&&g({frontendContextUUID:j,taskUUID:Y})},[]),[A,R]=f.useState([]),O=f.useCallback(async N=>{if(N){R(T=>[...T,N]);try{await ahe({contextUUID:N,reason:"mark thread as viewed in mission control on expand"}),C()}catch(T){ne.error("Failed to mark thread as viewed (via selection click):",{contextUUID:N,error:T}),R(j=>j.filter(F=>F!==N))}}},[C]),L=f.useCallback((N,T,j=!1,F)=>{const U=Sv(N?.blocks||[]),V=U.length>0?U[U.length-1]:null,$=N?.status==="COMPLETED",z=EHt(T)?T.streamCreatedAt||(T.lastUpdated?T.lastUpdated:null):T.stream_created_at?T.stream_created_at:T.last_query_datetime,Q=T.title||N?.query_str||"New task";if(!N)return o.jsx(jv,{title:Q,state:j?"action-required":"in-progress",footer:o.jsx(_,{thread:T,date:z}),isSelected:l===F,onClick:()=>c?.(F)},F);const W=(N.blocks?Sv(N.blocks):[]).filter(X=>X.step_type==="ENTROPY_REQUEST").flatMap(X=>X.content?.tasks||[]).map(X=>X.uuid).filter(X=>X)[0];return o.jsx(O$,{idx:0,result:N,inFlight:!$,isLastResult:!0,isFirstResult:!0,submitQuery:kn,children:o.jsx(jW,{scrollToListItem:kn,children:o.jsx(jv,{title:Q,state:j?"action-required":"in-progress",entryUUID:N?.backend_uuid,invalidateThreadsQuery:C,footer:o.jsx(_,{thread:T,date:z,entryBackendUUID:N?.backend_uuid,taskUUID:W,stepRenderer:V&&N?o.jsx(SHt,{step:V,isFinished:$}):null}),isSelected:l===F,onClick:()=>c?.(F)})})},F)},[C,l,c,_]);return{allItems:f.useMemo(()=>{const N=[];return i.forEach((j,F)=>{const U=j.query||"New task",V=j.newFrontendContextUUID||`queued-${F}`;N.push({id:V,timestamp:void 0,frontendContextUUID:void 0,item:o.jsx(jv,{title:U,state:"queued",queuedId:V,onCancelQueued:m,isSelected:l===V,onClick:()=>c?.(V)},V),type:"queued"})}),e.forEach(j=>{if(j.frontendContextUUID){const F=Object.values(n).find(V=>V.uuid===j.entryUUID),U=F?M(F):!1;N.push({id:j.id,frontendContextUUID:j.frontendContextUUID,timestamp:E(j.streamCreatedAt||j.lastUpdated),item:L(F||null,j,U,j.frontendContextUUID||""),type:"active"})}}),t.forEach(j=>{if(e.find(V=>V.contextUUID===j.context_uuid))return;const U=Object.values(n).find(V=>V.context_uuid===j.context_uuid)||r.find(V=>V.context_uuid===j.context_uuid);!U||U.status!==qn.BLOCKED||N.push({id:j.context_uuid,frontendContextUUID:j.frontend_context_uuid,timestamp:E(j.stream_created_at||j.last_query_datetime),item:L(U,j,!0,j.frontend_context_uuid||""),type:"blocked"})}),s.forEach(j=>{const{message:F}=j,U=!t.find(z=>z.context_uuid===F.context_uuid),V=!e.find(z=>z.contextUUID===F.context_uuid),$=!S.find(z=>z.context_uuid===F.context_uuid);if(U&&V&&$&&F.status===qn.BLOCKED){const z={context_uuid:F.context_uuid,uuid:F.backend_uuid,title:F.query_str||"New task",last_query_datetime:F.updated_datetime||new Date().toISOString(),slug:F.thread_url_slug,display_model:F.display_model,stream_created_at:F.stream_created_at};N.push({id:F.context_uuid,frontendContextUUID:F.frontend_context_uuid,timestamp:E(z.stream_created_at||z.last_query_datetime),item:L(F,z,!0,F.frontend_context_uuid),type:"recently_blocked"})}}),S.forEach(j=>{if(j.status==="PENDING"||j.status==="BLOCKED")return;const F=A.filter(U=>j.context_uuid===U).length>0||!j.unread?"completed-read":"completed-unread";N.push({id:j.uuid,frontendContextUUID:j.frontend_context_uuid,timestamp:E(j.last_query_datetime),item:o.jsx(jv,{title:j.title||d({id:"2hlqlNseec",defaultMessage:"Completed task"}),state:F,firstAnswer:j.first_answer,footer:o.jsx(b,{thread:j,taskUUID:h?.frontendContextUUID===j.frontend_context_uuid?h?.taskUUID:void 0,threadUUID:j.uuid,date:E(j.last_query_datetime)}),isSelected:l===j.frontend_context_uuid,onClick:async()=>{c?.(j.frontend_context_uuid||""),await Promise.all([k(l,j.uuid,j.frontend_context_uuid),O(j.unread&&j.context_uuid?j.context_uuid:void 0)])}},j.uuid),type:F})}),a.forEach(j=>{const{message:F}=j,U=!S.find($=>$.context_uuid===F.context_uuid),V=!e.find($=>$.contextUUID===F.context_uuid);if(U&&V&&F.status===qn.COMPLETED){const $={context_uuid:F.context_uuid,uuid:F.backend_uuid,title:F.query_str||"New task",last_query_datetime:F.updated_datetime||new Date().toISOString(),slug:F.thread_url_slug,display_model:F.display_model,stream_created_at:F.stream_created_at};N.push({id:F.context_uuid,frontendContextUUID:$.frontend_context_uuid,timestamp:E($.stream_created_at||$.last_query_datetime),item:L(F,$,!1,F.frontend_context_uuid),type:"completed_unread"})}}),{items:N.sort((j,F)=>j.timestamp===null&&F.timestamp===null?0:j.timestamp===null?-1:F.timestamp===null?1:new Date(F.timestamp||"").getTime()-new Date(j.timestamp||"").getTime()).slice(0,tVt)}},[i,e,t,n,r,s,a,S,E,L,m,d,l,c,b,A,O,k,h]).items,markThreadAsViewed:O,invalidateThreadsQuery:C}},THt=()=>{const e=XD();return{reconnectInProgressStreams:f.useCallback(async(n,r)=>{if(!n||n.length===0)return;const s=n.filter(i=>i.status==="PENDING"),a=[];for(const i of s)try{const l=await a1({slugOrUUID:i.uuid,reason:"mission-control-get-thread-details"});if(l?.entries?.length&&l.entries.length>0){const c=l.entries[l.entries.length-1];c?.reconnectable&&(e(c.backend_uuid),a.push(c))}}catch(l){ne.debug(l)}r(a)},[e])}},NHt=5e3,jAe=({needsAttentionFilter:e=!1,setNeedsAttentionFilter:t,onNeedsAttentionCountChange:n})=>{const r=Zn(),[s,a]=f.useState(null),i=f.useCallback(async()=>{r.getTaskTabs()},[r]),l=f.useCallback(z=>{r.sendMissionControlStatus({num_threads_active:z.numThreadsActive,num_threads_blocked:z.numThreadsBlocked,num_threads_for_review:z.numThreadsForReview})},[r]),c=Rme(),{activeStreamingThreads:u,entries:d,refreshState:m,recentlyBlockedEntries:p,recentlyCompletedEntries:h,handleStreamCompletion:g,queuedThreadParams:y}=RT(),{data:v=[],isLoading:x}=yW(eVt,void 0,void 0,!1,void 0),b=f.useMemo(()=>v.filter(z=>z.is_mission_control||z.is_personal_intent),[v]),_=f.useCallback(z=>{a(Y=>Y===z?null:z);const Q=b.filter(Y=>(Y.status==="COMPLETED"||Y.status==="BLOCKED")&&Y.unread&&Y.frontend_context_uuid!==z).length>0;t(Y=>!Q&&Y?!1:Y)},[b,t]),w=f.useMemo(()=>b.filter(z=>z.status===qn.BLOCKED),[b]),C=f.useMemo(()=>b?.filter(z=>z.unread&&z.status!=="PENDING"&&z.status!=="BLOCKED"),[b]),{reconnectInProgressStreams:S}=THt(),E=XD(),M=f.useRef(!1),[k,A]=f.useState([]),R=f.useRef(null),{sendNotification:O}=UU({windowsAppOnly:!1}),{$t:L}=Z();f.useEffect(()=>NHe({callback:async Q=>{for(const Y of Q)if(!Y.cometIsMissionControl&&Y.isPersonalIntent){const W=await a1({slugOrUUID:Y.entryUUID,reason:"mission-control-get-thread-details"});if(W?.entries?.length&&W.entries.length>0){const X=W.entries[W.entries.length-1];X?.reconnectable&&(E(Y.entryUUID),c([X]))}}},reason:"stream thread creation events"}),[E,c]),b.length>0&&!M.current&&(M.current=!0,S(b,c).then(()=>{m()}),(async()=>(await Promise.all(w.map(async Y=>{try{const W=await a1({slugOrUUID:Y.uuid,reason:"mission-control-get-blocked-thread-details"});return W?.entries?.length&&W.entries.length>0?W?.entries[W.entries.length-1]:void 0}catch(W){ne.debug(`Failed to fetch blocked thread details for ${Y.uuid}:`,W);return}}))).filter(Y=>Y!==void 0))().then(Q=>A(Q))),f.useEffect(()=>{const z=()=>{document.hidden||i()};return document.addEventListener("visibilitychange",z),()=>{document.removeEventListener("visibilitychange",z)}},[i]),f.useEffect(()=>(R.current&&clearInterval(R.current),i(),R.current=setInterval(i,1e4),()=>{R.current&&(clearInterval(R.current),R.current=null)}),[i]),f.useEffect(()=>{x||l({numThreadsActive:u.length,numThreadsBlocked:w.length,numThreadsForReview:C.length})},[l,x,u.length,w.length,C.length]);const[P,N]=f.useState(!1);f.useEffect(()=>{const z=setTimeout(()=>{N(!0)},NHt);return()=>clearTimeout(z)},[]);const T=f.useMemo(()=>{const z=b.filter(Y=>Y.status===qn.PENDING);return P?!1:z.length>0&&u.length===0||u.filter(Y=>!Y.frontendContextUUID?.length).length>0},[b,u,P]),{allItems:j,markThreadAsViewed:F}=kHt({activeStreamingThreads:u,blockedThreads:w,entries:d,initiallyLoadedBlockedEntries:k,recentlyBlockedEntries:p,recentlyCompletedEntries:h,queuedThreadParams:y,selectedItemId:s,onItemSelect:_});f.useLayoutEffect(()=>rs.on("completed",({message:Q})=>{document.visibilityState!=="visible"&&O({title:"Your background task is completed",body:Q?.thread_title,onClick:async()=>{window.focus(),Q?.frontend_context_uuid&&(a(Q.frontend_context_uuid),F(Q.context_uuid))}}),Q&&(g(Q),Q.frontend_context_uuid===s&&F(Q.context_uuid))}),[g,O,F,s]);const U=f.useMemo(()=>j.filter(z=>z.type==="blocked"||z.type==="recently-blocked"||z.type==="completed-unread"),[j]),V=f.useMemo(()=>j.filter(z=>z.type==="blocked"||z.type==="recently-blocked"||z.type==="completed-unread"||s&&z.frontendContextUUID===s),[j,s]),$=e&&U.length>0?V:j;return f.useEffect(()=>{n?.(U.length)},[U.length,n]),o.jsx(Kl,{children:o.jsxs("div",{className:"px-md md:px-lg py-ml space-y-ml",children:[o.jsx(wNe,{placeholder:L({defaultMessage:"Ask anything",id:"AUouhaZgFv"}),suggestions:j.length===0?[]:_Ne}),(P||!x&&!T)&&o.jsx(SNe,{items:$}),!P&&(x||T)&&o.jsx("div",{className:"py-lg text-center",children:o.jsx(D,{variant:"small",color:"light",children:"Loading tasks..."})}),o.jsx("div",{className:"py-md flex w-full items-center justify-center",children:o.jsx(he,{variant:"border",size:"small",text:"View past threads in Library",extraCSS:"!bg-transparent",href:"/library"})})]})})};jAe.displayName="MissionControlMain";const AAe=I.memo(()=>{const[e,t]=f.useState(!1),[n,r]=f.useState(0);return o.jsx("div",{className:"py-lg min-h-0 overflow-auto",children:o.jsxs("div",{className:"m-auto max-w-screen-md",children:[o.jsx(bNe,{needsAttentionFilter:e,onNeedsAttentionFilterChange:t,needsAttentionCount:n}),o.jsx(jAe,{needsAttentionFilter:e,setNeedsAttentionFilter:t,onNeedsAttentionCountChange:r})]})})});AAe.displayName="MissionControlPage";const IAe=I.memo(()=>o.jsx(art,{children:o.jsx(JBt,{children:o.jsx(AAe,{})})}));IAe.displayName="MissionControlPageComponent";const jHt=(e,t,n)=>{const r=f.useRef(!1),{submitQuery:s}=Hs(),a=gt(),i=Xge(),{env:{isLocalhost:l}}=At();f.useLayoutEffect(()=>{l||(r.current=!1)},[t,l]),f.useLayoutEffect(()=>{const u=new URL(window.location.href).searchParams,d=u.get("copilot"),m=u.get("pro"),p=u.get("q"),h=u.get("utm_source"),g=u.get("in_page"),y=u.get("attachments"),v=u.get("tabs"),x=u.get("nav_suggestions"),b=u.get("sources"),_=u.get("pc"),w=u.get("pt");_&&pXe(_),w&&xXe(w);const C=u.get("qabi")??void 0,S=y?.replace(/[[\]]/g,"").split(","),E=u.get("newFrontendContextUUID"),M=[];if(v)try{const k=JSON.parse(v);if(Array.isArray(k))for(const A of k)M.push({type:"tab",id:A,url:""})}catch(k){ne.error("Failed to parse tabsParam:",k)}if(e&&p&&!E&&!r.current){const k=Array.isArray(p)?p[0]:p,A=u.get("source");if(k==="pending")return;s({rawQuery:k,copilotOverride:d==="true"||m==="true"||Uge(h??void 0),collection:null,newFrontendContextUUID:crypto.randomUUID(),frontendUUID:t,attachments:S,inPage:g??void 0,promptSource:A==="homepage_widget"?"homepage_widget":"user",querySource:A==="homepage_widget"?"homepage_widget":"default_search",utmSource:h??void 0,quickActionButtonId:C,isNavSuggestionsDisabled:x==="false",modelPreferenceOverride:le.DEFAULT,shouldRedirectToBackendUUID:!1,mentions:M,sourcesOverride:b?ymt(b?.split(",")):void 0,shouldUsePageStartTime:!0,onThreadSlugReceived:R=>{a.replace(`/search/${R}`,"Omni search query")}}),r.current=!0,BRe()}},[e,s,t,i,a,n])},RAe=I.memo(({children:e})=>{const{results:t}=Vt(),n=f.useMemo(()=>{const r=[];return t.map(s=>{s.widget_data?.map(a=>{INt(a)&&r.push(a)})}),r},[t]);return o.jsx(xEe,{entities:n,children:e})});RAe.displayName="ScrollToWidgetWrapper";const AHt=ye(async()=>{const{SidePDFViewer:e}=await K(async()=>{const{SidePDFViewer:t}=await import("./SidePDFViewer-B5YbfGnf.js");return{SidePDFViewer:t}},__vite__mapDeps([436,3,1,65,4,6,5]));return{default:e}}),IHt=Wt("FileViewerContext",{openFile:()=>{},closeViewer:()=>{},doViewerAction:()=>{},isViewerOpen:!1,setViewerDispatch:()=>{}}),PAe=I.memo(({children:e})=>{const[t,n]=f.useState(),[r,s]=f.useState(),a=f.useRef(void 0),i=f.useCallback(p=>{n(p)},[n]),l=f.useCallback(()=>{n(void 0),s(void 0),a.current=void 0},[n,s]),c=f.useRef([]),u=f.useCallback(p=>{a.current?a.current(p):c.current.push(p)},[]),d=f.useCallback(p=>{s(()=>p),a.current=p,c.current.length>0&&p&&(c.current.forEach(h=>p(h)),c.current=[])},[s]),m=f.useMemo(()=>({openFile:i,closeViewer:l,doViewerAction:u,isViewerOpen:!!r,setViewerDispatch:d}),[i,l,u,r,d]);return o.jsxs(IHt.Provider,{value:m,children:[e,t&&o.jsx(AHt,{file:t})]})});PAe.displayName="FileViewerStateProvider";const RHt=(e,t)=>{const{value:n,loading:r}=It({flag:"enable-comet-clarifying-commands",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},PHt=(e,t,n)=>{const r=V2e(),{variation:s}=RHt(!1),{addClarification:a}=C$(),{trackEventOnce:i}=Ne(),l=n?.length??0,c=n?.filter(g=>g.markdown_block).length??0,u=f.useMemo(()=>{if(!n)return!1;const g=n.find(x=>x.intended_usage==="pro_search_steps");if(!g?.plan_block?.steps)return!1;const y=g.plan_block.steps;return y[y.length-1]?.step_type==="ENTROPY_REQUEST"},[n]),d=f.useMemo(()=>u?s:r?Ur(t?.display_model)===ie.RESEARCH||Ur(t?.display_model)===ie.STUDIO:!1,[r,u,s,t?.display_model]),m=f.useMemo(()=>d&&!t?.reasoning_plan&&l>0&&c===0,[t?.reasoning_plan,l,c,d]),p=f.useMemo(()=>!m||!d||!n?null:{clarificationQuestion:"Add details or clarifications",isDefaultClarification:!0,clarificationCount:0},[m,d,n]),h=f.useCallback((g,y,v)=>{const b={uuid:crypto.randomUUID(),clarification_type:"FREEFORM_CLARIFICATION",freeform_clarification:{text:v.query,question:"Add details or clarifications",attachments:v.attachments??[]}};IHe({entryUUID:g,clarification:b,reason:e}),a({content:b.freeform_clarification?.text??v.query,UUID:b.uuid,entryUUID:g,question:p?.clarificationQuestion??void 0}),p&&i("clarifying query submitted",{entry_uuid:g,context_uuid:y,query:v.query,attachments:v.attachments})},[a,p,e,i]);return{shouldAcceptClarification:m,handleSubmitClarification:h,clarificationData:p}},OHt=({scrollbarSize:e})=>{const[t,n]=f.useState({height:void 0,width:void 0}),r=f.useRef(null);return f.useEffect(()=>{const s=()=>(r.current==null&&(r.current=document.createElement("div"),r.current.classList.add("scrollbar-thin"),r.current.style.width="99px",r.current.style.height="99px",r.current.style.overflow="scroll",r.current.style.position="absolute",r.current.style.top="-9999px",r.current.setAttribute("aria-hidden","true"),r.current.setAttribute("role","presentation")),r.current),a=()=>{const{offsetHeight:c,clientHeight:u,offsetWidth:d,clientWidth:m}=s(),p=c-u,h=d-m;n(g=>{const{height:y,width:v}=g;return y!==p||v!==h?{height:p,width:h}:g})},i=$s(a,100);window.addEventListener("resize",i),document.body.appendChild(s()),a();const l=s();return()=>{i.cancel(),window.removeEventListener("resize",i),document.body.removeChild(l)}},[e]),t},LHt=()=>{const[e,t]=f.useState(!1),[n,r]=f.useState(!1),{scrollContainerRef:s}=Oa(),{scrollToListItem:a}=OT(),{resultsLength:i}=Vt(),l=f.useRef(!1),c=f.useCallback(()=>{a(i-1)},[a,i]),u=f.useCallback(()=>{if(!s.current)return;const d=s.current,m=d.scrollHeight>d.clientHeight,p=LE(d),h=i>1;p?l.current=!0:l.current&&(r(!1),l.current=!1),t(m&&!p&&h)},[s,i]);return f.useEffect(()=>{const d=s.current;if(!d)return;const m=$s(u,100);u();const p=setTimeout(u,200);return d.addEventListener("scroll",m),window.addEventListener("resize",m),()=>{d.removeEventListener("scroll",m),window.removeEventListener("resize",m),m.cancel(),clearTimeout(p)}},[s,u]),f.useEffect(()=>{if(i<=1)return;u();const d=setTimeout(u,300);return r(!1),l.current=!1,()=>clearTimeout(d)},[i,u]),f.useMemo(()=>({showScrollButton:e,hasScrolled:n,setHasScrolled:r,scrollToLatestItem:c}),[n,c,e])},DHt=90,OAe=I.memo(({submitWillFork:e})=>{const{$t:t}=Z(),n=gt(),[r,s]=f.useState(!1),{resultsLength:a}=Vt(),{isMobileStyle:i}=xe(),{shouldShowLossAversionModal:l,handleOpenLossAversion:c}=Oy(),u=f.useCallback(()=>{n.push("/")},[n]),d=f.useCallback(h=>{h.preventDefault(),l?c({args:{callback:u,origin:Oe.NEW_THREAD_BUTTON}}):u()},[l,c,u]),m=f.useCallback(()=>{s(!0)},[]),p=f.useMemo(()=>a>=DHt&&!r&&!e,[a,r,e]);return o.jsx(Ke,{children:p&&o.jsxs(ge.div,{className:"bg-subtler gap-sm py-sm relative z-0 mx-4 flex items-center justify-between rounded-t-lg px-3 shadow-md",role:"alert",initial:{y:"110%"},animate:{y:0},exit:{y:"110%"},transition:{duration:.4,ease:[.16,1,.3,1]},children:[o.jsxs(D,{color:"light",className:"flex items-center gap-2",children:[o.jsx(ce,{icon:Dd,className:"text-caution shrink-0"}),o.jsx("span",{className:"font-sans text-xs",children:i?o.jsx(pe,{defaultMessage:"Thread too long. Start new one.",id:"wzstV6j0EL"}):o.jsx(pe,{defaultMessage:"Thread is getting long. Start a new one for better answers.",id:"X7d6hUix4z"})})]}),o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[o.jsx(Te,{variant:"primary",size:"tiny",onClick:d,text:t({defaultMessage:"Start new thread",id:"jsMJO4IUTY"})}),o.jsx(Te,{size:"tiny",onClick:m,pill:!0,icon:Rt})]})]},"thread-capacity-warning")})});OAe.displayName="ThreadCapacityWarning";const LAe=I.memo(({showStopButton:e,onStopButtonClick:t,clarificationData:n,upsellInformation:r,idx:s,inFlightEntryUUID:a,inFlight:i,isLastResult:l,...c})=>{const{currentOpenedModal:u}=xt(),{isMobileUserAgent:d}=xe(),m=!!n?.clarificationQuestion,[p,h]=f.useState(a);return f.useEffect(()=>{a&&h(a)},[a]),o.jsx("div",{className:"w-full",children:o.jsxs(Kl,{children:[o.jsx(l0,{position:"input",idx:s,upsellInformation:r,inFlight:i,isLastResult:l,backendUuid:p,animateExpand:!1}),o.jsx(D_,{hasShadow:!0,isHighlighted:m,showFileUpload:!0,autofocus:u===null&&!d,querySource:c.submitWillFork?"fork":"followup",showStopButton:e,onStopButtonClick:t,initialLayout:d?"compact":"expanded",minRows:1,className:"bg-base shadow-[0_1px_8px_2px_oklch(var(--foreground-color)/0.1),0_36px_16px_36px_oklch(var(--background-base-color))] dark:shadow-[0_4px_12px_rgba(0,0,0,0.12),0_32px_16px_36px_oklch(var(--dark-background-base-color))]",...c})]})})});LAe.displayName="ThreadInput";var yoe={};const DAe=I.memo(({ref:e})=>{const t="thread-floating-footer",{$t:n}=Z(),r=uo(),a=Nt()?.get("q"),{inApp:i}=Vo(),l=rt(),{inFlightEntry:{backend_uuid:c,blocks:u,context_uuid:d}={},inFlight:m,lastResult:p,resultsLength:h,firstResult:{frontend_context_uuid:g,collection_info:y,parent_info:v}={}}=Vt(),x=u?.length??0,b=Jd(),_=g,{activeMode:w}=cw(),{width:C}=OHt({scrollbarSize:"thin"}),S=!!yoe.NEXT_PUBLIC_IS_SIDECAR_BUILD,{mentionTypeaheadOptions:E,onTriggerTypeahead:M}=wk({reason:t,variants:["tab","shortcut"]}),{submitQuery:k}=Hs(),{specialCapabilities:A}=Zr(),{showScrollButton:R,hasScrolled:O,setHasScrolled:L,scrollToLatestItem:P}=LHt(),{isMobileUserAgent:N}=xe(),{shouldAcceptClarification:T,handleSubmitClarification:j,clarificationData:F}=PHt(t,p,u),U=f.useMemo(()=>{try{return m&&x>0}catch(te){throw ne.error("Unable to parse non-Pro search inFlightEntry.",te),te}},[m,x]),V=f.useMemo(()=>p?.upsell_information,[p?.upsell_information]),$=f.useCallback(te=>{const re=b,ae=lo();c&&T&&(j(c,d,te),G.setUserInput("")),!m&&k({fork:re,rawQuery:te.query,copilotOverride:l||A.unlimitedProSearch?void 0:!1,attachments:te.attachments,collection:y??null,newFrontendContextUUID:re?ae:null,existingFrontendContextUUID:re?void 0:_,promptSource:"user",querySource:"followup",timeFromFirstType:te.timeFromFirstType,shouldRedirectToBackendUUID:re,...te.side_by_side_metadata&&{side_by_side_metadata:te.side_by_side_metadata},mentions:te.mentions})},[b,c,T,m,k,l,y,_,v]),z=t1e({handleSubmitQuery:$,isHomepage:!1,contextUuid:_||"",disableSideBySide:!!v}),Q=f.useRef(!1),Y=f.useCallback(te=>{Q.current||(Q.current=!0,setTimeout(()=>Q.current=!1,tB),z(te))},[z]);f.useEffect(()=>{T&&(Q.current=!1)},[T]);const[W,X,G]=nB({onSubmit:Y}),J=f.useCallback(()=>{if(c){const te=r.getState().entries,ae=te[c]?.side_by_side_metadata?.sibling_uuid;ae?Object.values(te).forEach(fe=>{fe.side_by_side_metadata?.sibling_uuid===ae&&fe.status==="PENDING"&&fe.backend_uuid&&lu({entryUUID:fe.backend_uuid,reason:t})}):lu({entryUUID:c,reason:t})}},[c,r]);f.useEffect(()=>{a!==null&&a!==""&&G.setUserInput("")},[a]);const q=f.useCallback(()=>{P(),L(!0)},[P,L]);return i?null:o.jsx(H,{className:B("erp-sidecar:fixed erp-sidecar:w-full bottom-safeAreaInsetBottom p-md pointer-events-none absolute z-10"),style:S?void 0:{width:`calc(100% - ${C??0}px)`},ref:e,children:o.jsx("div",{className:"max-w-threadContentWidth mx-auto",children:o.jsx("div",{className:"pointer-events-auto",children:uVt(w)&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"pointer-events-none h-0",children:o.jsx(Ke,{initial:!1,children:R&&!O&&o.jsx(ge.div,{className:"flex justify-center",layout:"position",initial:{opacity:0,y:"0%"},animate:{opacity:1,y:"-100%"},exit:{opacity:0,y:"0%"},transition:{opacity:{duration:.2,ease:"easeInOut"},y:{duration:.2,ease:"easeInOut"}},children:o.jsx(he,{size:"small",variant:"border",icon:MOe,layout:"center",pill:!0,onClick:q,toolTip:n({defaultMessage:"Scroll to latest",id:"E6r0bc1I6z"}),extraCSS:"!bg-base shadow-subtle mb-2 pointer-events-auto"})},"scroll-button")})}),o.jsx(OAe,{submitWillFork:b}),o.jsx("div",{children:f.createElement(LAe,{...G,key:"ask-input",value:W,json:X,isFollowUp:!0,disableSubmission:m&&!T,placeholder:n(T?{defaultMessage:"Add details or clarifications...",id:"RkaMsxpXoz"}:{defaultMessage:"Ask a follow-up",id:"dxepjFd+cI"}),showSources:!0,useThreadSources:!0,submitWillFork:b,showStopButton:U,inFlightEntryUUID:c,contextUUID:d,onStopButtonClick:J,useLexical:!0,mentionTypeaheadOptions:E,onTriggerTypeahead:M,dropdownPlacement:yoe.NEXT_PUBLIC_IS_SIDECAR_BUILD?"top":void 0,clarificationData:F??void 0,showSearchModeSelector:!T,showModelSelector:!T&&!N,showFileUpload:!U||T,upsellInformation:V,idx:h-1,inFlight:m,isLastResult:!0})})]})})})})});DAe.displayName="ThreadFloatingFooter";const FHt=()=>{const e=f.useRef(!1),{results:t,lastResult:n}=Vt(),r=Ms(),s=rt(),{openVisitorLoginUpsell:a}=ur({enabled:!s}),i=Qb(n?.upsell_information);f.useEffect(()=>{e.current||r&&t.length>=1&&n&&n.upsell_information?.app_location===Ic.MODAL&&(i(),e.current=!0)},[r,s,a,t.length,n,i])},UHt=()=>{const e=rt(),{isMobileUserAgent:t}=xe(),{firstResult:{author_username:n}={}}=Vt(),{openInstallUpsell:r}=Age(),{shareGateImpressions:s,actions:a}=hn(),i=f.useRef(!1),l=Nt(),c=l?.get("installGate"),u=l?.get("q");f.useEffect(()=>{i.current||e||t&&(!n&&!u||Kh()||C7()||S7()||c==="true"&&(s>=lD||(r({origin:Oe.SHARED_THREAD_INSTALL_GATE,sheetModalVariant:"inset-centered-sheet"}),a.setShareGateImpressions(s+1),i.current=!0)))},[a,n,t,u,c,e,r,s])},BHt=()=>{const{device:{isMetaBrowser:e,isIOS:t,isAndroid:n}}=At();return f.useCallback(()=>{if(!e||typeof window>"u")return;const s=window.location.href;let a;t?a=s.replace(/^https?:\/\//,"x-safari-https://"):n&&(a=`intent://${s.replace(/^https?:\/\//,"")}#Intent;scheme=https;package=com.android.chrome;end`),a&&Hi(a,"Redirecting to native browser")},[e,t,n])},VHt=(e,t)=>e?"full-sheet-blurred":t==="delayed"?"bottom-sheet-gradient":"centered-sheet",$Ht=()=>{const{$t:e}=Z(),t=rt(),{isMobileUserAgent:n}=xe(),{firstResult:{author_username:r}={}}=Vt(),{openVisitorLoginUpsell:s}=ur({enabled:!0}),{shareGateImpressions:a,actions:i}=hn(),l=f.useRef(!1),c=Nt(),{scrollContainerRef:u}=Oa(),[d,m]=f.useState(!1),p=BHt(),h=c?.get("visitorGate"),g=c?.get("q");f.useEffect(()=>{const y=u.current;if(y)return y.addEventListener("scroll",()=>{m(LE(y))}),()=>{y.removeEventListener("scroll",()=>{m(LE(y))})}},[u]),f.useEffect(()=>{l.current||t||!r&&!g||C7()||S7()||a>=lD||h==="false"||h==="delayed"&&!d||!h&&!(!n&&!g)||(p(),s({origin:Oe.SHARED_THREAD_LOGIN_GATE,description:"",title:e({defaultMessage:"Instant answers at your fingertips",id:"NFjQpck2Ql"}),sheetModalVariant:VHt(n,h),overrideMobileVariant:!0}),i.setShareGateImpressions(a+1),l.current=!0)},[n,t,s,e,a,i,d,h,c,r,p,g])};function WHt({entropyBrowser:e,isSidecar:t,scrollContainerRef:n}){const r=jt(),s=f.useCallback(a=>{n.current&&n.current.scrollTo({top:n.current.scrollHeight,behavior:a})},[n]);f.useEffect(()=>{if(!(!e||!t))return e.subscribeQuickActionButtonFired(()=>{s("smooth")})},[e,t,s]),f.useEffect(()=>{t&&setTimeout(s,0,"instant")},[r,t,s])}var HHt={};const zHt=({reason:e})=>{const{DEFAULT_SOURCES:t}=Dy({reason:e}),{setSources:n,setIsCopilot:r,gpt4Limit:s}=Jn(),a=Ms(),{trackEvent:i}=Ne(),{lossAversionStatus:l,setLossAversionStatus:c,unsetLossAversion:u}=OU(),d=rt(),{results:m,lastResult:p,firstResult:{author_id:h,author_username:g,context_uuid:y,query_source:v,sources:{sources:x}={}}={}}=Vt(),b=hi(),_=Nt(),w=f.useRef(!1),{pinnedEntryIdx:C,setViewTitle:S}=cw(),{formatMessage:E}=Z(),{openVisitorLoginUpsell:M}=ur({enabled:!d}),{scrollContainerRef:k}=Oa(),A=Zn();return $Ht(),UHt(),FHt(),WHt({scrollContainerRef:k,isSidecar:!!HHt.NEXT_PUBLIC_IS_SIDECAR_BUILD,entropyBrowser:A}),f.useEffect(()=>{const R=un.isSourceListType(x)?x:[...t];n(R);const O=m.some(L=>un.isCopilotMode(L))&&!!s&&s>0;r(O)},[]),f.useEffect(()=>{if(!w.current&&a&&m.length>=1&&p&&un.isStatusCompleted(p)&&h&&g){const R=_?.get("utm_source")??void 0;i("thread viewed",{authorId:h,authorUsername:g,isThreadCreator:!!b,contextUUID:y,viewSource:R}),y&&ahe({contextUUID:y,reason:e}),v==="perplexity_tasks"&&i("task thread viewed",{contextUUID:y}),w.current=!0}},[i,a,h,g,y,p,m.length,_,b,d,M,E,e,v]),f.useEffect(()=>{l!=="cooldown"&&(!d&&!l&&b?c("allowed"):b||u())},[d,l,b,c,u]),f.useEffect(()=>{S(C===-1?null:Dk(m[C]?.query_str)??"")},[C,S,m]),Hd(()=>{l==="allowed"&&u()}),null},Psn=async({request:e,reason:t})=>{const n=await se.POST("/rest/media/search-videos-for-entry",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token,limit:e.limit,page:e.page},timeoutMs:Ut.MEDIUM}),{media_items:r=[]}=n.data??{};return{media_items:r}},Osn=async({request:e,reason:t})=>{const n=await se.POST("/rest/media/search-images-for-entry",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token,limit:e.limit,page:e.page},timeoutMs:Ut.HIGH}),{media_items:r=[]}=n.data??{};return{media_items:r}},Lsn=async({request:e,reason:t})=>{const n=await se.POST("/rest/media/search-images-and-videos",t,{body:{query:e.query,entry_uuid:e.entry_uuid,read_write_token:e.read_write_token},timeoutMs:Ut.HIGH}),{media_items:r=[]}=n.data??{};return{media_items:r}},GHt=async({request:e,reason:t})=>{const n=await se.POST("/rest/media/create-image-for-entry",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token,image_style:e.image_style,custom_instructions:e.custom_instructions},timeoutMs:Ut.EXTREMELY_HIGH}),{media_items:r=[]}=n.data??{};return{media_items:r}},qHt=async({request:e,reason:t})=>{const n=await se.POST("/rest/media/get-image-gen-subject",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token},timeoutMs:Ut.HIGH}),{subject:r=""}=n.data??{};return{subject:r}},KHt=(e,t,n)=>{if(e.backend_uuid!==t)return e;const r=e.blocks??[],s=r.findIndex(u=>u.image_mode_block);if(s===-1)return e;const a=r[s]?.image_mode_block;if(!a)return e;const i=[...r],l=[...n,...a.media_items],c={...a,media_items:l};return i[s]&&(i[s]={...i[s],image_mode_block:c}),{...e,blocks:i}},FAe=({reason:e})=>{const{decrementCreateLimit:t}=Jn(),{trackEvent:n}=Ne(),{$t:r}=Z(),s=hi(),a=Ho(),i=Pme(),{mutate:l}=vt({mutationFn:async u=>{try{return await qHt({request:u,reason:e})}catch(d){return ne.error("Failed to get image generation subject",d),{subject:""}}}}),c=f.useCallback(async({entryUUID:u,imageStyle:d,customInstructions:m=null,setIsLoadingGeneratedImage:p,onSuccessCallback:h,onFailureCallback:g})=>{n("generate image button clicked",{entryUUID:u,queryStr:m??""}),p(!0);try{const y=await GHt({request:{entry_uuid:u,read_write_token:s??null,image_style:d,custom_instructions:m},reason:e}),{media_items:v}=y;i(u,x=>KHt(x,u,v)),t(),h()}catch(y){y instanceof Error&&y.message==="Pro feature"?a({redirectUrl:"",pitchMessage:{title:"Generate DALL-E images with Pro",description:"Upgrade to Pro to generate DALL-E images"},origin:Oe.GENERATE_IMAGE}):y instanceof Error&&y.message==="Moderation"?g(r({defaultMessage:"Failed due to moderation. Please try a different query",id:"ChRyieNjo/"})):g(r({defaultMessage:"Failed to generate image",id:"mVJ5f5LkYT"}))}finally{p(!1)}},[n,s,i,t,a,r,e]);return f.useMemo(()=>({onGenerateImageClick:c,getImageGenSubjectMutation:l}),[l,c])},YHt=e=>{let t=e.parentElement;for(;t;){const{overflow:n,overflowY:r}=window.getComputedStyle(t);if(/(auto|scroll)/.test(n+r))return t;t=t.parentElement}return document.documentElement},QHt=({root:e})=>{const t=f.useRef(null),[n,r]=f.useState(!1),s=f.useCallback(a=>{t.current=a},[]);return f.useEffect(()=>{const a=t.current;if(!a)return;const i=e||YHt(a);if(!i)return;let l=null;const c=()=>{l===null&&(l=requestAnimationFrame(()=>{if(l=null,!a)return;const u=a.getBoundingClientRect(),d=i===document.documentElement?{top:0}:i.getBoundingClientRect();r(u.top-d.top<=0)}))};return c(),i.addEventListener("scroll",c,{passive:!0}),()=>{i.removeEventListener("scroll",c),l!==null&&cancelAnimationFrame(l)}},[e]),f.useMemo(()=>({ref:s,isSticky:n}),[n,s])},voe=150,xoe=500,UAe=I.memo(({entry:e,imageGenSubject:t,setImageGenSubject:n,onSubmit:r})=>{const s="generate-image-custom-input",{$t:a}=Z(),{isMobileStyle:i,isMobileUserAgent:l}=xe(),[c,u]=f.useState(!1),[d,m]=f.useState(""),[p,h]=f.useState(t),{getImageGenSubjectMutation:g}=FAe({reason:s}),y=d.length>0?d+`. The subject is:
`+p:p,v=d.length===0&&p.length===0||d.length>voe||p.length>xoe;f.useEffect(()=>{t===""&&(async()=>(u(!0),await g({entry_uuid:e.entryUUID,read_write_token:null},{onSuccess:_=>{n(_.subject),h(_.subject)},onSettled:()=>{u(!1)}})))()},[t,g,e.entryUUID,n]);const x=f.useCallback(()=>r(y),[y,r]);return c?o.jsx(li,{}):o.jsxs("div",{children:[o.jsx(Aa,{className:"mb-sm",isMobileUserAgent:l,isMobileStyle:i,onChange:m,value:d,label:a({defaultMessage:"Style",id:"7mL9QEUFav"}),placeholder:a({defaultMessage:"Use detailed brush strokes.",id:"FqRwHGXuKd"}),maxLength:voe}),o.jsx(Aa,{isMobileUserAgent:l,isMobileStyle:i,onChange:h,label:a({defaultMessage:"Subject",id:"LLtKhppiyE"}),value:p,maxLength:xoe}),o.jsx("div",{className:"mt-md flex",children:o.jsx(he,{text:a({defaultMessage:"Submit",id:"wSZR47Y5kj"}),disabled:v,variant:"primary",onClick:x})})]})});UAe.displayName="GenerateImageCustomInput";var vh;(function(e){e.PAINTING="PAINTING",e.PHOTOGRAPH="PHOTOGRAPH",e.ILLUSTRATION="ILLUSTRATION",e.DIAGRAM="DIAGRAM"})(vh||(vh={}));const Iv=I.memo(({icon:e,text:t,onClick:n})=>o.jsxs(H,{variant:"subtler",bgHover:"subtle",className:"flex aspect-video cursor-pointer flex-col items-center justify-center rounded-lg border",onClick:n,children:[o.jsx(ce,{icon:e,size:"lg",className:"mb-sm"}),o.jsx(D,{variant:"smallBold",children:t})]}));Iv.displayName="StyleChoice";const BAe=I.memo(({onStyleChoiceClick:e})=>{const t=f.useCallback(()=>e(vh.PAINTING),[e]),n=f.useCallback(()=>e(vh.PHOTOGRAPH),[e]),r=f.useCallback(()=>e(vh.ILLUSTRATION),[e]),s=f.useCallback(()=>e(vh.DIAGRAM),[e]);return o.jsxs(H,{className:"gap-sm grid grid-cols-2",children:[o.jsx(Iv,{icon:Gie,onClick:t,text:"Painting"}),o.jsx(Iv,{icon:D7,onClick:n,text:"Photograph"}),o.jsx(Iv,{icon:K7,onClick:r,text:"Illustration"}),o.jsx(Iv,{icon:kOe,onClick:s,text:"Diagram"})]})});BAe.displayName="GenerateImageTemplates";const VAe=I.memo(({icon:e,text:t,subtitle:n,onClick:r,hideOnClick:s=!0,disabled:a=!1,...i})=>{const[l,c]=f.useState(!0),u=f.useCallback(()=>{!a&&r&&r(),!a&&s&&c(!1)},[a,s,r]);return l?o.jsx(H,{bgHover:a?void 0:"subtler",className:B("mb-sm px-md py-sm w-full select-none rounded-md border border-dashed",{"cursor-pointer":!a,"opacity-75":a}),onClick:u,...i,children:o.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[o.jsxs(D,{variant:"smallBold",className:"gap-x-sm flex items-center",children:[o.jsx(ce,{icon:e,size:"md"}),o.jsxs("div",{children:[o.jsx("div",{children:t}),n&&o.jsx(D,{variant:"tiny",color:"light",children:n})]})]}),o.jsx(D,{color:"super",children:o.jsx(ce,{icon:ar})})]})}):null});VAe.displayName="ThreadEntryAccessoryButton";const $Ae=I.memo(({icon:e,message:t,variant:n="good",actionList:r,title:s,dismissable:a,onDismiss:i,size:l="regular",pointerVariant:c="none",testId:u,isMobileStyle:d,className:m})=>{const p=r&&r.length>0&&o.jsx("div",{className:"gap-x-sm flex",children:r?.map((y,v)=>y.visible?y.items&&y.items.length>0?o.jsx(Jt,{isMobileStyle:d,items:y.items,children:o.jsx(he,{size:Kt.small,text:y.text,variant:y.variant,icon:y.icon,onClick:y.onClick,debounce:y.debounce})},y.text??v):o.jsx("div",{className:"relative flex h-full items-center",children:o.jsx(he,{size:Kt.small,text:y.text,variant:y.variant,icon:y.icon,onClick:y.onClick,toolTip:y.tooltip,tooltipLayout:"bottom",disabled:y.disabled,isLoading:y.isLoading,debounce:y.debounce})},y.text??v):o.jsx(I.Fragment,{},v))}),h=f.useMemo(()=>B({"text-foreground":n==="good","text-caution":n==="warning"}),[n]),g=f.useMemo(()=>{if(n==="good")return"super";if(n==="warning")return"red";if(n==="info")return"textColor"},[n]);return t==null?null:o.jsxs("div",{"data-testid":u,children:[c!=="none"&&o.jsx("div",{className:B("mt-sm px-md flex",{"justify-start":c==="left","justify-end":c==="right"||c==="landing-page-right","pr-[75px]":c==="landing-page-right"}),children:o.jsx("div",{className:"relative h-4 w-6 overflow-hidden",children:o.jsx("div",{className:"bg-subtler size-4 origin-bottom-left rotate-45"})})}),o.jsxs(H,{variant:"subtler",className:B("gap-sm relative flex flex-col items-center justify-between rounded-lg md:flex-row",{"p-sm":l==="small","p-md":l==="regular"},m),children:[a&&o.jsx("div",{className:"right-xs top-xs absolute",children:o.jsx(Te,{"aria-label":"Dismiss",icon:Rt,size:"small",onClick:i})}),o.jsx("div",{children:o.jsxs("div",{className:"gap-x-md flex items-center",children:[o.jsx(H,{variant:g,className:"flex size-11 shrink-0 items-center justify-center rounded-full",children:o.jsx(D,{variant:l==="regular"?"baseSemi":"smallBold",color:n==="warning"?"white":"defaultInverted",children:e&&o.jsx(ce,{icon:e})})}),o.jsxs("div",{children:[o.jsx(D,{variant:s&&l==="regular"?"baseSemi":"smallBold",className:h,children:s||t}),s&&t&&o.jsx(D,{variant:l==="regular"?"base":"small",children:t})]})]})}),p]})]})});$Ae.displayName="Banner";const boe={page:"page-title",section:"section-title",subsection:"baseSemi"},XHt={page:"lg",section:"base",subsection:"md"},ZHt=({icon:e,variant:t})=>o.jsx(ce,{icon:e,size:XHt[t]}),WAe=I.memo(({title:e,icon:t,subtitle:n,actionList:r,search:s,variant:a="page",noBorder:i=!1,center:l="md",testId:c,isMobileStyle:u,leadingComponent:d,trailingComponent:m})=>{const p=r&&r.length>0&&o.jsx("div",{className:"gap-x-sm flex",children:r?.map((g,y)=>g.visible?g.items&&g.items.length>0?o.jsx(Jt,{isMobileStyle:u,items:g.items,children:o.jsx(he,{testId:c,size:g.size??Kt.small,text:g.text,variant:g.variant,icon:g.icon,onClick:g.onClick,debounce:g.debounce})},g.text??y):o.jsx("div",{className:"relative flex h-full items-center",children:o.jsx(Te,{testId:c,size:g.size??Kt.small,text:g.text,variant:g.variant,icon:g.icon,onClick:g.onClick,toolTip:g.tooltip,tooltipLayout:"bottom",disabled:g.disabled,debounce:g.debounce,isLoading:g.isLoading})},g.text??y):o.jsx(I.Fragment,{},y))}),h=o.jsxs("div",{children:[o.jsxs("div",{className:"gap-x-sm flex items-center",children:[t&&o.jsx(D,{variant:boe[a]??"section-title",children:o.jsx(ZHt,{icon:t,variant:a})}),o.jsx(D,{variant:boe[a]??"section-title",children:e})]}),n&&o.jsx(D,{variant:a==="page"?"base":"small",color:"light",className:"mt-sm",children:n})]});return o.jsx(H,{variant:"background",className:B({"sticky top-0 z-[5] flex items-center rounded-t-xl":a==="page","border-b":!i,"h-headerHeight":a==="page"&&!s,"pt-md md:pb-md":a==="page"&&s}),children:o.jsx(H,{className:B("w-full",{"px-sm md:px-lg mx-auto max-w-screen-md":a==="page"&&l==="md","max-w-threadWidth px-md md:px-lg mx-auto":a==="page"&&l==="lg"}),children:o.jsxs(H,{variant:"background",className:B("gap-md flex flex-col md:flex-row md:items-center md:justify-between",{"h-14":!s&&a==="section"}),children:[o.jsxs("div",{className:"md:hidden",children:[o.jsxs("div",{className:"gap-xs flex w-full shrink-0 items-center",children:[d,o.jsxs("div",{className:"gap-sm flex w-full justify-between",children:[h,p]})]}),s&&o.jsx("div",{className:"mt-md w-full max-w-md",children:s})]}),o.jsxs("div",{className:"gap-sm hidden grow items-center justify-between md:flex",children:[h,o.jsxs("div",{className:"gap-sm flex grow items-center justify-end",children:[p,s&&o.jsx("div",{className:"max-w-md grow",children:s})]}),m]})]})})})});WAe.displayName="Header";const HAe=I.memo(({userCreateLimit:e,onGenerateClick:t,isDisabled:n,entry:r,btnText:s,buttonComponent:a})=>{const{$t:i}=Z(),[l,c]=f.useState(!1),[u,d]=f.useState(!1),[m,p]=f.useState(""),[h,g]=f.useState(""),y=rt(),{hasAccessToProFeatures:v}=_t(),{isMobileStyle:x,isMobileUserAgent:b}=xe(),{openVisitorLoginUpsell:_}=ur({enabled:!y}),{trackEvent:w}=Ne(),C=Ho(),S=v&&e===0,E=v&&e<10;let M=dle;v?S&&(M=Mx):M=O7;const k=f.useCallback(T=>{d(!1),w("generate image style clicked",{entryUUID:r.entryUUID,style:T}),t({style:T,customInstructions:null,onFailure:j=>p(j)})},[r.entryUUID,t,w]),A=f.useCallback(T=>{d(!1),c(!1),t({style:"custom",customInstructions:T,onFailure:j=>p(j)}),w("click image gen custom prompt submit",{prompt:T})},[t,w]),R=f.useCallback(()=>{y?v?d(!0):C({redirectUrl:"",pitchMessage:{title:i({defaultMessage:"Generate images with {pro}",id:"lRrjmenIbD"},{pro:"Pro"}),description:i({defaultMessage:"Visualize your answers with images",id:"mmH7FzyH04"})},origin:Oe.GENERATE_IMAGE}):_({title:i({defaultMessage:"Sign in to generate images",id:"rH/ZsL5HtP"}),origin:Oe.GENERATE_IMAGE}),w("generate image button clicked",{entryUUID:r.entryUUID,queryStr:r.entryTitle})},[r.entryTitle,r.entryUUID,y,v,_,C,i,w]),O=f.useCallback(()=>c(T=>!T),[]),L=f.useMemo(()=>[{icon:ole,tooltipLayout:"right",tooltip:i({defaultMessage:"Custom prompt",id:"zp4jaBPFMA"}),pill:!0,visible:!0,variant:l?"primary":"common",onClick:O}],[i,l,O]),P=f.useMemo(()=>o.jsxs("div",{className:"space-y-md p-sm pt-0",children:[o.jsx(WAe,{title:i(l?{defaultMessage:"Custom prompt",id:"zp4jaBPFMA"}:{defaultMessage:"Choose a style",id:"AU4HcqqKpC"}),variant:"section",isMobileStyle:x,actionList:L}),!l&&o.jsx(BAe,{onStyleChoiceClick:k}),l&&o.jsx(UAe,{entry:r,imageGenSubject:h,setImageGenSubject:g,onSubmit:A})]}),[i,k,A,L,r,h,x,l]),N=f.useCallback(()=>{d(!1),c(!1)},[]);return m!==""?o.jsx($Ae,{isMobileStyle:x,message:m,icon:TOe}):o.jsx(Kk,{isMobileStyle:x,isOpen:u,onClose:N,content:P,children:o.jsx(bn,{isMobileUserAgent:b,tooltipText:i({defaultMessage:"{remaining} left today",id:"V9HtlcGCOC"},{remaining:e}),tooltipLayout:"bottom",showTooltip:E,asChild:!0,children:a?a({onClick:R,isRateLimitReached:S,isDisabled:n,buttonIcon:M,text:s}):o.jsx(VAe,{text:s,subtitle:S?i({defaultMessage:"Limit reached. Come back soon.",id:"LPlQBHfRcL"}):void 0,disabled:S||n,icon:M,hideOnClick:!1,onClick:R},"imageGenerate")})})});HAe.displayName="GenerateImageButton";const Yo=f.memo(({children:e,id:t})=>{const n={hidden:{opacity:0},visible:{opacity:1}};return o.jsx(ge.div,{className:"relative",variants:n,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.1,ease:"easeInOut"},children:e},t)});Yo.displayName="AnswerModeContainer";const JHt=({durationMinutes:e,enabled:t=!0,maxProgress:n=95})=>{const[r,s]=f.useState(2),[a,i]=f.useState(e*60),l=f.useRef(void 0),c=f.useRef(void 0),u=f.useCallback(()=>{if(!t)return;l.current&&clearTimeout(l.current);const d=Math.random()*1500+500;l.current=setTimeout(()=>{const m=Date.now(),p=(m-(c.current??m))/1e3,h=e*60,g=Math.min(p/h*100,n),y=1+Math.random()*2,v=Math.random()*4-2;let x=r+y+v;const b=Math.min(g+10,n);x=Math.min(x,b),x=Math.max(r,Math.min(x,n)),s(x);const _=x/p,C=(n-x)/_,S=Math.max(0,Math.min(C,h-p));i(Math.round(S)),x<n&&u()},d)},[t,e,n,r]);return f.useEffect(()=>{if(!t){s(2),i(e*60);return}return c.current=Date.now(),u(),()=>{l.current&&clearTimeout(l.current)}},[t,e,u]),f.useEffect(()=>{t&&(s(2),i(e*60),c.current=Date.now())},[t,e]),f.useMemo(()=>({percentCompleted:Math.round(r),percentRemaining:Math.round(100-r),estimatedSecondsRemaining:a}),[r,a])},zAe=({researchPlan:e,reasoningPlan:t,blocks:n,hasAnswer:r,isProReasoningMode:s,displayModel:a})=>{const i=t?.goals?.slice(1)??ue,l=a===le.O3_PRO,c=JHt({durationMinutes:5,enabled:l&&!r,maxProgress:95}),u=f.useMemo(()=>!e||r||s&&i.length>0,[e,r,s,i.length]),d=f.useMemo(()=>!t&&!s||!!t?.final,[t,s]),m=r&&d&&u,p=f.useMemo(()=>d?null:t?.goals[t.goals.length-1],[t,d]),h=f.useMemo(()=>{if(l&&!r)return c;let g=0,y=0;if(Array.isArray(n)){for(const x of n)if(x.intended_usage==="plan"&&x.plan_block){const b=x.plan_block;b.eta_seconds_remaining!==void 0&&(g=b.eta_seconds_remaining),b.pct_complete!==void 0&&(y=b.pct_complete)}}const v=y||2;return{estimatedSecondsRemaining:g,percentCompleted:v,percentRemaining:100-v}},[n,l,r,c]);return f.useMemo(()=>({reasoningGoals:i,isResearchPlanFinished:u,isReasoningPlanFinished:d,isAllPlansFinished:m,activeReasoningGoal:p,...h}),[i,u,d,m,p,h])},s7=I.memo(({onClick:e})=>{const[t,n]=f.useState(!1),r=f.useCallback(()=>{n(!0),e()},[e]),{searchMode:s}=an(),a=f.useMemo(()=>o.jsx(pe,{defaultMessage:"Skip remaining steps",id:"nWmXYwgk8a"}),[]);return o.jsx(D,{color:"light",variant:"small",className:"text-pretty",children:o.jsx("div",{className:"relative min-h-[20px] w-full",children:t?o.jsx(ge.div,{initial:"initial",animate:"animate",exit:"exit",variants:Wg,children:o.jsx(yn,{variant:"super",as:"div",className:"px-sm flex h-6 items-center",children:s===ie.STUDIO?o.jsx(pe,{defaultMessage:"Creating",id:"rQUSqe6JcA"}):o.jsx(pe,{defaultMessage:"Answer",id:"4hkQO/op5u"})})},"skipping-message"):o.jsx(ge.div,{initial:"initial",animate:"animate",exit:"exit",variants:Wg,children:o.jsx(he,{size:"tiny",onClick:r,variant:"common",icon:NOe,extraCSS:B("rounded-lg"),text:a})},"skip-button")})})});s7.displayName="FastAnswerButton";const GAe=I.memo(()=>{const{trackEvent:e}=Ne(),{$t:t}=Z(),{permission:n,requestPermission:r}=UU({windowsAppOnly:!1}),s=f.useCallback(async()=>{try{e("permission notifications requested",{origin:"pro_reasoning_status_updater"}),await r()?e("permission notifications granted",{origin:"pro_reasoning_status_updater"}):e("permission notifications not granted",{origin:"pro_reasoning_status_updater"})}catch(i){ne.error("Error requesting notification permission:",i)}},[e,r]),a=Br(n).with("default",()=>({variant:"primaryGhost",text:t({id:"ipGe+BIJx7",defaultMessage:"Notify me"}),icon:xb})).with("granted",()=>({variant:"border",text:t({id:"V52jNnY+6M",defaultMessage:"Enabled"}),icon:jOe,toolTip:t({id:"ktmy4MhbQv",defaultMessage:"We'll notify you when done."}),extraCSS:"!pointer-events-none border-none !bg-transparent"})).otherwise(()=>({variant:"border",icon:AOe,toolTip:t({id:"D0ozicKDgX",defaultMessage:"Notifications blocked. Please check browser settings."}),extraCSS:"!pointer-events-none border-none !bg-transparent"}));return o.jsx(he,{size:"tiny",onClick:s,...a,extraCSS:B("rounded-lg",a.extraCSS)})});GAe.displayName="NotificationButton";const qAe=I.memo(({estimatedSecsRemaining:e,placeholderMessage:t="Creating a plan",resultType:n="project"})=>{const{formatNumber:r,formatMessage:s}=Z();return o.jsx(D,{variant:"small",color:"light",className:"text-pretty",children:o.jsx("div",{className:"relative min-h-[20px] w-full",children:o.jsx(Ke,{mode:"sync",initial:!1,children:e?o.jsx(ge.div,{initial:"initial",animate:"animate",exit:"exit",variants:Wg,children:o.jsx(pe,{defaultMessage:"{time} left to gather sources and create your {resultType}.",id:"AhSqF1URDZ",values:{time:o.jsx(D,{inline:!0,variant:"smallBold",as:"span",children:Math.round(e/60)===1?s({defaultMessage:"A minute",id:"X4ic2xRHa2"}):r(Math.round(e/60),{style:"unit",unit:"minute",unitDisplay:"long"})}),resultType:s(n==="project"?{defaultMessage:"project",id:"RbFAl7UGmp"}:{defaultMessage:"report",id:"TmfXGUz23p"})}})},"time-remaining"):o.jsx(ge.div,{initial:"initial",animate:"animate",exit:"exit",variants:Wg,children:o.jsx(yn,{variant:"super",as:"span",children:t})},"creating-plan")})})})});qAe.displayName="TimeRemaining";const WT=I.memo(({estimatedSecsRemaining:e,percentCompleted:t,placeholderMessage:n,resultType:r,showAnimatePresence:s=!0,wrapperClassName:a="relative min-h-[20px] w-full"})=>{const i=!t||t<95?o.jsx(ge.div,{initial:"initial",animate:"animate",exit:"exit",variants:Wg,children:o.jsx(qAe,{estimatedSecsRemaining:e,placeholderMessage:n,resultType:r})},"time-remaining"):o.jsx(ge.div,{initial:"initial",animate:"animate",exit:"exit",variants:Wg,children:o.jsx(D,{color:"light",variant:"small",className:"text-pretty",children:o.jsx(yn,{variant:"super",as:"span",children:o.jsx(pe,{defaultMessage:"Finishing up...",id:"JUr8ErKBCt"})})})},"finishing-message");return s?o.jsx("div",{className:a,children:o.jsx(Ke,{mode:"sync",initial:!1,children:i})}):i});WT.displayName="ProgressMessage";const KAe=I.memo(({percentCompleted:e})=>o.jsx("div",{className:"gap-two relative flex w-full flex-col",children:o.jsx(WT,{percentCompleted:e,placeholderMessage:"Reasoning with o3-pro"})}));KAe.displayName="O3Message";const YAe=I.memo(({percentCompleted:e=1,className:t,showPlayHead:n=!0})=>o.jsx("div",{className:B("pb-xs relative w-full flex-col",t),children:o.jsxs("div",{className:"bg-subtle h-xs relative left-0 top-0 flex w-full rounded-full",children:[o.jsx("div",{className:"bg-super shadow-super/15 left-0 top-0 h-full rounded-full shadow-[0_0_2px_1px] transition-[width] duration-200 ease-in-out",style:{width:`${e}%`}}),n&&o.jsx("div",{className:"bg-super -ml-two -mt-two shadow-super/50 size-sm rounded-full shadow-[0_0_5px_1px,-4px_0_3px_-2px]"})]})}));YAe.displayName="ProgressBar";const QAe=I.memo(({searchMode:e,estimatedSecondsRemaining:t,percentCompleted:n})=>o.jsx("div",{className:"gap-two relative flex w-full flex-col",children:o.jsx(D,{color:"light",variant:"small",className:"text-pretty",children:e===ie.RESEARCH&&o.jsx(WT,{estimatedSecsRemaining:t,percentCompleted:n,placeholderMessage:"It takes a few minutes to gather sources and create your report.",resultType:"report",showAnimatePresence:!1,wrapperClassName:""})})}));QAe.displayName="ResearchMessage";const XAe=I.memo(({estimatedSecsRemaining:e,percentCompleted:t})=>o.jsx("div",{className:"gap-two pb-xs relative flex w-full flex-col",children:o.jsx(WT,{estimatedSecsRemaining:e,percentCompleted:t,placeholderMessage:"Creating a plan"})}));XAe.displayName="StudioMessage";const GW=I.memo(({className:e,style:t,skipSearchEnabled:n,onSkipSearch:r})=>{const{searchMode:s,researchPlan:a,reasoningPlan:i,steps:l,hasAnswer:c,isProReasoningMode:u,result:{backend_uuid:d,blocks:m,display_model:p}}=an(),{estimatedSecondsRemaining:h,percentCompleted:g,percentRemaining:y}=zAe({researchPlan:a,reasoningPlan:i,blocks:m,hasAnswer:c,isProReasoningMode:u??!1,displayModel:p}),v=Math.min(g,95),x=p===le.O3_PRO,b=s===ie.RESEARCH||s===ie.STUDIO||x,_=l.some(w=>w.step_type==="ENTROPY_REQUEST");return b?o.jsxs(ge.div,{initial:{opacity:0,y:-4},className:e,style:t,animate:{opacity:1,y:0,transition:{ease:Nd,duration:.2,delay:.05}},exit:{opacity:0,y:-4,transition:{ease:Nd,duration:.5}},children:[o.jsxs(H,{variant:"subtler",className:B(x?"py-md rounded-xl border px-6 shadow-sm":"pb-md rounded-xl border px-6 pt-5 shadow-sm","flex flex-col gap-3"),children:[o.jsxs(H,{className:B("gap-sm flex flex-row items-start"),children:[o.jsx("div",{className:"gap-sm pt-two relative flex grow",children:s===ie.RESEARCH?o.jsx(QAe,{searchMode:s,estimatedSecondsRemaining:h,percentCompleted:v}):x?o.jsx(KAe,{percentCompleted:v}):o.jsx(XAe,{estimatedSecsRemaining:h,percentRemaining:y,percentCompleted:v,backendUuid:d})}),o.jsxs("div",{className:"gap-sm flex items-start",children:[n&&r&&!x&&o.jsx(s7,{onClick:r}),!x&&o.jsx(GAe,{})]})]}),o.jsx(YAe,{percentCompleted:v,className:"my-1.5"})]}),o.jsx("div",{className:"from-base via-base absolute top-full h-5 w-full bg-gradient-to-b from-0% via-[calc(100%_-_12px)] to-transparent to-100% backdrop-blur-[0.25px]"})]},"progress-banner"):_&&n&&r?o.jsxs("div",{className:e,children:[o.jsx(s7,{onClick:r}),o.jsx("div",{className:"from-base via-base absolute top-full h-5 w-full bg-gradient-to-b from-0% via-[calc(100%_-_12px)] to-transparent to-100% backdrop-blur-[0.25px]"})]}):null});GW.displayName="ProgressBanner";const qW=f.memo(()=>o.jsxs(yn,{className:"gap-md flex flex-col",children:[o.jsx(d2,{}),o.jsx(d2,{}),o.jsx(d2,{})]}));qW.displayName="AnswerModeLoader";const d2=f.memo(()=>o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(H,{variant:"subtler",className:"size-32 shrink-0 rounded-md"}),o.jsxs("div",{className:"gap-sm flex w-full flex-col",children:[o.jsx(H,{variant:"subtler",className:"h-4 w-full rounded-full"}),o.jsx(H,{variant:"subtler",className:"h-4 w-2/3 rounded-full"})]})]}));d2.displayName="Item";const ZAe=f.memo(()=>{const{searchMode:e,inFlight:t}=an(),n=e==ie.STUDIO;return o.jsxs("div",{children:[n&&t&&o.jsx(GW,{}),o.jsxs(yn,{className:B("gap-md flex",{"max-w-threadContentWidth mx-auto":!n}),children:[n&&o.jsxs("div",{className:"gap-md flex w-[30%] flex-col",children:[o.jsx(H,{variant:"subtler",className:"h-4 w-1/2 rounded-full"}),o.jsxs("div",{className:"gap-sm flex",children:[o.jsx(H,{variant:"subtler",className:"size-3.5 rounded-full"}),o.jsx(H,{variant:"subtler",className:"h-4 w-2/3 rounded-full"})]}),o.jsxs("div",{className:"gap-sm flex",children:[o.jsx(H,{variant:"subtler",className:"size-3.5 rounded-full"}),o.jsx(H,{variant:"subtler",className:"h-4 w-2/3 rounded-full"})]})]}),o.jsxs("div",{className:"gap-sm flex w-[70%] flex-col",children:[o.jsx(H,{variant:"subtler",className:"h-4 w-[70%] rounded-full"}),o.jsx(H,{variant:"subtler",className:"h-4 w-4/5 rounded-full"}),o.jsx(H,{variant:"subtler",className:"h-4 w-1/2 rounded-full"})]})]})]})});ZAe.displayName="TasksModeLoader";const qh=I.memo(({...e})=>o.jsx(ge.div,{className:"ml-auto flex items-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:o.jsx(Te,{...e,extraCSS:"!py-md [&_*]:!font-regular hover:!bg-subtler shrink-0 whitespace-nowrap rounded-md",size:"tiny"})}));qh.displayName="AnswerModeTabsAccessory";function ezt(){const e=_k(),t=Ky(),n=f.useRef(!1);let r,s="",a=!1;try{const i=an();s=i.result?.uuid??"",r=i.result?.classifier_results,a=i.isEntryInFlight??!1}catch{}f.useEffect(()=>{s&&n.current&&(n.current=!1)},[s]),f.useEffect(()=>{const i=r?.mhe_predictions?.study_intent===!0,l=e(le.STUDY);i&&l&&a&&!n.current&&s&&(n.current=!0,t(le.STUDY,ie.STUDY))},[r,e,t,s,a])}const tzt=({trackEvent:e,entryUUID:t,frontendContextUUID:n,contextUUID:r})=>f.useCallback((s,a)=>{e(s,{entryUUID:t,frontendContextUUID:n,contextUUID:r,...a})},[t,n,r,e]),nzt=({webResults:e})=>pi(t=>({isShowing:!1,webResults:e,actions:{hide:()=>t({isShowing:!1}),show:n=>t({...n,isShowing:!0})}})),{Context:rzt,useTrackedState:szt}=Db("SourcesListContext"),JAe=f.memo(({children:e,webResults:t})=>{const[n]=I.useState(()=>nzt({webResults:t}));return f.useEffect(()=>{n.setState({webResults:t})},[t,n]),o.jsx(rzt.Provider,{value:n,children:e})});JAe.displayName="SourcesListProvider";const azt=szt,e6e=({webResults:e,navigationResults:t=[],isStudyMode:n=!1})=>{if(!e)return{dedupedWebResults:[],hasSufficientTrendingRatio:!1,trendingResults:[],trendingResultsWithImages:[]};const r=b3.dedupWebResults(e,t,n),s=r.filter(u=>u.meta_data?.client==="trending"),i=r.slice(0,10).filter(u=>u.meta_data?.client==="trending"),l=i.length>=3,c=i.filter(u=>u.meta_data?.images?.[0]);return{dedupedWebResults:r,hasSufficientTrendingRatio:l,trendingResults:s,trendingResultsWithImages:c}},ozt=({webResults:e,navigationResults:t=[],isStudyMode:n=!1,isMobileStyle:r})=>{if(!r||!e)return!1;const{hasSufficientTrendingRatio:s,trendingResultsWithImages:a}=e6e({webResults:e,navigationResults:t,isStudyMode:n});return s&&a.length>=3},t6e=I.memo(({urlData:e,handleClick:t,...n})=>{const r=f.useMemo(()=>{const{url:p,snippet:h}=e;if("title"in e){const y=e;return{url:p,title:y.title,snippet:h,domain:y.domain||Ta(p)}}return{url:p,title:e.name,snippet:h,domain:Ta(p)}},[e]),{url:s,title:a,snippet:i,domain:l}=r,c=f.useMemo(()=>l.replace(/^www\./,"").split(".")[0],[l]),u=f.useMemo(()=>Kb(s),[s]),d=f.useMemo(()=>p=>()=>{},[]),m=t||d;return o.jsx("div",{className:"p-md border-t-subtlest last:border-b-subtlest -mx-4 flex grow flex-col border-t px-4 last:border-b [&:only-child]:border-0",children:o.jsxs(Ge,{className:"gap-sm border-t-subtlest group flex cursor-pointer flex-col items-stretch",href:s,target:"_self",onClick:m(s,"primaryLink"),rel:"noopener",...n,children:[o.jsxs("div",{className:"flex h-7 items-center gap-2",children:[o.jsx(zi,{size:28,domain:u,className:"flex-shrink-0 rounded-full"}),o.jsxs("div",{className:"flex w-full min-w-0 flex-col",children:[o.jsx(D,{variant:"small",className:"line-clamp-1",children:c}),o.jsx(D,{variant:"tinyRegular",color:"light",className:"line-clamp-1 truncate break-words",children:s})]})]}),o.jsxs("div",{children:[o.jsx(D,{className:"line-clamp-1",variant:"baseSemi",color:"super",children:a}),o.jsx(D,{variant:"small",color:"light",className:"line-clamp-2",children:i})]})]},s)})});t6e.displayName="MobileUrlCard";const Ef={lastEntryUUID:null,loggedUrls:new Set,seenEntries:new Set};function izt(e){if(e)return[{...e,url:e?.url,title:e?.name,snippet:e?.snippet,sitelinks:e?.sitelinks?.slice(),site_name:e?.meta_data?.domain_name||e?.meta_data?.citation_domain_name}]}const HT=I.memo(({navigationResult:e,trackEvent:t,queryString:n,entryUUID:r,frontendUUID:s,onClick:a,showSiteLinks:i=!1,showNewMobileCard:l=!1,renderPosition:c,...u})=>{const{url:d,title:m,snippet:p,sitelinks:h,position:g,source:y,client_request_timestamp:v,unstable_server_request_timestamp:x,is_cached:b,is_comet_navigation:_,site_name:w}=e,{isMobileStyle:C}=xe(),S=f.useMemo(()=>Kb(d),[d]),E=f.useMemo(()=>_P(d),[d]);f.useEffect(()=>{if(!r||!d)return;const k=Ef.seenEntries.has(r);Ef.lastEntryUUID!==r&&(Ef.lastEntryUUID=r,Ef.loggedUrls.clear()),Ef.loggedUrls.has(d)||(Ef.loggedUrls.add(d),Ef.seenEntries.add(r),t("navigational source viewed",{query:n,url:d,title:m,...i&&{subLinks:h},position:g,source:y,is_comet_navigation:_,frontendUUID:s,...typeof v=="number"&&!k&&{renderTimeMs:performance.now()-v},...typeof x=="number"&&!k&&{unstableRenderTimeMs:performance.now()-x},isCached:b}))},[r,d,n]);const M=f.useCallback((k,A)=>R=>{t("click citation",{source:"navigationalCard",render_position:c,navigationalLinkType:A,citation_url:k,is_comet_navigation:_,frontendUUID:s}),a?.(R)},[_,t,a,s,c]);return C&&l?o.jsx(t6e,{urlData:e,handleClick:M,...u}):o.jsx("div",{className:"gap-sm flex",children:o.jsx("div",{className:"grow",children:o.jsxs(H,{variant:"transparent",className:"flex grow flex-col rounded-lg",children:[o.jsx(Ge,{className:"group flex cursor-pointer items-stretch",href:d,target:"_self",onClick:M(d,"primaryLink"),rel:"noopener",...u,children:o.jsxs(H,{className:"pr-md group",children:[o.jsxs("div",{className:"mb-xs gap-sm flex items-center",children:[o.jsx(zi,{size:28,domain:S,className:"flex-shrink-0 rounded-full"}),o.jsxs("div",{className:"flex flex-col",children:[w&&o.jsx(D,{variant:"tiny",className:"line-clamp-1 break-all",children:w}),o.jsx(D,{variant:"tinyRegular",color:"light",className:"line-clamp-1 break-all",children:E})]})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(D,{variant:"baseSemi",color:"super",className:"decoration-1 underline-offset-1 group-hover:underline",children:m}),o.jsx(D,{variant:"small",color:"light",className:"mb-two line-clamp-2",children:p})]})]})},d),h&&h.length>0&&i&&o.jsx(D,{variant:"small",color:"light",className:"pt-two pb-sm",children:o.jsx(Pl,{className:"flex-wrap",children:h.map(k=>o.jsx(gr,{id:k.url,children:o.jsx(Ge,{className:"group flex cursor-pointer items-stretch",href:k.url,onClick:M(k.url,"siteLink"),rel:"noopener",...u,children:o.jsx(D,{variant:"small",color:"super",className:B("decoration-1 underline-offset-1 group-hover:underline"),children:k.title})})},k.url))})})]})})})});HT.displayName="CitationNavigationalCard";const lzt=({entry:e,webResults:t,showSourcesSidebar:n,submit:r,allowedNavResultsCount:s,isFirstResult:a,enableMobileCalculations:i=!1,...l})=>{const{trackEvent:c}=Ne(),{trackEvent:u}=Ay(),{openModal:d}=xt(),m=hi(),p=azt(),{isMobileStyle:h}=xe(),g=f.useMemo(()=>"searchMode"in l&&l.searchMode===ie.SEARCH,[l]),y=f.useMemo(()=>t?.filter(T=>T.is_navigational)?.flatMap(T=>izt(T)||[]),[t]),{data:v}=DQe(e?.query_str??""),x=f.useMemo(()=>v?.navigation_results?.map(T=>({...T,is_cached:!0}))??y?.map(T=>({...T,is_cached:!1})),[v,y]),b=f.useMemo(()=>x?.slice(0,s),[x,s]),_=b?.length&&a&&!g,w=f.useMemo(()=>un.isPerplexityMessage(e)?e?.display_model==="pplx_study"||e?.classifier_results?.mhe_predictions?.study_intent:!1,[e]),C=f.useMemo(()=>e6e({webResults:t,navigationResults:b,isStudyMode:w}),[t,b,w]),{dedupedWebResults:S,hasSufficientTrendingRatio:E,trendingResults:M,trendingResultsWithImages:k}=C,A=f.useMemo(()=>!i||!h?[]:k,[i,h,k]),R=f.useMemo(()=>i?h&&E&&k.length>=3:!1,[i,h,E,k.length]),O=f.useMemo(()=>un.isPerplexityMessage(e)?e?.blocks?.some(T=>T.intended_usage==="answer_media_items"):!1,[e]),L=f.useMemo(()=>!_&&!O&&E,[_,O,E]),P=f.useCallback(()=>{if(e?.backend_uuid){const T=n?"sidebar":"modal";u("click view sources button",{entryUUID:e.backend_uuid,type:p.isShowing?void 0:T})}n?p.actions.show({webResults:t}):d("citationListModal",{webResults:t,entry:e,submit:m?r:void 0})},[e?.backend_uuid,d,m,n,p.isShowing,p.actions.hide,r,u,t?.length]),N=tzt({trackEvent:c,entryUUID:e?.backend_uuid,frontendContextUUID:e?.uuid,contextUUID:e?.context_uuid});return f.useMemo(()=>({isNavigationalLayout:_,navigationResults:b,trackCitationClickEvent:N,handleViewAllClick:P,dedupedWebResults:S,isTrendingLayout:L,trendingResults:M,trendingResultsWithImages:A,showTrendingInMobile:R}),[S,P,_,L,b,R,N,M,A])},n6e=({target:e,entryUUID:t,frontendContextUUID:n,targetVisibilityPortionThreshold:r=.5,hasLLMToken:s})=>{const a=f.useRef(null),i=f.useRef(null),l=f.useRef(!1),{trackEvent:c}=Ne(),{result:u}=an(),d=f.useRef(u);f.useEffect(()=>{d.current=u},[u]);const m=f.useCallback(()=>{if(a.current){const h=Math.round(performance.now()-a.current);c("thread entry exited",{entryUUID:t,frontendContextUUID:n,timeOnEntryMs:h}),a.current=null}if(i.current){const h=d.current;h&&Ur(h.display_model)==ie.STUDIO&&un.isStatusPending(h)&&c("answer processing exited",{entryUUID:t,frontendContextUUID:n,timeOnEntryMs:Math.round(performance.now()-i.current)}),i.current=null}},[c,t,n]),p=f.useCallback(()=>{s&&(a.current=performance.now()),i.current||(i.current=performance.now())},[s]);return f.useEffect(()=>{const h=new IntersectionObserver(y=>{y.forEach(v=>{l.current=v.isIntersecting,v.isIntersecting&&document.visibilityState==="visible"?p():m()})},{threshold:r}),g=e.current;return g&&h.observe(g),()=>{g&&h.unobserve(g),m()}},[e,r,p,m]),f.useEffect(()=>{const h=()=>{document.visibilityState==="hidden"?m():document.visibilityState==="visible"&&l.current&&p()};return document.addEventListener("visibilitychange",h),()=>{document.removeEventListener("visibilitychange",h)}},[p,m]),f.useEffect(()=>{const h=()=>{l.current&&a.current&&m()};return window.addEventListener("beforeunload",h),()=>{window.removeEventListener("beforeunload",h)}},[m]),null};function czt(e){const{navigationResult:t,queryString:n,frontendUUID:r,webPlatform:s,isRevisit:a=!1,includeSitelinks:i=!1}=e,{url:l,title:c,sitelinks:u,position:d,source:m,client_request_timestamp:p,unstable_server_request_timestamp:h,is_cached:g,is_comet_navigation:y}=t;return{query:n,url:l,title:c,position:d??0,source:m??"default_search",is_comet_navigation:y,frontendUUID:r,isCached:g??!1,...s&&{web_platform:s},...i&&u&&{subLinks:u.map(v=>({url:v.url??"",title:v.title??"",position:v.position??0}))},...typeof p=="number"&&!a&&{renderTimeMs:performance.now()-p},...typeof h=="number"&&!a&&{unstableRenderTimeMs:performance.now()-h}}}const uzt=(e,t)=>{const{value:n,loading:r}=It({flag:"show-site-link-snippets",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},r6e=I.memo(({navigationResult:e,trackEvent:t})=>{const{url:n,title:r,snippet:s,domain:a,sitelinks:i=[],site_name:l}=e,c=f.useMemo(()=>(a||Ta(n)).replace(/\.[^.]*$/,""),[a,n]),u=f.useMemo(()=>Kb(n),[n]),{$t:d}=Z(),m=f.useCallback(p=>{t("click citation",{type:"primaryLink",...e})},[t,e]);return o.jsxs(H,{className:"p-md border-subtler mb-md rounded-xl border",variant:"subtler",children:[o.jsxs(Ge,{className:"gap-sm border-t-subtlest group flex cursor-pointer flex-col items-stretch",href:n,target:"_self",onClick:m,rel:"noopener",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(zi,{size:28,domain:u,className:"flex-shrink-0 rounded-full"}),o.jsxs("div",{className:"flex w-full min-w-0 flex-col",children:[o.jsx(D,{variant:"smallBold",className:"line-clamp-1 break-words",children:l??c}),o.jsx(D,{variant:"tinyRegular",color:"light",className:"line-clamp-1 truncate break-words",children:n})]})]}),o.jsx(D,{className:"pt-xs line-clamp-2 break-words",children:r})]}),o.jsx("div",{children:o.jsx(D,{variant:"small",color:"light",className:"line-clamp-2 break-words",children:s})})]},n),o.jsx("div",{className:"mt-sm",children:i.map(p=>o.jsx("div",{className:"border-subtler px-two py-md flex items-center border-t",children:o.jsxs(Ge,{href:p.url,className:"flex w-full items-center justify-between",children:[o.jsx(D,{variant:"small",className:"line-clamp-2 leading-none",children:p.title}),o.jsx(D,{variant:"small",color:"light",children:o.jsx(ce,{icon:Kn})})]})},p.url))}),o.jsx("div",{className:"mt-sm",children:o.jsx(Ge,{href:n,target:"_blank",rel:"noopener",children:o.jsx(he,{variant:"common",fullWidthMobile:!0,text:d({id:"hqHEPnjKO/",defaultMessage:"Visit {domain}"},{domain:Hge(n)})})})})]})});r6e.displayName="MobilePrimaryNavResultCard";const KW=I.memo(({navigationResult:e,trackEvent:t,queryString:n,entryUUID:r,frontendUUID:s})=>{const{isMobileStyle:a}=xe(),{trackEventOnce:i}=Ne();return f.useEffect(()=>{const l=czt({navigationResult:e,queryString:n,frontendUUID:s,isRevisit:!1,includeSitelinks:!0});i("navigational source viewed",l)},[i,e,n,r,s,a]),a?o.jsx(r6e,{navigationResult:e,trackEvent:t}):o.jsx(s6e,{navigationResult:e,trackEvent:t})}),s6e=I.memo(({navigationResult:e,trackEvent:t})=>{const{sitelinks:n=ue}=e,{variation:r}=uzt(!1),s=f.useMemo(()=>{if(r)return n;const a=n.length&-2;return n.slice(0,a)},[n,r]);return o.jsxs("div",{children:[o.jsx(HT,{navigationResult:e,trackEvent:t,queryString:"",entryUUID:""}),s.length>0&&o.jsx("div",{className:B("gap-x-lg border-subtler pl-md mt-md mb-sm grid items-stretch border-l",r?"grid-cols-2":"grid-cols-[0.5fr_1fr]"),children:s.map(a=>o.jsxs(Ge,{href:a.url,target:"_self",className:"py-sm flex h-full flex-col justify-start",children:[o.jsx(D,{variant:"smallBold",className:B("break-words hover:underline",r?"line-clamp-2":"line-clamp-1"),color:"super",children:a.title}),r&&o.jsx(D,{variant:"small",className:"line-clamp-1 break-words",color:"light",children:a?.snippet??""})]},a.url))})]})});s6e.displayName="DesktopPrimaryNavResultCard";KW.displayName="PrimaryNavResultCard";const a6e=(e,t,n)=>{const r=e?.sitelinks??ue;return t===0&&r.length>0},o6e=f.memo(({navResult:e,index:t,isPrimaryCardEnabled:n,trackCitationClickEvent:r,queryStr:s,entryUUID:a,frontendUUID:i,showSiteLinks:l,renderPosition:c})=>{const{isMobileStyle:u}=xe();return n&&a6e(e,t)?o.jsx(KW,{navigationResult:e,trackEvent:r,queryString:s,entryUUID:a,frontendUUID:i}):o.jsx(HT,{navigationResult:e,trackEvent:r,queryString:s,entryUUID:a,frontendUUID:i,showSiteLinks:l,showNewMobileCard:u,renderPosition:c})});o6e.displayName="RedesignedNavResultListItem";const i6e=(e,t)=>{const{value:n,loading:r}=It({flag:"web-site-links-ui",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},dzt=(e,t)=>{const{value:n,loading:r}=Su({flag:"web-navigation-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},fzt={"nav-card":!1,"nav-links-bottom-position":!1,"news-carousel":!1,"primary-card":!1},YW=()=>{const{variation:e,loading:t}=dzt(fzt,{isCometMobile:OF()});return{variation:e,loading:t}},a7=f.memo(({navResults:e,queryStr:t,querySource:n,backendUUID:r,frontendUUID:s,trackCitationClickEvent:a,onMount:i,shouldRenderPrimaryCard:l=!0,renderPosition:c})=>{const{isMobileStyle:u}=xe(),{variation:d,loading:m}=YW(),p=d["nav-card"],h=typeof d["primary-card"]=="boolean"?d["primary-card"]&&l:!1,{variation:g}=i6e(!1);f.useEffect(()=>{i?.()},[i]);const y=f.useCallback((v,x)=>{a(v,x);const b=n==="default_search",_=x.is_comet_navigation;!(v==="click citation")||!b||!_||ui("web.frontend.omnisearch_nav_results_clicked")},[a,n]);return m?null:p?o.jsx(l6e,{navResults:e,queryStr:t,backendUUID:r,frontendUUID:s,trackCitationClickEvent:a,isPrimaryCardEnabled:h,renderPosition:c}):o.jsx(H,{"data-testid":"old-navigation-list",className:"flex flex-col gap-4",children:e.map((v,x)=>h&&a6e(v,x)?o.jsx(KW,{navigationResult:v,trackEvent:y,queryString:t,entryUUID:r??"",frontendUUID:s},v.url):o.jsx(HT,{navigationResult:v,trackEvent:y,queryString:t,entryUUID:r??"",frontendUUID:s,showSiteLinks:g,showNewMobileCard:!1,renderPosition:c},v.url))})});a7.displayName="NavigationResultList";const mzt=7,l6e=f.memo(({navResults:e,queryStr:t,backendUUID:n,frontendUUID:r,trackCitationClickEvent:s,isPrimaryCardEnabled:a,renderPosition:i})=>{const{trackEvent:l}=Ne(),{webResults:c,hasAnswer:u}=an(),{isMobileStyle:d}=xe(),{variation:m}=i6e(!1),{$t:p}=Z(),{updateCurrentMode:h}=uw(),[g,y]=f.useState("none"),v=f.useMemo(()=>b3.dedupWebResults(c,e,!1),[c,e]),x=f.useMemo(()=>e.length<3?[]:v.slice(0,mzt).map((A,R)=>({url:A.url,title:A.name,snippet:A.snippet||"",domain:A.url?new URL(A.url).hostname:void 0,position:e.length+R,source:"default_search",is_comet_navigation:!1})),[v,e]),b=f.useMemo(()=>g==="none"?"collapsed":u&&x.length>0?"expanded":"loading",[g,u,x.length]),_=f.useMemo(()=>b==="collapsed"?e:[...e,...x],[e,x,b]),w=_.length>e.length,C=u?w?x.length<v.length:x.length>0:e.length>=3,S=p(w?{defaultMessage:"See all results",id:"DQlyy2kiD5"}:{defaultMessage:"See more results",id:"N/NQ07tu+u"}),E=f.useCallback(()=>{if(w){l("clicked navigation results see all"),h("sources");return}l("clicked navigation results see more"),y("clicked")},[w,h,l]),M=f.useMemo(()=>o.jsx(ce,{icon:WM,size:"xs"}),[]),k=b==="loading"&&!w;return o.jsxs(H,{"data-testid":"redesigned-navigation-list",className:"flex flex-col",children:[o.jsx("div",{className:"flex flex-col sm:gap-4",children:_.map((A,R)=>o.jsx(o6e,{navResult:A,index:R,isPrimaryCardEnabled:a,trackCitationClickEvent:s,queryStr:t,entryUUID:n??"",frontendUUID:r??"",showSiteLinks:m,renderPosition:i},A.url))}),C&&o.jsx("div",{className:"pt-md mb-sm",children:d?o.jsx(he,{fullWidth:!0,variant:"common",onClick:E,text:S,isLoading:k,testId:"view-more-button"}):o.jsxs("div",{className:"flex items-center",children:[o.jsx(he,{size:"small",variant:"border",onClick:E,text:S,trailingComponent:w?M:void 0,isLoading:k,testId:"view-more-button"}),o.jsx("div",{className:"bg-subtle h-px flex-1"})]})})]})});l6e.displayName="RedesignedNavigationResultList";const pzt=({data:e})=>{const{inFlight:t,result:{context_uuid:n,backend_uuid:r},result:s}=an(),{openCanvas:a,doCanvasAction:i}=F_(),{trackEvent:l}=Ne(),{title:c}=PW(e.asset),u=f.useRef(void 0),d=f.useRef(void 0);return f.useEffect(()=>{t&&e.should_auto_open&&a()},[t,e.should_auto_open,a]),f.useEffect(()=>{if(!t)return;const m={progress:e.progress,assetType:e.expected_asset_type};(u.current?.progress!==m.progress||u.current?.assetType!==m.assetType)&&(i({type:"setLoading",loading:e.progress===Mc.IN_PROGRESS,assetType:e.expected_asset_type}),u.current=m)},[e.expected_asset_type,e.progress,i,t]),f.useEffect(()=>{if(!e.asset||!t)return;const m=e.asset.uuid;d.current!==m&&(i({type:"setAsset",asset:e.asset,title:c,result:s}),l("canvas opened",{source:"auto",contextUUID:n,entryUUID:r,contentType:e.asset.asset_type,assetUUID:e.asset.uuid}),d.current=m)},[e.asset,i,t,s,l,n,r,c]),null},hzt=()=>{const{blocksByIntendedUsage:{canvas_mode:e}}=an();if(Gk())return e?.canvas_block};var gzt={};const yzt=({hasSources:e,hasFastWidget:t,showAgentWorkflow:n,shouldShowNavResults:r,hasMediaOnlyLayout:s,isMobileStyle:a,isEntryInFlight:i,isMobileTrendingLayout:l})=>f.useMemo(()=>{const c=!!gzt.NEXT_PUBLIC_IS_SIDECAR_BUILD,u=a&&!c,d=e&&!t&&!n&&!r&&!s;return c?{showSourcesAtTop:d,showSourcesAtBottom:!1}:{showSourcesAtTop:d&&!u||d&&l&&u,showSourcesAtBottom:d&&u&&!i&&!l}},[e,t,n,r,s,a,i,l]),c6e=I.memo(({onClick:e,didSelectAnswer:t,onDismiss:n})=>{const{isMobileStyle:r}=xe(),[s,a]=f.useState(!1),{$t:i}=Z(),l=f.useCallback(()=>{a(!0),n()},[n]);return r||s?null:o.jsx("div",{children:o.jsx(H,{variant:"superLight",className:"p-md gap-sm flex items-center justify-between rounded-md",children:t?o.jsxs("div",{className:"gap-sm flex w-full items-center justify-between",children:[o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(ce,{icon:IOe,size:"lg",className:"text-super"}),o.jsx(D,{color:"super",variant:"smallBold",children:i({defaultMessage:"Thank you! Your feedback helps improve answers for everyone.",id:"jfIf25t1OU"})})]}),o.jsx(Te,{variant:"noHover",icon:Rt,pill:!0,size:"small",extraCSS:"!text-super",onClick:l})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx(D,{color:"super",variant:"smallBold",children:i({defaultMessage:"Help improve our product",id:"A7lIeL4dUS"})}),o.jsx(D,{color:"super",variant:"small",children:i({defaultMessage:"We made two versions of this answer. Which do you prefer?",id:"GT2t8+NleA"})})]}),o.jsx(he,{variant:"primary",size:"small",text:i({defaultMessage:"Compare",id:"493J7RI1tF"}),onClick:e})]})})})});c6e.displayName="AnswerComparisonBanner";const vzt=ye(async()=>{const{MarkSpinner:e}=await K(async()=>{const{MarkSpinner:t}=await Promise.resolve().then(()=>b5e);return{MarkSpinner:t}},void 0);return{default:e}}),xzt=I.memo(({title:e,titleIcon:t,titleAccessory:n,titleUrl:r,showPplxMark:s,queryStr:a,loading:i,className:l="mb-sm"})=>{const{trackEvent:c}=Ne(),[u,d]=f.useState(!1),m=f.useCallback(()=>{r!=null&&(c("click result entry header",{query:a}),window.open(r,"_blank")?.focus())},[c,a,r]);return o.jsxs("div",{className:B("flex w-full items-center justify-between",l),children:[o.jsx("div",{onClick:m,className:B({"cursor-pointer":r!=null}),children:o.jsxs("div",{color:"super",className:"space-x-sm flex items-center",children:[(s||t)&&o.jsx(D,{variant:"section-title",as:"div",children:s?o.jsx("div",{className:"relative -top-px flex w-[24px] transform-gpu items-center justify-center",onClick:()=>{d(!0),setTimeout(()=>{d(!1)},0)},children:o.jsx(vzt,{size:24,shouldAnimate:i||u})}):t&&o.jsx("div",{className:"w-[24px]",children:o.jsx(ce,{icon:t,size:"lg"})})}),o.jsx(D,{variant:"section-title",as:"div",children:e})]})}),n]})});xzt.displayName="ThreadEntryHeader";const u6e=I.memo(({header:e,children:t})=>o.jsxs(H,{children:[e&&o.jsx(H,{variant:"background",className:B("flex","items-center","justify-between"),children:e}),t]}));u6e.displayName="ThreadEntrySection";const bzt=e=>{try{return JSON.parse(e)}catch{return null}},d6e=I.memo(({title:e,description:t,className:n="",role:r,retryFn:s,...a})=>{const{$t:i}=Z(),l=i({defaultMessage:"Please try again later.",id:"EjH+J3uOTD"}),c=f.useMemo(()=>bzt(t??""),[t]);return c&&(console.warn("Tried to pass a JSON error description"),console.warn(c)),o.jsxs("div",{className:`gap-md bg-caution py-sm px-md mt-4 flex items-center rounded-lg text-left font-sans text-white ${n}`,role:"alert",...a,children:[o.jsx(ce,{icon:sle}),o.jsxs("div",{className:"flex grow flex-col",children:[o.jsx("p",{className:"font-medium",children:e||i({defaultMessage:"Sorry, something went wrong",id:"E2YPKR25ob"})}),o.jsx("p",{children:c?l:t})]}),s&&o.jsx(Te,{noXPadding:!0,text:i({defaultMessage:"Try again",id:"FazwRldA7z"}),onClick:s,textClassName:"text-white"})]})});d6e.displayName="QueryError";const zT=I.memo(({fullWidth:e,retryFn:t,className:n,errorCode:r})=>{const{$t:s}=Z(),a=f.useCallback(()=>{p5("error retry")},[]),i=(()=>{switch(r){case"FETCHER_SSE_OFFLINE_ERROR":return s({defaultMessage:"Unstable internet, check your connection",id:"vbFcV2WAsH"});default:return s({defaultMessage:"Sorry, something went wrong",id:"E2YPKR25ob"})}})();return o.jsx("div",{className:B("max-w-threadContentWidth mx-auto",{"w-full":e},n),children:o.jsx(d6e,{className:B("mx-md md:mx-0",{"bg-super":r==="FETCHER_SSE_OFFLINE_ERROR"}),title:i,retryFn:t??a})})});zT.displayName="QueryErrorFallback";var _zt={};const wzt=ye(async()=>{const{ConnectorAuthorizationPrompt:e}=await K(async()=>{const{ConnectorAuthorizationPrompt:t}=await import("./ConnectorAuthorizationPrompt-H3imkGok.js");return{ConnectorAuthorizationPrompt:t}},__vite__mapDeps([437,3,1,4,6,5]));return{default:e}}),Czt=ye(async()=>{const{AgentWorkflow:e}=await K(async()=>{const{AgentWorkflow:t}=await import("./AgentWorkflow-CMd6Fsr5.js");return{AgentWorkflow:t}},__vite__mapDeps([438,3,1,4,5,439,17,6,18,19]));return{default:e}}),Szt=ye(async()=>{const{ThreadEntryFooter:e}=await K(async()=>{const{ThreadEntryFooter:t}=await import("./ThreadEntryFooter-DPz9z03G.js");return{ThreadEntryFooter:t}},__vite__mapDeps([440,3,1,4,5,441,62,442,52,6,71,443,35,439,17,18,19,444,46,445,446,447,448,449,25,450,451,452,453,111,454,455,456]));return{default:e}}),Ezt=ye(async()=>{const{RelatedContent:e}=await K(async()=>{const{RelatedContent:t}=await import("./Related-DbYA41vP.js");return{RelatedContent:t}},__vite__mapDeps([457,3,1,4,458,459,117,118,5,460,455,6]));return{default:e}}),Mzt=ye(async()=>{const{StudyModeRelated:e}=await K(async()=>{const{StudyModeRelated:t}=await import("./StudyModeRelated-BylQO8Mi.js");return{StudyModeRelated:t}},__vite__mapDeps([461,3,1,4,459,117,118,5,6]));return{default:e}}),kzt=ye(async()=>{const{MapsPreview:e}=await K(async()=>{const{MapsPreview:t}=await import("./MapsPreview-CO2l2kUx.js");return{MapsPreview:t}},__vite__mapDeps([462,3,1,4,442,52,6,71,5,443,35,34]));return{default:e}}),Tzt=ye(async()=>{const{ThreadContentResponse:e}=await K(async()=>{const{ThreadContentResponse:t}=await import("./ThreadContentResponse-BaU1Sbt7.js");return{ThreadContentResponse:t}},__vite__mapDeps([463,3,1,4,120,441,62,442,52,6,71,5,443,35,439,17,18,19,444,46,445,446,447,448,449,25,450,451,452,453,111,454]));return{default:e}}),Nzt=ye(async()=>{const{SourcesModePreviewRow:e}=await K(async()=>{const{SourcesModePreviewRow:t}=await import("./SourcesModePreview-LCuixOgo.js");return{SourcesModePreviewRow:t}},__vite__mapDeps([464,3,1,119,4,120,5,6]));return{default:e}}),jzt=ye(async()=>K(()=>import("./AnswerComparisonModal-Bh_Zo0nj.js"),__vite__mapDeps([465,3,1,4,463,120,441,62,442,52,6,71,5,443,35,439,17,18,19,444,46,445,446,447,448,449,25,450,451,452,453,111,454,127]))),Azt=ye(async()=>{const{MobileCitationList:e}=await K(async()=>{const{MobileCitationList:t}=await import("./MobileCitationList-DbMIxeF4.js");return{MobileCitationList:t}},__vite__mapDeps([466,3,1,6,5,4]));return{default:e}}),f6e=I.memo(({submitQuery:e,shouldShowProductFeedback:t,feedbackEntryUUID:n,shouldShowRecruitmentBanner:r,deleteLastResult:s,setQuote:a,shouldShowNavResults:i,shouldShowRelatedContent:l=!0,sbsEntriesGroup:c,bottomNavResults:u,autoScroll:d=!0})=>{const m="thread-content",{$t:p}=Z(),{isMobileStyle:h}=xe(),{trackEvent:g}=Ne(),{session:y}=Et(),{removeWidgetFromEntry:v}=ow({reason:m}),{result:x,widgetData:b,isEntryInFlight:_,response:w,hasLLMToken:C,isAnswerSkipped:S,steps:E,isPending:M,hasMediaOnlyLayout:k,showAgentWorkflow:A,isFinalStep:R,sportsWidgetData:O,weatherWidgetData:L,timeWidgetData:P,timerWidgetData:N,calculatorWidgetData:T,currencyExchangeWidgetData:j,flightStatusWidgetData:F,highPriorityWidgets:U,lowPriorityWidgets:V,taskWidgetData:$,hasFastWidget:z,isLastResult:Q,idx:Y,hasAnswer:W,hasSources:X,hasWebResults:G,mapsPreviewData:J}=an(),{variation:q,loading:te}=YW(),re=f.useMemo(()=>_zt.NEXT_PUBLIC_IS_SIDECAR_BUILD||!q["news-carousel"]||_?!1:ozt({webResults:w?.web_results,navigationResults:void 0,isStudyMode:x?.display_model==="pplx_study"||x?.classifier_results?.mhe_predictions?.study_intent,isMobileStyle:h}),[_,w?.web_results,x?.display_model,x?.classifier_results?.mhe_predictions?.study_intent,h,q]),ae=Jd(),fe=SQe(),de=H5(),ve=ANe(),_e=f.useRef(null),Se=f.useMemo(()=>{const ft=x?.side_by_side_metadata?.selection_status;return ft===Ii.SELECTED||ft===Ii.TIE},[x?.side_by_side_metadata?.selection_status]),be=f.useMemo(()=>c.length<1?[]:[...c].sort((ft,kr)=>ft.backend_uuid.slice(-8).localeCompare(kr.backend_uuid.slice(-8),void 0,{sensitivity:"base"})),[c]),{trackJudgment:me,trackBannerExposure:Ae,trackSBSExposure:Ee}=Lyt({results:be,session:y,trackEvent:g}),je=f.useMemo(()=>{const ft=x?.side_by_side_metadata?.sibling_uuid;return ft?Re.getItem(`sbs-banner-dismissed-${ft}`)==="true":!1},[x?.side_by_side_metadata?.sibling_uuid]),Me=f.useMemo(()=>c.length>1,[c]),Ye=f.useMemo(()=>x?.side_by_side_metadata?.sibling_uuid,[x]),at=f.useMemo(()=>x?.display_model==="pplx_study"||x?.classifier_results?.mhe_predictions?.study_intent,[x?.display_model,x?.classifier_results?.mhe_predictions?.study_intent]),it=f.useMemo(()=>ve?!je&&(Se||Me&&W):!1,[je,ve,Me,Se,W]),ke=f.useCallback(()=>{Ye&&Re.setItem(`sbs-banner-dismissed-${Ye}`,"true")},[Ye]);f.useEffect(()=>{it&&Ae()},[it,Ae]);const[Ue,Ot]=f.useState(!1),yt=f.useMemo(()=>be.map(ft=>un.parseAskTextField(ft)??void 0).filter(ft=>ft!==void 0),[be]),St=f.useCallback(async ft=>{try{me(ft);const kr=be[0]?.side_by_side_metadata?.sibling_uuid;await Kyt(ft,be,kr,de),Ot(!1)}catch(kr){ne.error("Failed to process answer selection:",kr)}},[be,de,me]),et=f.useCallback(()=>{Ot(!0),Ee()},[Ee]),He=f.useMemo(()=>c.some(ft=>un.isStatusPending(ft)),[c]),Be=f.useMemo(()=>{if(!x?.query_str)return"";const{actualQuery:ft}=cu(x.query_str);return ft||""},[x?.query_str]),ut=f.useCallback(()=>Ot(!1),[]),{standardWidgetData:kt,codeInterpreterImages:$t}=b.reduce((ft,kr)=>(kr.is_code_interpreter&&kr.is_image?ft.codeInterpreterImages.push(kr):ft.standardWidgetData.push(kr),ft),{standardWidgetData:[],codeInterpreterImages:[]}),tn=f.useMemo(()=>$t.length>0,[$t]),nn=f.useMemo(()=>!tn&&kt.length>0,[tn,kt]),Cn=f.useMemo(()=>!h,[h]),Pn=f.useCallback(ft=>{x?.frontend_context_uuid&&x?.backend_uuid&&(v({entryUUID:x.backend_uuid,data:ft}),g("remove widget",{url:"url"in ft?ft.url:ft?.links?.[0]?.url??"",entryUUID:x.backend_uuid,source:"thread"}))},[v,x.backend_uuid,g,x.frontend_context_uuid]),Xe=f.useCallback((ft,kr,pa,rf,il)=>{const sf=il||("url"in ft?ft.url:ft?.links?.[0]?.url??"");return o.jsx(OTe,{data:ft,submit:e,isReadonly:kr,menuItems:kr||_?[]:[{type:"default",text:p({defaultMessage:"Report",id:"x5Tz6MZH82"}),icon:p2,onClick:()=>pa&&pa(ft)}],inFlight:_,entryUUID:x?.backend_uuid??null,tableCitationOffset:rf},sf)},[_,e,p,x?.backend_uuid]),Ve=f.useCallback((ft,kr,pa)=>{const rf={name:`${kr}-widget`,snippet:"",timestamp:"",url:"",meta_data:ft,is_attachment:!1,is_image:!1,is_code_interpreter:!1,is_knowledge_card:!1,is_navigational:!1,is_widget:!0,sitelinks:[],inline_entity_id:""};return Xe(rf,ae,Pn,w?.web_results?.length,pa)},[Pn,ae,w?.web_results?.length,Xe]),lt=f.useCallback(ft=>Xe(ft,ae,Pn,w?.web_results?.length),[Pn,ae,w?.web_results?.length,Xe]),qt=f.useCallback(ft=>Ve(ft,"sports"),[Ve]),ln=f.useCallback(ft=>Ve(ft,"weather"),[Ve]),$n=f.useCallback(ft=>Ve(ft,"time"),[Ve]),we=f.useCallback(ft=>Ve(ft,"timer"),[Ve]),qe=f.useCallback(ft=>Ve(ft,"currency_exchange"),[Ve]),De=f.useCallback(ft=>Ve(ft,"calculator"),[Ve]),tt=f.useCallback(ft=>Ve(ft,"flight-status"),[Ve]),Qe=f.useCallback(ft=>Ve(ft,"task","task"),[Ve]),Pt=f.useRef(null),{hasAccessToProFeatures:Sn}=_t();n6e({entryUUID:x?.backend_uuid??"",target:Pt,targetVisibilityPortionThreshold:.3,frontendContextUUID:x?.frontend_context_uuid??"",hasLLMToken:C});const Fn=Zn(),{showSourcesAtTop:cn,showSourcesAtBottom:Lr}=yzt({hasSources:X,hasFastWidget:z,showAgentWorkflow:A,shouldShowNavResults:i,hasMediaOnlyLayout:k,isMobileStyle:h,isEntryInFlight:_,isMobileTrendingLayout:re}),Ts=hzt(),Iu=Ime(x?.frontend_uuid),fc=kQe(x?.backend_uuid),Ru=un.isStatusFailed(x),lp=Ru&&x.reconnectable&&Iu;f.useEffect(()=>{Fn.maybeSendSearchResult(w,E,M)},[M,G,w,Fn,E]);const nf=f.useCallback(()=>{fe(x.backend_uuid??"")},[x.backend_uuid,fe]),cp=f.useMemo(()=>I.memo(()=>{throw new fU("STREAM_FAILED_CHUNK_ERROR")}),[]),f0=f.useMemo(()=>()=>o.jsx(zT,{retryFn:nf,errorCode:fc?.code}),[nf,fc?.code]);return o.jsxs(o.Fragment,{children:[it&&o.jsx(c6e,{onClick:et,didSelectAnswer:Se,onDismiss:ke}),x?.connector_auth_info&&o.jsx(wzt,{connectorAuthInfo:x.connector_auth_info,isLastResult:Q,backendUuid:x?.backend_uuid,inFlight:_}),cn&&!te&&o.jsx(Nzt,{}),A&&!S&&o.jsx(Czt,{autoScroll:Q&&d}),Ts&&_&&o.jsx(pzt,{data:Ts}),o.jsxs("div",{className:"gap-y-lg mt-3 flex flex-col first:mt-0",children:[(k||S||!A&&(R||z))&&o.jsx(u6e,{children:o.jsxs("div",{className:"gap-y-sm md:gap-y-md flex flex-col",children:[tn&&$t.map(ft=>o.jsx("div",{children:Xe(ft,ae)},ft.url)),nn&&U.map(lt),L&&ln(L),P&&$n(P),N&&we(N),j&&qe(j),T&&De(T),F&&tt(F),O&&qt(O),nn&&V.map(lt),J&&J.place_widgets.length>0&&o.jsx(kzt,{placeWidgets:J.place_widgets}),o.jsx(Tzt,{submitQuery:e,setQuote:a,markdownRef:_e}),Sn&&ve&&$&&Qe($),Lr&&!te&&o.jsx(Azt,{webResults:w?.web_results??Que}),o.jsx(Szt,{submitQuery:e,deleteLastResult:s,showSourcesSidebar:Cn,markdownRef:_e}),u&&o.jsxs(o.Fragment,{children:[!h&&o.jsx("div",{className:"pb-sm border-b",children:o.jsx(D,{variant:"section-title",as:"div",children:p({defaultMessage:"Results",id:"yaMHMBMsQ7"})})}),u]}),o.jsx(Di,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,children:o.jsx(l0,{position:"bottom",idx:Y,upsellInformation:x?.upsell_information,backendUuid:x?.backend_uuid,isLastResult:Q,inFlight:_})})]})}),Ru&&!lp&&o.jsx(Or,{fallback:f0,children:o.jsx(cp,{})}),l&&!at&&o.jsx(Ezt,{shouldShowProductFeedback:t,feedbackEntryUUID:n,shouldShowRecruitmentBanner:r,submitQuery:e}),at&&o.jsx(Mzt,{onClick:e})]}),Me&&o.jsx(jzt,{isOpen:Ue,onClose:ut,responses:yt,queryStr:Be,onSelectAnswer:St,isAnyEntryPending:He})]})});f6e.displayName="LowerPriorityThreadContent";const Izt=e=>{const{result:{classifier_results:t,query_source:n}}=an(),r=AMe(),{classifierResults:s}=Hr(),a=t,i=typeof a<"u",l=s[e],c=typeof l<"u",u=n==="default_search";return f.useEffect(()=>{u&&(i&&r("web.frontend.browser.mhe_loaded_ms"),c&&r("web.frontend.browser.mhe_extension_loaded_ms"))},[i,c,u,r]),l??a},Rzt=e=>{if(!e)return"hidden";const t=e.mhe_predictions;return t?.nav_intent?"top":e.personal_search||e.image_generation||t?.personal_search||t?.skip_search||t?.image_generation_intent||t?.time_widget||t?.weather_widget||t?.calculator_widget?"hidden":t?.sports_intent||t?.places_search_intent||t?.shopping_intent||t?.movie_lists_intent||t?.finance_widget_gating||e.widget_type==="FINANCE"?"bottom":"top"},Pzt=({classifierResults:e,resultStatus:t})=>{const n=typeof e>"u",{variation:r,loading:s}=YW(),a=fn()&&!!r["nav-links-bottom-position"],i=a?Rzt(e):"top",l=f.useMemo(()=>n||Object.keys(e??{}).length===0&&t==="COMPLETED"||s?!0:a?i==="hidden":!!(e?.personal_search||e?.skip_search||e?.hide_nav||e?.image_generation||e?.time_widget),[a,i,n,e,t,s]),c=f.useMemo(()=>!n,[n]),u=f.useMemo(()=>a?i:"top",[a,i]);return f.useMemo(()=>({shouldHideNavResults:l,classificationsLoaded:c,navResultsPosition:u}),[l,c,u])};var Ozt={};const _oe=3,Lzt=ye(async()=>{const{ThreadEntryDebugTiming:e}=await K(async()=>{const{ThreadEntryDebugTiming:t}=await import("./ThreadEntryDebugTiming-BD-HGjEB.js");return{ThreadEntryDebugTiming:t}},__vite__mapDeps([467,3,1,4,99,6,5,100]));return{default:e}},{restricted:!0}),m6e=I.memo(({sbsEntriesGroup:e,submitQuery:t,shouldShowProductFeedback:n,feedbackEntryUUID:r,shouldShowRecruitmentBanner:s,deleteLastResult:a,setQuote:i})=>{const{isMobileStyle:l}=xe(),c=ht(),u=AMe(),{isEntryInFlight:d,result:m,response:p,hasLLMToken:h,searchMode:g,isFirstResult:y,webResults:v,steps:x,isPending:b,actions:{handleSourcesCuration:_}}=an();ezt();const w=Xge(),C=f.useMemo(()=>{if(!m?.query_str)return"";const{actualQuery:fe}=cu(m.query_str);return fe||""},[m?.query_str]),S=f.useMemo(()=>!l,[l]),E=f.useRef(null);n6e({entryUUID:m?.backend_uuid??"",target:E,targetVisibilityPortionThreshold:.3,frontendContextUUID:m?.frontend_context_uuid??"",hasLLMToken:h});const{trackCitationClickEvent:M,navigationResults:k}=lzt({allowedNavResultsCount:_oe,entry:m,webResults:v,showSourcesSidebar:S,submit:_,searchMode:g,isFirstResult:y}),A=fn(),{openModal:R}=xt(),O=Zn(),{navigationResults:L}=Hr(),P=m?.frontend_uuid,N=L[P??""]??ue,T=Ime(P),j=Izt(P??""),F=f.useMemo(()=>N.length>0,[N]),U=f.useMemo(()=>A&&(N.length||T)?N:k||ue,[A,N,k,T]),V=f.useMemo(()=>U?{serverRequestTimestamp:c.getQueryData(["serverRequestTimestamp",m?.query_str??void 0,m?.uuid??void 0])}:{serverRequestTimestamp:void 0},[c,m?.query_str,U,m?.uuid]),$=f.useMemo(()=>U?.slice(0,Math.max(_oe,N?.length??0))?.map((fe,de)=>({...fe,position:de,source:V.serverRequestTimestamp?"default_search":"client_search",client_request_timestamp:w(),unstable_server_request_timestamp:V.serverRequestTimestamp||void 0,sitelinks:fe.sitelinks?.map((ve,_e)=>({url:ve.url,title:ve.title,position:_e,snippet:ve?.snippet??""})),is_comet_navigation:F})),[w,U,N?.length,V.serverRequestTimestamp,F]),z=f.useMemo(()=>!!v&&v.length>0,[v]),Q=f.useMemo(()=>m?.search_focus==="writing",[m?.search_focus]),Y=f.useMemo(()=>m?.display_model==="pplx_study"||j?.mhe_predictions?.study_intent,[m?.display_model,j?.mhe_predictions?.study_intent]),{shouldHideNavResults:W,navResultsPosition:X}=Pzt({classifierResults:j,resultStatus:m?.status??""}),G=f.useMemo(()=>!Ozt.NEXT_PUBLIC_IS_SIDECAR_BUILD&&!W&&$&&$.length>0&&m.attachments?.length===0&&!Q&&g===ie.SEARCH&&!Y,[W,$,m.attachments?.length,Q,g,Y]),J=f.useMemo(()=>G&&X==="top",[G,X]),q=f.useMemo(()=>G&&X==="bottom"&&!d,[G,X,d]);f.useEffect(()=>{O.maybeSendSearchResult(p,x,b)},[b,z,p,O,x]);const te=f.useCallback(()=>{F&&(m?.query_source==="default_search"?u("web.frontend.omnisearch_nav_results_shown",{omnisearch:w()!==0}):u("web.frontend.nav_results_shown"))},[F,m?.query_source,u,w]),re=f.useMemo(()=>q?o.jsx(a7,{shouldRenderPrimaryCard:!1,navResults:$,queryStr:C,querySource:m?.query_source,backendUUID:m?.backend_uuid,frontendUUID:m?.frontend_uuid,trackCitationClickEvent:M,onMount:te,renderPosition:"bottom"}):null,[q,$,C,m?.query_source,m?.backend_uuid,m?.frontend_uuid,M,te]),ae=f.useCallback(()=>{R("bugReportModal",null)},[R]);return o.jsxs("div",{className:"gap-y-sm flex flex-col",ref:E,children:[o.jsx(Lzt,{backend_uuid:m?.backend_uuid,onBugReportClick:ae}),J&&o.jsx(a7,{navResults:$,queryStr:C,querySource:m?.query_source,backendUUID:m?.backend_uuid,frontendUUID:m?.frontend_uuid,trackCitationClickEvent:M,onMount:te}),o.jsx(f6e,{submitQuery:t,shouldShowProductFeedback:n,feedbackEntryUUID:r,shouldShowRecruitmentBanner:s,deleteLastResult:a,setQuote:i,shouldShowNavResults:G,sbsEntriesGroup:e,bottomNavResults:re,autoScroll:!J})]})});m6e.displayName="ThreadContent";const Dzt=({hasPendingFiles:e,attachments:t=ue,attachment_processing_progress:n=ue})=>{const{$t:r}=Z(),s=f.useMemo(()=>e?[{description:r({defaultMessage:"Processing attachments...",id:"nCVqMMwJ07"}),final:!1,id:"pending-files-goal",steps:[{step_type:"PENDING_FILES",content:{attachments:t,attachmentProcessingProgress:n},uuid:"pending-files-step"}]}]:[],[r,n,t,e]),a=f.useMemo(()=>!e||n.some(l=>l.file_url==="end"),[n,e]),i=f.useMemo(()=>a?null:s.length>0?s[0]:null,[a,s]);return f.useMemo(()=>({pendingFilesGoals:s,activePendingFileGoal:i,isFileProcessingDone:a}),[s,i,a])},Fzt=({isAllPlansFinished:e,researchPlan:t,reasoningGoals:n,isStudio:r,hasPendingFiles:s,displayModel:a})=>{const i=f.useMemo(()=>a===le.O3_PRO||r?!1:!(e||t||n.length>0||s),[a,r,e,t,n.length,s]);return f.useMemo(()=>({shouldShowPlaceholderGoal:i}),[i])},Uzt=({researchPlan:e,steps:t,searchMode:n,isResearchPlanFinished:r,backendUUID:s})=>{const a=n===ie.RESEARCH,i=n===ie.STUDIO,l=Bzt({backendUUID:s,steps:t,isResearchPlanFinished:r}),c=f.useMemo(()=>{if(!e)return{};if(e.goals.length===1){const m=e.goals[0];return m?{[m.id]:{...m,steps:t.filter(p=>p.step_type!=="INITIAL_QUERY"&&p.step_type!=="TERMINATE")}}:{}}return e.goals.reduce((m,p)=>{const h={...p,steps:t.filter(g=>"goal_id"in g.content?g.content.goal_id===p.id&&g.step_type!=="INITIAL_QUERY"&&g.step_type!=="TERMINATE":!1)};return m[h.id]=h,m},{})},[e,t]),u=f.useMemo(()=>{const m=Object.keys(c);if(m.length===0)return null;const p=t.at(-1),h=m.at(-1);return h?((a||i)&&p?.step_type!=="TERMINATE",c[h]):null},[c,t,a,i]),d=f.useMemo(()=>[...Object.values(c),...l],[c,l]);return f.useMemo(()=>({activeResearchGoal:u,researchGoals:d}),[u,d])},Bzt=({backendUUID:e,steps:t,isResearchPlanFinished:n})=>{const r=Z(),{pendingClarifications:s,clearClarifications:a}=C$(),i=f.useMemo(()=>{if(n||!e)return[];const l=new Set(t.map(d=>d.uuid)),c=new Set;return t.forEach(d=>{d.step_type==="CLARIFYING_QUESTIONS_OUTPUT"&&d.content?.clarification&&c.add(d.content.clarification)}),s.filter(d=>d.entryUUID===e&&!l.has(d.UUID)&&!c.has(d.content)).map((d,m)=>({description:d.question??r.formatMessage({defaultMessage:"I'll consider the details you added.",id:"46H8Trfeps"}),final:!1,id:`c-${m}`,steps:[{content:{goal_id:`c-${m}`,clarification:d.content,question:d.question},step_type:"CLARIFYING_QUESTIONS_OUTPUT",uuid:d.UUID}]}))},[r,s,e,n,t]);return f.useEffect(()=>{n&&s.length&&a()},[a,n,s]),i},Vzt=({onExit:e})=>{const t=f.useRef(e);t.current=e,f.useEffect(()=>{const n=performance.now();return()=>{const r=Math.round(performance.now()-n);t.current(r)}},[])},woe=ee({defaultMessage:"Download as PDF",id:"camH0DLf91"}),Coe=ee({defaultMessage:"Download as PPTX",id:"MbQGjmBtrT"}),QW=93,p6e=I.memo(()=>{const{assets:e}=tf(),{result:{backend_uuid:t,frontend_context_uuid:n}}=an(),{trackEvent:r}=Ne();return Vzt({onExit:a=>{r("answer mode tab exited",{answerMode:"apps",entryUUID:t,contextUUID:n,durationMs:a})}}),f.useMemo(()=>{let a=null;for(let i=e.length;i>=0;i--){const l=e[i];if(a=Br(l).with({asset_type:Bt.APP,app:qc.nonNullable},({app:c})=>o.jsx(o7,{app:c})).with({asset_type:Bt.SLIDES,app:qc.nonNullable},({app:c})=>o.jsx(o7,{app:c})).otherwise(()=>null),a)break}return a},[e])});p6e.displayName="AppsMode";const XW=I.memo(({url:e,height:t,iframeRef:n})=>qge(e)?null:o.jsx("div",{className:"scrollbar-subtle size-full",children:o.jsx("iframe",{ref:n,src:e,title:"Embedded App",sandbox:"allow-scripts allow-popups allow-popups-to-escape-sandbox allow-forms",referrerPolicy:"no-referrer",width:"100%",height:t?`${t}px`:"100%",loading:"eager",style:{colorScheme:"normal"}})}));XW.displayName="AppAssetIframe";const o7=I.memo(({app:e})=>{const t=f.useRef(null),{scrollContainerRef:n}=Oa(),r=(n.current?.clientHeight??1e3)-QW,s=f.useMemo(()=>$s((a,i)=>{a.scrollIntoView({behavior:"smooth",block:"end"}),i&&(i.style.overflowY="hidden",i.style.overflowX="hidden")},100,{leading:!1,trailing:!0}),[]);return f.useEffect(()=>{const a=()=>{const i=document.activeElement,l=n.current;i===t.current&&i&&l?s(i,l):l&&l.style.overflowY==="hidden"&&(l.style.overflowY="auto",l.style.overflowX="auto")};return window.addEventListener("focus",a,!0),window.addEventListener("blur",a,!0),()=>{window.removeEventListener("focus",a,!0),window.removeEventListener("blur",a,!0)}},[s,n]),o.jsx("div",{className:"-mx-4 -mt-4",children:o.jsx(XW,{url:e.url,height:r,iframeRef:t})})});o7.displayName="AppAsset";const h6e=e=>{const t=f.useRef(null),[n,r]=f.useState(1),s=f.useRef(null),a=f.useCallback(i=>{if(s.current&&(s.current.disconnect(),s.current=null),t.current=i,!i)return;const l=u=>{const d=u[0]?.contentRect.width??e,m=Math.min(1,d/e);r(m)};l([{contentRect:{width:i.clientWidth}}]);const c=new ResizeObserver(l);c.observe(i),s.current=c},[e]);return Hd(()=>{s.current&&s.current.disconnect()}),f.useMemo(()=>({scale:n,containerRef:a}),[n,a])},g6e=I.memo(({app:e,entryUuid:t,asset:n})=>{const{scale:s,containerRef:a}=h6e(1200),{$t:i}=Z(),{trackEvent:l}=Ne(),{assets:c}=tf();hU({assetType:Bt.APP,entryUUID:t,answerMode:"search",reason:"apps-mode"});const u=f.useCallback(()=>{const x=new URL(window.location.href);x.pathname=`/apps/${t}`,window.open(x.toString(),"_blank","noopener,noreferrer")},[t]),d=f.useMemo(()=>({height:`${1200*(9/16)*s}px`}),[s]),{canUseCanvas:m}=F_(),p=i$t(c),h=a$t(n),g=f.useCallback(()=>{l("generated asset downloaded",{assetType:Bt.CODE_FILE,answerMode:"apps",entryUUID:t,reason:"powerpoint-export"})},[t,l]),y=f.useCallback(()=>{l("generated asset downloaded",{assetType:Bt.SLIDES,answerMode:"apps",entryUUID:t,reason:"pdf-export"})},[t,l]),v=f.useMemo(()=>o.jsx(ZW,{app:e,onLoad:kn,scale:s,originalWidth:1200}),[e,s]);return o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(H,{className:"relative aspect-video w-full overflow-hidden rounded-lg border shadow-sm",style:d,variant:"raised",as:"figure",ref:a,children:v}),!m&&o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(Ge,{href:"#",onClick:u,"aria-label":i({defaultMessage:"View full screen",id:"nnujdEvOPI"}),className:"text-quiet hover:text-super inline-flex items-center gap-1.5 text-xs font-normal transition-opacity",children:[o.jsx(ce,{icon:ple,size:"xs",className:"-mt-px"}),i({defaultMessage:"View full screen",id:"nnujdEvOPI"})]}),p&&o.jsxs(Ge,{href:p,download:!0,onClick:g,"aria-label":i(Coe),className:"text-quiet hover:text-super inline-flex cursor-pointer items-center gap-1.5 text-xs font-normal transition-opacity",children:[o.jsx(ce,{icon:H7,size:"xs",className:"-mt-px"}),o.jsx(pe,{...Coe})]}),h&&o.jsxs(Ge,{href:`${e.url}?print=1`,target:"slidesPrintWindow",onClick:y,"aria-label":i(woe),className:"text-quiet hover:text-super inline-flex items-center gap-1.5 text-xs font-normal transition-opacity",children:[o.jsx(ce,{icon:dm,size:"xs",className:"-mt-px"}),o.jsx(pe,{...woe})]})]})]})},({app:e,...t},{app:n,...r})=>kge(t,r)&&as(e,n));g6e.displayName="ResponsiveAppAsset";const ZW=I.memo(({app:e,onLoad:t,scale:n,originalWidth:r})=>qge(e.url)?null:o.jsx("iframe",{src:e.url,title:"Embedded App",sandbox:"allow-scripts allow-popups allow-popups-to-escape-sandbox allow-forms",referrerPolicy:"no-referrer",width:`${r}px`,height:`${r*(9/16)}px`,loading:"eager",className:"inert absolute left-0 top-0 origin-top-left",onLoad:t,style:{colorScheme:"normal",transform:`scale(${n})`}}));ZW.displayName="PreviewIframe";const $zt=Object.freeze(Object.defineProperty({__proto__:null,ANSWER_MODE_TABS_HEIGHT:QW,AppAssetIframe:XW,AppsMode:p6e,PreviewIframe:ZW,ResponsiveAppAsset:g6e,useResponsiveScale:h6e},Symbol.toStringTag,{value:"Module"})),Wzt=(e,t,n=!1)=>{const[r,s]=f.useState(!1),[a,i]=f.useState(!1),l=f.useContext(IU),c=f.useRef(l?.scrollContainerRef?.current??null),u=f.useCallback(()=>{if(!n)return;const d=e?.current;d&&(r||(i(!0),d.scrollTo({top:d.scrollHeight,behavior:"smooth"}),setTimeout(()=>{i(!1)},500)))},[n,e,r]);return f.useEffect(()=>{const d=m=>{const p=c?.current;m&&p&&setTimeout(function h(g=0,y=0){const v=m.getBoundingClientRect().top;if(g!==v&&y<100){setTimeout(()=>h(v,++y),20);return}const x=p.scrollTop??0,b=v+x-QW;requestAnimationFrame(()=>p.scrollTo({top:b,behavior:"smooth"}))},20)};t&&setTimeout(()=>{const m=document.getElementById(t);if(m){const p=m.closest(".group\\/goal");p&&d(p)}},150)},[t]),f.useEffect(()=>{const d=()=>{const p=e?.current;if(!p||a)return;const h=p.scrollHeight-p.scrollTop<=p.clientHeight+10;s(!h)},m=e?.current;if(m)return m.addEventListener("scroll",d),()=>m.removeEventListener("scroll",d)},[e,a]),f.useMemo(()=>({handleAnimationComplete:u}),[u])},Dsn=(e,t,n,r,s)=>e.map((a,i)=>{const l=t?.id===a.id,c=t&&e.indexOf(t)>e.indexOf(a)||n;let u="planned";return c?u="finished":l&&(u="loading"),{...a,key:`${r}-${a.id?a.id+"-":""}${i}`,id:a.id??`${r}-${i}`,status:u,planType:r,animateEntry:!(i===0&&s.skipFirstAnimation)&&!c,web_results:s.web_results,isFinalGoal:!1,title:a?.description??s.$t({defaultMessage:"Thinking",id:"P1QHV0AhYD"})}}),Hzt=({researchPlan:e,steps:t,reasoningPlan:n,isProReasoningMode:r,hasAnswer:s,searchMode:a,focusStepUUID:i,autoScroll:l=!1})=>{const{askInputReasoningMode:c}=Jn(),{scrollContainerRef:u}=Oa(),{result:{backend_uuid:d,blocks:m,attachments:p,attachment_processing_progress:h,display_model:g},isAnswerSkipped:y,hasPendingFiles:v}=an(),x=typeof r=="boolean"?r:c,b=zAe({researchPlan:e,reasoningPlan:n,blocks:m??[],hasAnswer:s,isProReasoningMode:x,displayModel:g}),_=Uzt({researchPlan:e,steps:t??[],searchMode:a,isResearchPlanFinished:b.isResearchPlanFinished,backendUUID:d??""}),w=Dzt({hasPendingFiles:v,attachments:p,attachment_processing_progress:h}),C=Fzt({isAllPlansFinished:b.isAllPlansFinished,researchPlan:e,reasoningGoals:b.reasoningGoals,isStudio:a===ie.STUDIO,hasPendingFiles:v,displayModel:g}),S=Wzt(u,i,l);return f.useMemo(()=>({...b,..._,...C,...S,...w,isProReasoningMode:x,searchMode:a,isAnswerSkipped:y}),[b,_,C,S,w,x,a,y])};function y6e({entryUUID:e,reason:t,callback:n}){const[r,s]=f.useState(!1),a=f.useRef(!1),{inFlight:i}=Vt();return f.useEffect(()=>{!i&&a.current&&(a.current=!1,s(!1),n())},[i,n]),{terminateEntry:()=>{a.current=!0,s(!0),lu({entryUUID:e,reason:t})},isTerminating:r}}const zzt=(e,t)=>{const{value:n,loading:r}=It({flag:"generative-refinement",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Soe=["hotels","places","shopping"];function Gzt(){const{result:e,refinementFiltersData:t,selectedRefinementQuery:n,selectedFilterIds:r,actions:{setSelectedRefinementQuery:s,setSelectedFilterIds:a},submitQuery:i,result:{query_str:l}}=an(),{updateCurrentMode:c}=uw(),{trackEvent:u}=Ne(),{currentModeData:{mode:d}}=tf(),{variation:m,loading:p}=zzt(!1),h=t?.refinement_filters,g=f.useMemo(()=>t?.original_query??l??"",[t?.original_query,l]),y=f.useMemo(()=>r.map(O=>h?.find(L=>L.id===O)?.label).filter(O=>!!O),[r,h]),v=f.useCallback(O=>{u("refinement filter clicked",{filters:h?.filter(L=>L.id===O),answerMode:d})},[h,d,u]),x=f.useCallback(()=>{u("refinement filters reset",{answerMode:d})},[d,u]),b=f.useCallback(()=>{u("refinement filters applied",{answerMode:d,filters:h?.filter(O=>r.includes(O.id))})},[d,u,h,r]),[_,w]=f.useState(!1),C=f.useCallback(O=>{const L=r.includes(O);let P;L?P=r.filter(N=>N!==O):P=[...r,O],a(P),v(O)},[r,a,v]),S=f.useCallback(()=>{s(g),a([]),x()},[a,s,g,x]),E=f.useCallback(()=>{c("default"),i({rawQuery:g,existingEntryUUID:e.backend_uuid,newFrontendContextUUID:null,collection:null,promptSource:"user",querySource:"refinement-pill",refinementFiltersMetadata:{refinement_filters:h,selected_filter_ids:[],original_query:g}}),x()},[c,e.backend_uuid,h,g,i,x]),M=f.useCallback(()=>{s(null),a([...t?.selected_filter_ids??[]])},[s,a,t]),k=f.useCallback(async()=>{if(y.length===0)return g;w(!0);try{const O=await d4t({query:g,keywords:y,reason:"refinement-query"});return O||y.join(" ")+" "+g}catch{return y.join(" ")+" "+g}finally{w(!1)}},[y,g]),A=f.useCallback(async()=>{const O=await k();s(O),c("default"),i({rawQuery:O,existingEntryUUID:e.backend_uuid,newFrontendContextUUID:null,collection:null,promptSource:"user",querySource:"refinement-pill",refinementFiltersMetadata:{refinement_filters:h,selected_filter_ids:r,original_query:g}}),b()},[k,s,i,e.backend_uuid,h,r,g,b,c]),R=f.useCallback(async()=>{const O=await k();s(O),b()},[k,s,b]);return{refinementFilters:m&&!p?h:null,selectedRefinementQuery:n,selectedFilterIds:r,handleFilterClickAnswerMode:C,handleResetClickAnswerMode:S,handleResetClickDefaultMode:E,handleApplyClickDefaultMode:A,handleApplyClickAnswerMode:R,isRefinementLoading:_,handleResetToOriginalState:M,originalQuery:g}}const i7=f.memo(({title:e,filters:t,selectedFilterIds:n,onFilterClick:r,isOpen:s,onToggle:a,useCheckboxes:i=!1})=>o.jsxs(H,{className:"cursor-pointer border-b",children:[o.jsxs(H,{onClick:a,className:"p-md group flex w-full cursor-pointer items-center",children:[o.jsx("div",{className:"flex-1",children:o.jsx(D,{variant:"smallBold",children:e})}),o.jsx("div",{className:"pl-md",children:o.jsx(ge.div,{animate:{rotate:s?180:0},transition:{duration:.2,ease:rn},className:"text-quiet group-hover:text-foreground",style:{transformOrigin:"center"},children:o.jsx(Dn,{size:18,strokeWidth:2.5})})})]}),o.jsx(zs,{transition:{duration:.2,ease:rn},children:s&&o.jsx(Qr,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.15,ease:rn},children:o.jsx("div",{className:"px-md pb-md",children:i?o.jsx("div",{className:"gap-xs flex flex-col",children:t.map(l=>o.jsxs("div",{className:"py-xs flex cursor-pointer items-center justify-between",onClick:()=>r(l.id),children:[o.jsx(D,{variant:"small",children:l.label}),o.jsx(e_,{checked:n?.includes(l.id)??!1,toggleChecked:()=>r(l.id),variant:"small"})]},l.id))}):o.jsx("div",{className:"gap-sm flex flex-wrap",children:t.map(l=>o.jsx(he,{text:l.label,size:"small",variant:n?.includes(l.id)?"common":"border",onClick:()=>r(l.id),extraCSS:"flex-shrink-0"},l.id))})})})})]}));i7.displayName="FilterSection";const v6e=f.memo(({refinementFilters:e,handleFilterClick:t,selectedFilterIds:n,isOpen:r,setIsOpen:s,handleResetClick:a,handleApplyClick:i,isLoading:l=!1})=>{const{isMobileStyle:c}=xe(),{$t:u}=Z(),d=f.useMemo(()=>e?.filter(b=>b.refinement_filter_type==="DYNAMIC")??[],[e]),m=f.useMemo(()=>{const b={};return e?.filter(_=>_.refinement_filter_type==="STATIC").forEach(_=>{const w=_.category||"Other";b[w]||(b[w]=[]),b[w].push(_)}),b},[e]),[p,h]=f.useState(()=>{const b={"Quick filters":!0};return d.some(w=>n?.includes(w.id))&&(b["Quick filters"]=!0),Object.entries(m).forEach(([w,C])=>{const S=C.some(E=>n?.includes(E.id));b[w]=S}),b}),g=f.useCallback(b=>{h(_=>({..._,[b]:!_[b]}))},[]),y=f.useCallback(()=>{s(!1)},[s]),v=f.useCallback(()=>g("Quick filters"),[g]);return f.useMemo(()=>d.length>0||Object.keys(m).length>0,[d,m])?o.jsx(en,{modalContentClassname:"!py-0 mb-0 min-h-0 px-0",modalClassname:B("[&_>div]:min-h-0",!c&&"!w-[300px] !min-w-[300px]"),isOpen:r,onClose:y,variant:c?"bottom-sheet":"side-sheet",includeBlur:!1,removeScroll:!1,transparent:!0,renderCloseButton:!1,headerClassname:"hidden",children:o.jsxs("div",{className:"-mx-md flex min-h-0 flex-1 flex-col",children:[o.jsxs(H,{className:"p-md flex items-center justify-between border-b",children:[o.jsx(D,{variant:"smallBold",children:u({defaultMessage:"Filters",id:"zSOvI0LO0n"})}),o.jsx("button",{onClick:y,className:"text-quiet hover:text-foreground cursor-pointer",children:o.jsx(ce,{icon:Rt,size:"md"})})]}),o.jsxs("div",{className:"scrollbar-subtle flex min-h-0 flex-1 flex-col overflow-y-auto overflow-x-hidden",children:[d.length>0&&o.jsx(i7,{title:"Recommended",filters:d,selectedFilterIds:n,onFilterClick:t,isOpen:p["Quick filters"]??!0,onToggle:v}),Object.entries(m).map(([b,_])=>o.jsx(i7,{title:b,filters:_,selectedFilterIds:n,onFilterClick:t,isOpen:p[b]??!1,onToggle:()=>g(b),useCheckboxes:!0},b))]}),o.jsxs("div",{className:"gap-md p-md flex pb-0",children:[o.jsx(he,{text:u({defaultMessage:"Reset",id:"jm/spnRSn+"}),size:"regular",variant:"common",onClick:a,extraCSS:"flex-1"}),o.jsx(he,{text:u({defaultMessage:"Apply",id:"EWw/tKINJT"}),size:"regular",variant:"primary",onClick:i,extraCSS:"flex-1",disabled:l,isLoading:l})]})]})}):null});v6e.displayName="RefinementSidePanel";const qzt=10,Kzt=async({request:e,reason:t})=>{if(e.page&&e.page>qzt)throw new Error("Max search results page number is too large");return(await se.POST("/rest/sources/search",t,{body:{entry_uuid:e.entry_uuid,limit:e.limit,page:e.page??null},timeoutMs:Ut.MEDIUM})).data},Yzt=({reason:e})=>{const{mutate:t,data:n,isPending:r}=vt({mutationFn:async s=>(await Kzt({request:s,reason:e})).results});return f.useMemo(()=>({isSearchResultsLoading:r,searchResults:n,fetchSearch:t}),[t,r,n])};function x6e(){const{value:e}=It({flag:"move-citations-to-paragraph-end",subjectType:"visitor_id",defaultValue:!0});return e}typeof globalThis<"u"&&(globalThis.__useMoveCitationsToParagraphEnd=x6e);const b6e=I.memo(({webResult:e,citationIndex:t,isRelatedResult:n,linkOnClick:r,imageToShow:s})=>{const{$t:a,formatDate:i}=Z(),l=f.useMemo(()=>Ta(e.url),[e.url]),c=f.useMemo(()=>Kb(e.url),[e.url]),u=e.is_client_context,d=fn(),m=f.useMemo(()=>e.meta_data?.domain_name??l.replace(/\.[^.]*$/,""),[l,e.meta_data?.domain_name]),p=Za(e.url),h=$ge(e),g=e.meta_data?.connection_type,y=x6e(),v=e.meta_data?.repo_type,x=!u||d,b=y3(e),_=Jot(e),w=Zb(e),C=()=>v=="COLLECTION"?a({defaultMessage:"Space Context",id:"wGTk8CFt1g"}):v=="USER"?a({defaultMessage:"My Files",id:"AjhJXSvkRs"}):v=="ORG"?a({defaultMessage:"Org Files",id:"DaFSYzpM1Q"}):a({defaultMessage:"Attachment",id:"eLCAEP8LHj"}),S=()=>e.meta_data?.repo_type=="COLLECTION"?a({defaultMessage:"File",id:"gyrIElu9qY"}):e.meta_data?.connection_type?kJe(e.meta_data.connection_type):a({defaultMessage:"Local upload",id:"fscjAJoLwa"}),E=f.useMemo(()=>o.jsx(wt,{size:"tiny",showBackground:!1,rounded:!1,user:bo(g)??void 0}),[g]);let M=null,k="",A=null;if(p||h||g&&g!==Tt.WILEY)M=o.jsx("div",{className:"bg-subtler flex size-7 items-center justify-center rounded-full",children:g?o.jsx(ce,{icon:vie,size:"xl",badge:E}):o.jsx(ce,{icon:cm,className:"size-md",size:"xl"})}),A=o.jsx(D,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:S()}),k=C();else if(b&&!w)M=o.jsx("div",{className:"bg-subtle flex size-7 items-center justify-center rounded-full",children:o.jsx(ce,{size:"xl",icon:e.is_memory?Kc:Zg})}),A=o.jsx(D,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:e.timestamp&&i(e.timestamp,{dateStyle:"long"})}),k=e?.is_memory?a({defaultMessage:"Memory",id:"dVx3yznM2C"}):a({defaultMessage:"Library",id:"StcK672jB9"});else{const R=g===Tt.WILEY?ou:void 0;M=o.jsx(zi,{size:28,domain:c,className:"size-full rounded-full",overrideIconUrl:R}),k=m,A=w?o.jsxs("div",{className:"gap-xs -ml-two flex flex-row items-center",children:[o.jsx(D,{variant:"tiny",color:"super",className:"-translate-y-px",children:o.jsx(ce,{size:"xs",icon:kx})}),o.jsx(D,{variant:"tinyRegular",color:"super",className:"line-clamp-1",children:o.jsx(pe,{defaultMessage:"Personal Search",id:"TZougEncQH",description:"subtitle"})})]}):o.jsx(D,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:Vat(Hge(e.url))})}return o.jsx("div",{className:"gap-md relative items-start",children:o.jsxs("div",{className:"gap-lg relative flex w-full flex-row items-center lg:pl-0",children:[o.jsxs("div",{className:"grow",children:[o.jsxs(Ge,{href:e.url,className:B("group/source flex flex-1 flex-col gap-1",{"cursor-pointer":!p&&x}),onClick:r,children:[o.jsxs("div",{className:"gap-sm flex flex-row items-center",children:[o.jsx("div",{className:"size-7 shrink-0",children:M}),o.jsxs("div",{className:"flex flex-1 flex-col",children:[o.jsx("div",{className:"flex flex-row items-center gap-1.5",children:o.jsxs(D,{variant:"tiny",className:"line-clamp-1",children:[!n&&t&&!y?t+". ":null,k]})}),A]}),b&&o.jsx(D,{variant:"tiny",color:"light",children:o.jsx(ce,{size:"xs",icon:kx})})]}),_?null:o.jsx(D,{variant:"baseSemi",color:"super",className:B("line-clamp-1 transition-colors duration-300",{"group-hover/source:text-super":!p&&x}),children:e.name})]}),o.jsx(D,{variant:"small",color:"light",className:B("line-clamp-3 whitespace-pre-wrap",{"pt-2":_}),children:e.meta_data?.generated_file_description??e.meta_data?.description??e.snippet})]}),s&&o.jsxs(Ge,{href:e.url,className:"relative ml-auto hidden aspect-square h-fit w-20 shrink-0 cursor-pointer overflow-hidden rounded-md sm:block",onClick:r,children:[o.jsx(fs,{src:s,alt:"image",containerClassName:"absolute inset-0",imageClassName:"absolute inset-0 object-cover object-center w-full h-full",includeLightBoxModal:!1}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"})]})]})})});b6e.displayName="PrimitiveSourcesRow";const JW=I.memo(({webResult:e,citationIndex:t,isRelatedResult:n})=>{const r="sources-row",{result:{backend_uuid:s,context_uuid:a,frontend_context_uuid:i}}=an(),l=Zn(),c=fn(),u=Za(e.url),{trackEvent:d}=Ne(),m=f.useCallback((C,S)=>{c&&l.openTab({url:C,tabId:S})},[c,l]),{mutate:p}=mge({reason:r,onSuccess:c?m:void 0}),h=zW(),g=y3(e),y=Zb(e),{getImageDownloadUrl:v}=dV({reason:r}),[x,b]=f.useState(null);f.useEffect(()=>{x===null&&(async()=>{if(!u){b(e.url);return}if(iU(e.url)){b(e.url);return}try{const S=await v({url:e.url,thread_id:s});b(S)}catch(S){ne.error(`Failed to fetch image source ${S}`),b(e.url)}})()},[v,s,e,u,x]),f.useEffect(()=>{d("source card viewed",{citation_url:e.url,position:t,title:e.name,contextUUID:a,frontendContextUUID:i,entryUUID:s,source:n?"sourcesTabViewMore":"sourcesTab"})},[e,d,t,n,a,i,s]);const _=f.useCallback(C=>{try{const E=e.meta_data?.file_uuid?"fileRepositoryFile":e.is_attachment?"fileAttachment":n?"sourcesTabViewMore":"sourcesTab",M=Vye(e),{type:k,memoryKey:A}=M;d("click citation",{citation_url:e.url,contextUUID:a,frontendContextUUID:i,entryUUID:s,isMemory:e.is_memory,isConversationHistory:e.is_conversation_history,source:E,...k==="memory"&&{memory_key:A}})}catch(E){ne.error("Failed to send click citation event:",E)}if(g&&!y){C.preventDefault(),h(e);return}if(Ey(e)){C.preventDefault(),p({file_url:e.url});return}if(u3(C)){C.preventDefault(),l.openTab({url:e.url,tabId:e.tab_id});return}},[g,e,n,d,a,i,s,h,l,p,y]),w=f.useMemo(()=>{if(u)return x;if(typeof e.meta_data?.image_url=="string")return e.meta_data.image_url;if(typeof e.meta_data?.images?.[0]=="string")return e.meta_data.images[0];if(typeof e.meta_data?.images?.[0]?.src=="string")return e.meta_data.images[0].src},[u,e,x]);return o.jsx(b6e,{webResult:e,citationIndex:t,isRelatedResult:n,linkOnClick:_,imageToShow:w})});JW.displayName="SourcesRow";var Qzt={};const Xzt=10,Zzt=fn(),_6e=I.memo(()=>{const e="sources-mode",{$t:t}=Z(),n=w6e({dedupeAttachments:!0}),{isEntryInFlight:r,result:s}=an(),{fetchSearch:a,isSearchResultsLoading:i}=Yzt({reason:e}),[l,c]=f.useState(1),[u,d]=f.useState([]),m=rt(),{openModal:p}=xt(),h=f.useCallback(()=>{const v=l+1;a({entry_uuid:s.backend_uuid??"",limit:Xzt,page:v},{onSuccess:x=>{d([...u,...x]),c(v)}})},[l,a,u,s.backend_uuid]),g=f.useCallback(()=>{if(!m){p("loginModal",{origin:Oe.SOURCES_VIEW_MORE});return}h()},[h,m,p]),y=!Zzt&&!Qzt.NEXT_PUBLIC_IS_SIDECAR_BUILD;return o.jsxs("div",{children:[o.jsx(Zp,{heading:n.selectedSources?.length>0?t({defaultMessage:"Attached",id:"2IacYt8NB7"}):void 0,sources:n.attachedSources}),o.jsx(Zp,{heading:n.attachedSources?.length>0?t({defaultMessage:"Sourced",id:"P5KqlvUgRC"}):void 0,sources:n.selectedSources}),o.jsx(Zp,{heading:t({defaultMessage:"Reviewed",id:"wiy+GNv+BV"}),sources:n.reviewedSources}),o.jsx(Zp,{heading:t({defaultMessage:"Reviewing",id:"L+ISAVX7+d"}),sources:n.reviewingSources,shimmer:!0}),o.jsx(Zp,{sources:n.unsortedSources}),y&&o.jsxs(Ke,{mode:"wait",children:[l===1&&o.jsx(ge.div,{animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:Po,className:"mt-md flex w-full items-center justify-center",children:o.jsx(he,{variant:"common",isLoading:i||r,disabled:i||r,size:"small",text:t({defaultMessage:"View More",id:"QQSdHPJWXu"}),onClick:g,pill:!0})},"masher"),u.length>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"my-md md:mt-lg relative md:ml-0",children:[o.jsx("hr",{className:"bg-subtle absolute top-1/2 h-px w-full border-0"}),o.jsx(D,{variant:"tiny",color:"light",className:"mb-md bg-base pr-sm relative z-[1] w-fit",children:t({defaultMessage:"More Results",id:"7S7CM3eEfJ"})})]}),o.jsx(H,{className:"py-sm flex flex-col gap-4",children:u.map((v,x)=>o.jsx(JW,{webResult:v,citationIndex:x,isRelatedResult:!0},v.url))})]}):null]})]})});_6e.displayName="SourcesMode";const Zp=I.memo(({sources:e,heading:t,shimmer:n=!1})=>e.length===0?null:o.jsxs("div",{className:"my-md md:mt-lg group first:mt-0",children:[t?o.jsxs("div",{className:"mb-md relative",children:[o.jsx("hr",{className:"bg-subtle absolute top-1/2 h-px w-full border-0 group-first:hidden"}),o.jsx("div",{className:"bg-base",children:o.jsx(D,{variant:"tiny",color:"light",className:"mb-md bg-base pr-sm relative z-[1] w-fit",children:o.jsx(yn,{variant:"super",active:n,as:"span",children:t})})})]}):null,o.jsx(H,{className:"flex flex-col gap-4",children:e.map(r=>o.jsx(JW,{webResult:r.web_result,citationIndex:r.citation},r.web_result?.url))})]}));Zp.displayName="SourcesModeSection";const w6e=({dedupeAttachments:e=!1})=>{const{result:t,blocksByIntendedUsage:{sources_answer_mode:n}}=an(),r=Jzt({attachments:t.attachments??ue});return f.useMemo(()=>{const s=new Map,a=[];for(const m of n?.sources_mode_block?.rows??[]){const p=m.web_result?.is_attachment&&!Wge(m.web_result);if(p&&a.push(m),!p||!e){const h=s.get(m.status)??[];h.push(m),s.set(m.status,h)}}const i=s.get(Iw.SELECTED)??ue,l=s.get(Iw.REVIEWED)??ue,c=s.get(Iw.REVIEWING)??ue,u=s.get(Iw.UNSORTED)??ue;a.length===0&&r.length>0&&a.push(...r);const d=[...i,...l,...c,...u].slice(0,3)?.map(m=>m.web_result?.url??"");return{attachedSources:a,selectedSources:i,reviewedSources:l,reviewingSources:c,unsortedSources:u,topSources:d}},[e,r,n?.sources_mode_block?.rows])},Jzt=({attachments:e})=>e.map(t=>({web_result:{name:p3(t),url:t,is_attachment:!0,is_image:Za(t),is_code_interpreter:!1,is_knowledge_card:!1,is_navigational:!1,is_widget:!1,sitelinks:[],snippet:"",timestamp:"",meta_data:{},inline_entity_id:""},status:"UNKNOWN",citation:0})),C6e=f.memo(({...e})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:1152,height:24,viewBox:"0 0 1152 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.75,...e,children:[o.jsx("path",{strokeOpacity:.2,d:"M9.056 19.122c-1.794.845-3.353 1.105-4.315.598-2.092-1.105-.533-5.471 3.47-9.734.39-.416.793-.82 1.196-1.21m5.563-3.911c1.781-.845 3.34-1.105 4.289-.598 2.092 1.105.533 5.47-3.47 9.734-.386.411-.784.81-1.196 1.196m4.536-.247c.845 1.794 1.105 3.353.598 4.315-1.105 2.092-5.471.533-9.734-3.47-.416-.39-.819-.793-1.209-1.196M4.871 9.024c-.845-1.781-1.105-3.34-.598-4.29 1.105-2.091 5.471-.532 9.734 3.47.412.386.81.785 1.196 1.197"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M13.306 12a1.3 1.3 0 1 0-2.6 0 1.3 1.3 0 0 0 2.6 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M33.057 19.12c-1.793.846-3.352 1.106-4.314.599-2.092-1.105-.533-5.471 3.469-9.733.388-.412.787-.815 1.195-1.208m5.562-3.912c1.78-.845 3.339-1.104 4.288-.598 2.092 1.104.533 5.47-3.469 9.733-.385.411-.784.81-1.195 1.195m4.534-.246c.845 1.793 1.105 3.352.598 4.314-1.104 2.092-5.47.533-9.733-3.47a35.174 35.174 0 0 1-1.208-1.194m-3.911-5.576c-.845-1.78-1.105-3.34-.598-4.288 1.104-2.092 5.471-.533 9.733 3.469.416.39.819.793 1.195 1.195"}),o.jsx("path",{strokeLinejoin:"round",d:"M28.873 9.024c-.404-.852-.674-1.653-.791-2.361"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M37.31 12a1.303 1.303 0 1 0-2.605-.001 1.303 1.303 0 0 0 2.605 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M57.058 19.117c-1.792.844-3.351 1.104-4.312.597-2.091-1.104-.532-5.468 3.468-9.727.389-.412.787-.815 1.195-1.208m5.559-3.909c1.779-.844 3.338-1.104 4.286-.597 2.091 1.104.532 5.468-3.468 9.727-.39.416-.792.818-1.195 1.195m4.532-.247c.844 1.792 1.104 3.351.597 4.312-1.104 2.091-5.468.532-9.727-3.468a34.994 34.994 0 0 1-1.208-1.195m-3.908-5.57c-.844-1.78-1.104-3.339-.597-4.287 1.104-2.09 5.468-.532 9.727 3.468.416.39.818.792 1.195 1.195"}),o.jsx("path",{strokeLinejoin:"round",d:"M52.877 9.026c-.844-1.779-1.104-3.338-.597-4.286.084-.16.188-.298.308-.416"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M61.32 12a1.313 1.313 0 1 0-2.626 0 1.313 1.313 0 0 0 2.626 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M81.061 19.111c-1.791.843-3.348 1.103-4.308.597-2.089-1.103-.532-5.463 3.465-9.719.388-.412.786-.814 1.194-1.207m5.553-3.906c1.778-.843 3.335-1.103 4.282-.597 2.089 1.103.532 5.463-3.465 9.72-.389.414-.791.817-1.194 1.193m4.529-.246c.843 1.791 1.103 3.348.597 4.308-1.103 2.09-5.463.532-9.719-3.465a35.026 35.026 0 0 1-1.207-1.194M76.883 9.03c-.843-1.778-1.103-3.335-.597-4.282 1.103-2.089 5.463-.532 9.719 3.465.41.385.81.783 1.194 1.194"}),o.jsx("path",{strokeLinejoin:"round",d:"M76.883 9.029c-.843-1.778-1.103-3.335-.597-4.282.44-.833 1.398-1.086 2.661-.836"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M85.337 12a1.33 1.33 0 1 0-2.661 0 1.33 1.33 0 0 0 2.661 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M105.064 19.102c-1.789.842-3.344 1.102-4.303.596-2.087-1.102-.531-5.456 3.46-9.707.387-.411.785-.813 1.192-1.205m5.548-3.901c1.776-.842 3.331-1.102 4.277-.596 2.087 1.102.531 5.456-3.461 9.707-.389.415-.791.817-1.192 1.192m4.524-.246c.842 1.789 1.102 3.344.596 4.303-1.102 2.087-5.456.531-9.707-3.461a34.803 34.803 0 0 1-1.205-1.192m-3.902-5.56c-.842-1.776-1.102-3.331-.596-4.277 1.102-2.087 5.456-.531 9.707 3.46.41.384.808.782 1.192 1.192"}),o.jsx("path",{strokeLinejoin:"round",d:"M100.891 9.032c-.842-1.776-1.102-3.331-.596-4.277.684-1.296 2.624-1.187 5.014.038"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M109.36 12a1.354 1.354 0 1 0-2.707 0 1.354 1.354 0 0 0 2.707 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M129.069 19.092c-1.786.841-3.339 1.1-4.296.595-2.083-1.1-.531-5.448 3.455-9.693.388-.414.789-.815 1.191-1.204m5.538-3.895c1.773-.841 3.326-1.1 4.271-.595 2.083 1.1.531 5.448-3.455 9.693-.388.414-.789.815-1.191 1.191m4.516-.246c.841 1.786 1.1 3.339.595 4.296-1.1 2.083-5.448.531-9.693-3.455a34.726 34.726 0 0 1-1.204-1.191m-3.894-5.551c-.841-1.773-1.1-3.326-.595-4.271 1.1-2.084 5.448-.531 9.693 3.455.41.384.807.781 1.191 1.191"}),o.jsx("path",{strokeLinejoin:"round",d:"M124.902 9.037c-.841-1.773-1.1-3.326-.595-4.271.871-1.651 3.781-1.02 7.063 1.296"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M133.389 12a1.383 1.383 0 1 0-2.766 0 1.383 1.383 0 0 0 2.766 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M153.074 19.079c-1.783.84-3.333 1.098-4.289.594-2.08-1.098-.53-5.438 3.449-9.676.388-.413.788-.814 1.188-1.201m5.53-3.888c1.77-.84 3.32-1.098 4.263-.594 2.08 1.098.53 5.438-3.449 9.676-.383.409-.779.805-1.188 1.188m4.508-.246c.84 1.783 1.098 3.333.594 4.289-1.098 2.08-5.438.53-9.676-3.45a35.478 35.478 0 0 1-1.201-1.187m-3.888-5.542c-.84-1.77-1.098-3.32-.594-4.263 1.098-2.08 5.438-.53 9.676 3.449.413.388.814.788 1.188 1.188"}),o.jsx("path",{strokeLinejoin:"round",d:"M148.915 9.042c-.84-1.77-1.098-3.32-.594-4.263 1.043-1.976 5.013-.675 9.04 2.87"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M157.424 12a1.42 1.42 0 0 0-2.419-1.001 1.42 1.42 0 0 0-.416 1.001 1.42 1.42 0 0 0 2.419 1.002 1.42 1.42 0 0 0 .416-1.002Z"}),o.jsx("path",{strokeOpacity:.2,d:"M177.08 19.065c-1.779.838-3.326 1.096-4.28.593-2.076-1.096-.529-5.427 3.442-9.656.387-.413.786-.812 1.186-1.199m5.518-3.88c1.766-.839 3.313-1.097 4.254-.594 2.076 1.096.529 5.427-3.442 9.656-.382.408-.778.804-1.186 1.186m4.499-.245c.838 1.78 1.096 3.326.593 4.28-1.096 2.076-5.427.53-9.656-3.442a35.011 35.011 0 0 1-1.199-1.186"}),o.jsx("path",{strokeOpacity:.2,d:"M172.929 9.048c-.838-1.766-1.096-3.313-.593-4.254 1.096-2.076 5.427-.529 9.656 3.442.408.382.804.778 1.186 1.186"}),o.jsx("path",{strokeLinejoin:"round",d:"M172.929 9.048c-.838-1.766-1.096-3.313-.593-4.254 1.096-2.076 5.427-.529 9.656 3.442.408.382.804.778 1.186 1.186"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M181.463 12a1.457 1.457 0 1 0-2.913 0 1.457 1.457 0 0 0 2.913 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M201.087 19.049c-1.775.836-3.319 1.093-4.27.592-2.071-1.093-.527-5.415 3.434-9.634.385-.408.779-.807 1.183-1.196m5.505-3.873c1.762-.836 3.306-1.093 4.245-.592 2.071 1.093.527 5.415-3.434 9.634-.381.407-.776.802-1.183 1.183m4.488-.243c.836 1.775 1.093 3.319.592 4.27-1.093 2.071-5.415.527-9.634-3.434-.408-.385-.807-.78-1.196-1.183"}),o.jsx("path",{d:"M211.055 14.92c.615 1.305.916 2.484.834 3.396"}),o.jsx("path",{strokeOpacity:.2,d:"M196.945 9.054c-.836-1.762-1.093-3.306-.592-4.245 1.093-2.071 5.415-.527 9.634 3.434.412.386.81.785 1.183 1.183"}),o.jsx("path",{strokeLinejoin:"round",d:"M197.355 3.996c1.797-.552 5.248 1.07 8.632 4.248l1.183 1.183"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M205.507 12a1.507 1.507 0 0 0-.439-1.06 1.51 1.51 0 0 0-1.061-.44 1.5 1.5 0 1 0 1.5 1.5Z"}),o.jsx("path",{strokeOpacity:.2,d:"M225.094 19.032c-1.771.834-3.311 1.091-4.26.59-2.066-1.09-.526-5.402 3.426-9.61.385-.412.783-.809 1.18-1.194m5.492-3.863c1.758-.834 3.298-1.09 4.234-.59 2.066 1.091.526 5.402-3.426 9.611-.381.406-.774.8-1.18 1.181m4.478-.244c.834 1.771 1.091 3.31.59 4.26-1.091 2.066-5.402.526-9.611-3.426a34.75 34.75 0 0 1-1.193-1.18"}),o.jsx("path",{d:"M235.038 14.913c.834 1.771 1.091 3.31.59 4.26-.385.73-1.173 1.01-2.216.892"}),o.jsx("path",{strokeOpacity:.2,d:"M220.962 9.062c-.834-1.758-1.091-3.298-.59-4.234 1.091-2.066 5.402-.526 9.611 3.426.406.38.8.774 1.181 1.18"}),o.jsx("path",{strokeLinejoin:"round",d:"M226.732 5.678a23.344 23.344 0 0 1 3.25 2.576l1.181 1.18"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M229.554 12a1.547 1.547 0 1 0-3.095.001 1.547 1.547 0 0 0 3.095 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M249.101 19.013c-1.766.832-3.302 1.088-4.249.59-2.061-1.089-.525-5.389 3.417-9.587.384-.41.781-.806 1.177-1.19"}),o.jsx("path",{d:"m247.027 11.438 1.242-1.422 1.177-1.19"}),o.jsx("path",{strokeOpacity:.2,d:"M254.925 4.973c1.753-.832 3.289-1.088 4.224-.589 2.061 1.088.525 5.388-3.417 9.586-.379.405-.772.798-1.177 1.177m4.465-.242c.832 1.766 1.088 3.302.589 4.25-1.088 2.06-5.388.524-9.586-3.418a34.575 34.575 0 0 1-1.19-1.177"}),o.jsx("path",{d:"M259.02 14.905c.832 1.766 1.088 3.302.589 4.25-.724 1.37-2.869 1.15-5.46-.313"}),o.jsx("path",{strokeOpacity:.2,d:"M244.98 9.07c-.832-1.754-1.088-3.29-.589-4.225 1.088-2.06 5.388-.525 9.586 3.417.41.384.806.781 1.177 1.177"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M253.603 12a1.596 1.596 0 1 0-3.192 0 1.596 1.596 0 0 0 3.192 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M273.109 18.995c-1.762.83-3.293 1.085-4.238.587-2.055-1.085-.523-5.374 3.408-9.561.383-.408.779-.804 1.174-1.187"}),o.jsx("path",{d:"M269.182 14.137c.734-1.301 1.781-2.714 3.097-4.115l1.174-1.187"}),o.jsx("path",{strokeOpacity:.2,d:"M278.917 4.992c1.749-.83 3.28-1.085 4.212-.587 2.055 1.085.523 5.374-3.408 9.56-.383.409-.779.805-1.174 1.175m4.454-.242c.83 1.762 1.085 3.293.587 4.238-1.085 2.055-5.374.523-9.561-3.408a34.4 34.4 0 0 1-1.187-1.174"}),o.jsx("path",{d:"M283.001 14.898c.83 1.762 1.085 3.293.587 4.238-.962 1.823-4.446.824-8.143-2.17"}),o.jsx("path",{strokeOpacity:.2,d:"M268.999 9.077c-.83-1.75-1.085-3.281-.587-4.212 1.085-2.055 5.374-.523 9.561 3.408.404.378.795.77 1.174 1.174"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M277.654 12a1.654 1.654 0 0 0-1.647-1.647A1.65 1.65 0 0 0 274.359 12a1.654 1.654 0 0 0 1.647 1.647A1.649 1.649 0 0 0 277.654 12Z"}),o.jsx("path",{strokeOpacity:.2,d:"M297.117 18.976c-1.757.828-3.284 1.082-4.226.586-2.05-1.082-.522-5.359 3.399-9.535.38-.404.771-.799 1.17-1.184"}),o.jsx("path",{d:"M292.005 17.363c.214-1.894 1.749-4.636 4.284-7.336l1.171-1.184"}),o.jsx("path",{strokeOpacity:.2,d:"M302.909 5.01c1.744-.826 3.272-1.081 4.201-.585 2.05 1.082.522 5.359-3.399 9.535-.382.407-.776.802-1.171 1.17"}),o.jsx("path",{strokeOpacity:.2,d:"M306.982 14.89c.828 1.757 1.082 3.284.586 4.226-1.082 2.05-5.359.522-9.535-3.4a35.405 35.405 0 0 1-1.184-1.17"}),o.jsx("path",{d:"M306.982 14.89c.828 1.757 1.082 3.284.586 4.226-1.082 2.05-5.359.522-9.535-3.4a35.405 35.405 0 0 1-1.184-1.17"}),o.jsx("path",{strokeOpacity:.2,d:"M293.017 9.085c-.827-1.744-1.082-3.272-.586-4.2 1.082-2.05 5.359-.523 9.535 3.398.403.378.794.768 1.171 1.171"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M301.705 12a1.697 1.697 0 1 0-3.395 0 1.697 1.697 0 0 0 3.395 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M321.124 18.957c-1.752.825-3.276 1.08-4.215.584-2.044-1.079-.521-5.345 3.39-9.509.381-.406.774-.8 1.168-1.18"}),o.jsx("path",{d:"M317.773 19.781a2.28 2.28 0 0 1-.863-.239c-2.044-1.079-.521-5.345 3.39-9.509.381-.406.774-.8 1.168-1.18"}),o.jsx("path",{strokeOpacity:.2,d:"M326.901 5.03c1.739-.825 3.263-1.079 4.19-.584 2.044 1.079.52 5.345-3.39 9.509-.381.406-.774.8-1.168 1.168m4.431-.241c.825 1.752 1.079 3.276.584 4.215-1.079 2.044-5.345.52-9.509-3.39-.403-.38-.797-.77-1.181-1.168"}),o.jsx("path",{d:"M330.572 19.896c-1.77.557-5.185-1.044-8.534-4.189l-1.181-1.168"}),o.jsx("path",{strokeOpacity:.2,d:"M317.036 9.093c-.825-1.739-1.079-3.263-.584-4.19 1.079-2.044 5.345-.521 9.509 3.39.402.377.791.766 1.168 1.168"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M325.757 12a1.747 1.747 0 0 0-1.75-1.75 1.749 1.749 0 1 0 1.75 1.75Z"}),o.jsx("path",{strokeOpacity:.2,d:"M345.132 18.94c-1.747.822-3.267 1.075-4.204.582-2.039-1.076-.519-5.33 3.381-9.484a34.14 34.14 0 0 1 1.165-1.178"}),o.jsx("path",{d:"M345.132 18.94c-1.747.822-3.267 1.075-4.204.582-2.039-1.076-.519-5.33 3.381-9.484a34.14 34.14 0 0 1 1.165-1.178"}),o.jsx("path",{strokeOpacity:.2,d:"M350.894 5.048c1.735-.823 3.254-1.076 4.179-.582 2.039 1.076.519 5.331-3.381 9.484-.376.401-.764.79-1.165 1.165m4.419-.24c.823 1.746 1.076 3.266.582 4.203-1.076 2.04-5.331.52-9.484-3.38-.405-.38-.798-.773-1.178-1.166"}),o.jsx("path",{d:"M349.253 18.24a23.063 23.063 0 0 1-3.209-2.543l-1.178-1.165"}),o.jsx("path",{strokeOpacity:.2,d:"M341.054 9.1c-.823-1.735-1.076-3.254-.582-4.179 1.076-2.039 5.331-.519 9.484 3.381.405.38.798.772 1.165 1.165"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M349.807 12a1.802 1.802 0 0 0-1.8-1.8 1.802 1.802 0 0 0-1.273 3.073A1.802 1.802 0 0 0 349.807 12Z"}),o.jsx("path",{strokeOpacity:.2,d:"M369.139 18.922c-1.743.821-3.259 1.074-4.193.581-2.034-1.074-.518-5.318 3.372-9.46.378-.402.765-.794 1.162-1.176"}),o.jsx("path",{d:"M369.139 18.922c-1.743.821-3.259 1.074-4.193.581-1.504-.794-1.067-3.32.836-6.259"}),o.jsx("path",{strokeOpacity:.2,d:"M374.886 5.065c1.73-.82 3.246-1.074 4.168-.58 2.034 1.073.518 5.317-3.373 9.46-.379.403-.77.795-1.162 1.161"}),o.jsx("path",{d:"m376.909 12.54-1.227 1.405-1.162 1.162"}),o.jsx("path",{strokeOpacity:.2,d:"M378.928 14.867c.821 1.743 1.074 3.259.581 4.193-1.074 2.034-5.318.518-9.46-3.373a34.866 34.866 0 0 1-1.175-1.162m-3.802-5.417c-.821-1.73-1.074-3.246-.581-4.168 1.074-2.034 5.318-.518 9.46 3.372.4.375.787.762 1.162 1.162"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M373.854 12a1.849 1.849 0 0 0-1.848-1.848A1.847 1.847 0 1 0 373.854 12Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.697,d:"M393.146 18.905c-1.739.819-3.251 1.071-4.184.58-2.029-1.071-.517-5.305 3.364-9.438.377-.4.763-.79 1.159-1.172"}),o.jsx("path",{strokeWidth:1.697,d:"M393.146 18.905c-1.739.82-3.251 1.071-4.184.58a1.594 1.594 0 0 1-.793-.969"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.697,d:"M398.879 5.082c1.726-.819 3.238-1.07 4.158-.58 2.029 1.071.517 5.305-3.365 9.438-.378.403-.769.794-1.159 1.16"}),o.jsx("path",{strokeWidth:1.697,d:"M402.728 9.883c-.724 1.283-1.757 2.676-3.055 4.058l-1.159 1.159"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.697,d:"M402.912 14.86c.819 1.739 1.071 3.25.58 4.184-1.071 2.029-5.305.517-9.438-3.365a34.687 34.687 0 0 1-1.172-1.16m-3.794-5.405c-.819-1.726-1.071-3.238-.58-4.158 1.071-2.03 5.305-.517 9.438 3.364.399.374.785.76 1.159 1.159"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M397.899 12a1.893 1.893 0 1 0-3.786 0 1.893 1.893 0 0 0 3.786 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.693,d:"M417.152 18.89c-1.735.817-3.244 1.069-4.174.578-2.024-1.07-.516-5.293 3.357-9.417l1.157-1.17m5.381-3.784c1.723-.817 3.231-1.07 4.149-.578 2.024 1.069.515 5.293-3.357 9.417l-1.157 1.157"}),o.jsx("path",{strokeWidth:1.693,d:"M427.895 6.699c-.215 1.87-1.73 4.574-4.23 7.237l-1.157 1.157"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.693,d:"M426.897 14.854c.817 1.735 1.069 3.244.578 4.174-1.069 2.024-5.293.515-9.417-3.357l-1.169-1.157m-3.785-5.393c-.817-1.723-1.069-3.231-.578-4.15 1.069-2.023 5.293-.515 9.417 3.358l1.157 1.157"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M421.941 12a1.934 1.934 0 1 0-3.868 0 1.934 1.934 0 0 0 3.868 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.69,d:"M441.158 18.876c-1.732.816-3.238 1.067-4.166.577-2.02-1.067-.514-5.283 3.351-9.399l1.154-1.167m5.37-3.776c1.719-.816 3.225-1.067 4.141-.577 2.02 1.067.514 5.283-3.351 9.399l-1.154 1.154"}),o.jsx("path",{strokeWidth:1.69,d:"M450.174 4.298a2.2 2.2 0 0 1 .834.235c2.02 1.067.514 5.283-3.351 9.399l-1.154 1.154"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.69,d:"M450.883 14.849c.816 1.732 1.067 3.237.577 4.166-1.067 2.02-5.283.514-9.399-3.351l-1.167-1.154m-3.777-5.384c-.816-1.72-1.067-3.225-.577-4.141 1.067-2.02 5.283-.514 9.399 3.35l1.154 1.155"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M445.978 12a1.973 1.973 0 0 0-1.971-1.971 1.972 1.972 0 1 0 1.971 1.97Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M465.163 18.865c-1.729.814-3.232 1.065-4.159.576-2.017-1.065-.514-5.274 3.345-9.383l1.153-1.165M470.863 5.122c1.716-.814 3.219-1.065 4.134-.576 2.017 1.065.514 5.274-3.345 9.383l-1.152 1.153"}),o.jsx("path",{strokeWidth:1.687,d:"M470.863 5.122c1.716-.814 3.219-1.065 4.134-.576 2.017 1.065.514 5.274-3.345 9.383l-1.152 1.153"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M474.871 14.844c.814 1.729 1.065 3.232.576 4.159-1.065 2.017-5.274.514-9.383-3.345l-1.164-1.153m-3.771-5.374c-.814-1.716-1.065-3.22-.576-4.134 1.065-2.017 5.274-.514 9.383 3.345l1.153 1.152"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M470.01 12a2.003 2.003 0 1 0-4.007 0 2.003 2.003 0 0 0 4.007 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.684,d:"M489.167 18.855c-1.726.813-3.227 1.063-4.153.575-2.014-1.063-.513-5.266 3.34-9.37l1.151-1.162m5.353-3.766c1.714-.813 3.215-1.063 4.128-.575 2.014 1.063.513 5.266-3.34 9.369l-1.151 1.15"}),o.jsx("path",{strokeWidth:1.684,d:"M494.858 5.132c1.714-.813 3.215-1.063 4.128-.575 1.49.786 1.056 3.29-.829 6.2"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.684,d:"M498.861 14.84c.813 1.726 1.063 3.227.575 4.153-1.063 2.014-5.266.513-9.369-3.34l-1.163-1.151m-3.765-5.367c-.813-1.714-1.063-3.215-.575-4.128 1.063-2.014 5.266-.513 9.369 3.34l1.151 1.15"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M494.037 12a2.03 2.03 0 1 0-4.06 0 2.03 2.03 0 0 0 4.06 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.682,d:"M513.17 18.847c-1.724.812-3.224 1.062-4.148.575-2.012-1.062-.512-5.26 3.336-9.359l1.15-1.162m5.347-3.761c1.712-.812 3.211-1.062 4.123-.575 2.012 1.062.512 5.26-3.336 9.359l-1.149 1.15"}),o.jsx("path",{strokeWidth:1.682,d:"M518.855 5.14c1.712-.812 3.211-1.062 4.123-.575.398.21.659.543.791.974"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.682,d:"M522.854 14.836c.812 1.724 1.062 3.224.575 4.148-1.062 2.012-5.26.512-9.359-3.336l-1.162-1.149m-3.762-5.36c-.812-1.712-1.062-3.21-.575-4.123 1.062-2.012 5.26-.512 9.359 3.336l1.15 1.15"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M518.058 12a2.05 2.05 0 1 0-4.1 0 2.05 2.05 0 0 0 4.1 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.681,d:"M537.172 18.841c-1.723.812-3.221 1.061-4.145.574-2.01-1.06-.512-5.256 3.333-9.35l1.149-1.162m5.344-3.757c1.71-.812 3.209-1.06 4.12-.574 2.01 1.061.512 5.256-3.334 9.351l-1.149 1.15m4.358-.239c.812 1.723 1.061 3.221.574 4.145-1.061 2.01-5.256.512-9.351-3.334l-1.161-1.148m-3.758-5.356c-.812-1.71-1.061-3.209-.574-4.12 1.061-2.01 5.256-.512 9.351 3.333l1.149 1.15"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M542.074 12a2.066 2.066 0 1 0-4.135 0 2.066 2.066 0 1 0 4.134 0h.001Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.68,d:"M561.174 18.838c-1.722.811-3.219 1.061-4.143.574-2.009-1.06-.512-5.254 3.332-9.347l1.148-1.16m5.34-3.756c1.71-.81 3.207-1.06 4.118-.574 2.009 1.061.512 5.253-3.332 9.346l-1.148 1.148m4.356-.236c.811 1.722 1.061 3.22.574 4.143-1.061 2.01-5.253.512-9.346-3.332l-1.161-1.148m-3.757-5.354c-.811-1.71-1.061-3.207-.574-4.118 1.061-2.009 5.253-.512 9.346 3.332l1.148 1.148"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M566.083 12a2.075 2.075 0 1 0-4.153 0 2.076 2.076 0 0 0 4.152 0h.001Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.68,d:"M585.174 18.837c-1.722.811-3.219 1.061-4.142.574-2.009-1.06-.512-5.253 3.331-9.345l1.148-1.16m5.34-3.756c1.709-.81 3.206-1.06 4.117-.574 2.009 1.061.511 5.253-3.331 9.345l-1.148 1.148m4.354-.237c.811 1.722 1.061 3.22.574 4.142-1.06 2.01-5.253.511-9.345-3.33l-1.16-1.149m-3.755-5.352c-.811-1.709-1.061-3.206-.574-4.117 1.061-2.009 5.253-.512 9.345 3.331l1.148 1.148"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M590.086 12a2.08 2.08 0 1 0-4.159 0 2.08 2.08 0 0 0 4.159 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.68,d:"M609.174 18.838c-1.722.811-3.22 1.061-4.143.574-2.009-1.06-.512-5.254 3.332-9.347l1.147-1.16m5.341-3.756c1.71-.81 3.207-1.06 4.118-.574 2.009 1.061.512 5.254-3.332 9.347l-1.147 1.148m4.355-.237c.811 1.722 1.061 3.22.574 4.143-1.061 2.01-5.254.512-9.347-3.332l-1.161-1.148m-3.756-5.354c-.811-1.71-1.061-3.207-.574-4.118 1.061-2.009 5.254-.512 9.347 3.332l1.148 1.148"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.68,d:"M605.155 9.142c-.599-1.262-.891-2.408-.808-3.288"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M614.082 12a2.075 2.075 0 1 0-4.153-.001 2.075 2.075 0 0 0 4.154 0h-.001Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.681,d:"M633.172 18.842c-1.723.812-3.221 1.061-4.145.574-2.01-1.06-.512-5.257 3.334-9.352l1.149-1.16m5.343-3.759c1.711-.812 3.209-1.06 4.12-.574 2.01 1.061.512 5.256-3.334 9.352l-1.149 1.15m4.358-.239c.812 1.723 1.061 3.221.574 4.145-1.061 2.01-5.256.512-9.352-3.334l-1.16-1.148m-3.758-5.356c-.812-1.71-1.062-3.209-.575-4.12 1.061-2.01 5.256-.513 9.352 3.333l1.149 1.15"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.681,d:"M629.152 9.141c-.812-1.71-1.062-3.209-.575-4.12.376-.713 1.146-.985 2.165-.868"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M638.072 12a2.066 2.066 0 1 0-4.134 0 2.066 2.066 0 0 0 4.135 0h-.001Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.683,d:"M657.169 18.848c-1.725.812-3.224 1.062-4.149.575-2.012-1.062-.512-5.26 3.337-9.36l1.15-1.163m5.349-3.76c1.712-.813 3.212-1.063 4.124-.576 2.012 1.062.512 5.261-3.337 9.36l-1.15 1.15m4.362-.237c.812 1.725 1.062 3.224.575 4.15-1.062 2.011-5.261.511-9.36-3.338l-1.162-1.15m-3.763-5.36c-.812-1.713-1.062-3.213-.575-4.125 1.062-2.012 5.261-.512 9.36 3.337l1.15 1.15"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.683,d:"M653.145 9.138c-.812-1.712-1.062-3.212-.575-4.124.707-1.339 2.804-1.123 5.336.307"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M662.055 12a2.05 2.05 0 1 0-4.099 0 2.05 2.05 0 0 0 4.099 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.685,d:"M681.166 18.857c-1.727.813-3.228 1.064-4.154.576-2.014-1.064-.513-5.268 3.341-9.372l1.151-1.164m5.355-3.767c1.714-.813 3.216-1.064 4.129-.576 2.014 1.064.513 5.268-3.341 9.372l-1.151 1.15m4.367-.236c.813 1.727 1.064 3.228.576 4.154-1.063 2.014-5.268.513-9.372-3.341l-1.164-1.151m-3.766-5.367c-.813-1.714-1.064-3.216-.576-4.13 1.064-2.014 5.268-.512 9.372 3.342l1.151 1.15"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.685,d:"M677.137 9.135c-.813-1.714-1.064-3.216-.576-4.13.943-1.786 4.357-.807 7.98 2.126"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M686.032 12a2.026 2.026 0 1 0-4.051 0 2.026 2.026 0 0 0 4.051 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M705.162 18.867c-1.729.815-3.233 1.065-4.161.577-2.018-1.065-.514-5.276 3.346-9.386l1.153-1.166m5.364-3.772c1.717-.815 3.221-1.065 4.136-.576 2.018 1.065.514 5.276-3.346 9.386l-1.154 1.153m4.374-.238c.815 1.729 1.065 3.233.576 4.16-1.065 2.019-5.276.515-9.386-3.345l-1.165-1.153"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M701.126 9.13c-.815-1.717-1.065-3.221-.576-4.136 1.065-2.018 5.276-.514 9.386 3.346l1.153 1.153"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.687,d:"M701.126 9.13c-.815-1.717-1.065-3.221-.576-4.136 1.065-2.018 5.276-.514 9.386 3.346l1.153 1.153"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M710.003 12a1.996 1.996 0 1 0-3.99 0 1.996 1.996 0 0 0 3.989 0h.001Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.691,d:"M729.156 18.88c-1.733.816-3.239 1.067-4.168.578-2.021-1.067-.515-5.286 3.352-9.404l1.155-1.168m5.374-3.779c1.72-.816 3.227-1.067 4.143-.578 2.021 1.067.515 5.286-3.352 9.404l-1.155 1.155m4.381-.238c.816 1.733 1.067 3.24.577 4.168-1.067 2.021-5.286.515-9.404-3.352l-1.168-1.155"}),o.jsx("path",{strokeWidth:1.691,d:"M738.886 14.85c.6 1.273.894 2.425.814 3.314"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.691,d:"M725.114 9.125c-.816-1.72-1.067-3.227-.578-4.143 1.067-2.02 5.286-.515 9.404 3.352l1.155 1.155"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.691,d:"m724.498 5.058.038-.076c1.067-2.02 5.286-.515 9.404 3.352l1.155 1.155"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M733.968 12a1.962 1.962 0 1 0-3.925 0 1.962 1.962 0 0 0 3.925 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.694,d:"M753.15 18.894c-1.736.818-3.246 1.07-4.177.58-2.026-1.07-.516-5.298 3.359-9.424.377-.399.763-.79 1.158-1.17m5.385-3.787c1.724-.818 3.233-1.069 4.152-.579 2.026 1.07.516 5.297-3.359 9.423-.377.403-.767.793-1.157 1.157m4.39-.238c.818 1.736 1.069 3.246.579 4.177-1.069 2.026-5.297.516-9.423-3.359a32.793 32.793 0 0 1-1.17-1.157"}),o.jsx("path",{strokeWidth:1.694,d:"M762.901 14.856c.818 1.736 1.069 3.246.579 4.177-.378.716-1.15.99-2.173.875"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.694,d:"M749.099 9.12c-.818-1.725-1.069-3.234-.579-4.153 1.069-2.026 5.297-.516 9.423 3.36.403.376.793.766 1.158 1.156"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.694,d:"M752.189 4.471c1.687.625 3.733 1.956 5.755 3.855l1.158 1.157"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M757.929 12a1.922 1.922 0 1 0-3.844 0 1.922 1.922 0 0 0 3.844 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.698,d:"M777.144 18.91c-1.74.82-3.253 1.072-4.187.58-2.03-1.072-.517-5.31 3.367-9.445a33.81 33.81 0 0 1 1.16-1.173m5.397-3.795c1.728-.82 3.241-1.072 4.161-.58 2.03 1.072.517 5.309-3.367 9.445-.374.4-.761.786-1.16 1.16m4.402-.24c.82 1.74 1.072 3.254.58 4.188-1.072 2.03-5.309.517-9.445-3.367-.4-.377-.791-.764-1.173-1.16"}),o.jsx("path",{strokeWidth:1.698,d:"M786.917 14.863c.82 1.74 1.072 3.253.58 4.187-.713 1.35-2.827 1.133-5.38-.307"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.698,d:"M773.083 9.112c-.82-1.728-1.072-3.241-.58-4.161 1.072-2.03 5.309-.517 9.445 3.367.399.374.786.76 1.16 1.16"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.698,d:"M779.866 6.564a24.528 24.528 0 0 1 2.082 1.754l1.16 1.16"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M781.885 12a1.877 1.877 0 0 0-1.879-1.879 1.88 1.88 0 0 0-1.878 1.88 1.877 1.877 0 0 0 1.879 1.878A1.88 1.88 0 0 0 781.885 12Z"}),o.jsx("path",{strokeOpacity:.2,d:"M801.137 18.927c-1.745.822-3.262 1.075-4.197.582-2.035-1.075-.518-5.322 3.375-9.468.378-.401.766-.793 1.163-1.176m5.411-3.805c1.732-.822 3.249-1.075 4.172-.582 2.035 1.075.518 5.322-3.375 9.468-.375.4-.763.788-1.163 1.163m4.411-.239c.822 1.745 1.075 3.261.581 4.197-1.074 2.035-5.322.518-9.468-3.375a33.941 33.941 0 0 1-1.176-1.163"}),o.jsx("path",{d:"M810.934 14.87c.822 1.745 1.075 3.261.581 4.197-.953 1.805-4.403.816-8.064-2.149"}),o.jsx("path",{strokeOpacity:.2,d:"M797.066 9.105c-.822-1.732-1.075-3.249-.582-4.172 1.075-2.035 5.322-.518 9.468 3.375.405.379.796.771 1.163 1.163"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M805.839 12a1.834 1.834 0 0 0-1.131-1.693A1.832 1.832 0 1 0 805.839 12Z"}),o.jsx("path",{strokeOpacity:.2,d:"M825.129 18.945c-1.749.824-3.27 1.077-4.208.583-2.041-1.077-.52-5.336 3.384-9.493a34.18 34.18 0 0 1 1.166-1.179"}),o.jsx("path",{d:"m823.076 11.443 1.23-1.408 1.166-1.179"}),o.jsx("path",{strokeOpacity:.2,d:"M830.896 5.042c1.736-.824 3.257-1.077 4.183-.583 2.041 1.077.52 5.336-3.384 9.493-.38.406-.773.799-1.166 1.166"}),o.jsx("path",{strokeOpacity:.2,d:"M834.952 14.877c.824 1.749 1.077 3.27.583 4.208-1.077 2.04-5.336.52-9.493-3.384-.406-.38-.798-.773-1.179-1.166"}),o.jsx("path",{d:"M834.952 14.877c.824 1.749 1.077 3.27.583 4.208-1.077 2.04-5.336.52-9.493-3.384-.406-.38-.798-.773-1.179-1.166"}),o.jsx("path",{strokeOpacity:.2,d:"M821.048 9.098c-.824-1.736-1.077-3.257-.583-4.183 1.077-2.041 5.336-.52 9.493 3.384.401.376.79.765 1.166 1.166"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M829.789 12a1.783 1.783 0 1 0-3.565 0 1.783 1.783 0 0 0 3.565 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M849.122 18.964c-1.754.826-3.279 1.08-4.219.585-2.046-1.08-.521-5.35 3.393-9.519.38-.403.77-.797 1.169-1.182"}),o.jsx("path",{d:"M845.212 14.127c.73-1.295 1.773-2.702 3.083-4.097l1.169-1.182"}),o.jsx("path",{strokeOpacity:.2,d:"M854.904 5.023c1.741-.826 3.266-1.08 4.194-.585 2.046 1.08.521 5.35-3.393 9.518a25.57 25.57 0 0 1-1.169 1.17m4.434-.24c.826 1.753 1.08 3.278.585 4.218-1.08 2.046-5.35.521-9.518-3.393a33.472 33.472 0 0 1-1.182-1.169"}),o.jsx("path",{d:"m859.6 19.014-.045.09c-1.08 2.046-5.35.521-9.518-3.393a33.472 33.472 0 0 1-1.182-1.169"}),o.jsx("path",{strokeOpacity:.2,d:"M845.03 9.09c-.826-1.741-1.08-3.266-.585-4.194 1.08-2.046 5.35-.521 9.518 3.393.407.381.801.775 1.169 1.169"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M853.738 12a1.735 1.735 0 0 0-1.732-1.732 1.733 1.733 0 0 0-1.225 2.957A1.734 1.734 0 0 0 853.738 12Z"}),o.jsx("path",{strokeOpacity:.2,d:"M873.114 18.983c-1.758.828-3.288 1.083-4.231.586-2.052-1.083-.522-5.365 3.402-9.544.382-.408.777-.803 1.172-1.185"}),o.jsx("path",{d:"M867.997 17.368c.214-1.896 1.75-4.64 4.288-7.343l1.173-1.185"}),o.jsx("path",{strokeOpacity:.2,d:"M878.912 5.004c1.746-.828 3.275-1.083 4.205-.586 2.052 1.083.522 5.365-3.402 9.544-.378.404-.769.794-1.172 1.172m4.446-.24c.828 1.757 1.083 3.287.586 4.23-1.083 2.052-5.365.522-9.544-3.402-.404-.38-.8-.772-1.185-1.172"}),o.jsx("path",{d:"M879.868 19.628c-1.71-.632-3.786-1.98-5.836-3.907l-1.185-1.172"}),o.jsx("path",{strokeOpacity:.2,d:"M869.011 9.082c-.828-1.746-1.083-3.275-.586-4.205 1.083-2.052 5.365-.522 9.544 3.402.408.382.803.777 1.172 1.172"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M877.687 12a1.681 1.681 0 1 0-3.362 0 1.681 1.681 0 0 0 3.362 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M897.106 19.002c-1.763.831-3.296 1.086-4.242.588-2.057-1.086-.524-5.379 3.411-9.57a33.84 33.84 0 0 1 1.175-1.188"}),o.jsx("path",{d:"M893.733 19.83a2.31 2.31 0 0 1-.869-.24c-2.057-1.087-.524-5.38 3.411-9.57.383-.41.779-.806 1.175-1.189"}),o.jsx("path",{strokeOpacity:.2,d:"M902.92 4.985c1.75-.83 3.284-1.086 4.216-.588 2.057 1.086.524 5.38-3.411 9.57-.383.41-.779.805-1.175 1.175m4.458-.242c.831 1.763 1.086 3.296.588 4.242-1.086 2.057-5.379.524-9.57-3.41a35.38 35.38 0 0 1-1.188-1.176"}),o.jsx("path",{d:"M900.135 17.508a25.007 25.007 0 0 1-2.109-1.777l-1.188-1.175"}),o.jsx("path",{strokeOpacity:.2,d:"M892.992 9.074c-.83-1.75-1.086-3.284-.588-4.216 1.086-2.057 5.379-.524 9.57 3.411.409.383.805.779 1.175 1.175"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M901.636 12a1.63 1.63 0 1 0-3.26.001 1.63 1.63 0 0 0 3.26 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M921.099 19.02c-1.768.833-3.305 1.09-4.253.59-2.062-1.09-.525-5.394 3.42-9.596.384-.41.781-.807 1.179-1.19"}),o.jsx("path",{d:"M921.098 19.02c-1.768.833-3.305 1.09-4.253.59-2.062-1.09-.525-5.394 3.42-9.596.384-.41.781-.807 1.179-1.19"}),o.jsx("path",{strokeOpacity:.2,d:"M926.927 4.967c1.755-.833 3.292-1.089 4.227-.589 2.062 1.09.525 5.393-3.42 9.595-.384.41-.781.807-1.178 1.18m4.47-.245c.833 1.768 1.089 3.305.589 4.253-1.089 2.062-5.393.525-9.595-3.42a34.634 34.634 0 0 1-1.191-1.178m-3.855-5.497c-.833-1.755-1.089-3.292-.589-4.227 1.089-2.062 5.393-.525 9.595 3.42.406.38.799.773 1.179 1.18"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M925.586 12a1.58 1.58 0 1 0-3.158.002 1.58 1.58 0 0 0 3.158-.002Z"}),o.jsx("path",{strokeOpacity:.2,d:"M945.091 19.037c-1.772.835-3.313 1.092-4.264.59-2.068-1.091-.527-5.406 3.429-9.618a34.92 34.92 0 0 1 1.181-1.194"}),o.jsx("path",{d:"M945.091 19.037c-1.772.835-3.313 1.092-4.264.59-1.529-.806-1.085-3.376.85-6.363"}),o.jsx("path",{strokeOpacity:.2,d:"M950.934 4.95c1.759-.835 3.3-1.092 4.238-.591 2.068 1.092.526 5.407-3.429 9.619-.385.41-.783.809-1.181 1.18"}),o.jsx("path",{d:"m952.991 12.549-1.248 1.428-1.181 1.18"}),o.jsx("path",{strokeOpacity:.2,d:"M955.044 14.915c.835 1.772 1.092 3.313.591 4.264-1.091 2.068-5.406.526-9.619-3.43a33.582 33.582 0 0 1-1.194-1.18m-3.866-5.51c-.835-1.76-1.092-3.3-.591-4.238 1.092-2.068 5.407-.527 9.619 3.429.411.385.809.783 1.181 1.18"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M949.538 12a1.531 1.531 0 1 0-3.062 0 1.531 1.531 0 0 0 3.062 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M969.084 19.054c-1.776.837-3.321 1.094-4.274.592-2.072-1.094-.528-5.419 3.437-9.64.385-.41.78-.809 1.184-1.198"}),o.jsx("path",{d:"M969.084 19.054c-1.776.837-3.321 1.094-4.274.592a1.625 1.625 0 0 1-.81-.989"}),o.jsx("path",{strokeOpacity:.2,d:"M974.941 4.933c1.763-.837 3.308-1.094 4.248-.592 2.072 1.094.528 5.419-3.437 9.64-.386.413-.785.812-1.184 1.185"}),o.jsx("path",{d:"M978.873 9.837c-.74 1.31-1.795 2.733-3.12 4.145l-1.184 1.184"}),o.jsx("path",{strokeOpacity:.2,d:"M979.06 14.922c.837 1.776 1.094 3.321.592 4.274-1.094 2.072-5.419.528-9.641-3.437-.409-.385-.808-.78-1.197-1.184m-3.874-5.523c-.837-1.763-1.094-3.308-.592-4.248 1.094-2.072 5.419-.528 9.641 3.437.408.382.802.777 1.184 1.184"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M973.493 12a1.486 1.486 0 1 0-2.97 0 1.486 1.486 0 0 0 2.969 0h.001Z"}),o.jsx("path",{strokeOpacity:.2,d:"M993.078 19.07c-1.78.838-3.328 1.095-4.283.592-2.077-1.096-.529-5.43 3.444-9.662.387-.413.787-.813 1.187-1.2m5.522-3.882c1.772-.838 3.312-1.096 4.262-.593 2.07 1.096.52 5.431-3.449 9.662-.383.409-.778.804-1.187 1.187"}),o.jsx("path",{d:"M1004.1 6.562c-.22 1.919-1.78 4.693-4.34 7.424l-1.187 1.187"}),o.jsx("path",{strokeOpacity:.2,d:"M1003.07 14.928c.84 1.78 1.1 3.328.6 4.283-1.1 2.077-5.433.53-9.664-3.444a34.504 34.504 0 0 1-1.2-1.187m-3.881-5.534c-.838-1.767-1.096-3.315-.593-4.257 1.096-2.077 5.431-.529 9.662 3.444.408.383.804.779 1.186 1.187"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M997.451 12a1.445 1.445 0 1 0-2.89 0 1.445 1.445 0 0 0 2.89 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1017.07 19.082c-1.78.84-3.33 1.099-4.29.595-2.08-1.1-.53-5.441 3.45-9.68.39-.41.79-.811 1.19-1.202m5.53-3.89c1.77-.84 3.32-1.1 4.27-.595 2.08 1.099.53 5.44-3.45 9.68-.39.409-.78.806-1.19 1.189"}),o.jsx("path",{d:"M1026.36 4.068c.32.03.61.11.86.242 2.08 1.099.53 5.44-3.45 9.68-.39.409-.78.806-1.19 1.189"}),o.jsx("path",{strokeOpacity:.2,d:"M1027.09 14.934c.84 1.784 1.1 3.334.59 4.29-1.1 2.082-5.44.53-9.68-3.45-.41-.387-.81-.783-1.2-1.19m-3.89-5.544c-.84-1.771-1.1-3.322-.59-4.265 1.09-2.081 5.44-.53 9.68 3.45.41.389.81.789 1.18 1.19"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1021.41 12c0-.373-.14-.731-.41-.995a1.397 1.397 0 0 0-.99-.413c-.38 0-.73.15-1 .413-.26.264-.41.622-.41.995s.15.73.41.995c.27.264.62.412 1 .413.37-.001.73-.15.99-.413.27-.264.41-.622.41-.995Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1041.07 19.094c-1.79.842-3.34 1.1-4.3.596-2.08-1.1-.53-5.45 3.46-9.696.38-.41.78-.812 1.19-1.204M1046.96 4.893c1.77-.841 3.33-1.1 4.27-.595 2.08 1.1.53 5.45-3.46 9.696-.38.414-.79.816-1.19 1.19"}),o.jsx("path",{d:"M1046.96 4.893c1.77-.841 3.33-1.1 4.27-.595 2.08 1.1.53 5.45-3.46 9.696-.38.414-.79.816-1.19 1.19"}),o.jsx("path",{strokeOpacity:.2,d:"M1051.1 14.939c.84 1.787 1.1 3.34.6 4.298-1.1 2.084-5.45.531-9.7-3.457-.41-.388-.82-.79-1.2-1.191m-3.9-5.554c-.84-1.774-1.1-3.327-.6-4.272 1.1-2.084 5.45-.531 9.7 3.457.41.384.81.781 1.19 1.191"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1045.38 12c0-.76-.61-1.376-1.37-1.376-.76 0-1.38.616-1.38 1.376 0 .76.62 1.376 1.38 1.376.76 0 1.37-.616 1.37-1.376Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1065.06 19.104c-1.78.843-3.34 1.102-4.3.596-2.09-1.102-.53-5.458 3.46-9.71.39-.411.79-.813 1.19-1.206m5.55-3.9c1.78-.844 3.33-1.103 4.28-.597 2.09 1.102.53 5.458-3.46 9.71-.39.41-.78.809-1.19 1.193"}),o.jsx("path",{d:"M1070.96 4.883c1.78-.843 3.33-1.102 4.28-.596 1.54.815 1.09 3.41-.86 6.426"}),o.jsx("path",{strokeOpacity:.2,d:"M1075.11 14.943c.84 1.79 1.1 3.345.6 4.304-1.11 2.087-5.46.531-9.71-3.46a34.38 34.38 0 0 1-1.21-1.194m-3.9-5.562c-.84-1.776-1.1-3.33-.6-4.278 1.1-2.087 5.46-.532 9.71 3.461.41.385.81.783 1.2 1.193"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1069.35 12c0-.358-.14-.7-.39-.954a1.35 1.35 0 0 0-1.91 0c-.25.254-.39.596-.39.954s.14.7.39.954c.26.252.6.395.96.395.35 0 .7-.143.95-.396s.39-.596.39-.953Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1089.06 19.112c-1.79.844-3.35 1.103-4.31.597-2.09-1.103-.53-5.464 3.47-9.72.39-.412.78-.814 1.19-1.207m5.55-3.907c1.78-.844 3.34-1.103 4.29-.597 2.09 1.103.53 5.464-3.47 9.72-.38.41-.78.809-1.19 1.194"}),o.jsx("path",{d:"M1094.97 4.875c1.77-.844 3.33-1.103 4.28-.597.41.218.68.564.82 1.011"}),o.jsx("path",{strokeOpacity:.2,d:"M1099.12 14.946c.84 1.791 1.1 3.348.6 4.31-1.11 2.088-5.47.531-9.72-3.466-.42-.388-.82-.786-1.21-1.194m-3.91-5.568c-.84-1.778-1.1-3.335-.59-4.283 1.1-2.089 5.46-.532 9.72 3.465.41.39.81.792 1.19 1.194"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1093.33 12c0-.352-.14-.69-.39-.938a1.3 1.3 0 0 0-.93-.39c-.36 0-.69.14-.94.39a1.324 1.324 0 0 0 0 1.876c.25.248.59.388.94.389.35 0 .69-.141.93-.39.25-.248.39-.585.39-.937Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1113.06 19.117c-1.79.844-3.35 1.104-4.31.598-2.1-1.104-.54-5.468 3.46-9.728.39-.416.8-.818 1.2-1.208m5.56-3.91c1.78-.843 3.34-1.103 4.28-.596 2.09 1.104.54 5.468-3.46 9.728-.39.411-.79.81-1.2 1.195m4.53-.248c.85 1.792 1.11 3.35.6 4.312-1.1 2.09-5.47.532-9.73-3.468-.41-.389-.81-.787-1.21-1.195m-3.9-5.571c-.85-1.78-1.11-3.338-.6-4.286 1.1-2.091 5.47-.533 9.73 3.468.41.39.81.792 1.19 1.195"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1117.32 12a1.3 1.3 0 0 0-.39-.928 1.28 1.28 0 0 0-.92-.384c-.35 0-.68.138-.93.384s-.38.58-.38.928c0 .348.13.682.38.928s.58.384.93.384c.35 0 .68-.138.92-.384a1.3 1.3 0 0 0 .39-.928Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1137.06 19.12c-1.8.846-3.36 1.106-4.32.599-2.09-1.105-.53-5.471 3.47-9.733.39-.412.79-.815 1.2-1.208m5.56-3.912c1.78-.845 3.34-1.105 4.29-.598 2.09 1.105.53 5.47-3.47 9.733-.39.411-.79.81-1.2 1.196m4.54-.247c.84 1.793 1.1 3.352.59 4.314-1.1 2.092-5.47.533-9.73-3.47-.41-.389-.81-.787-1.21-1.195m-3.91-5.575c-.84-1.78-1.1-3.34-.6-4.288 1.11-2.092 5.48-.533 9.74 3.469.41.385.81.784 1.19 1.195"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1141.31 12a1.3 1.3 0 0 0-1.3-1.303c-.72 0-1.31.583-1.31 1.303s.59 1.303 1.31 1.303a1.3 1.3 0 0 0 1.3-1.303Z"})]}));C6e.displayName="Sequence";const S6e=f.memo(({...e})=>o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[o.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(6.02816 14.5018)",d:"M3.02816 4.6202C1.23465 5.465 -0.32491 5.7249 -1.28665 5.2181C-3.37906 4.1134 -1.8195 -0.2534 2.18339 -4.51623C2.57328 -4.93212 2.97617 -5.33501 3.37906 -5.7249"}),o.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(17.9719 9.47869)",d:"M-3.00215 -4.61371C-1.22165 -5.45848 0.33785 -5.7184 1.28665 -5.21154C3.37905 -4.10685 1.81945 0.259935 -2.18345 4.52271C-2.57335 4.93861 -2.97615 5.3415 -3.37905 5.7184"}),o.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(14.5083 17.9783)",d:"M4.6202 -3.02815C5.465 -1.23465 5.72491 0.32485 5.21801 1.28665C4.11341 3.37905 -0.253395 1.81945 -4.51624 -2.18345C-4.93213 -2.57335 -5.33501 -2.97625 -5.72491 -3.37905"}),o.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(9.4852 6.02166)",d:"M-4.61371 3.00217C-5.45848 1.22166 -5.71841 -0.3379 -5.21154 -1.28664C-4.10685 -3.37906 0.259935 -1.81949 4.52271 2.1834C4.93861 2.57329 5.3415 2.97618 5.7184 3.37906"}),o.jsx("path",{fill:"currentColor",transform:"translate(12.0065 12)",d:"M1.29965 5e-05C1.29965 -0.71775 0.71785 -1.29965 5e-05 -1.29965C-0.71775 -1.29965 -1.29965 -0.71775 -1.29965 5e-05C-1.29965 0.71785 -0.71775 1.29965 5e-05 1.29965C0.71785 1.29965 1.29965 0.71785 1.29965 5e-05Z"})]}));S6e.displayName="DeepResearchStatic";const E6e=f.memo(({size:e=32,shouldAnimate:t=!0,className:n})=>{const{_shouldAnimate:r,sequenceProps:s,staticProps:a}=q$({shouldAnimate:t,animationDuration:3,animationName:"animate-deepResearchIndicator"});return o.jsx(oT,{size:e,className:n,children:r?o.jsx(C6e,{...s}):o.jsx(S6e,{...a})})});E6e.displayName="DeepResearchLoader";const M6e=f.memo(e=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",width:936,height:24,viewBox:"0 0 936 24",...e,children:[o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.75,d:"M9.537 14.568a6.162 6.162 0 0 1-3.695-5.64A6.16 6.16 0 0 1 12 2.77a6.16 6.16 0 0 1 6.158 6.157 6.162 6.162 0 0 1-3.695 5.64v3.597H9.537v3.066h4.926"}),o.jsx("path",{fill:"currentColor",fillOpacity:.2,d:"M13.312 8.927a1.3 1.3 0 1 0-2.6 0 1.3 1.3 0 0 0 2.6 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.75,d:"M33.538 14.567a6.16 6.16 0 0 1-3.694-5.639A6.158 6.158 0 0 1 36 2.772a6.158 6.158 0 0 1 6.156 6.156 6.16 6.16 0 0 1-3.694 5.64v3.594h-4.924v3.066h4.924"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M35.874 21.227h2.59"}),o.jsx("path",{fill:"currentColor",fillOpacity:.204,d:"M37.317 8.928a1.305 1.305 0 1 0-2.61 0 1.305 1.305 0 0 0 2.61 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.748,d:"M57.54 14.565a6.156 6.156 0 0 1-3.69-5.634A6.153 6.153 0 0 1 60 2.78a6.153 6.153 0 0 1 6.15 6.15 6.156 6.156 0 0 1-3.69 5.635v3.592h-4.92v3.063h4.92"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.748,d:"M57.54 20.968v.252h4.92"}),o.jsx("path",{fill:"currentColor",fillOpacity:.22,d:"M61.332 8.93a1.32 1.32 0 1 0-2.64 0 1.32 1.32 0 0 0 2.64 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.746,d:"M81.543 14.561a6.147 6.147 0 0 1-3.686-5.626A6.145 6.145 0 0 1 84 2.792a6.145 6.145 0 0 1 6.143 6.143 6.147 6.147 0 0 1-3.686 5.626v3.587h-4.914v3.06h4.914"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.746,d:"M81.543 18.373v2.835h4.914"}),o.jsx("path",{fill:"currentColor",fillOpacity:.247,d:"M85.357 8.935a1.344 1.344 0 1 0-2.689 0 1.344 1.344 0 0 0 2.689 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.743,d:"M105.547 14.556a6.136 6.136 0 0 1-3.678-5.616A6.134 6.134 0 0 1 108 2.809a6.133 6.133 0 0 1 6.131 6.131 6.136 6.136 0 0 1-3.678 5.616v3.581h-4.906v3.053h4.906"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.743,d:"M107.901 18.137h-2.354v3.054h4.906"}),o.jsx("path",{fill:"currentColor",fillOpacity:.282,d:"M109.39 8.94a1.378 1.378 0 1 0-2.755.001 1.378 1.378 0 0 0 2.755 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.739,d:"M129.553 14.55a6.122 6.122 0 0 1-3.67-5.603A6.12 6.12 0 0 1 132 2.83a6.12 6.12 0 0 1 6.118 6.117 6.123 6.123 0 0 1-3.671 5.604v3.572h-4.894v3.047h4.894"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.739,d:"m134.447 18.122-4.894.001v3.047h4.894"}),o.jsx("path",{fill:"currentColor",fillOpacity:.325,d:"M133.43 8.947a1.418 1.418 0 1 0-2.836 0 1.418 1.418 0 0 0 2.836 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.734,d:"M153.56 14.544a6.106 6.106 0 0 1-3.661-5.59 6.103 6.103 0 0 1 6.101-6.1 6.103 6.103 0 0 1 6.101 6.1 6.106 6.106 0 0 1-3.66 5.59v3.563h-4.881v3.038h4.881"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.734,d:"M158.441 15.511v2.596h-4.881v3.038h4.881"}),o.jsx("path",{fill:"currentColor",fillOpacity:.376,d:"M157.477 8.955a1.465 1.465 0 1 0-2.93 0 1.465 1.465 0 0 0 2.93 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.729,d:"M177.567 14.536a6.088 6.088 0 0 1-3.65-5.572A6.085 6.085 0 0 1 180 2.88a6.085 6.085 0 0 1 6.083 6.084 6.087 6.087 0 0 1-3.65 5.572v3.553h-4.866v3.029h4.866"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.729,d:"M183.809 13.7a6.066 6.066 0 0 1-1.376.836v3.552h-4.866v3.03h4.866"}),o.jsx("path",{fill:"currentColor",fillOpacity:.435,d:"M181.529 8.964a1.517 1.517 0 1 0-3.034 0 1.517 1.517 0 0 0 3.034 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.723,d:"M201.575 14.528a6.068 6.068 0 0 1-3.639-5.555A6.066 6.066 0 0 1 204 2.91a6.066 6.066 0 0 1 6.064 6.064 6.069 6.069 0 0 1-3.638 5.555v3.54h-4.851v3.02h4.851"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.723,d:"M209.405 11.72a6.103 6.103 0 0 1-2.979 2.807v3.542h-4.851v3.02h4.851"}),o.jsx("path",{fill:"currentColor",fillOpacity:.494,d:"M205.585 8.973a1.573 1.573 0 1 0-3.145 0 1.573 1.573 0 0 0 3.145 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.718,d:"M225.583 14.519a6.048 6.048 0 0 1-3.627-5.536A6.046 6.046 0 0 1 228 2.939a6.046 6.046 0 0 1 6.044 6.044 6.049 6.049 0 0 1-3.626 5.536v3.53h-4.835v3.01h4.835"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.718,d:"M234.039 9.24a6.052 6.052 0 0 1-3.621 5.279v3.53h-4.835v3.01h4.835"}),o.jsx("path",{fill:"currentColor",fillOpacity:.561,d:"M229.642 8.983a1.63 1.63 0 1 0-3.259-.001 1.63 1.63 0 0 0 3.259 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.712,d:"M249.591 14.51a6.028 6.028 0 0 1-3.614-5.517A6.025 6.025 0 0 1 252 2.969a6.026 6.026 0 0 1 6.024 6.024c0 2.47-1.494 4.59-3.614 5.517v3.518h-4.819v3h4.819"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.712,d:"M257.578 6.715a6.028 6.028 0 0 1-3.168 7.795v3.518h-4.819v3h4.819"}),o.jsx("path",{fill:"currentColor",fillOpacity:.627,d:"M253.7 8.993a1.688 1.688 0 1 0-3.376 0 1.688 1.688 0 0 0 3.376 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.706,d:"M273.599 14.502a6.008 6.008 0 0 1-3.602-5.5A6.005 6.005 0 0 1 276 3a6.006 6.006 0 0 1 6.004 6.003 6.008 6.008 0 0 1-3.602 5.5v3.506h-4.803v2.99h4.803"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.706,d:"M280.14 4.656a5.987 5.987 0 0 1 1.864 4.346 6.008 6.008 0 0 1-3.602 5.5v3.505h-4.803v2.99h4.803"}),o.jsx("path",{fill:"currentColor",fillOpacity:.69,d:"M277.756 9.003a1.744 1.744 0 1 0-3.488 0 1.744 1.744 0 0 0 3.488 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.701,d:"M297.607 14.494a5.989 5.989 0 0 1-3.591-5.482A5.987 5.987 0 0 1 300 3.027a5.987 5.987 0 0 1 5.985 5.985 5.989 5.989 0 0 1-3.591 5.482v3.494h-4.787v2.98h4.787"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.701,d:"M301.994 3.368a5.99 5.99 0 0 1 3.991 5.644 5.988 5.988 0 0 1-3.591 5.482v3.495h-4.787v2.98h4.787"}),o.jsx("path",{fill:"currentColor",fillOpacity:.753,d:"M301.809 9.012a1.797 1.797 0 1 0-3.594 0 1.797 1.797 0 0 0 3.594 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.696,d:"M321.614 14.486a5.97 5.97 0 0 1-3.58-5.465A5.969 5.969 0 0 1 324 3.054a5.969 5.969 0 0 1 5.967 5.967 5.97 5.97 0 0 1-3.58 5.465v3.485h-4.773v2.971h4.773"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.696,d:"M323.448 3.079a5.969 5.969 0 0 1 6.519 5.942 5.972 5.972 0 0 1-3.58 5.465v3.485h-4.773v2.971h4.773"}),o.jsx("path",{fill:"currentColor",fillOpacity:.812,d:"M325.857 9.02a1.845 1.845 0 1 0-3.69 0 1.845 1.845 0 0 0 3.69 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.691,d:"M345.62 14.48a5.956 5.956 0 0 1-3.571-5.452A5.953 5.953 0 0 1 348 3.077a5.954 5.954 0 0 1 5.952 5.95 5.956 5.956 0 0 1-3.571 5.452v3.476h-4.761v2.963h4.761"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.691,d:"M345.067 3.85a5.954 5.954 0 0 1 8.885 5.178 5.956 5.956 0 0 1-3.571 5.451v3.476h-4.761v2.963h4.761"}),o.jsx("path",{fill:"currentColor",fillOpacity:.867,d:"M349.901 9.028a1.889 1.889 0 1 0-3.778.001 1.889 1.889 0 0 0 3.778-.001Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.688,d:"M369.625 14.473a5.942 5.942 0 0 1-3.562-5.439A5.94 5.94 0 0 1 372 3.097a5.94 5.94 0 0 1 5.938 5.937 5.941 5.941 0 0 1-3.563 5.44v3.467h-4.75v2.957h4.75"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.688,d:"M367.206 5.532A5.93 5.93 0 0 1 372 3.097a5.94 5.94 0 0 1 5.938 5.937 5.942 5.942 0 0 1-3.562 5.44v3.467h-4.751v2.957h4.751"}),o.jsx("path",{fill:"currentColor",fillOpacity:.91,d:"M373.937 9.034a1.924 1.924 0 1 0-3.849 0 1.924 1.924 0 0 0 3.849 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.684,d:"M393.63 14.469a5.93 5.93 0 0 1-3.556-5.43A5.929 5.929 0 0 1 396 3.114a5.929 5.929 0 0 1 5.927 5.927c0 2.43-1.47 4.516-3.556 5.429v3.46h-4.741v2.952h4.741"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.684,d:"M390.203 7.805a5.93 5.93 0 0 1 5.798-4.692 5.929 5.929 0 0 1 5.926 5.927c0 2.43-1.47 4.516-3.556 5.429v3.46h-4.741v2.952h4.741"}),o.jsx("path",{fill:"currentColor",fillOpacity:.949,d:"M397.967 9.04a1.955 1.955 0 1 0-3.91 0 1.955 1.955 0 0 0 3.91 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.682,d:"M417.633 14.465a5.924 5.924 0 0 1-3.551-5.421 5.92 5.92 0 0 1 5.919-5.919 5.92 5.92 0 0 1 5.918 5.919 5.924 5.924 0 0 1-3.551 5.421v3.457h-4.735v2.947h4.735"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.682,d:"M414.232 10.37a5.92 5.92 0 0 1 5.769-7.245 5.92 5.92 0 0 1 5.918 5.919 5.924 5.924 0 0 1-3.551 5.421v3.457h-4.735v2.947h4.735"}),o.jsx("path",{fill:"currentColor",fillOpacity:.976,d:"M421.989 9.044a1.977 1.977 0 1 0-3.954 0 1.977 1.977 0 0 0 3.954 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.681,d:"M441.635 14.463a5.917 5.917 0 0 1-3.548-5.417A5.915 5.915 0 0 1 444 3.133a5.916 5.916 0 0 1 5.914 5.913 5.919 5.919 0 0 1-3.548 5.417v3.454h-4.731v2.945h4.731"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.681,d:"M439.286 12.61a5.874 5.874 0 0 1-1.199-3.564A5.915 5.915 0 0 1 444 3.133a5.916 5.916 0 0 1 5.914 5.913 5.919 5.919 0 0 1-3.548 5.417v3.454h-4.731v2.945h4.731"}),o.jsx("path",{fill:"currentColor",fillOpacity:.992,d:"M446.003 9.046a1.99 1.99 0 1 0-3.981 0 1.99 1.99 0 0 0 3.981 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.68,d:"M465.636 14.463a5.916 5.916 0 0 1-3.547-5.415 5.913 5.913 0 0 1 5.912-5.912 5.913 5.913 0 0 1 5.911 5.912 5.916 5.916 0 0 1-3.547 5.415v3.452h-4.729v2.944h4.729"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.68,d:"M465.181 14.24a5.913 5.913 0 0 1-3.092-5.192 5.913 5.913 0 0 1 5.912-5.912 5.913 5.913 0 0 1 5.911 5.912 5.916 5.916 0 0 1-3.547 5.415v3.452h-4.729v2.944h4.729"}),o.jsx("path",{fill:"currentColor",d:"M470.009 9.047a1.997 1.997 0 1 0-3.994 0 1.997 1.997 0 0 0 3.994 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.68,d:"M489.636 14.463a5.916 5.916 0 0 1-3.548-5.416 5.915 5.915 0 0 1 5.913-5.913 5.915 5.915 0 0 1 5.912 5.913 5.917 5.917 0 0 1-3.547 5.415v3.453h-4.73v2.945h4.73"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.68,d:"M489.636 14.463a5.916 5.916 0 0 1-3.548-5.416 5.915 5.915 0 0 1 5.913-5.913 5.915 5.915 0 0 1 5.912 5.913 5.917 5.917 0 0 1-3.547 5.415v3.453h-4.73v2.945h2.078"}),o.jsx("path",{fill:"currentColor",fillOpacity:.996,d:"M494.006 9.047a1.994 1.994 0 1 0-3.988 0 1.994 1.994 0 0 0 3.988 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.682,d:"M513.634 14.465a5.92 5.92 0 0 1-3.55-5.42 5.919 5.919 0 0 1 5.917-5.917 5.918 5.918 0 0 1 5.916 5.917 5.92 5.92 0 0 1-3.55 5.42v3.455h-4.733v2.946h4.733"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.682,d:"M513.634 14.465a5.92 5.92 0 0 1-3.55-5.42 5.919 5.919 0 0 1 5.917-5.917 5.918 5.918 0 0 1 5.916 5.917 5.92 5.92 0 0 1-3.55 5.42v3.455h-4.733v1.71"}),o.jsx("path",{fill:"currentColor",fillOpacity:.984,d:"M517.994 9.045a1.982 1.982 0 1 0-3.963 0 1.982 1.982 0 0 0 3.963 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.684,d:"M537.631 14.468a5.928 5.928 0 0 1-3.555-5.427 5.927 5.927 0 0 1 5.925-5.924 5.926 5.926 0 0 1 5.924 5.924 5.928 5.928 0 0 1-3.555 5.427v3.46h-4.739v2.95h4.739"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.684,d:"M537.631 14.468a5.928 5.928 0 0 1-3.555-5.427 5.927 5.927 0 0 1 5.925-5.924 5.926 5.926 0 0 1 5.924 5.924 5.928 5.928 0 0 1-3.555 5.427v3.46h-3.129"}),o.jsx("path",{fill:"currentColor",fillOpacity:.961,d:"M541.974 9.04a1.961 1.961 0 1 0-3.923.001 1.961 1.961 0 0 0 3.923 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.687,d:"M561.626 14.472a5.94 5.94 0 0 1-3.561-5.436A5.937 5.937 0 0 1 564 3.1a5.937 5.937 0 0 1 5.936 5.935 5.94 5.94 0 0 1-3.562 5.436v3.466h-4.748v2.956h4.748"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.687,d:"M561.626 14.472a5.94 5.94 0 0 1-3.561-5.436A5.937 5.937 0 0 1 564 3.1a5.937 5.937 0 0 1 5.936 5.935 5.94 5.94 0 0 1-3.562 5.436v3.416"}),o.jsx("path",{fill:"currentColor",fillOpacity:.925,d:"M565.945 9.036a1.932 1.932 0 1 0-3.865 0 1.932 1.932 0 0 0 3.865 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.691,d:"M585.621 14.478a5.953 5.953 0 0 1-3.569-5.448A5.95 5.95 0 0 1 588 3.08a5.95 5.95 0 0 1 5.949 5.949 5.953 5.953 0 0 1-3.569 5.448v3.474h-4.759v2.963h4.759"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.691,d:"M585.621 14.478a5.953 5.953 0 0 1-3.569-5.448A5.95 5.95 0 0 1 588 3.08a5.95 5.95 0 0 1 5.949 5.949 5.952 5.952 0 0 1-3.519 5.426"}),o.jsx("path",{fill:"currentColor",fillOpacity:.882,d:"M589.908 9.03a1.896 1.896 0 1 0-3.792 0 1.896 1.896 0 0 0 3.792 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.695,d:"M609.615 14.485a5.968 5.968 0 0 1-3.579-5.463A5.966 5.966 0 0 1 612 3.058a5.967 5.967 0 0 1 5.965 5.964 5.968 5.968 0 0 1-3.579 5.463v3.483h-4.771v2.97h4.771"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.695,d:"M609.615 14.485a5.968 5.968 0 0 1-3.579-5.463A5.966 5.966 0 0 1 612 3.058a5.967 5.967 0 0 1 5.965 5.964c0 1.21-.363 2.335-.983 3.275"}),o.jsx("path",{fill:"currentColor",fillOpacity:.835,d:"M613.865 9.022a1.853 1.853 0 1 0-3.706 0 1.853 1.853 0 0 0 3.706 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.7,d:"M633.608 14.493a5.987 5.987 0 0 1-3.59-5.48A5.984 5.984 0 0 1 636 3.031a5.984 5.984 0 0 1 5.982 5.982 5.986 5.986 0 0 1-3.589 5.48v3.493h-4.785v2.98h4.785"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.7,d:"M633.608 14.493a5.987 5.987 0 0 1-3.59-5.48A5.984 5.984 0 0 1 636 3.031a5.984 5.984 0 0 1 5.982 5.982v.078"}),o.jsx("path",{fill:"currentColor",fillOpacity:.776,d:"M637.816 9.013a1.804 1.804 0 1 0-3.608 0 1.804 1.804 0 0 0 3.608 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.706,d:"M657.6 14.5a6.005 6.005 0 0 1-3.601-5.496A6.004 6.004 0 0 1 660 3.002a6.003 6.003 0 0 1 6.001 6.002 6.006 6.006 0 0 1-3.6 5.497v3.504H657.6v2.989h4.801"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.706,d:"M657.6 14.5a6.005 6.005 0 0 1-3.601-5.496A6.004 6.004 0 0 1 660 3.002a5.999 5.999 0 0 1 5.101 2.84"}),o.jsx("path",{fill:"currentColor",fillOpacity:.718,d:"M661.762 9.003a1.75 1.75 0 1 0-3.5 0 1.75 1.75 0 0 0 3.5 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.711,d:"M681.592 14.51a6.025 6.025 0 0 1-3.613-5.516A6.024 6.024 0 0 1 684 2.973a6.023 6.023 0 0 1 6.021 6.02 6.026 6.026 0 0 1-3.612 5.516v3.517h-4.817v2.998h4.817"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.711,d:"M681.592 14.51a6.025 6.025 0 0 1-3.613-5.516 6.024 6.024 0 0 1 8.647-5.42"}),o.jsx("path",{fill:"currentColor",fillOpacity:.651,d:"M685.706 8.994a1.694 1.694 0 1 0-3.387 0 1.694 1.694 0 0 0 3.387 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.717,d:"M705.584 14.518a6.045 6.045 0 0 1-3.625-5.534A6.043 6.043 0 0 1 708 2.942a6.044 6.044 0 0 1 6.042 6.042 6.047 6.047 0 0 1-3.625 5.534v3.528h-4.833v3.009h4.833"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.717,d:"M705.584 14.518a6.045 6.045 0 0 1-3.625-5.534 6.045 6.045 0 0 1 5.308-5.997"}),o.jsx("path",{fill:"currentColor",fillOpacity:.588,d:"M709.649 8.984a1.637 1.637 0 1 0-3.273 0 1.637 1.637 0 0 0 3.273 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.723,d:"M729.576 14.527a6.066 6.066 0 0 1-3.637-5.553A6.063 6.063 0 0 1 732 2.913a6.064 6.064 0 0 1 6.062 6.061 6.067 6.067 0 0 1-3.637 5.553v3.54h-4.849v3.018h4.849"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.723,d:"M729.576 14.527a6.066 6.066 0 0 1-3.637-5.553c0-1.89.867-3.58 2.225-4.692"}),o.jsx("path",{fill:"currentColor",fillOpacity:.522,d:"M733.592 8.974a1.58 1.58 0 1 0-3.159 0 1.58 1.58 0 0 0 3.159 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.728,d:"M753.568 14.535a6.085 6.085 0 0 1-3.649-5.57A6.084 6.084 0 0 1 756 2.884a6.083 6.083 0 0 1 6.081 6.08 6.086 6.086 0 0 1-3.648 5.57v3.552h-4.865v3.028h4.865"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.728,d:"M753.568 14.535a6.085 6.085 0 0 1-3.336-7.5"}),o.jsx("path",{fill:"currentColor",fillOpacity:.459,d:"M757.536 8.965a1.524 1.524 0 1 0-3.048 0 1.524 1.524 0 0 0 3.048 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.733,d:"M777.561 14.543a6.104 6.104 0 0 1-3.66-5.587A6.101 6.101 0 0 1 780 2.857a6.1 6.1 0 0 1 6.099 6.1c0 2.5-1.513 4.646-3.659 5.586v3.561h-4.879v3.037h4.879"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.733,d:"M777.561 14.543a6.12 6.12 0 0 1-3.464-4.052"}),o.jsx("path",{fill:"currentColor",fillOpacity:.4,d:"M781.485 8.956a1.472 1.472 0 1 0-2.945 0 1.472 1.472 0 0 0 2.945 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.738,d:"M801.554 14.55a6.12 6.12 0 0 1-3.669-5.602A6.117 6.117 0 0 1 804 2.833a6.117 6.117 0 0 1 6.115 6.115 6.12 6.12 0 0 1-3.669 5.601v3.572h-4.892v3.045h4.892"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.738,d:"M801.554 14.55a6.124 6.124 0 0 1-1.733-1.144"}),o.jsx("path",{fill:"currentColor",fillOpacity:.345,d:"M805.438 8.948a1.426 1.426 0 1 0-2.851 0 1.426 1.426 0 0 0 2.851 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.742,d:"M825.549 14.555a6.133 6.133 0 0 1-3.678-5.614A6.131 6.131 0 0 1 828 2.812a6.131 6.131 0 0 1 6.129 6.13c0 2.512-1.52 4.67-3.677 5.613v3.58h-4.903v3.051h4.903"}),o.jsx("path",{fill:"currentColor",fillOpacity:.298,d:"M829.397 8.942a1.385 1.385 0 1 0-2.77 0 1.385 1.385 0 0 0 2.77 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.745,d:"M849.544 14.56a6.145 6.145 0 0 1-3.684-5.624c0-3.39 2.751-6.14 6.14-6.14s6.14 2.75 6.14 6.14a6.145 6.145 0 0 1-3.684 5.624v3.586h-4.912v3.058h4.912"}),o.jsx("path",{fill:"currentColor",fillOpacity:.259,d:"M853.364 8.936a1.352 1.352 0 1 0-2.703 0 1.352 1.352 0 0 0 2.703 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.748,d:"M873.541 14.564a6.153 6.153 0 0 1-3.69-5.632A6.151 6.151 0 0 1 876 2.782a6.151 6.151 0 0 1 6.149 6.15 6.154 6.154 0 0 1-3.689 5.632v3.59h-4.919v3.063h4.919"}),o.jsx("path",{fill:"currentColor",fillOpacity:.231,d:"M877.338 8.931a1.326 1.326 0 1 0-2.651 0 1.326 1.326 0 0 0 2.651 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.749,d:"M897.538 14.567a6.16 6.16 0 0 1-3.693-5.638A6.157 6.157 0 0 1 900 2.774a6.157 6.157 0 0 1 6.155 6.155 6.16 6.16 0 0 1-3.693 5.638v3.594h-4.924v3.065h4.924"}),o.jsx("path",{fill:"currentColor",fillOpacity:.212,d:"M901.321 8.929a1.309 1.309 0 1 0-2.618 0 1.309 1.309 0 0 0 2.618 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.75,d:"M921.537 14.568a6.162 6.162 0 0 1-3.694-5.64A6.16 6.16 0 0 1 924 2.77a6.16 6.16 0 0 1 6.157 6.157 6.162 6.162 0 0 1-3.694 5.64v3.596h-4.926v3.067h4.926"}),o.jsx("path",{fill:"currentColor",fillOpacity:.2,d:"M925.313 8.928a1.3 1.3 0 1 0-2.601 0 1.3 1.3 0 0 0 2.601 0Z"})]}));M6e.displayName="Sequence";const k6e=f.memo(({...e})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...e,children:[o.jsx("path",{d:"M-2.463 2.568a6.162 6.162 0 0 1-3.695-5.64A6.16 6.16 0 0 1 0-9.23a6.16 6.16 0 0 1 6.158 6.157 6.162 6.162 0 0 1-3.695 5.64v3.597h-4.926V9.23h4.926",style:{fill:"none",stroke:"currentColor",strokeWidth:1.75,strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2},transform:"translate(12 11.997) scale(.96001)"}),o.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.68,d:"M9.18 14.24a5.912 5.912 0 0 1-3.09-5.193A5.914 5.914 0 0 1 12 3.136a5.914 5.914 0 0 1 5.912 5.911 5.916 5.916 0 0 1-3.547 5.415v3.452h-4.73v2.944h4.73"}),o.jsx("path",{fill:"currentColor",d:"M14.009 9.047a1.997 1.997 0 1 0-3.993 0 1.997 1.997 0 0 0 3.993 0z"})]}));k6e.displayName="LabsStatic";const T6e=f.memo(({size:e=32,shouldAnimate:t=!0,className:n})=>{const{_shouldAnimate:r,sequenceProps:s,staticProps:a}=q$({shouldAnimate:t,animationDuration:1.5,animationName:"animate-labsIndicator"});return o.jsx(oT,{size:e,className:n,children:r?o.jsx(M6e,{...s}):o.jsx(k6e,{...a})})});T6e.displayName="LabsLoader";const l7=f.memo(({type:e,size:t,shouldAnimate:n,className:r})=>f.useMemo(()=>{switch(e){case"research":return o.jsx(E6e,{size:t,shouldAnimate:n,className:r});case"labs":return o.jsx(T6e,{size:t,shouldAnimate:n,className:r});default:return o.jsx(z_,{size:t,shouldAnimate:n,className:r})}},[e,t,n,r]));l7.displayName="SearchModeLoader";const eH=I.memo(({children:e,className:t,as:n="div",active:r=!0,speed:s="normal",hoverOnly:a=!1,variant:i="default"})=>{const[l,c]=f.useState(!1),u=a?l:r;return I.createElement(n,{style:{animationDuration:s==="normal"?"1200ms":"1800ms"},className:B({shimmer:u&&i==="default","animate-gradient bg-clip-text text-transparent shimmer-super":u&&i==="super"},t),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},e)});eH.displayName="Shimmer";const N6e=I.memo(({count:e=3,variant:t="default",className:n})=>{const r="clip-path-small-shimmer",s="clip-path-default-shimmer",a=t==="small"?12:14;return o.jsxs(o.Fragment,{children:[o.jsx("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:o.jsx("defs",{children:o.jsx("clipPath",{id:s,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0635 0.704214C9.13824 0.253115 8.09868 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C8.09868 14 9.13824 13.7469 10.0635 13.2958C8.19825 11.8312 7 9.55552 7 7C7 4.44448 8.19825 2.16882 10.0635 0.704214Z",fill:"#D9D9D9"})})})}),o.jsx("svg",{width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:o.jsx("defs",{children:o.jsx("clipPath",{id:r,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.57242 0.57787C7.7928 0.20734 6.92062 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12C6.92062 12 7.7928 11.7927 8.57242 11.4221C7.00228 10.1385 6 8.18628 6 6C6 3.81372 7.00228 1.86154 8.57242 0.57787Z",fill:"#D9D9D9"})})})}),o.jsx("div",{className:B("gap-xs relative flex shrink-0 items-center",n),children:o.jsx("div",{className:"ml-xs flex",children:Array.from({length:e}).map((i,l)=>o.jsx("div",{className:B("relative z-0 shrink-0",{"-ml-[5px]":t==="default"},{"-ml-xs":t==="small"}),style:{width:a,height:a,...l!==e-1?{clipPath:`url(#${t==="small"?r:s})`}:{}},children:o.jsx(eH,{as:"div",className:"bg-subtle size-full rounded-full"})},l))})})]})});N6e.displayName="CitationPileShimmer";const j6e=40,tH=(e,t)=>B("relative flex items-center gap-1.5",{"border-subtlest bg-subtler border rounded-full px-3 py-2":t,"border border-super/20 bg-super/10 dark:bg-super/10 focus:bg-super/20 focus:border-super/30 text-super":e&&t}),A6e=()=>{const{isMobileUserAgent:e}=xe();return e?16:18},I6e=f.memo(({modeList:e,isSticky:t,inFlight:n,hideStickyTitle:r,accessoryProps:s,accessory:a,defaultModeOverride:i,tabsPlaceholder:l})=>{const{result:{query_str:c,uuid:u,collection_info:{uuid:d}={},backend_uuid:m,context_uuid:p,frontend_context_uuid:h,display_model:g,attachments:y},selectedRefinementQuery:v,selectedFilterIds:x,userClarifications:b,editQueryValue:_}=an(),{topSources:w}=w6e({dedupeAttachments:!1}),{submitQuery:C}=Hs(),S=Jd(),{isMobileStyle:E}=xe(),{refinementFilters:M,handleResetClickAnswerMode:k,handleResetClickDefaultMode:A,handleApplyClickDefaultMode:R,handleApplyClickAnswerMode:O,handleFilterClickAnswerMode:L,isRefinementLoading:P,handleResetToOriginalState:N}=Gzt(),[T,j]=f.useState(!1),F=v||c,U=f.useMemo(()=>F?Dk(cu(F,b).actualQuery):"",[F,b]),{updateCurrentMode:V}=uw(),{currentModeData:{mode:$}}=tf(),{trackEvent:z}=Ne(),[Q,Y]=f.useState(!1),{isMax:W}=_t(),X=fn(),{variation:G}=B2e(!1),J=W&&g==="comet_max_assistant"&&X&&G,[q,te]=f.useState(null),re=f.useCallback(me=>{const Ae=me.mode==="search";C({rawQuery:_,existingEntryUUID:m,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:S?void 0:h,promptSource:"user",querySource:Ae?"search-mode":"chat-mode",attachments:y,modelPreferenceOverride:g,...Ae?{alwaysSearchOverride:!0}:{overrideNoSearch:!0}}),te(null)},[C,_,m,S,h,y,g]),{terminateEntry:ae}=y6e({entryUUID:m||"",reason:q?.mode==="search"?"search-answer-mode":"chat-answer-mode",callback:f.useCallback(()=>{q&&re(q)},[q,re])}),fe=f.useCallback(me=>{N(),me.mode==="search"||me.mode==="chat"?(m&&n?(te(me),ae()):re(me),z("answer mode tab selected",{answerMode:me.mode,entryUUID:m,contextUUID:p})):(V(me.mode),me.mode!=="default"&&s?.isOpen&&s.onClick())},[V,s,m,p,z,n,ae,te,re,N]),de=f.useMemo(()=>e.find(Ae=>Ae.mode==="default"),[e]),ve=f.useMemo(()=>e.filter(me=>me.mode!=="default"&&me.mode!==i),[e,i]),_e=f.useCallback(()=>{de&&fe(de)},[fe,de]),Se=f.useCallback(me=>{$!==me.mode&&fe(me)},[fe,$]);f.useEffect(()=>{let me=null;const Ae=je=>{je.metaKey&&je.shiftKey&&!me&&(me=setTimeout(()=>{Y(!0)},500))},Ee=je=>{(!je.metaKey||!je.shiftKey)&&(me&&(clearTimeout(me),me=null),Y(!1))};return document.addEventListener("keydown",Ae),document.addEventListener("keyup",Ee),()=>{me&&clearTimeout(me),document.removeEventListener("keydown",Ae),document.removeEventListener("keyup",Ee)}},[]);const be=f.useCallback(()=>{j(!0),z("refinement filters tab clicked",{answerMode:$})},[$,z]);return o.jsxs(ge.div,{layout:!0,layoutRoot:!0,"data-testid":ga.ANSWER_MODE_TABS_ROOT,children:[!r&&o.jsx("div",{className:B("max-w-threadContentWidth mx-auto flex w-full items-end ease-out will-change-auto",{"opacity-100":t,"pointer-events-none opacity-0":!t}),style:{height:j6e},children:o.jsx(D,{variant:"section-title",className:B("erp-sidecar:line-clamp-1 hidden translate-y-px",{"@[1056px]/main:md:!line-clamp-1":!!d,"@[900px]/main:md:!line-clamp-1":!d}),children:U})}),o.jsx(H,{className:B("relative",{"border-b":!E,"pt-sm":E}),children:o.jsx("div",{className:"-mx-md px-md scrollbar-none -my-px overflow-x-auto overflow-y-hidden py-px",children:o.jsxs("div",{className:"table w-full",children:[o.jsx("div",{className:B("inset-x-sm top-md absolute bottom-0 shadow-md will-change-[opacity]",{"opacity-0":!t,"opacity-30":t})}),o.jsx(H,{variant:"background",className:"gap-xs relative",children:o.jsxs("div",{className:"relative flex gap-1.5",children:[o.jsx("div",{className:"md:max-w-threadContentWidth md:mx-auto md:w-full",children:o.jsxs("div",{className:B("grid grid-cols-1 grid-rows-1",{"-mx-0":E,"-mx-sm":!E}),children:[!de&&o.jsx(O6e,{}),o.jsxs("div",{className:"gap-xs relative col-start-1 row-start-1 flex",children:[de&&o.jsx(P6e,{tab:de,active:$===de.mode||!!i&&$==i,onClick:_e,id:u??"",inFlight:n,testId:de.testId,isScreenshotting:Q,isCometMaxAssistantAnswer:J}),o.jsxs(Ke,{initial:!1,children:[ve.map(me=>o.jsx(nH,{text:me.text,active:$===me.mode,onClick:Se,mode:me,icon:me.icon,id:u??"",count:me.count,inFlight:n,disabled:me.disabled,testId:me.testId,loading:me.loading,...me.mode==="sources"&&{sources:w}},me.text)),o.jsx("div",{className:"ml-auto",children:M&&M.length>0&&o.jsx(R6e,{onClick:be})})]})]}),ve.length===0&&l]})}),o.jsx("div",{className:"right-0 flex items-center md:absolute md:top-1/2 md:-translate-y-1/2",children:a})]})})]})})}),M&&M.length>0&&o.jsx(v6e,{refinementFilters:M,handleFilterClick:L,selectedFilterIds:x,isOpen:T,setIsOpen:j,handleResetClick:$==="default"||!Soe.includes($)?A:k,handleApplyClick:$==="default"||!Soe.includes($)?R:O,isLoading:P})]})});I6e.displayName="AnswerModeTabs";const R6e=f.memo(({onClick:e})=>{const{isMobileUserAgent:t}=xe(),{$t:n}=Z(),{trackEventOnce:r}=Ne();return f.useEffect(()=>{r("refinement filters tab viewed")},[r]),o.jsxs("button",{className:B("focus-visible:ring-offset-inverse focus-visible:ring-super group pointer-events-auto relative select-none rounded-md focus-visible:outline-none focus-visible:ring-1",{"p-0 pr-1 last:pr-4":t,"py-md pl-sm pr-2.5":!t}),onClick:e,type:"button","aria-label":"Filters",children:[o.jsx(H,{variant:"subtler",className:B("absolute inset-x-0 inset-y-2.5 rounded-md opacity-0 transition-opacity duration-150",{"group-hover:opacity-100":!t})}),o.jsxs("div",{className:tH(!1,t),children:[o.jsx("div",{className:"relative flex h-[16px] w-auto items-center",children:o.jsx("div",{className:"flex size-[16px] items-center justify-center",children:o.jsx(ce,{icon:Fie,size:t?"sm":"xs",className:B("text-foreground opacity-80 duration-100 sm:block",{"group-hover:opacity-100":!t})})})}),o.jsx("div",{className:B("flex items-center",{"h-4":t}),children:o.jsx(D,{className:B("text-foreground whitespace-nowrap font-medium opacity-80 duration-150",{"text-xs":t,"text-sm":!t},!t&&"group-hover:opacity-100"),children:n({defaultMessage:"Filters",id:"zSOvI0LO0n"})})})]})]})});R6e.displayName="FiltersTab";const P6e=f.memo(({tab:e,active:t,onClick:n,id:r,inFlight:s,testId:a,isCometMaxAssistantAnswer:i,isScreenshotting:l})=>{const{hasAnswer:c,isAnswerSkipped:u}=an(),{isMobileUserAgent:d}=xe(),m=f.useCallback(y=>l?"Perplexity":i?o.jsxs("div",{className:"flex items-center gap-2",children:[y,o.jsx(O_,{className:"text-max h-2.5"})]}):y,[l,i]),p=f.useMemo(()=>{switch(e.text.toLowerCase()){case"research":return"research";case"labs":return"labs";default:return"default"}},[e.text]),h=A6e(),g=B("text-foreground duration-100 group-hover:opacity-100",{"opacity-80":!t,"text-super":t&&d});return o.jsxs(ge.button,{className:B("focus-visible:ring-offset-inverse focus-visible:ring-super group pointer-events-auto relative select-none rounded-md focus-visible:outline-none focus-visible:ring-1",{"p-0 pr-1":d,"py-md pl-sm pr-2.5":!d}),onClick:n,type:"button","aria-label":e.text,"data-testid":a,children:[o.jsx(H,{variant:"subtler",className:B("absolute inset-x-0 inset-y-2.5 rounded-md opacity-0 transition-opacity duration-150",{"group-hover:opacity-100":!t})}),o.jsxs("div",{className:tH(t,d),children:[o.jsx("div",{className:"relative flex size-4 items-center justify-center",children:o.jsx(Ke,{mode:"wait",initial:!1,children:!c&&!u?o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:e.icon?{opacity:0}:void 0,transition:{duration:.15},children:o.jsx(l7,{type:p,size:h,shouldAnimate:!0,className:g})},"spinner"):e.icon?o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:o.jsx(ce,{icon:e.icon,size:d?"sm":"xs",className:g})},`icon-${e.text}`):o.jsx(ge.div,{children:o.jsx(l7,{type:p,size:h,shouldAnimate:!1,className:g})},"empty-spinner")})}),o.jsxs("div",{className:"relative",children:[o.jsx(Ke,{initial:!1,mode:"wait",children:o.jsx(ge.div,{className:"absolute whitespace-nowrap",initial:c?{opacity:1,y:0}:{opacity:0,y:20},animate:{opacity:1,y:0},exit:c?{opacity:0}:{opacity:0,y:-20},transition:{duration:l?0:c?.15:.3},children:o.jsx(D,{className:B("text-foreground whitespace-nowrap font-medium duration-150 group-hover:opacity-100",{"text-xs":d,"text-sm":!d,"opacity-80":!t,"text-super":t&&d}),children:m(e.text)})},`text-${e.text}`)}),o.jsx("div",{className:"invisible",children:o.jsx(D,{className:B("text-foreground whitespace-nowrap",{"text-xs font-medium":d,"text-sm font-[475]":!d}),children:m(e.text)})})]})]}),t&&o.jsx(rH,{id:r,inFlight:s,isScreenshotting:l})]})});P6e.displayName="StaticTabWithAnimatedContent";const O6e=f.memo(()=>{const e=f.useMemo(()=>({mode:"default",text:"placeholder",count:0,disabled:!1,icon:void 0,loading:!1,testId:"placeholder",id:"d"}),[]);return o.jsx("div",{className:"pointer-events-none invisible col-start-1 row-start-1 opacity-0",role:"none",children:o.jsx(nH,{text:"placeholder",active:!1,onClick:kn,mode:e,icon:void 0,id:"placeholder",count:0,inFlight:!1,disabled:!1,testId:"placeholder",loading:!1},"placeholder")})});O6e.displayName="PlaceholderTab";const nH=f.memo(({text:e,active:t,mode:n,onClick:r,icon:s,id:a,count:i,inFlight:l,disabled:c,testId:u,loading:d,sources:m})=>{const{isMobileUserAgent:p}=xe(),h=f.useCallback(()=>{r(n)},[r,n]),g=!p&&i!==void 0&&i>0;return o.jsxs("button",{className:B("focus-visible:ring-offset-inverse focus-visible:ring-super group pointer-events-auto relative select-none rounded-md focus-visible:outline-none focus-visible:ring-1",{"p-0 pr-1 last:pr-4":p,"py-md pl-sm pr-2.5":!p}),onClick:h,type:"button","aria-label":e,disabled:c,"data-testid":u,children:[o.jsx(H,{variant:"subtler",className:B("absolute inset-x-0 inset-y-2.5 rounded-md opacity-0 transition-opacity duration-150",{"group-hover:opacity-100":!t&&!c&&!p})}),o.jsxs("div",{className:tH(t,p),children:[o.jsx("div",{className:"relative flex h-[16px] w-auto items-center",children:o.jsx(L6e,{icon:s,loading:d,active:t,disabled:c,mode:n,sources:m})}),o.jsxs("div",{className:B("flex items-center",{"h-4":p}),children:[o.jsx(D,{className:B("text-foreground whitespace-nowrap font-medium duration-150",{"text-xs":p,"text-sm":!p,"text-super":t&&p},!c&&!p&&"group-hover:opacity-100",c?"opacity-50":!t&&"opacity-80"),children:e}),g&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"px-xs ml-px leading-none opacity-35",children:""}),o.jsx(AW,{count:i,className:B(c?"opacity-40":"opacity-65")})]})]})]}),t&&o.jsx(rH,{id:a,inFlight:l})]})});nH.displayName="AnswerModeTab";const rH=f.memo(({id:e,inFlight:t,isScreenshotting:n})=>{const{isMobileUserAgent:r}=xe();return o.jsx(ge.div,{className:B("bg-inverse inset-x-sm absolute -bottom-px h-[2.5px]",{hidden:r}),transition:{duration:n?0:.1,ease:"easeOut"},layoutId:t?void 0:`answer-mode-tab-underline-${e}`})});rH.displayName="Underline";const eGt=({sources:e})=>{const{isEntryInFlight:t}=an();return e?.length?o.jsx(tW,{sources:e,count:3,variant:"small"}):t?o.jsx(N6e,{count:3,variant:"small"}):null},L6e=({icon:e,loading:t,active:n,disabled:r,mode:s,sources:a})=>{const{isMobileUserAgent:i}=xe(),l=A6e();return s.mode==="sources"?o.jsx("div",{className:"w-max flex-none",children:o.jsx(eGt,{sources:a})}):o.jsx("div",{className:"flex size-[16px] items-center justify-center",children:e?t?o.jsx($r,{size:l}):o.jsx(ce,{icon:e,size:i?"sm":"xs",className:B("text-foreground duration-100 sm:block",{"group-hover:opacity-100":!r&&!i,"text-super":n&&i},r?"opacity-50":!n&&"opacity-80")}):o.jsx(z_,{size:l,shouldAnimate:!1,className:B("text-foreground duration-100",{"group-hover:opacity-100":!r&&!i,"opacity-80":!n,"text-super":n&&i})})})};L6e.displayName="AnswerModeIcon";const c7=f.memo(({submitQuery:e,isFirstResult:t})=>{const{$t:n}=Z(),{inFlight:r,editQueryValue:s,isEditingQuery:a,isFailed:i,userClarifications:l,selectedRefinementQuery:c,result:{uuid:u,query_str:d,backend_uuid:m,frontend_context_uuid:p,display_model:h,attachments:g,side_by_side_metadata:y,user_selected_model:v,sources:x},actions:{setEditQueryValue:b,setIsEditingQuery:_}}=an(),{results:w}=Vt(),C=Jd(),S=hi(),{trackEvent:E}=Ay(),{isMobileStyle:M}=xe(),{openModal:k}=xt(),[A,R]=f.useState(!1),O=c??d,L=f.useCallback(()=>{b(O??""),_(!1),m&&E("cancel edit query click",{entryUUID:m})},[m,O,b,_,E]),P=f.useRef(null),N="editable-thread-title",{updateCurrentMode:T}=uw();Hm("thread-title",{skip:!t}),f.useEffect(()=>{r&&_(!1)},[_,r]);const j=f.useCallback(()=>{p?(s!==O&&e({rawQuery:s,existingEntryUUID:m,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:C?void 0:p,promptSource:"user",querySource:"edit",attachments:g,modelPreferenceOverride:h,sourcesOverride:V2(x?.sources)}),_(!1),T("default")):ne.warn(new Error(`No frontend UUID for thread backendUUID=${m}`))},[m,p,C,s,O,g,x,h,e,_,T]),{terminateEntry:F,isTerminating:U}=y6e({entryUUID:m,reason:N,callback:j}),V=f.useCallback(()=>{S&&F()},[S,F]),$=f.useCallback(()=>{S&&(E("confirm edit query click",{entryUUID:m??"",newQuery:s}),p?j():ne.warn(new Error(`No frontend UUID for thread backendUUID=${m}`)))},[S,m,p,j,E,s]),z=M_(),Q=f.useCallback(()=>{r?V():$()},[r,V,$]),Y=f.useCallback(de=>{ra.isEnterKeyWithoutShift(de)?(de.preventDefault(),Q()):ra.isEscapeKey(de)&&L()},[Q,L]),{quote:W,actualQuery:X}=cu(O,l),G=f.useCallback(()=>{b(X??""),_(!0)},[b,X,_]),J=f.useCallback(de=>{de.preventDefault(),navigator.clipboard.writeText(O??"")},[O]),q=s==="",te=!!S,re=un.hasUnspecifiedSelectionStatus(y)&&un.hasMultipleSiblingEntries(w,y?.sibling_uuid),ae=f.useMemo(()=>({maskImage:"linear-gradient(to bottom, black 50%, transparent)"}),[]),fe=f.useCallback(()=>{k("taskShortcutModal",{source:"thread_create",shortcut:{prompt:O??"",searchModel:v??rB,sources:V2(x?.sources)}})},[k,O,v,x]);return o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"mb-xs group relative flex items-end gap-0.5 pt-6",children:[o.jsx("div",{className:"-inset-md absolute select-none"}),o.jsx("div",{className:"md:mr-xl min-w-0 flex-1",children:a?o.jsx(nGt,{onKeyDown:Y,editQueryValue:s,setEditQueryValue:b,isEmptyQuery:q,inputRef:P}):o.jsx(F6e,{queryString:X??"",isFirstResult:t,isFailed:i,quote:W,setInitialized:R,initialized:A},u)}),te&&o.jsx("div",{className:"absolute bottom-0 right-0 flex shrink-0",children:o.jsx("div",{"data-testid":"edit-query-button-group",className:B("bg-base mb-xs shadow-subtle border-subtlest relative flex shrink-0 flex-row rounded-[10px] border p-[1.5px] duration-150 group-hover:pointer-events-auto group-hover:opacity-100",{"pointer-events-none opacity-0":!a,"pointer-events-auto opacity-100":a||U}),children:a?M?null:o.jsxs(o.Fragment,{children:[o.jsx(he,{toolTip:n({defaultMessage:"Save and rewrite answer",id:"J0SzInCu9R"}),icon:Sr,size:"tiny",variant:"primary",onClick:Q,extraCSS:"shrink-0",testId:"confirm-edit-query-button",disabled:U,isLoading:U}),o.jsx("div",{className:"m-[1.5px] w-px border-r border-transparent"}),o.jsx(he,{icon:Rt,size:"tiny",variant:"common",extraCSS:"!bg-base !text-quiet hover:!bg-subtler shrink-0",onClick:L,testId:"cancel-edit-query-button",disabled:U})]}):o.jsxs(o.Fragment,{children:[o.jsx(he,{icon:vu,size:"tiny",variant:"common",onClick:G,disabled:re,extraCSS:B("!bg-base hover:!bg-subtler shrink-0 !text-quiet !rounded-r-[2px]"),testId:"edit-query-button",toolTip:n({defaultMessage:"Edit Query",id:"b3OoXBV5TQ"})}),o.jsx(H,{className:"m-[1.5px] w-px border-r"}),o.jsx(he,{icon:mle,size:"tiny",variant:"common",extraCSS:B("!bg-base hover:!bg-subtler shrink-0 !text-quiet !rounded-l-[2px]",{"!rounded-r-[2px]":z}),onClick:J,testId:"copy-query-button",toolTip:n({defaultMessage:"Copy Query",id:"pLS6m4WFYK"}),clickFeedback:!0}),z&&o.jsxs(o.Fragment,{children:[o.jsx(H,{className:"m-[1.5px] w-px border-r"}),o.jsx(he,{icon:G7,size:"tiny",variant:"common",extraCSS:"!bg-base hover:!bg-subtler shrink-0 !text-quiet !rounded-l-[2px]",onClick:fe,testId:"save-as-shortcut-button",toolTip:n({defaultMessage:"Save query as shortcut",id:"iOwvGHWuK/"}),clickFeedback:!0})]})]})})})]}),a&&M&&o.jsxs("div",{className:"gap-x-sm mb-sm pb-sm -inset-x-xs absolute top-full mt-[12px] flex justify-end",children:[o.jsx(H,{className:"-inset-lg -top-sm absolute",variant:"background",style:ae}),o.jsx(he,{size:"small",variant:"border",onClick:L,text:n({defaultMessage:"Cancel",id:"47FYwba+bI"}),extraCSS:"!bg-base",disabled:U}),o.jsx(he,{size:"small",variant:"primary",onClick:Q,text:n({defaultMessage:"Done",id:"JXdbo8Vnlw"}),disabled:U,isLoading:U})]})]})});c7.displayName="EditableThreadTitle";const u7=144,D6e=I.memo(({queryString:e="",className:t="",quote:n,isFirstResult:r,isFailed:s,setInitialized:a,initialized:i})=>{const{$t:l}=Z(),[c,u]=f.useState(!1),[d,m]=f.useState(!1),p=f.useRef(null),h=f.useMemo(()=>{const v=Dk(e);return v.length<75?"entry-title-100":v.length<200?"entry-title-200":"entry-title-300"},[e]);f.useEffect(()=>{typeof window>"u"||!p.current||p.current.getBoundingClientRect().height>u7&&!d&&m(!0)},[d,i]);const g=f.useCallback(()=>{u(!c)},[c]),y=f.useCallback(()=>{a(!0)},[a]);return o.jsxs("div",{className:"group/title relative inline-flex flex-col",children:[n&&o.jsxs(D,{variant:"small",color:"light",className:"border-super bg-subtlest px-sm mb-2 flex items-center border-l-2 py-1.5",children:[o.jsx(ROe,{size:18,className:"text-super mr-sm shrink-0 -translate-y-px rotate-180"}),o.jsx("span",{className:"line-clamp-1",children:n})]}),o.jsx("div",{className:"overflow-hidden",children:o.jsxs(tGt,{isTruncated:d,isExpanded:c,children:[o.jsx(D,{variant:h,as:r?"h1":"div",ref:p,className:B("group/query relative whitespace-pre-line !text-wrap break-words [word-break:break-word]",t),children:s?o.jsx("div",{className:"gap-x-sm flex items-center",children:o.jsx("span",{children:e?o.jsx(jM,{editQueryValue:e,disabled:!0}):l({defaultMessage:"Something went wrong.",id:"iuY8kxCDQT"})})}):o.jsx(jM,{editQueryValue:e,disabled:!0,onChange:y})}),o.jsx("div",{className:B("text-inverse pointer-events-none absolute inset-x-0 bottom-0 h-1/4 transition-opacity duration-100",{"opacity-0":c}),style:{background:!c&&d?"linear-gradient(transparent, currentColor)":void 0}})]})}),d&&o.jsx("div",{className:"top-xs relative flex",children:o.jsx(Te,{size:"tiny","data-testid":"toggle-query-expand-button",extraCSS:"-mt-0.5 -ml-sm",chevron:!0,chevronIcon:c?ey:Dn,onClick:g,text:c?l({defaultMessage:"Show less",id:"qyJtWyZ0yt"}):o.jsx(pe,{defaultMessage:"Show more",id:"kgNFsmh2uY",description:"Show more of the query."})})})]})});D6e.displayName="DisplayQueryBase";const F6e=f.memo(D6e);F6e.displayName="DisplayQuery";const tGt=({children:e,isTruncated:t,isExpanded:n})=>t?o.jsx(zs,{transition:{duration:.2,ease:rn},initial:!1,mode:"popLayout",supportZeroHeight:!1,children:o.jsx(Qr,{className:"overflow-hidden",style:{maxHeight:n?void 0:u7},children:e})}):o.jsx("div",{style:{maxHeight:u7},children:e}),U6e=(e,t)=>{const n=Dk(e);return n.length<75?B("font-display text-2xl md:text-3xl font-semimedium",{"translate-y-[1px]":!t}):n.length<200?"font-display text-xl font-medium":"font-sans font-medium"},nGt=({onKeyDown:e,editQueryValue:t,setEditQueryValue:n,isEmptyQuery:r,inputRef:s})=>{const a=f.useCallback(i=>{n(i)},[n]);return o.jsxs("div",{className:"relative w-full min-w-0",children:[o.jsx("div",{className:"-inset-y-xs -left-sm border-subtlest bg-subtlest -right-sm md:-right-md absolute rounded-md border"}),o.jsxs("div",{className:"relative grid",children:[o.jsx(jM,{onKeyDown:e,editQueryValue:t,onChange:a,inputRef:s}),o.jsx("div",{className:B("pointer-events-none col-start-1 row-start-1 opacity-0",U6e(t)),children:r?o.jsx(o.Fragment,{children:""}):o.jsx(jM,{editQueryValue:t,disabled:!0})})]})]})},jM=({onKeyDown:e=kn,editQueryValue:t,disabled:n,onChange:r=kn,inputRef:s})=>{const{$t:a}=Z(),{isMobileUserAgent:i}=xe();return o.jsx("div",{className:B("text-foreground block h-auto w-full resize-none appearance-none overflow-hidden bg-transparent focus:outline-none","caret-super selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super",U6e(t,n),"[&_[contenteditable]]:!font-display [&_[contenteditable]]:!bg-transparent","[&_[contenteditable]]:max-h-none [&_[contenteditable]]:!overflow-hidden [&_[contenteditable]]:sm:max-h-none [&_[contenteditable]]:lg:max-h-none","[&_[contenteditable]+*>*]:opacity-50","[&>*]:p-0"),style:{gridArea:"1/-1"},children:o.jsx(Uk,{onKeyDown:e,placeholder:a({defaultMessage:"Ask anything",id:"AUouhaZgFv"}),value:t,onChange:r,minRows:0,isMobileStyle:!1,isMobileUserAgent:i,useLexical:!0,autoFocus:!0,disableInput:n,ref:s})})},rGt=({ref:e,compact:t,isFirstResult:n,isLastResult:r,submitQuery:s,idx:a,accessory:i})=>{const l=an(),{result:{backend_uuid:c,upsell_information:u},isEntryInFlight:d,hasAnswer:m,showAgentWorkflow:p,isAnswerSkipped:h}=l,{isAllPlansFinished:g}=Hzt(l),y=f.useCallback(()=>{AHe({entryUUID:c,reason:"skip-search"})},[c]),{value:v}=It({flag:"skip-search-button",subjectType:"visitor_id",defaultValue:!1}),{answerModeActionList:x,currentModeData:b,defaultModeOverride:_}=tf(),w=m||h||!r,C=B("md:pt-6 erp-sidecar:pt-0 erp-mobile-sidecar:pt-0",{"pt-headerHeight":n});return o.jsxs(o.Fragment,{children:[w&&o.jsx("div",{className:`max-w-threadContentWidth relative isolate z-20 mx-auto ${C}`,children:o.jsx("div",{className:t?"pointer-events-none opacity-0":void 0,children:o.jsx(c7,{isFirstResult:n,submitQuery:s})})}),o.jsx(Di,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,children:o.jsx(l0,{position:"top",idx:a,upsellInformation:u,backendUuid:c,isLastResult:r,inFlight:d,className:"max-w-threadContentWidth mt-md relative z-20 mx-auto"})}),o.jsx("div",{className:B("bg-base -mx-md px-md sticky-tabs-ref top-0 z-10",{[C]:!w},{"erp-sidecar:sticky md:sticky":t}),style:{marginTop:w?`-${j6e}px`:void 0},children:o.jsxs("div",{className:B("mx-auto",{"max-w-threadContentWidth":b.width==="default","max-w-none":b.width==="full","max-w-threadWidth":b.width==="wide"}),children:[!w&&o.jsx("div",{className:"max-w-threadContentWidth relative isolate z-20 mx-auto",children:o.jsx(c7,{isFirstResult:n,submitQuery:s})}),o.jsxs("div",{ref:e,className:"relative",children:[o.jsx(I6e,{modeList:x,defaultModeOverride:_,isSticky:w&&t,hideStickyTitle:!w,inFlight:d,accessory:i}),!g&&p&&!h&&o.jsx(GW,{className:"bg-base pt-md",skipSearchEnabled:v,onSkipSearch:y})]})]})})]})},sGt=I.memo(rGt),B6e=I.memo(({submitQuery:e})=>{const t="trigger-entry-rewrite",n=Nt(),{result:{backend_uuid:r,frontend_context_uuid:s,attachments:a,display_model:i},idx:l,editQueryValue:c}=an(),u=Jd(),d=window.location.hash.slice(1),m=parseInt(d,10),p=n?.get("rw")==="true";return f.useEffect(()=>{if(!(isNaN(m)||l!==m)&&p){pg({rw:void 0});const h=()=>e({rawQuery:c,existingEntryUUID:r,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:u?void 0:s,promptSource:"user",querySource:"rewrite-url-param",attachments:a,modelPreferenceOverride:i});r?lu({entryUUID:r,reason:t}).catch(g=>{ne.error("Error terminating entry",g)}).finally(h):h()}},[p,u,e,m,l,r,c,s,a,i]),null});B6e.displayName="TriggerEntryRewrite";const V6e=I.memo(()=>o.jsx(yn,{children:o.jsx("div",{className:"gap-sm flex flex-wrap",children:Array.from({length:8}).map((e,t)=>o.jsx($6e,{index:t},t))})}));V6e.displayName="ImagesModeLoader";const $6e=I.memo(({index:e})=>{const{isMobileStyle:t}=xe(),{isLargeScreen:n,isXLargeScreen:r}=Jm(),s=f.useMemo(()=>t?120:r?240:n?200:180,[t,n,r]);return o.jsx("div",{className:B("bg-subtler grow basis-1/3 rounded-xl md:basis-1/4",{"w-1/2 !max-w-none":e===1}),style:{height:s}})});$6e.displayName="Item";const W6e=I.memo(()=>o.jsx(yn,{children:o.jsx(H,{variant:"subtler",className:"h-[180px] w-full overflow-hidden rounded-xl [mask-image:linear-gradient(to_bottom,#000_0%,transparent_160px)]"})}));W6e.displayName="JobsModeLoader";const sH=I.memo(()=>o.jsxs("div",{className:"gap-md @container flex w-full flex-row",children:[o.jsx("div",{className:"md:@[1458px]:w-[874px] md:@[1458px]:shrink-0 w-full md:w-3/5",children:o.jsx(z6e,{})}),o.jsx("div",{className:"@md:w-[570px] @md:@[1458px]:w-full hidden md:block",children:o.jsx(H6e,{})})]}));sH.displayName="PlacesModeLoader";const H6e=I.memo(()=>o.jsx(yn,{children:o.jsx(H,{variant:"subtler",className:"sticky h-[180px] w-full overflow-hidden rounded-xl [mask-image:linear-gradient(to_bottom,#000_0%,transparent_160px)]"})}));H6e.displayName="PlacesModeMapLoader";const z6e=I.memo(()=>o.jsx(yn,{children:o.jsx("div",{className:"gap-md grid h-[180px] grid-cols-[repeat(auto-fill,minmax(220px,1fr))] overflow-hidden [mask-image:linear-gradient(to_bottom,#000_0%,transparent_160px)]",children:Array.from({length:8}).map((e,t)=>o.jsx(G6e,{},t))})}));z6e.displayName="PlacesModeGridLoader";const G6e=I.memo(()=>o.jsx("div",{className:B("bg-subtler aspect-[4/3] w-full rounded-xl")}));G6e.displayName="Item";const q6e=f.memo(()=>{const{isMobileStyle:e}=xe();return o.jsxs(yn,{className:"-mx-md pl-md md:mx-auto",children:[o.jsx("div",{className:"gap-md md:mb-lg mb-md flex auto-rows-fr grid-cols-2 overflow-hidden md:grid md:grid-cols-3",children:Array.from({length:3}).map((t,n)=>o.jsx(K6e,{},n))}),o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsxs("div",{className:"grid grid-cols-1 grid-rows-1 items-center",children:[o.jsx(D,{variant:e?"base":"section-title",className:"col-start-1 row-start-1",children:""}),o.jsx("div",{className:"bg-subtler col-start-1 row-start-1 h-3 w-32 grow rounded-full md:h-4"})]}),o.jsx("div",{className:"gap-md pr-md flex auto-rows-fr grid-cols-2 flex-col md:grid md:pr-0",children:Array.from({length:2}).map((t,n)=>o.jsx(Y6e,{},n))})]})]})});q6e.displayName="ShoppingModeLoader";const K6e=f.memo(()=>o.jsx("div",{className:B("bg-subtler aspect-video h-[327px] w-[70vw] grow rounded-xl md:h-[413px] md:w-full")}));K6e.displayName="Item";const Y6e=f.memo(()=>o.jsx("div",{className:"bg-subtler aspect-video h-[144px] w-full grow rounded-md"}));Y6e.displayName="SmallItem";const Q6e=I.memo(()=>o.jsx(yn,{children:o.jsx("div",{className:"gap-xs grid auto-cols-fr auto-rows-fr grid-cols-2 sm:grid-cols-3 xl:grid-cols-4",children:Array.from({length:8}).map((e,t)=>o.jsx(X6e,{},t))})}));Q6e.displayName="VideoModeLoader";const X6e=I.memo(()=>o.jsx("div",{className:B("bg-subtler aspect-video w-full grow rounded-md")}));X6e.displayName="Item";const aGt=(e,t)=>{const{value:n,loading:r}=It({flag:"sticky-thread-header",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};var oGt={};const iGt=ye(async()=>{const{ShoppingMode:e}=await K(async()=>{const{ShoppingMode:t}=await import("./ShoppingMode-CxRLV8JA.js");return{ShoppingMode:t}},__vite__mapDeps([468,3,1,4,125,445,469,470,6,5]));return{default:e}},{loading:()=>o.jsx(q6e,{})}),lGt=ye(async()=>{const{HotelsMode:e}=await K(async()=>{const{HotelsMode:t}=await import("./HotelsMode-DnFXsbB3.js");return{HotelsMode:t}},__vite__mapDeps([471,3,1,442,4,52,6,71,5,443,35,472,34,473,470]));return{default:e}},{loading:()=>o.jsx(sH,{})}),cGt=ye(async()=>{const{JobsMode:e}=await K(async()=>{const{JobsMode:t}=await import("./JobsMode-wJb8Ejiu.js");return{JobsMode:t}},__vite__mapDeps([474,3,1,4,5,454,6]));return{default:e}},{loading:()=>o.jsx(W6e,{})}),uGt=ye(async()=>{const{VideosMode:e}=await K(async()=>{const{VideosMode:t}=await import("./VideosMode-DImIj5qd.js");return{VideosMode:t}},__vite__mapDeps([475,3,1,4,476,116,117,118,5,470,6]));return{default:e}},{loading:()=>o.jsx(Q6e,{})}),dGt=ye(async()=>{const{ImagesMode:e}=await K(async()=>{const{ImagesMode:t}=await import("./ImagesMode-G6vTo158.js");return{ImagesMode:t}},__vite__mapDeps([477,3,1,4,476,446,5,478,470,6]));return{default:e}},{loading:()=>o.jsx(V6e,{})}),fGt=ye(async()=>{const{MapsMode:e}=await K(async()=>{const{MapsMode:t}=await import("./MapsMode-BFWYyUDf.js");return{MapsMode:t}},__vite__mapDeps([479,3,1,6,34,4,5,35,473,442,52,71,443,470]));return{default:e}},{loading:()=>o.jsx(sH,{})}),mGt=ye(async()=>{const{AssetsMode:e}=await K(async()=>{const{AssetsMode:t}=await import("./AssetsMode-DzEG0nDj.js").then(n=>n.a);return{AssetsMode:t}},__vite__mapDeps([112,3,1,4,5,63,17,6,18]));return{default:e}},{loading:()=>o.jsx(qW,{})}),pGt=ye(async()=>{const{AppsMode:e}=await K(async()=>{const{AppsMode:t}=await Promise.resolve().then(()=>$zt);return{AppsMode:t}},void 0);return{default:e}},{loading:()=>o.jsx(qW,{})}),hGt=ye(async()=>{const{TasksMode:e}=await K(async()=>{const{TasksMode:t}=await import("./TasksMode-iwrBL9on.js");return{TasksMode:t}},__vite__mapDeps([480,3,1,438,4,5,439,17,6,18,19,481]));return{default:e}},{loading:()=>o.jsx(ZAe,{})}),Z6e=I.memo(({isLastResult:e,isFirstResult:t,sbsEntriesGroup:n,submitQuery:r,shouldShowProductFeedback:s,feedbackEntryUUID:a,shouldShowRecruitmentBanner:i,deleteLastResult:l,setQuote:c,scrollToListItem:u,lastResultBuffer:d,idx:m})=>{const{answerModeActionList:p,currentModeData:h}=tf(),{isMobileStyle:g}=xe(),{result:{backend_uuid:y,context_uuid:v,attachments:x,status:b,frontend_context_uuid:_,query_str:w,parent_info:{mode:C,url_slug:S}={}},isEntryInFlight:E,webResults:M}=an(),k=Jd(),A=C&&S,[R,O]=f.useState(!1),{scrollContainerRef:L}=Oa(),P=f.useRef(new Set),{trackEvent:N}=Ne();f.useEffect(()=>{if(!(y?.length===0||y===GD||v?.length===0))for(const W of p)P.current.has(W.mode)||(P.current.add(W.mode),N("answer mode tab viewed",{answerMode:W.mode,entryUUID:y,contextUUID:v}))},[p,N,y,v]);const{ref:T,isSticky:j}=QHt({root:L.current??void 0}),{variation:F}=aGt(!0),U=f.useMemo(()=>F?g&&!oGt.NEXT_PUBLIC_IS_SIDECAR_BUILD?!1:j:!1,[g,j,F]),V=f.useCallback(()=>{u(m,{smooth:!0})},[u,m]);f.useEffect(()=>{typeof window>"u"||b!=="PENDING"||V()},[E,b,V]);const $=f.useMemo(()=>({backend_uuid:y,frontend_context_uuid:_,query_str:w}),[y,_,w]),z=f.useMemo(()=>{if(h.mode!=="default")return h.mode==="images"?k?void 0:o.jsx(tIe,{result:$,setIsGeneratingImage:O,isGeneratingImage:R}):h.mode==="assets"?o.jsx(eIe,{}):h.mode==="apps"?o.jsx(J6e,{}):null},[h.mode,k,$,R]),Q=x&&x.length>0,Y=f.useMemo(()=>{if(e&&d)return{paddingBottom:`${d+(Q?52:0)}px`}},[e,d,Q]);return o.jsxs(H,{className:B({"erp-sidecar:pt-0 erp-mobile-sidecar:pt-0":t&&!A,"erp-sidecar:min-h-[var(--sidecar-content-height)] min-h-[var(--page-content-height)] md:min-h-[var(--page-content-height-without-header)]":e}),style:Y,children:[o.jsx(B6e,{submitQuery:r}),o.jsx(JAe,{webResults:M,children:o.jsxs("div",{className:B("isolate mx-auto",{"px-md max-w-none":h.width==="full","max-w-threadWidth px-md md:px-lg":h.width==="wide","px-md":h.width==="default"}),children:[o.jsx(sGt,{ref:T,compact:U,isFirstResult:t,submitQuery:r,isLastResult:e,idx:m,accessory:z}),o.jsx("div",{className:B("pb-md mx-auto pt-5 md:pb-12",{"max-w-threadWidth":h.width==="wide","max-w-none":h.width==="full","max-w-threadContentWidth":h.width==="default","border-subtlest border-b":!e}),children:o.jsxs(Ke,{initial:!1,children:[h.mode==="default"&&o.jsx(Yo,{id:`default-mode-${_}`,children:o.jsx(m6e,{sbsEntriesGroup:n,submitQuery:r,shouldShowProductFeedback:s,feedbackEntryUUID:a,shouldShowRecruitmentBanner:i,deleteLastResult:l,setQuote:c})}),h.mode==="shopping"&&o.jsx(Yo,{id:`shopping-mode-${_}`,children:o.jsx(iGt,{})}),h.mode==="hotels"&&o.jsx(Yo,{id:`hotels-mode-${_}`,children:o.jsx(lGt,{})}),h.mode==="places"&&o.jsx(Yo,{id:`maps-mode-${_}`,children:o.jsx(fGt,{})}),h.mode==="jobs"&&o.jsx(Yo,{id:`jobs-mode-${_}`,children:o.jsx(cGt,{})}),h.mode==="videos"&&o.jsx(Yo,{id:`videos-mode-${_}`,children:o.jsx(uGt,{})}),h.mode==="images"&&o.jsx(Yo,{id:`images-mode-${_}`,children:o.jsx(dGt,{isGeneratingImage:R})}),h.mode==="sources"&&o.jsx(Yo,{id:`sources-mode-${_}`,children:o.jsx(_6e,{})}),h.mode==="assets"&&o.jsx(Yo,{id:`assets-mode-${_}`,children:o.jsx(mGt,{})}),h.mode==="apps"&&o.jsx(Yo,{id:`apps-mode-${_}`,children:o.jsx(pGt,{})}),h.mode==="tasks"&&o.jsx(Yo,{id:`tasks-mode-${_}`,children:o.jsx(hGt,{})})]})})]})})]})});Z6e.displayName="ThreadEntryInner";const J6e=I.memo(()=>{const e="apps-accessory",{$t:t}=Z(),{openModal:n}=xt(),{assets:r}=tf(),{result:{backend_uuid:s}}=an(),a=f.useMemo(()=>{for(let h=r.length-1;h>=0;h--){const g=r[h];if(g?.asset_type===Bt.APP)return g}},[r]);hU({assetType:Bt.APP,entryUUID:s,answerMode:"apps",reason:"apps-accessory"});const{downloadAsset:i}=u$t({asset:a,reason:e,answerMode:"apps",entryUUID:s}),l=f.useCallback(()=>{let h,g;for(let y=r.length-1;y>=0;y--){if(r[y]?.asset_type!==Bt.CODE_FILE)continue;const v=r[y];if(v?.code_file?.name==="index.html"){h=v?.uuid,g=v?.backend_uuid;break}}n("searchStepsAssetsModal",{backendUUID:g||s,assetUUID:h,answerMode:"search"})},[r,s,n]),c=f.useCallback(()=>{i()},[i]),u=f.useCallback(()=>{const h=new URL(window.location.href);h.pathname=`/apps/${s}`,window.open(h.toString(),"_blank","noopener,noreferrer")},[s]),d=f.useMemo(()=>o.jsx(ce,{icon:ple,size:"xs",className:"duration-150"}),[]),m=f.useMemo(()=>o.jsx(ce,{icon:m2,size:"xs",className:"duration-150"}),[]),p=f.useMemo(()=>o.jsx(ce,{icon:mb,size:"xs",className:"duration-150"}),[]);return o.jsxs("div",{className:"ml-auto flex items-center gap-1.5",children:[o.jsx(qh,{size:"tiny",pill:!0,leadingComponent:d,onClick:u,toolTip:t({defaultMessage:"View full screen",id:"nnujdEvOPI"})}),o.jsx(qh,{size:"tiny",pill:!0,leadingComponent:m,onClick:l,toolTip:t({defaultMessage:"View source",id:"khjKGjoVqR"})}),o.jsx(qh,{size:"tiny",pill:!0,leadingComponent:p,onClick:c,toolTip:t({defaultMessage:"Download",id:"5q3qC0sC3r"})})]})});J6e.displayName="AppsAccessory";const eIe=I.memo(()=>{const e="assets-accessory",{$t:t}=Z(),{inFlight:n,result:{backend_uuid:r}}=an(),{exportAllAssets:s,isExporting:a}=c$t({reason:e,entryUUID:r}),{isMobileStyle:i}=xe(),l=f.useCallback(()=>s(),[s]);return n||i?null:o.jsx(qh,{text:t({defaultMessage:"Download all",id:"V1UrPNM96z"}),size:"tiny",icon:POe,onClick:l,isLoading:a,disabled:a})});eIe.displayName="AssetsAccessory";const tIe=I.memo(({result:e,setIsGeneratingImage:t,isGeneratingImage:n})=>{const r="generate-image-accessory",{createLimit:s}=ma({reason:r}),{onGenerateImageClick:a}=FAe({reason:r}),{$t:i}=Z(),{isMobileStyle:l}=xe(),c=f.useMemo(()=>({entryUUID:e.backend_uuid,entryTitle:e.query_str??"",frontendContextUUID:e.frontend_context_uuid??""}),[e.backend_uuid,e.frontend_context_uuid,e.query_str]),u=f.useCallback(({style:m,customInstructions:p,onFailure:h})=>a({entryUUID:e.backend_uuid,imageStyle:m,customInstructions:p,setIsLoadingGeneratedImage:t,onSuccessCallback:()=>t(!1),onFailureCallback:g=>h(g)}),[a,e.backend_uuid,t]),d=f.useCallback(({onClick:m,isRateLimitReached:p,isDisabled:h,buttonIcon:g,text:y})=>o.jsx(qh,{text:y,size:"tiny",icon:g,onClick:m,disabled:h||p||n,extraCSS:"!py-md"}),[n]);return o.jsx(ge.div,{className:"py-sm pl-sm ml-auto",children:!l&&o.jsx(HAe,{entry:c,btnText:i(n?{defaultMessage:"Generating...",id:"A/lLjOnjl0"}:{defaultMessage:"Generate Image",id:"DjAvWI2RyU"}),userCreateLimit:s,isDisabled:!1,onGenerateClick:u,buttonComponent:d})})});tIe.displayName="GenerateImageAccessory";const nIe=f.memo(({idx:e,result:t,sbsEntriesGroup:n,isLastResult:r,isFirstResult:s,lastResultBuffer:a})=>{const{inFlight:i}=Vt(),{scrollToListItem:l}=OT(),{submitQuery:c,shouldShowProductFeedback:u,feedbackEntryUUID:d,shouldShowRecruitmentBanner:m,deleteLastResult:p,setQuote:h}=Hs(),g=f.useCallback(async y=>{i||c(y)},[c,i]);return o.jsx(O$,{idx:e,result:t,inFlight:i,isLastResult:r,isFirstResult:s,scrollToListItem:l,submitQuery:g,children:o.jsx(jW,{scrollToListItem:l,children:o.jsx(yEe,{children:o.jsx(Z6e,{isLastResult:r,isFirstResult:s,sbsEntriesGroup:n,shouldShowProductFeedback:u,feedbackEntryUUID:d??"",shouldShowRecruitmentBanner:m,deleteLastResult:p,setQuote:h,submitQuery:g,scrollToListItem:l,lastResultBuffer:a,idx:e})})})})});nIe.displayName="ThreadEntry";const rIe=I.memo(({children:e,forceVisible:t=!1,unmeasuredHeight:n,rootMargin:r,threshold:s,root:a,ref:i})=>{const[l,c]=f.useState(0),[u,d]=f.useState(t),[m,p]=f.useTransition(),[h,g]=f.useState(1),y=f.useRef(0),v=f.useRef(null),x=f.useRef(null),b=f.useRef(null),_=f.useRef(null);f.useEffect(()=>{const C=v.current,S=x.current;if(!(!C||!S||t))return b.current=new ResizeObserver(([E])=>{if(!E)return;const M=E.contentRect.height,k=E.contentRect.width;p(()=>{c(A=>M||A),y.current||(y.current=k),y.current!==k&&(y.current=k,g(A=>A+1))})}),_.current=new IntersectionObserver(([E])=>{E&&p(()=>d(E.isIntersecting))},{rootMargin:r,threshold:s,root:a}),b.current?.observe(C),_.current?.observe(S),()=>{b.current?.disconnect(),_.current?.disconnect()}},[t,n,r,s,a]),f.useEffect(()=>{const C=x.current;return!C||!h||t?void 0:gGt(()=>{_.current?.unobserve(C),d(!0),requestAnimationFrame(()=>_.current?.observe(C))})},[h,t]);const w=f.useCallback(C=>{v.current=C,i instanceof Function?i(C):i&&(i.current=C)},[i]);return o.jsx("div",{style:t?void 0:{minHeight:`${l||n}px`},ref:x,children:o.jsx("div",{ref:w,children:t||u?e:null})})});rIe.displayName="LazyContainer";let Eoe=Promise.resolve();const gGt=e=>{if("requestIdleCallback"in window){const t=requestIdleCallback(e);return()=>cancelIdleCallback(t)}else{let t=!1;return Eoe=Eoe.then(async()=>{t||(e(),await new Promise(n=>setTimeout(n,100)))}).catch(kn),()=>t=!0}},Moe=1e3,yGt=1,sIe=I.memo(e=>{const t="thread",{deprecatedOpenToast:n}=gn(),{results:r}=Vt(),{setQuote:s}=Hs(),{scrollContainerRef:a}=Oa(),{refs:i}=OT(),l=jt(),[c,u]=f.useState(!1),d=Z();zHt({reason:t});const m=f.useMemo(()=>e1e(r?.length?r:e.placeholderResults||[]),[r,e.placeholderResults]);f.useEffect(()=>{m.some(x=>x[0]?.has_expired_attachments)&&n(d.formatMessage({id:"zR3dvwKUWo",defaultMessage:"Some files have expired. Please reupload files to continue."}),"error",3)},[m,n,d]);const p=f.useMemo(()=>{if(typeof window>"u")return-1;const v=window.location.hash.slice(1);return v?Number.isNaN(Number(v))?m?.findIndex(x=>x[0]?.backend_uuid===v):Number(v):-1},[m]),h=f.useCallback((v,x)=>{x?i[v]={current:x}:delete i[v]},[i]),g=f.useCallback((v,x)=>v===0||v===x-1||!c&&v<=p,[p,c]);f.useEffect(()=>{if(~p){const v=setTimeout(()=>{u(!0)},1e4);return()=>{clearTimeout(v)}}},[p]),f.useEffect(()=>{const v=a.current;return v&&(v.scrollTop=0),()=>{u(!1)}},[l,a]),f.useEffect(()=>()=>{s(null)},[]);const y=f.useMemo(()=>m.map((v,x)=>{const b=v[0],_=x===0,w=x===m.length-1;return b?o.jsx(aIe,{result:b,resultsGroup:v.length>1?v:ue,isLastResult:w,isFirstResult:_,lastResultBuffer:w?e.lastResultBuffer:void 0,forceVisible:g(x,m.length),idx:x,scrollContainerRef:a,setRef:h},b.uuid||b.backend_uuid):null}),[m,e.lastResultBuffer,g,a,h]);return o.jsx("div",{children:y})});sIe.displayName="Thread";const aIe=I.memo(({result:e,resultsGroup:t,isLastResult:n,isFirstResult:r,forceVisible:s,idx:a,scrollContainerRef:i,lastResultBuffer:l,setRef:c})=>{const u=e.attachments?.length>0,d=f.useMemo(()=>()=>o.jsx(zT,{className:B({"pb-threadInputHeightWithPadding":n&&!u,"pb-threadAttachmentsHeightWithPadding":n&&u})}),[u,n]),m=f.useCallback(p=>c(a,p),[a,c]);return o.jsx(Or,{fallback:d,code:"SOMETHING_WENT_WRONG_ERROR",children:o.jsx(rIe,{forceVisible:s,unmeasuredHeight:Moe,rootMargin:`${Moe*yGt}px 0px`,threshold:0,root:i.current,ref:m,children:o.jsx(nIe,{idx:a,result:e,sbsEntriesGroup:t,isLastResult:n,isFirstResult:r,lastResultBuffer:l})})},e.uuid||e.backend_uuid)});aIe.displayName="LazyContainerFactory";const oIe=I.memo(()=>{const{$t:e}=Z(),{firstResult:{parent_info:t}={}}=Vt();if(!t?.mode||!t?.url_slug)return null;const n=t?.mode===Sh.ARTICLE?"page":"search",r=!!t?.preview_image_url;return o.jsx(Ge,{href:`/${n}/${t?.url_slug}`,children:o.jsxs(H,{variant:"background",bgHover:"subtler",className:"p-md shadow-subtle mb-sm relative mx-auto mt-[calc(var(--header-height)+var(--size-md))] flex justify-between rounded-lg border pb-[12px]",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs(D,{color:"light",variant:"tiny",className:"mb-xs gap-x-xs flex items-center",children:[o.jsx(ce,{icon:qM,size:"xs"}),o.jsx("div",{children:e({defaultMessage:"Follow up to",id:"D3eCB2NeGQ"})})]}),o.jsx(D,{variant:"baseSemi",color:"light",className:"line-clamp-1 break-all",children:t?.title})]}),r&&o.jsx("div",{className:"ml-md shrink-0",children:o.jsx(fs,{src:t?.preview_image_url,alt:t?.title||"Preview",imageClassName:"h-16 w-16 rounded object-cover",rounded:"sm",fadeIn:!1})})]})})});oIe.displayName="ParentThreadLink";const iIe=({entryUUID:e,frontendContextUUID:t,existingCollection:n,existingFirstThreadQuery:r,filterOnSearchTerm:s,reason:a})=>{const{openModal:i}=xt(),{collections:l}=qk({autoFetch:!0,reason:a}),c=f.useCallback(async()=>{!e||!t||(l?.length?i("collectionSelectModal",{entryUUID:e,currentCollection:n??null,searchTerm:s?r??"":void 0,frontendContextUUID:t}):i("spaceCreateForThread",{frontendContextUUID:t,entryUUID:e}))},[l?.length,e,t,n,r,i,s]);return f.useMemo(()=>({openAddToCollectionModal:c}),[c])};async function vGt({contextUUID:e,title:t,rwToken:n,callback:r,reason:s}){try{const a=await se.POST("/rest/thread/set_thread_title",s,{body:{context_uuid:e,title:t,read_write_token:n},headers:{"Content-Type":"application/json"}});r?.(a)}catch(a){r?.(a)}}function xGt(e){return Hfe(e)?e:le.PRO}function bGt(e){const t=e?.filter(dy)??ue;return t.length>0?t:[bl.web]}function _Gt(){if(typeof window>"u")throw new Error("useCreateTaskFromThread should only be used on the client");const[e,t]=f.useState(!1),[n,r]=f.useState(!1),{hasAccessToProFeatures:s}=_t(),a=gt(),{firstResult:i}=Vt(),l=OQe(),c=i?.query_str||l.first_query,u=f.useMemo(()=>xGt(i?.display_model),[i?.display_model]),d=f.useMemo(()=>i?.sources?.sources?bGt(i.sources.sources):[bl.web],[i?.sources?.sources]),m=f.useMemo(()=>s&&!!c,[s,c]),p=f.useCallback(()=>{m&&t(!0)},[m]),h=f.useCallback(()=>{t(!1)},[]),g=f.useCallback(()=>{t(!1),r(!0)},[]),y=f.useCallback(()=>{r(!1),a.push("/account/tasks")},[a]),v=f.useCallback(()=>{r(!1)},[]),x=f.useMemo(()=>{if(!c)return;const b=new Date;return{title:"",prompt:c,schedule:{kind:"DAILY",hour:b.getHours(),minute:b.getMinutes(),day:b.getDate(),month:b.getMonth(),year:b.getFullYear(),dayOfWeek:b.getDay()},searchModel:u,sources:d}},[c,u,d]);return f.useMemo(()=>({canCreateTask:m,isTaskModalOpen:e,handleCreateTask:p,handleTaskModalClose:h,handleTaskModalSuccess:g,taskPrefillData:x,showConfirmationToast:n,handleConfirmationToastSettings:y,handleConfirmationToastDismiss:v}),[m,p,h,g,e,x,n,y,v])}const wGt=e=>{const{deprecatedOpenToast:t}=gn(),[n,r]=f.useState(!1),s=f.useCallback(async(a,i)=>{try{r(!0),t("Exporting thread...","refresh",10);const l=await i(),c=atob(l.file_content_64),u=new Array(c.length);for(let g=0;g<c.length;g++)u[g]=c.charCodeAt(g);const d=new Uint8Array(u),m=new Blob([d],{type:`application/${a}`}),p=window.URL.createObjectURL(m),h=document.createElement("a");h.href=p,h.download=l.filename,h.style.display="none",document.body.appendChild(h),h.click(),setTimeout(()=>{document.body.removeChild(h),window.URL.revokeObjectURL(p)},1e3),t("Export succeeded","success",3)}catch{t(e,"error")}finally{r(!1)}},[t,e]);return f.useMemo(()=>({handleExport:s,isExporting:n}),[s,n])},CGt=({reason:e})=>{const n=Z().formatMessage({defaultMessage:"Failed to export answer",id:"UiPrX3hXY8"}),{handleExport:r,isExporting:s}=wGt(n),a=f.useCallback(async(i,l)=>{await r(l,()=>cme({thread_uuid:i,format:l,reason:e}))},[r,e]);return f.useMemo(()=>({convertContent:a,isExporting:s}),[a,s])},aH=I.memo(({choices:e,...t})=>o.jsx(H,{className:"mt-sm divide-y rounded md:border",...t,children:e.map((n,r)=>n.subMenu?o.jsxs("div",{children:[f.createElement(Yc,{type:"default",...n,rounded:!1,key:r}),n.active&&n.subMenu&&o.jsx(lIe,{choices:n.subMenu})]}):f.createElement(Yc,{type:"default",...n,rounded:!1,key:r}))}));aH.displayName="RadioCard";const lIe=I.memo(({choices:e})=>o.jsx(H,{children:e.map((t,n)=>f.createElement(Yc,{type:"radio",showIconLeft:!0,selected:t.active??!1,...t,rounded:!1,key:n}))}));lIe.displayName="RadioCardSubMenu";const cIe=I.memo(({onClose:e,isOpen:t,onDelete:n,...r})=>{const{$t:s}=Z(),[a,i]=f.useState(!1),[l,c]=f.useState("all");f.useEffect(()=>{t||(i(!1),c("all"))},[t]);const u=f.useMemo(()=>[{text:s({defaultMessage:"All Threads",id:"2DJ/HRvVaR"}),label:s({defaultMessage:"All your threads will be deleted",id:"YDOzv2WOkx"}),active:l==="all",onClick:()=>{c("all")}},{text:s({defaultMessage:"Standalone Threads",id:"6HJEHjz/aG"}),label:s({defaultMessage:"Only your threads which are not part of a space will be deleted",id:"lFOvDZ2Tnp"}),active:l==="standalone",onClick:()=>{c("standalone")}}],[s,l]),d=f.useMemo(()=>[{text:"Cancel",onClick:e},{text:s(a?{defaultMessage:"Yes, Delete",id:"QEmYhzreEW"}:{defaultMessage:"Delete Threads",id:"+waPO7td+u"}),variant:"rejected",onClick:()=>{a?n(l):i(!0)}}],[s,l,a,e,n]);return o.jsx(en,{...r,isOpen:t,onClose:e,title:s(a?l==="all"?{defaultMessage:"Delete all threads?",id:"Kju4ObJhbP"}:{defaultMessage:"Delete standalone threads?",id:"kiKGdmk4lu"}:{defaultMessage:"Delete Threads",id:"+waPO7td+u"}),actionList:d,children:o.jsx("div",{children:a?o.jsx("div",{children:o.jsx(D,{children:s(l==="all"?{defaultMessage:"All your threads will be deleted. This cannot be undone.",id:"U1IQ/Dlkge"}:{defaultMessage:"Your threads which are not part of a space will be deleted. This cannot be undone.",id:"Ko7lNjweFq"})})}):o.jsx(aH,{className:"-mx-sm -my-sm border-none",choices:u})})})});cIe.displayName="DeleteThreadsModal";const SGt=(e,t)=>{const{value:n,loading:r}=It({flag:"discover-early-fetch",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},uIe=I.memo(({children:e,fetchNextPage:t,hasNextPage:n,showLoadingState:r,itemsLength:s,loadingPlaceholder:a})=>{const i=f.useRef(t);i.current=t;const l=f.useRef($s(()=>i.current(),300,{leading:!0,trailing:!1})),c=f.useRef(null),u=f.useRef(!1),d=f.useRef(null),{variation:m}=SGt(!1);f.useEffect(()=>{if(!m||!n||s===0)return;const h=()=>{if(!c.current)return;const y=c.current.getBoundingClientRect(),v=window.innerHeight;d.current===null&&(d.current=y.top);const x=window.scrollY||window.pageYOffset,b=document.documentElement.scrollTop,_=document.body.scrollTop,w=x||b||_,C=d.current!==null&&y.top<d.current*.9;(w>100||C)&&!u.current&&(u.current=!0);const S=u.current?Math.min(v*3,1200):0;y.top<=v+S&&l.current()},g=$s(h,100);return window.addEventListener("scroll",g,!0),document.addEventListener("scroll",g,!0),h(),()=>{window.removeEventListener("scroll",g,!0),document.removeEventListener("scroll",g,!0),g.cancel()}},[n,s,m]),l3(c,l.current,{rootMargin:"50px",threshold:0});const p=a||(s===0?o.jsx(H,{className:"py-sm",children:o.jsx(li,{animateLines:!1,blockCount:12,divider:!0})}):o.jsx(H,{className:"py-md",children:o.jsx(li,{animateLines:!1,blockCount:1})}));return o.jsxs(o.Fragment,{children:[e,r&&p,s>0&&n&&o.jsx("div",{ref:c,className:"border border-transparent"})]})});uIe.displayName="LibraryItemList";const EGt=({collectionUUID:e,reason:t})=>{const{collections:n}=qk({autoFetch:!0,reason:t});return!e||!n?null:n.find(s=>s.uuid===e)??null},dIe=I.memo(({type:e,featuredImage:t,title:n,className:r,href:s})=>{if(!t||e!==Uo.DISCOVER)return null;const a=o.jsx("div",{className:B("relative size-24 flex-none overflow-hidden rounded-md",r),children:t.includes("images.unsplash.com")?o.jsx("img",{src:t,alt:n,className:"size-full object-cover object-center"}):o.jsx("img",{src:t,alt:n,sizes:"33vw",className:"object-cover object-center"})});return s?o.jsx(Ge,{href:s,children:a}):a});dIe.displayName="ThreadImage";const MGt=()=>{const{$t:e}=Z();return f.useMemo(()=>({yearAgo:e({defaultMessage:"year ago",id:"FzcTXH29w0"}),yearsAgo:e({defaultMessage:"years ago",id:"zJmD8CS6cm"}),monthAgo:e({defaultMessage:"month ago",id:"bZWV9MmB/N"}),monthsAgo:e({defaultMessage:"months ago",id:"Lui0j+6Np9"}),dayAgo:e({defaultMessage:"day ago",id:"G4Y/+2FJhb"}),daysAgo:e({defaultMessage:"days ago",id:"vEpDmSBrwP"}),hourAgo:e({defaultMessage:"hour ago",id:"7v28g+bbYy"}),hoursAgo:e({defaultMessage:"hours ago",id:"2GaNTzDbM2"}),minutesAgo:e({defaultMessage:"minutes ago",id:"9aNLtXrhB8"}),minuteAgo:e({defaultMessage:"minute ago",id:"G8L9c8oAYi"}),justNow:e({defaultMessage:"Just now",id:"bxv59Vvssz"}),justNowShort:e({defaultMessage:"Now",id:"tgvES0v2HS"})}),[e])},fIe=I.memo(({className:e})=>{const t=gt(),n=f.useCallback(()=>{t.push("/account/tasks")},[t]),{variation:r,loading:s}=op(!1);return s?null:o.jsxs(D,{variant:"tiny",color:"super",className:B("gap-x-xs flex flex-row items-center hover:cursor-pointer",e),onClick:n,children:[o.jsx(ce,{icon:Yh,size:"xs",className:"-translate-y-px"}),r?o.jsx(pe,{defaultMessage:"Automation",id:"Fn4YKyl4lm"}):o.jsx(pe,{defaultMessage:"Task",id:"0wJ7N+noSq"})]})});fIe.displayName="TaskIndicator";const d7=I.memo(({icon:e,count:t,textVariant:n="tiny",textColor:r="light",className:s})=>o.jsxs("div",{className:"gap-x-xs flex items-center",children:[o.jsx(D,{variant:n,color:r,className:s,children:o.jsx(ce,{icon:e,size:"sm"})}),o.jsx(D,{variant:n,color:r,className:s,children:yP(t)})]}),(e,t)=>e.count===t.count&&e.icon===t.icon&&e.className===t.className),mIe=I.memo(({threadAccess:e,socialInfo:t,textVariant:n,textColor:r,className:s})=>{if(!e||!t||qXe(e))return null;const a=t.view_count??0,i=t.fork_count??0;return o.jsxs(o.Fragment,{children:[a>0&&o.jsx(d7,{icon:FM,count:a,textColor:r,textVariant:n,className:s}),i>0&&o.jsx(d7,{icon:qM,count:i,textColor:r,textVariant:n,className:s})]})});mIe.displayName="ThreadSocial";const kGt=ye(async()=>K(()=>import("./TimeAgoTooltip-CTv5YbEU.js"),__vite__mapDeps([454,3,1,4,5,6]))),pIe=()=>{const{$t:e}=Z(),{isEnterprise:t}=_n({reason:"temporary-thread-tooltip"});return e(t?{defaultMessage:"Temporary threads expire due to personal context access, navigational queries, data retention policies, or organizational requirements.",id:"BJL0VPkJd3"}:{defaultMessage:"Temporary threads expire due to personal context access, navigational queries, or data retention policies.",id:"mxG1FiTDFj"})},hIe=I.memo(({type:e,threadCount:t,threadAccess:n,lastUpdated:r,socialInfo:s,expiry:a,source:i,displayModel:l})=>{const c=MGt(),{locale:u,$t:d}=Z(),m=n?YXe(n):null,p=Z(),h=f.useMemo(()=>{if(!a)return null;const v=a.endsWith("Z")?a:`${a}Z`,x=new Date(v);return jy(p,x,{style:"short"},1e3*60*60*24)},[a,p]),g=f.useMemo(()=>{if(!a)return null;const v=a.endsWith("Z")?a:`${a}Z`;return new Date(v).toLocaleString(u,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},[a,u]),y=pIe();return o.jsxs("div",{className:"gap-x-md flex items-center",children:[l?o.jsx(NGt,{displayModel:l}):null,h&&o.jsx(bn,{tooltipText:y,tooltipLayout:"right",asChild:!0,children:o.jsxs(D,{variant:"tiny",color:"light",className:"pr-sm pl-xs border-subtler flex cursor-default items-center gap-x-0.5 rounded-full border border-dashed py-0.5",children:[o.jsx(ce,{icon:hle,size:"xs"}),d({defaultMessage:"Temporary Thread",id:"YuuBvz04y+"})]})}),h?o.jsx(bn,{tooltipText:g,tooltipLayout:"right",children:o.jsx(D,{variant:"tiny",color:"light",className:"cursor-default",children:d({defaultMessage:"Expires {expiry}",id:"KhQvNJGIsK"},{expiry:h})})}):r&&o.jsx(kGt,{timestamp:r,translations:c,locale:u}),i&&i==="perplexity_tasks"&&o.jsx(fIe,{}),o.jsx(mIe,{socialInfo:s,threadAccess:n}),!!t&&t>1&&o.jsx(d7,{icon:z7,count:t}),e===Uo.COLLECTION&&ype(n)&&o.jsxs(D,{className:"gap-x-xs ml-xs flex items-center",variant:"tiny",color:"light",testId:"thread-shared-indicator",children:[m&&o.jsx(ce,{icon:m,size:"xs",className:"-mt-px"}),o.jsx("span",{children:d({defaultMessage:"Shared",id:"kWI6zXRaHY"})})]})]})});hIe.displayName="ThreadMetadata";const TGt=["pplx_alpha","pplx_beta"],NGt=({displayModel:e})=>{const{$t:t}=Z();if(!e||!TGt.includes(e))return null;const n=e==="pplx_alpha"?t({defaultMessage:"Research",id:"JEe7dVso7F"}):e==="pplx_beta"?t({defaultMessage:"Labs",id:"ylFNoY79wa"}):null,r=e==="pplx_alpha"?N7:e==="pplx_beta"?DM:null;return o.jsxs(D,{variant:"tiny",color:"light",className:"pr-sm border-subtlest flex items-center gap-x-0.5 rounded-full border py-0.5 pl-1.5",children:[r&&o.jsx(ce,{icon:r,size:"xs"}),n]})},gIe=f.memo(({title:e,preview:t,threadCount:n,lastUpdated:r,href:s="/",rwToken:a,socialInfo:i,showActionMenu:l=!0,authorImage:c,threadAccess:u,type:d,featuredImage:m,entryUUID:p,contextUUID:h,collection:g,expiry:y,onRemoveExpiration:v,source:x,isIncognitoThread:b,displayModel:_,isSelectable:w,isSelected:C,onSelect:S,isStreaming:E})=>{const M="thread-item",k=EGt({collectionUUID:g?.uuid,reason:M}),{deleteThread:A}=ow({reason:M}),{removeThreadFromCollection:R}=Cy({reason:M}),{trackEvent:O}=Ne(),[L,P]=f.useState(!1),N=f.useCallback(async Q=>{A({entryUUID:Q,collectionSlug:k?.slug}),O("delete thread from history click",{entryUUID:Q})},[k?.slug,A,O]),{openAddToCollectionModal:T}=iIe({entryUUID:p,existingCollection:k,reason:M,frontendContextUUID:h}),j=f.useCallback(Q=>{Q==="add"?O("click add thread to space",{contextUUID:h,isBookmark:!1}):O("click swap thread space",{contextUUID:h,isFromBookmark:!1,collectionUUID:k?.uuid||""}),T()},[k,h,O,T]),F=f.useCallback(()=>{O("click remove thread from space",{contextUUID:h,collectionUUID:k?.uuid||"",isBookmark:!1}),R({entryUUID:p,oldCollectionUUID:k?.uuid,frontendContextUUID:h,collectionSlug:k?.slug})},[k?.uuid,k?.slug,h,p,R,O]),U=f.useCallback(()=>j("add"),[j]),V=f.useCallback(()=>j("swap"),[j]),$=f.useCallback(()=>{P(!0),$5(p,()=>{v()})},[p,v]),z=f.useCallback(()=>S?.(!C),[C,S]);return o.jsxs(H,{className:"relative",children:[o.jsx(Ke,{initial:!1,children:w&&!E&&o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"-translate-x-sm top-md mt-three absolute right-full",children:o.jsx(e_,{checked:C??!1,toggleChecked:z})})}),o.jsxs("div",{className:"gap-x-md py-md group relative flex items-center",children:[o.jsx(dIe,{featuredImage:m,type:d,title:e,href:s}),o.jsxs("div",{className:"gap-y-sm flex w-full grow flex-col",children:[o.jsxs(H,{className:"flex justify-between",children:[o.jsx(Ge,{href:s,className:"group block overflow-x-hidden",children:o.jsxs(H,{children:[o.jsxs(ge.div,{className:"gap-x-sm flex items-center",layout:!0,layoutRoot:!0,children:[(!!c||d===Uo.COLLECTION)&&o.jsx(wt,{size:"small",user:c??void 0}),o.jsx(D,{className:"gap-sm flex grow items-center",variant:"baseSemi",children:o.jsxs(rc,{children:[o.jsx(Ke,{initial:!1,children:E&&o.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"text-super",children:o.jsx($r,{size:14})},"spinner")}),o.jsx(ge.div,{layout:"position",transition:{duration:.15,ease:Nd},"data-testid":`thread-title-${e}`,className:"md:group-hover:text-super line-clamp-1 w-full break-all",children:o.jsx(eH,{speed:"slow",active:!!E,children:e})},e)]})})]}),o.jsx(D,{color:"light",className:"mt-two line-clamp-2 text-balance",variant:"small",children:t})]})}),o.jsx(H,{className:B("duration-150",{"opacity-0":w,"pointer-events-none group-hover:opacity-0":w}),children:o.jsx(GT,{show:l,currentSpace:k,showConvertThreadToArticle:!1,onDelete:N,onAddToSpace:U,onSwapSpace:V,onRemoveFromSpace:F,rwToken:a,contextUUID:h,threadAccess:u,collectionSlug:g?.slug,type:d,showSaveAsFileToSpace:!1,expiry:L?void 0:y,onRemoveExpiration:L?void 0:$,buttonSize:"tiny",threadId:p,isIncognitoThread:b})})]}),o.jsx("div",{className:l?"mt-xs":"mt-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(hIe,{type:d,threadCount:n,threadAccess:u,lastUpdated:r,socialInfo:i??null,expiry:y,source:x,displayModel:_}),o.jsx("div",{className:"gap-x-xs flex items-center",children:g?.title&&d===Uo.LIBRARY&&o.jsx(Ge,{href:`/spaces/${g?.slug}`,className:"block",children:o.jsx(H,{className:"px-xs rounded-full border",children:o.jsxs(D,{variant:"tiny",className:"gap-x-xs px-sm py-xs flex cursor-pointer select-none items-center transition duration-300 hover:opacity-70",testId:"thread-collection-pill",children:[o.jsx(Gd,{unified:g.emoji,size:"tiny"}),o.jsx("div",{className:"line-clamp-1",children:g.title})]})})})})]})})]})]})]})});gIe.displayName="ThreadItem";var Uo;(function(e){e.LIBRARY="library",e.COLLECTION="collection",e.DISCOVER="discover",e.SEARCH="search",e.INCOGNITO_SEARCH="incognitoSearch"})(Uo||(Uo={}));const jGt="temporary-threads",koe=e=>{Zt(jGt,String(e),{expires:Fr})};function AGt(e){let t;switch(e.mode){case"CONCISE":t="concise";break;case"COPILOT":t="copilot";break;case"ARTICLE":t="article";break}return{title:e.title??"",preview:"",threadCount:1,lastUpdated:e.lastUpdated??"",href:`/search/${e.slug}`,rwToken:e.rwToken??"",focus:e.focus,entryUUID:e.entryUUID??"",contextUUID:e.contextUUID??"",copilot:!1,socialInfo:e.socialInfo??null,collectionUUID:e.collectionInfo?.uuid??null,authorImage:null,featuredImage:null,thumbnailImage:null,threadAccess:null,collection:e.collectionInfo?{uuid:e.collectionInfo?.uuid??"",title:e.collectionInfo?.title??"",slug:e.collectionInfo?.slug??"",emoji:e.collectionInfo?.emoji??""}:void 0,mode:t,expiry:null,source:e.source??null,displayModel:e.displayModel,slug:e.slug??""}}const IGt=I.memo(({threads:e,fetchNextPage:t,hasNextPage:n=!1,showLoadingState:r=!1,showEmptyState:s=!1,type:a,showTemporaryThreads:i,setShowTemporaryThreads:l,searchTerm:c,invalidateThreadsQuery:u,ascending:d,setAscending:m,isFetchingNextPage:p,source:h,setSource:g,threadType:y,setThreadType:v,setDeleteModalOpen:x,deleteModalOpen:b,streamingThreads:_})=>{const{$t:w}=Z(),C=f.useMemo(()=>(e??[]).map(uet),[e]),S=rt(),[E,M]=f.useState(!1),[k,A]=f.useState([]),{isMobileStyle:R}=xe(),O=f.useRef(c),{deleteAllThreads:L,deleteThreads:P}=ow({reason:"threads-list"}),[N,T]=f.useState(null),j=f.useCallback(re=>{L(re),x(!1)},[L,x]),F=f.useCallback(re=>{A(ae=>ae.includes(re)?ae.filter(fe=>fe!==re):[...ae,re])},[]),U=f.useCallback(()=>{M(!1),A([])},[]);f.useEffect(()=>{O.current!==c&&(U(),O.current=c)},[c,U]);const V=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"Newest First",id:"dZYazP4QWO"}),onClick:()=>{m(!1),U()},show:!0,active:!d},{type:"default",text:w({defaultMessage:"Oldest First",id:"FqI37DU6LJ"}),onClick:()=>{m(!0),U()},show:!0,active:d}],[d,w,m,U]),$=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"All",id:"zQvVDJ+j59"}),onClick:()=>{g("all"),U()},active:h==="all"},{type:"default",text:w({defaultMessage:"Comet",id:"9WmFFQw7ns"}),onClick:()=>{g("comet"),U()},active:h==="comet"}],[h,w,g,U]),z=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"All",id:"zQvVDJ+j59"}),onClick:()=>{v("all"),U()},active:y==="all"},{type:"default",text:w({defaultMessage:"Research",id:"JEe7dVso7F"}),onClick:()=>{v("research"),U()},active:y==="research"},{type:"default",text:w({defaultMessage:"Labs",id:"ylFNoY79wa"}),onClick:()=>{v("labs"),U()},active:y==="labs"}],[y,w,v,U]),Q=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"Show",id:"K7AkdLoAj6"}),onClick:()=>{l(!0),koe(!0),U()},active:i},{type:"default",text:w({defaultMessage:"Hide",id:"VA/Z1SW3vH"}),onClick:()=>{l(!1),koe(!1),U()},active:!i}],[i,w,l,U]),Y=fn(),W=f.useMemo(()=>o.jsx(xIe,{}),[]),X=f.useCallback(()=>x(!1),[x]),G=f.useCallback(()=>{P({entryUUIDs:k,callback:U})},[P,k,U]),{isIncognito:J,incognitoType:q}=Ra({reason:"threads-list"}),te=f.useMemo(()=>h!=="all"||y!=="all",[h,y]);return o.jsxs(o.Fragment,{children:[o.jsxs(uIe,{fetchNextPage:t,hasNextPage:n,showLoadingState:p||r,itemsLength:C.length,loadingPlaceholder:W,children:[J&&o.jsx("div",{"data-color-scheme":"dark",children:o.jsxs(H,{className:"mt-md p-md gap-sm flex items-center justify-start rounded-md",variant:"subtler",children:[o.jsx(Xd,{inverse:!0,incognitoType:q}),o.jsxs("div",{children:[o.jsx(D,{variant:"smallBold",color:"white",children:w({defaultMessage:"You are incognito",id:"pBm4msoyyh"})}),q===kd.GOVERNMENT?o.jsx(D,{variant:"small",color:"white",className:"text-pretty opacity-75",children:w({defaultMessage:"New Threads will have Zero Data Usage active",id:"Yq0Q7xmZMb"})}):o.jsx(D,{variant:"small",color:"white",className:"text-pretty opacity-75",children:w({defaultMessage:"New Threads are anonymous, won't appear in your library, and expire after 24 hours.",id:"/FQ4Dx5TpY"})})]})]})}),o.jsx(H,{className:B("gap-sm pt-md flex items-center justify-between",{"bg-base pb-md -mb-md sticky top-0 z-10":!R}),variant:"background",children:o.jsxs(vIe,{children:[o.jsxs("div",{className:"gap-sm flex items-center",children:[!R&&o.jsxs(H,{className:"pr-sm relative flex-1 shrink-0",children:[o.jsx(yIe,{selectEnabled:E,resetSelect:U,setSelectEnabled:M}),o.jsx(H,{className:"absolute right-0 top-1/2 h-5 -translate-y-1/2 border-r"})]}),Y&&o.jsx(Jt,{placement:"bottom-start",isMobileStyle:R,items:$,wrapperClassName:"inline-flex",onOpen:()=>T("source"),onClose:()=>T(null),isOpen:N==="source",children:o.jsx(ad,{variant:h==="all"?"border":"primary",text:h==="all"?w({defaultMessage:"Source",id:"aH4De2Y20k"}):w({defaultMessage:"Source: {comet}",id:"pAvXy3TmGv"},{comet:"Comet"})})}),o.jsx(Jt,{placement:"bottom-start",isMobileStyle:R,items:z,wrapperClassName:"inline-flex",onOpen:()=>T("type"),onClose:()=>T(null),isOpen:N==="type",children:o.jsx(ad,{variant:y==="all"?"border":"primary",text:w(y==="all"?{defaultMessage:"Type",id:"+U6ozcnv4r"}:y==="research"?{defaultMessage:"Type: Research",id:"NeGk8fwf1M"}:{defaultMessage:"Type: Labs",id:"yLIVi0dTj2"})})}),o.jsx(Jt,{placement:"bottom-start",isMobileStyle:R,items:Q,wrapperClassName:"inline-flex",onOpen:()=>T("temporary"),onClose:()=>T(null),isOpen:N==="temporary",children:o.jsx(ad,{variant:"border",text:w(i?{defaultMessage:"Temporary Threads: Show",id:"j0VHwshtHd"}:{defaultMessage:"Temporary Threads: Hide",id:"X8Kc6bnTnf"})})})]}),o.jsx("div",{className:B("gap-sm flex items-center",{}),children:o.jsx(Jt,{placement:Y?"bottom-start":"bottom-end",isMobileStyle:R,wrapperClassName:"inline-flex",items:V,onOpen:()=>T("sort"),onClose:()=>T(null),isOpen:N==="sort",children:o.jsx(ad,{text:w(d?{defaultMessage:"Sort: Oldest",id:"K8y5AUAIdW"}:{defaultMessage:"Sort: Newest",id:"ouRV0Q2JpB"})})})})]})}),s&&C.length===0?o.jsxs(H,{className:"mt-xl p-xl flex flex-col items-center justify-center rounded-md",children:[o.jsx(D,{variant:"baseSemi",children:te||c?w({defaultMessage:"Nothing turned up",id:"Rn55YzpVb0"}):w({defaultMessage:"No {threads} yet",id:"5zP56HMUgk"},{threads:"Threads"})}),te||c?o.jsx(D,{variant:"small",color:"light",children:w({defaultMessage:"Try different keywords, check for typos, or adjust your filters.",id:"3DJFcRxvex"})}):o.jsx(D,{variant:"small",color:"light",children:o.jsx(pe,{defaultMessage:"Try creating a <link>new Thread</link>",id:"18hNnPSiwJ",values:{link:re=>o.jsx(Ge,{className:"text-super",href:"/",children:re})}})})]}):o.jsxs("div",{className:"relative",children:[o.jsxs(H,{className:"relative divide-y",children:[_.filter(re=>!C.find(ae=>ae.slug===re.slug)).filter(re=>!C.find(ae=>ae.entryUUID===re.id)).filter(re=>re.slug!==null).map(re=>o.jsx(f7,{thread:AGt(re),invalidateThreadsQuery:u,selectEnabled:!1,selectedThreads:k,showActionMenu:!1,handleSelect:F,type:a,isStreaming:!0},re.slug||re.entryUUID)),C.map(re=>o.jsx(f7,{thread:re,invalidateThreadsQuery:u,selectEnabled:E,selectedThreads:k,showActionMenu:a!==Uo.DISCOVER&&S,handleSelect:F,type:a},re.slug))]}),r&&o.jsx("div",{className:"bg-base absolute inset-0 opacity-50"})]})]}),o.jsx(cIe,{isOpen:b,onClose:X,onDelete:j}),o.jsx(Ke,{initial:!1,children:E&&o.jsx(ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2,bounce:.2,type:"spring"},className:"bottom-md fixed inset-x-0 flex items-center justify-center",children:o.jsxs(H,{variant:"raised",className:"p-sm pl-md shadow-subtle bottom-md flex w-[400px] items-center justify-between rounded-xl border",children:[o.jsx(D,{variant:"small",color:"light",children:w({defaultMessage:"{count, plural, =0 {No Threads} one {# Thread} other {# Threads}} Selected",id:"MqdlBPNiqL"},{count:k.length})}),o.jsx(he,{text:w({defaultMessage:"Delete {count, plural, =0 {Threads} one {# Thread} other {# Threads}}",id:"nBPaP34ufb"},{count:k.length}),variant:"rejected",size:"small",disabled:k.length===0,onClick:G})]})})})]})}),f7=I.memo(({thread:e,invalidateThreadsQuery:t,selectEnabled:n,selectedThreads:r,handleSelect:s,type:a,showActionMenu:i,isStreaming:l})=>{const c=f.useCallback(u=>{s(e.entryUUID)},[s,e.entryUUID]);return o.jsx(gIe,{href:e.href,rwToken:e.rwToken,title:e.title,preview:e.preview??"",threadCount:e.threadCount,lastUpdated:e.lastUpdated,copilot:e.copilot,socialInfo:e.socialInfo,threadAccess:e.threadAccess??null,authorImage:e.authorImage,featuredImage:e.featuredImage??null,showActionMenu:i,type:a,entryUUID:e.entryUUID,contextUUID:e.contextUUID,collection:e.collection??null,expiry:e.expiry,onRemoveExpiration:t,source:e.source,isIncognitoThread:!1,displayModel:e.displayModel,isSelectable:n,isSelected:r.includes(e.entryUUID),onSelect:c,isStreaming:l},e.entryUUID)});f7.displayName="ThreadItemWrapper";IGt.displayName="ThreadsList";const ad=I.memo(({text:e,variant:t="border",onClick:n,chevron:r=!0,icon:s,disabled:a,className:i})=>{const{isMobileStyle:l}=xe();return o.jsx(he,{variant:t,size:l?"small":"tiny",text:e,chevron:r,onClick:n,icon:s,extraCSS:B(a?"opacity-50 pointer-events-none":"",i)})});ad.displayName="FilterButton";const yIe=I.memo(({selectEnabled:e,resetSelect:t,setSelectEnabled:n})=>{const{$t:r}=Z(),s=f.useCallback(()=>{n(!e),e&&t()},[e,t,n]);return o.jsxs("div",{className:"inline-grid w-max grid-cols-1 grid-rows-1",children:[o.jsx(ad,{text:r(e?{defaultMessage:"Done",id:"JXdbo8Vnlw"}:{defaultMessage:"Select",id:"kQAf2d9u+x"}),onClick:s,chevron:!1,variant:e?"primary":"border",className:"col-start-1 row-start-1"}),o.jsx(ad,{text:r({defaultMessage:"Select",id:"kQAf2d9u+x"}),className:"pointer-events-none col-start-1 row-start-1 opacity-0",chevron:!1}),o.jsx(ad,{text:r({defaultMessage:"Done",id:"JXdbo8Vnlw"}),className:"pointer-events-none col-start-1 row-start-1 opacity-0",chevron:!1})]})});yIe.displayName="SelectButton";const vIe=I.memo(({children:e})=>{const{isMobileStyle:t}=xe();return t?o.jsx("div",{className:"w-full",children:o.jsx("div",{className:"-mx-md",children:o.jsx(Wi,{showScrollIndicator:!1,orientation:"horizontal",children:o.jsx("div",{className:"gap-sm px-md flex items-center",children:e})})})}):o.jsx(Wi,{showScrollIndicator:!1,orientation:"horizontal",children:o.jsx("div",{className:"gap-sm flex w-full items-center justify-between",children:e})})});vIe.displayName="FiltersWrapper";const xIe=I.memo(()=>o.jsxs(H,{className:"gap-x-md py-md gap-sm group relative flex flex-col items-start",children:[o.jsxs("div",{className:"gap-two flex w-full flex-col",children:[o.jsxs("div",{className:"grid items-center",children:[o.jsx(D,{variant:"baseSemi",className:"col-start-1 row-start-1",children:""}),o.jsx(H,{variant:"subtler",className:"col-start-1 row-start-1 h-4 w-[120px] rounded-full"})]}),o.jsxs("div",{className:"grid w-full items-center",children:[o.jsxs(D,{variant:"small",className:"col-start-1 row-start-1",children:["",o.jsx("br",{}),""]}),o.jsxs("div",{className:"col-start-1 row-start-1 flex w-full flex-col gap-2",children:[o.jsx(H,{variant:"subtler",className:"h-2 w-2/3 rounded-full"}),o.jsx(H,{variant:"subtler",className:"h-2 w-2/3 rounded-full"})]})]})]}),o.jsxs("div",{className:"grid items-center",children:[o.jsx(D,{variant:"tiny",className:"col-start-1 row-start-1",children:""}),o.jsx(H,{variant:"subtler",className:"col-start-1 row-start-1 h-2 w-[80px] rounded-full"})]})]}));xIe.displayName="ThreadItemSkeleton";const bIe=I.memo(({message:e,isVisible:t=!1,timeout:n,onSettingsClick:r,onTimeout:s=kn,icon:a,...i})=>{const[l,c]=f.useState(t),u=f.useRef(null),{$t:d}=Z();f.useEffect(()=>{c(t)},[t]);const m=f.useCallback(()=>{u.current&&clearTimeout(u.current)},[]),p=f.useCallback(()=>{c(!1),s(),m()},[s,m]);return f.useEffect(()=>(t&&n&&(u.current=setTimeout(()=>{p()},n*1e3)),()=>{m()}),[l,n,t,s,p,m]),o.jsx(Bd,{children:o.jsx(Ke,{children:l&&o.jsx(ge.div,{className:"right-toastHMargin top-toastVMargin fixed z-30 flex items-center justify-center",initial:{opacity:0,x:6},animate:{opacity:1,x:0},exit:{opacity:0,x:6},transition:Po,...i,children:o.jsxs(H,{variant:"raised",className:B("shadow-subtle gap-sm flex items-stretch rounded-xl border pl-[12px] dark:shadow-[0_4px_12px_rgba(0,0,0,0.5)]"),children:[a&&o.jsx("div",{className:"p-sm bg-subtler dark:bg-subtle my-[12px] flex aspect-square items-center justify-center rounded-md",children:o.jsx(ce,{icon:a,className:"text-quiet",size:"md"})}),o.jsxs("div",{className:"flex flex-1 flex-row items-center justify-between",children:[o.jsx(D,{variant:"tiny",color:"default",className:"pl-sm max-w-[200px] shrink-0 pr-[12px]",children:e}),o.jsxs(H,{className:"flex h-full flex-col items-stretch justify-center border-l",children:[o.jsx(Te,{size:"tiny",variant:"noHover",text:d({defaultMessage:"Settings",id:"D3idYvSLF9"}),onClick:r,extraCSS:"!px-[12px] flex-1 hover:opacity-60",testId:"task-confirmation-settings-button"}),o.jsx(H,{className:"border-t"}),o.jsx(Te,{size:"tiny",variant:"noHover",text:d({defaultMessage:"Dismiss",id:"TDaF6JVgG6"}),onClick:p,extraCSS:"!px-[12px] flex-1 hover:opacity-60",testId:"task-confirmation-dismiss-button"})]})]})]})},"task-creation-toast")})})});bIe.displayName="TaskCreationConfirmationToast";const GT=I.memo(({show:e,isBookmarked:t,currentSpace:n,onDelete:r,onAddToSpace:s,onSwapSpace:a,onRemoveFromSpace:i,onConvertToArticle:l,onRename:c,threadAccess:u,contextUUID:d,rwToken:m,collectionSlug:p,type:h,isConverting:g,showConvertThreadToArticle:y,className:v,firstResultBackendUUID:x,showSaveAsFileToSpace:b=!0,onBookmark:_,showBookmarkButton:w=!1,title:C,expiry:S,onRemoveExpiration:E,onOpen:M,onClose:k,buttonSize:A="small",threadId:R,isIncognitoThread:O,isNativeMobileVariant:L=!1})=>{const P="thread-overflow-dropdown",N=Z(),[T,j]=f.useState(!1),{trackEvent:F}=Ne(),{isMobileStyle:U}=xe(),V=N.formatMessage({defaultMessage:"Export as PDF",id:"syduyBQ0eU"}),$=N.formatMessage({defaultMessage:"Export as Markdown",id:"d3prfCUwCt"}),z=N.formatMessage({defaultMessage:"Export as DOCX",id:"yQ3Z7H5E8P"}),[Q,Y]=f.useState(!1),{session:W}=Et(),{convertContent:X,isExporting:G}=CGt({reason:P}),{fileRepoInfo:J}=nl({reason:P}),q=J?.file_repository_type==="COLLECTION",te=!!m,re=f.useMemo(()=>({pdf:"export thread PDF clicked",md:"export thread MD clicked",docx:"export thread DOCX clicked"}),[]),{collection:ae}=cc({collectionSlug:p,reason:P}),{data:fe}=FU({fileRepoInfo:J,fileName:R??"",reason:P}),{saveThreadToSpace:de,removeThreadFromSpace:ve}=jve({fileRepoInfo:J,fileExists:fe??!1,reason:P}),_e=f.useCallback(async Qe=>{x&&(F(re[Qe],{}),await X(x,Qe))},[x,re,F,X]),Se=w&&U&&!!_,be=n===null&&(h===Uo.LIBRARY||h===Uo.SEARCH)&&!!s,me=n!==null&&te&&!!a,Ae=n!==null&&!!i,{isUserAtLeastWriter:Ee}=wy({reason:P}),{onShareThreadToSpace:je,onMakeThreadPrivate:Me,isShareable:Ye}=aF({threadAccess:u,contextUUID:d,rwToken:m,collectionSlug:p,reason:P}),at=q&&Ee&&!Ye&&!!je,it=q&&Ee&&Ye&&!!Me,ke=te&&!!r,Ue=q&&b&&!fe&&!Q&&!!ae&&ae?.user_permission>=2,Ot=te&&!!E&&!!S&&!O,yt=q&&b&&(fe||Q),[St,et]=f.useState(!1),{canCreateTask:He,isTaskModalOpen:Be,handleCreateTask:ut,handleTaskModalClose:kt,handleTaskModalSuccess:$t,taskPrefillData:tn,showConfirmationToast:nn,handleConfirmationToastSettings:Cn,handleConfirmationToastDismiss:Pn}=_Gt(),{variation:Xe,loading:Ve}=kT(!1),lt=f.useMemo(()=>[{type:"default",icon:t?gle:q7,text:t?N.formatMessage({defaultMessage:"Bookmarked",id:"k0fraU5NBY"}):N.formatMessage({defaultMessage:"Add Bookmark",id:"Y4GyA+IDCn"}),show:Se,onClick:_},{type:"default",icon:ar,text:N.formatMessage({defaultMessage:"Add to Space",id:"nB+VQ2svMZ"}),show:be,onClick:s,testId:"thread-add-to-space"},{type:"default",icon:OOe,text:N.formatMessage({defaultMessage:"Swap Space",id:"y3tRs6Jpig"}),show:me,onClick:a,testId:"thread-swap-space"},{type:"default",icon:Rt,text:N.formatMessage({defaultMessage:"Remove from Space",id:"2B71WoR6Sk"}),show:Ae,onClick:i,testId:"thread-remove-from-space"},{type:"default",icon:eo,text:N.formatMessage({defaultMessage:"Share thread with Space",id:"kynn3b03Sq"}),show:at,onClick:Qe=>{Qe.preventDefault(),je()},testId:"thread-share-to-space"},{type:"default",icon:Mx,text:N.formatMessage({defaultMessage:"Make thread private",id:"AIUSJMqN6C"}),show:it,onClick:Qe=>{Qe.preventDefault(),Me()},testId:"thread-make-private"},{type:"default",icon:LOe,text:N.formatMessage({defaultMessage:"Convert to Page",id:"IcFSSFTdA7"}),show:y,onClick:l,testId:"thread-article-create",disabled:g},{type:"default",icon:yle,text:N.formatMessage({defaultMessage:"Remove Expiration",id:"N4qHoBsI8d"}),show:Ot,onClick:E},{type:"default",icon:eo,text:N.formatMessage({defaultMessage:"Save as file to Space",id:"L8nSm8m8qs"}),show:Ue,onClick:()=>{!x||!R||(Y(!0),F("save thread to space clicked",{}),de(x,R))},testId:"thread-save-to-space"},{type:"default",icon:vd,text:N.formatMessage({defaultMessage:"Remove file from Space",id:"TjcTDl4lU+"}),show:yt,onClick:async()=>{await ve(R??""),Y(!1)},testId:"remove-file-from-space"},{type:"default",icon:Yh,text:N.formatMessage({defaultMessage:"Create task",id:"7X1tNR2pav"}),show:He,onClick:ut,testId:"thread-create-task"},{type:"separator",show:(at||it||y)&&!!x},{type:"default",icon:dm,text:V,show:!!x,onClick:()=>_e("pdf"),disabled:G,testId:"thread-export-pdf"},{type:"default",icon:DOe,text:$,show:!!x,onClick:()=>_e("md"),disabled:G,testId:"thread-export-md"},{type:"default",icon:KM,text:z,show:!!x,onClick:()=>_e("docx"),disabled:G,testId:"thread-export-docx"},{type:"separator",show:ke&&(be||y)},{type:"default",icon:vd,text:N.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),show:ke,onClick:()=>et(!0),testId:"thread-delete"}],[be,Ae,me,ke,g,G,y,l,x,N,V,$,z,_e,at,je,it,Me,de,R,Ue,ve,yt,F,Se,_,t,s,i,a,Ot,E,He,ut]),qt=d&&m&&W,ln=f.useCallback(()=>{j(!0),M?.()},[M]),$n=f.useCallback(()=>{j(!1),k?.()},[k]),we=ae?.user_permission&&dg(ae.user_permission),qe=f.useMemo(()=>o.jsxs("div",{className:"flex min-h-10 flex-col justify-center",children:[o.jsxs("div",{className:"gap-x-sm group relative flex items-center justify-between py-0.5",children:[qt&&o.jsx(H,{className:"-inset-x-sm absolute -inset-y-0 rounded-lg opacity-0 transition-opacity duration-150 group-hover:opacity-100",variant:"subtler"}),o.jsx(D,{variant:"small",className:"relative line-clamp-1",color:"light",children:C}),qt&&c&&o.jsx(Te,{size:"tiny",icon:K7,onClick:c,testId:"thread-rename",toolTip:N.formatMessage({defaultMessage:"Rename Thread",id:"4cT2c/aQya"}),extraCSS:"-mr-sm opacity-0 group-hover:opacity-100 transition-opacity duration-150"})]}),n&&!we&&o.jsxs("div",{className:"gap-x-xs -mt-xs flex h-8 items-center",children:[o.jsx(FOe,{className:"text-quietest size-4 shrink-0 -translate-y-0.5"}),o.jsx("div",{className:"shrink-0 scale-90",children:n.emoji?o.jsx(Gd,{unified:n.emoji,size:"small"}):o.jsx(eo,{size:16,className:"text-quietest shrink-0 -translate-y-0.5"})}),o.jsx(D,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:n.title})]})]}),[qt,C,c,N,n,we]),De=f.useMemo(()=>[{text:N.formatMessage({defaultMessage:"Nevermind",id:"64sfSNetr+"}),onClick:()=>et(!1),testId:"thread-delete-nevermind"},{text:N.formatMessage({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),variant:"rejected",onClick:()=>{et(!1),r?.(R??"")},testId:"thread-delete-confirm"}],[N,r,R]),tt=f.useCallback(()=>et(!1),[]);return!e||lt?.every(Qe=>!Qe.show)?null:o.jsxs(o.Fragment,{children:[o.jsx("div",{className:v,children:o.jsx(Jt,{items:lt,isMobileStyle:U,onOpen:ln,onClose:$n,placement:"bottom-end",header:C?qe:void 0,children:L&&U?o.jsx(he,{testId:"thread-dropdown-menu",size:A,icon:xd,variant:"common",pill:!0,extraCSS:B("",{"!text-foreground !bg-subtle":T})}):o.jsx(Te,{testId:"thread-dropdown-menu",size:A,icon:xd,extraCSS:B("",{"!text-foreground !bg-subtle":T})})})}),o.jsx(E3,{isOpen:St,onClose:tt,message:N.formatMessage({defaultMessage:"Delete thread",id:"2WxP2iMtPx"}),subtitle:N.formatMessage({defaultMessage:"Are you sure you want to delete this thread?",id:"9JVHvYsJ0s"}),actionList:De}),o.jsx(Kl,{children:!Ve&&Xe?o.jsx(MT,{open:Be,onClose:kt,onSave:$t,initialConfiguration:tn?sme(tn):null,source:"thread_dropdown",trackEvent:F}):o.jsx(hW,{open:Be,onClose:kt,onSuccess:$t,prefill:tn,source:"thread_dropdown"})}),o.jsx(bIe,{message:N.formatMessage({defaultMessage:"Created task",id:"sYXsMoH4Bc"}),isVisible:nn,onSettingsClick:Cn,onTimeout:Pn,timeout:5,icon:Yh})]})});GT.displayName="ThreadOverflowDropdown";const RGt=({reason:e})=>{const{$t:t}=Z(),n=rt(),{firstResult:{context_uuid:r,thread_access:s=Lde,collection_info:{slug:a}={}}={}}=Vt(),{isEnterprise:i}=_n({reason:e}),{openVisitorLoginUpsell:l}=ur({enabled:!n}),c=hi(),{handleAccessChange:u,isShareable:d}=aF({threadAccess:s,contextUUID:r,rwToken:c,collectionSlug:a,reason:e}),m=f.useCallback(y=>{y!==s&&(n?r&&c&&u(y):l({title:t({defaultMessage:"Sign in to save private {threads}",id:"Rf9T7Whe3t"},{threads:"Threads"}),origin:Oe.SHARE_DROPDOWN,sheetModalVariant:"bottom-sheet-gradient"}))},[s,n,r,c,l,t,u]),p=f.useCallback(()=>{i||s===bt.PRIVATE_READ&&n&&m(bt.PUBLIC_READ)},[i,s,n,m]),{accessLevelMenuItems:h,selectedAccessMenuItem:g}=gpe({currentAccessLevel:s,onClick:m,isCollection:!1,isPage:!1,reason:e});return f.useMemo(()=>({rwToken:c,thread_access:s,handleShareDropdownClick:p,accessLevelMenuItems:h,selectedAccessMenuItem:g,isThreadSharable:d,context_uuid:r}),[h,r,p,d,c,g,s])},_Ie=()=>{try{return cw().activeEntryIdx}catch{return}},wIe=I.memo(({shareHref:e,shareSource:t,hasMounted:n,maybeContextUUID:r,onClick:s,...a})=>{const{$t:i}=Z(),{trackEvent:l}=Ay(),{openToast:c}=gn(),u=_Ie(),d=f.useCallback(()=>{s?.(),c({message:i({defaultMessage:"Link copied. Paste to share",id:"pFRfr79EJO"}),variant:"success",timeout:3}),navigator.clipboard.writeText(n?tE(decodeURIComponent(e),u?.toString()):""),l("click copy link button",{contextUUID:r,source:t||"copyLinkButton"})},[s,c,i,n,e,u,l,r,t]);return o.jsx(he,{clickFeedback:!0,size:"small",onClick:d,toolTip:i({defaultMessage:"Copy link",id:"lbr3Lq2Lnm"}),tooltipLayout:"bottom",icon:Vm,variant:"primary",testId:"copy-link-button",...a})});wIe.displayName="CopyLinkButton";const PGt=({onClick:e,size:t="small",isMobileStyle:n,isNativeMobileVariant:r,testId:s="share-button"})=>{const{$t:a}=Z();return r?o.jsx(he,{pill:!0,onClick:e,variant:"common",size:t,icon:Pv,extraCSS:"-mr-sm",testId:s}):n?o.jsx(Te,{onClick:e,icon:Pv,variant:"common",size:t,testId:s}):o.jsx(he,{onClick:e,variant:"primary",size:t,text:a({defaultMessage:"Share",id:"OKhRC6eWRw"}),icon:Pv,testId:s})},CIe=I.memo(({hasMounted:e,shareHref:t,EditorDropDownContent:n,onClick:r,maybeContextUUID:s,size:a="small",showCopyLinkButton:i=!0,contentWidth:l,isOpen:c,onClose:u,isNativeMobileVariant:d=!1})=>{const{isMobileStyle:m}=xe(),{device:{isMacOS:p}}=At(),g=Nt()?.get("open-share"),[y,v]=f.useState(!1),x=c!==void 0,b=x?c:y;f.useEffect(()=>{g&&(r?.(),v(!0),Ry({}))},[g,r]);const _=f.useCallback(()=>{r?.(),x||v(S=>!S)},[r,x]),w=f.useCallback(()=>{u?.(),x||v(!1)},[x,u]),C=f.useCallback(S=>{(p?S.metaKey&&S.shiftKey&&S.key==="c":S.ctrlKey&&S.shiftKey&&S.key==="c")&&(S.preventDefault(),_())},[p,_]);return f.useEffect(()=>(document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}),[C]),e?o.jsxs("div",{className:"gap-x-sm flex items-center",children:[!m&&i&&o.jsx(wIe,{shareHref:t,hasMounted:e,maybeContextUUID:s,onClick:r}),o.jsx(Kk,{content:n,placement:"bottom-end",contentWidth:l,isMobileStyle:m,isOpen:b,onClose:w,children:o.jsx(PGt,{onClick:_,size:a,isMobileStyle:m,isNativeMobileVariant:d,testId:"share-button"})})]}):null});CIe.displayName="ShareDropdown";const SIe=I.memo(({descriptionText:e,shareHref:t,isShareable:n,onlyOrgSharable:r,onlySpaceSharable:s,maybeContextUUID:a,hasMounted:i,icon:l})=>{const{$t:c}=Z(),u="hidden md:block",d="block md:hidden",{trackEvent:m}=Ay(),h=Nt()?.get("open-share"),g=f.useCallback(()=>{document.hasFocus&&(navigator.clipboard.writeText(i?tE(decodeURIComponent(t)):""),m("click copy link button",{contextUUID:a,source:"shareThread"}))},[i,t,m,a]),y=f.useCallback(()=>{navigator.share({text:`${e} ${i?tE(decodeURIComponent(t)):""}`,title:"Perplexity AI"}),m("click mobile native share button",{})},[t,e,i,m]);return f.useEffect(()=>{i&&n&&!h&&g()},[i,n,g,h]),!i||!n?null:o.jsxs("div",{children:[o.jsx("div",{className:"mt-sm",children:o.jsxs(D,{variant:"tiny",color:"super",className:"flex",children:[o.jsx(ce,{icon:Lie,className:"mr-xs",size:"xs"}),o.jsx("span",{children:c({defaultMessage:"Link copied. Paste to share",id:"pFRfr79EJO"})})]})}),o.jsxs("div",{className:u,children:[o.jsx(D,{variant:"baseSemi",className:"mb-sm mt-md",children:c(r?{defaultMessage:"Share this link within your Organization",id:"kjiOOzdX3d"}:s?{defaultMessage:"Share this link within your Space",id:"zAEbvlplsJ"}:{defaultMessage:"Share",id:"OKhRC6eWRw"})}),o.jsx(he,{size:"small",fullWidth:!0,onClick:g,text:c({defaultMessage:"Copy Link",id:"u5aHb4gcxX"}),icon:Vm,clickFeedback:!0,testId:"copy-link-button"})]}),o.jsx("div",{className:d,children:o.jsx("div",{className:"mt-md",children:o.jsx(he,{variant:"primary",fullWidth:!0,text:c({defaultMessage:"Share",id:"OKhRC6eWRw"}),target:"_blank",icon:l,onClick:y})})})]})});SIe.displayName="SocialShareLinks";const EIe=I.memo(({descriptionText:e,sharableURL:t,isNativeMobileVariant:n=!1})=>{const r="share-thread-dropdown",{$t:s}=Z(),a=Ms(),{rwToken:i,thread_access:l,handleShareDropdownClick:c,accessLevelMenuItems:u,selectedAccessMenuItem:d,isThreadSharable:m,context_uuid:p}=RGt({reason:r}),h=o.jsxs("div",{className:"p-sm gap-sm flex flex-col",children:[i!=null&&o.jsxs("div",{children:[o.jsx(D,{variant:"baseSemi",children:s({defaultMessage:"Share this Thread",id:"WMdsw58EMp"})}),o.jsx(aH,{choices:u})]}),o.jsx(SIe,{descriptionText:e,shareHref:t,isShareable:m,onlyOrgSharable:l===bt.ORG_READ,onlySpaceSharable:l===bt.COLLECTION_READ,maybeContextUUID:p,hasMounted:a,icon:d?.icon})]});return o.jsx(CIe,{hasMounted:a,shareHref:t,EditorDropDownContent:h,icon:d?.icon,onClick:c,maybeContextUUID:p,showCopyLinkButton:!1,isNativeMobileVariant:n})});EIe.displayName="ShareThreadDropdown";const oH=f.memo(({visible:e,tweetDescriptionText:t,threadSharedSlug:n,urlSearchParams:r,isNativeMobileVariant:s=!1})=>{const a=Ms(),i=_Ie(),[l,c]=f.useState("");f.useEffect(()=>{if(typeof window>"u")return;const{protocol:p,host:h}=window.location,g=`${p}//${h}/search/${n}?${r?.toString()}`;c(g)},[n,r]);const u=f.useMemo(()=>encodeURIComponent(a?tE(decodeURIComponent(l),i?.toString()):""),[a,l,i]),d=f.useMemo(()=>t!=null?`Perplexity AI: ${t}`:"Perplexity AI",[t]),m=f.useMemo(()=>B("transition-all duration-300 flex items-center gap-x-xs md:gap-x-0",{"opacity-0":!e,"opacity-100":e}),[e]);return o.jsx("div",{className:m,children:e&&o.jsx(EIe,{descriptionText:d,sharableURL:u,isNativeMobileVariant:s})})});oH.displayName="ThreadShareButtons";const iH=I.memo(({isBookmarked:e,handleAddBookmark:t,handleRemoveBookmark:n,size:r="small",isNativeMobileVariant:s=!1})=>{const{$t:a}=Z(),{isMobileStyle:i}=xe(),l={icon:e?gle:q7,size:r,testId:"article-bookmark-button",toolTip:a(e?{defaultMessage:"Bookmarked",id:"k0fraU5NBY"}:{defaultMessage:"Bookmark",id:"Rs4kCECwJ8"}),onClick:e?n:t};return s&&i?o.jsx(he,{...l,variant:"common",pill:!0}):o.jsx(Te,{...l,variant:"common"})});iH.displayName="BookmarkButton";const MIe=I.memo(({currentTitle:e,isBookmarked:t,effectiveCollection:n,onDelete:r,onAddToSpace:s,onSwapSpace:a,onRemoveFromSpace:i,onConvertToArticle:l,onRename:c,isConverting:u,showConvertThreadToArticle:d,rwToken:m,onBookmark:p,onRemoveBookmark:h,showBookmarkButton:g,onRemoveExpiration:y,showExportButton:v})=>{const x=Ms(),b=rt(),{session:_}=Et(),w=Nt(),{firstResult:{backend_uuid:C,status:S,context_uuid:E,privacy_state:M,thread_access:k,thread_title:A,author_image:R,thread_url_slug:O,expiry_time:L,query_str:P}={},inFlight:N}=Vt(),{isMax:T,isPro:j}=_t(),F=S===qn.PENDING,U=M===ag.INCOGNITO;return o.jsxs("div",{className:"px-md py-sm flex h-full items-center justify-between",children:[o.jsx("div",{className:"pointer-events-auto flex min-w-0 flex-1 items-center",children:o.jsx(wt,{user:R??(b&&N?_?.user?.image??void 0:void 0),showProBadge:j,showMaxBadge:T,size:"medium"})}),o.jsxs("div",{className:"gap-sm pointer-events-auto flex items-center",children:[g&&o.jsx(iH,{isBookmarked:t,handleAddBookmark:p,handleRemoveBookmark:h,isNativeMobileVariant:!0}),!U&&!F&&o.jsx(oH,{visible:!!O,tweetDescriptionText:A||P,threadSharedSlug:O??void 0,urlSearchParams:w,isNativeMobileVariant:!0}),o.jsx(GT,{className:"ml-sm",isNativeMobileVariant:!0,title:e,show:x&&!F,isBookmarked:t,onDelete:r,onAddToSpace:s,onSwapSpace:a,onRemoveFromSpace:i,currentSpace:n,onConvertToArticle:l,onRename:c,isConverting:u,showConvertThreadToArticle:d,rwToken:m??void 0,contextUUID:E,threadAccess:k,collectionSlug:n?.slug,type:U?Uo.INCOGNITO_SEARCH:Uo.SEARCH,firstResultBackendUUID:v?C:void 0,onBookmark:t?h:p,showBookmarkButton:!1,onRemoveExpiration:y,expiry:L,threadId:O??"",isIncognitoThread:U})]})]})});MIe.displayName="CometMobileHeader";const OGt=e=>e&&(e.viewCount>0||e.forkCount>0),kIe=I.memo(({textVariant:e="small"})=>{const{socialStats:t,firstResult:n}=Vt(),{$t:r}=Z(),s=t&&t.viewCount>0,a=t&&t.forkCount>0;return!n?.backend_uuid||!s&&!a?null:o.jsxs(H,{className:"gap-x-sm flex items-center",children:[s&&o.jsx(bn,{tooltipText:r({defaultMessage:"Views",id:"akF0LyBDxT"}),tooltipLayout:"bottom",asChild:!0,children:o.jsxs(D,{variant:e,color:"light",className:"gap-x-xs flex items-center",children:[o.jsx(FM,{width:"1.1em",height:"1.1em",className:"-translate-y-px"}),o.jsx("span",{children:yP(t.viewCount)})]})}),a&&o.jsx(bn,{tooltipText:r({defaultMessage:"Follow-ups Asked",id:"DDyRtVl03r"}),tooltipLayout:"bottom",asChild:!0,children:o.jsxs(D,{variant:e,color:"light",className:"gap-x-xs flex items-center",children:[o.jsx(qM,{width:"1.1em",height:"1.1em",className:"-translate-y-px"}),o.jsx("span",{children:yP(t.forkCount)})]})})]})});kIe.displayName="ThreadSocialData";const LGt=()=>{const{$t:e}=Z();return[{name:"google_drive",title:tg,avatarSrc:E5},{name:"onedrive",title:Cd,avatarSrc:k5},{name:"sharepoint",title:Sd,avatarSrc:T5},{name:"web",title:"Web",icon:$m},{name:"scholar",title:e({defaultMessage:"Scholar",id:"vzzehe/j6l"}),icon:h2},{name:"social",title:e({defaultMessage:"Social",id:"qOLogguG/7"}),icon:Vie},{name:"edgar",title:cD,icon:Bie},{name:"wiley",title:_5,avatarSrc:ou},{name:"crunchbase",title:b5,avatarSrc:x5},{name:"notion",title:rg,avatarSrc:Ob},{name:"org",title:e({defaultMessage:"Org files",id:"iWDsD738/m"}),icon:Uie},{name:"box",title:ng,avatarSrc:N5},{name:"factset",title:Pb,avatarSrc:v5},{name:"gcal",title:qx,avatarSrc:M5},{name:"my_files",title:e({defaultMessage:"My files",id:"bYbrKKlKgS"}),icon:H7},{name:"dropbox",title:iu,avatarSrc:uD}]},TIe=I.memo(({sources:e})=>{const t=LGt(),n=3,r=e.slice(n).map(s=>t.find(i=>i.name===s)?.title).join(", ");return o.jsxs("div",{className:"flex items-center",children:[e.slice(0,n).map(s=>{const a=t.find(i=>i.name===s);return a?o.jsx(NIe,{imgSrc:a.avatarSrc,icon:a.icon,title:a.title},s):null}),e.length>n&&o.jsx(lH,{tooltipText:r,children:o.jsxs(D,{variant:"micro",color:"light",className:"flex size-4 cursor-default items-center justify-center",children:["+",e.length-n]})})]})});TIe.displayName="ThreadSourcesList";const lH=I.memo(({children:e,tooltipText:t})=>o.jsx(bn,{tooltipText:t,asChild:!0,tooltipLayout:"bottom",children:o.jsx(H,{variant:"subtler",className:"-ml-xs !ring-inverse relative aspect-square shrink-0 rounded-full p-0.5 ring-[1.5px] first:ml-0",children:e})}));lH.displayName="SourceIconWrapper";const NIe=I.memo(({imgSrc:e,icon:t,title:n})=>o.jsx(lH,{tooltipText:n,children:t?o.jsx(ce,{icon:t,className:"text-quiet size-4"}):o.jsx("img",{src:e,alt:n,className:"size-4 rounded-full object-cover"})}));NIe.displayName="SourceIcon";const jIe=I.memo(({authorUsername:e,threadAccess:t,authorImage:n,authorId:r,isIncognitoThread:s,collection:a})=>{const i=rt(),l=!e&&!i&&!s,[c,u]=f.useState(!1),{isIncognito:d}=Ra({reason:"thread-context"}),[m,p]=f.useState(!1),{inFlight:h,firstResult:{expiry_time:g,updated_datetime:y}={}}=Vt(),v=!l,x=a?.user_permission&&dg(a.user_permission),b=g&&NS(g)&&!s&&!a&&!m,{$t:_}=Z(),w=d&&status===qn.PENDING?void 0:n,C=f.useCallback(()=>{u(!0)},[]),S=f.useMemo(()=>o.jsx(AIe,{authorUsername:e,authorId:r,updatedTimestamp:y??"",expiryTimestamp:g??"",threadAccess:t,isAnon:l,isIncognitoThread:s,isInFlight:h,setHasRemovedExpiration:p,hasRemovedExpiration:m}),[r,e,g,h,l,s,t,y,m]),E=f.useCallback(()=>{u(!1)},[]);return o.jsxs("div",{className:"gap-sm flex min-w-0 items-center",children:[v&&o.jsx($o,{onOpen:C,onClose:E,content:S,placement:"bottom-start",childrenClassName:"inline-flex pb-xs -mb-xs",children:o.jsxs("div",{className:"group relative flex cursor-pointer items-center gap-0.5",children:[o.jsx(H,{variant:"transparent",className:B("group-hover:!bg-subtle -inset-three absolute rounded-full duration-150",{"!bg-subtle":c})}),o.jsxs("div",{className:"relative isolate flex items-center gap-0",children:[o.jsx(wt,{user:w??void 0,size:"small",className:"relative z-10 select-none [&>*]:size-6"}),b&&o.jsx(H,{variant:"background",className:"p-half absolute bottom-1.5 right-0 z-20 shrink-0 translate-x-1/2 translate-y-1/2 rounded-full",children:o.jsx(H,{variant:c?"subtle":"background",className:B("group-hover:bg-subtle flex items-center justify-center rounded-full duration-150"),children:o.jsx(hle,{size:16,className:"text-quiet relative"})})})]}),!b&&o.jsx(Dn,{className:B("group-hover:text-quiet relative size-3 transition-all duration-150",{"text-quiet":c,"text-quietest":!c})})]})}),a&&!x&&o.jsx(bn,{tooltipText:_({defaultMessage:"Part of the {collectionTitle} Space",id:"eNL1YKIijb"},{collectionTitle:a.title}),asChild:!0,children:o.jsx(Ge,{href:`/spaces/${a.slug}`,className:"inline-flex",children:o.jsxs(H,{variant:"background",bgHover:"subtler",className:B("pr-sm hover:ring-subtle ring-subtlest gap-xs @[1100px]/main:max-w-[80px] @[1200px]/main:max-w-[160px] py-two relative z-20 flex max-w-[80px] shrink-0 items-center justify-center rounded-full ring-1",{"pl-xs":a.emoji,"pl-two":!a.emoji}),children:[o.jsx(H,{className:"flex size-5 items-center justify-center rounded-full",variant:a.emoji?"transparent":"subtler",children:a.emoji?o.jsx(Gd,{unified:a.emoji,size:"tiny"}):o.jsx(eo,{size:12,className:"text-quiet relative"})}),o.jsx(D,{variant:"tiny",color:"light",className:"min-w-0 flex-1 truncate",children:a.title})]})})})]})});jIe.displayName="ThreadAuthorInfo";const AIe=I.memo(({authorUsername:e,authorId:t,updatedTimestamp:n,expiryTimestamp:r,threadAccess:s,isAnon:a,isIncognitoThread:i,isInFlight:l,setHasRemovedExpiration:c,hasRemovedExpiration:u})=>{const{locale:d}=Z(),{session:m}=Et(),{socialStats:p,firstResult:{sources:h,backend_uuid:g}={sources:[],backend_uuid:""}}=Vt(),y=Jd(),v=n.endsWith("Z")?n:`${n}Z`,x=r.endsWith("Z")?r:`${r}Z`,b=new Date(v),_=b.toLocaleDateString(d,{year:"numeric",month:"long",day:"numeric"}),w=b.toLocaleString(d,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),C=x?new Date(x).toLocaleString(d,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):"",S=Z(),E=new Date(x),M=jy(S,E,{style:"short",numeric:"auto"}),k=v3(b),A=t===m?.user?.id,{$t:R}=Z(),O=h?.sources,L=O&&O.length>0&&!(O.length===1&&O[0]==="web"),P=f.useMemo(()=>o.jsx(bn,{tooltipText:C,tooltipLayout:"bottom",children:M}),[C,M]),N=f.useCallback(()=>{g&&($5(g),c(!0))},[g,c]),T=f.useMemo(()=>({delayDuration:0,offset:4}),[]),j=pIe();return o.jsxs("div",{className:"group flex flex-col divide-y",children:[i&&o.jsx(zu,{children:o.jsxs(D,{variant:"tinyRegular",color:"light",className:"gap-xs flex items-center",children:[o.jsx("div",{className:"inline-flex opacity-70",children:o.jsx(Xd,{size:"tiny",inverse:!0})}),R({defaultMessage:"Incognito Thread",id:"0iMI59SVV3"})]})}),r&&NS(r)&&!u&&!i&&o.jsxs(zu,{children:[o.jsxs(D,{variant:"tiny",className:"flex items-center gap-0.5",children:[R({defaultMessage:"Temporary Thread",id:"YuuBvz04y+"}),o.jsx(bn,{tooltipText:j,tooltipLayout:"right",asChild:!0,delayDuration:0,children:o.jsx("span",{children:o.jsx(ce,{icon:UOe,size:"2xs",className:"text-quiet opacity-0 duration-150 hover:opacity-100 group-hover:opacity-60"})})})]}),!y&&o.jsx(Te,{size:"tiny",onClick:N,icon:yle,pill:!0,extraCSS:"-mr-xs",toolTip:R({defaultMessage:"Remove Expiration",id:"N4qHoBsI8d"}),tooltipLayout:"right",tooltipProps:T})]}),!i&&e&&o.jsx(zu,{leading:R({defaultMessage:"Created by",id:"p4mBmLaKhc"}),trailing:A?R({defaultMessage:"{author} (You)",id:"QbgjmmII2s"},{author:e}):e}),r&&NS(r)?o.jsx(zu,{leading:R({defaultMessage:"Expires",id:"xhQMeQjkbK"}),trailing:P}):o.jsx(zu,{leading:R({defaultMessage:"Last Updated",id:"EeRwjEG9ge"}),trailing:NS(n)?o.jsx(bn,{tooltipText:w,tooltipLayout:"bottom",children:k?R({defaultMessage:"Today",id:"zWgbGgjUUg"}):_}):l?R({defaultMessage:"Just now",id:"bxv59Vvssz"}):"-"}),L&&o.jsx(zu,{leading:R({defaultMessage:"{n, plural, one {Source} other {Sources}}",id:"Qe5RCQLzVg"},{n:O.length}),children:o.jsx(D,{variant:"tinyRegular",children:o.jsx(TIe,{sources:O})})}),!a&&KXe(s??0)&&!i&&OGt(p)&&o.jsx(zu,{children:o.jsx(kIe,{textVariant:"tiny"})})]})});AIe.displayName="InfoMenu";const zu=I.memo(({leading:e,trailing:t,children:n})=>o.jsxs(H,{className:"mx-sm group/row flex h-8 items-center justify-between gap-[12px]",children:[e&&o.jsx(D,{variant:"tinyRegular",color:"light",children:e}),n,t&&o.jsx(D,{variant:"tiny",className:"text-right",children:t})]}));zu.displayName="InfoMenuRow";const DGt="",IIe=I.memo(({isOpen:e,onClose:t,onSave:n,defaultTitle:r})=>{const{$t:s}=Z(),[a,i]=f.useState(r??""),l=f.useCallback(()=>{n(a),t()},[a,t,n]),c=f.useRef(null),u=g=>{i(g)},d=g=>{g.key==="Enter"&&l()},m=f.useMemo(()=>[{text:s({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:"primary",onClick:l,testId:"thread-rename-save"}],[s,l]),{isMobileUserAgent:p,isMobileStyle:h}=xe();return o.jsx(en,{isOpen:e,title:s({defaultMessage:"Edit Thread Title",id:"lv9nkrxVPt"}),onClose:t,actionList:m,children:o.jsx(Fk,{size:"large",inputRef:c,children:o.jsx(Uk,{isMobileUserAgent:p,isMobileStyle:h,placeholder:s({defaultMessage:"What's your Thread about?",id:"bq3jzjDvHH"}),value:a,onChange:u,autoFocus:!0,onKeyDown:d,ref:c,testId:"thread-rename-input"})})})});IIe.displayName="ThreadTitleEditModal";const RIe=I.memo(()=>{const e="thread-header-v2",{$t:t}=Z(),[n,r]=f.useState(!1),s=f.useRef(void 0),a=gt(),i=Ms(),l=rt(),{firstResult:{backend_uuid:c,status:u,frontend_context_uuid:d,collection_info:m,query_str:p,context_uuid:h,privacy_state:g,bookmark_state:y,thread_access:v,thread_title:x,author_username:b,author_image:_,author_id:w,thread_url_slug:C,expiry_time:S}={},inFlight:E}=Vt(),M=u===qn.PENDING,{session:k}=Et(),{collections:A}=qk({autoFetch:!M,reason:e}),R=hi(),{deleteThread:O}=ow({reason:e}),{openModal:L,closeModal:P}=xt(),{openVisitorLoginUpsell:N}=ur({enabled:!l}),{removeThreadFromCollection:T,swapThreadCollection:j,firstTimeBookmark:F}=Cy({reason:e}),U=dFt(),{openAddToCollectionModal:V}=iIe({entryUUID:c,frontendContextUUID:d,existingCollection:m,existingFirstThreadQuery:p,filterOnSearchTerm:!0,reason:e}),$=rU(),{handleCreateNewSpaceForThread:z}=nU(),{trackEvent:Q}=Ne(),{allowArticleCreation:Y}=ma({reason:e}),{isMobileStyle:W}=xe(),X=g===ag.INCOGNITO,G=y==="BOOKMARKED",{handleAppDownloadClicked:J}=zd("mobile-header"),{mwebUpsellWhatsApp:q,loadingMwebUpsellWhatsApp:te}=r_(),re=t_({origin:"mobile-header"}),ae=Nt(),[fe,de]=f.useState(x??p??""),ve=!M&&!X&&c!=null;gpe({currentAccessLevel:v??Lde,onClick:kn,isCollection:!1,isPage:!1,reason:e}),!M&&m!==void 0&&(s.current=m);const _e=M?s.current:m;f.useEffect(()=>{fe===""&&de(x??p??"")},[x,p,fe]);const Se=f.useCallback(()=>{c&&(Q("delete thread from search result page click",{entryUUID:c}),O({entryUUID:c,callback:()=>a.push("/",void 0,"Delete thread")}))},[O,c,a,Q]),be=f.useCallback(()=>{if(!l){N({title:t({defaultMessage:"Sign in to bookmark your answers for later",id:"17vuOGPSKO"}),origin:Oe.THREAD_BOOKMARK_BUTTON,sheetModalVariant:"bottom-sheet-gradient"});return}if(G||!c)return;h&&Q("click add thread to space",{contextUUID:h,isBookmark:!0});const Ve=A.find(lt=>dg(lt.user_permission));Ve===void 0?F({entryUUID:c,frontendContextUUID:d}):j({entryUUID:c,newCollectionTitle:Ve.title,newCollectionUUID:Ve.uuid,newCollectionSlug:Ve.slug,newCollectionAccess:Ve.access,frontendContextUUID:d,newCollectionEmoji:Ve.emoji??null,currentCollectionUUID:null,existingCollectionSlug:null,closeModal:kn,callback:()=>{U()},newCollectionUserPermission:Ve.user_permission})},[l,G,c,Q,h,A,N,t,F,d,j,U]),me=f.useCallback(Ve=>{if(Ve==="add"&&h)Q("click add thread to space",{contextUUID:h,isBookmark:!1});else{if(!d){ne.error("[ThreadHeader] frontendContextUUID is undefined");return}if(!c){ne.warn("[ThreadHeader] backend_uuid is undefined");return}$?z(c,d):L("collectionSelectModal",{entryUUID:c,currentCollection:_e??null,searchTerm:p,frontendContextUUID:d})}h&&Q("click swap thread space",{contextUUID:h,isFromBookmark:_e?dg(_e.user_permission):!1,collectionUUID:_e?.uuid}),l?V():N({title:t({defaultMessage:"Sign in to bookmark your answers for later",id:"17vuOGPSKO"}),origin:Oe.COLLECTIONS,sheetModalVariant:"bottom-sheet-gradient"})},[Q,c,_e,l,L,t,V,N,h,p,d,$,z]),Ae=f.useCallback(()=>{if(!l)L("loginModal",{pitchMessage:{title:t({defaultMessage:"Sign in to create a {page}",id:"MsQ6yWbdOY"},{page:"Page"})},origin:Oe.THREAD_TO_ARTICLE});else{r(!0);const Ve=lo();h&&Q("click convert thread to page",{oldContextUUID:h,newFrontendContextUUID:Ve});const lt=new URLSearchParams({newFrontendContextUUID:Ve,existingResultsCacheUUID:d??"",existingContextBackendUUID:h??"",existingBackendUUID:c??"",..._e&&{collectionSlug:_e.slug}}),qt=new URL(window.location.href);qt.pathname="page/new",qt.search=lt.toString();const ln=qt.toString();a.push(ln)}},[l,L,t,h,d,c,_e,a,Q]),[Ee,je]=f.useState(!1),Me=f.useCallback(Ve=>{const lt=_e?.uuid;if(!h||!c){ne.error("[ThreadHeader] missing frontendContextUUID or entryUUID");return}if(!lt){ne.warn("[ThreadHeader] oldCollectionUUID is undefined");return}if(!m?.uuid){ne.warn("[ThreadHeader] collectionUUID is undefined");return}Q("click remove thread from space",{contextUUID:h,collectionUUID:lt,isBookmark:Ve==="remove bookmark"}),T({entryUUID:c,oldCollectionUUID:lt,callback:()=>{P(),U()},frontendContextUUID:d})},[c,P,m?.uuid,h,_e?.uuid,d,U,T,Q]),Ye=vGt,at=f.useCallback((Ve,lt)=>{if(!Ve||Ve===DGt){ne.warn("Empty title callback.");return}if(!h){ne.warn("No thread UUID found.");return}if(!R){ne.warn("No write token found.");return}Ye({contextUUID:h,title:Ve,rwToken:R,callback:lt,reason:e})},[h,R,Ye]),it=Y&&!W&&!M&&!X,ke=!M&&!X&&i,Ue=W&&!M,Ot=f.useCallback(Ve=>{at(Ve,()=>{je(!1),de(Ve)})},[at]),yt=f.useCallback(()=>{window.document.body.click(),je(!0)},[]),St=f.useCallback(()=>{a.push("/",void 0,"New thread button")},[a]),et=f.useCallback(()=>me("add"),[me]),He=f.useCallback(()=>me("swap"),[me]),Be=f.useCallback(()=>Me("remove"),[Me]),ut=f.useCallback(()=>Me("remove bookmark"),[Me]),{viewTitle:kt}=cw(),{isSidebarPinned:$t}=hn(),tn=11,nn=f.useCallback(()=>{if(q){re();return}Q("clicked open in app button in mweb thread header",{}),J()},[J,re,q,Q]),Cn=f.useCallback(()=>{c&&$5(c)},[c]),Pn=f.useCallback(()=>je(!1),[]),Xe=OF();return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:B("h-headerHeight bg-base pointer-events-none absolute left-0 top-0 z-10 duration-150 md:mb-0 md:rounded-t-xl md:bg-transparent",{"max-[1224px]:md:bg-base":$t,"max-[970px]:md:bg-base":!$t}),style:{right:W?0:tn},children:Xe?o.jsx(MIe,{currentTitle:fe,isBookmarked:G,effectiveCollection:_e??null,onDelete:Se,onAddToSpace:et,onSwapSpace:He,onRemoveFromSpace:Be,onConvertToArticle:Ae,onRename:yt,isConverting:n,showConvertThreadToArticle:it,rwToken:R??null,onBookmark:be,onRemoveBookmark:ut,showBookmarkButton:ke,onRemoveExpiration:Cn,showExportButton:ve}):o.jsxs("div",{className:"gap-x-md px-md py-sm flex h-full items-center justify-between",children:[o.jsxs("div",{className:"pointer-events-auto relative flex items-center",children:[o.jsx("div",{className:"-inset-xs absolute hidden rounded-lg backdrop-blur-sm md:block",children:o.jsx(H,{className:"rounded-inherit absolute inset-0 opacity-85",variant:"background"})}),W?o.jsxs("div",{className:"gap-x-sm flex items-center",children:[o.jsx(AU,{className:"-ml-sm"}),o.jsx(he,{variant:"common",size:"small",icon:ar,text:t({defaultMessage:"New",id:"bW7B87wFFp"}),onClick:St})]}):o.jsx(jIe,{authorUsername:b??null,threadAccess:v??0,authorImage:_??(l&&E?k?.user?.image??null:null),authorId:w??"",isIncognitoThread:X,collection:_e??null,privacyState:g})]}),kt&&o.jsx("div",{className:B("fade-in animate-in hidden min-w-0 flex-1 duration-150 md:block",{"@[900px]/main:md:hidden":!_e,"@[1056px]/main:md:hidden":!!_e}),children:o.jsx(D,{className:"truncate whitespace-nowrap",variant:"baseSemi",children:kt})}),o.jsxs("div",{className:"gap-x-sm pointer-events-auto relative flex items-center",style:{marginRight:W?0:-11},children:[o.jsx("div",{className:"-inset-xs absolute hidden rounded-lg backdrop-blur-sm md:block",children:o.jsx(H,{className:"rounded-inherit absolute inset-0 opacity-85",variant:"background"})}),o.jsxs("div",{className:"relative flex items-center",onClick:Ve=>Ve.stopPropagation(),children:[o.jsx(GT,{title:fe,show:i&&!M,isBookmarked:G,onDelete:Se,onAddToSpace:et,onSwapSpace:He,onRemoveFromSpace:Be,currentSpace:_e??null,onConvertToArticle:Ae,onRename:yt,isConverting:n,showConvertThreadToArticle:it,rwToken:R,contextUUID:h,threadAccess:v,collectionSlug:_e?.slug,type:X?Uo.INCOGNITO_SEARCH:Uo.SEARCH,firstResultBackendUUID:ve?c:void 0,onBookmark:G?ut:be,showBookmarkButton:ke,onRemoveExpiration:Cn,expiry:S,threadId:C??"",isIncognitoThread:X}),ke&&!W&&o.jsx(iH,{isBookmarked:G,handleAddBookmark:be,handleRemoveBookmark:ut})]}),!X&&!M&&o.jsx(oH,{visible:!!C,tweetDescriptionText:x||p,threadSharedSlug:C??void 0,urlSearchParams:ae}),Ue&&!te&&o.jsx(Di,{isSamsungBrowser:!0,isComet:!0,isFirefoxDefaultSearch:!0,children:o.jsx("div",{className:"animate-in fade-in duration-300",children:o.jsx(he,{size:"small",variant:"primary",text:t(q?{defaultMessage:"Ask in WhatsApp",id:"8QxwIbOYLa"}:{defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),onClick:nn})})})]})]})}),Ee&&o.jsx(IIe,{isOpen:Ee,onClose:Pn,onSave:Ot,defaultTitle:fe})]})});RIe.displayName="ThreadHeaderV2";const PIe=I.memo(({children:e,className:t,innerClassName:n})=>o.jsx("div",{className:B("px-md md:px-lg",t),children:o.jsx("div",{className:B("max-w-threadContentWidth mx-auto",n),children:e})}));PIe.displayName="ThreadSectionWrapper";var Toe={};const FGt=ye(async()=>{const{SearchLoadingComponent:e}=await K(async()=>{const{SearchLoadingComponent:t}=await import("./search-loading-component-_KenQFHt.js");return{SearchLoadingComponent:t}},__vite__mapDeps([482,3,1,6,5,4]));return{default:e}}),OIe=I.memo(()=>o.jsx(zT,{}));OIe.displayName="SearchErrorFallback";const m7=I.memo(e=>{const t=jt(),[n,{height:r}]=ql();return o.jsx(Or,{fallback:OIe,code:"SOMETHING_WENT_WRONG_ERROR",children:o.jsx(Z4t,{children:o.jsx(MNe,{children:o.jsx(TNe,{children:o.jsxs(X2e,{children:[o.jsxs(RAe,{children:[o.jsx(RIe,{}),o.jsx("div",{className:"erp-sidecar:h-fit erp-sidecar:pb-0 mx-auto h-full",children:o.jsxs(H,{variant:"background",className:"relative",children:[o.jsx(PIe,{children:o.jsx(oIe,{})}),o.jsx(sIe,{...e,lastResultBuffer:r})]})})]}),o.jsx(DAe,{ref:n},t)]})})})})})});m7.displayName="SearchContent";function UGt(e){const t=Rme(),{actions:{setCurrentThreadId:n}}=Vt(),r=XD(),s=EQe(),{data:a}=We({queryKey:["storedResults"],queryFn:()=>I3(),refetchOnMount:!0});f.useEffect(()=>{if(e.entries){e.entries.forEach(c=>{c.reconnectable&&!s(c.backend_uuid)&&r(c.backend_uuid)});const l=e.entries[0]?.context_uuid??crypto.randomUUID();n(l),t(e.entries)}},[r,e.entries,t,n,s]);const i=f.useMemo(()=>{if(e.entries?.length)return e.entries;if(e.placeholderResults?.length)return e.placeholderResults;if(e.slugOrUUID){const l=a?.find(A3(e.slugOrUUID));if(l)return[l]}return ue},[e.placeholderResults,e.slugOrUUID,e.entries,a]);return f.useMemo(()=>({placeholderResults:i}),[i])}const LIe=I.memo(e=>{const{placeholderResults:t}=UGt(e);return hNe({confirmationRedirectsToHomepage:!1}),!t?.length&&e.skipLoadingUI!==!0?Toe.NEXT_PUBLIC_IS_SIDECAR_BUILD?null:o.jsx(FGt,{slugOrUUID:e.slugOrUUID}):Toe.NEXT_PUBLIC_IS_SIDECAR_BUILD?o.jsx(m7,{...e,placeholderResults:t}):o.jsxs(o.Fragment,{children:[o.jsx(s_,{childrenWidth:"none",children:o.jsx(PAe,{children:o.jsx(m7,{...e,placeholderResults:t})})}),o.jsx(SW,{})]})});LIe.displayName="SearchPage";const BGt="streamId",VGt=ye(async()=>{const{SearchLoadingComponent:e}=await K(async()=>{const{SearchLoadingComponent:t}=await import("./search-loading-component-_KenQFHt.js");return{SearchLoadingComponent:t}},__vite__mapDeps([482,3,1,6,5,4]));return{default:e}});function $Gt({active:e,query:t,copilot:n,source:r,streamId:s}){const a=f.useMemo(()=>t&&e?[$Ye({query_str:t,frontend_uuid:s,query_source:r??"default_search",mode:n==="true"?"COPILOT":"CONCISE"})]:ue,[t,e,s,r,n]);return f.useMemo(()=>e?{hasFrontendUUID:!!s,placeholderResults:a}:void 0,[e,a,s])}function WGt({active:e,frontendUUID:t}){const r=uo().getState().streams,a=(e?r[t]:void 0)?.placeholderChunk,i=f.useMemo(()=>a?[a]:void 0,[a]);return f.useMemo(()=>e?{skipLoadingUI:!0,placeholderResults:i}:void 0,[e,i])}function HGt({active:e,slugOrUUID:t}){const n="search-components",r=gt(),s=f.useMemo(()=>A3(t),[t]),i=uo().getState().entries,l=e?Object.values(i).find(m=>m?.thread_url_slug===t||m?.backend_uuid===t):void 0,{data:c,error:u}=Rmt({slugOrUUID:t,enabled:!l&&e,reason:n});f.useEffect(()=>{c?.[0]&&Ave(c[0])},[c]);const d=f.useMemo(()=>c?.length?c:l?[l]:ue,[c,l]);return f.useEffect(()=>{if(u){const m=I3();if(m.find(s)){const h=m.filter(g=>!s(g));v1(h)}let p=null;u?.cause&&typeof u?.cause=="object"&&"error_code"in u.cause&&(u.cause.error_code===XQ?(p=Jf.ThreadAccessNotAllowed,ne.error(XQ,{error:u,slugOrUUID:t})):u.cause.error_code===Vnt?(p=Jf.ThreadExpired,ne.error(u?.message,{error:u,slugOrUUID:t})):(p=Jf.InvalidThread,ne.error(u?.message,{error:u,slugOrUUID:t})),r.replace(`/?error=${p}&id=${t}`,"Search error"))}},[u,t,s,r]),f.useMemo(()=>e?{entries:d,slugOrUUID:t,hasError:!!u}:void 0,[e,d,u,t])}function zGt(){const{actions:{clearCurrentStreamId:e,clearCurrentThreadId:t}}=Vt(),n=typeof window<"u",r=Zi(),s=!!(r?.new&&r?.uuid&&n),a=!!(r?.new&&!r?.uuid&&n),i=!!(!r?.new&&r?.uuid&&n),l=n?new URLSearchParams(window.location.search):null,c=l?.get("q")??void 0,u=l?.get("copilot")??void 0,d=l?.get("source")??void 0,m=l?.get(BGt),p=f.useMemo(()=>m??crypto.randomUUID(),[m]),h=WGt({active:s,frontendUUID:r?.uuid??""}),g=$Gt({active:a,query:c,copilot:u,streamId:p,source:d}),y=HGt({active:i,slugOrUUID:r?.uuid??""});return f.useEffect(()=>()=>{e(),t()},[e,t]),f.useLayoutEffect(()=>{g?.hasFrontendUUID&&(e(),t())},[e,t,g?.hasFrontendUUID]),jHt(a,p,"new-query-search-components"),f.useMemo(()=>{if(s){const v=r?.uuid;if(!v||!aie(v))return{component:o.jsx(Bc,{to:"/"})}}else if(a){if(!c||c==="pending")return{component:o.jsx(Bc,{to:"/"})}}else if(i){const v=r?.uuid;if(!v||v==="undefined")return{component:o.jsx(Bc,{to:"/"})};if(y?.hasError)return null}else return n?{component:o.jsx(Bc,{to:c?`/search/new${window.location.search}`:"/"})}:{component:o.jsx(VGt,{})};return{props:{...h,...g,...y}}},[n,y,i,g,a,h,s,r?.uuid,c])}const DIe=I.memo(()=>{const e=zGt();return e?"component"in e?e.component:o.jsx(LIe,{...e.props}):null});DIe.displayName="SearchComponents";const FIe=e=>{if(!e)return{base:void 0,symbol:void 0,tab:void 0};const t=new RegExp(R3),n=e?.match(t);return{base:n?.[1]?.replace("app",""),symbol:n?.[2],tab:n?.[3]}};async function GGt({eventId:e,league:t,reason:n}){const{error:r,data:s}=await se.GET("/rest/sports/tennis/{league}/events/{event_id}",n,{params:{path:{event_id:decodeURIComponent(e),league:t}},timeoutMs:15e3});if(r)throw new Ce("API_CLIENTS_ERROR",{cause:r,details:{eventId:e}});return s?.data}async function qGt({seasonId:e,league:t,reason:n}){const{error:r,data:s}=await se.GET("/rest/sports/tennis/{league}/tournaments/{season_id}",n,{params:{path:{season_id:decodeURIComponent(e),league:t}},timeoutMs:15e3});if(r)throw new Ce("API_CLIENTS_ERROR",{cause:r,details:{seasonId:e}});return s?.data}function KGt(e){return e==="cricket"||e==="european_tour"||e==="f1"||e==="nba"||e==="ncaam"||e==="ncaaw"||e==="pga"||e==="soccer"||e==="wnba"||e==="mlb"}const YGt=async({eventId:e,league:t,headers:n,reason:r})=>{if(!KGt(t))throw new Ce("API_CLIENTS_ERROR",{message:`Invalid league: ${t}`,details:{league:t,eventId:e}});const{error:s,data:a}=await se.GET(`/rest/sports/${t}/events/{event_id}`,r,{headers:n,timeoutMs:15e3,params:{path:{event_id:decodeURIComponent(e)}}});if(s)throw new Ce("API_CLIENTS_ERROR",{cause:s,details:{league:t,eventId:e}});try{a?.data.pplx_event&&(a.data.apns=a.data.pplx_event.apns)}catch{}return a?.data},QGt=(e,t)=>[`sports/${t}/event/`,e];async function Fsn({eventId:e,league:t,locale:n,reason:r}){const s={};n&&(s["accept-language"]=n);try{const{error:a,data:i}=await se.GET("/rest/sports/{league}/events/{event_id}/hype",r,{headers:s,timeoutMs:0,params:{path:{league:t,event_id:decodeURIComponent(e)}}});if(a)throw new Ce("API_CLIENTS_ERROR",{cause:a,details:{league:t,eventId:e}});return i?.data}catch(a){return ne.error(a),null}}async function Usn({eventId:e,headers:t,reason:n}){try{const{error:r,data:s}=await se.GET("/rest/sports/f1/live_racer",n,{headers:t,timeoutMs:0});if(r)throw new Ce("API_CLIENTS_ERROR",{cause:r,details:{eventId:e}});return s?.data}catch(r){return ne.error(r),null}}async function Bsn(e){const{error:t,data:n}=await se.GET("/rest/sports/soccer/events/{event_id}","championsleague-events-event-id-client-page",{params:{path:{event_id:decodeURIComponent(e)}},timeoutMs:15e3});if(t)throw new Ce("API_CLIENTS_ERROR",{cause:t,details:{eventId:e}});return n?.data??null}async function XGt({playerId:e,reason:t}){const{error:n,data:r}=await se.GET("/rest/sports/nba/players/{player_id}",t,{params:{path:{player_id:e}},timeoutMs:15e3});if(n)throw new Ce("API_CLIENTS_ERROR",{cause:n,details:{playerId:e}});return r?.data??null}const ZGt=e=>["/rest/sports/nba/players/",e];async function Vsn(e){const{error:t,data:n}=await se.GET("/rest/sports/nba/players/{player_id}/bio","nba-players-player-id-bio-client-page",{params:{path:{player_id:e}},timeoutMs:15e3});if(t)throw new Ce("API_CLIENTS_ERROR",{cause:t,details:{playerId:e}});return n?.data??null}const JGt=async({teamId:e,reason:t})=>{throw new Error("Not implemented")},eqt=e=>["/sports/nfl/teams/",e],tqt=async({teamId:e,reason:t})=>{const{error:n,data:r}=await se.GET("/rest/sports/nba/teams/{team_id}",t,{timeoutMs:0,params:{path:{team_id:Number(decodeURIComponent(e))}}});if(n)throw new Ce("API_CLIENTS_ERROR",{cause:n,details:{teamId:e}});return r.data},nqt=e=>["/sports/nba/teams/",e],rqt=({teamId:e,reason:t,enabled:n})=>We({queryFn:()=>tqt({teamId:e,reason:t}),queryKey:nqt(e),enabled:n}),sqt=({teamId:e,reason:t,enabled:n})=>We({queryFn:()=>JGt({teamId:e,reason:t}),queryKey:eqt(e),enabled:n}),aqt=({playerId:e,reason:t,enabled:n})=>We({queryFn:()=>XGt({playerId:e,reason:t}),queryKey:ZGt(e),enabled:n}),Noe=({seasonId:e,league:t,reason:n,enabled:r})=>We({queryFn:()=>qGt({seasonId:e,league:t,reason:n}),queryKey:[`${t}/tournaments`,e],enabled:r}),dc=({eventId:e,league:t,reason:n,staleTime:r,refetchInterval:s,enabled:a})=>We({...tb,queryFn:()=>YGt({eventId:e,league:t,reason:n}),queryKey:QGt(e,t),staleTime:r,refetchInterval:s,enabled:a}),joe=({eventId:e,league:t,reason:n,enabled:r})=>dc({eventId:e,league:t,reason:n,enabled:r,refetchInterval:s=>s?.state?.data?.event?Um(s.state.data.event)?!1:s0(s.state.data.event)?1e3*10:1e3*30:1e3*60}),oqt=({eventId:e,league:t,reason:n,enabled:r})=>dc({eventId:e,league:t,reason:n,enabled:r}),$sn=({eventId:e,league:t,reason:n,enabled:r})=>dc({eventId:e,league:t,reason:n,enabled:r}),iqt=({eventId:e,league:t,reason:n,enabled:r})=>dc({eventId:e,league:t,reason:n,enabled:r,refetchInterval:s=>s?.state?.data?.event?Um(s.state.data.event)?!1:s0(s.state.data.event)?1e3*10:1e3*30:1e3*60}),lqt=({eventId:e,league:t,reason:n,enabled:r})=>dc({eventId:decodeURIComponent(e),league:t,reason:n,refetchInterval:s=>s?.state?.data?.event&&s.state.data.event.status==="live"?1e3*10:1e3*60,enabled:r}),cqt=({eventId:e,league:t,reason:n,enabled:r})=>dc({eventId:e,league:t,reason:n,refetchInterval:s=>s?.state?.data?.event?Um(s.state.data.event)?!1:s0(s.state.data.event)?1e3*10:1e3*30:1e3*60,enabled:r}),uqt=({eventId:e,league:t,reason:n,enabled:r})=>dc({eventId:e,league:t,reason:n,enabled:r}),dqt=({eventId:e,league:t,reason:n,enabled:r})=>dc({eventId:e,league:t,reason:n,refetchInterval:s=>{const a=s.state?.data?.event?.refetch_interval_secs;return a?1e3*a:!1},staleTime:0,enabled:r}),Aoe=({eventId:e,league:t,enabled:n,reason:r})=>We({...tb,queryKey:[`${t}/events`,e],queryFn:()=>GGt({eventId:e,league:t,reason:r}),refetchInterval:s=>{const a=s.state?.data?.event?.refetch_interval_secs;return a?1e3*a:!1},staleTime:0,enabled:n}),fqt=({eventId:e,league:t,reason:n,enabled:r})=>dc({eventId:e,league:t,reason:n,refetchInterval:s=>{const a=s.state?.data?.event?.refetch_url?.replace("/widget",""),i=s.state?.data?.event?.refetch_interval_secs;return a&&i?1e3*i:!1},staleTime:0,enabled:r}),mqt=({eventId:e,league:t,reason:n,enabled:r})=>dc({eventId:e,league:t,reason:n,enabled:r}),pqt=({reason:e})=>{const t=Nt(),n=typeof t?.get("c")=="string"?t.get("c"):Array.isArray(t?.get("c"))?t.get("c")?.[0]:void 0,r=We({queryKey:VXe(n??""),queryFn:()=>Myt({copyToken:n??"",reason:e}),enabled:!!n}),s=r.isLoading?null:r.data?.shortcut??null;return{...r,shortcut:s,copyToken:n}};var wI={},CI={},SI={},Ioe;function hqt(){return Ioe||(Ioe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ReflectAdapter",{enumerable:!0,get:function(){return t}});class t{static get(r,s,a){const i=Reflect.get(r,s,a);return typeof i=="function"?i.bind(r):i}static set(r,s,a,i){return Reflect.set(r,s,a,i)}static has(r,s){return Reflect.has(r,s)}static deleteProperty(r,s){return Reflect.deleteProperty(r,s)}}}(SI)),SI}var Roe;function gqt(){return Roe||(Roe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(a,i){for(var l in i)Object.defineProperty(a,l,{enumerable:!0,get:i[l]})}t(e,{HeadersAdapter:function(){return s},ReadonlyHeadersError:function(){return r}});const n=hqt();class r extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new r}}class s extends Headers{constructor(i){super(),this.headers=new Proxy(i,{get(l,c,u){if(typeof c=="symbol")return n.ReflectAdapter.get(l,c,u);const d=c.toLowerCase(),m=Object.keys(i).find(p=>p.toLowerCase()===d);if(!(typeof m>"u"))return n.ReflectAdapter.get(l,m,u)},set(l,c,u,d){if(typeof c=="symbol")return n.ReflectAdapter.set(l,c,u,d);const m=c.toLowerCase(),p=Object.keys(i).find(h=>h.toLowerCase()===m);return n.ReflectAdapter.set(l,p??c,u,d)},has(l,c){if(typeof c=="symbol")return n.ReflectAdapter.has(l,c);const u=c.toLowerCase(),d=Object.keys(i).find(m=>m.toLowerCase()===u);return typeof d>"u"?!1:n.ReflectAdapter.has(l,d)},deleteProperty(l,c){if(typeof c=="symbol")return n.ReflectAdapter.deleteProperty(l,c);const u=c.toLowerCase(),d=Object.keys(i).find(m=>m.toLowerCase()===u);return typeof d>"u"?!0:n.ReflectAdapter.deleteProperty(l,d)}})}static seal(i){return new Proxy(i,{get(l,c,u){switch(c){case"append":case"delete":case"set":return r.callable;default:return n.ReflectAdapter.get(l,c,u)}}})}merge(i){return Array.isArray(i)?i.join(", "):i}static from(i){return i instanceof Headers?i:new s(i)}append(i,l){const c=this.headers[i];typeof c=="string"?this.headers[i]=[c,l]:Array.isArray(c)?c.push(l):this.headers[i]=l}delete(i){delete this.headers[i]}get(i){const l=this.headers[i];return typeof l<"u"?this.merge(l):null}has(i){return typeof this.headers[i]<"u"}set(i,l){this.headers[i]=l}forEach(i,l){for(const[c,u]of this.entries())i.call(l,u,c,this)}*entries(){for(const i of Object.keys(this.headers)){const l=i.toLowerCase(),c=this.get(l);yield[l,c]}}*keys(){for(const i of Object.keys(this.headers))yield i.toLowerCase()}*values(){for(const i of Object.keys(this.headers))yield this.get(i)}[Symbol.iterator](){return this.entries()}}}(CI)),CI}var EI={},Poe;function yqt(){return Poe||(Poe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(me,Ae){for(var Ee in Ae)Object.defineProperty(me,Ee,{enumerable:!0,get:Ae[Ee]})}t(e,{ACTION_SUFFIX:function(){return m},APP_DIR_ALIAS:function(){return N},CACHE_ONE_YEAR:function(){return E},DOT_NEXT_ALIAS:function(){return L},ESLINT_DEFAULT_DIRS:function(){return de},GSP_NO_RETURNED_VALUE:function(){return J},GSSP_COMPONENT_MEMBER_ERROR:function(){return re},GSSP_NO_RETURNED_VALUE:function(){return q},INFINITE_CACHE:function(){return M},INSTRUMENTATION_HOOK_FILENAME:function(){return R},MATCHED_PATH_HEADER:function(){return s},MIDDLEWARE_FILENAME:function(){return k},MIDDLEWARE_LOCATION_REGEXP:function(){return A},NEXT_BODY_SUFFIX:function(){return g},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return S},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return v},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return x},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return C},NEXT_CACHE_TAGS_HEADER:function(){return y},NEXT_CACHE_TAG_MAX_ITEMS:function(){return _},NEXT_CACHE_TAG_MAX_LENGTH:function(){return w},NEXT_DATA_SUFFIX:function(){return p},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return r},NEXT_META_SUFFIX:function(){return h},NEXT_QUERY_PARAM_PREFIX:function(){return n},NEXT_RESUME_HEADER:function(){return b},NON_STANDARD_NODE_ENV:function(){return ae},PAGES_DIR_ALIAS:function(){return O},PRERENDER_REVALIDATE_HEADER:function(){return a},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return i},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return z},ROOT_DIR_ALIAS:function(){return P},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return $},RSC_ACTION_ENCRYPTION_ALIAS:function(){return V},RSC_ACTION_PROXY_ALIAS:function(){return F},RSC_ACTION_VALIDATE_ALIAS:function(){return j},RSC_CACHE_WRAPPER_ALIAS:function(){return U},RSC_MOD_REF_PROXY_ALIAS:function(){return T},RSC_PREFETCH_SUFFIX:function(){return l},RSC_SEGMENTS_DIR_SUFFIX:function(){return c},RSC_SEGMENT_SUFFIX:function(){return u},RSC_SUFFIX:function(){return d},SERVER_PROPS_EXPORT_ERROR:function(){return G},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return Y},SERVER_PROPS_SSG_CONFLICT:function(){return W},SERVER_RUNTIME:function(){return ve},SSG_FALLBACK_EXPORT_ERROR:function(){return fe},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return Q},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return X},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return te},WEBPACK_LAYERS:function(){return Se},WEBPACK_RESOURCE_QUERIES:function(){return be}});const n="nxtP",r="nxtI",s="x-matched-path",a="x-prerender-revalidate",i="x-prerender-revalidate-if-generated",l=".prefetch.rsc",c=".segments",u=".segment.rsc",d=".rsc",m=".action",p=".json",h=".meta",g=".body",y="x-next-cache-tags",v="x-next-revalidated-tags",x="x-next-revalidate-tag-token",b="next-resume",_=128,w=256,C=1024,S="_N_T_",E=31536e3,M=4294967294,k="middleware",A=`(?:src/)?${k}`,R="instrumentation",O="private-next-pages",L="private-dot-next",P="private-next-root-dir",N="private-next-app-dir",T="private-next-rsc-mod-ref-proxy",j="private-next-rsc-action-validate",F="private-next-rsc-server-reference",U="private-next-rsc-cache-wrapper",V="private-next-rsc-action-encryption",$="private-next-rsc-action-client-wrapper",z="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",Q="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",Y="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",W="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",X="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",G="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",J="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",q="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",te="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",re="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",ae='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',fe="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",de=["app","pages","components","lib","src"],ve={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},_e={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},Se={..._e,GROUP:{builtinReact:[_e.reactServerComponents,_e.actionBrowser],serverOnly:[_e.reactServerComponents,_e.actionBrowser,_e.instrument,_e.middleware],neutralTarget:[_e.api],clientOnly:[_e.serverSideRendering,_e.appPagesBrowser],bundled:[_e.reactServerComponents,_e.actionBrowser,_e.serverSideRendering,_e.appPagesBrowser,_e.shared,_e.instrument,_e.middleware],appPages:[_e.reactServerComponents,_e.serverSideRendering,_e.appPagesBrowser,_e.actionBrowser]}},be={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}}(EI)),EI}var MI={},kI={},Ooe;function UIe(){return Ooe||(Ooe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,x){for(var b in x)Object.defineProperty(v,b,{enumerable:!0,get:x[b]})}t(e,{AppRenderSpan:function(){return c},AppRouteRouteHandlersSpan:function(){return m},BaseServerSpan:function(){return n},LoadComponentsSpan:function(){return r},LogSpanAllowList:function(){return y},MiddlewareSpan:function(){return h},NextNodeServerSpan:function(){return a},NextServerSpan:function(){return s},NextVanillaSpanAllowlist:function(){return g},NodeSpan:function(){return d},RenderSpan:function(){return l},ResolveMetadataSpan:function(){return p},RouterSpan:function(){return u},StartServerSpan:function(){return i}});var n=function(v){return v.handleRequest="BaseServer.handleRequest",v.run="BaseServer.run",v.pipe="BaseServer.pipe",v.getStaticHTML="BaseServer.getStaticHTML",v.render="BaseServer.render",v.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",v.renderToResponse="BaseServer.renderToResponse",v.renderToHTML="BaseServer.renderToHTML",v.renderError="BaseServer.renderError",v.renderErrorToResponse="BaseServer.renderErrorToResponse",v.renderErrorToHTML="BaseServer.renderErrorToHTML",v.render404="BaseServer.render404",v}(n||{}),r=function(v){return v.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",v.loadComponents="LoadComponents.loadComponents",v}(r||{}),s=function(v){return v.getRequestHandler="NextServer.getRequestHandler",v.getServer="NextServer.getServer",v.getServerRequestHandler="NextServer.getServerRequestHandler",v.createServer="createServer.createServer",v}(s||{}),a=function(v){return v.compression="NextNodeServer.compression",v.getBuildId="NextNodeServer.getBuildId",v.createComponentTree="NextNodeServer.createComponentTree",v.clientComponentLoading="NextNodeServer.clientComponentLoading",v.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",v.generateStaticRoutes="NextNodeServer.generateStaticRoutes",v.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",v.generatePublicRoutes="NextNodeServer.generatePublicRoutes",v.generateImageRoutes="NextNodeServer.generateImageRoutes.route",v.sendRenderResult="NextNodeServer.sendRenderResult",v.proxyRequest="NextNodeServer.proxyRequest",v.runApi="NextNodeServer.runApi",v.render="NextNodeServer.render",v.renderHTML="NextNodeServer.renderHTML",v.imageOptimizer="NextNodeServer.imageOptimizer",v.getPagePath="NextNodeServer.getPagePath",v.getRoutesManifest="NextNodeServer.getRoutesManifest",v.findPageComponents="NextNodeServer.findPageComponents",v.getFontManifest="NextNodeServer.getFontManifest",v.getServerComponentManifest="NextNodeServer.getServerComponentManifest",v.getRequestHandler="NextNodeServer.getRequestHandler",v.renderToHTML="NextNodeServer.renderToHTML",v.renderError="NextNodeServer.renderError",v.renderErrorToHTML="NextNodeServer.renderErrorToHTML",v.render404="NextNodeServer.render404",v.startResponse="NextNodeServer.startResponse",v.route="route",v.onProxyReq="onProxyReq",v.apiResolver="apiResolver",v.internalFetch="internalFetch",v}(a||{}),i=function(v){return v.startServer="startServer.startServer",v}(i||{}),l=function(v){return v.getServerSideProps="Render.getServerSideProps",v.getStaticProps="Render.getStaticProps",v.renderToString="Render.renderToString",v.renderDocument="Render.renderDocument",v.createBodyResult="Render.createBodyResult",v}(l||{}),c=function(v){return v.renderToString="AppRender.renderToString",v.renderToReadableStream="AppRender.renderToReadableStream",v.getBodyResult="AppRender.getBodyResult",v.fetch="AppRender.fetch",v}(c||{}),u=function(v){return v.executeRoute="Router.executeRoute",v}(u||{}),d=function(v){return v.runHandler="Node.runHandler",v}(d||{}),m=function(v){return v.runHandler="AppRouteRouteHandlers.runHandler",v}(m||{}),p=function(v){return v.generateMetadata="ResolveMetadata.generateMetadata",v.generateViewport="ResolveMetadata.generateViewport",v}(p||{}),h=function(v){return v.execute="Middleware.execute",v}(h||{});const g=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],y=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]}(kI)),kI}var TI={},Loe;function vqt(){return Loe||(Loe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"isThenable",{enumerable:!0,get:function(){return t}});function t(n){return n!==null&&typeof n=="object"&&"then"in n&&typeof n.then=="function"}}(TI)),TI}var xqt=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Kf="1.8.0",Doe=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function bqt(e){var t=new Set([e]),n=new Set,r=e.match(Doe);if(!r)return function(){return!1};var s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(s.prerelease!=null)return function(c){return c===e};function a(l){return n.add(l),!1}function i(l){return t.add(l),!0}return function(c){if(t.has(c))return!0;if(n.has(c))return!1;var u=c.match(Doe);if(!u)return a(c);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||s.major!==d.major?a(c):s.major===0?s.minor===d.minor&&s.patch<=d.patch?i(c):a(c):s.minor<=d.minor?i(c):a(c)}}var _qt=bqt(Kf),wqt=Kf.split(".")[0],ob=Symbol.for("opentelemetry.js.api."+wqt),ib=xqt;function mw(e,t,n,r){var s;r===void 0&&(r=!1);var a=ib[ob]=(s=ib[ob])!==null&&s!==void 0?s:{version:Kf};if(!r&&a[e]){var i=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(i.stack||i.message),!1}if(a.version!==Kf){var i=new Error("@opentelemetry/api: Registration of version v"+a.version+" for "+e+" does not match previously registered API v"+Kf);return n.error(i.stack||i.message),!1}return a[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Kf+"."),!0}function Bm(e){var t,n,r=(t=ib[ob])===null||t===void 0?void 0:t.version;if(!(!r||!_qt(r)))return(n=ib[ob])===null||n===void 0?void 0:n[e]}function pw(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Kf+".");var n=ib[ob];n&&delete n[e]}var Cqt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},Sqt=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},Eqt=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return lv("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return lv("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return lv("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return lv("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return lv("verbose",this._namespace,t)},e}();function lv(e,t,n){var r=Bm("diag");if(r)return n.unshift(t),r[e].apply(r,Sqt([],Cqt(n),!1))}var Wa;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Wa||(Wa={}));function Mqt(e,t){e<Wa.NONE?e=Wa.NONE:e>Wa.ALL&&(e=Wa.ALL),t=t||{};function n(r,s){var a=t[r];return typeof a=="function"&&e>=s?a.bind(t):function(){}}return{error:n("error",Wa.ERROR),warn:n("warn",Wa.WARN),info:n("info",Wa.INFO),debug:n("debug",Wa.DEBUG),verbose:n("verbose",Wa.VERBOSE)}}var kqt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},Tqt=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},Nqt="diag",nc=function(){function e(){function t(s){return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var l=Bm("diag");if(l)return l[s].apply(l,Tqt([],kqt(a),!1))}}var n=this,r=function(s,a){var i,l,c;if(a===void 0&&(a={logLevel:Wa.INFO}),s===n){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((i=u.stack)!==null&&i!==void 0?i:u.message),!1}typeof a=="number"&&(a={logLevel:a});var d=Bm("diag"),m=Mqt((l=a.logLevel)!==null&&l!==void 0?l:Wa.INFO,s);if(d&&!a.suppressOverrideMessage){var p=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+p),m.warn("Current logger will overwrite one already registered from "+p)}return mw("diag",m,n,!0)};n.setLogger=r,n.disable=function(){pw(Nqt,n)},n.createComponentLogger=function(s){return new Eqt(s)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),jqt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},Aqt=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Iqt=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var n=this._entries.get(t);if(n)return Object.assign({},n)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var n=jqt(t,2),r=n[0],s=n[1];return[r,s]})},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var a=new e(this._entries);try{for(var i=Aqt(r),l=i.next();!l.done;l=i.next()){var c=l.value;a._entries.delete(c)}}catch(u){t={error:u}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},e.prototype.clear=function(){return new e},e}(),Rqt=Symbol("BaggageEntryMetadata"),Pqt=nc.instance();function Oqt(e){return e===void 0&&(e={}),new Iqt(new Map(Object.entries(e)))}function Lqt(e){return typeof e!="string"&&(Pqt.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:Rqt,toString:function(){return e}}}function cH(e){return Symbol.for(e)}var Dqt=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,s){var a=new e(n._currentContext);return a._currentContext.set(r,s),a},n.deleteValue=function(r){var s=new e(n._currentContext);return s._currentContext.delete(r),s}}return e}(),BIe=new Dqt,NI=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Fqt=function(){function e(){function t(r){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(console){var i=console[r];if(typeof i!="function"&&(i=console.log),typeof i=="function")return i.apply(console,s)}}}for(var n=0;n<NI.length;n++)this[NI[n].n]=t(NI[n].c)}return e}(),d0=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uqt=function(){function e(){}return e.prototype.createHistogram=function(t,n){return qqt},e.prototype.createCounter=function(t,n){return Gqt},e.prototype.createUpDownCounter=function(t,n){return Kqt},e.prototype.createObservableGauge=function(t,n){return Qqt},e.prototype.createObservableCounter=function(t,n){return Yqt},e.prototype.createObservableUpDownCounter=function(t,n){return Xqt},e.prototype.addBatchObservableCallback=function(t,n){},e.prototype.removeBatchObservableCallback=function(t){},e}(),uH=function(){function e(){}return e}(),Bqt=function(e){d0(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(uH),Vqt=function(e){d0(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(uH),$qt=function(e){d0(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(n,r){},t}(uH),dH=function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e}(),Wqt=function(e){d0(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(dH),Hqt=function(e){d0(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(dH),zqt=function(e){d0(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(dH),VIe=new Uqt,Gqt=new Bqt,qqt=new $qt,Kqt=new Vqt,Yqt=new Wqt,Qqt=new Hqt,Xqt=new zqt;function Zqt(){return VIe}var p7;(function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"})(p7||(p7={}));var $Ie={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},WIe={set:function(e,t,n){e!=null&&(e[t]=n)}},Jqt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},eKt=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},tKt=function(){function e(){}return e.prototype.active=function(){return BIe},e.prototype.with=function(t,n,r){for(var s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return n.call.apply(n,eKt([r],Jqt(s),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),nKt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},rKt=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},jI="context",sKt=new tKt,qT=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return mw(jI,t,nc.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var s,a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return(s=this._getContextManager()).with.apply(s,rKt([t,n,r],nKt(a),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return Bm(jI)||sKt},e.prototype.disable=function(){this._getContextManager().disable(),pw(jI,nc.instance())},e}(),AM;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(AM||(AM={}));var fH="0000000000000000",mH="00000000000000000000000000000000",HIe={traceId:mH,spanId:fH,traceFlags:AM.NONE},Cx=function(){function e(t){t===void 0&&(t=HIe),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),pH=cH("OpenTelemetry Context Key SPAN");function hH(e){return e.getValue(pH)||void 0}function aKt(){return hH(qT.getInstance().active())}function gH(e,t){return e.setValue(pH,t)}function oKt(e){return e.deleteValue(pH)}function iKt(e,t){return gH(e,new Cx(t))}function zIe(e){var t;return(t=hH(e))===null||t===void 0?void 0:t.spanContext()}var lKt=/^([0-9a-f]{32})$/i,cKt=/^[0-9a-f]{16}$/i;function GIe(e){return lKt.test(e)&&e!==mH}function qIe(e){return cKt.test(e)&&e!==fH}function yH(e){return GIe(e.traceId)&&qIe(e.spanId)}function uKt(e){return new Cx(e)}var AI=qT.getInstance(),KIe=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=AI.active());var s=!!n?.root;if(s)return new Cx;var a=r&&zIe(r);return dKt(a)&&yH(a)?new Cx(a):new Cx},e.prototype.startActiveSpan=function(t,n,r,s){var a,i,l;if(!(arguments.length<2)){arguments.length===2?l=n:arguments.length===3?(a=n,l=r):(a=n,i=r,l=s);var c=i??AI.active(),u=this.startSpan(t,a,c),d=gH(c,u);return AI.with(d,l,void 0,u)}},e}();function dKt(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var fKt=new KIe,YIe=function(){function e(t,n,r,s){this._provider=t,this.name=n,this.version=r,this.options=s}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,s){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):fKt},e}(),mKt=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new KIe},e}(),pKt=new mKt,h7=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var s;return(s=this.getDelegateTracer(t,n,r))!==null&&s!==void 0?s:new YIe(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:pKt},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,n,r)},e}(),g7;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(g7||(g7={}));var y7;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(y7||(y7={}));var v7;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(v7||(v7={}));var x7="[_0-9a-z-*/]",hKt="[a-z]"+x7+"{0,255}",gKt="[a-z0-9]"+x7+"{0,240}@[a-z]"+x7+"{0,13}",yKt=new RegExp("^(?:"+hKt+"|"+gKt+")$"),vKt=/^[ -~]{0,255}[!-~]$/,xKt=/,|=/;function bKt(e){return yKt.test(e)}function _Kt(e){return vKt.test(e)&&!xKt.test(e)}var Foe=32,wKt=512,Uoe=",",Boe="=",CKt=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,n){var r=this._clone();return r._internalState.has(t)&&r._internalState.delete(t),r._internalState.set(t,n),r},e.prototype.unset=function(t){var n=this._clone();return n._internalState.delete(t),n},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(n,r){return n.push(r+Boe+t.get(r)),n},[]).join(Uoe)},e.prototype._parse=function(t){t.length>wKt||(this._internalState=t.split(Uoe).reverse().reduce(function(n,r){var s=r.trim(),a=s.indexOf(Boe);if(a!==-1){var i=s.slice(0,a),l=s.slice(a+1,r.length);bKt(i)&&_Kt(l)&&n.set(i,l)}return n},new Map),this._internalState.size>Foe&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Foe))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function SKt(e){return new CKt(e)}var QIe=qT.getInstance(),XIe=nc.instance(),EKt=function(){function e(){}return e.prototype.getMeter=function(t,n,r){return VIe},e}(),MKt=new EKt,II="metrics",kKt=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return mw(II,t,nc.instance())},e.prototype.getMeterProvider=function(){return Bm(II)||MKt},e.prototype.getMeter=function(t,n,r){return this.getMeterProvider().getMeter(t,n,r)},e.prototype.disable=function(){pw(II,nc.instance())},e}(),ZIe=kKt.getInstance(),TKt=function(){function e(){}return e.prototype.inject=function(t,n){},e.prototype.extract=function(t,n){return t},e.prototype.fields=function(){return[]},e}(),vH=cH("OpenTelemetry Baggage Key");function JIe(e){return e.getValue(vH)||void 0}function NKt(){return JIe(qT.getInstance().active())}function jKt(e,t){return e.setValue(vH,t)}function AKt(e){return e.deleteValue(vH)}var RI="propagation",IKt=new TKt,RKt=function(){function e(){this.createBaggage=Oqt,this.getBaggage=JIe,this.getActiveBaggage=NKt,this.setBaggage=jKt,this.deleteBaggage=AKt}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return mw(RI,t,nc.instance())},e.prototype.inject=function(t,n,r){return r===void 0&&(r=WIe),this._getGlobalPropagator().inject(t,n,r)},e.prototype.extract=function(t,n,r){return r===void 0&&(r=$Ie),this._getGlobalPropagator().extract(t,n,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){pw(RI,nc.instance())},e.prototype._getGlobalPropagator=function(){return Bm(RI)||IKt},e}(),eRe=RKt.getInstance(),PI="trace",PKt=function(){function e(){this._proxyTracerProvider=new h7,this.wrapSpanContext=uKt,this.isSpanContextValid=yH,this.deleteSpan=oKt,this.getSpan=hH,this.getActiveSpan=aKt,this.getSpanContext=zIe,this.setSpan=gH,this.setSpanContext=iKt}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=mw(PI,this._proxyTracerProvider,nc.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return Bm(PI)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){pw(PI,nc.instance()),this._proxyTracerProvider=new h7},e}(),tRe=PKt.getInstance();const OKt={context:QIe,diag:XIe,metrics:ZIe,propagation:eRe,trace:tRe},LKt=Object.freeze(Object.defineProperty({__proto__:null,DiagConsoleLogger:Fqt,get DiagLogLevel(){return Wa},INVALID_SPANID:fH,INVALID_SPAN_CONTEXT:HIe,INVALID_TRACEID:mH,ProxyTracer:YIe,ProxyTracerProvider:h7,ROOT_CONTEXT:BIe,get SamplingDecision(){return g7},get SpanKind(){return y7},get SpanStatusCode(){return v7},get TraceFlags(){return AM},get ValueType(){return p7},baggageEntryMetadataFromString:Lqt,context:QIe,createContextKey:cH,createNoopMeter:Zqt,createTraceState:SKt,default:OKt,defaultTextMapGetter:$Ie,defaultTextMapSetter:WIe,diag:XIe,isSpanContextValid:yH,isValidSpanId:qIe,isValidTraceId:GIe,metrics:ZIe,propagation:eRe,trace:tRe},Symbol.toStringTag,{value:"Module"})),Voe=ty(LKt);var OI={exports:{}},$oe;function DKt(){return $oe||($oe=1,(()=>{var e={491:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ContextAPI=void 0;const l=i(223),c=i(172),u=i(930),d="context",m=new l.NoopContextManager;class p{constructor(){}static getInstance(){return this._instance||(this._instance=new p),this._instance}setGlobalContextManager(g){return(0,c.registerGlobal)(d,g,u.DiagAPI.instance())}active(){return this._getContextManager().active()}with(g,y,v,...x){return this._getContextManager().with(g,y,v,...x)}bind(g,y){return this._getContextManager().bind(g,y)}_getContextManager(){return(0,c.getGlobal)(d)||m}disable(){this._getContextManager().disable(),(0,c.unregisterGlobal)(d,u.DiagAPI.instance())}}a.ContextAPI=p},930:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagAPI=void 0;const l=i(56),c=i(912),u=i(957),d=i(172),m="diag";class p{constructor(){function g(x){return function(...b){const _=(0,d.getGlobal)("diag");if(_)return _[x](...b)}}const y=this,v=(x,b={logLevel:u.DiagLogLevel.INFO})=>{var _,w,C;if(x===y){const M=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return y.error((_=M.stack)!==null&&_!==void 0?_:M.message),!1}typeof b=="number"&&(b={logLevel:b});const S=(0,d.getGlobal)("diag"),E=(0,c.createLogLevelDiagLogger)((w=b.logLevel)!==null&&w!==void 0?w:u.DiagLogLevel.INFO,x);if(S&&!b.suppressOverrideMessage){const M=(C=new Error().stack)!==null&&C!==void 0?C:"<failed to generate stacktrace>";S.warn(`Current logger will be overwritten from ${M}`),E.warn(`Current logger will overwrite one already registered from ${M}`)}return(0,d.registerGlobal)("diag",E,y,!0)};y.setLogger=v,y.disable=()=>{(0,d.unregisterGlobal)(m,y)},y.createComponentLogger=x=>new l.DiagComponentLogger(x),y.verbose=g("verbose"),y.debug=g("debug"),y.info=g("info"),y.warn=g("warn"),y.error=g("error")}static instance(){return this._instance||(this._instance=new p),this._instance}}a.DiagAPI=p},653:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MetricsAPI=void 0;const l=i(660),c=i(172),u=i(930),d="metrics";class m{constructor(){}static getInstance(){return this._instance||(this._instance=new m),this._instance}setGlobalMeterProvider(h){return(0,c.registerGlobal)(d,h,u.DiagAPI.instance())}getMeterProvider(){return(0,c.getGlobal)(d)||l.NOOP_METER_PROVIDER}getMeter(h,g,y){return this.getMeterProvider().getMeter(h,g,y)}disable(){(0,c.unregisterGlobal)(d,u.DiagAPI.instance())}}a.MetricsAPI=m},181:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PropagationAPI=void 0;const l=i(172),c=i(874),u=i(194),d=i(277),m=i(369),p=i(930),h="propagation",g=new c.NoopTextMapPropagator;class y{constructor(){this.createBaggage=m.createBaggage,this.getBaggage=d.getBaggage,this.getActiveBaggage=d.getActiveBaggage,this.setBaggage=d.setBaggage,this.deleteBaggage=d.deleteBaggage}static getInstance(){return this._instance||(this._instance=new y),this._instance}setGlobalPropagator(x){return(0,l.registerGlobal)(h,x,p.DiagAPI.instance())}inject(x,b,_=u.defaultTextMapSetter){return this._getGlobalPropagator().inject(x,b,_)}extract(x,b,_=u.defaultTextMapGetter){return this._getGlobalPropagator().extract(x,b,_)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,l.unregisterGlobal)(h,p.DiagAPI.instance())}_getGlobalPropagator(){return(0,l.getGlobal)(h)||g}}a.PropagationAPI=y},997:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TraceAPI=void 0;const l=i(172),c=i(846),u=i(139),d=i(607),m=i(930),p="trace";class h{constructor(){this._proxyTracerProvider=new c.ProxyTracerProvider,this.wrapSpanContext=u.wrapSpanContext,this.isSpanContextValid=u.isSpanContextValid,this.deleteSpan=d.deleteSpan,this.getSpan=d.getSpan,this.getActiveSpan=d.getActiveSpan,this.getSpanContext=d.getSpanContext,this.setSpan=d.setSpan,this.setSpanContext=d.setSpanContext}static getInstance(){return this._instance||(this._instance=new h),this._instance}setGlobalTracerProvider(y){const v=(0,l.registerGlobal)(p,this._proxyTracerProvider,m.DiagAPI.instance());return v&&this._proxyTracerProvider.setDelegate(y),v}getTracerProvider(){return(0,l.getGlobal)(p)||this._proxyTracerProvider}getTracer(y,v){return this.getTracerProvider().getTracer(y,v)}disable(){(0,l.unregisterGlobal)(p,m.DiagAPI.instance()),this._proxyTracerProvider=new c.ProxyTracerProvider}}a.TraceAPI=h},277:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.deleteBaggage=a.setBaggage=a.getActiveBaggage=a.getBaggage=void 0;const l=i(491),u=(0,i(780).createContextKey)("OpenTelemetry Baggage Key");function d(g){return g.getValue(u)||void 0}a.getBaggage=d;function m(){return d(l.ContextAPI.getInstance().active())}a.getActiveBaggage=m;function p(g,y){return g.setValue(u,y)}a.setBaggage=p;function h(g){return g.deleteValue(u)}a.deleteBaggage=h},993:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaggageImpl=void 0;class i{constructor(c){this._entries=c?new Map(c):new Map}getEntry(c){const u=this._entries.get(c);if(u)return Object.assign({},u)}getAllEntries(){return Array.from(this._entries.entries()).map(([c,u])=>[c,u])}setEntry(c,u){const d=new i(this._entries);return d._entries.set(c,u),d}removeEntry(c){const u=new i(this._entries);return u._entries.delete(c),u}removeEntries(...c){const u=new i(this._entries);for(const d of c)u._entries.delete(d);return u}clear(){return new i}}a.BaggageImpl=i},830:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.baggageEntryMetadataSymbol=void 0,a.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.baggageEntryMetadataFromString=a.createBaggage=void 0;const l=i(930),c=i(993),u=i(830),d=l.DiagAPI.instance();function m(h={}){return new c.BaggageImpl(new Map(Object.entries(h)))}a.createBaggage=m;function p(h){return typeof h!="string"&&(d.error(`Cannot create baggage metadata from unknown type: ${typeof h}`),h=""),{__TYPE__:u.baggageEntryMetadataSymbol,toString(){return h}}}a.baggageEntryMetadataFromString=p},67:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.context=void 0;const l=i(491);a.context=l.ContextAPI.getInstance()},223:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopContextManager=void 0;const l=i(780);class c{active(){return l.ROOT_CONTEXT}with(d,m,p,...h){return m.call(p,...h)}bind(d,m){return m}enable(){return this}disable(){return this}}a.NoopContextManager=c},780:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ROOT_CONTEXT=a.createContextKey=void 0;function i(c){return Symbol.for(c)}a.createContextKey=i;class l{constructor(u){const d=this;d._currentContext=u?new Map(u):new Map,d.getValue=m=>d._currentContext.get(m),d.setValue=(m,p)=>{const h=new l(d._currentContext);return h._currentContext.set(m,p),h},d.deleteValue=m=>{const p=new l(d._currentContext);return p._currentContext.delete(m),p}}}a.ROOT_CONTEXT=new l},506:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.diag=void 0;const l=i(930);a.diag=l.DiagAPI.instance()},56:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagComponentLogger=void 0;const l=i(172);class c{constructor(m){this._namespace=m.namespace||"DiagComponentLogger"}debug(...m){return u("debug",this._namespace,m)}error(...m){return u("error",this._namespace,m)}info(...m){return u("info",this._namespace,m)}warn(...m){return u("warn",this._namespace,m)}verbose(...m){return u("verbose",this._namespace,m)}}a.DiagComponentLogger=c;function u(d,m,p){const h=(0,l.getGlobal)("diag");if(h)return p.unshift(m),h[d](...p)}},972:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagConsoleLogger=void 0;const i=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class l{constructor(){function u(d){return function(...m){if(console){let p=console[d];if(typeof p!="function"&&(p=console.log),typeof p=="function")return p.apply(console,m)}}}for(let d=0;d<i.length;d++)this[i[d].n]=u(i[d].c)}}a.DiagConsoleLogger=l},912:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createLogLevelDiagLogger=void 0;const l=i(957);function c(u,d){u<l.DiagLogLevel.NONE?u=l.DiagLogLevel.NONE:u>l.DiagLogLevel.ALL&&(u=l.DiagLogLevel.ALL),d=d||{};function m(p,h){const g=d[p];return typeof g=="function"&&u>=h?g.bind(d):function(){}}return{error:m("error",l.DiagLogLevel.ERROR),warn:m("warn",l.DiagLogLevel.WARN),info:m("info",l.DiagLogLevel.INFO),debug:m("debug",l.DiagLogLevel.DEBUG),verbose:m("verbose",l.DiagLogLevel.VERBOSE)}}a.createLogLevelDiagLogger=c},957:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagLogLevel=void 0,function(i){i[i.NONE=0]="NONE",i[i.ERROR=30]="ERROR",i[i.WARN=50]="WARN",i[i.INFO=60]="INFO",i[i.DEBUG=70]="DEBUG",i[i.VERBOSE=80]="VERBOSE",i[i.ALL=9999]="ALL"}(a.DiagLogLevel||(a.DiagLogLevel={}))},172:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.unregisterGlobal=a.getGlobal=a.registerGlobal=void 0;const l=i(200),c=i(521),u=i(130),d=c.VERSION.split(".")[0],m=Symbol.for(`opentelemetry.js.api.${d}`),p=l._globalThis;function h(v,x,b,_=!1){var w;const C=p[m]=(w=p[m])!==null&&w!==void 0?w:{version:c.VERSION};if(!_&&C[v]){const S=new Error(`@opentelemetry/api: Attempted duplicate registration of API: ${v}`);return b.error(S.stack||S.message),!1}if(C.version!==c.VERSION){const S=new Error(`@opentelemetry/api: Registration of version v${C.version} for ${v} does not match previously registered API v${c.VERSION}`);return b.error(S.stack||S.message),!1}return C[v]=x,b.debug(`@opentelemetry/api: Registered a global for ${v} v${c.VERSION}.`),!0}a.registerGlobal=h;function g(v){var x,b;const _=(x=p[m])===null||x===void 0?void 0:x.version;if(!(!_||!(0,u.isCompatible)(_)))return(b=p[m])===null||b===void 0?void 0:b[v]}a.getGlobal=g;function y(v,x){x.debug(`@opentelemetry/api: Unregistering a global for ${v} v${c.VERSION}.`);const b=p[m];b&&delete b[v]}a.unregisterGlobal=y},130:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isCompatible=a._makeCompatibilityCheck=void 0;const l=i(521),c=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function u(d){const m=new Set([d]),p=new Set,h=d.match(c);if(!h)return()=>!1;const g={major:+h[1],minor:+h[2],patch:+h[3],prerelease:h[4]};if(g.prerelease!=null)return function(b){return b===d};function y(x){return p.add(x),!1}function v(x){return m.add(x),!0}return function(b){if(m.has(b))return!0;if(p.has(b))return!1;const _=b.match(c);if(!_)return y(b);const w={major:+_[1],minor:+_[2],patch:+_[3],prerelease:_[4]};return w.prerelease!=null||g.major!==w.major?y(b):g.major===0?g.minor===w.minor&&g.patch<=w.patch?v(b):y(b):g.minor<=w.minor?v(b):y(b)}}a._makeCompatibilityCheck=u,a.isCompatible=u(l.VERSION)},886:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.metrics=void 0;const l=i(653);a.metrics=l.MetricsAPI.getInstance()},901:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ValueType=void 0,function(i){i[i.INT=0]="INT",i[i.DOUBLE=1]="DOUBLE"}(a.ValueType||(a.ValueType={}))},102:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createNoopMeter=a.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=a.NOOP_OBSERVABLE_GAUGE_METRIC=a.NOOP_OBSERVABLE_COUNTER_METRIC=a.NOOP_UP_DOWN_COUNTER_METRIC=a.NOOP_HISTOGRAM_METRIC=a.NOOP_COUNTER_METRIC=a.NOOP_METER=a.NoopObservableUpDownCounterMetric=a.NoopObservableGaugeMetric=a.NoopObservableCounterMetric=a.NoopObservableMetric=a.NoopHistogramMetric=a.NoopUpDownCounterMetric=a.NoopCounterMetric=a.NoopMetric=a.NoopMeter=void 0;class i{constructor(){}createHistogram(x,b){return a.NOOP_HISTOGRAM_METRIC}createCounter(x,b){return a.NOOP_COUNTER_METRIC}createUpDownCounter(x,b){return a.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(x,b){return a.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(x,b){return a.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(x,b){return a.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(x,b){}removeBatchObservableCallback(x){}}a.NoopMeter=i;class l{}a.NoopMetric=l;class c extends l{add(x,b){}}a.NoopCounterMetric=c;class u extends l{add(x,b){}}a.NoopUpDownCounterMetric=u;class d extends l{record(x,b){}}a.NoopHistogramMetric=d;class m{addCallback(x){}removeCallback(x){}}a.NoopObservableMetric=m;class p extends m{}a.NoopObservableCounterMetric=p;class h extends m{}a.NoopObservableGaugeMetric=h;class g extends m{}a.NoopObservableUpDownCounterMetric=g,a.NOOP_METER=new i,a.NOOP_COUNTER_METRIC=new c,a.NOOP_HISTOGRAM_METRIC=new d,a.NOOP_UP_DOWN_COUNTER_METRIC=new u,a.NOOP_OBSERVABLE_COUNTER_METRIC=new p,a.NOOP_OBSERVABLE_GAUGE_METRIC=new h,a.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new g;function y(){return a.NOOP_METER}a.createNoopMeter=y},660:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NOOP_METER_PROVIDER=a.NoopMeterProvider=void 0;const l=i(102);class c{getMeter(d,m,p){return l.NOOP_METER}}a.NoopMeterProvider=c,a.NOOP_METER_PROVIDER=new c},200:function(s,a,i){var l=this&&this.__createBinding||(Object.create?function(u,d,m,p){p===void 0&&(p=m),Object.defineProperty(u,p,{enumerable:!0,get:function(){return d[m]}})}:function(u,d,m,p){p===void 0&&(p=m),u[p]=d[m]}),c=this&&this.__exportStar||function(u,d){for(var m in u)m!=="default"&&!Object.prototype.hasOwnProperty.call(d,m)&&l(d,u,m)};Object.defineProperty(a,"__esModule",{value:!0}),c(i(46),a)},651:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a._globalThis=void 0,a._globalThis=typeof globalThis=="object"?globalThis:ko},46:function(s,a,i){var l=this&&this.__createBinding||(Object.create?function(u,d,m,p){p===void 0&&(p=m),Object.defineProperty(u,p,{enumerable:!0,get:function(){return d[m]}})}:function(u,d,m,p){p===void 0&&(p=m),u[p]=d[m]}),c=this&&this.__exportStar||function(u,d){for(var m in u)m!=="default"&&!Object.prototype.hasOwnProperty.call(d,m)&&l(d,u,m)};Object.defineProperty(a,"__esModule",{value:!0}),c(i(651),a)},939:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.propagation=void 0;const l=i(181);a.propagation=l.PropagationAPI.getInstance()},874:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopTextMapPropagator=void 0;class i{inject(c,u){}extract(c,u){return c}fields(){return[]}}a.NoopTextMapPropagator=i},194:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.defaultTextMapSetter=a.defaultTextMapGetter=void 0,a.defaultTextMapGetter={get(i,l){if(i!=null)return i[l]},keys(i){return i==null?[]:Object.keys(i)}},a.defaultTextMapSetter={set(i,l,c){i!=null&&(i[l]=c)}}},845:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.trace=void 0;const l=i(997);a.trace=l.TraceAPI.getInstance()},403:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NonRecordingSpan=void 0;const l=i(476);class c{constructor(d=l.INVALID_SPAN_CONTEXT){this._spanContext=d}spanContext(){return this._spanContext}setAttribute(d,m){return this}setAttributes(d){return this}addEvent(d,m){return this}setStatus(d){return this}updateName(d){return this}end(d){}isRecording(){return!1}recordException(d,m){}}a.NonRecordingSpan=c},614:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopTracer=void 0;const l=i(491),c=i(607),u=i(403),d=i(139),m=l.ContextAPI.getInstance();class p{startSpan(y,v,x=m.active()){if(!!v?.root)return new u.NonRecordingSpan;const _=x&&(0,c.getSpanContext)(x);return h(_)&&(0,d.isSpanContextValid)(_)?new u.NonRecordingSpan(_):new u.NonRecordingSpan}startActiveSpan(y,v,x,b){let _,w,C;if(arguments.length<2)return;arguments.length===2?C=v:arguments.length===3?(_=v,C=x):(_=v,w=x,C=b);const S=w??m.active(),E=this.startSpan(y,_,S),M=(0,c.setSpan)(S,E);return m.with(M,C,void 0,E)}}a.NoopTracer=p;function h(g){return typeof g=="object"&&typeof g.spanId=="string"&&typeof g.traceId=="string"&&typeof g.traceFlags=="number"}},124:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopTracerProvider=void 0;const l=i(614);class c{getTracer(d,m,p){return new l.NoopTracer}}a.NoopTracerProvider=c},125:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ProxyTracer=void 0;const l=i(614),c=new l.NoopTracer;class u{constructor(m,p,h,g){this._provider=m,this.name=p,this.version=h,this.options=g}startSpan(m,p,h){return this._getTracer().startSpan(m,p,h)}startActiveSpan(m,p,h,g){const y=this._getTracer();return Reflect.apply(y.startActiveSpan,y,arguments)}_getTracer(){if(this._delegate)return this._delegate;const m=this._provider.getDelegateTracer(this.name,this.version,this.options);return m?(this._delegate=m,this._delegate):c}}a.ProxyTracer=u},846:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ProxyTracerProvider=void 0;const l=i(125),c=i(124),u=new c.NoopTracerProvider;class d{getTracer(p,h,g){var y;return(y=this.getDelegateTracer(p,h,g))!==null&&y!==void 0?y:new l.ProxyTracer(this,p,h,g)}getDelegate(){var p;return(p=this._delegate)!==null&&p!==void 0?p:u}setDelegate(p){this._delegate=p}getDelegateTracer(p,h,g){var y;return(y=this._delegate)===null||y===void 0?void 0:y.getTracer(p,h,g)}}a.ProxyTracerProvider=d},996:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SamplingDecision=void 0,function(i){i[i.NOT_RECORD=0]="NOT_RECORD",i[i.RECORD=1]="RECORD",i[i.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(a.SamplingDecision||(a.SamplingDecision={}))},607:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getSpanContext=a.setSpanContext=a.deleteSpan=a.setSpan=a.getActiveSpan=a.getSpan=void 0;const l=i(780),c=i(403),u=i(491),d=(0,l.createContextKey)("OpenTelemetry Context Key SPAN");function m(x){return x.getValue(d)||void 0}a.getSpan=m;function p(){return m(u.ContextAPI.getInstance().active())}a.getActiveSpan=p;function h(x,b){return x.setValue(d,b)}a.setSpan=h;function g(x){return x.deleteValue(d)}a.deleteSpan=g;function y(x,b){return h(x,new c.NonRecordingSpan(b))}a.setSpanContext=y;function v(x){var b;return(b=m(x))===null||b===void 0?void 0:b.spanContext()}a.getSpanContext=v},325:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TraceStateImpl=void 0;const l=i(564),c=32,u=512,d=",",m="=";class p{constructor(g){this._internalState=new Map,g&&this._parse(g)}set(g,y){const v=this._clone();return v._internalState.has(g)&&v._internalState.delete(g),v._internalState.set(g,y),v}unset(g){const y=this._clone();return y._internalState.delete(g),y}get(g){return this._internalState.get(g)}serialize(){return this._keys().reduce((g,y)=>(g.push(y+m+this.get(y)),g),[]).join(d)}_parse(g){g.length>u||(this._internalState=g.split(d).reverse().reduce((y,v)=>{const x=v.trim(),b=x.indexOf(m);if(b!==-1){const _=x.slice(0,b),w=x.slice(b+1,v.length);(0,l.validateKey)(_)&&(0,l.validateValue)(w)&&y.set(_,w)}return y},new Map),this._internalState.size>c&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,c))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const g=new p;return g._internalState=new Map(this._internalState),g}}a.TraceStateImpl=p},564:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.validateValue=a.validateKey=void 0;const i="[_0-9a-z-*/]",l=`[a-z]${i}{0,255}`,c=`[a-z0-9]${i}{0,240}@[a-z]${i}{0,13}`,u=new RegExp(`^(?:${l}|${c})$`),d=/^[ -~]{0,255}[!-~]$/,m=/,|=/;function p(g){return u.test(g)}a.validateKey=p;function h(g){return d.test(g)&&!m.test(g)}a.validateValue=h},98:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createTraceState=void 0;const l=i(325);function c(u){return new l.TraceStateImpl(u)}a.createTraceState=c},476:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.INVALID_SPAN_CONTEXT=a.INVALID_TRACEID=a.INVALID_SPANID=void 0;const l=i(475);a.INVALID_SPANID="0000000000000000",a.INVALID_TRACEID="00000000000000000000000000000000",a.INVALID_SPAN_CONTEXT={traceId:a.INVALID_TRACEID,spanId:a.INVALID_SPANID,traceFlags:l.TraceFlags.NONE}},357:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SpanKind=void 0,function(i){i[i.INTERNAL=0]="INTERNAL",i[i.SERVER=1]="SERVER",i[i.CLIENT=2]="CLIENT",i[i.PRODUCER=3]="PRODUCER",i[i.CONSUMER=4]="CONSUMER"}(a.SpanKind||(a.SpanKind={}))},139:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.wrapSpanContext=a.isSpanContextValid=a.isValidSpanId=a.isValidTraceId=void 0;const l=i(476),c=i(403),u=/^([0-9a-f]{32})$/i,d=/^[0-9a-f]{16}$/i;function m(y){return u.test(y)&&y!==l.INVALID_TRACEID}a.isValidTraceId=m;function p(y){return d.test(y)&&y!==l.INVALID_SPANID}a.isValidSpanId=p;function h(y){return m(y.traceId)&&p(y.spanId)}a.isSpanContextValid=h;function g(y){return new c.NonRecordingSpan(y)}a.wrapSpanContext=g},847:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SpanStatusCode=void 0,function(i){i[i.UNSET=0]="UNSET",i[i.OK=1]="OK",i[i.ERROR=2]="ERROR"}(a.SpanStatusCode||(a.SpanStatusCode={}))},475:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TraceFlags=void 0,function(i){i[i.NONE=0]="NONE",i[i.SAMPLED=1]="SAMPLED"}(a.TraceFlags||(a.TraceFlags={}))},521:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.VERSION=void 0,a.VERSION="1.6.0"}},t={};function n(s){var a=t[s];if(a!==void 0)return a.exports;var i=t[s]={exports:{}},l=!0;try{e[s].call(i.exports,i,i.exports,n),l=!1}finally{l&&delete t[s]}return i.exports}typeof n<"u"&&(n.ab=__dirname+"/");var r={};(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.trace=s.propagation=s.metrics=s.diag=s.context=s.INVALID_SPAN_CONTEXT=s.INVALID_TRACEID=s.INVALID_SPANID=s.isValidSpanId=s.isValidTraceId=s.isSpanContextValid=s.createTraceState=s.TraceFlags=s.SpanStatusCode=s.SpanKind=s.SamplingDecision=s.ProxyTracerProvider=s.ProxyTracer=s.defaultTextMapSetter=s.defaultTextMapGetter=s.ValueType=s.createNoopMeter=s.DiagLogLevel=s.DiagConsoleLogger=s.ROOT_CONTEXT=s.createContextKey=s.baggageEntryMetadataFromString=void 0;var a=n(369);Object.defineProperty(s,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return a.baggageEntryMetadataFromString}});var i=n(780);Object.defineProperty(s,"createContextKey",{enumerable:!0,get:function(){return i.createContextKey}}),Object.defineProperty(s,"ROOT_CONTEXT",{enumerable:!0,get:function(){return i.ROOT_CONTEXT}});var l=n(972);Object.defineProperty(s,"DiagConsoleLogger",{enumerable:!0,get:function(){return l.DiagConsoleLogger}});var c=n(957);Object.defineProperty(s,"DiagLogLevel",{enumerable:!0,get:function(){return c.DiagLogLevel}});var u=n(102);Object.defineProperty(s,"createNoopMeter",{enumerable:!0,get:function(){return u.createNoopMeter}});var d=n(901);Object.defineProperty(s,"ValueType",{enumerable:!0,get:function(){return d.ValueType}});var m=n(194);Object.defineProperty(s,"defaultTextMapGetter",{enumerable:!0,get:function(){return m.defaultTextMapGetter}}),Object.defineProperty(s,"defaultTextMapSetter",{enumerable:!0,get:function(){return m.defaultTextMapSetter}});var p=n(125);Object.defineProperty(s,"ProxyTracer",{enumerable:!0,get:function(){return p.ProxyTracer}});var h=n(846);Object.defineProperty(s,"ProxyTracerProvider",{enumerable:!0,get:function(){return h.ProxyTracerProvider}});var g=n(996);Object.defineProperty(s,"SamplingDecision",{enumerable:!0,get:function(){return g.SamplingDecision}});var y=n(357);Object.defineProperty(s,"SpanKind",{enumerable:!0,get:function(){return y.SpanKind}});var v=n(847);Object.defineProperty(s,"SpanStatusCode",{enumerable:!0,get:function(){return v.SpanStatusCode}});var x=n(475);Object.defineProperty(s,"TraceFlags",{enumerable:!0,get:function(){return x.TraceFlags}});var b=n(98);Object.defineProperty(s,"createTraceState",{enumerable:!0,get:function(){return b.createTraceState}});var _=n(139);Object.defineProperty(s,"isSpanContextValid",{enumerable:!0,get:function(){return _.isSpanContextValid}}),Object.defineProperty(s,"isValidTraceId",{enumerable:!0,get:function(){return _.isValidTraceId}}),Object.defineProperty(s,"isValidSpanId",{enumerable:!0,get:function(){return _.isValidSpanId}});var w=n(476);Object.defineProperty(s,"INVALID_SPANID",{enumerable:!0,get:function(){return w.INVALID_SPANID}}),Object.defineProperty(s,"INVALID_TRACEID",{enumerable:!0,get:function(){return w.INVALID_TRACEID}}),Object.defineProperty(s,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return w.INVALID_SPAN_CONTEXT}});const C=n(67);Object.defineProperty(s,"context",{enumerable:!0,get:function(){return C.context}});const S=n(506);Object.defineProperty(s,"diag",{enumerable:!0,get:function(){return S.diag}});const E=n(886);Object.defineProperty(s,"metrics",{enumerable:!0,get:function(){return E.metrics}});const M=n(939);Object.defineProperty(s,"propagation",{enumerable:!0,get:function(){return M.propagation}});const k=n(845);Object.defineProperty(s,"trace",{enumerable:!0,get:function(){return k.trace}}),s.default={context:C.context,diag:S.diag,metrics:E.metrics,propagation:M.propagation,trace:k.trace}})(),OI.exports=r})()),OI.exports}var Woe;function FKt(){return Woe||(Woe=1,function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0});function n(S,E){for(var M in E)Object.defineProperty(S,M,{enumerable:!0,get:E[M]})}n(e,{BubbledError:function(){return p},SpanKind:function(){return d},SpanStatusCode:function(){return u},getTracer:function(){return C},isBubbledError:function(){return h}});const r=UIe(),s=vqt();let a;if(t.NEXT_RUNTIME==="edge")a=Voe;else try{a=Voe}catch{a=DKt()}const{context:i,propagation:l,trace:c,SpanStatusCode:u,SpanKind:d,ROOT_CONTEXT:m}=a;class p extends Error{constructor(E,M){super(),this.bubble=E,this.result=M}}function h(S){return typeof S!="object"||S===null?!1:S instanceof p}const g=(S,E)=>{h(E)&&E.bubble?S.setAttribute("next.bubble",!0):(E&&S.recordException(E),S.setStatus({code:u.ERROR,message:E?.message})),S.end()},y=new Map,v=a.createContextKey("next.rootSpanId");let x=0;const b=()=>x++,_={set(S,E,M){S.push({key:E,value:M})}};class w{getTracerInstance(){return c.getTracer("next.js","0.0.1")}getContext(){return i}getTracePropagationData(){const E=i.active(),M=[];return l.inject(E,M,_),M}getActiveScopeSpan(){return c.getSpan(i?.active())}withPropagatedContext(E,M,k){const A=i.active();if(c.getSpanContext(A))return M();const R=l.extract(A,E,k);return i.with(R,M)}trace(...E){var M;const[k,A,R]=E,{fn:O,options:L}=typeof A=="function"?{fn:A,options:{}}:{fn:R,options:{...A}},P=L.spanName??k;if(!r.NextVanillaSpanAllowlist.includes(k)&&t.NEXT_OTEL_VERBOSE!=="1"||L.hideSpan)return O();let N=this.getSpanContext(L?.parentSpan??this.getActiveScopeSpan()),T=!1;N?(M=c.getSpanContext(N))!=null&&M.isRemote&&(T=!0):(N=i?.active()??m,T=!0);const j=b();return L.attributes={"next.span_name":P,"next.span_type":k,...L.attributes},i.with(N.setValue(v,j),()=>this.getTracerInstance().startActiveSpan(P,L,F=>{const U="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0,V=()=>{y.delete(j),U&&t.NEXT_OTEL_PERFORMANCE_PREFIX&&r.LogSpanAllowList.includes(k||"")&&performance.measure(`${t.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(k.split(".").pop()||"").replace(/[A-Z]/g,$=>"-"+$.toLowerCase())}`,{start:U,end:performance.now()})};T&&y.set(j,new Map(Object.entries(L.attributes??{})));try{if(O.length>1)return O(F,z=>g(F,z));const $=O(F);return(0,s.isThenable)($)?$.then(z=>(F.end(),z)).catch(z=>{throw g(F,z),z}).finally(V):(F.end(),V(),$)}catch($){throw g(F,$),V(),$}}))}wrap(...E){const M=this,[k,A,R]=E.length===3?E:[E[0],{},E[1]];return!r.NextVanillaSpanAllowlist.includes(k)&&t.NEXT_OTEL_VERBOSE!=="1"?R:function(){let O=A;typeof O=="function"&&typeof R=="function"&&(O=O.apply(this,arguments));const L=arguments.length-1,P=arguments[L];if(typeof P=="function"){const N=M.getContext().bind(i.active(),P);return M.trace(k,O,(T,j)=>(arguments[L]=function(F){return j?.(F),N.apply(this,arguments)},R.apply(this,arguments)))}else return M.trace(k,O,()=>R.apply(this,arguments))}}startSpan(...E){const[M,k]=E,A=this.getSpanContext(k?.parentSpan??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(M,k,A)}getSpanContext(E){return E?c.setSpan(i.active(),E):void 0}getRootSpanAttributes(){const E=i.active().getValue(v);return y.get(E)}setRootSpanAttribute(E,M){const k=i.active().getValue(v),A=y.get(k);A&&A.set(E,M)}}const C=(()=>{const S=new w;return()=>S})()}(MI)),MI}var LI={exports:{}},Hoe;function UKt(){return Hoe||(Hoe=1,(()=>{typeof __nccwpck_require__<"u"&&(__nccwpck_require__.ab=__dirname+"/");var e={};(()=>{var t=e;/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=i,t.serialize=l;var n=decodeURIComponent,r=encodeURIComponent,s=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function i(u,d){if(typeof u!="string")throw new TypeError("argument str must be a string");for(var m={},p=d||{},h=u.split(s),g=p.decode||n,y=0;y<h.length;y++){var v=h[y],x=v.indexOf("=");if(!(x<0)){var b=v.substr(0,x).trim(),_=v.substr(++x,v.length).trim();_[0]=='"'&&(_=_.slice(1,-1)),m[b]==null&&(m[b]=c(_,g))}}return m}function l(u,d,m){var p=m||{},h=p.encode||r;if(typeof h!="function")throw new TypeError("option encode is invalid");if(!a.test(u))throw new TypeError("argument name is invalid");var g=h(d);if(g&&!a.test(g))throw new TypeError("argument val is invalid");var y=u+"="+g;if(p.maxAge!=null){var v=p.maxAge-0;if(isNaN(v)||!isFinite(v))throw new TypeError("option maxAge is invalid");y+="; Max-Age="+Math.floor(v)}if(p.domain){if(!a.test(p.domain))throw new TypeError("option domain is invalid");y+="; Domain="+p.domain}if(p.path){if(!a.test(p.path))throw new TypeError("option path is invalid");y+="; Path="+p.path}if(p.expires){if(typeof p.expires.toUTCString!="function")throw new TypeError("option expires is invalid");y+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(y+="; HttpOnly"),p.secure&&(y+="; Secure"),p.sameSite){var x=typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite;switch(x){case!0:y+="; SameSite=Strict";break;case"lax":y+="; SameSite=Lax";break;case"strict":y+="; SameSite=Strict";break;case"none":y+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return y}function c(u,d){try{return d(u)}catch{return u}}})(),LI.exports=e})()),LI.exports}var zoe;function BKt(){return zoe||(zoe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(_,w){for(var C in w)Object.defineProperty(_,C,{enumerable:!0,get:w[C]})}t(e,{ApiError:function(){return v},COOKIE_NAME_PRERENDER_BYPASS:function(){return d},COOKIE_NAME_PRERENDER_DATA:function(){return m},RESPONSE_LIMIT_DEFAULT:function(){return p},SYMBOL_CLEARED_COOKIES:function(){return g},SYMBOL_PREVIEW_DATA:function(){return h},checkIsOnDemandRevalidate:function(){return u},clearPreviewData:function(){return y},redirect:function(){return c},sendError:function(){return x},sendStatusCode:function(){return l},setLazyProp:function(){return b},wrapApiHandler:function(){return i}});const n=gqt(),r=yqt(),s=FKt(),a=UIe();function i(_,w){return(...C)=>((0,s.getTracer)().setRootSpanAttribute("next.route",_),(0,s.getTracer)().trace(a.NodeSpan.runHandler,{spanName:`executing api route (pages) ${_}`},()=>w(...C)))}function l(_,w){return _.statusCode=w,_}function c(_,w,C){if(typeof w=="string"&&(C=w,w=307),typeof w!="number"||typeof C!="string")throw Object.defineProperty(new Error("Invalid redirect arguments. Please use a single argument URL, e.g. res.redirect('/destination') or use a status code and URL, e.g. res.redirect(307, '/destination')."),"__NEXT_ERROR_CODE",{value:"E389",enumerable:!1,configurable:!0});return _.writeHead(w,{Location:C}),_.write(C),_.end(),_}function u(_,w){const C=n.HeadersAdapter.from(_.headers),E=C.get(r.PRERENDER_REVALIDATE_HEADER)===w.previewModeId,M=C.has(r.PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER);return{isOnDemandRevalidate:E,revalidateOnlyGenerated:M}}const d="__prerender_bypass",m="__next_preview_data",p=4*1024*1024,h=Symbol(m),g=Symbol(d);function y(_,w={}){if(g in _)return _;const{serialize:C}=UKt(),S=_.getHeader("Set-Cookie");return _.setHeader("Set-Cookie",[...typeof S=="string"?[S]:Array.isArray(S)?S:[],C(d,"",{expires:new Date(0),httpOnly:!0,sameSite:"none",secure:!0,path:"/",...w.path!==void 0?{path:w.path}:void 0}),C(m,"",{expires:new Date(0),httpOnly:!0,sameSite:"none",secure:!0,path:"/",...w.path!==void 0?{path:w.path}:void 0})]),Object.defineProperty(_,g,{value:!0,enumerable:!1}),_}class v extends Error{constructor(w,C){super(C),this.statusCode=w}}function x(_,w,C){_.statusCode=w,_.statusMessage=C,_.end(C)}function b({req:_},w,C){const S={configurable:!0,enumerable:!0},E={...S,writable:!0};Object.defineProperty(_,w,{...S,get:()=>{const M=C();return Object.defineProperty(_,w,{...E,value:M}),M},set:M=>{Object.defineProperty(_,w,{...E,value:M})}})}}(wI)),wI}var VKt=BKt();function $Kt(e,t,n){if(!e)return null;const r=e.split(t);return r.length<=n?r:[r.slice(0,-1).join(t),...r.slice(-1)]}function Yg(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}const WKt=async({hotelSlug:e,headers:t={},reason:n})=>{const{error:r,data:s}=await se.GET("/rest/travel/hotels/{slug}",n,{params:{path:{slug:e}},headers:t,timeoutMs:Ut.HIGH});if(r)throw new Ce("API_CLIENTS_ERROR",{cause:r});return s},Wsn=async({filters:e,reason:t})=>{const n=await se.POST("/rest/travel/hotels/search-widgets",t,{body:e,timeoutMs:Ut.NONE});if(n.data)return{hotels:n.data.hotels,map_item:n.data.map_item};throw new Error("No hotel results returned",{cause:n.error})},Hsn=async({hotelTripadvisorId:e,searchPayload:t,reason:n})=>{const{checkIn:r,checkOut:s,numAdults:a,numChildren:i}=t,l=await se.POST("/rest/travel/hotels/search-availability",n,{body:{currency:"USD",filter:{tripadvisor_ids:[e]},stay_info:{check_in_date:Yg(r),check_out_date:Yg(s),guests:{adults:a,children:i}}},timeoutMs:Ut.HIGH,retries:2});return l.data?{availability:l.data.results?.find(c=>c.tripadvisor_id===e),currencyExchangeRates:l.data.currency_exchange_rates,otaOffers:l.data.ota_hotel_offers?.find(c=>c.tripadvisor_id===e),perplexityProRateInfo:l.data.perplexity_pro_rate_info}:null},zsn=async({tripadvisorIds:e,searchPayload:t,reason:n})=>{const{checkIn:r,checkOut:s,numAdults:a,numChildren:i}=t,l=await se.POST("/rest/travel/hotels/search-availability",n,{body:{currency:"USD",filter:{tripadvisor_ids:e},stay_info:{check_in_date:Yg(r),check_out_date:Yg(s),guests:{adults:a,children:i}}},timeoutMs:Ut.HIGH,retries:2});return l.data?{availability:l.data.results,currencyExchangeRates:l.data.currency_exchange_rates,otaOffers:l.data.ota_hotel_offers}:null},Gsn=async({searchPayload:e,rate:t,paymentInfo:n,discountId:r,isProRate:s,reason:a})=>{const{checkIn:i,checkOut:l,numAdults:c,numChildren:u}=e,d=$Kt(n.name," ",1),m=await se.POST("/rest/travel/hotels/reservations",a,{timeoutMs:Ut.NONE,body:{hotel_booking:{check_in_date:Yg(i),check_out_date:Yg(l),guests:{number_of_adults:c,number_of_children:u||null,primary:{address:{street:[n.address.line1,n.address.line2].filter(p=>!!p).join(" "),city:n.address.city,state:n.address.state,country_code:n.address.country,postal_code:n.address.postal_code},email:n.email,given_name:d?.[0]??"",surname:d?.[1]??"",telephone_number:n.phone}},payment:{stripe_payment_method_id:n.stripePaymentMethodId,stripe_customer_id:n.stripeCustomerId},selfbook_rate:{...t,is_pro_rate:s},customer_loyalty_code:n.customerLoyaltyCode},discount_id:r}});if(m.data)return m.data.hotel_booking;throw new VKt.ApiError(m.response.status,"Booking hotel room failed")},qsn=async({limit:e,offset:t,isCanceled:n,beforeDate:r,afterDate:s,dateOrder:a="desc",headers:i,reason:l})=>{const c=await se.GET("/rest/travel/hotels/user/reservations",l,{params:{query:{limit:e,offset:t,is_canceled:n,before_date:r,after_date:s,date_order_by:a}},headers:i,timeoutMs:Ut.MEDIUM});return c.data?c.data:null},Ksn=async({bookingId:e,reason:t})=>{const n=await se.DELETE("/rest/travel/hotels/reservations/{reservation_id}",t,{params:{path:{reservation_id:e}},timeoutMs:Ut.HIGH});if(!n.data)throw Error("Failed to cancel booking",{cause:n.error})},Ysn=async({amount:e,currency:t,paymentMethodId:n,reason:r})=>{const s=await se.GET("/rest/travel/hotels/user/discount-offer",r,{params:{query:{base_amount_micros:e,currency_code:t,payment_method_id:n}},timeoutMs:Ut.HIGH});return s.data?s.data:null},Qsn=async({reason:e})=>{const t=await se.GET("/rest/stripe/get-customer-billing-info",e);return t.data?t.data:null},HKt=({slug:e,reason:t,enabled:n=!!e})=>We({enabled:n,queryKey:["hotels",e],queryFn:()=>WKt({hotelSlug:e,reason:t})}),zKt=e=>{const t=/\[([^\]]+)\]\(pplx:\/\/action\/[^)]+\)/g;return e.replace(t,"$1")};var IM={};const Sx="Perplexity",GKt="",nRe=80,rRe=160,b7="Perplexity is a free AI-powered answer engine that provides accurate, trusted, and real-time answers to any question.";function qKt(e){if(!e)return null;try{return new Date(e).toISOString().slice(0,10)}catch{return null}}const _7=({firstEntity:e,query:t,slug:n,userAgent:r})=>{if(r?qb(r):!1)return yr({title:Sx,index:!1,userAgent:r});if(!e)return DI({result:"no_result",slug:n,userAgent:r}),yr({index:!1,title:t?cu(t).actualQuery||t:void 0,userAgent:r});const a=un.parseAskTextField(e);if(!a)return DI({result:"bad_parse",slug:n,userAgent:r}),yr({index:!1,userAgent:r});const i=KKt(e);DI({result:"url_served",slug:n,userAgent:r,imageURL:i});let l=Sx,c;if(kye(e)&&e.article_info?.title?(l=e.article_info.title,e?.article_info?.read_time,c=e?.author_username):e.thread_title&&e.thread_title!==GKt?l=e.thread_title:e.query_str&&(l=e.query_str),l){const{actualQuery:p}=cu(l);l=p||l,l=fg(l,nRe)}const u=a.answer?fg(a.answer,rRe):b7,d=e?.thread_url_slug?e?.mode?.toLowerCase()=="article"?`https://www.perplexity.ai/page/${e.thread_url_slug}`:`https://www.perplexity.ai/search/${e.thread_url_slug}`:void 0,m=zKt(u);return yr({imageURL:i,title:l,description:m,author:c,datePublished:e?.updated_datetime,canonicalURL:d,index:e?.should_index??!1,userAgent:r})},DI=({result:e,slug:t,userAgent:n,imageURL:r})=>{const s="[trackThreadOGImageServing]";try{t!=="new"&&z5(`${s} [${t}] [${n}] ${e}: ${r}`)}catch(a){ape("[trackThreadOGImageServing] error:",{result:e,slug:t,userAgent:n,imageURL:r,err:a})}},KKt=e=>{let t=Ch;const n=`[getThreadOGImageURL] [${e?.thread_url_slug}]`;if(e.s3_social_preview_url&&e.s3_social_preview_url!==Ch)return e.s3_social_preview_url;try{t=Ch;const r=un.isArticleMode(e);return e.thread_url_slug?r?`${IM.NEXTAUTH_URL}/api/og/page/${e.thread_url_slug}`:`${IM.NEXTAUTH_URL}/api/og/thread/${e.thread_url_slug}`:t}catch(r){z5(`${n} error getting thread og image url: `,r)}return t},YKt=e=>{let t=Ch;const n=`[getSpaceOGImageURL] [${e?.slug}]`;try{return t=e?.s3_social_preview_url??Ch,e?.slug?`${IM.NEXTAUTH_URL}/api/og/space/${e?.slug}`:t}catch(r){z5(`${n} error getting space og image url: `,r)}return t},yr=({title:e=Sx,description:t=b7,imageURL:n=Ch,canonicalURL:r,author:s,datePublished:a,index:i,userAgent:l})=>{try{let c=!1;typeof window>"u"&&(c=l?qb(l):!1),c&&(e=Sx);const u=qKt(a);return r=r??"./",{metadataBase:new URL("https://www.perplexity.ai"),title:e,description:t,author:s??void 0,alternates:{canonical:r},openGraph:{url:r,images:[n],locale:"en_US",type:"website",siteName:"Perplexity AI"},twitter:{card:t?"summary_large_image":"summary",images:[n],site:"@perplexity_ai",creator:s?`@${s}`:void 0},other:{datePublished:u??""},robots:{index:i}}}catch(c){return ape("[generatePageMetadata] Error generating metadata:",c),{title:Sx,description:b7,metadataBase:new URL("https://www.perplexity.ai"),robots:{index:!1}}}};function QKt({collection:e,slug:t,userAgent:n}){return!t||!e||e?.status==="failed"?yr({index:!1,userAgent:n}):yr({index:!1,title:e?.title??"Perplexity AI",description:"A Space on Perplexity AI by "+e?.owner_user?.username+"  "+e?.description,imageURL:YKt(e),canonicalURL:`https://www.perplexity.ai/spaces/${t}`,author:e?.owner_user?.username,datePublished:e?.updated_datetime,userAgent:n})}function Goe({articleSection:e,slug:t,userAgent:n}){return _7(!t||!e?{slug:t,userAgent:n}:{firstEntity:e,slug:t,userAgent:n})}function XKt({userAgent:e}){return yr({imageURL:"https://r2cdn.perplexity.ai/pplx-academic-og.png",title:"Perplexity Academic",description:"The free, AI-powered academic search engine for scholars, students, and educators. Get instant answers from research papers, peer-reviewed journal articles, theses, conference papers, technical reports, and more.",index:!0,userAgent:e})}function ZKt({userAgent:e}){return yr({title:"Perplexity Shopping",index:!0,imageURL:"https://r2cdn.perplexity.ai/pplx-shopping-og.png",description:"Discover trending products, best deals, and trusted reviews with Perplexity Shopping  your smart companion for finding what to buy.",userAgent:e})}function JKt({hotelData:e,userAgent:t}){return yr(e?{title:`${e?.hotel.name} - Perplexity Travel`,imageURL:e?.hotel?.photos[0]?.image_url,description:e?.hotel.description??void 0,index:!0,userAgent:t}:{index:!1,userAgent:t})}function eYt({userAgent:e}){return yr({title:"Perplexify Me",index:!0,imageURL:"https://r2cdn.perplexity.ai/poster-lab-og-image.png",description:"Generate a personalized Perplexity poster.",userAgent:e})}function tYt({userAgent:e}){return yr({title:"Perplexity Discover",index:!0,imageURL:"https://r2cdn.perplexity.ai/pplx-discover-og.png",description:"Stay informed on the biggest stories happening around the world across tech, finance, sports, entertainment and more with Perplexity Discover.",userAgent:e})}function nYt({userAgent:e}){return yr({title:"Perplexity Travel",index:!0,imageURL:"https://r2cdn.perplexity.ai/pplx-travel-og.png",description:"Explore top destinations, hidden gems, and travel tips all in one place with Perplexity Travel  your go-to for smarter, faster trip planning.",userAgent:e})}function rYt({$t:e}){return{title:e({defaultMessage:"Formula 1  Perplexity Sports",id:"Ktk9GJrnKB"})}}function sYt({eventData:e,$t:t}){const n=e?.event?.title[0],r=e?.event?.subtitle;return n?{title:t({defaultMessage:"{description}  {competition} | Perplexity Sports",id:"WH2sXJYfqC"},{description:n,competition:r})}:{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}function aYt({$t:e}){return{title:e({defaultMessage:"NBA  Perplexity Sports",id:"OygSHzfDGc"})}}function oYt({$t:e}){return{title:e({defaultMessage:"Perplexity Finance",id:"DhdcmgxwQc"}),description:e({defaultMessage:"Get the latest stock price, historical data, earnings reports, stock split stock split history, analyst ratings, and forecasts from Perplexity Finance.",id:"NcFbXdi/CA"}),imageURL:"https://r2cdn.perplexity.ai/finance/images/og-finance-generic.jpg"}}function iYt({eventData:e,$t:t}){const n=e?.event?.teams;if(n?.length!==2)return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})};const r=n.map(s=>s.nickname);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:r[0],team2:r[1]})}}function lYt({teamData:e,$t:t}){return e?{title:t({defaultMessage:"{location} {nickname} | NBA | Perplexity Sports",id:"AIPY9QcrzT"},{location:e.team.location,nickname:e.team.nickname})}:{title:t({defaultMessage:"NBA | Perplexity Sports",id:"C6OMW0nwOa"})}}function cYt({playerData:e,$t:t}){return e?{title:t({defaultMessage:"{firstName} {lastName} | NBA | Perplexity Sports",id:"cMhXouxymy"},{firstName:e.player.firstName,lastName:e.player.lastName})}:{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}function uYt({$t:e}){return{title:e({defaultMessage:"NFL  Perplexity Sports",id:"El6nRJUzwb"})}}function dYt({eventData:e,$t:t}){const n=e?.event?.teams;if(n?.length!==2)return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})};const r=n.map(s=>s.nickname);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:r[0],team2:r[1]})}}function fYt({teamData:e,$t:t}){return e?{title:t({defaultMessage:"{location} {nickname} | NFL | Perplexity Sports",id:"Hk4RXLiB59"},{location:e.team.location,nickname:e.team.nickname})}:{title:t({defaultMessage:"NFL | Perplexity Sports",id:"7QAbUNnW6e"})}}function mYt({playerData:e,$t:t}){return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}function pYt({$t:e}){return{title:e({defaultMessage:"MLB  Perplexity Sports",id:"CU0tFjpqFn"})}}function hYt({eventData:e,$t:t}){const n=t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"});if(!e?.event)return{title:n};const r=e.event.team_1?.title||"",s=e.event.team_2?.title||"";return{title:`${r} vs ${s}  MLB | Perplexity Sports`}}function qoe({$t:e,league:t}){const n=e(t==="atp"?{defaultMessage:"ATP",id:"S/1bpj9bkw"}:{defaultMessage:"WTA",id:"iz2JNgjC/c"});return{title:e({defaultMessage:"{league}  Perplexity Sports",id:"SlzezQtEQb"},{league:n})}}function Koe({eventData:e,league:t,$t:n}){const r=n({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"});if(!e?.event)return{title:r};const s=e.event.team_1.title,a=e.event.team_2.title,i=n(t==="atp"?{defaultMessage:"ATP",id:"S/1bpj9bkw"}:{defaultMessage:"WTA",id:"iz2JNgjC/c"});return{title:n({defaultMessage:"{team1} vs {team2}  {league} | Perplexity Sports",id:"d7RYhrB+bM"},{team1:s,team2:a,league:i})}}function Yoe({tournamentData:e,league:t,$t:n}){const r=n({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),s=e?.tournamentInfo?.season?.name;if(!s)return{title:r};const a=n(t==="atp"?{defaultMessage:"ATP",id:"S/1bpj9bkw"}:{defaultMessage:"WTA",id:"iz2JNgjC/c"});return{title:n({defaultMessage:"{title}  {league} | Perplexity Sports",id:"+pm49/sORt"},{title:s,league:a})}}function gYt({eventData:e,$t:t}){const n=t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),r=e?.matchStats?.matchInfo?.description,s=e?.matchStats?.matchInfo?.competition?.name;return r?{title:`${r}  ${s}`}:{title:n}}function Qoe({league:e,$t:t}){return{title:t({defaultMessage:"{title}  Perplexity Sports",id:"wrVvZZ22yC"},{title:e==="ncaam"?"NCAA Men's Basketball":"NCAA Women's Basketball"})}}function Xoe({eventData:e,$t:t}){const n=t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),r=e?.event?.teams;if(r?.length!==2)return{title:n};const s=r.map(a=>a.location);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:s[0],team2:s[1]})}}function yYt({$t:e}){return{title:e({defaultMessage:"IPL  Perplexity Sports",id:"YUrNinGa6l"})}}function vYt({$t:e}){return{title:e({defaultMessage:"ICC Cricket  Perplexity Sports",id:"t+zWRM/EBt"})}}function xYt({$t:e}){return{title:e({defaultMessage:"{league}  Perplexity Sports",id:"SlzezQtEQb"},{league:"PGA"})}}function bYt({eventData:e}){return{title:`${e?.event?.name||"Event"}  Perplexity Sports`}}function _Yt({$t:e}){return{title:e({defaultMessage:"{league}  Perplexity Sports",id:"SlzezQtEQb"},{league:"DP World Tour"})}}function wYt({eventData:e}){return{title:"Event  Perplexity Sports"}}function CYt({$t:e}){return{title:e({defaultMessage:"WNBA  Perplexity Sports",id:"xp6AiOFIGz"})}}function SYt({eventData:e,$t:t}){const n=e?.event?.teams;if(n?.length!==2)return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})};const r=n.map(s=>s.nickname);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:r[0],team2:r[1]})}}function EYt({$t:e}){return{title:e({defaultMessage:"Champions League  Perplexity Sports",id:"5k4cIVBqE4"})}}function MYt({eventData:e,$t:t}){const n=e?.event?.title[0],r=e?.event?.title[0];return n?{title:t({defaultMessage:"{description}  {competition} | Perplexity Sports",id:"WH2sXJYfqC"},{description:n,competition:r})}:{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}const kYt=({$t:e,userAgent:t})=>yr({title:e({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),index:!0,description:"Stay updated with the latest sports news, scores, and highlights from your favorite leagues and teams.",userAgent:t}),TYt="https://r2cdn.perplexity.ai/finance/images/og-finance-generic.jpg",NYt=e=>({title:`${e.name} Stock Price: Quote, Forecast, Splits & News (${e.symbol})`,description:`Get the latest ${e.name} stock price (${e.symbol}), historical data, earnings reports, stock split stock split history, analyst ratings, and forecasts from Perplexity Finance.`}),jYt=e=>({title:`${e.name} Price: Quote, Market Cap, Forecast & News (${e.symbol})`,description:`Get the latest ${e.name} price ${e.symbol}, real-time quotes, market cap, historical data, charts, price predictions, and news from Perplexity Finance.`}),AYt=e=>({title:`${e.name} Exchange Rate: Live Price, Chart, Forecast & News`,description:`Get the latest ${e.name} exchange rate, live price, interactive chart, historical data, and expert forecast from Perplexity Finance.`}),IYt=e=>({title:`${e.name} Price: Live Chart, Forecast & News (${e.symbol})`,description:`Get the latest ${e.name} price (${e.symbol}), live charts, market trends, expert forecasts, and breaking news from Perplexity Finance.`}),RYt=e=>({title:`${e.name} Price: Quote, Forecast, Charts & News (${e.symbol})`,description:`Get the latest ${e.name} price ${e.symbol}, historical data, charts, analyst ratings, and forecasts from Perplexity Finance.`}),PYt=e=>e.exchange==="NASDAQ"||e.exchange==="NYSE"||e.exchange==="AMEX"?NYt(e):e.exchange==="CRYPTO"?jYt(e):e.exchange==="FOREX"?AYt(e):e.exchange==="COMMODITY"?IYt(e):RYt(e);function OYt({pathname:e,tickerSearchData:t,userAgent:n,$t:r}){const{symbol:s,tab:a}=FIe(e);if(!s&&!a)return oYt({$t:r});if(!s)return yr({index:!1,userAgent:n});const i={title:`${s} Price: Quote, Forecast, Charts & News`,description:`Get the latest ${s} price, historical data, charts, analyst ratings, and forecasts from Perplexity Finance.`,imageURL:TYt,index:!0},l=t?PYt(t):{};return yr({...i,...l,userAgent:n})}function LYt({shortcut:e}){return yr(e?{index:!1,title:fg(`/${e.task_name}`,nRe),description:fg(e.prompt,rRe),imageURL:`${IM.NEXTAUTH_URL}/api/og/shortcut/${e.task_name}`}:{index:!1,title:"Perplexity Account"})}const DYt=e=>{const t="home-metadata",{$t:n}=Z(),{device:{userAgent:r}}=At(),s=jt(),a=s?.split("/").pop()??"",i=VRe(e,s??""),{route:l,params:c}=i??{},u=l,{firstResult:d}=Vt(),{collection:m}=cc({collectionSlug:a,reason:t,enabled:u==="/spaces/:slug"}),{article:p}=lge(),{data:h}=HKt({slug:a,reason:t,enabled:u==="/hotels/:slug"}),{symbol:g}=FIe(s),{data:y}=aw({symbol:g}),{data:v}=lqt({eventId:a,league:"f1",reason:t,enabled:u==="/sports/f1/events/:eventId"}),{data:x}=cqt({eventId:a,league:"nba",reason:t,enabled:u==="/sports/nba/events/:eventId"}),{data:b}=uqt({eventId:a,league:"nfl",reason:t,enabled:u==="/sports/nfl/events/:eventId"}),{data:_}=mqt({eventId:a,league:"championsleague",reason:t,enabled:u==="/sports/championsleague/events/:eventId"}),{data:w}=dqt({eventId:a,league:"mlb",reason:t,enabled:u==="/sports/mlb/events/:eventId"}),{data:C}=fqt({eventId:a,league:"cricket",reason:t,enabled:u==="/sports/cricket/events/:eventId"}),{data:S}=oqt({eventId:a,league:"pga",reason:t,enabled:u==="/sports/pga/events/:eventId"}),{data:E}=iqt({eventId:a,league:"wnba",reason:t,enabled:u==="/sports/wnba/events/:eventId"}),{data:M}=Aoe({eventId:a,league:"atp",reason:t,enabled:u==="/sports/atp/events/:eventId"}),{data:k}=Aoe({eventId:a,league:"wta",reason:t,enabled:u==="/sports/wta/events/:eventId"}),{data:A}=joe({eventId:a,league:"ncaam",reason:t,enabled:u==="/sports/ncaam/events/:eventId"}),{data:R}=joe({eventId:a,league:"ncaaw",reason:t,enabled:u==="/sports/ncaaw/events/:eventId"}),{data:O}=rqt({teamId:a,reason:t,enabled:u==="/sports/nba/teams/:teamId"}),{data:L}=sqt({teamId:a,reason:t,enabled:u==="/sports/nfl/teams/:teamId"}),{data:P}=aqt({playerId:Number(a),reason:t,enabled:u==="/sports/nba/players/:playerId"}),{data:N}=Noe({seasonId:a,league:"atp",reason:t,enabled:u==="/sports/atp/tournaments/:seasonId"}),{data:T}=Noe({seasonId:a,league:"wta",reason:t,enabled:u==="/sports/wta/tournaments/:seasonId"}),{data:j}=pqt({reason:t});if(!s||!u||!c)return yr({index:!0,userAgent:r});switch(u){case"/spaces/:slug":return QKt({slug:c.slug,userAgent:r,collection:m});case"/page/:slug":return Goe({slug:c.slug,userAgent:r,articleSection:p?.[0]});case"/academic":return XKt({userAgent:r});case"/discover":case"/discover/:topic":return tYt({userAgent:r});case"/shopping":return ZKt({userAgent:r});case"/hotels/:slug":return JKt({slug:c.slug??"",userAgent:r,hotelData:h});case"/perplexify_me":return eYt({userAgent:r});case R3:return OYt({userAgent:r,pathname:s,tickerSearchData:y,$t:n});case"/sports/f1":return rYt({$t:n});case"/sports/f1/events/:eventId":return sYt({eventId:c.eventId??"",eventData:v,$t:n});case"/sports/nba":return aYt({$t:n});case"/sports/nba/events/:eventId":return iYt({eventId:c.eventId??"",eventData:x,$t:n});case"/sports/nba/teams/:teamId":return lYt({teamId:c.teamId??"",teamData:O,$t:n});case"/sports/nba/players/:playerId":return cYt({playerId:c.playerId??"",playerData:P,$t:n});case"/sports/nfl":return uYt({$t:n});case"/sports/nfl/events/:eventId":return dYt({eventId:c.eventId??"",eventData:b,$t:n});case"/sports/nfl/teams/:teamId":return fYt({teamId:c.teamId??"",teamData:L,$t:n});case"/sports/nfl/players/:playerId":return mYt({playerId:c.playerId??"",playerData:void 0,$t:n});case"/sports/championsleague":return EYt({$t:n});case"/sports/championsleague/events/:eventId":return MYt({eventId:c.eventId??"",eventData:_,$t:n});case"/sports/mlb":return pYt({$t:n});case"/sports/mlb/events/:eventId":return hYt({eventId:c.eventId??"",eventData:w,$t:n});case"/sports/ipl":return yYt({$t:n});case"/sports/icc":return vYt({$t:n});case"/sports/cricket/events/:eventId":case"/sports/ipl/events/:eventId":case"/sports/icc/events/:eventId":return gYt({eventId:c.eventId??"",eventData:C,$t:n});case"/sports/pga":return xYt({$t:n});case"/sports/pga/events/:eventId":return bYt({eventId:c.eventId??"",eventData:S});case"/sports/dpworldtour":return _Yt({$t:n});case"/sports/dpworldtour/events/:eventId":return wYt({eventId:c.eventId??"",eventData:null});case"/sports/wnba":return CYt({$t:n});case"/sports/wnba/events/:eventId":return SYt({eventId:c.eventId??"",eventData:E,$t:n});case"/sports/ncaam":return Qoe({league:"ncaam",$t:n});case"/sports/ncaaw":return Qoe({league:"ncaaw",$t:n});case"/sports/ncaam/events/:eventId":return Xoe({eventId:c.eventId??"",eventData:A,$t:n});case"/sports/ncaaw/events/:eventId":return Xoe({eventId:c.eventId??"",eventData:R,$t:n});case"^\\/search(?:\\/(?<new>new))?(?:\\/(?<uuid>.+))?$":return _7({slug:c.uuid,userAgent:r,firstEntity:d});case"/discover/:topic/:slug":return Goe({slug:c.slug,userAgent:r,articleSection:p?.[0]});case"/travel":return nYt({userAgent:r});case"/sports":return kYt({$t:n,userAgent:r});case"/sports/atp":return qoe({league:"atp",$t:n});case"/sports/wta":return qoe({league:"wta",$t:n});case"/sports/atp/events/:eventId":return Koe({eventId:c.eventId??"",league:"atp",eventData:M,$t:n});case"/sports/wta/events/:eventId":return Koe({eventId:c.eventId??"",league:"wta",eventData:k,$t:n});case"/sports/atp/tournaments/:seasonId":return Yoe({seasonId:c.seasonId??"",league:"atp",tournamentData:N,$t:n});case"/sports/wta/tournaments/:seasonId":return Yoe({seasonId:c.seasonId??"",league:"wta",tournamentData:T,$t:n});case"/b/home":return yr({title:"New Tab",index:!0,userAgent:r});case"/account":case"/account/details":case"/account/org/details":case"/account/org/user-access":case"/account/org/permissions":case"/account/org/insights":case"/account/org/files":case"/account/org/connectors":case"/account/org":case"/account/api/group":case"/account/api/members":case"/account/api/billing":case"/account/api/keys":case"/account/api/playground/search":case"/account/api/limits":case"/account/api/files":case"/account/api/files/:repositoryUuid":case"/account/api":case"/account/pro-perks":case"/account/pro-perks/:name":case"/account/tasks/:taskId":case"/account/tasks":case"/account/org/members":case"/account/preferences":case"/account/personalize/memories":case"/account/personalize":case"/account/assistant":case"/account/site-instructions":case"/account/notifications":case"/account/files":case"/account/connectors":return yr({title:"Perplexity Account",index:!0,userAgent:r});case"/account/shortcuts":return LYt({shortcut:j?.shortcut??void 0});case"/account/reservations":return yr({title:"Perplexity Reservations",index:!0,userAgent:r});case"/account/purchases":return yr({title:"Perplexity Purchases",index:!0,userAgent:r});case"/b/assistants":return yr({title:"Background Assistants",index:!0,userAgent:r});case"/":case"/library":case"/b/speak":case"/b/zen":case"/b/try-assistant":case"/spaces":case"/b/mission-control":case"/spaces/templates":case"/windows-app/ask/input":case void 0:return yr({index:!0,userAgent:r});default:Gt(u)}};function FYt(){return fn()?o.jsx(s_,{childrenWidth:"none",mobileHeader:!1,children:o.jsx(Y2e,{})}):o.jsx(Bc,{to:"/"})}const UYt=ye(async()=>{const{CometZenMode:e}=await K(async()=>{const{CometZenMode:t}=await import("./CometZenMode-CcVoyzyg.js");return{CometZenMode:t}},__vite__mapDeps([483,3,1,60,484,5,6,4]));return{default:e,critical:!0}},{loading:()=>o.jsx("div",{className:"flex size-full items-center justify-center opacity-10",children:o.jsx($r,{})})}),BYt=ye(async()=>{const{TryAssistantPage:e}=await K(async()=>{const{TryAssistantPage:t}=await import("./TryAssistantPage-C9vU3qc3.js");return{TryAssistantPage:t}},__vite__mapDeps([485,3,1,4,6,5]));return{default:e,critical:!0}},{loading:()=>o.jsx("div",{className:"flex size-full items-center justify-center opacity-10",children:o.jsx($r,{})})}),VYt=ye(async()=>{const{VoiceToVoiceModal:e}=await K(async()=>{const{VoiceToVoiceModal:t}=await import("./VoiceToVoiceModal-D06NJJGX.js");return{VoiceToVoiceModal:t}},__vite__mapDeps([59,3,1,60,4,6,5]));return{default:e,critical:!0}},{loading:()=>o.jsx(vU,{})}),$Yt=ye(async()=>{const{default:e}=await K(async()=>{const{default:t}=await import("./library-DnsNf7SU.js");return{default:t}},__vite__mapDeps([486,3,1,4,5,6,487,488]));return{default:e,critical:!0}}),WYt=ye(async()=>{const{default:e}=await K(async()=>{const{default:t}=await import("./index-Cvs8qDjp.js");return{default:t}},__vite__mapDeps([489,3,1,4,14,6,5,490]));return{default:e,critical:!0}}),HYt=ye(async()=>{const{default:e}=await K(async()=>{const{default:t}=await import("./templates-B4FqYPKw.js");return{default:t}},__vite__mapDeps([491,3,1,4,5,6]));return{default:e,critical:!0}}),zYt=ye(async()=>{const{default:e}=await K(async()=>{const{default:t}=await import("./slug-CljoOgNj.js");return{default:t}},__vite__mapDeps([492,3,1,4,6,493,5,490]));return{default:e,critical:!0}}),Zoe=ye(async()=>{const{ArticlePageLayout:e}=await K(async()=>{const{ArticlePageLayout:t}=await import("./slug-Dl1ZEOHX.js").then(n=>n.s);return{ArticlePageLayout:t}},__vite__mapDeps([494,3,1,4,6,5,495,118,454,455,14,496,119,120,484,478,456,439,17,18,19,126,488,45,46,458,459,117,453,481]));return{default:e,critical:!0}}),GYt=ye(async()=>{const{AcademicLandingPage:e}=await K(async()=>{const{AcademicLandingPage:t}=await import("./academic-Bjiaqr98.js");return{AcademicLandingPage:t}},__vite__mapDeps([497,3,1,4,498,451,5,6,444,46,499,448,449,25]));return{default:e,critical:!0}}),qYt=ye(async()=>{const{ShoppingLandingPage:e}=await K(async()=>{const{ShoppingLandingPage:t}=await import("./shopping-BsFm1-UV.js");return{ShoppingLandingPage:t}},__vite__mapDeps([500,3,1,4,448,6,5,449,25,445,444,46,469,499,498,451]));return{default:e,critical:!0}}),KYt=ye(async()=>{const{HotelsSlugPage:e}=await K(async()=>{const{HotelsSlugPage:t}=await import("./hotels-Bt45R3YS.js").then(n=>n.h);return{HotelsSlugPage:t}},__vite__mapDeps([501,1,3,4,448,6,5,472,52,70,443,35,45,46,502]));return{default:e,critical:!0}}),YYt=ye(async()=>{const{PerplexifyMeLandingPage:e}=await K(async()=>{const{PerplexifyMeLandingPage:t}=await import("./perplexify_me-DDOcnP0w.js");return{PerplexifyMeLandingPage:t}},__vite__mapDeps([503,3,1,4,448,6,5]));return{default:e,critical:!0}}),QYt=ye(async()=>{const{TravelIndexPage:e}=await K(async()=>{const{TravelIndexPage:t}=await import("./travel-BLqTdBXT.js");return{TravelIndexPage:t}},__vite__mapDeps([504,3,1,4,448,6,5,449,25,499,498,451,444,46]));return{default:e,critical:!0}}),Joe=ye(async()=>{const{DiscoverPage:e}=await K(async()=>{const{DiscoverPage:t}=await import("./discover-BaR-nVtt.js");return{DiscoverPage:t}},__vite__mapDeps([505,3,1,4,448,6,5,449,25,450,495,118,454,455,487,506]));return{default:e,critical:!0}}),XYt=ye(async()=>{const{F1MainPage:e}=await K(async()=>{const{F1MainPage:t}=await import("./index-D4qic6nx.js");return{F1MainPage:t}},__vite__mapDeps([507,3,1,4,508,509,6,5,510,511,448]));return{default:e,critical:!0}}),ZYt=ye(async()=>{const{F1EventMainPage:e}=await K(async()=>{const{F1EventMainPage:t}=await import("./events-h2EPfGks.js");return{F1EventMainPage:t}},__vite__mapDeps([512,3,1,4,6,5,508,502,511,448]));return{default:e,critical:!0}}),JYt=ye(async()=>{const{NBAMainPage:e}=await K(async()=>{const{NBAMainPage:t}=await import("./index-CrOUUpwb.js");return{NBAMainPage:t}},__vite__mapDeps([513,3,1,4,514,5,515,516,517,518,519,520,6,521,510,522,511,448]));return{default:e,critical:!0}}),eQt=ye(async()=>{const{NBAEventMainPage:e}=await K(async()=>{const{NBAEventMainPage:t}=await import("./events-sqDoawBr.js");return{NBAEventMainPage:t}},__vite__mapDeps([523,3,1,4,524,6,525,526,527,528,529,522,530,531,532,533,534,502,511,448,5]));return{default:e,critical:!0}}),tQt=ye(async()=>{const{NBATeamMainPage:e}=await K(async()=>{const{NBATeamMainPage:t}=await import("./teams-CdBujW6N.js");return{NBATeamMainPage:t}},__vite__mapDeps([535,3,1,4,522,536,525,528,529,531,532,533,516,517,514,5,502,511,448,6]));return{default:e,critical:!0}}),nQt=ye(async()=>{const{NBAPlayerMainPage:e}=await K(async()=>{const{NBAPlayerMainPage:t}=await import("./players-DUGpuHqa.js");return{NBAPlayerMainPage:t}},__vite__mapDeps([537,3,1,4,538,5,529,502,511,448,6]));return{default:e,critical:!0}}),rQt=ye(async()=>{const{NFLMainPage:e}=await K(async()=>{const{NFLMainPage:t}=await import("./index-SDJSS5Eo.js");return{NFLMainPage:t}},__vite__mapDeps([539,3,1,4,525,520,6,5,521,448]));return{default:e,critical:!0}}),sQt=ye(async()=>{const{NFLEventMainPage:e}=await K(async()=>{const{NFLEventMainPage:t}=await import("./events-vYWzj6Go.js");return{NFLEventMainPage:t}},__vite__mapDeps([540,3,1,4,525,527,528,529,522,530,532,533,534,502,448,6,5]));return{default:e,critical:!0}}),aQt=ye(async()=>{const{NFLTeamMainPage:e}=await K(async()=>{const{NFLTeamMainPage:t}=await import("./teams-BP6Xbk5R.js");return{NFLTeamMainPage:t}},__vite__mapDeps([541,3,1,4,525,5,6,502,448]));return{default:e,critical:!0}}),oQt=ye(async()=>{const{NFLPlayerMainPage:e}=await K(async()=>{const{NFLPlayerMainPage:t}=await import("./players-DtzaPPSU.js");return{NFLPlayerMainPage:t}},__vite__mapDeps([542,3,1,4,536,525,538,5,529,502,511,448,6]));return{default:e,critical:!0}}),iQt=ye(async()=>{const{ChampionsLeagueMainPage:e}=await K(async()=>{const{ChampionsLeagueMainPage:t}=await import("./index-B6Coe75L.js");return{ChampionsLeagueMainPage:t}},__vite__mapDeps([543,3,1,4,544,519,520,6,5,510,509,511,448]));return{default:e,critical:!0}}),lQt=ye(async()=>{const{ChampionsLeagueEventMainPage:e}=await K(async()=>{const{ChampionsLeagueEventMainPage:t}=await import("./events-Dj-zyFSi.js");return{ChampionsLeagueEventMainPage:t}},__vite__mapDeps([545,3,1,4,546,6,534,533,502,511,448,5]));return{default:e,critical:!0}}),cQt=ye(async()=>{const{MLBMainPage:e}=await K(async()=>{const{MLBMainPage:t}=await import("./index-DI6n71oF.js");return{MLBMainPage:t}},__vite__mapDeps([547,1,3,4,548,514,5,515,549,517,6,518,521,510,522,511,448]));return{default:e,critical:!0}}),uQt=ye(async()=>{const{MLBEventMainPage:e}=await K(async()=>{const{MLBEventMainPage:t}=await import("./events-CfiFBEsE.js");return{MLBEventMainPage:t}},__vite__mapDeps([550,3,1,4,546,6,551,5,548,514,515,549,517,518,502,511,448]));return{default:e,critical:!0}}),FI=ye(async()=>{const{CricketEventMainPage:e}=await K(async()=>{const{CricketEventMainPage:t}=await import("./events-dapD1vw8.js");return{CricketEventMainPage:t}},__vite__mapDeps([552,3,1,4,6,5,551,553,502,511,448]));return{default:e,critical:!0}}),dQt=ye(async()=>{const{ICCMainPage:e}=await K(async()=>{const{ICCMainPage:t}=await import("./index-DlzPM7oX.js");return{ICCMainPage:t}},__vite__mapDeps([554,3,1,4,514,5,518,6,553,502,511,448]));return{default:e,critical:!0}}),fQt=ye(async()=>{const{IPLMainPage:e}=await K(async()=>{const{IPLMainPage:t}=await import("./index-pGVge10T.js");return{IPLMainPage:t}},__vite__mapDeps([555,3,1,4,514,5,518,519,520,6,521,510,522,511,448]));return{default:e,critical:!0}}),mQt=ye(async()=>{const{PGAMainPage:e}=await K(async()=>{const{PGAMainPage:t}=await import("./index-CI7-Fkqe.js");return{PGAMainPage:t}},__vite__mapDeps([556,3,1,4,557,6,558,509,5,502,511,448]));return{default:e,critical:!0}}),pQt=ye(async()=>{const{PGAEventMainPage:e}=await K(async()=>{const{PGAEventMainPage:t}=await import("./events-BHjAI97v.js");return{PGAEventMainPage:t}},__vite__mapDeps([559,3,1,4,557,6,502,511,448,5]));return{default:e,critical:!0}}),hQt=ye(async()=>{const{EuropeanTourMainPage:e}=await K(async()=>{const{EuropeanTourMainPage:t}=await import("./index-CI7-Fkqe.js");return{EuropeanTourMainPage:t}},__vite__mapDeps([556,3,1,4,557,6,558,509,5,502,511,448]));return{default:e,critical:!0}}),gQt=ye(async()=>{const{EuropeanTourEventMainPage:e}=await K(async()=>{const{EuropeanTourEventMainPage:t}=await import("./events-BHjAI97v.js");return{EuropeanTourEventMainPage:t}},__vite__mapDeps([559,3,1,4,557,6,502,511,448,5]));return{default:e,critical:!0}}),yQt=ye(async()=>{const{WNBAMainPage:e}=await K(async()=>{const{WNBAMainPage:t}=await import("./index-CC4087ms.js");return{WNBAMainPage:t}},__vite__mapDeps([560,3,1,4,521,6,5,510,522,514,515,549,517,518,511,448]));return{default:e,critical:!0}}),vQt=ye(async()=>{const{WNBAEventMainPage:e}=await K(async()=>{const{WNBAEventMainPage:t}=await import("./events-CHds-O7h.js");return{WNBAEventMainPage:t}},__vite__mapDeps([561,3,1,4,524,6,525,527,528,529,522,5,533,502,511,448]));return{default:e,critical:!0}}),xQt=ye(async()=>{const{NCAAMEventMainPage:e}=await K(async()=>{const{NCAAMEventMainPage:t}=await import("./events-B47FQ1tL.js");return{NCAAMEventMainPage:t}},__vite__mapDeps([562,3,1,4,524,6,525,526,527,528,529,522,530,531,532,533,534,502,511,448,5]));return{default:e,critical:!0}}),bQt=ye(async()=>{const{NCAAWEventMainPage:e}=await K(async()=>{const{NCAAWEventMainPage:t}=await import("./events-B47FQ1tL.js");return{NCAAWEventMainPage:t}},__vite__mapDeps([562,3,1,4,524,6,525,526,527,528,529,522,530,531,532,533,534,502,511,448,5]));return{default:e,critical:!0}}),_Qt=ye(async()=>{const{NCAAMMainPage:e}=await K(async()=>{const{NCAAMMainPage:t}=await import("./index-wb2KTbjd.js");return{NCAAMMainPage:t}},__vite__mapDeps([563,3,1,4,544,519,520,6,5,510,502,511,448]));return{default:e,critical:!0}}),wQt=ye(async()=>{const{NCAAWMainPage:e}=await K(async()=>{const{NCAAWMainPage:t}=await import("./index-wb2KTbjd.js");return{NCAAWMainPage:t}},__vite__mapDeps([563,3,1,4,544,519,520,6,5,510,502,511,448]));return{default:e,critical:!0}}),CQt=ye(async()=>{const{WTAMainPage:e}=await K(async()=>{const{WTAMainPage:t}=await import("./index-CdX6x_O9.js");return{WTAMainPage:t}},__vite__mapDeps([564,3,1,4,565,558,509,6,5,566,502,511,448]));return{default:e,critical:!0}}),SQt=ye(async()=>{const{ATPMainPage:e}=await K(async()=>{const{ATPMainPage:t}=await import("./index-CdX6x_O9.js");return{ATPMainPage:t}},__vite__mapDeps([564,3,1,4,565,558,509,6,5,566,502,511,448]));return{default:e,critical:!0}}),EQt=ye(async()=>{const{WTAEventMainPage:e}=await K(async()=>{const{WTAEventMainPage:t}=await import("./events-CyB00bX-.js");return{WTAEventMainPage:t}},__vite__mapDeps([567,3,1,4,546,6,5,568,519,520,533,566,502,511,448]));return{default:e,critical:!0}}),MQt=ye(async()=>{const{ATPEventMainPage:e}=await K(async()=>{const{ATPEventMainPage:t}=await import("./events-CyB00bX-.js");return{ATPEventMainPage:t}},__vite__mapDeps([567,3,1,4,546,6,5,568,519,520,533,566,502,511,448]));return{default:e,critical:!0}}),kQt=ye(async()=>{const{ATPTournamentMainPage:e}=await K(async()=>{const{ATPTournamentMainPage:t}=await import("./tournaments-yWAyKOPj.js");return{ATPTournamentMainPage:t}},__vite__mapDeps([569,3,1,4,510,6,565,568,519,520,5,566,502,511,448]));return{default:e,critical:!0}}),TQt=ye(async()=>{const{WTATournamentMainPage:e}=await K(async()=>{const{WTATournamentMainPage:t}=await import("./tournaments-yWAyKOPj.js");return{WTATournamentMainPage:t}},__vite__mapDeps([569,3,1,4,510,6,565,568,519,520,5,566,502,511,448]));return{default:e,critical:!0}}),NQt=ye(async()=>{const{FinanceRouter:e}=await K(async()=>{const{FinanceRouter:t}=await import("./sub-router-DJwXP3Tl.js");return{FinanceRouter:t}},__vite__mapDeps([570,3,1,4,5,447,448,6,449,25,450,451,452,571,17,18,439,19,502]));return{default:e}}),jQt=ye(async()=>{const{AccountPage:e}=await K(async()=>{const{AccountPage:t}=await import("./index-CpGf05zN.js");return{AccountPage:t}},__vite__mapDeps([572,3,1,6,5,4]));return{default:e,critical:!0}}),AQt=ye(async()=>{const{AccountDetailsPage:e}=await K(async()=>{const{AccountDetailsPage:t}=await import("./details-Cs8PnoiR.js");return{AccountDetailsPage:t}},__vite__mapDeps([573,3,1,4,6,18,5]));return{default:e,critical:!0}}),IQt=ye(async()=>{const{AccountApiGroupPage:e}=await K(async()=>{const{AccountApiGroupPage:t}=await import("./group-CQSrvqjK.js");return{AccountApiGroupPage:t}},__vite__mapDeps([574,3,1,575,576,496,6,577,578,4,579,5,580,581,37]));return{default:e,critical:!0}}),RQt=ye(async()=>{const{AccountApiMembersPage:e}=await K(async()=>{const{AccountApiMembersPage:t}=await import("./members-BbaYJrXY.js");return{AccountApiMembersPage:t}},__vite__mapDeps([582,3,1,575,576,496,6,4,577,578,579,5,583]));return{default:e,critical:!0}}),PQt=ye(async()=>{const{AccountApiBillingPage:e}=await K(async()=>{const{AccountApiBillingPage:t}=await import("./billing-DVqsvIQV.js");return{AccountApiBillingPage:t}},__vite__mapDeps([584,3,1,575,576,496,6,4,452,579,5,581,37,580,578]));return{default:e,critical:!0}}),OQt=ye(async()=>{const{AccountApiKeysPage:e}=await K(async()=>{const{AccountApiKeysPage:t}=await import("./keys-CNXk06Tz.js");return{AccountApiKeysPage:t}},__vite__mapDeps([585,3,1,575,576,496,6,4,579,5,577,578]));return{default:e,critical:!0}}),LQt=ye(async()=>{const{AccountApiLimitsPage:e}=await K(async()=>{const{AccountApiLimitsPage:t}=await import("./limits-CssHM6Qp.js");return{AccountApiLimitsPage:t}},__vite__mapDeps([586,3,1,575,576,496,6,4,5]));return{default:e,critical:!0}}),DQt=ye(async()=>{const{AccountApiFilesPage:e}=await K(async()=>{const{AccountApiFilesPage:t}=await import("./files-CHCy1A8g.js");return{AccountApiFilesPage:t}},__vite__mapDeps([587,3,1,575,576,496,6,4,577,578,5]));return{default:e,critical:!0}}),FQt=ye(async()=>{const{AccountApiFilesRepoPage:e}=await K(async()=>{const{AccountApiFilesRepoPage:t}=await import("./files-repo-Ca4HcOg8.js");return{AccountApiFilesRepoPage:t}},__vite__mapDeps([588,3,1,575,576,496,6,4,578,11,5]));return{default:e,critical:!0}}),UQt=ye(async()=>{const{ApiIndexPage:e}=await K(async()=>{const{ApiIndexPage:t}=await import("./index-GBgvdJ8y.js");return{ApiIndexPage:t}},__vite__mapDeps([589,3,1,575,576,496,6,5,4]));return{default:e,critical:!0}}),BQt=ye(async()=>{const{AccountProPerksPage:e}=await K(async()=>{const{AccountProPerksPage:t}=await import("./pro-perks-CVzQ0SFe.js");return{AccountProPerksPage:t}},__vite__mapDeps([590,3,1,591,6,576,496,4,5]));return{default:e,critical:!0}}),VQt=ye(async()=>{const{AccountProPerksDetailPage:e}=await K(async()=>{const{AccountProPerksDetailPage:t}=await import("./pro-perks-detail-B9xdd7t_.js");return{AccountProPerksDetailPage:t}},__vite__mapDeps([592,3,1,591,6,576,496,4,17,5,18]));return{default:e,critical:!0}}),$Qt=ye(async()=>{const{OrgIndexPage:e}=await K(async()=>{const{OrgIndexPage:t}=await import("./index-DeWJZdWQ.js");return{OrgIndexPage:t}},__vite__mapDeps([593,3,1,576,496,6,594,5,4]));return{default:e,critical:!0}}),WQt=ye(async()=>{const{OrgDetailsPage:e}=await K(async()=>{const{OrgDetailsPage:t}=await import("./index-CLzdOmCn.js");return{OrgDetailsPage:t}},__vite__mapDeps([595,3,1,4,493,6,5,18,596,597,90,598,576,496,594]));return{default:e,critical:!0}}),HQt=ye(async()=>{const{OrgMembersPage:e}=await K(()=>import("./members-Cqr7wKx1.js"),__vite__mapDeps([599,3,1,4,5,6,493,583,576,496,594]));return{default:e,critical:!0}}),zQt=ye(async()=>{const{OrgInsightsPage:e}=await K(()=>import("./insights-CtAOx0Qx.js"),__vite__mapDeps([600,3,1,4,5,90,6,576,496,594]));return{default:e,critical:!0}}),GQt=ye(async()=>{const{OrgUserAccessPage:e}=await K(()=>import("./user-access-MEy7W1Ck.js"),__vite__mapDeps([601,3,1,4,6,5,90,597,576,496,594]));return{default:e,critical:!0}}),qQt=ye(async()=>{const{OrgPermissionsPage:e}=await K(()=>import("./permissions-DY-VbuRF.js"),__vite__mapDeps([602,3,1,4,596,6,598,576,496,594,5]));return{default:e,critical:!0}}),KQt=ye(async()=>{const{OrgFilesPage:e}=await K(()=>import("./files-B2wiMC3Y.js"),__vite__mapDeps([603,3,1,4,10,11,5,6,576,496,604,594]));return{default:e,critical:!0}}),YQt=ye(async()=>{const{OrgConnectorsPage:e}=await K(()=>import("./connectors-DHzo61gn.js"),__vite__mapDeps([605,3,1,576,496,6,4,5,594]));return{default:e,critical:!0}}),QQt=ye(async()=>{const{AccountPurchasesPage:e}=await K(async()=>{const{AccountPurchasesPage:t}=await import("./purchases-YkY6Gy1k.js");return{AccountPurchasesPage:t}},__vite__mapDeps([606,3,1,4,607,50,5,6]));return{default:e,critical:!0}}),XQt=ye(async()=>{const{AccountReservationsPage:e}=await K(async()=>{const{AccountReservationsPage:t}=await import("./reservations-CaSjEHBu.js");return{AccountReservationsPage:t}},__vite__mapDeps([608,3,1,4,607,52,53,5,54,6]));return{default:e,critical:!0}}),ZQt=ye(async()=>{const{AccountTasksPage:e}=await K(async()=>{const{AccountTasksPage:t}=await import("./index-VG3BxYxN.js");return{AccountTasksPage:t}},__vite__mapDeps([609,3,1,4,610,6,5,506]));return{default:e,critical:!0}}),JQt=ye(async()=>{const{AccountTaskDetailsPage:e}=await K(async()=>{const{AccountTaskDetailsPage:t}=await import("./task-0iT-ri6r.js");return{AccountTaskDetailsPage:t}},__vite__mapDeps([611,3,1,4,6,5]));return{default:e,critical:!0}}),eXt=ye(async()=>{const{AccountShortcutsPage:e}=await K(async()=>{const{AccountShortcutsPage:t}=await import("./shortcuts-CI6O-Eb8.js");return{AccountShortcutsPage:t}},__vite__mapDeps([612,3,1,4,610,5,6]));return{default:e,critical:!0}}),tXt=ye(async()=>{const{AccountSiteInstructionsPage:e}=await K(async()=>{const{AccountSiteInstructionsPage:t}=await import("./site-instructions-C3Zy19fE.js");return{AccountSiteInstructionsPage:t}},__vite__mapDeps([613,3,1,4,5,6]));return{default:e,critical:!0}}),nXt=ye(async()=>{const{AccountPreferencesPage:e}=await K(async()=>{const{AccountPreferencesPage:t}=await import("./preferences-Dix5Q8Zh.js");return{AccountPreferencesPage:t}},__vite__mapDeps([614,3,1,4,5,6]));return{default:e,critical:!0}}),rXt=ye(async()=>{const{AccountPersonalizePage:e}=await K(async()=>{const{AccountPersonalizePage:t}=await import("./personalize-Foe_vCUF.js");return{AccountPersonalizePage:t}},__vite__mapDeps([615,3,1,4,5,6,121]));return{default:e,critical:!0}}),sXt=ye(async()=>{const{AccountAssistantPage:e}=await K(async()=>{const{AccountAssistantPage:t}=await import("./assistant-DHtm5gVa.js");return{AccountAssistantPage:t}},__vite__mapDeps([616,3,1,4,5,6,76]));return{default:e,critical:!0}}),aXt=ye(async()=>{const{AccountPersonalizeMemoriesPage:e}=await K(async()=>{const{AccountPersonalizeMemoriesPage:t}=await import("./memories-CvjJYj_R.js");return{AccountPersonalizeMemoriesPage:t}},__vite__mapDeps([617,3,1,4,67,5,6]));return{default:e,critical:!0}}),oXt=ye(async()=>{const{AccountNotificationsPage:e}=await K(async()=>{const{AccountNotificationsPage:t}=await import("./notifications-AnffnZaQ.js");return{AccountNotificationsPage:t}},__vite__mapDeps([618,3,1,4,6,5]));return{default:e,critical:!0}}),iXt=ye(async()=>{const{AccountFilesPage:e}=await K(async()=>{const{AccountFilesPage:t}=await import("./files-BkQcq_Hc.js");return{AccountFilesPage:t}},__vite__mapDeps([619,3,1,4,604,10,11,5,6]));return{default:e,critical:!0}}),lXt=ye(async()=>{const{AccountConnectorsPage:e}=await K(async()=>{const{AccountConnectorsPage:t}=await import("./connectors-UJDAld29.js");return{AccountConnectorsPage:t}},__vite__mapDeps([620,1,3,6,5,4]));return{default:e,critical:!0}}),cXt=ye(async()=>{const{SportsLandingPage:e}=await K(async()=>{const{SportsLandingPage:t}=await import("./index-CzMowGXG.js");return{SportsLandingPage:t}},__vite__mapDeps([621,3,1,4,448,6,5,449,25,571,498,451,502]));return{default:e,critical:!0}}),uXt=ye(async()=>{const{InputPage:e}=await K(async()=>{const{InputPage:t}=await import("./ask-input-DWAAb92R.js");return{InputPage:t}},__vite__mapDeps([622,3,1,502,4,6,5]));return{default:e,critical:!0}}),dXt=ye(async()=>{const{AccountApiPlaygroundPage:e}=await K(async()=>{const{AccountApiPlaygroundPage:t}=await import("./playground-DWEW0o3f.js");return{AccountApiPlaygroundPage:t}},__vite__mapDeps([623,3,1,4,5,580,6]));return{default:e,critical:!0}});function fXt(){const e=gt(),t=f.useCallback(()=>{e.push("/b/home",void 0,"voice to ntp")},[e]);return fn()?o.jsx(s_,{childrenWidth:"none",mobileHeader:!1,children:o.jsx(VYt,{isOpen:!0,onClose:t})}):o.jsx(Bc,{to:"/"})}function mXt(){return fn()?o.jsx(UYt,{}):o.jsx(Bc,{to:"/"})}function eie(){const{session:e}=Et(),{value:t,loading:n}=Rr({flag:"mission-control-enabled",defaultValue:!1,extraAttributes:{userEmail:e?.user?.email??"unknown-user",subscriptionTier:e?.user.subscription_tier||""}});return n?o.jsx("div",{}):!fn()||!t?o.jsx(Bc,{to:"/"}):o.jsx(IAe,{})}function pXt(){return fn()?o.jsx(BYt,{}):o.jsx(Bc,{to:"/"})}const mS={"/library":{Component:$Yt,modules:ue},"^\\/search(?:\\/(?<new>new))?(?:\\/(?<uuid>.+))?$":{Component:DIe,modules:EUt},"/b/home":{Component:FYt,modules:Aae},"/b/speak":{Component:fXt,modules:ue},"/b/zen":{Component:mXt,modules:ue},"/b/mission-control":{Component:eie,modules:ue},"/b/assistants":{Component:eie,modules:ue},"/b/try-assistant":{Component:pXt,modules:ue},"/spaces/templates":{Component:HYt,modules:ue},"/spaces/:slug":{Component:zYt,modules:MUt},"/spaces":{Component:WYt,modules:ue},"/page/:slug":{Component:Zoe,modules:ue},"/discover/:topic/:slug":{Component:Zoe,modules:ue},"/discover/:topic":{Component:Joe,modules:Iae},"/discover":{Component:Joe,modules:Iae},"/academic":{Component:GYt,modules:ue},"/shopping":{Component:qYt,modules:ue},"/hotels/:slug":{Component:KYt,modules:ue},"/perplexify_me":{Component:YYt,modules:ue},"/sports":{Component:cXt,modules:ue},"/sports/f1/events/:eventId":{Component:ZYt,modules:ue},"/sports/f1":{Component:XYt,modules:CUt},"/sports/nba/events/:eventId":{Component:eQt,modules:ue},"/sports/nba/teams/:teamId":{Component:tQt,modules:ue},"/sports/nba/players/:playerId":{Component:nQt,modules:ue},"/sports/nba":{Component:JYt,modules:SUt},"/sports/nfl/events/:eventId":{Component:sQt,modules:ue},"/sports/nfl/teams/:teamId":{Component:aQt,modules:ue},"/sports/nfl/players/:playerId":{Component:oQt,modules:ue},"/sports/nfl":{Component:rQt,modules:ue},"/sports/championsleague/events/:eventId":{Component:lQt,modules:ue},"/sports/championsleague":{Component:iQt,modules:ue},"/sports/mlb/events/:eventId":{Component:uQt,modules:ue},"/sports/mlb":{Component:cQt,modules:ue},"/sports/cricket/events/:eventId":{Component:FI,modules:ue},"/sports/ipl/events/:eventId":{Component:FI,modules:ue},"/sports/icc/events/:eventId":{Component:FI,modules:ue},"/sports/ipl":{Component:fQt,modules:ue},"/sports/icc":{Component:dQt,modules:ue},"/sports/pga/events/:eventId":{Component:pQt,modules:ue},"/sports/pga":{Component:mQt,modules:ue},"/sports/dpworldtour/events/:eventId":{Component:gQt,modules:ue},"/sports/dpworldtour":{Component:hQt,modules:ue},"/sports/wnba/events/:eventId":{Component:vQt,modules:ue},"/sports/wnba":{Component:yQt,modules:ue},"/sports/wta":{Component:CQt,modules:ue},"/sports/atp":{Component:SQt,modules:ue},"/sports/wta/events/:eventId":{Component:EQt,modules:ue},"/sports/atp/events/:eventId":{Component:MQt,modules:ue},"/sports/atp/tournaments/:seasonId":{Component:kQt,modules:ue},"/sports/wta/tournaments/:seasonId":{Component:TQt,modules:ue},"/sports/ncaam/events/:eventId":{Component:xQt,modules:ue},"/sports/ncaam":{Component:_Qt,modules:ue},"/sports/ncaaw/events/:eventId":{Component:bQt,modules:ue},"/sports/ncaaw":{Component:wQt,modules:ue},"/travel":{Component:QYt,modules:ue},[R3]:{Component:NQt,modules:wUt},"/account/details":{Component:AQt,modules:ue},"/account/org/details":{Component:WQt,modules:ue},"/account/org/members":{Component:HQt,modules:ue},"/account/org/insights":{Component:zQt,modules:ue},"/account/org/user-access":{Component:GQt,modules:ue},"/account/org/permissions":{Component:qQt,modules:ue},"/account/org/files":{Component:KQt,modules:ue},"/account/org/connectors":{Component:YQt,modules:ue},"/account/api/group":{Component:IQt,modules:ue},"/account/api/members":{Component:RQt,modules:ue},"/account/api/billing":{Component:PQt,modules:ue},"/account/api/keys":{Component:OQt,modules:ue},"/account/api/playground/search":{Component:dXt,modules:ue},"/account/api/limits":{Component:LQt,modules:ue},"/account/api/files":{Component:DQt,modules:ue},"/account/api/files/:repositoryUuid":{Component:FQt,modules:ue},"/account/api":{Component:UQt,modules:ue},"/account/pro-perks":{Component:BQt,modules:ue},"/account/pro-perks/:name":{Component:VQt,modules:ue},"/account/org":{Component:$Qt,modules:ue},"/account/purchases":{Component:QQt,modules:ue},"/account/reservations":{Component:XQt,modules:ue},"/account/tasks/:taskId":{Component:JQt,modules:ue},"/account/tasks":{Component:ZQt,modules:ue},"/account/shortcuts":{Component:eXt,modules:ue},"/account/site-instructions":{Component:tXt,modules:ue},"/account/preferences":{Component:nXt,modules:ue},"/account/personalize":{Component:rXt,modules:ue},"/account/assistant":{Component:sXt,modules:ue},"/account/personalize/memories":{Component:aXt,modules:ue},"/account/notifications":{Component:oXt,modules:ue},"/account/files":{Component:iXt,modules:ue},"/account/connectors":{Component:lXt,modules:ue},"/account":{Component:jQt,modules:ue},"/windows-app/ask/input":{Component:uXt,modules:ue},"/":{Component:vNe,modules:Aae}},hXt=/^\/account/,gXt=/^\/windows-app/,sRe=I.memo(function(){const t=f.useMemo(()=>Object.keys(mS),[]),n=DYt(t),r=f.useMemo(()=>Object.entries(mS).filter(([i])=>i.startsWith("/account")),[]),s=f.useMemo(()=>Object.entries(mS).filter(([i])=>i.startsWith("/windows-app")),[]),a=f.useMemo(()=>Object.entries(mS).filter(([i])=>!i.startsWith("/account")),[]);return o.jsxs(axe,{children:[o.jsx(wW,{}),o.jsxs(QT,{children:[o.jsx(pp,{path:gXt,children:s.map(([i,{Component:l,modules:c}])=>o.jsx(pp,{path:i,children:o.jsx(Cj,{modules:c,children:o.jsx(l,{})})},i))}),o.jsx(pp,{path:hXt,children:o.jsx(R4e,{children:o.jsx(QT,{children:r.map(([i,{Component:l,modules:c}])=>o.jsx(pp,{path:i,children:o.jsx(Cj,{modules:c,children:o.jsx(l,{})})},i))})})}),o.jsx(pp,{children:o.jsx(J2e,{children:o.jsx(_Ut,{children:o.jsx(QT,{children:a.map(([i,{Component:l,modules:c}])=>o.jsx(pp,{path:i.startsWith("^")?new RegExp(i):i,children:o.jsx(Cj,{modules:c,children:o.jsx(l,{})})},i))})})})})]}),o.jsx(S4e,{metadata:n})]})});sRe.displayName="SpaEntryPoint";const yXt=document.getElementById("root"),vXt=qRe.createRoot(yXt),xXt=navigator.userAgent;function aRe(e,t){vXt.render(o.jsx(I.StrictMode,{children:o.jsx(Or,{fallback:zve,children:o.jsx(sxe,{host:window.location.hostname,userAgent:xXt,session:t??void 0,children:o.jsxs(apt,{isMobileUserAgent:_Xt,hostname:wXt??"",version:e.version,minVersion:e.minVersion??0,spaRoutes:opt,strictSpa:!0,idleRefresh:!1,minVersionRefresh:!0,children:[o.jsx(sRe,{}),o.jsx(Hft,{})]})})})}))}const{config:lb,cachedSession:RM,sessionFetchPromise:bXt}=kpt();window.__PPL_CONFIG__=lb;const _Xt=Ege(navigator.userAgent),wXt=window.location.host;RM&&Hve(lb,RM.user);aRe(lb,RM);bXt.then(e=>{RM||Hve(lb,e?.user),aRe(lb,e)});export{Ide as $,Ke as A,he as B,At as C,rB as D,ue as E,Jnn as F,fn as G,Hat as H,Pr as I,ste as J,Ho as K,nrn as L,Hr as M,ern as N,JEt as O,Le as P,aD as Q,rte as R,$r as S,D as T,Ihe as U,Oe as V,y5 as W,UXt as X,BXt as Y,FXt as Z,f1 as _,Wr as a,ur as a$,Te as a0,OF as a1,gn as a2,Hd as a3,yn as a4,Kt as a5,zi as a6,Kb as a7,en as a8,ql as a9,pFt as aA,IGt as aB,Uo as aC,Gk as aD,J_ as aE,Gen as aF,s_ as aG,art as aH,LJt as aI,dg as aJ,Gd as aK,ake as aL,wt as aM,MGt as aN,bt as aO,nJt as aP,sa as aQ,Cy as aR,ht as aS,T2 as aT,vJt as aU,rU as aV,nU as aW,qk as aX,l3 as aY,ven as aZ,li as a_,rt as aa,ma as ab,AU as ac,WAe as ad,Ut as ae,oFt as af,Jn as ag,le as ah,jy as ai,Jt as aj,qF as ak,ime as al,SJt as am,uIe as an,$3 as ao,Kl as ap,D_ as aq,OHt as ar,Xa as as,hn as at,TS as au,Oot as av,fs as aw,cye as ax,jGt as ay,yW as az,It as b,nl as b$,Pe as b0,Hi as b1,QJt as b2,f3 as b3,_n as b4,pg as b5,urt as b6,vt as b7,pn as b8,fv as b9,wIe as bA,KJt as bB,bJt as bC,_Jt as bD,ype as bE,Dnt as bF,Unt as bG,E3 as bH,tde as bI,Qhe as bJ,$nt as bK,Tt as bL,prt as bM,wk as bN,Lo as bO,Pa as bP,$o as bQ,lo as bR,uNe as bS,hIe as bT,uet as bU,gIe as bV,Hm as bW,Dy as bX,fge as bY,Ra as bZ,hhe as b_,Hp as ba,rJt as bb,eJt as bc,cc as bd,q2e as be,Gl as bf,Iy as bg,n0 as bh,Ms as bi,tE as bj,YZt as bk,gpe as bl,aH as bm,SIe as bn,KXe as bo,CIe as bp,tJt as bq,Vc as br,YJt as bs,wy as bt,tft as bu,Zf as bv,FQe as bw,oge as bx,Wv as by,Ro as bz,Et as c,jXt as c$,XJt as c0,wJe as c1,bo as c2,_m as c3,Gb as c4,ble as c5,Xd as c6,Cq as c7,Aa as c8,Sq as c9,gJt as cA,iIe as cB,xZt as cC,cet as cD,Na as cE,iH as cF,bce as cG,UJt as cH,Een as cI,BJt as cJ,un as cK,aZt as cL,oZt as cM,ZJt as cN,Fb as cO,id as cP,mHe as cQ,DK as cR,pJt as cS,kS as cT,Vt as cU,lzt as cV,DJt as cW,yP as cX,j3e as cY,FVe as cZ,dq as c_,GUt as ca,qJt as cb,GJt as cc,Ce as cd,zJt as ce,HJt as cf,lge as cg,aJt as ch,oJt as ci,XS as cj,Osn as ck,GHt as cl,$Je as cm,iJt as cn,lJt as co,ken as cp,Ten as cq,cJt as cr,uJt as cs,fJt as ct,dJt as cu,mJt as cv,Lsn as cw,Hen as cx,hJt as cy,WJe as cz,Zn as d,P5 as d$,IVe as d0,PVe as d1,RVe as d2,LVe as d3,DVe as d4,kue as d5,ra as d6,NJ as d7,Fk as d8,Uk as d9,yEe as dA,OTe as dB,jNt as dC,tW as dD,nye as dE,JAe as dF,u6e as dG,xzt as dH,wen as dI,tB as dJ,nB as dK,LAe as dL,S$ as dM,t9t as dN,dhe as dO,Cen as dP,Sen as dQ,H3 as dR,$l as dS,Td as dT,Vq as dU,CJt as dV,e3 as dW,rn as dX,Oa as dY,Z2t as dZ,J2t as d_,e_ as da,xW as db,Ay as dc,$Ae as dd,VAe as de,HAe as df,k$ as dg,Pl as dh,gr as di,uen as dj,FEe as dk,gNt as dl,rc as dm,em as dn,fg as dp,Jb as dq,Men as dr,zs as ds,Qr as dt,x6e as du,U_ as dv,q9 as dw,M$ as dx,INt as dy,Hs as dz,We as e,hW as e$,pVt as e0,SBe as e1,VJt as e2,xEe as e3,N$ as e4,_Zt as e5,Jf as e6,fa as e7,tF as e8,FJt as e9,EF as eA,gU as eB,bP as eC,OW as eD,WF as eE,dye as eF,Nge as eG,Rr as eH,Hge as eI,HZt as eJ,Dtn as eK,Ftn as eL,Utn as eM,Btn as eN,Tc as eO,Ou as eP,ir as eQ,aEe as eR,l1e as eS,D4t as eT,cEt as eU,rRt as eV,aRt as eW,mwe as eX,_t as eY,op as eZ,g5e as e_,Ud as ea,Gnt as eb,FZt as ec,WJt as ed,PZt as ee,Knt as ef,aen as eg,a_ as eh,H4e as ei,F3e as ej,sn as ek,sen as el,T7e as em,$en as en,xu as eo,hde as ep,Wen as eq,qm as er,Kk as es,j$ as et,Vse as eu,R3e as ev,J6 as ew,pen as ex,rge as ey,HKt as ez,Ta as f,Zrn as f$,Ny as f0,MU as f1,Flt as f2,Ya as f3,rNe as f4,F4e as f5,$nn as f6,iRt as f7,Vhe as f8,sRt as f9,B$ as fA,ZMe as fB,Wi as fC,kU as fD,lqt as fE,Fsn as fF,Usn as fG,Hrn as fH,osn as fI,pke as fJ,Wrn as fK,r9t as fL,cqt as fM,G_ as fN,asn as fO,Jrn as fP,s0 as fQ,dsn as fR,bsn as fS,csn as fT,Dg as fU,lM as fV,Irn as fW,Qrn as fX,lsn as fY,cke as fZ,Z9t as f_,oEe as fa,U0t as fb,U4t as fc,V4t as fd,B4t as fe,zb as ff,Vo as fg,DB as fh,Nu as fi,Q8t as fj,n9t as fk,d9t as fl,tb as fm,D3e as fn,G8t as fo,P9t as fp,c3e as fq,P3e as fr,t5e as fs,V$ as ft,dT as fu,la as fv,$5e as fw,Vrn as fx,ap as fy,Z_ as fz,z0t as g,y3 as g$,isn as g0,esn as g1,J9t as g2,rqt as g3,ZPt as g4,$rn as g5,AOt as g6,Es as g7,aqt as g8,ZGt as g9,sb as gA,Fp as gB,Ssn as gC,HOt as gD,sae as gE,i7t as gF,o7t as gG,msn as gH,KOt as gI,nae as gJ,My as gK,uhe as gL,oet as gM,kke as gN,l7t as gO,rae as gP,psn as gQ,Or as gR,py as gS,Jm as gT,dV as gU,mge as gV,zW as gW,IHt as gX,_en as gY,Za as gZ,iU as g_,Vsn as ga,GRt as gb,xsn as gc,dOt as gd,ETe as ge,Bsn as gf,C8t as gg,d8t as gh,Grn as gi,l9t as gj,LZt as gk,my as gl,DZt as gm,SZt as gn,Yc as go,IDe as gp,Mb as gq,wb as gr,kge as gs,aU as gt,Tb as gu,Xb as gv,z3e as gw,G3e as gx,q3e as gy,K3e as gz,H as h,Frn as h$,$at as h0,gen as h1,u3 as h2,Ey as h3,tzt as h4,Vye as h5,Bg as h6,wU as h7,b3 as h8,x3 as h9,K2e as hA,WSe as hB,km as hC,C3 as hD,Pme as hE,oMe as hF,MNt as hG,kNt as hH,ga as hI,E$ as hJ,XEe as hK,JEe as hL,tMe as hM,Z1 as hN,Yg as hO,Ry as hP,Hsn as hQ,Vke as hR,yDe as hS,Urn as hT,ssn as hU,Brn as hV,Lrn as hW,nsn as hX,Um as hY,tsn as hZ,rsn as h_,azt as ha,Jd as hb,zA as hc,UUt as hd,bNt as he,eMe as hf,zKt as hg,an as hh,Nrn as hi,pIt as hj,tut as hk,TXt as hl,Ws as hm,Ir as hn,$Se as ho,b$ as hp,g2e as hq,C4t as hr,Bf as hs,w4t as ht,zEt as hu,BEt as hv,VEt as hw,QEt as hx,H2e as hy,p2e as hz,bn as i,gnn as i$,Drn as i0,Prn as i1,qRt as i2,Orn as i3,Rrn as i4,ci as i5,VRt as i6,q4e as i7,lke as i8,v3 as i9,i9t as iA,POt as iB,Xse as iC,LOt as iD,xke as iE,Aoe as iF,fsn as iG,Yrn as iH,x8t as iI,zrn as iJ,Xrn as iK,Noe as iL,U9t as iM,fnn as iN,SU as iO,mnn as iP,tit as iQ,C1 as iR,_ke as iS,Rnn as iT,Inn as iU,CRt as iV,Mpe as iW,Cnn as iX,wnn as iY,znn as iZ,pnn as i_,usn as ia,Arn as ib,Dle as ic,Gt as id,Lae as ie,pM as ig,Oae as ih,nI as ii,rI as ij,dqt as ik,KPt as il,fqt as im,x3e as io,eit as ip,u9t as iq,c9t as ir,a9t as is,o9t as it,O9t as iu,L9t as iv,$sn as iw,s9t as ix,iqt as iy,joe as iz,Bd as j,rnn as j$,hnn as j0,vnn as j1,ynn as j2,Ztn as j3,ZZt as j4,IAt as j5,dnn as j6,unn as j7,Jtn as j8,inn as j9,Tnn as jA,Onn as jB,Nnn as jC,Knn as jD,jnn as jE,lwe as jF,dve as jG,Ann as jH,Pnn as jI,Hnn as jJ,Wnn as jK,$2e as jL,Snn as jM,Qnn as jN,Cj as jO,vsn as jP,d5e as jQ,uEt as jR,kT as jS,xTe as jT,MT as jU,ome as jV,TT as jW,Ynn as jX,FIe as jY,S1 as jZ,snn as j_,nnn as ja,QP as jb,_nn as jc,wGt as jd,GTe as je,Nm as jf,H_ as jg,tnn as jh,enn as ji,Dnn as jj,Lnn as jk,N$e as jl,rSt as jm,FB as jn,c_e as jo,ik as jp,Cg as jq,qnn as jr,Unn as js,Fnn as jt,Vnn as ju,Bnn as jv,yk as jw,bvt as jx,xvt as jy,knn as jz,Po as k,hNe as k$,bnn as k0,xnn as k1,cnn as k2,lnn as k3,vvt as k4,yvt as k5,onn as k6,ann as k7,Xtn as k8,Qtn as k9,uwe as kA,dwe as kB,fwe as kC,i3e as kD,sp as kE,mIt as kF,I4e as kG,c3 as kH,bZt as kI,rpe as kJ,C7e as kK,_b as kL,wJt as kM,Cu as kN,iE as kO,uI as kP,nft as kQ,rft as kR,eft as kS,mve as kT,uve as kU,$Jt as kV,NJt as kW,EFt as kX,Eu as kY,J0e as kZ,But as k_,kOt as ka,kO as kb,hke as kc,EU as kd,Mnn as ke,Enn as kf,Klt as kg,dot as kh,cy as ki,wlt as kj,Clt as kk,Slt as kl,EP as km,Cle as kn,KP as ko,kJ as kp,ie as kq,E7e as kr,M7e as ks,bTe as kt,qvt as ku,cIt as kv,Lg as kw,W$ as kx,jrn as ky,cwe as kz,xt as l,MZt as l$,bpe as l0,Wft as l1,k4e as l2,wM as l3,AUt as l4,CM as l5,zen as l6,M4e as l7,IUt as l8,CW as l9,PUt as lA,_et as lB,sJt as lC,AJe as lD,TWe as lE,IJe as lF,hnt as lG,Nn as lH,$Zt as lI,VZt as lJ,ret as lK,Vct as lL,sE as lM,CZt as lN,OXt as lO,Li as lP,TZt as lQ,jZt as lR,NZt as lS,ttn as lT,KZt as lU,jU as lV,EZt as lW,EXe as lX,SXe as lY,gsn as lZ,Ub as l_,uct as la,yut as lb,Yen as lc,qen as ld,Qen as le,zm as lf,etn as lg,bu as lh,Id as li,Ca as lj,nT as lk,RB as ll,jd as lm,OB as ln,r0 as lo,aCt as lp,F$ as lq,Y_ as lr,Q5e as ls,fct as lt,mct as lu,zUt as lv,pct as lw,jJt as lx,AJt as ly,Gs as lz,ge as m,PJt as m$,kZt as m0,GXe as m1,AZt as m2,Mot as m3,Yv as m4,cen as m5,DXt as m6,len as m7,UF as m8,ld as m9,eYe as mA,ct as mB,VSe as mC,v$ as mD,bl as mE,S2e as mF,M_ as mG,iYe as mH,Ntn as mI,CS as mJ,jtn as mK,mXe as mL,dDt as mM,JKe as mN,sme as mO,ame as mP,V5 as mQ,B3 as mR,sF as mS,VDt as mT,ET as mU,lYe as mV,pqt as mW,n1e as mX,IJt as mY,RZt as mZ,RJt as m_,Wnt as ma,q5 as mb,yJt as mc,cD as md,_5 as me,b5 as mf,JXt as mg,ou as mh,x5 as mi,Ist as mj,Vb as mk,Ren as ml,OZt as mm,nit as mn,ZEe as mo,rde as mp,is as mq,qsn as mr,BZt as ms,FUt as mt,gZt as mu,yZt as mv,vZt as mw,CT as mx,B2 as my,XKe as mz,V3 as n,RIe as n$,xpe as n0,Xxe as n1,VXt as n2,aP as n3,kJt as n4,uP as n5,TJt as n6,EJt as n7,Zr as n8,Y5 as n9,_tn as nA,p9t as nB,h9t as nC,f9t as nD,m9t as nE,I9t as nF,_Ft as nG,j3 as nH,Gm as nI,Frt as nJ,Dde as nK,p5 as nL,b6e as nM,rot as nN,rs as nO,jDe as nP,wce as nQ,iFe as nR,JUe as nS,BFe as nT,hFe as nU,t3 as nV,M5 as nW,MF as nX,aht as nY,I3 as nZ,A3 as n_,Qnt as na,Gtt as nb,ift as nc,yBt as nd,Jv as ne,IT as nf,LXt as ng,PXt as nh,KTe as ni,ysn as nj,pue as nk,bh as nl,MD as nm,kD as nn,xfe as no,D5 as np,sJe as nq,$L as nr,Iue as ns,jue as nt,Rue as nu,jen as nv,Aen as nw,SFt as nx,zZt as ny,btn as nz,Ne as o,Su as o$,PIe as o0,oIe as o1,F6e as o2,QXt as o3,YXt as o4,Gst as o5,eU as o6,E0e as o7,wq as o8,WXt as o9,utn as oA,gtn as oB,htn as oC,ctn as oD,ftn as oE,itn as oF,dtn as oG,otn as oH,TU as oI,bct as oJ,Uut as oK,wct as oL,UXe as oM,oat as oN,y$ as oO,g$ as oP,vtn as oQ,Hct as oR,d0e as oS,ntn as oT,atn as oU,ren as oV,Yst as oW,_Z as oX,_Be as oY,dU as oZ,fUt as o_,$Xt as oa,sat as ob,z_ as oc,N0e as od,zd as oe,sct as of,Fft as og,uft as oh,LU as oi,ten as oj,Bct as ok,oc as ol,nat as om,B4e as on,stn as oo,ien as op,oen as oq,HXt as or,rZt as os,zXt as ot,GXt as ou,een as ov,mtn as ow,ptn as ox,ltn as oy,ytn as oz,xe as p,Xen as p$,Cl as p0,pNt as p1,JJt as p2,KEe as p3,hi as p4,Vat as p5,cct as p6,Pen as p7,Len as p8,Oen as p9,QK as pA,OT as pB,Sv as pC,PNt as pD,PW as pE,hU as pF,u$t as pG,Nsn as pH,jsn as pI,Tsn as pJ,ksn as pK,O$ as pL,jW as pM,Lf as pN,uw as pO,tf as pP,Ctn as pQ,zp as pR,JVt as pS,j$e as pT,uot as pU,x4t as pV,Jge as pW,Ien as pX,Hv as pY,wut as pZ,Ken as p_,Ven as pa,Uen as pb,MJt as pc,R5 as pd,Ben as pe,hN as pf,Jen as pg,Qlt as ph,EEe as pi,vNt as pj,xNt as pk,ts as pl,oo as pm,Fen as pn,dct as po,ZS as pp,Den as pq,Ksn as pr,T0e as ps,wmt as pt,OP as pu,zn as pv,qpe as pw,br as px,JZt as py,fJe as pz,h4t as q,Otn as q$,u0e as q0,IZt as q1,fZ as q2,nen as q3,vX as q4,qst as q5,sU as q6,Rut as q7,xtn as q8,FBt as q9,Vd as qA,Ffe as qB,OGe as qC,UGe as qD,aK as qE,FGe as qF,ja as qG,SGe as qH,i1 as qI,Ds as qJ,_u as qK,LD as qL,Hqe as qM,sGe as qN,_M as qO,lDt as qP,yGe as qQ,IDt as qR,Ltn as qS,Itn as qT,io as qU,BXe as qV,Atn as qW,Xt as qX,Rtn as qY,zxe as qZ,Ptn as q_,_sn as qa,Bae as qb,Cct as qc,qZt as qd,Sct as qe,Ect as qf,dt as qg,Jze as qh,hr as qi,Mt as qj,Lqe as qk,O2 as ql,Uqe as qm,Fqe as qn,$qe as qo,Bqe as qp,kc as qq,Dqe as qr,iGe as qs,Rfe as qt,lGe as qu,Lfe as qv,P2 as qw,R2 as qx,IGe as qy,NGe as qz,N4t as r,Y5t as r$,GZt as r0,$g as r1,uDt as r2,fDt as r3,Nv as r4,Nd as r5,Whe as r6,rtn as r7,QS as r8,T2e as r9,Wgt as rA,ktn as rB,Mtn as rC,Ttn as rD,Sxe as rE,YU as rF,e0 as rG,Jl as rH,arn as rI,orn as rJ,srn as rK,hs as rL,rrn as rM,Vwe as rN,t5t as rO,Bwe as rP,irn as rQ,px as rR,Fe as rS,Je as rT,ds as rU,lrn as rV,crn as rW,mrn as rX,I9 as rY,drn as rZ,urn as r_,N2e as ra,Phe as rb,k2e as rc,c$t as rd,Bt as re,XW as rf,lye as rg,a$t as rh,F_ as ri,Msn as rj,Esn as rk,SM as rl,O4t as rm,cVt as rn,f$t as ro,l$t as rp,Asn as rq,Df as rr,Vzt as rs,Qgt as rt,_ht as ru,bht as rv,XU as rw,bgt as rx,w1 as ry,Etn as rz,se as s,Hzt as s$,hu as s0,ZV as s1,yrn as s2,grn as s3,V9 as s4,Jy as s5,hrn as s6,nt as s7,Zc as s8,uCe as s9,nMe as sA,Gzt as sB,mn as sC,q6e as sD,iMe as sE,Wsn as sF,Mc as sG,zsn as sH,ac as sI,Q0e as sJ,hZ as sK,DEe as sL,LEe as sM,hNt as sN,yen as sO,x5e as sP,men as sQ,z6e as sR,H6e as sS,UZt as sT,Psn as sU,cu as sV,Stn as sW,ZAe as sX,qOt as sY,Rsn as sZ,NM as s_,ua as sa,_s as sb,ZCe as sc,wi as sd,jMt as se,G1 as sf,ec as sg,QV as sh,brn as si,MSe as sj,prn as sk,JFt as sl,xye as sm,Trn as sn,Ern as so,Jlt as sp,mf as sq,G2 as sr,SEe as ss,Crn as st,Mrn as su,krn as sv,Srn as sw,cNt as sx,_Nt as sy,lZt as sz,Xnn as t,nZt as t$,Dsn as t0,pme as t1,X3e as t2,Ci as t3,kJe as t4,cpe as t5,l0 as t6,fZt as t7,mZt as t8,V2 as t9,Xge as tA,h6e as tB,ZW as tC,PTe as tD,qn as tE,WO as tF,g6e as tG,qje as tH,cZt as tI,dZt as tJ,phe as tK,FU as tL,$v as tM,kf as tN,tq as tO,uZt as tP,Oo as tQ,AMe as tR,wZt as tS,w6e as tT,sZt as tU,t6e as tV,Ysn as tW,Qsn as tX,WZt as tY,KXt as tZ,qXt as t_,v2e as ta,d3 as tb,b2e as tc,Hfe as td,w2e as te,ss as tf,xJt as tg,FD as th,den as ti,hen as tj,fen as tk,Fq as tl,zNe as tm,GNe as tn,tje as to,_x as tp,wsn as tq,Csn as tr,ow as ts,eH as tt,owe as tu,tEt as tv,nEt as tw,NAt as tx,L5e as ty,Xk as tz,Ty as u,tZt as u0,$Kt as u1,Zen as u2,VKt as u3,Gsn as u4,sHt as u5,VTt as u6,Zs as u7,r1 as u8,n1 as u9,NX as uA,Cot as uB,HTt as uC,VQe as uD,jpe as uE,nHe as uF,On as uG,i0e as uH,wtn as uI,b5e as uJ,qrn as uK,t1 as ua,e1 as ub,Sl as uc,Zx as ud,Xx as ue,Qx as uf,rg as ug,Vf as uh,Pb as ui,ai as uj,ben as uk,Eot as ul,Yhe as um,SF as un,che as uo,net as up,set as uq,BF as ur,bF as us,WTt as ut,XXt as uu,ZXt as uv,kot as uw,olt as ux,xen as uy,eZt as uz,trn as v,Znn as w,Tqe as x,Q4 as y,iZt as z};
//# sourceMappingURL=index-B6XkJAXX.js.map
